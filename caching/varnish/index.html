<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8" data-next-head=""/><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes" data-next-head=""/><meta name="theme-color" content="#bd93f9" data-next-head=""/><link rel="icon" href="/favicon.ico" data-next-head=""/><link rel="preconnect" href="https://fonts.googleapis.com" data-next-head=""/><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="true" data-next-head=""/><title class="jsx-6ca0ba86c5b4bb40" data-next-head="">Varnish Cache Installation Guide Installation Guide - HowToMgr</title><meta name="description" content="Varnish Cache is a high-performance HTTP accelerator designed for content-heavy dynamic websites as well as APIs. It sits between your web server and clients, caching frequently requested content to dramatically improve response times and reduce server load." class="jsx-6ca0ba86c5b4bb40" data-next-head=""/><meta name="keywords" content="installation guides, tutorials, linux, docker, kubernetes, mobile-first, responsive" class="jsx-6ca0ba86c5b4bb40" data-next-head=""/><meta property="og:title" content="Varnish Cache Installation Guide Installation Guide - HowToMgr" class="jsx-6ca0ba86c5b4bb40" data-next-head=""/><meta property="og:description" content="Varnish Cache is a high-performance HTTP accelerator designed for content-heavy dynamic websites as well as APIs. It sits between your web server and clients, caching frequently requested content to dramatically improve response times and reduce server load." class="jsx-6ca0ba86c5b4bb40" data-next-head=""/><meta property="og:type" content="website" class="jsx-6ca0ba86c5b4bb40" data-next-head=""/><meta property="og:url" content="https://howtomgr.github.io" class="jsx-6ca0ba86c5b4bb40" data-next-head=""/><meta property="og:image" content="https://howtomgr.github.io/social-preview.png" class="jsx-6ca0ba86c5b4bb40" data-next-head=""/><meta property="twitter:card" content="summary_large_image" class="jsx-6ca0ba86c5b4bb40" data-next-head=""/><meta property="twitter:title" content="Varnish Cache Installation Guide Installation Guide - HowToMgr" class="jsx-6ca0ba86c5b4bb40" data-next-head=""/><meta property="twitter:description" content="Varnish Cache is a high-performance HTTP accelerator designed for content-heavy dynamic websites as well as APIs. It sits between your web server and clients, caching frequently requested content to dramatically improve response times and reduce server load." class="jsx-6ca0ba86c5b4bb40" data-next-head=""/><link rel="dns-prefetch" href="//api.github.com"/><link rel="dns-prefetch" href="//github.com"/><link rel="preload" href="/favicon.ico" as="image"/><meta name="application-name" content="HowToMgr"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="default"/><meta name="apple-mobile-web-app-title" content="HowToMgr"/><meta name="format-detection" content="telephone=no"/><meta name="mobile-web-app-capable" content="yes"/><noscript><style>
            .requires-js { display: none !important; }
            .no-js-message { display: block !important; }
          </style></noscript><link rel="preload" href="/_next/static/css/8f63910774442189.css" as="style"/><link rel="stylesheet" href="/_next/static/css/8f63910774442189.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-42372ed130431b0a.js"></script><script src="/_next/static/chunks/webpack-8cac0b4b405cede1.js" defer=""></script><script src="/_next/static/chunks/framework-a6e0b7e30f98059a.js" defer=""></script><script src="/_next/static/chunks/main-453f16463ca269d8.js" defer=""></script><script src="/_next/static/chunks/pages/_app-2c7289aecf732a54.js" defer=""></script><script src="/_next/static/chunks/473-0e819be9d34ec59b.js" defer=""></script><script src="/_next/static/chunks/pages/%5Bcategory%5D/%5Bguide%5D-be5cb82ed6bf6435.js" defer=""></script><script src="/_next/static/jbii9AwLMNdevCPx5HQmT/_buildManifest.js" defer=""></script><script src="/_next/static/jbii9AwLMNdevCPx5HQmT/_ssgManifest.js" defer=""></script><style id="__jsx-64efd206b36bc2dd">.breadcrumb.jsx-64efd206b36bc2dd{display:flex;align-items:center;gap:var(--space-2);margin-bottom:var(--space-6);font-size:var(--font-sm);color:var(--text-secondary);overflow-x:auto;white-space:nowrap;-webkit-overflow-scrolling:touch}.breadcrumb.jsx-64efd206b36bc2dd a.jsx-64efd206b36bc2dd{color:var(--accent-primary);text-decoration:none;flex-shrink:0}.breadcrumb.jsx-64efd206b36bc2dd a.jsx-64efd206b36bc2dd:hover{text-decoration:underline}.separator.jsx-64efd206b36bc2dd{color:var(--text-muted);flex-shrink:0}.current.jsx-64efd206b36bc2dd{color:var(--text-primary);font-weight:500;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.guide-header.jsx-64efd206b36bc2dd{background:var(--bg-secondary);border-radius:var(--border-radius-lg);padding:var(--space-6);margin-bottom:var(--space-8);border:1px solid var(--bg-surface)}.guide-title.jsx-64efd206b36bc2dd{color:var(--accent-primary);font-size:var(--font-3xl);margin-bottom:var(--space-4);line-height:1.2;word-break:break-word}.guide-description.jsx-64efd206b36bc2dd{color:var(--text-secondary);font-size:var(--font-lg);margin-bottom:var(--space-5);line-height:1.5}.guide-badges.jsx-64efd206b36bc2dd{display:flex;gap:var(--space-3);margin-bottom:var(--space-5);flex-wrap:wrap}.guide-actions.jsx-64efd206b36bc2dd{display:flex;gap:var(--space-3);flex-wrap:wrap}.difficulty-beginner.jsx-64efd206b36bc2dd{background:var(--accent-secondary);color:var(--bg-primary)}.difficulty-intermediate.jsx-64efd206b36bc2dd{background:var(--accent-warning);color:var(--bg-primary)}.difficulty-advanced.jsx-64efd206b36bc2dd{background:var(--accent-error);color:var(--bg-primary)}.guide-content.jsx-64efd206b36bc2dd{background:var(--bg-secondary);border-radius:var(--border-radius-lg);padding:var(--space-6);margin-bottom:var(--space-8);border:1px solid var(--bg-surface);overflow-x:hidden}.related-section.jsx-64efd206b36bc2dd{margin-bottom:var(--space-8)}.section-title.jsx-64efd206b36bc2dd{color:var(--accent-primary);font-size:var(--font-2xl);text-align:center;margin-bottom:var(--space-6)}.guide-navigation.jsx-64efd206b36bc2dd{display:flex;gap:var(--space-4);justify-content:center;flex-wrap:wrap;margin-bottom:var(--space-8)}.loading-container.jsx-64efd206b36bc2dd,.error-container.jsx-64efd206b36bc2dd{text-align:center;padding:var(--space-8)}.error-actions.jsx-64efd206b36bc2dd{display:flex;gap:var(--space-4);justify-content:center;margin-top:var(--space-6);flex-wrap:wrap}.toc-level-1.jsx-64efd206b36bc2dd{font-weight:600}.toc-level-2.jsx-64efd206b36bc2dd{margin-left:var(--space-4)}.toc-level-3.jsx-64efd206b36bc2dd{margin-left:var(--space-8);font-size:var(--font-xs)}@media(max-width:767px){.guide-header.jsx-64efd206b36bc2dd{padding:var(--space-4);margin-bottom:var(--space-6)}.guide-title.jsx-64efd206b36bc2dd{font-size:var(--font-2xl)}.guide-description.jsx-64efd206b36bc2dd{font-size:var(--font-base)}.guide-content.jsx-64efd206b36bc2dd{padding:var(--space-4);margin-bottom:var(--space-6)}.guide-badges.jsx-64efd206b36bc2dd{gap:var(--space-2)}.guide-actions.jsx-64efd206b36bc2dd{flex-direction:column}.guide-navigation.jsx-64efd206b36bc2dd{flex-direction:column}.breadcrumb.jsx-64efd206b36bc2dd{margin-bottom:var(--space-4)}}</style><style id="__jsx-6ca0ba86c5b4bb40">.app-container.jsx-6ca0ba86c5b4bb40{min-height:100vh;display:flex;flex-direction:column;padding-top:56px}.main-content.jsx-6ca0ba86c5b4bb40{flex:1;padding:var(--space-6)0}.mobile-footer.jsx-6ca0ba86c5b4bb40{background:var(--bg-secondary);border-top:1px solid var(--bg-surface);padding:var(--space-6)0;margin-top:auto}.footer-content.jsx-6ca0ba86c5b4bb40{text-align:center}.footer-links.jsx-6ca0ba86c5b4bb40{display:flex;justify-content:center;gap:var(--space-6);margin-bottom:var(--space-4);flex-wrap:wrap}.footer-links.jsx-6ca0ba86c5b4bb40 a.jsx-6ca0ba86c5b4bb40{color:var(--accent-primary);text-decoration:none;font-size:var(--font-sm)}.footer-links.jsx-6ca0ba86c5b4bb40 a.jsx-6ca0ba86c5b4bb40:hover{color:var(--accent-secondary)}.footer-separator.jsx-6ca0ba86c5b4bb40{height:1px;background:var(--bg-surface);margin:var(--space-4)auto;width:200px}.footer-text.jsx-6ca0ba86c5b4bb40,.footer-tech.jsx-6ca0ba86c5b4bb40{color:var(--text-secondary);font-size:var(--font-sm);margin-bottom:var(--space-2)}.footer-disclaimer.jsx-6ca0ba86c5b4bb40{color:var(--text-muted);font-size:var(--font-xs)}.footer-updated.jsx-6ca0ba86c5b4bb40{color:var(--text-muted);font-size:var(--font-xs);margin-top:var(--space-2)}.nav-links.jsx-6ca0ba86c5b4bb40{display:flex;gap:var(--space-4)}.nav-link.jsx-6ca0ba86c5b4bb40{color:var(--text-primary);text-decoration:none;padding:var(--space-2)var(--space-3);border-radius:var(--border-radius);font-size:var(--font-sm);font-weight:500;transition:var(--transition);min-height:36px;display:flex;align-items:center}.nav-link.jsx-6ca0ba86c5b4bb40:hover{background:var(--bg-surface);color:var(--accent-primary);text-decoration:none}[data-theme="light"].jsx-6ca0ba86c5b4bb40 .theme-icon-dark.jsx-6ca0ba86c5b4bb40{display:none}[data-theme="light"].jsx-6ca0ba86c5b4bb40 .theme-icon-light.jsx-6ca0ba86c5b4bb40{display:inline!important}@media(max-width:767px){.main-content.jsx-6ca0ba86c5b4bb40{padding:var(--space-4)0}.footer-links.jsx-6ca0ba86c5b4bb40{gap:var(--space-4)}}</style></head><body><noscript><div class="no-js-message" style="padding:1rem;background:#ff5555;color:#f8f8f2;text-align:center;font-size:0.9rem">This site requires JavaScript to function properly. Please enable JavaScript in your browser.</div></noscript><div id="__next"><div class="jsx-6ca0ba86c5b4bb40 app-container"><a href="#main-content" class="jsx-6ca0ba86c5b4bb40 skip-link">Skip to main content</a><nav class="jsx-6ca0ba86c5b4bb40 mobile-nav"><div class="jsx-6ca0ba86c5b4bb40 mobile-nav-content"><a class="mobile-brand" href="/"><span role="img" aria-label="Books" class="jsx-6ca0ba86c5b4bb40">📚</span>HowToMgr</a><div class="jsx-6ca0ba86c5b4bb40 nav-links"><a class="nav-link" href="/all/">All</a><a class="nav-link" href="/search/">Search</a></div><button aria-label="Toggle theme" title="Switch theme" class="jsx-6ca0ba86c5b4bb40 mobile-theme-toggle touch-target"><span class="jsx-6ca0ba86c5b4bb40 theme-icon-dark">🌙</span><span style="display:none" class="jsx-6ca0ba86c5b4bb40 theme-icon-light">☀️</span></button></div></nav><main id="main-content" tabindex="-1" class="jsx-6ca0ba86c5b4bb40 main-content"><div class="jsx-6ca0ba86c5b4bb40 container"><nav aria-label="Breadcrumb" class="jsx-64efd206b36bc2dd breadcrumb"><a href="/">Home</a><span class="jsx-64efd206b36bc2dd separator">→</span><a href="/caching/">Caching</a><span class="jsx-64efd206b36bc2dd separator">→</span><span class="jsx-64efd206b36bc2dd current">Varnish Cache Installation Guide</span></nav><header class="jsx-64efd206b36bc2dd guide-header"><div class="jsx-64efd206b36bc2dd guide-meta-top"><h1 class="jsx-64efd206b36bc2dd guide-title">Varnish Cache Installation Guide</h1><p class="jsx-64efd206b36bc2dd guide-description">Varnish Cache is a high-performance HTTP accelerator designed for content-heavy dynamic websites as well as APIs. It sits between your web server and clients, caching frequently requested content to dramatically improve response times and reduce server load.</p><div class="jsx-64efd206b36bc2dd guide-badges"><span class="jsx-64efd206b36bc2dd mobile-badge mobile-badge-primary">Caching</span><span class="jsx-64efd206b36bc2dd mobile-badge difficulty-intermediate">🟡<!-- --> <!-- -->intermediate</span><span class="jsx-64efd206b36bc2dd mobile-badge mobile-badge-info">10 min</span><span class="jsx-64efd206b36bc2dd mobile-badge mobile-badge-secondary">⏱️ <!-- -->15-30 minutes</span></div><div class="jsx-64efd206b36bc2dd guide-actions"><a href="https://github.com/howtomgr/varnish" target="_blank" rel="noopener" class="jsx-64efd206b36bc2dd btn btn-secondary">View on GitHub</a></div></div></header><article class="jsx-64efd206b36bc2dd guide-content"><nav class="jsx-64efd206b36bc2dd toc"><h4 class="jsx-64efd206b36bc2dd">Table of Contents</h4><ul class="jsx-64efd206b36bc2dd"><li class="jsx-64efd206b36bc2dd toc-level-2"><a href="#1-prerequisites" class="jsx-64efd206b36bc2dd">1. Prerequisites</a></li><li class="jsx-64efd206b36bc2dd toc-level-2"><a href="#2-supported-operating-systems" class="jsx-64efd206b36bc2dd">2. Supported Operating Systems</a></li><li class="jsx-64efd206b36bc2dd toc-level-2"><a href="#3-installation" class="jsx-64efd206b36bc2dd">3. Installation</a></li><li class="jsx-64efd206b36bc2dd toc-level-3"><a href="#rhelcentosrocky-linuxalmalinux" class="jsx-64efd206b36bc2dd">RHEL/CentOS/Rocky Linux/AlmaLinux</a></li><li class="jsx-64efd206b36bc2dd toc-level-3"><a href="#debianubuntu" class="jsx-64efd206b36bc2dd">Debian/Ubuntu</a></li><li class="jsx-64efd206b36bc2dd toc-level-3"><a href="#alpine-linux" class="jsx-64efd206b36bc2dd">Alpine Linux</a></li><li class="jsx-64efd206b36bc2dd toc-level-3"><a href="#macos" class="jsx-64efd206b36bc2dd">macOS</a></li><li class="jsx-64efd206b36bc2dd toc-level-3"><a href="#freebsd" class="jsx-64efd206b36bc2dd">FreeBSD</a></li><li class="jsx-64efd206b36bc2dd toc-level-3"><a href="#build-from-source" class="jsx-64efd206b36bc2dd">Build from Source</a></li><li class="jsx-64efd206b36bc2dd toc-level-2"><a href="#4-configuration" class="jsx-64efd206b36bc2dd">4. Configuration</a></li><li class="jsx-64efd206b36bc2dd toc-level-3"><a href="#basic-configuration-file" class="jsx-64efd206b36bc2dd">Basic Configuration File</a></li><li class="jsx-64efd206b36bc2dd toc-level-3"><a href="#service-configuration" class="jsx-64efd206b36bc2dd">Service Configuration</a></li><li class="jsx-64efd206b36bc2dd toc-level-3"><a href="#storage-backends" class="jsx-64efd206b36bc2dd">Storage Backends</a></li><li class="jsx-64efd206b36bc2dd toc-level-2"><a href="#advanced-vcl-examples" class="jsx-64efd206b36bc2dd">Advanced VCL Examples</a></li><li class="jsx-64efd206b36bc2dd toc-level-3"><a href="#wordpress-configuration" class="jsx-64efd206b36bc2dd">WordPress Configuration</a></li><li class="jsx-64efd206b36bc2dd toc-level-3"><a href="#load-balancing" class="jsx-64efd206b36bc2dd">Load Balancing</a></li><li class="jsx-64efd206b36bc2dd toc-level-3"><a href="#esi-edge-side-includes" class="jsx-64efd206b36bc2dd">ESI (Edge Side Includes)</a></li><li class="jsx-64efd206b36bc2dd toc-level-2"><a href="#8-performance-tuning" class="jsx-64efd206b36bc2dd">8. Performance Tuning</a></li><li class="jsx-64efd206b36bc2dd toc-level-3"><a href="#system-parameters" class="jsx-64efd206b36bc2dd">System Parameters</a></li><li class="jsx-64efd206b36bc2dd toc-level-3"><a href="#varnish-parameters" class="jsx-64efd206b36bc2dd">Varnish Parameters</a></li><li class="jsx-64efd206b36bc2dd toc-level-3"><a href="#storage-tuning" class="jsx-64efd206b36bc2dd">Storage Tuning</a></li><li class="jsx-64efd206b36bc2dd toc-level-2"><a href="#monitoring-and-statistics" class="jsx-64efd206b36bc2dd">Monitoring and Statistics</a></li><li class="jsx-64efd206b36bc2dd toc-level-3"><a href="#varnishstat" class="jsx-64efd206b36bc2dd">varnishstat</a></li><li class="jsx-64efd206b36bc2dd toc-level-3"><a href="#varnishlog" class="jsx-64efd206b36bc2dd">varnishlog</a></li><li class="jsx-64efd206b36bc2dd toc-level-3"><a href="#varnishtop" class="jsx-64efd206b36bc2dd">varnishtop</a></li><li class="jsx-64efd206b36bc2dd toc-level-3"><a href="#varnishhist" class="jsx-64efd206b36bc2dd">varnishhist</a></li><li class="jsx-64efd206b36bc2dd toc-level-2"><a href="#security-configuration" class="jsx-64efd206b36bc2dd">Security Configuration</a></li><li class="jsx-64efd206b36bc2dd toc-level-3"><a href="#acl-for-administration" class="jsx-64efd206b36bc2dd">ACL for Administration</a></li><li class="jsx-64efd206b36bc2dd toc-level-3"><a href="#rate-limiting" class="jsx-64efd206b36bc2dd">Rate Limiting</a></li><li class="jsx-64efd206b36bc2dd toc-level-3"><a href="#security-headers" class="jsx-64efd206b36bc2dd">Security Headers</a></li><li class="jsx-64efd206b36bc2dd toc-level-2"><a href="#integration-with-web-servers" class="jsx-64efd206b36bc2dd">Integration with Web Servers</a></li><li class="jsx-64efd206b36bc2dd toc-level-3"><a href="#nginx-backend" class="jsx-64efd206b36bc2dd">nginx Backend</a></li><li class="jsx-64efd206b36bc2dd toc-level-3"><a href="#apache-backend" class="jsx-64efd206b36bc2dd">Apache Backend</a></li><li class="jsx-64efd206b36bc2dd toc-level-2"><a href="#6-troubleshooting" class="jsx-64efd206b36bc2dd">6. Troubleshooting</a></li><li class="jsx-64efd206b36bc2dd toc-level-3"><a href="#common-issues" class="jsx-64efd206b36bc2dd">Common Issues</a></li><li class="jsx-64efd206b36bc2dd toc-level-3"><a href="#debug-mode" class="jsx-64efd206b36bc2dd">Debug Mode</a></li><li class="jsx-64efd206b36bc2dd toc-level-2"><a href="#maintenance" class="jsx-64efd206b36bc2dd">Maintenance</a></li><li class="jsx-64efd206b36bc2dd toc-level-3"><a href="#cache-invalidation" class="jsx-64efd206b36bc2dd">Cache Invalidation</a></li><li class="jsx-64efd206b36bc2dd toc-level-3"><a href="#9-backup-and-restore" class="jsx-64efd206b36bc2dd">9. Backup and Restore</a></li><li class="jsx-64efd206b36bc2dd toc-level-3"><a href="#updates" class="jsx-64efd206b36bc2dd">Updates</a></li><li class="jsx-64efd206b36bc2dd toc-level-2"><a href="#additional-resources" class="jsx-64efd206b36bc2dd">Additional Resources</a></li></ul></nav><div class="jsx-64efd206b36bc2dd readme-content"><p class="mobile-paragraph">Varnish Cache is a high-performance HTTP accelerator designed for content-heavy dynamic websites as well as APIs. It sits between your web server and clients, caching frequently requested content to dramatically improve response times and reduce server load.</p>
<h2 id="1-prerequisites" class="mobile-header">1. Prerequisites</h2>
<li class="mobile-list-item">Operating system: Linux, macOS, or Windows (WSL)</li>
<li class="mobile-list-item">Minimum 1GB RAM (more for larger caches)</li>
<li class="mobile-list-item">Backend web server (Apache, nginx, etc.)</li>
<li class="mobile-list-item">Administrative/sudo access</li>
<li class="mobile-list-item">Port 80 available (or custom port)</li>
<h2 id="2-supported-operating-systems" class="mobile-header">2. Supported Operating Systems</h2>
<p class="mobile-paragraph">This guide supports installation on:</p>
<li class="mobile-list-item">RHEL 8/9 and derivatives (CentOS Stream, Rocky Linux, AlmaLinux)</li>
<li class="mobile-list-item">Debian 11/12</li>
<li class="mobile-list-item">Ubuntu 20.04/22.04/24.04 LTS</li>
<li class="mobile-list-item">Arch Linux (rolling release)</li>
<li class="mobile-list-item">Alpine Linux 3.18+</li>
<li class="mobile-list-item">openSUSE Leap 15.5+ / Tumbleweed</li>
<li class="mobile-list-item">SUSE Linux Enterprise Server (SLES) 15+</li>
<li class="mobile-list-item">macOS 12+ (Monterey and later) </li>
<li class="mobile-list-item">FreeBSD 13+</li>
<li class="mobile-list-item">Windows 10/11/Server 2019+ (where applicable)</li>
<h2 id="3-installation" class="mobile-header">3. Installation</h2>
<h3 id="rhelcentosrocky-linuxalmalinux" class="mobile-header">RHEL/CentOS/Rocky Linux/AlmaLinux</h3>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash"># RHEL/CentOS 7
sudo yum install -y epel-release
sudo yum install -y varnish

# RHEL/CentOS/Rocky/AlmaLinux 8+
sudo dnf install -y epel-release
sudo dnf install -y varnish

# Varnish official repository (latest version)
# Add repository
curl -s https://packagecloud.io/install/repositories/varnishcache/varnish73/script.rpm.sh | sudo bash

# Install Varnish
sudo yum install -y varnish

# Enable and start service
sudo systemctl enable --now varnish</code></pre>
      </div>
    </div>
<h3 id="debianubuntu" class="mobile-header">Debian/Ubuntu</h3>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash"># Distribution packages
sudo apt update
sudo apt install -y varnish

# Varnish official repository (latest version)
# Install dependencies
sudo apt install -y debian-archive-keyring curl gnupg apt-transport-https

# Add repository
curl -fsSL https://packagecloud.io/varnishcache/varnish73/gpgkey | sudo gpg --dearmor -o /etc/apt/trusted.gpg.d/varnish.gpg
echo &quot;deb https://packagecloud.io/varnishcache/varnish73/ubuntu/ $(lsb_release -cs) main&quot; | sudo tee /etc/apt/sources.list.d/varnish.list

# Install Varnish
sudo apt update
sudo apt install -y varnish

# Enable and start service
sudo systemctl enable --now varnish</code></pre>
      </div>
    </div>
<h3 id="alpine-linux" class="mobile-header">Alpine Linux</h3>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash"># Install Varnish
apk add --no-cache varnish

# Install additional tools
apk add --no-cache varnish-libs varnish-dev

# Enable and start service
rc-update add varnishd default
rc-service varnishd start</code></pre>
      </div>
    </div>
<h3 id="macos" class="mobile-header">macOS</h3>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash"># Using Homebrew
brew install varnish

# Start Varnish
brew services start varnish

# Or run manually
varnishd -F -a :8080 -f /usr/local/etc/varnish/default.vcl</code></pre>
      </div>
    </div>
<h3 id="freebsd" class="mobile-header">FreeBSD</h3>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash"># Using pkg
pkg install varnish7

# Enable in rc.conf
echo &#039;varnishd_enable=&quot;YES&quot;&#039; &gt;&gt; /etc/rc.conf

# Start service
service varnishd start</code></pre>
      </div>
    </div>
<h3 id="build-from-source" class="mobile-header">Build from Source</h3>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash"># Install dependencies
# RHEL/CentOS
sudo yum groupinstall -y &quot;Development Tools&quot;
sudo yum install -y python3 python3-sphinx libedit-devel pcre-devel ncurses-devel

# Debian/Ubuntu
sudo apt install -y build-essential python3 python3-sphinx libedit-dev libpcre3-dev libncurses-dev

# Alpine
apk add --no-cache build-base python3 py3-sphinx libedit-dev pcre-dev ncurses-dev

# Download and build
wget https://varnish-cache.org/_downloads/varnish-7.3.0.tgz
tar -zxvf varnish-7.3.0.tgz
cd varnish-7.3.0

./configure --prefix=/usr/local
make
sudo make install</code></pre>
      </div>
    </div>
<h2 id="4-configuration" class="mobile-header">4. Configuration</h2>
<h3 id="basic-configuration-file" class="mobile-header">Basic Configuration File</h3>
<p class="mobile-paragraph">Create <code class="mobile-inline-code">/etc/varnish/default.vcl</code>:</p>
<div class="mobile-code-block" data-language="vcl">
      <div class="mobile-code-header">
        <span class="mobile-code-language">vcl</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-vcl">vcl 4.1;

import std;

# Default backend definition
backend default {
    .host = &quot;127.0.0.1&quot;;
    .port = &quot;8080&quot;;
    .probe = {
        .url = &quot;/&quot;;
        .interval = 5s;
        .timeout = 1s;
        .window = 5;
        .threshold = 3;
    }
}

# Access control list for purging
acl purge {
    &quot;localhost&quot;;
    &quot;127.0.0.1&quot;;
    &quot;::1&quot;;
}

# Client side
sub vcl_recv {
    # Normalize the header, remove the port
    set req.http.Host = regsub(req.http.Host, &quot;:[0-9]+&quot;, &quot;&quot;);
    
    # Normalize the query arguments
    set req.url = std.querysort(req.url);
    
    # Strip hash, server doesn&#039;t need it
    if (req.url ~ &quot;\#&quot;) {
        set req.url = regsub(req.url, &quot;\#.*$&quot;, &quot;&quot;);
    }
    
    # Strip trailing ?
    if (req.url ~ &quot;\?$&quot;) {
        set req.url = regsub(req.url, &quot;\?$&quot;, &quot;&quot;);
    }
    
    # Handle PURGE requests
    if (req.method == &quot;PURGE&quot;) {
        if (client.ip !~ purge) {
            return (synth(405, &quot;Not allowed.&quot;));
        }
        return (purge);
    }
    
    # Only cache GET or HEAD requests
    if (req.method != &quot;GET&quot; &amp;&amp; req.method != &quot;HEAD&quot;) {
        return (pass);
    }
    
    # Don&#039;t cache if cookies are present
    if (req.http.Authorization || req.http.Cookie) {
        return (pass);
    }
    
    # Cache static files
    if (req.url ~ &quot;\.(jpg|jpeg|gif|png|ico|css|zip|tgz|gz|rar|bz2|pdf|txt|tar|wav|bmp|rtf|js|flv|swf|html|htm)$&quot;) {
        unset req.http.Cookie;
        return (hash);
    }
    
    return (hash);
}

sub vcl_backend_response {
    # Set default TTL
    if (!beresp.http.Cache-Control) {
        set beresp.ttl = 1h;
    }
    
    # Cache static files for longer
    if (bereq.url ~ &quot;\.(jpg|jpeg|gif|png|ico|css|zip|tgz|gz|rar|bz2|pdf|txt|tar|wav|bmp|rtf|js|flv|swf|html|htm)$&quot;) {
        unset beresp.http.Set-Cookie;
        set beresp.ttl = 7d;
    }
    
    # Enable grace mode
    set beresp.grace = 1h;
    
    return (deliver);
}

sub vcl_deliver {
    # Add debug headers
    if (obj.hits &gt; 0) {
        set resp.http.X-Cache = &quot;HIT&quot;;
        set resp.http.X-Cache-Hits = obj.hits;
    } else {
        set resp.http.X-Cache = &quot;MISS&quot;;
    }
    
    # Remove some headers
    unset resp.http.X-Powered-By;
    unset resp.http.Server;
    unset resp.http.Via;
    unset resp.http.X-Varnish;
    
    return (deliver);
}</code></pre>
      </div>
    </div>
<h3 id="service-configuration" class="mobile-header">Service Configuration</h3>
<p class="mobile-paragraph">#### RHEL/CentOS/Debian/Ubuntu (systemd)</p>
<p class="mobile-paragraph">Edit <code class="mobile-inline-code">/etc/systemd/system/varnish.service.d/override.conf</code>:</p>
<div class="mobile-code-block" data-language="ini">
      <div class="mobile-code-header">
        <span class="mobile-code-language">ini</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-ini">[Service]
ExecStart=
ExecStart=/usr/sbin/varnishd \
    -a :80 \
    -T localhost:6082 \
    -f /etc/varnish/default.vcl \
    -s malloc,256m \
    -p default_ttl=120 \
    -p default_grace=3600</code></pre>
      </div>
    </div>
<p class="mobile-paragraph">Apply changes:</p>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash">sudo systemctl daemon-reload
sudo systemctl restart varnish</code></pre>
      </div>
    </div>
<p class="mobile-paragraph">#### Alpine Linux</p>
<p class="mobile-paragraph">Edit <code class="mobile-inline-code">/etc/conf.d/varnishd</code>:</p>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash"># Varnish configuration
VARNISHD_OPTS=&quot;-a :80 \
    -T localhost:6082 \
    -f /etc/varnish/default.vcl \
    -s malloc,256m \
    -p default_ttl=120 \
    -p default_grace=3600&quot;</code></pre>
      </div>
    </div>
<h3 id="storage-backends" class="mobile-header">Storage Backends</h3>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash"># Memory storage (fast, limited by RAM)
-s malloc,1g

# File storage (slower, more capacity)
-s file,/var/lib/varnish/varnish_storage.bin,10g

# Multiple storage backends
-s memory=malloc,256m \
-s disk=file,/var/lib/varnish/varnish_storage.bin,10g</code></pre>
      </div>
    </div>
<h2 id="advanced-vcl-examples" class="mobile-header">Advanced VCL Examples</h2>
<h3 id="wordpress-configuration" class="mobile-header">WordPress Configuration</h3>
<div class="mobile-code-block" data-language="vcl">
      <div class="mobile-code-header">
        <span class="mobile-code-language">vcl</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-vcl">vcl 4.1;

import std;

backend default {
    .host = &quot;127.0.0.1&quot;;
    .port = &quot;8080&quot;;
}

sub vcl_recv {
    # Don&#039;t cache WordPress admin
    if (req.url ~ &quot;wp-(admin|login|cron)&quot; || req.url ~ &quot;preview=true&quot;) {
        return (pass);
    }
    
    # Don&#039;t cache logged-in users
    if (req.http.Cookie ~ &quot;wordpress_logged_in_&quot;) {
        return (pass);
    }
    
    # Remove marketing cookies
    if (req.http.Cookie) {
        set req.http.Cookie = regsuball(req.http.Cookie, &quot;__utm.=[^;]+(; )?&quot;, &quot;&quot;);
        set req.http.Cookie = regsuball(req.http.Cookie, &quot;_ga=[^;]+(; )?&quot;, &quot;&quot;);
        set req.http.Cookie = regsuball(req.http.Cookie, &quot;_gid=[^;]+(; )?&quot;, &quot;&quot;);
        set req.http.Cookie = regsuball(req.http.Cookie, &quot;_gat=[^;]+(; )?&quot;, &quot;&quot;);
        set req.http.Cookie = regsuball(req.http.Cookie, &quot;utmctr=[^;]+(; )?&quot;, &quot;&quot;);
        set req.http.Cookie = regsuball(req.http.Cookie, &quot;utmcmd.=[^;]+(; )?&quot;, &quot;&quot;);
        set req.http.Cookie = regsuball(req.http.Cookie, &quot;utmccn.=[^;]+(; )?&quot;, &quot;&quot;);
        
        # Remove empty cookies
        if (req.http.Cookie == &quot;&quot;) {
            unset req.http.Cookie;
        }
    }
    
    return (hash);
}

sub vcl_backend_response {
    # Cache everything for 1 hour by default
    set beresp.ttl = 1h;
    
    # Don&#039;t cache error pages
    if (beresp.status &gt;= 400) {
        set beresp.ttl = 0s;
    }
    
    # Allow stale content for 24 hours
    set beresp.grace = 24h;
    
    return (deliver);
}</code></pre>
      </div>
    </div>
<h3 id="load-balancing" class="mobile-header">Load Balancing</h3>
<div class="mobile-code-block" data-language="vcl">
      <div class="mobile-code-header">
        <span class="mobile-code-language">vcl</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-vcl">vcl 4.1;

import directors;
import std;

# Define backends
backend web1 {
    .host = &quot;192.168.1.10&quot;;
    .port = &quot;80&quot;;
    .probe = {
        .url = &quot;/health&quot;;
        .interval = 5s;
        .timeout = 1s;
        .window = 5;
        .threshold = 3;
    }
}

backend web2 {
    .host = &quot;192.168.1.11&quot;;
    .port = &quot;80&quot;;
    .probe = {
        .url = &quot;/health&quot;;
        .interval = 5s;
        .timeout = 1s;
        .window = 5;
        .threshold = 3;
    }
}

# Initialize director
sub vcl_init {
    new web_director = directors.round_robin();
    web_director.add_backend(web1);
    web_director.add_backend(web2);
}

sub vcl_recv {
    set req.backend_hint = web_director.backend();
    return (hash);
}</code></pre>
      </div>
    </div>
<h3 id="esi-edge-side-includes" class="mobile-header">ESI (Edge Side Includes)</h3>
<div class="mobile-code-block" data-language="vcl">
      <div class="mobile-code-header">
        <span class="mobile-code-language">vcl</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-vcl">vcl 4.1;

backend default {
    .host = &quot;127.0.0.1&quot;;
    .port = &quot;8080&quot;;
}

sub vcl_recv {
    # Enable ESI processing
    set req.http.Surrogate-Capability = &quot;varnish=ESI/1.0&quot;;
    return (hash);
}

sub vcl_backend_response {
    # Check for ESI
    if (beresp.http.Surrogate-Control ~ &quot;ESI/1.0&quot;) {
        unset beresp.http.Surrogate-Control;
        set beresp.do_esi = true;
        set beresp.ttl = 24h;
    }
    
    return (deliver);
}</code></pre>
      </div>
    </div>
<h2 id="8-performance-tuning" class="mobile-header">8. Performance Tuning</h2>
<h3 id="system-parameters" class="mobile-header">System Parameters</h3>
<p class="mobile-paragraph">Add to <code class="mobile-inline-code">/etc/sysctl.conf</code>:</p>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash"># Network tuning
net.core.somaxconn = 1024
net.ipv4.tcp_fin_timeout = 30
net.ipv4.tcp_keepalive_time = 1200
net.ipv4.tcp_max_syn_backlog = 4096
net.ipv4.tcp_tw_reuse = 1

# Memory tuning
vm.swappiness = 10

# Apply changes
sudo sysctl -p</code></pre>
      </div>
    </div>
<h3 id="varnish-parameters" class="mobile-header">Varnish Parameters</h3>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash"># Thread pools (2 per CPU core)
varnishd -p thread_pools=4

# Thread pool size
varnishd -p thread_pool_min=100 -p thread_pool_max=4000

# Workspace size
varnishd -p workspace_backend=256k -p workspace_client=256k

# Listen queue depth
varnishd -p listen_depth=4096</code></pre>
      </div>
    </div>
<h3 id="storage-tuning" class="mobile-header">Storage Tuning</h3>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash"># For file storage, use separate disk
sudo mkdir -p /var/lib/varnish
sudo mount /dev/sdb1 /var/lib/varnish

# Use memory-mapped file
varnishd -s file,/var/lib/varnish/varnish_storage.bin,100g,1g

# Parameters: filename,size,granularity</code></pre>
      </div>
    </div>
<h2 id="monitoring-and-statistics" class="mobile-header">Monitoring and Statistics</h2>
<h3 id="varnishstat" class="mobile-header">varnishstat</h3>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash"># Real-time statistics
varnishstat

# One-time output
varnishstat -1

# Specific counters
varnishstat -f MAIN.cache_hit -f MAIN.cache_miss

# JSON output
varnishstat -j</code></pre>
      </div>
    </div>
<h3 id="varnishlog" class="mobile-header">varnishlog</h3>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash"># Live log
varnishlog

# Client requests
varnishlog -g request

# Backend requests
varnishlog -g backend

# Filter by URL
varnishlog -q &#039;ReqURL ~ &quot;^/api/&quot;&#039;

# Filter by response code
varnishlog -q &#039;RespStatus == 404&#039;</code></pre>
      </div>
    </div>
<h3 id="varnishtop" class="mobile-header">varnishtop</h3>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash"># Most requested URLs
varnishtop -i requrl

# Most common user agents
varnishtop -i reqheader -I User-Agent

# Backend requests
varnishtop -b -i requrl</code></pre>
      </div>
    </div>
<h3 id="varnishhist" class="mobile-header">varnishhist</h3>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash"># Response time histogram
varnishhist

# Client requests only
varnishhist -c

# Backend requests only
varnishhist -b</code></pre>
      </div>
    </div>
<h2 id="security-configuration" class="mobile-header">Security Configuration</h2>
<h3 id="acl-for-administration" class="mobile-header">ACL for Administration</h3>
<div class="mobile-code-block" data-language="vcl">
      <div class="mobile-code-header">
        <span class="mobile-code-language">vcl</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-vcl">acl admin {
    &quot;localhost&quot;;
    &quot;127.0.0.1&quot;;
    &quot;::1&quot;;
    &quot;192.168.1.0&quot;/24;
}

sub vcl_recv {
    # Restrict purge
    if (req.method == &quot;PURGE&quot;) {
        if (client.ip !~ admin) {
            return (synth(403, &quot;Forbidden&quot;));
        }
        return (purge);
    }
    
    # Restrict ban
    if (req.method == &quot;BAN&quot;) {
        if (client.ip !~ admin) {
            return (synth(403, &quot;Forbidden&quot;));
        }
        ban(&quot;req.http.host == &quot; + req.http.host);
        return (synth(200, &quot;Banned&quot;));
    }
}</code></pre>
      </div>
    </div>
<h3 id="rate-limiting" class="mobile-header">Rate Limiting</h3>
<div class="mobile-code-block" data-language="vcl">
      <div class="mobile-code-header">
        <span class="mobile-code-language">vcl</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-vcl">import vsthrottle;

sub vcl_recv {
    # Rate limit: 100 requests per 60 seconds per IP
    if (vsthrottle.is_denied(client.ip, 100, 60s)) {
        return (synth(429, &quot;Too Many Requests&quot;));
    }
}</code></pre>
      </div>
    </div>
<h3 id="security-headers" class="mobile-header">Security Headers</h3>
<div class="mobile-code-block" data-language="vcl">
      <div class="mobile-code-header">
        <span class="mobile-code-language">vcl</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-vcl">sub vcl_deliver {
    # Security headers
    set resp.http.X-Frame-Options = &quot;SAMEORIGIN&quot;;
    set resp.http.X-Content-Type-Options = &quot;nosniff&quot;;
    set resp.http.X-XSS-Protection = &quot;1; mode=block&quot;;
    set resp.http.Referrer-Policy = &quot;strict-origin-when-cross-origin&quot;;
    
    # HSTS (only with HTTPS)
    if (req.http.X-Forwarded-Proto == &quot;https&quot;) {
        set resp.http.Strict-Transport-Security = &quot;max-age=31536000; includeSubDomains&quot;;
    }
}</code></pre>
      </div>
    </div>
<h2 id="integration-with-web-servers" class="mobile-header">Integration with Web Servers</h2>
<h3 id="nginx-backend" class="mobile-header">nginx Backend</h3>
<div class="mobile-code-block" data-language="nginx">
      <div class="mobile-code-header">
        <span class="mobile-code-language">nginx</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-nginx">server {
    listen 8080;
    server_name example.com;
    
    # Real IP from Varnish
    set_real_ip_from 127.0.0.1;
    real_ip_header X-Forwarded-For;
    
    location / {
        root /var/www/html;
        index index.html;
    }
    
    # Health check endpoint
    location /health {
        access_log off;
        return 200 &quot;OK&quot;;
    }
}</code></pre>
      </div>
    </div>
<h3 id="apache-backend" class="mobile-header">Apache Backend</h3>
<div class="mobile-code-block" data-language="apache">
      <div class="mobile-code-header">
        <span class="mobile-code-language">apache</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-apache">Listen 8080
&lt;VirtualHost *:8080&gt;
    ServerName example.com
    DocumentRoot /var/www/html
    
    # Real IP from Varnish
    RemoteIPHeader X-Forwarded-For
    RemoteIPInternalProxy 127.0.0.1
    
    # Logging with real IP
    LogFormat &quot;%a %l %u %t \&quot;%r\&quot; %&gt;s %b&quot; varnish
    CustomLog /var/log/apache2/access.log varnish
&lt;/VirtualHost&gt;</code></pre>
      </div>
    </div>
<h2 id="6-troubleshooting" class="mobile-header">6. Troubleshooting</h2>
<h3 id="common-issues" class="mobile-header">Common Issues</h3>
<p class="mobile-paragraph">1. <strong>503 Backend fetch failed</strong>:</p>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash"># Check backend health
varnishadm backend.list

# Test backend directly
curl -I http://127.0.0.1:8080/

# Check VCL syntax
varnishd -C -f /etc/varnish/default.vcl</code></pre>
      </div>
    </div>
<p class="mobile-paragraph">2. <strong>Low hit rate</strong>:</p>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash"># Check what&#039;s not being cached
varnishlog -g request -q &quot;VCL_call eq &#039;PASS&#039;&quot;

# Check cookies
varnishlog -g request -i ReqHeader -I Cookie</code></pre>
      </div>
    </div>
<p class="mobile-paragraph">3. <strong>Memory issues</strong>:</p>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash"># Check memory usage
varnishstat -f MAIN.g_bytes

# Adjust storage size
sudo systemctl edit varnish
# Change -s malloc,256m to appropriate size</code></pre>
      </div>
    </div>
<h3 id="debug-mode" class="mobile-header">Debug Mode</h3>
<div class="mobile-code-block" data-language="vcl">
      <div class="mobile-code-header">
        <span class="mobile-code-language">vcl</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-vcl">sub vcl_deliver {
    # Debug headers (remove in production)
    set resp.http.X-Cache-Hits = obj.hits;
    set resp.http.X-Cache-TTL = obj.ttl;
    set resp.http.X-Cache-Grace = obj.grace;
    
    if (obj.hits &gt; 0) {
        set resp.http.X-Cache = &quot;HIT&quot;;
    } else {
        set resp.http.X-Cache = &quot;MISS&quot;;
    }
}</code></pre>
      </div>
    </div>
<h2 id="maintenance" class="mobile-header">Maintenance</h2>
<h3 id="cache-invalidation" class="mobile-header">Cache Invalidation</h3>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash"># Purge specific URL
curl -X PURGE http://localhost/path/to/page

# Ban pattern
varnishadm ban &quot;req.url ~ ^/images/&quot;

# Clear entire cache
varnishadm ban &quot;req.url ~ .&quot;</code></pre>
      </div>
    </div>
<h3 id="9-backup-and-restore" class="mobile-header">9. Backup and Restore</h3>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash"># Backup VCL
cp /etc/varnish/default.vcl /backup/default.vcl.$(date +%Y%m%d)

# Test new VCL
varnishd -C -f /etc/varnish/new.vcl

# Load new VCL without restart
varnishadm vcl.load newconfig /etc/varnish/new.vcl
varnishadm vcl.use newconfig</code></pre>
      </div>
    </div>
<h3 id="updates" class="mobile-header">Updates</h3>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash"># RHEL/CentOS
sudo yum update varnish

# Debian/Ubuntu
sudo apt update &amp;&amp; sudo apt upgrade varnish

# Check version
varnishd -V</code></pre>
      </div>
    </div>
<h2 id="additional-resources" class="mobile-header">Additional Resources</h2>
<li class="mobile-list-item"><a href="https://varnish-cache.org/docs/" target="_blank" rel="noopener" class="mobile-link">Official Documentation</a></li>
<li class="mobile-list-item"><a href="https://varnish-cache.org/docs/trunk/reference/vcl.html" target="_blank" rel="noopener" class="mobile-link">VCL Reference</a></li>
<li class="mobile-list-item"><a href="https://book.varnish-software.com/" target="_blank" rel="noopener" class="mobile-link">Varnish Book</a></li>
<li class="mobile-list-item"><a href="https://github.com/varnishcache/varnish-cache" target="_blank" rel="noopener" class="mobile-link">GitHub Repository</a></li>
<li class="mobile-list-item"><a href="https://varnish-cache.org/lists/" target="_blank" rel="noopener" class="mobile-link">Community Forum</a></li>
<li class="mobile-list-item"><a href="https://varnish-cache.org/vmods/" target="_blank" rel="noopener" class="mobile-link">Varnish Modules (VMODs)</a></li>
<p class="mobile-paragraph">---</p>
<p class="mobile-paragraph"><strong>Note:</strong> This guide is part of the <a href="https://howtomgr.github.io" target="_blank" rel="noopener" class="mobile-link">HowToMgr</a> collection. Always refer to official documentation for the most up-to-date information.</p></div></article><section class="jsx-64efd206b36bc2dd related-section"><h2 class="jsx-64efd206b36bc2dd section-title">Related <!-- -->Caching<!-- --> Guides</h2><div class="jsx-64efd206b36bc2dd mobile-grid"><a class="mobile-card" href="/caching/memcached/"><div class="jsx-64efd206b36bc2dd mobile-card-header"><h3 class="jsx-64efd206b36bc2dd mobile-card-title">Memcached Installation Guide</h3><p class="jsx-64efd206b36bc2dd mobile-card-description">Memcached is a free and open-source, high-performance, distributed memory object caching system. Originally developed by Danga Interactive for LiveJournal, it&#x27;s now used by many high-traffic websites as an in-memory key-value store that significantly reduces database load and improves application response times. It serves as a FOSS alternative to commercial caching solutions like Redis Enterprise or AWS ElastiCache.</p></div><div class="jsx-64efd206b36bc2dd mobile-card-meta"><span class="jsx-64efd206b36bc2dd mobile-badge mobile-badge-info">15 min</span></div></a></div></section><nav class="jsx-64efd206b36bc2dd guide-navigation"><a class="btn btn-secondary" href="/caching/">← All <!-- -->Caching</a><a class="btn btn-secondary" href="/">All Categories</a></nav></div></main><footer class="jsx-6ca0ba86c5b4bb40 mobile-footer"><div class="jsx-6ca0ba86c5b4bb40 container"><div class="jsx-6ca0ba86c5b4bb40 footer-content"><div class="jsx-6ca0ba86c5b4bb40 footer-links"><a href="/">Home</a><a href="https://github.com/howtomgr" target="_blank" rel="noopener" class="jsx-6ca0ba86c5b4bb40">GitHub</a><a href="https://github.com/howtomgr/howtomgr.github.io" target="_blank" rel="noopener" class="jsx-6ca0ba86c5b4bb40">Source</a></div><div class="jsx-6ca0ba86c5b4bb40 footer-separator"></div><p class="jsx-6ca0ba86c5b4bb40 footer-text">© <!-- -->2025<!-- --> HowToMgr Organization. Open source installation guides.</p><p class="jsx-6ca0ba86c5b4bb40 footer-tech">Built with ❤️ using Next.js + GitHub Pages</p><p class="jsx-6ca0ba86c5b4bb40 footer-disclaimer"><small class="jsx-6ca0ba86c5b4bb40">All guides are provided as-is. Please review and test before production use.</small></p></div></div></footer></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"guide":{"name":"varnish","displayName":"Varnish Cache Installation Guide","slug":"varnish","description":"Varnish Cache is a high-performance HTTP accelerator designed for content-heavy dynamic websites as well as APIs. It sits between your web server and clients, caching frequently requested content to dramatically improve response times and reduce server load.","category":"caching","subcategory":"caching","difficultyLevel":"intermediate","estimatedSetupTime":"15-30 minutes","supportedOS":["rhel","centos","rocky","almalinux","debian","ubuntu","alpine","macos","freebsd","windows"],"defaultPorts":[1,80,6082,8080],"installationMethods":["native-packages","source-compilation"],"features":["multi-os-support","comprehensive-documentation","security-hardening","performance-optimization","backup-restore-procedures","troubleshooting-guides"],"tags":["caching","observability","web-services","networking","security","data-protection"],"maintenanceStatus":"active","specVersion":"2.0","version":"1.0.0","license":"Open Source","websiteUrl":"https://howtomgr.github.io/caching/varnish","documentationUrl":"https://howtomgr.github.io/caching/varnish","language":null,"stars":0,"forks":0,"topics":[],"githubUrl":"https://github.com/howtomgr/varnish","updatedAt":"2025-09-16T18:00:30Z","createdAt":"2025-09-16T08:36:19Z","readmeRaw":"# Varnish Cache Installation Guide\n\nVarnish Cache is a high-performance HTTP accelerator designed for content-heavy dynamic websites as well as APIs. It sits between your web server and clients, caching frequently requested content to dramatically improve response times and reduce server load.\n\n## Table of Contents\n1. [Prerequisites](#prerequisites)\n2. [Supported Operating Systems](#supported-operating-systems)\n3. [Installation](#installation)\n4. [Configuration](#configuration)\n5. [Service Management](#service-management)\n6. [Troubleshooting](#troubleshooting)\n7. [Security Considerations](#security-considerations)\n8. [Performance Tuning](#performance-tuning)\n9. [Backup and Restore](#backup-and-restore)\n10. [System Requirements](#system-requirements)\n11. [Support](#support)\n12. [Contributing](#contributing)\n13. [License](#license)\n14. [Acknowledgments](#acknowledgments)\n15. [Version History](#version-history)\n16. [Appendices](#appendices)\n\n## 1. Prerequisites\n\n- Operating system: Linux, macOS, or Windows (WSL)\n- Minimum 1GB RAM (more for larger caches)\n- Backend web server (Apache, nginx, etc.)\n- Administrative/sudo access\n- Port 80 available (or custom port)\n\n\n## 2. Supported Operating Systems\n\nThis guide supports installation on:\n- RHEL 8/9 and derivatives (CentOS Stream, Rocky Linux, AlmaLinux)\n- Debian 11/12\n- Ubuntu 20.04/22.04/24.04 LTS\n- Arch Linux (rolling release)\n- Alpine Linux 3.18+\n- openSUSE Leap 15.5+ / Tumbleweed\n- SUSE Linux Enterprise Server (SLES) 15+\n- macOS 12+ (Monterey and later) \n- FreeBSD 13+\n- Windows 10/11/Server 2019+ (where applicable)\n\n## 3. Installation\n\n### RHEL/CentOS/Rocky Linux/AlmaLinux\n\n```bash\n# RHEL/CentOS 7\nsudo yum install -y epel-release\nsudo yum install -y varnish\n\n# RHEL/CentOS/Rocky/AlmaLinux 8+\nsudo dnf install -y epel-release\nsudo dnf install -y varnish\n\n# Varnish official repository (latest version)\n# Add repository\ncurl -s https://packagecloud.io/install/repositories/varnishcache/varnish73/script.rpm.sh | sudo bash\n\n# Install Varnish\nsudo yum install -y varnish\n\n# Enable and start service\nsudo systemctl enable --now varnish\n```\n\n### Debian/Ubuntu\n\n```bash\n# Distribution packages\nsudo apt update\nsudo apt install -y varnish\n\n# Varnish official repository (latest version)\n# Install dependencies\nsudo apt install -y debian-archive-keyring curl gnupg apt-transport-https\n\n# Add repository\ncurl -fsSL https://packagecloud.io/varnishcache/varnish73/gpgkey | sudo gpg --dearmor -o /etc/apt/trusted.gpg.d/varnish.gpg\necho \"deb https://packagecloud.io/varnishcache/varnish73/ubuntu/ $(lsb_release -cs) main\" | sudo tee /etc/apt/sources.list.d/varnish.list\n\n# Install Varnish\nsudo apt update\nsudo apt install -y varnish\n\n# Enable and start service\nsudo systemctl enable --now varnish\n```\n\n### Alpine Linux\n\n```bash\n# Install Varnish\napk add --no-cache varnish\n\n# Install additional tools\napk add --no-cache varnish-libs varnish-dev\n\n# Enable and start service\nrc-update add varnishd default\nrc-service varnishd start\n```\n\n### macOS\n\n```bash\n# Using Homebrew\nbrew install varnish\n\n# Start Varnish\nbrew services start varnish\n\n# Or run manually\nvarnishd -F -a :8080 -f /usr/local/etc/varnish/default.vcl\n```\n\n### FreeBSD\n\n```bash\n# Using pkg\npkg install varnish7\n\n# Enable in rc.conf\necho 'varnishd_enable=\"YES\"' \u003e\u003e /etc/rc.conf\n\n# Start service\nservice varnishd start\n```\n\n### Build from Source\n\n```bash\n# Install dependencies\n# RHEL/CentOS\nsudo yum groupinstall -y \"Development Tools\"\nsudo yum install -y python3 python3-sphinx libedit-devel pcre-devel ncurses-devel\n\n# Debian/Ubuntu\nsudo apt install -y build-essential python3 python3-sphinx libedit-dev libpcre3-dev libncurses-dev\n\n# Alpine\napk add --no-cache build-base python3 py3-sphinx libedit-dev pcre-dev ncurses-dev\n\n# Download and build\nwget https://varnish-cache.org/_downloads/varnish-7.3.0.tgz\ntar -zxvf varnish-7.3.0.tgz\ncd varnish-7.3.0\n\n./configure --prefix=/usr/local\nmake\nsudo make install\n```\n\n## 4. Configuration\n\n### Basic Configuration File\n\nCreate `/etc/varnish/default.vcl`:\n```vcl\nvcl 4.1;\n\nimport std;\n\n# Default backend definition\nbackend default {\n    .host = \"127.0.0.1\";\n    .port = \"8080\";\n    .probe = {\n        .url = \"/\";\n        .interval = 5s;\n        .timeout = 1s;\n        .window = 5;\n        .threshold = 3;\n    }\n}\n\n# Access control list for purging\nacl purge {\n    \"localhost\";\n    \"127.0.0.1\";\n    \"::1\";\n}\n\n# Client side\nsub vcl_recv {\n    # Normalize the header, remove the port\n    set req.http.Host = regsub(req.http.Host, \":[0-9]+\", \"\");\n    \n    # Normalize the query arguments\n    set req.url = std.querysort(req.url);\n    \n    # Strip hash, server doesn't need it\n    if (req.url ~ \"\\#\") {\n        set req.url = regsub(req.url, \"\\#.*$\", \"\");\n    }\n    \n    # Strip trailing ?\n    if (req.url ~ \"\\?$\") {\n        set req.url = regsub(req.url, \"\\?$\", \"\");\n    }\n    \n    # Handle PURGE requests\n    if (req.method == \"PURGE\") {\n        if (client.ip !~ purge) {\n            return (synth(405, \"Not allowed.\"));\n        }\n        return (purge);\n    }\n    \n    # Only cache GET or HEAD requests\n    if (req.method != \"GET\" \u0026\u0026 req.method != \"HEAD\") {\n        return (pass);\n    }\n    \n    # Don't cache if cookies are present\n    if (req.http.Authorization || req.http.Cookie) {\n        return (pass);\n    }\n    \n    # Cache static files\n    if (req.url ~ \"\\.(jpg|jpeg|gif|png|ico|css|zip|tgz|gz|rar|bz2|pdf|txt|tar|wav|bmp|rtf|js|flv|swf|html|htm)$\") {\n        unset req.http.Cookie;\n        return (hash);\n    }\n    \n    return (hash);\n}\n\nsub vcl_backend_response {\n    # Set default TTL\n    if (!beresp.http.Cache-Control) {\n        set beresp.ttl = 1h;\n    }\n    \n    # Cache static files for longer\n    if (bereq.url ~ \"\\.(jpg|jpeg|gif|png|ico|css|zip|tgz|gz|rar|bz2|pdf|txt|tar|wav|bmp|rtf|js|flv|swf|html|htm)$\") {\n        unset beresp.http.Set-Cookie;\n        set beresp.ttl = 7d;\n    }\n    \n    # Enable grace mode\n    set beresp.grace = 1h;\n    \n    return (deliver);\n}\n\nsub vcl_deliver {\n    # Add debug headers\n    if (obj.hits \u003e 0) {\n        set resp.http.X-Cache = \"HIT\";\n        set resp.http.X-Cache-Hits = obj.hits;\n    } else {\n        set resp.http.X-Cache = \"MISS\";\n    }\n    \n    # Remove some headers\n    unset resp.http.X-Powered-By;\n    unset resp.http.Server;\n    unset resp.http.Via;\n    unset resp.http.X-Varnish;\n    \n    return (deliver);\n}\n```\n\n### Service Configuration\n\n#### RHEL/CentOS/Debian/Ubuntu (systemd)\n\nEdit `/etc/systemd/system/varnish.service.d/override.conf`:\n```ini\n[Service]\nExecStart=\nExecStart=/usr/sbin/varnishd \\\n    -a :80 \\\n    -T localhost:6082 \\\n    -f /etc/varnish/default.vcl \\\n    -s malloc,256m \\\n    -p default_ttl=120 \\\n    -p default_grace=3600\n```\n\nApply changes:\n```bash\nsudo systemctl daemon-reload\nsudo systemctl restart varnish\n```\n\n#### Alpine Linux\n\nEdit `/etc/conf.d/varnishd`:\n```bash\n# Varnish configuration\nVARNISHD_OPTS=\"-a :80 \\\n    -T localhost:6082 \\\n    -f /etc/varnish/default.vcl \\\n    -s malloc,256m \\\n    -p default_ttl=120 \\\n    -p default_grace=3600\"\n```\n\n### Storage Backends\n\n```bash\n# Memory storage (fast, limited by RAM)\n-s malloc,1g\n\n# File storage (slower, more capacity)\n-s file,/var/lib/varnish/varnish_storage.bin,10g\n\n# Multiple storage backends\n-s memory=malloc,256m \\\n-s disk=file,/var/lib/varnish/varnish_storage.bin,10g\n```\n\n## Advanced VCL Examples\n\n### WordPress Configuration\n\n```vcl\nvcl 4.1;\n\nimport std;\n\nbackend default {\n    .host = \"127.0.0.1\";\n    .port = \"8080\";\n}\n\nsub vcl_recv {\n    # Don't cache WordPress admin\n    if (req.url ~ \"wp-(admin|login|cron)\" || req.url ~ \"preview=true\") {\n        return (pass);\n    }\n    \n    # Don't cache logged-in users\n    if (req.http.Cookie ~ \"wordpress_logged_in_\") {\n        return (pass);\n    }\n    \n    # Remove marketing cookies\n    if (req.http.Cookie) {\n        set req.http.Cookie = regsuball(req.http.Cookie, \"__utm.=[^;]+(; )?\", \"\");\n        set req.http.Cookie = regsuball(req.http.Cookie, \"_ga=[^;]+(; )?\", \"\");\n        set req.http.Cookie = regsuball(req.http.Cookie, \"_gid=[^;]+(; )?\", \"\");\n        set req.http.Cookie = regsuball(req.http.Cookie, \"_gat=[^;]+(; )?\", \"\");\n        set req.http.Cookie = regsuball(req.http.Cookie, \"utmctr=[^;]+(; )?\", \"\");\n        set req.http.Cookie = regsuball(req.http.Cookie, \"utmcmd.=[^;]+(; )?\", \"\");\n        set req.http.Cookie = regsuball(req.http.Cookie, \"utmccn.=[^;]+(; )?\", \"\");\n        \n        # Remove empty cookies\n        if (req.http.Cookie == \"\") {\n            unset req.http.Cookie;\n        }\n    }\n    \n    return (hash);\n}\n\nsub vcl_backend_response {\n    # Cache everything for 1 hour by default\n    set beresp.ttl = 1h;\n    \n    # Don't cache error pages\n    if (beresp.status \u003e= 400) {\n        set beresp.ttl = 0s;\n    }\n    \n    # Allow stale content for 24 hours\n    set beresp.grace = 24h;\n    \n    return (deliver);\n}\n```\n\n### Load Balancing\n\n```vcl\nvcl 4.1;\n\nimport directors;\nimport std;\n\n# Define backends\nbackend web1 {\n    .host = \"192.168.1.10\";\n    .port = \"80\";\n    .probe = {\n        .url = \"/health\";\n        .interval = 5s;\n        .timeout = 1s;\n        .window = 5;\n        .threshold = 3;\n    }\n}\n\nbackend web2 {\n    .host = \"192.168.1.11\";\n    .port = \"80\";\n    .probe = {\n        .url = \"/health\";\n        .interval = 5s;\n        .timeout = 1s;\n        .window = 5;\n        .threshold = 3;\n    }\n}\n\n# Initialize director\nsub vcl_init {\n    new web_director = directors.round_robin();\n    web_director.add_backend(web1);\n    web_director.add_backend(web2);\n}\n\nsub vcl_recv {\n    set req.backend_hint = web_director.backend();\n    return (hash);\n}\n```\n\n### ESI (Edge Side Includes)\n\n```vcl\nvcl 4.1;\n\nbackend default {\n    .host = \"127.0.0.1\";\n    .port = \"8080\";\n}\n\nsub vcl_recv {\n    # Enable ESI processing\n    set req.http.Surrogate-Capability = \"varnish=ESI/1.0\";\n    return (hash);\n}\n\nsub vcl_backend_response {\n    # Check for ESI\n    if (beresp.http.Surrogate-Control ~ \"ESI/1.0\") {\n        unset beresp.http.Surrogate-Control;\n        set beresp.do_esi = true;\n        set beresp.ttl = 24h;\n    }\n    \n    return (deliver);\n}\n```\n\n## 8. Performance Tuning\n\n### System Parameters\n\nAdd to `/etc/sysctl.conf`:\n```bash\n# Network tuning\nnet.core.somaxconn = 1024\nnet.ipv4.tcp_fin_timeout = 30\nnet.ipv4.tcp_keepalive_time = 1200\nnet.ipv4.tcp_max_syn_backlog = 4096\nnet.ipv4.tcp_tw_reuse = 1\n\n# Memory tuning\nvm.swappiness = 10\n\n# Apply changes\nsudo sysctl -p\n```\n\n### Varnish Parameters\n\n```bash\n# Thread pools (2 per CPU core)\nvarnishd -p thread_pools=4\n\n# Thread pool size\nvarnishd -p thread_pool_min=100 -p thread_pool_max=4000\n\n# Workspace size\nvarnishd -p workspace_backend=256k -p workspace_client=256k\n\n# Listen queue depth\nvarnishd -p listen_depth=4096\n```\n\n### Storage Tuning\n\n```bash\n# For file storage, use separate disk\nsudo mkdir -p /var/lib/varnish\nsudo mount /dev/sdb1 /var/lib/varnish\n\n# Use memory-mapped file\nvarnishd -s file,/var/lib/varnish/varnish_storage.bin,100g,1g\n\n# Parameters: filename,size,granularity\n```\n\n## Monitoring and Statistics\n\n### varnishstat\n\n```bash\n# Real-time statistics\nvarnishstat\n\n# One-time output\nvarnishstat -1\n\n# Specific counters\nvarnishstat -f MAIN.cache_hit -f MAIN.cache_miss\n\n# JSON output\nvarnishstat -j\n```\n\n### varnishlog\n\n```bash\n# Live log\nvarnishlog\n\n# Client requests\nvarnishlog -g request\n\n# Backend requests\nvarnishlog -g backend\n\n# Filter by URL\nvarnishlog -q 'ReqURL ~ \"^/api/\"'\n\n# Filter by response code\nvarnishlog -q 'RespStatus == 404'\n```\n\n### varnishtop\n\n```bash\n# Most requested URLs\nvarnishtop -i requrl\n\n# Most common user agents\nvarnishtop -i reqheader -I User-Agent\n\n# Backend requests\nvarnishtop -b -i requrl\n```\n\n### varnishhist\n\n```bash\n# Response time histogram\nvarnishhist\n\n# Client requests only\nvarnishhist -c\n\n# Backend requests only\nvarnishhist -b\n```\n\n## Security Configuration\n\n### ACL for Administration\n\n```vcl\nacl admin {\n    \"localhost\";\n    \"127.0.0.1\";\n    \"::1\";\n    \"192.168.1.0\"/24;\n}\n\nsub vcl_recv {\n    # Restrict purge\n    if (req.method == \"PURGE\") {\n        if (client.ip !~ admin) {\n            return (synth(403, \"Forbidden\"));\n        }\n        return (purge);\n    }\n    \n    # Restrict ban\n    if (req.method == \"BAN\") {\n        if (client.ip !~ admin) {\n            return (synth(403, \"Forbidden\"));\n        }\n        ban(\"req.http.host == \" + req.http.host);\n        return (synth(200, \"Banned\"));\n    }\n}\n```\n\n### Rate Limiting\n\n```vcl\nimport vsthrottle;\n\nsub vcl_recv {\n    # Rate limit: 100 requests per 60 seconds per IP\n    if (vsthrottle.is_denied(client.ip, 100, 60s)) {\n        return (synth(429, \"Too Many Requests\"));\n    }\n}\n```\n\n### Security Headers\n\n```vcl\nsub vcl_deliver {\n    # Security headers\n    set resp.http.X-Frame-Options = \"SAMEORIGIN\";\n    set resp.http.X-Content-Type-Options = \"nosniff\";\n    set resp.http.X-XSS-Protection = \"1; mode=block\";\n    set resp.http.Referrer-Policy = \"strict-origin-when-cross-origin\";\n    \n    # HSTS (only with HTTPS)\n    if (req.http.X-Forwarded-Proto == \"https\") {\n        set resp.http.Strict-Transport-Security = \"max-age=31536000; includeSubDomains\";\n    }\n}\n```\n\n## Integration with Web Servers\n\n### nginx Backend\n\n```nginx\nserver {\n    listen 8080;\n    server_name example.com;\n    \n    # Real IP from Varnish\n    set_real_ip_from 127.0.0.1;\n    real_ip_header X-Forwarded-For;\n    \n    location / {\n        root /var/www/html;\n        index index.html;\n    }\n    \n    # Health check endpoint\n    location /health {\n        access_log off;\n        return 200 \"OK\";\n    }\n}\n```\n\n### Apache Backend\n\n```apache\nListen 8080\n\u003cVirtualHost *:8080\u003e\n    ServerName example.com\n    DocumentRoot /var/www/html\n    \n    # Real IP from Varnish\n    RemoteIPHeader X-Forwarded-For\n    RemoteIPInternalProxy 127.0.0.1\n    \n    # Logging with real IP\n    LogFormat \"%a %l %u %t \\\"%r\\\" %\u003es %b\" varnish\n    CustomLog /var/log/apache2/access.log varnish\n\u003c/VirtualHost\u003e\n```\n\n## 6. Troubleshooting\n\n### Common Issues\n\n1. **503 Backend fetch failed**:\n```bash\n# Check backend health\nvarnishadm backend.list\n\n# Test backend directly\ncurl -I http://127.0.0.1:8080/\n\n# Check VCL syntax\nvarnishd -C -f /etc/varnish/default.vcl\n```\n\n2. **Low hit rate**:\n```bash\n# Check what's not being cached\nvarnishlog -g request -q \"VCL_call eq 'PASS'\"\n\n# Check cookies\nvarnishlog -g request -i ReqHeader -I Cookie\n```\n\n3. **Memory issues**:\n```bash\n# Check memory usage\nvarnishstat -f MAIN.g_bytes\n\n# Adjust storage size\nsudo systemctl edit varnish\n# Change -s malloc,256m to appropriate size\n```\n\n### Debug Mode\n\n```vcl\nsub vcl_deliver {\n    # Debug headers (remove in production)\n    set resp.http.X-Cache-Hits = obj.hits;\n    set resp.http.X-Cache-TTL = obj.ttl;\n    set resp.http.X-Cache-Grace = obj.grace;\n    \n    if (obj.hits \u003e 0) {\n        set resp.http.X-Cache = \"HIT\";\n    } else {\n        set resp.http.X-Cache = \"MISS\";\n    }\n}\n```\n\n## Maintenance\n\n### Cache Invalidation\n\n```bash\n# Purge specific URL\ncurl -X PURGE http://localhost/path/to/page\n\n# Ban pattern\nvarnishadm ban \"req.url ~ ^/images/\"\n\n# Clear entire cache\nvarnishadm ban \"req.url ~ .\"\n```\n\n### 9. Backup and Restore\n\n```bash\n# Backup VCL\ncp /etc/varnish/default.vcl /backup/default.vcl.$(date +%Y%m%d)\n\n# Test new VCL\nvarnishd -C -f /etc/varnish/new.vcl\n\n# Load new VCL without restart\nvarnishadm vcl.load newconfig /etc/varnish/new.vcl\nvarnishadm vcl.use newconfig\n```\n\n### Updates\n\n```bash\n# RHEL/CentOS\nsudo yum update varnish\n\n# Debian/Ubuntu\nsudo apt update \u0026\u0026 sudo apt upgrade varnish\n\n# Check version\nvarnishd -V\n```\n\n## Additional Resources\n\n- [Official Documentation](https://varnish-cache.org/docs/)\n- [VCL Reference](https://varnish-cache.org/docs/trunk/reference/vcl.html)\n- [Varnish Book](https://book.varnish-software.com/)\n- [GitHub Repository](https://github.com/varnishcache/varnish-cache)\n- [Community Forum](https://varnish-cache.org/lists/)\n- [Varnish Modules (VMODs)](https://varnish-cache.org/vmods/)\n\n---\n\n**Note:** This guide is part of the [HowToMgr](https://howtomgr.github.io) collection. Always refer to official documentation for the most up-to-date information.","readmeHtml":"\u003cp class=\"mobile-paragraph\"\u003eVarnish Cache is a high-performance HTTP accelerator designed for content-heavy dynamic websites as well as APIs. It sits between your web server and clients, caching frequently requested content to dramatically improve response times and reduce server load.\u003c/p\u003e\n\u003ch2 id=\"1-prerequisites\" class=\"mobile-header\"\u003e1. Prerequisites\u003c/h2\u003e\n\u003cli class=\"mobile-list-item\"\u003eOperating system: Linux, macOS, or Windows (WSL)\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eMinimum 1GB RAM (more for larger caches)\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eBackend web server (Apache, nginx, etc.)\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eAdministrative/sudo access\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003ePort 80 available (or custom port)\u003c/li\u003e\n\u003ch2 id=\"2-supported-operating-systems\" class=\"mobile-header\"\u003e2. Supported Operating Systems\u003c/h2\u003e\n\u003cp class=\"mobile-paragraph\"\u003eThis guide supports installation on:\u003c/p\u003e\n\u003cli class=\"mobile-list-item\"\u003eRHEL 8/9 and derivatives (CentOS Stream, Rocky Linux, AlmaLinux)\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eDebian 11/12\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eUbuntu 20.04/22.04/24.04 LTS\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eArch Linux (rolling release)\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eAlpine Linux 3.18+\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eopenSUSE Leap 15.5+ / Tumbleweed\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eSUSE Linux Enterprise Server (SLES) 15+\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003emacOS 12+ (Monterey and later) \u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eFreeBSD 13+\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eWindows 10/11/Server 2019+ (where applicable)\u003c/li\u003e\n\u003ch2 id=\"3-installation\" class=\"mobile-header\"\u003e3. Installation\u003c/h2\u003e\n\u003ch3 id=\"rhelcentosrocky-linuxalmalinux\" class=\"mobile-header\"\u003eRHEL/CentOS/Rocky Linux/AlmaLinux\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# RHEL/CentOS 7\nsudo yum install -y epel-release\nsudo yum install -y varnish\n\n# RHEL/CentOS/Rocky/AlmaLinux 8+\nsudo dnf install -y epel-release\nsudo dnf install -y varnish\n\n# Varnish official repository (latest version)\n# Add repository\ncurl -s https://packagecloud.io/install/repositories/varnishcache/varnish73/script.rpm.sh | sudo bash\n\n# Install Varnish\nsudo yum install -y varnish\n\n# Enable and start service\nsudo systemctl enable --now varnish\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"debianubuntu\" class=\"mobile-header\"\u003eDebian/Ubuntu\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Distribution packages\nsudo apt update\nsudo apt install -y varnish\n\n# Varnish official repository (latest version)\n# Install dependencies\nsudo apt install -y debian-archive-keyring curl gnupg apt-transport-https\n\n# Add repository\ncurl -fsSL https://packagecloud.io/varnishcache/varnish73/gpgkey | sudo gpg --dearmor -o /etc/apt/trusted.gpg.d/varnish.gpg\necho \u0026quot;deb https://packagecloud.io/varnishcache/varnish73/ubuntu/ $(lsb_release -cs) main\u0026quot; | sudo tee /etc/apt/sources.list.d/varnish.list\n\n# Install Varnish\nsudo apt update\nsudo apt install -y varnish\n\n# Enable and start service\nsudo systemctl enable --now varnish\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"alpine-linux\" class=\"mobile-header\"\u003eAlpine Linux\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Install Varnish\napk add --no-cache varnish\n\n# Install additional tools\napk add --no-cache varnish-libs varnish-dev\n\n# Enable and start service\nrc-update add varnishd default\nrc-service varnishd start\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"macos\" class=\"mobile-header\"\u003emacOS\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Using Homebrew\nbrew install varnish\n\n# Start Varnish\nbrew services start varnish\n\n# Or run manually\nvarnishd -F -a :8080 -f /usr/local/etc/varnish/default.vcl\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"freebsd\" class=\"mobile-header\"\u003eFreeBSD\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Using pkg\npkg install varnish7\n\n# Enable in rc.conf\necho \u0026#039;varnishd_enable=\u0026quot;YES\u0026quot;\u0026#039; \u0026gt;\u0026gt; /etc/rc.conf\n\n# Start service\nservice varnishd start\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"build-from-source\" class=\"mobile-header\"\u003eBuild from Source\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Install dependencies\n# RHEL/CentOS\nsudo yum groupinstall -y \u0026quot;Development Tools\u0026quot;\nsudo yum install -y python3 python3-sphinx libedit-devel pcre-devel ncurses-devel\n\n# Debian/Ubuntu\nsudo apt install -y build-essential python3 python3-sphinx libedit-dev libpcre3-dev libncurses-dev\n\n# Alpine\napk add --no-cache build-base python3 py3-sphinx libedit-dev pcre-dev ncurses-dev\n\n# Download and build\nwget https://varnish-cache.org/_downloads/varnish-7.3.0.tgz\ntar -zxvf varnish-7.3.0.tgz\ncd varnish-7.3.0\n\n./configure --prefix=/usr/local\nmake\nsudo make install\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"4-configuration\" class=\"mobile-header\"\u003e4. Configuration\u003c/h2\u003e\n\u003ch3 id=\"basic-configuration-file\" class=\"mobile-header\"\u003eBasic Configuration File\u003c/h3\u003e\n\u003cp class=\"mobile-paragraph\"\u003eCreate \u003ccode class=\"mobile-inline-code\"\u003e/etc/varnish/default.vcl\u003c/code\u003e:\u003c/p\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"vcl\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003evcl\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-vcl\"\u003evcl 4.1;\n\nimport std;\n\n# Default backend definition\nbackend default {\n    .host = \u0026quot;127.0.0.1\u0026quot;;\n    .port = \u0026quot;8080\u0026quot;;\n    .probe = {\n        .url = \u0026quot;/\u0026quot;;\n        .interval = 5s;\n        .timeout = 1s;\n        .window = 5;\n        .threshold = 3;\n    }\n}\n\n# Access control list for purging\nacl purge {\n    \u0026quot;localhost\u0026quot;;\n    \u0026quot;127.0.0.1\u0026quot;;\n    \u0026quot;::1\u0026quot;;\n}\n\n# Client side\nsub vcl_recv {\n    # Normalize the header, remove the port\n    set req.http.Host = regsub(req.http.Host, \u0026quot;:[0-9]+\u0026quot;, \u0026quot;\u0026quot;);\n    \n    # Normalize the query arguments\n    set req.url = std.querysort(req.url);\n    \n    # Strip hash, server doesn\u0026#039;t need it\n    if (req.url ~ \u0026quot;\\#\u0026quot;) {\n        set req.url = regsub(req.url, \u0026quot;\\#.*$\u0026quot;, \u0026quot;\u0026quot;);\n    }\n    \n    # Strip trailing ?\n    if (req.url ~ \u0026quot;\\?$\u0026quot;) {\n        set req.url = regsub(req.url, \u0026quot;\\?$\u0026quot;, \u0026quot;\u0026quot;);\n    }\n    \n    # Handle PURGE requests\n    if (req.method == \u0026quot;PURGE\u0026quot;) {\n        if (client.ip !~ purge) {\n            return (synth(405, \u0026quot;Not allowed.\u0026quot;));\n        }\n        return (purge);\n    }\n    \n    # Only cache GET or HEAD requests\n    if (req.method != \u0026quot;GET\u0026quot; \u0026amp;\u0026amp; req.method != \u0026quot;HEAD\u0026quot;) {\n        return (pass);\n    }\n    \n    # Don\u0026#039;t cache if cookies are present\n    if (req.http.Authorization || req.http.Cookie) {\n        return (pass);\n    }\n    \n    # Cache static files\n    if (req.url ~ \u0026quot;\\.(jpg|jpeg|gif|png|ico|css|zip|tgz|gz|rar|bz2|pdf|txt|tar|wav|bmp|rtf|js|flv|swf|html|htm)$\u0026quot;) {\n        unset req.http.Cookie;\n        return (hash);\n    }\n    \n    return (hash);\n}\n\nsub vcl_backend_response {\n    # Set default TTL\n    if (!beresp.http.Cache-Control) {\n        set beresp.ttl = 1h;\n    }\n    \n    # Cache static files for longer\n    if (bereq.url ~ \u0026quot;\\.(jpg|jpeg|gif|png|ico|css|zip|tgz|gz|rar|bz2|pdf|txt|tar|wav|bmp|rtf|js|flv|swf|html|htm)$\u0026quot;) {\n        unset beresp.http.Set-Cookie;\n        set beresp.ttl = 7d;\n    }\n    \n    # Enable grace mode\n    set beresp.grace = 1h;\n    \n    return (deliver);\n}\n\nsub vcl_deliver {\n    # Add debug headers\n    if (obj.hits \u0026gt; 0) {\n        set resp.http.X-Cache = \u0026quot;HIT\u0026quot;;\n        set resp.http.X-Cache-Hits = obj.hits;\n    } else {\n        set resp.http.X-Cache = \u0026quot;MISS\u0026quot;;\n    }\n    \n    # Remove some headers\n    unset resp.http.X-Powered-By;\n    unset resp.http.Server;\n    unset resp.http.Via;\n    unset resp.http.X-Varnish;\n    \n    return (deliver);\n}\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"service-configuration\" class=\"mobile-header\"\u003eService Configuration\u003c/h3\u003e\n\u003cp class=\"mobile-paragraph\"\u003e#### RHEL/CentOS/Debian/Ubuntu (systemd)\u003c/p\u003e\n\u003cp class=\"mobile-paragraph\"\u003eEdit \u003ccode class=\"mobile-inline-code\"\u003e/etc/systemd/system/varnish.service.d/override.conf\u003c/code\u003e:\u003c/p\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"ini\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003eini\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-ini\"\u003e[Service]\nExecStart=\nExecStart=/usr/sbin/varnishd \\\n    -a :80 \\\n    -T localhost:6082 \\\n    -f /etc/varnish/default.vcl \\\n    -s malloc,256m \\\n    -p default_ttl=120 \\\n    -p default_grace=3600\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003cp class=\"mobile-paragraph\"\u003eApply changes:\u003c/p\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003esudo systemctl daemon-reload\nsudo systemctl restart varnish\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003cp class=\"mobile-paragraph\"\u003e#### Alpine Linux\u003c/p\u003e\n\u003cp class=\"mobile-paragraph\"\u003eEdit \u003ccode class=\"mobile-inline-code\"\u003e/etc/conf.d/varnishd\u003c/code\u003e:\u003c/p\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Varnish configuration\nVARNISHD_OPTS=\u0026quot;-a :80 \\\n    -T localhost:6082 \\\n    -f /etc/varnish/default.vcl \\\n    -s malloc,256m \\\n    -p default_ttl=120 \\\n    -p default_grace=3600\u0026quot;\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"storage-backends\" class=\"mobile-header\"\u003eStorage Backends\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Memory storage (fast, limited by RAM)\n-s malloc,1g\n\n# File storage (slower, more capacity)\n-s file,/var/lib/varnish/varnish_storage.bin,10g\n\n# Multiple storage backends\n-s memory=malloc,256m \\\n-s disk=file,/var/lib/varnish/varnish_storage.bin,10g\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"advanced-vcl-examples\" class=\"mobile-header\"\u003eAdvanced VCL Examples\u003c/h2\u003e\n\u003ch3 id=\"wordpress-configuration\" class=\"mobile-header\"\u003eWordPress Configuration\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"vcl\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003evcl\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-vcl\"\u003evcl 4.1;\n\nimport std;\n\nbackend default {\n    .host = \u0026quot;127.0.0.1\u0026quot;;\n    .port = \u0026quot;8080\u0026quot;;\n}\n\nsub vcl_recv {\n    # Don\u0026#039;t cache WordPress admin\n    if (req.url ~ \u0026quot;wp-(admin|login|cron)\u0026quot; || req.url ~ \u0026quot;preview=true\u0026quot;) {\n        return (pass);\n    }\n    \n    # Don\u0026#039;t cache logged-in users\n    if (req.http.Cookie ~ \u0026quot;wordpress_logged_in_\u0026quot;) {\n        return (pass);\n    }\n    \n    # Remove marketing cookies\n    if (req.http.Cookie) {\n        set req.http.Cookie = regsuball(req.http.Cookie, \u0026quot;__utm.=[^;]+(; )?\u0026quot;, \u0026quot;\u0026quot;);\n        set req.http.Cookie = regsuball(req.http.Cookie, \u0026quot;_ga=[^;]+(; )?\u0026quot;, \u0026quot;\u0026quot;);\n        set req.http.Cookie = regsuball(req.http.Cookie, \u0026quot;_gid=[^;]+(; )?\u0026quot;, \u0026quot;\u0026quot;);\n        set req.http.Cookie = regsuball(req.http.Cookie, \u0026quot;_gat=[^;]+(; )?\u0026quot;, \u0026quot;\u0026quot;);\n        set req.http.Cookie = regsuball(req.http.Cookie, \u0026quot;utmctr=[^;]+(; )?\u0026quot;, \u0026quot;\u0026quot;);\n        set req.http.Cookie = regsuball(req.http.Cookie, \u0026quot;utmcmd.=[^;]+(; )?\u0026quot;, \u0026quot;\u0026quot;);\n        set req.http.Cookie = regsuball(req.http.Cookie, \u0026quot;utmccn.=[^;]+(; )?\u0026quot;, \u0026quot;\u0026quot;);\n        \n        # Remove empty cookies\n        if (req.http.Cookie == \u0026quot;\u0026quot;) {\n            unset req.http.Cookie;\n        }\n    }\n    \n    return (hash);\n}\n\nsub vcl_backend_response {\n    # Cache everything for 1 hour by default\n    set beresp.ttl = 1h;\n    \n    # Don\u0026#039;t cache error pages\n    if (beresp.status \u0026gt;= 400) {\n        set beresp.ttl = 0s;\n    }\n    \n    # Allow stale content for 24 hours\n    set beresp.grace = 24h;\n    \n    return (deliver);\n}\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"load-balancing\" class=\"mobile-header\"\u003eLoad Balancing\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"vcl\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003evcl\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-vcl\"\u003evcl 4.1;\n\nimport directors;\nimport std;\n\n# Define backends\nbackend web1 {\n    .host = \u0026quot;192.168.1.10\u0026quot;;\n    .port = \u0026quot;80\u0026quot;;\n    .probe = {\n        .url = \u0026quot;/health\u0026quot;;\n        .interval = 5s;\n        .timeout = 1s;\n        .window = 5;\n        .threshold = 3;\n    }\n}\n\nbackend web2 {\n    .host = \u0026quot;192.168.1.11\u0026quot;;\n    .port = \u0026quot;80\u0026quot;;\n    .probe = {\n        .url = \u0026quot;/health\u0026quot;;\n        .interval = 5s;\n        .timeout = 1s;\n        .window = 5;\n        .threshold = 3;\n    }\n}\n\n# Initialize director\nsub vcl_init {\n    new web_director = directors.round_robin();\n    web_director.add_backend(web1);\n    web_director.add_backend(web2);\n}\n\nsub vcl_recv {\n    set req.backend_hint = web_director.backend();\n    return (hash);\n}\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"esi-edge-side-includes\" class=\"mobile-header\"\u003eESI (Edge Side Includes)\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"vcl\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003evcl\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-vcl\"\u003evcl 4.1;\n\nbackend default {\n    .host = \u0026quot;127.0.0.1\u0026quot;;\n    .port = \u0026quot;8080\u0026quot;;\n}\n\nsub vcl_recv {\n    # Enable ESI processing\n    set req.http.Surrogate-Capability = \u0026quot;varnish=ESI/1.0\u0026quot;;\n    return (hash);\n}\n\nsub vcl_backend_response {\n    # Check for ESI\n    if (beresp.http.Surrogate-Control ~ \u0026quot;ESI/1.0\u0026quot;) {\n        unset beresp.http.Surrogate-Control;\n        set beresp.do_esi = true;\n        set beresp.ttl = 24h;\n    }\n    \n    return (deliver);\n}\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"8-performance-tuning\" class=\"mobile-header\"\u003e8. Performance Tuning\u003c/h2\u003e\n\u003ch3 id=\"system-parameters\" class=\"mobile-header\"\u003eSystem Parameters\u003c/h3\u003e\n\u003cp class=\"mobile-paragraph\"\u003eAdd to \u003ccode class=\"mobile-inline-code\"\u003e/etc/sysctl.conf\u003c/code\u003e:\u003c/p\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Network tuning\nnet.core.somaxconn = 1024\nnet.ipv4.tcp_fin_timeout = 30\nnet.ipv4.tcp_keepalive_time = 1200\nnet.ipv4.tcp_max_syn_backlog = 4096\nnet.ipv4.tcp_tw_reuse = 1\n\n# Memory tuning\nvm.swappiness = 10\n\n# Apply changes\nsudo sysctl -p\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"varnish-parameters\" class=\"mobile-header\"\u003eVarnish Parameters\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Thread pools (2 per CPU core)\nvarnishd -p thread_pools=4\n\n# Thread pool size\nvarnishd -p thread_pool_min=100 -p thread_pool_max=4000\n\n# Workspace size\nvarnishd -p workspace_backend=256k -p workspace_client=256k\n\n# Listen queue depth\nvarnishd -p listen_depth=4096\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"storage-tuning\" class=\"mobile-header\"\u003eStorage Tuning\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# For file storage, use separate disk\nsudo mkdir -p /var/lib/varnish\nsudo mount /dev/sdb1 /var/lib/varnish\n\n# Use memory-mapped file\nvarnishd -s file,/var/lib/varnish/varnish_storage.bin,100g,1g\n\n# Parameters: filename,size,granularity\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"monitoring-and-statistics\" class=\"mobile-header\"\u003eMonitoring and Statistics\u003c/h2\u003e\n\u003ch3 id=\"varnishstat\" class=\"mobile-header\"\u003evarnishstat\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Real-time statistics\nvarnishstat\n\n# One-time output\nvarnishstat -1\n\n# Specific counters\nvarnishstat -f MAIN.cache_hit -f MAIN.cache_miss\n\n# JSON output\nvarnishstat -j\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"varnishlog\" class=\"mobile-header\"\u003evarnishlog\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Live log\nvarnishlog\n\n# Client requests\nvarnishlog -g request\n\n# Backend requests\nvarnishlog -g backend\n\n# Filter by URL\nvarnishlog -q \u0026#039;ReqURL ~ \u0026quot;^/api/\u0026quot;\u0026#039;\n\n# Filter by response code\nvarnishlog -q \u0026#039;RespStatus == 404\u0026#039;\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"varnishtop\" class=\"mobile-header\"\u003evarnishtop\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Most requested URLs\nvarnishtop -i requrl\n\n# Most common user agents\nvarnishtop -i reqheader -I User-Agent\n\n# Backend requests\nvarnishtop -b -i requrl\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"varnishhist\" class=\"mobile-header\"\u003evarnishhist\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Response time histogram\nvarnishhist\n\n# Client requests only\nvarnishhist -c\n\n# Backend requests only\nvarnishhist -b\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"security-configuration\" class=\"mobile-header\"\u003eSecurity Configuration\u003c/h2\u003e\n\u003ch3 id=\"acl-for-administration\" class=\"mobile-header\"\u003eACL for Administration\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"vcl\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003evcl\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-vcl\"\u003eacl admin {\n    \u0026quot;localhost\u0026quot;;\n    \u0026quot;127.0.0.1\u0026quot;;\n    \u0026quot;::1\u0026quot;;\n    \u0026quot;192.168.1.0\u0026quot;/24;\n}\n\nsub vcl_recv {\n    # Restrict purge\n    if (req.method == \u0026quot;PURGE\u0026quot;) {\n        if (client.ip !~ admin) {\n            return (synth(403, \u0026quot;Forbidden\u0026quot;));\n        }\n        return (purge);\n    }\n    \n    # Restrict ban\n    if (req.method == \u0026quot;BAN\u0026quot;) {\n        if (client.ip !~ admin) {\n            return (synth(403, \u0026quot;Forbidden\u0026quot;));\n        }\n        ban(\u0026quot;req.http.host == \u0026quot; + req.http.host);\n        return (synth(200, \u0026quot;Banned\u0026quot;));\n    }\n}\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"rate-limiting\" class=\"mobile-header\"\u003eRate Limiting\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"vcl\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003evcl\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-vcl\"\u003eimport vsthrottle;\n\nsub vcl_recv {\n    # Rate limit: 100 requests per 60 seconds per IP\n    if (vsthrottle.is_denied(client.ip, 100, 60s)) {\n        return (synth(429, \u0026quot;Too Many Requests\u0026quot;));\n    }\n}\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"security-headers\" class=\"mobile-header\"\u003eSecurity Headers\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"vcl\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003evcl\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-vcl\"\u003esub vcl_deliver {\n    # Security headers\n    set resp.http.X-Frame-Options = \u0026quot;SAMEORIGIN\u0026quot;;\n    set resp.http.X-Content-Type-Options = \u0026quot;nosniff\u0026quot;;\n    set resp.http.X-XSS-Protection = \u0026quot;1; mode=block\u0026quot;;\n    set resp.http.Referrer-Policy = \u0026quot;strict-origin-when-cross-origin\u0026quot;;\n    \n    # HSTS (only with HTTPS)\n    if (req.http.X-Forwarded-Proto == \u0026quot;https\u0026quot;) {\n        set resp.http.Strict-Transport-Security = \u0026quot;max-age=31536000; includeSubDomains\u0026quot;;\n    }\n}\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"integration-with-web-servers\" class=\"mobile-header\"\u003eIntegration with Web Servers\u003c/h2\u003e\n\u003ch3 id=\"nginx-backend\" class=\"mobile-header\"\u003enginx Backend\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"nginx\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003enginx\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-nginx\"\u003eserver {\n    listen 8080;\n    server_name example.com;\n    \n    # Real IP from Varnish\n    set_real_ip_from 127.0.0.1;\n    real_ip_header X-Forwarded-For;\n    \n    location / {\n        root /var/www/html;\n        index index.html;\n    }\n    \n    # Health check endpoint\n    location /health {\n        access_log off;\n        return 200 \u0026quot;OK\u0026quot;;\n    }\n}\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"apache-backend\" class=\"mobile-header\"\u003eApache Backend\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"apache\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003eapache\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-apache\"\u003eListen 8080\n\u0026lt;VirtualHost *:8080\u0026gt;\n    ServerName example.com\n    DocumentRoot /var/www/html\n    \n    # Real IP from Varnish\n    RemoteIPHeader X-Forwarded-For\n    RemoteIPInternalProxy 127.0.0.1\n    \n    # Logging with real IP\n    LogFormat \u0026quot;%a %l %u %t \\\u0026quot;%r\\\u0026quot; %\u0026gt;s %b\u0026quot; varnish\n    CustomLog /var/log/apache2/access.log varnish\n\u0026lt;/VirtualHost\u0026gt;\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"6-troubleshooting\" class=\"mobile-header\"\u003e6. Troubleshooting\u003c/h2\u003e\n\u003ch3 id=\"common-issues\" class=\"mobile-header\"\u003eCommon Issues\u003c/h3\u003e\n\u003cp class=\"mobile-paragraph\"\u003e1. \u003cstrong\u003e503 Backend fetch failed\u003c/strong\u003e:\u003c/p\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Check backend health\nvarnishadm backend.list\n\n# Test backend directly\ncurl -I http://127.0.0.1:8080/\n\n# Check VCL syntax\nvarnishd -C -f /etc/varnish/default.vcl\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003cp class=\"mobile-paragraph\"\u003e2. \u003cstrong\u003eLow hit rate\u003c/strong\u003e:\u003c/p\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Check what\u0026#039;s not being cached\nvarnishlog -g request -q \u0026quot;VCL_call eq \u0026#039;PASS\u0026#039;\u0026quot;\n\n# Check cookies\nvarnishlog -g request -i ReqHeader -I Cookie\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003cp class=\"mobile-paragraph\"\u003e3. \u003cstrong\u003eMemory issues\u003c/strong\u003e:\u003c/p\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Check memory usage\nvarnishstat -f MAIN.g_bytes\n\n# Adjust storage size\nsudo systemctl edit varnish\n# Change -s malloc,256m to appropriate size\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"debug-mode\" class=\"mobile-header\"\u003eDebug Mode\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"vcl\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003evcl\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-vcl\"\u003esub vcl_deliver {\n    # Debug headers (remove in production)\n    set resp.http.X-Cache-Hits = obj.hits;\n    set resp.http.X-Cache-TTL = obj.ttl;\n    set resp.http.X-Cache-Grace = obj.grace;\n    \n    if (obj.hits \u0026gt; 0) {\n        set resp.http.X-Cache = \u0026quot;HIT\u0026quot;;\n    } else {\n        set resp.http.X-Cache = \u0026quot;MISS\u0026quot;;\n    }\n}\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"maintenance\" class=\"mobile-header\"\u003eMaintenance\u003c/h2\u003e\n\u003ch3 id=\"cache-invalidation\" class=\"mobile-header\"\u003eCache Invalidation\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Purge specific URL\ncurl -X PURGE http://localhost/path/to/page\n\n# Ban pattern\nvarnishadm ban \u0026quot;req.url ~ ^/images/\u0026quot;\n\n# Clear entire cache\nvarnishadm ban \u0026quot;req.url ~ .\u0026quot;\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"9-backup-and-restore\" class=\"mobile-header\"\u003e9. Backup and Restore\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Backup VCL\ncp /etc/varnish/default.vcl /backup/default.vcl.$(date +%Y%m%d)\n\n# Test new VCL\nvarnishd -C -f /etc/varnish/new.vcl\n\n# Load new VCL without restart\nvarnishadm vcl.load newconfig /etc/varnish/new.vcl\nvarnishadm vcl.use newconfig\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"updates\" class=\"mobile-header\"\u003eUpdates\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# RHEL/CentOS\nsudo yum update varnish\n\n# Debian/Ubuntu\nsudo apt update \u0026amp;\u0026amp; sudo apt upgrade varnish\n\n# Check version\nvarnishd -V\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"additional-resources\" class=\"mobile-header\"\u003eAdditional Resources\u003c/h2\u003e\n\u003cli class=\"mobile-list-item\"\u003e\u003ca href=\"https://varnish-cache.org/docs/\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\"\u003eOfficial Documentation\u003c/a\u003e\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003e\u003ca href=\"https://varnish-cache.org/docs/trunk/reference/vcl.html\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\"\u003eVCL Reference\u003c/a\u003e\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003e\u003ca href=\"https://book.varnish-software.com/\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\"\u003eVarnish Book\u003c/a\u003e\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003e\u003ca href=\"https://github.com/varnishcache/varnish-cache\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\"\u003eGitHub Repository\u003c/a\u003e\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003e\u003ca href=\"https://varnish-cache.org/lists/\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\"\u003eCommunity Forum\u003c/a\u003e\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003e\u003ca href=\"https://varnish-cache.org/vmods/\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\"\u003eVarnish Modules (VMODs)\u003c/a\u003e\u003c/li\u003e\n\u003cp class=\"mobile-paragraph\"\u003e---\u003c/p\u003e\n\u003cp class=\"mobile-paragraph\"\u003e\u003cstrong\u003eNote:\u003c/strong\u003e This guide is part of the \u003ca href=\"https://howtomgr.github.io\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\"\u003eHowToMgr\u003c/a\u003e collection. Always refer to official documentation for the most up-to-date information.\u003c/p\u003e","readTime":"10 min","wordCount":1917,"tableOfContents":[{"level":2,"text":"1. Prerequisites","id":"1-prerequisites"},{"level":2,"text":"2. Supported Operating Systems","id":"2-supported-operating-systems"},{"level":2,"text":"3. Installation","id":"3-installation"},{"level":3,"text":"RHEL/CentOS/Rocky Linux/AlmaLinux","id":"rhelcentosrocky-linuxalmalinux"},{"level":3,"text":"Debian/Ubuntu","id":"debianubuntu"},{"level":3,"text":"Alpine Linux","id":"alpine-linux"},{"level":3,"text":"macOS","id":"macos"},{"level":3,"text":"FreeBSD","id":"freebsd"},{"level":3,"text":"Build from Source","id":"build-from-source"},{"level":2,"text":"4. Configuration","id":"4-configuration"},{"level":3,"text":"Basic Configuration File","id":"basic-configuration-file"},{"level":3,"text":"Service Configuration","id":"service-configuration"},{"level":3,"text":"Storage Backends","id":"storage-backends"},{"level":2,"text":"Advanced VCL Examples","id":"advanced-vcl-examples"},{"level":3,"text":"WordPress Configuration","id":"wordpress-configuration"},{"level":3,"text":"Load Balancing","id":"load-balancing"},{"level":3,"text":"ESI (Edge Side Includes)","id":"esi-edge-side-includes"},{"level":2,"text":"8. Performance Tuning","id":"8-performance-tuning"},{"level":3,"text":"System Parameters","id":"system-parameters"},{"level":3,"text":"Varnish Parameters","id":"varnish-parameters"},{"level":3,"text":"Storage Tuning","id":"storage-tuning"},{"level":2,"text":"Monitoring and Statistics","id":"monitoring-and-statistics"},{"level":3,"text":"varnishstat","id":"varnishstat"},{"level":3,"text":"varnishlog","id":"varnishlog"},{"level":3,"text":"varnishtop","id":"varnishtop"},{"level":3,"text":"varnishhist","id":"varnishhist"},{"level":2,"text":"Security Configuration","id":"security-configuration"},{"level":3,"text":"ACL for Administration","id":"acl-for-administration"},{"level":3,"text":"Rate Limiting","id":"rate-limiting"},{"level":3,"text":"Security Headers","id":"security-headers"},{"level":2,"text":"Integration with Web Servers","id":"integration-with-web-servers"},{"level":3,"text":"nginx Backend","id":"nginx-backend"},{"level":3,"text":"Apache Backend","id":"apache-backend"},{"level":2,"text":"6. Troubleshooting","id":"6-troubleshooting"},{"level":3,"text":"Common Issues","id":"common-issues"},{"level":3,"text":"Debug Mode","id":"debug-mode"},{"level":2,"text":"Maintenance","id":"maintenance"},{"level":3,"text":"Cache Invalidation","id":"cache-invalidation"},{"level":3,"text":"9. Backup and Restore","id":"9-backup-and-restore"},{"level":3,"text":"Updates","id":"updates"},{"level":2,"text":"Additional Resources","id":"additional-resources"}],"lastBuilt":"2025-10-04T18:12:26.189Z","metadataVersion":"2.0"},"category":{"key":"caching","name":"Caching","description":"Caching tools and applications","icon":"🔧","color":"#6272a4"},"relatedGuides":[{"name":"memcached","displayName":"Memcached Installation Guide","slug":"memcached","description":"Memcached is a free and open-source, high-performance, distributed memory object caching system. Originally developed by Danga Interactive for LiveJournal, it's now used by many high-traffic websites as an in-memory key-value store that significantly reduces database load and improves application response times. It serves as a FOSS alternative to commercial caching solutions like Redis Enterprise or AWS ElastiCache.","category":"caching","subcategory":"caching","difficultyLevel":"intermediate","estimatedSetupTime":"15-30 minutes","supportedOS":["rhel","centos","rocky","almalinux","debian","ubuntu","arch","alpine","opensuse","sles","macos","freebsd","windows"],"defaultPorts":[11211,11212],"installationMethods":["native-packages","source-compilation"],"features":["multi-os-support","comprehensive-documentation","security-hardening","performance-optimization","backup-restore-procedures","troubleshooting-guides"],"tags":["caching","observability","data-storage","security","data-protection"],"maintenanceStatus":"active","specVersion":"2.0","version":"1.0.0","license":"Open Source","websiteUrl":"https://howtomgr.github.io/caching/memcached","documentationUrl":"https://howtomgr.github.io/caching/memcached","language":null,"stars":0,"forks":0,"topics":[],"githubUrl":"https://github.com/howtomgr/memcached","updatedAt":"2025-09-16T17:30:19Z","createdAt":"2025-09-16T03:41:24Z","readmeRaw":"# Memcached Installation Guide\n\nMemcached is a free and open-source, high-performance, distributed memory object caching system. Originally developed by Danga Interactive for LiveJournal, it's now used by many high-traffic websites as an in-memory key-value store that significantly reduces database load and improves application response times. It serves as a FOSS alternative to commercial caching solutions like Redis Enterprise or AWS ElastiCache.\n\n## Table of Contents\n1. [Prerequisites](#prerequisites)\n2. [Supported Operating Systems](#supported-operating-systems)\n3. [Installation](#installation)\n4. [Configuration](#configuration)\n5. [Service Management](#service-management)\n6. [Troubleshooting](#troubleshooting)\n7. [Security Considerations](#security-considerations)\n8. [Performance Tuning](#performance-tuning)\n9. [Backup and Restore](#backup-and-restore)\n10. [System Requirements](#system-requirements)\n11. [Support](#support)\n12. [Contributing](#contributing)\n13. [License](#license)\n14. [Acknowledgments](#acknowledgments)\n15. [Version History](#version-history)\n16. [Appendices](#appendices)\n\n## 1. Prerequisites\n\n- **Hardware Requirements**:\n  - CPU: 1 core minimum (2+ cores recommended for high traffic)\n  - RAM: 64MB minimum (1GB+ recommended for production)\n  - Storage: 100MB for installation\n- **Operating System**: Linux, BSD, macOS, or Windows (via WSL2)\n- **Network Requirements**:\n  - Port 11211 (default, configurable)\n  - TCP and UDP protocols\n  - Low latency network for distributed setups\n- **Dependencies**:\n  - libevent 2.0+ (for event notification)\n  - SASL libraries (optional, for authentication)\n  - C compiler (for building from source)\n- **System Access**: root or sudo privileges required\n\n\n## 2. Supported Operating Systems\n\nThis guide supports installation on:\n- RHEL 8/9 and derivatives (CentOS Stream, Rocky Linux, AlmaLinux)\n- Debian 11/12\n- Ubuntu 20.04/22.04/24.04 LTS\n- Arch Linux (rolling release)\n- Alpine Linux 3.18+\n- openSUSE Leap 15.5+ / Tumbleweed\n- SUSE Linux Enterprise Server (SLES) 15+\n- macOS 12+ (Monterey and later) \n- FreeBSD 13+\n- Windows 10/11/Server 2019+ (where applicable)\n\n## 3. Installation\n\n### RHEL/CentOS/Rocky Linux/AlmaLinux\n\n```bash\n# RHEL/CentOS 7\nsudo yum install -y epel-release\nsudo yum install -y memcached\n\n# RHEL/CentOS/Rocky/Alma 8+\nsudo dnf install -y epel-release\nsudo dnf install -y memcached\n\n# Install development tools (optional, for building from source)\nsudo dnf groupinstall -y \"Development Tools\"\nsudo dnf install -y libevent-devel\n```\n\n### Debian/Ubuntu\n\n```bash\n# Update package list\nsudo apt update\n\n# Install memcached\nsudo apt install -y memcached libmemcached-tools\n\n# Install development libraries (optional)\nsudo apt install -y build-essential libevent-dev libsasl2-dev\n```\n\n### Arch Linux\n\n```bash\n# Install memcached from official repositories\nsudo pacman -S memcached\n\n# Install development tools (optional)\nsudo pacman -S base-devel libevent\n\n# For additional tools\nsudo pacman -S libmemcached\n\n# Enable and start service\nsudo systemctl enable --now memcached\n```\n\n### Alpine Linux\n\n```bash\n# Install memcached\napk add --no-cache memcached\n\n# Install development tools (optional)\napk add --no-cache build-base libevent-dev\n\n# Create memcached user if not exists\nadduser -D -H -s /sbin/nologin memcached\n```\n\n### openSUSE/SLES\n\n```bash\n# openSUSE Leap/Tumbleweed\nsudo zypper install -y memcached\n\n# Install development tools (optional)\nsudo zypper install -y gcc make libevent-devel\n\n# SLES (may require additional repositories)\nsudo SUSEConnect -p sle-module-web-scripting/15.5/x86_64\nsudo zypper install -y memcached\n\n# Enable and start service\nsudo systemctl enable --now memcached\n```\n\n### macOS\n\n```bash\n# Using Homebrew\nbrew install memcached\n\n# Start as service\nbrew services start memcached\n\n# Or run manually\n/usr/local/opt/memcached/bin/memcached\n```\n\n### Windows\n\n```powershell\n# Using Chocolatey\nchoco install memcached\n\n# Using manual installation\n# 1. Download from: http://downloads.northscale.com/memcached-1.4.5-amd64.zip\n# 2. Extract to C:\\memcached\n# 3. Install as service:\nC:\\memcached\\memcached.exe -d install\n\n# Start service\nnet start memcached\n```\n\n### Build from Source (All Platforms)\n\n```bash\n# Download latest version\nwget https://memcached.org/latest\ntar -zxvf memcached-*.tar.gz\ncd memcached-*\n\n# Configure and build\n./configure --prefix=/usr/local\nmake\nsudo make install\n\n# Create systemd service (Linux)\nsudo nano /etc/systemd/system/memcached.service\n```\n\n## Initial Configuration\n\n### First-Run Setup\n\n1. **Create dedicated user** (if not created by package):\n```bash\n# Linux systems\nsudo useradd -r -s /sbin/nologin memcached\n\n# Verify user exists\nid memcached\n```\n\n2. **Default configuration locations**:\n- RHEL/CentOS/Rocky/AlmaLinux: `/etc/sysconfig/memcached`\n- Debian/Ubuntu: `/etc/memcached.conf`\n- Arch Linux: `/etc/conf.d/memcached`\n- Alpine Linux: `/etc/conf.d/memcached`\n- openSUSE/SLES: `/etc/sysconfig/memcached`\n- macOS: `~/Library/LaunchAgents/homebrew.mxcl.memcached.plist`\n- FreeBSD: `/usr/local/etc/memcached.conf`\n\n3. **Essential settings to change**:\n\n```bash\n# Set appropriate memory limit (default is often 64MB)\n-m 256    # 256MB cache size\n\n# Bind to specific interface (security)\n-l 127.0.0.1    # localhost only\n# OR for specific network\n-l 192.168.1.100\n\n# Change default port if needed\n-p 11211\n\n# Set max connections\n-c 1024\n```\n\n**WARNING:** Never expose memcached to the public internet without authentication!\n\n### Testing Initial Setup\n\n```bash\n# Test memcached is running\necho \"stats\" | nc localhost 11211\n\n# Check version\necho \"version\" | nc localhost 11211\n\n# Test set/get operation\n(echo \"set test 0 60 5\"; echo \"hello\"; echo \"get test\") | nc localhost 11211\n```\n\n## Advanced Configuration\n\n### RHEL/CentOS Configuration\n\nEdit `/etc/sysconfig/memcached`:\n```bash\n# Port\nPORT=\"11211\"\n\n# User\nUSER=\"memcached\"\n\n# Max connections\nMAXCONN=\"1024\"\n\n# Cache size in MB\nCACHESIZE=\"64\"\n\n# Listening IP (empty for all interfaces)\nOPTIONS=\"-l 127.0.0.1\"\n\n# For network access\n# OPTIONS=\"-l 0.0.0.0\"\n\n# With SASL authentication\n# OPTIONS=\"-l 127.0.0.1 -S\"\n```\n\n### Debian/Ubuntu Configuration\n\nEdit `/etc/memcached.conf`:\n```bash\n# Memory cache size in MB\n-m 64\n\n# Port\n-p 11211\n\n# User to run daemon\n-u memcache\n\n# Listen on localhost only\n-l 127.0.0.1\n\n# Max simultaneous connections\n-c 1024\n\n# Run as daemon\n-d\n\n# Log file\nlogfile /var/log/memcached.log\n\n# Verbose logging (remove for production)\n# -v\n\n# Very verbose (debugging)\n# -vv\n```\n\n### Alpine Linux Configuration\n\nEdit `/etc/conf.d/memcached`:\n```bash\n# Memcached options\nMEMCACHED_USER=\"memcached\"\nMEMCACHED_PORT=\"11211\"\nMEMCACHED_MAX_MEMORY=\"64\"\nMEMCACHED_MAX_CONNECTIONS=\"1024\"\nMEMCACHED_LISTEN=\"127.0.0.1\"\nMEMCACHED_OPTS=\"\"\n```\n\n### macOS Configuration\n\nCreate `~/Library/LaunchAgents/homebrew.mxcl.memcached.plist`:\n```xml\n\u003c?xml version=\"1.0\" encoding=\"UTF-8\"?\u003e\n\u003c!DOCTYPE plist PUBLIC \"-//Apple//DTD PLIST 1.0//EN\" \"http://www.apple.com/DTDs/PropertyList-1.0.dtd\"\u003e\n\u003cplist version=\"1.0\"\u003e\n\u003cdict\u003e\n    \u003ckey\u003eLabel\u003c/key\u003e\n    \u003cstring\u003ehomebrew.mxcl.memcached\u003c/string\u003e\n    \u003ckey\u003eProgramArguments\u003c/key\u003e\n    \u003carray\u003e\n        \u003cstring\u003e/usr/local/opt/memcached/bin/memcached\u003c/string\u003e\n        \u003cstring\u003e-l\u003c/string\u003e\n        \u003cstring\u003e127.0.0.1\u003c/string\u003e\n        \u003cstring\u003e-m\u003c/string\u003e\n        \u003cstring\u003e64\u003c/string\u003e\n    \u003c/array\u003e\n    \u003ckey\u003eRunAtLoad\u003c/key\u003e\n    \u003ctrue/\u003e\n\u003c/dict\u003e\n\u003c/plist\u003e\n```\n\n### Windows Configuration\n\nCreate `C:\\memcached\\memcached.conf`:\n```\n# Memory limit in MB\n-m 64\n\n# Port number\n-p 11211\n\n# IP address to listen on\n-l 127.0.0.1\n\n# Maximum connections\n-c 1024\n```\n\n## 5. Service Management\n\n### RHEL/CentOS/Debian/Ubuntu (systemd)\n\n```bash\n# Enable on boot\nsudo systemctl enable memcached\n\n# Start service\nsudo systemctl start memcached\n\n# Stop service\nsudo systemctl stop memcached\n\n# Restart service\nsudo systemctl restart memcached\n\n# Check status\nsudo systemctl status memcached\n\n# View logs\nsudo journalctl -u memcached -f\n```\n\n### Alpine Linux (OpenRC)\n\n```bash\n# Enable on boot\nrc-update add memcached default\n\n# Start service\nrc-service memcached start\n\n# Stop service\nrc-service memcached stop\n\n# Restart service\nrc-service memcached restart\n\n# Check status\nrc-service memcached status\n```\n\n### macOS\n\n```bash\n# Start service\nbrew services start memcached\n\n# Stop service\nbrew services stop memcached\n\n# Restart service\nbrew services restart memcached\n\n# Check if running\nbrew services list | grep memcached\n```\n\n### Windows\n\n```powershell\n# Start service\nnet start memcached\n\n# Stop service\nnet stop memcached\n\n# Restart service\nnet stop memcached \u0026\u0026 net start memcached\n\n# Check status\nsc query memcached\n\n# Configure service\nsc config memcached start= auto\n```\n\n## Security Configuration\n\n### Enable SASL Authentication\n\n**RHEL/CentOS/Debian/Ubuntu:**\n```bash\n# Install SASL\n# RHEL/CentOS\nsudo yum install -y cyrus-sasl cyrus-sasl-devel cyrus-sasl-plain\n\n# Debian/Ubuntu\nsudo apt install -y sasl2-bin libsasl2-2 libsasl2-dev libsasl2-modules\n\n# Create SASL configuration\nsudo mkdir -p /etc/sasl2\nsudo nano /etc/sasl2/memcached.conf\n```\n\nAdd to `/etc/sasl2/memcached.conf`:\n```\nmech_list: plain\nlog_level: 5\nsasldb_path: /etc/sasl2/memcached-sasldb2\n```\n\nCreate SASL user:\n```bash\nsudo saslpasswd2 -a memcached -c -f /etc/sasl2/memcached-sasldb2 myuser\nsudo chown memcached:memcached /etc/sasl2/memcached-sasldb2\n```\n\nEnable SASL in memcached:\n```bash\n# RHEL/CentOS - Edit /etc/sysconfig/memcached\nOPTIONS=\"-l 127.0.0.1 -S\"\n\n# Debian/Ubuntu - Edit /etc/memcached.conf\n# Add line:\n-S\n\n# Restart service\nsudo systemctl restart memcached\n```\n\n### Firewall Configuration\n\n**RHEL/CentOS (firewalld):**\n```bash\n# Add service\nsudo firewall-cmd --permanent --add-service=memcache\n# Or specific port\nsudo firewall-cmd --permanent --add-port=11211/tcp\n\n# Reload firewall\nsudo firewall-cmd --reload\n```\n\n**Debian/Ubuntu (ufw):**\n```bash\n# Allow from specific IP\nsudo ufw allow from 192.168.1.100 to any port 11211\n\n# Allow from subnet\nsudo ufw allow from 192.168.1.0/24 to any port 11211\n```\n\n**Alpine (iptables):**\n```bash\n# Add rule\niptables -A INPUT -p tcp --dport 11211 -s 192.168.1.0/24 -j ACCEPT\n\n# Save rules\n/etc/init.d/iptables save\n```\n\n## 8. Performance Tuning\n\n### Linux Kernel Parameters\n\nAdd to `/etc/sysctl.conf`:\n```bash\n# Increase max connections\nnet.core.somaxconn = 1024\nnet.ipv4.tcp_max_syn_backlog = 1024\n\n# TCP memory\nnet.ipv4.tcp_mem = 786432 1048576 26777216\nnet.ipv4.tcp_rmem = 4096 87380 134217728\nnet.ipv4.tcp_wmem = 4096 65536 134217728\n\n# Apply changes\nsudo sysctl -p\n```\n\n### Connection Pooling\n\nConfigure for high-traffic scenarios:\n```bash\n# Edit memcached config\n# RHEL/CentOS: /etc/sysconfig/memcached\n# Debian/Ubuntu: /etc/memcached.conf\n\n# Increase connection limit\n-c 10000\n\n# Use multiple threads (CPU cores)\n-t 4\n\n# Disable CAS (Compare-And-Swap) if not needed\n-C\n\n# Large memory pages (Linux)\n-L\n```\n\n### Memory Optimization\n\n```bash\n# Calculate slab sizes\nmemcached -vv\n\n# Custom slab configuration\nmemcached -f 1.25 -n 48\n\n# Monitor slab usage\necho \"stats slabs\" | nc localhost 11211\n```\n\n## Monitoring\n\n### Built-in Statistics\n\n```bash\n# Basic stats\necho \"stats\" | nc localhost 11211\n\n# Slab statistics\necho \"stats slabs\" | nc localhost 11211\n\n# Item statistics\necho \"stats items\" | nc localhost 11211\n\n# Connection stats\necho \"stats conns\" | nc localhost 11211\n\n# Settings\necho \"stats settings\" | nc localhost 11211\n```\n\n### Monitoring Scripts\n\nCreate `/usr/local/bin/memcached-stats.sh`:\n```bash\n#!/bin/bash\n\necho \"=== Memcached Statistics ===\"\necho \"stats\" | nc localhost 11211 | grep -E \"STAT (bytes|curr_items|get_hits|get_misses|evictions)\"\n\nHITS=$(echo \"stats\" | nc localhost 11211 | grep \"get_hits\" | awk '{print $3}')\nMISSES=$(echo \"stats\" | nc localhost 11211 | grep \"get_misses\" | awk '{print $3}')\n\nif [ $HITS -gt 0 ]; then\n    RATIO=$(echo \"scale=2; $HITS * 100 / ($HITS + $MISSES)\" | bc)\n    echo \"Hit Ratio: ${RATIO}%\"\nfi\n```\n\n### Nagios/Monitoring Plugin\n\n```bash\n#!/bin/bash\n# check_memcached.sh\n\nHOST=${1:-localhost}\nPORT=${2:-11211}\nWARNING=${3:-80}\nCRITICAL=${4:-90}\n\nSTATS=$(echo \"stats\" | nc $HOST $PORT)\nUSED=$(echo \"$STATS\" | grep \"bytes\" | head -1 | awk '{print $3}')\nLIMIT=$(echo \"$STATS\" | grep \"limit_maxbytes\" | awk '{print $3}')\n\nPERCENT=$(echo \"scale=2; $USED * 100 / $LIMIT\" | bc | cut -d. -f1)\n\nif [ $PERCENT -ge $CRITICAL ]; then\n    echo \"CRITICAL - Memory usage at ${PERCENT}%\"\n    exit 2\nelif [ $PERCENT -ge $WARNING ]; then\n    echo \"WARNING - Memory usage at ${PERCENT}%\"\n    exit 1\nelse\n    echo \"OK - Memory usage at ${PERCENT}%\"\n    exit 0\nfi\n```\n\n## Client Configuration Examples\n\n### PHP\n\n```php\n// Install: pecl install memcached\n$memcached = new Memcached();\n$memcached-\u003eaddServer('localhost', 11211);\n\n// With SASL\n$memcached-\u003esetOption(Memcached::OPT_BINARY_PROTOCOL, true);\n$memcached-\u003esetSaslAuthData('username', 'password');\n\n// Basic usage\n$memcached-\u003eset('key', 'value', 3600);\n$value = $memcached-\u003eget('key');\n```\n\n### Python\n\n```python\n# Install: pip install python-memcached\nimport memcache\n\nmc = memcache.Client(['127.0.0.1:11211'], debug=0)\nmc.set(\"key\", \"value\", time=3600)\nvalue = mc.get(\"key\")\n\n# With connection pooling\n# Install: pip install pymemcache\nfrom pymemcache.client import base\nclient = base.Client(('localhost', 11211))\nclient.set('key', 'value', expire=3600)\n```\n\n### Node.js\n\n```javascript\n// Install: npm install memcached\nconst Memcached = require('memcached');\nconst memcached = new Memcached('localhost:11211');\n\nmemcached.set('key', 'value', 3600, (err) =\u003e {\n    if (err) console.error(err);\n});\n\nmemcached.get('key', (err, data) =\u003e {\n    if (err) console.error(err);\n    console.log(data);\n});\n```\n\n### Ruby\n\n```ruby\n# Install: gem install dalli\nrequire 'dalli'\n\ndc = Dalli::Client.new('localhost:11211')\ndc.set('key', 'value', 3600)\nvalue = dc.get('key')\n```\n\n## 6. Troubleshooting\n\n### Common Issues\n\n1. **Connection refused**:\n```bash\n# Check if service is running\nsudo systemctl status memcached\n\n# Check if listening on correct interface\nsudo netstat -tlnp | grep 11211\n\n# Test connection\ntelnet localhost 11211\n```\n\n2. **Out of memory errors**:\n```bash\n# Check current usage\necho \"stats\" | nc localhost 11211 | grep bytes\n\n# Increase memory limit in configuration\n# Restart service after changes\n```\n\n3. **Permission denied**:\n```bash\n# Check user permissions\nps aux | grep memcached\n\n# Fix permissions\nsudo chown memcached:memcached /var/run/memcached\n```\n\n### Debug Mode\n\n```bash\n# Run in foreground with verbose output\nmemcached -vv -p 11211 -U 0 -l 127.0.0.1\n\n# Maximum verbosity\nmemcached -vvv\n```\n\n## Best Practices\n\n1. **Memory Allocation**\n   - Set memory limit based on available RAM\n   - Leave enough memory for OS and other services\n   - Monitor eviction rates\n\n2. **Security**\n   - Bind to localhost unless network access needed\n   - Use SASL authentication for network access\n   - Implement firewall rules\n   - Never expose to public internet\n\n3. **Key Design**\n   - Use consistent naming conventions\n   - Implement namespacing\n   - Keep keys under 250 bytes\n   - Set appropriate TTLs\n\n4. **Monitoring**\n   - Track hit/miss ratios\n   - Monitor evictions\n   - Watch connection counts\n   - Set up alerts for service failures\n\n## 9. Backup and Restore\n\n### What to Backup\n\nMemcached is an in-memory cache, so there's no persistent data to backup by default. However, you should backup:\n\n1. **Configuration files**:\n```bash\n# Create backup directory\nsudo mkdir -p /backup/memcached/configs\n\n# Backup configurations\nsudo cp /etc/sysconfig/memcached /backup/memcached/configs/  # RHEL-based\nsudo cp /etc/memcached.conf /backup/memcached/configs/       # Debian-based\nsudo cp /etc/conf.d/memcached /backup/memcached/configs/     # Alpine/Arch\n```\n\n2. **Service files** (if customized):\n```bash\nsudo cp /etc/systemd/system/memcached.service /backup/memcached/configs/\n```\n\n### Backup Script\n\n```bash\n#!/bin/bash\n# backup-memcached-config.sh\n\nBACKUP_DIR=\"/backup/memcached/$(date +%Y%m%d_%H%M%S)\"\nmkdir -p \"$BACKUP_DIR\"\n\n# Detect distribution and backup appropriate config\nif [ -f /etc/sysconfig/memcached ]; then\n    cp /etc/sysconfig/memcached \"$BACKUP_DIR/\"\nelif [ -f /etc/memcached.conf ]; then\n    cp /etc/memcached.conf \"$BACKUP_DIR/\"\nelif [ -f /etc/conf.d/memcached ]; then\n    cp /etc/conf.d/memcached \"$BACKUP_DIR/\"\nfi\n\n# Backup custom service files\nif [ -f /etc/systemd/system/memcached.service ]; then\n    cp /etc/systemd/system/memcached.service \"$BACKUP_DIR/\"\nfi\n\n# Save current memcached stats for reference\necho \"stats\" | nc localhost 11211 \u003e \"$BACKUP_DIR/stats.txt\"\n\necho \"Configuration backed up to: $BACKUP_DIR\"\n```\n\n### Restore Procedure\n\n```bash\n#!/bin/bash\n# restore-memcached-config.sh\n\nBACKUP_DIR=\"$1\"\nif [ -z \"$BACKUP_DIR\" ]; then\n    echo \"Usage: $0 \u003cbackup-directory\u003e\"\n    exit 1\nfi\n\n# Stop memcached\nsudo systemctl stop memcached\n\n# Restore configuration\nif [ -f \"$BACKUP_DIR/memcached\" ]; then\n    # Detect where to restore\n    if [ -d /etc/sysconfig ]; then\n        sudo cp \"$BACKUP_DIR/memcached\" /etc/sysconfig/\n    elif [ -d /etc/conf.d ]; then\n        sudo cp \"$BACKUP_DIR/memcached\" /etc/conf.d/\n    fi\nelif [ -f \"$BACKUP_DIR/memcached.conf\" ]; then\n    sudo cp \"$BACKUP_DIR/memcached.conf\" /etc/\nfi\n\n# Restore service file if exists\nif [ -f \"$BACKUP_DIR/memcached.service\" ]; then\n    sudo cp \"$BACKUP_DIR/memcached.service\" /etc/systemd/system/\n    sudo systemctl daemon-reload\nfi\n\n# Start memcached\nsudo systemctl start memcached\n\necho \"Configuration restored from: $BACKUP_DIR\"\n```\n\n## Maintenance\n\n### Update Procedures\n\n```bash\n# RHEL/CentOS/Rocky/AlmaLinux\nsudo dnf update memcached\n\n# Debian/Ubuntu\nsudo apt update \u0026\u0026 sudo apt upgrade memcached\n\n# Arch Linux\nsudo pacman -Syu memcached\n\n# Alpine Linux\napk upgrade memcached\n\n# openSUSE\nsudo zypper update memcached\n```\n\n### Version Upgrades\n\n1. **Check current version**:\n```bash\nmemcached -V\n```\n\n2. **Plan upgrade**:\n- Review changelog for breaking changes\n- Test in non-production environment\n- Plan for cache warming after restart\n\n3. **Perform upgrade**:\n```bash\n# Backup configuration\n./backup-memcached-config.sh\n\n# Upgrade package\nsudo apt update \u0026\u0026 sudo apt upgrade memcached  # Debian/Ubuntu\n\n# Restart service\nsudo systemctl restart memcached\n\n# Verify new version\nmemcached -V\n```\n\n### Log Rotation\n\nConfigure log rotation for memcached logs:\n\n```bash\n# Create /etc/logrotate.d/memcached\nsudo tee /etc/logrotate.d/memcached \u003c\u003cEOF\n/var/log/memcached.log {\n    daily\n    rotate 7\n    compress\n    delaycompress\n    missingok\n    notifempty\n    create 640 memcached memcached\n    postrotate\n        systemctl reload memcached \u003e /dev/null 2\u003e\u00261 || true\n    endscript\n}\nEOF\n```\n\n### Cleanup Procedures\n\n```bash\n# Clear all cache data (WARNING: This removes all cached items!)\necho \"flush_all\" | nc localhost 11211\n\n# Remove old log files\nfind /var/log -name \"memcached.log.*\" -mtime +30 -delete\n\n# Clean up temporary files\nrm -f /tmp/memcached.sock.*\n```\n\n## Integration Examples\n\n### PHP Integration\n\n```php\n\u003c?php\n// Using PECL memcached extension\n$memcached = new Memcached();\n$memcached-\u003eaddServer('localhost', 11211);\n\n// Connection pooling\n$memcached-\u003esetOption(Memcached::OPT_TCP_NODELAY, true);\n$memcached-\u003esetOption(Memcached::OPT_NO_BLOCK, true);\n\n// Example caching function\nfunction getCachedData($key, $callback, $ttl = 3600) {\n    global $memcached;\n    \n    $data = $memcached-\u003eget($key);\n    if ($memcached-\u003egetResultCode() === Memcached::RES_NOTFOUND) {\n        $data = $callback();\n        $memcached-\u003eset($key, $data, $ttl);\n    }\n    return $data;\n}\n\n// Usage\n$users = getCachedData('all_users', function() {\n    return db_query(\"SELECT * FROM users\");\n}, 300);\n```\n\n### Python Integration\n\n```python\nimport memcache\nimport functools\nimport time\n\n# Create client with multiple servers\nmc = memcache.Client(['127.0.0.1:11211', '127.0.0.1:11212'], debug=0)\n\n# Decorator for caching\ndef cache_result(expiration=3600):\n    def decorator(func):\n        @functools.wraps(func)\n        def wrapper(*args, **kwargs):\n            cache_key = f\"{func.__name__}:{str(args)}:{str(kwargs)}\"\n            result = mc.get(cache_key)\n            \n            if result is None:\n                result = func(*args, **kwargs)\n                mc.set(cache_key, result, time=expiration)\n            \n            return result\n        return wrapper\n    return decorator\n\n# Usage\n@cache_result(expiration=300)\ndef expensive_calculation(x, y):\n    time.sleep(2)  # Simulate expensive operation\n    return x * y + sum(range(1000000))\n```\n\n### Node.js Integration\n\n```javascript\nconst Memcached = require('memcached');\n\n// Create client with options\nconst memcached = new Memcached('localhost:11211', {\n    retries: 10,\n    retry: 10000,\n    remove: true,\n    failOverServers: ['192.168.1.100:11211']\n});\n\n// Promisified wrapper\nconst cache = {\n    get: (key) =\u003e new Promise((resolve, reject) =\u003e {\n        memcached.get(key, (err, data) =\u003e {\n            if (err) reject(err);\n            else resolve(data);\n        });\n    }),\n    \n    set: (key, value, ttl = 3600) =\u003e new Promise((resolve, reject) =\u003e {\n        memcached.set(key, value, ttl, (err) =\u003e {\n            if (err) reject(err);\n            else resolve(true);\n        });\n    }),\n    \n    delete: (key) =\u003e new Promise((resolve, reject) =\u003e {\n        memcached.del(key, (err) =\u003e {\n            if (err) reject(err);\n            else resolve(true);\n        });\n    })\n};\n\n// Usage with async/await\nasync function getCachedUser(userId) {\n    const cacheKey = `user:${userId}`;\n    \n    try {\n        // Try cache first\n        let user = await cache.get(cacheKey);\n        \n        if (!user) {\n            // Cache miss - fetch from database\n            user = await db.query('SELECT * FROM users WHERE id = ?', [userId]);\n            await cache.set(cacheKey, user, 300); // Cache for 5 minutes\n        }\n        \n        return user;\n    } catch (error) {\n        console.error('Cache error:', error);\n        // Fallback to database\n        return await db.query('SELECT * FROM users WHERE id = ?', [userId]);\n    }\n}\n```\n\n### Ruby on Rails Integration\n\n```ruby\n# config/environments/production.rb\nconfig.cache_store = :mem_cache_store, \n  'localhost:11211', \n  { \n    namespace: 'myapp',\n    expires_in: 1.hour,\n    compress: true,\n    pool_size: 5,\n    pool_timeout: 5\n  }\n\n# app/models/user.rb\nclass User \u003c ApplicationRecord\n  def expensive_calculation\n    Rails.cache.fetch(\"user_#{id}_calculation\", expires_in: 12.hours) do\n      # Expensive calculation here\n      sleep 2\n      posts.count * comments.count\n    end\n  end\nend\n\n# app/controllers/application_controller.rb\nclass ApplicationController \u003c ActionController::Base\n  around_action :cache_control\n  \n  private\n  \n  def cache_control\n    if user_signed_in?\n      yield\n    else\n      # Cache pages for non-authenticated users\n      expires_in 5.minutes, public: true\n      yield\n    end\n  end\nend\n```\n\n## Additional Resources\n\n- [Official Documentation](https://memcached.org/)\n- [GitHub Repository](https://github.com/memcached/memcached)\n- [Protocol Specification](https://github.com/memcached/memcached/blob/master/doc/protocol.txt)\n- [Best Practices Guide](https://github.com/memcached/memcached/wiki/Programming)\n- [Performance Tuning](https://github.com/memcached/memcached/wiki/Performance)\n\n---\n\n**Note:** This guide is part of the [HowToMgr](https://howtomgr.github.io) collection. Always refer to official documentation for the most up-to-date information.","readmeHtml":"\u003cp class=\"mobile-paragraph\"\u003eMemcached is a free and open-source, high-performance, distributed memory object caching system. Originally developed by Danga Interactive for LiveJournal, it's now used by many high-traffic websites as an in-memory key-value store that significantly reduces database load and improves application response times. It serves as a FOSS alternative to commercial caching solutions like Redis Enterprise or AWS ElastiCache.\u003c/p\u003e\n\u003ch2 id=\"1-prerequisites\" class=\"mobile-header\"\u003e1. Prerequisites\u003c/h2\u003e\n\u003cli class=\"mobile-list-item\"\u003e\u003cstrong\u003eHardware Requirements\u003c/strong\u003e:\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eCPU: 1 core minimum (2+ cores recommended for high traffic)\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eRAM: 64MB minimum (1GB+ recommended for production)\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eStorage: 100MB for installation\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003e\u003cstrong\u003eOperating System\u003c/strong\u003e: Linux, BSD, macOS, or Windows (via WSL2)\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003e\u003cstrong\u003eNetwork Requirements\u003c/strong\u003e:\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003ePort 11211 (default, configurable)\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eTCP and UDP protocols\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eLow latency network for distributed setups\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003e\u003cstrong\u003eDependencies\u003c/strong\u003e:\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003elibevent 2.0+ (for event notification)\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eSASL libraries (optional, for authentication)\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eC compiler (for building from source)\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003e\u003cstrong\u003eSystem Access\u003c/strong\u003e: root or sudo privileges required\u003c/li\u003e\n\u003ch2 id=\"2-supported-operating-systems\" class=\"mobile-header\"\u003e2. Supported Operating Systems\u003c/h2\u003e\n\u003cp class=\"mobile-paragraph\"\u003eThis guide supports installation on:\u003c/p\u003e\n\u003cli class=\"mobile-list-item\"\u003eRHEL 8/9 and derivatives (CentOS Stream, Rocky Linux, AlmaLinux)\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eDebian 11/12\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eUbuntu 20.04/22.04/24.04 LTS\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eArch Linux (rolling release)\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eAlpine Linux 3.18+\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eopenSUSE Leap 15.5+ / Tumbleweed\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eSUSE Linux Enterprise Server (SLES) 15+\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003emacOS 12+ (Monterey and later) \u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eFreeBSD 13+\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eWindows 10/11/Server 2019+ (where applicable)\u003c/li\u003e\n\u003ch2 id=\"3-installation\" class=\"mobile-header\"\u003e3. Installation\u003c/h2\u003e\n\u003ch3 id=\"rhelcentosrocky-linuxalmalinux\" class=\"mobile-header\"\u003eRHEL/CentOS/Rocky Linux/AlmaLinux\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# RHEL/CentOS 7\nsudo yum install -y epel-release\nsudo yum install -y memcached\n\n# RHEL/CentOS/Rocky/Alma 8+\nsudo dnf install -y epel-release\nsudo dnf install -y memcached\n\n# Install development tools (optional, for building from source)\nsudo dnf groupinstall -y \u0026quot;Development Tools\u0026quot;\nsudo dnf install -y libevent-devel\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"debianubuntu\" class=\"mobile-header\"\u003eDebian/Ubuntu\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Update package list\nsudo apt update\n\n# Install memcached\nsudo apt install -y memcached libmemcached-tools\n\n# Install development libraries (optional)\nsudo apt install -y build-essential libevent-dev libsasl2-dev\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"arch-linux\" class=\"mobile-header\"\u003eArch Linux\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Install memcached from official repositories\nsudo pacman -S memcached\n\n# Install development tools (optional)\nsudo pacman -S base-devel libevent\n\n# For additional tools\nsudo pacman -S libmemcached\n\n# Enable and start service\nsudo systemctl enable --now memcached\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"alpine-linux\" class=\"mobile-header\"\u003eAlpine Linux\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Install memcached\napk add --no-cache memcached\n\n# Install development tools (optional)\napk add --no-cache build-base libevent-dev\n\n# Create memcached user if not exists\nadduser -D -H -s /sbin/nologin memcached\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"opensusesles\" class=\"mobile-header\"\u003eopenSUSE/SLES\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# openSUSE Leap/Tumbleweed\nsudo zypper install -y memcached\n\n# Install development tools (optional)\nsudo zypper install -y gcc make libevent-devel\n\n# SLES (may require additional repositories)\nsudo SUSEConnect -p sle-module-web-scripting/15.5/x86_64\nsudo zypper install -y memcached\n\n# Enable and start service\nsudo systemctl enable --now memcached\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"macos\" class=\"mobile-header\"\u003emacOS\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Using Homebrew\nbrew install memcached\n\n# Start as service\nbrew services start memcached\n\n# Or run manually\n/usr/local/opt/memcached/bin/memcached\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"windows\" class=\"mobile-header\"\u003eWindows\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"powershell\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003epowershell\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-powershell\"\u003e# Using Chocolatey\nchoco install memcached\n\n# Using manual installation\n# 1. Download from: http://downloads.northscale.com/memcached-1.4.5-amd64.zip\n# 2. Extract to C:\\memcached\n# 3. Install as service:\nC:\\memcached\\memcached.exe -d install\n\n# Start service\nnet start memcached\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"build-from-source-all-platforms\" class=\"mobile-header\"\u003eBuild from Source (All Platforms)\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Download latest version\nwget https://memcached.org/latest\ntar -zxvf memcached-*.tar.gz\ncd memcached-*\n\n# Configure and build\n./configure --prefix=/usr/local\nmake\nsudo make install\n\n# Create systemd service (Linux)\nsudo nano /etc/systemd/system/memcached.service\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"initial-configuration\" class=\"mobile-header\"\u003eInitial Configuration\u003c/h2\u003e\n\u003ch3 id=\"first-run-setup\" class=\"mobile-header\"\u003eFirst-Run Setup\u003c/h3\u003e\n\u003cp class=\"mobile-paragraph\"\u003e1. \u003cstrong\u003eCreate dedicated user\u003c/strong\u003e (if not created by package):\u003c/p\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Linux systems\nsudo useradd -r -s /sbin/nologin memcached\n\n# Verify user exists\nid memcached\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003cp class=\"mobile-paragraph\"\u003e2. \u003cstrong\u003eDefault configuration locations\u003c/strong\u003e:\u003c/p\u003e\n\u003cli class=\"mobile-list-item\"\u003eRHEL/CentOS/Rocky/AlmaLinux: \u003ccode class=\"mobile-inline-code\"\u003e/etc/sysconfig/memcached\u003c/code\u003e\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eDebian/Ubuntu: \u003ccode class=\"mobile-inline-code\"\u003e/etc/memcached.conf\u003c/code\u003e\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eArch Linux: \u003ccode class=\"mobile-inline-code\"\u003e/etc/conf.d/memcached\u003c/code\u003e\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eAlpine Linux: \u003ccode class=\"mobile-inline-code\"\u003e/etc/conf.d/memcached\u003c/code\u003e\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eopenSUSE/SLES: \u003ccode class=\"mobile-inline-code\"\u003e/etc/sysconfig/memcached\u003c/code\u003e\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003emacOS: \u003ccode class=\"mobile-inline-code\"\u003e~/Library/LaunchAgents/homebrew.mxcl.memcached.plist\u003c/code\u003e\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eFreeBSD: \u003ccode class=\"mobile-inline-code\"\u003e/usr/local/etc/memcached.conf\u003c/code\u003e\u003c/li\u003e\n\u003cp class=\"mobile-paragraph\"\u003e3. \u003cstrong\u003eEssential settings to change\u003c/strong\u003e:\u003c/p\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Set appropriate memory limit (default is often 64MB)\n-m 256    # 256MB cache size\n\n# Bind to specific interface (security)\n-l 127.0.0.1    # localhost only\n# OR for specific network\n-l 192.168.1.100\n\n# Change default port if needed\n-p 11211\n\n# Set max connections\n-c 1024\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003cp class=\"mobile-paragraph\"\u003e\u003cstrong\u003eWARNING:\u003c/strong\u003e Never expose memcached to the public internet without authentication!\u003c/p\u003e\n\u003ch3 id=\"testing-initial-setup\" class=\"mobile-header\"\u003eTesting Initial Setup\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Test memcached is running\necho \u0026quot;stats\u0026quot; | nc localhost 11211\n\n# Check version\necho \u0026quot;version\u0026quot; | nc localhost 11211\n\n# Test set/get operation\n(echo \u0026quot;set test 0 60 5\u0026quot;; echo \u0026quot;hello\u0026quot;; echo \u0026quot;get test\u0026quot;) | nc localhost 11211\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"advanced-configuration\" class=\"mobile-header\"\u003eAdvanced Configuration\u003c/h2\u003e\n\u003ch3 id=\"rhelcentos-configuration\" class=\"mobile-header\"\u003eRHEL/CentOS Configuration\u003c/h3\u003e\n\u003cp class=\"mobile-paragraph\"\u003eEdit \u003ccode class=\"mobile-inline-code\"\u003e/etc/sysconfig/memcached\u003c/code\u003e:\u003c/p\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Port\nPORT=\u0026quot;11211\u0026quot;\n\n# User\nUSER=\u0026quot;memcached\u0026quot;\n\n# Max connections\nMAXCONN=\u0026quot;1024\u0026quot;\n\n# Cache size in MB\nCACHESIZE=\u0026quot;64\u0026quot;\n\n# Listening IP (empty for all interfaces)\nOPTIONS=\u0026quot;-l 127.0.0.1\u0026quot;\n\n# For network access\n# OPTIONS=\u0026quot;-l 0.0.0.0\u0026quot;\n\n# With SASL authentication\n# OPTIONS=\u0026quot;-l 127.0.0.1 -S\u0026quot;\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"debianubuntu-configuration\" class=\"mobile-header\"\u003eDebian/Ubuntu Configuration\u003c/h3\u003e\n\u003cp class=\"mobile-paragraph\"\u003eEdit \u003ccode class=\"mobile-inline-code\"\u003e/etc/memcached.conf\u003c/code\u003e:\u003c/p\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Memory cache size in MB\n-m 64\n\n# Port\n-p 11211\n\n# User to run daemon\n-u memcache\n\n# Listen on localhost only\n-l 127.0.0.1\n\n# Max simultaneous connections\n-c 1024\n\n# Run as daemon\n-d\n\n# Log file\nlogfile /var/log/memcached.log\n\n# Verbose logging (remove for production)\n# -v\n\n# Very verbose (debugging)\n# -vv\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"alpine-linux-configuration\" class=\"mobile-header\"\u003eAlpine Linux Configuration\u003c/h3\u003e\n\u003cp class=\"mobile-paragraph\"\u003eEdit \u003ccode class=\"mobile-inline-code\"\u003e/etc/conf.d/memcached\u003c/code\u003e:\u003c/p\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Memcached options\nMEMCACHED_USER=\u0026quot;memcached\u0026quot;\nMEMCACHED_PORT=\u0026quot;11211\u0026quot;\nMEMCACHED_MAX_MEMORY=\u0026quot;64\u0026quot;\nMEMCACHED_MAX_CONNECTIONS=\u0026quot;1024\u0026quot;\nMEMCACHED_LISTEN=\u0026quot;127.0.0.1\u0026quot;\nMEMCACHED_OPTS=\u0026quot;\u0026quot;\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"macos-configuration\" class=\"mobile-header\"\u003emacOS Configuration\u003c/h3\u003e\n\u003cp class=\"mobile-paragraph\"\u003eCreate \u003ccode class=\"mobile-inline-code\"\u003e~/Library/LaunchAgents/homebrew.mxcl.memcached.plist\u003c/code\u003e:\u003c/p\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"xml\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003exml\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-xml\"\u003e\u0026lt;?xml version=\u0026quot;1.0\u0026quot; encoding=\u0026quot;UTF-8\u0026quot;?\u0026gt;\n\u0026lt;!DOCTYPE plist PUBLIC \u0026quot;-//Apple//DTD PLIST 1.0//EN\u0026quot; \u0026quot;http://www.apple.com/DTDs/PropertyList-1.0.dtd\u0026quot;\u0026gt;\n\u0026lt;plist version=\u0026quot;1.0\u0026quot;\u0026gt;\n\u0026lt;dict\u0026gt;\n    \u0026lt;key\u0026gt;Label\u0026lt;/key\u0026gt;\n    \u0026lt;string\u0026gt;homebrew.mxcl.memcached\u0026lt;/string\u0026gt;\n    \u0026lt;key\u0026gt;ProgramArguments\u0026lt;/key\u0026gt;\n    \u0026lt;array\u0026gt;\n        \u0026lt;string\u0026gt;/usr/local/opt/memcached/bin/memcached\u0026lt;/string\u0026gt;\n        \u0026lt;string\u0026gt;-l\u0026lt;/string\u0026gt;\n        \u0026lt;string\u0026gt;127.0.0.1\u0026lt;/string\u0026gt;\n        \u0026lt;string\u0026gt;-m\u0026lt;/string\u0026gt;\n        \u0026lt;string\u0026gt;64\u0026lt;/string\u0026gt;\n    \u0026lt;/array\u0026gt;\n    \u0026lt;key\u0026gt;RunAtLoad\u0026lt;/key\u0026gt;\n    \u0026lt;true/\u0026gt;\n\u0026lt;/dict\u0026gt;\n\u0026lt;/plist\u0026gt;\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"windows-configuration\" class=\"mobile-header\"\u003eWindows Configuration\u003c/h3\u003e\n\u003cp class=\"mobile-paragraph\"\u003eCreate \u003ccode class=\"mobile-inline-code\"\u003eC:\\memcached\\memcached.conf\u003c/code\u003e:\u003c/p\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"text\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003etext\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-text\"\u003e# Memory limit in MB\n-m 64\n\n# Port number\n-p 11211\n\n# IP address to listen on\n-l 127.0.0.1\n\n# Maximum connections\n-c 1024\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"5-service-management\" class=\"mobile-header\"\u003e5. Service Management\u003c/h2\u003e\n\u003ch3 id=\"rhelcentosdebianubuntu-systemd\" class=\"mobile-header\"\u003eRHEL/CentOS/Debian/Ubuntu (systemd)\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Enable on boot\nsudo systemctl enable memcached\n\n# Start service\nsudo systemctl start memcached\n\n# Stop service\nsudo systemctl stop memcached\n\n# Restart service\nsudo systemctl restart memcached\n\n# Check status\nsudo systemctl status memcached\n\n# View logs\nsudo journalctl -u memcached -f\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"alpine-linux-openrc\" class=\"mobile-header\"\u003eAlpine Linux (OpenRC)\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Enable on boot\nrc-update add memcached default\n\n# Start service\nrc-service memcached start\n\n# Stop service\nrc-service memcached stop\n\n# Restart service\nrc-service memcached restart\n\n# Check status\nrc-service memcached status\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"macos\" class=\"mobile-header\"\u003emacOS\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Start service\nbrew services start memcached\n\n# Stop service\nbrew services stop memcached\n\n# Restart service\nbrew services restart memcached\n\n# Check if running\nbrew services list | grep memcached\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"windows\" class=\"mobile-header\"\u003eWindows\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"powershell\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003epowershell\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-powershell\"\u003e# Start service\nnet start memcached\n\n# Stop service\nnet stop memcached\n\n# Restart service\nnet stop memcached \u0026amp;\u0026amp; net start memcached\n\n# Check status\nsc query memcached\n\n# Configure service\nsc config memcached start= auto\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"security-configuration\" class=\"mobile-header\"\u003eSecurity Configuration\u003c/h2\u003e\n\u003ch3 id=\"enable-sasl-authentication\" class=\"mobile-header\"\u003eEnable SASL Authentication\u003c/h3\u003e\n\u003cp class=\"mobile-paragraph\"\u003e\u003cstrong\u003eRHEL/CentOS/Debian/Ubuntu:\u003c/strong\u003e\u003c/p\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Install SASL\n# RHEL/CentOS\nsudo yum install -y cyrus-sasl cyrus-sasl-devel cyrus-sasl-plain\n\n# Debian/Ubuntu\nsudo apt install -y sasl2-bin libsasl2-2 libsasl2-dev libsasl2-modules\n\n# Create SASL configuration\nsudo mkdir -p /etc/sasl2\nsudo nano /etc/sasl2/memcached.conf\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003cp class=\"mobile-paragraph\"\u003eAdd to \u003ccode class=\"mobile-inline-code\"\u003e/etc/sasl2/memcached.conf\u003c/code\u003e:\u003c/p\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"text\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003etext\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-text\"\u003emech_list: plain\nlog_level: 5\nsasldb_path: /etc/sasl2/memcached-sasldb2\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003cp class=\"mobile-paragraph\"\u003eCreate SASL user:\u003c/p\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003esudo saslpasswd2 -a memcached -c -f /etc/sasl2/memcached-sasldb2 myuser\nsudo chown memcached:memcached /etc/sasl2/memcached-sasldb2\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003cp class=\"mobile-paragraph\"\u003eEnable SASL in memcached:\u003c/p\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# RHEL/CentOS - Edit /etc/sysconfig/memcached\nOPTIONS=\u0026quot;-l 127.0.0.1 -S\u0026quot;\n\n# Debian/Ubuntu - Edit /etc/memcached.conf\n# Add line:\n-S\n\n# Restart service\nsudo systemctl restart memcached\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"firewall-configuration\" class=\"mobile-header\"\u003eFirewall Configuration\u003c/h3\u003e\n\u003cp class=\"mobile-paragraph\"\u003e\u003cstrong\u003eRHEL/CentOS (firewalld):\u003c/strong\u003e\u003c/p\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Add service\nsudo firewall-cmd --permanent --add-service=memcache\n# Or specific port\nsudo firewall-cmd --permanent --add-port=11211/tcp\n\n# Reload firewall\nsudo firewall-cmd --reload\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003cp class=\"mobile-paragraph\"\u003e\u003cstrong\u003eDebian/Ubuntu (ufw):\u003c/strong\u003e\u003c/p\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Allow from specific IP\nsudo ufw allow from 192.168.1.100 to any port 11211\n\n# Allow from subnet\nsudo ufw allow from 192.168.1.0/24 to any port 11211\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003cp class=\"mobile-paragraph\"\u003e\u003cstrong\u003eAlpine (iptables):\u003c/strong\u003e\u003c/p\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Add rule\niptables -A INPUT -p tcp --dport 11211 -s 192.168.1.0/24 -j ACCEPT\n\n# Save rules\n/etc/init.d/iptables save\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"8-performance-tuning\" class=\"mobile-header\"\u003e8. Performance Tuning\u003c/h2\u003e\n\u003ch3 id=\"linux-kernel-parameters\" class=\"mobile-header\"\u003eLinux Kernel Parameters\u003c/h3\u003e\n\u003cp class=\"mobile-paragraph\"\u003eAdd to \u003ccode class=\"mobile-inline-code\"\u003e/etc/sysctl.conf\u003c/code\u003e:\u003c/p\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Increase max connections\nnet.core.somaxconn = 1024\nnet.ipv4.tcp_max_syn_backlog = 1024\n\n# TCP memory\nnet.ipv4.tcp_mem = 786432 1048576 26777216\nnet.ipv4.tcp_rmem = 4096 87380 134217728\nnet.ipv4.tcp_wmem = 4096 65536 134217728\n\n# Apply changes\nsudo sysctl -p\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"connection-pooling\" class=\"mobile-header\"\u003eConnection Pooling\u003c/h3\u003e\n\u003cp class=\"mobile-paragraph\"\u003eConfigure for high-traffic scenarios:\u003c/p\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Edit memcached config\n# RHEL/CentOS: /etc/sysconfig/memcached\n# Debian/Ubuntu: /etc/memcached.conf\n\n# Increase connection limit\n-c 10000\n\n# Use multiple threads (CPU cores)\n-t 4\n\n# Disable CAS (Compare-And-Swap) if not needed\n-C\n\n# Large memory pages (Linux)\n-L\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"memory-optimization\" class=\"mobile-header\"\u003eMemory Optimization\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Calculate slab sizes\nmemcached -vv\n\n# Custom slab configuration\nmemcached -f 1.25 -n 48\n\n# Monitor slab usage\necho \u0026quot;stats slabs\u0026quot; | nc localhost 11211\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"monitoring\" class=\"mobile-header\"\u003eMonitoring\u003c/h2\u003e\n\u003ch3 id=\"built-in-statistics\" class=\"mobile-header\"\u003eBuilt-in Statistics\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Basic stats\necho \u0026quot;stats\u0026quot; | nc localhost 11211\n\n# Slab statistics\necho \u0026quot;stats slabs\u0026quot; | nc localhost 11211\n\n# Item statistics\necho \u0026quot;stats items\u0026quot; | nc localhost 11211\n\n# Connection stats\necho \u0026quot;stats conns\u0026quot; | nc localhost 11211\n\n# Settings\necho \u0026quot;stats settings\u0026quot; | nc localhost 11211\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"monitoring-scripts\" class=\"mobile-header\"\u003eMonitoring Scripts\u003c/h3\u003e\n\u003cp class=\"mobile-paragraph\"\u003eCreate \u003ccode class=\"mobile-inline-code\"\u003e/usr/local/bin/memcached-stats.sh\u003c/code\u003e:\u003c/p\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e#!/bin/bash\n\necho \u0026quot;=== Memcached Statistics ===\u0026quot;\necho \u0026quot;stats\u0026quot; | nc localhost 11211 | grep -E \u0026quot;STAT (bytes|curr_items|get_hits|get_misses|evictions)\u0026quot;\n\nHITS=$(echo \u0026quot;stats\u0026quot; | nc localhost 11211 | grep \u0026quot;get_hits\u0026quot; | awk \u0026#039;{print $3}\u0026#039;)\nMISSES=$(echo \u0026quot;stats\u0026quot; | nc localhost 11211 | grep \u0026quot;get_misses\u0026quot; | awk \u0026#039;{print $3}\u0026#039;)\n\nif [ $HITS -gt 0 ]; then\n    RATIO=$(echo \u0026quot;scale=2; $HITS * 100 / ($HITS + $MISSES)\u0026quot; | bc)\n    echo \u0026quot;Hit Ratio: ${RATIO}%\u0026quot;\nfi\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"nagiosmonitoring-plugin\" class=\"mobile-header\"\u003eNagios/Monitoring Plugin\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e#!/bin/bash\n# check_memcached.sh\n\nHOST=${1:-localhost}\nPORT=${2:-11211}\nWARNING=${3:-80}\nCRITICAL=${4:-90}\n\nSTATS=$(echo \u0026quot;stats\u0026quot; | nc $HOST $PORT)\nUSED=$(echo \u0026quot;$STATS\u0026quot; | grep \u0026quot;bytes\u0026quot; | head -1 | awk \u0026#039;{print $3}\u0026#039;)\nLIMIT=$(echo \u0026quot;$STATS\u0026quot; | grep \u0026quot;limit_maxbytes\u0026quot; | awk \u0026#039;{print $3}\u0026#039;)\n\nPERCENT=$(echo \u0026quot;scale=2; $USED * 100 / $LIMIT\u0026quot; | bc | cut -d. -f1)\n\nif [ $PERCENT -ge $CRITICAL ]; then\n    echo \u0026quot;CRITICAL - Memory usage at ${PERCENT}%\u0026quot;\n    exit 2\nelif [ $PERCENT -ge $WARNING ]; then\n    echo \u0026quot;WARNING - Memory usage at ${PERCENT}%\u0026quot;\n    exit 1\nelse\n    echo \u0026quot;OK - Memory usage at ${PERCENT}%\u0026quot;\n    exit 0\nfi\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"client-configuration-examples\" class=\"mobile-header\"\u003eClient Configuration Examples\u003c/h2\u003e\n\u003ch3 id=\"php\" class=\"mobile-header\"\u003ePHP\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"php\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ephp\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-php\"\u003e// Install: pecl install memcached\n$memcached = new Memcached();\n$memcached-\u0026gt;addServer(\u0026#039;localhost\u0026#039;, 11211);\n\n// With SASL\n$memcached-\u0026gt;setOption(Memcached::OPT_BINARY_PROTOCOL, true);\n$memcached-\u0026gt;setSaslAuthData(\u0026#039;username\u0026#039;, \u0026#039;password\u0026#039;);\n\n// Basic usage\n$memcached-\u0026gt;set(\u0026#039;key\u0026#039;, \u0026#039;value\u0026#039;, 3600);\n$value = $memcached-\u0026gt;get(\u0026#039;key\u0026#039;);\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"python\" class=\"mobile-header\"\u003ePython\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"python\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003epython\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-python\"\u003e# Install: pip install python-memcached\nimport memcache\n\nmc = memcache.Client([\u0026#039;127.0.0.1:11211\u0026#039;], debug=0)\nmc.set(\u0026quot;key\u0026quot;, \u0026quot;value\u0026quot;, time=3600)\nvalue = mc.get(\u0026quot;key\u0026quot;)\n\n# With connection pooling\n# Install: pip install pymemcache\nfrom pymemcache.client import base\nclient = base.Client((\u0026#039;localhost\u0026#039;, 11211))\nclient.set(\u0026#039;key\u0026#039;, \u0026#039;value\u0026#039;, expire=3600)\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"nodejs\" class=\"mobile-header\"\u003eNode.js\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"javascript\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ejavascript\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-javascript\"\u003e// Install: npm install memcached\nconst Memcached = require(\u0026#039;memcached\u0026#039;);\nconst memcached = new Memcached(\u0026#039;localhost:11211\u0026#039;);\n\nmemcached.set(\u0026#039;key\u0026#039;, \u0026#039;value\u0026#039;, 3600, (err) =\u0026gt; {\n    if (err) console.error(err);\n});\n\nmemcached.get(\u0026#039;key\u0026#039;, (err, data) =\u0026gt; {\n    if (err) console.error(err);\n    console.log(data);\n});\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"ruby\" class=\"mobile-header\"\u003eRuby\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"ruby\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003eruby\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-ruby\"\u003e# Install: gem install dalli\nrequire \u0026#039;dalli\u0026#039;\n\ndc = Dalli::Client.new(\u0026#039;localhost:11211\u0026#039;)\ndc.set(\u0026#039;key\u0026#039;, \u0026#039;value\u0026#039;, 3600)\nvalue = dc.get(\u0026#039;key\u0026#039;)\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"6-troubleshooting\" class=\"mobile-header\"\u003e6. Troubleshooting\u003c/h2\u003e\n\u003ch3 id=\"common-issues\" class=\"mobile-header\"\u003eCommon Issues\u003c/h3\u003e\n\u003cp class=\"mobile-paragraph\"\u003e1. \u003cstrong\u003eConnection refused\u003c/strong\u003e:\u003c/p\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Check if service is running\nsudo systemctl status memcached\n\n# Check if listening on correct interface\nsudo netstat -tlnp | grep 11211\n\n# Test connection\ntelnet localhost 11211\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003cp class=\"mobile-paragraph\"\u003e2. \u003cstrong\u003eOut of memory errors\u003c/strong\u003e:\u003c/p\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Check current usage\necho \u0026quot;stats\u0026quot; | nc localhost 11211 | grep bytes\n\n# Increase memory limit in configuration\n# Restart service after changes\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003cp class=\"mobile-paragraph\"\u003e3. \u003cstrong\u003ePermission denied\u003c/strong\u003e:\u003c/p\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Check user permissions\nps aux | grep memcached\n\n# Fix permissions\nsudo chown memcached:memcached /var/run/memcached\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"debug-mode\" class=\"mobile-header\"\u003eDebug Mode\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Run in foreground with verbose output\nmemcached -vv -p 11211 -U 0 -l 127.0.0.1\n\n# Maximum verbosity\nmemcached -vvv\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"best-practices\" class=\"mobile-header\"\u003eBest Practices\u003c/h2\u003e\n\u003cp class=\"mobile-paragraph\"\u003e1. \u003cstrong\u003eMemory Allocation\u003c/strong\u003e\u003c/p\u003e\n\u003cli class=\"mobile-list-item\"\u003eSet memory limit based on available RAM\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eLeave enough memory for OS and other services\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eMonitor eviction rates\u003c/li\u003e\n\u003cp class=\"mobile-paragraph\"\u003e2. \u003cstrong\u003eSecurity\u003c/strong\u003e\u003c/p\u003e\n\u003cli class=\"mobile-list-item\"\u003eBind to localhost unless network access needed\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eUse SASL authentication for network access\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eImplement firewall rules\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eNever expose to public internet\u003c/li\u003e\n\u003cp class=\"mobile-paragraph\"\u003e3. \u003cstrong\u003eKey Design\u003c/strong\u003e\u003c/p\u003e\n\u003cli class=\"mobile-list-item\"\u003eUse consistent naming conventions\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eImplement namespacing\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eKeep keys under 250 bytes\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eSet appropriate TTLs\u003c/li\u003e\n\u003cp class=\"mobile-paragraph\"\u003e4. \u003cstrong\u003eMonitoring\u003c/strong\u003e\u003c/p\u003e\n\u003cli class=\"mobile-list-item\"\u003eTrack hit/miss ratios\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eMonitor evictions\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eWatch connection counts\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eSet up alerts for service failures\u003c/li\u003e\n\u003ch2 id=\"9-backup-and-restore\" class=\"mobile-header\"\u003e9. Backup and Restore\u003c/h2\u003e\n\u003ch3 id=\"what-to-backup\" class=\"mobile-header\"\u003eWhat to Backup\u003c/h3\u003e\n\u003cp class=\"mobile-paragraph\"\u003eMemcached is an in-memory cache, so there's no persistent data to backup by default. However, you should backup:\u003c/p\u003e\n\u003cp class=\"mobile-paragraph\"\u003e1. \u003cstrong\u003eConfiguration files\u003c/strong\u003e:\u003c/p\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Create backup directory\nsudo mkdir -p /backup/memcached/configs\n\n# Backup configurations\nsudo cp /etc/sysconfig/memcached /backup/memcached/configs/  # RHEL-based\nsudo cp /etc/memcached.conf /backup/memcached/configs/       # Debian-based\nsudo cp /etc/conf.d/memcached /backup/memcached/configs/     # Alpine/Arch\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003cp class=\"mobile-paragraph\"\u003e2. \u003cstrong\u003eService files\u003c/strong\u003e (if customized):\u003c/p\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003esudo cp /etc/systemd/system/memcached.service /backup/memcached/configs/\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"backup-script\" class=\"mobile-header\"\u003eBackup Script\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e#!/bin/bash\n# backup-memcached-config.sh\n\nBACKUP_DIR=\u0026quot;/backup/memcached/$(date +%Y%m%d_%H%M%S)\u0026quot;\nmkdir -p \u0026quot;$BACKUP_DIR\u0026quot;\n\n# Detect distribution and backup appropriate config\nif [ -f /etc/sysconfig/memcached ]; then\n    cp /etc/sysconfig/memcached \u0026quot;$BACKUP_DIR/\u0026quot;\nelif [ -f /etc/memcached.conf ]; then\n    cp /etc/memcached.conf \u0026quot;$BACKUP_DIR/\u0026quot;\nelif [ -f /etc/conf.d/memcached ]; then\n    cp /etc/conf.d/memcached \u0026quot;$BACKUP_DIR/\u0026quot;\nfi\n\n# Backup custom service files\nif [ -f /etc/systemd/system/memcached.service ]; then\n    cp /etc/systemd/system/memcached.service \u0026quot;$BACKUP_DIR/\u0026quot;\nfi\n\n# Save current memcached stats for reference\necho \u0026quot;stats\u0026quot; | nc localhost 11211 \u0026gt; \u0026quot;$BACKUP_DIR/stats.txt\u0026quot;\n\necho \u0026quot;Configuration backed up to: $BACKUP_DIR\u0026quot;\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"restore-procedure\" class=\"mobile-header\"\u003eRestore Procedure\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e#!/bin/bash\n# restore-memcached-config.sh\n\nBACKUP_DIR=\u0026quot;$1\u0026quot;\nif [ -z \u0026quot;$BACKUP_DIR\u0026quot; ]; then\n    echo \u0026quot;Usage: $0 \u0026lt;backup-directory\u0026gt;\u0026quot;\n    exit 1\nfi\n\n# Stop memcached\nsudo systemctl stop memcached\n\n# Restore configuration\nif [ -f \u0026quot;$BACKUP_DIR/memcached\u0026quot; ]; then\n    # Detect where to restore\n    if [ -d /etc/sysconfig ]; then\n        sudo cp \u0026quot;$BACKUP_DIR/memcached\u0026quot; /etc/sysconfig/\n    elif [ -d /etc/conf.d ]; then\n        sudo cp \u0026quot;$BACKUP_DIR/memcached\u0026quot; /etc/conf.d/\n    fi\nelif [ -f \u0026quot;$BACKUP_DIR/memcached.conf\u0026quot; ]; then\n    sudo cp \u0026quot;$BACKUP_DIR/memcached.conf\u0026quot; /etc/\nfi\n\n# Restore service file if exists\nif [ -f \u0026quot;$BACKUP_DIR/memcached.service\u0026quot; ]; then\n    sudo cp \u0026quot;$BACKUP_DIR/memcached.service\u0026quot; /etc/systemd/system/\n    sudo systemctl daemon-reload\nfi\n\n# Start memcached\nsudo systemctl start memcached\n\necho \u0026quot;Configuration restored from: $BACKUP_DIR\u0026quot;\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"maintenance\" class=\"mobile-header\"\u003eMaintenance\u003c/h2\u003e\n\u003ch3 id=\"update-procedures\" class=\"mobile-header\"\u003eUpdate Procedures\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# RHEL/CentOS/Rocky/AlmaLinux\nsudo dnf update memcached\n\n# Debian/Ubuntu\nsudo apt update \u0026amp;\u0026amp; sudo apt upgrade memcached\n\n# Arch Linux\nsudo pacman -Syu memcached\n\n# Alpine Linux\napk upgrade memcached\n\n# openSUSE\nsudo zypper update memcached\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"version-upgrades\" class=\"mobile-header\"\u003eVersion Upgrades\u003c/h3\u003e\n\u003cp class=\"mobile-paragraph\"\u003e1. \u003cstrong\u003eCheck current version\u003c/strong\u003e:\u003c/p\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003ememcached -V\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003cp class=\"mobile-paragraph\"\u003e2. \u003cstrong\u003ePlan upgrade\u003c/strong\u003e:\u003c/p\u003e\n\u003cli class=\"mobile-list-item\"\u003eReview changelog for breaking changes\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eTest in non-production environment\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003ePlan for cache warming after restart\u003c/li\u003e\n\u003cp class=\"mobile-paragraph\"\u003e3. \u003cstrong\u003ePerform upgrade\u003c/strong\u003e:\u003c/p\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Backup configuration\n./backup-memcached-config.sh\n\n# Upgrade package\nsudo apt update \u0026amp;\u0026amp; sudo apt upgrade memcached  # Debian/Ubuntu\n\n# Restart service\nsudo systemctl restart memcached\n\n# Verify new version\nmemcached -V\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"log-rotation\" class=\"mobile-header\"\u003eLog Rotation\u003c/h3\u003e\n\u003cp class=\"mobile-paragraph\"\u003eConfigure log rotation for memcached logs:\u003c/p\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Create /etc/logrotate.d/memcached\nsudo tee /etc/logrotate.d/memcached \u0026lt;\u0026lt;EOF\n/var/log/memcached.log {\n    daily\n    rotate 7\n    compress\n    delaycompress\n    missingok\n    notifempty\n    create 640 memcached memcached\n    postrotate\n        systemctl reload memcached \u0026gt; /dev/null 2\u0026gt;\u0026amp;1 || true\n    endscript\n}\nEOF\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"cleanup-procedures\" class=\"mobile-header\"\u003eCleanup Procedures\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Clear all cache data (WARNING: This removes all cached items!)\necho \u0026quot;flush_all\u0026quot; | nc localhost 11211\n\n# Remove old log files\nfind /var/log -name \u0026quot;memcached.log.*\u0026quot; -mtime +30 -delete\n\n# Clean up temporary files\nrm -f /tmp/memcached.sock.*\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"integration-examples\" class=\"mobile-header\"\u003eIntegration Examples\u003c/h2\u003e\n\u003ch3 id=\"php-integration\" class=\"mobile-header\"\u003ePHP Integration\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"php\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ephp\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-php\"\u003e\u0026lt;?php\n// Using PECL memcached extension\n$memcached = new Memcached();\n$memcached-\u0026gt;addServer(\u0026#039;localhost\u0026#039;, 11211);\n\n// Connection pooling\n$memcached-\u0026gt;setOption(Memcached::OPT_TCP_NODELAY, true);\n$memcached-\u0026gt;setOption(Memcached::OPT_NO_BLOCK, true);\n\n// Example caching function\nfunction getCachedData($key, $callback, $ttl = 3600) {\n    global $memcached;\n    \n    $data = $memcached-\u0026gt;get($key);\n    if ($memcached-\u0026gt;getResultCode() === Memcached::RES_NOTFOUND) {\n        $data = $callback();\n        $memcached-\u0026gt;set($key, $data, $ttl);\n    }\n    return $data;\n}\n\n// Usage\n$users = getCachedData(\u0026#039;all_users\u0026#039;, function() {\n    return db_query(\u0026quot;SELECT * FROM users\u0026quot;);\n}, 300);\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"python-integration\" class=\"mobile-header\"\u003ePython Integration\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"python\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003epython\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-python\"\u003eimport memcache\nimport functools\nimport time\n\n# Create client with multiple servers\nmc = memcache.Client([\u0026#039;127.0.0.1:11211\u0026#039;, \u0026#039;127.0.0.1:11212\u0026#039;], debug=0)\n\n# Decorator for caching\ndef cache_result(expiration=3600):\n    def decorator(func):\n        @functools.wraps(func)\n        def wrapper(*args, **kwargs):\n            cache_key = f\u0026quot;{func.__name__}:{str(args)}:{str(kwargs)}\u0026quot;\n            result = mc.get(cache_key)\n            \n            if result is None:\n                result = func(*args, **kwargs)\n                mc.set(cache_key, result, time=expiration)\n            \n            return result\n        return wrapper\n    return decorator\n\n# Usage\n@cache_result(expiration=300)\ndef expensive_calculation(x, y):\n    time.sleep(2)  # Simulate expensive operation\n    return x * y + sum(range(1000000))\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"nodejs-integration\" class=\"mobile-header\"\u003eNode.js Integration\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"javascript\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ejavascript\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-javascript\"\u003econst Memcached = require(\u0026#039;memcached\u0026#039;);\n\n// Create client with options\nconst memcached = new Memcached(\u0026#039;localhost:11211\u0026#039;, {\n    retries: 10,\n    retry: 10000,\n    remove: true,\n    failOverServers: [\u0026#039;192.168.1.100:11211\u0026#039;]\n});\n\n// Promisified wrapper\nconst cache = {\n    get: (key) =\u0026gt; new Promise((resolve, reject) =\u0026gt; {\n        memcached.get(key, (err, data) =\u0026gt; {\n            if (err) reject(err);\n            else resolve(data);\n        });\n    }),\n    \n    set: (key, value, ttl = 3600) =\u0026gt; new Promise((resolve, reject) =\u0026gt; {\n        memcached.set(key, value, ttl, (err) =\u0026gt; {\n            if (err) reject(err);\n            else resolve(true);\n        });\n    }),\n    \n    delete: (key) =\u0026gt; new Promise((resolve, reject) =\u0026gt; {\n        memcached.del(key, (err) =\u0026gt; {\n            if (err) reject(err);\n            else resolve(true);\n        });\n    })\n};\n\n// Usage with async/await\nasync function getCachedUser(userId) {\n    const cacheKey = `user:${userId}`;\n    \n    try {\n        // Try cache first\n        let user = await cache.get(cacheKey);\n        \n        if (!user) {\n            // Cache miss - fetch from database\n            user = await db.query(\u0026#039;SELECT * FROM users WHERE id = ?\u0026#039;, [userId]);\n            await cache.set(cacheKey, user, 300); // Cache for 5 minutes\n        }\n        \n        return user;\n    } catch (error) {\n        console.error(\u0026#039;Cache error:\u0026#039;, error);\n        // Fallback to database\n        return await db.query(\u0026#039;SELECT * FROM users WHERE id = ?\u0026#039;, [userId]);\n    }\n}\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"ruby-on-rails-integration\" class=\"mobile-header\"\u003eRuby on Rails Integration\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"ruby\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003eruby\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-ruby\"\u003e# config/environments/production.rb\nconfig.cache_store = :mem_cache_store, \n  \u0026#039;localhost:11211\u0026#039;, \n  { \n    namespace: \u0026#039;myapp\u0026#039;,\n    expires_in: 1.hour,\n    compress: true,\n    pool_size: 5,\n    pool_timeout: 5\n  }\n\n# app/models/user.rb\nclass User \u0026lt; ApplicationRecord\n  def expensive_calculation\n    Rails.cache.fetch(\u0026quot;user_#{id}_calculation\u0026quot;, expires_in: 12.hours) do\n      # Expensive calculation here\n      sleep 2\n      posts.count * comments.count\n    end\n  end\nend\n\n# app/controllers/application_controller.rb\nclass ApplicationController \u0026lt; ActionController::Base\n  around_action :cache_control\n  \n  private\n  \n  def cache_control\n    if user_signed_in?\n      yield\n    else\n      # Cache pages for non-authenticated users\n      expires_in 5.minutes, public: true\n      yield\n    end\n  end\nend\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"additional-resources\" class=\"mobile-header\"\u003eAdditional Resources\u003c/h2\u003e\n\u003cli class=\"mobile-list-item\"\u003e\u003ca href=\"https://memcached.org/\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\"\u003eOfficial Documentation\u003c/a\u003e\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003e\u003ca href=\"https://github.com/memcached/memcached\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\"\u003eGitHub Repository\u003c/a\u003e\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003e\u003ca href=\"https://github.com/memcached/memcached/blob/master/doc/protocol.txt\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\"\u003eProtocol Specification\u003c/a\u003e\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003e\u003ca href=\"https://github.com/memcached/memcached/wiki/Programming\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\"\u003eBest Practices Guide\u003c/a\u003e\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003e\u003ca href=\"https://github.com/memcached/memcached/wiki/Performance\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\"\u003ePerformance Tuning\u003c/a\u003e\u003c/li\u003e\n\u003cp class=\"mobile-paragraph\"\u003e---\u003c/p\u003e\n\u003cp class=\"mobile-paragraph\"\u003e\u003cstrong\u003eNote:\u003c/strong\u003e This guide is part of the \u003ca href=\"https://howtomgr.github.io\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\"\u003eHowToMgr\u003c/a\u003e collection. Always refer to official documentation for the most up-to-date information.\u003c/p\u003e","readTime":"15 min","wordCount":2879,"tableOfContents":[{"level":2,"text":"1. Prerequisites","id":"1-prerequisites"},{"level":2,"text":"2. Supported Operating Systems","id":"2-supported-operating-systems"},{"level":2,"text":"3. Installation","id":"3-installation"},{"level":3,"text":"RHEL/CentOS/Rocky Linux/AlmaLinux","id":"rhelcentosrocky-linuxalmalinux"},{"level":3,"text":"Debian/Ubuntu","id":"debianubuntu"},{"level":3,"text":"Arch Linux","id":"arch-linux"},{"level":3,"text":"Alpine Linux","id":"alpine-linux"},{"level":3,"text":"openSUSE/SLES","id":"opensusesles"},{"level":3,"text":"macOS","id":"macos"},{"level":3,"text":"Windows","id":"windows"},{"level":3,"text":"Build from Source (All Platforms)","id":"build-from-source-all-platforms"},{"level":2,"text":"Initial Configuration","id":"initial-configuration"},{"level":3,"text":"First-Run Setup","id":"first-run-setup"},{"level":3,"text":"Testing Initial Setup","id":"testing-initial-setup"},{"level":2,"text":"Advanced Configuration","id":"advanced-configuration"},{"level":3,"text":"RHEL/CentOS Configuration","id":"rhelcentos-configuration"},{"level":3,"text":"Debian/Ubuntu Configuration","id":"debianubuntu-configuration"},{"level":3,"text":"Alpine Linux Configuration","id":"alpine-linux-configuration"},{"level":3,"text":"macOS Configuration","id":"macos-configuration"},{"level":3,"text":"Windows Configuration","id":"windows-configuration"},{"level":2,"text":"5. Service Management","id":"5-service-management"},{"level":3,"text":"RHEL/CentOS/Debian/Ubuntu (systemd)","id":"rhelcentosdebianubuntu-systemd"},{"level":3,"text":"Alpine Linux (OpenRC)","id":"alpine-linux-openrc"},{"level":3,"text":"macOS","id":"macos"},{"level":3,"text":"Windows","id":"windows"},{"level":2,"text":"Security Configuration","id":"security-configuration"},{"level":3,"text":"Enable SASL Authentication","id":"enable-sasl-authentication"},{"level":3,"text":"Firewall Configuration","id":"firewall-configuration"},{"level":2,"text":"8. Performance Tuning","id":"8-performance-tuning"},{"level":3,"text":"Linux Kernel Parameters","id":"linux-kernel-parameters"},{"level":3,"text":"Connection Pooling","id":"connection-pooling"},{"level":3,"text":"Memory Optimization","id":"memory-optimization"},{"level":2,"text":"Monitoring","id":"monitoring"},{"level":3,"text":"Built-in Statistics","id":"built-in-statistics"},{"level":3,"text":"Monitoring Scripts","id":"monitoring-scripts"},{"level":3,"text":"Nagios/Monitoring Plugin","id":"nagiosmonitoring-plugin"},{"level":2,"text":"Client Configuration Examples","id":"client-configuration-examples"},{"level":3,"text":"PHP","id":"php"},{"level":3,"text":"Python","id":"python"},{"level":3,"text":"Node.js","id":"nodejs"},{"level":3,"text":"Ruby","id":"ruby"},{"level":2,"text":"6. Troubleshooting","id":"6-troubleshooting"},{"level":3,"text":"Common Issues","id":"common-issues"},{"level":3,"text":"Debug Mode","id":"debug-mode"},{"level":2,"text":"Best Practices","id":"best-practices"},{"level":2,"text":"9. Backup and Restore","id":"9-backup-and-restore"},{"level":3,"text":"What to Backup","id":"what-to-backup"},{"level":3,"text":"Backup Script","id":"backup-script"},{"level":3,"text":"Restore Procedure","id":"restore-procedure"},{"level":2,"text":"Maintenance","id":"maintenance"},{"level":3,"text":"Update Procedures","id":"update-procedures"},{"level":3,"text":"Version Upgrades","id":"version-upgrades"},{"level":3,"text":"Log Rotation","id":"log-rotation"},{"level":3,"text":"Cleanup Procedures","id":"cleanup-procedures"},{"level":2,"text":"Integration Examples","id":"integration-examples"},{"level":3,"text":"PHP Integration","id":"php-integration"},{"level":3,"text":"Python Integration","id":"python-integration"},{"level":3,"text":"Node.js Integration","id":"nodejs-integration"},{"level":3,"text":"Ruby on Rails Integration","id":"ruby-on-rails-integration"},{"level":2,"text":"Additional Resources","id":"additional-resources"}],"lastBuilt":"2025-10-04T18:14:27.284Z","metadataVersion":"2.0"}]},"__N_SSG":true},"page":"/[category]/[guide]","query":{"category":"caching","guide":"varnish"},"buildId":"jbii9AwLMNdevCPx5HQmT","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>