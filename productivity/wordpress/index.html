<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes"/><meta name="theme-color" content="#bd93f9"/><link rel="icon" href="/favicon.ico"/><link rel="preconnect" href="https://fonts.googleapis.com"/><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="true"/><title class="jsx-f92e766e9414ef16">Wordpress Installation Guide - HowToMgr</title><meta name="description" content="Repo for wordpress" class="jsx-f92e766e9414ef16"/><meta name="keywords" content="installation guides, tutorials, linux, docker, kubernetes, mobile-first, responsive" class="jsx-f92e766e9414ef16"/><meta property="og:title" content="Wordpress Installation Guide - HowToMgr" class="jsx-f92e766e9414ef16"/><meta property="og:description" content="Repo for wordpress" class="jsx-f92e766e9414ef16"/><meta property="og:type" content="website" class="jsx-f92e766e9414ef16"/><meta property="og:url" content="https://howtomgr.github.io" class="jsx-f92e766e9414ef16"/><meta property="og:image" content="https://howtomgr.github.io/social-preview.png" class="jsx-f92e766e9414ef16"/><meta property="twitter:card" content="summary_large_image" class="jsx-f92e766e9414ef16"/><meta property="twitter:title" content="Wordpress Installation Guide - HowToMgr" class="jsx-f92e766e9414ef16"/><meta property="twitter:description" content="Repo for wordpress" class="jsx-f92e766e9414ef16"/><meta name="next-head-count" content="17"/><link rel="dns-prefetch" href="//api.github.com"/><link rel="dns-prefetch" href="//github.com"/><link rel="preload" href="/favicon.ico" as="image"/><meta name="application-name" content="HowToMgr"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="default"/><meta name="apple-mobile-web-app-title" content="HowToMgr"/><meta name="format-detection" content="telephone=no"/><meta name="mobile-web-app-capable" content="yes"/><noscript><style>
            .requires-js { display: none !important; }
            .no-js-message { display: block !important; }
          </style></noscript><link rel="preload" href="/_next/static/css/eec6c1c201affe77.css" as="style"/><link rel="stylesheet" href="/_next/static/css/eec6c1c201affe77.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-42372ed130431b0a.js"></script><script src="/_next/static/chunks/webpack-ee7e63bc15b31913.js" defer=""></script><script src="/_next/static/chunks/framework-2b1f7a23d657eae4.js" defer=""></script><script src="/_next/static/chunks/main-6ec3f7584970eebe.js" defer=""></script><script src="/_next/static/chunks/pages/_app-f7367f88af207b64.js" defer=""></script><script src="/_next/static/chunks/119-abfbe7c9e22798da.js" defer=""></script><script src="/_next/static/chunks/pages/%5Bcategory%5D/%5Bguide%5D-ae7274cbb918ed8b.js" defer=""></script><script src="/_next/static/FWaJNz_CPEuOjXz3AhtJ8/_buildManifest.js" defer=""></script><script src="/_next/static/FWaJNz_CPEuOjXz3AhtJ8/_ssgManifest.js" defer=""></script><style id="__jsx-8a7f0cdcf94f52ce">.breadcrumb.jsx-8a7f0cdcf94f52ce{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;gap:var(--space-2);margin-bottom:var(--space-6);font-size:var(--font-sm);color:var(--text-secondary);overflow-x:auto;white-space:nowrap;-webkit-overflow-scrolling:touch}.breadcrumb.jsx-8a7f0cdcf94f52ce a.jsx-8a7f0cdcf94f52ce{color:var(--accent-primary);text-decoration:none;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0}.breadcrumb.jsx-8a7f0cdcf94f52ce a.jsx-8a7f0cdcf94f52ce:hover{text-decoration:underline}.separator.jsx-8a7f0cdcf94f52ce{color:var(--text-muted);-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0}.current.jsx-8a7f0cdcf94f52ce{color:var(--text-primary);font-weight:500;white-space:nowrap;overflow:hidden;-o-text-overflow:ellipsis;text-overflow:ellipsis}.guide-header.jsx-8a7f0cdcf94f52ce{background:var(--bg-secondary);-webkit-border-radius:var(--border-radius-lg);-moz-border-radius:var(--border-radius-lg);border-radius:var(--border-radius-lg);padding:var(--space-6);margin-bottom:var(--space-8);border:1px solid var(--bg-surface)}.guide-title.jsx-8a7f0cdcf94f52ce{color:var(--accent-primary);font-size:var(--font-3xl);margin-bottom:var(--space-4);line-height:1.2;word-break:break-word}.guide-description.jsx-8a7f0cdcf94f52ce{color:var(--text-secondary);font-size:var(--font-lg);margin-bottom:var(--space-5);line-height:1.5}.guide-badges.jsx-8a7f0cdcf94f52ce{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;gap:var(--space-3);margin-bottom:var(--space-5);-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap}.guide-actions.jsx-8a7f0cdcf94f52ce{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;gap:var(--space-3);-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap}.guide-content.jsx-8a7f0cdcf94f52ce{background:var(--bg-secondary);-webkit-border-radius:var(--border-radius-lg);-moz-border-radius:var(--border-radius-lg);border-radius:var(--border-radius-lg);padding:var(--space-6);margin-bottom:var(--space-8);border:1px solid var(--bg-surface);overflow-x:hidden}.related-section.jsx-8a7f0cdcf94f52ce{margin-bottom:var(--space-8)}.section-title.jsx-8a7f0cdcf94f52ce{color:var(--accent-primary);font-size:var(--font-2xl);text-align:center;margin-bottom:var(--space-6)}.guide-navigation.jsx-8a7f0cdcf94f52ce{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;gap:var(--space-4);-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;margin-bottom:var(--space-8)}.loading-container.jsx-8a7f0cdcf94f52ce,.error-container.jsx-8a7f0cdcf94f52ce{text-align:center;padding:var(--space-8)}.error-actions.jsx-8a7f0cdcf94f52ce{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;gap:var(--space-4);-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;margin-top:var(--space-6);-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap}@media(max-width:767px){.guide-header.jsx-8a7f0cdcf94f52ce{padding:var(--space-4);margin-bottom:var(--space-6)}.guide-title.jsx-8a7f0cdcf94f52ce{font-size:var(--font-2xl)}.guide-description.jsx-8a7f0cdcf94f52ce{font-size:var(--font-base)}.guide-content.jsx-8a7f0cdcf94f52ce{padding:var(--space-4);margin-bottom:var(--space-6)}.guide-badges.jsx-8a7f0cdcf94f52ce{gap:var(--space-2)}.guide-actions.jsx-8a7f0cdcf94f52ce{-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column}.guide-navigation.jsx-8a7f0cdcf94f52ce{-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column}.breadcrumb.jsx-8a7f0cdcf94f52ce{margin-bottom:var(--space-4)}}</style><style id="__jsx-f92e766e9414ef16">.app-container.jsx-f92e766e9414ef16{min-height:100vh;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;padding-top:56px}.main-content.jsx-f92e766e9414ef16{-webkit-box-flex:1;-webkit-flex:1;-moz-box-flex:1;-ms-flex:1;flex:1;padding:var(--space-6)0}.mobile-footer.jsx-f92e766e9414ef16{background:var(--bg-secondary);border-top:1px solid var(--bg-surface);padding:var(--space-6)0;margin-top:auto}.footer-content.jsx-f92e766e9414ef16{text-align:center}.footer-links.jsx-f92e766e9414ef16{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;gap:var(--space-6);margin-bottom:var(--space-4);-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap}.footer-links.jsx-f92e766e9414ef16 a.jsx-f92e766e9414ef16{color:var(--accent-primary);text-decoration:none;font-size:var(--font-sm)}.footer-links.jsx-f92e766e9414ef16 a.jsx-f92e766e9414ef16:hover{color:var(--accent-secondary)}.footer-separator.jsx-f92e766e9414ef16{height:1px;background:var(--bg-surface);margin:var(--space-4)auto;width:200px}.footer-text.jsx-f92e766e9414ef16,.footer-tech.jsx-f92e766e9414ef16{color:var(--text-secondary);font-size:var(--font-sm);margin-bottom:var(--space-2)}.footer-disclaimer.jsx-f92e766e9414ef16{color:var(--text-muted);font-size:var(--font-xs)}.nav-links.jsx-f92e766e9414ef16{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;gap:var(--space-4)}.nav-link.jsx-f92e766e9414ef16{color:var(--text-primary);text-decoration:none;padding:var(--space-2)var(--space-3);-webkit-border-radius:var(--border-radius);-moz-border-radius:var(--border-radius);border-radius:var(--border-radius);font-size:var(--font-sm);font-weight:500;-webkit-transition:var(--transition);-moz-transition:var(--transition);-o-transition:var(--transition);transition:var(--transition);min-height:36px;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center}.nav-link.jsx-f92e766e9414ef16:hover{background:var(--bg-surface);color:var(--accent-primary);text-decoration:none}[data-theme="light"].jsx-f92e766e9414ef16 .theme-icon-dark.jsx-f92e766e9414ef16{display:none}[data-theme="light"].jsx-f92e766e9414ef16 .theme-icon-light.jsx-f92e766e9414ef16{display:inline!important}@media(max-width:767px){.main-content.jsx-f92e766e9414ef16{padding:var(--space-4)0}.footer-links.jsx-f92e766e9414ef16{gap:var(--space-4)}}</style></head><body><noscript><div class="no-js-message" style="padding:1rem;background:#ff5555;color:#f8f8f2;text-align:center;font-size:0.9rem">This site requires JavaScript to function properly. Please enable JavaScript in your browser.</div></noscript><div id="__next"><div class="jsx-f92e766e9414ef16 app-container"><a href="#main-content" class="jsx-f92e766e9414ef16 skip-link">Skip to main content</a><nav class="jsx-f92e766e9414ef16 mobile-nav"><div class="jsx-f92e766e9414ef16 mobile-nav-content"><a class="mobile-brand" href="/"><span role="img" aria-label="Books" class="jsx-f92e766e9414ef16">üìö</span>HowToMgr</a><div class="jsx-f92e766e9414ef16 nav-links"><a class="nav-link" href="/all/">All</a><a class="nav-link" href="/search/">Search</a></div><button aria-label="Toggle theme" title="Switch theme" class="jsx-f92e766e9414ef16 mobile-theme-toggle touch-target"><span class="jsx-f92e766e9414ef16 theme-icon-dark">üåô</span><span style="display:none" class="jsx-f92e766e9414ef16 theme-icon-light">‚òÄÔ∏è</span></button></div></nav><main id="main-content" tabindex="-1" class="jsx-f92e766e9414ef16 main-content"><div class="jsx-f92e766e9414ef16 container"><nav aria-label="Breadcrumb" class="jsx-8a7f0cdcf94f52ce breadcrumb"><a href="/">Home</a><span class="jsx-8a7f0cdcf94f52ce separator">‚Üí</span><a href="/productivity/">Productivity</a><span class="jsx-8a7f0cdcf94f52ce separator">‚Üí</span><span class="jsx-8a7f0cdcf94f52ce current">Wordpress</span></nav><header class="jsx-8a7f0cdcf94f52ce guide-header"><div class="jsx-8a7f0cdcf94f52ce guide-meta-top"><h1 class="jsx-8a7f0cdcf94f52ce guide-title">Wordpress</h1><p class="jsx-8a7f0cdcf94f52ce guide-description">Repo for wordpress</p><div class="jsx-8a7f0cdcf94f52ce guide-badges"><span class="jsx-8a7f0cdcf94f52ce mobile-badge mobile-badge-primary">Productivity</span><span class="jsx-8a7f0cdcf94f52ce mobile-badge mobile-badge-info">27 min</span></div><div class="jsx-8a7f0cdcf94f52ce guide-actions"><a href="https://github.com/howtomgr/wordpress" target="_blank" rel="noopener" class="jsx-8a7f0cdcf94f52ce btn btn-secondary">View on GitHub</a></div></div></header><article class="jsx-8a7f0cdcf94f52ce guide-content"><div class="jsx-8a7f0cdcf94f52ce readme-content"><h1 id="wordpress-installation-guide" class="mobile-header">WordPress Installation Guide</h1>
<p class="mobile-paragraph">World's most popular content management system (CMS) powering over 40% of websites globally. Complete guide for secure, high-performance WordPress deployment with modern stack configurations.</p>
<h2 id="prerequisites" class="mobile-header">Prerequisites</h2>
<li class="mobile-list-item">Linux system (any modern distribution)</li>
<li class="mobile-list-item">2GB RAM minimum, 4GB+ recommended for production</li>
<li class="mobile-list-item">Web server (NGINX recommended, Apache supported)</li>
<li class="mobile-list-item">PHP 8.1+ (8.2+ recommended)</li>
<li class="mobile-list-item">MySQL 8.0+ or MariaDB 10.6+ </li>
<li class="mobile-list-item">SSL certificate for HTTPS</li>
<li class="mobile-list-item">Domain name for production deployment</li>
<h2 id="installation-methods" class="mobile-header">Installation Methods</h2>
<h3 id="lemp-stack-recommended-for-2024" class="mobile-header">LEMP Stack (Recommended for 2024)</h3>
<p class="mobile-paragraph">#### Ubuntu/Debian LEMP Setup</p>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">üìã</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash"># Update system
sudo apt update &amp;&amp; sudo apt upgrade -y

# Install NGINX
sudo apt install -y nginx

# Install MySQL/MariaDB
sudo apt install -y mariadb-server mariadb-client

# Install PHP 8.2 and essential extensions
sudo apt install -y php8.2-fpm php8.2-mysql php8.2-curl php8.2-gd php8.2-mbstring php8.2-xml php8.2-xmlrpc php8.2-soap php8.2-intl php8.2-zip php8.2-bcmath php8.2-imagick php8.2-cli php8.2-dev php8.2-imap php8.2-opcache

# Install additional performance tools
sudo apt install -y redis-server memcached unzip curl wget

# Enable and start services
sudo systemctl enable --now nginx mariadb php8.2-fpm redis-server

# Secure MySQL installation
sudo mysql_secure_installation

# Configure firewall
sudo ufw allow &#039;Nginx Full&#039;
sudo ufw allow OpenSSH
sudo ufw enable</code></pre>
      </div>
    </div>
<p class="mobile-paragraph">#### RHEL/CentOS/Rocky Linux LEMP Setup</p>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">üìã</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash"># Install EPEL and Remi repositories
sudo yum install -y epel-release
sudo yum install -y https://rpms.remirepo.net/enterprise/remi-release-9.rpm

# Enable PHP 8.2 repository
sudo yum-config-manager --enable remi-php82

# Install NGINX
sudo yum install -y nginx

# Install MariaDB
sudo yum install -y mariadb-server mariadb

# Install PHP and extensions
sudo yum install -y php php-fpm php-mysql php-curl php-gd php-mbstring php-xml php-xmlrpc php-soap php-intl php-zip php-bcmath php-imagick php-opcache php-redis

# Install Redis
sudo yum install -y redis

# Enable and start services
sudo systemctl enable --now nginx mariadb php-fpm redis

# Configure firewall
sudo firewall-cmd --permanent --add-service=http
sudo firewall-cmd --permanent --add-service=https
sudo firewall-cmd --reload

# Secure MySQL
sudo mysql_secure_installation</code></pre>
      </div>
    </div>
<p class="mobile-paragraph">#### Fedora LEMP Setup</p>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">üìã</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash"># Install NGINX, MariaDB, PHP, and Redis
sudo dnf install -y nginx mariadb-server mariadb php php-fpm php-mysql php-curl php-gd php-mbstring php-xml php-xmlrpc php-soap php-intl php-zip php-opcache php-redis redis

# Enable and start services
sudo systemctl enable --now nginx mariadb php-fpm redis

# Configure firewall
sudo firewall-cmd --permanent --add-service=http
sudo firewall-cmd --permanent --add-service=https
sudo firewall-cmd --reload

# Secure MySQL
sudo mysql_secure_installation</code></pre>
      </div>
    </div>
<h3 id="lamp-stack-alternative" class="mobile-header">LAMP Stack (Alternative)</h3>
<p class="mobile-paragraph">#### Ubuntu/Debian LAMP Setup</p>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">üìã</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash"># Install Apache, MySQL, PHP
sudo apt update
sudo apt install -y apache2 mariadb-server php8.2 php8.2-mysql php8.2-curl php8.2-gd php8.2-mbstring php8.2-xml php8.2-xmlrpc php8.2-soap php8.2-intl php8.2-zip php8.2-opcache libapache2-mod-php8.2

# Enable Apache modules
sudo a2enmod rewrite ssl headers deflate expires

# Enable and start services
sudo systemctl enable --now apache2 mariadb

# Configure firewall
sudo ufw allow &#039;Apache Full&#039;
sudo ufw enable

# Secure MySQL
sudo mysql_secure_installation</code></pre>
      </div>
    </div>
<h3 id="database-setup-universal" class="mobile-header">Database Setup (Universal)</h3>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">üìã</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash"># Create WordPress database and user
sudo mysql -u root -p &lt;&lt;EOF
CREATE DATABASE wordpress DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;
CREATE USER &#039;wpuser&#039;@&#039;localhost&#039; IDENTIFIED BY &#039;secure_wp_password_2024&#039;;
GRANT ALL PRIVILEGES ON wordpress.* TO &#039;wpuser&#039;@&#039;localhost&#039;;
FLUSH PRIVILEGES;

-- Optimize MySQL for WordPress
SET GLOBAL innodb_buffer_pool_size = 1073741824;  -- 1GB
SET GLOBAL query_cache_size = 67108864;           -- 64MB
SET GLOBAL query_cache_limit = 2097152;           -- 2MB
EXIT
EOF

# Apply permanent MySQL optimizations
sudo tee /etc/mysql/mysql.conf.d/wordpress.cnf &gt; /dev/null &lt;&lt;EOF
[mysqld]
# WordPress optimizations
innodb_buffer_pool_size = 1G
innodb_log_file_size = 256M
innodb_file_per_table = 1
innodb_flush_log_at_trx_commit = 2
innodb_flush_method = O_DIRECT

# Query cache
query_cache_type = 1
query_cache_size = 64M
query_cache_limit = 2M

# Connection optimization
max_connections = 200
thread_cache_size = 100
table_open_cache = 4096
tmp_table_size = 32M
max_heap_table_size = 32M

# Slow query log
slow_query_log = 1
long_query_time = 2
slow_query_log_file = /var/log/mysql/slow.log
EOF

sudo systemctl restart mariadb</code></pre>
      </div>
    </div>
<h2 id="wordpress-installation" class="mobile-header">WordPress Installation</h2>
<h3 id="download-and-setup-wordpress" class="mobile-header">Download and Setup WordPress</h3>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">üìã</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash"># Download latest WordPress
cd /tmp
wget https://wordpress.org/latest.tar.gz
tar xzf latest.tar.gz

# Create web directory and copy files
sudo mkdir -p /var/www/html/example.com
sudo cp -R /tmp/wordpress/* /var/www/html/example.com/

# Set proper ownership and permissions
# For NGINX (Ubuntu/Debian)
sudo chown -R www-data:www-data /var/www/html/example.com
# For NGINX (RHEL/CentOS)
sudo chown -R nginx:nginx /var/www/html/example.com
# For Apache
sudo chown -R www-data:www-data /var/www/html/example.com  # Ubuntu/Debian
sudo chown -R apache:apache /var/www/html/example.com      # RHEL/CentOS

# Secure file permissions
sudo find /var/www/html/example.com/ -type d -exec chmod 755 {} \;
sudo find /var/www/html/example.com/ -type f -exec chmod 644 {} \;
sudo chmod 600 /var/www/html/example.com/wp-config.php

# Create uploads directory with proper permissions
sudo mkdir -p /var/www/html/example.com/wp-content/uploads
sudo chmod 775 /var/www/html/example.com/wp-content/uploads</code></pre>
      </div>
    </div>
<h3 id="secure-wordpress-configuration" class="mobile-header">Secure WordPress Configuration</h3>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">üìã</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash"># Create secure wp-config.php
cd /var/www/html/example.com
sudo cp wp-config-sample.php wp-config.php

# Generate security keys
SALT_KEYS=$(curl -s https://api.wordpress.org/secret-key/1.1/salt/)

# Create wp-config.php with security hardening
sudo tee wp-config.php &gt; /dev/null &lt;&lt;EOF
&lt;?php
/**
 * WordPress Configuration File - Security Hardened
 */

// ** Database settings ** //
define(&#039;DB_NAME&#039;, &#039;wordpress&#039;);
define(&#039;DB_USER&#039;, &#039;wpuser&#039;);
define(&#039;DB_PASSWORD&#039;, &#039;secure_wp_password_2024&#039;);
define(&#039;DB_HOST&#039;, &#039;127.0.0.1&#039;);  // Use 127.0.0.1 instead of localhost
define(&#039;DB_CHARSET&#039;, &#039;utf8mb4&#039;);
define(&#039;DB_COLLATE&#039;, &#039;&#039;);

// ** Authentication Unique Keys and Salts ** //
${SALT_KEYS}

// ** WordPress Database Table prefix ** //
\$table_prefix = &#039;wp_secure_&#039;;

// ** Security hardening ** //
define(&#039;WP_DEBUG&#039;, false);
define(&#039;WP_DEBUG_LOG&#039;, false);
define(&#039;WP_DEBUG_DISPLAY&#039;, false);

// Disable file editing
define(&#039;DISALLOW_FILE_EDIT&#039;, true);
define(&#039;DISALLOW_FILE_MODS&#039;, true);

// Force SSL
define(&#039;FORCE_SSL_ADMIN&#039;, true);

// Automatic updates
define(&#039;WP_AUTO_UPDATE_CORE&#039;, &#039;minor&#039;);
define(&#039;AUTOMATIC_UPDATER_DISABLED&#039;, false);

// Memory limit
define(&#039;WP_MEMORY_LIMIT&#039;, &#039;512M&#039;);

// Multisite (if needed)
// define(&#039;WP_ALLOW_MULTISITE&#039;, true);

// Custom content directory (optional)
define(&#039;WP_CONTENT_DIR&#039;, &#039;/var/www/html/example.com/wp-content&#039;);
define(&#039;WP_CONTENT_URL&#039;, &#039;https://example.com/wp-content&#039;);

// Database repair
define(&#039;WP_ALLOW_REPAIR&#039;, false);

// Cron optimization
define(&#039;DISABLE_WP_CRON&#039;, true);  // Use system cron instead

// Security headers
define(&#039;COOKIE_DOMAIN&#039;, &#039;.example.com&#039;);
define(&#039;COOKIEHASH&#039;, md5(&#039;example.com&#039;));

// File permissions
define(&#039;FS_CHMOD_DIR&#039;, (0755 &amp; ~ umask()));
define(&#039;FS_CHMOD_FILE&#039;, (0644 &amp; ~ umask()));

// Redis cache configuration
define(&#039;WP_REDIS_HOST&#039;, &#039;127.0.0.1&#039;);
define(&#039;WP_REDIS_PORT&#039;, 6379);
define(&#039;WP_REDIS_DATABASE&#039;, 0);
define(&#039;WP_REDIS_TIMEOUT&#039;, 1);
define(&#039;WP_REDIS_READ_TIMEOUT&#039;, 1);

// Rate limiting
define(&#039;WP_POST_REVISIONS&#039;, 5);
define(&#039;AUTOSAVE_INTERVAL&#039;, 300);  // 5 minutes
define(&#039;EMPTY_TRASH_DAYS&#039;, 7);

/* That&#039;s all, stop editing! */
if (!defined(&#039;ABSPATH&#039;)) {
    define(&#039;ABSPATH&#039;, dirname(__FILE__) . &#039;/&#039;);
}

require_once ABSPATH . &#039;wp-settings.php&#039;;
EOF

sudo chown www-data:www-data wp-config.php  # Adjust user as needed
sudo chmod 600 wp-config.php</code></pre>
      </div>
    </div>
<h2 id="web-server-configuration" class="mobile-header">Web Server Configuration</h2>
<h3 id="nginx-configuration-recommended" class="mobile-header">NGINX Configuration (Recommended)</h3>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">üìã</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash"># Create optimized NGINX configuration for WordPress
sudo tee /etc/nginx/sites-available/wordpress.conf &gt; /dev/null &lt;&lt;EOF
# WordPress NGINX Configuration - 2024 Security Hardened

# Rate limiting
limit_req_zone \$binary_remote_addr zone=wp_login:10m rate=1r/s;
limit_req_zone \$binary_remote_addr zone=wp_admin:10m rate=5r/m;

# HTTP to HTTPS redirect
server {
    listen 80;
    listen [::]:80;
    server_name example.com www.example.com;
    return 301 https://example.com\$request_uri;
}

# HTTPS Server
server {
    listen 443 ssl http2;
    listen [::]:443 ssl http2;
    server_name example.com www.example.com;
    root /var/www/html/example.com;
    index index.php index.html index.htm;

    # SSL Configuration (2024 best practices)
    ssl_certificate /etc/letsencrypt/live/example.com/fullchain.pem;
    ssl_certificate_key /etc/letsencrypt/live/example.com/privkey.pem;
    ssl_trusted_certificate /etc/letsencrypt/live/example.com/chain.pem;
    
    ssl_protocols TLSv1.2 TLSv1.3;
    ssl_ciphers ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384;
    ssl_prefer_server_ciphers off;
    ssl_session_cache shared:SSL:50m;
    ssl_session_timeout 1d;
    ssl_session_tickets off;

    # Security headers (2024 standards)
    add_header Strict-Transport-Security &quot;max-age=31536000; includeSubDomains; preload&quot; always;
    add_header X-Frame-Options &quot;SAMEORIGIN&quot; always;
    add_header X-Content-Type-Options &quot;nosniff&quot; always;
    add_header X-XSS-Protection &quot;1; mode=block&quot; always;
    add_header Referrer-Policy &quot;strict-origin-when-cross-origin&quot; always;
    add_header Content-Security-Policy &quot;default-src &#039;self&#039;; script-src &#039;self&#039; &#039;unsafe-inline&#039; &#039;unsafe-eval&#039; *.googleapis.com *.gstatic.com; style-src &#039;self&#039; &#039;unsafe-inline&#039; *.googleapis.com; img-src &#039;self&#039; data: https:; font-src &#039;self&#039; data: *.gstatic.com; connect-src &#039;self&#039;; media-src &#039;self&#039;; object-src &#039;none&#039;; child-src &#039;self&#039;; form-action &#039;self&#039;; base-uri &#039;self&#039;;&quot; always;
    add_header Permissions-Policy &quot;camera=(), microphone=(), geolocation=()&quot; always;

    # Hide server information
    server_tokens off;
    more_set_headers &quot;Server: &quot;;

    # Upload size limits
    client_max_body_size 64M;

    # FastCGI caching
    set \$skip_cache 0;
    if (\$request_method = POST) { set \$skip_cache 1; }
    if (\$query_string != &quot;&quot;) { set \$skip_cache 1; }
    if (\$request_uri ~* &quot;/wp-admin/|/xmlrpc.php|wp-.*.php|/feed/|index.php|sitemap(_index)?.xml&quot;) { set \$skip_cache 1; }
    if (\$http_cookie ~* &quot;comment_author|wordpress_[a-f0-9]+|wp-postpass|wordpress_no_cache|wordpress_logged_in&quot;) { set \$skip_cache 1; }

    # Main location block
    location / {
        try_files \$uri \$uri/ /index.php?\$args;
    }

    # WordPress-specific security rules
    location ~ /\. {
        deny all;
        access_log off;
        log_not_found off;
    }

    # Protect wp-config.php
    location ~* wp-config\.php {
        deny all;
    }

    # Disable execution of PHP in uploads
    location ~* /(?:uploads|files)/.*\.php\$ {
        deny all;
    }

    # Block access to sensitive files
    location ~* \.(htaccess|htpasswd|ini|log|sh|sql|conf|bak|backup|swp|tmp)\$ {
        deny all;
    }

    # WordPress: deny wp-content, wp-includes php files
    location ~* ^/(wp-content|wp-includes)/.*\.php\$ {
        deny all;
    }

    # WordPress: deny general stuff
    location ~* ^/(readme|license|example|README|INSTALL|CHANGELOG)\.(txt|md)\$ {
        deny all;
    }

    # Block WordPress brute force attacks
    location ~* /(wp-login\.php|wp-admin/).*\$ {
        limit_req zone=wp_login burst=1 nodelay;
        limit_req zone=wp_admin burst=5 nodelay;
        
        # IP whitelist for admin (replace with your IPs)
        # allow 192.168.1.100;
        # allow 10.0.0.0/8;
        # deny all;
        
        include snippets/fastcgi-php.conf;
        fastcgi_pass unix:/var/run/php/php8.2-fpm.sock;
    }

    # PHP processing with caching
    location ~ \.php\$ {
        include snippets/fastcgi-php.conf;
        fastcgi_pass unix:/var/run/php/php8.2-fpm.sock;
        fastcgi_param SCRIPT_FILENAME \$document_root\$fastcgi_script_name;
        include fastcgi_params;
        
        # FastCGI caching
        fastcgi_cache_bypass \$skip_cache;
        fastcgi_no_cache \$skip_cache;
        fastcgi_cache WORDPRESS;
        fastcgi_cache_valid 60m;
        
        # Security
        fastcgi_hide_header X-Powered-By;
    }

    # Static assets optimization
    location ~* \.(js|css|png|jpg|jpeg|gif|ico|svg|woff|woff2|ttf|eot|webp|avif)\$ {
        expires 1y;
        add_header Cache-Control &quot;public, immutable&quot;;
        add_header Vary &quot;Accept-Encoding&quot;;
        access_log off;
        
        # CORS for fonts
        location ~* \.(woff|woff2|ttf|eot)\$ {
            add_header Access-Control-Allow-Origin *;
        }
    }

    # XML files (sitemaps, feeds)
    location ~* \.(xml|txt)\$ {
        expires 1h;
        add_header Cache-Control &quot;public&quot;;
    }

    # Block xmlrpc.php
    location = /xmlrpc.php {
        deny all;
        access_log off;
        log_not_found off;
    }

    # WordPress REST API rate limiting
    location ~* /wp-json/ {
        limit_req zone=wp_admin burst=10 nodelay;
        try_files \$uri \$uri/ /index.php?\$args;
    }

    # Favicon and robots.txt
    location = /favicon.ico {
        log_not_found off;
        access_log off;
        expires 1y;
    }

    location = /robots.txt {
        allow all;
        log_not_found off;
        access_log off;
        expires 1h;
    }

    # Security.txt
    location = /.well-known/security.txt {
        return 301 \$scheme://\$server_name/.well-known/security.txt;
    }
}

# WWW to non-WWW redirect
server {
    listen 443 ssl http2;
    listen [::]:443 ssl http2;
    server_name www.example.com;
    
    ssl_certificate /etc/letsencrypt/live/example.com/fullchain.pem;
    ssl_certificate_key /etc/letsencrypt/live/example.com/privkey.pem;
    
    return 301 https://example.com\$request_uri;
}
EOF

# Create FastCGI cache directory
sudo mkdir -p /var/cache/nginx/wordpress
sudo chown -R www-data:www-data /var/cache/nginx

# Add FastCGI cache configuration
sudo tee /etc/nginx/conf.d/fastcgi-cache.conf &gt; /dev/null &lt;&lt;EOF
# FastCGI cache configuration for WordPress
fastcgi_cache_path /var/cache/nginx/wordpress levels=1:2 keys_zone=WORDPRESS:100m inactive=60m;
fastcgi_cache_key &quot;\$scheme\$request_method\$host\$request_uri&quot;;
fastcgi_cache_use_stale error timeout invalid_header http_500;
fastcgi_ignore_headers Cache-Control Expires Set-Cookie;
EOF

# Enable site and restart NGINX
sudo ln -s /etc/nginx/sites-available/wordpress.conf /etc/nginx/sites-enabled/
sudo nginx -t &amp;&amp; sudo systemctl restart nginx</code></pre>
      </div>
    </div>
<h3 id="apache-configuration-alternative" class="mobile-header">Apache Configuration (Alternative)</h3>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">üìã</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash"># Create secure Apache virtual host
sudo tee /etc/apache2/sites-available/wordpress.conf &gt; /dev/null &lt;&lt;EOF
&lt;VirtualHost *:80&gt;
    ServerName example.com
    ServerAlias www.example.com
    Redirect permanent / https://example.com/
&lt;/VirtualHost&gt;

&lt;VirtualHost *:443&gt;
    ServerName example.com
    ServerAlias www.example.com
    DocumentRoot /var/www/html/example.com
    
    # SSL Configuration
    SSLEngine on
    SSLCertificateFile /etc/letsencrypt/live/example.com/fullchain.pem
    SSLCertificateKeyFile /etc/letsencrypt/live/example.com/privkey.pem
    SSLProtocol all -SSLv3 -TLSv1 -TLSv1.1
    SSLCipherSuite ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256
    SSLHonorCipherOrder off
    
    # Security headers
    Header always set Strict-Transport-Security &quot;max-age=31536000; includeSubDomains; preload&quot;
    Header always set X-Frame-Options &quot;SAMEORIGIN&quot;
    Header always set X-Content-Type-Options &quot;nosniff&quot;
    Header always set X-XSS-Protection &quot;1; mode=block&quot;
    Header always set Referrer-Policy &quot;strict-origin-when-cross-origin&quot;
    
    # Hide server information
    Header always unset Server
    Header always unset X-Powered-By

    &lt;Directory /var/www/html/example.com&gt;
        Options -Indexes +FollowSymLinks
        AllowOverride All
        Require all granted
        
        # WordPress security
        &lt;Files wp-config.php&gt;
            Require all denied
        &lt;/Files&gt;
        
        &lt;Files .htaccess&gt;
            Require all denied
        &lt;/Files&gt;
        
        &lt;Files readme.html&gt;
            Require all denied
        &lt;/Files&gt;
        
        &lt;Files license.txt&gt;
            Require all denied
        &lt;/Files&gt;
    &lt;/Directory&gt;

    # Disable execution in uploads
    &lt;Directory /var/www/html/example.com/wp-content/uploads&gt;
        &lt;Files &quot;*.php&quot;&gt;
            Require all denied
        &lt;/Files&gt;
    &lt;/Directory&gt;

    # Rate limiting with mod_evasive
    &lt;IfModule mod_evasive24.c&gt;
        DOSHashTableSize    1024
        DOSPageCount        2
        DOSSiteCount        50
        DOSPageInterval     1
        DOSSiteInterval     1
        DOSBlockingPeriod   600
        DOSEmailNotify      admin@example.com
    &lt;/IfModule&gt;

    # Compression
    &lt;IfModule mod_deflate.c&gt;
        SetOutputFilter DEFLATE
        AddOutputFilterByType DEFLATE text/html text/css text/javascript text/xml text/plain application/javascript application/xml+rss application/xml application/x-javascript application/json
        
        # Don&#039;t compress images
        SetEnvIfNoCase Request_URI \.(?:gif|jpe?g|png|webp)$ no-gzip dont-vary
        SetEnvIfNoCase Request_URI \.(?:exe|t?gz|zip|bz2|sit|rar)$ no-gzip dont-vary
    &lt;/IfModule&gt;

    # Caching
    &lt;IfModule mod_expires.c&gt;
        ExpiresActive On
        ExpiresByType image/jpg &quot;access plus 1 year&quot;
        ExpiresByType image/jpeg &quot;access plus 1 year&quot;
        ExpiresByType image/gif &quot;access plus 1 year&quot;
        ExpiresByType image/png &quot;access plus 1 year&quot;
        ExpiresByType image/webp &quot;access plus 1 year&quot;
        ExpiresByType text/css &quot;access plus 1 month&quot;
        ExpiresByType application/pdf &quot;access plus 1 month&quot;
        ExpiresByType text/javascript &quot;access plus 1 month&quot;
        ExpiresByType application/javascript &quot;access plus 1 month&quot;
        ExpiresDefault &quot;access plus 1 week&quot;
    &lt;/IfModule&gt;

    ErrorLog \${APACHE_LOG_DIR}/wordpress_error.log
    CustomLog \${APACHE_LOG_DIR}/wordpress_access.log combined
&lt;/VirtualHost&gt;
EOF

# Enable modules and site
sudo a2enmod ssl headers expires deflate rewrite
sudo a2ensite wordpress.conf
sudo a2dissite 000-default
sudo systemctl restart apache2</code></pre>
      </div>
    </div>
<h2 id="php-configuration-and-optimization" class="mobile-header">PHP Configuration and Optimization</h2>
<h3 id="php-82-optimization" class="mobile-header">PHP 8.2 Optimization</h3>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">üìã</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash"># Configure PHP-FPM for optimal WordPress performance
sudo tee /etc/php/8.2/fpm/pool.d/wordpress.conf &gt; /dev/null &lt;&lt;EOF
[wordpress]
user = www-data
group = www-data
listen = /var/run/php/php8.2-fpm-wordpress.sock
listen.owner = www-data
listen.group = www-data
listen.mode = 0660

# Process management
pm = dynamic
pm.max_children = 50
pm.start_servers = 5
pm.min_spare_servers = 5
pm.max_spare_servers = 35
pm.max_requests = 1000
pm.process_idle_timeout = 10s

# Resource limits
php_admin_value[memory_limit] = 512M
php_admin_value[upload_max_filesize] = 64M
php_admin_value[post_max_size] = 64M
php_admin_value[max_execution_time] = 300
php_admin_value[max_input_time] = 300
php_admin_value[max_input_vars] = 3000

# Security settings
php_admin_flag[allow_url_fopen] = off
php_admin_flag[allow_url_include] = off
php_admin_flag[file_uploads] = on
php_admin_flag[expose_php] = off
php_admin_flag[log_errors] = on
php_admin_value[error_log] = /var/log/php/wordpress-error.log

# OPcache settings
php_admin_flag[opcache.enable] = on
php_admin_value[opcache.memory_consumption] = 256
php_admin_value[opcache.interned_strings_buffer] = 16
php_admin_value[opcache.max_accelerated_files] = 10000
php_admin_value[opcache.revalidate_freq] = 2
php_admin_flag[opcache.save_comments] = on
php_admin_flag[opcache.fast_shutdown] = on

# Session settings
php_admin_value[session.save_handler] = redis
php_admin_value[session.save_path] = &quot;tcp://127.0.0.1:6379&quot;
php_admin_value[session.gc_maxlifetime] = 1440
EOF

# Create PHP error log directory
sudo mkdir -p /var/log/php
sudo chown www-data:www-data /var/log/php

# Configure main PHP settings
sudo tee -a /etc/php/8.2/fpm/php.ini &gt; /dev/null &lt;&lt;EOF

; WordPress optimizations
max_execution_time = 300
max_input_time = 300
memory_limit = 512M
upload_max_filesize = 64M
post_max_size = 64M
max_input_vars = 3000

; Security
expose_php = Off
allow_url_fopen = Off
allow_url_include = Off
display_errors = Off
log_errors = On
error_log = /var/log/php/error.log

; Session security
session.cookie_httponly = On
session.cookie_secure = On
session.use_strict_mode = On

; OPcache
opcache.enable = 1
opcache.memory_consumption = 256
opcache.interned_strings_buffer = 16
opcache.max_accelerated_files = 10000
opcache.revalidate_freq = 2
opcache.save_comments = 1
opcache.fast_shutdown = 1
opcache.validate_timestamps = 0  ; Production only

; Redis
extension = redis

; Date/time
date.timezone = &quot;America/New_York&quot;
EOF

sudo systemctl restart php8.2-fpm</code></pre>
      </div>
    </div>
<h3 id="redis-object-caching-setup" class="mobile-header">Redis Object Caching Setup</h3>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">üìã</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash"># Configure Redis for WordPress
sudo tee -a /etc/redis/redis.conf &gt; /dev/null &lt;&lt;EOF

# WordPress optimizations
maxmemory 512mb
maxmemory-policy allkeys-lru
save 900 1
save 300 10
save 60 10000

# Security
bind 127.0.0.1
protected-mode yes
port 6379
tcp-backlog 511

# Logging
loglevel notice
logfile /var/log/redis/redis-server.log

# Persistence
rdbcompression yes
rdbchecksum yes
EOF

sudo systemctl restart redis-server</code></pre>
      </div>
    </div>
<h2 id="wordpress-cli-wp-cli-installation-and-configuration" class="mobile-header">WordPress CLI (WP-CLI) Installation and Configuration</h2>
<h3 id="wp-cli-setup" class="mobile-header">WP-CLI Setup</h3>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">üìã</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash"># Download and install WP-CLI
curl -O https://raw.githubusercontent.com/wp-cli/builds/gh-pages/phar/wp-cli.phar
chmod +x wp-cli.phar
sudo mv wp-cli.phar /usr/local/bin/wp

# Create WP-CLI configuration
sudo tee /var/www/html/example.com/wp-cli.yml &gt; /dev/null &lt;&lt;EOF
# WP-CLI configuration
path: /var/www/html/example.com

core config:
  dbhost: 127.0.0.1
  dbname: wordpress
  dbuser: wpuser
  dbpass: secure_wp_password_2024
  extra-php: |
    define(&#039;WP_DEBUG&#039;, false);
    define(&#039;WP_DEBUG_LOG&#039;, false);
    define(&#039;DISALLOW_FILE_EDIT&#039;, true);
    define(&#039;FORCE_SSL_ADMIN&#039;, true);
    define(&#039;WP_REDIS_HOST&#039;, &#039;127.0.0.1&#039;);

server:
  docroot: /var/www/html/example.com
EOF

# Install WordPress via WP-CLI
cd /var/www/html/example.com
sudo -u www-data wp core download --force
sudo -u www-data wp config create \
  --dbname=wordpress \
  --dbuser=wpuser \
  --dbpass=secure_wp_password_2024 \
  --dbhost=127.0.0.1

sudo -u www-data wp core install \
  --url=https://example.com \
  --title=&quot;Secure WordPress Site&quot; \
  --admin_user=admin \
  --admin_password=secure_admin_password_2024 \
  --admin_email=admin@example.com \
  --skip-email

# Essential security plugins
sudo -u www-data wp plugin install wordfence --activate
sudo -u www-data wp plugin install redis-cache --activate
sudo -u www-data wp plugin install wp-super-cache --activate
sudo -u www-data wp plugin install updraftplus --activate

# Performance plugins
sudo -u www-data wp plugin install autoptimize --activate
sudo -u www-data wp plugin install smush --activate

# Enable Redis cache
sudo -u www-data wp redis enable

# Configure security settings
sudo -u www-data wp config set FORCE_SSL_ADMIN true --raw
sudo -u www-data wp config set DISALLOW_FILE_EDIT true --raw
sudo -u www-data wp config set WP_AUTO_UPDATE_CORE minor --raw</code></pre>
      </div>
    </div>
<h2 id="security-hardening" class="mobile-header">Security Hardening</h2>
<h3 id="file-system-security" class="mobile-header">File System Security</h3>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">üìã</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash"># Create secure file permissions script
sudo tee /usr/local/bin/wordpress-permissions.sh &gt; /dev/null &lt;&lt;&#039;EOF&#039;
#!/bin/bash
WP_PATH=&quot;/var/www/html/example.com&quot;
WP_USER=&quot;www-data&quot;
WP_GROUP=&quot;www-data&quot;

# Set directory permissions
find ${WP_PATH}/ -type d -exec chmod 755 {} \;

# Set file permissions
find ${WP_PATH}/ -type f -exec chmod 644 {} \;

# Secure wp-config.php
chmod 600 ${WP_PATH}/wp-config.php

# Secure .htaccess
if [ -f ${WP_PATH}/.htaccess ]; then
    chmod 644 ${WP_PATH}/.htaccess
fi

# Set ownership
chown -R ${WP_USER}:${WP_GROUP} ${WP_PATH}/

# Secure directories
chmod 755 ${WP_PATH}/wp-content/
chmod 755 ${WP_PATH}/wp-content/themes/
chmod 755 ${WP_PATH}/wp-content/plugins/
chmod 775 ${WP_PATH}/wp-content/uploads/

# Create .htaccess for uploads security (Apache)
cat &gt; ${WP_PATH}/wp-content/uploads/.htaccess &lt;&lt;EOL
# Disable PHP execution in uploads directory
&lt;Files &quot;*.php&quot;&gt;
    Order Deny,Allow
    Deny from All
&lt;/Files&gt;

# Disable directory browsing
Options -Indexes

# Deny access to sensitive files
&lt;FilesMatch &quot;\.(htaccess|htpasswd|ini|log|sh|inc|bak)$&quot;&gt;
    Order Allow,Deny
    Deny from all
&lt;/FilesMatch&gt;
EOL

echo &quot;WordPress file permissions have been secured&quot;
EOF

sudo chmod +x /usr/local/bin/wordpress-permissions.sh
sudo /usr/local/bin/wordpress-permissions.sh</code></pre>
      </div>
    </div>
<h3 id="wordpress-security-configuration" class="mobile-header">WordPress Security Configuration</h3>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">üìã</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash"># Create comprehensive .htaccess for security (Apache)
sudo tee /var/www/html/example.com/.htaccess &gt; /dev/null &lt;&lt;EOF
# WordPress Security .htaccess - 2024

# Block access to wp-config.php
&lt;Files wp-config.php&gt;
    Order Allow,Deny
    Deny from All
&lt;/Files&gt;

# Block access to readme.html, license.txt, etc.
&lt;FilesMatch &quot;^(readme\.html|license\.txt|wp-config\.php|\.htaccess|\.htpasswd)&quot;&gt;
    Order Allow,Deny
    Deny from All
&lt;/FilesMatch&gt;

# Prevent script injections
Options +FollowSymLinks
RewriteEngine On
RewriteCond %{QUERY_STRING} (&lt;|%3C).*script.*(&gt;|%3E) [NC,OR]
RewriteCond %{QUERY_STRING} GLOBALS(=|[|%[0-9A-Z]{0,2}) [OR]
RewriteCond %{QUERY_STRING} _REQUEST(=|[|%[0-9A-Z]{0,2}) [OR]
RewriteCond %{QUERY_STRING} ^.*(\[|\]|\(|\)|&lt;|&gt;|√™|&quot;|;|\?|\*|\$|=) [NC,OR]
RewriteCond %{QUERY_STRING} (NULL|OUTFILE|LOAD_FILE) [OR]
RewriteCond %{QUERY_STRING} (\.{1,}/)+(motd|etc|bin) [NC,OR]
RewriteCond %{QUERY_STRING} (localhost|loopback|127\.0\.0\.1) [NC,OR]
RewriteCond %{QUERY_STRING} (&lt;|&gt;|&#039;|%0A|%0D|%27|%3C|%3E|%00) [NC,OR]
RewriteCond %{QUERY_STRING} concat[^\(]*\( [NC,OR]
RewriteCond %{QUERY_STRING} union([^s]*s)+elect [NC,OR]
RewriteCond %{QUERY_STRING} union([^a]*a)+ll([^s]*s)+elect [NC,OR]
RewriteCond %{QUERY_STRING} \-[sdcr].*(allow_url_include|allow_url_fopen|safe_mode|disable_functions|auto_prepend_file) [NC,OR]
RewriteCond %{QUERY_STRING} (;|&lt;|&gt;|&#039;|&quot;|\)|%0A|%0D|%22|%27|%3C|%3E|%00).*(/\*|union|select|insert|drop|delete|update|cast|create|char|convert|alter|declare|or|;|\)|script|\&lt;|\&gt;|\&amp;|\|\|) [NC]
RewriteRule ^(.*)$ index.php [F,L]

# Block XML-RPC
&lt;Files xmlrpc.php&gt;
    Order Allow,Deny
    Deny from All
&lt;/Files&gt;

# Limit login attempts
&lt;FilesMatch &quot;wp-login.php&quot;&gt;
    Order Allow,Deny
    Allow from all
    # Add your IP for admin access
    # Allow from 192.168.1.100
&lt;/FilesMatch&gt;

# Disable directory browsing
Options -Indexes

# Protect includes directory
&lt;IfModule mod_rewrite.c&gt;
    RewriteEngine On
    RewriteRule ^wp-admin/includes/ - [F,L]
    RewriteRule !^wp-includes/ - [S=3]
    RewriteRule ^wp-includes/[^/]+\.php$ - [F,L]
    RewriteRule ^wp-includes/js/tinymce/langs/.+\.php - [F,L]
    RewriteRule ^wp-includes/theme-compat/ - [F,L]
&lt;/IfModule&gt;

# WordPress SEO
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]

# Force HTTPS (if not using NGINX redirect)
# RewriteCond %{HTTPS} !=on
# RewriteRule ^(.*)$ https://%{HTTP_HOST}%{REQUEST_URI} [L,R=301]

# Security headers (if mod_headers is enabled)
&lt;IfModule mod_headers.c&gt;
    Header always set Strict-Transport-Security &quot;max-age=31536000; includeSubDomains; preload&quot;
    Header always set X-Frame-Options &quot;SAMEORIGIN&quot;
    Header always set X-Content-Type-Options &quot;nosniff&quot;
    Header always set X-XSS-Protection &quot;1; mode=block&quot;
    Header always set Referrer-Policy &quot;strict-origin-when-cross-origin&quot;
&lt;/IfModule&gt;
EOF

sudo chown www-data:www-data /var/www/html/example.com/.htaccess</code></pre>
      </div>
    </div>
<h2 id="performance-optimization" class="mobile-header">Performance Optimization</h2>
<h3 id="caching-strategy-implementation" class="mobile-header">Caching Strategy Implementation</h3>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">üìã</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash"># Install and configure Redis plugin
cd /var/www/html/example.com
sudo -u www-data wp plugin install redis-cache --activate

# Configure Redis for WordPress
sudo -u www-data wp config set WP_REDIS_HOST &#039;127.0.0.1&#039; --raw
sudo -u www-data wp config set WP_REDIS_PORT 6379 --raw --type=integer
sudo -u www-data wp config set WP_REDIS_DATABASE 0 --raw --type=integer
sudo -u www-data wp config set WP_REDIS_TIMEOUT 1 --raw --type=integer
sudo -u www-data wp config set WP_REDIS_READ_TIMEOUT 1 --raw --type=integer

# Enable Redis object cache
sudo -u www-data wp redis enable

# Install and configure caching plugin
sudo -u www-data wp plugin install w3-total-cache --activate

# Configure W3 Total Cache via WP-CLI
sudo -u www-data wp w3-total-cache option set pgcache.enabled true
sudo -u www-data wp w3-total-cache option set dbcache.enabled true
sudo -u www-data wp w3-total-cache option set objectcache.enabled true
sudo -u www-data wp w3-total-cache option set browsercache.enabled true

# Install performance optimization plugins
sudo -u www-data wp plugin install autoptimize --activate
sudo -u www-data wp plugin install smush --activate
sudo -u www-data wp plugin install wp-rocket --activate  # Premium plugin</code></pre>
      </div>
    </div>
<h3 id="database-optimization" class="mobile-header">Database Optimization</h3>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">üìã</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash"># Create database optimization script
sudo tee /usr/local/bin/wordpress-db-optimize.sh &gt; /dev/null &lt;&lt;&#039;EOF&#039;
#!/bin/bash
WP_PATH=&quot;/var/www/html/example.com&quot;
LOG_FILE=&quot;/var/log/wordpress-optimization.log&quot;

cd ${WP_PATH}

log_message() {
    echo &quot;$(date &#039;+%Y-%m-%d %H:%M:%S&#039;) - $1&quot; | tee -a ${LOG_FILE}
}

log_message &quot;Starting WordPress database optimization...&quot;

# Database cleanup
sudo -u www-data wp transient delete --all --quiet
sudo -u www-data wp db optimize --quiet
sudo -u www-data wp db repair --quiet

# Clean spam and trash
sudo -u www-data wp comment delete $(sudo -u www-data wp comment list --status=spam --format=ids) --quiet
sudo -u www-data wp post delete $(sudo -u www-data wp post list --post_status=trash --format=ids) --quiet

# Optimize images
if sudo -u www-data wp plugin is-installed smush; then
    sudo -u www-data wp smush optimize --quiet
fi

# Clear caches
if sudo -u www-data wp plugin is-installed w3-total-cache; then
    sudo -u www-data wp w3-total-cache flush all --quiet
fi

if sudo -u www-data wp plugin is-installed wp-super-cache; then
    sudo -u www-data wp super-cache flush --quiet
fi

if sudo -u www-data wp plugin is-installed redis-cache; then
    sudo -u www-data wp redis flush --quiet
fi

# Update WordPress core and plugins
sudo -u www-data wp core update --quiet
sudo -u www-data wp plugin update --all --quiet
sudo -u www-data wp theme update --all --quiet

log_message &quot;WordPress optimization completed&quot;
EOF

sudo chmod +x /usr/local/bin/wordpress-db-optimize.sh

# Schedule weekly optimization
echo &quot;0 3 * * 0 root /usr/local/bin/wordpress-db-optimize.sh&quot; | sudo tee -a /etc/crontab</code></pre>
      </div>
    </div>
<h3 id="cdn-integration" class="mobile-header">CDN Integration</h3>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">üìã</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash"># Configure Cloudflare integration
sudo -u www-data wp plugin install cloudflare --activate

# Configure CDN settings via WP-CLI
sudo -u www-data wp option update cloudflare_api_key &quot;your_cloudflare_api_key&quot;
sudo -u www-data wp option update cloudflare_email &quot;your_email@example.com&quot;

# Install MaxCDN/StackPath plugin
sudo -u www-data wp plugin install maxcdn --activate

# Configure image optimization
sudo -u www-data wp plugin install ewww-image-optimizer --activate
sudo -u www-data wp option update ewww_image_optimizer_cloud_key &quot;your_api_key&quot;</code></pre>
      </div>
    </div>
<h2 id="ssl-certificate-setup" class="mobile-header">SSL Certificate Setup</h2>
<h3 id="lets-encrypt-ssl-configuration" class="mobile-header">Let's Encrypt SSL Configuration</h3>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">üìã</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash"># Install Certbot
sudo apt install -y certbot python3-certbot-nginx  # NGINX
sudo apt install -y certbot python3-certbot-apache # Apache

# Obtain SSL certificate
sudo certbot --nginx -d example.com -d www.example.com  # NGINX
sudo certbot --apache -d example.com -d www.example.com # Apache

# Configure automatic renewal
sudo crontab -e
# Add: 0 12 * * * /usr/bin/certbot renew --quiet &amp;&amp; systemctl reload nginx

# Test renewal
sudo certbot renew --dry-run

# Update WordPress URLs to HTTPS
cd /var/www/html/example.com
sudo -u www-data wp search-replace &quot;http://example.com&quot; &quot;https://example.com&quot; --dry-run
sudo -u www-data wp search-replace &quot;http://example.com&quot; &quot;https://example.com&quot;
sudo -u www-data wp option update home &quot;https://example.com&quot;
sudo -u www-data wp option update siteurl &quot;https://example.com&quot;</code></pre>
      </div>
    </div>
<h2 id="backup-and-security" class="mobile-header">Backup and Security</h2>
<h3 id="comprehensive-backup-strategy" class="mobile-header">Comprehensive Backup Strategy</h3>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">üìã</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash">sudo tee /usr/local/bin/wordpress-backup.sh &gt; /dev/null &lt;&lt;&#039;EOF&#039;
#!/bin/bash
BACKUP_DIR=&quot;/backup/wordpress&quot;
WP_PATH=&quot;/var/www/html/example.com&quot;
DATE=$(date +%Y%m%d_%H%M%S)

mkdir -p ${BACKUP_DIR}/{files,database,configs}

cd ${WP_PATH}

# Database backup via WP-CLI
sudo -u www-data wp db export ${BACKUP_DIR}/database/wordpress-${DATE}.sql --quiet
gzip ${BACKUP_DIR}/database/wordpress-${DATE}.sql

# Files backup (exclude cache and temp files)
tar --exclude=&#039;${WP_PATH}/wp-content/cache&#039; \
    --exclude=&#039;${WP_PATH}/wp-content/uploads/cache&#039; \
    --exclude=&#039;${WP_PATH}/wp-content/w3tc-config&#039; \
    --exclude=&#039;${WP_PATH}/.htaccess.bak*&#039; \
    -czf ${BACKUP_DIR}/files/wordpress-files-${DATE}.tar.gz \
    -C /var/www/html example.com

# Configuration backup
tar -czf ${BACKUP_DIR}/configs/wordpress-config-${DATE}.tar.gz \
    /etc/nginx/sites-available/wordpress.conf \
    /etc/php/8.2/fpm/pool.d/wordpress.conf \
    /etc/mysql/mysql.conf.d/wordpress.cnf \
    /etc/redis/redis.conf

# Upload to cloud storage
aws s3 cp ${BACKUP_DIR}/ s3://wordpress-backups/ --recursive
az storage blob upload-batch --source ${BACKUP_DIR} --destination wordpress-backups
gsutil cp -r ${BACKUP_DIR}/* gs://wordpress-backups/

# Keep only last 14 backups locally
find ${BACKUP_DIR} -name &quot;wordpress-*&quot; -type f -mtime +14 -delete

# Test backup integrity
if [ -f ${BACKUP_DIR}/database/wordpress-${DATE}.sql.gz ]; then
    zcat ${BACKUP_DIR}/database/wordpress-${DATE}.sql.gz | head -10 &gt;/dev/null
    if [ $? -eq 0 ]; then
        echo &quot;‚úì Database backup integrity verified&quot;
    else
        echo &quot;‚úó Database backup may be corrupted&quot;
    fi
fi

echo &quot;WordPress backup completed: ${DATE}&quot;
EOF

sudo chmod +x /usr/local/bin/wordpress-backup.sh

# Schedule daily backups
echo &quot;0 2 * * * root /usr/local/bin/wordpress-backup.sh&quot; | sudo tee -a /etc/crontab</code></pre>
      </div>
    </div>
<h3 id="security-monitoring-and-hardening" class="mobile-header">Security Monitoring and Hardening</h3>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">üìã</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash"># Create security monitoring script
sudo tee /usr/local/bin/wordpress-security-check.sh &gt; /dev/null &lt;&lt;&#039;EOF&#039;
#!/bin/bash
WP_PATH=&quot;/var/www/html/example.com&quot;
SECURITY_LOG=&quot;/var/log/wordpress-security.log&quot;

cd ${WP_PATH}

log_message() {
    echo &quot;$(date &#039;+%Y-%m-%d %H:%M:%S&#039;) - $1&quot; | tee -a ${SECURITY_LOG}
}

# Check for malware
if command -v clamscan &gt;/dev/null 2&gt;&amp;1; then
    log_message &quot;Running malware scan...&quot;
    clamscan -r ${WP_PATH} --infected --remove --quiet
    if [ $? -eq 0 ]; then
        log_message &quot;‚úì No malware detected&quot;
    else
        log_message &quot;‚ö† Malware detected and removed&quot;
    fi
fi

# Check file integrity
log_message &quot;Checking WordPress core file integrity...&quot;
CORE_INTEGRITY=$(sudo -u www-data wp core verify-checksums --quiet 2&gt;&amp;1)
if [ $? -eq 0 ]; then
    log_message &quot;‚úì WordPress core files are intact&quot;
else
    log_message &quot;‚ö† WordPress core file integrity issues: ${CORE_INTEGRITY}&quot;
fi

# Check for vulnerable plugins
log_message &quot;Checking for vulnerable plugins...&quot;
VULN_PLUGINS=$(sudo -u www-data wp vuln plugin-status 2&gt;/dev/null | grep &quot;vulnerable&quot; | wc -l)
if [ ${VULN_PLUGINS} -eq 0 ]; then
    log_message &quot;‚úì No vulnerable plugins detected&quot;
else
    log_message &quot;‚ö† ${VULN_PLUGINS} vulnerable plugins found&quot;
fi

# Check user accounts
ADMIN_COUNT=$(sudo -u www-data wp user list --role=administrator --format=count)
log_message &quot;‚Ñπ ${ADMIN_COUNT} administrator accounts found&quot;

# Check for suspicious uploads
SUSPICIOUS_FILES=$(find ${WP_PATH}/wp-content/uploads -name &quot;*.php&quot; -o -name &quot;*.js&quot; -o -name &quot;*.exe&quot; 2&gt;/dev/null | wc -l)
if [ ${SUSPICIOUS_FILES} -gt 0 ]; then
    log_message &quot;‚ö† ${SUSPICIOUS_FILES} suspicious files found in uploads directory&quot;
    find ${WP_PATH}/wp-content/uploads -name &quot;*.php&quot; -o -name &quot;*.js&quot; -o -name &quot;*.exe&quot; 2&gt;/dev/null &gt;&gt; ${SECURITY_LOG}
fi

# Check file permissions
WRITABLE_FILES=$(find ${WP_PATH} -type f -perm 777 2&gt;/dev/null | wc -l)
if [ ${WRITABLE_FILES} -gt 0 ]; then
    log_message &quot;‚ö† ${WRITABLE_FILES} files are world-writable&quot;
fi

# Check .htaccess integrity
if [ -f ${WP_PATH}/.htaccess ]; then
    HTACCESS_SIZE=$(stat -c%s ${WP_PATH}/.htaccess)
    if [ ${HTACCESS_SIZE} -lt 100 ]; then
        log_message &quot;‚ö† .htaccess file may be compromised or empty&quot;
    fi
fi

# Check for brute force attempts
FAILED_LOGINS=$(grep &quot;authentication failure&quot; /var/log/auth.log | grep -c &quot;$(date +&#039;%b %d&#039;)&quot;)
if [ ${FAILED_LOGINS} -gt 10 ]; then
    log_message &quot;‚ö† ${FAILED_LOGINS} failed login attempts detected today&quot;
fi

log_message &quot;Security check completed&quot;
EOF

sudo chmod +x /usr/local/bin/wordpress-security-check.sh

# Schedule daily security checks
echo &quot;0 6 * * * root /usr/local/bin/wordpress-security-check.sh&quot; | sudo tee -a /etc/crontab</code></pre>
      </div>
    </div>
<h3 id="fail2ban-wordpress-protection" class="mobile-header">Fail2Ban WordPress Protection</h3>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">üìã</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash"># Install Fail2Ban
sudo apt install -y fail2ban  # Ubuntu/Debian
sudo yum install -y fail2ban  # RHEL/CentOS

# Create WordPress filter
sudo tee /etc/fail2ban/filter.d/wordpress.conf &gt; /dev/null &lt;&lt;EOF
[Definition]
failregex = ^&lt;HOST&gt;.*POST.*(wp-login\.php|xmlrpc\.php).* 200
            ^&lt;HOST&gt;.*POST.*wp-login\.php.* 404
            ^&lt;HOST&gt;.*GET.*wp-admin.* 403
            ^&lt;HOST&gt;.*POST.*wp-comments-post\.php.* 403

ignoreregex = ^&lt;HOST&gt;.*POST.*wp-login\.php.*200.*admin
EOF

# Configure WordPress jail
sudo tee /etc/fail2ban/jail.d/wordpress.conf &gt; /dev/null &lt;&lt;EOF
[wordpress]
enabled = true
port = http,https
filter = wordpress
logpath = /var/log/nginx/access.log
maxretry = 3
findtime = 600
bantime = 3600
action = iptables-multiport[name=WordPress, port=&quot;http,https&quot;, protocol=tcp]

[wordpress-xmlrpc]
enabled = true
port = http,https
filter = wordpress
logpath = /var/log/nginx/access.log
maxretry = 1
findtime = 300
bantime = 86400
action = iptables-multiport[name=WordPress-XMLRPC, port=&quot;http,https&quot;, protocol=tcp]
EOF

sudo systemctl restart fail2ban</code></pre>
      </div>
    </div>
<h2 id="monitoring-and-maintenance" class="mobile-header">Monitoring and Maintenance</h2>
<h3 id="wordpress-health-monitoring" class="mobile-header">WordPress Health Monitoring</h3>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">üìã</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash">sudo tee /usr/local/bin/wordpress-health-check.sh &gt; /dev/null &lt;&lt;&#039;EOF&#039;
#!/bin/bash
WP_PATH=&quot;/var/www/html/example.com&quot;
HEALTH_LOG=&quot;/var/log/wordpress-health.log&quot;

cd ${WP_PATH}

log_message() {
    echo &quot;$(date &#039;+%Y-%m-%d %H:%M:%S&#039;) - $1&quot; | tee -a ${HEALTH_LOG}
}

# Check web server status
WEB_SERVER=&quot;nginx&quot;
if command -v apache2 &gt;/dev/null 2&gt;&amp;1; then
    WEB_SERVER=&quot;apache2&quot;
elif command -v httpd &gt;/dev/null 2&gt;&amp;1; then
    WEB_SERVER=&quot;httpd&quot;
fi

if systemctl is-active ${WEB_SERVER} &gt;/dev/null 2&gt;&amp;1; then
    log_message &quot;‚úì ${WEB_SERVER} is running&quot;
else
    log_message &quot;‚úó ${WEB_SERVER} is not running&quot;
    exit 1
fi

# Check database connectivity
if sudo -u www-data wp db check --quiet &gt;/dev/null 2&gt;&amp;1; then
    log_message &quot;‚úì Database connection is healthy&quot;
else
    log_message &quot;‚úó Database connection issues&quot;
fi

# Check WordPress status
WP_VERSION=$(sudo -u www-data wp core version --quiet)
log_message &quot;‚Ñπ WordPress version: ${WP_VERSION}&quot;

# Check for updates
CORE_UPDATES=$(sudo -u www-data wp core check-update --format=count --quiet)
PLUGIN_UPDATES=$(sudo -u www-data wp plugin list --update=available --format=count --quiet)
THEME_UPDATES=$(sudo -u www-data wp theme list --update=available --format=count --quiet)

log_message &quot;‚Ñπ Updates available - Core: ${CORE_UPDATES}, Plugins: ${PLUGIN_UPDATES}, Themes: ${THEME_UPDATES}&quot;

# Check Redis cache
if sudo -u www-data wp redis status &gt;/dev/null 2&gt;&amp;1; then
    log_message &quot;‚úì Redis object cache is working&quot;
else
    log_message &quot;‚ö† Redis object cache issues&quot;
fi

# Check disk space
DISK_USAGE=$(df ${WP_PATH} | awk &#039;NR==2 {print $5}&#039; | sed &#039;s/%//&#039;)
if [ ${DISK_USAGE} -gt 85 ]; then
    log_message &quot;‚ö† Disk usage is ${DISK_USAGE}%&quot;
else
    log_message &quot;‚úì Disk usage is ${DISK_USAGE}%&quot;
fi

# Check file permissions
WRITABLE_WP_CONFIG=$([ -w ${WP_PATH}/wp-config.php ] &amp;&amp; echo &quot;1&quot; || echo &quot;0&quot;)
if [ ${WRITABLE_WP_CONFIG} -eq 1 ]; then
    log_message &quot;‚ö† wp-config.php is writable - security risk&quot;
else
    log_message &quot;‚úì wp-config.php permissions are secure&quot;
fi

# Check SSL certificate
SSL_EXPIRY=$(echo | openssl s_client -servername example.com -connect example.com:443 2&gt;/dev/null | openssl x509 -noout -dates | grep notAfter | cut -d= -f2)
SSL_EXPIRY_EPOCH=$(date -d &quot;$SSL_EXPIRY&quot; +%s)
CURRENT_EPOCH=$(date +%s)
DAYS_TO_SSL_EXPIRY=$(( (SSL_EXPIRY_EPOCH - CURRENT_EPOCH) / 86400 ))

if [ ${DAYS_TO_SSL_EXPIRY} -lt 30 ]; then
    log_message &quot;‚ö† SSL certificate expires in ${DAYS_TO_SSL_EXPIRY} days&quot;
else
    log_message &quot;‚úì SSL certificate expires in ${DAYS_TO_SSL_EXPIRY} days&quot;
fi

# Check website accessibility
HTTP_STATUS=$(curl -s -o /dev/null -w &quot;%{http_code}&quot; https://example.com)
if [ &quot;${HTTP_STATUS}&quot; = &quot;200&quot; ]; then
    log_message &quot;‚úì Website is accessible (HTTP ${HTTP_STATUS})&quot;
else
    log_message &quot;‚úó Website accessibility issues (HTTP ${HTTP_STATUS})&quot;
fi

log_message &quot;WordPress health check completed&quot;
EOF

sudo chmod +x /usr/local/bin/wordpress-health-check.sh

# Schedule health checks every 30 minutes
echo &quot;*/30 * * * * root /usr/local/bin/wordpress-health-check.sh&quot; | sudo tee -a /etc/crontab</code></pre>
      </div>
    </div>
<h3 id="wordpress-security-scanning" class="mobile-header">WordPress Security Scanning</h3>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">üìã</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash"># Install WP-CLI vulnerability scanner
sudo -u www-data wp package install wp-cli/doctor-command

# Create comprehensive security scan script
sudo tee /usr/local/bin/wordpress-security-scan.sh &gt; /dev/null &lt;&lt;&#039;EOF&#039;
#!/bin/bash
WP_PATH=&quot;/var/www/html/example.com&quot;
SCAN_LOG=&quot;/var/log/wordpress-security-scan.log&quot;
DATE=$(date +%Y%m%d_%H%M%S)

cd ${WP_PATH}

log_message() {
    echo &quot;$(date &#039;+%Y-%m-%d %H:%M:%S&#039;) - $1&quot; | tee -a ${SCAN_LOG}
}

log_message &quot;Starting WordPress security scan...&quot;

# Check WordPress version
WP_VERSION=$(sudo -u www-data wp core version --quiet)
LATEST_VERSION=$(sudo -u www-data wp core check-update --format=csv --quiet | tail -1 | cut -d, -f2)

if [ &quot;${WP_VERSION}&quot; != &quot;${LATEST_VERSION}&quot; ] &amp;&amp; [ -n &quot;${LATEST_VERSION}&quot; ]; then
    log_message &quot;‚ö† WordPress is outdated (${WP_VERSION}), latest is ${LATEST_VERSION}&quot;
else
    log_message &quot;‚úì WordPress is up to date (${WP_VERSION})&quot;
fi

# Check for vulnerable plugins
sudo -u www-data wp plugin list --format=json &gt; /tmp/wp-plugins-${DATE}.json
while read -r plugin; do
    plugin_name=$(echo $plugin | jq -r .name)
    plugin_version=$(echo $plugin | jq -r .version)
    plugin_update=$(echo $plugin | jq -r .update)
    
    if [ &quot;$plugin_update&quot; != &quot;none&quot; ] &amp;&amp; [ &quot;$plugin_update&quot; != &quot;null&quot; ]; then
        log_message &quot;‚ö† Plugin update available: ${plugin_name} (${plugin_version})&quot;
    fi
done &lt; &lt;(jq -c &#039;.[]&#039; /tmp/wp-plugins-${DATE}.json)

# Check theme security
ACTIVE_THEME=$(sudo -u www-data wp theme status --format=json | jq -r &#039;.[] | select(.status==&quot;Active&quot;) | .name&#039;)
log_message &quot;‚Ñπ Active theme: ${ACTIVE_THEME}&quot;

# Check user accounts
USERS_WITH_ADMIN=$(sudo -u www-data wp user list --role=administrator --format=count --quiet)
log_message &quot;‚Ñπ ${USERS_WITH_ADMIN} administrator accounts&quot;

# Check for inactive plugins
INACTIVE_PLUGINS=$(sudo -u www-data wp plugin list --status=inactive --format=count --quiet)
if [ ${INACTIVE_PLUGINS} -gt 0 ]; then
    log_message &quot;‚Ñπ ${INACTIVE_PLUGINS} inactive plugins (consider removing)&quot;
fi

# Check database integrity
if sudo -u www-data wp db check --quiet &gt;/dev/null 2&gt;&amp;1; then
    log_message &quot;‚úì Database integrity check passed&quot;
else
    log_message &quot;‚ö† Database integrity issues detected&quot;
fi

# Check for spam content
SPAM_COMMENTS=$(sudo -u www-data wp comment list --status=spam --format=count --quiet)
if [ ${SPAM_COMMENTS} -gt 0 ]; then
    log_message &quot;‚Ñπ ${SPAM_COMMENTS} spam comments detected&quot;
fi

# Run Wordfence scan (if installed)
if sudo -u www-data wp plugin is-installed wordfence; then
    log_message &quot;Running Wordfence security scan...&quot;
    # Note: Wordfence CLI scanning requires premium
fi

# Check file changes (basic integrity)
find ${WP_PATH} -name &quot;*.php&quot; -newer ${WP_PATH}/wp-config.php | wc -l &gt; /tmp/changed_files_count
CHANGED_FILES=$(cat /tmp/changed_files_count)
if [ ${CHANGED_FILES} -gt 5 ]; then
    log_message &quot;‚ö† ${CHANGED_FILES} PHP files changed recently&quot;
fi

log_message &quot;WordPress security scan completed&quot;
EOF

sudo chmod +x /usr/local/bin/wordpress-security-scan.sh

# Schedule daily security scans
echo &quot;0 7 * * * root /usr/local/bin/wordpress-security-scan.sh&quot; | sudo tee -a /etc/crontab</code></pre>
      </div>
    </div>
<h2 id="troubleshooting-cross-platform" class="mobile-header">Troubleshooting (Cross-Platform)</h2>
<h3 id="common-issues-and-solutions" class="mobile-header">Common Issues and Solutions</h3>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">üìã</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash"># Check web server status
sudo systemctl status nginx    # or apache2/httpd
sudo systemctl status php8.2-fpm
sudo systemctl status mariadb

# Test database connection
mysql -u wpuser -p wordpress -e &quot;SELECT 1;&quot;

# Check PHP-FPM logs
sudo tail -f /var/log/php8.2-fpm.log

# WordPress debug mode
cd /var/www/html/example.com
sudo -u www-data wp config set WP_DEBUG true --raw
sudo -u www-data wp config set WP_DEBUG_LOG true --raw
sudo tail -f /var/www/html/example.com/wp-content/debug.log

# Check web server logs
sudo tail -f /var/log/nginx/error.log          # NGINX
sudo tail -f /var/log/apache2/error.log        # Apache

# Clear all caches
sudo -u www-data wp cache flush
sudo -u www-data wp redis flush
sudo -u www-data wp super-cache flush

# Reset file permissions
sudo /usr/local/bin/wordpress-permissions.sh

# Database repair
sudo -u www-data wp db repair

# Plugin conflict troubleshooting
sudo -u www-data wp plugin deactivate --all
sudo -u www-data wp plugin activate plugin-name

# Theme troubleshooting
sudo -u www-data wp theme activate twentytwentyfour

# Memory issues
sudo -u www-data wp config set WP_MEMORY_LIMIT 1024M --raw
free -h

# Check disk space
df -h /var/www/html/example.com
du -sh /var/www/html/example.com/wp-content/uploads/

# SSL issues
sudo certbot certificates
sudo nginx -t  # or apache2ctl configtest

# Performance debugging
sudo -u www-data wp profile hook --all
sudo -u www-data wp doctor check

# Database optimization
sudo -u www-data wp db optimize</code></pre>
      </div>
    </div>
<h3 id="advanced-debugging" class="mobile-header">Advanced Debugging</h3>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">üìã</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash"># Enable WordPress debugging
sudo -u www-data wp config set WP_DEBUG true --raw
sudo -u www-data wp config set WP_DEBUG_LOG true --raw
sudo -u www-data wp config set WP_DEBUG_DISPLAY false --raw
sudo -u www-data wp config set SCRIPT_DEBUG true --raw

# Query debugging
sudo -u www-data wp config set SAVEQUERIES true --raw

# Enable error logging
sudo tee -a /etc/php/8.2/fpm/php.ini &gt; /dev/null &lt;&lt;EOF
; WordPress debugging
log_errors = On
error_log = /var/log/php/wordpress-errors.log
display_errors = Off
display_startup_errors = Off
EOF

sudo systemctl restart php8.2-fpm

# Monitor real-time logs
tail -f /var/www/html/example.com/wp-content/debug.log
tail -f /var/log/php/wordpress-errors.log
tail -f /var/log/nginx/error.log

# Database query analysis
sudo -u www-data wp db query &quot;SHOW FULL PROCESSLIST;&quot;
sudo -u www-data wp db query &quot;SHOW STATUS LIKE &#039;Slow_queries&#039;;&quot;

# Memory profiling
sudo -u www-data wp eval &#039;echo &quot;Memory usage: &quot; . memory_get_usage(true) / 1024 / 1024 . &quot; MB\n&quot;;&#039;

# Plugin profiling
sudo -u www-data wp plugin list --status=active
sudo -u www-data wp eval &#039;foreach(get_option(&quot;active_plugins&quot;) as $p) { echo $p . &quot;\n&quot;; }&#039;

# Theme debugging
sudo -u www-data wp theme status
sudo -u www-data wp eval &#039;echo get_template_directory() . &quot;\n&quot;;&#039;</code></pre>
      </div>
    </div>
<h2 id="additional-resources" class="mobile-header">Additional Resources</h2>
<li class="mobile-list-item"><a href="https://wordpress.org/documentation/" target="_blank" rel="noopener" class="mobile-link">Official Documentation</a></li>
<li class="mobile-list-item"><a href="https://wp-cli.org/" target="_blank" rel="noopener" class="mobile-link">WP-CLI Documentation</a></li>
<li class="mobile-list-item"><a href="https://wordpress.org/support/article/hardening-wordpress/" target="_blank" rel="noopener" class="mobile-link">WordPress Security Guide</a></li>
<li class="mobile-list-item"><a href="https://wordpress.org/support/article/optimization/" target="_blank" rel="noopener" class="mobile-link">Performance Best Practices</a></li>
<li class="mobile-list-item"><a href="https://codex.wordpress.org/" target="_blank" rel="noopener" class="mobile-link">WordPress Codex</a></li>
<li class="mobile-list-item"><a href="https://www.wordfence.com/" target="_blank" rel="noopener" class="mobile-link">Security Plugin: Wordfence</a></li>
<p class="mobile-paragraph">---</p>
<p class="mobile-paragraph"><strong>Note:</strong> This guide is part of the <a href="https://howtomgr.github.io" target="_blank" rel="noopener" class="mobile-link">HowToMgr</a> collection.</p></div></article><section class="jsx-8a7f0cdcf94f52ce related-section"><h2 class="jsx-8a7f0cdcf94f52ce section-title">Related <!-- -->Productivity<!-- --> Guides</h2><div class="jsx-8a7f0cdcf94f52ce mobile-grid"><a class="mobile-card" href="/productivity/ghost/"><div class="jsx-8a7f0cdcf94f52ce mobile-card-header"><h3 class="jsx-8a7f0cdcf94f52ce mobile-card-title">Ghost</h3><p class="jsx-8a7f0cdcf94f52ce mobile-card-description">Repo for ghost</p></div><div class="jsx-8a7f0cdcf94f52ce mobile-card-meta"><span class="jsx-8a7f0cdcf94f52ce mobile-badge mobile-badge-info">1 min</span></div></a><a class="mobile-card" href="/productivity/nextcloud/"><div class="jsx-8a7f0cdcf94f52ce mobile-card-header"><h3 class="jsx-8a7f0cdcf94f52ce mobile-card-title">Nextcloud</h3><p class="jsx-8a7f0cdcf94f52ce mobile-card-description">Repo for nextcloud</p></div><div class="jsx-8a7f0cdcf94f52ce mobile-card-meta"><span class="jsx-8a7f0cdcf94f52ce mobile-badge mobile-badge-info">12 min</span></div></a></div></section><nav class="jsx-8a7f0cdcf94f52ce guide-navigation"><a class="btn btn-secondary" href="/productivity/">‚Üê All <!-- -->Productivity</a><a class="btn btn-secondary" href="/">All Categories</a></nav></div></main><footer class="jsx-f92e766e9414ef16 mobile-footer"><div class="jsx-f92e766e9414ef16 container"><div class="jsx-f92e766e9414ef16 footer-content"><div class="jsx-f92e766e9414ef16 footer-links"><a href="/">Home</a><a href="https://github.com/howtomgr" target="_blank" rel="noopener" class="jsx-f92e766e9414ef16">GitHub</a><a href="https://github.com/howtomgr/howtomgr.github.io" target="_blank" rel="noopener" class="jsx-f92e766e9414ef16">Source</a></div><div class="jsx-f92e766e9414ef16 footer-separator"></div><p class="jsx-f92e766e9414ef16 footer-text">¬© <!-- -->2025<!-- --> HowToMgr Organization. Open source installation guides.</p><p class="jsx-f92e766e9414ef16 footer-tech">Built with ‚ù§Ô∏è using Next.js + GitHub Pages</p><p class="jsx-f92e766e9414ef16 footer-disclaimer"><small class="jsx-f92e766e9414ef16">All guides are provided as-is. Please review and test before production use.</small></p></div></div></footer></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"guide":{"name":"wordpress","displayName":"Wordpress","slug":"wordpress","description":"Repo for wordpress","category":"productivity","language":null,"stars":0,"forks":0,"topics":[],"githubUrl":"https://github.com/howtomgr/wordpress","updatedAt":"2025-09-14T01:31:24Z","createdAt":"2025-09-08T03:18:29Z","readmeRaw":"# WordPress Installation Guide\n\nWorld's most popular content management system (CMS) powering over 40% of websites globally. Complete guide for secure, high-performance WordPress deployment with modern stack configurations.\n\n## Prerequisites\n\n- Linux system (any modern distribution)\n- 2GB RAM minimum, 4GB+ recommended for production\n- Web server (NGINX recommended, Apache supported)\n- PHP 8.1+ (8.2+ recommended)\n- MySQL 8.0+ or MariaDB 10.6+ \n- SSL certificate for HTTPS\n- Domain name for production deployment\n\n## Installation Methods\n\n### LEMP Stack (Recommended for 2024)\n\n#### Ubuntu/Debian LEMP Setup\n```bash\n# Update system\nsudo apt update \u0026\u0026 sudo apt upgrade -y\n\n# Install NGINX\nsudo apt install -y nginx\n\n# Install MySQL/MariaDB\nsudo apt install -y mariadb-server mariadb-client\n\n# Install PHP 8.2 and essential extensions\nsudo apt install -y php8.2-fpm php8.2-mysql php8.2-curl php8.2-gd php8.2-mbstring php8.2-xml php8.2-xmlrpc php8.2-soap php8.2-intl php8.2-zip php8.2-bcmath php8.2-imagick php8.2-cli php8.2-dev php8.2-imap php8.2-opcache\n\n# Install additional performance tools\nsudo apt install -y redis-server memcached unzip curl wget\n\n# Enable and start services\nsudo systemctl enable --now nginx mariadb php8.2-fpm redis-server\n\n# Secure MySQL installation\nsudo mysql_secure_installation\n\n# Configure firewall\nsudo ufw allow 'Nginx Full'\nsudo ufw allow OpenSSH\nsudo ufw enable\n```\n\n#### RHEL/CentOS/Rocky Linux LEMP Setup\n```bash\n# Install EPEL and Remi repositories\nsudo yum install -y epel-release\nsudo yum install -y https://rpms.remirepo.net/enterprise/remi-release-9.rpm\n\n# Enable PHP 8.2 repository\nsudo yum-config-manager --enable remi-php82\n\n# Install NGINX\nsudo yum install -y nginx\n\n# Install MariaDB\nsudo yum install -y mariadb-server mariadb\n\n# Install PHP and extensions\nsudo yum install -y php php-fpm php-mysql php-curl php-gd php-mbstring php-xml php-xmlrpc php-soap php-intl php-zip php-bcmath php-imagick php-opcache php-redis\n\n# Install Redis\nsudo yum install -y redis\n\n# Enable and start services\nsudo systemctl enable --now nginx mariadb php-fpm redis\n\n# Configure firewall\nsudo firewall-cmd --permanent --add-service=http\nsudo firewall-cmd --permanent --add-service=https\nsudo firewall-cmd --reload\n\n# Secure MySQL\nsudo mysql_secure_installation\n```\n\n#### Fedora LEMP Setup\n```bash\n# Install NGINX, MariaDB, PHP, and Redis\nsudo dnf install -y nginx mariadb-server mariadb php php-fpm php-mysql php-curl php-gd php-mbstring php-xml php-xmlrpc php-soap php-intl php-zip php-opcache php-redis redis\n\n# Enable and start services\nsudo systemctl enable --now nginx mariadb php-fpm redis\n\n# Configure firewall\nsudo firewall-cmd --permanent --add-service=http\nsudo firewall-cmd --permanent --add-service=https\nsudo firewall-cmd --reload\n\n# Secure MySQL\nsudo mysql_secure_installation\n```\n\n### LAMP Stack (Alternative)\n\n#### Ubuntu/Debian LAMP Setup\n```bash\n# Install Apache, MySQL, PHP\nsudo apt update\nsudo apt install -y apache2 mariadb-server php8.2 php8.2-mysql php8.2-curl php8.2-gd php8.2-mbstring php8.2-xml php8.2-xmlrpc php8.2-soap php8.2-intl php8.2-zip php8.2-opcache libapache2-mod-php8.2\n\n# Enable Apache modules\nsudo a2enmod rewrite ssl headers deflate expires\n\n# Enable and start services\nsudo systemctl enable --now apache2 mariadb\n\n# Configure firewall\nsudo ufw allow 'Apache Full'\nsudo ufw enable\n\n# Secure MySQL\nsudo mysql_secure_installation\n```\n\n### Database Setup (Universal)\n```bash\n# Create WordPress database and user\nsudo mysql -u root -p \u003c\u003cEOF\nCREATE DATABASE wordpress DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;\nCREATE USER 'wpuser'@'localhost' IDENTIFIED BY 'secure_wp_password_2024';\nGRANT ALL PRIVILEGES ON wordpress.* TO 'wpuser'@'localhost';\nFLUSH PRIVILEGES;\n\n-- Optimize MySQL for WordPress\nSET GLOBAL innodb_buffer_pool_size = 1073741824;  -- 1GB\nSET GLOBAL query_cache_size = 67108864;           -- 64MB\nSET GLOBAL query_cache_limit = 2097152;           -- 2MB\nEXIT\nEOF\n\n# Apply permanent MySQL optimizations\nsudo tee /etc/mysql/mysql.conf.d/wordpress.cnf \u003e /dev/null \u003c\u003cEOF\n[mysqld]\n# WordPress optimizations\ninnodb_buffer_pool_size = 1G\ninnodb_log_file_size = 256M\ninnodb_file_per_table = 1\ninnodb_flush_log_at_trx_commit = 2\ninnodb_flush_method = O_DIRECT\n\n# Query cache\nquery_cache_type = 1\nquery_cache_size = 64M\nquery_cache_limit = 2M\n\n# Connection optimization\nmax_connections = 200\nthread_cache_size = 100\ntable_open_cache = 4096\ntmp_table_size = 32M\nmax_heap_table_size = 32M\n\n# Slow query log\nslow_query_log = 1\nlong_query_time = 2\nslow_query_log_file = /var/log/mysql/slow.log\nEOF\n\nsudo systemctl restart mariadb\n```\n\n## WordPress Installation\n\n### Download and Setup WordPress\n```bash\n# Download latest WordPress\ncd /tmp\nwget https://wordpress.org/latest.tar.gz\ntar xzf latest.tar.gz\n\n# Create web directory and copy files\nsudo mkdir -p /var/www/html/example.com\nsudo cp -R /tmp/wordpress/* /var/www/html/example.com/\n\n# Set proper ownership and permissions\n# For NGINX (Ubuntu/Debian)\nsudo chown -R www-data:www-data /var/www/html/example.com\n# For NGINX (RHEL/CentOS)\nsudo chown -R nginx:nginx /var/www/html/example.com\n# For Apache\nsudo chown -R www-data:www-data /var/www/html/example.com  # Ubuntu/Debian\nsudo chown -R apache:apache /var/www/html/example.com      # RHEL/CentOS\n\n# Secure file permissions\nsudo find /var/www/html/example.com/ -type d -exec chmod 755 {} \\;\nsudo find /var/www/html/example.com/ -type f -exec chmod 644 {} \\;\nsudo chmod 600 /var/www/html/example.com/wp-config.php\n\n# Create uploads directory with proper permissions\nsudo mkdir -p /var/www/html/example.com/wp-content/uploads\nsudo chmod 775 /var/www/html/example.com/wp-content/uploads\n```\n\n### Secure WordPress Configuration\n```bash\n# Create secure wp-config.php\ncd /var/www/html/example.com\nsudo cp wp-config-sample.php wp-config.php\n\n# Generate security keys\nSALT_KEYS=$(curl -s https://api.wordpress.org/secret-key/1.1/salt/)\n\n# Create wp-config.php with security hardening\nsudo tee wp-config.php \u003e /dev/null \u003c\u003cEOF\n\u003c?php\n/**\n * WordPress Configuration File - Security Hardened\n */\n\n// ** Database settings ** //\ndefine('DB_NAME', 'wordpress');\ndefine('DB_USER', 'wpuser');\ndefine('DB_PASSWORD', 'secure_wp_password_2024');\ndefine('DB_HOST', '127.0.0.1');  // Use 127.0.0.1 instead of localhost\ndefine('DB_CHARSET', 'utf8mb4');\ndefine('DB_COLLATE', '');\n\n// ** Authentication Unique Keys and Salts ** //\n${SALT_KEYS}\n\n// ** WordPress Database Table prefix ** //\n\\$table_prefix = 'wp_secure_';\n\n// ** Security hardening ** //\ndefine('WP_DEBUG', false);\ndefine('WP_DEBUG_LOG', false);\ndefine('WP_DEBUG_DISPLAY', false);\n\n// Disable file editing\ndefine('DISALLOW_FILE_EDIT', true);\ndefine('DISALLOW_FILE_MODS', true);\n\n// Force SSL\ndefine('FORCE_SSL_ADMIN', true);\n\n// Automatic updates\ndefine('WP_AUTO_UPDATE_CORE', 'minor');\ndefine('AUTOMATIC_UPDATER_DISABLED', false);\n\n// Memory limit\ndefine('WP_MEMORY_LIMIT', '512M');\n\n// Multisite (if needed)\n// define('WP_ALLOW_MULTISITE', true);\n\n// Custom content directory (optional)\ndefine('WP_CONTENT_DIR', '/var/www/html/example.com/wp-content');\ndefine('WP_CONTENT_URL', 'https://example.com/wp-content');\n\n// Database repair\ndefine('WP_ALLOW_REPAIR', false);\n\n// Cron optimization\ndefine('DISABLE_WP_CRON', true);  // Use system cron instead\n\n// Security headers\ndefine('COOKIE_DOMAIN', '.example.com');\ndefine('COOKIEHASH', md5('example.com'));\n\n// File permissions\ndefine('FS_CHMOD_DIR', (0755 \u0026 ~ umask()));\ndefine('FS_CHMOD_FILE', (0644 \u0026 ~ umask()));\n\n// Redis cache configuration\ndefine('WP_REDIS_HOST', '127.0.0.1');\ndefine('WP_REDIS_PORT', 6379);\ndefine('WP_REDIS_DATABASE', 0);\ndefine('WP_REDIS_TIMEOUT', 1);\ndefine('WP_REDIS_READ_TIMEOUT', 1);\n\n// Rate limiting\ndefine('WP_POST_REVISIONS', 5);\ndefine('AUTOSAVE_INTERVAL', 300);  // 5 minutes\ndefine('EMPTY_TRASH_DAYS', 7);\n\n/* That's all, stop editing! */\nif (!defined('ABSPATH')) {\n    define('ABSPATH', dirname(__FILE__) . '/');\n}\n\nrequire_once ABSPATH . 'wp-settings.php';\nEOF\n\nsudo chown www-data:www-data wp-config.php  # Adjust user as needed\nsudo chmod 600 wp-config.php\n```\n\n## Web Server Configuration\n\n### NGINX Configuration (Recommended)\n```bash\n# Create optimized NGINX configuration for WordPress\nsudo tee /etc/nginx/sites-available/wordpress.conf \u003e /dev/null \u003c\u003cEOF\n# WordPress NGINX Configuration - 2024 Security Hardened\n\n# Rate limiting\nlimit_req_zone \\$binary_remote_addr zone=wp_login:10m rate=1r/s;\nlimit_req_zone \\$binary_remote_addr zone=wp_admin:10m rate=5r/m;\n\n# HTTP to HTTPS redirect\nserver {\n    listen 80;\n    listen [::]:80;\n    server_name example.com www.example.com;\n    return 301 https://example.com\\$request_uri;\n}\n\n# HTTPS Server\nserver {\n    listen 443 ssl http2;\n    listen [::]:443 ssl http2;\n    server_name example.com www.example.com;\n    root /var/www/html/example.com;\n    index index.php index.html index.htm;\n\n    # SSL Configuration (2024 best practices)\n    ssl_certificate /etc/letsencrypt/live/example.com/fullchain.pem;\n    ssl_certificate_key /etc/letsencrypt/live/example.com/privkey.pem;\n    ssl_trusted_certificate /etc/letsencrypt/live/example.com/chain.pem;\n    \n    ssl_protocols TLSv1.2 TLSv1.3;\n    ssl_ciphers ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384;\n    ssl_prefer_server_ciphers off;\n    ssl_session_cache shared:SSL:50m;\n    ssl_session_timeout 1d;\n    ssl_session_tickets off;\n\n    # Security headers (2024 standards)\n    add_header Strict-Transport-Security \"max-age=31536000; includeSubDomains; preload\" always;\n    add_header X-Frame-Options \"SAMEORIGIN\" always;\n    add_header X-Content-Type-Options \"nosniff\" always;\n    add_header X-XSS-Protection \"1; mode=block\" always;\n    add_header Referrer-Policy \"strict-origin-when-cross-origin\" always;\n    add_header Content-Security-Policy \"default-src 'self'; script-src 'self' 'unsafe-inline' 'unsafe-eval' *.googleapis.com *.gstatic.com; style-src 'self' 'unsafe-inline' *.googleapis.com; img-src 'self' data: https:; font-src 'self' data: *.gstatic.com; connect-src 'self'; media-src 'self'; object-src 'none'; child-src 'self'; form-action 'self'; base-uri 'self';\" always;\n    add_header Permissions-Policy \"camera=(), microphone=(), geolocation=()\" always;\n\n    # Hide server information\n    server_tokens off;\n    more_set_headers \"Server: \";\n\n    # Upload size limits\n    client_max_body_size 64M;\n\n    # FastCGI caching\n    set \\$skip_cache 0;\n    if (\\$request_method = POST) { set \\$skip_cache 1; }\n    if (\\$query_string != \"\") { set \\$skip_cache 1; }\n    if (\\$request_uri ~* \"/wp-admin/|/xmlrpc.php|wp-.*.php|/feed/|index.php|sitemap(_index)?.xml\") { set \\$skip_cache 1; }\n    if (\\$http_cookie ~* \"comment_author|wordpress_[a-f0-9]+|wp-postpass|wordpress_no_cache|wordpress_logged_in\") { set \\$skip_cache 1; }\n\n    # Main location block\n    location / {\n        try_files \\$uri \\$uri/ /index.php?\\$args;\n    }\n\n    # WordPress-specific security rules\n    location ~ /\\. {\n        deny all;\n        access_log off;\n        log_not_found off;\n    }\n\n    # Protect wp-config.php\n    location ~* wp-config\\.php {\n        deny all;\n    }\n\n    # Disable execution of PHP in uploads\n    location ~* /(?:uploads|files)/.*\\.php\\$ {\n        deny all;\n    }\n\n    # Block access to sensitive files\n    location ~* \\.(htaccess|htpasswd|ini|log|sh|sql|conf|bak|backup|swp|tmp)\\$ {\n        deny all;\n    }\n\n    # WordPress: deny wp-content, wp-includes php files\n    location ~* ^/(wp-content|wp-includes)/.*\\.php\\$ {\n        deny all;\n    }\n\n    # WordPress: deny general stuff\n    location ~* ^/(readme|license|example|README|INSTALL|CHANGELOG)\\.(txt|md)\\$ {\n        deny all;\n    }\n\n    # Block WordPress brute force attacks\n    location ~* /(wp-login\\.php|wp-admin/).*\\$ {\n        limit_req zone=wp_login burst=1 nodelay;\n        limit_req zone=wp_admin burst=5 nodelay;\n        \n        # IP whitelist for admin (replace with your IPs)\n        # allow 192.168.1.100;\n        # allow 10.0.0.0/8;\n        # deny all;\n        \n        include snippets/fastcgi-php.conf;\n        fastcgi_pass unix:/var/run/php/php8.2-fpm.sock;\n    }\n\n    # PHP processing with caching\n    location ~ \\.php\\$ {\n        include snippets/fastcgi-php.conf;\n        fastcgi_pass unix:/var/run/php/php8.2-fpm.sock;\n        fastcgi_param SCRIPT_FILENAME \\$document_root\\$fastcgi_script_name;\n        include fastcgi_params;\n        \n        # FastCGI caching\n        fastcgi_cache_bypass \\$skip_cache;\n        fastcgi_no_cache \\$skip_cache;\n        fastcgi_cache WORDPRESS;\n        fastcgi_cache_valid 60m;\n        \n        # Security\n        fastcgi_hide_header X-Powered-By;\n    }\n\n    # Static assets optimization\n    location ~* \\.(js|css|png|jpg|jpeg|gif|ico|svg|woff|woff2|ttf|eot|webp|avif)\\$ {\n        expires 1y;\n        add_header Cache-Control \"public, immutable\";\n        add_header Vary \"Accept-Encoding\";\n        access_log off;\n        \n        # CORS for fonts\n        location ~* \\.(woff|woff2|ttf|eot)\\$ {\n            add_header Access-Control-Allow-Origin *;\n        }\n    }\n\n    # XML files (sitemaps, feeds)\n    location ~* \\.(xml|txt)\\$ {\n        expires 1h;\n        add_header Cache-Control \"public\";\n    }\n\n    # Block xmlrpc.php\n    location = /xmlrpc.php {\n        deny all;\n        access_log off;\n        log_not_found off;\n    }\n\n    # WordPress REST API rate limiting\n    location ~* /wp-json/ {\n        limit_req zone=wp_admin burst=10 nodelay;\n        try_files \\$uri \\$uri/ /index.php?\\$args;\n    }\n\n    # Favicon and robots.txt\n    location = /favicon.ico {\n        log_not_found off;\n        access_log off;\n        expires 1y;\n    }\n\n    location = /robots.txt {\n        allow all;\n        log_not_found off;\n        access_log off;\n        expires 1h;\n    }\n\n    # Security.txt\n    location = /.well-known/security.txt {\n        return 301 \\$scheme://\\$server_name/.well-known/security.txt;\n    }\n}\n\n# WWW to non-WWW redirect\nserver {\n    listen 443 ssl http2;\n    listen [::]:443 ssl http2;\n    server_name www.example.com;\n    \n    ssl_certificate /etc/letsencrypt/live/example.com/fullchain.pem;\n    ssl_certificate_key /etc/letsencrypt/live/example.com/privkey.pem;\n    \n    return 301 https://example.com\\$request_uri;\n}\nEOF\n\n# Create FastCGI cache directory\nsudo mkdir -p /var/cache/nginx/wordpress\nsudo chown -R www-data:www-data /var/cache/nginx\n\n# Add FastCGI cache configuration\nsudo tee /etc/nginx/conf.d/fastcgi-cache.conf \u003e /dev/null \u003c\u003cEOF\n# FastCGI cache configuration for WordPress\nfastcgi_cache_path /var/cache/nginx/wordpress levels=1:2 keys_zone=WORDPRESS:100m inactive=60m;\nfastcgi_cache_key \"\\$scheme\\$request_method\\$host\\$request_uri\";\nfastcgi_cache_use_stale error timeout invalid_header http_500;\nfastcgi_ignore_headers Cache-Control Expires Set-Cookie;\nEOF\n\n# Enable site and restart NGINX\nsudo ln -s /etc/nginx/sites-available/wordpress.conf /etc/nginx/sites-enabled/\nsudo nginx -t \u0026\u0026 sudo systemctl restart nginx\n```\n\n### Apache Configuration (Alternative)\n```bash\n# Create secure Apache virtual host\nsudo tee /etc/apache2/sites-available/wordpress.conf \u003e /dev/null \u003c\u003cEOF\n\u003cVirtualHost *:80\u003e\n    ServerName example.com\n    ServerAlias www.example.com\n    Redirect permanent / https://example.com/\n\u003c/VirtualHost\u003e\n\n\u003cVirtualHost *:443\u003e\n    ServerName example.com\n    ServerAlias www.example.com\n    DocumentRoot /var/www/html/example.com\n    \n    # SSL Configuration\n    SSLEngine on\n    SSLCertificateFile /etc/letsencrypt/live/example.com/fullchain.pem\n    SSLCertificateKeyFile /etc/letsencrypt/live/example.com/privkey.pem\n    SSLProtocol all -SSLv3 -TLSv1 -TLSv1.1\n    SSLCipherSuite ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256\n    SSLHonorCipherOrder off\n    \n    # Security headers\n    Header always set Strict-Transport-Security \"max-age=31536000; includeSubDomains; preload\"\n    Header always set X-Frame-Options \"SAMEORIGIN\"\n    Header always set X-Content-Type-Options \"nosniff\"\n    Header always set X-XSS-Protection \"1; mode=block\"\n    Header always set Referrer-Policy \"strict-origin-when-cross-origin\"\n    \n    # Hide server information\n    Header always unset Server\n    Header always unset X-Powered-By\n\n    \u003cDirectory /var/www/html/example.com\u003e\n        Options -Indexes +FollowSymLinks\n        AllowOverride All\n        Require all granted\n        \n        # WordPress security\n        \u003cFiles wp-config.php\u003e\n            Require all denied\n        \u003c/Files\u003e\n        \n        \u003cFiles .htaccess\u003e\n            Require all denied\n        \u003c/Files\u003e\n        \n        \u003cFiles readme.html\u003e\n            Require all denied\n        \u003c/Files\u003e\n        \n        \u003cFiles license.txt\u003e\n            Require all denied\n        \u003c/Files\u003e\n    \u003c/Directory\u003e\n\n    # Disable execution in uploads\n    \u003cDirectory /var/www/html/example.com/wp-content/uploads\u003e\n        \u003cFiles \"*.php\"\u003e\n            Require all denied\n        \u003c/Files\u003e\n    \u003c/Directory\u003e\n\n    # Rate limiting with mod_evasive\n    \u003cIfModule mod_evasive24.c\u003e\n        DOSHashTableSize    1024\n        DOSPageCount        2\n        DOSSiteCount        50\n        DOSPageInterval     1\n        DOSSiteInterval     1\n        DOSBlockingPeriod   600\n        DOSEmailNotify      admin@example.com\n    \u003c/IfModule\u003e\n\n    # Compression\n    \u003cIfModule mod_deflate.c\u003e\n        SetOutputFilter DEFLATE\n        AddOutputFilterByType DEFLATE text/html text/css text/javascript text/xml text/plain application/javascript application/xml+rss application/xml application/x-javascript application/json\n        \n        # Don't compress images\n        SetEnvIfNoCase Request_URI \\.(?:gif|jpe?g|png|webp)$ no-gzip dont-vary\n        SetEnvIfNoCase Request_URI \\.(?:exe|t?gz|zip|bz2|sit|rar)$ no-gzip dont-vary\n    \u003c/IfModule\u003e\n\n    # Caching\n    \u003cIfModule mod_expires.c\u003e\n        ExpiresActive On\n        ExpiresByType image/jpg \"access plus 1 year\"\n        ExpiresByType image/jpeg \"access plus 1 year\"\n        ExpiresByType image/gif \"access plus 1 year\"\n        ExpiresByType image/png \"access plus 1 year\"\n        ExpiresByType image/webp \"access plus 1 year\"\n        ExpiresByType text/css \"access plus 1 month\"\n        ExpiresByType application/pdf \"access plus 1 month\"\n        ExpiresByType text/javascript \"access plus 1 month\"\n        ExpiresByType application/javascript \"access plus 1 month\"\n        ExpiresDefault \"access plus 1 week\"\n    \u003c/IfModule\u003e\n\n    ErrorLog \\${APACHE_LOG_DIR}/wordpress_error.log\n    CustomLog \\${APACHE_LOG_DIR}/wordpress_access.log combined\n\u003c/VirtualHost\u003e\nEOF\n\n# Enable modules and site\nsudo a2enmod ssl headers expires deflate rewrite\nsudo a2ensite wordpress.conf\nsudo a2dissite 000-default\nsudo systemctl restart apache2\n```\n\n## PHP Configuration and Optimization\n\n### PHP 8.2 Optimization\n```bash\n# Configure PHP-FPM for optimal WordPress performance\nsudo tee /etc/php/8.2/fpm/pool.d/wordpress.conf \u003e /dev/null \u003c\u003cEOF\n[wordpress]\nuser = www-data\ngroup = www-data\nlisten = /var/run/php/php8.2-fpm-wordpress.sock\nlisten.owner = www-data\nlisten.group = www-data\nlisten.mode = 0660\n\n# Process management\npm = dynamic\npm.max_children = 50\npm.start_servers = 5\npm.min_spare_servers = 5\npm.max_spare_servers = 35\npm.max_requests = 1000\npm.process_idle_timeout = 10s\n\n# Resource limits\nphp_admin_value[memory_limit] = 512M\nphp_admin_value[upload_max_filesize] = 64M\nphp_admin_value[post_max_size] = 64M\nphp_admin_value[max_execution_time] = 300\nphp_admin_value[max_input_time] = 300\nphp_admin_value[max_input_vars] = 3000\n\n# Security settings\nphp_admin_flag[allow_url_fopen] = off\nphp_admin_flag[allow_url_include] = off\nphp_admin_flag[file_uploads] = on\nphp_admin_flag[expose_php] = off\nphp_admin_flag[log_errors] = on\nphp_admin_value[error_log] = /var/log/php/wordpress-error.log\n\n# OPcache settings\nphp_admin_flag[opcache.enable] = on\nphp_admin_value[opcache.memory_consumption] = 256\nphp_admin_value[opcache.interned_strings_buffer] = 16\nphp_admin_value[opcache.max_accelerated_files] = 10000\nphp_admin_value[opcache.revalidate_freq] = 2\nphp_admin_flag[opcache.save_comments] = on\nphp_admin_flag[opcache.fast_shutdown] = on\n\n# Session settings\nphp_admin_value[session.save_handler] = redis\nphp_admin_value[session.save_path] = \"tcp://127.0.0.1:6379\"\nphp_admin_value[session.gc_maxlifetime] = 1440\nEOF\n\n# Create PHP error log directory\nsudo mkdir -p /var/log/php\nsudo chown www-data:www-data /var/log/php\n\n# Configure main PHP settings\nsudo tee -a /etc/php/8.2/fpm/php.ini \u003e /dev/null \u003c\u003cEOF\n\n; WordPress optimizations\nmax_execution_time = 300\nmax_input_time = 300\nmemory_limit = 512M\nupload_max_filesize = 64M\npost_max_size = 64M\nmax_input_vars = 3000\n\n; Security\nexpose_php = Off\nallow_url_fopen = Off\nallow_url_include = Off\ndisplay_errors = Off\nlog_errors = On\nerror_log = /var/log/php/error.log\n\n; Session security\nsession.cookie_httponly = On\nsession.cookie_secure = On\nsession.use_strict_mode = On\n\n; OPcache\nopcache.enable = 1\nopcache.memory_consumption = 256\nopcache.interned_strings_buffer = 16\nopcache.max_accelerated_files = 10000\nopcache.revalidate_freq = 2\nopcache.save_comments = 1\nopcache.fast_shutdown = 1\nopcache.validate_timestamps = 0  ; Production only\n\n; Redis\nextension = redis\n\n; Date/time\ndate.timezone = \"America/New_York\"\nEOF\n\nsudo systemctl restart php8.2-fpm\n```\n\n### Redis Object Caching Setup\n```bash\n# Configure Redis for WordPress\nsudo tee -a /etc/redis/redis.conf \u003e /dev/null \u003c\u003cEOF\n\n# WordPress optimizations\nmaxmemory 512mb\nmaxmemory-policy allkeys-lru\nsave 900 1\nsave 300 10\nsave 60 10000\n\n# Security\nbind 127.0.0.1\nprotected-mode yes\nport 6379\ntcp-backlog 511\n\n# Logging\nloglevel notice\nlogfile /var/log/redis/redis-server.log\n\n# Persistence\nrdbcompression yes\nrdbchecksum yes\nEOF\n\nsudo systemctl restart redis-server\n```\n\n## WordPress CLI (WP-CLI) Installation and Configuration\n\n### WP-CLI Setup\n```bash\n# Download and install WP-CLI\ncurl -O https://raw.githubusercontent.com/wp-cli/builds/gh-pages/phar/wp-cli.phar\nchmod +x wp-cli.phar\nsudo mv wp-cli.phar /usr/local/bin/wp\n\n# Create WP-CLI configuration\nsudo tee /var/www/html/example.com/wp-cli.yml \u003e /dev/null \u003c\u003cEOF\n# WP-CLI configuration\npath: /var/www/html/example.com\n\ncore config:\n  dbhost: 127.0.0.1\n  dbname: wordpress\n  dbuser: wpuser\n  dbpass: secure_wp_password_2024\n  extra-php: |\n    define('WP_DEBUG', false);\n    define('WP_DEBUG_LOG', false);\n    define('DISALLOW_FILE_EDIT', true);\n    define('FORCE_SSL_ADMIN', true);\n    define('WP_REDIS_HOST', '127.0.0.1');\n\nserver:\n  docroot: /var/www/html/example.com\nEOF\n\n# Install WordPress via WP-CLI\ncd /var/www/html/example.com\nsudo -u www-data wp core download --force\nsudo -u www-data wp config create \\\n  --dbname=wordpress \\\n  --dbuser=wpuser \\\n  --dbpass=secure_wp_password_2024 \\\n  --dbhost=127.0.0.1\n\nsudo -u www-data wp core install \\\n  --url=https://example.com \\\n  --title=\"Secure WordPress Site\" \\\n  --admin_user=admin \\\n  --admin_password=secure_admin_password_2024 \\\n  --admin_email=admin@example.com \\\n  --skip-email\n\n# Essential security plugins\nsudo -u www-data wp plugin install wordfence --activate\nsudo -u www-data wp plugin install redis-cache --activate\nsudo -u www-data wp plugin install wp-super-cache --activate\nsudo -u www-data wp plugin install updraftplus --activate\n\n# Performance plugins\nsudo -u www-data wp plugin install autoptimize --activate\nsudo -u www-data wp plugin install smush --activate\n\n# Enable Redis cache\nsudo -u www-data wp redis enable\n\n# Configure security settings\nsudo -u www-data wp config set FORCE_SSL_ADMIN true --raw\nsudo -u www-data wp config set DISALLOW_FILE_EDIT true --raw\nsudo -u www-data wp config set WP_AUTO_UPDATE_CORE minor --raw\n```\n\n## Security Hardening\n\n### File System Security\n```bash\n# Create secure file permissions script\nsudo tee /usr/local/bin/wordpress-permissions.sh \u003e /dev/null \u003c\u003c'EOF'\n#!/bin/bash\nWP_PATH=\"/var/www/html/example.com\"\nWP_USER=\"www-data\"\nWP_GROUP=\"www-data\"\n\n# Set directory permissions\nfind ${WP_PATH}/ -type d -exec chmod 755 {} \\;\n\n# Set file permissions\nfind ${WP_PATH}/ -type f -exec chmod 644 {} \\;\n\n# Secure wp-config.php\nchmod 600 ${WP_PATH}/wp-config.php\n\n# Secure .htaccess\nif [ -f ${WP_PATH}/.htaccess ]; then\n    chmod 644 ${WP_PATH}/.htaccess\nfi\n\n# Set ownership\nchown -R ${WP_USER}:${WP_GROUP} ${WP_PATH}/\n\n# Secure directories\nchmod 755 ${WP_PATH}/wp-content/\nchmod 755 ${WP_PATH}/wp-content/themes/\nchmod 755 ${WP_PATH}/wp-content/plugins/\nchmod 775 ${WP_PATH}/wp-content/uploads/\n\n# Create .htaccess for uploads security (Apache)\ncat \u003e ${WP_PATH}/wp-content/uploads/.htaccess \u003c\u003cEOL\n# Disable PHP execution in uploads directory\n\u003cFiles \"*.php\"\u003e\n    Order Deny,Allow\n    Deny from All\n\u003c/Files\u003e\n\n# Disable directory browsing\nOptions -Indexes\n\n# Deny access to sensitive files\n\u003cFilesMatch \"\\.(htaccess|htpasswd|ini|log|sh|inc|bak)$\"\u003e\n    Order Allow,Deny\n    Deny from all\n\u003c/FilesMatch\u003e\nEOL\n\necho \"WordPress file permissions have been secured\"\nEOF\n\nsudo chmod +x /usr/local/bin/wordpress-permissions.sh\nsudo /usr/local/bin/wordpress-permissions.sh\n```\n\n### WordPress Security Configuration\n```bash\n# Create comprehensive .htaccess for security (Apache)\nsudo tee /var/www/html/example.com/.htaccess \u003e /dev/null \u003c\u003cEOF\n# WordPress Security .htaccess - 2024\n\n# Block access to wp-config.php\n\u003cFiles wp-config.php\u003e\n    Order Allow,Deny\n    Deny from All\n\u003c/Files\u003e\n\n# Block access to readme.html, license.txt, etc.\n\u003cFilesMatch \"^(readme\\.html|license\\.txt|wp-config\\.php|\\.htaccess|\\.htpasswd)\"\u003e\n    Order Allow,Deny\n    Deny from All\n\u003c/FilesMatch\u003e\n\n# Prevent script injections\nOptions +FollowSymLinks\nRewriteEngine On\nRewriteCond %{QUERY_STRING} (\u003c|%3C).*script.*(\u003e|%3E) [NC,OR]\nRewriteCond %{QUERY_STRING} GLOBALS(=|[|%[0-9A-Z]{0,2}) [OR]\nRewriteCond %{QUERY_STRING} _REQUEST(=|[|%[0-9A-Z]{0,2}) [OR]\nRewriteCond %{QUERY_STRING} ^.*(\\[|\\]|\\(|\\)|\u003c|\u003e|√™|\"|;|\\?|\\*|\\$|=) [NC,OR]\nRewriteCond %{QUERY_STRING} (NULL|OUTFILE|LOAD_FILE) [OR]\nRewriteCond %{QUERY_STRING} (\\.{1,}/)+(motd|etc|bin) [NC,OR]\nRewriteCond %{QUERY_STRING} (localhost|loopback|127\\.0\\.0\\.1) [NC,OR]\nRewriteCond %{QUERY_STRING} (\u003c|\u003e|'|%0A|%0D|%27|%3C|%3E|%00) [NC,OR]\nRewriteCond %{QUERY_STRING} concat[^\\(]*\\( [NC,OR]\nRewriteCond %{QUERY_STRING} union([^s]*s)+elect [NC,OR]\nRewriteCond %{QUERY_STRING} union([^a]*a)+ll([^s]*s)+elect [NC,OR]\nRewriteCond %{QUERY_STRING} \\-[sdcr].*(allow_url_include|allow_url_fopen|safe_mode|disable_functions|auto_prepend_file) [NC,OR]\nRewriteCond %{QUERY_STRING} (;|\u003c|\u003e|'|\"|\\)|%0A|%0D|%22|%27|%3C|%3E|%00).*(/\\*|union|select|insert|drop|delete|update|cast|create|char|convert|alter|declare|or|;|\\)|script|\\\u003c|\\\u003e|\\\u0026|\\|\\|) [NC]\nRewriteRule ^(.*)$ index.php [F,L]\n\n# Block XML-RPC\n\u003cFiles xmlrpc.php\u003e\n    Order Allow,Deny\n    Deny from All\n\u003c/Files\u003e\n\n# Limit login attempts\n\u003cFilesMatch \"wp-login.php\"\u003e\n    Order Allow,Deny\n    Allow from all\n    # Add your IP for admin access\n    # Allow from 192.168.1.100\n\u003c/FilesMatch\u003e\n\n# Disable directory browsing\nOptions -Indexes\n\n# Protect includes directory\n\u003cIfModule mod_rewrite.c\u003e\n    RewriteEngine On\n    RewriteRule ^wp-admin/includes/ - [F,L]\n    RewriteRule !^wp-includes/ - [S=3]\n    RewriteRule ^wp-includes/[^/]+\\.php$ - [F,L]\n    RewriteRule ^wp-includes/js/tinymce/langs/.+\\.php - [F,L]\n    RewriteRule ^wp-includes/theme-compat/ - [F,L]\n\u003c/IfModule\u003e\n\n# WordPress SEO\nRewriteRule ^index\\.php$ - [L]\nRewriteCond %{REQUEST_FILENAME} !-f\nRewriteCond %{REQUEST_FILENAME} !-d\nRewriteRule . /index.php [L]\n\n# Force HTTPS (if not using NGINX redirect)\n# RewriteCond %{HTTPS} !=on\n# RewriteRule ^(.*)$ https://%{HTTP_HOST}%{REQUEST_URI} [L,R=301]\n\n# Security headers (if mod_headers is enabled)\n\u003cIfModule mod_headers.c\u003e\n    Header always set Strict-Transport-Security \"max-age=31536000; includeSubDomains; preload\"\n    Header always set X-Frame-Options \"SAMEORIGIN\"\n    Header always set X-Content-Type-Options \"nosniff\"\n    Header always set X-XSS-Protection \"1; mode=block\"\n    Header always set Referrer-Policy \"strict-origin-when-cross-origin\"\n\u003c/IfModule\u003e\nEOF\n\nsudo chown www-data:www-data /var/www/html/example.com/.htaccess\n```\n\n## Performance Optimization\n\n### Caching Strategy Implementation\n```bash\n# Install and configure Redis plugin\ncd /var/www/html/example.com\nsudo -u www-data wp plugin install redis-cache --activate\n\n# Configure Redis for WordPress\nsudo -u www-data wp config set WP_REDIS_HOST '127.0.0.1' --raw\nsudo -u www-data wp config set WP_REDIS_PORT 6379 --raw --type=integer\nsudo -u www-data wp config set WP_REDIS_DATABASE 0 --raw --type=integer\nsudo -u www-data wp config set WP_REDIS_TIMEOUT 1 --raw --type=integer\nsudo -u www-data wp config set WP_REDIS_READ_TIMEOUT 1 --raw --type=integer\n\n# Enable Redis object cache\nsudo -u www-data wp redis enable\n\n# Install and configure caching plugin\nsudo -u www-data wp plugin install w3-total-cache --activate\n\n# Configure W3 Total Cache via WP-CLI\nsudo -u www-data wp w3-total-cache option set pgcache.enabled true\nsudo -u www-data wp w3-total-cache option set dbcache.enabled true\nsudo -u www-data wp w3-total-cache option set objectcache.enabled true\nsudo -u www-data wp w3-total-cache option set browsercache.enabled true\n\n# Install performance optimization plugins\nsudo -u www-data wp plugin install autoptimize --activate\nsudo -u www-data wp plugin install smush --activate\nsudo -u www-data wp plugin install wp-rocket --activate  # Premium plugin\n```\n\n### Database Optimization\n```bash\n# Create database optimization script\nsudo tee /usr/local/bin/wordpress-db-optimize.sh \u003e /dev/null \u003c\u003c'EOF'\n#!/bin/bash\nWP_PATH=\"/var/www/html/example.com\"\nLOG_FILE=\"/var/log/wordpress-optimization.log\"\n\ncd ${WP_PATH}\n\nlog_message() {\n    echo \"$(date '+%Y-%m-%d %H:%M:%S') - $1\" | tee -a ${LOG_FILE}\n}\n\nlog_message \"Starting WordPress database optimization...\"\n\n# Database cleanup\nsudo -u www-data wp transient delete --all --quiet\nsudo -u www-data wp db optimize --quiet\nsudo -u www-data wp db repair --quiet\n\n# Clean spam and trash\nsudo -u www-data wp comment delete $(sudo -u www-data wp comment list --status=spam --format=ids) --quiet\nsudo -u www-data wp post delete $(sudo -u www-data wp post list --post_status=trash --format=ids) --quiet\n\n# Optimize images\nif sudo -u www-data wp plugin is-installed smush; then\n    sudo -u www-data wp smush optimize --quiet\nfi\n\n# Clear caches\nif sudo -u www-data wp plugin is-installed w3-total-cache; then\n    sudo -u www-data wp w3-total-cache flush all --quiet\nfi\n\nif sudo -u www-data wp plugin is-installed wp-super-cache; then\n    sudo -u www-data wp super-cache flush --quiet\nfi\n\nif sudo -u www-data wp plugin is-installed redis-cache; then\n    sudo -u www-data wp redis flush --quiet\nfi\n\n# Update WordPress core and plugins\nsudo -u www-data wp core update --quiet\nsudo -u www-data wp plugin update --all --quiet\nsudo -u www-data wp theme update --all --quiet\n\nlog_message \"WordPress optimization completed\"\nEOF\n\nsudo chmod +x /usr/local/bin/wordpress-db-optimize.sh\n\n# Schedule weekly optimization\necho \"0 3 * * 0 root /usr/local/bin/wordpress-db-optimize.sh\" | sudo tee -a /etc/crontab\n```\n\n### CDN Integration\n```bash\n# Configure Cloudflare integration\nsudo -u www-data wp plugin install cloudflare --activate\n\n# Configure CDN settings via WP-CLI\nsudo -u www-data wp option update cloudflare_api_key \"your_cloudflare_api_key\"\nsudo -u www-data wp option update cloudflare_email \"your_email@example.com\"\n\n# Install MaxCDN/StackPath plugin\nsudo -u www-data wp plugin install maxcdn --activate\n\n# Configure image optimization\nsudo -u www-data wp plugin install ewww-image-optimizer --activate\nsudo -u www-data wp option update ewww_image_optimizer_cloud_key \"your_api_key\"\n```\n\n## SSL Certificate Setup\n\n### Let's Encrypt SSL Configuration\n```bash\n# Install Certbot\nsudo apt install -y certbot python3-certbot-nginx  # NGINX\nsudo apt install -y certbot python3-certbot-apache # Apache\n\n# Obtain SSL certificate\nsudo certbot --nginx -d example.com -d www.example.com  # NGINX\nsudo certbot --apache -d example.com -d www.example.com # Apache\n\n# Configure automatic renewal\nsudo crontab -e\n# Add: 0 12 * * * /usr/bin/certbot renew --quiet \u0026\u0026 systemctl reload nginx\n\n# Test renewal\nsudo certbot renew --dry-run\n\n# Update WordPress URLs to HTTPS\ncd /var/www/html/example.com\nsudo -u www-data wp search-replace \"http://example.com\" \"https://example.com\" --dry-run\nsudo -u www-data wp search-replace \"http://example.com\" \"https://example.com\"\nsudo -u www-data wp option update home \"https://example.com\"\nsudo -u www-data wp option update siteurl \"https://example.com\"\n```\n\n## Backup and Security\n\n### Comprehensive Backup Strategy\n```bash\nsudo tee /usr/local/bin/wordpress-backup.sh \u003e /dev/null \u003c\u003c'EOF'\n#!/bin/bash\nBACKUP_DIR=\"/backup/wordpress\"\nWP_PATH=\"/var/www/html/example.com\"\nDATE=$(date +%Y%m%d_%H%M%S)\n\nmkdir -p ${BACKUP_DIR}/{files,database,configs}\n\ncd ${WP_PATH}\n\n# Database backup via WP-CLI\nsudo -u www-data wp db export ${BACKUP_DIR}/database/wordpress-${DATE}.sql --quiet\ngzip ${BACKUP_DIR}/database/wordpress-${DATE}.sql\n\n# Files backup (exclude cache and temp files)\ntar --exclude='${WP_PATH}/wp-content/cache' \\\n    --exclude='${WP_PATH}/wp-content/uploads/cache' \\\n    --exclude='${WP_PATH}/wp-content/w3tc-config' \\\n    --exclude='${WP_PATH}/.htaccess.bak*' \\\n    -czf ${BACKUP_DIR}/files/wordpress-files-${DATE}.tar.gz \\\n    -C /var/www/html example.com\n\n# Configuration backup\ntar -czf ${BACKUP_DIR}/configs/wordpress-config-${DATE}.tar.gz \\\n    /etc/nginx/sites-available/wordpress.conf \\\n    /etc/php/8.2/fpm/pool.d/wordpress.conf \\\n    /etc/mysql/mysql.conf.d/wordpress.cnf \\\n    /etc/redis/redis.conf\n\n# Upload to cloud storage\naws s3 cp ${BACKUP_DIR}/ s3://wordpress-backups/ --recursive\naz storage blob upload-batch --source ${BACKUP_DIR} --destination wordpress-backups\ngsutil cp -r ${BACKUP_DIR}/* gs://wordpress-backups/\n\n# Keep only last 14 backups locally\nfind ${BACKUP_DIR} -name \"wordpress-*\" -type f -mtime +14 -delete\n\n# Test backup integrity\nif [ -f ${BACKUP_DIR}/database/wordpress-${DATE}.sql.gz ]; then\n    zcat ${BACKUP_DIR}/database/wordpress-${DATE}.sql.gz | head -10 \u003e/dev/null\n    if [ $? -eq 0 ]; then\n        echo \"‚úì Database backup integrity verified\"\n    else\n        echo \"‚úó Database backup may be corrupted\"\n    fi\nfi\n\necho \"WordPress backup completed: ${DATE}\"\nEOF\n\nsudo chmod +x /usr/local/bin/wordpress-backup.sh\n\n# Schedule daily backups\necho \"0 2 * * * root /usr/local/bin/wordpress-backup.sh\" | sudo tee -a /etc/crontab\n```\n\n### Security Monitoring and Hardening\n```bash\n# Create security monitoring script\nsudo tee /usr/local/bin/wordpress-security-check.sh \u003e /dev/null \u003c\u003c'EOF'\n#!/bin/bash\nWP_PATH=\"/var/www/html/example.com\"\nSECURITY_LOG=\"/var/log/wordpress-security.log\"\n\ncd ${WP_PATH}\n\nlog_message() {\n    echo \"$(date '+%Y-%m-%d %H:%M:%S') - $1\" | tee -a ${SECURITY_LOG}\n}\n\n# Check for malware\nif command -v clamscan \u003e/dev/null 2\u003e\u00261; then\n    log_message \"Running malware scan...\"\n    clamscan -r ${WP_PATH} --infected --remove --quiet\n    if [ $? -eq 0 ]; then\n        log_message \"‚úì No malware detected\"\n    else\n        log_message \"‚ö† Malware detected and removed\"\n    fi\nfi\n\n# Check file integrity\nlog_message \"Checking WordPress core file integrity...\"\nCORE_INTEGRITY=$(sudo -u www-data wp core verify-checksums --quiet 2\u003e\u00261)\nif [ $? -eq 0 ]; then\n    log_message \"‚úì WordPress core files are intact\"\nelse\n    log_message \"‚ö† WordPress core file integrity issues: ${CORE_INTEGRITY}\"\nfi\n\n# Check for vulnerable plugins\nlog_message \"Checking for vulnerable plugins...\"\nVULN_PLUGINS=$(sudo -u www-data wp vuln plugin-status 2\u003e/dev/null | grep \"vulnerable\" | wc -l)\nif [ ${VULN_PLUGINS} -eq 0 ]; then\n    log_message \"‚úì No vulnerable plugins detected\"\nelse\n    log_message \"‚ö† ${VULN_PLUGINS} vulnerable plugins found\"\nfi\n\n# Check user accounts\nADMIN_COUNT=$(sudo -u www-data wp user list --role=administrator --format=count)\nlog_message \"‚Ñπ ${ADMIN_COUNT} administrator accounts found\"\n\n# Check for suspicious uploads\nSUSPICIOUS_FILES=$(find ${WP_PATH}/wp-content/uploads -name \"*.php\" -o -name \"*.js\" -o -name \"*.exe\" 2\u003e/dev/null | wc -l)\nif [ ${SUSPICIOUS_FILES} -gt 0 ]; then\n    log_message \"‚ö† ${SUSPICIOUS_FILES} suspicious files found in uploads directory\"\n    find ${WP_PATH}/wp-content/uploads -name \"*.php\" -o -name \"*.js\" -o -name \"*.exe\" 2\u003e/dev/null \u003e\u003e ${SECURITY_LOG}\nfi\n\n# Check file permissions\nWRITABLE_FILES=$(find ${WP_PATH} -type f -perm 777 2\u003e/dev/null | wc -l)\nif [ ${WRITABLE_FILES} -gt 0 ]; then\n    log_message \"‚ö† ${WRITABLE_FILES} files are world-writable\"\nfi\n\n# Check .htaccess integrity\nif [ -f ${WP_PATH}/.htaccess ]; then\n    HTACCESS_SIZE=$(stat -c%s ${WP_PATH}/.htaccess)\n    if [ ${HTACCESS_SIZE} -lt 100 ]; then\n        log_message \"‚ö† .htaccess file may be compromised or empty\"\n    fi\nfi\n\n# Check for brute force attempts\nFAILED_LOGINS=$(grep \"authentication failure\" /var/log/auth.log | grep -c \"$(date +'%b %d')\")\nif [ ${FAILED_LOGINS} -gt 10 ]; then\n    log_message \"‚ö† ${FAILED_LOGINS} failed login attempts detected today\"\nfi\n\nlog_message \"Security check completed\"\nEOF\n\nsudo chmod +x /usr/local/bin/wordpress-security-check.sh\n\n# Schedule daily security checks\necho \"0 6 * * * root /usr/local/bin/wordpress-security-check.sh\" | sudo tee -a /etc/crontab\n```\n\n### Fail2Ban WordPress Protection\n```bash\n# Install Fail2Ban\nsudo apt install -y fail2ban  # Ubuntu/Debian\nsudo yum install -y fail2ban  # RHEL/CentOS\n\n# Create WordPress filter\nsudo tee /etc/fail2ban/filter.d/wordpress.conf \u003e /dev/null \u003c\u003cEOF\n[Definition]\nfailregex = ^\u003cHOST\u003e.*POST.*(wp-login\\.php|xmlrpc\\.php).* 200\n            ^\u003cHOST\u003e.*POST.*wp-login\\.php.* 404\n            ^\u003cHOST\u003e.*GET.*wp-admin.* 403\n            ^\u003cHOST\u003e.*POST.*wp-comments-post\\.php.* 403\n\nignoreregex = ^\u003cHOST\u003e.*POST.*wp-login\\.php.*200.*admin\nEOF\n\n# Configure WordPress jail\nsudo tee /etc/fail2ban/jail.d/wordpress.conf \u003e /dev/null \u003c\u003cEOF\n[wordpress]\nenabled = true\nport = http,https\nfilter = wordpress\nlogpath = /var/log/nginx/access.log\nmaxretry = 3\nfindtime = 600\nbantime = 3600\naction = iptables-multiport[name=WordPress, port=\"http,https\", protocol=tcp]\n\n[wordpress-xmlrpc]\nenabled = true\nport = http,https\nfilter = wordpress\nlogpath = /var/log/nginx/access.log\nmaxretry = 1\nfindtime = 300\nbantime = 86400\naction = iptables-multiport[name=WordPress-XMLRPC, port=\"http,https\", protocol=tcp]\nEOF\n\nsudo systemctl restart fail2ban\n```\n\n## Monitoring and Maintenance\n\n### WordPress Health Monitoring\n```bash\nsudo tee /usr/local/bin/wordpress-health-check.sh \u003e /dev/null \u003c\u003c'EOF'\n#!/bin/bash\nWP_PATH=\"/var/www/html/example.com\"\nHEALTH_LOG=\"/var/log/wordpress-health.log\"\n\ncd ${WP_PATH}\n\nlog_message() {\n    echo \"$(date '+%Y-%m-%d %H:%M:%S') - $1\" | tee -a ${HEALTH_LOG}\n}\n\n# Check web server status\nWEB_SERVER=\"nginx\"\nif command -v apache2 \u003e/dev/null 2\u003e\u00261; then\n    WEB_SERVER=\"apache2\"\nelif command -v httpd \u003e/dev/null 2\u003e\u00261; then\n    WEB_SERVER=\"httpd\"\nfi\n\nif systemctl is-active ${WEB_SERVER} \u003e/dev/null 2\u003e\u00261; then\n    log_message \"‚úì ${WEB_SERVER} is running\"\nelse\n    log_message \"‚úó ${WEB_SERVER} is not running\"\n    exit 1\nfi\n\n# Check database connectivity\nif sudo -u www-data wp db check --quiet \u003e/dev/null 2\u003e\u00261; then\n    log_message \"‚úì Database connection is healthy\"\nelse\n    log_message \"‚úó Database connection issues\"\nfi\n\n# Check WordPress status\nWP_VERSION=$(sudo -u www-data wp core version --quiet)\nlog_message \"‚Ñπ WordPress version: ${WP_VERSION}\"\n\n# Check for updates\nCORE_UPDATES=$(sudo -u www-data wp core check-update --format=count --quiet)\nPLUGIN_UPDATES=$(sudo -u www-data wp plugin list --update=available --format=count --quiet)\nTHEME_UPDATES=$(sudo -u www-data wp theme list --update=available --format=count --quiet)\n\nlog_message \"‚Ñπ Updates available - Core: ${CORE_UPDATES}, Plugins: ${PLUGIN_UPDATES}, Themes: ${THEME_UPDATES}\"\n\n# Check Redis cache\nif sudo -u www-data wp redis status \u003e/dev/null 2\u003e\u00261; then\n    log_message \"‚úì Redis object cache is working\"\nelse\n    log_message \"‚ö† Redis object cache issues\"\nfi\n\n# Check disk space\nDISK_USAGE=$(df ${WP_PATH} | awk 'NR==2 {print $5}' | sed 's/%//')\nif [ ${DISK_USAGE} -gt 85 ]; then\n    log_message \"‚ö† Disk usage is ${DISK_USAGE}%\"\nelse\n    log_message \"‚úì Disk usage is ${DISK_USAGE}%\"\nfi\n\n# Check file permissions\nWRITABLE_WP_CONFIG=$([ -w ${WP_PATH}/wp-config.php ] \u0026\u0026 echo \"1\" || echo \"0\")\nif [ ${WRITABLE_WP_CONFIG} -eq 1 ]; then\n    log_message \"‚ö† wp-config.php is writable - security risk\"\nelse\n    log_message \"‚úì wp-config.php permissions are secure\"\nfi\n\n# Check SSL certificate\nSSL_EXPIRY=$(echo | openssl s_client -servername example.com -connect example.com:443 2\u003e/dev/null | openssl x509 -noout -dates | grep notAfter | cut -d= -f2)\nSSL_EXPIRY_EPOCH=$(date -d \"$SSL_EXPIRY\" +%s)\nCURRENT_EPOCH=$(date +%s)\nDAYS_TO_SSL_EXPIRY=$(( (SSL_EXPIRY_EPOCH - CURRENT_EPOCH) / 86400 ))\n\nif [ ${DAYS_TO_SSL_EXPIRY} -lt 30 ]; then\n    log_message \"‚ö† SSL certificate expires in ${DAYS_TO_SSL_EXPIRY} days\"\nelse\n    log_message \"‚úì SSL certificate expires in ${DAYS_TO_SSL_EXPIRY} days\"\nfi\n\n# Check website accessibility\nHTTP_STATUS=$(curl -s -o /dev/null -w \"%{http_code}\" https://example.com)\nif [ \"${HTTP_STATUS}\" = \"200\" ]; then\n    log_message \"‚úì Website is accessible (HTTP ${HTTP_STATUS})\"\nelse\n    log_message \"‚úó Website accessibility issues (HTTP ${HTTP_STATUS})\"\nfi\n\nlog_message \"WordPress health check completed\"\nEOF\n\nsudo chmod +x /usr/local/bin/wordpress-health-check.sh\n\n# Schedule health checks every 30 minutes\necho \"*/30 * * * * root /usr/local/bin/wordpress-health-check.sh\" | sudo tee -a /etc/crontab\n```\n\n### WordPress Security Scanning\n```bash\n# Install WP-CLI vulnerability scanner\nsudo -u www-data wp package install wp-cli/doctor-command\n\n# Create comprehensive security scan script\nsudo tee /usr/local/bin/wordpress-security-scan.sh \u003e /dev/null \u003c\u003c'EOF'\n#!/bin/bash\nWP_PATH=\"/var/www/html/example.com\"\nSCAN_LOG=\"/var/log/wordpress-security-scan.log\"\nDATE=$(date +%Y%m%d_%H%M%S)\n\ncd ${WP_PATH}\n\nlog_message() {\n    echo \"$(date '+%Y-%m-%d %H:%M:%S') - $1\" | tee -a ${SCAN_LOG}\n}\n\nlog_message \"Starting WordPress security scan...\"\n\n# Check WordPress version\nWP_VERSION=$(sudo -u www-data wp core version --quiet)\nLATEST_VERSION=$(sudo -u www-data wp core check-update --format=csv --quiet | tail -1 | cut -d, -f2)\n\nif [ \"${WP_VERSION}\" != \"${LATEST_VERSION}\" ] \u0026\u0026 [ -n \"${LATEST_VERSION}\" ]; then\n    log_message \"‚ö† WordPress is outdated (${WP_VERSION}), latest is ${LATEST_VERSION}\"\nelse\n    log_message \"‚úì WordPress is up to date (${WP_VERSION})\"\nfi\n\n# Check for vulnerable plugins\nsudo -u www-data wp plugin list --format=json \u003e /tmp/wp-plugins-${DATE}.json\nwhile read -r plugin; do\n    plugin_name=$(echo $plugin | jq -r .name)\n    plugin_version=$(echo $plugin | jq -r .version)\n    plugin_update=$(echo $plugin | jq -r .update)\n    \n    if [ \"$plugin_update\" != \"none\" ] \u0026\u0026 [ \"$plugin_update\" != \"null\" ]; then\n        log_message \"‚ö† Plugin update available: ${plugin_name} (${plugin_version})\"\n    fi\ndone \u003c \u003c(jq -c '.[]' /tmp/wp-plugins-${DATE}.json)\n\n# Check theme security\nACTIVE_THEME=$(sudo -u www-data wp theme status --format=json | jq -r '.[] | select(.status==\"Active\") | .name')\nlog_message \"‚Ñπ Active theme: ${ACTIVE_THEME}\"\n\n# Check user accounts\nUSERS_WITH_ADMIN=$(sudo -u www-data wp user list --role=administrator --format=count --quiet)\nlog_message \"‚Ñπ ${USERS_WITH_ADMIN} administrator accounts\"\n\n# Check for inactive plugins\nINACTIVE_PLUGINS=$(sudo -u www-data wp plugin list --status=inactive --format=count --quiet)\nif [ ${INACTIVE_PLUGINS} -gt 0 ]; then\n    log_message \"‚Ñπ ${INACTIVE_PLUGINS} inactive plugins (consider removing)\"\nfi\n\n# Check database integrity\nif sudo -u www-data wp db check --quiet \u003e/dev/null 2\u003e\u00261; then\n    log_message \"‚úì Database integrity check passed\"\nelse\n    log_message \"‚ö† Database integrity issues detected\"\nfi\n\n# Check for spam content\nSPAM_COMMENTS=$(sudo -u www-data wp comment list --status=spam --format=count --quiet)\nif [ ${SPAM_COMMENTS} -gt 0 ]; then\n    log_message \"‚Ñπ ${SPAM_COMMENTS} spam comments detected\"\nfi\n\n# Run Wordfence scan (if installed)\nif sudo -u www-data wp plugin is-installed wordfence; then\n    log_message \"Running Wordfence security scan...\"\n    # Note: Wordfence CLI scanning requires premium\nfi\n\n# Check file changes (basic integrity)\nfind ${WP_PATH} -name \"*.php\" -newer ${WP_PATH}/wp-config.php | wc -l \u003e /tmp/changed_files_count\nCHANGED_FILES=$(cat /tmp/changed_files_count)\nif [ ${CHANGED_FILES} -gt 5 ]; then\n    log_message \"‚ö† ${CHANGED_FILES} PHP files changed recently\"\nfi\n\nlog_message \"WordPress security scan completed\"\nEOF\n\nsudo chmod +x /usr/local/bin/wordpress-security-scan.sh\n\n# Schedule daily security scans\necho \"0 7 * * * root /usr/local/bin/wordpress-security-scan.sh\" | sudo tee -a /etc/crontab\n```\n\n## Troubleshooting (Cross-Platform)\n\n### Common Issues and Solutions\n```bash\n# Check web server status\nsudo systemctl status nginx    # or apache2/httpd\nsudo systemctl status php8.2-fpm\nsudo systemctl status mariadb\n\n# Test database connection\nmysql -u wpuser -p wordpress -e \"SELECT 1;\"\n\n# Check PHP-FPM logs\nsudo tail -f /var/log/php8.2-fpm.log\n\n# WordPress debug mode\ncd /var/www/html/example.com\nsudo -u www-data wp config set WP_DEBUG true --raw\nsudo -u www-data wp config set WP_DEBUG_LOG true --raw\nsudo tail -f /var/www/html/example.com/wp-content/debug.log\n\n# Check web server logs\nsudo tail -f /var/log/nginx/error.log          # NGINX\nsudo tail -f /var/log/apache2/error.log        # Apache\n\n# Clear all caches\nsudo -u www-data wp cache flush\nsudo -u www-data wp redis flush\nsudo -u www-data wp super-cache flush\n\n# Reset file permissions\nsudo /usr/local/bin/wordpress-permissions.sh\n\n# Database repair\nsudo -u www-data wp db repair\n\n# Plugin conflict troubleshooting\nsudo -u www-data wp plugin deactivate --all\nsudo -u www-data wp plugin activate plugin-name\n\n# Theme troubleshooting\nsudo -u www-data wp theme activate twentytwentyfour\n\n# Memory issues\nsudo -u www-data wp config set WP_MEMORY_LIMIT 1024M --raw\nfree -h\n\n# Check disk space\ndf -h /var/www/html/example.com\ndu -sh /var/www/html/example.com/wp-content/uploads/\n\n# SSL issues\nsudo certbot certificates\nsudo nginx -t  # or apache2ctl configtest\n\n# Performance debugging\nsudo -u www-data wp profile hook --all\nsudo -u www-data wp doctor check\n\n# Database optimization\nsudo -u www-data wp db optimize\n```\n\n### Advanced Debugging\n```bash\n# Enable WordPress debugging\nsudo -u www-data wp config set WP_DEBUG true --raw\nsudo -u www-data wp config set WP_DEBUG_LOG true --raw\nsudo -u www-data wp config set WP_DEBUG_DISPLAY false --raw\nsudo -u www-data wp config set SCRIPT_DEBUG true --raw\n\n# Query debugging\nsudo -u www-data wp config set SAVEQUERIES true --raw\n\n# Enable error logging\nsudo tee -a /etc/php/8.2/fpm/php.ini \u003e /dev/null \u003c\u003cEOF\n; WordPress debugging\nlog_errors = On\nerror_log = /var/log/php/wordpress-errors.log\ndisplay_errors = Off\ndisplay_startup_errors = Off\nEOF\n\nsudo systemctl restart php8.2-fpm\n\n# Monitor real-time logs\ntail -f /var/www/html/example.com/wp-content/debug.log\ntail -f /var/log/php/wordpress-errors.log\ntail -f /var/log/nginx/error.log\n\n# Database query analysis\nsudo -u www-data wp db query \"SHOW FULL PROCESSLIST;\"\nsudo -u www-data wp db query \"SHOW STATUS LIKE 'Slow_queries';\"\n\n# Memory profiling\nsudo -u www-data wp eval 'echo \"Memory usage: \" . memory_get_usage(true) / 1024 / 1024 . \" MB\\n\";'\n\n# Plugin profiling\nsudo -u www-data wp plugin list --status=active\nsudo -u www-data wp eval 'foreach(get_option(\"active_plugins\") as $p) { echo $p . \"\\n\"; }'\n\n# Theme debugging\nsudo -u www-data wp theme status\nsudo -u www-data wp eval 'echo get_template_directory() . \"\\n\";'\n```\n\n## Additional Resources\n\n- [Official Documentation](https://wordpress.org/documentation/)\n- [WP-CLI Documentation](https://wp-cli.org/)\n- [WordPress Security Guide](https://wordpress.org/support/article/hardening-wordpress/)\n- [Performance Best Practices](https://wordpress.org/support/article/optimization/)\n- [WordPress Codex](https://codex.wordpress.org/)\n- [Security Plugin: Wordfence](https://www.wordfence.com/)\n\n---\n\n**Note:** This guide is part of the [HowToMgr](https://howtomgr.github.io) collection.","readmeHtml":"\u003ch1 id=\"wordpress-installation-guide\" class=\"mobile-header\"\u003eWordPress Installation Guide\u003c/h1\u003e\n\u003cp class=\"mobile-paragraph\"\u003eWorld's most popular content management system (CMS) powering over 40% of websites globally. Complete guide for secure, high-performance WordPress deployment with modern stack configurations.\u003c/p\u003e\n\u003ch2 id=\"prerequisites\" class=\"mobile-header\"\u003ePrerequisites\u003c/h2\u003e\n\u003cli class=\"mobile-list-item\"\u003eLinux system (any modern distribution)\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003e2GB RAM minimum, 4GB+ recommended for production\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eWeb server (NGINX recommended, Apache supported)\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003ePHP 8.1+ (8.2+ recommended)\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eMySQL 8.0+ or MariaDB 10.6+ \u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eSSL certificate for HTTPS\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eDomain name for production deployment\u003c/li\u003e\n\u003ch2 id=\"installation-methods\" class=\"mobile-header\"\u003eInstallation Methods\u003c/h2\u003e\n\u003ch3 id=\"lemp-stack-recommended-for-2024\" class=\"mobile-header\"\u003eLEMP Stack (Recommended for 2024)\u003c/h3\u003e\n\u003cp class=\"mobile-paragraph\"\u003e#### Ubuntu/Debian LEMP Setup\u003c/p\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003eüìã\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Update system\nsudo apt update \u0026amp;\u0026amp; sudo apt upgrade -y\n\n# Install NGINX\nsudo apt install -y nginx\n\n# Install MySQL/MariaDB\nsudo apt install -y mariadb-server mariadb-client\n\n# Install PHP 8.2 and essential extensions\nsudo apt install -y php8.2-fpm php8.2-mysql php8.2-curl php8.2-gd php8.2-mbstring php8.2-xml php8.2-xmlrpc php8.2-soap php8.2-intl php8.2-zip php8.2-bcmath php8.2-imagick php8.2-cli php8.2-dev php8.2-imap php8.2-opcache\n\n# Install additional performance tools\nsudo apt install -y redis-server memcached unzip curl wget\n\n# Enable and start services\nsudo systemctl enable --now nginx mariadb php8.2-fpm redis-server\n\n# Secure MySQL installation\nsudo mysql_secure_installation\n\n# Configure firewall\nsudo ufw allow \u0026#039;Nginx Full\u0026#039;\nsudo ufw allow OpenSSH\nsudo ufw enable\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003cp class=\"mobile-paragraph\"\u003e#### RHEL/CentOS/Rocky Linux LEMP Setup\u003c/p\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003eüìã\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Install EPEL and Remi repositories\nsudo yum install -y epel-release\nsudo yum install -y https://rpms.remirepo.net/enterprise/remi-release-9.rpm\n\n# Enable PHP 8.2 repository\nsudo yum-config-manager --enable remi-php82\n\n# Install NGINX\nsudo yum install -y nginx\n\n# Install MariaDB\nsudo yum install -y mariadb-server mariadb\n\n# Install PHP and extensions\nsudo yum install -y php php-fpm php-mysql php-curl php-gd php-mbstring php-xml php-xmlrpc php-soap php-intl php-zip php-bcmath php-imagick php-opcache php-redis\n\n# Install Redis\nsudo yum install -y redis\n\n# Enable and start services\nsudo systemctl enable --now nginx mariadb php-fpm redis\n\n# Configure firewall\nsudo firewall-cmd --permanent --add-service=http\nsudo firewall-cmd --permanent --add-service=https\nsudo firewall-cmd --reload\n\n# Secure MySQL\nsudo mysql_secure_installation\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003cp class=\"mobile-paragraph\"\u003e#### Fedora LEMP Setup\u003c/p\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003eüìã\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Install NGINX, MariaDB, PHP, and Redis\nsudo dnf install -y nginx mariadb-server mariadb php php-fpm php-mysql php-curl php-gd php-mbstring php-xml php-xmlrpc php-soap php-intl php-zip php-opcache php-redis redis\n\n# Enable and start services\nsudo systemctl enable --now nginx mariadb php-fpm redis\n\n# Configure firewall\nsudo firewall-cmd --permanent --add-service=http\nsudo firewall-cmd --permanent --add-service=https\nsudo firewall-cmd --reload\n\n# Secure MySQL\nsudo mysql_secure_installation\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"lamp-stack-alternative\" class=\"mobile-header\"\u003eLAMP Stack (Alternative)\u003c/h3\u003e\n\u003cp class=\"mobile-paragraph\"\u003e#### Ubuntu/Debian LAMP Setup\u003c/p\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003eüìã\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Install Apache, MySQL, PHP\nsudo apt update\nsudo apt install -y apache2 mariadb-server php8.2 php8.2-mysql php8.2-curl php8.2-gd php8.2-mbstring php8.2-xml php8.2-xmlrpc php8.2-soap php8.2-intl php8.2-zip php8.2-opcache libapache2-mod-php8.2\n\n# Enable Apache modules\nsudo a2enmod rewrite ssl headers deflate expires\n\n# Enable and start services\nsudo systemctl enable --now apache2 mariadb\n\n# Configure firewall\nsudo ufw allow \u0026#039;Apache Full\u0026#039;\nsudo ufw enable\n\n# Secure MySQL\nsudo mysql_secure_installation\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"database-setup-universal\" class=\"mobile-header\"\u003eDatabase Setup (Universal)\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003eüìã\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Create WordPress database and user\nsudo mysql -u root -p \u0026lt;\u0026lt;EOF\nCREATE DATABASE wordpress DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;\nCREATE USER \u0026#039;wpuser\u0026#039;@\u0026#039;localhost\u0026#039; IDENTIFIED BY \u0026#039;secure_wp_password_2024\u0026#039;;\nGRANT ALL PRIVILEGES ON wordpress.* TO \u0026#039;wpuser\u0026#039;@\u0026#039;localhost\u0026#039;;\nFLUSH PRIVILEGES;\n\n-- Optimize MySQL for WordPress\nSET GLOBAL innodb_buffer_pool_size = 1073741824;  -- 1GB\nSET GLOBAL query_cache_size = 67108864;           -- 64MB\nSET GLOBAL query_cache_limit = 2097152;           -- 2MB\nEXIT\nEOF\n\n# Apply permanent MySQL optimizations\nsudo tee /etc/mysql/mysql.conf.d/wordpress.cnf \u0026gt; /dev/null \u0026lt;\u0026lt;EOF\n[mysqld]\n# WordPress optimizations\ninnodb_buffer_pool_size = 1G\ninnodb_log_file_size = 256M\ninnodb_file_per_table = 1\ninnodb_flush_log_at_trx_commit = 2\ninnodb_flush_method = O_DIRECT\n\n# Query cache\nquery_cache_type = 1\nquery_cache_size = 64M\nquery_cache_limit = 2M\n\n# Connection optimization\nmax_connections = 200\nthread_cache_size = 100\ntable_open_cache = 4096\ntmp_table_size = 32M\nmax_heap_table_size = 32M\n\n# Slow query log\nslow_query_log = 1\nlong_query_time = 2\nslow_query_log_file = /var/log/mysql/slow.log\nEOF\n\nsudo systemctl restart mariadb\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"wordpress-installation\" class=\"mobile-header\"\u003eWordPress Installation\u003c/h2\u003e\n\u003ch3 id=\"download-and-setup-wordpress\" class=\"mobile-header\"\u003eDownload and Setup WordPress\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003eüìã\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Download latest WordPress\ncd /tmp\nwget https://wordpress.org/latest.tar.gz\ntar xzf latest.tar.gz\n\n# Create web directory and copy files\nsudo mkdir -p /var/www/html/example.com\nsudo cp -R /tmp/wordpress/* /var/www/html/example.com/\n\n# Set proper ownership and permissions\n# For NGINX (Ubuntu/Debian)\nsudo chown -R www-data:www-data /var/www/html/example.com\n# For NGINX (RHEL/CentOS)\nsudo chown -R nginx:nginx /var/www/html/example.com\n# For Apache\nsudo chown -R www-data:www-data /var/www/html/example.com  # Ubuntu/Debian\nsudo chown -R apache:apache /var/www/html/example.com      # RHEL/CentOS\n\n# Secure file permissions\nsudo find /var/www/html/example.com/ -type d -exec chmod 755 {} \\;\nsudo find /var/www/html/example.com/ -type f -exec chmod 644 {} \\;\nsudo chmod 600 /var/www/html/example.com/wp-config.php\n\n# Create uploads directory with proper permissions\nsudo mkdir -p /var/www/html/example.com/wp-content/uploads\nsudo chmod 775 /var/www/html/example.com/wp-content/uploads\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"secure-wordpress-configuration\" class=\"mobile-header\"\u003eSecure WordPress Configuration\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003eüìã\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Create secure wp-config.php\ncd /var/www/html/example.com\nsudo cp wp-config-sample.php wp-config.php\n\n# Generate security keys\nSALT_KEYS=$(curl -s https://api.wordpress.org/secret-key/1.1/salt/)\n\n# Create wp-config.php with security hardening\nsudo tee wp-config.php \u0026gt; /dev/null \u0026lt;\u0026lt;EOF\n\u0026lt;?php\n/**\n * WordPress Configuration File - Security Hardened\n */\n\n// ** Database settings ** //\ndefine(\u0026#039;DB_NAME\u0026#039;, \u0026#039;wordpress\u0026#039;);\ndefine(\u0026#039;DB_USER\u0026#039;, \u0026#039;wpuser\u0026#039;);\ndefine(\u0026#039;DB_PASSWORD\u0026#039;, \u0026#039;secure_wp_password_2024\u0026#039;);\ndefine(\u0026#039;DB_HOST\u0026#039;, \u0026#039;127.0.0.1\u0026#039;);  // Use 127.0.0.1 instead of localhost\ndefine(\u0026#039;DB_CHARSET\u0026#039;, \u0026#039;utf8mb4\u0026#039;);\ndefine(\u0026#039;DB_COLLATE\u0026#039;, \u0026#039;\u0026#039;);\n\n// ** Authentication Unique Keys and Salts ** //\n${SALT_KEYS}\n\n// ** WordPress Database Table prefix ** //\n\\$table_prefix = \u0026#039;wp_secure_\u0026#039;;\n\n// ** Security hardening ** //\ndefine(\u0026#039;WP_DEBUG\u0026#039;, false);\ndefine(\u0026#039;WP_DEBUG_LOG\u0026#039;, false);\ndefine(\u0026#039;WP_DEBUG_DISPLAY\u0026#039;, false);\n\n// Disable file editing\ndefine(\u0026#039;DISALLOW_FILE_EDIT\u0026#039;, true);\ndefine(\u0026#039;DISALLOW_FILE_MODS\u0026#039;, true);\n\n// Force SSL\ndefine(\u0026#039;FORCE_SSL_ADMIN\u0026#039;, true);\n\n// Automatic updates\ndefine(\u0026#039;WP_AUTO_UPDATE_CORE\u0026#039;, \u0026#039;minor\u0026#039;);\ndefine(\u0026#039;AUTOMATIC_UPDATER_DISABLED\u0026#039;, false);\n\n// Memory limit\ndefine(\u0026#039;WP_MEMORY_LIMIT\u0026#039;, \u0026#039;512M\u0026#039;);\n\n// Multisite (if needed)\n// define(\u0026#039;WP_ALLOW_MULTISITE\u0026#039;, true);\n\n// Custom content directory (optional)\ndefine(\u0026#039;WP_CONTENT_DIR\u0026#039;, \u0026#039;/var/www/html/example.com/wp-content\u0026#039;);\ndefine(\u0026#039;WP_CONTENT_URL\u0026#039;, \u0026#039;https://example.com/wp-content\u0026#039;);\n\n// Database repair\ndefine(\u0026#039;WP_ALLOW_REPAIR\u0026#039;, false);\n\n// Cron optimization\ndefine(\u0026#039;DISABLE_WP_CRON\u0026#039;, true);  // Use system cron instead\n\n// Security headers\ndefine(\u0026#039;COOKIE_DOMAIN\u0026#039;, \u0026#039;.example.com\u0026#039;);\ndefine(\u0026#039;COOKIEHASH\u0026#039;, md5(\u0026#039;example.com\u0026#039;));\n\n// File permissions\ndefine(\u0026#039;FS_CHMOD_DIR\u0026#039;, (0755 \u0026amp; ~ umask()));\ndefine(\u0026#039;FS_CHMOD_FILE\u0026#039;, (0644 \u0026amp; ~ umask()));\n\n// Redis cache configuration\ndefine(\u0026#039;WP_REDIS_HOST\u0026#039;, \u0026#039;127.0.0.1\u0026#039;);\ndefine(\u0026#039;WP_REDIS_PORT\u0026#039;, 6379);\ndefine(\u0026#039;WP_REDIS_DATABASE\u0026#039;, 0);\ndefine(\u0026#039;WP_REDIS_TIMEOUT\u0026#039;, 1);\ndefine(\u0026#039;WP_REDIS_READ_TIMEOUT\u0026#039;, 1);\n\n// Rate limiting\ndefine(\u0026#039;WP_POST_REVISIONS\u0026#039;, 5);\ndefine(\u0026#039;AUTOSAVE_INTERVAL\u0026#039;, 300);  // 5 minutes\ndefine(\u0026#039;EMPTY_TRASH_DAYS\u0026#039;, 7);\n\n/* That\u0026#039;s all, stop editing! */\nif (!defined(\u0026#039;ABSPATH\u0026#039;)) {\n    define(\u0026#039;ABSPATH\u0026#039;, dirname(__FILE__) . \u0026#039;/\u0026#039;);\n}\n\nrequire_once ABSPATH . \u0026#039;wp-settings.php\u0026#039;;\nEOF\n\nsudo chown www-data:www-data wp-config.php  # Adjust user as needed\nsudo chmod 600 wp-config.php\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"web-server-configuration\" class=\"mobile-header\"\u003eWeb Server Configuration\u003c/h2\u003e\n\u003ch3 id=\"nginx-configuration-recommended\" class=\"mobile-header\"\u003eNGINX Configuration (Recommended)\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003eüìã\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Create optimized NGINX configuration for WordPress\nsudo tee /etc/nginx/sites-available/wordpress.conf \u0026gt; /dev/null \u0026lt;\u0026lt;EOF\n# WordPress NGINX Configuration - 2024 Security Hardened\n\n# Rate limiting\nlimit_req_zone \\$binary_remote_addr zone=wp_login:10m rate=1r/s;\nlimit_req_zone \\$binary_remote_addr zone=wp_admin:10m rate=5r/m;\n\n# HTTP to HTTPS redirect\nserver {\n    listen 80;\n    listen [::]:80;\n    server_name example.com www.example.com;\n    return 301 https://example.com\\$request_uri;\n}\n\n# HTTPS Server\nserver {\n    listen 443 ssl http2;\n    listen [::]:443 ssl http2;\n    server_name example.com www.example.com;\n    root /var/www/html/example.com;\n    index index.php index.html index.htm;\n\n    # SSL Configuration (2024 best practices)\n    ssl_certificate /etc/letsencrypt/live/example.com/fullchain.pem;\n    ssl_certificate_key /etc/letsencrypt/live/example.com/privkey.pem;\n    ssl_trusted_certificate /etc/letsencrypt/live/example.com/chain.pem;\n    \n    ssl_protocols TLSv1.2 TLSv1.3;\n    ssl_ciphers ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384;\n    ssl_prefer_server_ciphers off;\n    ssl_session_cache shared:SSL:50m;\n    ssl_session_timeout 1d;\n    ssl_session_tickets off;\n\n    # Security headers (2024 standards)\n    add_header Strict-Transport-Security \u0026quot;max-age=31536000; includeSubDomains; preload\u0026quot; always;\n    add_header X-Frame-Options \u0026quot;SAMEORIGIN\u0026quot; always;\n    add_header X-Content-Type-Options \u0026quot;nosniff\u0026quot; always;\n    add_header X-XSS-Protection \u0026quot;1; mode=block\u0026quot; always;\n    add_header Referrer-Policy \u0026quot;strict-origin-when-cross-origin\u0026quot; always;\n    add_header Content-Security-Policy \u0026quot;default-src \u0026#039;self\u0026#039;; script-src \u0026#039;self\u0026#039; \u0026#039;unsafe-inline\u0026#039; \u0026#039;unsafe-eval\u0026#039; *.googleapis.com *.gstatic.com; style-src \u0026#039;self\u0026#039; \u0026#039;unsafe-inline\u0026#039; *.googleapis.com; img-src \u0026#039;self\u0026#039; data: https:; font-src \u0026#039;self\u0026#039; data: *.gstatic.com; connect-src \u0026#039;self\u0026#039;; media-src \u0026#039;self\u0026#039;; object-src \u0026#039;none\u0026#039;; child-src \u0026#039;self\u0026#039;; form-action \u0026#039;self\u0026#039;; base-uri \u0026#039;self\u0026#039;;\u0026quot; always;\n    add_header Permissions-Policy \u0026quot;camera=(), microphone=(), geolocation=()\u0026quot; always;\n\n    # Hide server information\n    server_tokens off;\n    more_set_headers \u0026quot;Server: \u0026quot;;\n\n    # Upload size limits\n    client_max_body_size 64M;\n\n    # FastCGI caching\n    set \\$skip_cache 0;\n    if (\\$request_method = POST) { set \\$skip_cache 1; }\n    if (\\$query_string != \u0026quot;\u0026quot;) { set \\$skip_cache 1; }\n    if (\\$request_uri ~* \u0026quot;/wp-admin/|/xmlrpc.php|wp-.*.php|/feed/|index.php|sitemap(_index)?.xml\u0026quot;) { set \\$skip_cache 1; }\n    if (\\$http_cookie ~* \u0026quot;comment_author|wordpress_[a-f0-9]+|wp-postpass|wordpress_no_cache|wordpress_logged_in\u0026quot;) { set \\$skip_cache 1; }\n\n    # Main location block\n    location / {\n        try_files \\$uri \\$uri/ /index.php?\\$args;\n    }\n\n    # WordPress-specific security rules\n    location ~ /\\. {\n        deny all;\n        access_log off;\n        log_not_found off;\n    }\n\n    # Protect wp-config.php\n    location ~* wp-config\\.php {\n        deny all;\n    }\n\n    # Disable execution of PHP in uploads\n    location ~* /(?:uploads|files)/.*\\.php\\$ {\n        deny all;\n    }\n\n    # Block access to sensitive files\n    location ~* \\.(htaccess|htpasswd|ini|log|sh|sql|conf|bak|backup|swp|tmp)\\$ {\n        deny all;\n    }\n\n    # WordPress: deny wp-content, wp-includes php files\n    location ~* ^/(wp-content|wp-includes)/.*\\.php\\$ {\n        deny all;\n    }\n\n    # WordPress: deny general stuff\n    location ~* ^/(readme|license|example|README|INSTALL|CHANGELOG)\\.(txt|md)\\$ {\n        deny all;\n    }\n\n    # Block WordPress brute force attacks\n    location ~* /(wp-login\\.php|wp-admin/).*\\$ {\n        limit_req zone=wp_login burst=1 nodelay;\n        limit_req zone=wp_admin burst=5 nodelay;\n        \n        # IP whitelist for admin (replace with your IPs)\n        # allow 192.168.1.100;\n        # allow 10.0.0.0/8;\n        # deny all;\n        \n        include snippets/fastcgi-php.conf;\n        fastcgi_pass unix:/var/run/php/php8.2-fpm.sock;\n    }\n\n    # PHP processing with caching\n    location ~ \\.php\\$ {\n        include snippets/fastcgi-php.conf;\n        fastcgi_pass unix:/var/run/php/php8.2-fpm.sock;\n        fastcgi_param SCRIPT_FILENAME \\$document_root\\$fastcgi_script_name;\n        include fastcgi_params;\n        \n        # FastCGI caching\n        fastcgi_cache_bypass \\$skip_cache;\n        fastcgi_no_cache \\$skip_cache;\n        fastcgi_cache WORDPRESS;\n        fastcgi_cache_valid 60m;\n        \n        # Security\n        fastcgi_hide_header X-Powered-By;\n    }\n\n    # Static assets optimization\n    location ~* \\.(js|css|png|jpg|jpeg|gif|ico|svg|woff|woff2|ttf|eot|webp|avif)\\$ {\n        expires 1y;\n        add_header Cache-Control \u0026quot;public, immutable\u0026quot;;\n        add_header Vary \u0026quot;Accept-Encoding\u0026quot;;\n        access_log off;\n        \n        # CORS for fonts\n        location ~* \\.(woff|woff2|ttf|eot)\\$ {\n            add_header Access-Control-Allow-Origin *;\n        }\n    }\n\n    # XML files (sitemaps, feeds)\n    location ~* \\.(xml|txt)\\$ {\n        expires 1h;\n        add_header Cache-Control \u0026quot;public\u0026quot;;\n    }\n\n    # Block xmlrpc.php\n    location = /xmlrpc.php {\n        deny all;\n        access_log off;\n        log_not_found off;\n    }\n\n    # WordPress REST API rate limiting\n    location ~* /wp-json/ {\n        limit_req zone=wp_admin burst=10 nodelay;\n        try_files \\$uri \\$uri/ /index.php?\\$args;\n    }\n\n    # Favicon and robots.txt\n    location = /favicon.ico {\n        log_not_found off;\n        access_log off;\n        expires 1y;\n    }\n\n    location = /robots.txt {\n        allow all;\n        log_not_found off;\n        access_log off;\n        expires 1h;\n    }\n\n    # Security.txt\n    location = /.well-known/security.txt {\n        return 301 \\$scheme://\\$server_name/.well-known/security.txt;\n    }\n}\n\n# WWW to non-WWW redirect\nserver {\n    listen 443 ssl http2;\n    listen [::]:443 ssl http2;\n    server_name www.example.com;\n    \n    ssl_certificate /etc/letsencrypt/live/example.com/fullchain.pem;\n    ssl_certificate_key /etc/letsencrypt/live/example.com/privkey.pem;\n    \n    return 301 https://example.com\\$request_uri;\n}\nEOF\n\n# Create FastCGI cache directory\nsudo mkdir -p /var/cache/nginx/wordpress\nsudo chown -R www-data:www-data /var/cache/nginx\n\n# Add FastCGI cache configuration\nsudo tee /etc/nginx/conf.d/fastcgi-cache.conf \u0026gt; /dev/null \u0026lt;\u0026lt;EOF\n# FastCGI cache configuration for WordPress\nfastcgi_cache_path /var/cache/nginx/wordpress levels=1:2 keys_zone=WORDPRESS:100m inactive=60m;\nfastcgi_cache_key \u0026quot;\\$scheme\\$request_method\\$host\\$request_uri\u0026quot;;\nfastcgi_cache_use_stale error timeout invalid_header http_500;\nfastcgi_ignore_headers Cache-Control Expires Set-Cookie;\nEOF\n\n# Enable site and restart NGINX\nsudo ln -s /etc/nginx/sites-available/wordpress.conf /etc/nginx/sites-enabled/\nsudo nginx -t \u0026amp;\u0026amp; sudo systemctl restart nginx\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"apache-configuration-alternative\" class=\"mobile-header\"\u003eApache Configuration (Alternative)\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003eüìã\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Create secure Apache virtual host\nsudo tee /etc/apache2/sites-available/wordpress.conf \u0026gt; /dev/null \u0026lt;\u0026lt;EOF\n\u0026lt;VirtualHost *:80\u0026gt;\n    ServerName example.com\n    ServerAlias www.example.com\n    Redirect permanent / https://example.com/\n\u0026lt;/VirtualHost\u0026gt;\n\n\u0026lt;VirtualHost *:443\u0026gt;\n    ServerName example.com\n    ServerAlias www.example.com\n    DocumentRoot /var/www/html/example.com\n    \n    # SSL Configuration\n    SSLEngine on\n    SSLCertificateFile /etc/letsencrypt/live/example.com/fullchain.pem\n    SSLCertificateKeyFile /etc/letsencrypt/live/example.com/privkey.pem\n    SSLProtocol all -SSLv3 -TLSv1 -TLSv1.1\n    SSLCipherSuite ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256\n    SSLHonorCipherOrder off\n    \n    # Security headers\n    Header always set Strict-Transport-Security \u0026quot;max-age=31536000; includeSubDomains; preload\u0026quot;\n    Header always set X-Frame-Options \u0026quot;SAMEORIGIN\u0026quot;\n    Header always set X-Content-Type-Options \u0026quot;nosniff\u0026quot;\n    Header always set X-XSS-Protection \u0026quot;1; mode=block\u0026quot;\n    Header always set Referrer-Policy \u0026quot;strict-origin-when-cross-origin\u0026quot;\n    \n    # Hide server information\n    Header always unset Server\n    Header always unset X-Powered-By\n\n    \u0026lt;Directory /var/www/html/example.com\u0026gt;\n        Options -Indexes +FollowSymLinks\n        AllowOverride All\n        Require all granted\n        \n        # WordPress security\n        \u0026lt;Files wp-config.php\u0026gt;\n            Require all denied\n        \u0026lt;/Files\u0026gt;\n        \n        \u0026lt;Files .htaccess\u0026gt;\n            Require all denied\n        \u0026lt;/Files\u0026gt;\n        \n        \u0026lt;Files readme.html\u0026gt;\n            Require all denied\n        \u0026lt;/Files\u0026gt;\n        \n        \u0026lt;Files license.txt\u0026gt;\n            Require all denied\n        \u0026lt;/Files\u0026gt;\n    \u0026lt;/Directory\u0026gt;\n\n    # Disable execution in uploads\n    \u0026lt;Directory /var/www/html/example.com/wp-content/uploads\u0026gt;\n        \u0026lt;Files \u0026quot;*.php\u0026quot;\u0026gt;\n            Require all denied\n        \u0026lt;/Files\u0026gt;\n    \u0026lt;/Directory\u0026gt;\n\n    # Rate limiting with mod_evasive\n    \u0026lt;IfModule mod_evasive24.c\u0026gt;\n        DOSHashTableSize    1024\n        DOSPageCount        2\n        DOSSiteCount        50\n        DOSPageInterval     1\n        DOSSiteInterval     1\n        DOSBlockingPeriod   600\n        DOSEmailNotify      admin@example.com\n    \u0026lt;/IfModule\u0026gt;\n\n    # Compression\n    \u0026lt;IfModule mod_deflate.c\u0026gt;\n        SetOutputFilter DEFLATE\n        AddOutputFilterByType DEFLATE text/html text/css text/javascript text/xml text/plain application/javascript application/xml+rss application/xml application/x-javascript application/json\n        \n        # Don\u0026#039;t compress images\n        SetEnvIfNoCase Request_URI \\.(?:gif|jpe?g|png|webp)$ no-gzip dont-vary\n        SetEnvIfNoCase Request_URI \\.(?:exe|t?gz|zip|bz2|sit|rar)$ no-gzip dont-vary\n    \u0026lt;/IfModule\u0026gt;\n\n    # Caching\n    \u0026lt;IfModule mod_expires.c\u0026gt;\n        ExpiresActive On\n        ExpiresByType image/jpg \u0026quot;access plus 1 year\u0026quot;\n        ExpiresByType image/jpeg \u0026quot;access plus 1 year\u0026quot;\n        ExpiresByType image/gif \u0026quot;access plus 1 year\u0026quot;\n        ExpiresByType image/png \u0026quot;access plus 1 year\u0026quot;\n        ExpiresByType image/webp \u0026quot;access plus 1 year\u0026quot;\n        ExpiresByType text/css \u0026quot;access plus 1 month\u0026quot;\n        ExpiresByType application/pdf \u0026quot;access plus 1 month\u0026quot;\n        ExpiresByType text/javascript \u0026quot;access plus 1 month\u0026quot;\n        ExpiresByType application/javascript \u0026quot;access plus 1 month\u0026quot;\n        ExpiresDefault \u0026quot;access plus 1 week\u0026quot;\n    \u0026lt;/IfModule\u0026gt;\n\n    ErrorLog \\${APACHE_LOG_DIR}/wordpress_error.log\n    CustomLog \\${APACHE_LOG_DIR}/wordpress_access.log combined\n\u0026lt;/VirtualHost\u0026gt;\nEOF\n\n# Enable modules and site\nsudo a2enmod ssl headers expires deflate rewrite\nsudo a2ensite wordpress.conf\nsudo a2dissite 000-default\nsudo systemctl restart apache2\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"php-configuration-and-optimization\" class=\"mobile-header\"\u003ePHP Configuration and Optimization\u003c/h2\u003e\n\u003ch3 id=\"php-82-optimization\" class=\"mobile-header\"\u003ePHP 8.2 Optimization\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003eüìã\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Configure PHP-FPM for optimal WordPress performance\nsudo tee /etc/php/8.2/fpm/pool.d/wordpress.conf \u0026gt; /dev/null \u0026lt;\u0026lt;EOF\n[wordpress]\nuser = www-data\ngroup = www-data\nlisten = /var/run/php/php8.2-fpm-wordpress.sock\nlisten.owner = www-data\nlisten.group = www-data\nlisten.mode = 0660\n\n# Process management\npm = dynamic\npm.max_children = 50\npm.start_servers = 5\npm.min_spare_servers = 5\npm.max_spare_servers = 35\npm.max_requests = 1000\npm.process_idle_timeout = 10s\n\n# Resource limits\nphp_admin_value[memory_limit] = 512M\nphp_admin_value[upload_max_filesize] = 64M\nphp_admin_value[post_max_size] = 64M\nphp_admin_value[max_execution_time] = 300\nphp_admin_value[max_input_time] = 300\nphp_admin_value[max_input_vars] = 3000\n\n# Security settings\nphp_admin_flag[allow_url_fopen] = off\nphp_admin_flag[allow_url_include] = off\nphp_admin_flag[file_uploads] = on\nphp_admin_flag[expose_php] = off\nphp_admin_flag[log_errors] = on\nphp_admin_value[error_log] = /var/log/php/wordpress-error.log\n\n# OPcache settings\nphp_admin_flag[opcache.enable] = on\nphp_admin_value[opcache.memory_consumption] = 256\nphp_admin_value[opcache.interned_strings_buffer] = 16\nphp_admin_value[opcache.max_accelerated_files] = 10000\nphp_admin_value[opcache.revalidate_freq] = 2\nphp_admin_flag[opcache.save_comments] = on\nphp_admin_flag[opcache.fast_shutdown] = on\n\n# Session settings\nphp_admin_value[session.save_handler] = redis\nphp_admin_value[session.save_path] = \u0026quot;tcp://127.0.0.1:6379\u0026quot;\nphp_admin_value[session.gc_maxlifetime] = 1440\nEOF\n\n# Create PHP error log directory\nsudo mkdir -p /var/log/php\nsudo chown www-data:www-data /var/log/php\n\n# Configure main PHP settings\nsudo tee -a /etc/php/8.2/fpm/php.ini \u0026gt; /dev/null \u0026lt;\u0026lt;EOF\n\n; WordPress optimizations\nmax_execution_time = 300\nmax_input_time = 300\nmemory_limit = 512M\nupload_max_filesize = 64M\npost_max_size = 64M\nmax_input_vars = 3000\n\n; Security\nexpose_php = Off\nallow_url_fopen = Off\nallow_url_include = Off\ndisplay_errors = Off\nlog_errors = On\nerror_log = /var/log/php/error.log\n\n; Session security\nsession.cookie_httponly = On\nsession.cookie_secure = On\nsession.use_strict_mode = On\n\n; OPcache\nopcache.enable = 1\nopcache.memory_consumption = 256\nopcache.interned_strings_buffer = 16\nopcache.max_accelerated_files = 10000\nopcache.revalidate_freq = 2\nopcache.save_comments = 1\nopcache.fast_shutdown = 1\nopcache.validate_timestamps = 0  ; Production only\n\n; Redis\nextension = redis\n\n; Date/time\ndate.timezone = \u0026quot;America/New_York\u0026quot;\nEOF\n\nsudo systemctl restart php8.2-fpm\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"redis-object-caching-setup\" class=\"mobile-header\"\u003eRedis Object Caching Setup\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003eüìã\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Configure Redis for WordPress\nsudo tee -a /etc/redis/redis.conf \u0026gt; /dev/null \u0026lt;\u0026lt;EOF\n\n# WordPress optimizations\nmaxmemory 512mb\nmaxmemory-policy allkeys-lru\nsave 900 1\nsave 300 10\nsave 60 10000\n\n# Security\nbind 127.0.0.1\nprotected-mode yes\nport 6379\ntcp-backlog 511\n\n# Logging\nloglevel notice\nlogfile /var/log/redis/redis-server.log\n\n# Persistence\nrdbcompression yes\nrdbchecksum yes\nEOF\n\nsudo systemctl restart redis-server\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"wordpress-cli-wp-cli-installation-and-configuration\" class=\"mobile-header\"\u003eWordPress CLI (WP-CLI) Installation and Configuration\u003c/h2\u003e\n\u003ch3 id=\"wp-cli-setup\" class=\"mobile-header\"\u003eWP-CLI Setup\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003eüìã\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Download and install WP-CLI\ncurl -O https://raw.githubusercontent.com/wp-cli/builds/gh-pages/phar/wp-cli.phar\nchmod +x wp-cli.phar\nsudo mv wp-cli.phar /usr/local/bin/wp\n\n# Create WP-CLI configuration\nsudo tee /var/www/html/example.com/wp-cli.yml \u0026gt; /dev/null \u0026lt;\u0026lt;EOF\n# WP-CLI configuration\npath: /var/www/html/example.com\n\ncore config:\n  dbhost: 127.0.0.1\n  dbname: wordpress\n  dbuser: wpuser\n  dbpass: secure_wp_password_2024\n  extra-php: |\n    define(\u0026#039;WP_DEBUG\u0026#039;, false);\n    define(\u0026#039;WP_DEBUG_LOG\u0026#039;, false);\n    define(\u0026#039;DISALLOW_FILE_EDIT\u0026#039;, true);\n    define(\u0026#039;FORCE_SSL_ADMIN\u0026#039;, true);\n    define(\u0026#039;WP_REDIS_HOST\u0026#039;, \u0026#039;127.0.0.1\u0026#039;);\n\nserver:\n  docroot: /var/www/html/example.com\nEOF\n\n# Install WordPress via WP-CLI\ncd /var/www/html/example.com\nsudo -u www-data wp core download --force\nsudo -u www-data wp config create \\\n  --dbname=wordpress \\\n  --dbuser=wpuser \\\n  --dbpass=secure_wp_password_2024 \\\n  --dbhost=127.0.0.1\n\nsudo -u www-data wp core install \\\n  --url=https://example.com \\\n  --title=\u0026quot;Secure WordPress Site\u0026quot; \\\n  --admin_user=admin \\\n  --admin_password=secure_admin_password_2024 \\\n  --admin_email=admin@example.com \\\n  --skip-email\n\n# Essential security plugins\nsudo -u www-data wp plugin install wordfence --activate\nsudo -u www-data wp plugin install redis-cache --activate\nsudo -u www-data wp plugin install wp-super-cache --activate\nsudo -u www-data wp plugin install updraftplus --activate\n\n# Performance plugins\nsudo -u www-data wp plugin install autoptimize --activate\nsudo -u www-data wp plugin install smush --activate\n\n# Enable Redis cache\nsudo -u www-data wp redis enable\n\n# Configure security settings\nsudo -u www-data wp config set FORCE_SSL_ADMIN true --raw\nsudo -u www-data wp config set DISALLOW_FILE_EDIT true --raw\nsudo -u www-data wp config set WP_AUTO_UPDATE_CORE minor --raw\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"security-hardening\" class=\"mobile-header\"\u003eSecurity Hardening\u003c/h2\u003e\n\u003ch3 id=\"file-system-security\" class=\"mobile-header\"\u003eFile System Security\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003eüìã\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Create secure file permissions script\nsudo tee /usr/local/bin/wordpress-permissions.sh \u0026gt; /dev/null \u0026lt;\u0026lt;\u0026#039;EOF\u0026#039;\n#!/bin/bash\nWP_PATH=\u0026quot;/var/www/html/example.com\u0026quot;\nWP_USER=\u0026quot;www-data\u0026quot;\nWP_GROUP=\u0026quot;www-data\u0026quot;\n\n# Set directory permissions\nfind ${WP_PATH}/ -type d -exec chmod 755 {} \\;\n\n# Set file permissions\nfind ${WP_PATH}/ -type f -exec chmod 644 {} \\;\n\n# Secure wp-config.php\nchmod 600 ${WP_PATH}/wp-config.php\n\n# Secure .htaccess\nif [ -f ${WP_PATH}/.htaccess ]; then\n    chmod 644 ${WP_PATH}/.htaccess\nfi\n\n# Set ownership\nchown -R ${WP_USER}:${WP_GROUP} ${WP_PATH}/\n\n# Secure directories\nchmod 755 ${WP_PATH}/wp-content/\nchmod 755 ${WP_PATH}/wp-content/themes/\nchmod 755 ${WP_PATH}/wp-content/plugins/\nchmod 775 ${WP_PATH}/wp-content/uploads/\n\n# Create .htaccess for uploads security (Apache)\ncat \u0026gt; ${WP_PATH}/wp-content/uploads/.htaccess \u0026lt;\u0026lt;EOL\n# Disable PHP execution in uploads directory\n\u0026lt;Files \u0026quot;*.php\u0026quot;\u0026gt;\n    Order Deny,Allow\n    Deny from All\n\u0026lt;/Files\u0026gt;\n\n# Disable directory browsing\nOptions -Indexes\n\n# Deny access to sensitive files\n\u0026lt;FilesMatch \u0026quot;\\.(htaccess|htpasswd|ini|log|sh|inc|bak)$\u0026quot;\u0026gt;\n    Order Allow,Deny\n    Deny from all\n\u0026lt;/FilesMatch\u0026gt;\nEOL\n\necho \u0026quot;WordPress file permissions have been secured\u0026quot;\nEOF\n\nsudo chmod +x /usr/local/bin/wordpress-permissions.sh\nsudo /usr/local/bin/wordpress-permissions.sh\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"wordpress-security-configuration\" class=\"mobile-header\"\u003eWordPress Security Configuration\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003eüìã\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Create comprehensive .htaccess for security (Apache)\nsudo tee /var/www/html/example.com/.htaccess \u0026gt; /dev/null \u0026lt;\u0026lt;EOF\n# WordPress Security .htaccess - 2024\n\n# Block access to wp-config.php\n\u0026lt;Files wp-config.php\u0026gt;\n    Order Allow,Deny\n    Deny from All\n\u0026lt;/Files\u0026gt;\n\n# Block access to readme.html, license.txt, etc.\n\u0026lt;FilesMatch \u0026quot;^(readme\\.html|license\\.txt|wp-config\\.php|\\.htaccess|\\.htpasswd)\u0026quot;\u0026gt;\n    Order Allow,Deny\n    Deny from All\n\u0026lt;/FilesMatch\u0026gt;\n\n# Prevent script injections\nOptions +FollowSymLinks\nRewriteEngine On\nRewriteCond %{QUERY_STRING} (\u0026lt;|%3C).*script.*(\u0026gt;|%3E) [NC,OR]\nRewriteCond %{QUERY_STRING} GLOBALS(=|[|%[0-9A-Z]{0,2}) [OR]\nRewriteCond %{QUERY_STRING} _REQUEST(=|[|%[0-9A-Z]{0,2}) [OR]\nRewriteCond %{QUERY_STRING} ^.*(\\[|\\]|\\(|\\)|\u0026lt;|\u0026gt;|√™|\u0026quot;|;|\\?|\\*|\\$|=) [NC,OR]\nRewriteCond %{QUERY_STRING} (NULL|OUTFILE|LOAD_FILE) [OR]\nRewriteCond %{QUERY_STRING} (\\.{1,}/)+(motd|etc|bin) [NC,OR]\nRewriteCond %{QUERY_STRING} (localhost|loopback|127\\.0\\.0\\.1) [NC,OR]\nRewriteCond %{QUERY_STRING} (\u0026lt;|\u0026gt;|\u0026#039;|%0A|%0D|%27|%3C|%3E|%00) [NC,OR]\nRewriteCond %{QUERY_STRING} concat[^\\(]*\\( [NC,OR]\nRewriteCond %{QUERY_STRING} union([^s]*s)+elect [NC,OR]\nRewriteCond %{QUERY_STRING} union([^a]*a)+ll([^s]*s)+elect [NC,OR]\nRewriteCond %{QUERY_STRING} \\-[sdcr].*(allow_url_include|allow_url_fopen|safe_mode|disable_functions|auto_prepend_file) [NC,OR]\nRewriteCond %{QUERY_STRING} (;|\u0026lt;|\u0026gt;|\u0026#039;|\u0026quot;|\\)|%0A|%0D|%22|%27|%3C|%3E|%00).*(/\\*|union|select|insert|drop|delete|update|cast|create|char|convert|alter|declare|or|;|\\)|script|\\\u0026lt;|\\\u0026gt;|\\\u0026amp;|\\|\\|) [NC]\nRewriteRule ^(.*)$ index.php [F,L]\n\n# Block XML-RPC\n\u0026lt;Files xmlrpc.php\u0026gt;\n    Order Allow,Deny\n    Deny from All\n\u0026lt;/Files\u0026gt;\n\n# Limit login attempts\n\u0026lt;FilesMatch \u0026quot;wp-login.php\u0026quot;\u0026gt;\n    Order Allow,Deny\n    Allow from all\n    # Add your IP for admin access\n    # Allow from 192.168.1.100\n\u0026lt;/FilesMatch\u0026gt;\n\n# Disable directory browsing\nOptions -Indexes\n\n# Protect includes directory\n\u0026lt;IfModule mod_rewrite.c\u0026gt;\n    RewriteEngine On\n    RewriteRule ^wp-admin/includes/ - [F,L]\n    RewriteRule !^wp-includes/ - [S=3]\n    RewriteRule ^wp-includes/[^/]+\\.php$ - [F,L]\n    RewriteRule ^wp-includes/js/tinymce/langs/.+\\.php - [F,L]\n    RewriteRule ^wp-includes/theme-compat/ - [F,L]\n\u0026lt;/IfModule\u0026gt;\n\n# WordPress SEO\nRewriteRule ^index\\.php$ - [L]\nRewriteCond %{REQUEST_FILENAME} !-f\nRewriteCond %{REQUEST_FILENAME} !-d\nRewriteRule . /index.php [L]\n\n# Force HTTPS (if not using NGINX redirect)\n# RewriteCond %{HTTPS} !=on\n# RewriteRule ^(.*)$ https://%{HTTP_HOST}%{REQUEST_URI} [L,R=301]\n\n# Security headers (if mod_headers is enabled)\n\u0026lt;IfModule mod_headers.c\u0026gt;\n    Header always set Strict-Transport-Security \u0026quot;max-age=31536000; includeSubDomains; preload\u0026quot;\n    Header always set X-Frame-Options \u0026quot;SAMEORIGIN\u0026quot;\n    Header always set X-Content-Type-Options \u0026quot;nosniff\u0026quot;\n    Header always set X-XSS-Protection \u0026quot;1; mode=block\u0026quot;\n    Header always set Referrer-Policy \u0026quot;strict-origin-when-cross-origin\u0026quot;\n\u0026lt;/IfModule\u0026gt;\nEOF\n\nsudo chown www-data:www-data /var/www/html/example.com/.htaccess\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"performance-optimization\" class=\"mobile-header\"\u003ePerformance Optimization\u003c/h2\u003e\n\u003ch3 id=\"caching-strategy-implementation\" class=\"mobile-header\"\u003eCaching Strategy Implementation\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003eüìã\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Install and configure Redis plugin\ncd /var/www/html/example.com\nsudo -u www-data wp plugin install redis-cache --activate\n\n# Configure Redis for WordPress\nsudo -u www-data wp config set WP_REDIS_HOST \u0026#039;127.0.0.1\u0026#039; --raw\nsudo -u www-data wp config set WP_REDIS_PORT 6379 --raw --type=integer\nsudo -u www-data wp config set WP_REDIS_DATABASE 0 --raw --type=integer\nsudo -u www-data wp config set WP_REDIS_TIMEOUT 1 --raw --type=integer\nsudo -u www-data wp config set WP_REDIS_READ_TIMEOUT 1 --raw --type=integer\n\n# Enable Redis object cache\nsudo -u www-data wp redis enable\n\n# Install and configure caching plugin\nsudo -u www-data wp plugin install w3-total-cache --activate\n\n# Configure W3 Total Cache via WP-CLI\nsudo -u www-data wp w3-total-cache option set pgcache.enabled true\nsudo -u www-data wp w3-total-cache option set dbcache.enabled true\nsudo -u www-data wp w3-total-cache option set objectcache.enabled true\nsudo -u www-data wp w3-total-cache option set browsercache.enabled true\n\n# Install performance optimization plugins\nsudo -u www-data wp plugin install autoptimize --activate\nsudo -u www-data wp plugin install smush --activate\nsudo -u www-data wp plugin install wp-rocket --activate  # Premium plugin\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"database-optimization\" class=\"mobile-header\"\u003eDatabase Optimization\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003eüìã\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Create database optimization script\nsudo tee /usr/local/bin/wordpress-db-optimize.sh \u0026gt; /dev/null \u0026lt;\u0026lt;\u0026#039;EOF\u0026#039;\n#!/bin/bash\nWP_PATH=\u0026quot;/var/www/html/example.com\u0026quot;\nLOG_FILE=\u0026quot;/var/log/wordpress-optimization.log\u0026quot;\n\ncd ${WP_PATH}\n\nlog_message() {\n    echo \u0026quot;$(date \u0026#039;+%Y-%m-%d %H:%M:%S\u0026#039;) - $1\u0026quot; | tee -a ${LOG_FILE}\n}\n\nlog_message \u0026quot;Starting WordPress database optimization...\u0026quot;\n\n# Database cleanup\nsudo -u www-data wp transient delete --all --quiet\nsudo -u www-data wp db optimize --quiet\nsudo -u www-data wp db repair --quiet\n\n# Clean spam and trash\nsudo -u www-data wp comment delete $(sudo -u www-data wp comment list --status=spam --format=ids) --quiet\nsudo -u www-data wp post delete $(sudo -u www-data wp post list --post_status=trash --format=ids) --quiet\n\n# Optimize images\nif sudo -u www-data wp plugin is-installed smush; then\n    sudo -u www-data wp smush optimize --quiet\nfi\n\n# Clear caches\nif sudo -u www-data wp plugin is-installed w3-total-cache; then\n    sudo -u www-data wp w3-total-cache flush all --quiet\nfi\n\nif sudo -u www-data wp plugin is-installed wp-super-cache; then\n    sudo -u www-data wp super-cache flush --quiet\nfi\n\nif sudo -u www-data wp plugin is-installed redis-cache; then\n    sudo -u www-data wp redis flush --quiet\nfi\n\n# Update WordPress core and plugins\nsudo -u www-data wp core update --quiet\nsudo -u www-data wp plugin update --all --quiet\nsudo -u www-data wp theme update --all --quiet\n\nlog_message \u0026quot;WordPress optimization completed\u0026quot;\nEOF\n\nsudo chmod +x /usr/local/bin/wordpress-db-optimize.sh\n\n# Schedule weekly optimization\necho \u0026quot;0 3 * * 0 root /usr/local/bin/wordpress-db-optimize.sh\u0026quot; | sudo tee -a /etc/crontab\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"cdn-integration\" class=\"mobile-header\"\u003eCDN Integration\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003eüìã\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Configure Cloudflare integration\nsudo -u www-data wp plugin install cloudflare --activate\n\n# Configure CDN settings via WP-CLI\nsudo -u www-data wp option update cloudflare_api_key \u0026quot;your_cloudflare_api_key\u0026quot;\nsudo -u www-data wp option update cloudflare_email \u0026quot;your_email@example.com\u0026quot;\n\n# Install MaxCDN/StackPath plugin\nsudo -u www-data wp plugin install maxcdn --activate\n\n# Configure image optimization\nsudo -u www-data wp plugin install ewww-image-optimizer --activate\nsudo -u www-data wp option update ewww_image_optimizer_cloud_key \u0026quot;your_api_key\u0026quot;\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"ssl-certificate-setup\" class=\"mobile-header\"\u003eSSL Certificate Setup\u003c/h2\u003e\n\u003ch3 id=\"lets-encrypt-ssl-configuration\" class=\"mobile-header\"\u003eLet's Encrypt SSL Configuration\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003eüìã\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Install Certbot\nsudo apt install -y certbot python3-certbot-nginx  # NGINX\nsudo apt install -y certbot python3-certbot-apache # Apache\n\n# Obtain SSL certificate\nsudo certbot --nginx -d example.com -d www.example.com  # NGINX\nsudo certbot --apache -d example.com -d www.example.com # Apache\n\n# Configure automatic renewal\nsudo crontab -e\n# Add: 0 12 * * * /usr/bin/certbot renew --quiet \u0026amp;\u0026amp; systemctl reload nginx\n\n# Test renewal\nsudo certbot renew --dry-run\n\n# Update WordPress URLs to HTTPS\ncd /var/www/html/example.com\nsudo -u www-data wp search-replace \u0026quot;http://example.com\u0026quot; \u0026quot;https://example.com\u0026quot; --dry-run\nsudo -u www-data wp search-replace \u0026quot;http://example.com\u0026quot; \u0026quot;https://example.com\u0026quot;\nsudo -u www-data wp option update home \u0026quot;https://example.com\u0026quot;\nsudo -u www-data wp option update siteurl \u0026quot;https://example.com\u0026quot;\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"backup-and-security\" class=\"mobile-header\"\u003eBackup and Security\u003c/h2\u003e\n\u003ch3 id=\"comprehensive-backup-strategy\" class=\"mobile-header\"\u003eComprehensive Backup Strategy\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003eüìã\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003esudo tee /usr/local/bin/wordpress-backup.sh \u0026gt; /dev/null \u0026lt;\u0026lt;\u0026#039;EOF\u0026#039;\n#!/bin/bash\nBACKUP_DIR=\u0026quot;/backup/wordpress\u0026quot;\nWP_PATH=\u0026quot;/var/www/html/example.com\u0026quot;\nDATE=$(date +%Y%m%d_%H%M%S)\n\nmkdir -p ${BACKUP_DIR}/{files,database,configs}\n\ncd ${WP_PATH}\n\n# Database backup via WP-CLI\nsudo -u www-data wp db export ${BACKUP_DIR}/database/wordpress-${DATE}.sql --quiet\ngzip ${BACKUP_DIR}/database/wordpress-${DATE}.sql\n\n# Files backup (exclude cache and temp files)\ntar --exclude=\u0026#039;${WP_PATH}/wp-content/cache\u0026#039; \\\n    --exclude=\u0026#039;${WP_PATH}/wp-content/uploads/cache\u0026#039; \\\n    --exclude=\u0026#039;${WP_PATH}/wp-content/w3tc-config\u0026#039; \\\n    --exclude=\u0026#039;${WP_PATH}/.htaccess.bak*\u0026#039; \\\n    -czf ${BACKUP_DIR}/files/wordpress-files-${DATE}.tar.gz \\\n    -C /var/www/html example.com\n\n# Configuration backup\ntar -czf ${BACKUP_DIR}/configs/wordpress-config-${DATE}.tar.gz \\\n    /etc/nginx/sites-available/wordpress.conf \\\n    /etc/php/8.2/fpm/pool.d/wordpress.conf \\\n    /etc/mysql/mysql.conf.d/wordpress.cnf \\\n    /etc/redis/redis.conf\n\n# Upload to cloud storage\naws s3 cp ${BACKUP_DIR}/ s3://wordpress-backups/ --recursive\naz storage blob upload-batch --source ${BACKUP_DIR} --destination wordpress-backups\ngsutil cp -r ${BACKUP_DIR}/* gs://wordpress-backups/\n\n# Keep only last 14 backups locally\nfind ${BACKUP_DIR} -name \u0026quot;wordpress-*\u0026quot; -type f -mtime +14 -delete\n\n# Test backup integrity\nif [ -f ${BACKUP_DIR}/database/wordpress-${DATE}.sql.gz ]; then\n    zcat ${BACKUP_DIR}/database/wordpress-${DATE}.sql.gz | head -10 \u0026gt;/dev/null\n    if [ $? -eq 0 ]; then\n        echo \u0026quot;‚úì Database backup integrity verified\u0026quot;\n    else\n        echo \u0026quot;‚úó Database backup may be corrupted\u0026quot;\n    fi\nfi\n\necho \u0026quot;WordPress backup completed: ${DATE}\u0026quot;\nEOF\n\nsudo chmod +x /usr/local/bin/wordpress-backup.sh\n\n# Schedule daily backups\necho \u0026quot;0 2 * * * root /usr/local/bin/wordpress-backup.sh\u0026quot; | sudo tee -a /etc/crontab\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"security-monitoring-and-hardening\" class=\"mobile-header\"\u003eSecurity Monitoring and Hardening\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003eüìã\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Create security monitoring script\nsudo tee /usr/local/bin/wordpress-security-check.sh \u0026gt; /dev/null \u0026lt;\u0026lt;\u0026#039;EOF\u0026#039;\n#!/bin/bash\nWP_PATH=\u0026quot;/var/www/html/example.com\u0026quot;\nSECURITY_LOG=\u0026quot;/var/log/wordpress-security.log\u0026quot;\n\ncd ${WP_PATH}\n\nlog_message() {\n    echo \u0026quot;$(date \u0026#039;+%Y-%m-%d %H:%M:%S\u0026#039;) - $1\u0026quot; | tee -a ${SECURITY_LOG}\n}\n\n# Check for malware\nif command -v clamscan \u0026gt;/dev/null 2\u0026gt;\u0026amp;1; then\n    log_message \u0026quot;Running malware scan...\u0026quot;\n    clamscan -r ${WP_PATH} --infected --remove --quiet\n    if [ $? -eq 0 ]; then\n        log_message \u0026quot;‚úì No malware detected\u0026quot;\n    else\n        log_message \u0026quot;‚ö† Malware detected and removed\u0026quot;\n    fi\nfi\n\n# Check file integrity\nlog_message \u0026quot;Checking WordPress core file integrity...\u0026quot;\nCORE_INTEGRITY=$(sudo -u www-data wp core verify-checksums --quiet 2\u0026gt;\u0026amp;1)\nif [ $? -eq 0 ]; then\n    log_message \u0026quot;‚úì WordPress core files are intact\u0026quot;\nelse\n    log_message \u0026quot;‚ö† WordPress core file integrity issues: ${CORE_INTEGRITY}\u0026quot;\nfi\n\n# Check for vulnerable plugins\nlog_message \u0026quot;Checking for vulnerable plugins...\u0026quot;\nVULN_PLUGINS=$(sudo -u www-data wp vuln plugin-status 2\u0026gt;/dev/null | grep \u0026quot;vulnerable\u0026quot; | wc -l)\nif [ ${VULN_PLUGINS} -eq 0 ]; then\n    log_message \u0026quot;‚úì No vulnerable plugins detected\u0026quot;\nelse\n    log_message \u0026quot;‚ö† ${VULN_PLUGINS} vulnerable plugins found\u0026quot;\nfi\n\n# Check user accounts\nADMIN_COUNT=$(sudo -u www-data wp user list --role=administrator --format=count)\nlog_message \u0026quot;‚Ñπ ${ADMIN_COUNT} administrator accounts found\u0026quot;\n\n# Check for suspicious uploads\nSUSPICIOUS_FILES=$(find ${WP_PATH}/wp-content/uploads -name \u0026quot;*.php\u0026quot; -o -name \u0026quot;*.js\u0026quot; -o -name \u0026quot;*.exe\u0026quot; 2\u0026gt;/dev/null | wc -l)\nif [ ${SUSPICIOUS_FILES} -gt 0 ]; then\n    log_message \u0026quot;‚ö† ${SUSPICIOUS_FILES} suspicious files found in uploads directory\u0026quot;\n    find ${WP_PATH}/wp-content/uploads -name \u0026quot;*.php\u0026quot; -o -name \u0026quot;*.js\u0026quot; -o -name \u0026quot;*.exe\u0026quot; 2\u0026gt;/dev/null \u0026gt;\u0026gt; ${SECURITY_LOG}\nfi\n\n# Check file permissions\nWRITABLE_FILES=$(find ${WP_PATH} -type f -perm 777 2\u0026gt;/dev/null | wc -l)\nif [ ${WRITABLE_FILES} -gt 0 ]; then\n    log_message \u0026quot;‚ö† ${WRITABLE_FILES} files are world-writable\u0026quot;\nfi\n\n# Check .htaccess integrity\nif [ -f ${WP_PATH}/.htaccess ]; then\n    HTACCESS_SIZE=$(stat -c%s ${WP_PATH}/.htaccess)\n    if [ ${HTACCESS_SIZE} -lt 100 ]; then\n        log_message \u0026quot;‚ö† .htaccess file may be compromised or empty\u0026quot;\n    fi\nfi\n\n# Check for brute force attempts\nFAILED_LOGINS=$(grep \u0026quot;authentication failure\u0026quot; /var/log/auth.log | grep -c \u0026quot;$(date +\u0026#039;%b %d\u0026#039;)\u0026quot;)\nif [ ${FAILED_LOGINS} -gt 10 ]; then\n    log_message \u0026quot;‚ö† ${FAILED_LOGINS} failed login attempts detected today\u0026quot;\nfi\n\nlog_message \u0026quot;Security check completed\u0026quot;\nEOF\n\nsudo chmod +x /usr/local/bin/wordpress-security-check.sh\n\n# Schedule daily security checks\necho \u0026quot;0 6 * * * root /usr/local/bin/wordpress-security-check.sh\u0026quot; | sudo tee -a /etc/crontab\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"fail2ban-wordpress-protection\" class=\"mobile-header\"\u003eFail2Ban WordPress Protection\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003eüìã\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Install Fail2Ban\nsudo apt install -y fail2ban  # Ubuntu/Debian\nsudo yum install -y fail2ban  # RHEL/CentOS\n\n# Create WordPress filter\nsudo tee /etc/fail2ban/filter.d/wordpress.conf \u0026gt; /dev/null \u0026lt;\u0026lt;EOF\n[Definition]\nfailregex = ^\u0026lt;HOST\u0026gt;.*POST.*(wp-login\\.php|xmlrpc\\.php).* 200\n            ^\u0026lt;HOST\u0026gt;.*POST.*wp-login\\.php.* 404\n            ^\u0026lt;HOST\u0026gt;.*GET.*wp-admin.* 403\n            ^\u0026lt;HOST\u0026gt;.*POST.*wp-comments-post\\.php.* 403\n\nignoreregex = ^\u0026lt;HOST\u0026gt;.*POST.*wp-login\\.php.*200.*admin\nEOF\n\n# Configure WordPress jail\nsudo tee /etc/fail2ban/jail.d/wordpress.conf \u0026gt; /dev/null \u0026lt;\u0026lt;EOF\n[wordpress]\nenabled = true\nport = http,https\nfilter = wordpress\nlogpath = /var/log/nginx/access.log\nmaxretry = 3\nfindtime = 600\nbantime = 3600\naction = iptables-multiport[name=WordPress, port=\u0026quot;http,https\u0026quot;, protocol=tcp]\n\n[wordpress-xmlrpc]\nenabled = true\nport = http,https\nfilter = wordpress\nlogpath = /var/log/nginx/access.log\nmaxretry = 1\nfindtime = 300\nbantime = 86400\naction = iptables-multiport[name=WordPress-XMLRPC, port=\u0026quot;http,https\u0026quot;, protocol=tcp]\nEOF\n\nsudo systemctl restart fail2ban\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"monitoring-and-maintenance\" class=\"mobile-header\"\u003eMonitoring and Maintenance\u003c/h2\u003e\n\u003ch3 id=\"wordpress-health-monitoring\" class=\"mobile-header\"\u003eWordPress Health Monitoring\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003eüìã\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003esudo tee /usr/local/bin/wordpress-health-check.sh \u0026gt; /dev/null \u0026lt;\u0026lt;\u0026#039;EOF\u0026#039;\n#!/bin/bash\nWP_PATH=\u0026quot;/var/www/html/example.com\u0026quot;\nHEALTH_LOG=\u0026quot;/var/log/wordpress-health.log\u0026quot;\n\ncd ${WP_PATH}\n\nlog_message() {\n    echo \u0026quot;$(date \u0026#039;+%Y-%m-%d %H:%M:%S\u0026#039;) - $1\u0026quot; | tee -a ${HEALTH_LOG}\n}\n\n# Check web server status\nWEB_SERVER=\u0026quot;nginx\u0026quot;\nif command -v apache2 \u0026gt;/dev/null 2\u0026gt;\u0026amp;1; then\n    WEB_SERVER=\u0026quot;apache2\u0026quot;\nelif command -v httpd \u0026gt;/dev/null 2\u0026gt;\u0026amp;1; then\n    WEB_SERVER=\u0026quot;httpd\u0026quot;\nfi\n\nif systemctl is-active ${WEB_SERVER} \u0026gt;/dev/null 2\u0026gt;\u0026amp;1; then\n    log_message \u0026quot;‚úì ${WEB_SERVER} is running\u0026quot;\nelse\n    log_message \u0026quot;‚úó ${WEB_SERVER} is not running\u0026quot;\n    exit 1\nfi\n\n# Check database connectivity\nif sudo -u www-data wp db check --quiet \u0026gt;/dev/null 2\u0026gt;\u0026amp;1; then\n    log_message \u0026quot;‚úì Database connection is healthy\u0026quot;\nelse\n    log_message \u0026quot;‚úó Database connection issues\u0026quot;\nfi\n\n# Check WordPress status\nWP_VERSION=$(sudo -u www-data wp core version --quiet)\nlog_message \u0026quot;‚Ñπ WordPress version: ${WP_VERSION}\u0026quot;\n\n# Check for updates\nCORE_UPDATES=$(sudo -u www-data wp core check-update --format=count --quiet)\nPLUGIN_UPDATES=$(sudo -u www-data wp plugin list --update=available --format=count --quiet)\nTHEME_UPDATES=$(sudo -u www-data wp theme list --update=available --format=count --quiet)\n\nlog_message \u0026quot;‚Ñπ Updates available - Core: ${CORE_UPDATES}, Plugins: ${PLUGIN_UPDATES}, Themes: ${THEME_UPDATES}\u0026quot;\n\n# Check Redis cache\nif sudo -u www-data wp redis status \u0026gt;/dev/null 2\u0026gt;\u0026amp;1; then\n    log_message \u0026quot;‚úì Redis object cache is working\u0026quot;\nelse\n    log_message \u0026quot;‚ö† Redis object cache issues\u0026quot;\nfi\n\n# Check disk space\nDISK_USAGE=$(df ${WP_PATH} | awk \u0026#039;NR==2 {print $5}\u0026#039; | sed \u0026#039;s/%//\u0026#039;)\nif [ ${DISK_USAGE} -gt 85 ]; then\n    log_message \u0026quot;‚ö† Disk usage is ${DISK_USAGE}%\u0026quot;\nelse\n    log_message \u0026quot;‚úì Disk usage is ${DISK_USAGE}%\u0026quot;\nfi\n\n# Check file permissions\nWRITABLE_WP_CONFIG=$([ -w ${WP_PATH}/wp-config.php ] \u0026amp;\u0026amp; echo \u0026quot;1\u0026quot; || echo \u0026quot;0\u0026quot;)\nif [ ${WRITABLE_WP_CONFIG} -eq 1 ]; then\n    log_message \u0026quot;‚ö† wp-config.php is writable - security risk\u0026quot;\nelse\n    log_message \u0026quot;‚úì wp-config.php permissions are secure\u0026quot;\nfi\n\n# Check SSL certificate\nSSL_EXPIRY=$(echo | openssl s_client -servername example.com -connect example.com:443 2\u0026gt;/dev/null | openssl x509 -noout -dates | grep notAfter | cut -d= -f2)\nSSL_EXPIRY_EPOCH=$(date -d \u0026quot;$SSL_EXPIRY\u0026quot; +%s)\nCURRENT_EPOCH=$(date +%s)\nDAYS_TO_SSL_EXPIRY=$(( (SSL_EXPIRY_EPOCH - CURRENT_EPOCH) / 86400 ))\n\nif [ ${DAYS_TO_SSL_EXPIRY} -lt 30 ]; then\n    log_message \u0026quot;‚ö† SSL certificate expires in ${DAYS_TO_SSL_EXPIRY} days\u0026quot;\nelse\n    log_message \u0026quot;‚úì SSL certificate expires in ${DAYS_TO_SSL_EXPIRY} days\u0026quot;\nfi\n\n# Check website accessibility\nHTTP_STATUS=$(curl -s -o /dev/null -w \u0026quot;%{http_code}\u0026quot; https://example.com)\nif [ \u0026quot;${HTTP_STATUS}\u0026quot; = \u0026quot;200\u0026quot; ]; then\n    log_message \u0026quot;‚úì Website is accessible (HTTP ${HTTP_STATUS})\u0026quot;\nelse\n    log_message \u0026quot;‚úó Website accessibility issues (HTTP ${HTTP_STATUS})\u0026quot;\nfi\n\nlog_message \u0026quot;WordPress health check completed\u0026quot;\nEOF\n\nsudo chmod +x /usr/local/bin/wordpress-health-check.sh\n\n# Schedule health checks every 30 minutes\necho \u0026quot;*/30 * * * * root /usr/local/bin/wordpress-health-check.sh\u0026quot; | sudo tee -a /etc/crontab\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"wordpress-security-scanning\" class=\"mobile-header\"\u003eWordPress Security Scanning\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003eüìã\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Install WP-CLI vulnerability scanner\nsudo -u www-data wp package install wp-cli/doctor-command\n\n# Create comprehensive security scan script\nsudo tee /usr/local/bin/wordpress-security-scan.sh \u0026gt; /dev/null \u0026lt;\u0026lt;\u0026#039;EOF\u0026#039;\n#!/bin/bash\nWP_PATH=\u0026quot;/var/www/html/example.com\u0026quot;\nSCAN_LOG=\u0026quot;/var/log/wordpress-security-scan.log\u0026quot;\nDATE=$(date +%Y%m%d_%H%M%S)\n\ncd ${WP_PATH}\n\nlog_message() {\n    echo \u0026quot;$(date \u0026#039;+%Y-%m-%d %H:%M:%S\u0026#039;) - $1\u0026quot; | tee -a ${SCAN_LOG}\n}\n\nlog_message \u0026quot;Starting WordPress security scan...\u0026quot;\n\n# Check WordPress version\nWP_VERSION=$(sudo -u www-data wp core version --quiet)\nLATEST_VERSION=$(sudo -u www-data wp core check-update --format=csv --quiet | tail -1 | cut -d, -f2)\n\nif [ \u0026quot;${WP_VERSION}\u0026quot; != \u0026quot;${LATEST_VERSION}\u0026quot; ] \u0026amp;\u0026amp; [ -n \u0026quot;${LATEST_VERSION}\u0026quot; ]; then\n    log_message \u0026quot;‚ö† WordPress is outdated (${WP_VERSION}), latest is ${LATEST_VERSION}\u0026quot;\nelse\n    log_message \u0026quot;‚úì WordPress is up to date (${WP_VERSION})\u0026quot;\nfi\n\n# Check for vulnerable plugins\nsudo -u www-data wp plugin list --format=json \u0026gt; /tmp/wp-plugins-${DATE}.json\nwhile read -r plugin; do\n    plugin_name=$(echo $plugin | jq -r .name)\n    plugin_version=$(echo $plugin | jq -r .version)\n    plugin_update=$(echo $plugin | jq -r .update)\n    \n    if [ \u0026quot;$plugin_update\u0026quot; != \u0026quot;none\u0026quot; ] \u0026amp;\u0026amp; [ \u0026quot;$plugin_update\u0026quot; != \u0026quot;null\u0026quot; ]; then\n        log_message \u0026quot;‚ö† Plugin update available: ${plugin_name} (${plugin_version})\u0026quot;\n    fi\ndone \u0026lt; \u0026lt;(jq -c \u0026#039;.[]\u0026#039; /tmp/wp-plugins-${DATE}.json)\n\n# Check theme security\nACTIVE_THEME=$(sudo -u www-data wp theme status --format=json | jq -r \u0026#039;.[] | select(.status==\u0026quot;Active\u0026quot;) | .name\u0026#039;)\nlog_message \u0026quot;‚Ñπ Active theme: ${ACTIVE_THEME}\u0026quot;\n\n# Check user accounts\nUSERS_WITH_ADMIN=$(sudo -u www-data wp user list --role=administrator --format=count --quiet)\nlog_message \u0026quot;‚Ñπ ${USERS_WITH_ADMIN} administrator accounts\u0026quot;\n\n# Check for inactive plugins\nINACTIVE_PLUGINS=$(sudo -u www-data wp plugin list --status=inactive --format=count --quiet)\nif [ ${INACTIVE_PLUGINS} -gt 0 ]; then\n    log_message \u0026quot;‚Ñπ ${INACTIVE_PLUGINS} inactive plugins (consider removing)\u0026quot;\nfi\n\n# Check database integrity\nif sudo -u www-data wp db check --quiet \u0026gt;/dev/null 2\u0026gt;\u0026amp;1; then\n    log_message \u0026quot;‚úì Database integrity check passed\u0026quot;\nelse\n    log_message \u0026quot;‚ö† Database integrity issues detected\u0026quot;\nfi\n\n# Check for spam content\nSPAM_COMMENTS=$(sudo -u www-data wp comment list --status=spam --format=count --quiet)\nif [ ${SPAM_COMMENTS} -gt 0 ]; then\n    log_message \u0026quot;‚Ñπ ${SPAM_COMMENTS} spam comments detected\u0026quot;\nfi\n\n# Run Wordfence scan (if installed)\nif sudo -u www-data wp plugin is-installed wordfence; then\n    log_message \u0026quot;Running Wordfence security scan...\u0026quot;\n    # Note: Wordfence CLI scanning requires premium\nfi\n\n# Check file changes (basic integrity)\nfind ${WP_PATH} -name \u0026quot;*.php\u0026quot; -newer ${WP_PATH}/wp-config.php | wc -l \u0026gt; /tmp/changed_files_count\nCHANGED_FILES=$(cat /tmp/changed_files_count)\nif [ ${CHANGED_FILES} -gt 5 ]; then\n    log_message \u0026quot;‚ö† ${CHANGED_FILES} PHP files changed recently\u0026quot;\nfi\n\nlog_message \u0026quot;WordPress security scan completed\u0026quot;\nEOF\n\nsudo chmod +x /usr/local/bin/wordpress-security-scan.sh\n\n# Schedule daily security scans\necho \u0026quot;0 7 * * * root /usr/local/bin/wordpress-security-scan.sh\u0026quot; | sudo tee -a /etc/crontab\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"troubleshooting-cross-platform\" class=\"mobile-header\"\u003eTroubleshooting (Cross-Platform)\u003c/h2\u003e\n\u003ch3 id=\"common-issues-and-solutions\" class=\"mobile-header\"\u003eCommon Issues and Solutions\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003eüìã\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Check web server status\nsudo systemctl status nginx    # or apache2/httpd\nsudo systemctl status php8.2-fpm\nsudo systemctl status mariadb\n\n# Test database connection\nmysql -u wpuser -p wordpress -e \u0026quot;SELECT 1;\u0026quot;\n\n# Check PHP-FPM logs\nsudo tail -f /var/log/php8.2-fpm.log\n\n# WordPress debug mode\ncd /var/www/html/example.com\nsudo -u www-data wp config set WP_DEBUG true --raw\nsudo -u www-data wp config set WP_DEBUG_LOG true --raw\nsudo tail -f /var/www/html/example.com/wp-content/debug.log\n\n# Check web server logs\nsudo tail -f /var/log/nginx/error.log          # NGINX\nsudo tail -f /var/log/apache2/error.log        # Apache\n\n# Clear all caches\nsudo -u www-data wp cache flush\nsudo -u www-data wp redis flush\nsudo -u www-data wp super-cache flush\n\n# Reset file permissions\nsudo /usr/local/bin/wordpress-permissions.sh\n\n# Database repair\nsudo -u www-data wp db repair\n\n# Plugin conflict troubleshooting\nsudo -u www-data wp plugin deactivate --all\nsudo -u www-data wp plugin activate plugin-name\n\n# Theme troubleshooting\nsudo -u www-data wp theme activate twentytwentyfour\n\n# Memory issues\nsudo -u www-data wp config set WP_MEMORY_LIMIT 1024M --raw\nfree -h\n\n# Check disk space\ndf -h /var/www/html/example.com\ndu -sh /var/www/html/example.com/wp-content/uploads/\n\n# SSL issues\nsudo certbot certificates\nsudo nginx -t  # or apache2ctl configtest\n\n# Performance debugging\nsudo -u www-data wp profile hook --all\nsudo -u www-data wp doctor check\n\n# Database optimization\nsudo -u www-data wp db optimize\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"advanced-debugging\" class=\"mobile-header\"\u003eAdvanced Debugging\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003eüìã\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Enable WordPress debugging\nsudo -u www-data wp config set WP_DEBUG true --raw\nsudo -u www-data wp config set WP_DEBUG_LOG true --raw\nsudo -u www-data wp config set WP_DEBUG_DISPLAY false --raw\nsudo -u www-data wp config set SCRIPT_DEBUG true --raw\n\n# Query debugging\nsudo -u www-data wp config set SAVEQUERIES true --raw\n\n# Enable error logging\nsudo tee -a /etc/php/8.2/fpm/php.ini \u0026gt; /dev/null \u0026lt;\u0026lt;EOF\n; WordPress debugging\nlog_errors = On\nerror_log = /var/log/php/wordpress-errors.log\ndisplay_errors = Off\ndisplay_startup_errors = Off\nEOF\n\nsudo systemctl restart php8.2-fpm\n\n# Monitor real-time logs\ntail -f /var/www/html/example.com/wp-content/debug.log\ntail -f /var/log/php/wordpress-errors.log\ntail -f /var/log/nginx/error.log\n\n# Database query analysis\nsudo -u www-data wp db query \u0026quot;SHOW FULL PROCESSLIST;\u0026quot;\nsudo -u www-data wp db query \u0026quot;SHOW STATUS LIKE \u0026#039;Slow_queries\u0026#039;;\u0026quot;\n\n# Memory profiling\nsudo -u www-data wp eval \u0026#039;echo \u0026quot;Memory usage: \u0026quot; . memory_get_usage(true) / 1024 / 1024 . \u0026quot; MB\\n\u0026quot;;\u0026#039;\n\n# Plugin profiling\nsudo -u www-data wp plugin list --status=active\nsudo -u www-data wp eval \u0026#039;foreach(get_option(\u0026quot;active_plugins\u0026quot;) as $p) { echo $p . \u0026quot;\\n\u0026quot;; }\u0026#039;\n\n# Theme debugging\nsudo -u www-data wp theme status\nsudo -u www-data wp eval \u0026#039;echo get_template_directory() . \u0026quot;\\n\u0026quot;;\u0026#039;\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"additional-resources\" class=\"mobile-header\"\u003eAdditional Resources\u003c/h2\u003e\n\u003cli class=\"mobile-list-item\"\u003e\u003ca href=\"https://wordpress.org/documentation/\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\"\u003eOfficial Documentation\u003c/a\u003e\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003e\u003ca href=\"https://wp-cli.org/\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\"\u003eWP-CLI Documentation\u003c/a\u003e\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003e\u003ca href=\"https://wordpress.org/support/article/hardening-wordpress/\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\"\u003eWordPress Security Guide\u003c/a\u003e\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003e\u003ca href=\"https://wordpress.org/support/article/optimization/\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\"\u003ePerformance Best Practices\u003c/a\u003e\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003e\u003ca href=\"https://codex.wordpress.org/\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\"\u003eWordPress Codex\u003c/a\u003e\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003e\u003ca href=\"https://www.wordfence.com/\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\"\u003eSecurity Plugin: Wordfence\u003c/a\u003e\u003c/li\u003e\n\u003cp class=\"mobile-paragraph\"\u003e---\u003c/p\u003e\n\u003cp class=\"mobile-paragraph\"\u003e\u003cstrong\u003eNote:\u003c/strong\u003e This guide is part of the \u003ca href=\"https://howtomgr.github.io\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\"\u003eHowToMgr\u003c/a\u003e collection.\u003c/p\u003e","readTime":"27 min","wordCount":5295,"lastBuilt":"2025-09-15T18:14:29.611Z"},"category":{"key":"productivity","name":"Productivity","description":"Content management and productivity tools","icon":"‚ö°","color":"#ff79c6","keywords":["nextcloud","wordpress","ghost","bookstack","outline","bitwarden"]},"relatedGuides":[{"name":"ghost","displayName":"Ghost","slug":"ghost","description":"Repo for ghost","category":"productivity","language":null,"stars":0,"forks":0,"topics":[],"githubUrl":"https://github.com/howtomgr/ghost","updatedAt":"2025-09-08T03:07:48Z","createdAt":"2025-09-08T03:07:38Z","readmeRaw":"## üëã Welcome to ghost üöÄ  \n\nghost README  \n  \n  \n## Author  \n\nü§ñ casjay: [Github](https://github.com/casjay) ü§ñ  \n","readmeHtml":"\u003ch2 id=\"welcome-to-ghost\" class=\"mobile-header\"\u003eüëã Welcome to ghost üöÄ  \u003c/h2\u003e\n\u003cp class=\"mobile-paragraph\"\u003eghost README  \u003c/p\u003e\n\u003ch2 id=\"author\" class=\"mobile-header\"\u003eAuthor  \u003c/h2\u003e\n\u003cp class=\"mobile-paragraph\"\u003eü§ñ casjay: \u003ca href=\"https://github.com/casjay\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\"\u003eGithub\u003c/a\u003e ü§ñ  \u003c/p\u003e","readTime":"1 min","wordCount":15,"lastBuilt":"2025-09-15T18:14:54.885Z"},{"name":"nextcloud","displayName":"Nextcloud","slug":"nextcloud","description":"Repo for nextcloud","category":"productivity","language":null,"stars":0,"forks":0,"topics":[],"githubUrl":"https://github.com/howtomgr/nextcloud","updatedAt":"2025-09-08T03:12:12Z","createdAt":"2025-09-08T03:12:02Z","readmeRaw":"# Nextcloud Installation Guide\n\nSelf-hosted file sync and share platform with collaboration features, calendar, contacts, and extensive app ecosystem.\n\n## Prerequisites\n\n- Linux system (Ubuntu/Debian, RHEL/CentOS, or compatible)\n- Web server (Apache or NGINX)\n- PHP 8.0+ with required extensions\n- Database (MySQL/MariaDB, PostgreSQL, or SQLite)\n- 2GB RAM minimum, 4GB+ recommended\n\n## Installation\n\n### LAMP Stack Setup (Apache + MySQL + PHP)\n```bash\n# Ubuntu/Debian\nsudo apt update\nsudo apt install -y apache2 mariadb-server php php-mysql php-gd php-curl php-mbstring php-intl php-mcrypt php-imagick php-xml php-zip php-bcmath php-gmp\n\n# RHEL/CentOS\nsudo yum install -y httpd mariadb-server php php-mysql php-gd php-curl php-mbstring php-intl php-mcrypt php-imagick php-xml php-zip php-bcmath php-gmp\n\n# Enable services\nsudo systemctl enable --now apache2 mariadb  # Ubuntu/Debian\nsudo systemctl enable --now httpd mariadb    # RHEL/CentOS\n```\n\n### Database Setup\n```bash\n# Secure MySQL installation\nsudo mysql_secure_installation\n\n# Create Nextcloud database\nsudo mysql -u root -p \u003c\u003cEOF\nCREATE DATABASE nextcloud CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci;\nCREATE USER 'nextclouduser'@'localhost' IDENTIFIED BY 'secure_password';\nGRANT ALL PRIVILEGES ON nextcloud.* TO 'nextclouduser'@'localhost';\nFLUSH PRIVILEGES;\nEXIT\nEOF\n```\n\n### Nextcloud Download and Setup\n```bash\n# Download Nextcloud\ncd /tmp\nwget https://download.nextcloud.com/server/releases/latest.tar.bz2\ntar -xjf latest.tar.bz2\n\n# Move to web directory\nsudo cp -R nextcloud /var/www/html/\nsudo chown -R www-data:www-data /var/www/html/nextcloud  # Ubuntu/Debian\nsudo chown -R apache:apache /var/www/html/nextcloud      # RHEL/CentOS\n\n# Set proper permissions\nsudo find /var/www/html/nextcloud/ -type f -print0 | xargs -0 chmod 0640\nsudo find /var/www/html/nextcloud/ -type d -print0 | xargs -0 chmod 0750\nsudo chmod 750 /var/www/html/nextcloud\nsudo chmod -R 770 /var/www/html/nextcloud/data\nsudo chmod -R 770 /var/www/html/nextcloud/apps\nsudo chmod -R 770 /var/www/html/nextcloud/config\n```\n\n### Using Docker Compose\n```bash\n# Create docker-compose.yml\nmkdir -p ~/nextcloud \u0026\u0026 cd ~/nextcloud\n\ncat \u003e docker-compose.yml \u003c\u003cEOF\nversion: '3.8'\n\nservices:\n  nextcloud:\n    image: nextcloud:latest\n    restart: unless-stopped\n    ports:\n      - \"8080:80\"\n    volumes:\n      - nextcloud_data:/var/www/html\n      - ./config:/var/www/html/config\n      - ./custom_apps:/var/www/html/custom_apps\n      - ./data:/var/www/html/data\n    environment:\n      - MYSQL_HOST=db\n      - MYSQL_DATABASE=nextcloud\n      - MYSQL_USER=nextcloud\n      - MYSQL_PASSWORD=secure_password\n      - NEXTCLOUD_ADMIN_USER=admin\n      - NEXTCLOUD_ADMIN_PASSWORD=admin_password\n      - NEXTCLOUD_TRUSTED_DOMAINS=nextcloud.example.com\n    depends_on:\n      - db\n      - redis\n    networks:\n      - nextcloud\n\n  db:\n    image: mariadb:10.6\n    restart: unless-stopped\n    command: --transaction-isolation=READ-COMMITTED --binlog-format=ROW --innodb-file-per-table=1 --skip-innodb-read-only-compressed\n    volumes:\n      - db_data:/var/lib/mysql\n    environment:\n      - MYSQL_ROOT_PASSWORD=root_password\n      - MYSQL_PASSWORD=secure_password\n      - MYSQL_DATABASE=nextcloud\n      - MYSQL_USER=nextcloud\n    networks:\n      - nextcloud\n\n  redis:\n    image: redis:alpine\n    restart: unless-stopped\n    networks:\n      - nextcloud\n\nvolumes:\n  nextcloud_data:\n  db_data:\n\nnetworks:\n  nextcloud:\n    driver: bridge\nEOF\n\n# Start services\ndocker-compose up -d\n\n# Check logs\ndocker-compose logs -f nextcloud\n```\n\n## Configuration\n\n### Apache Virtual Host\n```bash\n# Create Apache virtual host\nsudo tee /etc/apache2/sites-available/nextcloud.conf \u003e /dev/null \u003c\u003cEOF\n\u003cVirtualHost *:80\u003e\n    ServerName nextcloud.example.com\n    DocumentRoot /var/www/html/nextcloud\n\n    \u003cDirectory /var/www/html/nextcloud/\u003e\n        Require all granted\n        AllowOverride All\n        Options FollowSymLinks MultiViews\n        \n        \u003cIfModule mod_dav.c\u003e\n            Dav off\n        \u003c/IfModule\u003e\n    \u003c/Directory\u003e\n\n    # Security headers\n    Header always set Strict-Transport-Security \"max-age=15552000; includeSubDomains\"\n    Header always set X-Content-Type-Options nosniff\n    Header always set X-Frame-Options \"SAMEORIGIN\"\n    Header always set X-XSS-Protection \"1; mode=block\"\n    Header always set Referrer-Policy \"no-referrer\"\n    Header always set Feature-Policy \"camera 'none'; microphone 'none'\"\n\n    ErrorLog \\${APACHE_LOG_DIR}/nextcloud_error.log\n    CustomLog \\${APACHE_LOG_DIR}/nextcloud_access.log combined\n\u003c/VirtualHost\u003e\nEOF\n\n# Enable required modules\nsudo a2enmod rewrite headers env dir mime ssl\nsudo a2ensite nextcloud.conf\nsudo systemctl restart apache2\n```\n\n### NGINX Configuration\n```bash\n# Create NGINX server block\nsudo tee /etc/nginx/sites-available/nextcloud \u003e /dev/null \u003c\u003cEOF\nupstream php-handler {\n    server unix:/var/run/php/php8.0-fpm.sock;\n}\n\nserver {\n    listen 80;\n    server_name nextcloud.example.com;\n    return 301 https://\\$server_name\\$request_uri;\n}\n\nserver {\n    listen 443 ssl http2;\n    server_name nextcloud.example.com;\n\n    # SSL configuration\n    ssl_certificate /etc/ssl/certs/nextcloud.crt;\n    ssl_certificate_key /etc/ssl/private/nextcloud.key;\n    ssl_protocols TLSv1.2 TLSv1.3;\n    ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:ECDHE-RSA-AES256-GCM-SHA384;\n    ssl_prefer_server_ciphers off;\n\n    # Security headers\n    add_header Strict-Transport-Security \"max-age=15768000; includeSubDomains; preload\" always;\n    add_header Referrer-Policy \"no-referrer\" always;\n    add_header X-Content-Type-Options \"nosniff\" always;\n    add_header X-Download-Options \"noopen\" always;\n    add_header X-Frame-Options \"SAMEORIGIN\" always;\n    add_header X-Permitted-Cross-Domain-Policies \"none\" always;\n    add_header X-Robots-Tag \"none\" always;\n    add_header X-XSS-Protection \"1; mode=block\" always;\n\n    # Remove X-Powered-By\n    fastcgi_hide_header X-Powered-By;\n\n    # Path to the root of your installation\n    root /var/www/html/nextcloud;\n    index index.php index.html /index.php\\$request_uri;\n\n    # Rule borrowed from `.htaccess` to handle Microsoft DAV clients\n    location = / {\n        if ( \\$http_user_agent ~ ^DavClnt ) {\n            return 302 /remote.php/webdav/\\$is_args\\$args;\n        }\n    }\n\n    location = /robots.txt {\n        allow all;\n        log_not_found off;\n        access_log off;\n    }\n\n    # Make a regex exception for `/.well-known` so that clients can still\n    # access it despite the existence of the regex rule\n    location ^~ /.well-known {\n        location = /.well-known/carddav { return 301 /remote.php/dav/; }\n        location = /.well-known/caldav  { return 301 /remote.php/dav/; }\n        location /.well-known/acme-challenge    { try_files \\$uri \\$uri/ =404; }\n        location /.well-known/pki-validation    { try_files \\$uri \\$uri/ =404; }\n        return 301 /index.php\\$request_uri;\n    }\n\n    # Rules borrowed from `.htaccess` to hide certain paths.\n    location ~ ^/(?:build|tests|config|lib|3rdparty|templates|data)(?:\\$|/)  { return 404; }\n    location ~ ^/(?:\\\\.|autotest|occ|issue|indie|db_|console)                { return 404; }\n\n    # Ensure this block, which passes PHP files to the PHP process, is above the blocks\n    # which handle static assets (as seen below). If this block is not declared first,\n    # then Nginx will encounter an infinite rewriting loop when it prepends\n    # `/index.php` to the URI, resulting in a HTTP 500 error response.\n    location ~ \\\\.php(?:\\$|/) {\n        # Required for legacy support\n        rewrite ^/(?!index|remote|public|cron|core\\\\/ajax\\\\/update|status|ocs\\\\/v[12]|updater\\\\/.+|oc[ms]-provider\\\\/.+|.+\\\\/richdocumentscode\\\\/proxy) /index.php\\$request_uri;\n\n        fastcgi_split_path_info ^(.+?\\\\.php)(/.*)\\$;\n        set \\$path_info \\$fastcgi_path_info;\n\n        try_files \\$fastcgi_script_name =404;\n\n        include fastcgi_params;\n        fastcgi_param SCRIPT_FILENAME \\$document_root\\$fastcgi_script_name;\n        fastcgi_param PATH_INFO \\$path_info;\n        fastcgi_param HTTPS on;\n\n        fastcgi_param modHeadersAvailable true;\n        fastcgi_param front_controller_active true;\n        fastcgi_pass php-handler;\n\n        fastcgi_intercept_errors on;\n        fastcgi_request_buffering off;\n    }\n\n    location ~ \\\\.(?:css|js|svg|gif|png|jpg|ico)\\$ {\n        try_files \\$uri /index.php\\$request_uri;\n        expires 6M;\n        access_log off;\n    }\n\n    location ~ \\\\.woff2?\\$ {\n        try_files \\$uri /index.php\\$request_uri;\n        expires 7d;\n        access_log off;\n    }\n\n    # Rule borrowed from `.htaccess`\n    location /remote {\n        return 301 /remote.php\\$request_uri;\n    }\n\n    location / {\n        try_files \\$uri \\$uri/ /index.php\\$request_uri;\n    }\n}\nEOF\n\n# Enable site\nsudo ln -s /etc/nginx/sites-available/nextcloud /etc/nginx/sites-enabled/\nsudo nginx -t \u0026\u0026 sudo systemctl restart nginx\n```\n\n### PHP Configuration\n```bash\n# Optimize PHP for Nextcloud\nsudo nano /etc/php/8.0/apache2/php.ini  # Apache\nsudo nano /etc/php/8.0/fpm/php.ini      # NGINX\n\n# Recommended settings:\nmemory_limit = 512M\nupload_max_filesize = 16G\npost_max_size = 16G\nmax_execution_time = 3600\nmax_input_time = 3600\nmax_input_vars = 3000\ndate.timezone = \"America/New_York\"\n\n# OPcache settings\nopcache.enable = 1\nopcache.interned_strings_buffer = 16\nopcache.max_accelerated_files = 10000\nopcache.memory_consumption = 128\nopcache.save_comments = 1\nopcache.revalidate_freq = 1\n\n# APCu for local cache\napc.enable_cli = 1\n\nsudo systemctl restart apache2  # Apache\nsudo systemctl restart php8.0-fpm  # NGINX\n```\n\n### Command Line Installation\n```bash\n# Install via command line\ncd /var/www/html/nextcloud\nsudo -u www-data php occ maintenance:install \\\n  --database=\"mysql\" \\\n  --database-name=\"nextcloud\" \\\n  --database-user=\"nextclouduser\" \\\n  --database-pass=\"secure_password\" \\\n  --admin-user=\"admin\" \\\n  --admin-pass=\"admin_password\" \\\n  --data-dir=\"/var/www/html/nextcloud/data\"\n\n# Configure trusted domains\nsudo -u www-data php occ config:system:set trusted_domains 0 --value=nextcloud.example.com\nsudo -u www-data php occ config:system:set trusted_domains 1 --value=192.168.1.100\n\n# Configure caching\nsudo -u www-data php occ config:system:set memcache.local --value=\"\\\\OC\\\\Memcache\\\\APCu\"\nsudo -u www-data php occ config:system:set memcache.distributed --value=\"\\\\OC\\\\Memcache\\\\Redis\"\nsudo -u www-data php occ config:system:set redis host --value=\"localhost\"\nsudo -u www-data php occ config:system:set redis port --value=6379\n```\n\n## Performance Optimization\n\n### Redis Caching Setup\n```bash\n# Install Redis\nsudo apt install -y redis-server  # Ubuntu/Debian\nsudo yum install -y redis          # RHEL/CentOS\n\nsudo systemctl enable --now redis\n\n# Configure Redis for Nextcloud\nsudo tee -a /etc/redis/redis.conf \u003e /dev/null \u003c\u003cEOF\nmaxmemory 512mb\nmaxmemory-policy allkeys-lru\nsave 900 1\nsave 300 10\nsave 60 10000\nEOF\n\nsudo systemctl restart redis\n\n# Install Redis PHP extension\nsudo apt install -y php-redis  # Ubuntu/Debian\nsudo yum install -y php-redis   # RHEL/CentOS\n\n# Configure Nextcloud to use Redis\nsudo -u www-data php occ config:system:set memcache.local --value=\"\\\\OC\\\\Memcache\\\\APCu\"\nsudo -u www-data php occ config:system:set memcache.distributed --value=\"\\\\OC\\\\Memcache\\\\Redis\"\nsudo -u www-data php occ config:system:set redis host --value=\"localhost\"\nsudo -u www-data php occ config:system:set redis port --value=6379\n```\n\n### Database Optimization\n```bash\n# MySQL/MariaDB optimization for Nextcloud\nsudo tee -a /etc/mysql/mysql.conf.d/nextcloud.cnf \u003e /dev/null \u003c\u003cEOF\n[mysqld]\ninnodb_buffer_pool_size = 1G\ninnodb_io_capacity = 4000\ninnodb_log_file_size = 128M\ninnodb_log_buffer_size = 32M\ninnodb_flush_log_at_trx_commit = 1\ninnodb_flush_method = O_DIRECT\ninnodb_file_per_table = 1\n\nquery_cache_type = 1\nquery_cache_limit = 2M\nquery_cache_size = 64M\n\ntmp_table_size = 64M\nmax_heap_table_size = 64M\n\njoin_buffer_size = 262144\nsort_buffer_size = 262144\n\nmax_connections = 100\nmax_connect_errors = 10\nconnect_timeout = 5\nwait_timeout = 600\nmax_allowed_packet = 64M\n\nthread_cache_size = 128\nquery_cache_size = 64M\n\n[mysql.server]\ndefault-table-type = innodb\nEOF\n\nsudo systemctl restart mysql\n\n# Add indexes for better performance\nmysql -u nextclouduser -p nextcloud \u003c\u003cEOF\nALTER TABLE oc_jobs ADD INDEX jobs_class_index (class);\nALTER TABLE oc_filecache ADD INDEX fs_mtime (mtime);\nEOF\n```\n\n### Background Jobs\n```bash\n# Configure cron for background jobs\nsudo crontab -u www-data -e\n# Add: */5 * * * * php /var/www/html/nextcloud/occ system:cron\n\n# Or configure via occ command\nsudo -u www-data php occ background:cron\n\n# Check background job status\nsudo -u www-data php occ status\nsudo -u www-data php occ background:job:list\n```\n\n## Security Hardening\n\n### File Permissions and Security\n```bash\n# Secure file permissions script\nsudo tee /usr/local/bin/nextcloud-permissions.sh \u003e /dev/null \u003c\u003c'EOF'\n#!/bin/bash\nncpath='/var/www/html/nextcloud'\nhtuser='www-data'\nhtgroup='www-data'\nrootuser='root'\n\nprintf \"Creating possible missing Directories\\n\"\nmkdir -p $ncpath/data\nmkdir -p $ncpath/assets\nmkdir -p $ncpath/updater\n\nprintf \"chmod Files and Directories\\n\"\nfind ${ncpath}/ -type f -print0 | xargs -0 chmod 0640\nfind ${ncpath}/ -type d -print0 | xargs -0 chmod 0750\n\nprintf \"chown Directories\\n\"\nchown -R ${rootuser}:${htgroup} ${ncpath}/\nchown -R ${htuser}:${htgroup} ${ncpath}/apps/\nchown -R ${htuser}:${htgroup} ${ncpath}/assets/\nchown -R ${htuser}:${htgroup} ${ncpath}/config/\nchown -R ${htuser}:${htgroup} ${ncpath}/data/\nchown -R ${htuser}:${htgroup} ${ncpath}/themes/\nchown -R ${htuser}:${htgroup} ${ncpath}/updater/\n\nchmod +x ${ncpath}/occ\n\nprintf \"chmod/chown .htaccess\\n\"\nif [ -f ${ncpath}/.htaccess ]; then\n    chmod 0644 ${ncpath}/.htaccess\n    chown ${rootuser}:${htgroup} ${ncpath}/.htaccess\nfi\n\nif [ -f ${ncpath}/data/.htaccess ]; then\n    chmod 0644 ${ncpath}/data/.htaccess\n    chown ${rootuser}:${htgroup} ${ncpath}/data/.htaccess\nfi\nEOF\n\nsudo chmod +x /usr/local/bin/nextcloud-permissions.sh\nsudo /usr/local/bin/nextcloud-permissions.sh\n```\n\n### SSL/TLS Configuration\n```bash\n# Install Let's Encrypt certificate\nsudo apt install -y certbot python3-certbot-apache  # Apache\nsudo apt install -y certbot python3-certbot-nginx   # NGINX\n\n# Obtain certificate\nsudo certbot --apache -d nextcloud.example.com  # Apache\nsudo certbot --nginx -d nextcloud.example.com   # NGINX\n\n# Configure HTTPS redirect in Nextcloud\nsudo -u www-data php occ config:system:set overwrite.cli.url --value=\"https://nextcloud.example.com\"\nsudo -u www-data php occ config:system:set overwriteprotocol --value=\"https\"\n```\n\n### Security Scan and Hardening\n```bash\n# Run Nextcloud security scan\nsudo -u www-data php occ security:certificates\nsudo -u www-data php occ security:bruteforce:reset admin\n\n# Configure rate limiting\nsudo -u www-data php occ config:app:set brute_force_protection delay_increment --value=10\nsudo -u www-data php occ config:app:set brute_force_protection fail_tolerance --value=3\n\n# Enable two-factor authentication\nsudo -u www-data php occ app:enable twofactor_totp\nsudo -u www-data php occ app:enable twofactor_u2f\n\n# Configure file access control\nsudo -u www-data php occ config:system:set default_file_access --value=\"restrict\"\n```\n\n## App Management\n\n### Essential Apps Installation\n```bash\n# Install popular apps via occ\nsudo -u www-data php occ app:install calendar\nsudo -u www-data php occ app:install contacts\nsudo -u www-data php occ app:install mail\nsudo -u www-data php occ app:install notes\nsudo -u www-data php occ app:install tasks\nsudo -u www-data php occ app:install deck\nsudo -u www-data php occ app:install polls\nsudo -u www-data php occ app:install richdocuments  # OnlyOffice integration\n\n# Enable apps\nsudo -u www-data php occ app:enable calendar\nsudo -u www-data php occ app:enable contacts\nsudo -u www-data php occ app:enable mail\n\n# List available apps\nsudo -u www-data php occ app:list\n\n# Update apps\nsudo -u www-data php occ app:update --all\n```\n\n### OnlyOffice Integration\n```bash\n# Install OnlyOffice Document Server\ndocker run -d --name onlyoffice \\\n  -p 8080:80 \\\n  -v onlyoffice_data:/var/www/onlyoffice/Data \\\n  -v onlyoffice_log:/var/log/onlyoffice \\\n  -v onlyoffice_fonts:/usr/share/fonts/truetype/custom \\\n  -v onlyoffice_forgotten:/var/lib/onlyoffice/documentserver/App_Data/cache/files/forgotten \\\n  onlyoffice/documentserver\n\n# Configure Nextcloud to use OnlyOffice\nsudo -u www-data php occ config:app:set richdocuments wopi_url --value=\"http://localhost:8080\"\n```\n\n## Backup and Maintenance\n\n### Backup Script\n```bash\nsudo tee /usr/local/bin/nextcloud-backup.sh \u003e /dev/null \u003c\u003c'EOF'\n#!/bin/bash\nBACKUP_DIR=\"/backup/nextcloud\"\nNC_DIR=\"/var/www/html/nextcloud\"\nDATE=$(date +%Y%m%d_%H%M%S)\n\nmkdir -p ${BACKUP_DIR}/{files,database}\n\n# Enable maintenance mode\nsudo -u www-data php ${NC_DIR}/occ maintenance:mode --on\n\n# Backup files (exclude data directory for space)\ntar --exclude=\"${NC_DIR}/data\" -czf ${BACKUP_DIR}/files/nextcloud-files-${DATE}.tar.gz -C /var/www/html nextcloud\n\n# Backup database\nmysqldump -u nextclouduser -p'secure_password' nextcloud \u003e ${BACKUP_DIR}/database/nextcloud-db-${DATE}.sql\ngzip ${BACKUP_DIR}/database/nextcloud-db-${DATE}.sql\n\n# Backup data directory separately (if needed)\n# tar -czf ${BACKUP_DIR}/files/nextcloud-data-${DATE}.tar.gz -C ${NC_DIR} data\n\n# Disable maintenance mode\nsudo -u www-data php ${NC_DIR}/occ maintenance:mode --off\n\n# Keep only last 7 backups\nfind ${BACKUP_DIR} -name \"nextcloud-*\" -type f -mtime +7 -delete\n\necho \"Backup completed: nextcloud-${DATE}\"\nEOF\n\nsudo chmod +x /usr/local/bin/nextcloud-backup.sh\n\n# Schedule daily backup\necho \"0 2 * * * root /usr/local/bin/nextcloud-backup.sh\" | sudo tee -a /etc/crontab\n```\n\n### Update and Maintenance\n```bash\n# Create update script\nsudo tee /usr/local/bin/nextcloud-update.sh \u003e /dev/null \u003c\u003c'EOF'\n#!/bin/bash\nNC_DIR=\"/var/www/html/nextcloud\"\n\n# Check for updates\nsudo -u www-data php ${NC_DIR}/occ update:check\n\n# Run updater\nsudo -u www-data php ${NC_DIR}/updater/updater.phar\n\n# Update apps\nsudo -u www-data php ${NC_DIR}/occ app:update --all\n\n# Run database upgrades\nsudo -u www-data php ${NC_DIR}/occ upgrade\n\n# Scan files\nsudo -u www-data php ${NC_DIR}/occ files:scan --all\n\n# Clean up\nsudo -u www-data php ${NC_DIR}/occ files:cleanup\nsudo -u www-data php ${NC_DIR}/occ trashbin:cleanup --all-users\n\necho \"Nextcloud update completed\"\nEOF\n\nsudo chmod +x /usr/local/bin/nextcloud-update.sh\n```\n\n## Verification\n\n```bash\n# Check web server status\nsudo systemctl status apache2  # or nginx\nsudo systemctl status mysql\n\n# Test Nextcloud installation\ncurl -I http://localhost/nextcloud\ncurl -I https://nextcloud.example.com\n\n# Check Nextcloud status via occ\ncd /var/www/html/nextcloud\nsudo -u www-data php occ status\nsudo -u www-data php occ check\n\n# Check background jobs\nsudo -u www-data php occ background:job:list\n\n# Check database connectivity\nsudo -u www-data php occ db:check\n\n# Check security status\nsudo -u www-data php occ security:certificates\nsudo -u www-data php occ security:bruteforce:attempts\n\n# Test file operations\nsudo -u www-data php occ files:scan admin\nsudo -u www-data php occ files:scan --all\n\n# Check logs\nsudo tail -f /var/www/html/nextcloud/data/nextcloud.log\nsudo tail -f /var/log/apache2/nextcloud_error.log\n```\n\n## Troubleshooting\n\n```bash\n# Enable debug mode\nsudo -u www-data php occ config:system:set debug --value=true --type=boolean\nsudo -u www-data php occ config:system:set loglevel --value=0\n\n# Check system requirements\nsudo -u www-data php occ check\n\n# Repair installation\nsudo -u www-data php occ maintenance:repair\n\n# Clear cache\nsudo -u www-data php occ files:cleanup\n\n# Fix file permissions\nsudo /usr/local/bin/nextcloud-permissions.sh\n\n# Database repair\nsudo -u www-data php occ db:check-and-repair\n\n# Update file cache\nsudo -u www-data php occ files:scan --all\n\n# Check configuration\nsudo -u www-data php occ config:list system\n\n# Reset user password\nsudo -u www-data php occ user:resetpassword admin\n\n# Check disk usage\ndu -sh /var/www/html/nextcloud/data/\ndf -h /var/www/html/nextcloud/\n\n# Memory usage check\nsudo -u www-data php occ status --output=json\n```\n\n## Additional Resources\n\n- [Official Documentation](https://docs.nextcloud.com/)\n- [Admin Manual](https://docs.nextcloud.com/server/latest/admin_manual/)\n- [Security Hardening Guide](https://docs.nextcloud.com/server/latest/admin_manual/installation/harden_server.html)\n- [Performance Tuning](https://docs.nextcloud.com/server/latest/admin_manual/installation/server_tuning.html)\n- [Community Forum](https://help.nextcloud.com/)\n\n---\n\n**Note:** This guide is part of the [HowToMgr](https://howtomgr.github.io) collection.","readmeHtml":"\u003ch1 id=\"nextcloud-installation-guide\" class=\"mobile-header\"\u003eNextcloud Installation Guide\u003c/h1\u003e\n\u003cp class=\"mobile-paragraph\"\u003eSelf-hosted file sync and share platform with collaboration features, calendar, contacts, and extensive app ecosystem.\u003c/p\u003e\n\u003ch2 id=\"prerequisites\" class=\"mobile-header\"\u003ePrerequisites\u003c/h2\u003e\n\u003cli class=\"mobile-list-item\"\u003eLinux system (Ubuntu/Debian, RHEL/CentOS, or compatible)\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eWeb server (Apache or NGINX)\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003ePHP 8.0+ with required extensions\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eDatabase (MySQL/MariaDB, PostgreSQL, or SQLite)\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003e2GB RAM minimum, 4GB+ recommended\u003c/li\u003e\n\u003ch2 id=\"installation\" class=\"mobile-header\"\u003eInstallation\u003c/h2\u003e\n\u003ch3 id=\"lamp-stack-setup-apache-mysql-php\" class=\"mobile-header\"\u003eLAMP Stack Setup (Apache + MySQL + PHP)\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003eüìã\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Ubuntu/Debian\nsudo apt update\nsudo apt install -y apache2 mariadb-server php php-mysql php-gd php-curl php-mbstring php-intl php-mcrypt php-imagick php-xml php-zip php-bcmath php-gmp\n\n# RHEL/CentOS\nsudo yum install -y httpd mariadb-server php php-mysql php-gd php-curl php-mbstring php-intl php-mcrypt php-imagick php-xml php-zip php-bcmath php-gmp\n\n# Enable services\nsudo systemctl enable --now apache2 mariadb  # Ubuntu/Debian\nsudo systemctl enable --now httpd mariadb    # RHEL/CentOS\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"database-setup\" class=\"mobile-header\"\u003eDatabase Setup\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003eüìã\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Secure MySQL installation\nsudo mysql_secure_installation\n\n# Create Nextcloud database\nsudo mysql -u root -p \u0026lt;\u0026lt;EOF\nCREATE DATABASE nextcloud CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci;\nCREATE USER \u0026#039;nextclouduser\u0026#039;@\u0026#039;localhost\u0026#039; IDENTIFIED BY \u0026#039;secure_password\u0026#039;;\nGRANT ALL PRIVILEGES ON nextcloud.* TO \u0026#039;nextclouduser\u0026#039;@\u0026#039;localhost\u0026#039;;\nFLUSH PRIVILEGES;\nEXIT\nEOF\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"nextcloud-download-and-setup\" class=\"mobile-header\"\u003eNextcloud Download and Setup\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003eüìã\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Download Nextcloud\ncd /tmp\nwget https://download.nextcloud.com/server/releases/latest.tar.bz2\ntar -xjf latest.tar.bz2\n\n# Move to web directory\nsudo cp -R nextcloud /var/www/html/\nsudo chown -R www-data:www-data /var/www/html/nextcloud  # Ubuntu/Debian\nsudo chown -R apache:apache /var/www/html/nextcloud      # RHEL/CentOS\n\n# Set proper permissions\nsudo find /var/www/html/nextcloud/ -type f -print0 | xargs -0 chmod 0640\nsudo find /var/www/html/nextcloud/ -type d -print0 | xargs -0 chmod 0750\nsudo chmod 750 /var/www/html/nextcloud\nsudo chmod -R 770 /var/www/html/nextcloud/data\nsudo chmod -R 770 /var/www/html/nextcloud/apps\nsudo chmod -R 770 /var/www/html/nextcloud/config\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"using-docker-compose\" class=\"mobile-header\"\u003eUsing Docker Compose\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003eüìã\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Create docker-compose.yml\nmkdir -p ~/nextcloud \u0026amp;\u0026amp; cd ~/nextcloud\n\ncat \u0026gt; docker-compose.yml \u0026lt;\u0026lt;EOF\nversion: \u0026#039;3.8\u0026#039;\n\nservices:\n  nextcloud:\n    image: nextcloud:latest\n    restart: unless-stopped\n    ports:\n      - \u0026quot;8080:80\u0026quot;\n    volumes:\n      - nextcloud_data:/var/www/html\n      - ./config:/var/www/html/config\n      - ./custom_apps:/var/www/html/custom_apps\n      - ./data:/var/www/html/data\n    environment:\n      - MYSQL_HOST=db\n      - MYSQL_DATABASE=nextcloud\n      - MYSQL_USER=nextcloud\n      - MYSQL_PASSWORD=secure_password\n      - NEXTCLOUD_ADMIN_USER=admin\n      - NEXTCLOUD_ADMIN_PASSWORD=admin_password\n      - NEXTCLOUD_TRUSTED_DOMAINS=nextcloud.example.com\n    depends_on:\n      - db\n      - redis\n    networks:\n      - nextcloud\n\n  db:\n    image: mariadb:10.6\n    restart: unless-stopped\n    command: --transaction-isolation=READ-COMMITTED --binlog-format=ROW --innodb-file-per-table=1 --skip-innodb-read-only-compressed\n    volumes:\n      - db_data:/var/lib/mysql\n    environment:\n      - MYSQL_ROOT_PASSWORD=root_password\n      - MYSQL_PASSWORD=secure_password\n      - MYSQL_DATABASE=nextcloud\n      - MYSQL_USER=nextcloud\n    networks:\n      - nextcloud\n\n  redis:\n    image: redis:alpine\n    restart: unless-stopped\n    networks:\n      - nextcloud\n\nvolumes:\n  nextcloud_data:\n  db_data:\n\nnetworks:\n  nextcloud:\n    driver: bridge\nEOF\n\n# Start services\ndocker-compose up -d\n\n# Check logs\ndocker-compose logs -f nextcloud\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"configuration\" class=\"mobile-header\"\u003eConfiguration\u003c/h2\u003e\n\u003ch3 id=\"apache-virtual-host\" class=\"mobile-header\"\u003eApache Virtual Host\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003eüìã\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Create Apache virtual host\nsudo tee /etc/apache2/sites-available/nextcloud.conf \u0026gt; /dev/null \u0026lt;\u0026lt;EOF\n\u0026lt;VirtualHost *:80\u0026gt;\n    ServerName nextcloud.example.com\n    DocumentRoot /var/www/html/nextcloud\n\n    \u0026lt;Directory /var/www/html/nextcloud/\u0026gt;\n        Require all granted\n        AllowOverride All\n        Options FollowSymLinks MultiViews\n        \n        \u0026lt;IfModule mod_dav.c\u0026gt;\n            Dav off\n        \u0026lt;/IfModule\u0026gt;\n    \u0026lt;/Directory\u0026gt;\n\n    # Security headers\n    Header always set Strict-Transport-Security \u0026quot;max-age=15552000; includeSubDomains\u0026quot;\n    Header always set X-Content-Type-Options nosniff\n    Header always set X-Frame-Options \u0026quot;SAMEORIGIN\u0026quot;\n    Header always set X-XSS-Protection \u0026quot;1; mode=block\u0026quot;\n    Header always set Referrer-Policy \u0026quot;no-referrer\u0026quot;\n    Header always set Feature-Policy \u0026quot;camera \u0026#039;none\u0026#039;; microphone \u0026#039;none\u0026#039;\u0026quot;\n\n    ErrorLog \\${APACHE_LOG_DIR}/nextcloud_error.log\n    CustomLog \\${APACHE_LOG_DIR}/nextcloud_access.log combined\n\u0026lt;/VirtualHost\u0026gt;\nEOF\n\n# Enable required modules\nsudo a2enmod rewrite headers env dir mime ssl\nsudo a2ensite nextcloud.conf\nsudo systemctl restart apache2\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"nginx-configuration\" class=\"mobile-header\"\u003eNGINX Configuration\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003eüìã\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Create NGINX server block\nsudo tee /etc/nginx/sites-available/nextcloud \u0026gt; /dev/null \u0026lt;\u0026lt;EOF\nupstream php-handler {\n    server unix:/var/run/php/php8.0-fpm.sock;\n}\n\nserver {\n    listen 80;\n    server_name nextcloud.example.com;\n    return 301 https://\\$server_name\\$request_uri;\n}\n\nserver {\n    listen 443 ssl http2;\n    server_name nextcloud.example.com;\n\n    # SSL configuration\n    ssl_certificate /etc/ssl/certs/nextcloud.crt;\n    ssl_certificate_key /etc/ssl/private/nextcloud.key;\n    ssl_protocols TLSv1.2 TLSv1.3;\n    ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:ECDHE-RSA-AES256-GCM-SHA384;\n    ssl_prefer_server_ciphers off;\n\n    # Security headers\n    add_header Strict-Transport-Security \u0026quot;max-age=15768000; includeSubDomains; preload\u0026quot; always;\n    add_header Referrer-Policy \u0026quot;no-referrer\u0026quot; always;\n    add_header X-Content-Type-Options \u0026quot;nosniff\u0026quot; always;\n    add_header X-Download-Options \u0026quot;noopen\u0026quot; always;\n    add_header X-Frame-Options \u0026quot;SAMEORIGIN\u0026quot; always;\n    add_header X-Permitted-Cross-Domain-Policies \u0026quot;none\u0026quot; always;\n    add_header X-Robots-Tag \u0026quot;none\u0026quot; always;\n    add_header X-XSS-Protection \u0026quot;1; mode=block\u0026quot; always;\n\n    # Remove X-Powered-By\n    fastcgi_hide_header X-Powered-By;\n\n    # Path to the root of your installation\n    root /var/www/html/nextcloud;\n    index index.php index.html /index.php\\$request_uri;\n\n    # Rule borrowed from `.htaccess` to handle Microsoft DAV clients\n    location = / {\n        if ( \\$http_user_agent ~ ^DavClnt ) {\n            return 302 /remote.php/webdav/\\$is_args\\$args;\n        }\n    }\n\n    location = /robots.txt {\n        allow all;\n        log_not_found off;\n        access_log off;\n    }\n\n    # Make a regex exception for `/.well-known` so that clients can still\n    # access it despite the existence of the regex rule\n    location ^~ /.well-known {\n        location = /.well-known/carddav { return 301 /remote.php/dav/; }\n        location = /.well-known/caldav  { return 301 /remote.php/dav/; }\n        location /.well-known/acme-challenge    { try_files \\$uri \\$uri/ =404; }\n        location /.well-known/pki-validation    { try_files \\$uri \\$uri/ =404; }\n        return 301 /index.php\\$request_uri;\n    }\n\n    # Rules borrowed from `.htaccess` to hide certain paths.\n    location ~ ^/(?:build|tests|config|lib|3rdparty|templates|data)(?:\\$|/)  { return 404; }\n    location ~ ^/(?:\\\\.|autotest|occ|issue|indie|db_|console)                { return 404; }\n\n    # Ensure this block, which passes PHP files to the PHP process, is above the blocks\n    # which handle static assets (as seen below). If this block is not declared first,\n    # then Nginx will encounter an infinite rewriting loop when it prepends\n    # `/index.php` to the URI, resulting in a HTTP 500 error response.\n    location ~ \\\\.php(?:\\$|/) {\n        # Required for legacy support\n        rewrite ^/(?!index|remote|public|cron|core\\\\/ajax\\\\/update|status|ocs\\\\/v[12]|updater\\\\/.+|oc[ms]-provider\\\\/.+|.+\\\\/richdocumentscode\\\\/proxy) /index.php\\$request_uri;\n\n        fastcgi_split_path_info ^(.+?\\\\.php)(/.*)\\$;\n        set \\$path_info \\$fastcgi_path_info;\n\n        try_files \\$fastcgi_script_name =404;\n\n        include fastcgi_params;\n        fastcgi_param SCRIPT_FILENAME \\$document_root\\$fastcgi_script_name;\n        fastcgi_param PATH_INFO \\$path_info;\n        fastcgi_param HTTPS on;\n\n        fastcgi_param modHeadersAvailable true;\n        fastcgi_param front_controller_active true;\n        fastcgi_pass php-handler;\n\n        fastcgi_intercept_errors on;\n        fastcgi_request_buffering off;\n    }\n\n    location ~ \\\\.(?:css|js|svg|gif|png|jpg|ico)\\$ {\n        try_files \\$uri /index.php\\$request_uri;\n        expires 6M;\n        access_log off;\n    }\n\n    location ~ \\\\.woff2?\\$ {\n        try_files \\$uri /index.php\\$request_uri;\n        expires 7d;\n        access_log off;\n    }\n\n    # Rule borrowed from `.htaccess`\n    location /remote {\n        return 301 /remote.php\\$request_uri;\n    }\n\n    location / {\n        try_files \\$uri \\$uri/ /index.php\\$request_uri;\n    }\n}\nEOF\n\n# Enable site\nsudo ln -s /etc/nginx/sites-available/nextcloud /etc/nginx/sites-enabled/\nsudo nginx -t \u0026amp;\u0026amp; sudo systemctl restart nginx\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"php-configuration\" class=\"mobile-header\"\u003ePHP Configuration\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003eüìã\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Optimize PHP for Nextcloud\nsudo nano /etc/php/8.0/apache2/php.ini  # Apache\nsudo nano /etc/php/8.0/fpm/php.ini      # NGINX\n\n# Recommended settings:\nmemory_limit = 512M\nupload_max_filesize = 16G\npost_max_size = 16G\nmax_execution_time = 3600\nmax_input_time = 3600\nmax_input_vars = 3000\ndate.timezone = \u0026quot;America/New_York\u0026quot;\n\n# OPcache settings\nopcache.enable = 1\nopcache.interned_strings_buffer = 16\nopcache.max_accelerated_files = 10000\nopcache.memory_consumption = 128\nopcache.save_comments = 1\nopcache.revalidate_freq = 1\n\n# APCu for local cache\napc.enable_cli = 1\n\nsudo systemctl restart apache2  # Apache\nsudo systemctl restart php8.0-fpm  # NGINX\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"command-line-installation\" class=\"mobile-header\"\u003eCommand Line Installation\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003eüìã\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Install via command line\ncd /var/www/html/nextcloud\nsudo -u www-data php occ maintenance:install \\\n  --database=\u0026quot;mysql\u0026quot; \\\n  --database-name=\u0026quot;nextcloud\u0026quot; \\\n  --database-user=\u0026quot;nextclouduser\u0026quot; \\\n  --database-pass=\u0026quot;secure_password\u0026quot; \\\n  --admin-user=\u0026quot;admin\u0026quot; \\\n  --admin-pass=\u0026quot;admin_password\u0026quot; \\\n  --data-dir=\u0026quot;/var/www/html/nextcloud/data\u0026quot;\n\n# Configure trusted domains\nsudo -u www-data php occ config:system:set trusted_domains 0 --value=nextcloud.example.com\nsudo -u www-data php occ config:system:set trusted_domains 1 --value=192.168.1.100\n\n# Configure caching\nsudo -u www-data php occ config:system:set memcache.local --value=\u0026quot;\\\\OC\\\\Memcache\\\\APCu\u0026quot;\nsudo -u www-data php occ config:system:set memcache.distributed --value=\u0026quot;\\\\OC\\\\Memcache\\\\Redis\u0026quot;\nsudo -u www-data php occ config:system:set redis host --value=\u0026quot;localhost\u0026quot;\nsudo -u www-data php occ config:system:set redis port --value=6379\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"performance-optimization\" class=\"mobile-header\"\u003ePerformance Optimization\u003c/h2\u003e\n\u003ch3 id=\"redis-caching-setup\" class=\"mobile-header\"\u003eRedis Caching Setup\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003eüìã\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Install Redis\nsudo apt install -y redis-server  # Ubuntu/Debian\nsudo yum install -y redis          # RHEL/CentOS\n\nsudo systemctl enable --now redis\n\n# Configure Redis for Nextcloud\nsudo tee -a /etc/redis/redis.conf \u0026gt; /dev/null \u0026lt;\u0026lt;EOF\nmaxmemory 512mb\nmaxmemory-policy allkeys-lru\nsave 900 1\nsave 300 10\nsave 60 10000\nEOF\n\nsudo systemctl restart redis\n\n# Install Redis PHP extension\nsudo apt install -y php-redis  # Ubuntu/Debian\nsudo yum install -y php-redis   # RHEL/CentOS\n\n# Configure Nextcloud to use Redis\nsudo -u www-data php occ config:system:set memcache.local --value=\u0026quot;\\\\OC\\\\Memcache\\\\APCu\u0026quot;\nsudo -u www-data php occ config:system:set memcache.distributed --value=\u0026quot;\\\\OC\\\\Memcache\\\\Redis\u0026quot;\nsudo -u www-data php occ config:system:set redis host --value=\u0026quot;localhost\u0026quot;\nsudo -u www-data php occ config:system:set redis port --value=6379\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"database-optimization\" class=\"mobile-header\"\u003eDatabase Optimization\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003eüìã\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# MySQL/MariaDB optimization for Nextcloud\nsudo tee -a /etc/mysql/mysql.conf.d/nextcloud.cnf \u0026gt; /dev/null \u0026lt;\u0026lt;EOF\n[mysqld]\ninnodb_buffer_pool_size = 1G\ninnodb_io_capacity = 4000\ninnodb_log_file_size = 128M\ninnodb_log_buffer_size = 32M\ninnodb_flush_log_at_trx_commit = 1\ninnodb_flush_method = O_DIRECT\ninnodb_file_per_table = 1\n\nquery_cache_type = 1\nquery_cache_limit = 2M\nquery_cache_size = 64M\n\ntmp_table_size = 64M\nmax_heap_table_size = 64M\n\njoin_buffer_size = 262144\nsort_buffer_size = 262144\n\nmax_connections = 100\nmax_connect_errors = 10\nconnect_timeout = 5\nwait_timeout = 600\nmax_allowed_packet = 64M\n\nthread_cache_size = 128\nquery_cache_size = 64M\n\n[mysql.server]\ndefault-table-type = innodb\nEOF\n\nsudo systemctl restart mysql\n\n# Add indexes for better performance\nmysql -u nextclouduser -p nextcloud \u0026lt;\u0026lt;EOF\nALTER TABLE oc_jobs ADD INDEX jobs_class_index (class);\nALTER TABLE oc_filecache ADD INDEX fs_mtime (mtime);\nEOF\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"background-jobs\" class=\"mobile-header\"\u003eBackground Jobs\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003eüìã\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Configure cron for background jobs\nsudo crontab -u www-data -e\n# Add: */5 * * * * php /var/www/html/nextcloud/occ system:cron\n\n# Or configure via occ command\nsudo -u www-data php occ background:cron\n\n# Check background job status\nsudo -u www-data php occ status\nsudo -u www-data php occ background:job:list\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"security-hardening\" class=\"mobile-header\"\u003eSecurity Hardening\u003c/h2\u003e\n\u003ch3 id=\"file-permissions-and-security\" class=\"mobile-header\"\u003eFile Permissions and Security\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003eüìã\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Secure file permissions script\nsudo tee /usr/local/bin/nextcloud-permissions.sh \u0026gt; /dev/null \u0026lt;\u0026lt;\u0026#039;EOF\u0026#039;\n#!/bin/bash\nncpath=\u0026#039;/var/www/html/nextcloud\u0026#039;\nhtuser=\u0026#039;www-data\u0026#039;\nhtgroup=\u0026#039;www-data\u0026#039;\nrootuser=\u0026#039;root\u0026#039;\n\nprintf \u0026quot;Creating possible missing Directories\\n\u0026quot;\nmkdir -p $ncpath/data\nmkdir -p $ncpath/assets\nmkdir -p $ncpath/updater\n\nprintf \u0026quot;chmod Files and Directories\\n\u0026quot;\nfind ${ncpath}/ -type f -print0 | xargs -0 chmod 0640\nfind ${ncpath}/ -type d -print0 | xargs -0 chmod 0750\n\nprintf \u0026quot;chown Directories\\n\u0026quot;\nchown -R ${rootuser}:${htgroup} ${ncpath}/\nchown -R ${htuser}:${htgroup} ${ncpath}/apps/\nchown -R ${htuser}:${htgroup} ${ncpath}/assets/\nchown -R ${htuser}:${htgroup} ${ncpath}/config/\nchown -R ${htuser}:${htgroup} ${ncpath}/data/\nchown -R ${htuser}:${htgroup} ${ncpath}/themes/\nchown -R ${htuser}:${htgroup} ${ncpath}/updater/\n\nchmod +x ${ncpath}/occ\n\nprintf \u0026quot;chmod/chown .htaccess\\n\u0026quot;\nif [ -f ${ncpath}/.htaccess ]; then\n    chmod 0644 ${ncpath}/.htaccess\n    chown ${rootuser}:${htgroup} ${ncpath}/.htaccess\nfi\n\nif [ -f ${ncpath}/data/.htaccess ]; then\n    chmod 0644 ${ncpath}/data/.htaccess\n    chown ${rootuser}:${htgroup} ${ncpath}/data/.htaccess\nfi\nEOF\n\nsudo chmod +x /usr/local/bin/nextcloud-permissions.sh\nsudo /usr/local/bin/nextcloud-permissions.sh\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"ssltls-configuration\" class=\"mobile-header\"\u003eSSL/TLS Configuration\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003eüìã\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Install Let\u0026#039;s Encrypt certificate\nsudo apt install -y certbot python3-certbot-apache  # Apache\nsudo apt install -y certbot python3-certbot-nginx   # NGINX\n\n# Obtain certificate\nsudo certbot --apache -d nextcloud.example.com  # Apache\nsudo certbot --nginx -d nextcloud.example.com   # NGINX\n\n# Configure HTTPS redirect in Nextcloud\nsudo -u www-data php occ config:system:set overwrite.cli.url --value=\u0026quot;https://nextcloud.example.com\u0026quot;\nsudo -u www-data php occ config:system:set overwriteprotocol --value=\u0026quot;https\u0026quot;\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"security-scan-and-hardening\" class=\"mobile-header\"\u003eSecurity Scan and Hardening\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003eüìã\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Run Nextcloud security scan\nsudo -u www-data php occ security:certificates\nsudo -u www-data php occ security:bruteforce:reset admin\n\n# Configure rate limiting\nsudo -u www-data php occ config:app:set brute_force_protection delay_increment --value=10\nsudo -u www-data php occ config:app:set brute_force_protection fail_tolerance --value=3\n\n# Enable two-factor authentication\nsudo -u www-data php occ app:enable twofactor_totp\nsudo -u www-data php occ app:enable twofactor_u2f\n\n# Configure file access control\nsudo -u www-data php occ config:system:set default_file_access --value=\u0026quot;restrict\u0026quot;\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"app-management\" class=\"mobile-header\"\u003eApp Management\u003c/h2\u003e\n\u003ch3 id=\"essential-apps-installation\" class=\"mobile-header\"\u003eEssential Apps Installation\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003eüìã\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Install popular apps via occ\nsudo -u www-data php occ app:install calendar\nsudo -u www-data php occ app:install contacts\nsudo -u www-data php occ app:install mail\nsudo -u www-data php occ app:install notes\nsudo -u www-data php occ app:install tasks\nsudo -u www-data php occ app:install deck\nsudo -u www-data php occ app:install polls\nsudo -u www-data php occ app:install richdocuments  # OnlyOffice integration\n\n# Enable apps\nsudo -u www-data php occ app:enable calendar\nsudo -u www-data php occ app:enable contacts\nsudo -u www-data php occ app:enable mail\n\n# List available apps\nsudo -u www-data php occ app:list\n\n# Update apps\nsudo -u www-data php occ app:update --all\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"onlyoffice-integration\" class=\"mobile-header\"\u003eOnlyOffice Integration\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003eüìã\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Install OnlyOffice Document Server\ndocker run -d --name onlyoffice \\\n  -p 8080:80 \\\n  -v onlyoffice_data:/var/www/onlyoffice/Data \\\n  -v onlyoffice_log:/var/log/onlyoffice \\\n  -v onlyoffice_fonts:/usr/share/fonts/truetype/custom \\\n  -v onlyoffice_forgotten:/var/lib/onlyoffice/documentserver/App_Data/cache/files/forgotten \\\n  onlyoffice/documentserver\n\n# Configure Nextcloud to use OnlyOffice\nsudo -u www-data php occ config:app:set richdocuments wopi_url --value=\u0026quot;http://localhost:8080\u0026quot;\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"backup-and-maintenance\" class=\"mobile-header\"\u003eBackup and Maintenance\u003c/h2\u003e\n\u003ch3 id=\"backup-script\" class=\"mobile-header\"\u003eBackup Script\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003eüìã\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003esudo tee /usr/local/bin/nextcloud-backup.sh \u0026gt; /dev/null \u0026lt;\u0026lt;\u0026#039;EOF\u0026#039;\n#!/bin/bash\nBACKUP_DIR=\u0026quot;/backup/nextcloud\u0026quot;\nNC_DIR=\u0026quot;/var/www/html/nextcloud\u0026quot;\nDATE=$(date +%Y%m%d_%H%M%S)\n\nmkdir -p ${BACKUP_DIR}/{files,database}\n\n# Enable maintenance mode\nsudo -u www-data php ${NC_DIR}/occ maintenance:mode --on\n\n# Backup files (exclude data directory for space)\ntar --exclude=\u0026quot;${NC_DIR}/data\u0026quot; -czf ${BACKUP_DIR}/files/nextcloud-files-${DATE}.tar.gz -C /var/www/html nextcloud\n\n# Backup database\nmysqldump -u nextclouduser -p\u0026#039;secure_password\u0026#039; nextcloud \u0026gt; ${BACKUP_DIR}/database/nextcloud-db-${DATE}.sql\ngzip ${BACKUP_DIR}/database/nextcloud-db-${DATE}.sql\n\n# Backup data directory separately (if needed)\n# tar -czf ${BACKUP_DIR}/files/nextcloud-data-${DATE}.tar.gz -C ${NC_DIR} data\n\n# Disable maintenance mode\nsudo -u www-data php ${NC_DIR}/occ maintenance:mode --off\n\n# Keep only last 7 backups\nfind ${BACKUP_DIR} -name \u0026quot;nextcloud-*\u0026quot; -type f -mtime +7 -delete\n\necho \u0026quot;Backup completed: nextcloud-${DATE}\u0026quot;\nEOF\n\nsudo chmod +x /usr/local/bin/nextcloud-backup.sh\n\n# Schedule daily backup\necho \u0026quot;0 2 * * * root /usr/local/bin/nextcloud-backup.sh\u0026quot; | sudo tee -a /etc/crontab\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"update-and-maintenance\" class=\"mobile-header\"\u003eUpdate and Maintenance\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003eüìã\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Create update script\nsudo tee /usr/local/bin/nextcloud-update.sh \u0026gt; /dev/null \u0026lt;\u0026lt;\u0026#039;EOF\u0026#039;\n#!/bin/bash\nNC_DIR=\u0026quot;/var/www/html/nextcloud\u0026quot;\n\n# Check for updates\nsudo -u www-data php ${NC_DIR}/occ update:check\n\n# Run updater\nsudo -u www-data php ${NC_DIR}/updater/updater.phar\n\n# Update apps\nsudo -u www-data php ${NC_DIR}/occ app:update --all\n\n# Run database upgrades\nsudo -u www-data php ${NC_DIR}/occ upgrade\n\n# Scan files\nsudo -u www-data php ${NC_DIR}/occ files:scan --all\n\n# Clean up\nsudo -u www-data php ${NC_DIR}/occ files:cleanup\nsudo -u www-data php ${NC_DIR}/occ trashbin:cleanup --all-users\n\necho \u0026quot;Nextcloud update completed\u0026quot;\nEOF\n\nsudo chmod +x /usr/local/bin/nextcloud-update.sh\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"verification\" class=\"mobile-header\"\u003eVerification\u003c/h2\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003eüìã\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Check web server status\nsudo systemctl status apache2  # or nginx\nsudo systemctl status mysql\n\n# Test Nextcloud installation\ncurl -I http://localhost/nextcloud\ncurl -I https://nextcloud.example.com\n\n# Check Nextcloud status via occ\ncd /var/www/html/nextcloud\nsudo -u www-data php occ status\nsudo -u www-data php occ check\n\n# Check background jobs\nsudo -u www-data php occ background:job:list\n\n# Check database connectivity\nsudo -u www-data php occ db:check\n\n# Check security status\nsudo -u www-data php occ security:certificates\nsudo -u www-data php occ security:bruteforce:attempts\n\n# Test file operations\nsudo -u www-data php occ files:scan admin\nsudo -u www-data php occ files:scan --all\n\n# Check logs\nsudo tail -f /var/www/html/nextcloud/data/nextcloud.log\nsudo tail -f /var/log/apache2/nextcloud_error.log\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"troubleshooting\" class=\"mobile-header\"\u003eTroubleshooting\u003c/h2\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003eüìã\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Enable debug mode\nsudo -u www-data php occ config:system:set debug --value=true --type=boolean\nsudo -u www-data php occ config:system:set loglevel --value=0\n\n# Check system requirements\nsudo -u www-data php occ check\n\n# Repair installation\nsudo -u www-data php occ maintenance:repair\n\n# Clear cache\nsudo -u www-data php occ files:cleanup\n\n# Fix file permissions\nsudo /usr/local/bin/nextcloud-permissions.sh\n\n# Database repair\nsudo -u www-data php occ db:check-and-repair\n\n# Update file cache\nsudo -u www-data php occ files:scan --all\n\n# Check configuration\nsudo -u www-data php occ config:list system\n\n# Reset user password\nsudo -u www-data php occ user:resetpassword admin\n\n# Check disk usage\ndu -sh /var/www/html/nextcloud/data/\ndf -h /var/www/html/nextcloud/\n\n# Memory usage check\nsudo -u www-data php occ status --output=json\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"additional-resources\" class=\"mobile-header\"\u003eAdditional Resources\u003c/h2\u003e\n\u003cli class=\"mobile-list-item\"\u003e\u003ca href=\"https://docs.nextcloud.com/\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\"\u003eOfficial Documentation\u003c/a\u003e\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003e\u003ca href=\"https://docs.nextcloud.com/server/latest/admin_manual/\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\"\u003eAdmin Manual\u003c/a\u003e\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003e\u003ca href=\"https://docs.nextcloud.com/server/latest/admin_manual/installation/harden_server.html\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\"\u003eSecurity Hardening Guide\u003c/a\u003e\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003e\u003ca href=\"https://docs.nextcloud.com/server/latest/admin_manual/installation/server_tuning.html\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\"\u003ePerformance Tuning\u003c/a\u003e\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003e\u003ca href=\"https://help.nextcloud.com/\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\"\u003eCommunity Forum\u003c/a\u003e\u003c/li\u003e\n\u003cp class=\"mobile-paragraph\"\u003e---\u003c/p\u003e\n\u003cp class=\"mobile-paragraph\"\u003e\u003cstrong\u003eNote:\u003c/strong\u003e This guide is part of the \u003ca href=\"https://howtomgr.github.io\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\"\u003eHowToMgr\u003c/a\u003e collection.\u003c/p\u003e","readTime":"12 min","wordCount":2269,"lastBuilt":"2025-09-15T18:14:49.154Z"}]},"__N_SSG":true},"page":"/[category]/[guide]","query":{"category":"productivity","guide":"wordpress"},"buildId":"FWaJNz_CPEuOjXz3AhtJ8","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>