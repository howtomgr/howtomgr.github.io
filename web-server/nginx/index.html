<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes"/><meta name="theme-color" content="#bd93f9"/><link rel="icon" href="/favicon.ico"/><link rel="preconnect" href="https://fonts.googleapis.com"/><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="true"/><title class="jsx-745d6189719dfe72">NGINX Installation Guide - HowToMgr</title><meta name="description" content="Repo for nginx" class="jsx-745d6189719dfe72"/><meta name="keywords" content="installation guides, tutorials, linux, docker, kubernetes, mobile-first, responsive" class="jsx-745d6189719dfe72"/><meta property="og:title" content="NGINX Installation Guide - HowToMgr" class="jsx-745d6189719dfe72"/><meta property="og:description" content="Repo for nginx" class="jsx-745d6189719dfe72"/><meta property="og:type" content="website" class="jsx-745d6189719dfe72"/><meta property="og:url" content="https://howtomgr.github.io" class="jsx-745d6189719dfe72"/><meta property="og:image" content="https://howtomgr.github.io/social-preview.png" class="jsx-745d6189719dfe72"/><meta property="twitter:card" content="summary_large_image" class="jsx-745d6189719dfe72"/><meta property="twitter:title" content="NGINX Installation Guide - HowToMgr" class="jsx-745d6189719dfe72"/><meta property="twitter:description" content="Repo for nginx" class="jsx-745d6189719dfe72"/><meta name="next-head-count" content="17"/><link rel="dns-prefetch" href="//api.github.com"/><link rel="dns-prefetch" href="//github.com"/><link rel="preload" href="/favicon.ico" as="image"/><meta name="application-name" content="HowToMgr"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="default"/><meta name="apple-mobile-web-app-title" content="HowToMgr"/><meta name="format-detection" content="telephone=no"/><meta name="mobile-web-app-capable" content="yes"/><noscript><style>
            .requires-js { display: none !important; }
            .no-js-message { display: block !important; }
          </style></noscript><link rel="preload" href="/_next/static/css/eec6c1c201affe77.css" as="style"/><link rel="stylesheet" href="/_next/static/css/eec6c1c201affe77.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-42372ed130431b0a.js"></script><script src="/_next/static/chunks/webpack-ee7e63bc15b31913.js" defer=""></script><script src="/_next/static/chunks/framework-2b1f7a23d657eae4.js" defer=""></script><script src="/_next/static/chunks/main-6ec3f7584970eebe.js" defer=""></script><script src="/_next/static/chunks/pages/_app-d149ee305b4f74bb.js" defer=""></script><script src="/_next/static/chunks/409-41afef934247f89e.js" defer=""></script><script src="/_next/static/chunks/pages/%5Bcategory%5D/%5Bguide%5D-38cc5ea2e41d9e97.js" defer=""></script><script src="/_next/static/lu0_WLQIo6fIzJ-IeQpog/_buildManifest.js" defer=""></script><script src="/_next/static/lu0_WLQIo6fIzJ-IeQpog/_ssgManifest.js" defer=""></script><style id="__jsx-8a7f0cdcf94f52ce">.breadcrumb.jsx-8a7f0cdcf94f52ce{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;gap:var(--space-2);margin-bottom:var(--space-6);font-size:var(--font-sm);color:var(--text-secondary);overflow-x:auto;white-space:nowrap;-webkit-overflow-scrolling:touch}.breadcrumb.jsx-8a7f0cdcf94f52ce a.jsx-8a7f0cdcf94f52ce{color:var(--accent-primary);text-decoration:none;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0}.breadcrumb.jsx-8a7f0cdcf94f52ce a.jsx-8a7f0cdcf94f52ce:hover{text-decoration:underline}.separator.jsx-8a7f0cdcf94f52ce{color:var(--text-muted);-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0}.current.jsx-8a7f0cdcf94f52ce{color:var(--text-primary);font-weight:500;white-space:nowrap;overflow:hidden;-o-text-overflow:ellipsis;text-overflow:ellipsis}.guide-header.jsx-8a7f0cdcf94f52ce{background:var(--bg-secondary);-webkit-border-radius:var(--border-radius-lg);-moz-border-radius:var(--border-radius-lg);border-radius:var(--border-radius-lg);padding:var(--space-6);margin-bottom:var(--space-8);border:1px solid var(--bg-surface)}.guide-title.jsx-8a7f0cdcf94f52ce{color:var(--accent-primary);font-size:var(--font-3xl);margin-bottom:var(--space-4);line-height:1.2;word-break:break-word}.guide-description.jsx-8a7f0cdcf94f52ce{color:var(--text-secondary);font-size:var(--font-lg);margin-bottom:var(--space-5);line-height:1.5}.guide-badges.jsx-8a7f0cdcf94f52ce{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;gap:var(--space-3);margin-bottom:var(--space-5);-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap}.guide-actions.jsx-8a7f0cdcf94f52ce{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;gap:var(--space-3);-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap}.guide-content.jsx-8a7f0cdcf94f52ce{background:var(--bg-secondary);-webkit-border-radius:var(--border-radius-lg);-moz-border-radius:var(--border-radius-lg);border-radius:var(--border-radius-lg);padding:var(--space-6);margin-bottom:var(--space-8);border:1px solid var(--bg-surface);overflow-x:hidden}.related-section.jsx-8a7f0cdcf94f52ce{margin-bottom:var(--space-8)}.section-title.jsx-8a7f0cdcf94f52ce{color:var(--accent-primary);font-size:var(--font-2xl);text-align:center;margin-bottom:var(--space-6)}.guide-navigation.jsx-8a7f0cdcf94f52ce{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;gap:var(--space-4);-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;margin-bottom:var(--space-8)}.loading-container.jsx-8a7f0cdcf94f52ce,.error-container.jsx-8a7f0cdcf94f52ce{text-align:center;padding:var(--space-8)}.error-actions.jsx-8a7f0cdcf94f52ce{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;gap:var(--space-4);-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;margin-top:var(--space-6);-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap}@media(max-width:767px){.guide-header.jsx-8a7f0cdcf94f52ce{padding:var(--space-4);margin-bottom:var(--space-6)}.guide-title.jsx-8a7f0cdcf94f52ce{font-size:var(--font-2xl)}.guide-description.jsx-8a7f0cdcf94f52ce{font-size:var(--font-base)}.guide-content.jsx-8a7f0cdcf94f52ce{padding:var(--space-4);margin-bottom:var(--space-6)}.guide-badges.jsx-8a7f0cdcf94f52ce{gap:var(--space-2)}.guide-actions.jsx-8a7f0cdcf94f52ce{-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column}.guide-navigation.jsx-8a7f0cdcf94f52ce{-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column}.breadcrumb.jsx-8a7f0cdcf94f52ce{margin-bottom:var(--space-4)}}</style><style id="__jsx-745d6189719dfe72">.app-container.jsx-745d6189719dfe72{min-height:100vh;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;padding-top:56px}.main-content.jsx-745d6189719dfe72{-webkit-box-flex:1;-webkit-flex:1;-moz-box-flex:1;-ms-flex:1;flex:1;padding:var(--space-6)0}.mobile-footer.jsx-745d6189719dfe72{background:var(--bg-secondary);border-top:1px solid var(--bg-surface);padding:var(--space-6)0;margin-top:auto}.footer-content.jsx-745d6189719dfe72{text-align:center}.footer-links.jsx-745d6189719dfe72{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;gap:var(--space-6);margin-bottom:var(--space-4);-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap}.footer-links.jsx-745d6189719dfe72 a.jsx-745d6189719dfe72{color:var(--accent-primary);text-decoration:none;font-size:var(--font-sm)}.footer-links.jsx-745d6189719dfe72 a.jsx-745d6189719dfe72:hover{color:var(--accent-secondary)}.footer-separator.jsx-745d6189719dfe72{height:1px;background:var(--bg-surface);margin:var(--space-4)auto;width:200px}.footer-text.jsx-745d6189719dfe72,.footer-tech.jsx-745d6189719dfe72{color:var(--text-secondary);font-size:var(--font-sm);margin-bottom:var(--space-2)}.footer-disclaimer.jsx-745d6189719dfe72{color:var(--text-muted);font-size:var(--font-xs)}[data-theme="light"].jsx-745d6189719dfe72 .theme-icon-dark.jsx-745d6189719dfe72{display:none}[data-theme="light"].jsx-745d6189719dfe72 .theme-icon-light.jsx-745d6189719dfe72{display:inline!important}@media(max-width:767px){.main-content.jsx-745d6189719dfe72{padding:var(--space-4)0}.footer-links.jsx-745d6189719dfe72{gap:var(--space-4)}}</style></head><body><noscript><div class="no-js-message" style="padding:1rem;background:#ff5555;color:#f8f8f2;text-align:center;font-size:0.9rem">This site requires JavaScript to function properly. Please enable JavaScript in your browser.</div></noscript><div id="__next"><div class="jsx-745d6189719dfe72 app-container"><a href="#main-content" class="jsx-745d6189719dfe72 skip-link">Skip to main content</a><nav class="jsx-745d6189719dfe72 mobile-nav"><div class="jsx-745d6189719dfe72 mobile-nav-content"><a class="mobile-brand" href="/"><span role="img" aria-label="Books" class="jsx-745d6189719dfe72">📚</span>HowToMgr</a><button aria-label="Toggle theme" title="Switch theme" class="jsx-745d6189719dfe72 mobile-theme-toggle touch-target"><span class="jsx-745d6189719dfe72 theme-icon-dark">🌙</span><span style="display:none" class="jsx-745d6189719dfe72 theme-icon-light">☀️</span></button></div></nav><main id="main-content" tabindex="-1" class="jsx-745d6189719dfe72 main-content"><div class="jsx-745d6189719dfe72 container"><nav aria-label="Breadcrumb" class="jsx-8a7f0cdcf94f52ce breadcrumb"><a href="/">Home</a><span class="jsx-8a7f0cdcf94f52ce separator">→</span><a href="/web-server/">Web Servers</a><span class="jsx-8a7f0cdcf94f52ce separator">→</span><span class="jsx-8a7f0cdcf94f52ce current">NGINX</span></nav><header class="jsx-8a7f0cdcf94f52ce guide-header"><div class="jsx-8a7f0cdcf94f52ce guide-meta-top"><h1 class="jsx-8a7f0cdcf94f52ce guide-title">NGINX</h1><p class="jsx-8a7f0cdcf94f52ce guide-description">Repo for nginx</p><div class="jsx-8a7f0cdcf94f52ce guide-badges"><span class="jsx-8a7f0cdcf94f52ce mobile-badge mobile-badge-primary">Web Servers</span><span class="jsx-8a7f0cdcf94f52ce mobile-badge mobile-badge-info">15 min</span></div><div class="jsx-8a7f0cdcf94f52ce guide-actions"><a href="https://github.com/howtomgr/nginx" target="_blank" rel="noopener" class="jsx-8a7f0cdcf94f52ce btn btn-secondary">View on GitHub</a></div></div></header><article class="jsx-8a7f0cdcf94f52ce guide-content"><div class="jsx-8a7f0cdcf94f52ce readme-content"><h1 id="nginx-installation-guide" class="mobile-header">NGINX Installation Guide</h1>
<p class="mobile-paragraph">High-performance web server, reverse proxy, and load balancer. Essential infrastructure component for modern web applications serving millions of websites worldwide.</p>
<h2 id="prerequisites" class="mobile-header">Prerequisites</h2>
<li class="mobile-list-item">Linux system (any modern distribution)</li>
<li class="mobile-list-item">Root or sudo access</li>
<li class="mobile-list-item">1GB RAM minimum, 2GB+ recommended for production</li>
<li class="mobile-list-item">Network connectivity for package downloads</li>
<h2 id="installation" class="mobile-header">Installation</h2>
<h3 id="ubuntudebian" class="mobile-header">Ubuntu/Debian</h3>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash"># Method 1: Distribution packages (stable, older version)
sudo apt update
sudo apt install -y nginx

# Method 2: Official NGINX repository (latest stable)
sudo apt install -y curl gnupg2 ca-certificates lsb-release debian-archive-keyring

# Import NGINX signing key
curl -fsSL https://nginx.org/keys/nginx_signing.key | sudo gpg --dearmor -o /usr/share/keyrings/nginx-archive-keyring.gpg

# Add NGINX repository
echo &quot;deb [signed-by=/usr/share/keyrings/nginx-archive-keyring.gpg] http://nginx.org/packages/ubuntu $(lsb_release -cs) nginx&quot; | sudo tee /etc/apt/sources.list.d/nginx.list

# Set repository pinning
echo -e &quot;Package: *\nPin: origin nginx.org\nPin: release o=nginx\nPin-Priority: 900\n&quot; | sudo tee /etc/apt/preferences.d/99nginx

sudo apt update
sudo apt install -y nginx

# Enable and start NGINX
sudo systemctl enable --now nginx</code></pre>
      </div>
    </div>
<h3 id="rhelcentosrocky-linuxalmalinux" class="mobile-header">RHEL/CentOS/Rocky Linux/AlmaLinux</h3>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash"># Method 1: EPEL packages
sudo yum install -y epel-release
sudo yum install -y nginx

# Method 2: Official NGINX repository (recommended)
sudo tee /etc/yum.repos.d/nginx.repo &gt; /dev/null &lt;&lt;EOF
[nginx-stable]
name=nginx stable repo
baseurl=http://nginx.org/packages/centos/\$releasever/\$basearch/
gpgcheck=1
enabled=1
gpgkey=https://nginx.org/keys/nginx_signing.key
module_hotfixes=true

[nginx-mainline]
name=nginx mainline repo
baseurl=http://nginx.org/packages/mainline/centos/\$releasever/\$basearch/
gpgcheck=1
enabled=0
gpgkey=https://nginx.org/keys/nginx_signing.key
module_hotfixes=true
EOF

sudo yum install -y nginx

# Enable and start NGINX
sudo systemctl enable --now nginx</code></pre>
      </div>
    </div>
<h3 id="fedora" class="mobile-header">Fedora</h3>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash"># Install from official Fedora repositories
sudo dnf install -y nginx

# Or from NGINX official repository
sudo dnf install -y dnf-utils
sudo tee /etc/yum.repos.d/nginx.repo &gt; /dev/null &lt;&lt;EOF
[nginx-stable]
name=nginx stable repo
baseurl=http://nginx.org/packages/fedora/\$releasever/\$basearch/
gpgcheck=1
enabled=1
gpgkey=https://nginx.org/keys/nginx_signing.key
module_hotfixes=true
EOF

sudo dnf install -y nginx
sudo systemctl enable --now nginx</code></pre>
      </div>
    </div>
<h3 id="arch-linux" class="mobile-header">Arch Linux</h3>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash"># Install from official repositories
sudo pacman -Syu nginx

# Or install nginx-mainline for latest version
sudo pacman -S nginx-mainline

# Enable and start NGINX
sudo systemctl enable --now nginx</code></pre>
      </div>
    </div>
<h3 id="opensusesuse" class="mobile-header">openSUSE/SUSE</h3>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash"># openSUSE Leap/Tumbleweed
sudo zypper install -y nginx

# Enable and start NGINX
sudo systemctl enable --now nginx</code></pre>
      </div>
    </div>
<h3 id="alpine-linux" class="mobile-header">Alpine Linux</h3>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash"># Install NGINX
sudo apk update
sudo apk add nginx

# Create directories
sudo mkdir -p /run/nginx

# Enable and start NGINX
sudo rc-update add nginx default
sudo service nginx start</code></pre>
      </div>
    </div>
<h3 id="docker-installation" class="mobile-header">Docker Installation</h3>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash"># Official NGINX Docker image
docker run -d \
  --name nginx \
  --restart unless-stopped \
  -p 80:80 \
  -p 443:443 \
  -v ~/nginx/conf:/etc/nginx/conf.d \
  -v ~/nginx/html:/usr/share/nginx/html \
  -v ~/nginx/certs:/etc/nginx/certs \
  nginx:latest

# With Docker Compose
cat &gt; docker-compose.yml &lt;&lt;EOF
version: &#039;3.8&#039;
services:
  nginx:
    image: nginx:latest
    restart: unless-stopped
    ports:
      - &quot;80:80&quot;
      - &quot;443:443&quot;
    volumes:
      - ./conf:/etc/nginx/conf.d
      - ./html:/usr/share/nginx/html
      - ./certs:/etc/nginx/certs
      - ./logs:/var/log/nginx
    networks:
      - webserver

networks:
  webserver:
    driver: bridge
EOF

docker-compose up -d</code></pre>
      </div>
    </div>
<h3 id="source-compilation-advanced" class="mobile-header">Source Compilation (Advanced)</h3>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash"># Install build dependencies
# Ubuntu/Debian
sudo apt install -y build-essential libpcre3-dev libssl-dev zlib1g-dev libgd-dev libxml2-dev uuid-dev

# RHEL/CentOS
sudo yum groupinstall -y &quot;Development Tools&quot;
sudo yum install -y pcre-devel openssl-devel zlib-devel gd-devel libxml2-devel libuuid-devel

# Download NGINX source
cd /tmp
wget http://nginx.org/download/nginx-1.24.0.tar.gz
tar xzf nginx-1.24.0.tar.gz
cd nginx-1.24.0

# Configure with modules
./configure \
  --prefix=/etc/nginx \
  --sbin-path=/usr/sbin/nginx \
  --modules-path=/usr/lib/nginx/modules \
  --conf-path=/etc/nginx/nginx.conf \
  --error-log-path=/var/log/nginx/error.log \
  --http-log-path=/var/log/nginx/access.log \
  --pid-path=/var/run/nginx.pid \
  --lock-path=/var/run/nginx.lock \
  --http-client-body-temp-path=/var/cache/nginx/client_temp \
  --http-proxy-temp-path=/var/cache/nginx/proxy_temp \
  --http-fastcgi-temp-path=/var/cache/nginx/fastcgi_temp \
  --http-uwsgi-temp-path=/var/cache/nginx/uwsgi_temp \
  --http-scgi-temp-path=/var/cache/nginx/scgi_temp \
  --with-perl_modules_path=/usr/lib/perl5/vendor_perl \
  --user=nginx \
  --group=nginx \
  --with-compat \
  --with-file-aio \
  --with-threads \
  --with-http_addition_module \
  --with-http_auth_request_module \
  --with-http_dav_module \
  --with-http_flv_module \
  --with-http_gunzip_module \
  --with-http_gzip_static_module \
  --with-http_mp4_module \
  --with-http_random_index_module \
  --with-http_realip_module \
  --with-http_secure_link_module \
  --with-http_slice_module \
  --with-http_ssl_module \
  --with-http_stub_status_module \
  --with-http_sub_module \
  --with-http_v2_module \
  --with-stream \
  --with-stream_realip_module \
  --with-stream_ssl_module \
  --with-stream_ssl_preread_module

# Compile and install
make -j$(nproc)
sudo make install

# Create nginx user
sudo useradd -r -d /var/cache/nginx -s /sbin/nologin nginx

# Create systemd service
sudo tee /etc/systemd/system/nginx.service &gt; /dev/null &lt;&lt;EOF
[Unit]
Description=The NGINX HTTP and reverse proxy server
After=network.target remote-fs.target nss-lookup.target

[Service]
Type=forking
PIDFile=/var/run/nginx.pid
ExecStartPre=/usr/sbin/nginx -t
ExecStart=/usr/sbin/nginx
ExecReload=/bin/kill -s HUP \$MAINPID
KillSignal=SIGQUIT
TimeoutStopSec=5
KillMode=mixed
PrivateTmp=true

[Install]
WantedBy=multi-user.target
EOF

sudo systemctl daemon-reload
sudo systemctl enable --now nginx</code></pre>
      </div>
    </div>
<h2 id="configuration" class="mobile-header">Configuration</h2>
<h3 id="optimized-main-configuration-etcnginxnginxconf" class="mobile-header">Optimized Main Configuration (/etc/nginx/nginx.conf)</h3>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash"># Create production-ready nginx.conf
sudo tee /etc/nginx/nginx.conf &gt; /dev/null &lt;&lt;EOF
# Run as a unique, less privileged user for security reasons.
user nginx;

# Sets the worker threads to the number of CPU cores available in the system for best performance.
worker_processes auto;

# Maximum number of open files per worker process.
worker_rlimit_nofile 65535;

error_log /var/log/nginx/error.log crit;
pid /var/run/nginx.pid;

events {
    # The maximum number of simultaneous connections that can be opened by a worker process.
    worker_connections 1024;
    
    # Tells the worker to accept multiple connections at a time
    multi_accept on;
    
    # Preferred connection method for newer linux versions
    use epoll;
}

http {
    # Hide nginx version information
    server_tokens off;
    
    # Define the MIME types for files.
    include /etc/nginx/mime.types;
    default_type application/octet-stream;
    
    # Security headers
    add_header X-Frame-Options &quot;SAMEORIGIN&quot; always;
    add_header X-XSS-Protection &quot;1; mode=block&quot; always;
    add_header X-Content-Type-Options &quot;nosniff&quot; always;
    add_header Referrer-Policy &quot;no-referrer-when-downgrade&quot; always;
    add_header Content-Security-Policy &quot;default-src &#039;self&#039; http: https: data: blob: &#039;unsafe-inline&#039;&quot; always;
    add_header Strict-Transport-Security &quot;max-age=31536000; includeSubDomains&quot; always;

    # Speed up file transfers by using sendfile() to copy directly between descriptors
    sendfile on;
    
    # Tell Nginx not to send out partial frames; this increases throughput
    tcp_nopush on;
    
    # Tell Nginx to enable the Nagle buffering algorithm for TCP packets
    tcp_nodelay on;
    
    # Compression
    gzip on;
    gzip_vary on;
    gzip_proxied any;
    gzip_comp_level 6;
    gzip_min_length 1000;
    gzip_types
        application/atom+xml
        application/javascript
        application/json
        application/ld+json
        application/manifest+json
        application/rss+xml
        application/vnd.geo+json
        application/vnd.ms-fontobject
        application/x-font-ttf
        application/x-web-app-manifest+json
        application/xhtml+xml
        application/xml
        font/opentype
        image/bmp
        image/svg+xml
        image/x-icon
        text/cache-manifest
        text/css
        text/plain
        text/vcard
        text/vnd.rim.location.xloc
        text/vtt
        text/x-component
        text/x-cross-domain-policy;
    
    # Rate limiting
    limit_req_zone \$binary_remote_addr zone=login:10m rate=10r/m;
    limit_req_zone \$binary_remote_addr zone=api:10m rate=1r/s;
    limit_conn_zone \$binary_remote_addr zone=conn_limit_per_ip:10m;
    
    # Timeouts
    client_body_timeout 12;
    client_header_timeout 12;
    keepalive_timeout 15;
    send_timeout 10;
    
    # Size Limits &amp; Buffer Overflows
    client_body_buffer_size 1k;
    client_header_buffer_size 1k;
    client_max_body_size 1m;
    large_client_header_buffers 4 4k;
    
    # Log format
    log_format main &#039;\$remote_addr - \$remote_user [\$time_local] &quot;\$request&quot; &#039;
                    &#039;\$status \$body_bytes_sent &quot;\$http_referer&quot; &#039;
                    &#039;&quot;\$http_user_agent&quot; &quot;\$http_x_forwarded_for&quot;&#039;;
                    
    access_log /var/log/nginx/access.log main;
    
    # SSL Configuration
    ssl_protocols TLSv1.2 TLSv1.3;
    ssl_ciphers ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-CHACHA20-POLY1305:ECDHE-RSA-CHACHA20-POLY1305:DHE-RSA-AES128-GCM-SHA256:DHE-RSA-AES256-GCM-SHA384;
    ssl_prefer_server_ciphers off;
    ssl_session_cache shared:SSL:10m;
    ssl_session_timeout 10m;
    ssl_dhparam /etc/ssl/certs/dhparam.pem;
    
    # OCSP stapling
    ssl_stapling on;
    ssl_stapling_verify on;
    resolver 8.8.8.8 8.8.4.4 valid=300s;
    resolver_timeout 5s;

    # Include additional configurations
    include /etc/nginx/conf.d/*.conf;
    include /etc/nginx/sites-enabled/*;
}
EOF</code></pre>
      </div>
    </div>
<h3 id="advanced-virtual-host-with-security" class="mobile-header">Advanced Virtual Host with Security</h3>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash"># Create production-ready virtual host
sudo tee /etc/nginx/sites-available/secure-site.conf &gt; /dev/null &lt;&lt;EOF
# Rate limiting
limit_req_zone \$binary_remote_addr zone=\${server_name}_ratelimit:10m rate=10r/s;

# HTTP to HTTPS redirect
server {
    listen 80;
    listen [::]:80;
    server_name example.com www.example.com;
    
    # Security headers even for redirects
    add_header X-Frame-Options &quot;DENY&quot; always;
    add_header X-Content-Type-Options &quot;nosniff&quot; always;
    
    # Redirect all HTTP traffic to HTTPS
    return 301 https://\$server_name\$request_uri;
}

# HTTPS Server
server {
    listen 443 ssl http2;
    listen [::]:443 ssl http2;
    server_name example.com www.example.com;
    root /var/www/html/example.com;
    index index.html index.htm index.php;

    # SSL Configuration (2024 Best Practices)
    ssl_certificate /etc/letsencrypt/live/example.com/fullchain.pem;
    ssl_certificate_key /etc/letsencrypt/live/example.com/privkey.pem;
    ssl_trusted_certificate /etc/letsencrypt/live/example.com/chain.pem;
    
    # Modern SSL configuration
    ssl_protocols TLSv1.2 TLSv1.3;
    ssl_ciphers ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-CHACHA20-POLY1305:ECDHE-RSA-CHACHA20-POLY1305:DHE-RSA-AES128-GCM-SHA256:DHE-RSA-AES256-GCM-SHA384;
    ssl_prefer_server_ciphers off;
    
    # SSL session caching
    ssl_session_cache shared:SSL:50m;
    ssl_session_timeout 1d;
    ssl_session_tickets off;
    
    # OCSP stapling
    ssl_stapling on;
    ssl_stapling_verify on;
    
    # Security headers (2024 recommendations)
    add_header Strict-Transport-Security &quot;max-age=31536000; includeSubDomains; preload&quot; always;
    add_header X-Frame-Options &quot;DENY&quot; always;
    add_header X-Content-Type-Options &quot;nosniff&quot; always;
    add_header X-XSS-Protection &quot;1; mode=block&quot; always;
    add_header Referrer-Policy &quot;strict-origin-when-cross-origin&quot; always;
    add_header Content-Security-Policy &quot;default-src &#039;self&#039;; script-src &#039;self&#039; &#039;unsafe-inline&#039; &#039;unsafe-eval&#039;; style-src &#039;self&#039; &#039;unsafe-inline&#039;; img-src &#039;self&#039; data: https:; font-src &#039;self&#039; data:; connect-src &#039;self&#039;; media-src &#039;self&#039;; object-src &#039;none&#039;; child-src &#039;self&#039;; form-action &#039;self&#039;; base-uri &#039;self&#039;;&quot; always;
    add_header Permissions-Policy &quot;camera=(), microphone=(), geolocation=()&quot; always;
    
    # Remove server signature
    server_tokens off;
    more_clear_headers Server;
    
    # Rate limiting
    limit_req zone=\${server_name}_ratelimit burst=20 nodelay;
    limit_conn conn_limit_per_ip 20;
    
    # Main location block
    location / {
        try_files \$uri \$uri/ =404;
        
        # Security for static files
        location ~* \.(js|css|png|jpg|jpeg|gif|ico|svg|webp|woff|woff2|ttf|eot)\$ {
            expires 1y;
            add_header Cache-Control &quot;public, immutable&quot;;
            access_log off;
            
            # Security headers for static files
            add_header X-Content-Type-Options &quot;nosniff&quot; always;
            add_header X-Frame-Options &quot;DENY&quot; always;
        }
    }
    
    # PHP processing (if needed)
    location ~ \.php\$ {
        include snippets/fastcgi-php.conf;
        fastcgi_pass unix:/var/run/php/php8.2-fpm.sock;
        fastcgi_param SCRIPT_FILENAME \$document_root\$fastcgi_script_name;
        include fastcgi_params;
        
        # Security for PHP
        fastcgi_hide_header X-Powered-By;
        add_header X-Frame-Options &quot;DENY&quot; always;
        add_header X-Content-Type-Options &quot;nosniff&quot; always;
    }
    
    # Deny access to sensitive files
    location ~ /\. {
        deny all;
        access_log off;
        log_not_found off;
    }
    
    location ~ ~\$ {
        deny all;
        access_log off;
        log_not_found off;
    }
    
    # Block common exploits
    location ~* /(wp-admin|wp-login|xmlrpc\.php) {
        deny all;
        return 404;
    }
    
    # Monitoring endpoint
    location /nginx_status {
        stub_status on;
        allow 127.0.0.1;
        allow ::1;
        deny all;
        access_log off;
    }
    
    # Health check endpoint
    location /health {
        access_log off;
        return 200 &quot;healthy\n&quot;;
        add_header Content-Type text/plain;
    }
    
    # Block bots
    location ~ /(wp-|wordpress|wp_) {
        deny all;
        return 404;
    }
    
    error_page 404 /404.html;
    error_page 500 502 503 504 /50x.html;
    
    location = /50x.html {
        root /usr/share/nginx/html;
    }
}

# Additional server block for www redirect
server {
    listen 443 ssl http2;
    listen [::]:443 ssl http2;
    server_name www.example.com;
    
    ssl_certificate /etc/letsencrypt/live/example.com/fullchain.pem;
    ssl_certificate_key /etc/letsencrypt/live/example.com/privkey.pem;
    
    return 301 https://example.com\$request_uri;
}
EOF</code></pre>
      </div>
    </div>
<h2 id="advanced-security-hardening" class="mobile-header">Advanced Security Hardening</h2>
<h3 id="generate-strong-dh-parameters" class="mobile-header">Generate Strong DH Parameters</h3>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash"># Generate 4096-bit DH parameters (takes time but more secure)
sudo openssl dhparam -out /etc/ssl/certs/dhparam.pem 4096

# Or 2048-bit for faster generation (still secure)
sudo openssl dhparam -out /etc/ssl/certs/dhparam.pem 2048</code></pre>
      </div>
    </div>
<h3 id="modsecurity-waf-installation" class="mobile-header">ModSecurity WAF Installation</h3>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash"># Ubuntu/Debian
sudo apt install -y libmodsecurity3 libmodsecurity3-dev

# Download and compile ModSecurity-nginx connector
cd /tmp
git clone --depth 1 https://github.com/SpiderLabs/ModSecurity-nginx.git
wget http://nginx.org/download/nginx-1.24.0.tar.gz
tar xzf nginx-1.24.0.tar.gz

# Compile nginx with ModSecurity
cd nginx-1.24.0
./configure --add-dynamic-module=../ModSecurity-nginx
make modules

# Copy module
sudo cp objs/ngx_http_modsecurity_module.so /usr/lib/nginx/modules/

# Enable ModSecurity
echo &quot;load_module modules/ngx_http_modsecurity_module.so;&quot; | sudo tee -a /etc/nginx/nginx.conf

# Download OWASP Core Rule Set
sudo mkdir -p /etc/nginx/modsec
cd /etc/nginx/modsec
sudo wget https://github.com/coreruleset/coreruleset/archive/refs/tags/v3.3.4.tar.gz
sudo tar xzf v3.3.4.tar.gz
sudo mv coreruleset-3.3.4 /etc/nginx/modsec/crs

# Create ModSecurity configuration
sudo tee /etc/nginx/modsec/modsecurity.conf &gt; /dev/null &lt;&lt;EOF
Include /etc/nginx/modsec/crs/crs-setup.conf.example
Include /etc/nginx/modsec/crs/rules/*.conf

SecRuleEngine On
SecRequestBodyAccess On
SecResponseBodyAccess On
SecTmpDir /tmp/
SecDataDir /etc/nginx/modsec/data/
EOF

# Enable in virtual host
modsecurity on;
modsecurity_rules_file /etc/nginx/modsec/modsecurity.conf;</code></pre>
      </div>
    </div>
<h3 id="fail2ban-integration" class="mobile-header">Fail2Ban Integration</h3>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash"># Install Fail2Ban
sudo apt install -y fail2ban  # Ubuntu/Debian
sudo yum install -y fail2ban  # RHEL/CentOS

# Create NGINX filter for Fail2Ban
sudo tee /etc/fail2ban/filter.d/nginx-req-limit.conf &gt; /dev/null &lt;&lt;EOF
[Definition]
failregex = limiting requests, excess: .* by zone .*, client: &lt;HOST&gt;
ignoreregex =
EOF

# Create jail configuration
sudo tee /etc/fail2ban/jail.d/nginx.conf &gt; /dev/null &lt;&lt;EOF
[nginx-req-limit]
enabled = true
filter = nginx-req-limit
action = iptables-multiport[name=ReqLimit, port=&quot;http,https&quot;, protocol=tcp]
logpath = /var/log/nginx/error.log
findtime = 600
bantime = 7200
maxretry = 10

[nginx-noscript]
enabled = true
port = http,https
filter = nginx-noscript
logpath = /var/log/nginx/access.log
maxretry = 6

[nginx-badbots]
enabled = true
port = http,https
filter = nginx-badbots
logpath = /var/log/nginx/access.log
maxretry = 2

[nginx-noproxy]
enabled = true
port = http,https
filter = nginx-noproxy
logpath = /var/log/nginx/access.log
maxretry = 2
EOF

sudo systemctl enable --now fail2ban</code></pre>
      </div>
    </div>
<h2 id="ssltls-with-lets-encrypt-all-platforms" class="mobile-header">SSL/TLS with Let's Encrypt (All Platforms)</h2>
<h3 id="automatic-ssl-setup" class="mobile-header">Automatic SSL Setup</h3>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash"># Install Certbot - Universal method
sudo snap install core; sudo snap refresh core
sudo snap install --classic certbot
sudo ln -s /snap/bin/certbot /usr/bin/certbot

# Alternative: Package manager installation
# Ubuntu/Debian
sudo apt install -y certbot python3-certbot-nginx

# RHEL/CentOS (enable EPEL first)
sudo yum install -y certbot python3-certbot-nginx

# Fedora
sudo dnf install -y certbot python3-certbot-nginx

# Arch Linux
sudo pacman -S certbot certbot-nginx

# Obtain certificate
sudo certbot --nginx -d example.com -d www.example.com

# Auto-renewal setup (works on all distros)
sudo crontab -e
# Add: 0 12 * * * /usr/bin/certbot renew --quiet &amp;&amp; systemctl reload nginx

# Test auto-renewal
sudo certbot renew --dry-run</code></pre>
      </div>
    </div>
<h3 id="manual-ssl-configuration-self-signed-for-testing" class="mobile-header">Manual SSL Configuration (Self-signed for testing)</h3>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash"># Generate self-signed certificate
sudo mkdir -p /etc/ssl/private
sudo openssl req -x509 -nodes -days 365 -newkey rsa:4096 \
  -keyout /etc/ssl/private/nginx-selfsigned.key \
  -out /etc/ssl/certs/nginx-selfsigned.crt \
  -subj &quot;/C=US/ST=State/L=City/O=Organization/CN=example.com&quot;

# Create strong DH group
sudo openssl dhparam -out /etc/ssl/certs/dhparam.pem 2048

# Create SSL configuration snippet
sudo tee /etc/nginx/snippets/self-signed.conf &gt; /dev/null &lt;&lt;EOF
ssl_certificate /etc/ssl/certs/nginx-selfsigned.crt;
ssl_certificate_key /etc/ssl/private/nginx-selfsigned.key;
EOF

sudo tee /etc/nginx/snippets/ssl-params.conf &gt; /dev/null &lt;&lt;EOF
ssl_protocols TLSv1.2 TLSv1.3;
ssl_prefer_server_ciphers on;
ssl_dhparam /etc/ssl/certs/dhparam.pem;
ssl_ciphers ECDHE-RSA-AES256-GCM-SHA512:DHE-RSA-AES256-GCM-SHA512:ECDHE-RSA-AES256-GCM-SHA384:DHE-RSA-AES256-GCM-SHA384;
ssl_ecdh_curve secp384r1;
ssl_session_timeout 10m;
ssl_session_cache shared:SSL:10m;
ssl_session_tickets off;
ssl_stapling on;
ssl_stapling_verify on;
resolver 8.8.8.8 8.8.4.4 valid=300s;
resolver_timeout 5s;
add_header Strict-Transport-Security &quot;max-age=63072000; includeSubDomains; preload&quot;;
add_header X-Frame-Options DENY;
add_header X-Content-Type-Options nosniff;
add_header X-XSS-Protection &quot;1; mode=block&quot;;
EOF</code></pre>
      </div>
    </div>
<h2 id="firewall-configuration-all-platforms" class="mobile-header">Firewall Configuration (All Platforms)</h2>
<h3 id="ufw-ubuntudebian" class="mobile-header">UFW (Ubuntu/Debian)</h3>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash">sudo ufw app list
sudo ufw allow &#039;Nginx Full&#039;  # Allows both HTTP and HTTPS
sudo ufw allow &#039;Nginx HTTP&#039;  # HTTP only
sudo ufw allow &#039;Nginx HTTPS&#039; # HTTPS only
sudo ufw enable
sudo ufw status</code></pre>
      </div>
    </div>
<h3 id="firewalld-rhelcentosfedora" class="mobile-header">Firewalld (RHEL/CentOS/Fedora)</h3>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash">sudo firewall-cmd --permanent --add-service=http
sudo firewall-cmd --permanent --add-service=https
sudo firewall-cmd --reload
sudo firewall-cmd --list-all</code></pre>
      </div>
    </div>
<h3 id="iptables-universal" class="mobile-header">iptables (Universal)</h3>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash"># Allow HTTP and HTTPS
sudo iptables -A INPUT -p tcp --dport 80 -j ACCEPT
sudo iptables -A INPUT -p tcp --dport 443 -j ACCEPT

# Save rules (method varies by distro)
# Ubuntu/Debian
sudo apt install -y iptables-persistent
sudo netfilter-persistent save

# RHEL/CentOS
sudo service iptables save

# Arch Linux
sudo iptables-save &gt; /etc/iptables/iptables.rules</code></pre>
      </div>
    </div>
<h3 id="selinux-configuration-rhelcentosfedora" class="mobile-header">SELinux Configuration (RHEL/CentOS/Fedora)</h3>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash"># Check SELinux status
getenforce

# Set SELinux booleans for NGINX
sudo setsebool -P httpd_can_network_connect 1
sudo setsebool -P httpd_can_network_relay 1
sudo setsebool -P httpd_execmem 1

# Create SELinux policy for custom ports
sudo semanage port -a -t http_port_t -p tcp 8080

# Check SELinux denials
sudo ausearch -m AVC,USER_AVC,SELINUX_ERR,USER_SELINUX_ERR -ts recent</code></pre>
      </div>
    </div>
<h2 id="performance-optimization-production" class="mobile-header">Performance Optimization (Production)</h2>
<h3 id="system-level-optimizations" class="mobile-header">System-level Optimizations</h3>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash"># Increase system limits for NGINX
sudo tee -a /etc/security/limits.conf &gt; /dev/null &lt;&lt;EOF
nginx soft nofile 65535
nginx hard nofile 65535
EOF

# Kernel parameters for high-traffic sites
sudo tee -a /etc/sysctl.conf &gt; /dev/null &lt;&lt;EOF
# Network tuning for NGINX
net.core.somaxconn = 65535
net.core.netdev_max_backlog = 5000
net.ipv4.tcp_max_syn_backlog = 65535
net.ipv4.tcp_max_tw_buckets = 400000
net.ipv4.tcp_tw_reuse = 1
net.ipv4.tcp_fin_timeout = 10
net.ipv4.ip_local_port_range = 15000 65000
net.core.rmem_default = 262144
net.core.rmem_max = 16777216
net.core.wmem_default = 262144
net.core.wmem_max = 16777216
net.ipv4.tcp_rmem = 4096 65536 16777216
net.ipv4.tcp_wmem = 4096 65536 16777216
fs.file-max = 100000
EOF

sudo sysctl -p</code></pre>
      </div>
    </div>
<h3 id="worker-process-optimization" class="mobile-header">Worker Process Optimization</h3>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash"># Calculate optimal worker configuration
echo &quot;CPU cores: $(nproc)&quot;
echo &quot;Recommended worker_processes: auto (or $(nproc))&quot;
echo &quot;Recommended worker_connections: 1024-4096&quot;

# Update main configuration
sudo tee /etc/nginx/conf.d/performance.conf &gt; /dev/null &lt;&lt;EOF
# Worker optimization
worker_processes auto;
worker_rlimit_nofile 65535;
worker_cpu_affinity auto;

events {
    worker_connections 4096;
    use epoll;
    multi_accept on;
}

http {
    # Connection optimization
    sendfile on;
    tcp_nopush on;
    tcp_nodelay on;
    keepalive_timeout 30;
    keepalive_requests 100;
    reset_timedout_connection on;
    
    # Buffer optimization
    client_body_buffer_size 128k;
    client_max_body_size 10m;
    client_header_buffer_size 1k;
    large_client_header_buffers 4 4k;
    output_buffers 1 32k;
    postpone_output 1460;
    
    # Timeouts
    client_header_timeout 3m;
    client_body_timeout 3m;
    send_timeout 3m;
    
    # Gzip optimization
    gzip on;
    gzip_vary on;
    gzip_min_length 1000;
    gzip_comp_level 6;
    gzip_proxied any;
    gzip_buffers 16 8k;
    gzip_http_version 1.1;
}
EOF</code></pre>
      </div>
    </div>
<h3 id="caching-configuration" class="mobile-header">Caching Configuration</h3>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash"># Create caching configuration
sudo tee /etc/nginx/conf.d/caching.conf &gt; /dev/null &lt;&lt;EOF
# Proxy cache configuration
proxy_cache_path /var/cache/nginx/proxy levels=1:2 keys_zone=my_cache:10m max_size=10g inactive=60m use_temp_path=off;

# FastCGI cache configuration
fastcgi_cache_path /var/cache/nginx/fastcgi levels=1:2 keys_zone=fastcgi_cache:10m max_size=10g inactive=60m use_temp_path=off;

# Create cache directories
sudo mkdir -p /var/cache/nginx/{proxy,fastcgi}
sudo chown -R nginx:nginx /var/cache/nginx
sudo chmod -R 755 /var/cache/nginx

# Browser caching
map \$sent_http_content_type \$expires {
    default                    off;
    text/html                  epoch;
    text/css                   max;
    application/javascript     max;
    ~image/                    1y;
    ~font/                     1y;
    application/pdf            1y;
}

expires \$expires;
EOF</code></pre>
      </div>
    </div>
<h2 id="cross-platform-verification-commands" class="mobile-header">Cross-Platform Verification Commands</h2>
<h3 id="service-management-all-distributions" class="mobile-header">Service Management (All Distributions)</h3>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash"># SystemD (Most modern distros)
sudo systemctl status nginx
sudo systemctl start nginx
sudo systemctl stop nginx
sudo systemctl restart nginx
sudo systemctl reload nginx

# Check if systemd is available
if command -v systemctl &amp;&gt; /dev/null; then
    echo &quot;Using systemd&quot;
    sudo systemctl enable --now nginx
else
    echo &quot;Using traditional init&quot;
    # For older systems or Alpine
    sudo service nginx start
    sudo chkconfig nginx on  # RHEL/CentOS 6
    sudo rc-update add nginx default  # Alpine
fi</code></pre>
      </div>
    </div>
<h3 id="configuration-testing-universal" class="mobile-header">Configuration Testing (Universal)</h3>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash"># Test configuration syntax
sudo nginx -t

# Test specific configuration file
sudo nginx -t -c /etc/nginx/nginx.conf

# Check configuration details
sudo nginx -T

# Show version and build info
nginx -v
nginx -V

# Show loaded modules
nginx -V 2&gt;&amp;1 | grep -o with-[a-z_]*</code></pre>
      </div>
    </div>
<h3 id="log-management-cross-platform" class="mobile-header">Log Management (Cross-Platform)</h3>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash"># Log rotation configuration (works on all distros)
sudo tee /etc/logrotate.d/nginx &gt; /dev/null &lt;&lt;EOF
/var/log/nginx/*.log {
    daily
    missingok
    rotate 52
    compress
    delaycompress
    notifempty
    create 644 nginx nginx
    postrotate
        if [ -f /var/run/nginx.pid ]; then
            kill -USR1 \`cat /var/run/nginx.pid\`
        fi
    endscript
}
EOF

# Manual log rotation test
sudo logrotate -d /etc/logrotate.d/nginx
sudo logrotate -f /etc/logrotate.d/nginx</code></pre>
      </div>
    </div>
<h3 id="performance-monitoring-universal" class="mobile-header">Performance Monitoring (Universal)</h3>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash"># Monitor NGINX processes
ps aux | grep nginx
htop -p $(pgrep nginx | tr &#039;\n&#039; &#039;,&#039; | sed &#039;s/,$//&#039;)

# Check connection statistics
sudo netstat -tulpn | grep nginx
sudo ss -tulpn | grep nginx

# Monitor real-time connections
while true; do echo &quot;$(date): $(sudo netstat -an | grep :80 | wc -l) connections&quot;; sleep 5; done

# Check worker process CPU usage
top -p $(pgrep nginx | head -1)

# Monitor access patterns
sudo tail -f /var/log/nginx/access.log | cut -d&#039; &#039; -f1 | sort | uniq -c | sort -nr</code></pre>
      </div>
    </div>
<h2 id="troubleshooting-cross-platform" class="mobile-header">Troubleshooting (Cross-Platform)</h2>
<h3 id="common-issues-and-solutions" class="mobile-header">Common Issues and Solutions</h3>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash"># Permission denied errors (SELinux/AppArmor)
# RHEL/CentOS with SELinux
sudo setsebool -P httpd_can_network_connect 1
sudo chcon -Rt httpd_exec_t /usr/sbin/nginx

# Ubuntu with AppArmor
sudo aa-complain /usr/sbin/nginx

# File permission issues
sudo chown -R nginx:nginx /var/www/html  # RHEL/CentOS
sudo chown -R www-data:www-data /var/www/html  # Ubuntu/Debian

# Check file contexts (SELinux)
ls -laZ /var/www/html/
sudo restorecon -Rv /var/www/html/

# Port binding issues
sudo lsof -i :80
sudo netstat -tulpn | grep :80

# Configuration syntax errors
sudo nginx -t
sudo journalctl -u nginx -f

# Memory issues
free -h
sudo systemctl status nginx
ps aux --sort=-%mem | grep nginx

# Check for core dumps
find /var/crash -name &quot;nginx*&quot; 2&gt;/dev/null
find /var/lib/systemd/coredump -name &quot;*nginx*&quot; 2&gt;/dev/null</code></pre>
      </div>
    </div>
<h3 id="debug-mode-and-logging" class="mobile-header">Debug Mode and Logging</h3>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash"># Enable debug logging
sudo nano /etc/nginx/nginx.conf
# Change: error_log /var/log/nginx/error.log debug;

# Test in foreground (debugging)
sudo nginx -g &#039;daemon off;&#039;

# Check which user nginx is running as
ps aux | grep nginx

# Verify listening addresses
sudo nginx -T | grep listen

# Check loaded modules
nginx -V 2&gt;&amp;1 | tr &#039; &#039; &#039;\n&#039; | grep module

# Test configuration with different user
sudo -u nginx nginx -t</code></pre>
      </div>
    </div>
<p class="mobile-paragraph">This updated nginx guide now includes:</p>
<li class="mobile-list-item">✅ <strong>Cross-platform support</strong> (Ubuntu, Debian, RHEL, CentOS, Rocky, Fedora, Arch, openSUSE, Alpine)</li>
<li class="mobile-list-item">✅ <strong>Complete security hardening</strong> (2024 best practices, ModSecurity WAF, Fail2Ban)</li>
<li class="mobile-list-item">✅ <strong>Performance optimization</strong> (system tuning, caching, worker optimization)</li>
<li class="mobile-list-item">✅ <strong>SSL/TLS configuration</strong> (Let's Encrypt, self-signed, modern ciphers)</li>
<li class="mobile-list-item">✅ <strong>Comprehensive troubleshooting</strong> (SELinux, AppArmor, cross-platform debugging)</li>
<p class="mobile-paragraph">Should I continue updating the other guides with this same level of comprehensive cross-platform coverage?</p></div></article><section class="jsx-8a7f0cdcf94f52ce related-section"><h2 class="jsx-8a7f0cdcf94f52ce section-title">Related <!-- -->Web Servers<!-- --> Guides</h2><div class="jsx-8a7f0cdcf94f52ce mobile-grid"><a class="mobile-card" href="/web-server/apache/"><div class="jsx-8a7f0cdcf94f52ce mobile-card-header"><h3 class="jsx-8a7f0cdcf94f52ce mobile-card-title">Apache</h3><p class="jsx-8a7f0cdcf94f52ce mobile-card-description">Repo for apache</p></div><div class="jsx-8a7f0cdcf94f52ce mobile-card-meta"><span class="jsx-8a7f0cdcf94f52ce mobile-badge mobile-badge-info">18 min</span></div></a><a class="mobile-card" href="/web-server/apache-kafka/"><div class="jsx-8a7f0cdcf94f52ce mobile-card-header"><h3 class="jsx-8a7f0cdcf94f52ce mobile-card-title">Apache Kafka</h3><p class="jsx-8a7f0cdcf94f52ce mobile-card-description">Repo for apache-kafka</p></div><div class="jsx-8a7f0cdcf94f52ce mobile-card-meta"><span class="jsx-8a7f0cdcf94f52ce mobile-badge mobile-badge-info">1 min</span></div></a><a class="mobile-card" href="/web-server/caddy/"><div class="jsx-8a7f0cdcf94f52ce mobile-card-header"><h3 class="jsx-8a7f0cdcf94f52ce mobile-card-title">Caddy</h3><p class="jsx-8a7f0cdcf94f52ce mobile-card-description">Repo for caddy</p></div><div class="jsx-8a7f0cdcf94f52ce mobile-card-meta"><span class="jsx-8a7f0cdcf94f52ce mobile-badge mobile-badge-info">1 min</span></div></a></div></section><nav class="jsx-8a7f0cdcf94f52ce guide-navigation"><a class="btn btn-secondary" href="/web-server/">← All <!-- -->Web Servers</a><a class="btn btn-secondary" href="/">All Categories</a></nav></div></main><footer class="jsx-745d6189719dfe72 mobile-footer"><div class="jsx-745d6189719dfe72 container"><div class="jsx-745d6189719dfe72 footer-content"><div class="jsx-745d6189719dfe72 footer-links"><a href="/">Home</a><a href="https://github.com/howtomgr" target="_blank" rel="noopener" class="jsx-745d6189719dfe72">GitHub</a><a href="https://github.com/howtomgr/howtomgr.github.io" target="_blank" rel="noopener" class="jsx-745d6189719dfe72">Source</a></div><div class="jsx-745d6189719dfe72 footer-separator"></div><p class="jsx-745d6189719dfe72 footer-text">© <!-- -->2025<!-- --> HowToMgr Organization. Open source installation guides.</p><p class="jsx-745d6189719dfe72 footer-tech">Built with ❤️ using Next.js + GitHub Pages</p><p class="jsx-745d6189719dfe72 footer-disclaimer"><small class="jsx-745d6189719dfe72">All guides are provided as-is. Please review and test before production use.</small></p></div></div></footer></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"guide":{"name":"nginx","displayName":"NGINX","slug":"nginx","description":"Repo for nginx","category":"web-server","language":null,"stars":0,"forks":0,"topics":[],"githubUrl":"https://github.com/howtomgr/nginx","updatedAt":"2025-09-08T03:12:37Z","createdAt":"2025-09-08T03:12:26Z","readmeRaw":"# NGINX Installation Guide\n\nHigh-performance web server, reverse proxy, and load balancer. Essential infrastructure component for modern web applications serving millions of websites worldwide.\n\n## Prerequisites\n\n- Linux system (any modern distribution)\n- Root or sudo access\n- 1GB RAM minimum, 2GB+ recommended for production\n- Network connectivity for package downloads\n\n## Installation\n\n### Ubuntu/Debian\n```bash\n# Method 1: Distribution packages (stable, older version)\nsudo apt update\nsudo apt install -y nginx\n\n# Method 2: Official NGINX repository (latest stable)\nsudo apt install -y curl gnupg2 ca-certificates lsb-release debian-archive-keyring\n\n# Import NGINX signing key\ncurl -fsSL https://nginx.org/keys/nginx_signing.key | sudo gpg --dearmor -o /usr/share/keyrings/nginx-archive-keyring.gpg\n\n# Add NGINX repository\necho \"deb [signed-by=/usr/share/keyrings/nginx-archive-keyring.gpg] http://nginx.org/packages/ubuntu $(lsb_release -cs) nginx\" | sudo tee /etc/apt/sources.list.d/nginx.list\n\n# Set repository pinning\necho -e \"Package: *\\nPin: origin nginx.org\\nPin: release o=nginx\\nPin-Priority: 900\\n\" | sudo tee /etc/apt/preferences.d/99nginx\n\nsudo apt update\nsudo apt install -y nginx\n\n# Enable and start NGINX\nsudo systemctl enable --now nginx\n```\n\n### RHEL/CentOS/Rocky Linux/AlmaLinux\n```bash\n# Method 1: EPEL packages\nsudo yum install -y epel-release\nsudo yum install -y nginx\n\n# Method 2: Official NGINX repository (recommended)\nsudo tee /etc/yum.repos.d/nginx.repo \u003e /dev/null \u003c\u003cEOF\n[nginx-stable]\nname=nginx stable repo\nbaseurl=http://nginx.org/packages/centos/\\$releasever/\\$basearch/\ngpgcheck=1\nenabled=1\ngpgkey=https://nginx.org/keys/nginx_signing.key\nmodule_hotfixes=true\n\n[nginx-mainline]\nname=nginx mainline repo\nbaseurl=http://nginx.org/packages/mainline/centos/\\$releasever/\\$basearch/\ngpgcheck=1\nenabled=0\ngpgkey=https://nginx.org/keys/nginx_signing.key\nmodule_hotfixes=true\nEOF\n\nsudo yum install -y nginx\n\n# Enable and start NGINX\nsudo systemctl enable --now nginx\n```\n\n### Fedora\n```bash\n# Install from official Fedora repositories\nsudo dnf install -y nginx\n\n# Or from NGINX official repository\nsudo dnf install -y dnf-utils\nsudo tee /etc/yum.repos.d/nginx.repo \u003e /dev/null \u003c\u003cEOF\n[nginx-stable]\nname=nginx stable repo\nbaseurl=http://nginx.org/packages/fedora/\\$releasever/\\$basearch/\ngpgcheck=1\nenabled=1\ngpgkey=https://nginx.org/keys/nginx_signing.key\nmodule_hotfixes=true\nEOF\n\nsudo dnf install -y nginx\nsudo systemctl enable --now nginx\n```\n\n### Arch Linux\n```bash\n# Install from official repositories\nsudo pacman -Syu nginx\n\n# Or install nginx-mainline for latest version\nsudo pacman -S nginx-mainline\n\n# Enable and start NGINX\nsudo systemctl enable --now nginx\n```\n\n### openSUSE/SUSE\n```bash\n# openSUSE Leap/Tumbleweed\nsudo zypper install -y nginx\n\n# Enable and start NGINX\nsudo systemctl enable --now nginx\n```\n\n### Alpine Linux\n```bash\n# Install NGINX\nsudo apk update\nsudo apk add nginx\n\n# Create directories\nsudo mkdir -p /run/nginx\n\n# Enable and start NGINX\nsudo rc-update add nginx default\nsudo service nginx start\n```\n\n### Docker Installation\n```bash\n# Official NGINX Docker image\ndocker run -d \\\n  --name nginx \\\n  --restart unless-stopped \\\n  -p 80:80 \\\n  -p 443:443 \\\n  -v ~/nginx/conf:/etc/nginx/conf.d \\\n  -v ~/nginx/html:/usr/share/nginx/html \\\n  -v ~/nginx/certs:/etc/nginx/certs \\\n  nginx:latest\n\n# With Docker Compose\ncat \u003e docker-compose.yml \u003c\u003cEOF\nversion: '3.8'\nservices:\n  nginx:\n    image: nginx:latest\n    restart: unless-stopped\n    ports:\n      - \"80:80\"\n      - \"443:443\"\n    volumes:\n      - ./conf:/etc/nginx/conf.d\n      - ./html:/usr/share/nginx/html\n      - ./certs:/etc/nginx/certs\n      - ./logs:/var/log/nginx\n    networks:\n      - webserver\n\nnetworks:\n  webserver:\n    driver: bridge\nEOF\n\ndocker-compose up -d\n```\n\n### Source Compilation (Advanced)\n```bash\n# Install build dependencies\n# Ubuntu/Debian\nsudo apt install -y build-essential libpcre3-dev libssl-dev zlib1g-dev libgd-dev libxml2-dev uuid-dev\n\n# RHEL/CentOS\nsudo yum groupinstall -y \"Development Tools\"\nsudo yum install -y pcre-devel openssl-devel zlib-devel gd-devel libxml2-devel libuuid-devel\n\n# Download NGINX source\ncd /tmp\nwget http://nginx.org/download/nginx-1.24.0.tar.gz\ntar xzf nginx-1.24.0.tar.gz\ncd nginx-1.24.0\n\n# Configure with modules\n./configure \\\n  --prefix=/etc/nginx \\\n  --sbin-path=/usr/sbin/nginx \\\n  --modules-path=/usr/lib/nginx/modules \\\n  --conf-path=/etc/nginx/nginx.conf \\\n  --error-log-path=/var/log/nginx/error.log \\\n  --http-log-path=/var/log/nginx/access.log \\\n  --pid-path=/var/run/nginx.pid \\\n  --lock-path=/var/run/nginx.lock \\\n  --http-client-body-temp-path=/var/cache/nginx/client_temp \\\n  --http-proxy-temp-path=/var/cache/nginx/proxy_temp \\\n  --http-fastcgi-temp-path=/var/cache/nginx/fastcgi_temp \\\n  --http-uwsgi-temp-path=/var/cache/nginx/uwsgi_temp \\\n  --http-scgi-temp-path=/var/cache/nginx/scgi_temp \\\n  --with-perl_modules_path=/usr/lib/perl5/vendor_perl \\\n  --user=nginx \\\n  --group=nginx \\\n  --with-compat \\\n  --with-file-aio \\\n  --with-threads \\\n  --with-http_addition_module \\\n  --with-http_auth_request_module \\\n  --with-http_dav_module \\\n  --with-http_flv_module \\\n  --with-http_gunzip_module \\\n  --with-http_gzip_static_module \\\n  --with-http_mp4_module \\\n  --with-http_random_index_module \\\n  --with-http_realip_module \\\n  --with-http_secure_link_module \\\n  --with-http_slice_module \\\n  --with-http_ssl_module \\\n  --with-http_stub_status_module \\\n  --with-http_sub_module \\\n  --with-http_v2_module \\\n  --with-stream \\\n  --with-stream_realip_module \\\n  --with-stream_ssl_module \\\n  --with-stream_ssl_preread_module\n\n# Compile and install\nmake -j$(nproc)\nsudo make install\n\n# Create nginx user\nsudo useradd -r -d /var/cache/nginx -s /sbin/nologin nginx\n\n# Create systemd service\nsudo tee /etc/systemd/system/nginx.service \u003e /dev/null \u003c\u003cEOF\n[Unit]\nDescription=The NGINX HTTP and reverse proxy server\nAfter=network.target remote-fs.target nss-lookup.target\n\n[Service]\nType=forking\nPIDFile=/var/run/nginx.pid\nExecStartPre=/usr/sbin/nginx -t\nExecStart=/usr/sbin/nginx\nExecReload=/bin/kill -s HUP \\$MAINPID\nKillSignal=SIGQUIT\nTimeoutStopSec=5\nKillMode=mixed\nPrivateTmp=true\n\n[Install]\nWantedBy=multi-user.target\nEOF\n\nsudo systemctl daemon-reload\nsudo systemctl enable --now nginx\n```\n\n## Configuration\n\n### Optimized Main Configuration (/etc/nginx/nginx.conf)\n```bash\n# Create production-ready nginx.conf\nsudo tee /etc/nginx/nginx.conf \u003e /dev/null \u003c\u003cEOF\n# Run as a unique, less privileged user for security reasons.\nuser nginx;\n\n# Sets the worker threads to the number of CPU cores available in the system for best performance.\nworker_processes auto;\n\n# Maximum number of open files per worker process.\nworker_rlimit_nofile 65535;\n\nerror_log /var/log/nginx/error.log crit;\npid /var/run/nginx.pid;\n\nevents {\n    # The maximum number of simultaneous connections that can be opened by a worker process.\n    worker_connections 1024;\n    \n    # Tells the worker to accept multiple connections at a time\n    multi_accept on;\n    \n    # Preferred connection method for newer linux versions\n    use epoll;\n}\n\nhttp {\n    # Hide nginx version information\n    server_tokens off;\n    \n    # Define the MIME types for files.\n    include /etc/nginx/mime.types;\n    default_type application/octet-stream;\n    \n    # Security headers\n    add_header X-Frame-Options \"SAMEORIGIN\" always;\n    add_header X-XSS-Protection \"1; mode=block\" always;\n    add_header X-Content-Type-Options \"nosniff\" always;\n    add_header Referrer-Policy \"no-referrer-when-downgrade\" always;\n    add_header Content-Security-Policy \"default-src 'self' http: https: data: blob: 'unsafe-inline'\" always;\n    add_header Strict-Transport-Security \"max-age=31536000; includeSubDomains\" always;\n\n    # Speed up file transfers by using sendfile() to copy directly between descriptors\n    sendfile on;\n    \n    # Tell Nginx not to send out partial frames; this increases throughput\n    tcp_nopush on;\n    \n    # Tell Nginx to enable the Nagle buffering algorithm for TCP packets\n    tcp_nodelay on;\n    \n    # Compression\n    gzip on;\n    gzip_vary on;\n    gzip_proxied any;\n    gzip_comp_level 6;\n    gzip_min_length 1000;\n    gzip_types\n        application/atom+xml\n        application/javascript\n        application/json\n        application/ld+json\n        application/manifest+json\n        application/rss+xml\n        application/vnd.geo+json\n        application/vnd.ms-fontobject\n        application/x-font-ttf\n        application/x-web-app-manifest+json\n        application/xhtml+xml\n        application/xml\n        font/opentype\n        image/bmp\n        image/svg+xml\n        image/x-icon\n        text/cache-manifest\n        text/css\n        text/plain\n        text/vcard\n        text/vnd.rim.location.xloc\n        text/vtt\n        text/x-component\n        text/x-cross-domain-policy;\n    \n    # Rate limiting\n    limit_req_zone \\$binary_remote_addr zone=login:10m rate=10r/m;\n    limit_req_zone \\$binary_remote_addr zone=api:10m rate=1r/s;\n    limit_conn_zone \\$binary_remote_addr zone=conn_limit_per_ip:10m;\n    \n    # Timeouts\n    client_body_timeout 12;\n    client_header_timeout 12;\n    keepalive_timeout 15;\n    send_timeout 10;\n    \n    # Size Limits \u0026 Buffer Overflows\n    client_body_buffer_size 1k;\n    client_header_buffer_size 1k;\n    client_max_body_size 1m;\n    large_client_header_buffers 4 4k;\n    \n    # Log format\n    log_format main '\\$remote_addr - \\$remote_user [\\$time_local] \"\\$request\" '\n                    '\\$status \\$body_bytes_sent \"\\$http_referer\" '\n                    '\"\\$http_user_agent\" \"\\$http_x_forwarded_for\"';\n                    \n    access_log /var/log/nginx/access.log main;\n    \n    # SSL Configuration\n    ssl_protocols TLSv1.2 TLSv1.3;\n    ssl_ciphers ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-CHACHA20-POLY1305:ECDHE-RSA-CHACHA20-POLY1305:DHE-RSA-AES128-GCM-SHA256:DHE-RSA-AES256-GCM-SHA384;\n    ssl_prefer_server_ciphers off;\n    ssl_session_cache shared:SSL:10m;\n    ssl_session_timeout 10m;\n    ssl_dhparam /etc/ssl/certs/dhparam.pem;\n    \n    # OCSP stapling\n    ssl_stapling on;\n    ssl_stapling_verify on;\n    resolver 8.8.8.8 8.8.4.4 valid=300s;\n    resolver_timeout 5s;\n\n    # Include additional configurations\n    include /etc/nginx/conf.d/*.conf;\n    include /etc/nginx/sites-enabled/*;\n}\nEOF\n```\n\n### Advanced Virtual Host with Security\n```bash\n# Create production-ready virtual host\nsudo tee /etc/nginx/sites-available/secure-site.conf \u003e /dev/null \u003c\u003cEOF\n# Rate limiting\nlimit_req_zone \\$binary_remote_addr zone=\\${server_name}_ratelimit:10m rate=10r/s;\n\n# HTTP to HTTPS redirect\nserver {\n    listen 80;\n    listen [::]:80;\n    server_name example.com www.example.com;\n    \n    # Security headers even for redirects\n    add_header X-Frame-Options \"DENY\" always;\n    add_header X-Content-Type-Options \"nosniff\" always;\n    \n    # Redirect all HTTP traffic to HTTPS\n    return 301 https://\\$server_name\\$request_uri;\n}\n\n# HTTPS Server\nserver {\n    listen 443 ssl http2;\n    listen [::]:443 ssl http2;\n    server_name example.com www.example.com;\n    root /var/www/html/example.com;\n    index index.html index.htm index.php;\n\n    # SSL Configuration (2024 Best Practices)\n    ssl_certificate /etc/letsencrypt/live/example.com/fullchain.pem;\n    ssl_certificate_key /etc/letsencrypt/live/example.com/privkey.pem;\n    ssl_trusted_certificate /etc/letsencrypt/live/example.com/chain.pem;\n    \n    # Modern SSL configuration\n    ssl_protocols TLSv1.2 TLSv1.3;\n    ssl_ciphers ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-CHACHA20-POLY1305:ECDHE-RSA-CHACHA20-POLY1305:DHE-RSA-AES128-GCM-SHA256:DHE-RSA-AES256-GCM-SHA384;\n    ssl_prefer_server_ciphers off;\n    \n    # SSL session caching\n    ssl_session_cache shared:SSL:50m;\n    ssl_session_timeout 1d;\n    ssl_session_tickets off;\n    \n    # OCSP stapling\n    ssl_stapling on;\n    ssl_stapling_verify on;\n    \n    # Security headers (2024 recommendations)\n    add_header Strict-Transport-Security \"max-age=31536000; includeSubDomains; preload\" always;\n    add_header X-Frame-Options \"DENY\" always;\n    add_header X-Content-Type-Options \"nosniff\" always;\n    add_header X-XSS-Protection \"1; mode=block\" always;\n    add_header Referrer-Policy \"strict-origin-when-cross-origin\" always;\n    add_header Content-Security-Policy \"default-src 'self'; script-src 'self' 'unsafe-inline' 'unsafe-eval'; style-src 'self' 'unsafe-inline'; img-src 'self' data: https:; font-src 'self' data:; connect-src 'self'; media-src 'self'; object-src 'none'; child-src 'self'; form-action 'self'; base-uri 'self';\" always;\n    add_header Permissions-Policy \"camera=(), microphone=(), geolocation=()\" always;\n    \n    # Remove server signature\n    server_tokens off;\n    more_clear_headers Server;\n    \n    # Rate limiting\n    limit_req zone=\\${server_name}_ratelimit burst=20 nodelay;\n    limit_conn conn_limit_per_ip 20;\n    \n    # Main location block\n    location / {\n        try_files \\$uri \\$uri/ =404;\n        \n        # Security for static files\n        location ~* \\.(js|css|png|jpg|jpeg|gif|ico|svg|webp|woff|woff2|ttf|eot)\\$ {\n            expires 1y;\n            add_header Cache-Control \"public, immutable\";\n            access_log off;\n            \n            # Security headers for static files\n            add_header X-Content-Type-Options \"nosniff\" always;\n            add_header X-Frame-Options \"DENY\" always;\n        }\n    }\n    \n    # PHP processing (if needed)\n    location ~ \\.php\\$ {\n        include snippets/fastcgi-php.conf;\n        fastcgi_pass unix:/var/run/php/php8.2-fpm.sock;\n        fastcgi_param SCRIPT_FILENAME \\$document_root\\$fastcgi_script_name;\n        include fastcgi_params;\n        \n        # Security for PHP\n        fastcgi_hide_header X-Powered-By;\n        add_header X-Frame-Options \"DENY\" always;\n        add_header X-Content-Type-Options \"nosniff\" always;\n    }\n    \n    # Deny access to sensitive files\n    location ~ /\\. {\n        deny all;\n        access_log off;\n        log_not_found off;\n    }\n    \n    location ~ ~\\$ {\n        deny all;\n        access_log off;\n        log_not_found off;\n    }\n    \n    # Block common exploits\n    location ~* /(wp-admin|wp-login|xmlrpc\\.php) {\n        deny all;\n        return 404;\n    }\n    \n    # Monitoring endpoint\n    location /nginx_status {\n        stub_status on;\n        allow 127.0.0.1;\n        allow ::1;\n        deny all;\n        access_log off;\n    }\n    \n    # Health check endpoint\n    location /health {\n        access_log off;\n        return 200 \"healthy\\n\";\n        add_header Content-Type text/plain;\n    }\n    \n    # Block bots\n    location ~ /(wp-|wordpress|wp_) {\n        deny all;\n        return 404;\n    }\n    \n    error_page 404 /404.html;\n    error_page 500 502 503 504 /50x.html;\n    \n    location = /50x.html {\n        root /usr/share/nginx/html;\n    }\n}\n\n# Additional server block for www redirect\nserver {\n    listen 443 ssl http2;\n    listen [::]:443 ssl http2;\n    server_name www.example.com;\n    \n    ssl_certificate /etc/letsencrypt/live/example.com/fullchain.pem;\n    ssl_certificate_key /etc/letsencrypt/live/example.com/privkey.pem;\n    \n    return 301 https://example.com\\$request_uri;\n}\nEOF\n```\n\n## Advanced Security Hardening\n\n### Generate Strong DH Parameters\n```bash\n# Generate 4096-bit DH parameters (takes time but more secure)\nsudo openssl dhparam -out /etc/ssl/certs/dhparam.pem 4096\n\n# Or 2048-bit for faster generation (still secure)\nsudo openssl dhparam -out /etc/ssl/certs/dhparam.pem 2048\n```\n\n### ModSecurity WAF Installation\n```bash\n# Ubuntu/Debian\nsudo apt install -y libmodsecurity3 libmodsecurity3-dev\n\n# Download and compile ModSecurity-nginx connector\ncd /tmp\ngit clone --depth 1 https://github.com/SpiderLabs/ModSecurity-nginx.git\nwget http://nginx.org/download/nginx-1.24.0.tar.gz\ntar xzf nginx-1.24.0.tar.gz\n\n# Compile nginx with ModSecurity\ncd nginx-1.24.0\n./configure --add-dynamic-module=../ModSecurity-nginx\nmake modules\n\n# Copy module\nsudo cp objs/ngx_http_modsecurity_module.so /usr/lib/nginx/modules/\n\n# Enable ModSecurity\necho \"load_module modules/ngx_http_modsecurity_module.so;\" | sudo tee -a /etc/nginx/nginx.conf\n\n# Download OWASP Core Rule Set\nsudo mkdir -p /etc/nginx/modsec\ncd /etc/nginx/modsec\nsudo wget https://github.com/coreruleset/coreruleset/archive/refs/tags/v3.3.4.tar.gz\nsudo tar xzf v3.3.4.tar.gz\nsudo mv coreruleset-3.3.4 /etc/nginx/modsec/crs\n\n# Create ModSecurity configuration\nsudo tee /etc/nginx/modsec/modsecurity.conf \u003e /dev/null \u003c\u003cEOF\nInclude /etc/nginx/modsec/crs/crs-setup.conf.example\nInclude /etc/nginx/modsec/crs/rules/*.conf\n\nSecRuleEngine On\nSecRequestBodyAccess On\nSecResponseBodyAccess On\nSecTmpDir /tmp/\nSecDataDir /etc/nginx/modsec/data/\nEOF\n\n# Enable in virtual host\nmodsecurity on;\nmodsecurity_rules_file /etc/nginx/modsec/modsecurity.conf;\n```\n\n### Fail2Ban Integration\n```bash\n# Install Fail2Ban\nsudo apt install -y fail2ban  # Ubuntu/Debian\nsudo yum install -y fail2ban  # RHEL/CentOS\n\n# Create NGINX filter for Fail2Ban\nsudo tee /etc/fail2ban/filter.d/nginx-req-limit.conf \u003e /dev/null \u003c\u003cEOF\n[Definition]\nfailregex = limiting requests, excess: .* by zone .*, client: \u003cHOST\u003e\nignoreregex =\nEOF\n\n# Create jail configuration\nsudo tee /etc/fail2ban/jail.d/nginx.conf \u003e /dev/null \u003c\u003cEOF\n[nginx-req-limit]\nenabled = true\nfilter = nginx-req-limit\naction = iptables-multiport[name=ReqLimit, port=\"http,https\", protocol=tcp]\nlogpath = /var/log/nginx/error.log\nfindtime = 600\nbantime = 7200\nmaxretry = 10\n\n[nginx-noscript]\nenabled = true\nport = http,https\nfilter = nginx-noscript\nlogpath = /var/log/nginx/access.log\nmaxretry = 6\n\n[nginx-badbots]\nenabled = true\nport = http,https\nfilter = nginx-badbots\nlogpath = /var/log/nginx/access.log\nmaxretry = 2\n\n[nginx-noproxy]\nenabled = true\nport = http,https\nfilter = nginx-noproxy\nlogpath = /var/log/nginx/access.log\nmaxretry = 2\nEOF\n\nsudo systemctl enable --now fail2ban\n```\n\n## SSL/TLS with Let's Encrypt (All Platforms)\n\n### Automatic SSL Setup\n```bash\n# Install Certbot - Universal method\nsudo snap install core; sudo snap refresh core\nsudo snap install --classic certbot\nsudo ln -s /snap/bin/certbot /usr/bin/certbot\n\n# Alternative: Package manager installation\n# Ubuntu/Debian\nsudo apt install -y certbot python3-certbot-nginx\n\n# RHEL/CentOS (enable EPEL first)\nsudo yum install -y certbot python3-certbot-nginx\n\n# Fedora\nsudo dnf install -y certbot python3-certbot-nginx\n\n# Arch Linux\nsudo pacman -S certbot certbot-nginx\n\n# Obtain certificate\nsudo certbot --nginx -d example.com -d www.example.com\n\n# Auto-renewal setup (works on all distros)\nsudo crontab -e\n# Add: 0 12 * * * /usr/bin/certbot renew --quiet \u0026\u0026 systemctl reload nginx\n\n# Test auto-renewal\nsudo certbot renew --dry-run\n```\n\n### Manual SSL Configuration (Self-signed for testing)\n```bash\n# Generate self-signed certificate\nsudo mkdir -p /etc/ssl/private\nsudo openssl req -x509 -nodes -days 365 -newkey rsa:4096 \\\n  -keyout /etc/ssl/private/nginx-selfsigned.key \\\n  -out /etc/ssl/certs/nginx-selfsigned.crt \\\n  -subj \"/C=US/ST=State/L=City/O=Organization/CN=example.com\"\n\n# Create strong DH group\nsudo openssl dhparam -out /etc/ssl/certs/dhparam.pem 2048\n\n# Create SSL configuration snippet\nsudo tee /etc/nginx/snippets/self-signed.conf \u003e /dev/null \u003c\u003cEOF\nssl_certificate /etc/ssl/certs/nginx-selfsigned.crt;\nssl_certificate_key /etc/ssl/private/nginx-selfsigned.key;\nEOF\n\nsudo tee /etc/nginx/snippets/ssl-params.conf \u003e /dev/null \u003c\u003cEOF\nssl_protocols TLSv1.2 TLSv1.3;\nssl_prefer_server_ciphers on;\nssl_dhparam /etc/ssl/certs/dhparam.pem;\nssl_ciphers ECDHE-RSA-AES256-GCM-SHA512:DHE-RSA-AES256-GCM-SHA512:ECDHE-RSA-AES256-GCM-SHA384:DHE-RSA-AES256-GCM-SHA384;\nssl_ecdh_curve secp384r1;\nssl_session_timeout 10m;\nssl_session_cache shared:SSL:10m;\nssl_session_tickets off;\nssl_stapling on;\nssl_stapling_verify on;\nresolver 8.8.8.8 8.8.4.4 valid=300s;\nresolver_timeout 5s;\nadd_header Strict-Transport-Security \"max-age=63072000; includeSubDomains; preload\";\nadd_header X-Frame-Options DENY;\nadd_header X-Content-Type-Options nosniff;\nadd_header X-XSS-Protection \"1; mode=block\";\nEOF\n```\n\n## Firewall Configuration (All Platforms)\n\n### UFW (Ubuntu/Debian)\n```bash\nsudo ufw app list\nsudo ufw allow 'Nginx Full'  # Allows both HTTP and HTTPS\nsudo ufw allow 'Nginx HTTP'  # HTTP only\nsudo ufw allow 'Nginx HTTPS' # HTTPS only\nsudo ufw enable\nsudo ufw status\n```\n\n### Firewalld (RHEL/CentOS/Fedora)\n```bash\nsudo firewall-cmd --permanent --add-service=http\nsudo firewall-cmd --permanent --add-service=https\nsudo firewall-cmd --reload\nsudo firewall-cmd --list-all\n```\n\n### iptables (Universal)\n```bash\n# Allow HTTP and HTTPS\nsudo iptables -A INPUT -p tcp --dport 80 -j ACCEPT\nsudo iptables -A INPUT -p tcp --dport 443 -j ACCEPT\n\n# Save rules (method varies by distro)\n# Ubuntu/Debian\nsudo apt install -y iptables-persistent\nsudo netfilter-persistent save\n\n# RHEL/CentOS\nsudo service iptables save\n\n# Arch Linux\nsudo iptables-save \u003e /etc/iptables/iptables.rules\n```\n\n### SELinux Configuration (RHEL/CentOS/Fedora)\n```bash\n# Check SELinux status\ngetenforce\n\n# Set SELinux booleans for NGINX\nsudo setsebool -P httpd_can_network_connect 1\nsudo setsebool -P httpd_can_network_relay 1\nsudo setsebool -P httpd_execmem 1\n\n# Create SELinux policy for custom ports\nsudo semanage port -a -t http_port_t -p tcp 8080\n\n# Check SELinux denials\nsudo ausearch -m AVC,USER_AVC,SELINUX_ERR,USER_SELINUX_ERR -ts recent\n```\n\n## Performance Optimization (Production)\n\n### System-level Optimizations\n```bash\n# Increase system limits for NGINX\nsudo tee -a /etc/security/limits.conf \u003e /dev/null \u003c\u003cEOF\nnginx soft nofile 65535\nnginx hard nofile 65535\nEOF\n\n# Kernel parameters for high-traffic sites\nsudo tee -a /etc/sysctl.conf \u003e /dev/null \u003c\u003cEOF\n# Network tuning for NGINX\nnet.core.somaxconn = 65535\nnet.core.netdev_max_backlog = 5000\nnet.ipv4.tcp_max_syn_backlog = 65535\nnet.ipv4.tcp_max_tw_buckets = 400000\nnet.ipv4.tcp_tw_reuse = 1\nnet.ipv4.tcp_fin_timeout = 10\nnet.ipv4.ip_local_port_range = 15000 65000\nnet.core.rmem_default = 262144\nnet.core.rmem_max = 16777216\nnet.core.wmem_default = 262144\nnet.core.wmem_max = 16777216\nnet.ipv4.tcp_rmem = 4096 65536 16777216\nnet.ipv4.tcp_wmem = 4096 65536 16777216\nfs.file-max = 100000\nEOF\n\nsudo sysctl -p\n```\n\n### Worker Process Optimization\n```bash\n# Calculate optimal worker configuration\necho \"CPU cores: $(nproc)\"\necho \"Recommended worker_processes: auto (or $(nproc))\"\necho \"Recommended worker_connections: 1024-4096\"\n\n# Update main configuration\nsudo tee /etc/nginx/conf.d/performance.conf \u003e /dev/null \u003c\u003cEOF\n# Worker optimization\nworker_processes auto;\nworker_rlimit_nofile 65535;\nworker_cpu_affinity auto;\n\nevents {\n    worker_connections 4096;\n    use epoll;\n    multi_accept on;\n}\n\nhttp {\n    # Connection optimization\n    sendfile on;\n    tcp_nopush on;\n    tcp_nodelay on;\n    keepalive_timeout 30;\n    keepalive_requests 100;\n    reset_timedout_connection on;\n    \n    # Buffer optimization\n    client_body_buffer_size 128k;\n    client_max_body_size 10m;\n    client_header_buffer_size 1k;\n    large_client_header_buffers 4 4k;\n    output_buffers 1 32k;\n    postpone_output 1460;\n    \n    # Timeouts\n    client_header_timeout 3m;\n    client_body_timeout 3m;\n    send_timeout 3m;\n    \n    # Gzip optimization\n    gzip on;\n    gzip_vary on;\n    gzip_min_length 1000;\n    gzip_comp_level 6;\n    gzip_proxied any;\n    gzip_buffers 16 8k;\n    gzip_http_version 1.1;\n}\nEOF\n```\n\n### Caching Configuration\n```bash\n# Create caching configuration\nsudo tee /etc/nginx/conf.d/caching.conf \u003e /dev/null \u003c\u003cEOF\n# Proxy cache configuration\nproxy_cache_path /var/cache/nginx/proxy levels=1:2 keys_zone=my_cache:10m max_size=10g inactive=60m use_temp_path=off;\n\n# FastCGI cache configuration\nfastcgi_cache_path /var/cache/nginx/fastcgi levels=1:2 keys_zone=fastcgi_cache:10m max_size=10g inactive=60m use_temp_path=off;\n\n# Create cache directories\nsudo mkdir -p /var/cache/nginx/{proxy,fastcgi}\nsudo chown -R nginx:nginx /var/cache/nginx\nsudo chmod -R 755 /var/cache/nginx\n\n# Browser caching\nmap \\$sent_http_content_type \\$expires {\n    default                    off;\n    text/html                  epoch;\n    text/css                   max;\n    application/javascript     max;\n    ~image/                    1y;\n    ~font/                     1y;\n    application/pdf            1y;\n}\n\nexpires \\$expires;\nEOF\n```\n\n## Cross-Platform Verification Commands\n\n### Service Management (All Distributions)\n```bash\n# SystemD (Most modern distros)\nsudo systemctl status nginx\nsudo systemctl start nginx\nsudo systemctl stop nginx\nsudo systemctl restart nginx\nsudo systemctl reload nginx\n\n# Check if systemd is available\nif command -v systemctl \u0026\u003e /dev/null; then\n    echo \"Using systemd\"\n    sudo systemctl enable --now nginx\nelse\n    echo \"Using traditional init\"\n    # For older systems or Alpine\n    sudo service nginx start\n    sudo chkconfig nginx on  # RHEL/CentOS 6\n    sudo rc-update add nginx default  # Alpine\nfi\n```\n\n### Configuration Testing (Universal)\n```bash\n# Test configuration syntax\nsudo nginx -t\n\n# Test specific configuration file\nsudo nginx -t -c /etc/nginx/nginx.conf\n\n# Check configuration details\nsudo nginx -T\n\n# Show version and build info\nnginx -v\nnginx -V\n\n# Show loaded modules\nnginx -V 2\u003e\u00261 | grep -o with-[a-z_]*\n```\n\n### Log Management (Cross-Platform)\n```bash\n# Log rotation configuration (works on all distros)\nsudo tee /etc/logrotate.d/nginx \u003e /dev/null \u003c\u003cEOF\n/var/log/nginx/*.log {\n    daily\n    missingok\n    rotate 52\n    compress\n    delaycompress\n    notifempty\n    create 644 nginx nginx\n    postrotate\n        if [ -f /var/run/nginx.pid ]; then\n            kill -USR1 \\`cat /var/run/nginx.pid\\`\n        fi\n    endscript\n}\nEOF\n\n# Manual log rotation test\nsudo logrotate -d /etc/logrotate.d/nginx\nsudo logrotate -f /etc/logrotate.d/nginx\n```\n\n### Performance Monitoring (Universal)\n```bash\n# Monitor NGINX processes\nps aux | grep nginx\nhtop -p $(pgrep nginx | tr '\\n' ',' | sed 's/,$//')\n\n# Check connection statistics\nsudo netstat -tulpn | grep nginx\nsudo ss -tulpn | grep nginx\n\n# Monitor real-time connections\nwhile true; do echo \"$(date): $(sudo netstat -an | grep :80 | wc -l) connections\"; sleep 5; done\n\n# Check worker process CPU usage\ntop -p $(pgrep nginx | head -1)\n\n# Monitor access patterns\nsudo tail -f /var/log/nginx/access.log | cut -d' ' -f1 | sort | uniq -c | sort -nr\n```\n\n## Troubleshooting (Cross-Platform)\n\n### Common Issues and Solutions\n```bash\n# Permission denied errors (SELinux/AppArmor)\n# RHEL/CentOS with SELinux\nsudo setsebool -P httpd_can_network_connect 1\nsudo chcon -Rt httpd_exec_t /usr/sbin/nginx\n\n# Ubuntu with AppArmor\nsudo aa-complain /usr/sbin/nginx\n\n# File permission issues\nsudo chown -R nginx:nginx /var/www/html  # RHEL/CentOS\nsudo chown -R www-data:www-data /var/www/html  # Ubuntu/Debian\n\n# Check file contexts (SELinux)\nls -laZ /var/www/html/\nsudo restorecon -Rv /var/www/html/\n\n# Port binding issues\nsudo lsof -i :80\nsudo netstat -tulpn | grep :80\n\n# Configuration syntax errors\nsudo nginx -t\nsudo journalctl -u nginx -f\n\n# Memory issues\nfree -h\nsudo systemctl status nginx\nps aux --sort=-%mem | grep nginx\n\n# Check for core dumps\nfind /var/crash -name \"nginx*\" 2\u003e/dev/null\nfind /var/lib/systemd/coredump -name \"*nginx*\" 2\u003e/dev/null\n```\n\n### Debug Mode and Logging\n```bash\n# Enable debug logging\nsudo nano /etc/nginx/nginx.conf\n# Change: error_log /var/log/nginx/error.log debug;\n\n# Test in foreground (debugging)\nsudo nginx -g 'daemon off;'\n\n# Check which user nginx is running as\nps aux | grep nginx\n\n# Verify listening addresses\nsudo nginx -T | grep listen\n\n# Check loaded modules\nnginx -V 2\u003e\u00261 | tr ' ' '\\n' | grep module\n\n# Test configuration with different user\nsudo -u nginx nginx -t\n```\n\nThis updated nginx guide now includes:\n- ✅ **Cross-platform support** (Ubuntu, Debian, RHEL, CentOS, Rocky, Fedora, Arch, openSUSE, Alpine)\n- ✅ **Complete security hardening** (2024 best practices, ModSecurity WAF, Fail2Ban)\n- ✅ **Performance optimization** (system tuning, caching, worker optimization)\n- ✅ **SSL/TLS configuration** (Let's Encrypt, self-signed, modern ciphers)\n- ✅ **Comprehensive troubleshooting** (SELinux, AppArmor, cross-platform debugging)\n\nShould I continue updating the other guides with this same level of comprehensive cross-platform coverage?","readmeHtml":"\u003ch1 id=\"nginx-installation-guide\" class=\"mobile-header\"\u003eNGINX Installation Guide\u003c/h1\u003e\n\u003cp class=\"mobile-paragraph\"\u003eHigh-performance web server, reverse proxy, and load balancer. Essential infrastructure component for modern web applications serving millions of websites worldwide.\u003c/p\u003e\n\u003ch2 id=\"prerequisites\" class=\"mobile-header\"\u003ePrerequisites\u003c/h2\u003e\n\u003cli class=\"mobile-list-item\"\u003eLinux system (any modern distribution)\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eRoot or sudo access\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003e1GB RAM minimum, 2GB+ recommended for production\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eNetwork connectivity for package downloads\u003c/li\u003e\n\u003ch2 id=\"installation\" class=\"mobile-header\"\u003eInstallation\u003c/h2\u003e\n\u003ch3 id=\"ubuntudebian\" class=\"mobile-header\"\u003eUbuntu/Debian\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Method 1: Distribution packages (stable, older version)\nsudo apt update\nsudo apt install -y nginx\n\n# Method 2: Official NGINX repository (latest stable)\nsudo apt install -y curl gnupg2 ca-certificates lsb-release debian-archive-keyring\n\n# Import NGINX signing key\ncurl -fsSL https://nginx.org/keys/nginx_signing.key | sudo gpg --dearmor -o /usr/share/keyrings/nginx-archive-keyring.gpg\n\n# Add NGINX repository\necho \u0026quot;deb [signed-by=/usr/share/keyrings/nginx-archive-keyring.gpg] http://nginx.org/packages/ubuntu $(lsb_release -cs) nginx\u0026quot; | sudo tee /etc/apt/sources.list.d/nginx.list\n\n# Set repository pinning\necho -e \u0026quot;Package: *\\nPin: origin nginx.org\\nPin: release o=nginx\\nPin-Priority: 900\\n\u0026quot; | sudo tee /etc/apt/preferences.d/99nginx\n\nsudo apt update\nsudo apt install -y nginx\n\n# Enable and start NGINX\nsudo systemctl enable --now nginx\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"rhelcentosrocky-linuxalmalinux\" class=\"mobile-header\"\u003eRHEL/CentOS/Rocky Linux/AlmaLinux\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Method 1: EPEL packages\nsudo yum install -y epel-release\nsudo yum install -y nginx\n\n# Method 2: Official NGINX repository (recommended)\nsudo tee /etc/yum.repos.d/nginx.repo \u0026gt; /dev/null \u0026lt;\u0026lt;EOF\n[nginx-stable]\nname=nginx stable repo\nbaseurl=http://nginx.org/packages/centos/\\$releasever/\\$basearch/\ngpgcheck=1\nenabled=1\ngpgkey=https://nginx.org/keys/nginx_signing.key\nmodule_hotfixes=true\n\n[nginx-mainline]\nname=nginx mainline repo\nbaseurl=http://nginx.org/packages/mainline/centos/\\$releasever/\\$basearch/\ngpgcheck=1\nenabled=0\ngpgkey=https://nginx.org/keys/nginx_signing.key\nmodule_hotfixes=true\nEOF\n\nsudo yum install -y nginx\n\n# Enable and start NGINX\nsudo systemctl enable --now nginx\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"fedora\" class=\"mobile-header\"\u003eFedora\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Install from official Fedora repositories\nsudo dnf install -y nginx\n\n# Or from NGINX official repository\nsudo dnf install -y dnf-utils\nsudo tee /etc/yum.repos.d/nginx.repo \u0026gt; /dev/null \u0026lt;\u0026lt;EOF\n[nginx-stable]\nname=nginx stable repo\nbaseurl=http://nginx.org/packages/fedora/\\$releasever/\\$basearch/\ngpgcheck=1\nenabled=1\ngpgkey=https://nginx.org/keys/nginx_signing.key\nmodule_hotfixes=true\nEOF\n\nsudo dnf install -y nginx\nsudo systemctl enable --now nginx\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"arch-linux\" class=\"mobile-header\"\u003eArch Linux\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Install from official repositories\nsudo pacman -Syu nginx\n\n# Or install nginx-mainline for latest version\nsudo pacman -S nginx-mainline\n\n# Enable and start NGINX\nsudo systemctl enable --now nginx\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"opensusesuse\" class=\"mobile-header\"\u003eopenSUSE/SUSE\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# openSUSE Leap/Tumbleweed\nsudo zypper install -y nginx\n\n# Enable and start NGINX\nsudo systemctl enable --now nginx\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"alpine-linux\" class=\"mobile-header\"\u003eAlpine Linux\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Install NGINX\nsudo apk update\nsudo apk add nginx\n\n# Create directories\nsudo mkdir -p /run/nginx\n\n# Enable and start NGINX\nsudo rc-update add nginx default\nsudo service nginx start\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"docker-installation\" class=\"mobile-header\"\u003eDocker Installation\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Official NGINX Docker image\ndocker run -d \\\n  --name nginx \\\n  --restart unless-stopped \\\n  -p 80:80 \\\n  -p 443:443 \\\n  -v ~/nginx/conf:/etc/nginx/conf.d \\\n  -v ~/nginx/html:/usr/share/nginx/html \\\n  -v ~/nginx/certs:/etc/nginx/certs \\\n  nginx:latest\n\n# With Docker Compose\ncat \u0026gt; docker-compose.yml \u0026lt;\u0026lt;EOF\nversion: \u0026#039;3.8\u0026#039;\nservices:\n  nginx:\n    image: nginx:latest\n    restart: unless-stopped\n    ports:\n      - \u0026quot;80:80\u0026quot;\n      - \u0026quot;443:443\u0026quot;\n    volumes:\n      - ./conf:/etc/nginx/conf.d\n      - ./html:/usr/share/nginx/html\n      - ./certs:/etc/nginx/certs\n      - ./logs:/var/log/nginx\n    networks:\n      - webserver\n\nnetworks:\n  webserver:\n    driver: bridge\nEOF\n\ndocker-compose up -d\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"source-compilation-advanced\" class=\"mobile-header\"\u003eSource Compilation (Advanced)\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Install build dependencies\n# Ubuntu/Debian\nsudo apt install -y build-essential libpcre3-dev libssl-dev zlib1g-dev libgd-dev libxml2-dev uuid-dev\n\n# RHEL/CentOS\nsudo yum groupinstall -y \u0026quot;Development Tools\u0026quot;\nsudo yum install -y pcre-devel openssl-devel zlib-devel gd-devel libxml2-devel libuuid-devel\n\n# Download NGINX source\ncd /tmp\nwget http://nginx.org/download/nginx-1.24.0.tar.gz\ntar xzf nginx-1.24.0.tar.gz\ncd nginx-1.24.0\n\n# Configure with modules\n./configure \\\n  --prefix=/etc/nginx \\\n  --sbin-path=/usr/sbin/nginx \\\n  --modules-path=/usr/lib/nginx/modules \\\n  --conf-path=/etc/nginx/nginx.conf \\\n  --error-log-path=/var/log/nginx/error.log \\\n  --http-log-path=/var/log/nginx/access.log \\\n  --pid-path=/var/run/nginx.pid \\\n  --lock-path=/var/run/nginx.lock \\\n  --http-client-body-temp-path=/var/cache/nginx/client_temp \\\n  --http-proxy-temp-path=/var/cache/nginx/proxy_temp \\\n  --http-fastcgi-temp-path=/var/cache/nginx/fastcgi_temp \\\n  --http-uwsgi-temp-path=/var/cache/nginx/uwsgi_temp \\\n  --http-scgi-temp-path=/var/cache/nginx/scgi_temp \\\n  --with-perl_modules_path=/usr/lib/perl5/vendor_perl \\\n  --user=nginx \\\n  --group=nginx \\\n  --with-compat \\\n  --with-file-aio \\\n  --with-threads \\\n  --with-http_addition_module \\\n  --with-http_auth_request_module \\\n  --with-http_dav_module \\\n  --with-http_flv_module \\\n  --with-http_gunzip_module \\\n  --with-http_gzip_static_module \\\n  --with-http_mp4_module \\\n  --with-http_random_index_module \\\n  --with-http_realip_module \\\n  --with-http_secure_link_module \\\n  --with-http_slice_module \\\n  --with-http_ssl_module \\\n  --with-http_stub_status_module \\\n  --with-http_sub_module \\\n  --with-http_v2_module \\\n  --with-stream \\\n  --with-stream_realip_module \\\n  --with-stream_ssl_module \\\n  --with-stream_ssl_preread_module\n\n# Compile and install\nmake -j$(nproc)\nsudo make install\n\n# Create nginx user\nsudo useradd -r -d /var/cache/nginx -s /sbin/nologin nginx\n\n# Create systemd service\nsudo tee /etc/systemd/system/nginx.service \u0026gt; /dev/null \u0026lt;\u0026lt;EOF\n[Unit]\nDescription=The NGINX HTTP and reverse proxy server\nAfter=network.target remote-fs.target nss-lookup.target\n\n[Service]\nType=forking\nPIDFile=/var/run/nginx.pid\nExecStartPre=/usr/sbin/nginx -t\nExecStart=/usr/sbin/nginx\nExecReload=/bin/kill -s HUP \\$MAINPID\nKillSignal=SIGQUIT\nTimeoutStopSec=5\nKillMode=mixed\nPrivateTmp=true\n\n[Install]\nWantedBy=multi-user.target\nEOF\n\nsudo systemctl daemon-reload\nsudo systemctl enable --now nginx\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"configuration\" class=\"mobile-header\"\u003eConfiguration\u003c/h2\u003e\n\u003ch3 id=\"optimized-main-configuration-etcnginxnginxconf\" class=\"mobile-header\"\u003eOptimized Main Configuration (/etc/nginx/nginx.conf)\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Create production-ready nginx.conf\nsudo tee /etc/nginx/nginx.conf \u0026gt; /dev/null \u0026lt;\u0026lt;EOF\n# Run as a unique, less privileged user for security reasons.\nuser nginx;\n\n# Sets the worker threads to the number of CPU cores available in the system for best performance.\nworker_processes auto;\n\n# Maximum number of open files per worker process.\nworker_rlimit_nofile 65535;\n\nerror_log /var/log/nginx/error.log crit;\npid /var/run/nginx.pid;\n\nevents {\n    # The maximum number of simultaneous connections that can be opened by a worker process.\n    worker_connections 1024;\n    \n    # Tells the worker to accept multiple connections at a time\n    multi_accept on;\n    \n    # Preferred connection method for newer linux versions\n    use epoll;\n}\n\nhttp {\n    # Hide nginx version information\n    server_tokens off;\n    \n    # Define the MIME types for files.\n    include /etc/nginx/mime.types;\n    default_type application/octet-stream;\n    \n    # Security headers\n    add_header X-Frame-Options \u0026quot;SAMEORIGIN\u0026quot; always;\n    add_header X-XSS-Protection \u0026quot;1; mode=block\u0026quot; always;\n    add_header X-Content-Type-Options \u0026quot;nosniff\u0026quot; always;\n    add_header Referrer-Policy \u0026quot;no-referrer-when-downgrade\u0026quot; always;\n    add_header Content-Security-Policy \u0026quot;default-src \u0026#039;self\u0026#039; http: https: data: blob: \u0026#039;unsafe-inline\u0026#039;\u0026quot; always;\n    add_header Strict-Transport-Security \u0026quot;max-age=31536000; includeSubDomains\u0026quot; always;\n\n    # Speed up file transfers by using sendfile() to copy directly between descriptors\n    sendfile on;\n    \n    # Tell Nginx not to send out partial frames; this increases throughput\n    tcp_nopush on;\n    \n    # Tell Nginx to enable the Nagle buffering algorithm for TCP packets\n    tcp_nodelay on;\n    \n    # Compression\n    gzip on;\n    gzip_vary on;\n    gzip_proxied any;\n    gzip_comp_level 6;\n    gzip_min_length 1000;\n    gzip_types\n        application/atom+xml\n        application/javascript\n        application/json\n        application/ld+json\n        application/manifest+json\n        application/rss+xml\n        application/vnd.geo+json\n        application/vnd.ms-fontobject\n        application/x-font-ttf\n        application/x-web-app-manifest+json\n        application/xhtml+xml\n        application/xml\n        font/opentype\n        image/bmp\n        image/svg+xml\n        image/x-icon\n        text/cache-manifest\n        text/css\n        text/plain\n        text/vcard\n        text/vnd.rim.location.xloc\n        text/vtt\n        text/x-component\n        text/x-cross-domain-policy;\n    \n    # Rate limiting\n    limit_req_zone \\$binary_remote_addr zone=login:10m rate=10r/m;\n    limit_req_zone \\$binary_remote_addr zone=api:10m rate=1r/s;\n    limit_conn_zone \\$binary_remote_addr zone=conn_limit_per_ip:10m;\n    \n    # Timeouts\n    client_body_timeout 12;\n    client_header_timeout 12;\n    keepalive_timeout 15;\n    send_timeout 10;\n    \n    # Size Limits \u0026amp; Buffer Overflows\n    client_body_buffer_size 1k;\n    client_header_buffer_size 1k;\n    client_max_body_size 1m;\n    large_client_header_buffers 4 4k;\n    \n    # Log format\n    log_format main \u0026#039;\\$remote_addr - \\$remote_user [\\$time_local] \u0026quot;\\$request\u0026quot; \u0026#039;\n                    \u0026#039;\\$status \\$body_bytes_sent \u0026quot;\\$http_referer\u0026quot; \u0026#039;\n                    \u0026#039;\u0026quot;\\$http_user_agent\u0026quot; \u0026quot;\\$http_x_forwarded_for\u0026quot;\u0026#039;;\n                    \n    access_log /var/log/nginx/access.log main;\n    \n    # SSL Configuration\n    ssl_protocols TLSv1.2 TLSv1.3;\n    ssl_ciphers ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-CHACHA20-POLY1305:ECDHE-RSA-CHACHA20-POLY1305:DHE-RSA-AES128-GCM-SHA256:DHE-RSA-AES256-GCM-SHA384;\n    ssl_prefer_server_ciphers off;\n    ssl_session_cache shared:SSL:10m;\n    ssl_session_timeout 10m;\n    ssl_dhparam /etc/ssl/certs/dhparam.pem;\n    \n    # OCSP stapling\n    ssl_stapling on;\n    ssl_stapling_verify on;\n    resolver 8.8.8.8 8.8.4.4 valid=300s;\n    resolver_timeout 5s;\n\n    # Include additional configurations\n    include /etc/nginx/conf.d/*.conf;\n    include /etc/nginx/sites-enabled/*;\n}\nEOF\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"advanced-virtual-host-with-security\" class=\"mobile-header\"\u003eAdvanced Virtual Host with Security\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Create production-ready virtual host\nsudo tee /etc/nginx/sites-available/secure-site.conf \u0026gt; /dev/null \u0026lt;\u0026lt;EOF\n# Rate limiting\nlimit_req_zone \\$binary_remote_addr zone=\\${server_name}_ratelimit:10m rate=10r/s;\n\n# HTTP to HTTPS redirect\nserver {\n    listen 80;\n    listen [::]:80;\n    server_name example.com www.example.com;\n    \n    # Security headers even for redirects\n    add_header X-Frame-Options \u0026quot;DENY\u0026quot; always;\n    add_header X-Content-Type-Options \u0026quot;nosniff\u0026quot; always;\n    \n    # Redirect all HTTP traffic to HTTPS\n    return 301 https://\\$server_name\\$request_uri;\n}\n\n# HTTPS Server\nserver {\n    listen 443 ssl http2;\n    listen [::]:443 ssl http2;\n    server_name example.com www.example.com;\n    root /var/www/html/example.com;\n    index index.html index.htm index.php;\n\n    # SSL Configuration (2024 Best Practices)\n    ssl_certificate /etc/letsencrypt/live/example.com/fullchain.pem;\n    ssl_certificate_key /etc/letsencrypt/live/example.com/privkey.pem;\n    ssl_trusted_certificate /etc/letsencrypt/live/example.com/chain.pem;\n    \n    # Modern SSL configuration\n    ssl_protocols TLSv1.2 TLSv1.3;\n    ssl_ciphers ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-CHACHA20-POLY1305:ECDHE-RSA-CHACHA20-POLY1305:DHE-RSA-AES128-GCM-SHA256:DHE-RSA-AES256-GCM-SHA384;\n    ssl_prefer_server_ciphers off;\n    \n    # SSL session caching\n    ssl_session_cache shared:SSL:50m;\n    ssl_session_timeout 1d;\n    ssl_session_tickets off;\n    \n    # OCSP stapling\n    ssl_stapling on;\n    ssl_stapling_verify on;\n    \n    # Security headers (2024 recommendations)\n    add_header Strict-Transport-Security \u0026quot;max-age=31536000; includeSubDomains; preload\u0026quot; always;\n    add_header X-Frame-Options \u0026quot;DENY\u0026quot; always;\n    add_header X-Content-Type-Options \u0026quot;nosniff\u0026quot; always;\n    add_header X-XSS-Protection \u0026quot;1; mode=block\u0026quot; always;\n    add_header Referrer-Policy \u0026quot;strict-origin-when-cross-origin\u0026quot; always;\n    add_header Content-Security-Policy \u0026quot;default-src \u0026#039;self\u0026#039;; script-src \u0026#039;self\u0026#039; \u0026#039;unsafe-inline\u0026#039; \u0026#039;unsafe-eval\u0026#039;; style-src \u0026#039;self\u0026#039; \u0026#039;unsafe-inline\u0026#039;; img-src \u0026#039;self\u0026#039; data: https:; font-src \u0026#039;self\u0026#039; data:; connect-src \u0026#039;self\u0026#039;; media-src \u0026#039;self\u0026#039;; object-src \u0026#039;none\u0026#039;; child-src \u0026#039;self\u0026#039;; form-action \u0026#039;self\u0026#039;; base-uri \u0026#039;self\u0026#039;;\u0026quot; always;\n    add_header Permissions-Policy \u0026quot;camera=(), microphone=(), geolocation=()\u0026quot; always;\n    \n    # Remove server signature\n    server_tokens off;\n    more_clear_headers Server;\n    \n    # Rate limiting\n    limit_req zone=\\${server_name}_ratelimit burst=20 nodelay;\n    limit_conn conn_limit_per_ip 20;\n    \n    # Main location block\n    location / {\n        try_files \\$uri \\$uri/ =404;\n        \n        # Security for static files\n        location ~* \\.(js|css|png|jpg|jpeg|gif|ico|svg|webp|woff|woff2|ttf|eot)\\$ {\n            expires 1y;\n            add_header Cache-Control \u0026quot;public, immutable\u0026quot;;\n            access_log off;\n            \n            # Security headers for static files\n            add_header X-Content-Type-Options \u0026quot;nosniff\u0026quot; always;\n            add_header X-Frame-Options \u0026quot;DENY\u0026quot; always;\n        }\n    }\n    \n    # PHP processing (if needed)\n    location ~ \\.php\\$ {\n        include snippets/fastcgi-php.conf;\n        fastcgi_pass unix:/var/run/php/php8.2-fpm.sock;\n        fastcgi_param SCRIPT_FILENAME \\$document_root\\$fastcgi_script_name;\n        include fastcgi_params;\n        \n        # Security for PHP\n        fastcgi_hide_header X-Powered-By;\n        add_header X-Frame-Options \u0026quot;DENY\u0026quot; always;\n        add_header X-Content-Type-Options \u0026quot;nosniff\u0026quot; always;\n    }\n    \n    # Deny access to sensitive files\n    location ~ /\\. {\n        deny all;\n        access_log off;\n        log_not_found off;\n    }\n    \n    location ~ ~\\$ {\n        deny all;\n        access_log off;\n        log_not_found off;\n    }\n    \n    # Block common exploits\n    location ~* /(wp-admin|wp-login|xmlrpc\\.php) {\n        deny all;\n        return 404;\n    }\n    \n    # Monitoring endpoint\n    location /nginx_status {\n        stub_status on;\n        allow 127.0.0.1;\n        allow ::1;\n        deny all;\n        access_log off;\n    }\n    \n    # Health check endpoint\n    location /health {\n        access_log off;\n        return 200 \u0026quot;healthy\\n\u0026quot;;\n        add_header Content-Type text/plain;\n    }\n    \n    # Block bots\n    location ~ /(wp-|wordpress|wp_) {\n        deny all;\n        return 404;\n    }\n    \n    error_page 404 /404.html;\n    error_page 500 502 503 504 /50x.html;\n    \n    location = /50x.html {\n        root /usr/share/nginx/html;\n    }\n}\n\n# Additional server block for www redirect\nserver {\n    listen 443 ssl http2;\n    listen [::]:443 ssl http2;\n    server_name www.example.com;\n    \n    ssl_certificate /etc/letsencrypt/live/example.com/fullchain.pem;\n    ssl_certificate_key /etc/letsencrypt/live/example.com/privkey.pem;\n    \n    return 301 https://example.com\\$request_uri;\n}\nEOF\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"advanced-security-hardening\" class=\"mobile-header\"\u003eAdvanced Security Hardening\u003c/h2\u003e\n\u003ch3 id=\"generate-strong-dh-parameters\" class=\"mobile-header\"\u003eGenerate Strong DH Parameters\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Generate 4096-bit DH parameters (takes time but more secure)\nsudo openssl dhparam -out /etc/ssl/certs/dhparam.pem 4096\n\n# Or 2048-bit for faster generation (still secure)\nsudo openssl dhparam -out /etc/ssl/certs/dhparam.pem 2048\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"modsecurity-waf-installation\" class=\"mobile-header\"\u003eModSecurity WAF Installation\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Ubuntu/Debian\nsudo apt install -y libmodsecurity3 libmodsecurity3-dev\n\n# Download and compile ModSecurity-nginx connector\ncd /tmp\ngit clone --depth 1 https://github.com/SpiderLabs/ModSecurity-nginx.git\nwget http://nginx.org/download/nginx-1.24.0.tar.gz\ntar xzf nginx-1.24.0.tar.gz\n\n# Compile nginx with ModSecurity\ncd nginx-1.24.0\n./configure --add-dynamic-module=../ModSecurity-nginx\nmake modules\n\n# Copy module\nsudo cp objs/ngx_http_modsecurity_module.so /usr/lib/nginx/modules/\n\n# Enable ModSecurity\necho \u0026quot;load_module modules/ngx_http_modsecurity_module.so;\u0026quot; | sudo tee -a /etc/nginx/nginx.conf\n\n# Download OWASP Core Rule Set\nsudo mkdir -p /etc/nginx/modsec\ncd /etc/nginx/modsec\nsudo wget https://github.com/coreruleset/coreruleset/archive/refs/tags/v3.3.4.tar.gz\nsudo tar xzf v3.3.4.tar.gz\nsudo mv coreruleset-3.3.4 /etc/nginx/modsec/crs\n\n# Create ModSecurity configuration\nsudo tee /etc/nginx/modsec/modsecurity.conf \u0026gt; /dev/null \u0026lt;\u0026lt;EOF\nInclude /etc/nginx/modsec/crs/crs-setup.conf.example\nInclude /etc/nginx/modsec/crs/rules/*.conf\n\nSecRuleEngine On\nSecRequestBodyAccess On\nSecResponseBodyAccess On\nSecTmpDir /tmp/\nSecDataDir /etc/nginx/modsec/data/\nEOF\n\n# Enable in virtual host\nmodsecurity on;\nmodsecurity_rules_file /etc/nginx/modsec/modsecurity.conf;\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"fail2ban-integration\" class=\"mobile-header\"\u003eFail2Ban Integration\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Install Fail2Ban\nsudo apt install -y fail2ban  # Ubuntu/Debian\nsudo yum install -y fail2ban  # RHEL/CentOS\n\n# Create NGINX filter for Fail2Ban\nsudo tee /etc/fail2ban/filter.d/nginx-req-limit.conf \u0026gt; /dev/null \u0026lt;\u0026lt;EOF\n[Definition]\nfailregex = limiting requests, excess: .* by zone .*, client: \u0026lt;HOST\u0026gt;\nignoreregex =\nEOF\n\n# Create jail configuration\nsudo tee /etc/fail2ban/jail.d/nginx.conf \u0026gt; /dev/null \u0026lt;\u0026lt;EOF\n[nginx-req-limit]\nenabled = true\nfilter = nginx-req-limit\naction = iptables-multiport[name=ReqLimit, port=\u0026quot;http,https\u0026quot;, protocol=tcp]\nlogpath = /var/log/nginx/error.log\nfindtime = 600\nbantime = 7200\nmaxretry = 10\n\n[nginx-noscript]\nenabled = true\nport = http,https\nfilter = nginx-noscript\nlogpath = /var/log/nginx/access.log\nmaxretry = 6\n\n[nginx-badbots]\nenabled = true\nport = http,https\nfilter = nginx-badbots\nlogpath = /var/log/nginx/access.log\nmaxretry = 2\n\n[nginx-noproxy]\nenabled = true\nport = http,https\nfilter = nginx-noproxy\nlogpath = /var/log/nginx/access.log\nmaxretry = 2\nEOF\n\nsudo systemctl enable --now fail2ban\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"ssltls-with-lets-encrypt-all-platforms\" class=\"mobile-header\"\u003eSSL/TLS with Let's Encrypt (All Platforms)\u003c/h2\u003e\n\u003ch3 id=\"automatic-ssl-setup\" class=\"mobile-header\"\u003eAutomatic SSL Setup\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Install Certbot - Universal method\nsudo snap install core; sudo snap refresh core\nsudo snap install --classic certbot\nsudo ln -s /snap/bin/certbot /usr/bin/certbot\n\n# Alternative: Package manager installation\n# Ubuntu/Debian\nsudo apt install -y certbot python3-certbot-nginx\n\n# RHEL/CentOS (enable EPEL first)\nsudo yum install -y certbot python3-certbot-nginx\n\n# Fedora\nsudo dnf install -y certbot python3-certbot-nginx\n\n# Arch Linux\nsudo pacman -S certbot certbot-nginx\n\n# Obtain certificate\nsudo certbot --nginx -d example.com -d www.example.com\n\n# Auto-renewal setup (works on all distros)\nsudo crontab -e\n# Add: 0 12 * * * /usr/bin/certbot renew --quiet \u0026amp;\u0026amp; systemctl reload nginx\n\n# Test auto-renewal\nsudo certbot renew --dry-run\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"manual-ssl-configuration-self-signed-for-testing\" class=\"mobile-header\"\u003eManual SSL Configuration (Self-signed for testing)\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Generate self-signed certificate\nsudo mkdir -p /etc/ssl/private\nsudo openssl req -x509 -nodes -days 365 -newkey rsa:4096 \\\n  -keyout /etc/ssl/private/nginx-selfsigned.key \\\n  -out /etc/ssl/certs/nginx-selfsigned.crt \\\n  -subj \u0026quot;/C=US/ST=State/L=City/O=Organization/CN=example.com\u0026quot;\n\n# Create strong DH group\nsudo openssl dhparam -out /etc/ssl/certs/dhparam.pem 2048\n\n# Create SSL configuration snippet\nsudo tee /etc/nginx/snippets/self-signed.conf \u0026gt; /dev/null \u0026lt;\u0026lt;EOF\nssl_certificate /etc/ssl/certs/nginx-selfsigned.crt;\nssl_certificate_key /etc/ssl/private/nginx-selfsigned.key;\nEOF\n\nsudo tee /etc/nginx/snippets/ssl-params.conf \u0026gt; /dev/null \u0026lt;\u0026lt;EOF\nssl_protocols TLSv1.2 TLSv1.3;\nssl_prefer_server_ciphers on;\nssl_dhparam /etc/ssl/certs/dhparam.pem;\nssl_ciphers ECDHE-RSA-AES256-GCM-SHA512:DHE-RSA-AES256-GCM-SHA512:ECDHE-RSA-AES256-GCM-SHA384:DHE-RSA-AES256-GCM-SHA384;\nssl_ecdh_curve secp384r1;\nssl_session_timeout 10m;\nssl_session_cache shared:SSL:10m;\nssl_session_tickets off;\nssl_stapling on;\nssl_stapling_verify on;\nresolver 8.8.8.8 8.8.4.4 valid=300s;\nresolver_timeout 5s;\nadd_header Strict-Transport-Security \u0026quot;max-age=63072000; includeSubDomains; preload\u0026quot;;\nadd_header X-Frame-Options DENY;\nadd_header X-Content-Type-Options nosniff;\nadd_header X-XSS-Protection \u0026quot;1; mode=block\u0026quot;;\nEOF\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"firewall-configuration-all-platforms\" class=\"mobile-header\"\u003eFirewall Configuration (All Platforms)\u003c/h2\u003e\n\u003ch3 id=\"ufw-ubuntudebian\" class=\"mobile-header\"\u003eUFW (Ubuntu/Debian)\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003esudo ufw app list\nsudo ufw allow \u0026#039;Nginx Full\u0026#039;  # Allows both HTTP and HTTPS\nsudo ufw allow \u0026#039;Nginx HTTP\u0026#039;  # HTTP only\nsudo ufw allow \u0026#039;Nginx HTTPS\u0026#039; # HTTPS only\nsudo ufw enable\nsudo ufw status\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"firewalld-rhelcentosfedora\" class=\"mobile-header\"\u003eFirewalld (RHEL/CentOS/Fedora)\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003esudo firewall-cmd --permanent --add-service=http\nsudo firewall-cmd --permanent --add-service=https\nsudo firewall-cmd --reload\nsudo firewall-cmd --list-all\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"iptables-universal\" class=\"mobile-header\"\u003eiptables (Universal)\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Allow HTTP and HTTPS\nsudo iptables -A INPUT -p tcp --dport 80 -j ACCEPT\nsudo iptables -A INPUT -p tcp --dport 443 -j ACCEPT\n\n# Save rules (method varies by distro)\n# Ubuntu/Debian\nsudo apt install -y iptables-persistent\nsudo netfilter-persistent save\n\n# RHEL/CentOS\nsudo service iptables save\n\n# Arch Linux\nsudo iptables-save \u0026gt; /etc/iptables/iptables.rules\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"selinux-configuration-rhelcentosfedora\" class=\"mobile-header\"\u003eSELinux Configuration (RHEL/CentOS/Fedora)\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Check SELinux status\ngetenforce\n\n# Set SELinux booleans for NGINX\nsudo setsebool -P httpd_can_network_connect 1\nsudo setsebool -P httpd_can_network_relay 1\nsudo setsebool -P httpd_execmem 1\n\n# Create SELinux policy for custom ports\nsudo semanage port -a -t http_port_t -p tcp 8080\n\n# Check SELinux denials\nsudo ausearch -m AVC,USER_AVC,SELINUX_ERR,USER_SELINUX_ERR -ts recent\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"performance-optimization-production\" class=\"mobile-header\"\u003ePerformance Optimization (Production)\u003c/h2\u003e\n\u003ch3 id=\"system-level-optimizations\" class=\"mobile-header\"\u003eSystem-level Optimizations\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Increase system limits for NGINX\nsudo tee -a /etc/security/limits.conf \u0026gt; /dev/null \u0026lt;\u0026lt;EOF\nnginx soft nofile 65535\nnginx hard nofile 65535\nEOF\n\n# Kernel parameters for high-traffic sites\nsudo tee -a /etc/sysctl.conf \u0026gt; /dev/null \u0026lt;\u0026lt;EOF\n# Network tuning for NGINX\nnet.core.somaxconn = 65535\nnet.core.netdev_max_backlog = 5000\nnet.ipv4.tcp_max_syn_backlog = 65535\nnet.ipv4.tcp_max_tw_buckets = 400000\nnet.ipv4.tcp_tw_reuse = 1\nnet.ipv4.tcp_fin_timeout = 10\nnet.ipv4.ip_local_port_range = 15000 65000\nnet.core.rmem_default = 262144\nnet.core.rmem_max = 16777216\nnet.core.wmem_default = 262144\nnet.core.wmem_max = 16777216\nnet.ipv4.tcp_rmem = 4096 65536 16777216\nnet.ipv4.tcp_wmem = 4096 65536 16777216\nfs.file-max = 100000\nEOF\n\nsudo sysctl -p\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"worker-process-optimization\" class=\"mobile-header\"\u003eWorker Process Optimization\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Calculate optimal worker configuration\necho \u0026quot;CPU cores: $(nproc)\u0026quot;\necho \u0026quot;Recommended worker_processes: auto (or $(nproc))\u0026quot;\necho \u0026quot;Recommended worker_connections: 1024-4096\u0026quot;\n\n# Update main configuration\nsudo tee /etc/nginx/conf.d/performance.conf \u0026gt; /dev/null \u0026lt;\u0026lt;EOF\n# Worker optimization\nworker_processes auto;\nworker_rlimit_nofile 65535;\nworker_cpu_affinity auto;\n\nevents {\n    worker_connections 4096;\n    use epoll;\n    multi_accept on;\n}\n\nhttp {\n    # Connection optimization\n    sendfile on;\n    tcp_nopush on;\n    tcp_nodelay on;\n    keepalive_timeout 30;\n    keepalive_requests 100;\n    reset_timedout_connection on;\n    \n    # Buffer optimization\n    client_body_buffer_size 128k;\n    client_max_body_size 10m;\n    client_header_buffer_size 1k;\n    large_client_header_buffers 4 4k;\n    output_buffers 1 32k;\n    postpone_output 1460;\n    \n    # Timeouts\n    client_header_timeout 3m;\n    client_body_timeout 3m;\n    send_timeout 3m;\n    \n    # Gzip optimization\n    gzip on;\n    gzip_vary on;\n    gzip_min_length 1000;\n    gzip_comp_level 6;\n    gzip_proxied any;\n    gzip_buffers 16 8k;\n    gzip_http_version 1.1;\n}\nEOF\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"caching-configuration\" class=\"mobile-header\"\u003eCaching Configuration\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Create caching configuration\nsudo tee /etc/nginx/conf.d/caching.conf \u0026gt; /dev/null \u0026lt;\u0026lt;EOF\n# Proxy cache configuration\nproxy_cache_path /var/cache/nginx/proxy levels=1:2 keys_zone=my_cache:10m max_size=10g inactive=60m use_temp_path=off;\n\n# FastCGI cache configuration\nfastcgi_cache_path /var/cache/nginx/fastcgi levels=1:2 keys_zone=fastcgi_cache:10m max_size=10g inactive=60m use_temp_path=off;\n\n# Create cache directories\nsudo mkdir -p /var/cache/nginx/{proxy,fastcgi}\nsudo chown -R nginx:nginx /var/cache/nginx\nsudo chmod -R 755 /var/cache/nginx\n\n# Browser caching\nmap \\$sent_http_content_type \\$expires {\n    default                    off;\n    text/html                  epoch;\n    text/css                   max;\n    application/javascript     max;\n    ~image/                    1y;\n    ~font/                     1y;\n    application/pdf            1y;\n}\n\nexpires \\$expires;\nEOF\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"cross-platform-verification-commands\" class=\"mobile-header\"\u003eCross-Platform Verification Commands\u003c/h2\u003e\n\u003ch3 id=\"service-management-all-distributions\" class=\"mobile-header\"\u003eService Management (All Distributions)\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# SystemD (Most modern distros)\nsudo systemctl status nginx\nsudo systemctl start nginx\nsudo systemctl stop nginx\nsudo systemctl restart nginx\nsudo systemctl reload nginx\n\n# Check if systemd is available\nif command -v systemctl \u0026amp;\u0026gt; /dev/null; then\n    echo \u0026quot;Using systemd\u0026quot;\n    sudo systemctl enable --now nginx\nelse\n    echo \u0026quot;Using traditional init\u0026quot;\n    # For older systems or Alpine\n    sudo service nginx start\n    sudo chkconfig nginx on  # RHEL/CentOS 6\n    sudo rc-update add nginx default  # Alpine\nfi\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"configuration-testing-universal\" class=\"mobile-header\"\u003eConfiguration Testing (Universal)\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Test configuration syntax\nsudo nginx -t\n\n# Test specific configuration file\nsudo nginx -t -c /etc/nginx/nginx.conf\n\n# Check configuration details\nsudo nginx -T\n\n# Show version and build info\nnginx -v\nnginx -V\n\n# Show loaded modules\nnginx -V 2\u0026gt;\u0026amp;1 | grep -o with-[a-z_]*\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"log-management-cross-platform\" class=\"mobile-header\"\u003eLog Management (Cross-Platform)\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Log rotation configuration (works on all distros)\nsudo tee /etc/logrotate.d/nginx \u0026gt; /dev/null \u0026lt;\u0026lt;EOF\n/var/log/nginx/*.log {\n    daily\n    missingok\n    rotate 52\n    compress\n    delaycompress\n    notifempty\n    create 644 nginx nginx\n    postrotate\n        if [ -f /var/run/nginx.pid ]; then\n            kill -USR1 \\`cat /var/run/nginx.pid\\`\n        fi\n    endscript\n}\nEOF\n\n# Manual log rotation test\nsudo logrotate -d /etc/logrotate.d/nginx\nsudo logrotate -f /etc/logrotate.d/nginx\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"performance-monitoring-universal\" class=\"mobile-header\"\u003ePerformance Monitoring (Universal)\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Monitor NGINX processes\nps aux | grep nginx\nhtop -p $(pgrep nginx | tr \u0026#039;\\n\u0026#039; \u0026#039;,\u0026#039; | sed \u0026#039;s/,$//\u0026#039;)\n\n# Check connection statistics\nsudo netstat -tulpn | grep nginx\nsudo ss -tulpn | grep nginx\n\n# Monitor real-time connections\nwhile true; do echo \u0026quot;$(date): $(sudo netstat -an | grep :80 | wc -l) connections\u0026quot;; sleep 5; done\n\n# Check worker process CPU usage\ntop -p $(pgrep nginx | head -1)\n\n# Monitor access patterns\nsudo tail -f /var/log/nginx/access.log | cut -d\u0026#039; \u0026#039; -f1 | sort | uniq -c | sort -nr\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"troubleshooting-cross-platform\" class=\"mobile-header\"\u003eTroubleshooting (Cross-Platform)\u003c/h2\u003e\n\u003ch3 id=\"common-issues-and-solutions\" class=\"mobile-header\"\u003eCommon Issues and Solutions\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Permission denied errors (SELinux/AppArmor)\n# RHEL/CentOS with SELinux\nsudo setsebool -P httpd_can_network_connect 1\nsudo chcon -Rt httpd_exec_t /usr/sbin/nginx\n\n# Ubuntu with AppArmor\nsudo aa-complain /usr/sbin/nginx\n\n# File permission issues\nsudo chown -R nginx:nginx /var/www/html  # RHEL/CentOS\nsudo chown -R www-data:www-data /var/www/html  # Ubuntu/Debian\n\n# Check file contexts (SELinux)\nls -laZ /var/www/html/\nsudo restorecon -Rv /var/www/html/\n\n# Port binding issues\nsudo lsof -i :80\nsudo netstat -tulpn | grep :80\n\n# Configuration syntax errors\nsudo nginx -t\nsudo journalctl -u nginx -f\n\n# Memory issues\nfree -h\nsudo systemctl status nginx\nps aux --sort=-%mem | grep nginx\n\n# Check for core dumps\nfind /var/crash -name \u0026quot;nginx*\u0026quot; 2\u0026gt;/dev/null\nfind /var/lib/systemd/coredump -name \u0026quot;*nginx*\u0026quot; 2\u0026gt;/dev/null\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"debug-mode-and-logging\" class=\"mobile-header\"\u003eDebug Mode and Logging\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Enable debug logging\nsudo nano /etc/nginx/nginx.conf\n# Change: error_log /var/log/nginx/error.log debug;\n\n# Test in foreground (debugging)\nsudo nginx -g \u0026#039;daemon off;\u0026#039;\n\n# Check which user nginx is running as\nps aux | grep nginx\n\n# Verify listening addresses\nsudo nginx -T | grep listen\n\n# Check loaded modules\nnginx -V 2\u0026gt;\u0026amp;1 | tr \u0026#039; \u0026#039; \u0026#039;\\n\u0026#039; | grep module\n\n# Test configuration with different user\nsudo -u nginx nginx -t\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003cp class=\"mobile-paragraph\"\u003eThis updated nginx guide now includes:\u003c/p\u003e\n\u003cli class=\"mobile-list-item\"\u003e✅ \u003cstrong\u003eCross-platform support\u003c/strong\u003e (Ubuntu, Debian, RHEL, CentOS, Rocky, Fedora, Arch, openSUSE, Alpine)\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003e✅ \u003cstrong\u003eComplete security hardening\u003c/strong\u003e (2024 best practices, ModSecurity WAF, Fail2Ban)\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003e✅ \u003cstrong\u003ePerformance optimization\u003c/strong\u003e (system tuning, caching, worker optimization)\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003e✅ \u003cstrong\u003eSSL/TLS configuration\u003c/strong\u003e (Let's Encrypt, self-signed, modern ciphers)\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003e✅ \u003cstrong\u003eComprehensive troubleshooting\u003c/strong\u003e (SELinux, AppArmor, cross-platform debugging)\u003c/li\u003e\n\u003cp class=\"mobile-paragraph\"\u003eShould I continue updating the other guides with this same level of comprehensive cross-platform coverage?\u003c/p\u003e","readTime":"15 min","wordCount":2979,"lastBuilt":"2025-09-14T01:15:30.681Z"},"category":{"key":"web-server","name":"Web Servers","description":"High-performance web servers and reverse proxies","icon":"🌐","color":"#50fa7b","keywords":["nginx","apache","haproxy","traefik","caddy"]},"relatedGuides":[{"name":"apache","displayName":"Apache","slug":"apache","description":"Repo for apache","category":"web-server","language":null,"stars":0,"forks":0,"topics":[],"githubUrl":"https://github.com/howtomgr/apache","updatedAt":"2025-09-08T03:04:58Z","createdAt":"2025-09-08T03:04:47Z","readmeRaw":"# Apache HTTP Server Installation Guide\n\nWorld's most popular web server software serving over 40% of active websites. Reliable, secure, and highly configurable for hosting websites and web applications.\n\n## Prerequisites\n\n- Linux system (any modern distribution)\n- Root or sudo access  \n- 1GB RAM minimum, 2GB+ recommended for production\n- Network connectivity for package downloads\n\n## Installation\n\n### Ubuntu/Debian\n```bash\n# Update package list\nsudo apt update\n\n# Install Apache and essential modules\nsudo apt install -y apache2 apache2-utils\n\n# Enable essential modules\nsudo a2enmod rewrite ssl headers deflate expires security2\n\n# Start and enable Apache\nsudo systemctl enable --now apache2\n\n# Check status\nsudo systemctl status apache2\n```\n\n### RHEL/CentOS/Rocky Linux/AlmaLinux\n```bash\n# Install Apache (httpd)\nsudo yum install -y httpd httpd-tools mod_ssl\n\n# For newer versions with dnf\nsudo dnf install -y httpd httpd-tools mod_ssl\n\n# Start and enable Apache\nsudo systemctl enable --now httpd\n\n# Check status\nsudo systemctl status httpd\n```\n\n### Fedora\n```bash\n# Install Apache\nsudo dnf install -y httpd httpd-tools mod_ssl mod_security\n\n# Start and enable Apache\nsudo systemctl enable --now httpd\n\n# Configure firewall\nsudo firewall-cmd --permanent --add-service=http\nsudo firewall-cmd --permanent --add-service=https\nsudo firewall-cmd --reload\n```\n\n### Arch Linux\n```bash\n# Install Apache\nsudo pacman -Syu apache\n\n# Start and enable Apache\nsudo systemctl enable --now httpd\n\n# Edit configuration\nsudo nano /etc/httpd/conf/httpd.conf\n# Uncomment: ServerName www.example.com:80\n```\n\n### openSUSE/SUSE\n```bash\n# Install Apache\nsudo zypper install -y apache2 apache2-mod_ssl apache2-utils\n\n# Start and enable Apache\nsudo systemctl enable --now apache2\n\n# Configure firewall\nsudo SuSEfirewall2 open EXT TCP 80 443\n```\n\n### Alpine Linux\n```bash\n# Install Apache\nsudo apk update\nsudo apk add apache2 apache2-ssl apache2-utils\n\n# Create necessary directories\nsudo mkdir -p /var/www/html\nsudo mkdir -p /run/apache2\n\n# Start and enable Apache\nsudo rc-update add apache2 default\nsudo service apache2 start\n```\n\n### Docker Installation\n```bash\n# Official Apache Docker image\ndocker run -d \\\n  --name apache \\\n  --restart unless-stopped \\\n  -p 80:80 \\\n  -p 443:443 \\\n  -v ~/apache/htdocs:/usr/local/apache2/htdocs/ \\\n  -v ~/apache/conf:/usr/local/apache2/conf/ \\\n  -v ~/apache/logs:/usr/local/apache2/logs/ \\\n  httpd:latest\n\n# With Docker Compose\ncat \u003e docker-compose.yml \u003c\u003cEOF\nversion: '3.8'\nservices:\n  apache:\n    image: httpd:latest\n    restart: unless-stopped\n    ports:\n      - \"80:80\"\n      - \"443:443\"\n    volumes:\n      - ./htdocs:/usr/local/apache2/htdocs/\n      - ./conf/httpd.conf:/usr/local/apache2/conf/httpd.conf\n      - ./logs:/usr/local/apache2/logs/\n    networks:\n      - webserver\n\nnetworks:\n  webserver:\n    driver: bridge\nEOF\n\ndocker-compose up -d\n```\n\n### Source Compilation (Advanced)\n```bash\n# Install build dependencies\n# Ubuntu/Debian\nsudo apt install -y build-essential libapr1-dev libaprutil1-dev libpcre3-dev libssl-dev zlib1g-dev\n\n# RHEL/CentOS\nsudo yum groupinstall -y \"Development Tools\"\nsudo yum install -y apr-devel apr-util-devel pcre-devel openssl-devel zlib-devel\n\n# Download Apache source\ncd /tmp\nwget https://archive.apache.org/dist/httpd/httpd-2.4.57.tar.gz\ntar xzf httpd-2.4.57.tar.gz\ncd httpd-2.4.57\n\n# Configure with security and performance modules\n./configure \\\n  --prefix=/etc/apache2 \\\n  --exec-prefix=/usr \\\n  --bindir=/usr/bin \\\n  --sbindir=/usr/sbin \\\n  --sysconfdir=/etc/apache2 \\\n  --libexecdir=/usr/lib/apache2/modules \\\n  --localstatedir=/var \\\n  --datadir=/usr/share/apache2 \\\n  --includedir=/usr/include/apache2 \\\n  --infodir=/usr/share/info \\\n  --mandir=/usr/share/man \\\n  --with-program-name=apache2 \\\n  --enable-layout=Debian \\\n  --with-regex=pcre \\\n  --enable-mods-shared=reallyall \\\n  --enable-ssl \\\n  --enable-rewrite \\\n  --enable-headers \\\n  --enable-deflate \\\n  --enable-expires \\\n  --enable-security \\\n  --with-ssl=/usr \\\n  --with-ldap \\\n  --with-ldap-include=/usr/include \\\n  --with-ldap-lib=/usr/lib\n\n# Compile and install\nmake -j$(nproc)\nsudo make install\n\n# Create apache user\nsudo useradd -r -s /sbin/nologin apache\n\n# Create systemd service\nsudo tee /etc/systemd/system/apache2.service \u003e /dev/null \u003c\u003cEOF\n[Unit]\nDescription=The Apache HTTP Server\nAfter=network.target remote-fs.target nss-lookup.target\n\n[Service]\nType=notify\nExecStart=/usr/sbin/apache2 -DFOREGROUND\nExecReload=/usr/sbin/apache2ctl graceful\nExecStop=/bin/kill -WINTERM \\${MAINPID}\nKillSignal=SIGCONT\nPrivateTmp=true\n\n[Install]\nWantedBy=multi-user.target\nEOF\n\nsudo systemctl daemon-reload\nsudo systemctl enable --now apache2\n```\n\n## Security Hardening (2024 Best Practices)\n\n### Hide Server Information\n```bash\n# Create security configuration\n# Ubuntu/Debian\nsudo tee /etc/apache2/conf-available/security-hardening.conf \u003e /dev/null \u003c\u003cEOF\n# Hide Apache version and OS information\nServerTokens Prod\nServerSignature Off\n\n# Hide PHP version (if using PHP)\nHeader always unset X-Powered-By\nHeader unset X-Powered-By\n\n# Security headers (2024 recommendations)\nHeader always set Strict-Transport-Security \"max-age=31536000; includeSubDomains; preload\"\nHeader always set X-Frame-Options \"SAMEORIGIN\"\nHeader always set X-Content-Type-Options \"nosniff\"\nHeader always set X-XSS-Protection \"1; mode=block\"\nHeader always set Referrer-Policy \"strict-origin-when-cross-origin\"\nHeader always set Content-Security-Policy \"default-src 'self'; script-src 'self' 'unsafe-inline'; style-src 'self' 'unsafe-inline'; img-src 'self' data: https:; font-src 'self' data:; connect-src 'self'; media-src 'self'; object-src 'none'; child-src 'self'; form-action 'self'; base-uri 'self';\"\nHeader always set Permissions-Policy \"camera=(), microphone=(), geolocation=()\"\n\n# Remove sensitive headers\nHeader always unset Server\nHeader unset Server\n\n# Disable server status and info\n\u003cLocation \"/server-status\"\u003e\n    SetHandler server-status\n    Require local\n\u003c/Location\u003e\n\n\u003cLocation \"/server-info\"\u003e\n    SetHandler server-info\n    Require local\n\u003c/Location\u003e\n\n# Disable trace method\nTraceEnable off\n\n# Timeout configurations\nTimeout 60\nKeepAliveTimeout 15\n\n# Limit request size (adjust as needed)\nLimitRequestBody 10485760  # 10MB\n\n# Hide .htaccess files\n\u003cFilesMatch \"^\\.ht\"\u003e\n    Require all denied\n\u003c/FilesMatch\u003e\n\n# Hide backup and temporary files\n\u003cFilesMatch \"\\.(bak|backup|swp|tmp|~)$\"\u003e\n    Require all denied\n\u003c/FilesMatch\u003e\n\n# Disable directory browsing by default\nOptions -Indexes\n\n# Information disclosure protection\n\u003cDirectoryMatch \"/\\.\"\u003e\n    Require all denied\n\u003c/DirectoryMatch\u003e\n\n# Clickjacking protection\nHeader always append X-Frame-Options SAMEORIGIN\nEOF\n\n# Enable security configuration\nsudo a2enconf security-hardening\nsudo systemctl reload apache2\n\n# RHEL/CentOS (add to main configuration)\nsudo tee -a /etc/httpd/conf/httpd.conf \u003e /dev/null \u003c\u003cEOF\n\n# Security hardening\nServerTokens Prod\nServerSignature Off\n\n# Load security headers module\nLoadModule headers_module modules/mod_headers.so\n\n# Security headers\nHeader always set Strict-Transport-Security \"max-age=31536000; includeSubDomains; preload\"\nHeader always set X-Frame-Options \"SAMEORIGIN\"\nHeader always set X-Content-Type-Options \"nosniff\"\nHeader always set X-XSS-Protection \"1; mode=block\"\nHeader always set Referrer-Policy \"strict-origin-when-cross-origin\"\n\n# Disable trace method\nTraceEnable off\n\n# Hide .htaccess files\n\u003cFilesMatch \"^\\.ht\"\u003e\n    Require all denied\n\u003c/FilesMatch\u003e\n\n# Disable directory browsing\nOptions -Indexes\nEOF\n\nsudo systemctl reload httpd\n```\n\n### ModSecurity WAF Installation\n```bash\n# Ubuntu/Debian\nsudo apt install -y libapache2-mod-security2\n\n# RHEL/CentOS\nsudo yum install -y mod_security mod_security_crs\n\n# Enable ModSecurity\nsudo a2enmod security2  # Ubuntu/Debian\n\n# Download OWASP Core Rule Set\nsudo mkdir -p /etc/apache2/modsecurity.d\ncd /etc/apache2/modsecurity.d\nsudo wget https://github.com/coreruleset/coreruleset/archive/refs/tags/v3.3.4.tar.gz\nsudo tar xzf v3.3.4.tar.gz\nsudo mv coreruleset-3.3.4 crs\n\n# Configure ModSecurity\nsudo tee /etc/apache2/mods-available/security2.conf \u003e /dev/null \u003c\u003cEOF\n\u003cIfModule mod_security2.c\u003e\n    SecRuleEngine On\n    SecRequestBodyAccess On\n    SecRequestBodyLimit 13107200\n    SecRequestBodyNoFilesLimit 131072\n    SecRequestBodyInMemoryLimit 131072\n    SecRequestBodyLimitAction Reject\n    SecRule REQUEST_HEADERS:Content-Type \"text/xml\" \\\n         \"id:'200000',phase:1,t:none,t:lowercase,pass,nolog,ctl:requestBodyProcessor=XML\"\n    SecRule REQUEST_HEADERS:Content-Type \"application/json\" \\\n         \"id:'200001',phase:1,t:none,t:lowercase,pass,nolog,ctl:requestBodyProcessor=JSON\"\n    SecRule REQBODY_ERROR \"!@eq 0\" \\\n    \"id:'200002', phase:2,t:none,log,deny,status:400,msg:'Failed to parse request body.',logdata:'Error %{REQBODY_ERROR_MSG}',severity:2\"\n    SecRule MULTIPART_STRICT_ERROR \"!@eq 0\" \\\n    \"id:'200003',phase:2,t:none,log,deny,status:400, \\\n    msg:'Multipart request body failed strict validation: \\\n    PE %{REQBODY_PROCESSOR_ERROR}, \\\n    BQ %{MULTIPART_BOUNDARY_QUOTED}, \\\n    BW %{MULTIPART_BOUNDARY_WHITESPACE}, \\\n    DB %{MULTIPART_DATA_BEFORE}, \\\n    DA %{MULTIPART_DATA_AFTER}, \\\n    HF %{MULTIPART_HEADER_FOLDING}, \\\n    LF %{MULTIPART_LF_LINE}, \\\n    SM %{MULTIPART_MISSING_SEMICOLON}, \\\n    IQ %{MULTIPART_INVALID_QUOTING}, \\\n    IP %{MULTIPART_INVALID_PART}, \\\n    IH %{MULTIPART_INVALID_HEADER_FOLDING}, \\\n    FL %{MULTIPART_FILE_LIMIT_EXCEEDED}'\"\n\n    SecRule MULTIPART_UNMATCHED_BOUNDARY \"!@eq 0\" \\\n    \"id:'200004',phase:2,t:none,log,deny,msg:'Multipart parser detected a possible unmatched boundary.'\"\n\n    SecPcreMatchLimit 1000\n    SecPcreMatchLimitRecursion 1000\n\n    SecRule TX:/^MSC_/ \"!@streq 0\" \\\n            \"id:'200005',phase:2,t:none,deny,msg:'ModSecurity internal error flagged: %{MATCHED_VAR_NAME}'\"\n\n    SecResponseBodyAccess Off\n    SecDebugLog /var/log/apache2/modsec_debug.log\n    SecDebugLogLevel 0\n    SecAuditEngine RelevantOnly\n    SecAuditLogRelevantStatus \"^(?:5|4(?!04))\"\n    SecAuditLogParts ABDEFHIJZ\n    SecAuditLogType Serial\n    SecAuditLog /var/log/apache2/modsec_audit.log\n    \n    # Include OWASP Core Rule Set\n    Include /etc/apache2/modsecurity.d/crs/crs-setup.conf.example\n    Include /etc/apache2/modsecurity.d/crs/rules/*.conf\n\u003c/IfModule\u003e\nEOF\n\n# Create data directory\nsudo mkdir -p /var/cache/modsecurity\nsudo chown www-data:www-data /var/cache/modsecurity\n\nsudo systemctl reload apache2\n```\n\n### SSL/TLS Configuration (Modern 2024 Standards)\n```bash\n# Create modern SSL configuration\nsudo tee /etc/apache2/conf-available/ssl-modern.conf \u003e /dev/null \u003c\u003cEOF\n# Modern SSL configuration (2024)\nSSLEngine on\n\n# Protocols - Only TLS 1.2 and 1.3\nSSLProtocol all -SSLv3 -TLSv1 -TLSv1.1\n\n# Cipher suites for modern browsers (2024)\nSSLCipherSuite ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-CHACHA20-POLY1305:ECDHE-RSA-CHACHA20-POLY1305:DHE-RSA-AES128-GCM-SHA256:DHE-RSA-AES256-GCM-SHA384\n\n# Prefer server ciphers for TLS 1.2, client ciphers for TLS 1.3\nSSLHonorCipherOrder off\n\n# HSTS (HTTP Strict Transport Security)\nHeader always set Strict-Transport-Security \"max-age=31536000; includeSubDomains; preload\"\n\n# Session cache\nSSLSessionCache shmcb:/var/run/ssl_scache(512000)\nSSLSessionCacheTimeout 300\n\n# OCSP Stapling\nSSLUseStapling On\nSSLStaplingCache shmcb:/var/run/ocsp(128000)\nSSLStaplingResponderTimeout 5\nSSLStaplingReturnResponderErrors off\n\n# Modern security options\nSSLCompression off\nSSLSessionTickets off\n\n# Perfect Forward Secrecy\nSSLOpenSSLConfCmd DHParameters /etc/ssl/certs/dhparam.pem\nEOF\n\n# Generate strong DH parameters\nsudo openssl dhparam -out /etc/ssl/certs/dhparam.pem 2048\n\n# Enable SSL configuration\nsudo a2enconf ssl-modern\nsudo a2enmod ssl headers\nsudo systemctl reload apache2\n```\n\n### Secure Virtual Host Configuration\n```bash\n# Create production-ready virtual host\nsudo tee /etc/apache2/sites-available/secure-site.conf \u003e /dev/null \u003c\u003cEOF\n# HTTP to HTTPS redirect\n\u003cVirtualHost *:80\u003e\n    ServerName example.com\n    ServerAlias www.example.com\n    \n    # Security headers for redirects\n    Header always set X-Content-Type-Options nosniff\n    Header always set X-Frame-Options DENY\n    \n    # Redirect to HTTPS\n    Redirect permanent / https://example.com/\n\u003c/VirtualHost\u003e\n\n# HTTPS Virtual Host\n\u003cVirtualHost *:443\u003e\n    ServerName example.com\n    ServerAlias www.example.com\n    DocumentRoot /var/www/html/example.com\n    \n    # SSL Configuration\n    SSLEngine on\n    SSLCertificateFile /etc/letsencrypt/live/example.com/fullchain.pem\n    SSLCertificateKeyFile /etc/letsencrypt/live/example.com/privkey.pem\n    \n    # Security headers (2024 standards)\n    Header always set Strict-Transport-Security \"max-age=31536000; includeSubDomains; preload\"\n    Header always set X-Frame-Options \"SAMEORIGIN\"\n    Header always set X-Content-Type-Options \"nosniff\"\n    Header always set X-XSS-Protection \"1; mode=block\"\n    Header always set Referrer-Policy \"strict-origin-when-cross-origin\"\n    Header always set Content-Security-Policy \"default-src 'self'; script-src 'self' 'unsafe-inline'; style-src 'self' 'unsafe-inline'; img-src 'self' data: https:; font-src 'self' data:; connect-src 'self'; media-src 'self'; object-src 'none'; child-src 'self'; form-action 'self'; base-uri 'self';\"\n    Header always set Permissions-Policy \"camera=(), microphone=(), geolocation=()\"\n    \n    # Remove server information\n    Header always unset Server\n    Header unset X-Powered-By\n    \n    \u003cDirectory /var/www/html/example.com\u003e\n        Options -Indexes +FollowSymLinks\n        AllowOverride All\n        Require all granted\n        \n        # Additional security\n        \u003cFiles \".*\"\u003e\n            Require all denied\n        \u003c/Files\u003e\n        \n        \u003cFiles \"*.php~\"\u003e\n            Require all denied\n        \u003c/Files\u003e\n        \n        \u003cFiles \"*.inc\"\u003e\n            Require all denied\n        \u003c/Files\u003e\n    \u003c/Directory\u003e\n    \n    # PHP configuration (if using PHP)\n    \u003cIfModule mod_php.c\u003e\n        php_admin_flag allow_url_include Off\n        php_admin_flag allow_url_fopen Off\n        php_admin_flag file_uploads On\n        php_admin_value upload_max_filesize 64M\n        php_admin_value post_max_size 64M\n        php_admin_value memory_limit 256M\n        php_admin_value max_execution_time 300\n        php_admin_flag expose_php Off\n    \u003c/IfModule\u003e\n    \n    # Compression\n    \u003cIfModule mod_deflate.c\u003e\n        SetOutputFilter DEFLATE\n        AddOutputFilterByType DEFLATE text/html text/css text/javascript text/xml text/plain application/javascript application/xml+rss application/xml application/x-javascript application/json\n        \n        # Don't compress images\n        SetEnvIfNoCase Request_URI \\.(?:gif|jpe?g|png)$ no-gzip dont-vary\n        SetEnvIfNoCase Request_URI \\.(?:exe|t?gz|zip|bz2|sit|rar)$ no-gzip dont-vary\n    \u003c/IfModule\u003e\n    \n    # Caching rules\n    \u003cIfModule mod_expires.c\u003e\n        ExpiresActive On\n        ExpiresByType image/jpg \"access plus 1 month\"\n        ExpiresByType image/jpeg \"access plus 1 month\"\n        ExpiresByType image/gif \"access plus 1 month\"\n        ExpiresByType image/png \"access plus 1 month\"\n        ExpiresByType image/webp \"access plus 1 month\"\n        ExpiresByType text/css \"access plus 1 month\"\n        ExpiresByType application/pdf \"access plus 1 month\"\n        ExpiresByType text/javascript \"access plus 1 month\"\n        ExpiresByType application/javascript \"access plus 1 month\"\n        ExpiresByType application/x-javascript \"access plus 1 month\"\n        ExpiresByType application/x-shockwave-flash \"access plus 1 month\"\n        ExpiresByType image/x-icon \"access plus 1 year\"\n        ExpiresDefault \"access plus 2 days\"\n    \u003c/IfModule\u003e\n    \n    # Rate limiting (if mod_evasive is available)\n    \u003cIfModule mod_evasive24.c\u003e\n        DOSHashTableSize    1024\n        DOSPageCount        2\n        DOSSiteCount        50\n        DOSPageInterval     1\n        DOSSiteInterval     1\n        DOSBlockingPeriod   600\n        DOSLogDir           /var/log/apache2/\n        DOSEmailNotify      admin@example.com\n    \u003c/IfModule\u003e\n    \n    # ModSecurity\n    \u003cIfModule mod_security2.c\u003e\n        SecRuleEngine On\n        SecDefaultAction \"log,auditlog,pass\"\n    \u003c/IfModule\u003e\n    \n    ErrorLog \\${APACHE_LOG_DIR}/example.com_error.log\n    CustomLog \\${APACHE_LOG_DIR}/example.com_access.log combined\n    \n    # Log security events\n    CustomLog \\${APACHE_LOG_DIR}/example.com_security.log \"%h %l %u %t \\\"%r\\\" %\u003es %b \\\"%{Referer}i\\\" \\\"%{User-agent}i\\\"\" env=security\n\u003c/VirtualHost\u003e\n\n# WWW redirect\n\u003cVirtualHost *:443\u003e\n    ServerName www.example.com\n    \n    SSLEngine on\n    SSLCertificateFile /etc/letsencrypt/live/example.com/fullchain.pem\n    SSLCertificateKeyFile /etc/letsencrypt/live/example.com/privkey.pem\n    \n    Redirect permanent / https://example.com/\n\u003c/VirtualHost\u003e\nEOF\n\nsudo a2ensite secure-site.conf\nsudo a2enconf security-hardening\nsudo systemctl reload apache2\n```\n\n### Advanced Security Modules\n```bash\n# Install additional security modules\n# Ubuntu/Debian\nsudo apt install -y libapache2-mod-evasive libapache2-mod-security2\n\n# RHEL/CentOS\nsudo yum install -y mod_evasive mod_security\n\n# Enable modules\nsudo a2enmod evasive  # Ubuntu/Debian\nsudo a2enmod security2\n\n# Configure mod_evasive (DDoS protection)\nsudo tee /etc/apache2/mods-available/evasive.conf \u003e /dev/null \u003c\u003cEOF\n\u003cIfModule mod_evasive24.c\u003e\n    DOSHashTableSize    1024\n    DOSPageCount        3\n    DOSSiteCount        50\n    DOSPageInterval     1\n    DOSSiteInterval     1\n    DOSBlockingPeriod   600\n    DOSLogDir           /var/log/apache2/\n    DOSEmailNotify      admin@example.com\n    DOSWhitelist        127.0.0.1\n    DOSWhitelist        192.168.1.*\n\u003c/IfModule\u003e\nEOF\n\nsudo systemctl reload apache2\n```\n\n## SSL Certificate Setup (Cross-Platform)\n\n### Let's Encrypt Integration\n```bash\n# Install Certbot - Universal method\nsudo snap install core; sudo snap refresh core\nsudo snap install --classic certbot\nsudo ln -s /snap/bin/certbot /usr/bin/certbot\n\n# Alternative: Package manager installation\n# Ubuntu/Debian\nsudo apt install -y certbot python3-certbot-apache\n\n# RHEL/CentOS (enable EPEL first)\nsudo yum install -y epel-release\nsudo yum install -y certbot python3-certbot-apache\n\n# Fedora\nsudo dnf install -y certbot python3-certbot-apache\n\n# Arch Linux\nsudo pacman -S certbot certbot-apache\n\n# Obtain certificate\nsudo certbot --apache -d example.com -d www.example.com\n\n# Auto-renewal setup (universal)\nsudo crontab -e\n# Add: 0 12 * * * /usr/bin/certbot renew --quiet \u0026\u0026 systemctl reload apache2\n\n# Test renewal\nsudo certbot renew --dry-run\n```\n\n### Manual SSL Configuration\n```bash\n# Generate self-signed certificate for testing\nsudo mkdir -p /etc/ssl/private\nsudo openssl req -x509 -nodes -days 365 -newkey rsa:4096 \\\n  -keyout /etc/ssl/private/apache-selfsigned.key \\\n  -out /etc/ssl/certs/apache-selfsigned.crt \\\n  -subj \"/C=US/ST=State/L=City/O=Organization/CN=example.com\"\n\n# Create SSL configuration snippet\nsudo tee /etc/apache2/conf-available/ssl-params.conf \u003e /dev/null \u003c\u003cEOF\n# Modern SSL configuration\nSSLEngine on\nSSLProtocol all -SSLv3 -TLSv1 -TLSv1.1\nSSLCipherSuite ECDHE-RSA-AES256-GCM-SHA512:DHE-RSA-AES256-GCM-SHA512:ECDHE-RSA-AES256-GCM-SHA384:DHE-RSA-AES256-GCM-SHA384\nSSLHonorCipherOrder off\nSSLSessionTickets off\nSSLUseStapling on\nSSLStaplingCache shmcb:/var/run/ssl_stapling(32768)\nSSLOpenSSLConfCmd DHParameters /etc/ssl/certs/dhparam.pem\n\n# Security headers\nHeader always set Strict-Transport-Security \"max-age=63072000; includeSubDomains; preload\"\nHeader always set X-Content-Type-Options nosniff\nHeader always set X-Frame-Options SAMEORIGIN\nHeader always set X-XSS-Protection \"1; mode=block\"\nEOF\n\nsudo a2enconf ssl-params\n```\n\n## Firewall Configuration (All Platforms)\n\n### UFW (Ubuntu/Debian)\n```bash\nsudo ufw app list | grep Apache\nsudo ufw allow 'Apache Full'    # HTTP and HTTPS\nsudo ufw allow 'Apache'         # HTTP only  \nsudo ufw allow 'Apache Secure'  # HTTPS only\nsudo ufw enable\nsudo ufw status\n```\n\n### Firewalld (RHEL/CentOS/Fedora)\n```bash\nsudo firewall-cmd --permanent --add-service=http\nsudo firewall-cmd --permanent --add-service=https\nsudo firewall-cmd --reload\nsudo firewall-cmd --list-services\n```\n\n### iptables (Universal)\n```bash\n# Allow HTTP and HTTPS\nsudo iptables -A INPUT -p tcp --dport 80 -j ACCEPT\nsudo iptables -A INPUT -p tcp --dport 443 -j ACCEPT\n\n# Save rules (varies by distribution)\n# Ubuntu/Debian\nsudo apt install -y iptables-persistent\nsudo netfilter-persistent save\n\n# RHEL/CentOS\nsudo service iptables save\n\n# Arch Linux\nsudo iptables-save \u003e /etc/iptables/iptables.rules\n\n# Alpine Linux\nsudo /etc/init.d/iptables save\n```\n\n### SELinux Configuration (RHEL/CentOS/Fedora)\n```bash\n# Check SELinux status\ngetenforce\n\n# Set SELinux booleans for Apache\nsudo setsebool -P httpd_can_network_connect 1\nsudo setsebool -P httpd_can_network_relay 1\nsudo setsebool -P httpd_use_nfs 1\nsudo setsebool -P httpd_graceful_shutdown 1\n\n# For custom content directories\nsudo semanage fcontext -a -t httpd_exec_t \"/var/www/html(/.*)?\"\nsudo restorecon -Rv /var/www/html/\n\n# For custom ports\nsudo semanage port -a -t http_port_t -p tcp 8080\n\n# Check denials\nsudo ausearch -m AVC,USER_AVC,SELINUX_ERR -ts recent\n```\n\n## Performance Optimization\n\n### Multi-Processing Module (MPM) Tuning\n```bash\n# Check current MPM\napache2ctl -M | grep mpm  # Ubuntu/Debian\nhttpd -M | grep mpm       # RHEL/CentOS\n\n# Configure Event MPM (most efficient)\nsudo tee /etc/apache2/mods-available/mpm_event.conf \u003e /dev/null \u003c\u003cEOF\n\u003cIfModule mpm_event_module\u003e\n    StartServers             3\n    MinSpareThreads         75\n    MaxSpareThreads        250\n    ThreadsPerChild         25\n    MaxRequestWorkers      400\n    MaxConnectionsPerChild   0\n    AsyncRequestWorkerFactor 2\n\u003c/IfModule\u003e\nEOF\n\n# Enable Event MPM\nsudo a2dismod mpm_prefork\nsudo a2enmod mpm_event\nsudo systemctl restart apache2\n```\n\n### System-level Performance Tuning\n```bash\n# Increase system limits\nsudo tee -a /etc/security/limits.conf \u003e /dev/null \u003c\u003cEOF\napache soft nofile 65535\napache hard nofile 65535\nwww-data soft nofile 65535\nwww-data hard nofile 65535\nEOF\n\n# Kernel optimization for web servers\nsudo tee -a /etc/sysctl.conf \u003e /dev/null \u003c\u003cEOF\n# Apache/web server optimization\nnet.core.somaxconn = 65535\nnet.core.netdev_max_backlog = 5000\nnet.ipv4.tcp_max_syn_backlog = 65535\nnet.ipv4.tcp_fin_timeout = 10\nnet.ipv4.tcp_tw_reuse = 1\nnet.ipv4.ip_local_port_range = 15000 65000\nfs.file-max = 100000\n\n# Memory management\nvm.swappiness = 10\nvm.dirty_ratio = 15\nvm.dirty_background_ratio = 5\nEOF\n\nsudo sysctl -p\n```\n\n### Caching Configuration\n```bash\n# Enable caching modules\nsudo a2enmod cache cache_disk expires headers\n\n# Create cache configuration\nsudo tee /etc/apache2/conf-available/caching.conf \u003e /dev/null \u003c\u003cEOF\n# Disk cache configuration\n\u003cIfModule mod_cache_disk.c\u003e\n    CacheRoot /var/cache/apache2/mod_cache_disk\n    CacheDirLevels 2\n    CacheDirLength 1\n    CacheEnable disk /\n    CacheIgnoreHeaders Set-Cookie\n    CacheDefaultExpire 3600\n    CacheMaxExpire 86400\n    CacheLastModifiedFactor 0.1\n\u003c/IfModule\u003e\n\n# Browser caching\n\u003cIfModule mod_expires.c\u003e\n    ExpiresActive On\n    \n    # Cache static assets\n    ExpiresByType image/jpg \"access plus 1 year\"\n    ExpiresByType image/jpeg \"access plus 1 year\"\n    ExpiresByType image/gif \"access plus 1 year\"\n    ExpiresByType image/png \"access plus 1 year\"\n    ExpiresByType image/webp \"access plus 1 year\"\n    ExpiresByType text/css \"access plus 1 month\"\n    ExpiresByType application/pdf \"access plus 1 month\"\n    ExpiresByType text/javascript \"access plus 1 month\"\n    ExpiresByType application/javascript \"access plus 1 month\"\n    ExpiresByType application/x-javascript \"access plus 1 month\"\n    ExpiresByType application/x-shockwave-flash \"access plus 1 month\"\n    ExpiresByType image/x-icon \"access plus 1 year\"\n    ExpiresByType text/html \"access plus 300 seconds\"\n    \n    # Default expiration\n    ExpiresDefault \"access plus 1 day\"\n\u003c/IfModule\u003e\n\n# Compression\n\u003cIfModule mod_deflate.c\u003e\n    # Enable compression for text files\n    \u003cLocation /\u003e\n        SetOutputFilter DEFLATE\n        \n        # Don't compress images or binaries\n        SetEnvIfNoCase Request_URI \\\n            \\.(?:gif|jpe?g|png|webp)$ no-gzip dont-vary\n        SetEnvIfNoCase Request_URI \\\n            \\.(?:exe|t?gz|zip|bz2|sit|rar|pdf)$ no-gzip dont-vary\n            \n        # Include file types to compress\n        AddOutputFilterByType DEFLATE text/html text/plain text/xml text/css text/javascript\n        AddOutputFilterByType DEFLATE application/javascript application/json application/xml application/xhtml+xml application/rss+xml\n    \u003c/Location\u003e\n\u003c/IfModule\u003e\nEOF\n\n# Create cache directory\nsudo mkdir -p /var/cache/apache2/mod_cache_disk\nsudo chown -R www-data:www-data /var/cache/apache2  # Ubuntu/Debian\nsudo chown -R apache:apache /var/cache/apache2      # RHEL/CentOS\n\nsudo a2enconf caching\nsudo systemctl reload apache2\n```\n\n## Cross-Platform Verification\n\n### Service Management (All Distributions)\n```bash\n# Check which init system is in use\nif command -v systemctl \u0026\u003e /dev/null; then\n    echo \"Using systemd\"\n    \n    # SystemD commands\n    sudo systemctl status apache2    # Ubuntu/Debian\n    sudo systemctl status httpd      # RHEL/CentOS\n    sudo systemctl restart apache2\n    sudo systemctl reload apache2\n    \nelif command -v service \u0026\u003e /dev/null; then\n    echo \"Using SysV init\"\n    \n    # Traditional service commands\n    sudo service apache2 status\n    sudo service apache2 restart\n    sudo service apache2 reload\n    \nelif command -v rc-service \u0026\u003e /dev/null; then\n    echo \"Using OpenRC (Alpine)\"\n    \n    # OpenRC commands\n    sudo rc-service apache2 status\n    sudo rc-service apache2 restart\nfi\n```\n\n### Configuration Testing\n```bash\n# Test configuration syntax (distribution-aware)\nif [ -f /etc/apache2/apache2.conf ]; then\n    # Ubuntu/Debian\n    sudo apache2ctl configtest\n    sudo apache2ctl -S  # Show virtual hosts\n    sudo apache2ctl -M  # Show loaded modules\nelif [ -f /etc/httpd/conf/httpd.conf ]; then\n    # RHEL/CentOS\n    sudo httpd -t\n    sudo httpd -S\n    sudo httpd -M\nfi\n\n# Show version and build info\napache2ctl -v  # Ubuntu/Debian\nhttpd -v       # RHEL/CentOS\n\n# Show all configuration\napache2ctl -T  # Ubuntu/Debian\nhttpd -T       # RHEL/CentOS\n```\n\n### Log Analysis and Monitoring\n```bash\n# Monitor Apache logs (cross-platform)\n# Ubuntu/Debian paths\nsudo tail -f /var/log/apache2/access.log\nsudo tail -f /var/log/apache2/error.log\n\n# RHEL/CentOS paths  \nsudo tail -f /var/log/httpd/access_log\nsudo tail -f /var/log/httpd/error_log\n\n# Real-time connection monitoring\nwatch \"netstat -an | grep :80 | grep ESTABLISHED | wc -l\"\n\n# Monitor process performance\nhtop -p $(pgrep apache2 || pgrep httpd | head -5 | tr '\\n' ',' | sed 's/,$//')\n\n# Check virtual host access\nsudo grep \"GET\\|POST\" /var/log/apache2/access.log | tail -20  # Ubuntu/Debian\nsudo grep \"GET\\|POST\" /var/log/httpd/access_log | tail -20    # RHEL/CentOS\n```\n\n## Cross-Platform Troubleshooting\n\n### Common Issues and Solutions\n```bash\n# Check which user Apache runs as\nps aux | grep -E \"(apache2|httpd)\" | grep -v grep\n\n# Permission issues (distribution-aware)\n# Ubuntu/Debian\nsudo chown -R www-data:www-data /var/www/html\nsudo chmod -R 755 /var/www/html\n\n# RHEL/CentOS\nsudo chown -R apache:apache /var/www/html\nsudo chmod -R 755 /var/www/html\n\n# Check configuration file locations\nif [ -d /etc/apache2 ]; then\n    echo \"Configuration directory: /etc/apache2\"\n    echo \"Main config: /etc/apache2/apache2.conf\"\n    echo \"Sites: /etc/apache2/sites-available/\"\nelif [ -d /etc/httpd ]; then\n    echo \"Configuration directory: /etc/httpd\"\n    echo \"Main config: /etc/httpd/conf/httpd.conf\"\n    echo \"Virtual hosts: /etc/httpd/conf.d/\"\nfi\n\n# Port binding issues\nsudo lsof -i :80\nsudo netstat -tulpn | grep :80\n\n# SELinux troubleshooting (RHEL/CentOS)\nif command -v getenforce \u0026\u003e /dev/null; then\n    echo \"SELinux status: $(getenforce)\"\n    sudo ausearch -m AVC,USER_AVC -ts recent\n    sudo grep \"denied\" /var/log/audit/audit.log | tail -5\nfi\n\n# Check Apache error logs for issues\n# Ubuntu/Debian\nsudo tail -20 /var/log/apache2/error.log\n\n# RHEL/CentOS\nsudo tail -20 /var/log/httpd/error_log\n\n# Test specific virtual host\ncurl -H \"Host: example.com\" http://localhost/\n\n# Check loaded modules\napache2ctl -M | grep -E \"(rewrite|ssl|headers)\"  # Ubuntu/Debian\nhttpd -M | grep -E \"(rewrite|ssl|headers)\"        # RHEL/CentOS\n\n# Memory usage analysis\nps aux --sort=-%mem | grep -E \"(apache2|httpd)\" | head -10\n```\n\n### Debug Mode and Advanced Troubleshooting\n```bash\n# Enable debug logging\n# Ubuntu/Debian\nsudo nano /etc/apache2/apache2.conf\n# Add: LogLevel debug\n\n# RHEL/CentOS\nsudo nano /etc/httpd/conf/httpd.conf\n# Add: LogLevel debug\n\n# Test configuration with specific user\nsudo -u www-data apache2ctl configtest  # Ubuntu/Debian\nsudo -u apache httpd -t                  # RHEL/CentOS\n\n# Check virtual host configuration\napache2ctl -S  # Ubuntu/Debian\nhttpd -S       # RHEL/CentOS\n\n# Trace requests (careful in production)\n# Add to virtual host:\nLogLevel debug\nCustomLog /var/log/apache2/trace.log \"%h %l %u %t \\\"%r\\\" %\u003es %b \\\"%{Referer}i\\\" \\\"%{User-agent}i\\\" %D\"\n\n# Monitor real-time\nsudo tail -f /var/log/apache2/trace.log\n```\n\n## Additional Security Tools Integration\n\n### Fail2Ban Configuration\n```bash\n# Install Fail2Ban\nsudo apt install -y fail2ban  # Ubuntu/Debian\nsudo yum install -y fail2ban  # RHEL/CentOS\n\n# Create Apache-specific jails\nsudo tee /etc/fail2ban/jail.d/apache.conf \u003e /dev/null \u003c\u003cEOF\n[apache-auth]\nenabled = true\nport = http,https\nfilter = apache-auth\nlogpath = /var/log/apache2/error.log  # Ubuntu/Debian\n# logpath = /var/log/httpd/error_log  # RHEL/CentOS\nmaxretry = 6\nfindtime = 600\nbantime = 3600\n\n[apache-badbots]\nenabled = true\nport = http,https\nfilter = apache-badbots  \nlogpath = /var/log/apache2/access.log  # Ubuntu/Debian\n# logpath = /var/log/httpd/access_log  # RHEL/CentOS\nmaxretry = 2\nbantime = 86400\n\n[apache-noscript]\nenabled = true\nport = http,https\nfilter = apache-noscript\nlogpath = /var/log/apache2/access.log  # Ubuntu/Debian\n# logpath = /var/log/httpd/access_log  # RHEL/CentOS\nmaxretry = 6\nbantime = 86400\n\n[apache-overflows]\nenabled = true\nport = http,https\nfilter = apache-overflows\nlogpath = /var/log/apache2/error.log  # Ubuntu/Debian\n# logpath = /var/log/httpd/error_log  # RHEL/CentOS\nmaxretry = 2\nbantime = 86400\nEOF\n\nsudo systemctl enable --now fail2ban\n```\n\n### Log Analysis and Monitoring\n```bash\n# Install GoAccess for real-time log analysis\n# Ubuntu/Debian\nsudo apt install -y goaccess\n\n# RHEL/CentOS\nsudo yum install -y goaccess\n\n# Analyze logs in real-time\n# Ubuntu/Debian\nsudo goaccess /var/log/apache2/access.log -c\n\n# RHEL/CentOS\nsudo goaccess /var/log/httpd/access_log -c\n\n# Generate HTML report\nsudo goaccess /var/log/apache2/access.log -o /var/www/html/stats.html --log-format=COMBINED --real-time-html\n```\n\n## Backup and Maintenance\n\n### Automated Backup Script\n```bash\nsudo tee /usr/local/bin/apache-backup.sh \u003e /dev/null \u003c\u003c'EOF'\n#!/bin/bash\nBACKUP_DIR=\"/backup/apache\"\nDATE=$(date +%Y%m%d_%H%M%S)\n\nmkdir -p ${BACKUP_DIR}/{config,logs,sites}\n\n# Detect distribution and set paths\nif [ -d /etc/apache2 ]; then\n    # Ubuntu/Debian\n    CONFIG_DIR=\"/etc/apache2\"\n    LOG_DIR=\"/var/log/apache2\"\n    SERVICE_NAME=\"apache2\"\nelif [ -d /etc/httpd ]; then\n    # RHEL/CentOS\n    CONFIG_DIR=\"/etc/httpd\"\n    LOG_DIR=\"/var/log/httpd\"  \n    SERVICE_NAME=\"httpd\"\nfi\n\n# Backup configuration\ntar -czf ${BACKUP_DIR}/config/apache-config-${DATE}.tar.gz -C / ${CONFIG_DIR#/}\n\n# Backup website files\ntar -czf ${BACKUP_DIR}/sites/apache-sites-${DATE}.tar.gz -C /var/www .\n\n# Backup recent logs (last 7 days)\nfind ${LOG_DIR} -name \"*.log\" -mtime -7 -exec tar -czf ${BACKUP_DIR}/logs/apache-logs-${DATE}.tar.gz {} +\n\n# Keep only last 7 backups\nfind ${BACKUP_DIR} -name \"apache-*\" -type f -mtime +7 -delete\n\necho \"Apache backup completed: ${DATE}\"\nEOF\n\nsudo chmod +x /usr/local/bin/apache-backup.sh\n\n# Schedule daily backup\necho \"0 2 * * * root /usr/local/bin/apache-backup.sh\" | sudo tee -a /etc/crontab\n```\n\nThis updated Apache guide now includes:\n- ✅ **Complete cross-platform support** (Ubuntu, Debian, RHEL, CentOS, Rocky, Fedora, Arch, openSUSE, Alpine)\n- ✅ **2024 security best practices** (modern SSL/TLS, security headers, ModSecurity WAF)\n- ✅ **Performance optimization** (MPM tuning, system optimization, caching)  \n- ✅ **Advanced configurations** (virtual hosts, SSL certificates, compression)\n- ✅ **Comprehensive troubleshooting** (SELinux, cross-platform debugging)\n- ✅ **Security tools integration** (Fail2Ban, log analysis, monitoring)\n\nShould I continue updating the other guides with this same comprehensive approach?","readmeHtml":"\u003ch1 id=\"apache-http-server-installation-guide\" class=\"mobile-header\"\u003eApache HTTP Server Installation Guide\u003c/h1\u003e\n\u003cp class=\"mobile-paragraph\"\u003eWorld's most popular web server software serving over 40% of active websites. Reliable, secure, and highly configurable for hosting websites and web applications.\u003c/p\u003e\n\u003ch2 id=\"prerequisites\" class=\"mobile-header\"\u003ePrerequisites\u003c/h2\u003e\n\u003cli class=\"mobile-list-item\"\u003eLinux system (any modern distribution)\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eRoot or sudo access  \u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003e1GB RAM minimum, 2GB+ recommended for production\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eNetwork connectivity for package downloads\u003c/li\u003e\n\u003ch2 id=\"installation\" class=\"mobile-header\"\u003eInstallation\u003c/h2\u003e\n\u003ch3 id=\"ubuntudebian\" class=\"mobile-header\"\u003eUbuntu/Debian\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Update package list\nsudo apt update\n\n# Install Apache and essential modules\nsudo apt install -y apache2 apache2-utils\n\n# Enable essential modules\nsudo a2enmod rewrite ssl headers deflate expires security2\n\n# Start and enable Apache\nsudo systemctl enable --now apache2\n\n# Check status\nsudo systemctl status apache2\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"rhelcentosrocky-linuxalmalinux\" class=\"mobile-header\"\u003eRHEL/CentOS/Rocky Linux/AlmaLinux\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Install Apache (httpd)\nsudo yum install -y httpd httpd-tools mod_ssl\n\n# For newer versions with dnf\nsudo dnf install -y httpd httpd-tools mod_ssl\n\n# Start and enable Apache\nsudo systemctl enable --now httpd\n\n# Check status\nsudo systemctl status httpd\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"fedora\" class=\"mobile-header\"\u003eFedora\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Install Apache\nsudo dnf install -y httpd httpd-tools mod_ssl mod_security\n\n# Start and enable Apache\nsudo systemctl enable --now httpd\n\n# Configure firewall\nsudo firewall-cmd --permanent --add-service=http\nsudo firewall-cmd --permanent --add-service=https\nsudo firewall-cmd --reload\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"arch-linux\" class=\"mobile-header\"\u003eArch Linux\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Install Apache\nsudo pacman -Syu apache\n\n# Start and enable Apache\nsudo systemctl enable --now httpd\n\n# Edit configuration\nsudo nano /etc/httpd/conf/httpd.conf\n# Uncomment: ServerName www.example.com:80\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"opensusesuse\" class=\"mobile-header\"\u003eopenSUSE/SUSE\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Install Apache\nsudo zypper install -y apache2 apache2-mod_ssl apache2-utils\n\n# Start and enable Apache\nsudo systemctl enable --now apache2\n\n# Configure firewall\nsudo SuSEfirewall2 open EXT TCP 80 443\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"alpine-linux\" class=\"mobile-header\"\u003eAlpine Linux\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Install Apache\nsudo apk update\nsudo apk add apache2 apache2-ssl apache2-utils\n\n# Create necessary directories\nsudo mkdir -p /var/www/html\nsudo mkdir -p /run/apache2\n\n# Start and enable Apache\nsudo rc-update add apache2 default\nsudo service apache2 start\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"docker-installation\" class=\"mobile-header\"\u003eDocker Installation\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Official Apache Docker image\ndocker run -d \\\n  --name apache \\\n  --restart unless-stopped \\\n  -p 80:80 \\\n  -p 443:443 \\\n  -v ~/apache/htdocs:/usr/local/apache2/htdocs/ \\\n  -v ~/apache/conf:/usr/local/apache2/conf/ \\\n  -v ~/apache/logs:/usr/local/apache2/logs/ \\\n  httpd:latest\n\n# With Docker Compose\ncat \u0026gt; docker-compose.yml \u0026lt;\u0026lt;EOF\nversion: \u0026#039;3.8\u0026#039;\nservices:\n  apache:\n    image: httpd:latest\n    restart: unless-stopped\n    ports:\n      - \u0026quot;80:80\u0026quot;\n      - \u0026quot;443:443\u0026quot;\n    volumes:\n      - ./htdocs:/usr/local/apache2/htdocs/\n      - ./conf/httpd.conf:/usr/local/apache2/conf/httpd.conf\n      - ./logs:/usr/local/apache2/logs/\n    networks:\n      - webserver\n\nnetworks:\n  webserver:\n    driver: bridge\nEOF\n\ndocker-compose up -d\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"source-compilation-advanced\" class=\"mobile-header\"\u003eSource Compilation (Advanced)\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Install build dependencies\n# Ubuntu/Debian\nsudo apt install -y build-essential libapr1-dev libaprutil1-dev libpcre3-dev libssl-dev zlib1g-dev\n\n# RHEL/CentOS\nsudo yum groupinstall -y \u0026quot;Development Tools\u0026quot;\nsudo yum install -y apr-devel apr-util-devel pcre-devel openssl-devel zlib-devel\n\n# Download Apache source\ncd /tmp\nwget https://archive.apache.org/dist/httpd/httpd-2.4.57.tar.gz\ntar xzf httpd-2.4.57.tar.gz\ncd httpd-2.4.57\n\n# Configure with security and performance modules\n./configure \\\n  --prefix=/etc/apache2 \\\n  --exec-prefix=/usr \\\n  --bindir=/usr/bin \\\n  --sbindir=/usr/sbin \\\n  --sysconfdir=/etc/apache2 \\\n  --libexecdir=/usr/lib/apache2/modules \\\n  --localstatedir=/var \\\n  --datadir=/usr/share/apache2 \\\n  --includedir=/usr/include/apache2 \\\n  --infodir=/usr/share/info \\\n  --mandir=/usr/share/man \\\n  --with-program-name=apache2 \\\n  --enable-layout=Debian \\\n  --with-regex=pcre \\\n  --enable-mods-shared=reallyall \\\n  --enable-ssl \\\n  --enable-rewrite \\\n  --enable-headers \\\n  --enable-deflate \\\n  --enable-expires \\\n  --enable-security \\\n  --with-ssl=/usr \\\n  --with-ldap \\\n  --with-ldap-include=/usr/include \\\n  --with-ldap-lib=/usr/lib\n\n# Compile and install\nmake -j$(nproc)\nsudo make install\n\n# Create apache user\nsudo useradd -r -s /sbin/nologin apache\n\n# Create systemd service\nsudo tee /etc/systemd/system/apache2.service \u0026gt; /dev/null \u0026lt;\u0026lt;EOF\n[Unit]\nDescription=The Apache HTTP Server\nAfter=network.target remote-fs.target nss-lookup.target\n\n[Service]\nType=notify\nExecStart=/usr/sbin/apache2 -DFOREGROUND\nExecReload=/usr/sbin/apache2ctl graceful\nExecStop=/bin/kill -WINTERM \\${MAINPID}\nKillSignal=SIGCONT\nPrivateTmp=true\n\n[Install]\nWantedBy=multi-user.target\nEOF\n\nsudo systemctl daemon-reload\nsudo systemctl enable --now apache2\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"security-hardening-2024-best-practices\" class=\"mobile-header\"\u003eSecurity Hardening (2024 Best Practices)\u003c/h2\u003e\n\u003ch3 id=\"hide-server-information\" class=\"mobile-header\"\u003eHide Server Information\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Create security configuration\n# Ubuntu/Debian\nsudo tee /etc/apache2/conf-available/security-hardening.conf \u0026gt; /dev/null \u0026lt;\u0026lt;EOF\n# Hide Apache version and OS information\nServerTokens Prod\nServerSignature Off\n\n# Hide PHP version (if using PHP)\nHeader always unset X-Powered-By\nHeader unset X-Powered-By\n\n# Security headers (2024 recommendations)\nHeader always set Strict-Transport-Security \u0026quot;max-age=31536000; includeSubDomains; preload\u0026quot;\nHeader always set X-Frame-Options \u0026quot;SAMEORIGIN\u0026quot;\nHeader always set X-Content-Type-Options \u0026quot;nosniff\u0026quot;\nHeader always set X-XSS-Protection \u0026quot;1; mode=block\u0026quot;\nHeader always set Referrer-Policy \u0026quot;strict-origin-when-cross-origin\u0026quot;\nHeader always set Content-Security-Policy \u0026quot;default-src \u0026#039;self\u0026#039;; script-src \u0026#039;self\u0026#039; \u0026#039;unsafe-inline\u0026#039;; style-src \u0026#039;self\u0026#039; \u0026#039;unsafe-inline\u0026#039;; img-src \u0026#039;self\u0026#039; data: https:; font-src \u0026#039;self\u0026#039; data:; connect-src \u0026#039;self\u0026#039;; media-src \u0026#039;self\u0026#039;; object-src \u0026#039;none\u0026#039;; child-src \u0026#039;self\u0026#039;; form-action \u0026#039;self\u0026#039;; base-uri \u0026#039;self\u0026#039;;\u0026quot;\nHeader always set Permissions-Policy \u0026quot;camera=(), microphone=(), geolocation=()\u0026quot;\n\n# Remove sensitive headers\nHeader always unset Server\nHeader unset Server\n\n# Disable server status and info\n\u0026lt;Location \u0026quot;/server-status\u0026quot;\u0026gt;\n    SetHandler server-status\n    Require local\n\u0026lt;/Location\u0026gt;\n\n\u0026lt;Location \u0026quot;/server-info\u0026quot;\u0026gt;\n    SetHandler server-info\n    Require local\n\u0026lt;/Location\u0026gt;\n\n# Disable trace method\nTraceEnable off\n\n# Timeout configurations\nTimeout 60\nKeepAliveTimeout 15\n\n# Limit request size (adjust as needed)\nLimitRequestBody 10485760  # 10MB\n\n# Hide .htaccess files\n\u0026lt;FilesMatch \u0026quot;^\\.ht\u0026quot;\u0026gt;\n    Require all denied\n\u0026lt;/FilesMatch\u0026gt;\n\n# Hide backup and temporary files\n\u0026lt;FilesMatch \u0026quot;\\.(bak|backup|swp|tmp|~)$\u0026quot;\u0026gt;\n    Require all denied\n\u0026lt;/FilesMatch\u0026gt;\n\n# Disable directory browsing by default\nOptions -Indexes\n\n# Information disclosure protection\n\u0026lt;DirectoryMatch \u0026quot;/\\.\u0026quot;\u0026gt;\n    Require all denied\n\u0026lt;/DirectoryMatch\u0026gt;\n\n# Clickjacking protection\nHeader always append X-Frame-Options SAMEORIGIN\nEOF\n\n# Enable security configuration\nsudo a2enconf security-hardening\nsudo systemctl reload apache2\n\n# RHEL/CentOS (add to main configuration)\nsudo tee -a /etc/httpd/conf/httpd.conf \u0026gt; /dev/null \u0026lt;\u0026lt;EOF\n\n# Security hardening\nServerTokens Prod\nServerSignature Off\n\n# Load security headers module\nLoadModule headers_module modules/mod_headers.so\n\n# Security headers\nHeader always set Strict-Transport-Security \u0026quot;max-age=31536000; includeSubDomains; preload\u0026quot;\nHeader always set X-Frame-Options \u0026quot;SAMEORIGIN\u0026quot;\nHeader always set X-Content-Type-Options \u0026quot;nosniff\u0026quot;\nHeader always set X-XSS-Protection \u0026quot;1; mode=block\u0026quot;\nHeader always set Referrer-Policy \u0026quot;strict-origin-when-cross-origin\u0026quot;\n\n# Disable trace method\nTraceEnable off\n\n# Hide .htaccess files\n\u0026lt;FilesMatch \u0026quot;^\\.ht\u0026quot;\u0026gt;\n    Require all denied\n\u0026lt;/FilesMatch\u0026gt;\n\n# Disable directory browsing\nOptions -Indexes\nEOF\n\nsudo systemctl reload httpd\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"modsecurity-waf-installation\" class=\"mobile-header\"\u003eModSecurity WAF Installation\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Ubuntu/Debian\nsudo apt install -y libapache2-mod-security2\n\n# RHEL/CentOS\nsudo yum install -y mod_security mod_security_crs\n\n# Enable ModSecurity\nsudo a2enmod security2  # Ubuntu/Debian\n\n# Download OWASP Core Rule Set\nsudo mkdir -p /etc/apache2/modsecurity.d\ncd /etc/apache2/modsecurity.d\nsudo wget https://github.com/coreruleset/coreruleset/archive/refs/tags/v3.3.4.tar.gz\nsudo tar xzf v3.3.4.tar.gz\nsudo mv coreruleset-3.3.4 crs\n\n# Configure ModSecurity\nsudo tee /etc/apache2/mods-available/security2.conf \u0026gt; /dev/null \u0026lt;\u0026lt;EOF\n\u0026lt;IfModule mod_security2.c\u0026gt;\n    SecRuleEngine On\n    SecRequestBodyAccess On\n    SecRequestBodyLimit 13107200\n    SecRequestBodyNoFilesLimit 131072\n    SecRequestBodyInMemoryLimit 131072\n    SecRequestBodyLimitAction Reject\n    SecRule REQUEST_HEADERS:Content-Type \u0026quot;text/xml\u0026quot; \\\n         \u0026quot;id:\u0026#039;200000\u0026#039;,phase:1,t:none,t:lowercase,pass,nolog,ctl:requestBodyProcessor=XML\u0026quot;\n    SecRule REQUEST_HEADERS:Content-Type \u0026quot;application/json\u0026quot; \\\n         \u0026quot;id:\u0026#039;200001\u0026#039;,phase:1,t:none,t:lowercase,pass,nolog,ctl:requestBodyProcessor=JSON\u0026quot;\n    SecRule REQBODY_ERROR \u0026quot;!@eq 0\u0026quot; \\\n    \u0026quot;id:\u0026#039;200002\u0026#039;, phase:2,t:none,log,deny,status:400,msg:\u0026#039;Failed to parse request body.\u0026#039;,logdata:\u0026#039;Error %{REQBODY_ERROR_MSG}\u0026#039;,severity:2\u0026quot;\n    SecRule MULTIPART_STRICT_ERROR \u0026quot;!@eq 0\u0026quot; \\\n    \u0026quot;id:\u0026#039;200003\u0026#039;,phase:2,t:none,log,deny,status:400, \\\n    msg:\u0026#039;Multipart request body failed strict validation: \\\n    PE %{REQBODY_PROCESSOR_ERROR}, \\\n    BQ %{MULTIPART_BOUNDARY_QUOTED}, \\\n    BW %{MULTIPART_BOUNDARY_WHITESPACE}, \\\n    DB %{MULTIPART_DATA_BEFORE}, \\\n    DA %{MULTIPART_DATA_AFTER}, \\\n    HF %{MULTIPART_HEADER_FOLDING}, \\\n    LF %{MULTIPART_LF_LINE}, \\\n    SM %{MULTIPART_MISSING_SEMICOLON}, \\\n    IQ %{MULTIPART_INVALID_QUOTING}, \\\n    IP %{MULTIPART_INVALID_PART}, \\\n    IH %{MULTIPART_INVALID_HEADER_FOLDING}, \\\n    FL %{MULTIPART_FILE_LIMIT_EXCEEDED}\u0026#039;\u0026quot;\n\n    SecRule MULTIPART_UNMATCHED_BOUNDARY \u0026quot;!@eq 0\u0026quot; \\\n    \u0026quot;id:\u0026#039;200004\u0026#039;,phase:2,t:none,log,deny,msg:\u0026#039;Multipart parser detected a possible unmatched boundary.\u0026#039;\u0026quot;\n\n    SecPcreMatchLimit 1000\n    SecPcreMatchLimitRecursion 1000\n\n    SecRule TX:/^MSC_/ \u0026quot;!@streq 0\u0026quot; \\\n            \u0026quot;id:\u0026#039;200005\u0026#039;,phase:2,t:none,deny,msg:\u0026#039;ModSecurity internal error flagged: %{MATCHED_VAR_NAME}\u0026#039;\u0026quot;\n\n    SecResponseBodyAccess Off\n    SecDebugLog /var/log/apache2/modsec_debug.log\n    SecDebugLogLevel 0\n    SecAuditEngine RelevantOnly\n    SecAuditLogRelevantStatus \u0026quot;^(?:5|4(?!04))\u0026quot;\n    SecAuditLogParts ABDEFHIJZ\n    SecAuditLogType Serial\n    SecAuditLog /var/log/apache2/modsec_audit.log\n    \n    # Include OWASP Core Rule Set\n    Include /etc/apache2/modsecurity.d/crs/crs-setup.conf.example\n    Include /etc/apache2/modsecurity.d/crs/rules/*.conf\n\u0026lt;/IfModule\u0026gt;\nEOF\n\n# Create data directory\nsudo mkdir -p /var/cache/modsecurity\nsudo chown www-data:www-data /var/cache/modsecurity\n\nsudo systemctl reload apache2\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"ssltls-configuration-modern-2024-standards\" class=\"mobile-header\"\u003eSSL/TLS Configuration (Modern 2024 Standards)\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Create modern SSL configuration\nsudo tee /etc/apache2/conf-available/ssl-modern.conf \u0026gt; /dev/null \u0026lt;\u0026lt;EOF\n# Modern SSL configuration (2024)\nSSLEngine on\n\n# Protocols - Only TLS 1.2 and 1.3\nSSLProtocol all -SSLv3 -TLSv1 -TLSv1.1\n\n# Cipher suites for modern browsers (2024)\nSSLCipherSuite ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-CHACHA20-POLY1305:ECDHE-RSA-CHACHA20-POLY1305:DHE-RSA-AES128-GCM-SHA256:DHE-RSA-AES256-GCM-SHA384\n\n# Prefer server ciphers for TLS 1.2, client ciphers for TLS 1.3\nSSLHonorCipherOrder off\n\n# HSTS (HTTP Strict Transport Security)\nHeader always set Strict-Transport-Security \u0026quot;max-age=31536000; includeSubDomains; preload\u0026quot;\n\n# Session cache\nSSLSessionCache shmcb:/var/run/ssl_scache(512000)\nSSLSessionCacheTimeout 300\n\n# OCSP Stapling\nSSLUseStapling On\nSSLStaplingCache shmcb:/var/run/ocsp(128000)\nSSLStaplingResponderTimeout 5\nSSLStaplingReturnResponderErrors off\n\n# Modern security options\nSSLCompression off\nSSLSessionTickets off\n\n# Perfect Forward Secrecy\nSSLOpenSSLConfCmd DHParameters /etc/ssl/certs/dhparam.pem\nEOF\n\n# Generate strong DH parameters\nsudo openssl dhparam -out /etc/ssl/certs/dhparam.pem 2048\n\n# Enable SSL configuration\nsudo a2enconf ssl-modern\nsudo a2enmod ssl headers\nsudo systemctl reload apache2\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"secure-virtual-host-configuration\" class=\"mobile-header\"\u003eSecure Virtual Host Configuration\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Create production-ready virtual host\nsudo tee /etc/apache2/sites-available/secure-site.conf \u0026gt; /dev/null \u0026lt;\u0026lt;EOF\n# HTTP to HTTPS redirect\n\u0026lt;VirtualHost *:80\u0026gt;\n    ServerName example.com\n    ServerAlias www.example.com\n    \n    # Security headers for redirects\n    Header always set X-Content-Type-Options nosniff\n    Header always set X-Frame-Options DENY\n    \n    # Redirect to HTTPS\n    Redirect permanent / https://example.com/\n\u0026lt;/VirtualHost\u0026gt;\n\n# HTTPS Virtual Host\n\u0026lt;VirtualHost *:443\u0026gt;\n    ServerName example.com\n    ServerAlias www.example.com\n    DocumentRoot /var/www/html/example.com\n    \n    # SSL Configuration\n    SSLEngine on\n    SSLCertificateFile /etc/letsencrypt/live/example.com/fullchain.pem\n    SSLCertificateKeyFile /etc/letsencrypt/live/example.com/privkey.pem\n    \n    # Security headers (2024 standards)\n    Header always set Strict-Transport-Security \u0026quot;max-age=31536000; includeSubDomains; preload\u0026quot;\n    Header always set X-Frame-Options \u0026quot;SAMEORIGIN\u0026quot;\n    Header always set X-Content-Type-Options \u0026quot;nosniff\u0026quot;\n    Header always set X-XSS-Protection \u0026quot;1; mode=block\u0026quot;\n    Header always set Referrer-Policy \u0026quot;strict-origin-when-cross-origin\u0026quot;\n    Header always set Content-Security-Policy \u0026quot;default-src \u0026#039;self\u0026#039;; script-src \u0026#039;self\u0026#039; \u0026#039;unsafe-inline\u0026#039;; style-src \u0026#039;self\u0026#039; \u0026#039;unsafe-inline\u0026#039;; img-src \u0026#039;self\u0026#039; data: https:; font-src \u0026#039;self\u0026#039; data:; connect-src \u0026#039;self\u0026#039;; media-src \u0026#039;self\u0026#039;; object-src \u0026#039;none\u0026#039;; child-src \u0026#039;self\u0026#039;; form-action \u0026#039;self\u0026#039;; base-uri \u0026#039;self\u0026#039;;\u0026quot;\n    Header always set Permissions-Policy \u0026quot;camera=(), microphone=(), geolocation=()\u0026quot;\n    \n    # Remove server information\n    Header always unset Server\n    Header unset X-Powered-By\n    \n    \u0026lt;Directory /var/www/html/example.com\u0026gt;\n        Options -Indexes +FollowSymLinks\n        AllowOverride All\n        Require all granted\n        \n        # Additional security\n        \u0026lt;Files \u0026quot;.*\u0026quot;\u0026gt;\n            Require all denied\n        \u0026lt;/Files\u0026gt;\n        \n        \u0026lt;Files \u0026quot;*.php~\u0026quot;\u0026gt;\n            Require all denied\n        \u0026lt;/Files\u0026gt;\n        \n        \u0026lt;Files \u0026quot;*.inc\u0026quot;\u0026gt;\n            Require all denied\n        \u0026lt;/Files\u0026gt;\n    \u0026lt;/Directory\u0026gt;\n    \n    # PHP configuration (if using PHP)\n    \u0026lt;IfModule mod_php.c\u0026gt;\n        php_admin_flag allow_url_include Off\n        php_admin_flag allow_url_fopen Off\n        php_admin_flag file_uploads On\n        php_admin_value upload_max_filesize 64M\n        php_admin_value post_max_size 64M\n        php_admin_value memory_limit 256M\n        php_admin_value max_execution_time 300\n        php_admin_flag expose_php Off\n    \u0026lt;/IfModule\u0026gt;\n    \n    # Compression\n    \u0026lt;IfModule mod_deflate.c\u0026gt;\n        SetOutputFilter DEFLATE\n        AddOutputFilterByType DEFLATE text/html text/css text/javascript text/xml text/plain application/javascript application/xml+rss application/xml application/x-javascript application/json\n        \n        # Don\u0026#039;t compress images\n        SetEnvIfNoCase Request_URI \\.(?:gif|jpe?g|png)$ no-gzip dont-vary\n        SetEnvIfNoCase Request_URI \\.(?:exe|t?gz|zip|bz2|sit|rar)$ no-gzip dont-vary\n    \u0026lt;/IfModule\u0026gt;\n    \n    # Caching rules\n    \u0026lt;IfModule mod_expires.c\u0026gt;\n        ExpiresActive On\n        ExpiresByType image/jpg \u0026quot;access plus 1 month\u0026quot;\n        ExpiresByType image/jpeg \u0026quot;access plus 1 month\u0026quot;\n        ExpiresByType image/gif \u0026quot;access plus 1 month\u0026quot;\n        ExpiresByType image/png \u0026quot;access plus 1 month\u0026quot;\n        ExpiresByType image/webp \u0026quot;access plus 1 month\u0026quot;\n        ExpiresByType text/css \u0026quot;access plus 1 month\u0026quot;\n        ExpiresByType application/pdf \u0026quot;access plus 1 month\u0026quot;\n        ExpiresByType text/javascript \u0026quot;access plus 1 month\u0026quot;\n        ExpiresByType application/javascript \u0026quot;access plus 1 month\u0026quot;\n        ExpiresByType application/x-javascript \u0026quot;access plus 1 month\u0026quot;\n        ExpiresByType application/x-shockwave-flash \u0026quot;access plus 1 month\u0026quot;\n        ExpiresByType image/x-icon \u0026quot;access plus 1 year\u0026quot;\n        ExpiresDefault \u0026quot;access plus 2 days\u0026quot;\n    \u0026lt;/IfModule\u0026gt;\n    \n    # Rate limiting (if mod_evasive is available)\n    \u0026lt;IfModule mod_evasive24.c\u0026gt;\n        DOSHashTableSize    1024\n        DOSPageCount        2\n        DOSSiteCount        50\n        DOSPageInterval     1\n        DOSSiteInterval     1\n        DOSBlockingPeriod   600\n        DOSLogDir           /var/log/apache2/\n        DOSEmailNotify      admin@example.com\n    \u0026lt;/IfModule\u0026gt;\n    \n    # ModSecurity\n    \u0026lt;IfModule mod_security2.c\u0026gt;\n        SecRuleEngine On\n        SecDefaultAction \u0026quot;log,auditlog,pass\u0026quot;\n    \u0026lt;/IfModule\u0026gt;\n    \n    ErrorLog \\${APACHE_LOG_DIR}/example.com_error.log\n    CustomLog \\${APACHE_LOG_DIR}/example.com_access.log combined\n    \n    # Log security events\n    CustomLog \\${APACHE_LOG_DIR}/example.com_security.log \u0026quot;%h %l %u %t \\\u0026quot;%r\\\u0026quot; %\u0026gt;s %b \\\u0026quot;%{Referer}i\\\u0026quot; \\\u0026quot;%{User-agent}i\\\u0026quot;\u0026quot; env=security\n\u0026lt;/VirtualHost\u0026gt;\n\n# WWW redirect\n\u0026lt;VirtualHost *:443\u0026gt;\n    ServerName www.example.com\n    \n    SSLEngine on\n    SSLCertificateFile /etc/letsencrypt/live/example.com/fullchain.pem\n    SSLCertificateKeyFile /etc/letsencrypt/live/example.com/privkey.pem\n    \n    Redirect permanent / https://example.com/\n\u0026lt;/VirtualHost\u0026gt;\nEOF\n\nsudo a2ensite secure-site.conf\nsudo a2enconf security-hardening\nsudo systemctl reload apache2\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"advanced-security-modules\" class=\"mobile-header\"\u003eAdvanced Security Modules\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Install additional security modules\n# Ubuntu/Debian\nsudo apt install -y libapache2-mod-evasive libapache2-mod-security2\n\n# RHEL/CentOS\nsudo yum install -y mod_evasive mod_security\n\n# Enable modules\nsudo a2enmod evasive  # Ubuntu/Debian\nsudo a2enmod security2\n\n# Configure mod_evasive (DDoS protection)\nsudo tee /etc/apache2/mods-available/evasive.conf \u0026gt; /dev/null \u0026lt;\u0026lt;EOF\n\u0026lt;IfModule mod_evasive24.c\u0026gt;\n    DOSHashTableSize    1024\n    DOSPageCount        3\n    DOSSiteCount        50\n    DOSPageInterval     1\n    DOSSiteInterval     1\n    DOSBlockingPeriod   600\n    DOSLogDir           /var/log/apache2/\n    DOSEmailNotify      admin@example.com\n    DOSWhitelist        127.0.0.1\n    DOSWhitelist        192.168.1.*\n\u0026lt;/IfModule\u0026gt;\nEOF\n\nsudo systemctl reload apache2\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"ssl-certificate-setup-cross-platform\" class=\"mobile-header\"\u003eSSL Certificate Setup (Cross-Platform)\u003c/h2\u003e\n\u003ch3 id=\"lets-encrypt-integration\" class=\"mobile-header\"\u003eLet's Encrypt Integration\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Install Certbot - Universal method\nsudo snap install core; sudo snap refresh core\nsudo snap install --classic certbot\nsudo ln -s /snap/bin/certbot /usr/bin/certbot\n\n# Alternative: Package manager installation\n# Ubuntu/Debian\nsudo apt install -y certbot python3-certbot-apache\n\n# RHEL/CentOS (enable EPEL first)\nsudo yum install -y epel-release\nsudo yum install -y certbot python3-certbot-apache\n\n# Fedora\nsudo dnf install -y certbot python3-certbot-apache\n\n# Arch Linux\nsudo pacman -S certbot certbot-apache\n\n# Obtain certificate\nsudo certbot --apache -d example.com -d www.example.com\n\n# Auto-renewal setup (universal)\nsudo crontab -e\n# Add: 0 12 * * * /usr/bin/certbot renew --quiet \u0026amp;\u0026amp; systemctl reload apache2\n\n# Test renewal\nsudo certbot renew --dry-run\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"manual-ssl-configuration\" class=\"mobile-header\"\u003eManual SSL Configuration\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Generate self-signed certificate for testing\nsudo mkdir -p /etc/ssl/private\nsudo openssl req -x509 -nodes -days 365 -newkey rsa:4096 \\\n  -keyout /etc/ssl/private/apache-selfsigned.key \\\n  -out /etc/ssl/certs/apache-selfsigned.crt \\\n  -subj \u0026quot;/C=US/ST=State/L=City/O=Organization/CN=example.com\u0026quot;\n\n# Create SSL configuration snippet\nsudo tee /etc/apache2/conf-available/ssl-params.conf \u0026gt; /dev/null \u0026lt;\u0026lt;EOF\n# Modern SSL configuration\nSSLEngine on\nSSLProtocol all -SSLv3 -TLSv1 -TLSv1.1\nSSLCipherSuite ECDHE-RSA-AES256-GCM-SHA512:DHE-RSA-AES256-GCM-SHA512:ECDHE-RSA-AES256-GCM-SHA384:DHE-RSA-AES256-GCM-SHA384\nSSLHonorCipherOrder off\nSSLSessionTickets off\nSSLUseStapling on\nSSLStaplingCache shmcb:/var/run/ssl_stapling(32768)\nSSLOpenSSLConfCmd DHParameters /etc/ssl/certs/dhparam.pem\n\n# Security headers\nHeader always set Strict-Transport-Security \u0026quot;max-age=63072000; includeSubDomains; preload\u0026quot;\nHeader always set X-Content-Type-Options nosniff\nHeader always set X-Frame-Options SAMEORIGIN\nHeader always set X-XSS-Protection \u0026quot;1; mode=block\u0026quot;\nEOF\n\nsudo a2enconf ssl-params\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"firewall-configuration-all-platforms\" class=\"mobile-header\"\u003eFirewall Configuration (All Platforms)\u003c/h2\u003e\n\u003ch3 id=\"ufw-ubuntudebian\" class=\"mobile-header\"\u003eUFW (Ubuntu/Debian)\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003esudo ufw app list | grep Apache\nsudo ufw allow \u0026#039;Apache Full\u0026#039;    # HTTP and HTTPS\nsudo ufw allow \u0026#039;Apache\u0026#039;         # HTTP only  \nsudo ufw allow \u0026#039;Apache Secure\u0026#039;  # HTTPS only\nsudo ufw enable\nsudo ufw status\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"firewalld-rhelcentosfedora\" class=\"mobile-header\"\u003eFirewalld (RHEL/CentOS/Fedora)\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003esudo firewall-cmd --permanent --add-service=http\nsudo firewall-cmd --permanent --add-service=https\nsudo firewall-cmd --reload\nsudo firewall-cmd --list-services\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"iptables-universal\" class=\"mobile-header\"\u003eiptables (Universal)\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Allow HTTP and HTTPS\nsudo iptables -A INPUT -p tcp --dport 80 -j ACCEPT\nsudo iptables -A INPUT -p tcp --dport 443 -j ACCEPT\n\n# Save rules (varies by distribution)\n# Ubuntu/Debian\nsudo apt install -y iptables-persistent\nsudo netfilter-persistent save\n\n# RHEL/CentOS\nsudo service iptables save\n\n# Arch Linux\nsudo iptables-save \u0026gt; /etc/iptables/iptables.rules\n\n# Alpine Linux\nsudo /etc/init.d/iptables save\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"selinux-configuration-rhelcentosfedora\" class=\"mobile-header\"\u003eSELinux Configuration (RHEL/CentOS/Fedora)\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Check SELinux status\ngetenforce\n\n# Set SELinux booleans for Apache\nsudo setsebool -P httpd_can_network_connect 1\nsudo setsebool -P httpd_can_network_relay 1\nsudo setsebool -P httpd_use_nfs 1\nsudo setsebool -P httpd_graceful_shutdown 1\n\n# For custom content directories\nsudo semanage fcontext -a -t httpd_exec_t \u0026quot;/var/www/html(/.*)?\u0026quot;\nsudo restorecon -Rv /var/www/html/\n\n# For custom ports\nsudo semanage port -a -t http_port_t -p tcp 8080\n\n# Check denials\nsudo ausearch -m AVC,USER_AVC,SELINUX_ERR -ts recent\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"performance-optimization\" class=\"mobile-header\"\u003ePerformance Optimization\u003c/h2\u003e\n\u003ch3 id=\"multi-processing-module-mpm-tuning\" class=\"mobile-header\"\u003eMulti-Processing Module (MPM) Tuning\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Check current MPM\napache2ctl -M | grep mpm  # Ubuntu/Debian\nhttpd -M | grep mpm       # RHEL/CentOS\n\n# Configure Event MPM (most efficient)\nsudo tee /etc/apache2/mods-available/mpm_event.conf \u0026gt; /dev/null \u0026lt;\u0026lt;EOF\n\u0026lt;IfModule mpm_event_module\u0026gt;\n    StartServers             3\n    MinSpareThreads         75\n    MaxSpareThreads        250\n    ThreadsPerChild         25\n    MaxRequestWorkers      400\n    MaxConnectionsPerChild   0\n    AsyncRequestWorkerFactor 2\n\u0026lt;/IfModule\u0026gt;\nEOF\n\n# Enable Event MPM\nsudo a2dismod mpm_prefork\nsudo a2enmod mpm_event\nsudo systemctl restart apache2\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"system-level-performance-tuning\" class=\"mobile-header\"\u003eSystem-level Performance Tuning\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Increase system limits\nsudo tee -a /etc/security/limits.conf \u0026gt; /dev/null \u0026lt;\u0026lt;EOF\napache soft nofile 65535\napache hard nofile 65535\nwww-data soft nofile 65535\nwww-data hard nofile 65535\nEOF\n\n# Kernel optimization for web servers\nsudo tee -a /etc/sysctl.conf \u0026gt; /dev/null \u0026lt;\u0026lt;EOF\n# Apache/web server optimization\nnet.core.somaxconn = 65535\nnet.core.netdev_max_backlog = 5000\nnet.ipv4.tcp_max_syn_backlog = 65535\nnet.ipv4.tcp_fin_timeout = 10\nnet.ipv4.tcp_tw_reuse = 1\nnet.ipv4.ip_local_port_range = 15000 65000\nfs.file-max = 100000\n\n# Memory management\nvm.swappiness = 10\nvm.dirty_ratio = 15\nvm.dirty_background_ratio = 5\nEOF\n\nsudo sysctl -p\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"caching-configuration\" class=\"mobile-header\"\u003eCaching Configuration\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Enable caching modules\nsudo a2enmod cache cache_disk expires headers\n\n# Create cache configuration\nsudo tee /etc/apache2/conf-available/caching.conf \u0026gt; /dev/null \u0026lt;\u0026lt;EOF\n# Disk cache configuration\n\u0026lt;IfModule mod_cache_disk.c\u0026gt;\n    CacheRoot /var/cache/apache2/mod_cache_disk\n    CacheDirLevels 2\n    CacheDirLength 1\n    CacheEnable disk /\n    CacheIgnoreHeaders Set-Cookie\n    CacheDefaultExpire 3600\n    CacheMaxExpire 86400\n    CacheLastModifiedFactor 0.1\n\u0026lt;/IfModule\u0026gt;\n\n# Browser caching\n\u0026lt;IfModule mod_expires.c\u0026gt;\n    ExpiresActive On\n    \n    # Cache static assets\n    ExpiresByType image/jpg \u0026quot;access plus 1 year\u0026quot;\n    ExpiresByType image/jpeg \u0026quot;access plus 1 year\u0026quot;\n    ExpiresByType image/gif \u0026quot;access plus 1 year\u0026quot;\n    ExpiresByType image/png \u0026quot;access plus 1 year\u0026quot;\n    ExpiresByType image/webp \u0026quot;access plus 1 year\u0026quot;\n    ExpiresByType text/css \u0026quot;access plus 1 month\u0026quot;\n    ExpiresByType application/pdf \u0026quot;access plus 1 month\u0026quot;\n    ExpiresByType text/javascript \u0026quot;access plus 1 month\u0026quot;\n    ExpiresByType application/javascript \u0026quot;access plus 1 month\u0026quot;\n    ExpiresByType application/x-javascript \u0026quot;access plus 1 month\u0026quot;\n    ExpiresByType application/x-shockwave-flash \u0026quot;access plus 1 month\u0026quot;\n    ExpiresByType image/x-icon \u0026quot;access plus 1 year\u0026quot;\n    ExpiresByType text/html \u0026quot;access plus 300 seconds\u0026quot;\n    \n    # Default expiration\n    ExpiresDefault \u0026quot;access plus 1 day\u0026quot;\n\u0026lt;/IfModule\u0026gt;\n\n# Compression\n\u0026lt;IfModule mod_deflate.c\u0026gt;\n    # Enable compression for text files\n    \u0026lt;Location /\u0026gt;\n        SetOutputFilter DEFLATE\n        \n        # Don\u0026#039;t compress images or binaries\n        SetEnvIfNoCase Request_URI \\\n            \\.(?:gif|jpe?g|png|webp)$ no-gzip dont-vary\n        SetEnvIfNoCase Request_URI \\\n            \\.(?:exe|t?gz|zip|bz2|sit|rar|pdf)$ no-gzip dont-vary\n            \n        # Include file types to compress\n        AddOutputFilterByType DEFLATE text/html text/plain text/xml text/css text/javascript\n        AddOutputFilterByType DEFLATE application/javascript application/json application/xml application/xhtml+xml application/rss+xml\n    \u0026lt;/Location\u0026gt;\n\u0026lt;/IfModule\u0026gt;\nEOF\n\n# Create cache directory\nsudo mkdir -p /var/cache/apache2/mod_cache_disk\nsudo chown -R www-data:www-data /var/cache/apache2  # Ubuntu/Debian\nsudo chown -R apache:apache /var/cache/apache2      # RHEL/CentOS\n\nsudo a2enconf caching\nsudo systemctl reload apache2\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"cross-platform-verification\" class=\"mobile-header\"\u003eCross-Platform Verification\u003c/h2\u003e\n\u003ch3 id=\"service-management-all-distributions\" class=\"mobile-header\"\u003eService Management (All Distributions)\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Check which init system is in use\nif command -v systemctl \u0026amp;\u0026gt; /dev/null; then\n    echo \u0026quot;Using systemd\u0026quot;\n    \n    # SystemD commands\n    sudo systemctl status apache2    # Ubuntu/Debian\n    sudo systemctl status httpd      # RHEL/CentOS\n    sudo systemctl restart apache2\n    sudo systemctl reload apache2\n    \nelif command -v service \u0026amp;\u0026gt; /dev/null; then\n    echo \u0026quot;Using SysV init\u0026quot;\n    \n    # Traditional service commands\n    sudo service apache2 status\n    sudo service apache2 restart\n    sudo service apache2 reload\n    \nelif command -v rc-service \u0026amp;\u0026gt; /dev/null; then\n    echo \u0026quot;Using OpenRC (Alpine)\u0026quot;\n    \n    # OpenRC commands\n    sudo rc-service apache2 status\n    sudo rc-service apache2 restart\nfi\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"configuration-testing\" class=\"mobile-header\"\u003eConfiguration Testing\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Test configuration syntax (distribution-aware)\nif [ -f /etc/apache2/apache2.conf ]; then\n    # Ubuntu/Debian\n    sudo apache2ctl configtest\n    sudo apache2ctl -S  # Show virtual hosts\n    sudo apache2ctl -M  # Show loaded modules\nelif [ -f /etc/httpd/conf/httpd.conf ]; then\n    # RHEL/CentOS\n    sudo httpd -t\n    sudo httpd -S\n    sudo httpd -M\nfi\n\n# Show version and build info\napache2ctl -v  # Ubuntu/Debian\nhttpd -v       # RHEL/CentOS\n\n# Show all configuration\napache2ctl -T  # Ubuntu/Debian\nhttpd -T       # RHEL/CentOS\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"log-analysis-and-monitoring\" class=\"mobile-header\"\u003eLog Analysis and Monitoring\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Monitor Apache logs (cross-platform)\n# Ubuntu/Debian paths\nsudo tail -f /var/log/apache2/access.log\nsudo tail -f /var/log/apache2/error.log\n\n# RHEL/CentOS paths  \nsudo tail -f /var/log/httpd/access_log\nsudo tail -f /var/log/httpd/error_log\n\n# Real-time connection monitoring\nwatch \u0026quot;netstat -an | grep :80 | grep ESTABLISHED | wc -l\u0026quot;\n\n# Monitor process performance\nhtop -p $(pgrep apache2 || pgrep httpd | head -5 | tr \u0026#039;\\n\u0026#039; \u0026#039;,\u0026#039; | sed \u0026#039;s/,$//\u0026#039;)\n\n# Check virtual host access\nsudo grep \u0026quot;GET\\|POST\u0026quot; /var/log/apache2/access.log | tail -20  # Ubuntu/Debian\nsudo grep \u0026quot;GET\\|POST\u0026quot; /var/log/httpd/access_log | tail -20    # RHEL/CentOS\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"cross-platform-troubleshooting\" class=\"mobile-header\"\u003eCross-Platform Troubleshooting\u003c/h2\u003e\n\u003ch3 id=\"common-issues-and-solutions\" class=\"mobile-header\"\u003eCommon Issues and Solutions\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Check which user Apache runs as\nps aux | grep -E \u0026quot;(apache2|httpd)\u0026quot; | grep -v grep\n\n# Permission issues (distribution-aware)\n# Ubuntu/Debian\nsudo chown -R www-data:www-data /var/www/html\nsudo chmod -R 755 /var/www/html\n\n# RHEL/CentOS\nsudo chown -R apache:apache /var/www/html\nsudo chmod -R 755 /var/www/html\n\n# Check configuration file locations\nif [ -d /etc/apache2 ]; then\n    echo \u0026quot;Configuration directory: /etc/apache2\u0026quot;\n    echo \u0026quot;Main config: /etc/apache2/apache2.conf\u0026quot;\n    echo \u0026quot;Sites: /etc/apache2/sites-available/\u0026quot;\nelif [ -d /etc/httpd ]; then\n    echo \u0026quot;Configuration directory: /etc/httpd\u0026quot;\n    echo \u0026quot;Main config: /etc/httpd/conf/httpd.conf\u0026quot;\n    echo \u0026quot;Virtual hosts: /etc/httpd/conf.d/\u0026quot;\nfi\n\n# Port binding issues\nsudo lsof -i :80\nsudo netstat -tulpn | grep :80\n\n# SELinux troubleshooting (RHEL/CentOS)\nif command -v getenforce \u0026amp;\u0026gt; /dev/null; then\n    echo \u0026quot;SELinux status: $(getenforce)\u0026quot;\n    sudo ausearch -m AVC,USER_AVC -ts recent\n    sudo grep \u0026quot;denied\u0026quot; /var/log/audit/audit.log | tail -5\nfi\n\n# Check Apache error logs for issues\n# Ubuntu/Debian\nsudo tail -20 /var/log/apache2/error.log\n\n# RHEL/CentOS\nsudo tail -20 /var/log/httpd/error_log\n\n# Test specific virtual host\ncurl -H \u0026quot;Host: example.com\u0026quot; http://localhost/\n\n# Check loaded modules\napache2ctl -M | grep -E \u0026quot;(rewrite|ssl|headers)\u0026quot;  # Ubuntu/Debian\nhttpd -M | grep -E \u0026quot;(rewrite|ssl|headers)\u0026quot;        # RHEL/CentOS\n\n# Memory usage analysis\nps aux --sort=-%mem | grep -E \u0026quot;(apache2|httpd)\u0026quot; | head -10\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"debug-mode-and-advanced-troubleshooting\" class=\"mobile-header\"\u003eDebug Mode and Advanced Troubleshooting\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Enable debug logging\n# Ubuntu/Debian\nsudo nano /etc/apache2/apache2.conf\n# Add: LogLevel debug\n\n# RHEL/CentOS\nsudo nano /etc/httpd/conf/httpd.conf\n# Add: LogLevel debug\n\n# Test configuration with specific user\nsudo -u www-data apache2ctl configtest  # Ubuntu/Debian\nsudo -u apache httpd -t                  # RHEL/CentOS\n\n# Check virtual host configuration\napache2ctl -S  # Ubuntu/Debian\nhttpd -S       # RHEL/CentOS\n\n# Trace requests (careful in production)\n# Add to virtual host:\nLogLevel debug\nCustomLog /var/log/apache2/trace.log \u0026quot;%h %l %u %t \\\u0026quot;%r\\\u0026quot; %\u0026gt;s %b \\\u0026quot;%{Referer}i\\\u0026quot; \\\u0026quot;%{User-agent}i\\\u0026quot; %D\u0026quot;\n\n# Monitor real-time\nsudo tail -f /var/log/apache2/trace.log\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"additional-security-tools-integration\" class=\"mobile-header\"\u003eAdditional Security Tools Integration\u003c/h2\u003e\n\u003ch3 id=\"fail2ban-configuration\" class=\"mobile-header\"\u003eFail2Ban Configuration\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Install Fail2Ban\nsudo apt install -y fail2ban  # Ubuntu/Debian\nsudo yum install -y fail2ban  # RHEL/CentOS\n\n# Create Apache-specific jails\nsudo tee /etc/fail2ban/jail.d/apache.conf \u0026gt; /dev/null \u0026lt;\u0026lt;EOF\n[apache-auth]\nenabled = true\nport = http,https\nfilter = apache-auth\nlogpath = /var/log/apache2/error.log  # Ubuntu/Debian\n# logpath = /var/log/httpd/error_log  # RHEL/CentOS\nmaxretry = 6\nfindtime = 600\nbantime = 3600\n\n[apache-badbots]\nenabled = true\nport = http,https\nfilter = apache-badbots  \nlogpath = /var/log/apache2/access.log  # Ubuntu/Debian\n# logpath = /var/log/httpd/access_log  # RHEL/CentOS\nmaxretry = 2\nbantime = 86400\n\n[apache-noscript]\nenabled = true\nport = http,https\nfilter = apache-noscript\nlogpath = /var/log/apache2/access.log  # Ubuntu/Debian\n# logpath = /var/log/httpd/access_log  # RHEL/CentOS\nmaxretry = 6\nbantime = 86400\n\n[apache-overflows]\nenabled = true\nport = http,https\nfilter = apache-overflows\nlogpath = /var/log/apache2/error.log  # Ubuntu/Debian\n# logpath = /var/log/httpd/error_log  # RHEL/CentOS\nmaxretry = 2\nbantime = 86400\nEOF\n\nsudo systemctl enable --now fail2ban\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"log-analysis-and-monitoring\" class=\"mobile-header\"\u003eLog Analysis and Monitoring\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Install GoAccess for real-time log analysis\n# Ubuntu/Debian\nsudo apt install -y goaccess\n\n# RHEL/CentOS\nsudo yum install -y goaccess\n\n# Analyze logs in real-time\n# Ubuntu/Debian\nsudo goaccess /var/log/apache2/access.log -c\n\n# RHEL/CentOS\nsudo goaccess /var/log/httpd/access_log -c\n\n# Generate HTML report\nsudo goaccess /var/log/apache2/access.log -o /var/www/html/stats.html --log-format=COMBINED --real-time-html\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"backup-and-maintenance\" class=\"mobile-header\"\u003eBackup and Maintenance\u003c/h2\u003e\n\u003ch3 id=\"automated-backup-script\" class=\"mobile-header\"\u003eAutomated Backup Script\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003esudo tee /usr/local/bin/apache-backup.sh \u0026gt; /dev/null \u0026lt;\u0026lt;\u0026#039;EOF\u0026#039;\n#!/bin/bash\nBACKUP_DIR=\u0026quot;/backup/apache\u0026quot;\nDATE=$(date +%Y%m%d_%H%M%S)\n\nmkdir -p ${BACKUP_DIR}/{config,logs,sites}\n\n# Detect distribution and set paths\nif [ -d /etc/apache2 ]; then\n    # Ubuntu/Debian\n    CONFIG_DIR=\u0026quot;/etc/apache2\u0026quot;\n    LOG_DIR=\u0026quot;/var/log/apache2\u0026quot;\n    SERVICE_NAME=\u0026quot;apache2\u0026quot;\nelif [ -d /etc/httpd ]; then\n    # RHEL/CentOS\n    CONFIG_DIR=\u0026quot;/etc/httpd\u0026quot;\n    LOG_DIR=\u0026quot;/var/log/httpd\u0026quot;  \n    SERVICE_NAME=\u0026quot;httpd\u0026quot;\nfi\n\n# Backup configuration\ntar -czf ${BACKUP_DIR}/config/apache-config-${DATE}.tar.gz -C / ${CONFIG_DIR#/}\n\n# Backup website files\ntar -czf ${BACKUP_DIR}/sites/apache-sites-${DATE}.tar.gz -C /var/www .\n\n# Backup recent logs (last 7 days)\nfind ${LOG_DIR} -name \u0026quot;*.log\u0026quot; -mtime -7 -exec tar -czf ${BACKUP_DIR}/logs/apache-logs-${DATE}.tar.gz {} +\n\n# Keep only last 7 backups\nfind ${BACKUP_DIR} -name \u0026quot;apache-*\u0026quot; -type f -mtime +7 -delete\n\necho \u0026quot;Apache backup completed: ${DATE}\u0026quot;\nEOF\n\nsudo chmod +x /usr/local/bin/apache-backup.sh\n\n# Schedule daily backup\necho \u0026quot;0 2 * * * root /usr/local/bin/apache-backup.sh\u0026quot; | sudo tee -a /etc/crontab\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003cp class=\"mobile-paragraph\"\u003eThis updated Apache guide now includes:\u003c/p\u003e\n\u003cli class=\"mobile-list-item\"\u003e✅ \u003cstrong\u003eComplete cross-platform support\u003c/strong\u003e (Ubuntu, Debian, RHEL, CentOS, Rocky, Fedora, Arch, openSUSE, Alpine)\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003e✅ \u003cstrong\u003e2024 security best practices\u003c/strong\u003e (modern SSL/TLS, security headers, ModSecurity WAF)\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003e✅ \u003cstrong\u003ePerformance optimization\u003c/strong\u003e (MPM tuning, system optimization, caching)  \u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003e✅ \u003cstrong\u003eAdvanced configurations\u003c/strong\u003e (virtual hosts, SSL certificates, compression)\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003e✅ \u003cstrong\u003eComprehensive troubleshooting\u003c/strong\u003e (SELinux, cross-platform debugging)\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003e✅ \u003cstrong\u003eSecurity tools integration\u003c/strong\u003e (Fail2Ban, log analysis, monitoring)\u003c/li\u003e\n\u003cp class=\"mobile-paragraph\"\u003eShould I continue updating the other guides with this same comprehensive approach?\u003c/p\u003e","readTime":"18 min","wordCount":3528,"lastBuilt":"2025-09-14T01:15:36.008Z"},{"name":"apache-kafka","displayName":"Apache Kafka","slug":"apache-kafka","description":"Repo for apache-kafka","category":"web-server","language":null,"stars":0,"forks":0,"topics":[],"githubUrl":"https://github.com/howtomgr/apache-kafka","updatedAt":"2025-09-08T03:05:12Z","createdAt":"2025-09-08T03:05:01Z","readmeRaw":"## 👋 Welcome to apache-kafka 🚀  \n\napache-kafka README  \n  \n  \n## Author  \n\n🤖 casjay: [Github](https://github.com/casjay) 🤖  \n","readmeHtml":"\u003ch2 id=\"welcome-to-apache-kafka\" class=\"mobile-header\"\u003e👋 Welcome to apache-kafka 🚀  \u003c/h2\u003e\n\u003cp class=\"mobile-paragraph\"\u003eapache-kafka README  \u003c/p\u003e\n\u003ch2 id=\"author\" class=\"mobile-header\"\u003eAuthor  \u003c/h2\u003e\n\u003cp class=\"mobile-paragraph\"\u003e🤖 casjay: \u003ca href=\"https://github.com/casjay\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\"\u003eGithub\u003c/a\u003e 🤖  \u003c/p\u003e","readTime":"1 min","wordCount":15,"lastBuilt":"2025-09-14T01:15:35.871Z"},{"name":"caddy","displayName":"Caddy","slug":"caddy","description":"Repo for caddy","category":"web-server","language":null,"stars":0,"forks":0,"topics":[],"githubUrl":"https://github.com/howtomgr/caddy","updatedAt":"2025-09-08T03:05:30Z","createdAt":"2025-09-08T03:05:19Z","readmeRaw":"## 👋 Welcome to caddy 🚀  \n\ncaddy README  \n  \n  \n## Author  \n\n🤖 casjay: [Github](https://github.com/casjay) 🤖  \n","readmeHtml":"\u003ch2 id=\"welcome-to-caddy\" class=\"mobile-header\"\u003e👋 Welcome to caddy 🚀  \u003c/h2\u003e\n\u003cp class=\"mobile-paragraph\"\u003ecaddy README  \u003c/p\u003e\n\u003ch2 id=\"author\" class=\"mobile-header\"\u003eAuthor  \u003c/h2\u003e\n\u003cp class=\"mobile-paragraph\"\u003e🤖 casjay: \u003ca href=\"https://github.com/casjay\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\"\u003eGithub\u003c/a\u003e 🤖  \u003c/p\u003e","readTime":"1 min","wordCount":15,"lastBuilt":"2025-09-14T01:15:35.724Z"}]},"__N_SSG":true},"page":"/[category]/[guide]","query":{"category":"web-server","guide":"nginx"},"buildId":"lu0_WLQIo6fIzJ-IeQpog","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>