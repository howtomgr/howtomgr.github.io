<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes"/><meta name="theme-color" content="#bd93f9"/><link rel="icon" href="/favicon.ico"/><link rel="preconnect" href="https://fonts.googleapis.com"/><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="true"/><title class="jsx-745d6189719dfe72">Apache Kafka Installation Guide - HowToMgr</title><meta name="description" content="Repo for apache-kafka" class="jsx-745d6189719dfe72"/><meta name="keywords" content="installation guides, tutorials, linux, docker, kubernetes, mobile-first, responsive" class="jsx-745d6189719dfe72"/><meta property="og:title" content="Apache Kafka Installation Guide - HowToMgr" class="jsx-745d6189719dfe72"/><meta property="og:description" content="Repo for apache-kafka" class="jsx-745d6189719dfe72"/><meta property="og:type" content="website" class="jsx-745d6189719dfe72"/><meta property="og:url" content="https://howtomgr.github.io" class="jsx-745d6189719dfe72"/><meta property="og:image" content="https://howtomgr.github.io/social-preview.png" class="jsx-745d6189719dfe72"/><meta property="twitter:card" content="summary_large_image" class="jsx-745d6189719dfe72"/><meta property="twitter:title" content="Apache Kafka Installation Guide - HowToMgr" class="jsx-745d6189719dfe72"/><meta property="twitter:description" content="Repo for apache-kafka" class="jsx-745d6189719dfe72"/><meta name="next-head-count" content="17"/><link rel="dns-prefetch" href="//api.github.com"/><link rel="dns-prefetch" href="//github.com"/><link rel="preload" href="/favicon.ico" as="image"/><meta name="application-name" content="HowToMgr"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="default"/><meta name="apple-mobile-web-app-title" content="HowToMgr"/><meta name="format-detection" content="telephone=no"/><meta name="mobile-web-app-capable" content="yes"/><noscript><style>
            .requires-js { display: none !important; }
            .no-js-message { display: block !important; }
          </style></noscript><link rel="preload" href="/_next/static/css/eec6c1c201affe77.css" as="style"/><link rel="stylesheet" href="/_next/static/css/eec6c1c201affe77.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-42372ed130431b0a.js"></script><script src="/_next/static/chunks/webpack-ee7e63bc15b31913.js" defer=""></script><script src="/_next/static/chunks/framework-2b1f7a23d657eae4.js" defer=""></script><script src="/_next/static/chunks/main-6ec3f7584970eebe.js" defer=""></script><script src="/_next/static/chunks/pages/_app-d149ee305b4f74bb.js" defer=""></script><script src="/_next/static/chunks/409-41afef934247f89e.js" defer=""></script><script src="/_next/static/chunks/pages/%5Bcategory%5D/%5Bguide%5D-38cc5ea2e41d9e97.js" defer=""></script><script src="/_next/static/lu0_WLQIo6fIzJ-IeQpog/_buildManifest.js" defer=""></script><script src="/_next/static/lu0_WLQIo6fIzJ-IeQpog/_ssgManifest.js" defer=""></script><style id="__jsx-8a7f0cdcf94f52ce">.breadcrumb.jsx-8a7f0cdcf94f52ce{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;gap:var(--space-2);margin-bottom:var(--space-6);font-size:var(--font-sm);color:var(--text-secondary);overflow-x:auto;white-space:nowrap;-webkit-overflow-scrolling:touch}.breadcrumb.jsx-8a7f0cdcf94f52ce a.jsx-8a7f0cdcf94f52ce{color:var(--accent-primary);text-decoration:none;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0}.breadcrumb.jsx-8a7f0cdcf94f52ce a.jsx-8a7f0cdcf94f52ce:hover{text-decoration:underline}.separator.jsx-8a7f0cdcf94f52ce{color:var(--text-muted);-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0}.current.jsx-8a7f0cdcf94f52ce{color:var(--text-primary);font-weight:500;white-space:nowrap;overflow:hidden;-o-text-overflow:ellipsis;text-overflow:ellipsis}.guide-header.jsx-8a7f0cdcf94f52ce{background:var(--bg-secondary);-webkit-border-radius:var(--border-radius-lg);-moz-border-radius:var(--border-radius-lg);border-radius:var(--border-radius-lg);padding:var(--space-6);margin-bottom:var(--space-8);border:1px solid var(--bg-surface)}.guide-title.jsx-8a7f0cdcf94f52ce{color:var(--accent-primary);font-size:var(--font-3xl);margin-bottom:var(--space-4);line-height:1.2;word-break:break-word}.guide-description.jsx-8a7f0cdcf94f52ce{color:var(--text-secondary);font-size:var(--font-lg);margin-bottom:var(--space-5);line-height:1.5}.guide-badges.jsx-8a7f0cdcf94f52ce{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;gap:var(--space-3);margin-bottom:var(--space-5);-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap}.guide-actions.jsx-8a7f0cdcf94f52ce{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;gap:var(--space-3);-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap}.guide-content.jsx-8a7f0cdcf94f52ce{background:var(--bg-secondary);-webkit-border-radius:var(--border-radius-lg);-moz-border-radius:var(--border-radius-lg);border-radius:var(--border-radius-lg);padding:var(--space-6);margin-bottom:var(--space-8);border:1px solid var(--bg-surface);overflow-x:hidden}.related-section.jsx-8a7f0cdcf94f52ce{margin-bottom:var(--space-8)}.section-title.jsx-8a7f0cdcf94f52ce{color:var(--accent-primary);font-size:var(--font-2xl);text-align:center;margin-bottom:var(--space-6)}.guide-navigation.jsx-8a7f0cdcf94f52ce{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;gap:var(--space-4);-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;margin-bottom:var(--space-8)}.loading-container.jsx-8a7f0cdcf94f52ce,.error-container.jsx-8a7f0cdcf94f52ce{text-align:center;padding:var(--space-8)}.error-actions.jsx-8a7f0cdcf94f52ce{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;gap:var(--space-4);-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;margin-top:var(--space-6);-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap}@media(max-width:767px){.guide-header.jsx-8a7f0cdcf94f52ce{padding:var(--space-4);margin-bottom:var(--space-6)}.guide-title.jsx-8a7f0cdcf94f52ce{font-size:var(--font-2xl)}.guide-description.jsx-8a7f0cdcf94f52ce{font-size:var(--font-base)}.guide-content.jsx-8a7f0cdcf94f52ce{padding:var(--space-4);margin-bottom:var(--space-6)}.guide-badges.jsx-8a7f0cdcf94f52ce{gap:var(--space-2)}.guide-actions.jsx-8a7f0cdcf94f52ce{-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column}.guide-navigation.jsx-8a7f0cdcf94f52ce{-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column}.breadcrumb.jsx-8a7f0cdcf94f52ce{margin-bottom:var(--space-4)}}</style><style id="__jsx-745d6189719dfe72">.app-container.jsx-745d6189719dfe72{min-height:100vh;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;padding-top:56px}.main-content.jsx-745d6189719dfe72{-webkit-box-flex:1;-webkit-flex:1;-moz-box-flex:1;-ms-flex:1;flex:1;padding:var(--space-6)0}.mobile-footer.jsx-745d6189719dfe72{background:var(--bg-secondary);border-top:1px solid var(--bg-surface);padding:var(--space-6)0;margin-top:auto}.footer-content.jsx-745d6189719dfe72{text-align:center}.footer-links.jsx-745d6189719dfe72{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;gap:var(--space-6);margin-bottom:var(--space-4);-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap}.footer-links.jsx-745d6189719dfe72 a.jsx-745d6189719dfe72{color:var(--accent-primary);text-decoration:none;font-size:var(--font-sm)}.footer-links.jsx-745d6189719dfe72 a.jsx-745d6189719dfe72:hover{color:var(--accent-secondary)}.footer-separator.jsx-745d6189719dfe72{height:1px;background:var(--bg-surface);margin:var(--space-4)auto;width:200px}.footer-text.jsx-745d6189719dfe72,.footer-tech.jsx-745d6189719dfe72{color:var(--text-secondary);font-size:var(--font-sm);margin-bottom:var(--space-2)}.footer-disclaimer.jsx-745d6189719dfe72{color:var(--text-muted);font-size:var(--font-xs)}[data-theme="light"].jsx-745d6189719dfe72 .theme-icon-dark.jsx-745d6189719dfe72{display:none}[data-theme="light"].jsx-745d6189719dfe72 .theme-icon-light.jsx-745d6189719dfe72{display:inline!important}@media(max-width:767px){.main-content.jsx-745d6189719dfe72{padding:var(--space-4)0}.footer-links.jsx-745d6189719dfe72{gap:var(--space-4)}}</style></head><body><noscript><div class="no-js-message" style="padding:1rem;background:#ff5555;color:#f8f8f2;text-align:center;font-size:0.9rem">This site requires JavaScript to function properly. Please enable JavaScript in your browser.</div></noscript><div id="__next"><div class="jsx-745d6189719dfe72 app-container"><a href="#main-content" class="jsx-745d6189719dfe72 skip-link">Skip to main content</a><nav class="jsx-745d6189719dfe72 mobile-nav"><div class="jsx-745d6189719dfe72 mobile-nav-content"><a class="mobile-brand" href="/"><span role="img" aria-label="Books" class="jsx-745d6189719dfe72">üìö</span>HowToMgr</a><button aria-label="Toggle theme" title="Switch theme" class="jsx-745d6189719dfe72 mobile-theme-toggle touch-target"><span class="jsx-745d6189719dfe72 theme-icon-dark">üåô</span><span style="display:none" class="jsx-745d6189719dfe72 theme-icon-light">‚òÄÔ∏è</span></button></div></nav><main id="main-content" tabindex="-1" class="jsx-745d6189719dfe72 main-content"><div class="jsx-745d6189719dfe72 container"><nav aria-label="Breadcrumb" class="jsx-8a7f0cdcf94f52ce breadcrumb"><a href="/">Home</a><span class="jsx-8a7f0cdcf94f52ce separator">‚Üí</span><a href="/web-server/">Web Servers</a><span class="jsx-8a7f0cdcf94f52ce separator">‚Üí</span><span class="jsx-8a7f0cdcf94f52ce current">Apache Kafka</span></nav><header class="jsx-8a7f0cdcf94f52ce guide-header"><div class="jsx-8a7f0cdcf94f52ce guide-meta-top"><h1 class="jsx-8a7f0cdcf94f52ce guide-title">Apache Kafka</h1><p class="jsx-8a7f0cdcf94f52ce guide-description">Repo for apache-kafka</p><div class="jsx-8a7f0cdcf94f52ce guide-badges"><span class="jsx-8a7f0cdcf94f52ce mobile-badge mobile-badge-primary">Web Servers</span><span class="jsx-8a7f0cdcf94f52ce mobile-badge mobile-badge-info">1 min</span></div><div class="jsx-8a7f0cdcf94f52ce guide-actions"><a href="https://github.com/howtomgr/apache-kafka" target="_blank" rel="noopener" class="jsx-8a7f0cdcf94f52ce btn btn-secondary">View on GitHub</a></div></div></header><article class="jsx-8a7f0cdcf94f52ce guide-content"><div class="jsx-8a7f0cdcf94f52ce readme-content"><h2 id="welcome-to-apache-kafka" class="mobile-header">üëã Welcome to apache-kafka üöÄ  </h2>
<p class="mobile-paragraph">apache-kafka README  </p>
<h2 id="author" class="mobile-header">Author  </h2>
<p class="mobile-paragraph">ü§ñ casjay: <a href="https://github.com/casjay" target="_blank" rel="noopener" class="mobile-link">Github</a> ü§ñ  </p></div></article><section class="jsx-8a7f0cdcf94f52ce related-section"><h2 class="jsx-8a7f0cdcf94f52ce section-title">Related <!-- -->Web Servers<!-- --> Guides</h2><div class="jsx-8a7f0cdcf94f52ce mobile-grid"><a class="mobile-card" href="/web-server/apache/"><div class="jsx-8a7f0cdcf94f52ce mobile-card-header"><h3 class="jsx-8a7f0cdcf94f52ce mobile-card-title">Apache</h3><p class="jsx-8a7f0cdcf94f52ce mobile-card-description">Repo for apache</p></div><div class="jsx-8a7f0cdcf94f52ce mobile-card-meta"><span class="jsx-8a7f0cdcf94f52ce mobile-badge mobile-badge-info">18 min</span></div></a><a class="mobile-card" href="/web-server/caddy/"><div class="jsx-8a7f0cdcf94f52ce mobile-card-header"><h3 class="jsx-8a7f0cdcf94f52ce mobile-card-title">Caddy</h3><p class="jsx-8a7f0cdcf94f52ce mobile-card-description">Repo for caddy</p></div><div class="jsx-8a7f0cdcf94f52ce mobile-card-meta"><span class="jsx-8a7f0cdcf94f52ce mobile-badge mobile-badge-info">1 min</span></div></a><a class="mobile-card" href="/web-server/haproxy/"><div class="jsx-8a7f0cdcf94f52ce mobile-card-header"><h3 class="jsx-8a7f0cdcf94f52ce mobile-card-title">Haproxy</h3><p class="jsx-8a7f0cdcf94f52ce mobile-card-description">Repo for haproxy</p></div><div class="jsx-8a7f0cdcf94f52ce mobile-card-meta"><span class="jsx-8a7f0cdcf94f52ce mobile-badge mobile-badge-info">7 min</span></div></a></div></section><nav class="jsx-8a7f0cdcf94f52ce guide-navigation"><a class="btn btn-secondary" href="/web-server/">‚Üê All <!-- -->Web Servers</a><a class="btn btn-secondary" href="/">All Categories</a></nav></div></main><footer class="jsx-745d6189719dfe72 mobile-footer"><div class="jsx-745d6189719dfe72 container"><div class="jsx-745d6189719dfe72 footer-content"><div class="jsx-745d6189719dfe72 footer-links"><a href="/">Home</a><a href="https://github.com/howtomgr" target="_blank" rel="noopener" class="jsx-745d6189719dfe72">GitHub</a><a href="https://github.com/howtomgr/howtomgr.github.io" target="_blank" rel="noopener" class="jsx-745d6189719dfe72">Source</a></div><div class="jsx-745d6189719dfe72 footer-separator"></div><p class="jsx-745d6189719dfe72 footer-text">¬© <!-- -->2025<!-- --> HowToMgr Organization. Open source installation guides.</p><p class="jsx-745d6189719dfe72 footer-tech">Built with ‚ù§Ô∏è using Next.js + GitHub Pages</p><p class="jsx-745d6189719dfe72 footer-disclaimer"><small class="jsx-745d6189719dfe72">All guides are provided as-is. Please review and test before production use.</small></p></div></div></footer></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"guide":{"name":"apache-kafka","displayName":"Apache Kafka","slug":"apache-kafka","description":"Repo for apache-kafka","category":"web-server","language":null,"stars":0,"forks":0,"topics":[],"githubUrl":"https://github.com/howtomgr/apache-kafka","updatedAt":"2025-09-08T03:05:12Z","createdAt":"2025-09-08T03:05:01Z","readmeRaw":"## üëã Welcome to apache-kafka üöÄ  \n\napache-kafka README  \n  \n  \n## Author  \n\nü§ñ casjay: [Github](https://github.com/casjay) ü§ñ  \n","readmeHtml":"\u003ch2 id=\"welcome-to-apache-kafka\" class=\"mobile-header\"\u003eüëã Welcome to apache-kafka üöÄ  \u003c/h2\u003e\n\u003cp class=\"mobile-paragraph\"\u003eapache-kafka README  \u003c/p\u003e\n\u003ch2 id=\"author\" class=\"mobile-header\"\u003eAuthor  \u003c/h2\u003e\n\u003cp class=\"mobile-paragraph\"\u003eü§ñ casjay: \u003ca href=\"https://github.com/casjay\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\"\u003eGithub\u003c/a\u003e ü§ñ  \u003c/p\u003e","readTime":"1 min","wordCount":15,"lastBuilt":"2025-09-14T01:15:35.871Z"},"category":{"key":"web-server","name":"Web Servers","description":"High-performance web servers and reverse proxies","icon":"üåê","color":"#50fa7b","keywords":["nginx","apache","haproxy","traefik","caddy"]},"relatedGuides":[{"name":"apache","displayName":"Apache","slug":"apache","description":"Repo for apache","category":"web-server","language":null,"stars":0,"forks":0,"topics":[],"githubUrl":"https://github.com/howtomgr/apache","updatedAt":"2025-09-08T03:04:58Z","createdAt":"2025-09-08T03:04:47Z","readmeRaw":"# Apache HTTP Server Installation Guide\n\nWorld's most popular web server software serving over 40% of active websites. Reliable, secure, and highly configurable for hosting websites and web applications.\n\n## Prerequisites\n\n- Linux system (any modern distribution)\n- Root or sudo access  \n- 1GB RAM minimum, 2GB+ recommended for production\n- Network connectivity for package downloads\n\n## Installation\n\n### Ubuntu/Debian\n```bash\n# Update package list\nsudo apt update\n\n# Install Apache and essential modules\nsudo apt install -y apache2 apache2-utils\n\n# Enable essential modules\nsudo a2enmod rewrite ssl headers deflate expires security2\n\n# Start and enable Apache\nsudo systemctl enable --now apache2\n\n# Check status\nsudo systemctl status apache2\n```\n\n### RHEL/CentOS/Rocky Linux/AlmaLinux\n```bash\n# Install Apache (httpd)\nsudo yum install -y httpd httpd-tools mod_ssl\n\n# For newer versions with dnf\nsudo dnf install -y httpd httpd-tools mod_ssl\n\n# Start and enable Apache\nsudo systemctl enable --now httpd\n\n# Check status\nsudo systemctl status httpd\n```\n\n### Fedora\n```bash\n# Install Apache\nsudo dnf install -y httpd httpd-tools mod_ssl mod_security\n\n# Start and enable Apache\nsudo systemctl enable --now httpd\n\n# Configure firewall\nsudo firewall-cmd --permanent --add-service=http\nsudo firewall-cmd --permanent --add-service=https\nsudo firewall-cmd --reload\n```\n\n### Arch Linux\n```bash\n# Install Apache\nsudo pacman -Syu apache\n\n# Start and enable Apache\nsudo systemctl enable --now httpd\n\n# Edit configuration\nsudo nano /etc/httpd/conf/httpd.conf\n# Uncomment: ServerName www.example.com:80\n```\n\n### openSUSE/SUSE\n```bash\n# Install Apache\nsudo zypper install -y apache2 apache2-mod_ssl apache2-utils\n\n# Start and enable Apache\nsudo systemctl enable --now apache2\n\n# Configure firewall\nsudo SuSEfirewall2 open EXT TCP 80 443\n```\n\n### Alpine Linux\n```bash\n# Install Apache\nsudo apk update\nsudo apk add apache2 apache2-ssl apache2-utils\n\n# Create necessary directories\nsudo mkdir -p /var/www/html\nsudo mkdir -p /run/apache2\n\n# Start and enable Apache\nsudo rc-update add apache2 default\nsudo service apache2 start\n```\n\n### Docker Installation\n```bash\n# Official Apache Docker image\ndocker run -d \\\n  --name apache \\\n  --restart unless-stopped \\\n  -p 80:80 \\\n  -p 443:443 \\\n  -v ~/apache/htdocs:/usr/local/apache2/htdocs/ \\\n  -v ~/apache/conf:/usr/local/apache2/conf/ \\\n  -v ~/apache/logs:/usr/local/apache2/logs/ \\\n  httpd:latest\n\n# With Docker Compose\ncat \u003e docker-compose.yml \u003c\u003cEOF\nversion: '3.8'\nservices:\n  apache:\n    image: httpd:latest\n    restart: unless-stopped\n    ports:\n      - \"80:80\"\n      - \"443:443\"\n    volumes:\n      - ./htdocs:/usr/local/apache2/htdocs/\n      - ./conf/httpd.conf:/usr/local/apache2/conf/httpd.conf\n      - ./logs:/usr/local/apache2/logs/\n    networks:\n      - webserver\n\nnetworks:\n  webserver:\n    driver: bridge\nEOF\n\ndocker-compose up -d\n```\n\n### Source Compilation (Advanced)\n```bash\n# Install build dependencies\n# Ubuntu/Debian\nsudo apt install -y build-essential libapr1-dev libaprutil1-dev libpcre3-dev libssl-dev zlib1g-dev\n\n# RHEL/CentOS\nsudo yum groupinstall -y \"Development Tools\"\nsudo yum install -y apr-devel apr-util-devel pcre-devel openssl-devel zlib-devel\n\n# Download Apache source\ncd /tmp\nwget https://archive.apache.org/dist/httpd/httpd-2.4.57.tar.gz\ntar xzf httpd-2.4.57.tar.gz\ncd httpd-2.4.57\n\n# Configure with security and performance modules\n./configure \\\n  --prefix=/etc/apache2 \\\n  --exec-prefix=/usr \\\n  --bindir=/usr/bin \\\n  --sbindir=/usr/sbin \\\n  --sysconfdir=/etc/apache2 \\\n  --libexecdir=/usr/lib/apache2/modules \\\n  --localstatedir=/var \\\n  --datadir=/usr/share/apache2 \\\n  --includedir=/usr/include/apache2 \\\n  --infodir=/usr/share/info \\\n  --mandir=/usr/share/man \\\n  --with-program-name=apache2 \\\n  --enable-layout=Debian \\\n  --with-regex=pcre \\\n  --enable-mods-shared=reallyall \\\n  --enable-ssl \\\n  --enable-rewrite \\\n  --enable-headers \\\n  --enable-deflate \\\n  --enable-expires \\\n  --enable-security \\\n  --with-ssl=/usr \\\n  --with-ldap \\\n  --with-ldap-include=/usr/include \\\n  --with-ldap-lib=/usr/lib\n\n# Compile and install\nmake -j$(nproc)\nsudo make install\n\n# Create apache user\nsudo useradd -r -s /sbin/nologin apache\n\n# Create systemd service\nsudo tee /etc/systemd/system/apache2.service \u003e /dev/null \u003c\u003cEOF\n[Unit]\nDescription=The Apache HTTP Server\nAfter=network.target remote-fs.target nss-lookup.target\n\n[Service]\nType=notify\nExecStart=/usr/sbin/apache2 -DFOREGROUND\nExecReload=/usr/sbin/apache2ctl graceful\nExecStop=/bin/kill -WINTERM \\${MAINPID}\nKillSignal=SIGCONT\nPrivateTmp=true\n\n[Install]\nWantedBy=multi-user.target\nEOF\n\nsudo systemctl daemon-reload\nsudo systemctl enable --now apache2\n```\n\n## Security Hardening (2024 Best Practices)\n\n### Hide Server Information\n```bash\n# Create security configuration\n# Ubuntu/Debian\nsudo tee /etc/apache2/conf-available/security-hardening.conf \u003e /dev/null \u003c\u003cEOF\n# Hide Apache version and OS information\nServerTokens Prod\nServerSignature Off\n\n# Hide PHP version (if using PHP)\nHeader always unset X-Powered-By\nHeader unset X-Powered-By\n\n# Security headers (2024 recommendations)\nHeader always set Strict-Transport-Security \"max-age=31536000; includeSubDomains; preload\"\nHeader always set X-Frame-Options \"SAMEORIGIN\"\nHeader always set X-Content-Type-Options \"nosniff\"\nHeader always set X-XSS-Protection \"1; mode=block\"\nHeader always set Referrer-Policy \"strict-origin-when-cross-origin\"\nHeader always set Content-Security-Policy \"default-src 'self'; script-src 'self' 'unsafe-inline'; style-src 'self' 'unsafe-inline'; img-src 'self' data: https:; font-src 'self' data:; connect-src 'self'; media-src 'self'; object-src 'none'; child-src 'self'; form-action 'self'; base-uri 'self';\"\nHeader always set Permissions-Policy \"camera=(), microphone=(), geolocation=()\"\n\n# Remove sensitive headers\nHeader always unset Server\nHeader unset Server\n\n# Disable server status and info\n\u003cLocation \"/server-status\"\u003e\n    SetHandler server-status\n    Require local\n\u003c/Location\u003e\n\n\u003cLocation \"/server-info\"\u003e\n    SetHandler server-info\n    Require local\n\u003c/Location\u003e\n\n# Disable trace method\nTraceEnable off\n\n# Timeout configurations\nTimeout 60\nKeepAliveTimeout 15\n\n# Limit request size (adjust as needed)\nLimitRequestBody 10485760  # 10MB\n\n# Hide .htaccess files\n\u003cFilesMatch \"^\\.ht\"\u003e\n    Require all denied\n\u003c/FilesMatch\u003e\n\n# Hide backup and temporary files\n\u003cFilesMatch \"\\.(bak|backup|swp|tmp|~)$\"\u003e\n    Require all denied\n\u003c/FilesMatch\u003e\n\n# Disable directory browsing by default\nOptions -Indexes\n\n# Information disclosure protection\n\u003cDirectoryMatch \"/\\.\"\u003e\n    Require all denied\n\u003c/DirectoryMatch\u003e\n\n# Clickjacking protection\nHeader always append X-Frame-Options SAMEORIGIN\nEOF\n\n# Enable security configuration\nsudo a2enconf security-hardening\nsudo systemctl reload apache2\n\n# RHEL/CentOS (add to main configuration)\nsudo tee -a /etc/httpd/conf/httpd.conf \u003e /dev/null \u003c\u003cEOF\n\n# Security hardening\nServerTokens Prod\nServerSignature Off\n\n# Load security headers module\nLoadModule headers_module modules/mod_headers.so\n\n# Security headers\nHeader always set Strict-Transport-Security \"max-age=31536000; includeSubDomains; preload\"\nHeader always set X-Frame-Options \"SAMEORIGIN\"\nHeader always set X-Content-Type-Options \"nosniff\"\nHeader always set X-XSS-Protection \"1; mode=block\"\nHeader always set Referrer-Policy \"strict-origin-when-cross-origin\"\n\n# Disable trace method\nTraceEnable off\n\n# Hide .htaccess files\n\u003cFilesMatch \"^\\.ht\"\u003e\n    Require all denied\n\u003c/FilesMatch\u003e\n\n# Disable directory browsing\nOptions -Indexes\nEOF\n\nsudo systemctl reload httpd\n```\n\n### ModSecurity WAF Installation\n```bash\n# Ubuntu/Debian\nsudo apt install -y libapache2-mod-security2\n\n# RHEL/CentOS\nsudo yum install -y mod_security mod_security_crs\n\n# Enable ModSecurity\nsudo a2enmod security2  # Ubuntu/Debian\n\n# Download OWASP Core Rule Set\nsudo mkdir -p /etc/apache2/modsecurity.d\ncd /etc/apache2/modsecurity.d\nsudo wget https://github.com/coreruleset/coreruleset/archive/refs/tags/v3.3.4.tar.gz\nsudo tar xzf v3.3.4.tar.gz\nsudo mv coreruleset-3.3.4 crs\n\n# Configure ModSecurity\nsudo tee /etc/apache2/mods-available/security2.conf \u003e /dev/null \u003c\u003cEOF\n\u003cIfModule mod_security2.c\u003e\n    SecRuleEngine On\n    SecRequestBodyAccess On\n    SecRequestBodyLimit 13107200\n    SecRequestBodyNoFilesLimit 131072\n    SecRequestBodyInMemoryLimit 131072\n    SecRequestBodyLimitAction Reject\n    SecRule REQUEST_HEADERS:Content-Type \"text/xml\" \\\n         \"id:'200000',phase:1,t:none,t:lowercase,pass,nolog,ctl:requestBodyProcessor=XML\"\n    SecRule REQUEST_HEADERS:Content-Type \"application/json\" \\\n         \"id:'200001',phase:1,t:none,t:lowercase,pass,nolog,ctl:requestBodyProcessor=JSON\"\n    SecRule REQBODY_ERROR \"!@eq 0\" \\\n    \"id:'200002', phase:2,t:none,log,deny,status:400,msg:'Failed to parse request body.',logdata:'Error %{REQBODY_ERROR_MSG}',severity:2\"\n    SecRule MULTIPART_STRICT_ERROR \"!@eq 0\" \\\n    \"id:'200003',phase:2,t:none,log,deny,status:400, \\\n    msg:'Multipart request body failed strict validation: \\\n    PE %{REQBODY_PROCESSOR_ERROR}, \\\n    BQ %{MULTIPART_BOUNDARY_QUOTED}, \\\n    BW %{MULTIPART_BOUNDARY_WHITESPACE}, \\\n    DB %{MULTIPART_DATA_BEFORE}, \\\n    DA %{MULTIPART_DATA_AFTER}, \\\n    HF %{MULTIPART_HEADER_FOLDING}, \\\n    LF %{MULTIPART_LF_LINE}, \\\n    SM %{MULTIPART_MISSING_SEMICOLON}, \\\n    IQ %{MULTIPART_INVALID_QUOTING}, \\\n    IP %{MULTIPART_INVALID_PART}, \\\n    IH %{MULTIPART_INVALID_HEADER_FOLDING}, \\\n    FL %{MULTIPART_FILE_LIMIT_EXCEEDED}'\"\n\n    SecRule MULTIPART_UNMATCHED_BOUNDARY \"!@eq 0\" \\\n    \"id:'200004',phase:2,t:none,log,deny,msg:'Multipart parser detected a possible unmatched boundary.'\"\n\n    SecPcreMatchLimit 1000\n    SecPcreMatchLimitRecursion 1000\n\n    SecRule TX:/^MSC_/ \"!@streq 0\" \\\n            \"id:'200005',phase:2,t:none,deny,msg:'ModSecurity internal error flagged: %{MATCHED_VAR_NAME}'\"\n\n    SecResponseBodyAccess Off\n    SecDebugLog /var/log/apache2/modsec_debug.log\n    SecDebugLogLevel 0\n    SecAuditEngine RelevantOnly\n    SecAuditLogRelevantStatus \"^(?:5|4(?!04))\"\n    SecAuditLogParts ABDEFHIJZ\n    SecAuditLogType Serial\n    SecAuditLog /var/log/apache2/modsec_audit.log\n    \n    # Include OWASP Core Rule Set\n    Include /etc/apache2/modsecurity.d/crs/crs-setup.conf.example\n    Include /etc/apache2/modsecurity.d/crs/rules/*.conf\n\u003c/IfModule\u003e\nEOF\n\n# Create data directory\nsudo mkdir -p /var/cache/modsecurity\nsudo chown www-data:www-data /var/cache/modsecurity\n\nsudo systemctl reload apache2\n```\n\n### SSL/TLS Configuration (Modern 2024 Standards)\n```bash\n# Create modern SSL configuration\nsudo tee /etc/apache2/conf-available/ssl-modern.conf \u003e /dev/null \u003c\u003cEOF\n# Modern SSL configuration (2024)\nSSLEngine on\n\n# Protocols - Only TLS 1.2 and 1.3\nSSLProtocol all -SSLv3 -TLSv1 -TLSv1.1\n\n# Cipher suites for modern browsers (2024)\nSSLCipherSuite ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-CHACHA20-POLY1305:ECDHE-RSA-CHACHA20-POLY1305:DHE-RSA-AES128-GCM-SHA256:DHE-RSA-AES256-GCM-SHA384\n\n# Prefer server ciphers for TLS 1.2, client ciphers for TLS 1.3\nSSLHonorCipherOrder off\n\n# HSTS (HTTP Strict Transport Security)\nHeader always set Strict-Transport-Security \"max-age=31536000; includeSubDomains; preload\"\n\n# Session cache\nSSLSessionCache shmcb:/var/run/ssl_scache(512000)\nSSLSessionCacheTimeout 300\n\n# OCSP Stapling\nSSLUseStapling On\nSSLStaplingCache shmcb:/var/run/ocsp(128000)\nSSLStaplingResponderTimeout 5\nSSLStaplingReturnResponderErrors off\n\n# Modern security options\nSSLCompression off\nSSLSessionTickets off\n\n# Perfect Forward Secrecy\nSSLOpenSSLConfCmd DHParameters /etc/ssl/certs/dhparam.pem\nEOF\n\n# Generate strong DH parameters\nsudo openssl dhparam -out /etc/ssl/certs/dhparam.pem 2048\n\n# Enable SSL configuration\nsudo a2enconf ssl-modern\nsudo a2enmod ssl headers\nsudo systemctl reload apache2\n```\n\n### Secure Virtual Host Configuration\n```bash\n# Create production-ready virtual host\nsudo tee /etc/apache2/sites-available/secure-site.conf \u003e /dev/null \u003c\u003cEOF\n# HTTP to HTTPS redirect\n\u003cVirtualHost *:80\u003e\n    ServerName example.com\n    ServerAlias www.example.com\n    \n    # Security headers for redirects\n    Header always set X-Content-Type-Options nosniff\n    Header always set X-Frame-Options DENY\n    \n    # Redirect to HTTPS\n    Redirect permanent / https://example.com/\n\u003c/VirtualHost\u003e\n\n# HTTPS Virtual Host\n\u003cVirtualHost *:443\u003e\n    ServerName example.com\n    ServerAlias www.example.com\n    DocumentRoot /var/www/html/example.com\n    \n    # SSL Configuration\n    SSLEngine on\n    SSLCertificateFile /etc/letsencrypt/live/example.com/fullchain.pem\n    SSLCertificateKeyFile /etc/letsencrypt/live/example.com/privkey.pem\n    \n    # Security headers (2024 standards)\n    Header always set Strict-Transport-Security \"max-age=31536000; includeSubDomains; preload\"\n    Header always set X-Frame-Options \"SAMEORIGIN\"\n    Header always set X-Content-Type-Options \"nosniff\"\n    Header always set X-XSS-Protection \"1; mode=block\"\n    Header always set Referrer-Policy \"strict-origin-when-cross-origin\"\n    Header always set Content-Security-Policy \"default-src 'self'; script-src 'self' 'unsafe-inline'; style-src 'self' 'unsafe-inline'; img-src 'self' data: https:; font-src 'self' data:; connect-src 'self'; media-src 'self'; object-src 'none'; child-src 'self'; form-action 'self'; base-uri 'self';\"\n    Header always set Permissions-Policy \"camera=(), microphone=(), geolocation=()\"\n    \n    # Remove server information\n    Header always unset Server\n    Header unset X-Powered-By\n    \n    \u003cDirectory /var/www/html/example.com\u003e\n        Options -Indexes +FollowSymLinks\n        AllowOverride All\n        Require all granted\n        \n        # Additional security\n        \u003cFiles \".*\"\u003e\n            Require all denied\n        \u003c/Files\u003e\n        \n        \u003cFiles \"*.php~\"\u003e\n            Require all denied\n        \u003c/Files\u003e\n        \n        \u003cFiles \"*.inc\"\u003e\n            Require all denied\n        \u003c/Files\u003e\n    \u003c/Directory\u003e\n    \n    # PHP configuration (if using PHP)\n    \u003cIfModule mod_php.c\u003e\n        php_admin_flag allow_url_include Off\n        php_admin_flag allow_url_fopen Off\n        php_admin_flag file_uploads On\n        php_admin_value upload_max_filesize 64M\n        php_admin_value post_max_size 64M\n        php_admin_value memory_limit 256M\n        php_admin_value max_execution_time 300\n        php_admin_flag expose_php Off\n    \u003c/IfModule\u003e\n    \n    # Compression\n    \u003cIfModule mod_deflate.c\u003e\n        SetOutputFilter DEFLATE\n        AddOutputFilterByType DEFLATE text/html text/css text/javascript text/xml text/plain application/javascript application/xml+rss application/xml application/x-javascript application/json\n        \n        # Don't compress images\n        SetEnvIfNoCase Request_URI \\.(?:gif|jpe?g|png)$ no-gzip dont-vary\n        SetEnvIfNoCase Request_URI \\.(?:exe|t?gz|zip|bz2|sit|rar)$ no-gzip dont-vary\n    \u003c/IfModule\u003e\n    \n    # Caching rules\n    \u003cIfModule mod_expires.c\u003e\n        ExpiresActive On\n        ExpiresByType image/jpg \"access plus 1 month\"\n        ExpiresByType image/jpeg \"access plus 1 month\"\n        ExpiresByType image/gif \"access plus 1 month\"\n        ExpiresByType image/png \"access plus 1 month\"\n        ExpiresByType image/webp \"access plus 1 month\"\n        ExpiresByType text/css \"access plus 1 month\"\n        ExpiresByType application/pdf \"access plus 1 month\"\n        ExpiresByType text/javascript \"access plus 1 month\"\n        ExpiresByType application/javascript \"access plus 1 month\"\n        ExpiresByType application/x-javascript \"access plus 1 month\"\n        ExpiresByType application/x-shockwave-flash \"access plus 1 month\"\n        ExpiresByType image/x-icon \"access plus 1 year\"\n        ExpiresDefault \"access plus 2 days\"\n    \u003c/IfModule\u003e\n    \n    # Rate limiting (if mod_evasive is available)\n    \u003cIfModule mod_evasive24.c\u003e\n        DOSHashTableSize    1024\n        DOSPageCount        2\n        DOSSiteCount        50\n        DOSPageInterval     1\n        DOSSiteInterval     1\n        DOSBlockingPeriod   600\n        DOSLogDir           /var/log/apache2/\n        DOSEmailNotify      admin@example.com\n    \u003c/IfModule\u003e\n    \n    # ModSecurity\n    \u003cIfModule mod_security2.c\u003e\n        SecRuleEngine On\n        SecDefaultAction \"log,auditlog,pass\"\n    \u003c/IfModule\u003e\n    \n    ErrorLog \\${APACHE_LOG_DIR}/example.com_error.log\n    CustomLog \\${APACHE_LOG_DIR}/example.com_access.log combined\n    \n    # Log security events\n    CustomLog \\${APACHE_LOG_DIR}/example.com_security.log \"%h %l %u %t \\\"%r\\\" %\u003es %b \\\"%{Referer}i\\\" \\\"%{User-agent}i\\\"\" env=security\n\u003c/VirtualHost\u003e\n\n# WWW redirect\n\u003cVirtualHost *:443\u003e\n    ServerName www.example.com\n    \n    SSLEngine on\n    SSLCertificateFile /etc/letsencrypt/live/example.com/fullchain.pem\n    SSLCertificateKeyFile /etc/letsencrypt/live/example.com/privkey.pem\n    \n    Redirect permanent / https://example.com/\n\u003c/VirtualHost\u003e\nEOF\n\nsudo a2ensite secure-site.conf\nsudo a2enconf security-hardening\nsudo systemctl reload apache2\n```\n\n### Advanced Security Modules\n```bash\n# Install additional security modules\n# Ubuntu/Debian\nsudo apt install -y libapache2-mod-evasive libapache2-mod-security2\n\n# RHEL/CentOS\nsudo yum install -y mod_evasive mod_security\n\n# Enable modules\nsudo a2enmod evasive  # Ubuntu/Debian\nsudo a2enmod security2\n\n# Configure mod_evasive (DDoS protection)\nsudo tee /etc/apache2/mods-available/evasive.conf \u003e /dev/null \u003c\u003cEOF\n\u003cIfModule mod_evasive24.c\u003e\n    DOSHashTableSize    1024\n    DOSPageCount        3\n    DOSSiteCount        50\n    DOSPageInterval     1\n    DOSSiteInterval     1\n    DOSBlockingPeriod   600\n    DOSLogDir           /var/log/apache2/\n    DOSEmailNotify      admin@example.com\n    DOSWhitelist        127.0.0.1\n    DOSWhitelist        192.168.1.*\n\u003c/IfModule\u003e\nEOF\n\nsudo systemctl reload apache2\n```\n\n## SSL Certificate Setup (Cross-Platform)\n\n### Let's Encrypt Integration\n```bash\n# Install Certbot - Universal method\nsudo snap install core; sudo snap refresh core\nsudo snap install --classic certbot\nsudo ln -s /snap/bin/certbot /usr/bin/certbot\n\n# Alternative: Package manager installation\n# Ubuntu/Debian\nsudo apt install -y certbot python3-certbot-apache\n\n# RHEL/CentOS (enable EPEL first)\nsudo yum install -y epel-release\nsudo yum install -y certbot python3-certbot-apache\n\n# Fedora\nsudo dnf install -y certbot python3-certbot-apache\n\n# Arch Linux\nsudo pacman -S certbot certbot-apache\n\n# Obtain certificate\nsudo certbot --apache -d example.com -d www.example.com\n\n# Auto-renewal setup (universal)\nsudo crontab -e\n# Add: 0 12 * * * /usr/bin/certbot renew --quiet \u0026\u0026 systemctl reload apache2\n\n# Test renewal\nsudo certbot renew --dry-run\n```\n\n### Manual SSL Configuration\n```bash\n# Generate self-signed certificate for testing\nsudo mkdir -p /etc/ssl/private\nsudo openssl req -x509 -nodes -days 365 -newkey rsa:4096 \\\n  -keyout /etc/ssl/private/apache-selfsigned.key \\\n  -out /etc/ssl/certs/apache-selfsigned.crt \\\n  -subj \"/C=US/ST=State/L=City/O=Organization/CN=example.com\"\n\n# Create SSL configuration snippet\nsudo tee /etc/apache2/conf-available/ssl-params.conf \u003e /dev/null \u003c\u003cEOF\n# Modern SSL configuration\nSSLEngine on\nSSLProtocol all -SSLv3 -TLSv1 -TLSv1.1\nSSLCipherSuite ECDHE-RSA-AES256-GCM-SHA512:DHE-RSA-AES256-GCM-SHA512:ECDHE-RSA-AES256-GCM-SHA384:DHE-RSA-AES256-GCM-SHA384\nSSLHonorCipherOrder off\nSSLSessionTickets off\nSSLUseStapling on\nSSLStaplingCache shmcb:/var/run/ssl_stapling(32768)\nSSLOpenSSLConfCmd DHParameters /etc/ssl/certs/dhparam.pem\n\n# Security headers\nHeader always set Strict-Transport-Security \"max-age=63072000; includeSubDomains; preload\"\nHeader always set X-Content-Type-Options nosniff\nHeader always set X-Frame-Options SAMEORIGIN\nHeader always set X-XSS-Protection \"1; mode=block\"\nEOF\n\nsudo a2enconf ssl-params\n```\n\n## Firewall Configuration (All Platforms)\n\n### UFW (Ubuntu/Debian)\n```bash\nsudo ufw app list | grep Apache\nsudo ufw allow 'Apache Full'    # HTTP and HTTPS\nsudo ufw allow 'Apache'         # HTTP only  \nsudo ufw allow 'Apache Secure'  # HTTPS only\nsudo ufw enable\nsudo ufw status\n```\n\n### Firewalld (RHEL/CentOS/Fedora)\n```bash\nsudo firewall-cmd --permanent --add-service=http\nsudo firewall-cmd --permanent --add-service=https\nsudo firewall-cmd --reload\nsudo firewall-cmd --list-services\n```\n\n### iptables (Universal)\n```bash\n# Allow HTTP and HTTPS\nsudo iptables -A INPUT -p tcp --dport 80 -j ACCEPT\nsudo iptables -A INPUT -p tcp --dport 443 -j ACCEPT\n\n# Save rules (varies by distribution)\n# Ubuntu/Debian\nsudo apt install -y iptables-persistent\nsudo netfilter-persistent save\n\n# RHEL/CentOS\nsudo service iptables save\n\n# Arch Linux\nsudo iptables-save \u003e /etc/iptables/iptables.rules\n\n# Alpine Linux\nsudo /etc/init.d/iptables save\n```\n\n### SELinux Configuration (RHEL/CentOS/Fedora)\n```bash\n# Check SELinux status\ngetenforce\n\n# Set SELinux booleans for Apache\nsudo setsebool -P httpd_can_network_connect 1\nsudo setsebool -P httpd_can_network_relay 1\nsudo setsebool -P httpd_use_nfs 1\nsudo setsebool -P httpd_graceful_shutdown 1\n\n# For custom content directories\nsudo semanage fcontext -a -t httpd_exec_t \"/var/www/html(/.*)?\"\nsudo restorecon -Rv /var/www/html/\n\n# For custom ports\nsudo semanage port -a -t http_port_t -p tcp 8080\n\n# Check denials\nsudo ausearch -m AVC,USER_AVC,SELINUX_ERR -ts recent\n```\n\n## Performance Optimization\n\n### Multi-Processing Module (MPM) Tuning\n```bash\n# Check current MPM\napache2ctl -M | grep mpm  # Ubuntu/Debian\nhttpd -M | grep mpm       # RHEL/CentOS\n\n# Configure Event MPM (most efficient)\nsudo tee /etc/apache2/mods-available/mpm_event.conf \u003e /dev/null \u003c\u003cEOF\n\u003cIfModule mpm_event_module\u003e\n    StartServers             3\n    MinSpareThreads         75\n    MaxSpareThreads        250\n    ThreadsPerChild         25\n    MaxRequestWorkers      400\n    MaxConnectionsPerChild   0\n    AsyncRequestWorkerFactor 2\n\u003c/IfModule\u003e\nEOF\n\n# Enable Event MPM\nsudo a2dismod mpm_prefork\nsudo a2enmod mpm_event\nsudo systemctl restart apache2\n```\n\n### System-level Performance Tuning\n```bash\n# Increase system limits\nsudo tee -a /etc/security/limits.conf \u003e /dev/null \u003c\u003cEOF\napache soft nofile 65535\napache hard nofile 65535\nwww-data soft nofile 65535\nwww-data hard nofile 65535\nEOF\n\n# Kernel optimization for web servers\nsudo tee -a /etc/sysctl.conf \u003e /dev/null \u003c\u003cEOF\n# Apache/web server optimization\nnet.core.somaxconn = 65535\nnet.core.netdev_max_backlog = 5000\nnet.ipv4.tcp_max_syn_backlog = 65535\nnet.ipv4.tcp_fin_timeout = 10\nnet.ipv4.tcp_tw_reuse = 1\nnet.ipv4.ip_local_port_range = 15000 65000\nfs.file-max = 100000\n\n# Memory management\nvm.swappiness = 10\nvm.dirty_ratio = 15\nvm.dirty_background_ratio = 5\nEOF\n\nsudo sysctl -p\n```\n\n### Caching Configuration\n```bash\n# Enable caching modules\nsudo a2enmod cache cache_disk expires headers\n\n# Create cache configuration\nsudo tee /etc/apache2/conf-available/caching.conf \u003e /dev/null \u003c\u003cEOF\n# Disk cache configuration\n\u003cIfModule mod_cache_disk.c\u003e\n    CacheRoot /var/cache/apache2/mod_cache_disk\n    CacheDirLevels 2\n    CacheDirLength 1\n    CacheEnable disk /\n    CacheIgnoreHeaders Set-Cookie\n    CacheDefaultExpire 3600\n    CacheMaxExpire 86400\n    CacheLastModifiedFactor 0.1\n\u003c/IfModule\u003e\n\n# Browser caching\n\u003cIfModule mod_expires.c\u003e\n    ExpiresActive On\n    \n    # Cache static assets\n    ExpiresByType image/jpg \"access plus 1 year\"\n    ExpiresByType image/jpeg \"access plus 1 year\"\n    ExpiresByType image/gif \"access plus 1 year\"\n    ExpiresByType image/png \"access plus 1 year\"\n    ExpiresByType image/webp \"access plus 1 year\"\n    ExpiresByType text/css \"access plus 1 month\"\n    ExpiresByType application/pdf \"access plus 1 month\"\n    ExpiresByType text/javascript \"access plus 1 month\"\n    ExpiresByType application/javascript \"access plus 1 month\"\n    ExpiresByType application/x-javascript \"access plus 1 month\"\n    ExpiresByType application/x-shockwave-flash \"access plus 1 month\"\n    ExpiresByType image/x-icon \"access plus 1 year\"\n    ExpiresByType text/html \"access plus 300 seconds\"\n    \n    # Default expiration\n    ExpiresDefault \"access plus 1 day\"\n\u003c/IfModule\u003e\n\n# Compression\n\u003cIfModule mod_deflate.c\u003e\n    # Enable compression for text files\n    \u003cLocation /\u003e\n        SetOutputFilter DEFLATE\n        \n        # Don't compress images or binaries\n        SetEnvIfNoCase Request_URI \\\n            \\.(?:gif|jpe?g|png|webp)$ no-gzip dont-vary\n        SetEnvIfNoCase Request_URI \\\n            \\.(?:exe|t?gz|zip|bz2|sit|rar|pdf)$ no-gzip dont-vary\n            \n        # Include file types to compress\n        AddOutputFilterByType DEFLATE text/html text/plain text/xml text/css text/javascript\n        AddOutputFilterByType DEFLATE application/javascript application/json application/xml application/xhtml+xml application/rss+xml\n    \u003c/Location\u003e\n\u003c/IfModule\u003e\nEOF\n\n# Create cache directory\nsudo mkdir -p /var/cache/apache2/mod_cache_disk\nsudo chown -R www-data:www-data /var/cache/apache2  # Ubuntu/Debian\nsudo chown -R apache:apache /var/cache/apache2      # RHEL/CentOS\n\nsudo a2enconf caching\nsudo systemctl reload apache2\n```\n\n## Cross-Platform Verification\n\n### Service Management (All Distributions)\n```bash\n# Check which init system is in use\nif command -v systemctl \u0026\u003e /dev/null; then\n    echo \"Using systemd\"\n    \n    # SystemD commands\n    sudo systemctl status apache2    # Ubuntu/Debian\n    sudo systemctl status httpd      # RHEL/CentOS\n    sudo systemctl restart apache2\n    sudo systemctl reload apache2\n    \nelif command -v service \u0026\u003e /dev/null; then\n    echo \"Using SysV init\"\n    \n    # Traditional service commands\n    sudo service apache2 status\n    sudo service apache2 restart\n    sudo service apache2 reload\n    \nelif command -v rc-service \u0026\u003e /dev/null; then\n    echo \"Using OpenRC (Alpine)\"\n    \n    # OpenRC commands\n    sudo rc-service apache2 status\n    sudo rc-service apache2 restart\nfi\n```\n\n### Configuration Testing\n```bash\n# Test configuration syntax (distribution-aware)\nif [ -f /etc/apache2/apache2.conf ]; then\n    # Ubuntu/Debian\n    sudo apache2ctl configtest\n    sudo apache2ctl -S  # Show virtual hosts\n    sudo apache2ctl -M  # Show loaded modules\nelif [ -f /etc/httpd/conf/httpd.conf ]; then\n    # RHEL/CentOS\n    sudo httpd -t\n    sudo httpd -S\n    sudo httpd -M\nfi\n\n# Show version and build info\napache2ctl -v  # Ubuntu/Debian\nhttpd -v       # RHEL/CentOS\n\n# Show all configuration\napache2ctl -T  # Ubuntu/Debian\nhttpd -T       # RHEL/CentOS\n```\n\n### Log Analysis and Monitoring\n```bash\n# Monitor Apache logs (cross-platform)\n# Ubuntu/Debian paths\nsudo tail -f /var/log/apache2/access.log\nsudo tail -f /var/log/apache2/error.log\n\n# RHEL/CentOS paths  \nsudo tail -f /var/log/httpd/access_log\nsudo tail -f /var/log/httpd/error_log\n\n# Real-time connection monitoring\nwatch \"netstat -an | grep :80 | grep ESTABLISHED | wc -l\"\n\n# Monitor process performance\nhtop -p $(pgrep apache2 || pgrep httpd | head -5 | tr '\\n' ',' | sed 's/,$//')\n\n# Check virtual host access\nsudo grep \"GET\\|POST\" /var/log/apache2/access.log | tail -20  # Ubuntu/Debian\nsudo grep \"GET\\|POST\" /var/log/httpd/access_log | tail -20    # RHEL/CentOS\n```\n\n## Cross-Platform Troubleshooting\n\n### Common Issues and Solutions\n```bash\n# Check which user Apache runs as\nps aux | grep -E \"(apache2|httpd)\" | grep -v grep\n\n# Permission issues (distribution-aware)\n# Ubuntu/Debian\nsudo chown -R www-data:www-data /var/www/html\nsudo chmod -R 755 /var/www/html\n\n# RHEL/CentOS\nsudo chown -R apache:apache /var/www/html\nsudo chmod -R 755 /var/www/html\n\n# Check configuration file locations\nif [ -d /etc/apache2 ]; then\n    echo \"Configuration directory: /etc/apache2\"\n    echo \"Main config: /etc/apache2/apache2.conf\"\n    echo \"Sites: /etc/apache2/sites-available/\"\nelif [ -d /etc/httpd ]; then\n    echo \"Configuration directory: /etc/httpd\"\n    echo \"Main config: /etc/httpd/conf/httpd.conf\"\n    echo \"Virtual hosts: /etc/httpd/conf.d/\"\nfi\n\n# Port binding issues\nsudo lsof -i :80\nsudo netstat -tulpn | grep :80\n\n# SELinux troubleshooting (RHEL/CentOS)\nif command -v getenforce \u0026\u003e /dev/null; then\n    echo \"SELinux status: $(getenforce)\"\n    sudo ausearch -m AVC,USER_AVC -ts recent\n    sudo grep \"denied\" /var/log/audit/audit.log | tail -5\nfi\n\n# Check Apache error logs for issues\n# Ubuntu/Debian\nsudo tail -20 /var/log/apache2/error.log\n\n# RHEL/CentOS\nsudo tail -20 /var/log/httpd/error_log\n\n# Test specific virtual host\ncurl -H \"Host: example.com\" http://localhost/\n\n# Check loaded modules\napache2ctl -M | grep -E \"(rewrite|ssl|headers)\"  # Ubuntu/Debian\nhttpd -M | grep -E \"(rewrite|ssl|headers)\"        # RHEL/CentOS\n\n# Memory usage analysis\nps aux --sort=-%mem | grep -E \"(apache2|httpd)\" | head -10\n```\n\n### Debug Mode and Advanced Troubleshooting\n```bash\n# Enable debug logging\n# Ubuntu/Debian\nsudo nano /etc/apache2/apache2.conf\n# Add: LogLevel debug\n\n# RHEL/CentOS\nsudo nano /etc/httpd/conf/httpd.conf\n# Add: LogLevel debug\n\n# Test configuration with specific user\nsudo -u www-data apache2ctl configtest  # Ubuntu/Debian\nsudo -u apache httpd -t                  # RHEL/CentOS\n\n# Check virtual host configuration\napache2ctl -S  # Ubuntu/Debian\nhttpd -S       # RHEL/CentOS\n\n# Trace requests (careful in production)\n# Add to virtual host:\nLogLevel debug\nCustomLog /var/log/apache2/trace.log \"%h %l %u %t \\\"%r\\\" %\u003es %b \\\"%{Referer}i\\\" \\\"%{User-agent}i\\\" %D\"\n\n# Monitor real-time\nsudo tail -f /var/log/apache2/trace.log\n```\n\n## Additional Security Tools Integration\n\n### Fail2Ban Configuration\n```bash\n# Install Fail2Ban\nsudo apt install -y fail2ban  # Ubuntu/Debian\nsudo yum install -y fail2ban  # RHEL/CentOS\n\n# Create Apache-specific jails\nsudo tee /etc/fail2ban/jail.d/apache.conf \u003e /dev/null \u003c\u003cEOF\n[apache-auth]\nenabled = true\nport = http,https\nfilter = apache-auth\nlogpath = /var/log/apache2/error.log  # Ubuntu/Debian\n# logpath = /var/log/httpd/error_log  # RHEL/CentOS\nmaxretry = 6\nfindtime = 600\nbantime = 3600\n\n[apache-badbots]\nenabled = true\nport = http,https\nfilter = apache-badbots  \nlogpath = /var/log/apache2/access.log  # Ubuntu/Debian\n# logpath = /var/log/httpd/access_log  # RHEL/CentOS\nmaxretry = 2\nbantime = 86400\n\n[apache-noscript]\nenabled = true\nport = http,https\nfilter = apache-noscript\nlogpath = /var/log/apache2/access.log  # Ubuntu/Debian\n# logpath = /var/log/httpd/access_log  # RHEL/CentOS\nmaxretry = 6\nbantime = 86400\n\n[apache-overflows]\nenabled = true\nport = http,https\nfilter = apache-overflows\nlogpath = /var/log/apache2/error.log  # Ubuntu/Debian\n# logpath = /var/log/httpd/error_log  # RHEL/CentOS\nmaxretry = 2\nbantime = 86400\nEOF\n\nsudo systemctl enable --now fail2ban\n```\n\n### Log Analysis and Monitoring\n```bash\n# Install GoAccess for real-time log analysis\n# Ubuntu/Debian\nsudo apt install -y goaccess\n\n# RHEL/CentOS\nsudo yum install -y goaccess\n\n# Analyze logs in real-time\n# Ubuntu/Debian\nsudo goaccess /var/log/apache2/access.log -c\n\n# RHEL/CentOS\nsudo goaccess /var/log/httpd/access_log -c\n\n# Generate HTML report\nsudo goaccess /var/log/apache2/access.log -o /var/www/html/stats.html --log-format=COMBINED --real-time-html\n```\n\n## Backup and Maintenance\n\n### Automated Backup Script\n```bash\nsudo tee /usr/local/bin/apache-backup.sh \u003e /dev/null \u003c\u003c'EOF'\n#!/bin/bash\nBACKUP_DIR=\"/backup/apache\"\nDATE=$(date +%Y%m%d_%H%M%S)\n\nmkdir -p ${BACKUP_DIR}/{config,logs,sites}\n\n# Detect distribution and set paths\nif [ -d /etc/apache2 ]; then\n    # Ubuntu/Debian\n    CONFIG_DIR=\"/etc/apache2\"\n    LOG_DIR=\"/var/log/apache2\"\n    SERVICE_NAME=\"apache2\"\nelif [ -d /etc/httpd ]; then\n    # RHEL/CentOS\n    CONFIG_DIR=\"/etc/httpd\"\n    LOG_DIR=\"/var/log/httpd\"  \n    SERVICE_NAME=\"httpd\"\nfi\n\n# Backup configuration\ntar -czf ${BACKUP_DIR}/config/apache-config-${DATE}.tar.gz -C / ${CONFIG_DIR#/}\n\n# Backup website files\ntar -czf ${BACKUP_DIR}/sites/apache-sites-${DATE}.tar.gz -C /var/www .\n\n# Backup recent logs (last 7 days)\nfind ${LOG_DIR} -name \"*.log\" -mtime -7 -exec tar -czf ${BACKUP_DIR}/logs/apache-logs-${DATE}.tar.gz {} +\n\n# Keep only last 7 backups\nfind ${BACKUP_DIR} -name \"apache-*\" -type f -mtime +7 -delete\n\necho \"Apache backup completed: ${DATE}\"\nEOF\n\nsudo chmod +x /usr/local/bin/apache-backup.sh\n\n# Schedule daily backup\necho \"0 2 * * * root /usr/local/bin/apache-backup.sh\" | sudo tee -a /etc/crontab\n```\n\nThis updated Apache guide now includes:\n- ‚úÖ **Complete cross-platform support** (Ubuntu, Debian, RHEL, CentOS, Rocky, Fedora, Arch, openSUSE, Alpine)\n- ‚úÖ **2024 security best practices** (modern SSL/TLS, security headers, ModSecurity WAF)\n- ‚úÖ **Performance optimization** (MPM tuning, system optimization, caching)  \n- ‚úÖ **Advanced configurations** (virtual hosts, SSL certificates, compression)\n- ‚úÖ **Comprehensive troubleshooting** (SELinux, cross-platform debugging)\n- ‚úÖ **Security tools integration** (Fail2Ban, log analysis, monitoring)\n\nShould I continue updating the other guides with this same comprehensive approach?","readmeHtml":"\u003ch1 id=\"apache-http-server-installation-guide\" class=\"mobile-header\"\u003eApache HTTP Server Installation Guide\u003c/h1\u003e\n\u003cp class=\"mobile-paragraph\"\u003eWorld's most popular web server software serving over 40% of active websites. Reliable, secure, and highly configurable for hosting websites and web applications.\u003c/p\u003e\n\u003ch2 id=\"prerequisites\" class=\"mobile-header\"\u003ePrerequisites\u003c/h2\u003e\n\u003cli class=\"mobile-list-item\"\u003eLinux system (any modern distribution)\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eRoot or sudo access  \u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003e1GB RAM minimum, 2GB+ recommended for production\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eNetwork connectivity for package downloads\u003c/li\u003e\n\u003ch2 id=\"installation\" class=\"mobile-header\"\u003eInstallation\u003c/h2\u003e\n\u003ch3 id=\"ubuntudebian\" class=\"mobile-header\"\u003eUbuntu/Debian\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003eüìã\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Update package list\nsudo apt update\n\n# Install Apache and essential modules\nsudo apt install -y apache2 apache2-utils\n\n# Enable essential modules\nsudo a2enmod rewrite ssl headers deflate expires security2\n\n# Start and enable Apache\nsudo systemctl enable --now apache2\n\n# Check status\nsudo systemctl status apache2\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"rhelcentosrocky-linuxalmalinux\" class=\"mobile-header\"\u003eRHEL/CentOS/Rocky Linux/AlmaLinux\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003eüìã\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Install Apache (httpd)\nsudo yum install -y httpd httpd-tools mod_ssl\n\n# For newer versions with dnf\nsudo dnf install -y httpd httpd-tools mod_ssl\n\n# Start and enable Apache\nsudo systemctl enable --now httpd\n\n# Check status\nsudo systemctl status httpd\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"fedora\" class=\"mobile-header\"\u003eFedora\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003eüìã\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Install Apache\nsudo dnf install -y httpd httpd-tools mod_ssl mod_security\n\n# Start and enable Apache\nsudo systemctl enable --now httpd\n\n# Configure firewall\nsudo firewall-cmd --permanent --add-service=http\nsudo firewall-cmd --permanent --add-service=https\nsudo firewall-cmd --reload\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"arch-linux\" class=\"mobile-header\"\u003eArch Linux\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003eüìã\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Install Apache\nsudo pacman -Syu apache\n\n# Start and enable Apache\nsudo systemctl enable --now httpd\n\n# Edit configuration\nsudo nano /etc/httpd/conf/httpd.conf\n# Uncomment: ServerName www.example.com:80\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"opensusesuse\" class=\"mobile-header\"\u003eopenSUSE/SUSE\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003eüìã\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Install Apache\nsudo zypper install -y apache2 apache2-mod_ssl apache2-utils\n\n# Start and enable Apache\nsudo systemctl enable --now apache2\n\n# Configure firewall\nsudo SuSEfirewall2 open EXT TCP 80 443\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"alpine-linux\" class=\"mobile-header\"\u003eAlpine Linux\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003eüìã\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Install Apache\nsudo apk update\nsudo apk add apache2 apache2-ssl apache2-utils\n\n# Create necessary directories\nsudo mkdir -p /var/www/html\nsudo mkdir -p /run/apache2\n\n# Start and enable Apache\nsudo rc-update add apache2 default\nsudo service apache2 start\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"docker-installation\" class=\"mobile-header\"\u003eDocker Installation\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003eüìã\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Official Apache Docker image\ndocker run -d \\\n  --name apache \\\n  --restart unless-stopped \\\n  -p 80:80 \\\n  -p 443:443 \\\n  -v ~/apache/htdocs:/usr/local/apache2/htdocs/ \\\n  -v ~/apache/conf:/usr/local/apache2/conf/ \\\n  -v ~/apache/logs:/usr/local/apache2/logs/ \\\n  httpd:latest\n\n# With Docker Compose\ncat \u0026gt; docker-compose.yml \u0026lt;\u0026lt;EOF\nversion: \u0026#039;3.8\u0026#039;\nservices:\n  apache:\n    image: httpd:latest\n    restart: unless-stopped\n    ports:\n      - \u0026quot;80:80\u0026quot;\n      - \u0026quot;443:443\u0026quot;\n    volumes:\n      - ./htdocs:/usr/local/apache2/htdocs/\n      - ./conf/httpd.conf:/usr/local/apache2/conf/httpd.conf\n      - ./logs:/usr/local/apache2/logs/\n    networks:\n      - webserver\n\nnetworks:\n  webserver:\n    driver: bridge\nEOF\n\ndocker-compose up -d\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"source-compilation-advanced\" class=\"mobile-header\"\u003eSource Compilation (Advanced)\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003eüìã\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Install build dependencies\n# Ubuntu/Debian\nsudo apt install -y build-essential libapr1-dev libaprutil1-dev libpcre3-dev libssl-dev zlib1g-dev\n\n# RHEL/CentOS\nsudo yum groupinstall -y \u0026quot;Development Tools\u0026quot;\nsudo yum install -y apr-devel apr-util-devel pcre-devel openssl-devel zlib-devel\n\n# Download Apache source\ncd /tmp\nwget https://archive.apache.org/dist/httpd/httpd-2.4.57.tar.gz\ntar xzf httpd-2.4.57.tar.gz\ncd httpd-2.4.57\n\n# Configure with security and performance modules\n./configure \\\n  --prefix=/etc/apache2 \\\n  --exec-prefix=/usr \\\n  --bindir=/usr/bin \\\n  --sbindir=/usr/sbin \\\n  --sysconfdir=/etc/apache2 \\\n  --libexecdir=/usr/lib/apache2/modules \\\n  --localstatedir=/var \\\n  --datadir=/usr/share/apache2 \\\n  --includedir=/usr/include/apache2 \\\n  --infodir=/usr/share/info \\\n  --mandir=/usr/share/man \\\n  --with-program-name=apache2 \\\n  --enable-layout=Debian \\\n  --with-regex=pcre \\\n  --enable-mods-shared=reallyall \\\n  --enable-ssl \\\n  --enable-rewrite \\\n  --enable-headers \\\n  --enable-deflate \\\n  --enable-expires \\\n  --enable-security \\\n  --with-ssl=/usr \\\n  --with-ldap \\\n  --with-ldap-include=/usr/include \\\n  --with-ldap-lib=/usr/lib\n\n# Compile and install\nmake -j$(nproc)\nsudo make install\n\n# Create apache user\nsudo useradd -r -s /sbin/nologin apache\n\n# Create systemd service\nsudo tee /etc/systemd/system/apache2.service \u0026gt; /dev/null \u0026lt;\u0026lt;EOF\n[Unit]\nDescription=The Apache HTTP Server\nAfter=network.target remote-fs.target nss-lookup.target\n\n[Service]\nType=notify\nExecStart=/usr/sbin/apache2 -DFOREGROUND\nExecReload=/usr/sbin/apache2ctl graceful\nExecStop=/bin/kill -WINTERM \\${MAINPID}\nKillSignal=SIGCONT\nPrivateTmp=true\n\n[Install]\nWantedBy=multi-user.target\nEOF\n\nsudo systemctl daemon-reload\nsudo systemctl enable --now apache2\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"security-hardening-2024-best-practices\" class=\"mobile-header\"\u003eSecurity Hardening (2024 Best Practices)\u003c/h2\u003e\n\u003ch3 id=\"hide-server-information\" class=\"mobile-header\"\u003eHide Server Information\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003eüìã\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Create security configuration\n# Ubuntu/Debian\nsudo tee /etc/apache2/conf-available/security-hardening.conf \u0026gt; /dev/null \u0026lt;\u0026lt;EOF\n# Hide Apache version and OS information\nServerTokens Prod\nServerSignature Off\n\n# Hide PHP version (if using PHP)\nHeader always unset X-Powered-By\nHeader unset X-Powered-By\n\n# Security headers (2024 recommendations)\nHeader always set Strict-Transport-Security \u0026quot;max-age=31536000; includeSubDomains; preload\u0026quot;\nHeader always set X-Frame-Options \u0026quot;SAMEORIGIN\u0026quot;\nHeader always set X-Content-Type-Options \u0026quot;nosniff\u0026quot;\nHeader always set X-XSS-Protection \u0026quot;1; mode=block\u0026quot;\nHeader always set Referrer-Policy \u0026quot;strict-origin-when-cross-origin\u0026quot;\nHeader always set Content-Security-Policy \u0026quot;default-src \u0026#039;self\u0026#039;; script-src \u0026#039;self\u0026#039; \u0026#039;unsafe-inline\u0026#039;; style-src \u0026#039;self\u0026#039; \u0026#039;unsafe-inline\u0026#039;; img-src \u0026#039;self\u0026#039; data: https:; font-src \u0026#039;self\u0026#039; data:; connect-src \u0026#039;self\u0026#039;; media-src \u0026#039;self\u0026#039;; object-src \u0026#039;none\u0026#039;; child-src \u0026#039;self\u0026#039;; form-action \u0026#039;self\u0026#039;; base-uri \u0026#039;self\u0026#039;;\u0026quot;\nHeader always set Permissions-Policy \u0026quot;camera=(), microphone=(), geolocation=()\u0026quot;\n\n# Remove sensitive headers\nHeader always unset Server\nHeader unset Server\n\n# Disable server status and info\n\u0026lt;Location \u0026quot;/server-status\u0026quot;\u0026gt;\n    SetHandler server-status\n    Require local\n\u0026lt;/Location\u0026gt;\n\n\u0026lt;Location \u0026quot;/server-info\u0026quot;\u0026gt;\n    SetHandler server-info\n    Require local\n\u0026lt;/Location\u0026gt;\n\n# Disable trace method\nTraceEnable off\n\n# Timeout configurations\nTimeout 60\nKeepAliveTimeout 15\n\n# Limit request size (adjust as needed)\nLimitRequestBody 10485760  # 10MB\n\n# Hide .htaccess files\n\u0026lt;FilesMatch \u0026quot;^\\.ht\u0026quot;\u0026gt;\n    Require all denied\n\u0026lt;/FilesMatch\u0026gt;\n\n# Hide backup and temporary files\n\u0026lt;FilesMatch \u0026quot;\\.(bak|backup|swp|tmp|~)$\u0026quot;\u0026gt;\n    Require all denied\n\u0026lt;/FilesMatch\u0026gt;\n\n# Disable directory browsing by default\nOptions -Indexes\n\n# Information disclosure protection\n\u0026lt;DirectoryMatch \u0026quot;/\\.\u0026quot;\u0026gt;\n    Require all denied\n\u0026lt;/DirectoryMatch\u0026gt;\n\n# Clickjacking protection\nHeader always append X-Frame-Options SAMEORIGIN\nEOF\n\n# Enable security configuration\nsudo a2enconf security-hardening\nsudo systemctl reload apache2\n\n# RHEL/CentOS (add to main configuration)\nsudo tee -a /etc/httpd/conf/httpd.conf \u0026gt; /dev/null \u0026lt;\u0026lt;EOF\n\n# Security hardening\nServerTokens Prod\nServerSignature Off\n\n# Load security headers module\nLoadModule headers_module modules/mod_headers.so\n\n# Security headers\nHeader always set Strict-Transport-Security \u0026quot;max-age=31536000; includeSubDomains; preload\u0026quot;\nHeader always set X-Frame-Options \u0026quot;SAMEORIGIN\u0026quot;\nHeader always set X-Content-Type-Options \u0026quot;nosniff\u0026quot;\nHeader always set X-XSS-Protection \u0026quot;1; mode=block\u0026quot;\nHeader always set Referrer-Policy \u0026quot;strict-origin-when-cross-origin\u0026quot;\n\n# Disable trace method\nTraceEnable off\n\n# Hide .htaccess files\n\u0026lt;FilesMatch \u0026quot;^\\.ht\u0026quot;\u0026gt;\n    Require all denied\n\u0026lt;/FilesMatch\u0026gt;\n\n# Disable directory browsing\nOptions -Indexes\nEOF\n\nsudo systemctl reload httpd\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"modsecurity-waf-installation\" class=\"mobile-header\"\u003eModSecurity WAF Installation\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003eüìã\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Ubuntu/Debian\nsudo apt install -y libapache2-mod-security2\n\n# RHEL/CentOS\nsudo yum install -y mod_security mod_security_crs\n\n# Enable ModSecurity\nsudo a2enmod security2  # Ubuntu/Debian\n\n# Download OWASP Core Rule Set\nsudo mkdir -p /etc/apache2/modsecurity.d\ncd /etc/apache2/modsecurity.d\nsudo wget https://github.com/coreruleset/coreruleset/archive/refs/tags/v3.3.4.tar.gz\nsudo tar xzf v3.3.4.tar.gz\nsudo mv coreruleset-3.3.4 crs\n\n# Configure ModSecurity\nsudo tee /etc/apache2/mods-available/security2.conf \u0026gt; /dev/null \u0026lt;\u0026lt;EOF\n\u0026lt;IfModule mod_security2.c\u0026gt;\n    SecRuleEngine On\n    SecRequestBodyAccess On\n    SecRequestBodyLimit 13107200\n    SecRequestBodyNoFilesLimit 131072\n    SecRequestBodyInMemoryLimit 131072\n    SecRequestBodyLimitAction Reject\n    SecRule REQUEST_HEADERS:Content-Type \u0026quot;text/xml\u0026quot; \\\n         \u0026quot;id:\u0026#039;200000\u0026#039;,phase:1,t:none,t:lowercase,pass,nolog,ctl:requestBodyProcessor=XML\u0026quot;\n    SecRule REQUEST_HEADERS:Content-Type \u0026quot;application/json\u0026quot; \\\n         \u0026quot;id:\u0026#039;200001\u0026#039;,phase:1,t:none,t:lowercase,pass,nolog,ctl:requestBodyProcessor=JSON\u0026quot;\n    SecRule REQBODY_ERROR \u0026quot;!@eq 0\u0026quot; \\\n    \u0026quot;id:\u0026#039;200002\u0026#039;, phase:2,t:none,log,deny,status:400,msg:\u0026#039;Failed to parse request body.\u0026#039;,logdata:\u0026#039;Error %{REQBODY_ERROR_MSG}\u0026#039;,severity:2\u0026quot;\n    SecRule MULTIPART_STRICT_ERROR \u0026quot;!@eq 0\u0026quot; \\\n    \u0026quot;id:\u0026#039;200003\u0026#039;,phase:2,t:none,log,deny,status:400, \\\n    msg:\u0026#039;Multipart request body failed strict validation: \\\n    PE %{REQBODY_PROCESSOR_ERROR}, \\\n    BQ %{MULTIPART_BOUNDARY_QUOTED}, \\\n    BW %{MULTIPART_BOUNDARY_WHITESPACE}, \\\n    DB %{MULTIPART_DATA_BEFORE}, \\\n    DA %{MULTIPART_DATA_AFTER}, \\\n    HF %{MULTIPART_HEADER_FOLDING}, \\\n    LF %{MULTIPART_LF_LINE}, \\\n    SM %{MULTIPART_MISSING_SEMICOLON}, \\\n    IQ %{MULTIPART_INVALID_QUOTING}, \\\n    IP %{MULTIPART_INVALID_PART}, \\\n    IH %{MULTIPART_INVALID_HEADER_FOLDING}, \\\n    FL %{MULTIPART_FILE_LIMIT_EXCEEDED}\u0026#039;\u0026quot;\n\n    SecRule MULTIPART_UNMATCHED_BOUNDARY \u0026quot;!@eq 0\u0026quot; \\\n    \u0026quot;id:\u0026#039;200004\u0026#039;,phase:2,t:none,log,deny,msg:\u0026#039;Multipart parser detected a possible unmatched boundary.\u0026#039;\u0026quot;\n\n    SecPcreMatchLimit 1000\n    SecPcreMatchLimitRecursion 1000\n\n    SecRule TX:/^MSC_/ \u0026quot;!@streq 0\u0026quot; \\\n            \u0026quot;id:\u0026#039;200005\u0026#039;,phase:2,t:none,deny,msg:\u0026#039;ModSecurity internal error flagged: %{MATCHED_VAR_NAME}\u0026#039;\u0026quot;\n\n    SecResponseBodyAccess Off\n    SecDebugLog /var/log/apache2/modsec_debug.log\n    SecDebugLogLevel 0\n    SecAuditEngine RelevantOnly\n    SecAuditLogRelevantStatus \u0026quot;^(?:5|4(?!04))\u0026quot;\n    SecAuditLogParts ABDEFHIJZ\n    SecAuditLogType Serial\n    SecAuditLog /var/log/apache2/modsec_audit.log\n    \n    # Include OWASP Core Rule Set\n    Include /etc/apache2/modsecurity.d/crs/crs-setup.conf.example\n    Include /etc/apache2/modsecurity.d/crs/rules/*.conf\n\u0026lt;/IfModule\u0026gt;\nEOF\n\n# Create data directory\nsudo mkdir -p /var/cache/modsecurity\nsudo chown www-data:www-data /var/cache/modsecurity\n\nsudo systemctl reload apache2\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"ssltls-configuration-modern-2024-standards\" class=\"mobile-header\"\u003eSSL/TLS Configuration (Modern 2024 Standards)\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003eüìã\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Create modern SSL configuration\nsudo tee /etc/apache2/conf-available/ssl-modern.conf \u0026gt; /dev/null \u0026lt;\u0026lt;EOF\n# Modern SSL configuration (2024)\nSSLEngine on\n\n# Protocols - Only TLS 1.2 and 1.3\nSSLProtocol all -SSLv3 -TLSv1 -TLSv1.1\n\n# Cipher suites for modern browsers (2024)\nSSLCipherSuite ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-CHACHA20-POLY1305:ECDHE-RSA-CHACHA20-POLY1305:DHE-RSA-AES128-GCM-SHA256:DHE-RSA-AES256-GCM-SHA384\n\n# Prefer server ciphers for TLS 1.2, client ciphers for TLS 1.3\nSSLHonorCipherOrder off\n\n# HSTS (HTTP Strict Transport Security)\nHeader always set Strict-Transport-Security \u0026quot;max-age=31536000; includeSubDomains; preload\u0026quot;\n\n# Session cache\nSSLSessionCache shmcb:/var/run/ssl_scache(512000)\nSSLSessionCacheTimeout 300\n\n# OCSP Stapling\nSSLUseStapling On\nSSLStaplingCache shmcb:/var/run/ocsp(128000)\nSSLStaplingResponderTimeout 5\nSSLStaplingReturnResponderErrors off\n\n# Modern security options\nSSLCompression off\nSSLSessionTickets off\n\n# Perfect Forward Secrecy\nSSLOpenSSLConfCmd DHParameters /etc/ssl/certs/dhparam.pem\nEOF\n\n# Generate strong DH parameters\nsudo openssl dhparam -out /etc/ssl/certs/dhparam.pem 2048\n\n# Enable SSL configuration\nsudo a2enconf ssl-modern\nsudo a2enmod ssl headers\nsudo systemctl reload apache2\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"secure-virtual-host-configuration\" class=\"mobile-header\"\u003eSecure Virtual Host Configuration\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003eüìã\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Create production-ready virtual host\nsudo tee /etc/apache2/sites-available/secure-site.conf \u0026gt; /dev/null \u0026lt;\u0026lt;EOF\n# HTTP to HTTPS redirect\n\u0026lt;VirtualHost *:80\u0026gt;\n    ServerName example.com\n    ServerAlias www.example.com\n    \n    # Security headers for redirects\n    Header always set X-Content-Type-Options nosniff\n    Header always set X-Frame-Options DENY\n    \n    # Redirect to HTTPS\n    Redirect permanent / https://example.com/\n\u0026lt;/VirtualHost\u0026gt;\n\n# HTTPS Virtual Host\n\u0026lt;VirtualHost *:443\u0026gt;\n    ServerName example.com\n    ServerAlias www.example.com\n    DocumentRoot /var/www/html/example.com\n    \n    # SSL Configuration\n    SSLEngine on\n    SSLCertificateFile /etc/letsencrypt/live/example.com/fullchain.pem\n    SSLCertificateKeyFile /etc/letsencrypt/live/example.com/privkey.pem\n    \n    # Security headers (2024 standards)\n    Header always set Strict-Transport-Security \u0026quot;max-age=31536000; includeSubDomains; preload\u0026quot;\n    Header always set X-Frame-Options \u0026quot;SAMEORIGIN\u0026quot;\n    Header always set X-Content-Type-Options \u0026quot;nosniff\u0026quot;\n    Header always set X-XSS-Protection \u0026quot;1; mode=block\u0026quot;\n    Header always set Referrer-Policy \u0026quot;strict-origin-when-cross-origin\u0026quot;\n    Header always set Content-Security-Policy \u0026quot;default-src \u0026#039;self\u0026#039;; script-src \u0026#039;self\u0026#039; \u0026#039;unsafe-inline\u0026#039;; style-src \u0026#039;self\u0026#039; \u0026#039;unsafe-inline\u0026#039;; img-src \u0026#039;self\u0026#039; data: https:; font-src \u0026#039;self\u0026#039; data:; connect-src \u0026#039;self\u0026#039;; media-src \u0026#039;self\u0026#039;; object-src \u0026#039;none\u0026#039;; child-src \u0026#039;self\u0026#039;; form-action \u0026#039;self\u0026#039;; base-uri \u0026#039;self\u0026#039;;\u0026quot;\n    Header always set Permissions-Policy \u0026quot;camera=(), microphone=(), geolocation=()\u0026quot;\n    \n    # Remove server information\n    Header always unset Server\n    Header unset X-Powered-By\n    \n    \u0026lt;Directory /var/www/html/example.com\u0026gt;\n        Options -Indexes +FollowSymLinks\n        AllowOverride All\n        Require all granted\n        \n        # Additional security\n        \u0026lt;Files \u0026quot;.*\u0026quot;\u0026gt;\n            Require all denied\n        \u0026lt;/Files\u0026gt;\n        \n        \u0026lt;Files \u0026quot;*.php~\u0026quot;\u0026gt;\n            Require all denied\n        \u0026lt;/Files\u0026gt;\n        \n        \u0026lt;Files \u0026quot;*.inc\u0026quot;\u0026gt;\n            Require all denied\n        \u0026lt;/Files\u0026gt;\n    \u0026lt;/Directory\u0026gt;\n    \n    # PHP configuration (if using PHP)\n    \u0026lt;IfModule mod_php.c\u0026gt;\n        php_admin_flag allow_url_include Off\n        php_admin_flag allow_url_fopen Off\n        php_admin_flag file_uploads On\n        php_admin_value upload_max_filesize 64M\n        php_admin_value post_max_size 64M\n        php_admin_value memory_limit 256M\n        php_admin_value max_execution_time 300\n        php_admin_flag expose_php Off\n    \u0026lt;/IfModule\u0026gt;\n    \n    # Compression\n    \u0026lt;IfModule mod_deflate.c\u0026gt;\n        SetOutputFilter DEFLATE\n        AddOutputFilterByType DEFLATE text/html text/css text/javascript text/xml text/plain application/javascript application/xml+rss application/xml application/x-javascript application/json\n        \n        # Don\u0026#039;t compress images\n        SetEnvIfNoCase Request_URI \\.(?:gif|jpe?g|png)$ no-gzip dont-vary\n        SetEnvIfNoCase Request_URI \\.(?:exe|t?gz|zip|bz2|sit|rar)$ no-gzip dont-vary\n    \u0026lt;/IfModule\u0026gt;\n    \n    # Caching rules\n    \u0026lt;IfModule mod_expires.c\u0026gt;\n        ExpiresActive On\n        ExpiresByType image/jpg \u0026quot;access plus 1 month\u0026quot;\n        ExpiresByType image/jpeg \u0026quot;access plus 1 month\u0026quot;\n        ExpiresByType image/gif \u0026quot;access plus 1 month\u0026quot;\n        ExpiresByType image/png \u0026quot;access plus 1 month\u0026quot;\n        ExpiresByType image/webp \u0026quot;access plus 1 month\u0026quot;\n        ExpiresByType text/css \u0026quot;access plus 1 month\u0026quot;\n        ExpiresByType application/pdf \u0026quot;access plus 1 month\u0026quot;\n        ExpiresByType text/javascript \u0026quot;access plus 1 month\u0026quot;\n        ExpiresByType application/javascript \u0026quot;access plus 1 month\u0026quot;\n        ExpiresByType application/x-javascript \u0026quot;access plus 1 month\u0026quot;\n        ExpiresByType application/x-shockwave-flash \u0026quot;access plus 1 month\u0026quot;\n        ExpiresByType image/x-icon \u0026quot;access plus 1 year\u0026quot;\n        ExpiresDefault \u0026quot;access plus 2 days\u0026quot;\n    \u0026lt;/IfModule\u0026gt;\n    \n    # Rate limiting (if mod_evasive is available)\n    \u0026lt;IfModule mod_evasive24.c\u0026gt;\n        DOSHashTableSize    1024\n        DOSPageCount        2\n        DOSSiteCount        50\n        DOSPageInterval     1\n        DOSSiteInterval     1\n        DOSBlockingPeriod   600\n        DOSLogDir           /var/log/apache2/\n        DOSEmailNotify      admin@example.com\n    \u0026lt;/IfModule\u0026gt;\n    \n    # ModSecurity\n    \u0026lt;IfModule mod_security2.c\u0026gt;\n        SecRuleEngine On\n        SecDefaultAction \u0026quot;log,auditlog,pass\u0026quot;\n    \u0026lt;/IfModule\u0026gt;\n    \n    ErrorLog \\${APACHE_LOG_DIR}/example.com_error.log\n    CustomLog \\${APACHE_LOG_DIR}/example.com_access.log combined\n    \n    # Log security events\n    CustomLog \\${APACHE_LOG_DIR}/example.com_security.log \u0026quot;%h %l %u %t \\\u0026quot;%r\\\u0026quot; %\u0026gt;s %b \\\u0026quot;%{Referer}i\\\u0026quot; \\\u0026quot;%{User-agent}i\\\u0026quot;\u0026quot; env=security\n\u0026lt;/VirtualHost\u0026gt;\n\n# WWW redirect\n\u0026lt;VirtualHost *:443\u0026gt;\n    ServerName www.example.com\n    \n    SSLEngine on\n    SSLCertificateFile /etc/letsencrypt/live/example.com/fullchain.pem\n    SSLCertificateKeyFile /etc/letsencrypt/live/example.com/privkey.pem\n    \n    Redirect permanent / https://example.com/\n\u0026lt;/VirtualHost\u0026gt;\nEOF\n\nsudo a2ensite secure-site.conf\nsudo a2enconf security-hardening\nsudo systemctl reload apache2\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"advanced-security-modules\" class=\"mobile-header\"\u003eAdvanced Security Modules\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003eüìã\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Install additional security modules\n# Ubuntu/Debian\nsudo apt install -y libapache2-mod-evasive libapache2-mod-security2\n\n# RHEL/CentOS\nsudo yum install -y mod_evasive mod_security\n\n# Enable modules\nsudo a2enmod evasive  # Ubuntu/Debian\nsudo a2enmod security2\n\n# Configure mod_evasive (DDoS protection)\nsudo tee /etc/apache2/mods-available/evasive.conf \u0026gt; /dev/null \u0026lt;\u0026lt;EOF\n\u0026lt;IfModule mod_evasive24.c\u0026gt;\n    DOSHashTableSize    1024\n    DOSPageCount        3\n    DOSSiteCount        50\n    DOSPageInterval     1\n    DOSSiteInterval     1\n    DOSBlockingPeriod   600\n    DOSLogDir           /var/log/apache2/\n    DOSEmailNotify      admin@example.com\n    DOSWhitelist        127.0.0.1\n    DOSWhitelist        192.168.1.*\n\u0026lt;/IfModule\u0026gt;\nEOF\n\nsudo systemctl reload apache2\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"ssl-certificate-setup-cross-platform\" class=\"mobile-header\"\u003eSSL Certificate Setup (Cross-Platform)\u003c/h2\u003e\n\u003ch3 id=\"lets-encrypt-integration\" class=\"mobile-header\"\u003eLet's Encrypt Integration\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003eüìã\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Install Certbot - Universal method\nsudo snap install core; sudo snap refresh core\nsudo snap install --classic certbot\nsudo ln -s /snap/bin/certbot /usr/bin/certbot\n\n# Alternative: Package manager installation\n# Ubuntu/Debian\nsudo apt install -y certbot python3-certbot-apache\n\n# RHEL/CentOS (enable EPEL first)\nsudo yum install -y epel-release\nsudo yum install -y certbot python3-certbot-apache\n\n# Fedora\nsudo dnf install -y certbot python3-certbot-apache\n\n# Arch Linux\nsudo pacman -S certbot certbot-apache\n\n# Obtain certificate\nsudo certbot --apache -d example.com -d www.example.com\n\n# Auto-renewal setup (universal)\nsudo crontab -e\n# Add: 0 12 * * * /usr/bin/certbot renew --quiet \u0026amp;\u0026amp; systemctl reload apache2\n\n# Test renewal\nsudo certbot renew --dry-run\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"manual-ssl-configuration\" class=\"mobile-header\"\u003eManual SSL Configuration\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003eüìã\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Generate self-signed certificate for testing\nsudo mkdir -p /etc/ssl/private\nsudo openssl req -x509 -nodes -days 365 -newkey rsa:4096 \\\n  -keyout /etc/ssl/private/apache-selfsigned.key \\\n  -out /etc/ssl/certs/apache-selfsigned.crt \\\n  -subj \u0026quot;/C=US/ST=State/L=City/O=Organization/CN=example.com\u0026quot;\n\n# Create SSL configuration snippet\nsudo tee /etc/apache2/conf-available/ssl-params.conf \u0026gt; /dev/null \u0026lt;\u0026lt;EOF\n# Modern SSL configuration\nSSLEngine on\nSSLProtocol all -SSLv3 -TLSv1 -TLSv1.1\nSSLCipherSuite ECDHE-RSA-AES256-GCM-SHA512:DHE-RSA-AES256-GCM-SHA512:ECDHE-RSA-AES256-GCM-SHA384:DHE-RSA-AES256-GCM-SHA384\nSSLHonorCipherOrder off\nSSLSessionTickets off\nSSLUseStapling on\nSSLStaplingCache shmcb:/var/run/ssl_stapling(32768)\nSSLOpenSSLConfCmd DHParameters /etc/ssl/certs/dhparam.pem\n\n# Security headers\nHeader always set Strict-Transport-Security \u0026quot;max-age=63072000; includeSubDomains; preload\u0026quot;\nHeader always set X-Content-Type-Options nosniff\nHeader always set X-Frame-Options SAMEORIGIN\nHeader always set X-XSS-Protection \u0026quot;1; mode=block\u0026quot;\nEOF\n\nsudo a2enconf ssl-params\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"firewall-configuration-all-platforms\" class=\"mobile-header\"\u003eFirewall Configuration (All Platforms)\u003c/h2\u003e\n\u003ch3 id=\"ufw-ubuntudebian\" class=\"mobile-header\"\u003eUFW (Ubuntu/Debian)\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003eüìã\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003esudo ufw app list | grep Apache\nsudo ufw allow \u0026#039;Apache Full\u0026#039;    # HTTP and HTTPS\nsudo ufw allow \u0026#039;Apache\u0026#039;         # HTTP only  \nsudo ufw allow \u0026#039;Apache Secure\u0026#039;  # HTTPS only\nsudo ufw enable\nsudo ufw status\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"firewalld-rhelcentosfedora\" class=\"mobile-header\"\u003eFirewalld (RHEL/CentOS/Fedora)\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003eüìã\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003esudo firewall-cmd --permanent --add-service=http\nsudo firewall-cmd --permanent --add-service=https\nsudo firewall-cmd --reload\nsudo firewall-cmd --list-services\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"iptables-universal\" class=\"mobile-header\"\u003eiptables (Universal)\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003eüìã\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Allow HTTP and HTTPS\nsudo iptables -A INPUT -p tcp --dport 80 -j ACCEPT\nsudo iptables -A INPUT -p tcp --dport 443 -j ACCEPT\n\n# Save rules (varies by distribution)\n# Ubuntu/Debian\nsudo apt install -y iptables-persistent\nsudo netfilter-persistent save\n\n# RHEL/CentOS\nsudo service iptables save\n\n# Arch Linux\nsudo iptables-save \u0026gt; /etc/iptables/iptables.rules\n\n# Alpine Linux\nsudo /etc/init.d/iptables save\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"selinux-configuration-rhelcentosfedora\" class=\"mobile-header\"\u003eSELinux Configuration (RHEL/CentOS/Fedora)\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003eüìã\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Check SELinux status\ngetenforce\n\n# Set SELinux booleans for Apache\nsudo setsebool -P httpd_can_network_connect 1\nsudo setsebool -P httpd_can_network_relay 1\nsudo setsebool -P httpd_use_nfs 1\nsudo setsebool -P httpd_graceful_shutdown 1\n\n# For custom content directories\nsudo semanage fcontext -a -t httpd_exec_t \u0026quot;/var/www/html(/.*)?\u0026quot;\nsudo restorecon -Rv /var/www/html/\n\n# For custom ports\nsudo semanage port -a -t http_port_t -p tcp 8080\n\n# Check denials\nsudo ausearch -m AVC,USER_AVC,SELINUX_ERR -ts recent\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"performance-optimization\" class=\"mobile-header\"\u003ePerformance Optimization\u003c/h2\u003e\n\u003ch3 id=\"multi-processing-module-mpm-tuning\" class=\"mobile-header\"\u003eMulti-Processing Module (MPM) Tuning\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003eüìã\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Check current MPM\napache2ctl -M | grep mpm  # Ubuntu/Debian\nhttpd -M | grep mpm       # RHEL/CentOS\n\n# Configure Event MPM (most efficient)\nsudo tee /etc/apache2/mods-available/mpm_event.conf \u0026gt; /dev/null \u0026lt;\u0026lt;EOF\n\u0026lt;IfModule mpm_event_module\u0026gt;\n    StartServers             3\n    MinSpareThreads         75\n    MaxSpareThreads        250\n    ThreadsPerChild         25\n    MaxRequestWorkers      400\n    MaxConnectionsPerChild   0\n    AsyncRequestWorkerFactor 2\n\u0026lt;/IfModule\u0026gt;\nEOF\n\n# Enable Event MPM\nsudo a2dismod mpm_prefork\nsudo a2enmod mpm_event\nsudo systemctl restart apache2\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"system-level-performance-tuning\" class=\"mobile-header\"\u003eSystem-level Performance Tuning\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003eüìã\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Increase system limits\nsudo tee -a /etc/security/limits.conf \u0026gt; /dev/null \u0026lt;\u0026lt;EOF\napache soft nofile 65535\napache hard nofile 65535\nwww-data soft nofile 65535\nwww-data hard nofile 65535\nEOF\n\n# Kernel optimization for web servers\nsudo tee -a /etc/sysctl.conf \u0026gt; /dev/null \u0026lt;\u0026lt;EOF\n# Apache/web server optimization\nnet.core.somaxconn = 65535\nnet.core.netdev_max_backlog = 5000\nnet.ipv4.tcp_max_syn_backlog = 65535\nnet.ipv4.tcp_fin_timeout = 10\nnet.ipv4.tcp_tw_reuse = 1\nnet.ipv4.ip_local_port_range = 15000 65000\nfs.file-max = 100000\n\n# Memory management\nvm.swappiness = 10\nvm.dirty_ratio = 15\nvm.dirty_background_ratio = 5\nEOF\n\nsudo sysctl -p\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"caching-configuration\" class=\"mobile-header\"\u003eCaching Configuration\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003eüìã\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Enable caching modules\nsudo a2enmod cache cache_disk expires headers\n\n# Create cache configuration\nsudo tee /etc/apache2/conf-available/caching.conf \u0026gt; /dev/null \u0026lt;\u0026lt;EOF\n# Disk cache configuration\n\u0026lt;IfModule mod_cache_disk.c\u0026gt;\n    CacheRoot /var/cache/apache2/mod_cache_disk\n    CacheDirLevels 2\n    CacheDirLength 1\n    CacheEnable disk /\n    CacheIgnoreHeaders Set-Cookie\n    CacheDefaultExpire 3600\n    CacheMaxExpire 86400\n    CacheLastModifiedFactor 0.1\n\u0026lt;/IfModule\u0026gt;\n\n# Browser caching\n\u0026lt;IfModule mod_expires.c\u0026gt;\n    ExpiresActive On\n    \n    # Cache static assets\n    ExpiresByType image/jpg \u0026quot;access plus 1 year\u0026quot;\n    ExpiresByType image/jpeg \u0026quot;access plus 1 year\u0026quot;\n    ExpiresByType image/gif \u0026quot;access plus 1 year\u0026quot;\n    ExpiresByType image/png \u0026quot;access plus 1 year\u0026quot;\n    ExpiresByType image/webp \u0026quot;access plus 1 year\u0026quot;\n    ExpiresByType text/css \u0026quot;access plus 1 month\u0026quot;\n    ExpiresByType application/pdf \u0026quot;access plus 1 month\u0026quot;\n    ExpiresByType text/javascript \u0026quot;access plus 1 month\u0026quot;\n    ExpiresByType application/javascript \u0026quot;access plus 1 month\u0026quot;\n    ExpiresByType application/x-javascript \u0026quot;access plus 1 month\u0026quot;\n    ExpiresByType application/x-shockwave-flash \u0026quot;access plus 1 month\u0026quot;\n    ExpiresByType image/x-icon \u0026quot;access plus 1 year\u0026quot;\n    ExpiresByType text/html \u0026quot;access plus 300 seconds\u0026quot;\n    \n    # Default expiration\n    ExpiresDefault \u0026quot;access plus 1 day\u0026quot;\n\u0026lt;/IfModule\u0026gt;\n\n# Compression\n\u0026lt;IfModule mod_deflate.c\u0026gt;\n    # Enable compression for text files\n    \u0026lt;Location /\u0026gt;\n        SetOutputFilter DEFLATE\n        \n        # Don\u0026#039;t compress images or binaries\n        SetEnvIfNoCase Request_URI \\\n            \\.(?:gif|jpe?g|png|webp)$ no-gzip dont-vary\n        SetEnvIfNoCase Request_URI \\\n            \\.(?:exe|t?gz|zip|bz2|sit|rar|pdf)$ no-gzip dont-vary\n            \n        # Include file types to compress\n        AddOutputFilterByType DEFLATE text/html text/plain text/xml text/css text/javascript\n        AddOutputFilterByType DEFLATE application/javascript application/json application/xml application/xhtml+xml application/rss+xml\n    \u0026lt;/Location\u0026gt;\n\u0026lt;/IfModule\u0026gt;\nEOF\n\n# Create cache directory\nsudo mkdir -p /var/cache/apache2/mod_cache_disk\nsudo chown -R www-data:www-data /var/cache/apache2  # Ubuntu/Debian\nsudo chown -R apache:apache /var/cache/apache2      # RHEL/CentOS\n\nsudo a2enconf caching\nsudo systemctl reload apache2\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"cross-platform-verification\" class=\"mobile-header\"\u003eCross-Platform Verification\u003c/h2\u003e\n\u003ch3 id=\"service-management-all-distributions\" class=\"mobile-header\"\u003eService Management (All Distributions)\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003eüìã\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Check which init system is in use\nif command -v systemctl \u0026amp;\u0026gt; /dev/null; then\n    echo \u0026quot;Using systemd\u0026quot;\n    \n    # SystemD commands\n    sudo systemctl status apache2    # Ubuntu/Debian\n    sudo systemctl status httpd      # RHEL/CentOS\n    sudo systemctl restart apache2\n    sudo systemctl reload apache2\n    \nelif command -v service \u0026amp;\u0026gt; /dev/null; then\n    echo \u0026quot;Using SysV init\u0026quot;\n    \n    # Traditional service commands\n    sudo service apache2 status\n    sudo service apache2 restart\n    sudo service apache2 reload\n    \nelif command -v rc-service \u0026amp;\u0026gt; /dev/null; then\n    echo \u0026quot;Using OpenRC (Alpine)\u0026quot;\n    \n    # OpenRC commands\n    sudo rc-service apache2 status\n    sudo rc-service apache2 restart\nfi\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"configuration-testing\" class=\"mobile-header\"\u003eConfiguration Testing\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003eüìã\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Test configuration syntax (distribution-aware)\nif [ -f /etc/apache2/apache2.conf ]; then\n    # Ubuntu/Debian\n    sudo apache2ctl configtest\n    sudo apache2ctl -S  # Show virtual hosts\n    sudo apache2ctl -M  # Show loaded modules\nelif [ -f /etc/httpd/conf/httpd.conf ]; then\n    # RHEL/CentOS\n    sudo httpd -t\n    sudo httpd -S\n    sudo httpd -M\nfi\n\n# Show version and build info\napache2ctl -v  # Ubuntu/Debian\nhttpd -v       # RHEL/CentOS\n\n# Show all configuration\napache2ctl -T  # Ubuntu/Debian\nhttpd -T       # RHEL/CentOS\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"log-analysis-and-monitoring\" class=\"mobile-header\"\u003eLog Analysis and Monitoring\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003eüìã\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Monitor Apache logs (cross-platform)\n# Ubuntu/Debian paths\nsudo tail -f /var/log/apache2/access.log\nsudo tail -f /var/log/apache2/error.log\n\n# RHEL/CentOS paths  \nsudo tail -f /var/log/httpd/access_log\nsudo tail -f /var/log/httpd/error_log\n\n# Real-time connection monitoring\nwatch \u0026quot;netstat -an | grep :80 | grep ESTABLISHED | wc -l\u0026quot;\n\n# Monitor process performance\nhtop -p $(pgrep apache2 || pgrep httpd | head -5 | tr \u0026#039;\\n\u0026#039; \u0026#039;,\u0026#039; | sed \u0026#039;s/,$//\u0026#039;)\n\n# Check virtual host access\nsudo grep \u0026quot;GET\\|POST\u0026quot; /var/log/apache2/access.log | tail -20  # Ubuntu/Debian\nsudo grep \u0026quot;GET\\|POST\u0026quot; /var/log/httpd/access_log | tail -20    # RHEL/CentOS\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"cross-platform-troubleshooting\" class=\"mobile-header\"\u003eCross-Platform Troubleshooting\u003c/h2\u003e\n\u003ch3 id=\"common-issues-and-solutions\" class=\"mobile-header\"\u003eCommon Issues and Solutions\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003eüìã\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Check which user Apache runs as\nps aux | grep -E \u0026quot;(apache2|httpd)\u0026quot; | grep -v grep\n\n# Permission issues (distribution-aware)\n# Ubuntu/Debian\nsudo chown -R www-data:www-data /var/www/html\nsudo chmod -R 755 /var/www/html\n\n# RHEL/CentOS\nsudo chown -R apache:apache /var/www/html\nsudo chmod -R 755 /var/www/html\n\n# Check configuration file locations\nif [ -d /etc/apache2 ]; then\n    echo \u0026quot;Configuration directory: /etc/apache2\u0026quot;\n    echo \u0026quot;Main config: /etc/apache2/apache2.conf\u0026quot;\n    echo \u0026quot;Sites: /etc/apache2/sites-available/\u0026quot;\nelif [ -d /etc/httpd ]; then\n    echo \u0026quot;Configuration directory: /etc/httpd\u0026quot;\n    echo \u0026quot;Main config: /etc/httpd/conf/httpd.conf\u0026quot;\n    echo \u0026quot;Virtual hosts: /etc/httpd/conf.d/\u0026quot;\nfi\n\n# Port binding issues\nsudo lsof -i :80\nsudo netstat -tulpn | grep :80\n\n# SELinux troubleshooting (RHEL/CentOS)\nif command -v getenforce \u0026amp;\u0026gt; /dev/null; then\n    echo \u0026quot;SELinux status: $(getenforce)\u0026quot;\n    sudo ausearch -m AVC,USER_AVC -ts recent\n    sudo grep \u0026quot;denied\u0026quot; /var/log/audit/audit.log | tail -5\nfi\n\n# Check Apache error logs for issues\n# Ubuntu/Debian\nsudo tail -20 /var/log/apache2/error.log\n\n# RHEL/CentOS\nsudo tail -20 /var/log/httpd/error_log\n\n# Test specific virtual host\ncurl -H \u0026quot;Host: example.com\u0026quot; http://localhost/\n\n# Check loaded modules\napache2ctl -M | grep -E \u0026quot;(rewrite|ssl|headers)\u0026quot;  # Ubuntu/Debian\nhttpd -M | grep -E \u0026quot;(rewrite|ssl|headers)\u0026quot;        # RHEL/CentOS\n\n# Memory usage analysis\nps aux --sort=-%mem | grep -E \u0026quot;(apache2|httpd)\u0026quot; | head -10\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"debug-mode-and-advanced-troubleshooting\" class=\"mobile-header\"\u003eDebug Mode and Advanced Troubleshooting\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003eüìã\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Enable debug logging\n# Ubuntu/Debian\nsudo nano /etc/apache2/apache2.conf\n# Add: LogLevel debug\n\n# RHEL/CentOS\nsudo nano /etc/httpd/conf/httpd.conf\n# Add: LogLevel debug\n\n# Test configuration with specific user\nsudo -u www-data apache2ctl configtest  # Ubuntu/Debian\nsudo -u apache httpd -t                  # RHEL/CentOS\n\n# Check virtual host configuration\napache2ctl -S  # Ubuntu/Debian\nhttpd -S       # RHEL/CentOS\n\n# Trace requests (careful in production)\n# Add to virtual host:\nLogLevel debug\nCustomLog /var/log/apache2/trace.log \u0026quot;%h %l %u %t \\\u0026quot;%r\\\u0026quot; %\u0026gt;s %b \\\u0026quot;%{Referer}i\\\u0026quot; \\\u0026quot;%{User-agent}i\\\u0026quot; %D\u0026quot;\n\n# Monitor real-time\nsudo tail -f /var/log/apache2/trace.log\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"additional-security-tools-integration\" class=\"mobile-header\"\u003eAdditional Security Tools Integration\u003c/h2\u003e\n\u003ch3 id=\"fail2ban-configuration\" class=\"mobile-header\"\u003eFail2Ban Configuration\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003eüìã\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Install Fail2Ban\nsudo apt install -y fail2ban  # Ubuntu/Debian\nsudo yum install -y fail2ban  # RHEL/CentOS\n\n# Create Apache-specific jails\nsudo tee /etc/fail2ban/jail.d/apache.conf \u0026gt; /dev/null \u0026lt;\u0026lt;EOF\n[apache-auth]\nenabled = true\nport = http,https\nfilter = apache-auth\nlogpath = /var/log/apache2/error.log  # Ubuntu/Debian\n# logpath = /var/log/httpd/error_log  # RHEL/CentOS\nmaxretry = 6\nfindtime = 600\nbantime = 3600\n\n[apache-badbots]\nenabled = true\nport = http,https\nfilter = apache-badbots  \nlogpath = /var/log/apache2/access.log  # Ubuntu/Debian\n# logpath = /var/log/httpd/access_log  # RHEL/CentOS\nmaxretry = 2\nbantime = 86400\n\n[apache-noscript]\nenabled = true\nport = http,https\nfilter = apache-noscript\nlogpath = /var/log/apache2/access.log  # Ubuntu/Debian\n# logpath = /var/log/httpd/access_log  # RHEL/CentOS\nmaxretry = 6\nbantime = 86400\n\n[apache-overflows]\nenabled = true\nport = http,https\nfilter = apache-overflows\nlogpath = /var/log/apache2/error.log  # Ubuntu/Debian\n# logpath = /var/log/httpd/error_log  # RHEL/CentOS\nmaxretry = 2\nbantime = 86400\nEOF\n\nsudo systemctl enable --now fail2ban\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"log-analysis-and-monitoring\" class=\"mobile-header\"\u003eLog Analysis and Monitoring\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003eüìã\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Install GoAccess for real-time log analysis\n# Ubuntu/Debian\nsudo apt install -y goaccess\n\n# RHEL/CentOS\nsudo yum install -y goaccess\n\n# Analyze logs in real-time\n# Ubuntu/Debian\nsudo goaccess /var/log/apache2/access.log -c\n\n# RHEL/CentOS\nsudo goaccess /var/log/httpd/access_log -c\n\n# Generate HTML report\nsudo goaccess /var/log/apache2/access.log -o /var/www/html/stats.html --log-format=COMBINED --real-time-html\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"backup-and-maintenance\" class=\"mobile-header\"\u003eBackup and Maintenance\u003c/h2\u003e\n\u003ch3 id=\"automated-backup-script\" class=\"mobile-header\"\u003eAutomated Backup Script\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003eüìã\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003esudo tee /usr/local/bin/apache-backup.sh \u0026gt; /dev/null \u0026lt;\u0026lt;\u0026#039;EOF\u0026#039;\n#!/bin/bash\nBACKUP_DIR=\u0026quot;/backup/apache\u0026quot;\nDATE=$(date +%Y%m%d_%H%M%S)\n\nmkdir -p ${BACKUP_DIR}/{config,logs,sites}\n\n# Detect distribution and set paths\nif [ -d /etc/apache2 ]; then\n    # Ubuntu/Debian\n    CONFIG_DIR=\u0026quot;/etc/apache2\u0026quot;\n    LOG_DIR=\u0026quot;/var/log/apache2\u0026quot;\n    SERVICE_NAME=\u0026quot;apache2\u0026quot;\nelif [ -d /etc/httpd ]; then\n    # RHEL/CentOS\n    CONFIG_DIR=\u0026quot;/etc/httpd\u0026quot;\n    LOG_DIR=\u0026quot;/var/log/httpd\u0026quot;  \n    SERVICE_NAME=\u0026quot;httpd\u0026quot;\nfi\n\n# Backup configuration\ntar -czf ${BACKUP_DIR}/config/apache-config-${DATE}.tar.gz -C / ${CONFIG_DIR#/}\n\n# Backup website files\ntar -czf ${BACKUP_DIR}/sites/apache-sites-${DATE}.tar.gz -C /var/www .\n\n# Backup recent logs (last 7 days)\nfind ${LOG_DIR} -name \u0026quot;*.log\u0026quot; -mtime -7 -exec tar -czf ${BACKUP_DIR}/logs/apache-logs-${DATE}.tar.gz {} +\n\n# Keep only last 7 backups\nfind ${BACKUP_DIR} -name \u0026quot;apache-*\u0026quot; -type f -mtime +7 -delete\n\necho \u0026quot;Apache backup completed: ${DATE}\u0026quot;\nEOF\n\nsudo chmod +x /usr/local/bin/apache-backup.sh\n\n# Schedule daily backup\necho \u0026quot;0 2 * * * root /usr/local/bin/apache-backup.sh\u0026quot; | sudo tee -a /etc/crontab\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003cp class=\"mobile-paragraph\"\u003eThis updated Apache guide now includes:\u003c/p\u003e\n\u003cli class=\"mobile-list-item\"\u003e‚úÖ \u003cstrong\u003eComplete cross-platform support\u003c/strong\u003e (Ubuntu, Debian, RHEL, CentOS, Rocky, Fedora, Arch, openSUSE, Alpine)\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003e‚úÖ \u003cstrong\u003e2024 security best practices\u003c/strong\u003e (modern SSL/TLS, security headers, ModSecurity WAF)\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003e‚úÖ \u003cstrong\u003ePerformance optimization\u003c/strong\u003e (MPM tuning, system optimization, caching)  \u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003e‚úÖ \u003cstrong\u003eAdvanced configurations\u003c/strong\u003e (virtual hosts, SSL certificates, compression)\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003e‚úÖ \u003cstrong\u003eComprehensive troubleshooting\u003c/strong\u003e (SELinux, cross-platform debugging)\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003e‚úÖ \u003cstrong\u003eSecurity tools integration\u003c/strong\u003e (Fail2Ban, log analysis, monitoring)\u003c/li\u003e\n\u003cp class=\"mobile-paragraph\"\u003eShould I continue updating the other guides with this same comprehensive approach?\u003c/p\u003e","readTime":"18 min","wordCount":3528,"lastBuilt":"2025-09-14T01:15:36.008Z"},{"name":"caddy","displayName":"Caddy","slug":"caddy","description":"Repo for caddy","category":"web-server","language":null,"stars":0,"forks":0,"topics":[],"githubUrl":"https://github.com/howtomgr/caddy","updatedAt":"2025-09-08T03:05:30Z","createdAt":"2025-09-08T03:05:19Z","readmeRaw":"## üëã Welcome to caddy üöÄ  \n\ncaddy README  \n  \n  \n## Author  \n\nü§ñ casjay: [Github](https://github.com/casjay) ü§ñ  \n","readmeHtml":"\u003ch2 id=\"welcome-to-caddy\" class=\"mobile-header\"\u003eüëã Welcome to caddy üöÄ  \u003c/h2\u003e\n\u003cp class=\"mobile-paragraph\"\u003ecaddy README  \u003c/p\u003e\n\u003ch2 id=\"author\" class=\"mobile-header\"\u003eAuthor  \u003c/h2\u003e\n\u003cp class=\"mobile-paragraph\"\u003eü§ñ casjay: \u003ca href=\"https://github.com/casjay\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\"\u003eGithub\u003c/a\u003e ü§ñ  \u003c/p\u003e","readTime":"1 min","wordCount":15,"lastBuilt":"2025-09-14T01:15:35.724Z"},{"name":"haproxy","displayName":"Haproxy","slug":"haproxy","description":"Repo for haproxy","category":"web-server","language":null,"stars":0,"forks":0,"topics":[],"githubUrl":"https://github.com/howtomgr/haproxy","updatedAt":"2025-09-08T03:08:33Z","createdAt":"2025-09-08T03:08:23Z","readmeRaw":"# HAProxy Installation Guide\n\nHigh-performance TCP/HTTP load balancer and reverse proxy. Essential for distributing traffic across multiple backend servers.\n\n## Prerequisites\n\n- Linux system (Ubuntu/Debian, RHEL/CentOS, or compatible)\n- Root or sudo access\n- Multiple backend servers to load balance (optional for testing)\n\n## Installation\n\n### Ubuntu/Debian\n```bash\n# Update package list\nsudo apt update\n\n# Install HAProxy\nsudo apt install -y haproxy\n\n# Enable and start HAProxy\nsudo systemctl enable --now haproxy\n```\n\n### RHEL/CentOS/Rocky Linux\n```bash\n# Install EPEL repository\nsudo yum install -y epel-release\n\n# Install HAProxy\nsudo yum install -y haproxy\n\n# Enable and start HAProxy\nsudo systemctl enable --now haproxy\n```\n\n### From Source (Latest Version)\n```bash\n# Install build dependencies\nsudo apt install -y build-essential libssl-dev zlib1g-dev libpcre3-dev\n\n# Download and compile HAProxy\ncd /tmp\nwget https://www.haproxy.org/download/2.8/src/haproxy-2.8.0.tar.gz\ntar xzf haproxy-2.8.0.tar.gz\ncd haproxy-2.8.0\n\n# Compile with SSL support\nmake TARGET=linux-glibc USE_OPENSSL=1 USE_ZLIB=1 USE_PCRE=1\nsudo make install\n\n# Create systemd service\nsudo tee /etc/systemd/system/haproxy.service \u003e /dev/null \u003c\u003cEOF\n[Unit]\nDescription=HAProxy Load Balancer\nAfter=network.target\n\n[Service]\nExecStart=/usr/local/sbin/haproxy -f /etc/haproxy/haproxy.cfg -p /run/haproxy.pid\nExecReload=/bin/kill -USR2 \\$MAINPID\nKillMode=mixed\nRestart=always\nType=notify\n\n[Install]\nWantedBy=multi-user.target\nEOF\n\nsudo systemctl daemon-reload\nsudo systemctl enable --now haproxy\n```\n\n## Configuration\n\n### Basic Load Balancer Configuration\n```bash\n# Backup original configuration\nsudo cp /etc/haproxy/haproxy.cfg /etc/haproxy/haproxy.cfg.backup\n\n# Create basic load balancer configuration\nsudo tee /etc/haproxy/haproxy.cfg \u003e /dev/null \u003c\u003cEOF\nglobal\n    log stdout local0\n    chroot /var/lib/haproxy\n    stats socket /run/haproxy/admin.sock mode 660 level admin\n    stats timeout 30s\n    user haproxy\n    group haproxy\n    daemon\n\ndefaults\n    mode http\n    log global\n    option httplog\n    option dontlognull\n    option log-health-checks\n    timeout connect 5000\n    timeout client 50000\n    timeout server 50000\n    errorfile 400 /etc/haproxy/errors/400.http\n    errorfile 403 /etc/haproxy/errors/403.http\n    errorfile 408 /etc/haproxy/errors/408.http\n    errorfile 500 /etc/haproxy/errors/500.http\n    errorfile 502 /etc/haproxy/errors/502.http\n    errorfile 503 /etc/haproxy/errors/503.http\n    errorfile 504 /etc/haproxy/errors/504.http\n\n# Frontend configuration\nfrontend web_frontend\n    bind *:80\n    option httpclose\n    option forwardfor\n    default_backend web_servers\n\n# Backend configuration\nbackend web_servers\n    balance roundrobin\n    option httpchk GET /health\n    server web1 192.168.1.10:8080 check\n    server web2 192.168.1.11:8080 check\n    server web3 192.168.1.12:8080 check backup\n\n# Statistics page\nlisten stats\n    bind *:8404\n    stats enable\n    stats uri /stats\n    stats refresh 30s\n    stats admin if TRUE\nEOF\n\n# Test configuration\nsudo haproxy -c -f /etc/haproxy/haproxy.cfg\n\n# Restart HAProxy\nsudo systemctl restart haproxy\n```\n\n### SSL Termination Configuration\n```bash\n# Create SSL certificate (self-signed for testing)\nsudo openssl req -x509 -nodes -days 365 -newkey rsa:2048 \\\n    -keyout /etc/haproxy/server.key \\\n    -out /etc/haproxy/server.crt \\\n    -subj \"/C=US/ST=State/L=City/O=Organization/CN=example.com\"\n\n# Combine certificate and key\nsudo cat /etc/haproxy/server.crt /etc/haproxy/server.key | sudo tee /etc/haproxy/server.pem\n\n# Update HAProxy configuration for SSL\nsudo tee -a /etc/haproxy/haproxy.cfg \u003e /dev/null \u003c\u003cEOF\n\n# HTTPS Frontend\nfrontend https_frontend\n    bind *:443 ssl crt /etc/haproxy/server.pem\n    redirect scheme https unless { ssl_fc }\n    default_backend web_servers\n\n# HTTP to HTTPS redirect\nfrontend http_frontend\n    bind *:80\n    redirect scheme https code 301\nEOF\n\nsudo systemctl restart haproxy\n```\n\n### Advanced Load Balancing Configuration\n```bash\n# Advanced configuration with multiple backends\nsudo tee /etc/haproxy/haproxy.cfg \u003e /dev/null \u003c\u003cEOF\nglobal\n    log stdout local0\n    chroot /var/lib/haproxy\n    stats socket /run/haproxy/admin.sock mode 660 level admin\n    stats timeout 30s\n    user haproxy\n    group haproxy\n    daemon\n    \n    # SSL configuration\n    ssl-default-bind-ciphers ECDH+AESGCM:DH+AESGCM:ECDH+AES256:DH+AES256:ECDH+AES128:DH+AES:RSA+AESGCM:RSA+AES:!aNULL:!MD5:!DSS\n    ssl-default-bind-options no-sslv3\n\ndefaults\n    mode http\n    log global\n    option httplog\n    option dontlognull\n    option log-health-checks\n    option forwardfor\n    option http-server-close\n    timeout connect 5s\n    timeout client 1m\n    timeout server 1m\n    timeout http-keep-alive 10s\n    timeout check 10s\n    maxconn 3000\n\n# Frontend for web traffic\nfrontend web_frontend\n    bind *:80\n    bind *:443 ssl crt /etc/haproxy/certs/\n    \n    # ACLs for routing\n    acl is_api path_beg /api/\n    acl is_admin path_beg /admin/\n    acl is_static path_beg /static/ /css/ /js/ /images/\n    \n    # Routing rules\n    use_backend api_servers if is_api\n    use_backend admin_servers if is_admin\n    use_backend static_servers if is_static\n    default_backend web_servers\n\n# Web servers backend\nbackend web_servers\n    balance leastconn\n    option httpchk GET /health\n    http-check expect status 200\n    server web1 192.168.1.10:8080 check weight 100\n    server web2 192.168.1.11:8080 check weight 100\n    server web3 192.168.1.12:8080 check weight 50 backup\n\n# API servers backend\nbackend api_servers\n    balance roundrobin\n    option httpchk GET /api/health\n    http-check expect string \"OK\"\n    server api1 192.168.1.20:3000 check\n    server api2 192.168.1.21:3000 check\n\n# Admin backend (restricted)\nbackend admin_servers\n    balance source\n    option httpchk GET /admin/health\n    server admin1 192.168.1.30:9000 check\n\n# Static content backend\nbackend static_servers\n    balance roundrobin\n    option httpchk GET /static/health.txt\n    server static1 192.168.1.40:8080 check\n    server static2 192.168.1.41:8080 check\n\n# Stats interface\nlisten stats\n    bind *:8404\n    stats enable\n    stats uri /\n    stats refresh 30s\n    stats admin if TRUE\n    stats auth admin:secure_password\nEOF\n```\n\n### Database Load Balancing (TCP Mode)\n```bash\n# MySQL/PostgreSQL load balancing\nsudo tee -a /etc/haproxy/haproxy.cfg \u003e /dev/null \u003c\u003cEOF\n\n# MySQL Frontend\nlisten mysql_frontend\n    bind *:3306\n    mode tcp\n    option mysql-check user haproxy_check\n    balance leastconn\n    server mysql1 192.168.1.50:3306 check\n    server mysql2 192.168.1.51:3306 check backup\n\n# PostgreSQL Frontend  \nlisten postgresql_frontend\n    bind *:5432\n    mode tcp\n    option pgsql-check user haproxy_check\n    balance roundrobin\n    server postgres1 192.168.1.60:5432 check\n    server postgres2 192.168.1.61:5432 check\nEOF\n```\n\n## Firewall Configuration\n\n```bash\n# UFW (Ubuntu/Debian)\nsudo ufw allow 80/tcp\nsudo ufw allow 443/tcp\nsudo ufw allow 8404/tcp  # Stats interface\nsudo ufw enable\n\n# Firewalld (RHEL/CentOS)\nsudo firewall-cmd --permanent --add-port=80/tcp\nsudo firewall-cmd --permanent --add-port=443/tcp\nsudo firewall-cmd --permanent --add-port=8404/tcp\nsudo firewall-cmd --reload\n```\n\n## Verification\n\n```bash\n# Check HAProxy status\nsudo systemctl status haproxy\n\n# Test configuration syntax\nsudo haproxy -c -f /etc/haproxy/haproxy.cfg\n\n# Check listening ports\nsudo netstat -tulpn | grep haproxy\n\n# Test load balancing\nfor i in {1..10}; do curl -s http://localhost/ | grep server; done\n\n# View statistics\ncurl http://localhost:8404/stats\n\n# Check backend server health\necho \"show stat\" | sudo socat stdio /run/haproxy/admin.sock\n\n# View real-time logs\nsudo journalctl -u haproxy -f\n```\n\n## Monitoring and Management\n\n```bash\n# HAProxy runtime commands via socket\necho \"help\" | sudo socat stdio /run/haproxy/admin.sock\n\n# Disable/Enable server\necho \"disable server web_servers/web1\" | sudo socat stdio /run/haproxy/admin.sock\necho \"enable server web_servers/web1\" | sudo socat stdio /run/haproxy/admin.sock\n\n# Check server weights\necho \"get weight web_servers/web1\" | sudo socat stdio /run/haproxy/admin.sock\n\n# Set server weight\necho \"set weight web_servers/web1 50\" | sudo socat stdio /run/haproxy/admin.sock\n\n# Show current sessions\necho \"show sess\" | sudo socat stdio /run/haproxy/admin.sock\n```\n\n## Performance Tuning\n\n```bash\n# System-level optimizations\necho \"net.ipv4.ip_local_port_range = 1024 65535\" | sudo tee -a /etc/sysctl.conf\necho \"net.core.somaxconn = 65535\" | sudo tee -a /etc/sysctl.conf\necho \"net.core.netdev_max_backlog = 30000\" | sudo tee -a /etc/sysctl.conf\nsudo sysctl -p\n\n# HAProxy performance configuration\nsudo tee -a /etc/haproxy/haproxy.cfg \u003e /dev/null \u003c\u003cEOF\n\nglobal\n    # Performance tuning\n    maxconn 40000\n    nbproc 1\n    nbthread 4\n    cpu-map auto:1/1-4 0-3\n    \ndefaults\n    # Connection limits\n    maxconn 8000\n    \n    # Timeouts\n    timeout connect 3s\n    timeout client 25s\n    timeout server 25s\n    timeout tunnel 3600s\n    timeout http-keep-alive 1s\n    timeout http-request 15s\n    timeout queue 30s\n    timeout tarpit 60s\n    \n    # Compression\n    compression algo gzip\n    compression type text/html text/plain text/css text/javascript application/javascript\nEOF\n```\n\n## Health Checks\n\n```bash\n# HTTP health check examples\nbackend web_servers\n    option httpchk GET /health\n    http-check expect status 200\n    http-check expect string \"OK\"\n    \n    # Advanced health check\n    option httpchk GET /health HTTP/1.1\\r\\nHost:\\ example.com\n    http-check expect rstatus ^2[0-9][0-9]\n    \n    server web1 192.168.1.10:8080 check inter 2000 rise 2 fall 3\n    server web2 192.168.1.11:8080 check inter 2000 rise 2 fall 3\n\n# TCP health check\nbackend database_servers\n    mode tcp\n    option tcp-check\n    tcp-check connect\n    tcp-check send-binary 0a  # MySQL ping\n    tcp-check expect binary 0a\n    \n    server db1 192.168.1.20:3306 check\n    server db2 192.168.1.21:3306 check\n```\n\n## Troubleshooting\n\n```bash\n# Check HAProxy process\nps aux | grep haproxy\n\n# Verify configuration file\nsudo haproxy -c -V -f /etc/haproxy/haproxy.cfg\n\n# Check socket permissions\nls -la /run/haproxy/admin.sock\n\n# Test backend connectivity\nfor server in 192.168.1.10 192.168.1.11; do\n    nc -zv $server 8080\ndone\n\n# Monitor connections\nss -tuln | grep :80\n\n# Debug mode (don't run in production)\nsudo haproxy -f /etc/haproxy/haproxy.cfg -d\n```\n\n## Additional Resources\n\n- [Official Documentation](https://docs.haproxy.org/)\n- [HAProxy Configuration Manual](https://cbonte.github.io/haproxy-dconv/)\n- [Best Practices Guide](https://www.haproxy.com/documentation/hapee/latest/configuration/best-practices/)\n- [Performance Tuning](https://www.haproxy.com/blog/haproxy-performance-tuning/)\n\n---\n\n**Note:** This guide is part of the [HowToMgr](https://howtomgr.github.io) collection.","readmeHtml":"\u003ch1 id=\"haproxy-installation-guide\" class=\"mobile-header\"\u003eHAProxy Installation Guide\u003c/h1\u003e\n\u003cp class=\"mobile-paragraph\"\u003eHigh-performance TCP/HTTP load balancer and reverse proxy. Essential for distributing traffic across multiple backend servers.\u003c/p\u003e\n\u003ch2 id=\"prerequisites\" class=\"mobile-header\"\u003ePrerequisites\u003c/h2\u003e\n\u003cli class=\"mobile-list-item\"\u003eLinux system (Ubuntu/Debian, RHEL/CentOS, or compatible)\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eRoot or sudo access\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eMultiple backend servers to load balance (optional for testing)\u003c/li\u003e\n\u003ch2 id=\"installation\" class=\"mobile-header\"\u003eInstallation\u003c/h2\u003e\n\u003ch3 id=\"ubuntudebian\" class=\"mobile-header\"\u003eUbuntu/Debian\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003eüìã\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Update package list\nsudo apt update\n\n# Install HAProxy\nsudo apt install -y haproxy\n\n# Enable and start HAProxy\nsudo systemctl enable --now haproxy\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"rhelcentosrocky-linux\" class=\"mobile-header\"\u003eRHEL/CentOS/Rocky Linux\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003eüìã\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Install EPEL repository\nsudo yum install -y epel-release\n\n# Install HAProxy\nsudo yum install -y haproxy\n\n# Enable and start HAProxy\nsudo systemctl enable --now haproxy\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"from-source-latest-version\" class=\"mobile-header\"\u003eFrom Source (Latest Version)\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003eüìã\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Install build dependencies\nsudo apt install -y build-essential libssl-dev zlib1g-dev libpcre3-dev\n\n# Download and compile HAProxy\ncd /tmp\nwget https://www.haproxy.org/download/2.8/src/haproxy-2.8.0.tar.gz\ntar xzf haproxy-2.8.0.tar.gz\ncd haproxy-2.8.0\n\n# Compile with SSL support\nmake TARGET=linux-glibc USE_OPENSSL=1 USE_ZLIB=1 USE_PCRE=1\nsudo make install\n\n# Create systemd service\nsudo tee /etc/systemd/system/haproxy.service \u0026gt; /dev/null \u0026lt;\u0026lt;EOF\n[Unit]\nDescription=HAProxy Load Balancer\nAfter=network.target\n\n[Service]\nExecStart=/usr/local/sbin/haproxy -f /etc/haproxy/haproxy.cfg -p /run/haproxy.pid\nExecReload=/bin/kill -USR2 \\$MAINPID\nKillMode=mixed\nRestart=always\nType=notify\n\n[Install]\nWantedBy=multi-user.target\nEOF\n\nsudo systemctl daemon-reload\nsudo systemctl enable --now haproxy\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"configuration\" class=\"mobile-header\"\u003eConfiguration\u003c/h2\u003e\n\u003ch3 id=\"basic-load-balancer-configuration\" class=\"mobile-header\"\u003eBasic Load Balancer Configuration\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003eüìã\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Backup original configuration\nsudo cp /etc/haproxy/haproxy.cfg /etc/haproxy/haproxy.cfg.backup\n\n# Create basic load balancer configuration\nsudo tee /etc/haproxy/haproxy.cfg \u0026gt; /dev/null \u0026lt;\u0026lt;EOF\nglobal\n    log stdout local0\n    chroot /var/lib/haproxy\n    stats socket /run/haproxy/admin.sock mode 660 level admin\n    stats timeout 30s\n    user haproxy\n    group haproxy\n    daemon\n\ndefaults\n    mode http\n    log global\n    option httplog\n    option dontlognull\n    option log-health-checks\n    timeout connect 5000\n    timeout client 50000\n    timeout server 50000\n    errorfile 400 /etc/haproxy/errors/400.http\n    errorfile 403 /etc/haproxy/errors/403.http\n    errorfile 408 /etc/haproxy/errors/408.http\n    errorfile 500 /etc/haproxy/errors/500.http\n    errorfile 502 /etc/haproxy/errors/502.http\n    errorfile 503 /etc/haproxy/errors/503.http\n    errorfile 504 /etc/haproxy/errors/504.http\n\n# Frontend configuration\nfrontend web_frontend\n    bind *:80\n    option httpclose\n    option forwardfor\n    default_backend web_servers\n\n# Backend configuration\nbackend web_servers\n    balance roundrobin\n    option httpchk GET /health\n    server web1 192.168.1.10:8080 check\n    server web2 192.168.1.11:8080 check\n    server web3 192.168.1.12:8080 check backup\n\n# Statistics page\nlisten stats\n    bind *:8404\n    stats enable\n    stats uri /stats\n    stats refresh 30s\n    stats admin if TRUE\nEOF\n\n# Test configuration\nsudo haproxy -c -f /etc/haproxy/haproxy.cfg\n\n# Restart HAProxy\nsudo systemctl restart haproxy\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"ssl-termination-configuration\" class=\"mobile-header\"\u003eSSL Termination Configuration\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003eüìã\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Create SSL certificate (self-signed for testing)\nsudo openssl req -x509 -nodes -days 365 -newkey rsa:2048 \\\n    -keyout /etc/haproxy/server.key \\\n    -out /etc/haproxy/server.crt \\\n    -subj \u0026quot;/C=US/ST=State/L=City/O=Organization/CN=example.com\u0026quot;\n\n# Combine certificate and key\nsudo cat /etc/haproxy/server.crt /etc/haproxy/server.key | sudo tee /etc/haproxy/server.pem\n\n# Update HAProxy configuration for SSL\nsudo tee -a /etc/haproxy/haproxy.cfg \u0026gt; /dev/null \u0026lt;\u0026lt;EOF\n\n# HTTPS Frontend\nfrontend https_frontend\n    bind *:443 ssl crt /etc/haproxy/server.pem\n    redirect scheme https unless { ssl_fc }\n    default_backend web_servers\n\n# HTTP to HTTPS redirect\nfrontend http_frontend\n    bind *:80\n    redirect scheme https code 301\nEOF\n\nsudo systemctl restart haproxy\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"advanced-load-balancing-configuration\" class=\"mobile-header\"\u003eAdvanced Load Balancing Configuration\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003eüìã\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Advanced configuration with multiple backends\nsudo tee /etc/haproxy/haproxy.cfg \u0026gt; /dev/null \u0026lt;\u0026lt;EOF\nglobal\n    log stdout local0\n    chroot /var/lib/haproxy\n    stats socket /run/haproxy/admin.sock mode 660 level admin\n    stats timeout 30s\n    user haproxy\n    group haproxy\n    daemon\n    \n    # SSL configuration\n    ssl-default-bind-ciphers ECDH+AESGCM:DH+AESGCM:ECDH+AES256:DH+AES256:ECDH+AES128:DH+AES:RSA+AESGCM:RSA+AES:!aNULL:!MD5:!DSS\n    ssl-default-bind-options no-sslv3\n\ndefaults\n    mode http\n    log global\n    option httplog\n    option dontlognull\n    option log-health-checks\n    option forwardfor\n    option http-server-close\n    timeout connect 5s\n    timeout client 1m\n    timeout server 1m\n    timeout http-keep-alive 10s\n    timeout check 10s\n    maxconn 3000\n\n# Frontend for web traffic\nfrontend web_frontend\n    bind *:80\n    bind *:443 ssl crt /etc/haproxy/certs/\n    \n    # ACLs for routing\n    acl is_api path_beg /api/\n    acl is_admin path_beg /admin/\n    acl is_static path_beg /static/ /css/ /js/ /images/\n    \n    # Routing rules\n    use_backend api_servers if is_api\n    use_backend admin_servers if is_admin\n    use_backend static_servers if is_static\n    default_backend web_servers\n\n# Web servers backend\nbackend web_servers\n    balance leastconn\n    option httpchk GET /health\n    http-check expect status 200\n    server web1 192.168.1.10:8080 check weight 100\n    server web2 192.168.1.11:8080 check weight 100\n    server web3 192.168.1.12:8080 check weight 50 backup\n\n# API servers backend\nbackend api_servers\n    balance roundrobin\n    option httpchk GET /api/health\n    http-check expect string \u0026quot;OK\u0026quot;\n    server api1 192.168.1.20:3000 check\n    server api2 192.168.1.21:3000 check\n\n# Admin backend (restricted)\nbackend admin_servers\n    balance source\n    option httpchk GET /admin/health\n    server admin1 192.168.1.30:9000 check\n\n# Static content backend\nbackend static_servers\n    balance roundrobin\n    option httpchk GET /static/health.txt\n    server static1 192.168.1.40:8080 check\n    server static2 192.168.1.41:8080 check\n\n# Stats interface\nlisten stats\n    bind *:8404\n    stats enable\n    stats uri /\n    stats refresh 30s\n    stats admin if TRUE\n    stats auth admin:secure_password\nEOF\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"database-load-balancing-tcp-mode\" class=\"mobile-header\"\u003eDatabase Load Balancing (TCP Mode)\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003eüìã\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# MySQL/PostgreSQL load balancing\nsudo tee -a /etc/haproxy/haproxy.cfg \u0026gt; /dev/null \u0026lt;\u0026lt;EOF\n\n# MySQL Frontend\nlisten mysql_frontend\n    bind *:3306\n    mode tcp\n    option mysql-check user haproxy_check\n    balance leastconn\n    server mysql1 192.168.1.50:3306 check\n    server mysql2 192.168.1.51:3306 check backup\n\n# PostgreSQL Frontend  \nlisten postgresql_frontend\n    bind *:5432\n    mode tcp\n    option pgsql-check user haproxy_check\n    balance roundrobin\n    server postgres1 192.168.1.60:5432 check\n    server postgres2 192.168.1.61:5432 check\nEOF\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"firewall-configuration\" class=\"mobile-header\"\u003eFirewall Configuration\u003c/h2\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003eüìã\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# UFW (Ubuntu/Debian)\nsudo ufw allow 80/tcp\nsudo ufw allow 443/tcp\nsudo ufw allow 8404/tcp  # Stats interface\nsudo ufw enable\n\n# Firewalld (RHEL/CentOS)\nsudo firewall-cmd --permanent --add-port=80/tcp\nsudo firewall-cmd --permanent --add-port=443/tcp\nsudo firewall-cmd --permanent --add-port=8404/tcp\nsudo firewall-cmd --reload\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"verification\" class=\"mobile-header\"\u003eVerification\u003c/h2\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003eüìã\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Check HAProxy status\nsudo systemctl status haproxy\n\n# Test configuration syntax\nsudo haproxy -c -f /etc/haproxy/haproxy.cfg\n\n# Check listening ports\nsudo netstat -tulpn | grep haproxy\n\n# Test load balancing\nfor i in {1..10}; do curl -s http://localhost/ | grep server; done\n\n# View statistics\ncurl http://localhost:8404/stats\n\n# Check backend server health\necho \u0026quot;show stat\u0026quot; | sudo socat stdio /run/haproxy/admin.sock\n\n# View real-time logs\nsudo journalctl -u haproxy -f\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"monitoring-and-management\" class=\"mobile-header\"\u003eMonitoring and Management\u003c/h2\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003eüìã\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# HAProxy runtime commands via socket\necho \u0026quot;help\u0026quot; | sudo socat stdio /run/haproxy/admin.sock\n\n# Disable/Enable server\necho \u0026quot;disable server web_servers/web1\u0026quot; | sudo socat stdio /run/haproxy/admin.sock\necho \u0026quot;enable server web_servers/web1\u0026quot; | sudo socat stdio /run/haproxy/admin.sock\n\n# Check server weights\necho \u0026quot;get weight web_servers/web1\u0026quot; | sudo socat stdio /run/haproxy/admin.sock\n\n# Set server weight\necho \u0026quot;set weight web_servers/web1 50\u0026quot; | sudo socat stdio /run/haproxy/admin.sock\n\n# Show current sessions\necho \u0026quot;show sess\u0026quot; | sudo socat stdio /run/haproxy/admin.sock\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"performance-tuning\" class=\"mobile-header\"\u003ePerformance Tuning\u003c/h2\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003eüìã\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# System-level optimizations\necho \u0026quot;net.ipv4.ip_local_port_range = 1024 65535\u0026quot; | sudo tee -a /etc/sysctl.conf\necho \u0026quot;net.core.somaxconn = 65535\u0026quot; | sudo tee -a /etc/sysctl.conf\necho \u0026quot;net.core.netdev_max_backlog = 30000\u0026quot; | sudo tee -a /etc/sysctl.conf\nsudo sysctl -p\n\n# HAProxy performance configuration\nsudo tee -a /etc/haproxy/haproxy.cfg \u0026gt; /dev/null \u0026lt;\u0026lt;EOF\n\nglobal\n    # Performance tuning\n    maxconn 40000\n    nbproc 1\n    nbthread 4\n    cpu-map auto:1/1-4 0-3\n    \ndefaults\n    # Connection limits\n    maxconn 8000\n    \n    # Timeouts\n    timeout connect 3s\n    timeout client 25s\n    timeout server 25s\n    timeout tunnel 3600s\n    timeout http-keep-alive 1s\n    timeout http-request 15s\n    timeout queue 30s\n    timeout tarpit 60s\n    \n    # Compression\n    compression algo gzip\n    compression type text/html text/plain text/css text/javascript application/javascript\nEOF\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"health-checks\" class=\"mobile-header\"\u003eHealth Checks\u003c/h2\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003eüìã\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# HTTP health check examples\nbackend web_servers\n    option httpchk GET /health\n    http-check expect status 200\n    http-check expect string \u0026quot;OK\u0026quot;\n    \n    # Advanced health check\n    option httpchk GET /health HTTP/1.1\\r\\nHost:\\ example.com\n    http-check expect rstatus ^2[0-9][0-9]\n    \n    server web1 192.168.1.10:8080 check inter 2000 rise 2 fall 3\n    server web2 192.168.1.11:8080 check inter 2000 rise 2 fall 3\n\n# TCP health check\nbackend database_servers\n    mode tcp\n    option tcp-check\n    tcp-check connect\n    tcp-check send-binary 0a  # MySQL ping\n    tcp-check expect binary 0a\n    \n    server db1 192.168.1.20:3306 check\n    server db2 192.168.1.21:3306 check\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"troubleshooting\" class=\"mobile-header\"\u003eTroubleshooting\u003c/h2\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003eüìã\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Check HAProxy process\nps aux | grep haproxy\n\n# Verify configuration file\nsudo haproxy -c -V -f /etc/haproxy/haproxy.cfg\n\n# Check socket permissions\nls -la /run/haproxy/admin.sock\n\n# Test backend connectivity\nfor server in 192.168.1.10 192.168.1.11; do\n    nc -zv $server 8080\ndone\n\n# Monitor connections\nss -tuln | grep :80\n\n# Debug mode (don\u0026#039;t run in production)\nsudo haproxy -f /etc/haproxy/haproxy.cfg -d\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"additional-resources\" class=\"mobile-header\"\u003eAdditional Resources\u003c/h2\u003e\n\u003cli class=\"mobile-list-item\"\u003e\u003ca href=\"https://docs.haproxy.org/\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\"\u003eOfficial Documentation\u003c/a\u003e\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003e\u003ca href=\"https://cbonte.github.io/haproxy-dconv/\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\"\u003eHAProxy Configuration Manual\u003c/a\u003e\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003e\u003ca href=\"https://www.haproxy.com/documentation/hapee/latest/configuration/best-practices/\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\"\u003eBest Practices Guide\u003c/a\u003e\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003e\u003ca href=\"https://www.haproxy.com/blog/haproxy-performance-tuning/\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\"\u003ePerformance Tuning\u003c/a\u003e\u003c/li\u003e\n\u003cp class=\"mobile-paragraph\"\u003e---\u003c/p\u003e\n\u003cp class=\"mobile-paragraph\"\u003e\u003cstrong\u003eNote:\u003c/strong\u003e This guide is part of the \u003ca href=\"https://howtomgr.github.io\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\"\u003eHowToMgr\u003c/a\u003e collection.\u003c/p\u003e","readTime":"7 min","wordCount":1247,"lastBuilt":"2025-09-14T01:15:33.603Z"}]},"__N_SSG":true},"page":"/[category]/[guide]","query":{"category":"web-server","guide":"apache-kafka"},"buildId":"lu0_WLQIo6fIzJ-IeQpog","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>