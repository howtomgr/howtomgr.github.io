<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes"/><meta name="theme-color" content="#bd93f9"/><link rel="icon" href="/favicon.ico"/><link rel="preconnect" href="https://fonts.googleapis.com"/><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="true"/><title class="jsx-f92e766e9414ef16">Web Servers Installation Guides - HowToMgr</title><meta name="description" content="6 web servers installation guides. High-performance web servers and reverse proxies" class="jsx-f92e766e9414ef16"/><meta name="keywords" content="installation guides, tutorials, linux, docker, kubernetes, mobile-first, responsive" class="jsx-f92e766e9414ef16"/><meta property="og:title" content="Web Servers Installation Guides - HowToMgr" class="jsx-f92e766e9414ef16"/><meta property="og:description" content="6 web servers installation guides. High-performance web servers and reverse proxies" class="jsx-f92e766e9414ef16"/><meta property="og:type" content="website" class="jsx-f92e766e9414ef16"/><meta property="og:url" content="https://howtomgr.github.io" class="jsx-f92e766e9414ef16"/><meta property="og:image" content="https://howtomgr.github.io/social-preview.png" class="jsx-f92e766e9414ef16"/><meta property="twitter:card" content="summary_large_image" class="jsx-f92e766e9414ef16"/><meta property="twitter:title" content="Web Servers Installation Guides - HowToMgr" class="jsx-f92e766e9414ef16"/><meta property="twitter:description" content="6 web servers installation guides. High-performance web servers and reverse proxies" class="jsx-f92e766e9414ef16"/><meta name="next-head-count" content="17"/><link rel="dns-prefetch" href="//api.github.com"/><link rel="dns-prefetch" href="//github.com"/><link rel="preload" href="/favicon.ico" as="image"/><meta name="application-name" content="HowToMgr"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="default"/><meta name="apple-mobile-web-app-title" content="HowToMgr"/><meta name="format-detection" content="telephone=no"/><meta name="mobile-web-app-capable" content="yes"/><noscript><style>
            .requires-js { display: none !important; }
            .no-js-message { display: block !important; }
          </style></noscript><link rel="preload" href="/_next/static/css/eec6c1c201affe77.css" as="style"/><link rel="stylesheet" href="/_next/static/css/eec6c1c201affe77.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-42372ed130431b0a.js"></script><script src="/_next/static/chunks/webpack-ee7e63bc15b31913.js" defer=""></script><script src="/_next/static/chunks/framework-2b1f7a23d657eae4.js" defer=""></script><script src="/_next/static/chunks/main-6ec3f7584970eebe.js" defer=""></script><script src="/_next/static/chunks/pages/_app-f7367f88af207b64.js" defer=""></script><script src="/_next/static/chunks/119-abfbe7c9e22798da.js" defer=""></script><script src="/_next/static/chunks/pages/%5Bcategory%5D-a09421b9c40c6469.js" defer=""></script><script src="/_next/static/Qa3FY_nUAtj8cvSxbxn7x/_buildManifest.js" defer=""></script><script src="/_next/static/Qa3FY_nUAtj8cvSxbxn7x/_ssgManifest.js" defer=""></script><style id="__jsx-fba8d10132152d7">.search-box.jsx-fba8d10132152d7{position:relative;width:100%;max-width:500px}.search-input-container.jsx-fba8d10132152d7{position:relative;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center}.search-input.jsx-fba8d10132152d7{width:100%;padding:var(--space-3)var(--space-4);padding-right:80px;border:2px solid var(--bg-surface);-webkit-border-radius:var(--border-radius-lg);-moz-border-radius:var(--border-radius-lg);border-radius:var(--border-radius-lg);background:var(--bg-primary);color:var(--text-primary);font-size:var(--font-base);-webkit-transition:var(--transition);-moz-transition:var(--transition);-o-transition:var(--transition);transition:var(--transition);min-height:48px}.search-input.jsx-fba8d10132152d7:focus{border-color:var(--accent-primary);outline:none;-webkit-box-shadow:0 0 0 3px rgba(189,147,249,.15);-moz-box-shadow:0 0 0 3px rgba(189,147,249,.15);box-shadow:0 0 0 3px rgba(189,147,249,.15)}.search-indicator.jsx-fba8d10132152d7{position:absolute;right:50px;color:var(--text-muted);pointer-events:none}.search-clear.jsx-fba8d10132152d7{position:absolute;right:var(--space-3);background:var(--bg-surface);border:none;-webkit-border-radius:50%;-moz-border-radius:50%;border-radius:50%;width:24px;height:24px;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;cursor:pointer;color:var(--text-muted);font-size:var(--font-sm)}.search-clear.jsx-fba8d10132152d7:hover{background:var(--accent-error);color:var(--bg-primary)}.search-results.jsx-fba8d10132152d7{position:absolute;top:100%;left:0;right:0;background:var(--bg-secondary);border:1px solid var(--bg-surface);-webkit-border-radius:var(--border-radius-lg);-moz-border-radius:var(--border-radius-lg);border-radius:var(--border-radius-lg);-webkit-box-shadow:var(--box-shadow-lg);-moz-box-shadow:var(--box-shadow-lg);box-shadow:var(--box-shadow-lg);max-height:400px;overflow-y:auto;z-index:var(--z-dropdown);margin-top:var(--space-2)}.search-result-item.jsx-fba8d10132152d7{display:block;padding:var(--space-4);border-bottom:1px solid var(--bg-surface);cursor:pointer;-webkit-transition:var(--transition);-moz-transition:var(--transition);-o-transition:var(--transition);transition:var(--transition);text-decoration:none;color:inherit}.search-result-item.jsx-fba8d10132152d7:last-child{border-bottom:none}.search-result-item.jsx-fba8d10132152d7:hover,.search-result-item.selected.jsx-fba8d10132152d7{background:var(--bg-surface);text-decoration:none;color:inherit}.result-header.jsx-fba8d10132152d7{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-align:start;-webkit-align-items:flex-start;-moz-box-align:start;-ms-flex-align:start;align-items:flex-start;gap:var(--space-3);margin-bottom:var(--space-2)}.result-title.jsx-fba8d10132152d7{color:var(--accent-primary);font-size:var(--font-base);font-weight:600;margin:0}.result-badges.jsx-fba8d10132152d7{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;gap:var(--space-1)}.result-category.jsx-fba8d10132152d7,.result-language.jsx-fba8d10132152d7{padding:var(--space-1)var(--space-2);-webkit-border-radius:var(--border-radius-sm);-moz-border-radius:var(--border-radius-sm);border-radius:var(--border-radius-sm);font-size:var(--font-xs);font-weight:600;text-transform:uppercase}.result-category.jsx-fba8d10132152d7{background:var(--accent-primary);color:var(--bg-primary)}.result-language.jsx-fba8d10132152d7{background:var(--accent-secondary);color:var(--bg-primary)}.result-description.jsx-fba8d10132152d7{color:var(--text-secondary);font-size:var(--font-sm);margin:0 0 var(--space-2)0;line-height:1.4}.result-meta.jsx-fba8d10132152d7{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;gap:var(--space-3);font-size:var(--font-xs);color:var(--text-muted)}.search-empty.jsx-fba8d10132152d7{padding:var(--space-6)var(--space-4);text-align:center;color:var(--text-secondary)}.empty-icon.jsx-fba8d10132152d7{font-size:var(--font-2xl);margin-bottom:var(--space-3);opacity:.5}.empty-text.jsx-fba8d10132152d7 strong.jsx-fba8d10132152d7{display:block;color:var(--text-primary);margin-bottom:var(--space-2)}.empty-text.jsx-fba8d10132152d7 p.jsx-fba8d10132152d7{margin:0;font-size:var(--font-sm)}@media(max-width:767px){.search-input.jsx-fba8d10132152d7{min-height:52px;font-size:var(--font-base)}.result-header.jsx-fba8d10132152d7{-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:start;-webkit-align-items:flex-start;-moz-box-align:start;-ms-flex-align:start;align-items:flex-start;gap:var(--space-2)}.result-badges.jsx-fba8d10132152d7{-webkit-box-ordinal-group:0;-webkit-order:-1;-moz-box-ordinal-group:0;-ms-flex-order:-1;order:-1}}</style><style id="__jsx-6e7ce48e453c7e27">.breadcrumb.jsx-6e7ce48e453c7e27{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;gap:var(--space-2);margin-bottom:var(--space-6);font-size:var(--font-sm);color:var(--text-secondary)}.breadcrumb.jsx-6e7ce48e453c7e27 a.jsx-6e7ce48e453c7e27{color:var(--accent-primary);text-decoration:none}.breadcrumb.jsx-6e7ce48e453c7e27 a.jsx-6e7ce48e453c7e27:hover{text-decoration:underline}.separator.jsx-6e7ce48e453c7e27{color:var(--text-muted)}.current.jsx-6e7ce48e453c7e27{color:var(--text-primary);font-weight:500}.category-header.jsx-6e7ce48e453c7e27{text-align:center;margin-bottom:var(--space-8);padding:var(--space-6)0;background:var(--bg-secondary);-webkit-border-radius:var(--border-radius-lg);-moz-border-radius:var(--border-radius-lg);border-radius:var(--border-radius-lg)}.category-icon.jsx-6e7ce48e453c7e27{font-size:3rem;margin-bottom:var(--space-4)}.category-title.jsx-6e7ce48e453c7e27{color:var(--accent-primary);font-size:var(--font-3xl);margin-bottom:var(--space-4)}.category-description.jsx-6e7ce48e453c7e27{color:var(--text-secondary);font-size:var(--font-lg);margin-bottom:var(--space-4);max-width:600px;margin-left:auto;margin-right:auto}.category-stats.jsx-6e7ce48e453c7e27{margin-top:var(--space-4)}.category-search.jsx-6e7ce48e453c7e27{margin-bottom:var(--space-6);display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center}.controls-section.jsx-6e7ce48e453c7e27{margin-bottom:var(--space-6);display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center}.sort-select.jsx-6e7ce48e453c7e27{padding:var(--space-2)var(--space-4);border:1px solid var(--bg-surface);-webkit-border-radius:var(--border-radius);-moz-border-radius:var(--border-radius);border-radius:var(--border-radius);background:var(--bg-primary);color:var(--text-primary);font-size:var(--font-sm)}.guides-section.jsx-6e7ce48e453c7e27{margin-bottom:var(--space-8)}.guide-card.jsx-6e7ce48e453c7e27:hover .mobile-card-title.jsx-6e7ce48e453c7e27{color:var(--accent-secondary)}.empty-state.jsx-6e7ce48e453c7e27{text-align:center;padding:var(--space-8);color:var(--text-secondary)}.empty-state.jsx-6e7ce48e453c7e27 h3.jsx-6e7ce48e453c7e27{color:var(--text-primary);margin-bottom:var(--space-4)}.loading-container.jsx-6e7ce48e453c7e27{text-align:center;padding:var(--space-8);color:var(--text-secondary)}.error-container.jsx-6e7ce48e453c7e27{text-align:center;padding:var(--space-8)}@media(max-width:767px){.category-header.jsx-6e7ce48e453c7e27{padding:var(--space-4);margin-bottom:var(--space-6)}.category-title.jsx-6e7ce48e453c7e27{font-size:var(--font-2xl)}.category-description.jsx-6e7ce48e453c7e27{font-size:var(--font-base)}.category-icon.jsx-6e7ce48e453c7e27{font-size:2.5rem}}</style><style id="__jsx-f92e766e9414ef16">.app-container.jsx-f92e766e9414ef16{min-height:100vh;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;padding-top:56px}.main-content.jsx-f92e766e9414ef16{-webkit-box-flex:1;-webkit-flex:1;-moz-box-flex:1;-ms-flex:1;flex:1;padding:var(--space-6)0}.mobile-footer.jsx-f92e766e9414ef16{background:var(--bg-secondary);border-top:1px solid var(--bg-surface);padding:var(--space-6)0;margin-top:auto}.footer-content.jsx-f92e766e9414ef16{text-align:center}.footer-links.jsx-f92e766e9414ef16{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;gap:var(--space-6);margin-bottom:var(--space-4);-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap}.footer-links.jsx-f92e766e9414ef16 a.jsx-f92e766e9414ef16{color:var(--accent-primary);text-decoration:none;font-size:var(--font-sm)}.footer-links.jsx-f92e766e9414ef16 a.jsx-f92e766e9414ef16:hover{color:var(--accent-secondary)}.footer-separator.jsx-f92e766e9414ef16{height:1px;background:var(--bg-surface);margin:var(--space-4)auto;width:200px}.footer-text.jsx-f92e766e9414ef16,.footer-tech.jsx-f92e766e9414ef16{color:var(--text-secondary);font-size:var(--font-sm);margin-bottom:var(--space-2)}.footer-disclaimer.jsx-f92e766e9414ef16{color:var(--text-muted);font-size:var(--font-xs)}.nav-links.jsx-f92e766e9414ef16{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;gap:var(--space-4)}.nav-link.jsx-f92e766e9414ef16{color:var(--text-primary);text-decoration:none;padding:var(--space-2)var(--space-3);-webkit-border-radius:var(--border-radius);-moz-border-radius:var(--border-radius);border-radius:var(--border-radius);font-size:var(--font-sm);font-weight:500;-webkit-transition:var(--transition);-moz-transition:var(--transition);-o-transition:var(--transition);transition:var(--transition);min-height:36px;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center}.nav-link.jsx-f92e766e9414ef16:hover{background:var(--bg-surface);color:var(--accent-primary);text-decoration:none}[data-theme="light"].jsx-f92e766e9414ef16 .theme-icon-dark.jsx-f92e766e9414ef16{display:none}[data-theme="light"].jsx-f92e766e9414ef16 .theme-icon-light.jsx-f92e766e9414ef16{display:inline!important}@media(max-width:767px){.main-content.jsx-f92e766e9414ef16{padding:var(--space-4)0}.footer-links.jsx-f92e766e9414ef16{gap:var(--space-4)}}</style></head><body><noscript><div class="no-js-message" style="padding:1rem;background:#ff5555;color:#f8f8f2;text-align:center;font-size:0.9rem">This site requires JavaScript to function properly. Please enable JavaScript in your browser.</div></noscript><div id="__next"><div class="jsx-f92e766e9414ef16 app-container"><a href="#main-content" class="jsx-f92e766e9414ef16 skip-link">Skip to main content</a><nav class="jsx-f92e766e9414ef16 mobile-nav"><div class="jsx-f92e766e9414ef16 mobile-nav-content"><a class="mobile-brand" href="/"><span role="img" aria-label="Books" class="jsx-f92e766e9414ef16">📚</span>HowToMgr</a><div class="jsx-f92e766e9414ef16 nav-links"><a class="nav-link" href="/all/">All</a><a class="nav-link" href="/search/">Search</a></div><button aria-label="Toggle theme" title="Switch theme" class="jsx-f92e766e9414ef16 mobile-theme-toggle touch-target"><span class="jsx-f92e766e9414ef16 theme-icon-dark">🌙</span><span style="display:none" class="jsx-f92e766e9414ef16 theme-icon-light">☀️</span></button></div></nav><main id="main-content" tabindex="-1" class="jsx-f92e766e9414ef16 main-content"><div class="jsx-f92e766e9414ef16 container"><nav aria-label="Breadcrumb" class="jsx-6e7ce48e453c7e27 breadcrumb"><a href="/">Home</a><span class="jsx-6e7ce48e453c7e27 separator">→</span><span class="jsx-6e7ce48e453c7e27 current">Web Servers</span></nav><section class="jsx-6e7ce48e453c7e27 category-header"><div style="color:#50fa7b" class="jsx-6e7ce48e453c7e27 category-icon">🌐</div><h1 class="jsx-6e7ce48e453c7e27 category-title">Web Servers</h1><p class="jsx-6e7ce48e453c7e27 category-description">High-performance web servers and reverse proxies</p><div class="jsx-6e7ce48e453c7e27 category-stats"><span class="jsx-6e7ce48e453c7e27 mobile-badge mobile-badge-primary">6<!-- --> guides available</span></div></section><section class="jsx-6e7ce48e453c7e27 category-search"><div class="jsx-fba8d10132152d7 search-box"><div class="jsx-fba8d10132152d7 search-input-container"><input type="search" placeholder="Search web servers..." autoComplete="off" aria-label="Search installation guides" class="jsx-fba8d10132152d7 search-input" value=""/><div class="jsx-fba8d10132152d7 search-indicator"><span class="jsx-fba8d10132152d7 search-icon">🔍</span></div></div></div></section><section class="jsx-6e7ce48e453c7e27 controls-section"><div class="jsx-6e7ce48e453c7e27 sort-controls"><label for="sort-select" class="jsx-6e7ce48e453c7e27 sr-only">Sort guides</label><select id="sort-select" class="jsx-6e7ce48e453c7e27 sort-select"><option value="name" class="jsx-6e7ce48e453c7e27" selected="">Name (A-Z)</option><option value="updated" class="jsx-6e7ce48e453c7e27">Recently Updated</option><option value="stars" class="jsx-6e7ce48e453c7e27">Most Popular</option></select></div></section><section class="jsx-6e7ce48e453c7e27 guides-section"><div class="jsx-6e7ce48e453c7e27 mobile-grid"><a class="mobile-card guide-card" href="/web-server/apache/"><div class="jsx-6e7ce48e453c7e27 mobile-card-header"><h3 class="jsx-6e7ce48e453c7e27 mobile-card-title">Apache</h3><p class="jsx-6e7ce48e453c7e27 mobile-card-description">Repo for apache</p></div><div class="jsx-6e7ce48e453c7e27 mobile-card-meta"><span class="jsx-6e7ce48e453c7e27 mobile-badge mobile-badge-info">24 min</span></div></a><a class="mobile-card guide-card" href="/web-server/apache-kafka/"><div class="jsx-6e7ce48e453c7e27 mobile-card-header"><h3 class="jsx-6e7ce48e453c7e27 mobile-card-title">Apache Kafka</h3><p class="jsx-6e7ce48e453c7e27 mobile-card-description">Repo for apache-kafka</p></div><div class="jsx-6e7ce48e453c7e27 mobile-card-meta"><span class="jsx-6e7ce48e453c7e27 mobile-badge mobile-badge-info">1 min</span></div></a><a class="mobile-card guide-card" href="/web-server/caddy/"><div class="jsx-6e7ce48e453c7e27 mobile-card-header"><h3 class="jsx-6e7ce48e453c7e27 mobile-card-title">Caddy</h3><p class="jsx-6e7ce48e453c7e27 mobile-card-description">Repo for caddy</p></div><div class="jsx-6e7ce48e453c7e27 mobile-card-meta"><span class="jsx-6e7ce48e453c7e27 mobile-badge mobile-badge-info">1 min</span></div></a><a class="mobile-card guide-card" href="/web-server/haproxy/"><div class="jsx-6e7ce48e453c7e27 mobile-card-header"><h3 class="jsx-6e7ce48e453c7e27 mobile-card-title">Haproxy</h3><p class="jsx-6e7ce48e453c7e27 mobile-card-description">Repo for haproxy</p></div><div class="jsx-6e7ce48e453c7e27 mobile-card-meta"><span class="jsx-6e7ce48e453c7e27 mobile-badge mobile-badge-info">29 min</span></div></a><a class="mobile-card guide-card" href="/web-server/nginx/"><div class="jsx-6e7ce48e453c7e27 mobile-card-header"><h3 class="jsx-6e7ce48e453c7e27 mobile-card-title">NGINX</h3><p class="jsx-6e7ce48e453c7e27 mobile-card-description">Repo for nginx</p></div><div class="jsx-6e7ce48e453c7e27 mobile-card-meta"><span class="jsx-6e7ce48e453c7e27 mobile-badge mobile-badge-info">15 min</span></div></a><a class="mobile-card guide-card" href="/web-server/traefik/"><div class="jsx-6e7ce48e453c7e27 mobile-card-header"><h3 class="jsx-6e7ce48e453c7e27 mobile-card-title">Traefik</h3><p class="jsx-6e7ce48e453c7e27 mobile-card-description">Repo for traefik</p></div><div class="jsx-6e7ce48e453c7e27 mobile-card-meta"><span class="jsx-6e7ce48e453c7e27 mobile-badge mobile-badge-info">1 min</span></div></a></div></section></div></main><footer class="jsx-f92e766e9414ef16 mobile-footer"><div class="jsx-f92e766e9414ef16 container"><div class="jsx-f92e766e9414ef16 footer-content"><div class="jsx-f92e766e9414ef16 footer-links"><a href="/">Home</a><a href="https://github.com/howtomgr" target="_blank" rel="noopener" class="jsx-f92e766e9414ef16">GitHub</a><a href="https://github.com/howtomgr/howtomgr.github.io" target="_blank" rel="noopener" class="jsx-f92e766e9414ef16">Source</a></div><div class="jsx-f92e766e9414ef16 footer-separator"></div><p class="jsx-f92e766e9414ef16 footer-text">© <!-- -->2025<!-- --> HowToMgr Organization. Open source installation guides.</p><p class="jsx-f92e766e9414ef16 footer-tech">Built with ❤️ using Next.js + GitHub Pages</p><p class="jsx-f92e766e9414ef16 footer-disclaimer"><small class="jsx-f92e766e9414ef16">All guides are provided as-is. Please review and test before production use.</small></p></div></div></footer></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"category":{"key":"web-server","name":"Web Servers","description":"High-performance web servers and reverse proxies","icon":"🌐","color":"#50fa7b","keywords":["nginx","apache","haproxy","traefik","caddy"]},"guides":[{"name":"apache","displayName":"Apache","slug":"apache","description":"Repo for apache","category":"web-server","language":null,"stars":0,"forks":0,"topics":[],"githubUrl":"https://github.com/howtomgr/apache","updatedAt":"2025-09-14T01:29:40Z","createdAt":"2025-09-08T03:04:47Z","readmeRaw":"# Apache HTTP Server Installation Guide\n\nApache HTTP Server is a free and open-source cross-platform web server software developed and maintained by the Apache Software Foundation. Originally based on the NCSA HTTPd server, Apache has been the most popular web server on the Internet since April 1996, serving over 40% of active websites. It serves as a FOSS alternative to commercial web servers like Microsoft IIS, NGINX Plus, or F5 BIG-IP, offering enterprise-grade performance, security, and flexibility without licensing costs.\n\n## Prerequisites\n\n- **Hardware Requirements**:\n  - CPU: 1 core minimum (2+ cores recommended for production)\n  - RAM: 512MB minimum (2GB+ recommended for production)\n  - Storage: 500MB for installation (additional space for websites and logs)\n  - Network: Stable connectivity for serving web requests\n- **Operating System**: \n  - Linux: Any modern distribution with kernel 2.6.32+\n  - macOS: 10.12+ (Sierra or newer)\n  - Windows: Windows Server 2016+ or Windows 10\n  - FreeBSD: 11.0+\n- **Network Requirements**:\n  - Port 80 (HTTP)\n  - Port 443 (HTTPS)\n  - Additional ports for virtual hosts if needed\n- **Dependencies**:\n  - OpenSSL for SSL/TLS support\n  - PCRE for regular expressions\n  - APR (Apache Portable Runtime) libraries\n  - Zlib for compression\n- **System Access**: root or sudo privileges for installation\n\n## Installation\n\n### RHEL/CentOS/Rocky Linux/AlmaLinux\n\n```bash\n# Install Apache (httpd) and utilities\nsudo dnf install -y httpd httpd-tools mod_ssl mod_security\n\n# RHEL/CentOS 7 (using yum)\nsudo yum install -y epel-release\nsudo yum install -y httpd httpd-tools mod_ssl mod_security\n\n# Install additional modules\nsudo dnf install -y httpd-devel httpd-manual\n\n# Create necessary directories\nsudo mkdir -p /etc/httpd/conf.d\nsudo mkdir -p /var/log/httpd\nsudo mkdir -p /var/www/html\n\n# Set proper permissions\nsudo chown -R apache:apache /var/www/html\nsudo chown -R apache:apache /var/log/httpd\n\n# Enable and start service\nsudo systemctl enable --now httpd\n\n# Verify installation\nhttpd -v\nsudo systemctl status httpd\n```\n\n### Debian/Ubuntu\n\n```bash\n# Update package list\nsudo apt update\n\n# Install Apache and essential modules\nsudo apt install -y apache2 apache2-utils apache2-dev libapache2-mod-security2\n\n# Install additional tools\nsudo apt install -y apache2-doc ssl-cert\n\n# Enable essential modules\nsudo a2enmod rewrite ssl headers deflate expires security2 http2\n\n# Create necessary directories\nsudo mkdir -p /var/www/html\nsudo mkdir -p /var/log/apache2\n\n# Set proper permissions\nsudo chown -R www-data:www-data /var/www/html\nsudo chown -R www-data:www-data /var/log/apache2\n\n# Enable and start service\nsudo systemctl enable --now apache2\n\n# Verify installation\napache2ctl -v\nsudo systemctl status apache2\n```\n\n### Arch Linux\n\n```bash\n# Install Apache\nsudo pacman -S apache\n\n# Install additional modules\nsudo pacman -S apache-mod-security apache-mod-wsgi\n\n# Create apache user if not exists\nsudo useradd -r -d /srv/http -s /sbin/nologin -c \"Apache HTTP Server\" apache\n\n# Create necessary directories\nsudo mkdir -p /etc/httpd/conf.d\nsudo mkdir -p /var/log/httpd\nsudo mkdir -p /srv/http\n\n# Set proper permissions\nsudo chown -R apache:apache /srv/http\nsudo chown -R apache:apache /var/log/httpd\n\n# Edit main configuration\nsudo sed -i 's/#ServerName www.example.com:80/ServerName localhost:80/' /etc/httpd/conf/httpd.conf\n\n# Enable and start service\nsudo systemctl enable --now httpd\n\n# Verify installation\nhttpd -v\nsudo systemctl status httpd\n```\n\n### Alpine Linux\n\n```bash\n# Install Apache\napk add --no-cache apache2 apache2-ssl apache2-utils\n\n# Install additional modules\napk add --no-cache apache2-mod-wsgi apache2-mod-fcgid\n\n# Create apache user if not exists\nadduser -D -H -s /sbin/nologin -g apache apache\n\n# Create necessary directories\nmkdir -p /var/www/localhost/htdocs\nmkdir -p /var/log/apache2\nmkdir -p /run/apache2\n\n# Set proper permissions\nchown -R apache:apache /var/www/localhost/htdocs\nchown -R apache:apache /var/log/apache2\nchown -R apache:apache /run/apache2\n\n# Configure basic settings\nsed -i 's/#ServerName www.example.com:80/ServerName localhost:80/' /etc/apache2/httpd.conf\n\n# Enable and start service\nrc-update add apache2 default\nrc-service apache2 start\n\n# Verify installation\nhttpd -v\nrc-service apache2 status\n```\n\n### openSUSE/SLES\n\n```bash\n# openSUSE Leap/Tumbleweed\nsudo zypper install -y apache2 apache2-mod_ssl apache2-utils\n\n# Install additional modules\nsudo zypper install -y apache2-mod_security2 apache2-mod_wsgi\n\n# SLES 15\n# Enable web and scripting module\nsudo SUSEConnect -p sle-module-web-scripting/15.5/x86_64\nsudo zypper install -y apache2 apache2-mod_ssl\n\n# Create necessary directories\nsudo mkdir -p /etc/apache2/conf.d\nsudo mkdir -p /var/log/apache2\nsudo mkdir -p /srv/www/htdocs\n\n# Set proper permissions\nsudo chown -R wwwrun:www /srv/www/htdocs\nsudo chown -R wwwrun:www /var/log/apache2\n\n# Enable modules\nsudo a2enmod ssl\nsudo a2enmod rewrite\nsudo a2enmod headers\n\n# Enable and start service\nsudo systemctl enable --now apache2\n\n# Verify installation\napache2ctl -v\nsudo systemctl status apache2\n```\n\n### macOS\n\n```bash\n# Using Homebrew\nbrew install httpd\n\n# Start as service\nbrew services start httpd\n\n# Or run manually\nsudo /usr/local/bin/httpd -D FOREGROUND\n\n# Configuration location: /usr/local/etc/httpd/httpd.conf\n# Alternative: /opt/homebrew/etc/httpd/httpd.conf (Apple Silicon)\n\n# Create necessary directories\nsudo mkdir -p /usr/local/var/log/httpd\nsudo mkdir -p /usr/local/var/www\n\n# Set basic configuration\nsed -i '' 's/#ServerName www.example.com:8080/ServerName localhost:8080/' /usr/local/etc/httpd/httpd.conf\n\n# Verify installation\n/usr/local/bin/httpd -v\nbrew services list | grep httpd\n```\n\n### FreeBSD\n\n```bash\n# Using pkg\npkg install apache24\n\n# Using ports\ncd /usr/ports/www/apache24\nmake install clean\n\n# Enable in rc.conf\necho 'apache24_enable=\"YES\"' \u003e\u003e /etc/rc.conf\n\n# Create necessary directories\nmkdir -p /var/log/httpd\nmkdir -p /usr/local/www/apache24/data\n\n# Set proper permissions\nchown -R www:www /usr/local/www/apache24/data\nchown -R www:www /var/log/httpd\n\n# Start service\nservice apache24 start\n\n# Verify installation\n/usr/local/sbin/httpd -v\nservice apache24 status\n\n# Configuration location: /usr/local/etc/apache24/httpd.conf\n```\n\n### Windows\n\n```powershell\n# Method 1: Using Chocolatey\nchoco install apache-httpd\n\n# Method 2: Using Scoop\nscoop bucket add extras\nscoop install apache\n\n# Method 3: Manual installation from Apache Lounge\n# Download from https://www.apachelounge.com/download/\n# Extract to C:\\Apache24\n\n# Install as Windows service\nC:\\Apache24\\bin\\httpd.exe -k install -n Apache24\n\n# Start service\nStart-Service Apache24\n\n# Or using net command\nnet start Apache24\n\n# Configuration location: C:\\Apache24\\conf\\httpd.conf\n# Document root: C:\\Apache24\\htdocs\n\n# Verify installation\nC:\\Apache24\\bin\\httpd.exe -v\nGet-Service Apache24\n```\n\n## Initial Configuration\n\n### First-Run Setup\n\n1. **Create apache user** (if not created by package):\n```bash\n# Linux systems\nsudo useradd -r -d /var/www -s /sbin/nologin -c \"Apache HTTP Server\" apache\n```\n\n2. **Default configuration locations**:\n- RHEL/CentOS/Rocky/AlmaLinux: `/etc/httpd/conf/httpd.conf`\n- Debian/Ubuntu: `/etc/apache2/apache2.conf`\n- Arch Linux: `/etc/httpd/conf/httpd.conf`\n- Alpine Linux: `/etc/apache2/httpd.conf`\n- openSUSE/SLES: `/etc/apache2/httpd.conf`\n- macOS: `/usr/local/etc/httpd/httpd.conf`\n- FreeBSD: `/usr/local/etc/apache24/httpd.conf`\n- Windows: `C:\\Apache24\\conf\\httpd.conf`\n\n3. **Essential settings to change**:\n\n```apache\n# Basic security settings\nServerTokens Prod\nServerSignature Off\n\n# Set server name\nServerName localhost:80\n\n# Basic security modules\nLoadModule headers_module modules/mod_headers.so\nLoadModule rewrite_module modules/mod_rewrite.so\nLoadModule ssl_module modules/mod_ssl.so\n\n# Security headers\nHeader always set X-Frame-Options \"SAMEORIGIN\"\nHeader always set X-Content-Type-Options \"nosniff\"\nHeader always set X-XSS-Protection \"1; mode=block\"\n\n# Hide .htaccess files\n\u003cFilesMatch \"^\\.ht\"\u003e\n    Require all denied\n\u003c/FilesMatch\u003e\n\n# Disable directory browsing by default\nOptions -Indexes\n\n# Basic virtual host\n\u003cVirtualHost *:80\u003e\n    ServerName localhost\n    DocumentRoot /var/www/html\n    ErrorLog logs/error_log\n    CustomLog logs/access_log common\n\u003c/VirtualHost\u003e\n```\n\n### Testing Initial Setup\n\n```bash\n# Test configuration syntax\nsudo apache2ctl configtest  # Debian/Ubuntu\nsudo httpd -t               # RHEL/CentOS/Arch\n\n# Check loaded modules\napache2ctl -M  # Debian/Ubuntu\nhttpd -M       # RHEL/CentOS/Arch\n\n# Test HTTP response\ncurl -I http://localhost\n\n# Check if Apache is listening\nsudo ss -tlnp | grep :80\nsudo netstat -tlnp | grep :80\n\n# View virtual host configuration\napache2ctl -S  # Debian/Ubuntu\nhttpd -S       # RHEL/CentOS/Arch\n```\n\n**WARNING:** Never expose Apache to the public internet without proper security hardening!\n\n## Service Management\n\n### systemd (RHEL, Debian, Ubuntu, Arch, openSUSE)\n\n```bash\n# Enable Apache to start on boot\nsudo systemctl enable apache2  # Debian/Ubuntu\nsudo systemctl enable httpd    # RHEL/CentOS/Arch\n\n# Start Apache\nsudo systemctl start apache2   # Debian/Ubuntu\nsudo systemctl start httpd     # RHEL/CentOS/Arch\n\n# Stop Apache\nsudo systemctl stop apache2    # Debian/Ubuntu\nsudo systemctl stop httpd      # RHEL/CentOS/Arch\n\n# Restart Apache\nsudo systemctl restart apache2 # Debian/Ubuntu\nsudo systemctl restart httpd   # RHEL/CentOS/Arch\n\n# Graceful reload (reload config without dropping connections)\nsudo systemctl reload apache2  # Debian/Ubuntu\nsudo systemctl reload httpd    # RHEL/CentOS/Arch\n\n# Check status\nsudo systemctl status apache2  # Debian/Ubuntu\nsudo systemctl status httpd    # RHEL/CentOS/Arch\n\n# View logs\nsudo journalctl -u apache2 -f  # Debian/Ubuntu\nsudo journalctl -u httpd -f    # RHEL/CentOS/Arch\n```\n\n### OpenRC (Alpine Linux)\n\n```bash\n# Enable Apache to start on boot\nrc-update add apache2 default\n\n# Start Apache\nrc-service apache2 start\n\n# Stop Apache\nrc-service apache2 stop\n\n# Restart Apache\nrc-service apache2 restart\n\n# Graceful reload\nrc-service apache2 reload\n\n# Check status\nrc-service apache2 status\n\n# View logs\ntail -f /var/log/apache2/error.log\n```\n\n### rc.d (FreeBSD)\n\n```bash\n# Enable in /etc/rc.conf\necho 'apache24_enable=\"YES\"' \u003e\u003e /etc/rc.conf\n\n# Start Apache\nservice apache24 start\n\n# Stop Apache\nservice apache24 stop\n\n# Restart Apache\nservice apache24 restart\n\n# Graceful reload\nservice apache24 graceful\n\n# Check status\nservice apache24 status\n\n# View configuration test\nservice apache24 configtest\n```\n\n### launchd (macOS)\n\n```bash\n# Using Homebrew services\nbrew services start httpd\nbrew services stop httpd\nbrew services restart httpd\n\n# Check status\nbrew services list | grep httpd\n\n# Manual control\nsudo /usr/local/bin/httpd -k start\nsudo /usr/local/bin/httpd -k stop\nsudo /usr/local/bin/httpd -k restart\nsudo /usr/local/bin/httpd -k graceful\n\n# Test configuration\n/usr/local/bin/httpd -t\n```\n\n### Windows Service Manager\n\n```powershell\n# Start Apache service\nStart-Service Apache24\n# Or: net start Apache24\n\n# Stop Apache service\nStop-Service Apache24\n# Or: net stop Apache24\n\n# Restart Apache service\nRestart-Service Apache24\n\n# Check status\nGet-Service Apache24\n\n# Manual control\nC:\\Apache24\\bin\\httpd.exe -k start\nC:\\Apache24\\bin\\httpd.exe -k stop\nC:\\Apache24\\bin\\httpd.exe -k restart\n\n# Test configuration\nC:\\Apache24\\bin\\httpd.exe -t\n\n# View logs\nGet-Content C:\\Apache24\\logs\\error.log -Wait\n```\n\n## Advanced Configuration\n\n### Virtual Hosts\n\n```apache\n# /etc/apache2/sites-available/example.com.conf (Debian/Ubuntu)\n# /etc/httpd/conf.d/example.com.conf (RHEL/CentOS)\n\n\u003cVirtualHost *:80\u003e\n    ServerName example.com\n    ServerAlias www.example.com\n    DocumentRoot /var/www/example.com/public_html\n    \n    # Logging\n    ErrorLog ${APACHE_LOG_DIR}/example.com_error.log\n    CustomLog ${APACHE_LOG_DIR}/example.com_access.log combined\n    \n    # Security\n    \u003cDirectory /var/www/example.com/public_html\u003e\n        Options -Indexes +FollowSymLinks\n        AllowOverride All\n        Require all granted\n        \n        # Hide sensitive files\n        \u003cFiles ~ \"^\\.(htaccess|htpasswd|env)$\"\u003e\n            Require all denied\n        \u003c/Files\u003e\n    \u003c/Directory\u003e\n\u003c/VirtualHost\u003e\n\n# SSL Virtual Host\n\u003cVirtualHost *:443\u003e\n    ServerName example.com\n    ServerAlias www.example.com\n    DocumentRoot /var/www/example.com/public_html\n    \n    # SSL Configuration\n    SSLEngine on\n    SSLCertificateFile /etc/letsencrypt/live/example.com/fullchain.pem\n    SSLCertificateKeyFile /etc/letsencrypt/live/example.com/privkey.pem\n    \n    # Modern SSL configuration\n    SSLProtocol all -SSLv3 -TLSv1 -TLSv1.1\n    SSLCipherSuite ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384\n    SSLHonorCipherOrder off\n    SSLSessionTickets off\n    \n    # Security headers\n    Header always set Strict-Transport-Security \"max-age=63072000; includeSubDomains; preload\"\n    Header always set X-Frame-Options \"SAMEORIGIN\"\n    Header always set X-Content-Type-Options \"nosniff\"\n    Header always set X-XSS-Protection \"1; mode=block\"\n    \n    # Logging\n    ErrorLog ${APACHE_LOG_DIR}/example.com_ssl_error.log\n    CustomLog ${APACHE_LOG_DIR}/example.com_ssl_access.log combined\n\u003c/VirtualHost\u003e\n```\n\n### Performance Tuning\n\n```apache\n# MPM Event configuration (modern and efficient)\n\u003cIfModule mpm_event_module\u003e\n    StartServers             3\n    MinSpareThreads         75\n    MaxSpareThreads        250\n    ThreadsPerChild         25\n    MaxRequestWorkers      400\n    MaxConnectionsPerChild   0\n    ThreadLimit             64\n\u003c/IfModule\u003e\n\n# Compression\n\u003cIfModule mod_deflate.c\u003e\n    SetOutputFilter DEFLATE\n    AddOutputFilterByType DEFLATE text/html text/css text/javascript text/xml text/plain\n    AddOutputFilterByType DEFLATE application/javascript application/xml+rss application/xml\n    AddOutputFilterByType DEFLATE application/json application/x-javascript\n    \n    # Don't compress images\n    SetEnvIfNoCase Request_URI \\.(?:gif|jpe?g|png|webp)$ no-gzip\n    SetEnvIfNoCase Request_URI \\.(?:exe|t?gz|zip|bz2|sit|rar)$ no-gzip\n\u003c/IfModule\u003e\n\n# Caching\n\u003cIfModule mod_expires.c\u003e\n    ExpiresActive On\n    ExpiresByType image/jpg \"access plus 1 year\"\n    ExpiresByType image/jpeg \"access plus 1 year\"\n    ExpiresByType image/gif \"access plus 1 year\"\n    ExpiresByType image/png \"access plus 1 year\"\n    ExpiresByType image/webp \"access plus 1 year\"\n    ExpiresByType text/css \"access plus 1 month\"\n    ExpiresByType application/pdf \"access plus 1 month\"\n    ExpiresByType application/javascript \"access plus 1 month\"\n    ExpiresByType application/x-javascript \"access plus 1 month\"\n    ExpiresByType image/x-icon \"access plus 1 year\"\n    ExpiresDefault \"access plus 2 days\"\n\u003c/IfModule\u003e\n```\n\n### Security Hardening\n\n```apache\n# Security configuration\nServerTokens Prod\nServerSignature Off\n\n# Disable unnecessary HTTP methods\n\u003cLimitExcept GET POST HEAD\u003e\n    Require all denied\n\u003c/LimitExcept\u003e\n\n# Hide server information\nHeader always unset Server\nHeader unset X-Powered-By\n\n# Security headers\nHeader always set Strict-Transport-Security \"max-age=63072000; includeSubDomains; preload\"\nHeader always set X-Frame-Options \"SAMEORIGIN\"\nHeader always set X-Content-Type-Options \"nosniff\"\nHeader always set X-XSS-Protection \"1; mode=block\"\nHeader always set Referrer-Policy \"strict-origin-when-cross-origin\"\n\n# Disable TRACE method\nTraceEnable off\n\n# Timeout settings\nTimeout 60\nKeepAliveTimeout 15\n\n# Request limits\nLimitRequestBody 10485760  # 10MB\nLimitRequestFields 100\nLimitRequestFieldSize 8190\nLimitRequestLine 4094\n\n# Hide sensitive files\n\u003cFilesMatch \"^\\.\"\u003e\n    Require all denied\n\u003c/FilesMatch\u003e\n\n\u003cFilesMatch \"\\.(bak|backup|swp|tmp|~)$\"\u003e\n    Require all denied\n\u003c/FilesMatch\u003e\n\n# Disable server-status and server-info\n\u003cLocation \"/server-status\"\u003e\n    Require ip 127.0.0.1\n    Require ip ::1\n\u003c/Location\u003e\n\n\u003cLocation \"/server-info\"\u003e\n    Require ip 127.0.0.1\n    Require ip ::1\n\u003c/Location\u003e\n```\n\n## Reverse Proxy Setup\n\n### nginx as Frontend Proxy\n\n```nginx\n# /etc/nginx/sites-available/apache-proxy\nupstream apache_backend {\n    server 127.0.0.1:8080;\n    keepalive 32;\n}\n\nserver {\n    listen 80;\n    server_name example.com www.example.com;\n    return 301 https://$server_name$request_uri;\n}\n\nserver {\n    listen 443 ssl http2;\n    server_name example.com www.example.com;\n\n    ssl_certificate /etc/letsencrypt/live/example.com/fullchain.pem;\n    ssl_certificate_key /etc/letsencrypt/live/example.com/privkey.pem;\n\n    location / {\n        proxy_pass http://apache_backend;\n        proxy_set_header Host $host;\n        proxy_set_header X-Real-IP $remote_addr;\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n        proxy_set_header X-Forwarded-Proto $scheme;\n        \n        # Handle Apache redirects\n        proxy_redirect http://apache_backend https://$server_name;\n    }\n    \n    # Serve static files directly with nginx\n    location ~* \\.(css|js|png|jpg|jpeg|gif|ico|svg|woff|woff2|ttf|eot)$ {\n        try_files $uri @apache;\n        expires 1y;\n        add_header Cache-Control \"public, immutable\";\n    }\n    \n    location @apache {\n        proxy_pass http://apache_backend;\n        proxy_set_header Host $host;\n        proxy_set_header X-Real-IP $remote_addr;\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n        proxy_set_header X-Forwarded-Proto $scheme;\n    }\n}\n```\n\n### HAProxy Configuration\n\n```haproxy\n# /etc/haproxy/haproxy.cfg\nglobal\n    maxconn 4096\n    log stdout local0\n    chroot /var/lib/haproxy\n    stats socket /run/haproxy/admin.sock mode 660 level admin\n    stats timeout 30s\n    user haproxy\n    group haproxy\n    daemon\n\ndefaults\n    mode http\n    log global\n    option httplog\n    option dontlognull\n    option log-health-checks\n    timeout connect 5000\n    timeout client 50000\n    timeout server 50000\n    errorfile 400 /etc/haproxy/errors/400.http\n    errorfile 403 /etc/haproxy/errors/403.http\n    errorfile 408 /etc/haproxy/errors/408.http\n    errorfile 500 /etc/haproxy/errors/500.http\n    errorfile 502 /etc/haproxy/errors/502.http\n    errorfile 503 /etc/haproxy/errors/503.http\n    errorfile 504 /etc/haproxy/errors/504.http\n\nfrontend apache_frontend\n    bind *:80\n    bind *:443 ssl crt /etc/ssl/certs/example.com.pem\n    \n    # Redirect HTTP to HTTPS\n    redirect scheme https if !{ ssl_fc }\n    \n    # Security headers\n    http-response set-header Strict-Transport-Security \"max-age=63072000; includeSubDomains; preload\"\n    http-response set-header X-Frame-Options SAMEORIGIN\n    http-response set-header X-Content-Type-Options nosniff\n    \n    default_backend apache_servers\n\nbackend apache_servers\n    balance roundrobin\n    option httpchk GET / HTTP/1.1\\r\\nHost:\\ localhost\n    server apache1 127.0.0.1:8080 check\n    server apache2 127.0.0.1:8081 check backup\n```\n\n### Caddy Configuration\n\n```caddyfile\nexample.com www.example.com {\n    reverse_proxy localhost:8080\n    \n    # Security headers\n    header {\n        Strict-Transport-Security \"max-age=63072000; includeSubDomains; preload\"\n        X-Frame-Options \"SAMEORIGIN\"\n        X-Content-Type-Options \"nosniff\"\n        X-XSS-Protection \"1; mode=block\"\n    }\n    \n    # Compression\n    encode gzip\n    \n    # Logging\n    log {\n        output file /var/log/caddy/example.com.log\n        level INFO\n    }\n}\n```\n\n### Apache as Reverse Proxy\n\n```apache\n# Enable required modules\nLoadModule proxy_module modules/mod_proxy.so\nLoadModule proxy_http_module modules/mod_proxy_http.so\nLoadModule proxy_balancer_module modules/mod_proxy_balancer.so\n\n\u003cVirtualHost *:80\u003e\n    ServerName example.com\n    \n    # Proxy configuration\n    ProxyPreserveHost On\n    ProxyPass / http://backend-server:8080/\n    ProxyPassReverse / http://backend-server:8080/\n    \n    # Load balancing\n    ProxyPass /app/ balancer://mycluster/\n    ProxyPassReverse /app/ balancer://mycluster/\n    \n    \u003cProxy balancer://mycluster\u003e\n        BalancerMember http://backend1:8080\n        BalancerMember http://backend2:8080\n        ProxySet hcmethod GET\n        ProxySet hcuri /health\n    \u003c/Proxy\u003e\n    \n    # Balancer manager\n    \u003cLocation \"/balancer-manager\"\u003e\n        SetHandler balancer-manager\n        Require ip 127.0.0.1\n        Require ip ::1\n    \u003c/Location\u003e\n\u003c/VirtualHost\u003e\n```\n\n## Security Configuration\n\n### SSL/TLS Configuration\n\n```apache\n# Load SSL module\nLoadModule ssl_module modules/mod_ssl.so\n\n# Global SSL configuration\nSSLEngine on\nSSLProtocol all -SSLv3 -TLSv1 -TLSv1.1\nSSLCipherSuite ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384\nSSLHonorCipherOrder off\nSSLSessionCache shmcb:/var/run/ssl_scache(512000)\nSSLSessionCacheTimeout 300\nSSLUseStapling On\nSSLStaplingCache shmcb:/var/run/ocsp(128000)\nSSLCompression off\nSSLSessionTickets off\n\n# Generate DH parameters\n# openssl dhparam -out /etc/ssl/certs/dhparam.pem 2048\nSSLOpenSSLConfCmd DHParameters /etc/ssl/certs/dhparam.pem\n```\n\n### ModSecurity WAF\n\n```bash\n# Install ModSecurity\n# Ubuntu/Debian\nsudo apt install libapache2-mod-security2\n\n# RHEL/CentOS\nsudo dnf install mod_security\n\n# Enable module\nsudo a2enmod security2  # Ubuntu/Debian\n\n# Download OWASP Core Rule Set\nsudo mkdir -p /etc/modsecurity\ncd /etc/modsecurity\nsudo wget https://github.com/coreruleset/coreruleset/archive/v3.3.4.tar.gz\nsudo tar xzf v3.3.4.tar.gz\nsudo mv coreruleset-3.3.4 crs\nsudo cp crs/crs-setup.conf.example crs/crs-setup.conf\n```\n\n```apache\n# ModSecurity configuration\n\u003cIfModule mod_security2.c\u003e\n    SecRuleEngine On\n    SecRequestBodyAccess On\n    SecRequestBodyLimit 13107200\n    SecRequestBodyNoFilesLimit 131072\n    SecRequestBodyInMemoryLimit 131072\n    SecRequestBodyLimitAction Reject\n    SecResponseBodyAccess Off\n    SecDebugLog /var/log/apache2/modsec_debug.log\n    SecDebugLogLevel 0\n    SecAuditEngine RelevantOnly\n    SecAuditLogRelevantStatus \"^(?:5|4(?!04))\"\n    SecAuditLogParts ABDEFHIJZ\n    SecAuditLogType Serial\n    SecAuditLog /var/log/apache2/modsec_audit.log\n    \n    # Include OWASP Core Rule Set\n    Include /etc/modsecurity/crs/crs-setup.conf\n    Include /etc/modsecurity/crs/rules/*.conf\n\u003c/IfModule\u003e\n```\n\n### Firewall Rules\n\n```bash\n# UFW (Ubuntu/Debian)\nsudo ufw allow 'Apache Full'    # HTTP and HTTPS\nsudo ufw allow 80/tcp\nsudo ufw allow 443/tcp\nsudo ufw enable\n\n# firewalld (RHEL/CentOS/openSUSE)\nsudo firewall-cmd --permanent --add-service=http\nsudo firewall-cmd --permanent --add-service=https\nsudo firewall-cmd --reload\n\n# iptables\nsudo iptables -A INPUT -p tcp --dport 80 -j ACCEPT\nsudo iptables -A INPUT -p tcp --dport 443 -j ACCEPT\nsudo iptables-save \u003e /etc/iptables/rules.v4\n\n# pf (FreeBSD)\n# Add to /etc/pf.conf\npass in on $ext_if proto tcp from any to any port {80, 443}\n\n# Windows Firewall\nNew-NetFirewallRule -DisplayName \"Apache HTTP\" -Direction Inbound -Protocol TCP -LocalPort 80 -Action Allow\nNew-NetFirewallRule -DisplayName \"Apache HTTPS\" -Direction Inbound -Protocol TCP -LocalPort 443 -Action Allow\n```\n\n### Access Control\n\n```apache\n# IP-based access control\n\u003cDirectory \"/var/www/admin\"\u003e\n    Require ip 192.168.1.0/24\n    Require ip 127.0.0.1\n    Require ip ::1\n\u003c/Directory\u003e\n\n# Password protection\n\u003cDirectory \"/var/www/private\"\u003e\n    AuthType Basic\n    AuthName \"Restricted Area\"\n    AuthUserFile /etc/apache2/.htpasswd\n    Require valid-user\n\u003c/Directory\u003e\n\n# Create password file\n# htpasswd -c /etc/apache2/.htpasswd username\n\n# Client certificate authentication\n\u003cDirectory \"/var/www/secure\"\u003e\n    SSLRequireSSL\n    SSLVerifyClient require\n    SSLVerifyDepth 1\n    SSLCACertificateFile /etc/ssl/certs/ca.crt\n\u003c/Directory\u003e\n```\n\n## Database Setup\n\nApache HTTP Server doesn't require a database, but it commonly integrates with databases through various modules and applications:\n\n### PHP Database Integration\n\n```apache\n# PHP module configuration\nLoadModule php_module modules/libphp.so\n\n\u003cIfModule mod_php.c\u003e\n    AddType application/x-httpd-php .php\n    php_admin_flag allow_url_include Off\n    php_admin_flag allow_url_fopen Off\n    php_admin_value upload_max_filesize 64M\n    php_admin_value post_max_size 64M\n    php_admin_value memory_limit 256M\n    php_admin_value max_execution_time 300\n    php_admin_flag expose_php Off\n\u003c/IfModule\u003e\n```\n\n### Database Connection Examples\n\n```apache\n# Environment variables for database connections\nSetEnv DB_HOST localhost\nSetEnv DB_NAME myapp\nSetEnv DB_USER webapp\nSetEnv DB_PASS secretpassword\n\n# Secure environment variables from external access\n\u003cLocation \"/server-status\"\u003e\n    SetHandler server-status\n    Require local\n\u003c/Location\u003e\n```\n\n### CGI Database Applications\n\n```apache\n# Enable CGI for database applications\nLoadModule cgi_module modules/mod_cgi.so\n\n\u003cDirectory \"/var/www/cgi-bin\"\u003e\n    AllowOverride None\n    Options +ExecCGI\n    AddHandler cgi-script .cgi .pl .py\n    Require all granted\n\u003c/Directory\u003e\n\n# Python WSGI for database applications\nLoadModule wsgi_module modules/mod_wsgi.so\n\nWSGIDaemonProcess myapp python-home=/path/to/venv python-path=/path/to/app\nWSGIProcessGroup myapp\nWSGIScriptAlias / /path/to/app/app.wsgi\n```\n\n## Performance Optimization\n\n### System-level Tuning\n\n```bash\n# Increase system limits for Apache\nsudo tee -a /etc/security/limits.conf \u003c\u003cEOF\napache soft nofile 65535\napache hard nofile 65535\nwww-data soft nofile 65535\nwww-data hard nofile 65535\nEOF\n\n# Kernel optimization for web servers\nsudo tee -a /etc/sysctl.conf \u003c\u003cEOF\n# Apache optimization\nnet.core.somaxconn = 65535\nnet.core.netdev_max_backlog = 5000\nnet.ipv4.tcp_max_syn_backlog = 65535\nnet.ipv4.tcp_fin_timeout = 10\nnet.ipv4.tcp_tw_reuse = 1\nnet.ipv4.ip_local_port_range = 15000 65000\nfs.file-max = 100000\n\n# Memory management\nvm.swappiness = 10\nvm.dirty_ratio = 15\nvm.dirty_background_ratio = 5\nEOF\n\nsudo sysctl -p\n```\n\n### Apache Performance Settings\n\n```apache\n# Optimized MPM Event configuration\n\u003cIfModule mpm_event_module\u003e\n    StartServers             4\n    MinSpareThreads         25\n    MaxSpareThreads        75 \n    ThreadsPerChild         25\n    MaxRequestWorkers      400\n    MaxConnectionsPerChild   0\n    ThreadLimit             64\n    ServerLimit             16\n    AsyncRequestWorkerFactor 2\n\u003c/IfModule\u003e\n\n# Connection settings\nKeepAlive On\nKeepAliveTimeout 15\nMaxKeepAliveRequests 100\n\n# Timeout settings\nTimeout 60\nLimitRequestLine 4094\nLimitRequestFieldSize 8190\nLimitRequestFields 100\nLimitRequestBody 10485760\n\n# Buffer settings\nEnableSendfile On\nEnableMMAP On\n```\n\n### Caching Configuration\n\n```apache\n# Enable caching modules\nLoadModule cache_module modules/mod_cache.so\nLoadModule cache_disk_module modules/mod_cache_disk.so\n\n# Disk cache configuration\n\u003cIfModule mod_cache_disk.c\u003e\n    CacheRoot /var/cache/apache2\n    CacheDirLevels 2\n    CacheDirLength 1\n    CacheEnable disk /\n    CacheIgnoreHeaders Set-Cookie\n    CacheDefaultExpire 3600\n    CacheMaxExpire 86400\n    CacheLastModifiedFactor 0.1\n    CacheHeader on\n\u003c/IfModule\u003e\n\n# Memory cache (alternative to disk cache)\nLoadModule cache_socache_module modules/mod_cache_socache.so\n\n\u003cIfModule mod_cache_socache.c\u003e\n    CacheEnable socache /\n    CacheSocache shmcb\n    CacheSocacheMaxSize 102400\n\u003c/IfModule\u003e\n```\n\n### Content Optimization\n\n```apache\n# Compression\n\u003cIfModule mod_deflate.c\u003e\n    SetOutputFilter DEFLATE\n    AddOutputFilterByType DEFLATE text/html text/css text/javascript text/xml text/plain\n    AddOutputFilterByType DEFLATE application/javascript application/xml+rss application/xml\n    AddOutputFilterByType DEFLATE application/json application/x-javascript application/xhtml+xml\n    \n    # Don't compress images or binaries\n    SetEnvIfNoCase Request_URI \\.(?:gif|jpe?g|png|webp|pdf|zip|rar|exe)$ no-gzip\n    \n    # Compression level (1-9, 6 is good balance)\n    DeflateCompressionLevel 6\n\u003c/IfModule\u003e\n\n# Static file caching\n\u003cIfModule mod_expires.c\u003e\n    ExpiresActive On\n    \n    # Images\n    ExpiresByType image/jpg \"access plus 1 year\"\n    ExpiresByType image/jpeg \"access plus 1 year\"\n    ExpiresByType image/gif \"access plus 1 year\"\n    ExpiresByType image/png \"access plus 1 year\"\n    ExpiresByType image/webp \"access plus 1 year\"\n    ExpiresByType image/svg+xml \"access plus 1 year\"\n    \n    # CSS and JavaScript\n    ExpiresByType text/css \"access plus 1 month\"\n    ExpiresByType application/javascript \"access plus 1 month\"\n    ExpiresByType application/x-javascript \"access plus 1 month\"\n    \n    # Fonts\n    ExpiresByType font/woff \"access plus 1 year\"\n    ExpiresByType font/woff2 \"access plus 1 year\"\n    ExpiresByType application/font-woff \"access plus 1 year\"\n    ExpiresByType application/font-woff2 \"access plus 1 year\"\n    \n    # Icons\n    ExpiresByType image/x-icon \"access plus 1 year\"\n    ExpiresByType image/vnd.microsoft.icon \"access plus 1 year\"\n    \n    # HTML\n    ExpiresByType text/html \"access plus 300 seconds\"\n    \n    # Default\n    ExpiresDefault \"access plus 1 day\"\n\u003c/IfModule\u003e\n```\n\n## Monitoring\n\n### Built-in Monitoring\n\n```apache\n# Enable server-status module\nLoadModule status_module modules/mod_status.so\n\n\u003cLocation \"/server-status\"\u003e\n    SetHandler server-status\n    Require ip 127.0.0.1\n    Require ip ::1\n\u003c/Location\u003e\n\n\u003cLocation \"/server-info\"\u003e\n    SetHandler server-info\n    Require ip 127.0.0.1\n    Require ip ::1\n\u003c/Location\u003e\n\n# Extended status\nExtendedStatus On\n```\n\n### Log Analysis\n\n```bash\n# Monitor Apache access logs\ntail -f /var/log/apache2/access.log  # Debian/Ubuntu\ntail -f /var/log/httpd/access_log    # RHEL/CentOS\n\n# Monitor error logs\ntail -f /var/log/apache2/error.log   # Debian/Ubuntu\ntail -f /var/log/httpd/error_log     # RHEL/CentOS\n\n# Analyze top IPs\nawk '{print $1}' /var/log/apache2/access.log | sort | uniq -c | sort -rn | head -10\n\n# Analyze response codes\nawk '{print $9}' /var/log/apache2/access.log | sort | uniq -c | sort -rn\n\n# Analyze most requested files\nawk '{print $7}' /var/log/apache2/access.log | sort | uniq -c | sort -rn | head -10\n\n# Check for errors\ngrep \"error\" /var/log/apache2/error.log | tail -10\n```\n\n### External Monitoring Tools\n\n```bash\n# Install monitoring tools\n# GoAccess for real-time log analysis\nsudo apt install goaccess  # Ubuntu/Debian\nsudo dnf install goaccess  # RHEL/CentOS\n\n# Real-time analysis\ngoaccess /var/log/apache2/access.log -c\n\n# Generate HTML report\ngoaccess /var/log/apache2/access.log -o /var/www/html/stats.html --log-format=COMBINED --real-time-html\n\n# Install htop for process monitoring\nsudo apt install htop\nhtop -p $(pgrep apache2 | head -5 | tr '\\n' ',' | sed 's/,$//')\n```\n\n### Performance Monitoring\n\n```bash\n# Monitor Apache processes\nps aux | grep apache2 | grep -v grep\n\n# Monitor memory usage\nps aux --sort=-%mem | grep apache2 | head -10\n\n# Monitor connection counts\nss -tan | grep :80 | wc -l\nss -tan | grep :443 | wc -l\n\n# Check server-status (if enabled)\ncurl http://localhost/server-status\ncurl http://localhost/server-status?auto  # Machine readable\n\n# Monitor file descriptors\nlsof -u apache2 | wc -l  # Ubuntu/Debian\nlsof -u apache | wc -l   # RHEL/CentOS\n```\n\n## Backup and Restore\n\n### Configuration Backup\n\n```bash\n#!/bin/bash\n# backup-apache-config.sh\n\nBACKUP_DIR=\"/backup/apache/$(date +%Y%m%d_%H%M%S)\"\nmkdir -p \"$BACKUP_DIR\"\n\n# Detect Apache configuration directory\nif [ -d /etc/apache2 ]; then\n    # Debian/Ubuntu\n    CONFIG_DIR=\"/etc/apache2\"\n    LOG_DIR=\"/var/log/apache2\"\n    WEB_DIR=\"/var/www\"\nelif [ -d /etc/httpd ]; then\n    # RHEL/CentOS\n    CONFIG_DIR=\"/etc/httpd\"\n    LOG_DIR=\"/var/log/httpd\"\n    WEB_DIR=\"/var/www\"\nfi\n\n# Backup Apache configuration\ntar czf \"$BACKUP_DIR/apache-config.tar.gz\" -C / \"${CONFIG_DIR#/}\"\n\n# Backup website files\ntar czf \"$BACKUP_DIR/apache-sites.tar.gz\" -C \"$WEB_DIR\" .\n\n# Backup SSL certificates\nif [ -d /etc/letsencrypt ]; then\n    tar czf \"$BACKUP_DIR/ssl-certs.tar.gz\" -C /etc letsencrypt\nfi\n\n# Backup recent logs (last 7 days)\nfind \"$LOG_DIR\" -name \"*.log\" -mtime -7 -exec tar czf \"$BACKUP_DIR/apache-logs.tar.gz\" {} +\n\n# Package version info\nif command -v apache2ctl \u0026\u003e /dev/null; then\n    apache2ctl -v \u003e \"$BACKUP_DIR/version.txt\"\nelif command -v httpd \u0026\u003e /dev/null; then\n    httpd -v \u003e \"$BACKUP_DIR/version.txt\"\nfi\n\necho \"Backup completed: $BACKUP_DIR\"\n```\n\n### Website Backup\n\n```bash\n#!/bin/bash\n# backup-websites.sh\n\nBACKUP_DIR=\"/backup/websites/$(date +%Y%m%d_%H%M%S)\"\nWEB_ROOT=\"/var/www/html\"\n\nmkdir -p \"$BACKUP_DIR\"\n\n# Backup all websites\nfor site in \"$WEB_ROOT\"/*; do\n    if [ -d \"$site\" ]; then\n        site_name=$(basename \"$site\")\n        echo \"Backing up $site_name...\"\n        tar czf \"$BACKUP_DIR/${site_name}.tar.gz\" -C \"$WEB_ROOT\" \"$site_name\"\n    fi\ndone\n\n# Backup databases (if applicable)\nif command -v mysqldump \u0026\u003e /dev/null; then\n    for db in $(mysql -e \"SHOW DATABASES;\" | grep -v -E \"^(Database|information_schema|performance_schema|mysql|sys)$\"); do\n        mysqldump \"$db\" | gzip \u003e \"$BACKUP_DIR/${db}.sql.gz\"\n    done\nfi\n\n# Keep only last 30 days of backups\nfind /backup/websites -type d -mtime +30 -exec rm -rf {} + 2\u003e/dev/null\n\necho \"Website backup completed: $BACKUP_DIR\"\n```\n\n### Restore Procedures\n\n```bash\n#!/bin/bash\n# restore-apache.sh\n\nBACKUP_DIR=\"$1\"\nif [ -z \"$BACKUP_DIR\" ]; then\n    echo \"Usage: $0 \u003cbackup-directory\u003e\"\n    exit 1\nfi\n\n# Stop Apache\nif command -v systemctl \u0026\u003e /dev/null; then\n    sudo systemctl stop apache2 || sudo systemctl stop httpd\nelif command -v service \u0026\u003e /dev/null; then\n    sudo service apache2 stop || sudo service httpd stop\nfi\n\n# Restore configuration\nif [ -f \"$BACKUP_DIR/apache-config.tar.gz\" ]; then\n    sudo tar xzf \"$BACKUP_DIR/apache-config.tar.gz\" -C /\n    echo \"Configuration restored\"\nfi\n\n# Restore websites\nif [ -f \"$BACKUP_DIR/apache-sites.tar.gz\" ]; then\n    sudo tar xzf \"$BACKUP_DIR/apache-sites.tar.gz\" -C /var/www\n    echo \"Websites restored\"\nfi\n\n# Restore SSL certificates\nif [ -f \"$BACKUP_DIR/ssl-certs.tar.gz\" ]; then\n    sudo tar xzf \"$BACKUP_DIR/ssl-certs.tar.gz\" -C /etc\n    echo \"SSL certificates restored\"\nfi\n\n# Test configuration\nif command -v apache2ctl \u0026\u003e /dev/null; then\n    sudo apache2ctl configtest\n    if [ $? -eq 0 ]; then\n        sudo systemctl start apache2\n    fi\nelif command -v httpd \u0026\u003e /dev/null; then\n    sudo httpd -t\n    if [ $? -eq 0 ]; then\n        sudo systemctl start httpd\n    fi\nfi\n\necho \"Restore completed\"\n```\n\n### Automated Backup\n\n```bash\n# Create cron job for daily backups\nsudo tee /etc/cron.d/apache-backup \u003c\u003cEOF\n# Apache daily backup\n0 2 * * * root /usr/local/bin/backup-apache-config.sh\n0 3 * * * root /usr/local/bin/backup-websites.sh\nEOF\n\n# Make scripts executable\nsudo chmod +x /usr/local/bin/backup-apache-config.sh\nsudo chmod +x /usr/local/bin/backup-websites.sh\n```\n\n## Troubleshooting\n\n### Common Issues\n\n1. **Apache won't start**:\n```bash\n# Check configuration syntax\nsudo apache2ctl configtest  # Debian/Ubuntu\nsudo httpd -t               # RHEL/CentOS\n\n# Check error logs\nsudo tail -20 /var/log/apache2/error.log  # Debian/Ubuntu\nsudo tail -20 /var/log/httpd/error_log    # RHEL/CentOS\n\n# Check port conflicts\nsudo ss -tlnp | grep :80\nsudo lsof -i :80\n\n# Check permissions\nls -la /var/www/html\nps aux | grep apache2\n```\n\n2. **Permission denied errors**:\n```bash\n# Fix ownership\nsudo chown -R www-data:www-data /var/www/html  # Debian/Ubuntu\nsudo chown -R apache:apache /var/www/html      # RHEL/CentOS\n\n# Fix permissions\nsudo find /var/www/html -type d -exec chmod 755 {} \\;\nsudo find /var/www/html -type f -exec chmod 644 {} \\;\n\n# Check SELinux (RHEL/CentOS)\ngetenforce\nsudo setsebool -P httpd_can_network_connect 1\nsudo restorecon -Rv /var/www/html\n```\n\n3. **Virtual host not working**:\n```bash\n# Check virtual host configuration\napache2ctl -S  # Debian/Ubuntu\nhttpd -S       # RHEL/CentOS\n\n# Enable virtual host (Debian/Ubuntu)\nsudo a2ensite example.com.conf\nsudo systemctl reload apache2\n\n# Test virtual host\ncurl -H \"Host: example.com\" http://localhost/\n```\n\n4. **SSL certificate issues**:\n```bash\n# Check certificate files\nsudo openssl x509 -in /etc/ssl/certs/example.com.crt -text -noout\n\n# Test SSL configuration\necho | openssl s_client -servername example.com -connect example.com:443\n\n# Check SSL module\napache2ctl -M | grep ssl  # Debian/Ubuntu\nhttpd -M | grep ssl       # RHEL/CentOS\n```\n\n### Debug Mode\n\n```apache\n# Enable debug logging\nLogLevel debug\n\n# Module-specific debug\nLogLevel ssl:debug\nLogLevel rewrite:debug\n\n# Custom debug log format\nLogFormat \"%h %l %u %t \\\"%r\\\" %\u003es %b \\\"%{Referer}i\\\" \\\"%{User-agent}i\\\" %D\" debug\nCustomLog /var/log/apache2/debug.log debug\n```\n\n### Performance Issues\n\n```bash\n# Monitor Apache processes\ntop -p $(pgrep apache2 | head -5 | tr '\\n' ',' | sed 's/,$//')\n\n# Check memory usage\nps aux --sort=-%mem | grep apache2\n\n# Monitor connections\nwatch 'ss -tan | grep :80 | wc -l'\n\n# Check slow queries (if applicable)\ngrep \"taking too long\" /var/log/apache2/error.log\n\n# Analyze configuration\napache2ctl -t -D DUMP_VHOSTS\napache2ctl -t -D DUMP_MODULES\n```\n\n## Maintenance\n\n### Update Procedures\n\n```bash\n# RHEL/CentOS/Rocky/AlmaLinux\nsudo dnf check-update httpd\nsudo dnf update httpd httpd-tools mod_ssl\n\n# Debian/Ubuntu\nsudo apt update\nsudo apt upgrade apache2 apache2-utils libapache2-mod-ssl\n\n# Arch Linux\nsudo pacman -Syu apache\n\n# Alpine Linux\napk update\napk upgrade apache2\n\n# openSUSE\nsudo zypper update apache2\n\n# FreeBSD\npkg update\npkg upgrade apache24\n\n# macOS\nbrew upgrade httpd\n\n# Always test configuration after update\nsudo apache2ctl configtest  # Debian/Ubuntu\nsudo httpd -t               # RHEL/CentOS\n\n# Graceful restart to apply updates\nsudo systemctl reload apache2  # Debian/Ubuntu\nsudo systemctl reload httpd    # RHEL/CentOS\n```\n\n### Log Rotation\n\n```bash\n# Configure log rotation for Apache\nsudo tee /etc/logrotate.d/apache2 \u003c\u003cEOF\n/var/log/apache2/*.log {\n    daily\n    missingok\n    rotate 14\n    compress\n    delaycompress\n    notifempty\n    create 640 root adm\n    sharedscripts\n    postrotate\n        if /bin/pidof apache2 \u003e /dev/null ; then \\\n            /usr/sbin/apache2ctl graceful \u003e /dev/null; \\\n        fi\n    endscript\n}\nEOF\n\n# For RHEL/CentOS\nsudo tee /etc/logrotate.d/httpd \u003c\u003cEOF\n/var/log/httpd/*log {\n    daily\n    missingok\n    rotate 14\n    compress\n    delaycompress\n    notifempty\n    sharedscripts\n    postrotate\n        /bin/systemctl reload httpd.service \u003e /dev/null 2\u003e/dev/null || true\n    endscript\n}\nEOF\n```\n\n### Health Checks\n\n```bash\n#!/bin/bash\n# apache-health-check.sh\n\n# Check if Apache is running\nif ! pgrep apache2 \u003e /dev/null \u0026\u0026 ! pgrep httpd \u003e /dev/null; then\n    echo \"CRITICAL: Apache is not running\"\n    exit 2\nfi\n\n# Check if Apache responds to HTTP requests\nif ! curl -f -s http://localhost \u003e /dev/null; then\n    echo \"CRITICAL: Apache not responding to HTTP requests\"\n    exit 2\nfi\n\n# Check configuration syntax\nif command -v apache2ctl \u0026\u003e /dev/null; then\n    if ! apache2ctl configtest \u0026\u003e /dev/null; then\n        echo \"WARNING: Apache configuration has syntax errors\"\n        exit 1\n    fi\nelif command -v httpd \u0026\u003e /dev/null; then\n    if ! httpd -t \u0026\u003e /dev/null; then\n        echo \"WARNING: Apache configuration has syntax errors\"\n        exit 1\n    fi\nfi\n\n# Check disk space for logs\nLOG_USAGE=$(df /var/log | awk 'NR==2 {print $5}' | sed 's/%//')\nif [ \"$LOG_USAGE\" -gt 90 ]; then\n    echo \"WARNING: Log directory is ${LOG_USAGE}% full\"\n    exit 1\nfi\n\necho \"OK: Apache is healthy\"\nexit 0\n```\n\n### Cleanup Tasks\n\n```bash\n# Clean old log files\nfind /var/log/apache2 -name \"*.log.*\" -mtime +30 -delete  # Debian/Ubuntu\nfind /var/log/httpd -name \"*log.*\" -mtime +30 -delete     # RHEL/CentOS\n\n# Clean Apache cache\nrm -rf /var/cache/apache2/*\n\n# Clean temporary files\nfind /tmp -name \"apache*\" -mtime +7 -delete\n\n# Optimize log files (remove old entries)\nsudo journalctl --vacuum-time=30d\n```\n\n## Integration Examples\n\n### PHP Integration\n\n```bash\n# Install PHP\nsudo apt install php libapache2-mod-php  # Ubuntu/Debian\nsudo dnf install php php-cli              # RHEL/CentOS\n\n# Enable PHP module\nsudo a2enmod php8.1  # Ubuntu/Debian\n\n# Test PHP\necho \"\u003c?php phpinfo(); ?\u003e\" | sudo tee /var/www/html/info.php\n```\n\n### WordPress Integration\n\n```apache\n\u003cVirtualHost *:443\u003e\n    ServerName blog.example.com\n    DocumentRoot /var/www/wordpress\n    \n    SSLEngine on\n    SSLCertificateFile /etc/letsencrypt/live/blog.example.com/fullchain.pem\n    SSLCertificateKeyFile /etc/letsencrypt/live/blog.example.com/privkey.pem\n    \n    \u003cDirectory /var/www/wordpress\u003e\n        AllowOverride All\n        Options -Indexes +FollowSymLinks\n        Require all granted\n    \u003c/Directory\u003e\n    \n    # WordPress-specific rules\n    RewriteEngine On\n    RewriteRule ^/wp-admin/install.php$ - [F]\n    RewriteRule ^/wp-config-sample.php$ - [F]\n    \n    # Security for wp-config.php\n    \u003cFiles wp-config.php\u003e\n        Require all denied\n    \u003c/Files\u003e\n\u003c/VirtualHost\u003e\n```\n\n### Python WSGI Integration\n\n```apache\n# Load WSGI module\nLoadModule wsgi_module modules/mod_wsgi.so\n\n\u003cVirtualHost *:443\u003e\n    ServerName app.example.com\n    DocumentRoot /var/www/python-app\n    \n    WSGIDaemonProcess app python-home=/var/www/python-app/venv python-path=/var/www/python-app\n    WSGIProcessGroup app\n    WSGIScriptAlias / /var/www/python-app/app.wsgi\n    \n    \u003cDirectory /var/www/python-app\u003e\n        WSGIApplicationGroup %{GLOBAL}\n        Require all granted\n    \u003c/Directory\u003e\n\u003c/VirtualHost\u003e\n```\n\n### Node.js Proxy Integration\n\n```apache\n\u003cVirtualHost *:443\u003e\n    ServerName node.example.com\n    \n    ProxyPreserveHost On\n    ProxyPass / http://localhost:3000/\n    ProxyPassReverse / http://localhost:3000/\n    \n    # WebSocket support\n    ProxyPass /socket.io/ ws://localhost:3000/socket.io/\n    ProxyPassReverse /socket.io/ ws://localhost:3000/socket.io/\n    \n    # Static files served by Apache\n    Alias /static /var/www/node-app/public\n    \u003cDirectory /var/www/node-app/public\u003e\n        Require all granted\n        ExpiresActive On\n        ExpiresDefault \"access plus 1 year\"\n    \u003c/Directory\u003e\n\u003c/VirtualHost\u003e\n```\n\n## Additional Resources\n\n- [Official Documentation](https://httpd.apache.org/docs/)\n- [GitHub Repository](https://github.com/apache/httpd)\n- [Security Guide](https://httpd.apache.org/docs/2.4/misc/security_tips.html)\n- [Performance Tuning](https://httpd.apache.org/docs/2.4/misc/perf-tuning.html)\n- [Apache Modules](https://httpd.apache.org/docs/2.4/mod/)\n- [Virtual Hosts Guide](https://httpd.apache.org/docs/2.4/vhosts/)\n- [SSL/TLS Guide](https://httpd.apache.org/docs/2.4/ssl/)\n- [Community Mailing Lists](https://httpd.apache.org/lists.html)\n\n---\n\n**Note:** This guide is part of the [HowToMgr](https://howtomgr.github.io) collection. Always refer to official documentation for the most up-to-date information.","readmeHtml":"\u003ch1 id=\"apache-http-server-installation-guide\" class=\"mobile-header\"\u003eApache HTTP Server Installation Guide\u003c/h1\u003e\n\u003cp class=\"mobile-paragraph\"\u003eApache HTTP Server is a free and open-source cross-platform web server software developed and maintained by the Apache Software Foundation. Originally based on the NCSA HTTPd server, Apache has been the most popular web server on the Internet since April 1996, serving over 40% of active websites. It serves as a FOSS alternative to commercial web servers like Microsoft IIS, NGINX Plus, or F5 BIG-IP, offering enterprise-grade performance, security, and flexibility without licensing costs.\u003c/p\u003e\n\u003ch2 id=\"prerequisites\" class=\"mobile-header\"\u003ePrerequisites\u003c/h2\u003e\n\u003cli class=\"mobile-list-item\"\u003e\u003cstrong\u003eHardware Requirements\u003c/strong\u003e:\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eCPU: 1 core minimum (2+ cores recommended for production)\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eRAM: 512MB minimum (2GB+ recommended for production)\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eStorage: 500MB for installation (additional space for websites and logs)\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eNetwork: Stable connectivity for serving web requests\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003e\u003cstrong\u003eOperating System\u003c/strong\u003e: \u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eLinux: Any modern distribution with kernel 2.6.32+\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003emacOS: 10.12+ (Sierra or newer)\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eWindows: Windows Server 2016+ or Windows 10\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eFreeBSD: 11.0+\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003e\u003cstrong\u003eNetwork Requirements\u003c/strong\u003e:\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003ePort 80 (HTTP)\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003ePort 443 (HTTPS)\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eAdditional ports for virtual hosts if needed\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003e\u003cstrong\u003eDependencies\u003c/strong\u003e:\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eOpenSSL for SSL/TLS support\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003ePCRE for regular expressions\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eAPR (Apache Portable Runtime) libraries\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eZlib for compression\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003e\u003cstrong\u003eSystem Access\u003c/strong\u003e: root or sudo privileges for installation\u003c/li\u003e\n\u003ch2 id=\"installation\" class=\"mobile-header\"\u003eInstallation\u003c/h2\u003e\n\u003ch3 id=\"rhelcentosrocky-linuxalmalinux\" class=\"mobile-header\"\u003eRHEL/CentOS/Rocky Linux/AlmaLinux\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Install Apache (httpd) and utilities\nsudo dnf install -y httpd httpd-tools mod_ssl mod_security\n\n# RHEL/CentOS 7 (using yum)\nsudo yum install -y epel-release\nsudo yum install -y httpd httpd-tools mod_ssl mod_security\n\n# Install additional modules\nsudo dnf install -y httpd-devel httpd-manual\n\n# Create necessary directories\nsudo mkdir -p /etc/httpd/conf.d\nsudo mkdir -p /var/log/httpd\nsudo mkdir -p /var/www/html\n\n# Set proper permissions\nsudo chown -R apache:apache /var/www/html\nsudo chown -R apache:apache /var/log/httpd\n\n# Enable and start service\nsudo systemctl enable --now httpd\n\n# Verify installation\nhttpd -v\nsudo systemctl status httpd\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"debianubuntu\" class=\"mobile-header\"\u003eDebian/Ubuntu\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Update package list\nsudo apt update\n\n# Install Apache and essential modules\nsudo apt install -y apache2 apache2-utils apache2-dev libapache2-mod-security2\n\n# Install additional tools\nsudo apt install -y apache2-doc ssl-cert\n\n# Enable essential modules\nsudo a2enmod rewrite ssl headers deflate expires security2 http2\n\n# Create necessary directories\nsudo mkdir -p /var/www/html\nsudo mkdir -p /var/log/apache2\n\n# Set proper permissions\nsudo chown -R www-data:www-data /var/www/html\nsudo chown -R www-data:www-data /var/log/apache2\n\n# Enable and start service\nsudo systemctl enable --now apache2\n\n# Verify installation\napache2ctl -v\nsudo systemctl status apache2\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"arch-linux\" class=\"mobile-header\"\u003eArch Linux\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Install Apache\nsudo pacman -S apache\n\n# Install additional modules\nsudo pacman -S apache-mod-security apache-mod-wsgi\n\n# Create apache user if not exists\nsudo useradd -r -d /srv/http -s /sbin/nologin -c \u0026quot;Apache HTTP Server\u0026quot; apache\n\n# Create necessary directories\nsudo mkdir -p /etc/httpd/conf.d\nsudo mkdir -p /var/log/httpd\nsudo mkdir -p /srv/http\n\n# Set proper permissions\nsudo chown -R apache:apache /srv/http\nsudo chown -R apache:apache /var/log/httpd\n\n# Edit main configuration\nsudo sed -i \u0026#039;s/#ServerName www.example.com:80/ServerName localhost:80/\u0026#039; /etc/httpd/conf/httpd.conf\n\n# Enable and start service\nsudo systemctl enable --now httpd\n\n# Verify installation\nhttpd -v\nsudo systemctl status httpd\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"alpine-linux\" class=\"mobile-header\"\u003eAlpine Linux\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Install Apache\napk add --no-cache apache2 apache2-ssl apache2-utils\n\n# Install additional modules\napk add --no-cache apache2-mod-wsgi apache2-mod-fcgid\n\n# Create apache user if not exists\nadduser -D -H -s /sbin/nologin -g apache apache\n\n# Create necessary directories\nmkdir -p /var/www/localhost/htdocs\nmkdir -p /var/log/apache2\nmkdir -p /run/apache2\n\n# Set proper permissions\nchown -R apache:apache /var/www/localhost/htdocs\nchown -R apache:apache /var/log/apache2\nchown -R apache:apache /run/apache2\n\n# Configure basic settings\nsed -i \u0026#039;s/#ServerName www.example.com:80/ServerName localhost:80/\u0026#039; /etc/apache2/httpd.conf\n\n# Enable and start service\nrc-update add apache2 default\nrc-service apache2 start\n\n# Verify installation\nhttpd -v\nrc-service apache2 status\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"opensusesles\" class=\"mobile-header\"\u003eopenSUSE/SLES\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# openSUSE Leap/Tumbleweed\nsudo zypper install -y apache2 apache2-mod_ssl apache2-utils\n\n# Install additional modules\nsudo zypper install -y apache2-mod_security2 apache2-mod_wsgi\n\n# SLES 15\n# Enable web and scripting module\nsudo SUSEConnect -p sle-module-web-scripting/15.5/x86_64\nsudo zypper install -y apache2 apache2-mod_ssl\n\n# Create necessary directories\nsudo mkdir -p /etc/apache2/conf.d\nsudo mkdir -p /var/log/apache2\nsudo mkdir -p /srv/www/htdocs\n\n# Set proper permissions\nsudo chown -R wwwrun:www /srv/www/htdocs\nsudo chown -R wwwrun:www /var/log/apache2\n\n# Enable modules\nsudo a2enmod ssl\nsudo a2enmod rewrite\nsudo a2enmod headers\n\n# Enable and start service\nsudo systemctl enable --now apache2\n\n# Verify installation\napache2ctl -v\nsudo systemctl status apache2\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"macos\" class=\"mobile-header\"\u003emacOS\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Using Homebrew\nbrew install httpd\n\n# Start as service\nbrew services start httpd\n\n# Or run manually\nsudo /usr/local/bin/httpd -D FOREGROUND\n\n# Configuration location: /usr/local/etc/httpd/httpd.conf\n# Alternative: /opt/homebrew/etc/httpd/httpd.conf (Apple Silicon)\n\n# Create necessary directories\nsudo mkdir -p /usr/local/var/log/httpd\nsudo mkdir -p /usr/local/var/www\n\n# Set basic configuration\nsed -i \u0026#039;\u0026#039; \u0026#039;s/#ServerName www.example.com:8080/ServerName localhost:8080/\u0026#039; /usr/local/etc/httpd/httpd.conf\n\n# Verify installation\n/usr/local/bin/httpd -v\nbrew services list | grep httpd\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"freebsd\" class=\"mobile-header\"\u003eFreeBSD\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Using pkg\npkg install apache24\n\n# Using ports\ncd /usr/ports/www/apache24\nmake install clean\n\n# Enable in rc.conf\necho \u0026#039;apache24_enable=\u0026quot;YES\u0026quot;\u0026#039; \u0026gt;\u0026gt; /etc/rc.conf\n\n# Create necessary directories\nmkdir -p /var/log/httpd\nmkdir -p /usr/local/www/apache24/data\n\n# Set proper permissions\nchown -R www:www /usr/local/www/apache24/data\nchown -R www:www /var/log/httpd\n\n# Start service\nservice apache24 start\n\n# Verify installation\n/usr/local/sbin/httpd -v\nservice apache24 status\n\n# Configuration location: /usr/local/etc/apache24/httpd.conf\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"windows\" class=\"mobile-header\"\u003eWindows\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"powershell\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003epowershell\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-powershell\"\u003e# Method 1: Using Chocolatey\nchoco install apache-httpd\n\n# Method 2: Using Scoop\nscoop bucket add extras\nscoop install apache\n\n# Method 3: Manual installation from Apache Lounge\n# Download from https://www.apachelounge.com/download/\n# Extract to C:\\Apache24\n\n# Install as Windows service\nC:\\Apache24\\bin\\httpd.exe -k install -n Apache24\n\n# Start service\nStart-Service Apache24\n\n# Or using net command\nnet start Apache24\n\n# Configuration location: C:\\Apache24\\conf\\httpd.conf\n# Document root: C:\\Apache24\\htdocs\n\n# Verify installation\nC:\\Apache24\\bin\\httpd.exe -v\nGet-Service Apache24\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"initial-configuration\" class=\"mobile-header\"\u003eInitial Configuration\u003c/h2\u003e\n\u003ch3 id=\"first-run-setup\" class=\"mobile-header\"\u003eFirst-Run Setup\u003c/h3\u003e\n\u003cp class=\"mobile-paragraph\"\u003e1. \u003cstrong\u003eCreate apache user\u003c/strong\u003e (if not created by package):\u003c/p\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Linux systems\nsudo useradd -r -d /var/www -s /sbin/nologin -c \u0026quot;Apache HTTP Server\u0026quot; apache\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003cp class=\"mobile-paragraph\"\u003e2. \u003cstrong\u003eDefault configuration locations\u003c/strong\u003e:\u003c/p\u003e\n\u003cli class=\"mobile-list-item\"\u003eRHEL/CentOS/Rocky/AlmaLinux: \u003ccode class=\"mobile-inline-code\"\u003e/etc/httpd/conf/httpd.conf\u003c/code\u003e\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eDebian/Ubuntu: \u003ccode class=\"mobile-inline-code\"\u003e/etc/apache2/apache2.conf\u003c/code\u003e\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eArch Linux: \u003ccode class=\"mobile-inline-code\"\u003e/etc/httpd/conf/httpd.conf\u003c/code\u003e\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eAlpine Linux: \u003ccode class=\"mobile-inline-code\"\u003e/etc/apache2/httpd.conf\u003c/code\u003e\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eopenSUSE/SLES: \u003ccode class=\"mobile-inline-code\"\u003e/etc/apache2/httpd.conf\u003c/code\u003e\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003emacOS: \u003ccode class=\"mobile-inline-code\"\u003e/usr/local/etc/httpd/httpd.conf\u003c/code\u003e\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eFreeBSD: \u003ccode class=\"mobile-inline-code\"\u003e/usr/local/etc/apache24/httpd.conf\u003c/code\u003e\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eWindows: \u003ccode class=\"mobile-inline-code\"\u003eC:\\Apache24\\conf\\httpd.conf\u003c/code\u003e\u003c/li\u003e\n\u003cp class=\"mobile-paragraph\"\u003e3. \u003cstrong\u003eEssential settings to change\u003c/strong\u003e:\u003c/p\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"apache\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003eapache\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-apache\"\u003e# Basic security settings\nServerTokens Prod\nServerSignature Off\n\n# Set server name\nServerName localhost:80\n\n# Basic security modules\nLoadModule headers_module modules/mod_headers.so\nLoadModule rewrite_module modules/mod_rewrite.so\nLoadModule ssl_module modules/mod_ssl.so\n\n# Security headers\nHeader always set X-Frame-Options \u0026quot;SAMEORIGIN\u0026quot;\nHeader always set X-Content-Type-Options \u0026quot;nosniff\u0026quot;\nHeader always set X-XSS-Protection \u0026quot;1; mode=block\u0026quot;\n\n# Hide .htaccess files\n\u0026lt;FilesMatch \u0026quot;^\\.ht\u0026quot;\u0026gt;\n    Require all denied\n\u0026lt;/FilesMatch\u0026gt;\n\n# Disable directory browsing by default\nOptions -Indexes\n\n# Basic virtual host\n\u0026lt;VirtualHost *:80\u0026gt;\n    ServerName localhost\n    DocumentRoot /var/www/html\n    ErrorLog logs/error_log\n    CustomLog logs/access_log common\n\u0026lt;/VirtualHost\u0026gt;\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"testing-initial-setup\" class=\"mobile-header\"\u003eTesting Initial Setup\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Test configuration syntax\nsudo apache2ctl configtest  # Debian/Ubuntu\nsudo httpd -t               # RHEL/CentOS/Arch\n\n# Check loaded modules\napache2ctl -M  # Debian/Ubuntu\nhttpd -M       # RHEL/CentOS/Arch\n\n# Test HTTP response\ncurl -I http://localhost\n\n# Check if Apache is listening\nsudo ss -tlnp | grep :80\nsudo netstat -tlnp | grep :80\n\n# View virtual host configuration\napache2ctl -S  # Debian/Ubuntu\nhttpd -S       # RHEL/CentOS/Arch\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003cp class=\"mobile-paragraph\"\u003e\u003cstrong\u003eWARNING:\u003c/strong\u003e Never expose Apache to the public internet without proper security hardening!\u003c/p\u003e\n\u003ch2 id=\"service-management\" class=\"mobile-header\"\u003eService Management\u003c/h2\u003e\n\u003ch3 id=\"systemd-rhel-debian-ubuntu-arch-opensuse\" class=\"mobile-header\"\u003esystemd (RHEL, Debian, Ubuntu, Arch, openSUSE)\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Enable Apache to start on boot\nsudo systemctl enable apache2  # Debian/Ubuntu\nsudo systemctl enable httpd    # RHEL/CentOS/Arch\n\n# Start Apache\nsudo systemctl start apache2   # Debian/Ubuntu\nsudo systemctl start httpd     # RHEL/CentOS/Arch\n\n# Stop Apache\nsudo systemctl stop apache2    # Debian/Ubuntu\nsudo systemctl stop httpd      # RHEL/CentOS/Arch\n\n# Restart Apache\nsudo systemctl restart apache2 # Debian/Ubuntu\nsudo systemctl restart httpd   # RHEL/CentOS/Arch\n\n# Graceful reload (reload config without dropping connections)\nsudo systemctl reload apache2  # Debian/Ubuntu\nsudo systemctl reload httpd    # RHEL/CentOS/Arch\n\n# Check status\nsudo systemctl status apache2  # Debian/Ubuntu\nsudo systemctl status httpd    # RHEL/CentOS/Arch\n\n# View logs\nsudo journalctl -u apache2 -f  # Debian/Ubuntu\nsudo journalctl -u httpd -f    # RHEL/CentOS/Arch\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"openrc-alpine-linux\" class=\"mobile-header\"\u003eOpenRC (Alpine Linux)\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Enable Apache to start on boot\nrc-update add apache2 default\n\n# Start Apache\nrc-service apache2 start\n\n# Stop Apache\nrc-service apache2 stop\n\n# Restart Apache\nrc-service apache2 restart\n\n# Graceful reload\nrc-service apache2 reload\n\n# Check status\nrc-service apache2 status\n\n# View logs\ntail -f /var/log/apache2/error.log\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"rcd-freebsd\" class=\"mobile-header\"\u003erc.d (FreeBSD)\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Enable in /etc/rc.conf\necho \u0026#039;apache24_enable=\u0026quot;YES\u0026quot;\u0026#039; \u0026gt;\u0026gt; /etc/rc.conf\n\n# Start Apache\nservice apache24 start\n\n# Stop Apache\nservice apache24 stop\n\n# Restart Apache\nservice apache24 restart\n\n# Graceful reload\nservice apache24 graceful\n\n# Check status\nservice apache24 status\n\n# View configuration test\nservice apache24 configtest\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"launchd-macos\" class=\"mobile-header\"\u003elaunchd (macOS)\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Using Homebrew services\nbrew services start httpd\nbrew services stop httpd\nbrew services restart httpd\n\n# Check status\nbrew services list | grep httpd\n\n# Manual control\nsudo /usr/local/bin/httpd -k start\nsudo /usr/local/bin/httpd -k stop\nsudo /usr/local/bin/httpd -k restart\nsudo /usr/local/bin/httpd -k graceful\n\n# Test configuration\n/usr/local/bin/httpd -t\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"windows-service-manager\" class=\"mobile-header\"\u003eWindows Service Manager\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"powershell\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003epowershell\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-powershell\"\u003e# Start Apache service\nStart-Service Apache24\n# Or: net start Apache24\n\n# Stop Apache service\nStop-Service Apache24\n# Or: net stop Apache24\n\n# Restart Apache service\nRestart-Service Apache24\n\n# Check status\nGet-Service Apache24\n\n# Manual control\nC:\\Apache24\\bin\\httpd.exe -k start\nC:\\Apache24\\bin\\httpd.exe -k stop\nC:\\Apache24\\bin\\httpd.exe -k restart\n\n# Test configuration\nC:\\Apache24\\bin\\httpd.exe -t\n\n# View logs\nGet-Content C:\\Apache24\\logs\\error.log -Wait\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"advanced-configuration\" class=\"mobile-header\"\u003eAdvanced Configuration\u003c/h2\u003e\n\u003ch3 id=\"virtual-hosts\" class=\"mobile-header\"\u003eVirtual Hosts\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"apache\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003eapache\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-apache\"\u003e# /etc/apache2/sites-available/example.com.conf (Debian/Ubuntu)\n# /etc/httpd/conf.d/example.com.conf (RHEL/CentOS)\n\n\u0026lt;VirtualHost *:80\u0026gt;\n    ServerName example.com\n    ServerAlias www.example.com\n    DocumentRoot /var/www/example.com/public_html\n    \n    # Logging\n    ErrorLog ${APACHE_LOG_DIR}/example.com_error.log\n    CustomLog ${APACHE_LOG_DIR}/example.com_access.log combined\n    \n    # Security\n    \u0026lt;Directory /var/www/example.com/public_html\u0026gt;\n        Options -Indexes +FollowSymLinks\n        AllowOverride All\n        Require all granted\n        \n        # Hide sensitive files\n        \u0026lt;Files ~ \u0026quot;^\\.(htaccess|htpasswd|env)$\u0026quot;\u0026gt;\n            Require all denied\n        \u0026lt;/Files\u0026gt;\n    \u0026lt;/Directory\u0026gt;\n\u0026lt;/VirtualHost\u0026gt;\n\n# SSL Virtual Host\n\u0026lt;VirtualHost *:443\u0026gt;\n    ServerName example.com\n    ServerAlias www.example.com\n    DocumentRoot /var/www/example.com/public_html\n    \n    # SSL Configuration\n    SSLEngine on\n    SSLCertificateFile /etc/letsencrypt/live/example.com/fullchain.pem\n    SSLCertificateKeyFile /etc/letsencrypt/live/example.com/privkey.pem\n    \n    # Modern SSL configuration\n    SSLProtocol all -SSLv3 -TLSv1 -TLSv1.1\n    SSLCipherSuite ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384\n    SSLHonorCipherOrder off\n    SSLSessionTickets off\n    \n    # Security headers\n    Header always set Strict-Transport-Security \u0026quot;max-age=63072000; includeSubDomains; preload\u0026quot;\n    Header always set X-Frame-Options \u0026quot;SAMEORIGIN\u0026quot;\n    Header always set X-Content-Type-Options \u0026quot;nosniff\u0026quot;\n    Header always set X-XSS-Protection \u0026quot;1; mode=block\u0026quot;\n    \n    # Logging\n    ErrorLog ${APACHE_LOG_DIR}/example.com_ssl_error.log\n    CustomLog ${APACHE_LOG_DIR}/example.com_ssl_access.log combined\n\u0026lt;/VirtualHost\u0026gt;\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"performance-tuning\" class=\"mobile-header\"\u003ePerformance Tuning\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"apache\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003eapache\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-apache\"\u003e# MPM Event configuration (modern and efficient)\n\u0026lt;IfModule mpm_event_module\u0026gt;\n    StartServers             3\n    MinSpareThreads         75\n    MaxSpareThreads        250\n    ThreadsPerChild         25\n    MaxRequestWorkers      400\n    MaxConnectionsPerChild   0\n    ThreadLimit             64\n\u0026lt;/IfModule\u0026gt;\n\n# Compression\n\u0026lt;IfModule mod_deflate.c\u0026gt;\n    SetOutputFilter DEFLATE\n    AddOutputFilterByType DEFLATE text/html text/css text/javascript text/xml text/plain\n    AddOutputFilterByType DEFLATE application/javascript application/xml+rss application/xml\n    AddOutputFilterByType DEFLATE application/json application/x-javascript\n    \n    # Don\u0026#039;t compress images\n    SetEnvIfNoCase Request_URI \\.(?:gif|jpe?g|png|webp)$ no-gzip\n    SetEnvIfNoCase Request_URI \\.(?:exe|t?gz|zip|bz2|sit|rar)$ no-gzip\n\u0026lt;/IfModule\u0026gt;\n\n# Caching\n\u0026lt;IfModule mod_expires.c\u0026gt;\n    ExpiresActive On\n    ExpiresByType image/jpg \u0026quot;access plus 1 year\u0026quot;\n    ExpiresByType image/jpeg \u0026quot;access plus 1 year\u0026quot;\n    ExpiresByType image/gif \u0026quot;access plus 1 year\u0026quot;\n    ExpiresByType image/png \u0026quot;access plus 1 year\u0026quot;\n    ExpiresByType image/webp \u0026quot;access plus 1 year\u0026quot;\n    ExpiresByType text/css \u0026quot;access plus 1 month\u0026quot;\n    ExpiresByType application/pdf \u0026quot;access plus 1 month\u0026quot;\n    ExpiresByType application/javascript \u0026quot;access plus 1 month\u0026quot;\n    ExpiresByType application/x-javascript \u0026quot;access plus 1 month\u0026quot;\n    ExpiresByType image/x-icon \u0026quot;access plus 1 year\u0026quot;\n    ExpiresDefault \u0026quot;access plus 2 days\u0026quot;\n\u0026lt;/IfModule\u0026gt;\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"security-hardening\" class=\"mobile-header\"\u003eSecurity Hardening\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"apache\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003eapache\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-apache\"\u003e# Security configuration\nServerTokens Prod\nServerSignature Off\n\n# Disable unnecessary HTTP methods\n\u0026lt;LimitExcept GET POST HEAD\u0026gt;\n    Require all denied\n\u0026lt;/LimitExcept\u0026gt;\n\n# Hide server information\nHeader always unset Server\nHeader unset X-Powered-By\n\n# Security headers\nHeader always set Strict-Transport-Security \u0026quot;max-age=63072000; includeSubDomains; preload\u0026quot;\nHeader always set X-Frame-Options \u0026quot;SAMEORIGIN\u0026quot;\nHeader always set X-Content-Type-Options \u0026quot;nosniff\u0026quot;\nHeader always set X-XSS-Protection \u0026quot;1; mode=block\u0026quot;\nHeader always set Referrer-Policy \u0026quot;strict-origin-when-cross-origin\u0026quot;\n\n# Disable TRACE method\nTraceEnable off\n\n# Timeout settings\nTimeout 60\nKeepAliveTimeout 15\n\n# Request limits\nLimitRequestBody 10485760  # 10MB\nLimitRequestFields 100\nLimitRequestFieldSize 8190\nLimitRequestLine 4094\n\n# Hide sensitive files\n\u0026lt;FilesMatch \u0026quot;^\\.\u0026quot;\u0026gt;\n    Require all denied\n\u0026lt;/FilesMatch\u0026gt;\n\n\u0026lt;FilesMatch \u0026quot;\\.(bak|backup|swp|tmp|~)$\u0026quot;\u0026gt;\n    Require all denied\n\u0026lt;/FilesMatch\u0026gt;\n\n# Disable server-status and server-info\n\u0026lt;Location \u0026quot;/server-status\u0026quot;\u0026gt;\n    Require ip 127.0.0.1\n    Require ip ::1\n\u0026lt;/Location\u0026gt;\n\n\u0026lt;Location \u0026quot;/server-info\u0026quot;\u0026gt;\n    Require ip 127.0.0.1\n    Require ip ::1\n\u0026lt;/Location\u0026gt;\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"reverse-proxy-setup\" class=\"mobile-header\"\u003eReverse Proxy Setup\u003c/h2\u003e\n\u003ch3 id=\"nginx-as-frontend-proxy\" class=\"mobile-header\"\u003enginx as Frontend Proxy\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"nginx\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003enginx\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-nginx\"\u003e# /etc/nginx/sites-available/apache-proxy\nupstream apache_backend {\n    server 127.0.0.1:8080;\n    keepalive 32;\n}\n\nserver {\n    listen 80;\n    server_name example.com www.example.com;\n    return 301 https://$server_name$request_uri;\n}\n\nserver {\n    listen 443 ssl http2;\n    server_name example.com www.example.com;\n\n    ssl_certificate /etc/letsencrypt/live/example.com/fullchain.pem;\n    ssl_certificate_key /etc/letsencrypt/live/example.com/privkey.pem;\n\n    location / {\n        proxy_pass http://apache_backend;\n        proxy_set_header Host $host;\n        proxy_set_header X-Real-IP $remote_addr;\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n        proxy_set_header X-Forwarded-Proto $scheme;\n        \n        # Handle Apache redirects\n        proxy_redirect http://apache_backend https://$server_name;\n    }\n    \n    # Serve static files directly with nginx\n    location ~* \\.(css|js|png|jpg|jpeg|gif|ico|svg|woff|woff2|ttf|eot)$ {\n        try_files $uri @apache;\n        expires 1y;\n        add_header Cache-Control \u0026quot;public, immutable\u0026quot;;\n    }\n    \n    location @apache {\n        proxy_pass http://apache_backend;\n        proxy_set_header Host $host;\n        proxy_set_header X-Real-IP $remote_addr;\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n        proxy_set_header X-Forwarded-Proto $scheme;\n    }\n}\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"haproxy-configuration\" class=\"mobile-header\"\u003eHAProxy Configuration\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"haproxy\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ehaproxy\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-haproxy\"\u003e# /etc/haproxy/haproxy.cfg\nglobal\n    maxconn 4096\n    log stdout local0\n    chroot /var/lib/haproxy\n    stats socket /run/haproxy/admin.sock mode 660 level admin\n    stats timeout 30s\n    user haproxy\n    group haproxy\n    daemon\n\ndefaults\n    mode http\n    log global\n    option httplog\n    option dontlognull\n    option log-health-checks\n    timeout connect 5000\n    timeout client 50000\n    timeout server 50000\n    errorfile 400 /etc/haproxy/errors/400.http\n    errorfile 403 /etc/haproxy/errors/403.http\n    errorfile 408 /etc/haproxy/errors/408.http\n    errorfile 500 /etc/haproxy/errors/500.http\n    errorfile 502 /etc/haproxy/errors/502.http\n    errorfile 503 /etc/haproxy/errors/503.http\n    errorfile 504 /etc/haproxy/errors/504.http\n\nfrontend apache_frontend\n    bind *:80\n    bind *:443 ssl crt /etc/ssl/certs/example.com.pem\n    \n    # Redirect HTTP to HTTPS\n    redirect scheme https if !{ ssl_fc }\n    \n    # Security headers\n    http-response set-header Strict-Transport-Security \u0026quot;max-age=63072000; includeSubDomains; preload\u0026quot;\n    http-response set-header X-Frame-Options SAMEORIGIN\n    http-response set-header X-Content-Type-Options nosniff\n    \n    default_backend apache_servers\n\nbackend apache_servers\n    balance roundrobin\n    option httpchk GET / HTTP/1.1\\r\\nHost:\\ localhost\n    server apache1 127.0.0.1:8080 check\n    server apache2 127.0.0.1:8081 check backup\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"caddy-configuration\" class=\"mobile-header\"\u003eCaddy Configuration\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"caddyfile\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ecaddyfile\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-caddyfile\"\u003eexample.com www.example.com {\n    reverse_proxy localhost:8080\n    \n    # Security headers\n    header {\n        Strict-Transport-Security \u0026quot;max-age=63072000; includeSubDomains; preload\u0026quot;\n        X-Frame-Options \u0026quot;SAMEORIGIN\u0026quot;\n        X-Content-Type-Options \u0026quot;nosniff\u0026quot;\n        X-XSS-Protection \u0026quot;1; mode=block\u0026quot;\n    }\n    \n    # Compression\n    encode gzip\n    \n    # Logging\n    log {\n        output file /var/log/caddy/example.com.log\n        level INFO\n    }\n}\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"apache-as-reverse-proxy\" class=\"mobile-header\"\u003eApache as Reverse Proxy\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"apache\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003eapache\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-apache\"\u003e# Enable required modules\nLoadModule proxy_module modules/mod_proxy.so\nLoadModule proxy_http_module modules/mod_proxy_http.so\nLoadModule proxy_balancer_module modules/mod_proxy_balancer.so\n\n\u0026lt;VirtualHost *:80\u0026gt;\n    ServerName example.com\n    \n    # Proxy configuration\n    ProxyPreserveHost On\n    ProxyPass / http://backend-server:8080/\n    ProxyPassReverse / http://backend-server:8080/\n    \n    # Load balancing\n    ProxyPass /app/ balancer://mycluster/\n    ProxyPassReverse /app/ balancer://mycluster/\n    \n    \u0026lt;Proxy balancer://mycluster\u0026gt;\n        BalancerMember http://backend1:8080\n        BalancerMember http://backend2:8080\n        ProxySet hcmethod GET\n        ProxySet hcuri /health\n    \u0026lt;/Proxy\u0026gt;\n    \n    # Balancer manager\n    \u0026lt;Location \u0026quot;/balancer-manager\u0026quot;\u0026gt;\n        SetHandler balancer-manager\n        Require ip 127.0.0.1\n        Require ip ::1\n    \u0026lt;/Location\u0026gt;\n\u0026lt;/VirtualHost\u0026gt;\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"security-configuration\" class=\"mobile-header\"\u003eSecurity Configuration\u003c/h2\u003e\n\u003ch3 id=\"ssltls-configuration\" class=\"mobile-header\"\u003eSSL/TLS Configuration\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"apache\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003eapache\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-apache\"\u003e# Load SSL module\nLoadModule ssl_module modules/mod_ssl.so\n\n# Global SSL configuration\nSSLEngine on\nSSLProtocol all -SSLv3 -TLSv1 -TLSv1.1\nSSLCipherSuite ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384\nSSLHonorCipherOrder off\nSSLSessionCache shmcb:/var/run/ssl_scache(512000)\nSSLSessionCacheTimeout 300\nSSLUseStapling On\nSSLStaplingCache shmcb:/var/run/ocsp(128000)\nSSLCompression off\nSSLSessionTickets off\n\n# Generate DH parameters\n# openssl dhparam -out /etc/ssl/certs/dhparam.pem 2048\nSSLOpenSSLConfCmd DHParameters /etc/ssl/certs/dhparam.pem\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"modsecurity-waf\" class=\"mobile-header\"\u003eModSecurity WAF\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Install ModSecurity\n# Ubuntu/Debian\nsudo apt install libapache2-mod-security2\n\n# RHEL/CentOS\nsudo dnf install mod_security\n\n# Enable module\nsudo a2enmod security2  # Ubuntu/Debian\n\n# Download OWASP Core Rule Set\nsudo mkdir -p /etc/modsecurity\ncd /etc/modsecurity\nsudo wget https://github.com/coreruleset/coreruleset/archive/v3.3.4.tar.gz\nsudo tar xzf v3.3.4.tar.gz\nsudo mv coreruleset-3.3.4 crs\nsudo cp crs/crs-setup.conf.example crs/crs-setup.conf\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"apache\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003eapache\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-apache\"\u003e# ModSecurity configuration\n\u0026lt;IfModule mod_security2.c\u0026gt;\n    SecRuleEngine On\n    SecRequestBodyAccess On\n    SecRequestBodyLimit 13107200\n    SecRequestBodyNoFilesLimit 131072\n    SecRequestBodyInMemoryLimit 131072\n    SecRequestBodyLimitAction Reject\n    SecResponseBodyAccess Off\n    SecDebugLog /var/log/apache2/modsec_debug.log\n    SecDebugLogLevel 0\n    SecAuditEngine RelevantOnly\n    SecAuditLogRelevantStatus \u0026quot;^(?:5|4(?!04))\u0026quot;\n    SecAuditLogParts ABDEFHIJZ\n    SecAuditLogType Serial\n    SecAuditLog /var/log/apache2/modsec_audit.log\n    \n    # Include OWASP Core Rule Set\n    Include /etc/modsecurity/crs/crs-setup.conf\n    Include /etc/modsecurity/crs/rules/*.conf\n\u0026lt;/IfModule\u0026gt;\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"firewall-rules\" class=\"mobile-header\"\u003eFirewall Rules\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# UFW (Ubuntu/Debian)\nsudo ufw allow \u0026#039;Apache Full\u0026#039;    # HTTP and HTTPS\nsudo ufw allow 80/tcp\nsudo ufw allow 443/tcp\nsudo ufw enable\n\n# firewalld (RHEL/CentOS/openSUSE)\nsudo firewall-cmd --permanent --add-service=http\nsudo firewall-cmd --permanent --add-service=https\nsudo firewall-cmd --reload\n\n# iptables\nsudo iptables -A INPUT -p tcp --dport 80 -j ACCEPT\nsudo iptables -A INPUT -p tcp --dport 443 -j ACCEPT\nsudo iptables-save \u0026gt; /etc/iptables/rules.v4\n\n# pf (FreeBSD)\n# Add to /etc/pf.conf\npass in on $ext_if proto tcp from any to any port {80, 443}\n\n# Windows Firewall\nNew-NetFirewallRule -DisplayName \u0026quot;Apache HTTP\u0026quot; -Direction Inbound -Protocol TCP -LocalPort 80 -Action Allow\nNew-NetFirewallRule -DisplayName \u0026quot;Apache HTTPS\u0026quot; -Direction Inbound -Protocol TCP -LocalPort 443 -Action Allow\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"access-control\" class=\"mobile-header\"\u003eAccess Control\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"apache\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003eapache\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-apache\"\u003e# IP-based access control\n\u0026lt;Directory \u0026quot;/var/www/admin\u0026quot;\u0026gt;\n    Require ip 192.168.1.0/24\n    Require ip 127.0.0.1\n    Require ip ::1\n\u0026lt;/Directory\u0026gt;\n\n# Password protection\n\u0026lt;Directory \u0026quot;/var/www/private\u0026quot;\u0026gt;\n    AuthType Basic\n    AuthName \u0026quot;Restricted Area\u0026quot;\n    AuthUserFile /etc/apache2/.htpasswd\n    Require valid-user\n\u0026lt;/Directory\u0026gt;\n\n# Create password file\n# htpasswd -c /etc/apache2/.htpasswd username\n\n# Client certificate authentication\n\u0026lt;Directory \u0026quot;/var/www/secure\u0026quot;\u0026gt;\n    SSLRequireSSL\n    SSLVerifyClient require\n    SSLVerifyDepth 1\n    SSLCACertificateFile /etc/ssl/certs/ca.crt\n\u0026lt;/Directory\u0026gt;\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"database-setup\" class=\"mobile-header\"\u003eDatabase Setup\u003c/h2\u003e\n\u003cp class=\"mobile-paragraph\"\u003eApache HTTP Server doesn't require a database, but it commonly integrates with databases through various modules and applications:\u003c/p\u003e\n\u003ch3 id=\"php-database-integration\" class=\"mobile-header\"\u003ePHP Database Integration\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"apache\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003eapache\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-apache\"\u003e# PHP module configuration\nLoadModule php_module modules/libphp.so\n\n\u0026lt;IfModule mod_php.c\u0026gt;\n    AddType application/x-httpd-php .php\n    php_admin_flag allow_url_include Off\n    php_admin_flag allow_url_fopen Off\n    php_admin_value upload_max_filesize 64M\n    php_admin_value post_max_size 64M\n    php_admin_value memory_limit 256M\n    php_admin_value max_execution_time 300\n    php_admin_flag expose_php Off\n\u0026lt;/IfModule\u0026gt;\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"database-connection-examples\" class=\"mobile-header\"\u003eDatabase Connection Examples\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"apache\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003eapache\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-apache\"\u003e# Environment variables for database connections\nSetEnv DB_HOST localhost\nSetEnv DB_NAME myapp\nSetEnv DB_USER webapp\nSetEnv DB_PASS secretpassword\n\n# Secure environment variables from external access\n\u0026lt;Location \u0026quot;/server-status\u0026quot;\u0026gt;\n    SetHandler server-status\n    Require local\n\u0026lt;/Location\u0026gt;\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"cgi-database-applications\" class=\"mobile-header\"\u003eCGI Database Applications\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"apache\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003eapache\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-apache\"\u003e# Enable CGI for database applications\nLoadModule cgi_module modules/mod_cgi.so\n\n\u0026lt;Directory \u0026quot;/var/www/cgi-bin\u0026quot;\u0026gt;\n    AllowOverride None\n    Options +ExecCGI\n    AddHandler cgi-script .cgi .pl .py\n    Require all granted\n\u0026lt;/Directory\u0026gt;\n\n# Python WSGI for database applications\nLoadModule wsgi_module modules/mod_wsgi.so\n\nWSGIDaemonProcess myapp python-home=/path/to/venv python-path=/path/to/app\nWSGIProcessGroup myapp\nWSGIScriptAlias / /path/to/app/app.wsgi\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"performance-optimization\" class=\"mobile-header\"\u003ePerformance Optimization\u003c/h2\u003e\n\u003ch3 id=\"system-level-tuning\" class=\"mobile-header\"\u003eSystem-level Tuning\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Increase system limits for Apache\nsudo tee -a /etc/security/limits.conf \u0026lt;\u0026lt;EOF\napache soft nofile 65535\napache hard nofile 65535\nwww-data soft nofile 65535\nwww-data hard nofile 65535\nEOF\n\n# Kernel optimization for web servers\nsudo tee -a /etc/sysctl.conf \u0026lt;\u0026lt;EOF\n# Apache optimization\nnet.core.somaxconn = 65535\nnet.core.netdev_max_backlog = 5000\nnet.ipv4.tcp_max_syn_backlog = 65535\nnet.ipv4.tcp_fin_timeout = 10\nnet.ipv4.tcp_tw_reuse = 1\nnet.ipv4.ip_local_port_range = 15000 65000\nfs.file-max = 100000\n\n# Memory management\nvm.swappiness = 10\nvm.dirty_ratio = 15\nvm.dirty_background_ratio = 5\nEOF\n\nsudo sysctl -p\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"apache-performance-settings\" class=\"mobile-header\"\u003eApache Performance Settings\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"apache\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003eapache\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-apache\"\u003e# Optimized MPM Event configuration\n\u0026lt;IfModule mpm_event_module\u0026gt;\n    StartServers             4\n    MinSpareThreads         25\n    MaxSpareThreads        75 \n    ThreadsPerChild         25\n    MaxRequestWorkers      400\n    MaxConnectionsPerChild   0\n    ThreadLimit             64\n    ServerLimit             16\n    AsyncRequestWorkerFactor 2\n\u0026lt;/IfModule\u0026gt;\n\n# Connection settings\nKeepAlive On\nKeepAliveTimeout 15\nMaxKeepAliveRequests 100\n\n# Timeout settings\nTimeout 60\nLimitRequestLine 4094\nLimitRequestFieldSize 8190\nLimitRequestFields 100\nLimitRequestBody 10485760\n\n# Buffer settings\nEnableSendfile On\nEnableMMAP On\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"caching-configuration\" class=\"mobile-header\"\u003eCaching Configuration\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"apache\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003eapache\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-apache\"\u003e# Enable caching modules\nLoadModule cache_module modules/mod_cache.so\nLoadModule cache_disk_module modules/mod_cache_disk.so\n\n# Disk cache configuration\n\u0026lt;IfModule mod_cache_disk.c\u0026gt;\n    CacheRoot /var/cache/apache2\n    CacheDirLevels 2\n    CacheDirLength 1\n    CacheEnable disk /\n    CacheIgnoreHeaders Set-Cookie\n    CacheDefaultExpire 3600\n    CacheMaxExpire 86400\n    CacheLastModifiedFactor 0.1\n    CacheHeader on\n\u0026lt;/IfModule\u0026gt;\n\n# Memory cache (alternative to disk cache)\nLoadModule cache_socache_module modules/mod_cache_socache.so\n\n\u0026lt;IfModule mod_cache_socache.c\u0026gt;\n    CacheEnable socache /\n    CacheSocache shmcb\n    CacheSocacheMaxSize 102400\n\u0026lt;/IfModule\u0026gt;\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"content-optimization\" class=\"mobile-header\"\u003eContent Optimization\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"apache\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003eapache\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-apache\"\u003e# Compression\n\u0026lt;IfModule mod_deflate.c\u0026gt;\n    SetOutputFilter DEFLATE\n    AddOutputFilterByType DEFLATE text/html text/css text/javascript text/xml text/plain\n    AddOutputFilterByType DEFLATE application/javascript application/xml+rss application/xml\n    AddOutputFilterByType DEFLATE application/json application/x-javascript application/xhtml+xml\n    \n    # Don\u0026#039;t compress images or binaries\n    SetEnvIfNoCase Request_URI \\.(?:gif|jpe?g|png|webp|pdf|zip|rar|exe)$ no-gzip\n    \n    # Compression level (1-9, 6 is good balance)\n    DeflateCompressionLevel 6\n\u0026lt;/IfModule\u0026gt;\n\n# Static file caching\n\u0026lt;IfModule mod_expires.c\u0026gt;\n    ExpiresActive On\n    \n    # Images\n    ExpiresByType image/jpg \u0026quot;access plus 1 year\u0026quot;\n    ExpiresByType image/jpeg \u0026quot;access plus 1 year\u0026quot;\n    ExpiresByType image/gif \u0026quot;access plus 1 year\u0026quot;\n    ExpiresByType image/png \u0026quot;access plus 1 year\u0026quot;\n    ExpiresByType image/webp \u0026quot;access plus 1 year\u0026quot;\n    ExpiresByType image/svg+xml \u0026quot;access plus 1 year\u0026quot;\n    \n    # CSS and JavaScript\n    ExpiresByType text/css \u0026quot;access plus 1 month\u0026quot;\n    ExpiresByType application/javascript \u0026quot;access plus 1 month\u0026quot;\n    ExpiresByType application/x-javascript \u0026quot;access plus 1 month\u0026quot;\n    \n    # Fonts\n    ExpiresByType font/woff \u0026quot;access plus 1 year\u0026quot;\n    ExpiresByType font/woff2 \u0026quot;access plus 1 year\u0026quot;\n    ExpiresByType application/font-woff \u0026quot;access plus 1 year\u0026quot;\n    ExpiresByType application/font-woff2 \u0026quot;access plus 1 year\u0026quot;\n    \n    # Icons\n    ExpiresByType image/x-icon \u0026quot;access plus 1 year\u0026quot;\n    ExpiresByType image/vnd.microsoft.icon \u0026quot;access plus 1 year\u0026quot;\n    \n    # HTML\n    ExpiresByType text/html \u0026quot;access plus 300 seconds\u0026quot;\n    \n    # Default\n    ExpiresDefault \u0026quot;access plus 1 day\u0026quot;\n\u0026lt;/IfModule\u0026gt;\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"monitoring\" class=\"mobile-header\"\u003eMonitoring\u003c/h2\u003e\n\u003ch3 id=\"built-in-monitoring\" class=\"mobile-header\"\u003eBuilt-in Monitoring\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"apache\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003eapache\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-apache\"\u003e# Enable server-status module\nLoadModule status_module modules/mod_status.so\n\n\u0026lt;Location \u0026quot;/server-status\u0026quot;\u0026gt;\n    SetHandler server-status\n    Require ip 127.0.0.1\n    Require ip ::1\n\u0026lt;/Location\u0026gt;\n\n\u0026lt;Location \u0026quot;/server-info\u0026quot;\u0026gt;\n    SetHandler server-info\n    Require ip 127.0.0.1\n    Require ip ::1\n\u0026lt;/Location\u0026gt;\n\n# Extended status\nExtendedStatus On\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"log-analysis\" class=\"mobile-header\"\u003eLog Analysis\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Monitor Apache access logs\ntail -f /var/log/apache2/access.log  # Debian/Ubuntu\ntail -f /var/log/httpd/access_log    # RHEL/CentOS\n\n# Monitor error logs\ntail -f /var/log/apache2/error.log   # Debian/Ubuntu\ntail -f /var/log/httpd/error_log     # RHEL/CentOS\n\n# Analyze top IPs\nawk \u0026#039;{print $1}\u0026#039; /var/log/apache2/access.log | sort | uniq -c | sort -rn | head -10\n\n# Analyze response codes\nawk \u0026#039;{print $9}\u0026#039; /var/log/apache2/access.log | sort | uniq -c | sort -rn\n\n# Analyze most requested files\nawk \u0026#039;{print $7}\u0026#039; /var/log/apache2/access.log | sort | uniq -c | sort -rn | head -10\n\n# Check for errors\ngrep \u0026quot;error\u0026quot; /var/log/apache2/error.log | tail -10\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"external-monitoring-tools\" class=\"mobile-header\"\u003eExternal Monitoring Tools\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Install monitoring tools\n# GoAccess for real-time log analysis\nsudo apt install goaccess  # Ubuntu/Debian\nsudo dnf install goaccess  # RHEL/CentOS\n\n# Real-time analysis\ngoaccess /var/log/apache2/access.log -c\n\n# Generate HTML report\ngoaccess /var/log/apache2/access.log -o /var/www/html/stats.html --log-format=COMBINED --real-time-html\n\n# Install htop for process monitoring\nsudo apt install htop\nhtop -p $(pgrep apache2 | head -5 | tr \u0026#039;\\n\u0026#039; \u0026#039;,\u0026#039; | sed \u0026#039;s/,$//\u0026#039;)\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"performance-monitoring\" class=\"mobile-header\"\u003ePerformance Monitoring\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Monitor Apache processes\nps aux | grep apache2 | grep -v grep\n\n# Monitor memory usage\nps aux --sort=-%mem | grep apache2 | head -10\n\n# Monitor connection counts\nss -tan | grep :80 | wc -l\nss -tan | grep :443 | wc -l\n\n# Check server-status (if enabled)\ncurl http://localhost/server-status\ncurl http://localhost/server-status?auto  # Machine readable\n\n# Monitor file descriptors\nlsof -u apache2 | wc -l  # Ubuntu/Debian\nlsof -u apache | wc -l   # RHEL/CentOS\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"backup-and-restore\" class=\"mobile-header\"\u003eBackup and Restore\u003c/h2\u003e\n\u003ch3 id=\"configuration-backup\" class=\"mobile-header\"\u003eConfiguration Backup\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e#!/bin/bash\n# backup-apache-config.sh\n\nBACKUP_DIR=\u0026quot;/backup/apache/$(date +%Y%m%d_%H%M%S)\u0026quot;\nmkdir -p \u0026quot;$BACKUP_DIR\u0026quot;\n\n# Detect Apache configuration directory\nif [ -d /etc/apache2 ]; then\n    # Debian/Ubuntu\n    CONFIG_DIR=\u0026quot;/etc/apache2\u0026quot;\n    LOG_DIR=\u0026quot;/var/log/apache2\u0026quot;\n    WEB_DIR=\u0026quot;/var/www\u0026quot;\nelif [ -d /etc/httpd ]; then\n    # RHEL/CentOS\n    CONFIG_DIR=\u0026quot;/etc/httpd\u0026quot;\n    LOG_DIR=\u0026quot;/var/log/httpd\u0026quot;\n    WEB_DIR=\u0026quot;/var/www\u0026quot;\nfi\n\n# Backup Apache configuration\ntar czf \u0026quot;$BACKUP_DIR/apache-config.tar.gz\u0026quot; -C / \u0026quot;${CONFIG_DIR#/}\u0026quot;\n\n# Backup website files\ntar czf \u0026quot;$BACKUP_DIR/apache-sites.tar.gz\u0026quot; -C \u0026quot;$WEB_DIR\u0026quot; .\n\n# Backup SSL certificates\nif [ -d /etc/letsencrypt ]; then\n    tar czf \u0026quot;$BACKUP_DIR/ssl-certs.tar.gz\u0026quot; -C /etc letsencrypt\nfi\n\n# Backup recent logs (last 7 days)\nfind \u0026quot;$LOG_DIR\u0026quot; -name \u0026quot;*.log\u0026quot; -mtime -7 -exec tar czf \u0026quot;$BACKUP_DIR/apache-logs.tar.gz\u0026quot; {} +\n\n# Package version info\nif command -v apache2ctl \u0026amp;\u0026gt; /dev/null; then\n    apache2ctl -v \u0026gt; \u0026quot;$BACKUP_DIR/version.txt\u0026quot;\nelif command -v httpd \u0026amp;\u0026gt; /dev/null; then\n    httpd -v \u0026gt; \u0026quot;$BACKUP_DIR/version.txt\u0026quot;\nfi\n\necho \u0026quot;Backup completed: $BACKUP_DIR\u0026quot;\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"website-backup\" class=\"mobile-header\"\u003eWebsite Backup\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e#!/bin/bash\n# backup-websites.sh\n\nBACKUP_DIR=\u0026quot;/backup/websites/$(date +%Y%m%d_%H%M%S)\u0026quot;\nWEB_ROOT=\u0026quot;/var/www/html\u0026quot;\n\nmkdir -p \u0026quot;$BACKUP_DIR\u0026quot;\n\n# Backup all websites\nfor site in \u0026quot;$WEB_ROOT\u0026quot;/*; do\n    if [ -d \u0026quot;$site\u0026quot; ]; then\n        site_name=$(basename \u0026quot;$site\u0026quot;)\n        echo \u0026quot;Backing up $site_name...\u0026quot;\n        tar czf \u0026quot;$BACKUP_DIR/${site_name}.tar.gz\u0026quot; -C \u0026quot;$WEB_ROOT\u0026quot; \u0026quot;$site_name\u0026quot;\n    fi\ndone\n\n# Backup databases (if applicable)\nif command -v mysqldump \u0026amp;\u0026gt; /dev/null; then\n    for db in $(mysql -e \u0026quot;SHOW DATABASES;\u0026quot; | grep -v -E \u0026quot;^(Database|information_schema|performance_schema|mysql|sys)$\u0026quot;); do\n        mysqldump \u0026quot;$db\u0026quot; | gzip \u0026gt; \u0026quot;$BACKUP_DIR/${db}.sql.gz\u0026quot;\n    done\nfi\n\n# Keep only last 30 days of backups\nfind /backup/websites -type d -mtime +30 -exec rm -rf {} + 2\u0026gt;/dev/null\n\necho \u0026quot;Website backup completed: $BACKUP_DIR\u0026quot;\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"restore-procedures\" class=\"mobile-header\"\u003eRestore Procedures\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e#!/bin/bash\n# restore-apache.sh\n\nBACKUP_DIR=\u0026quot;$1\u0026quot;\nif [ -z \u0026quot;$BACKUP_DIR\u0026quot; ]; then\n    echo \u0026quot;Usage: $0 \u0026lt;backup-directory\u0026gt;\u0026quot;\n    exit 1\nfi\n\n# Stop Apache\nif command -v systemctl \u0026amp;\u0026gt; /dev/null; then\n    sudo systemctl stop apache2 || sudo systemctl stop httpd\nelif command -v service \u0026amp;\u0026gt; /dev/null; then\n    sudo service apache2 stop || sudo service httpd stop\nfi\n\n# Restore configuration\nif [ -f \u0026quot;$BACKUP_DIR/apache-config.tar.gz\u0026quot; ]; then\n    sudo tar xzf \u0026quot;$BACKUP_DIR/apache-config.tar.gz\u0026quot; -C /\n    echo \u0026quot;Configuration restored\u0026quot;\nfi\n\n# Restore websites\nif [ -f \u0026quot;$BACKUP_DIR/apache-sites.tar.gz\u0026quot; ]; then\n    sudo tar xzf \u0026quot;$BACKUP_DIR/apache-sites.tar.gz\u0026quot; -C /var/www\n    echo \u0026quot;Websites restored\u0026quot;\nfi\n\n# Restore SSL certificates\nif [ -f \u0026quot;$BACKUP_DIR/ssl-certs.tar.gz\u0026quot; ]; then\n    sudo tar xzf \u0026quot;$BACKUP_DIR/ssl-certs.tar.gz\u0026quot; -C /etc\n    echo \u0026quot;SSL certificates restored\u0026quot;\nfi\n\n# Test configuration\nif command -v apache2ctl \u0026amp;\u0026gt; /dev/null; then\n    sudo apache2ctl configtest\n    if [ $? -eq 0 ]; then\n        sudo systemctl start apache2\n    fi\nelif command -v httpd \u0026amp;\u0026gt; /dev/null; then\n    sudo httpd -t\n    if [ $? -eq 0 ]; then\n        sudo systemctl start httpd\n    fi\nfi\n\necho \u0026quot;Restore completed\u0026quot;\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"automated-backup\" class=\"mobile-header\"\u003eAutomated Backup\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Create cron job for daily backups\nsudo tee /etc/cron.d/apache-backup \u0026lt;\u0026lt;EOF\n# Apache daily backup\n0 2 * * * root /usr/local/bin/backup-apache-config.sh\n0 3 * * * root /usr/local/bin/backup-websites.sh\nEOF\n\n# Make scripts executable\nsudo chmod +x /usr/local/bin/backup-apache-config.sh\nsudo chmod +x /usr/local/bin/backup-websites.sh\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"troubleshooting\" class=\"mobile-header\"\u003eTroubleshooting\u003c/h2\u003e\n\u003ch3 id=\"common-issues\" class=\"mobile-header\"\u003eCommon Issues\u003c/h3\u003e\n\u003cp class=\"mobile-paragraph\"\u003e1. \u003cstrong\u003eApache won't start\u003c/strong\u003e:\u003c/p\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Check configuration syntax\nsudo apache2ctl configtest  # Debian/Ubuntu\nsudo httpd -t               # RHEL/CentOS\n\n# Check error logs\nsudo tail -20 /var/log/apache2/error.log  # Debian/Ubuntu\nsudo tail -20 /var/log/httpd/error_log    # RHEL/CentOS\n\n# Check port conflicts\nsudo ss -tlnp | grep :80\nsudo lsof -i :80\n\n# Check permissions\nls -la /var/www/html\nps aux | grep apache2\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003cp class=\"mobile-paragraph\"\u003e2. \u003cstrong\u003ePermission denied errors\u003c/strong\u003e:\u003c/p\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Fix ownership\nsudo chown -R www-data:www-data /var/www/html  # Debian/Ubuntu\nsudo chown -R apache:apache /var/www/html      # RHEL/CentOS\n\n# Fix permissions\nsudo find /var/www/html -type d -exec chmod 755 {} \\;\nsudo find /var/www/html -type f -exec chmod 644 {} \\;\n\n# Check SELinux (RHEL/CentOS)\ngetenforce\nsudo setsebool -P httpd_can_network_connect 1\nsudo restorecon -Rv /var/www/html\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003cp class=\"mobile-paragraph\"\u003e3. \u003cstrong\u003eVirtual host not working\u003c/strong\u003e:\u003c/p\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Check virtual host configuration\napache2ctl -S  # Debian/Ubuntu\nhttpd -S       # RHEL/CentOS\n\n# Enable virtual host (Debian/Ubuntu)\nsudo a2ensite example.com.conf\nsudo systemctl reload apache2\n\n# Test virtual host\ncurl -H \u0026quot;Host: example.com\u0026quot; http://localhost/\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003cp class=\"mobile-paragraph\"\u003e4. \u003cstrong\u003eSSL certificate issues\u003c/strong\u003e:\u003c/p\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Check certificate files\nsudo openssl x509 -in /etc/ssl/certs/example.com.crt -text -noout\n\n# Test SSL configuration\necho | openssl s_client -servername example.com -connect example.com:443\n\n# Check SSL module\napache2ctl -M | grep ssl  # Debian/Ubuntu\nhttpd -M | grep ssl       # RHEL/CentOS\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"debug-mode\" class=\"mobile-header\"\u003eDebug Mode\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"apache\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003eapache\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-apache\"\u003e# Enable debug logging\nLogLevel debug\n\n# Module-specific debug\nLogLevel ssl:debug\nLogLevel rewrite:debug\n\n# Custom debug log format\nLogFormat \u0026quot;%h %l %u %t \\\u0026quot;%r\\\u0026quot; %\u0026gt;s %b \\\u0026quot;%{Referer}i\\\u0026quot; \\\u0026quot;%{User-agent}i\\\u0026quot; %D\u0026quot; debug\nCustomLog /var/log/apache2/debug.log debug\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"performance-issues\" class=\"mobile-header\"\u003ePerformance Issues\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Monitor Apache processes\ntop -p $(pgrep apache2 | head -5 | tr \u0026#039;\\n\u0026#039; \u0026#039;,\u0026#039; | sed \u0026#039;s/,$//\u0026#039;)\n\n# Check memory usage\nps aux --sort=-%mem | grep apache2\n\n# Monitor connections\nwatch \u0026#039;ss -tan | grep :80 | wc -l\u0026#039;\n\n# Check slow queries (if applicable)\ngrep \u0026quot;taking too long\u0026quot; /var/log/apache2/error.log\n\n# Analyze configuration\napache2ctl -t -D DUMP_VHOSTS\napache2ctl -t -D DUMP_MODULES\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"maintenance\" class=\"mobile-header\"\u003eMaintenance\u003c/h2\u003e\n\u003ch3 id=\"update-procedures\" class=\"mobile-header\"\u003eUpdate Procedures\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# RHEL/CentOS/Rocky/AlmaLinux\nsudo dnf check-update httpd\nsudo dnf update httpd httpd-tools mod_ssl\n\n# Debian/Ubuntu\nsudo apt update\nsudo apt upgrade apache2 apache2-utils libapache2-mod-ssl\n\n# Arch Linux\nsudo pacman -Syu apache\n\n# Alpine Linux\napk update\napk upgrade apache2\n\n# openSUSE\nsudo zypper update apache2\n\n# FreeBSD\npkg update\npkg upgrade apache24\n\n# macOS\nbrew upgrade httpd\n\n# Always test configuration after update\nsudo apache2ctl configtest  # Debian/Ubuntu\nsudo httpd -t               # RHEL/CentOS\n\n# Graceful restart to apply updates\nsudo systemctl reload apache2  # Debian/Ubuntu\nsudo systemctl reload httpd    # RHEL/CentOS\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"log-rotation\" class=\"mobile-header\"\u003eLog Rotation\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Configure log rotation for Apache\nsudo tee /etc/logrotate.d/apache2 \u0026lt;\u0026lt;EOF\n/var/log/apache2/*.log {\n    daily\n    missingok\n    rotate 14\n    compress\n    delaycompress\n    notifempty\n    create 640 root adm\n    sharedscripts\n    postrotate\n        if /bin/pidof apache2 \u0026gt; /dev/null ; then \\\n            /usr/sbin/apache2ctl graceful \u0026gt; /dev/null; \\\n        fi\n    endscript\n}\nEOF\n\n# For RHEL/CentOS\nsudo tee /etc/logrotate.d/httpd \u0026lt;\u0026lt;EOF\n/var/log/httpd/*log {\n    daily\n    missingok\n    rotate 14\n    compress\n    delaycompress\n    notifempty\n    sharedscripts\n    postrotate\n        /bin/systemctl reload httpd.service \u0026gt; /dev/null 2\u0026gt;/dev/null || true\n    endscript\n}\nEOF\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"health-checks\" class=\"mobile-header\"\u003eHealth Checks\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e#!/bin/bash\n# apache-health-check.sh\n\n# Check if Apache is running\nif ! pgrep apache2 \u0026gt; /dev/null \u0026amp;\u0026amp; ! pgrep httpd \u0026gt; /dev/null; then\n    echo \u0026quot;CRITICAL: Apache is not running\u0026quot;\n    exit 2\nfi\n\n# Check if Apache responds to HTTP requests\nif ! curl -f -s http://localhost \u0026gt; /dev/null; then\n    echo \u0026quot;CRITICAL: Apache not responding to HTTP requests\u0026quot;\n    exit 2\nfi\n\n# Check configuration syntax\nif command -v apache2ctl \u0026amp;\u0026gt; /dev/null; then\n    if ! apache2ctl configtest \u0026amp;\u0026gt; /dev/null; then\n        echo \u0026quot;WARNING: Apache configuration has syntax errors\u0026quot;\n        exit 1\n    fi\nelif command -v httpd \u0026amp;\u0026gt; /dev/null; then\n    if ! httpd -t \u0026amp;\u0026gt; /dev/null; then\n        echo \u0026quot;WARNING: Apache configuration has syntax errors\u0026quot;\n        exit 1\n    fi\nfi\n\n# Check disk space for logs\nLOG_USAGE=$(df /var/log | awk \u0026#039;NR==2 {print $5}\u0026#039; | sed \u0026#039;s/%//\u0026#039;)\nif [ \u0026quot;$LOG_USAGE\u0026quot; -gt 90 ]; then\n    echo \u0026quot;WARNING: Log directory is ${LOG_USAGE}% full\u0026quot;\n    exit 1\nfi\n\necho \u0026quot;OK: Apache is healthy\u0026quot;\nexit 0\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"cleanup-tasks\" class=\"mobile-header\"\u003eCleanup Tasks\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Clean old log files\nfind /var/log/apache2 -name \u0026quot;*.log.*\u0026quot; -mtime +30 -delete  # Debian/Ubuntu\nfind /var/log/httpd -name \u0026quot;*log.*\u0026quot; -mtime +30 -delete     # RHEL/CentOS\n\n# Clean Apache cache\nrm -rf /var/cache/apache2/*\n\n# Clean temporary files\nfind /tmp -name \u0026quot;apache*\u0026quot; -mtime +7 -delete\n\n# Optimize log files (remove old entries)\nsudo journalctl --vacuum-time=30d\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"integration-examples\" class=\"mobile-header\"\u003eIntegration Examples\u003c/h2\u003e\n\u003ch3 id=\"php-integration\" class=\"mobile-header\"\u003ePHP Integration\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Install PHP\nsudo apt install php libapache2-mod-php  # Ubuntu/Debian\nsudo dnf install php php-cli              # RHEL/CentOS\n\n# Enable PHP module\nsudo a2enmod php8.1  # Ubuntu/Debian\n\n# Test PHP\necho \u0026quot;\u0026lt;?php phpinfo(); ?\u0026gt;\u0026quot; | sudo tee /var/www/html/info.php\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"wordpress-integration\" class=\"mobile-header\"\u003eWordPress Integration\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"apache\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003eapache\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-apache\"\u003e\u0026lt;VirtualHost *:443\u0026gt;\n    ServerName blog.example.com\n    DocumentRoot /var/www/wordpress\n    \n    SSLEngine on\n    SSLCertificateFile /etc/letsencrypt/live/blog.example.com/fullchain.pem\n    SSLCertificateKeyFile /etc/letsencrypt/live/blog.example.com/privkey.pem\n    \n    \u0026lt;Directory /var/www/wordpress\u0026gt;\n        AllowOverride All\n        Options -Indexes +FollowSymLinks\n        Require all granted\n    \u0026lt;/Directory\u0026gt;\n    \n    # WordPress-specific rules\n    RewriteEngine On\n    RewriteRule ^/wp-admin/install.php$ - [F]\n    RewriteRule ^/wp-config-sample.php$ - [F]\n    \n    # Security for wp-config.php\n    \u0026lt;Files wp-config.php\u0026gt;\n        Require all denied\n    \u0026lt;/Files\u0026gt;\n\u0026lt;/VirtualHost\u0026gt;\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"python-wsgi-integration\" class=\"mobile-header\"\u003ePython WSGI Integration\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"apache\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003eapache\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-apache\"\u003e# Load WSGI module\nLoadModule wsgi_module modules/mod_wsgi.so\n\n\u0026lt;VirtualHost *:443\u0026gt;\n    ServerName app.example.com\n    DocumentRoot /var/www/python-app\n    \n    WSGIDaemonProcess app python-home=/var/www/python-app/venv python-path=/var/www/python-app\n    WSGIProcessGroup app\n    WSGIScriptAlias / /var/www/python-app/app.wsgi\n    \n    \u0026lt;Directory /var/www/python-app\u0026gt;\n        WSGIApplicationGroup %{GLOBAL}\n        Require all granted\n    \u0026lt;/Directory\u0026gt;\n\u0026lt;/VirtualHost\u0026gt;\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"nodejs-proxy-integration\" class=\"mobile-header\"\u003eNode.js Proxy Integration\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"apache\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003eapache\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-apache\"\u003e\u0026lt;VirtualHost *:443\u0026gt;\n    ServerName node.example.com\n    \n    ProxyPreserveHost On\n    ProxyPass / http://localhost:3000/\n    ProxyPassReverse / http://localhost:3000/\n    \n    # WebSocket support\n    ProxyPass /socket.io/ ws://localhost:3000/socket.io/\n    ProxyPassReverse /socket.io/ ws://localhost:3000/socket.io/\n    \n    # Static files served by Apache\n    Alias /static /var/www/node-app/public\n    \u0026lt;Directory /var/www/node-app/public\u0026gt;\n        Require all granted\n        ExpiresActive On\n        ExpiresDefault \u0026quot;access plus 1 year\u0026quot;\n    \u0026lt;/Directory\u0026gt;\n\u0026lt;/VirtualHost\u0026gt;\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"additional-resources\" class=\"mobile-header\"\u003eAdditional Resources\u003c/h2\u003e\n\u003cli class=\"mobile-list-item\"\u003e\u003ca href=\"https://httpd.apache.org/docs/\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\"\u003eOfficial Documentation\u003c/a\u003e\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003e\u003ca href=\"https://github.com/apache/httpd\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\"\u003eGitHub Repository\u003c/a\u003e\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003e\u003ca href=\"https://httpd.apache.org/docs/2.4/misc/security_tips.html\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\"\u003eSecurity Guide\u003c/a\u003e\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003e\u003ca href=\"https://httpd.apache.org/docs/2.4/misc/perf-tuning.html\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\"\u003ePerformance Tuning\u003c/a\u003e\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003e\u003ca href=\"https://httpd.apache.org/docs/2.4/mod/\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\"\u003eApache Modules\u003c/a\u003e\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003e\u003ca href=\"https://httpd.apache.org/docs/2.4/vhosts/\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\"\u003eVirtual Hosts Guide\u003c/a\u003e\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003e\u003ca href=\"https://httpd.apache.org/docs/2.4/ssl/\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\"\u003eSSL/TLS Guide\u003c/a\u003e\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003e\u003ca href=\"https://httpd.apache.org/lists.html\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\"\u003eCommunity Mailing Lists\u003c/a\u003e\u003c/li\u003e\n\u003cp class=\"mobile-paragraph\"\u003e---\u003c/p\u003e\n\u003cp class=\"mobile-paragraph\"\u003e\u003cstrong\u003eNote:\u003c/strong\u003e This guide is part of the \u003ca href=\"https://howtomgr.github.io\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\"\u003eHowToMgr\u003c/a\u003e collection. Always refer to official documentation for the most up-to-date information.\u003c/p\u003e","readTime":"24 min","wordCount":4766,"lastBuilt":"2025-09-14T06:13:09.108Z"},{"name":"apache-kafka","displayName":"Apache Kafka","slug":"apache-kafka","description":"Repo for apache-kafka","category":"web-server","language":null,"stars":0,"forks":0,"topics":[],"githubUrl":"https://github.com/howtomgr/apache-kafka","updatedAt":"2025-09-08T03:05:12Z","createdAt":"2025-09-08T03:05:01Z","readmeRaw":"## 👋 Welcome to apache-kafka 🚀  \n\napache-kafka README  \n  \n  \n## Author  \n\n🤖 casjay: [Github](https://github.com/casjay) 🤖  \n","readmeHtml":"\u003ch2 id=\"welcome-to-apache-kafka\" class=\"mobile-header\"\u003e👋 Welcome to apache-kafka 🚀  \u003c/h2\u003e\n\u003cp class=\"mobile-paragraph\"\u003eapache-kafka README  \u003c/p\u003e\n\u003ch2 id=\"author\" class=\"mobile-header\"\u003eAuthor  \u003c/h2\u003e\n\u003cp class=\"mobile-paragraph\"\u003e🤖 casjay: \u003ca href=\"https://github.com/casjay\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\"\u003eGithub\u003c/a\u003e 🤖  \u003c/p\u003e","readTime":"1 min","wordCount":15,"lastBuilt":"2025-09-14T06:13:24.274Z"},{"name":"caddy","displayName":"Caddy","slug":"caddy","description":"Repo for caddy","category":"web-server","language":null,"stars":0,"forks":0,"topics":[],"githubUrl":"https://github.com/howtomgr/caddy","updatedAt":"2025-09-08T03:05:30Z","createdAt":"2025-09-08T03:05:19Z","readmeRaw":"## 👋 Welcome to caddy 🚀  \n\ncaddy README  \n  \n  \n## Author  \n\n🤖 casjay: [Github](https://github.com/casjay) 🤖  \n","readmeHtml":"\u003ch2 id=\"welcome-to-caddy\" class=\"mobile-header\"\u003e👋 Welcome to caddy 🚀  \u003c/h2\u003e\n\u003cp class=\"mobile-paragraph\"\u003ecaddy README  \u003c/p\u003e\n\u003ch2 id=\"author\" class=\"mobile-header\"\u003eAuthor  \u003c/h2\u003e\n\u003cp class=\"mobile-paragraph\"\u003e🤖 casjay: \u003ca href=\"https://github.com/casjay\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\"\u003eGithub\u003c/a\u003e 🤖  \u003c/p\u003e","readTime":"1 min","wordCount":15,"lastBuilt":"2025-09-14T06:13:24.010Z"},{"name":"haproxy","displayName":"Haproxy","slug":"haproxy","description":"Repo for haproxy","category":"web-server","language":null,"stars":0,"forks":0,"topics":[],"githubUrl":"https://github.com/howtomgr/haproxy","updatedAt":"2025-09-14T01:30:06Z","createdAt":"2025-09-08T03:08:23Z","readmeRaw":"# HAProxy Installation Guide\n\nHigh-performance TCP/HTTP load balancer and reverse proxy for distributing traffic across multiple backend servers. Industry standard for load balancing with enterprise-grade security and reliability.\n\n## Prerequisites\n\n- Linux system (any modern distribution)\n- Root or sudo access\n- 2GB RAM minimum, 4GB+ recommended for high-traffic environments\n- Multiple backend servers to load balance (optional for testing)\n- SSL certificates for production HTTPS termination\n\n## Installation\n\n### Using Package Manager (Recommended)\n\n#### Ubuntu/Debian\n```bash\n# Update package list\nsudo apt-get update\n\n# Install HAProxy and utilities\nsudo apt-get install -y haproxy haproxy-doc software-properties-common\n\n# For latest version from PPA\nsudo add-apt-repository ppa:vbernat/haproxy-2.8\nsudo apt-get update\nsudo apt-get install -y haproxy=2.8.*\n\n# Enable and start HAProxy\nsudo systemctl enable --now haproxy\n\n# Check status\nsudo systemctl status haproxy\n```\n\n#### RHEL/CentOS/Rocky Linux/AlmaLinux\n```bash\n# Install EPEL repository\nsudo yum install -y epel-release\n\n# Install HAProxy\nsudo yum install -y haproxy\n\n# For newer versions\nsudo dnf install -y haproxy\n\n# Enable and start HAProxy\nsudo systemctl enable --now haproxy\n\n# Check status\nsudo systemctl status haproxy\n```\n\n#### Fedora\n```bash\n# Install HAProxy\nsudo dnf install -y haproxy\n\n# Enable and start HAProxy\nsudo systemctl enable --now haproxy\n\n# Configure firewall\nsudo firewall-cmd --permanent --add-service=http\nsudo firewall-cmd --permanent --add-service=https\nsudo firewall-cmd --permanent --add-port=8404/tcp  # Stats interface\nsudo firewall-cmd --reload\n```\n\n#### Arch Linux\n```bash\n# Install HAProxy\nsudo pacman -Syu haproxy\n\n# Enable and start HAProxy\nsudo systemctl enable --now haproxy\n\n# Check status\nsudo systemctl status haproxy\n```\n\n#### Alpine Linux\n```bash\n# Install HAProxy\nsudo apk update\nsudo apk add haproxy\n\n# Enable and start HAProxy\nsudo rc-update add haproxy default\nsudo service haproxy start\n```\n\n### From Source (Latest Features)\n```bash\n# Install build dependencies\n# Ubuntu/Debian\nsudo apt-get install -y build-essential libssl-dev libpcre3-dev zlib1g-dev liblua5.3-dev libsystemd-dev\n\n# RHEL/CentOS\nsudo yum groupinstall -y \"Development Tools\"\nsudo yum install -y openssl-devel pcre-devel zlib-devel lua-devel systemd-devel\n\n# Download latest HAProxy LTS\nHAPROXY_VERSION=\"3.0.5\"\ncd /tmp\nwget \"https://www.haproxy.org/download/3.0/src/haproxy-${HAPROXY_VERSION}.tar.gz\"\ntar xzf haproxy-${HAPROXY_VERSION}.tar.gz\ncd haproxy-${HAPROXY_VERSION}\n\n# Compile with full features\nmake clean\nmake -j$(nproc) TARGET=linux-glibc \\\n    USE_OPENSSL=1 \\\n    USE_ZLIB=1 \\\n    USE_PCRE=1 \\\n    USE_SYSTEMD=1 \\\n    USE_LUA=1 \\\n    USE_PROMEX=1 \\\n    USE_THREAD=1 \\\n    USE_CPU_AFFINITY=1 \\\n    USE_TFO=1 \\\n    USE_NS=1 \\\n    USE_DL=1 \\\n    USE_RT=1\n\n# Install HAProxy\nsudo make install\nsudo mkdir -p /etc/haproxy /var/lib/haproxy /var/log/haproxy\nsudo useradd --system --home /var/lib/haproxy --shell /bin/false haproxy\nsudo chown -R haproxy:haproxy /var/lib/haproxy /var/log/haproxy\n\n# Create systemd service\nsudo tee /etc/systemd/system/haproxy.service \u003e /dev/null \u003c\u003cEOF\n[Unit]\nDescription=HAProxy Load Balancer\nDocumentation=man:haproxy(1)\nDocumentation=file:/usr/share/doc/haproxy/configuration.txt\nAfter=network.target\n\n[Service]\nType=notify\nExecStart=/usr/local/sbin/haproxy -f /etc/haproxy/haproxy.cfg -p /run/haproxy.pid -S /run/haproxy-master.sock\nExecReload=/bin/kill -USR2 \\$MAINPID\nExecStop=/bin/kill -USR1 \\$MAINPID\nKillMode=mixed\nRestart=on-failure\nSuccessExitStatus=143\nKillSignal=SIGTERM\n\n# Security settings\nNoNewPrivileges=true\nPrivateTmp=true\nProtectHome=true\nProtectSystem=strict\nReadWritePaths=/var/lib/haproxy\nReadWritePaths=/var/log/haproxy\nReadWritePaths=/run\n\n[Install]\nWantedBy=multi-user.target\nEOF\n\nsudo systemctl daemon-reload\nsudo systemctl enable --now haproxy\n```\n\n### Using Docker\n```bash\n# Create HAProxy configuration directory\nmkdir -p ~/haproxy/{config,ssl,logs}\n\n# Create basic configuration\ncat \u003e ~/haproxy/config/haproxy.cfg \u003c\u003cEOF\nglobal\n    log stdout local0\n    chroot /var/lib/haproxy\n    stats socket /run/haproxy/admin.sock mode 660 level admin expose-fd listeners\n    stats timeout 30s\n    user haproxy\n    group haproxy\n    daemon\n    \n    # SSL configuration\n    ssl-default-bind-ciphers ECDHE+AESGCM:ECDHE+CHACHA20:DHE+AESGCM:DHE+CHACHA20:!aNULL:!MD5:!DSS\n    ssl-default-bind-options ssl-min-ver TLSv1.2 no-tls-tickets\n    ssl-default-server-ciphers ECDHE+AESGCM:ECDHE+CHACHA20:DHE+AESGCM:DHE+CHACHA20:!aNULL:!MD5:!DSS\n    ssl-default-server-options ssl-min-ver TLSv1.2 no-tls-tickets\n\ndefaults\n    mode http\n    log global\n    option httplog\n    option dontlognull\n    option log-health-checks\n    option forwardfor\n    option http-server-close\n    timeout connect 5000\n    timeout client 50000\n    timeout server 50000\n    timeout http-keep-alive 4000\n    timeout check 3000\n\n# Frontend\nfrontend web_frontend\n    bind *:80\n    bind *:443 ssl crt /usr/local/etc/haproxy/ssl/ alpn h2,http/1.1\n    \n    # Redirect HTTP to HTTPS\n    redirect scheme https code 301 if !{ ssl_fc }\n    \n    # Security headers\n    http-response set-header Strict-Transport-Security \"max-age=31536000; includeSubDomains; preload\"\n    http-response set-header X-Frame-Options \"SAMEORIGIN\"\n    http-response set-header X-Content-Type-Options \"nosniff\"\n    http-response set-header X-XSS-Protection \"1; mode=block\"\n    \n    default_backend web_servers\n\n# Backend\nbackend web_servers\n    balance roundrobin\n    option httpchk GET /health\n    http-check expect status 200\n    server web1 192.168.1.10:8080 check\n    server web2 192.168.1.11:8080 check\n    server web3 192.168.1.12:8080 check\n\n# Stats interface\nlisten stats\n    bind *:8404\n    stats enable\n    stats uri /stats\n    stats refresh 30s\n    stats admin if TRUE\nEOF\n\n# Run HAProxy container\ndocker run -d \\\n  --name haproxy \\\n  --restart unless-stopped \\\n  -p 80:80 \\\n  -p 443:443 \\\n  -p 8404:8404 \\\n  -v ~/haproxy/config:/usr/local/etc/haproxy:ro \\\n  -v ~/haproxy/ssl:/usr/local/etc/haproxy/ssl:ro \\\n  -v ~/haproxy/logs:/var/log/haproxy \\\n  haproxy:latest\n```\n\n## Production Configuration\n\n### Enterprise Production Configuration\n```bash\n# Backup original configuration\nsudo cp /etc/haproxy/haproxy.cfg /etc/haproxy/haproxy.cfg.backup\n\n# Create comprehensive production configuration\nsudo tee /etc/haproxy/haproxy.cfg \u003e /dev/null \u003c\u003cEOF\n#---------------------------------------------------------------------\n# HAProxy Enterprise Production Configuration\n# Version: 3.0+ LTS\n#---------------------------------------------------------------------\n\nglobal\n    log 127.0.0.1:514 local0 info\n    chroot /var/lib/haproxy\n    stats socket /run/haproxy/admin.sock mode 660 level admin expose-fd listeners\n    stats timeout 30s\n    user haproxy\n    group haproxy\n    daemon\n\n    # SSL/TLS configuration (2024 best practices)\n    ssl-default-bind-ciphers ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-CHACHA20-POLY1305:ECDHE-RSA-CHACHA20-POLY1305:DHE-RSA-AES128-GCM-SHA256:DHE-RSA-AES256-GCM-SHA384\n    ssl-default-bind-ciphersuites TLS_AES_128_GCM_SHA256:TLS_AES_256_GCM_SHA384:TLS_CHACHA20_POLY1305_SHA256\n    ssl-default-bind-options ssl-min-ver TLSv1.2 no-tls-tickets prefer-client-ciphers\n    \n    ssl-default-server-ciphers ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384\n    ssl-default-server-ciphersuites TLS_AES_128_GCM_SHA256:TLS_AES_256_GCM_SHA384:TLS_CHACHA20_POLY1305_SHA256\n    ssl-default-server-options ssl-min-ver TLSv1.2 no-tls-tickets\n\n    # DH parameters for perfect forward secrecy\n    ssl-dh-param-file /etc/haproxy/ssl/dhparam.pem\n    \n    # Performance tuning\n    maxconn 40000\n    nbthread 4\n    cpu-map auto:1/1-4 0-3\n    \n    # Logging\n    log-tag haproxy-prod\n    \n    # Security\n    insecure-fork-wanted\n    insecure-setuid-wanted\n\ndefaults\n    mode http\n    log global\n    option httplog\n    option dontlognull\n    option log-health-checks\n    option forwardfor except 127.0.0.0/8\n    option http-server-close\n    option redispatch\n    \n    # Timeouts\n    timeout connect 10s\n    timeout client 1m\n    timeout server 1m\n    timeout http-keep-alive 10s\n    timeout check 10s\n    timeout tunnel 2h\n    \n    # Retries\n    retries 3\n    \n    # Compression\n    compression algo gzip\n    compression type text/html text/css text/javascript application/javascript application/json application/xml\n    \n    # Default error pages\n    errorfile 400 /etc/haproxy/errors/400.http\n    errorfile 403 /etc/haproxy/errors/403.http\n    errorfile 408 /etc/haproxy/errors/408.http\n    errorfile 500 /etc/haproxy/errors/500.http\n    errorfile 502 /etc/haproxy/errors/502.http\n    errorfile 503 /etc/haproxy/errors/503.http\n    errorfile 504 /etc/haproxy/errors/504.http\n\n#---------------------------------------------------------------------\n# Frontend Configuration\n#---------------------------------------------------------------------\n\nfrontend web_frontend\n    bind *:80\n    bind *:443 ssl crt /etc/haproxy/ssl/ alpn h2,http/1.1 crt-ignore-err all\n    \n    # Security headers\n    http-response set-header Strict-Transport-Security \"max-age=31536000; includeSubDomains; preload\"\n    http-response set-header X-Frame-Options \"SAMEORIGIN\"\n    http-response set-header X-Content-Type-Options \"nosniff\"\n    http-response set-header X-XSS-Protection \"1; mode=block\"\n    http-response set-header Referrer-Policy \"strict-origin-when-cross-origin\"\n    http-response set-header Content-Security-Policy \"default-src 'self'; script-src 'self' 'unsafe-inline'; style-src 'self' 'unsafe-inline'\"\n    \n    # Rate limiting\n    stick-table type ip size 100k expire 30s store http_req_rate(10s)\n    http-request track-sc0 src\n    http-request deny if { sc_http_req_rate(0) gt 20 }\n    \n    # Block bad bots and crawlers\n    acl is_bot hdr_sub(User-Agent) -i bot crawler spider scraper\n    http-request deny if is_bot\n    \n    # ACLs for routing\n    acl is_api path_beg /api/\n    acl is_admin path_beg /admin/\n    acl is_static path_beg /static/ /css/ /js/ /images/\n    acl is_websocket hdr(Upgrade) -i websocket\n    \n    # Force HTTPS\n    redirect scheme https code 301 if !{ ssl_fc }\n    \n    # Routing rules\n    use_backend api_servers if is_api\n    use_backend admin_servers if is_admin\n    use_backend static_servers if is_static\n    use_backend websocket_servers if is_websocket\n    default_backend web_servers\n\n#---------------------------------------------------------------------\n# Backend Configurations\n#---------------------------------------------------------------------\n\n# Main web servers\nbackend web_servers\n    balance leastconn\n    option httpchk GET /health HTTP/1.1\\r\\nHost:\\ example.com\n    http-check expect status 200\n    \n    # Health check configuration\n    default-server inter 2000 rise 2 fall 3 slowstart 60s maxconn 250 maxqueue 256 weight 100\n    \n    server web1 192.168.1.10:8080 check cookie web1\n    server web2 192.168.1.11:8080 check cookie web2\n    server web3 192.168.1.12:8080 check cookie web3\n    server web4 192.168.1.13:8080 check cookie web4 backup\n    \n    # Stick table for session persistence\n    stick-table type ip size 200k expire 30m\n    stick on src\n\n# API servers backend\nbackend api_servers\n    balance roundrobin\n    option httpchk GET /api/health HTTP/1.1\\r\\nHost:\\ api.example.com\n    http-check expect rstring ^OK$\n    \n    # Enable HTTP/2 to backend\n    server api1 192.168.1.20:3000 check proto h2 verify none\n    server api2 192.168.1.21:3000 check proto h2 verify none\n    server api3 192.168.1.22:3000 check proto h2 verify none\n\n# Admin backend (restricted access)\nbackend admin_servers\n    balance source\n    option httpchk GET /admin/health\n    http-check expect status 200\n    \n    # IP whitelist for admin access\n    http-request deny unless { src 192.168.1.0/24 10.0.0.0/8 }\n    \n    server admin1 192.168.1.30:9000 check\n\n# Static content servers\nbackend static_servers\n    balance roundrobin\n    option httpchk GET /health.txt\n    http-check expect string \"OK\"\n    \n    # Cache control\n    http-response set-header Cache-Control \"public, max-age=86400\"\n    \n    server static1 192.168.1.40:8080 check\n    server static2 192.168.1.41:8080 check\n\n# WebSocket servers\nbackend websocket_servers\n    balance leastconn\n    option httpchk GET /ws/health\n    http-check expect status 101\n    \n    # WebSocket specific settings\n    timeout tunnel 3600s\n    \n    server ws1 192.168.1.50:8080 check\n    server ws2 192.168.1.51:8080 check\n\n#---------------------------------------------------------------------\n# Database Load Balancing (TCP Mode)\n#---------------------------------------------------------------------\n\n# MySQL Master-Slave Load Balancing\nfrontend mysql_frontend\n    bind *:3306\n    mode tcp\n    default_backend mysql_servers\n\nbackend mysql_servers\n    mode tcp\n    balance leastconn\n    option mysql-check user haproxy_check\n    \n    # MySQL health checks\n    server mysql-master 192.168.1.60:3306 check weight 1000\n    server mysql-slave1 192.168.1.61:3306 check weight 100 backup\n    server mysql-slave2 192.168.1.62:3306 check weight 100 backup\n\n# PostgreSQL Load Balancing\nfrontend postgresql_frontend\n    bind *:5432\n    mode tcp\n    default_backend postgresql_servers\n\nbackend postgresql_servers\n    mode tcp\n    balance roundrobin\n    option pgsql-check user haproxy_check\n    \n    server postgres1 192.168.1.70:5432 check\n    server postgres2 192.168.1.71:5432 check\n\n# Redis Cluster Load Balancing\nfrontend redis_frontend\n    bind *:6379\n    mode tcp\n    default_backend redis_servers\n\nbackend redis_servers\n    mode tcp\n    balance first\n    option redis-check\n    \n    server redis1 192.168.1.80:6379 check\n    server redis2 192.168.1.81:6379 check backup\n\n#---------------------------------------------------------------------\n# Statistics and Monitoring\n#---------------------------------------------------------------------\n\nlisten stats\n    bind *:8404\n    stats enable\n    stats uri /stats\n    stats refresh 30s\n    stats admin if { src 192.168.1.0/24 }\n    stats auth admin:secure_stats_password\n    \n    # Enhanced statistics\n    stats show-legends\n    stats show-modules\n    stats realm \"HAProxy Statistics\"\n    \n    # Prometheus metrics (if compiled with USE_PROMEX)\n    http-request use-service prometheus-exporter if { path /metrics }\n\n#---------------------------------------------------------------------\n# Advanced Features\n#---------------------------------------------------------------------\n\n# Global rate limiting\nbackend rate_limit_backend\n    stick-table type ip size 100k expire 30s store gpc0,http_req_rate(10s)\n\n# DDoS protection\nfrontend ddos_protection\n    bind *:80\n    \n    # Track client IPs\n    stick-table type ip size 100k expire 30s store gpc0,http_req_rate(10s),http_err_rate(10s)\n    http-request track-sc0 src table rate_limit_backend\n    \n    # Block clients exceeding rate limits\n    http-request deny if { sc_http_req_rate(0) gt 50 }\n    http-request deny if { sc_http_err_rate(0) gt 10 }\n    \n    default_backend web_servers\n\n# Health check backend for external monitoring\nbackend health_check\n    mode http\n    http-request return status 200 content-type text/plain string \"HAProxy is healthy\"\nEOF\n\n# Test configuration\nsudo haproxy -c -f ~/haproxy/config/haproxy.cfg\n```\n\n## SSL/TLS Configuration and Security\n\n### Advanced SSL Termination\n```bash\n# Generate strong DH parameters\nsudo openssl dhparam -out /etc/haproxy/ssl/dhparam.pem 4096\n\n# Create SSL certificate bundle\nsudo mkdir -p /etc/haproxy/ssl\n\n# Self-signed certificate for testing\nsudo openssl req -x509 -nodes -days 365 -newkey rsa:4096 \\\n  -keyout /etc/haproxy/ssl/example.com.key \\\n  -out /etc/haproxy/ssl/example.com.crt \\\n  -subj \"/C=US/ST=State/L=City/O=Organization/CN=example.com\"\n\n# Combine certificate and key for HAProxy\nsudo cat /etc/haproxy/ssl/example.com.crt /etc/haproxy/ssl/example.com.key | sudo tee /etc/haproxy/ssl/example.com.pem\n\n# Production: Let's Encrypt certificates\nsudo certbot certonly --standalone -d example.com -d www.example.com\nsudo cat /etc/letsencrypt/live/example.com/fullchain.pem /etc/letsencrypt/live/example.com/privkey.pem | sudo tee /etc/haproxy/ssl/example.com.pem\n\n# Set proper permissions\nsudo chmod 600 /etc/haproxy/ssl/*.pem\nsudo chown haproxy:haproxy /etc/haproxy/ssl/*.pem\n\n# Create certificate renewal script\nsudo tee /usr/local/bin/haproxy-ssl-renewal.sh \u003e /dev/null \u003c\u003c'EOF'\n#!/bin/bash\nCERT_PATH=\"/etc/letsencrypt/live\"\nHAPROXY_CERT_DIR=\"/etc/haproxy/ssl\"\n\n# Renew certificates\ncertbot renew --quiet --pre-hook \"systemctl stop haproxy\" --post-hook \"systemctl start haproxy\"\n\n# Update HAProxy certificate bundles\nfor domain in $(ls ${CERT_PATH}/); do\n    if [ -f \"${CERT_PATH}/${domain}/fullchain.pem\" ]; then\n        cat \"${CERT_PATH}/${domain}/fullchain.pem\" \"${CERT_PATH}/${domain}/privkey.pem\" \u003e \"${HAPROXY_CERT_DIR}/${domain}.pem\"\n        chmod 600 \"${HAPROXY_CERT_DIR}/${domain}.pem\"\n        chown haproxy:haproxy \"${HAPROXY_CERT_DIR}/${domain}.pem\"\n    fi\ndone\n\n# Reload HAProxy configuration\nsystemctl reload haproxy\n\necho \"SSL certificates updated for HAProxy\"\nEOF\n\nsudo chmod +x /usr/local/bin/haproxy-ssl-renewal.sh\n\n# Schedule certificate renewal\necho \"0 3 * * 1 root /usr/local/bin/haproxy-ssl-renewal.sh\" | sudo tee -a /etc/crontab\n```\n\n### Security Hardening Configuration\n```bash\n# Create security-focused configuration additions\nsudo tee /etc/haproxy/conf.d/security.cfg \u003e /dev/null \u003c\u003cEOF\n#---------------------------------------------------------------------\n# Security Configuration\n#---------------------------------------------------------------------\n\nglobal\n    # Security settings\n    tune.ssl.default-dh-param 2048\n    tune.ssl.capture-buffer-size 0\n    tune.ssl.maxrecord 1460\n    \n    # Disable SSLv3 and weak ciphers\n    ssl-default-bind-options no-sslv3 no-tlsv10 no-tlsv11\n\ndefaults\n    # Hide server information\n    option hide-version\n    \n    # Security headers for all responses\n    http-response del-header Server\n    http-response del-header X-Powered-By\n    \n    # Request size limits\n    http-request deny if { req.body_size gt 10000000 }  # 10MB limit\n    \n    # Block suspicious request methods\n    acl blocked_methods method TRACE CONNECT\n    http-request deny if blocked_methods\n    \n    # Block requests with suspicious headers\n    acl suspicious_headers hdr_cnt(host) gt 1\n    acl suspicious_headers hdr_cnt(content-length) gt 1\n    http-request deny if suspicious_headers\n\n# Rate limiting configuration\nbackend rate_limit_abuse\n    stick-table type ip size 100k expire 30s store gpc0,gpc1,http_req_rate(10s),http_err_rate(10s),conn_rate(10s)\n\nfrontend rate_limiting\n    # Track requests per IP\n    http-request track-sc0 src table rate_limit_abuse\n    \n    # Deny clients that exceed rate limits\n    http-request deny if { sc_http_req_rate(0) gt 100 }\n    http-request deny if { sc_conn_rate(0) gt 20 }\n    http-request deny if { sc_http_err_rate(0) gt 10 }\n    \n    # Slow down abusive clients\n    http-request set-var(req.delay) int(1000) if { sc_http_req_rate(0) gt 50 }\n    http-request lua.delay_request if { var(req.delay) -m found }\n\n# WAF-like filtering\nfrontend security_frontend\n    # Block common attacks\n    acl is_sql_injection path_reg -i .*(union|select|insert|delete|update|drop|create|alter|exec|script|javascript|vbscript|onload|onerror|onclick).*\n    acl is_xss path_reg -i .*(script|iframe|object|embed|form|img|svg|math|details|svg).*\n    acl is_path_traversal path_reg -i .*(\\.\\./|\\.\\.\\\\|%2e%2e%2f|%2e%2e\\\\).*\n    \n    http-request deny if is_sql_injection\n    http-request deny if is_xss\n    http-request deny if is_path_traversal\n    \n    # GeoIP blocking (requires GeoIP data)\n    # http-request deny if { src,map_ip(/etc/haproxy/geoip/country.map) -i CN RU }\n\nEOF\n\n# Include security configuration\necho \"include /etc/haproxy/conf.d/*.cfg\" | sudo tee -a /etc/haproxy/haproxy.cfg\n```\n\n## Advanced Load Balancing Strategies\n\n### Multi-Tier Application Load Balancing\n```bash\nsudo tee /etc/haproxy/haproxy.cfg \u003e /dev/null \u003c\u003cEOF\nglobal\n    log stdout local0\n    stats socket /run/haproxy/admin.sock mode 660 level admin\n    user haproxy\n    group haproxy\n    daemon\n\ndefaults\n    mode http\n    log global\n    option httplog\n    option dontlognull\n    timeout connect 5s\n    timeout client 50s\n    timeout server 50s\n\n#---------------------------------------------------------------------\n# Application Frontend with Advanced Routing\n#---------------------------------------------------------------------\n\nfrontend app_frontend\n    bind *:443 ssl crt /etc/haproxy/ssl/ alpn h2,http/1.1\n    \n    # ACLs for microservices routing\n    acl is_user_service path_beg /api/users/\n    acl is_order_service path_beg /api/orders/\n    acl is_payment_service path_beg /api/payments/\n    acl is_notification_service path_beg /api/notifications/\n    acl is_admin_panel path_beg /admin/\n    acl is_monitoring path_beg /monitoring/\n    \n    # Geographic routing\n    acl is_us_traffic src 192.168.1.0/24\n    acl is_eu_traffic src 192.168.2.0/24\n    acl is_asia_traffic src 192.168.3.0/24\n    \n    # Device detection\n    acl is_mobile hdr_reg(User-Agent) -i (mobile|android|iphone|ipad)\n    acl is_desktop hdr_reg(User-Agent) -i (windows|macos|linux)\n    \n    # Routing decisions\n    use_backend user_service_us if is_user_service is_us_traffic\n    use_backend user_service_eu if is_user_service is_eu_traffic\n    use_backend order_service if is_order_service\n    use_backend payment_service if is_payment_service\n    use_backend notification_service if is_notification_service\n    use_backend admin_panel if is_admin_panel\n    use_backend monitoring_backend if is_monitoring\n    use_backend mobile_servers if is_mobile\n    default_backend web_servers\n\n# User Service Backends (Geographic)\nbackend user_service_us\n    balance roundrobin\n    option httpchk GET /api/users/health\n    http-check expect status 200\n    server user-us-1 192.168.1.100:3001 check\n    server user-us-2 192.168.1.101:3001 check\n    server user-us-3 192.168.1.102:3001 check\n\nbackend user_service_eu\n    balance roundrobin\n    option httpchk GET /api/users/health\n    server user-eu-1 192.168.2.100:3001 check\n    server user-eu-2 192.168.2.101:3001 check\n\n# Microservices Backends\nbackend order_service\n    balance leastconn\n    option httpchk GET /api/orders/health\n    server order-1 192.168.1.110:3002 check\n    server order-2 192.168.1.111:3002 check\n    server order-3 192.168.1.112:3002 check\n\nbackend payment_service\n    balance roundrobin\n    option httpchk GET /api/payments/health\n    # Enhanced security for payment service\n    http-request set-header X-Forwarded-Proto https\n    http-request add-header X-Client-IP %[src]\n    server payment-1 192.168.1.120:3003 check ssl verify none\n    server payment-2 192.168.1.121:3003 check ssl verify none\n\nbackend notification_service\n    balance roundrobin\n    option httpchk GET /api/notifications/health\n    server notification-1 192.168.1.130:3004 check\n    server notification-2 192.168.1.131:3004 check\n\n# Admin Panel Backend (Restricted)\nbackend admin_panel\n    balance source\n    option httpchk GET /admin/health\n    http-check expect status 200\n    \n    # Additional security\n    http-request add-header X-Admin-Access \"true\"\n    timeout server 2m\n    \n    server admin-1 192.168.1.140:9000 check\n\n# Mobile-Optimized Backend\nbackend mobile_servers\n    balance roundrobin\n    option httpchk GET /mobile/health\n    # Mobile-specific optimizations\n    compression algo gzip\n    compression type text/html text/css application/javascript application/json\n    server mobile-1 192.168.1.150:8080 check\n    server mobile-2 192.168.1.151:8080 check\n\n#---------------------------------------------------------------------\n# Monitoring and Statistics\n#---------------------------------------------------------------------\n\nlisten stats\n    bind *:8404 ssl crt /etc/haproxy/ssl/stats.pem\n    stats enable\n    stats uri /\n    stats refresh 5s\n    stats admin if { src 192.168.1.0/24 }\n    stats auth admin:secure_stats_password\n    stats realm \"HAProxy Statistics\"\n    \n    # Prometheus metrics endpoint\n    http-request use-service prometheus-exporter if { path /metrics }\n    \n    # JSON stats API\n    http-request use-service prometheus-exporter if { path /stats/json }\n\n# Health check endpoint for external monitoring\nlisten health_check\n    bind *:8080\n    mode http\n    monitor-uri /health\n    option httplog\n    \n    acl site_dead nbsrv(web_servers) lt 1\n    acl api_dead nbsrv(api_servers) lt 1\n    \n    monitor fail if site_dead\n    monitor fail if api_dead\nEOF\n```\n\n### Global Load Balancing with DNS\n```bash\n# Integration with external DNS load balancing\nsudo tee /etc/haproxy/haproxy-dns.cfg \u003e /dev/null \u003c\u003cEOF\nglobal\n    # DNS resolution for dynamic backends\n    dns-resolver dns1\n        nameserver dns1 8.8.8.8:53\n        nameserver dns2 8.8.4.4:53\n        resolve_retries 3\n        timeout retry 1s\n        hold nx 30s\n        hold other 30s\n        hold refused 30s\n        hold timeout 30s\n        hold valid 10s\n\ndefaults\n    mode http\n    timeout connect 5s\n    timeout client 30s\n    timeout server 30s\n\n# Dynamic backend resolution\nbackend dynamic_backend\n    balance roundrobin\n    option httpchk GET /health\n    \n    # Servers resolved via DNS\n    server-template web- 3 web.example.com:80 check resolvers dns1\n    server-template api- 2 api.example.com:80 check resolvers dns1\n\n# Service discovery integration\nbackend consul_backend\n    balance roundrobin\n    option httpchk GET /health\n    \n    # Consul service discovery\n    server-template consul- 3 _web._tcp.service.consul:80 check resolvers dns1\nEOF\n```\n\n## High Availability and Clustering\n\n### HAProxy Keepalived Setup\n```bash\n# Install keepalived for HA\nsudo apt install -y keepalived  # Ubuntu/Debian\nsudo yum install -y keepalived  # RHEL/CentOS\n\n# Configure keepalived on primary HAProxy\nsudo tee /etc/keepalived/keepalived.conf \u003e /dev/null \u003c\u003cEOF\n! Configuration File for keepalived\n\nglobal_defs {\n    router_id HAProxy_Primary\n    vrrp_skip_check_adv_addr\n    vrrp_strict\n    vrrp_garp_interval 0\n    vrrp_gna_interval 0\n    script_user root\n    enable_script_security\n}\n\n# Health check script\nvrrp_script chk_haproxy {\n    script \"/usr/bin/killall -0 haproxy\"\n    interval 2\n    weight 2\n    fall 3\n    rise 2\n}\n\nvrrp_instance VI_1 {\n    state MASTER\n    interface eth0\n    virtual_router_id 51\n    priority 110\n    advert_int 1\n    authentication {\n        auth_type PASS\n        auth_pass secure_vrrp_password\n    }\n    virtual_ipaddress {\n        192.168.1.100/24\n    }\n    track_script {\n        chk_haproxy\n    }\n    notify_master /etc/keepalived/master.sh\n    notify_backup /etc/keepalived/backup.sh\n}\nEOF\n\n# Create notification scripts\nsudo tee /etc/keepalived/master.sh \u003e /dev/null \u003c\u003c'EOF'\n#!/bin/bash\necho \"$(date): Became MASTER\" \u003e\u003e /var/log/keepalived.log\n# Add any additional master setup commands here\nEOF\n\nsudo tee /etc/keepalived/backup.sh \u003e /dev/null \u003c\u003c'EOF'\n#!/bin/bash\necho \"$(date): Became BACKUP\" \u003e\u003e /var/log/keepalived.log\n# Add any additional backup setup commands here\nEOF\n\nsudo chmod +x /etc/keepalived/{master,backup}.sh\nsudo systemctl enable --now keepalived\n\n# Configure backup HAProxy with lower priority (100 instead of 110)\n```\n\n### Multi-Site Load Balancing\n```bash\n# Configure multi-site load balancing\nsudo tee /etc/haproxy/haproxy-multisite.cfg \u003e /dev/null \u003c\u003cEOF\nglobal\n    log stdout local0\n    stats socket /run/haproxy/admin.sock mode 660 level admin\n    user haproxy\n    group haproxy\n    daemon\n\ndefaults\n    mode http\n    log global\n    option httplog\n    timeout connect 5s\n    timeout client 30s\n    timeout server 30s\n\n# Frontend for multi-site routing\nfrontend multisite_frontend\n    bind *:443 ssl crt /etc/haproxy/ssl/ alpn h2,http/1.1\n    \n    # Site detection based on headers\n    acl is_site_a hdr(host) -i site-a.example.com\n    acl is_site_b hdr(host) -i site-b.example.com\n    acl is_site_c hdr(host) -i site-c.example.com\n    \n    # Geographic routing based on source IP\n    acl is_americas src 10.1.0.0/16\n    acl is_europe src 10.2.0.0/16\n    acl is_asia src 10.3.0.0/16\n    \n    # Route to appropriate backends\n    use_backend site_a_americas if is_site_a is_americas\n    use_backend site_a_europe if is_site_a is_europe\n    use_backend site_a_asia if is_site_a is_asia\n    use_backend site_b_backend if is_site_b\n    use_backend site_c_backend if is_site_c\n    \n    default_backend default_site\n\n# Regional backends\nbackend site_a_americas\n    balance leastconn\n    option httpchk GET /health\n    server site-a-us-1 us-east-1.example.com:80 check\n    server site-a-us-2 us-west-2.example.com:80 check\n\nbackend site_a_europe\n    balance leastconn\n    option httpchk GET /health\n    server site-a-eu-1 eu-west-1.example.com:80 check\n    server site-a-eu-2 eu-central-1.example.com:80 check\n\nbackend site_a_asia\n    balance leastconn\n    option httpchk GET /health\n    server site-a-ap-1 ap-southeast-1.example.com:80 check\n    server site-a-ap-2 ap-northeast-1.example.com:80 check\nEOF\n```\n\n## Monitoring and Observability\n\n### Prometheus Integration\n```bash\n# Configure HAProxy for Prometheus scraping\nsudo tee -a /etc/haproxy/haproxy.cfg \u003e /dev/null \u003c\u003cEOF\n\n# Prometheus metrics endpoint\nfrontend prometheus_frontend\n    bind *:8405\n    http-request use-service prometheus-exporter if { path /metrics }\n    http-request deny\nEOF\n\n# Create HAProxy exporter configuration\nsudo tee /etc/systemd/system/haproxy-exporter.service \u003e /dev/null \u003c\u003cEOF\n[Unit]\nDescription=HAProxy Exporter for Prometheus\nAfter=network.target\n\n[Service]\nType=simple\nUser=haproxy\nExecStart=/usr/local/bin/haproxy_exporter \\\n    --haproxy.scrape-uri=\"http://admin:secure_stats_password@localhost:8404/stats;csv\" \\\n    --web.listen-address=\"0.0.0.0:9101\"\nRestart=always\n\n[Install]\nWantedBy=multi-user.target\nEOF\n\n# Download HAProxy exporter\nHAPROXY_EXPORTER_VERSION=\"0.15.0\"\nwget https://github.com/prometheus/haproxy_exporter/releases/download/v${HAPROXY_EXPORTER_VERSION}/haproxy_exporter-${HAPROXY_EXPORTER_VERSION}.linux-amd64.tar.gz\ntar xzf haproxy_exporter-${HAPROXY_EXPORTER_VERSION}.linux-amd64.tar.gz\nsudo cp haproxy_exporter-${HAPROXY_EXPORTER_VERSION}.linux-amd64/haproxy_exporter /usr/local/bin/\n\nsudo systemctl daemon-reload\nsudo systemctl enable --now haproxy-exporter\n```\n\n### Comprehensive Logging\n```bash\n# Configure rsyslog for HAProxy\nsudo tee /etc/rsyslog.d/49-haproxy.conf \u003e /dev/null \u003c\u003cEOF\n# HAProxy log configuration\n\\$ModLoad imudp\n\\$UDPServerRun 514\n\\$UDPServerAddress 127.0.0.1\n\n# HAProxy logs\nlocal0.*    /var/log/haproxy/haproxy.log\n\u0026 stop\n\n# Separate access and error logs\nlocal0.info /var/log/haproxy/access.log\nlocal0.err  /var/log/haproxy/error.log\nlocal0.warning /var/log/haproxy/warning.log\nEOF\n\n# Create log directory\nsudo mkdir -p /var/log/haproxy\nsudo chown syslog:adm /var/log/haproxy\n\n# Configure log rotation\nsudo tee /etc/logrotate.d/haproxy \u003e /dev/null \u003c\u003cEOF\n/var/log/haproxy/*.log {\n    daily\n    rotate 30\n    missingok\n    notifempty\n    compress\n    delaycompress\n    postrotate\n        /bin/kill -HUP \\`cat /var/run/rsyslogd.pid 2\u003e/dev/null\\` 2\u003e/dev/null || true\n    endscript\n}\nEOF\n\nsudo systemctl restart rsyslog\nsudo systemctl reload haproxy\n```\n\n## Performance Optimization\n\n### System-Level Tuning\n```bash\n# Kernel optimization for HAProxy\nsudo tee -a /etc/sysctl.conf \u003e /dev/null \u003c\u003cEOF\n# HAProxy performance tuning\nnet.core.somaxconn = 65535\nnet.core.netdev_max_backlog = 5000\nnet.ipv4.tcp_max_syn_backlog = 65535\nnet.ipv4.tcp_max_tw_buckets = 400000\nnet.ipv4.tcp_tw_reuse = 1\nnet.ipv4.tcp_fin_timeout = 10\nnet.ipv4.ip_local_port_range = 15000 65000\nnet.core.rmem_default = 262144\nnet.core.rmem_max = 16777216\nnet.core.wmem_default = 262144\nnet.core.wmem_max = 16777216\nnet.ipv4.tcp_rmem = 4096 65536 16777216\nnet.ipv4.tcp_wmem = 4096 65536 16777216\nfs.file-max = 100000\nvm.swappiness = 1\nEOF\n\nsudo sysctl -p\n\n# Set resource limits\nsudo tee -a /etc/security/limits.conf \u003e /dev/null \u003c\u003cEOF\nhaproxy soft nofile 65535\nhaproxy hard nofile 65535\nhaproxy soft nproc 65535\nhaproxy hard nproc 65535\nEOF\n\n# Optimize HAProxy service\nsudo tee /etc/systemd/system/haproxy.service.d/performance.conf \u003e /dev/null \u003c\u003cEOF\n[Service]\nLimitNOFILE=65535\nLimitNPROC=65535\nExecStart=\nExecStart=/usr/sbin/haproxy -f /etc/haproxy/haproxy.cfg -p /run/haproxy.pid -S /run/haproxy-master.sock\nExecReload=/usr/sbin/haproxy -f /etc/haproxy/haproxy.cfg -c -q\nExecReload=/bin/kill -USR2 \\$MAINPID\nEOF\n\nsudo systemctl daemon-reload\nsudo systemctl restart haproxy\n```\n\n### Advanced Performance Configuration\n```bash\nsudo tee /etc/haproxy/performance.cfg \u003e /dev/null \u003c\u003cEOF\nglobal\n    # Performance optimization\n    maxconn 40000\n    nbthread 8\n    cpu-map auto:1/1-8 0-7\n    \n    # Memory optimization\n    tune.maxrewrite 1024\n    tune.bufsize 32768\n    \n    # Connection optimization\n    tune.maxaccept 500\n    tune.recv_enough 10000\n    \n    # SSL optimization\n    tune.ssl.default-dh-param 2048\n    tune.ssl.maxrecord 1460\n    tune.ssl.capture-buffer-size 0\n    \n    # Compression\n    tune.comp.maxlevel 6\n\ndefaults\n    # Performance settings\n    maxconn 8000\n    \n    # Timeouts\n    timeout connect 3s\n    timeout client 25s\n    timeout server 25s\n    timeout tunnel 3600s\n    timeout http-keep-alive 1s\n    timeout http-request 15s\n    timeout queue 30s\n    timeout tarpit 60s\n    \n    # Keep-alive optimization\n    option http-keep-alive\n    option prefer-last-server\n    \n    # Compression\n    compression algo gzip\n    compression type text/html text/css text/javascript application/javascript application/json application/xml\n\n# High-performance backend configuration\nbackend high_performance_backend\n    balance leastconn\n    option httpchk GET /health\n    http-check expect status 200\n    \n    # Connection pooling\n    option http-reuse always\n    \n    # Server configuration with optimal settings\n    default-server inter 1000 fastinter 500 downinter 2000 rise 2 fall 3 slowstart 30s maxconn 1000 maxqueue 256 weight 100\n    \n    server web1 192.168.1.10:8080 check\n    server web2 192.168.1.11:8080 check\n    server web3 192.168.1.12:8080 check\n    server web4 192.168.1.13:8080 check\nEOF\n```\n\n## Backup and Disaster Recovery\n\n### Configuration Management and Backup\n```bash\nsudo tee /usr/local/bin/haproxy-backup.sh \u003e /dev/null \u003c\u003c'EOF'\n#!/bin/bash\nBACKUP_DIR=\"/backup/haproxy\"\nDATE=$(date +%Y%m%d_%H%M%S)\n\nmkdir -p ${BACKUP_DIR}/{config,ssl,stats,logs}\n\n# Backup configuration files\ntar -czf ${BACKUP_DIR}/config/haproxy-config-${DATE}.tar.gz \\\n    /etc/haproxy/ \\\n    /etc/systemd/system/haproxy.service* \\\n    /etc/keepalived/\n\n# Backup SSL certificates\ntar -czf ${BACKUP_DIR}/ssl/haproxy-ssl-${DATE}.tar.gz \\\n    /etc/haproxy/ssl/ \\\n    /etc/letsencrypt/\n\n# Backup statistics and runtime state\necho \"show stat\" | socat stdio /run/haproxy/admin.sock \u003e ${BACKUP_DIR}/stats/haproxy-stats-${DATE}.txt\necho \"show info\" | socat stdio /run/haproxy/admin.sock \u003e ${BACKUP_DIR}/stats/haproxy-info-${DATE}.txt\necho \"show sess\" | socat stdio /run/haproxy/admin.sock \u003e ${BACKUP_DIR}/stats/haproxy-sessions-${DATE}.txt\n\n# Backup recent logs\nfind /var/log/haproxy -name \"*.log\" -mtime -1 -exec tar -czf ${BACKUP_DIR}/logs/haproxy-logs-${DATE}.tar.gz {} +\n\n# Upload to cloud storage\naws s3 cp ${BACKUP_DIR}/ s3://haproxy-backups/ --recursive\naz storage blob upload-batch --source ${BACKUP_DIR} --destination haproxy-backups\ngsutil cp -r ${BACKUP_DIR}/* gs://haproxy-backups/\n\n# Keep only last 15 backups\nfind ${BACKUP_DIR} -name \"haproxy-*\" -type f -mtime +15 -delete\n\n# Test configuration validity\nhaproxy -c -f /etc/haproxy/haproxy.cfg\n\necho \"HAProxy backup completed: ${DATE}\"\nEOF\n\nsudo chmod +x /usr/local/bin/haproxy-backup.sh\n\n# Schedule daily backups\necho \"0 2 * * * root /usr/local/bin/haproxy-backup.sh\" | sudo tee -a /etc/crontab\n```\n\n### Disaster Recovery Automation\n```bash\nsudo tee /usr/local/bin/haproxy-dr.sh \u003e /dev/null \u003c\u003c'EOF'\n#!/bin/bash\nDR_MODE=\"${1:-test}\"  # test, activate, or deactivate\n\ncase \"$DR_MODE\" in\n    \"test\")\n        echo \"Testing DR procedures...\"\n        \n        # Test backup restoration\n        LATEST_BACKUP=$(ls -t /backup/haproxy/config/haproxy-config-*.tar.gz | head -1)\n        if [ -n \"$LATEST_BACKUP\" ]; then\n            echo \"✓ Latest backup found: $LATEST_BACKUP\"\n        else\n            echo \"✗ No backup files found\"\n            exit 1\n        fi\n        \n        # Test configuration\n        haproxy -c -f /etc/haproxy/haproxy.cfg\n        echo \"✓ Configuration is valid\"\n        \n        # Test backend connectivity\n        for backend in $(echo \"show stat\" | socat stdio /run/haproxy/admin.sock | grep \",BACKEND,\" | cut -d, -f1); do\n            echo \"Testing backend: $backend\"\n            echo \"show stat\" | socat stdio /run/haproxy/admin.sock | grep \"$backend\"\n        done\n        \n        echo \"DR test completed\"\n        ;;\n        \n    \"activate\")\n        echo \"Activating DR procedures...\"\n        \n        # Switch to DR configuration\n        cp /etc/haproxy/haproxy-dr.cfg /etc/haproxy/haproxy.cfg\n        \n        # Reload HAProxy\n        systemctl reload haproxy\n        \n        # Update DNS (example with Route53)\n        aws route53 change-resource-record-sets --hosted-zone-id Z123456789 --change-batch file://dr-dns-update.json\n        \n        echo \"DR activated\"\n        ;;\n        \n    \"deactivate\")\n        echo \"Deactivating DR procedures...\"\n        \n        # Restore original configuration\n        cp /etc/haproxy/haproxy.cfg.backup /etc/haproxy/haproxy.cfg\n        \n        # Reload HAProxy\n        systemctl reload haproxy\n        \n        # Update DNS back to primary\n        aws route53 change-resource-record-sets --hosted-zone-id Z123456789 --change-batch file://primary-dns-update.json\n        \n        echo \"DR deactivated\"\n        ;;\n        \n    *)\n        echo \"Usage: $0 {test|activate|deactivate}\"\n        exit 1\n        ;;\nesac\nEOF\n\nsudo chmod +x /usr/local/bin/haproxy-dr.sh\n```\n\n## Verification and Health Checks\n\n### Comprehensive Health Monitoring\n```bash\nsudo tee /usr/local/bin/haproxy-health-check.sh \u003e /dev/null \u003c\u003c'EOF'\n#!/bin/bash\nHEALTH_LOG=\"/var/log/haproxy-health.log\"\n\nlog_message() {\n    echo \"$(date '+%Y-%m-%d %H:%M:%S') - $1\" | tee -a ${HEALTH_LOG}\n}\n\n# Check HAProxy service status\nif systemctl is-active haproxy \u003e/dev/null 2\u003e\u00261; then\n    log_message \"✓ HAProxy service is running\"\nelse\n    log_message \"✗ HAProxy service is not running\"\n    exit 1\nfi\n\n# Check configuration validity\nif haproxy -c -f /etc/haproxy/haproxy.cfg \u003e/dev/null 2\u003e\u00261; then\n    log_message \"✓ HAProxy configuration is valid\"\nelse\n    log_message \"✗ HAProxy configuration has errors\"\n    haproxy -c -f /etc/haproxy/haproxy.cfg\nfi\n\n# Check listening ports\nLISTENING_PORTS=$(netstat -tlnp | grep haproxy | wc -l)\nlog_message \"✓ HAProxy is listening on ${LISTENING_PORTS} ports\"\n\n# Check backend server health\nBACKEND_STATS=$(echo \"show stat\" | socat stdio /run/haproxy/admin.sock | grep -c \",UP,\")\nTOTAL_SERVERS=$(echo \"show stat\" | socat stdio /run/haproxy/admin.sock | grep -c \",.*,\")\nlog_message \"✓ ${BACKEND_STATS}/${TOTAL_SERVERS} backend servers are healthy\"\n\n# Check SSL certificate expiry\nif [ -d /etc/haproxy/ssl ]; then\n    for cert in /etc/haproxy/ssl/*.pem; do\n        if [ -f \"$cert\" ]; then\n            EXPIRY=$(openssl x509 -in \"$cert\" -noout -dates | grep notAfter | cut -d= -f2)\n            EXPIRY_EPOCH=$(date -d \"$EXPIRY\" +%s)\n            CURRENT_EPOCH=$(date +%s)\n            DAYS_TO_EXPIRY=$(( (EXPIRY_EPOCH - CURRENT_EPOCH) / 86400 ))\n            \n            if [ $DAYS_TO_EXPIRY -lt 30 ]; then\n                log_message \"⚠ SSL certificate $(basename $cert) expires in ${DAYS_TO_EXPIRY} days\"\n            else\n                log_message \"✓ SSL certificate $(basename $cert) expires in ${DAYS_TO_EXPIRY} days\"\n            fi\n        fi\n    done\nfi\n\n# Check memory usage\nMEMORY_USAGE=$(ps -o pid,vsz,rss,comm -C haproxy | tail -1 | awk '{print $3/1024}')\nlog_message \"ℹ HAProxy memory usage: ${MEMORY_USAGE}MB\"\n\n# Check connection statistics\nCURRENT_CONNS=$(echo \"show info\" | socat stdio /run/haproxy/admin.sock | grep \"CurrConns\" | cut -d: -f2 | tr -d ' ')\nMAX_CONNS=$(echo \"show info\" | socat stdio /run/haproxy/admin.sock | grep \"MaxConn\" | cut -d: -f2 | tr -d ' ')\nlog_message \"ℹ Current connections: ${CURRENT_CONNS}/${MAX_CONNS}\"\n\n# Check for any backend servers that are down\nDOWN_SERVERS=$(echo \"show stat\" | socat stdio /run/haproxy/admin.sock | grep \",DOWN,\" | wc -l)\nif [ $DOWN_SERVERS -gt 0 ]; then\n    log_message \"⚠ ${DOWN_SERVERS} backend servers are down\"\n    echo \"show stat\" | socat stdio /run/haproxy/admin.sock | grep \",DOWN,\" | while IFS=, read pxname svname; do\n        log_message \"  - ${pxname}/${svname} is DOWN\"\n    done\nfi\n\nlog_message \"HAProxy health check completed\"\nEOF\n\nsudo chmod +x /usr/local/bin/haproxy-health-check.sh\n\n# Schedule health checks every 5 minutes\necho \"*/5 * * * * root /usr/local/bin/haproxy-health-check.sh\" | sudo tee -a /etc/crontab\n```\n\n### Load Testing and Performance Validation\n```bash\nsudo tee /usr/local/bin/haproxy-load-test.sh \u003e /dev/null \u003c\u003c'EOF'\n#!/bin/bash\nTEST_RESULTS=\"/tmp/haproxy-load-test-$(date +%Y%m%d_%H%M%S).txt\"\nTEST_URL=\"https://example.com\"\nCONCURRENT_USERS=100\nTEST_DURATION=60\n\necho \"HAProxy Load Test Results\" \u003e ${TEST_RESULTS}\necho \"========================\" \u003e\u003e ${TEST_RESULTS}\necho \"Date: $(date)\" \u003e\u003e ${TEST_RESULTS}\necho \"Target URL: ${TEST_URL}\" \u003e\u003e ${TEST_RESULTS}\necho \"Concurrent Users: ${CONCURRENT_USERS}\" \u003e\u003e ${TEST_RESULTS}\necho \"Test Duration: ${TEST_DURATION}s\" \u003e\u003e ${TEST_RESULTS}\necho \"\" \u003e\u003e ${TEST_RESULTS}\n\n# Install testing tools if not available\nif ! command -v ab \u0026\u003e /dev/null; then\n    apt-get update \u0026\u0026 apt-get install -y apache2-utils\nfi\n\nif ! command -v wrk \u0026\u003e /dev/null; then\n    git clone https://github.com/wg/wrk.git /tmp/wrk\n    cd /tmp/wrk \u0026\u0026 make \u0026\u0026 cp wrk /usr/local/bin/\nfi\n\n# Run Apache Bench test\necho \"Apache Bench Results:\" \u003e\u003e ${TEST_RESULTS}\nab -n 10000 -c ${CONCURRENT_USERS} -k ${TEST_URL}/ \u003e\u003e ${TEST_RESULTS} 2\u003e\u00261\n\necho \"\" \u003e\u003e ${TEST_RESULTS}\necho \"WRK Results:\" \u003e\u003e ${TEST_RESULTS}\nwrk -t4 -c${CONCURRENT_USERS} -d${TEST_DURATION}s --latency ${TEST_URL}/ \u003e\u003e ${TEST_RESULTS}\n\n# Capture HAProxy stats during test\necho \"\" \u003e\u003e ${TEST_RESULTS}\necho \"HAProxy Statistics During Test:\" \u003e\u003e ${TEST_RESULTS}\necho \"show info\" | socat stdio /run/haproxy/admin.sock \u003e\u003e ${TEST_RESULTS}\necho \"show stat\" | socat stdio /run/haproxy/admin.sock \u003e\u003e ${TEST_RESULTS}\n\necho \"\" \u003e\u003e ${TEST_RESULTS}\necho \"Load test completed at: $(date)\" \u003e\u003e ${TEST_RESULTS}\n\necho \"Load test completed. Results: ${TEST_RESULTS}\"\nEOF\n\nsudo chmod +x /usr/local/bin/haproxy-load-test.sh\n```\n\n## Firewall Configuration (Cross-Platform)\n\n### Security Rules\n```bash\n# UFW (Ubuntu/Debian)\nsudo ufw allow 80/tcp comment 'HTTP'\nsudo ufw allow 443/tcp comment 'HTTPS' \nsudo ufw allow from 192.168.1.0/24 to any port 8404 comment 'Stats interface - internal only'\nsudo ufw allow from 192.168.1.0/24 to any port 9101 comment 'Prometheus exporter - internal only'\nsudo ufw deny 8404 comment 'Block stats from public'\nsudo ufw enable\n\n# Firewalld (RHEL/CentOS/Fedora)\nsudo firewall-cmd --permanent --add-service=http\nsudo firewall-cmd --permanent --add-service=https\nsudo firewall-cmd --permanent --new-zone=haproxy-mgmt\nsudo firewall-cmd --permanent --zone=haproxy-mgmt --add-source=192.168.1.0/24\nsudo firewall-cmd --permanent --zone=haproxy-mgmt --add-port=8404/tcp\nsudo firewall-cmd --permanent --zone=haproxy-mgmt --add-port=9101/tcp\nsudo firewall-cmd --reload\n\n# iptables (Universal)\nsudo iptables -A INPUT -p tcp --dport 80 -j ACCEPT\nsudo iptables -A INPUT -p tcp --dport 443 -j ACCEPT\nsudo iptables -A INPUT -p tcp -s 192.168.1.0/24 --dport 8404 -j ACCEPT\nsudo iptables -A INPUT -p tcp -s 192.168.1.0/24 --dport 9101 -j ACCEPT\nsudo iptables -A INPUT -p tcp --dport 8404 -j DROP\nsudo iptables -A INPUT -p tcp --dport 9101 -j DROP\n\n# Save iptables rules\n# Ubuntu/Debian\nsudo apt install -y iptables-persistent\nsudo netfilter-persistent save\n\n# RHEL/CentOS\nsudo service iptables save\n```\n\n### DDoS Protection Configuration\n```bash\nsudo tee /etc/haproxy/ddos-protection.cfg \u003e /dev/null \u003c\u003cEOF\n# DDoS Protection Configuration\n\nglobal\n    # Stick tables for tracking\n    tune.stick-table.enable 1\n\nfrontend ddos_protection\n    bind *:80\n    bind *:443 ssl crt /etc/haproxy/ssl/\n    \n    # Track client behavior\n    stick-table type ip size 1m expire 5m store gpc0,gpc1,http_req_rate(10s),http_err_rate(10s),conn_rate(10s),bytes_out_rate(10s)\n    \n    # Track requests\n    http-request track-sc0 src\n    \n    # Rate limiting rules\n    acl abuse_request_rate sc_http_req_rate(0) gt 100\n    acl abuse_connection_rate sc_conn_rate(0) gt 20\n    acl abuse_error_rate sc_http_err_rate(0) gt 10\n    acl abuse_bandwidth sc_bytes_out_rate(0) gt 10000000  # 10MB/s\n    \n    # Geographic blocking (requires GeoIP)\n    # acl blocked_countries src,map_ip(/etc/haproxy/geoip-country.map) -i CN RU\n    \n    # User-Agent filtering\n    acl bad_user_agent hdr_sub(User-Agent) -i \"sqlmap\" \"nikto\" \"nmap\" \"masscan\" \"zmap\"\n    acl empty_user_agent hdr_cnt(User-Agent) eq 0\n    \n    # HTTP method filtering\n    acl allowed_methods method GET POST PUT DELETE HEAD OPTIONS PATCH\n    \n    # Deny rules\n    http-request deny if abuse_request_rate\n    http-request deny if abuse_connection_rate\n    http-request deny if abuse_error_rate\n    http-request deny if abuse_bandwidth\n    http-request deny if bad_user_agent\n    http-request deny if empty_user_agent\n    http-request deny if !allowed_methods\n    # http-request deny if blocked_countries\n    \n    # Tarpit suspicious clients\n    http-request tarpit if { sc_http_req_rate(0) gt 50 }\n    \n    default_backend web_servers\n\n# Clean backend\nbackend web_servers\n    balance leastconn\n    option httpchk GET /health\n    \n    server web1 192.168.1.10:8080 check\n    server web2 192.168.1.11:8080 check\n    server web3 192.168.1.12:8080 check\nEOF\n```\n\n## Runtime Management and Monitoring\n\n### Advanced Runtime Commands\n```bash\n# Create HAProxy management script\nsudo tee /usr/local/bin/haproxy-manage.sh \u003e /dev/null \u003c\u003c'EOF'\n#!/bin/bash\nHAPROXY_SOCKET=\"/run/haproxy/admin.sock\"\n\ncase \"$1\" in\n    \"status\")\n        echo \"=== HAProxy Status ===\"\n        echo \"show info\" | socat stdio ${HAPROXY_SOCKET}\n        echo \"\"\n        echo \"=== Server Status ===\"\n        echo \"show stat\" | socat stdio ${HAPROXY_SOCKET} | column -t -s \",\"\n        ;;\n    \n    \"enable\")\n        if [ -z \"$2\" ] || [ -z \"$3\" ]; then\n            echo \"Usage: $0 enable \u003cbackend\u003e \u003cserver\u003e\"\n            exit 1\n        fi\n        echo \"enable server $2/$3\" | socat stdio ${HAPROXY_SOCKET}\n        echo \"Server $2/$3 enabled\"\n        ;;\n    \n    \"disable\")\n        if [ -z \"$2\" ] || [ -z \"$3\" ]; then\n            echo \"Usage: $0 disable \u003cbackend\u003e \u003cserver\u003e\"\n            exit 1\n        fi\n        echo \"disable server $2/$3\" | socat stdio ${HAPROXY_SOCKET}\n        echo \"Server $2/$3 disabled\"\n        ;;\n    \n    \"weight\")\n        if [ -z \"$2\" ] || [ -z \"$3\" ] || [ -z \"$4\" ]; then\n            echo \"Usage: $0 weight \u003cbackend\u003e \u003cserver\u003e \u003cweight\u003e\"\n            exit 1\n        fi\n        echo \"set weight $2/$3 $4\" | socat stdio ${HAPROXY_SOCKET}\n        echo \"Weight for $2/$3 set to $4\"\n        ;;\n    \n    \"sessions\")\n        echo \"=== Active Sessions ===\"\n        echo \"show sess\" | socat stdio ${HAPROXY_SOCKET}\n        ;;\n    \n    \"errors\")\n        echo \"=== Recent Errors ===\"\n        echo \"show errors\" | socat stdio ${HAPROXY_SOCKET}\n        ;;\n    \n    \"reload\")\n        echo \"Reloading HAProxy configuration...\"\n        if haproxy -c -f /etc/haproxy/haproxy.cfg; then\n            systemctl reload haproxy\n            echo \"Configuration reloaded successfully\"\n        else\n            echo \"Configuration has errors, reload aborted\"\n            exit 1\n        fi\n        ;;\n    \n    \"drain\")\n        if [ -z \"$2\" ] || [ -z \"$3\" ]; then\n            echo \"Usage: $0 drain \u003cbackend\u003e \u003cserver\u003e\"\n            exit 1\n        fi\n        echo \"set server $2/$3 state drain\" | socat stdio ${HAPROXY_SOCKET}\n        echo \"Server $2/$3 is being drained\"\n        \n        # Wait for connections to finish\n        while [ $(echo \"show stat\" | socat stdio ${HAPROXY_SOCKET} | grep \"$2,$3\" | cut -d, -f5) -gt 0 ]; do\n            echo \"Waiting for connections to finish...\"\n            sleep 5\n        done\n        echo \"Server $2/$3 has been drained\"\n        ;;\n    \n    *)\n        echo \"Usage: $0 {status|enable|disable|weight|sessions|errors|reload|drain} [options]\"\n        echo \"\"\n        echo \"Examples:\"\n        echo \"  $0 status\"\n        echo \"  $0 enable web_servers web1\"\n        echo \"  $0 disable web_servers web1\"\n        echo \"  $0 weight web_servers web1 50\"\n        echo \"  $0 drain web_servers web1\"\n        echo \"  $0 sessions\"\n        echo \"  $0 errors\"\n        echo \"  $0 reload\"\n        exit 1\n        ;;\nesac\nEOF\n\nsudo chmod +x /usr/local/bin/haproxy-manage.sh\n```\n\n### Automated Log Analysis\n```bash\nsudo tee /usr/local/bin/haproxy-log-analysis.sh \u003e /dev/null \u003c\u003c'EOF'\n#!/bin/bash\nLOG_FILE=\"/var/log/haproxy/haproxy.log\"\nANALYSIS_DIR=\"/var/log/haproxy-analysis\"\nDATE=$(date +%Y%m%d_%H%M%S)\n\nmkdir -p ${ANALYSIS_DIR}\n\n# Top client IPs\necho \"Top Client IPs - ${DATE}\" \u003e ${ANALYSIS_DIR}/top-clients-${DATE}.txt\nawk '{print $6}' ${LOG_FILE} | sort | uniq -c | sort -nr | head -20 \u003e\u003e ${ANALYSIS_DIR}/top-clients-${DATE}.txt\n\n# Response time analysis\necho \"Response Time Analysis - ${DATE}\" \u003e ${ANALYSIS_DIR}/response-times-${DATE}.txt\nawk '{print $11}' ${LOG_FILE} | grep -v '^-$' | sort -n | tail -100 \u003e\u003e ${ANALYSIS_DIR}/response-times-${DATE}.txt\n\n# Error analysis\necho \"Error Analysis - ${DATE}\" \u003e ${ANALYSIS_DIR}/errors-${DATE}.txt\nawk '$10 \u003e= 400 {print $0}' ${LOG_FILE} | tail -100 \u003e\u003e ${ANALYSIS_DIR}/errors-${DATE}.txt\n\n# Backend server analysis\necho \"Backend Server Performance - ${DATE}\" \u003e ${ANALYSIS_DIR}/backend-performance-${DATE}.txt\nawk '{print $8}' ${LOG_FILE} | sort | uniq -c | sort -nr \u003e\u003e ${ANALYSIS_DIR}/backend-performance-${DATE}.txt\n\n# SSL/TLS analysis\necho \"SSL/TLS Analysis - ${DATE}\" \u003e ${ANALYSIS_DIR}/ssl-analysis-${DATE}.txt\ngrep \"SSL\" ${LOG_FILE} | tail -50 \u003e\u003e ${ANALYSIS_DIR}/ssl-analysis-${DATE}.txt\n\n# Generate summary report\ncat \u003e ${ANALYSIS_DIR}/summary-${DATE}.txt \u003c\u003cEOL\nHAProxy Log Analysis Summary - ${DATE}\n=====================================\n\nTotal Requests: $(wc -l \u003c ${LOG_FILE})\nUnique IPs: $(awk '{print $6}' ${LOG_FILE} | sort -u | wc -l)\n4xx Errors: $(awk '$10 \u003e= 400 \u0026\u0026 $10 \u003c 500 {print $0}' ${LOG_FILE} | wc -l)\n5xx Errors: $(awk '$10 \u003e= 500 {print $0}' ${LOG_FILE} | wc -l)\n\nAverage Response Time: $(awk '{sum += $11; count++} END {print sum/count}' ${LOG_FILE})ms\n\nTop 5 Requested URLs:\n$(awk '{print $12}' ${LOG_FILE} | sort | uniq -c | sort -nr | head -5)\n\nAnalysis completed at: $(date)\nEOL\n\necho \"Log analysis completed. Reports in: ${ANALYSIS_DIR}/\"\nEOF\n\nsudo chmod +x /usr/local/bin/haproxy-log-analysis.sh\n\n# Schedule daily log analysis\necho \"0 6 * * * root /usr/local/bin/haproxy-log-analysis.sh\" | sudo tee -a /etc/crontab\n```\n\n## Troubleshooting (Cross-Platform)\n\n### Common Issues and Solutions\n```bash\n# Check HAProxy process status\nps aux | grep haproxy\nsystemctl status haproxy\n\n# Configuration validation\nhaproxy -c -f /etc/haproxy/haproxy.cfg\nhaproxy -c -V -f /etc/haproxy/haproxy.cfg\n\n# Socket connectivity test\nsocat - /run/haproxy/admin.sock\necho \"show info\" | socat stdio /run/haproxy/admin.sock\n\n# Backend server connectivity test\nfor server in 192.168.1.10 192.168.1.11 192.168.1.12; do\n    echo \"Testing $server...\"\n    nc -zv $server 8080\n    curl -I http://$server:8080/health\ndone\n\n# SSL certificate issues\nopenssl x509 -in /etc/haproxy/ssl/example.com.pem -text -noout\nopenssl verify -CAfile /etc/haproxy/ssl/ca.crt /etc/haproxy/ssl/example.com.pem\n\n# Memory usage debugging\npmap -x $(pgrep haproxy)\ncat /proc/$(pgrep haproxy)/status | grep -E \"(VmSize|VmRSS|VmData|VmStk)\"\n\n# Network debugging\nss -tulpn | grep haproxy\nnetstat -tulpn | grep haproxy\nlsof -i :80,443,8404\n\n# Log debugging\ntail -f /var/log/haproxy/haproxy.log\njournalctl -u haproxy -f\n\n# Performance debugging\necho \"show stat\" | socat stdio /run/haproxy/admin.sock | grep -v \"^#\"\necho \"show sess\" | socat stdio /run/haproxy/admin.sock\necho \"show pools\" | socat stdio /run/haproxy/admin.sock\n\n# Configuration debugging\nhaproxy -vv\nhaproxy -dM -f /etc/haproxy/haproxy.cfg  # Don't use in production\n\n# Check for core dumps\nfind /var/crash -name \"haproxy*\" 2\u003e/dev/null\nfind /var/lib/systemd/coredump -name \"*haproxy*\" 2\u003e/dev/null\n```\n\n### Advanced Debugging\n```bash\n# Enable debug logging\nsudo systemctl edit haproxy.service\n# Add:\n[Service]\nExecStart=\nExecStart=/usr/sbin/haproxy -f /etc/haproxy/haproxy.cfg -p /run/haproxy.pid -S /run/haproxy-master.sock -d\n\nsudo systemctl daemon-reload\nsudo systemctl restart haproxy\n\n# Real-time connection monitoring\nwatch -n 1 'echo \"show stat\" | socat stdio /run/haproxy/admin.sock | grep -E \"FRONTEND|BACKEND\" | column -t -s \",\"'\n\n# TCP dump for network analysis\ntcpdump -i any -w haproxy-traffic.pcap port 80 or port 443\ntcpdump -i any -w backend-traffic.pcap host 192.168.1.10\n\n# Strace HAProxy process\nstrace -p $(pgrep haproxy) -e trace=network\n\n# Monitor file descriptors\nlsof -p $(pgrep haproxy) | wc -l\ncat /proc/$(pgrep haproxy)/limits | grep \"Max open files\"\n\n# Check shared memory segments\nipcs -m | grep haproxy\n\n# Monitor syscalls\nperf trace -p $(pgrep haproxy)\n```\n\n## Additional Resources\n\n- [Official Documentation](https://docs.haproxy.org/)\n- [HAProxy Configuration Manual](https://cbonte.github.io/haproxy-dconv/)\n- [Best Practices Guide](https://www.haproxy.com/documentation/hapee/latest/configuration/best-practices/)\n- [Performance Tuning Guide](https://www.haproxy.com/blog/haproxy-performance-tuning/)\n- [Security Guide](https://www.haproxy.com/solutions/security/)\n- [Community Forum](https://discourse.haproxy.org/)\n\n---\n\n**Note:** This guide is part of the [HowToMgr](https://howtomgr.github.io) collection.","readmeHtml":"\u003ch1 id=\"haproxy-installation-guide\" class=\"mobile-header\"\u003eHAProxy Installation Guide\u003c/h1\u003e\n\u003cp class=\"mobile-paragraph\"\u003eHigh-performance TCP/HTTP load balancer and reverse proxy for distributing traffic across multiple backend servers. Industry standard for load balancing with enterprise-grade security and reliability.\u003c/p\u003e\n\u003ch2 id=\"prerequisites\" class=\"mobile-header\"\u003ePrerequisites\u003c/h2\u003e\n\u003cli class=\"mobile-list-item\"\u003eLinux system (any modern distribution)\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eRoot or sudo access\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003e2GB RAM minimum, 4GB+ recommended for high-traffic environments\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eMultiple backend servers to load balance (optional for testing)\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eSSL certificates for production HTTPS termination\u003c/li\u003e\n\u003ch2 id=\"installation\" class=\"mobile-header\"\u003eInstallation\u003c/h2\u003e\n\u003ch3 id=\"using-package-manager-recommended\" class=\"mobile-header\"\u003eUsing Package Manager (Recommended)\u003c/h3\u003e\n\u003cp class=\"mobile-paragraph\"\u003e#### Ubuntu/Debian\u003c/p\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Update package list\nsudo apt-get update\n\n# Install HAProxy and utilities\nsudo apt-get install -y haproxy haproxy-doc software-properties-common\n\n# For latest version from PPA\nsudo add-apt-repository ppa:vbernat/haproxy-2.8\nsudo apt-get update\nsudo apt-get install -y haproxy=2.8.*\n\n# Enable and start HAProxy\nsudo systemctl enable --now haproxy\n\n# Check status\nsudo systemctl status haproxy\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003cp class=\"mobile-paragraph\"\u003e#### RHEL/CentOS/Rocky Linux/AlmaLinux\u003c/p\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Install EPEL repository\nsudo yum install -y epel-release\n\n# Install HAProxy\nsudo yum install -y haproxy\n\n# For newer versions\nsudo dnf install -y haproxy\n\n# Enable and start HAProxy\nsudo systemctl enable --now haproxy\n\n# Check status\nsudo systemctl status haproxy\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003cp class=\"mobile-paragraph\"\u003e#### Fedora\u003c/p\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Install HAProxy\nsudo dnf install -y haproxy\n\n# Enable and start HAProxy\nsudo systemctl enable --now haproxy\n\n# Configure firewall\nsudo firewall-cmd --permanent --add-service=http\nsudo firewall-cmd --permanent --add-service=https\nsudo firewall-cmd --permanent --add-port=8404/tcp  # Stats interface\nsudo firewall-cmd --reload\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003cp class=\"mobile-paragraph\"\u003e#### Arch Linux\u003c/p\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Install HAProxy\nsudo pacman -Syu haproxy\n\n# Enable and start HAProxy\nsudo systemctl enable --now haproxy\n\n# Check status\nsudo systemctl status haproxy\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003cp class=\"mobile-paragraph\"\u003e#### Alpine Linux\u003c/p\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Install HAProxy\nsudo apk update\nsudo apk add haproxy\n\n# Enable and start HAProxy\nsudo rc-update add haproxy default\nsudo service haproxy start\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"from-source-latest-features\" class=\"mobile-header\"\u003eFrom Source (Latest Features)\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Install build dependencies\n# Ubuntu/Debian\nsudo apt-get install -y build-essential libssl-dev libpcre3-dev zlib1g-dev liblua5.3-dev libsystemd-dev\n\n# RHEL/CentOS\nsudo yum groupinstall -y \u0026quot;Development Tools\u0026quot;\nsudo yum install -y openssl-devel pcre-devel zlib-devel lua-devel systemd-devel\n\n# Download latest HAProxy LTS\nHAPROXY_VERSION=\u0026quot;3.0.5\u0026quot;\ncd /tmp\nwget \u0026quot;https://www.haproxy.org/download/3.0/src/haproxy-${HAPROXY_VERSION}.tar.gz\u0026quot;\ntar xzf haproxy-${HAPROXY_VERSION}.tar.gz\ncd haproxy-${HAPROXY_VERSION}\n\n# Compile with full features\nmake clean\nmake -j$(nproc) TARGET=linux-glibc \\\n    USE_OPENSSL=1 \\\n    USE_ZLIB=1 \\\n    USE_PCRE=1 \\\n    USE_SYSTEMD=1 \\\n    USE_LUA=1 \\\n    USE_PROMEX=1 \\\n    USE_THREAD=1 \\\n    USE_CPU_AFFINITY=1 \\\n    USE_TFO=1 \\\n    USE_NS=1 \\\n    USE_DL=1 \\\n    USE_RT=1\n\n# Install HAProxy\nsudo make install\nsudo mkdir -p /etc/haproxy /var/lib/haproxy /var/log/haproxy\nsudo useradd --system --home /var/lib/haproxy --shell /bin/false haproxy\nsudo chown -R haproxy:haproxy /var/lib/haproxy /var/log/haproxy\n\n# Create systemd service\nsudo tee /etc/systemd/system/haproxy.service \u0026gt; /dev/null \u0026lt;\u0026lt;EOF\n[Unit]\nDescription=HAProxy Load Balancer\nDocumentation=man:haproxy(1)\nDocumentation=file:/usr/share/doc/haproxy/configuration.txt\nAfter=network.target\n\n[Service]\nType=notify\nExecStart=/usr/local/sbin/haproxy -f /etc/haproxy/haproxy.cfg -p /run/haproxy.pid -S /run/haproxy-master.sock\nExecReload=/bin/kill -USR2 \\$MAINPID\nExecStop=/bin/kill -USR1 \\$MAINPID\nKillMode=mixed\nRestart=on-failure\nSuccessExitStatus=143\nKillSignal=SIGTERM\n\n# Security settings\nNoNewPrivileges=true\nPrivateTmp=true\nProtectHome=true\nProtectSystem=strict\nReadWritePaths=/var/lib/haproxy\nReadWritePaths=/var/log/haproxy\nReadWritePaths=/run\n\n[Install]\nWantedBy=multi-user.target\nEOF\n\nsudo systemctl daemon-reload\nsudo systemctl enable --now haproxy\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"using-docker\" class=\"mobile-header\"\u003eUsing Docker\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Create HAProxy configuration directory\nmkdir -p ~/haproxy/{config,ssl,logs}\n\n# Create basic configuration\ncat \u0026gt; ~/haproxy/config/haproxy.cfg \u0026lt;\u0026lt;EOF\nglobal\n    log stdout local0\n    chroot /var/lib/haproxy\n    stats socket /run/haproxy/admin.sock mode 660 level admin expose-fd listeners\n    stats timeout 30s\n    user haproxy\n    group haproxy\n    daemon\n    \n    # SSL configuration\n    ssl-default-bind-ciphers ECDHE+AESGCM:ECDHE+CHACHA20:DHE+AESGCM:DHE+CHACHA20:!aNULL:!MD5:!DSS\n    ssl-default-bind-options ssl-min-ver TLSv1.2 no-tls-tickets\n    ssl-default-server-ciphers ECDHE+AESGCM:ECDHE+CHACHA20:DHE+AESGCM:DHE+CHACHA20:!aNULL:!MD5:!DSS\n    ssl-default-server-options ssl-min-ver TLSv1.2 no-tls-tickets\n\ndefaults\n    mode http\n    log global\n    option httplog\n    option dontlognull\n    option log-health-checks\n    option forwardfor\n    option http-server-close\n    timeout connect 5000\n    timeout client 50000\n    timeout server 50000\n    timeout http-keep-alive 4000\n    timeout check 3000\n\n# Frontend\nfrontend web_frontend\n    bind *:80\n    bind *:443 ssl crt /usr/local/etc/haproxy/ssl/ alpn h2,http/1.1\n    \n    # Redirect HTTP to HTTPS\n    redirect scheme https code 301 if !{ ssl_fc }\n    \n    # Security headers\n    http-response set-header Strict-Transport-Security \u0026quot;max-age=31536000; includeSubDomains; preload\u0026quot;\n    http-response set-header X-Frame-Options \u0026quot;SAMEORIGIN\u0026quot;\n    http-response set-header X-Content-Type-Options \u0026quot;nosniff\u0026quot;\n    http-response set-header X-XSS-Protection \u0026quot;1; mode=block\u0026quot;\n    \n    default_backend web_servers\n\n# Backend\nbackend web_servers\n    balance roundrobin\n    option httpchk GET /health\n    http-check expect status 200\n    server web1 192.168.1.10:8080 check\n    server web2 192.168.1.11:8080 check\n    server web3 192.168.1.12:8080 check\n\n# Stats interface\nlisten stats\n    bind *:8404\n    stats enable\n    stats uri /stats\n    stats refresh 30s\n    stats admin if TRUE\nEOF\n\n# Run HAProxy container\ndocker run -d \\\n  --name haproxy \\\n  --restart unless-stopped \\\n  -p 80:80 \\\n  -p 443:443 \\\n  -p 8404:8404 \\\n  -v ~/haproxy/config:/usr/local/etc/haproxy:ro \\\n  -v ~/haproxy/ssl:/usr/local/etc/haproxy/ssl:ro \\\n  -v ~/haproxy/logs:/var/log/haproxy \\\n  haproxy:latest\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"production-configuration\" class=\"mobile-header\"\u003eProduction Configuration\u003c/h2\u003e\n\u003ch3 id=\"enterprise-production-configuration\" class=\"mobile-header\"\u003eEnterprise Production Configuration\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Backup original configuration\nsudo cp /etc/haproxy/haproxy.cfg /etc/haproxy/haproxy.cfg.backup\n\n# Create comprehensive production configuration\nsudo tee /etc/haproxy/haproxy.cfg \u0026gt; /dev/null \u0026lt;\u0026lt;EOF\n#---------------------------------------------------------------------\n# HAProxy Enterprise Production Configuration\n# Version: 3.0+ LTS\n#---------------------------------------------------------------------\n\nglobal\n    log 127.0.0.1:514 local0 info\n    chroot /var/lib/haproxy\n    stats socket /run/haproxy/admin.sock mode 660 level admin expose-fd listeners\n    stats timeout 30s\n    user haproxy\n    group haproxy\n    daemon\n\n    # SSL/TLS configuration (2024 best practices)\n    ssl-default-bind-ciphers ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-CHACHA20-POLY1305:ECDHE-RSA-CHACHA20-POLY1305:DHE-RSA-AES128-GCM-SHA256:DHE-RSA-AES256-GCM-SHA384\n    ssl-default-bind-ciphersuites TLS_AES_128_GCM_SHA256:TLS_AES_256_GCM_SHA384:TLS_CHACHA20_POLY1305_SHA256\n    ssl-default-bind-options ssl-min-ver TLSv1.2 no-tls-tickets prefer-client-ciphers\n    \n    ssl-default-server-ciphers ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384\n    ssl-default-server-ciphersuites TLS_AES_128_GCM_SHA256:TLS_AES_256_GCM_SHA384:TLS_CHACHA20_POLY1305_SHA256\n    ssl-default-server-options ssl-min-ver TLSv1.2 no-tls-tickets\n\n    # DH parameters for perfect forward secrecy\n    ssl-dh-param-file /etc/haproxy/ssl/dhparam.pem\n    \n    # Performance tuning\n    maxconn 40000\n    nbthread 4\n    cpu-map auto:1/1-4 0-3\n    \n    # Logging\n    log-tag haproxy-prod\n    \n    # Security\n    insecure-fork-wanted\n    insecure-setuid-wanted\n\ndefaults\n    mode http\n    log global\n    option httplog\n    option dontlognull\n    option log-health-checks\n    option forwardfor except 127.0.0.0/8\n    option http-server-close\n    option redispatch\n    \n    # Timeouts\n    timeout connect 10s\n    timeout client 1m\n    timeout server 1m\n    timeout http-keep-alive 10s\n    timeout check 10s\n    timeout tunnel 2h\n    \n    # Retries\n    retries 3\n    \n    # Compression\n    compression algo gzip\n    compression type text/html text/css text/javascript application/javascript application/json application/xml\n    \n    # Default error pages\n    errorfile 400 /etc/haproxy/errors/400.http\n    errorfile 403 /etc/haproxy/errors/403.http\n    errorfile 408 /etc/haproxy/errors/408.http\n    errorfile 500 /etc/haproxy/errors/500.http\n    errorfile 502 /etc/haproxy/errors/502.http\n    errorfile 503 /etc/haproxy/errors/503.http\n    errorfile 504 /etc/haproxy/errors/504.http\n\n#---------------------------------------------------------------------\n# Frontend Configuration\n#---------------------------------------------------------------------\n\nfrontend web_frontend\n    bind *:80\n    bind *:443 ssl crt /etc/haproxy/ssl/ alpn h2,http/1.1 crt-ignore-err all\n    \n    # Security headers\n    http-response set-header Strict-Transport-Security \u0026quot;max-age=31536000; includeSubDomains; preload\u0026quot;\n    http-response set-header X-Frame-Options \u0026quot;SAMEORIGIN\u0026quot;\n    http-response set-header X-Content-Type-Options \u0026quot;nosniff\u0026quot;\n    http-response set-header X-XSS-Protection \u0026quot;1; mode=block\u0026quot;\n    http-response set-header Referrer-Policy \u0026quot;strict-origin-when-cross-origin\u0026quot;\n    http-response set-header Content-Security-Policy \u0026quot;default-src \u0026#039;self\u0026#039;; script-src \u0026#039;self\u0026#039; \u0026#039;unsafe-inline\u0026#039;; style-src \u0026#039;self\u0026#039; \u0026#039;unsafe-inline\u0026#039;\u0026quot;\n    \n    # Rate limiting\n    stick-table type ip size 100k expire 30s store http_req_rate(10s)\n    http-request track-sc0 src\n    http-request deny if { sc_http_req_rate(0) gt 20 }\n    \n    # Block bad bots and crawlers\n    acl is_bot hdr_sub(User-Agent) -i bot crawler spider scraper\n    http-request deny if is_bot\n    \n    # ACLs for routing\n    acl is_api path_beg /api/\n    acl is_admin path_beg /admin/\n    acl is_static path_beg /static/ /css/ /js/ /images/\n    acl is_websocket hdr(Upgrade) -i websocket\n    \n    # Force HTTPS\n    redirect scheme https code 301 if !{ ssl_fc }\n    \n    # Routing rules\n    use_backend api_servers if is_api\n    use_backend admin_servers if is_admin\n    use_backend static_servers if is_static\n    use_backend websocket_servers if is_websocket\n    default_backend web_servers\n\n#---------------------------------------------------------------------\n# Backend Configurations\n#---------------------------------------------------------------------\n\n# Main web servers\nbackend web_servers\n    balance leastconn\n    option httpchk GET /health HTTP/1.1\\r\\nHost:\\ example.com\n    http-check expect status 200\n    \n    # Health check configuration\n    default-server inter 2000 rise 2 fall 3 slowstart 60s maxconn 250 maxqueue 256 weight 100\n    \n    server web1 192.168.1.10:8080 check cookie web1\n    server web2 192.168.1.11:8080 check cookie web2\n    server web3 192.168.1.12:8080 check cookie web3\n    server web4 192.168.1.13:8080 check cookie web4 backup\n    \n    # Stick table for session persistence\n    stick-table type ip size 200k expire 30m\n    stick on src\n\n# API servers backend\nbackend api_servers\n    balance roundrobin\n    option httpchk GET /api/health HTTP/1.1\\r\\nHost:\\ api.example.com\n    http-check expect rstring ^OK$\n    \n    # Enable HTTP/2 to backend\n    server api1 192.168.1.20:3000 check proto h2 verify none\n    server api2 192.168.1.21:3000 check proto h2 verify none\n    server api3 192.168.1.22:3000 check proto h2 verify none\n\n# Admin backend (restricted access)\nbackend admin_servers\n    balance source\n    option httpchk GET /admin/health\n    http-check expect status 200\n    \n    # IP whitelist for admin access\n    http-request deny unless { src 192.168.1.0/24 10.0.0.0/8 }\n    \n    server admin1 192.168.1.30:9000 check\n\n# Static content servers\nbackend static_servers\n    balance roundrobin\n    option httpchk GET /health.txt\n    http-check expect string \u0026quot;OK\u0026quot;\n    \n    # Cache control\n    http-response set-header Cache-Control \u0026quot;public, max-age=86400\u0026quot;\n    \n    server static1 192.168.1.40:8080 check\n    server static2 192.168.1.41:8080 check\n\n# WebSocket servers\nbackend websocket_servers\n    balance leastconn\n    option httpchk GET /ws/health\n    http-check expect status 101\n    \n    # WebSocket specific settings\n    timeout tunnel 3600s\n    \n    server ws1 192.168.1.50:8080 check\n    server ws2 192.168.1.51:8080 check\n\n#---------------------------------------------------------------------\n# Database Load Balancing (TCP Mode)\n#---------------------------------------------------------------------\n\n# MySQL Master-Slave Load Balancing\nfrontend mysql_frontend\n    bind *:3306\n    mode tcp\n    default_backend mysql_servers\n\nbackend mysql_servers\n    mode tcp\n    balance leastconn\n    option mysql-check user haproxy_check\n    \n    # MySQL health checks\n    server mysql-master 192.168.1.60:3306 check weight 1000\n    server mysql-slave1 192.168.1.61:3306 check weight 100 backup\n    server mysql-slave2 192.168.1.62:3306 check weight 100 backup\n\n# PostgreSQL Load Balancing\nfrontend postgresql_frontend\n    bind *:5432\n    mode tcp\n    default_backend postgresql_servers\n\nbackend postgresql_servers\n    mode tcp\n    balance roundrobin\n    option pgsql-check user haproxy_check\n    \n    server postgres1 192.168.1.70:5432 check\n    server postgres2 192.168.1.71:5432 check\n\n# Redis Cluster Load Balancing\nfrontend redis_frontend\n    bind *:6379\n    mode tcp\n    default_backend redis_servers\n\nbackend redis_servers\n    mode tcp\n    balance first\n    option redis-check\n    \n    server redis1 192.168.1.80:6379 check\n    server redis2 192.168.1.81:6379 check backup\n\n#---------------------------------------------------------------------\n# Statistics and Monitoring\n#---------------------------------------------------------------------\n\nlisten stats\n    bind *:8404\n    stats enable\n    stats uri /stats\n    stats refresh 30s\n    stats admin if { src 192.168.1.0/24 }\n    stats auth admin:secure_stats_password\n    \n    # Enhanced statistics\n    stats show-legends\n    stats show-modules\n    stats realm \u0026quot;HAProxy Statistics\u0026quot;\n    \n    # Prometheus metrics (if compiled with USE_PROMEX)\n    http-request use-service prometheus-exporter if { path /metrics }\n\n#---------------------------------------------------------------------\n# Advanced Features\n#---------------------------------------------------------------------\n\n# Global rate limiting\nbackend rate_limit_backend\n    stick-table type ip size 100k expire 30s store gpc0,http_req_rate(10s)\n\n# DDoS protection\nfrontend ddos_protection\n    bind *:80\n    \n    # Track client IPs\n    stick-table type ip size 100k expire 30s store gpc0,http_req_rate(10s),http_err_rate(10s)\n    http-request track-sc0 src table rate_limit_backend\n    \n    # Block clients exceeding rate limits\n    http-request deny if { sc_http_req_rate(0) gt 50 }\n    http-request deny if { sc_http_err_rate(0) gt 10 }\n    \n    default_backend web_servers\n\n# Health check backend for external monitoring\nbackend health_check\n    mode http\n    http-request return status 200 content-type text/plain string \u0026quot;HAProxy is healthy\u0026quot;\nEOF\n\n# Test configuration\nsudo haproxy -c -f ~/haproxy/config/haproxy.cfg\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"ssltls-configuration-and-security\" class=\"mobile-header\"\u003eSSL/TLS Configuration and Security\u003c/h2\u003e\n\u003ch3 id=\"advanced-ssl-termination\" class=\"mobile-header\"\u003eAdvanced SSL Termination\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Generate strong DH parameters\nsudo openssl dhparam -out /etc/haproxy/ssl/dhparam.pem 4096\n\n# Create SSL certificate bundle\nsudo mkdir -p /etc/haproxy/ssl\n\n# Self-signed certificate for testing\nsudo openssl req -x509 -nodes -days 365 -newkey rsa:4096 \\\n  -keyout /etc/haproxy/ssl/example.com.key \\\n  -out /etc/haproxy/ssl/example.com.crt \\\n  -subj \u0026quot;/C=US/ST=State/L=City/O=Organization/CN=example.com\u0026quot;\n\n# Combine certificate and key for HAProxy\nsudo cat /etc/haproxy/ssl/example.com.crt /etc/haproxy/ssl/example.com.key | sudo tee /etc/haproxy/ssl/example.com.pem\n\n# Production: Let\u0026#039;s Encrypt certificates\nsudo certbot certonly --standalone -d example.com -d www.example.com\nsudo cat /etc/letsencrypt/live/example.com/fullchain.pem /etc/letsencrypt/live/example.com/privkey.pem | sudo tee /etc/haproxy/ssl/example.com.pem\n\n# Set proper permissions\nsudo chmod 600 /etc/haproxy/ssl/*.pem\nsudo chown haproxy:haproxy /etc/haproxy/ssl/*.pem\n\n# Create certificate renewal script\nsudo tee /usr/local/bin/haproxy-ssl-renewal.sh \u0026gt; /dev/null \u0026lt;\u0026lt;\u0026#039;EOF\u0026#039;\n#!/bin/bash\nCERT_PATH=\u0026quot;/etc/letsencrypt/live\u0026quot;\nHAPROXY_CERT_DIR=\u0026quot;/etc/haproxy/ssl\u0026quot;\n\n# Renew certificates\ncertbot renew --quiet --pre-hook \u0026quot;systemctl stop haproxy\u0026quot; --post-hook \u0026quot;systemctl start haproxy\u0026quot;\n\n# Update HAProxy certificate bundles\nfor domain in $(ls ${CERT_PATH}/); do\n    if [ -f \u0026quot;${CERT_PATH}/${domain}/fullchain.pem\u0026quot; ]; then\n        cat \u0026quot;${CERT_PATH}/${domain}/fullchain.pem\u0026quot; \u0026quot;${CERT_PATH}/${domain}/privkey.pem\u0026quot; \u0026gt; \u0026quot;${HAPROXY_CERT_DIR}/${domain}.pem\u0026quot;\n        chmod 600 \u0026quot;${HAPROXY_CERT_DIR}/${domain}.pem\u0026quot;\n        chown haproxy:haproxy \u0026quot;${HAPROXY_CERT_DIR}/${domain}.pem\u0026quot;\n    fi\ndone\n\n# Reload HAProxy configuration\nsystemctl reload haproxy\n\necho \u0026quot;SSL certificates updated for HAProxy\u0026quot;\nEOF\n\nsudo chmod +x /usr/local/bin/haproxy-ssl-renewal.sh\n\n# Schedule certificate renewal\necho \u0026quot;0 3 * * 1 root /usr/local/bin/haproxy-ssl-renewal.sh\u0026quot; | sudo tee -a /etc/crontab\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"security-hardening-configuration\" class=\"mobile-header\"\u003eSecurity Hardening Configuration\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Create security-focused configuration additions\nsudo tee /etc/haproxy/conf.d/security.cfg \u0026gt; /dev/null \u0026lt;\u0026lt;EOF\n#---------------------------------------------------------------------\n# Security Configuration\n#---------------------------------------------------------------------\n\nglobal\n    # Security settings\n    tune.ssl.default-dh-param 2048\n    tune.ssl.capture-buffer-size 0\n    tune.ssl.maxrecord 1460\n    \n    # Disable SSLv3 and weak ciphers\n    ssl-default-bind-options no-sslv3 no-tlsv10 no-tlsv11\n\ndefaults\n    # Hide server information\n    option hide-version\n    \n    # Security headers for all responses\n    http-response del-header Server\n    http-response del-header X-Powered-By\n    \n    # Request size limits\n    http-request deny if { req.body_size gt 10000000 }  # 10MB limit\n    \n    # Block suspicious request methods\n    acl blocked_methods method TRACE CONNECT\n    http-request deny if blocked_methods\n    \n    # Block requests with suspicious headers\n    acl suspicious_headers hdr_cnt(host) gt 1\n    acl suspicious_headers hdr_cnt(content-length) gt 1\n    http-request deny if suspicious_headers\n\n# Rate limiting configuration\nbackend rate_limit_abuse\n    stick-table type ip size 100k expire 30s store gpc0,gpc1,http_req_rate(10s),http_err_rate(10s),conn_rate(10s)\n\nfrontend rate_limiting\n    # Track requests per IP\n    http-request track-sc0 src table rate_limit_abuse\n    \n    # Deny clients that exceed rate limits\n    http-request deny if { sc_http_req_rate(0) gt 100 }\n    http-request deny if { sc_conn_rate(0) gt 20 }\n    http-request deny if { sc_http_err_rate(0) gt 10 }\n    \n    # Slow down abusive clients\n    http-request set-var(req.delay) int(1000) if { sc_http_req_rate(0) gt 50 }\n    http-request lua.delay_request if { var(req.delay) -m found }\n\n# WAF-like filtering\nfrontend security_frontend\n    # Block common attacks\n    acl is_sql_injection path_reg -i .*(union|select|insert|delete|update|drop|create|alter|exec|script|javascript|vbscript|onload|onerror|onclick).*\n    acl is_xss path_reg -i .*(script|iframe|object|embed|form|img|svg|math|details|svg).*\n    acl is_path_traversal path_reg -i .*(\\.\\./|\\.\\.\\\\|%2e%2e%2f|%2e%2e\\\\).*\n    \n    http-request deny if is_sql_injection\n    http-request deny if is_xss\n    http-request deny if is_path_traversal\n    \n    # GeoIP blocking (requires GeoIP data)\n    # http-request deny if { src,map_ip(/etc/haproxy/geoip/country.map) -i CN RU }\n\nEOF\n\n# Include security configuration\necho \u0026quot;include /etc/haproxy/conf.d/*.cfg\u0026quot; | sudo tee -a /etc/haproxy/haproxy.cfg\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"advanced-load-balancing-strategies\" class=\"mobile-header\"\u003eAdvanced Load Balancing Strategies\u003c/h2\u003e\n\u003ch3 id=\"multi-tier-application-load-balancing\" class=\"mobile-header\"\u003eMulti-Tier Application Load Balancing\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003esudo tee /etc/haproxy/haproxy.cfg \u0026gt; /dev/null \u0026lt;\u0026lt;EOF\nglobal\n    log stdout local0\n    stats socket /run/haproxy/admin.sock mode 660 level admin\n    user haproxy\n    group haproxy\n    daemon\n\ndefaults\n    mode http\n    log global\n    option httplog\n    option dontlognull\n    timeout connect 5s\n    timeout client 50s\n    timeout server 50s\n\n#---------------------------------------------------------------------\n# Application Frontend with Advanced Routing\n#---------------------------------------------------------------------\n\nfrontend app_frontend\n    bind *:443 ssl crt /etc/haproxy/ssl/ alpn h2,http/1.1\n    \n    # ACLs for microservices routing\n    acl is_user_service path_beg /api/users/\n    acl is_order_service path_beg /api/orders/\n    acl is_payment_service path_beg /api/payments/\n    acl is_notification_service path_beg /api/notifications/\n    acl is_admin_panel path_beg /admin/\n    acl is_monitoring path_beg /monitoring/\n    \n    # Geographic routing\n    acl is_us_traffic src 192.168.1.0/24\n    acl is_eu_traffic src 192.168.2.0/24\n    acl is_asia_traffic src 192.168.3.0/24\n    \n    # Device detection\n    acl is_mobile hdr_reg(User-Agent) -i (mobile|android|iphone|ipad)\n    acl is_desktop hdr_reg(User-Agent) -i (windows|macos|linux)\n    \n    # Routing decisions\n    use_backend user_service_us if is_user_service is_us_traffic\n    use_backend user_service_eu if is_user_service is_eu_traffic\n    use_backend order_service if is_order_service\n    use_backend payment_service if is_payment_service\n    use_backend notification_service if is_notification_service\n    use_backend admin_panel if is_admin_panel\n    use_backend monitoring_backend if is_monitoring\n    use_backend mobile_servers if is_mobile\n    default_backend web_servers\n\n# User Service Backends (Geographic)\nbackend user_service_us\n    balance roundrobin\n    option httpchk GET /api/users/health\n    http-check expect status 200\n    server user-us-1 192.168.1.100:3001 check\n    server user-us-2 192.168.1.101:3001 check\n    server user-us-3 192.168.1.102:3001 check\n\nbackend user_service_eu\n    balance roundrobin\n    option httpchk GET /api/users/health\n    server user-eu-1 192.168.2.100:3001 check\n    server user-eu-2 192.168.2.101:3001 check\n\n# Microservices Backends\nbackend order_service\n    balance leastconn\n    option httpchk GET /api/orders/health\n    server order-1 192.168.1.110:3002 check\n    server order-2 192.168.1.111:3002 check\n    server order-3 192.168.1.112:3002 check\n\nbackend payment_service\n    balance roundrobin\n    option httpchk GET /api/payments/health\n    # Enhanced security for payment service\n    http-request set-header X-Forwarded-Proto https\n    http-request add-header X-Client-IP %[src]\n    server payment-1 192.168.1.120:3003 check ssl verify none\n    server payment-2 192.168.1.121:3003 check ssl verify none\n\nbackend notification_service\n    balance roundrobin\n    option httpchk GET /api/notifications/health\n    server notification-1 192.168.1.130:3004 check\n    server notification-2 192.168.1.131:3004 check\n\n# Admin Panel Backend (Restricted)\nbackend admin_panel\n    balance source\n    option httpchk GET /admin/health\n    http-check expect status 200\n    \n    # Additional security\n    http-request add-header X-Admin-Access \u0026quot;true\u0026quot;\n    timeout server 2m\n    \n    server admin-1 192.168.1.140:9000 check\n\n# Mobile-Optimized Backend\nbackend mobile_servers\n    balance roundrobin\n    option httpchk GET /mobile/health\n    # Mobile-specific optimizations\n    compression algo gzip\n    compression type text/html text/css application/javascript application/json\n    server mobile-1 192.168.1.150:8080 check\n    server mobile-2 192.168.1.151:8080 check\n\n#---------------------------------------------------------------------\n# Monitoring and Statistics\n#---------------------------------------------------------------------\n\nlisten stats\n    bind *:8404 ssl crt /etc/haproxy/ssl/stats.pem\n    stats enable\n    stats uri /\n    stats refresh 5s\n    stats admin if { src 192.168.1.0/24 }\n    stats auth admin:secure_stats_password\n    stats realm \u0026quot;HAProxy Statistics\u0026quot;\n    \n    # Prometheus metrics endpoint\n    http-request use-service prometheus-exporter if { path /metrics }\n    \n    # JSON stats API\n    http-request use-service prometheus-exporter if { path /stats/json }\n\n# Health check endpoint for external monitoring\nlisten health_check\n    bind *:8080\n    mode http\n    monitor-uri /health\n    option httplog\n    \n    acl site_dead nbsrv(web_servers) lt 1\n    acl api_dead nbsrv(api_servers) lt 1\n    \n    monitor fail if site_dead\n    monitor fail if api_dead\nEOF\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"global-load-balancing-with-dns\" class=\"mobile-header\"\u003eGlobal Load Balancing with DNS\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Integration with external DNS load balancing\nsudo tee /etc/haproxy/haproxy-dns.cfg \u0026gt; /dev/null \u0026lt;\u0026lt;EOF\nglobal\n    # DNS resolution for dynamic backends\n    dns-resolver dns1\n        nameserver dns1 8.8.8.8:53\n        nameserver dns2 8.8.4.4:53\n        resolve_retries 3\n        timeout retry 1s\n        hold nx 30s\n        hold other 30s\n        hold refused 30s\n        hold timeout 30s\n        hold valid 10s\n\ndefaults\n    mode http\n    timeout connect 5s\n    timeout client 30s\n    timeout server 30s\n\n# Dynamic backend resolution\nbackend dynamic_backend\n    balance roundrobin\n    option httpchk GET /health\n    \n    # Servers resolved via DNS\n    server-template web- 3 web.example.com:80 check resolvers dns1\n    server-template api- 2 api.example.com:80 check resolvers dns1\n\n# Service discovery integration\nbackend consul_backend\n    balance roundrobin\n    option httpchk GET /health\n    \n    # Consul service discovery\n    server-template consul- 3 _web._tcp.service.consul:80 check resolvers dns1\nEOF\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"high-availability-and-clustering\" class=\"mobile-header\"\u003eHigh Availability and Clustering\u003c/h2\u003e\n\u003ch3 id=\"haproxy-keepalived-setup\" class=\"mobile-header\"\u003eHAProxy Keepalived Setup\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Install keepalived for HA\nsudo apt install -y keepalived  # Ubuntu/Debian\nsudo yum install -y keepalived  # RHEL/CentOS\n\n# Configure keepalived on primary HAProxy\nsudo tee /etc/keepalived/keepalived.conf \u0026gt; /dev/null \u0026lt;\u0026lt;EOF\n! Configuration File for keepalived\n\nglobal_defs {\n    router_id HAProxy_Primary\n    vrrp_skip_check_adv_addr\n    vrrp_strict\n    vrrp_garp_interval 0\n    vrrp_gna_interval 0\n    script_user root\n    enable_script_security\n}\n\n# Health check script\nvrrp_script chk_haproxy {\n    script \u0026quot;/usr/bin/killall -0 haproxy\u0026quot;\n    interval 2\n    weight 2\n    fall 3\n    rise 2\n}\n\nvrrp_instance VI_1 {\n    state MASTER\n    interface eth0\n    virtual_router_id 51\n    priority 110\n    advert_int 1\n    authentication {\n        auth_type PASS\n        auth_pass secure_vrrp_password\n    }\n    virtual_ipaddress {\n        192.168.1.100/24\n    }\n    track_script {\n        chk_haproxy\n    }\n    notify_master /etc/keepalived/master.sh\n    notify_backup /etc/keepalived/backup.sh\n}\nEOF\n\n# Create notification scripts\nsudo tee /etc/keepalived/master.sh \u0026gt; /dev/null \u0026lt;\u0026lt;\u0026#039;EOF\u0026#039;\n#!/bin/bash\necho \u0026quot;$(date): Became MASTER\u0026quot; \u0026gt;\u0026gt; /var/log/keepalived.log\n# Add any additional master setup commands here\nEOF\n\nsudo tee /etc/keepalived/backup.sh \u0026gt; /dev/null \u0026lt;\u0026lt;\u0026#039;EOF\u0026#039;\n#!/bin/bash\necho \u0026quot;$(date): Became BACKUP\u0026quot; \u0026gt;\u0026gt; /var/log/keepalived.log\n# Add any additional backup setup commands here\nEOF\n\nsudo chmod +x /etc/keepalived/{master,backup}.sh\nsudo systemctl enable --now keepalived\n\n# Configure backup HAProxy with lower priority (100 instead of 110)\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"multi-site-load-balancing\" class=\"mobile-header\"\u003eMulti-Site Load Balancing\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Configure multi-site load balancing\nsudo tee /etc/haproxy/haproxy-multisite.cfg \u0026gt; /dev/null \u0026lt;\u0026lt;EOF\nglobal\n    log stdout local0\n    stats socket /run/haproxy/admin.sock mode 660 level admin\n    user haproxy\n    group haproxy\n    daemon\n\ndefaults\n    mode http\n    log global\n    option httplog\n    timeout connect 5s\n    timeout client 30s\n    timeout server 30s\n\n# Frontend for multi-site routing\nfrontend multisite_frontend\n    bind *:443 ssl crt /etc/haproxy/ssl/ alpn h2,http/1.1\n    \n    # Site detection based on headers\n    acl is_site_a hdr(host) -i site-a.example.com\n    acl is_site_b hdr(host) -i site-b.example.com\n    acl is_site_c hdr(host) -i site-c.example.com\n    \n    # Geographic routing based on source IP\n    acl is_americas src 10.1.0.0/16\n    acl is_europe src 10.2.0.0/16\n    acl is_asia src 10.3.0.0/16\n    \n    # Route to appropriate backends\n    use_backend site_a_americas if is_site_a is_americas\n    use_backend site_a_europe if is_site_a is_europe\n    use_backend site_a_asia if is_site_a is_asia\n    use_backend site_b_backend if is_site_b\n    use_backend site_c_backend if is_site_c\n    \n    default_backend default_site\n\n# Regional backends\nbackend site_a_americas\n    balance leastconn\n    option httpchk GET /health\n    server site-a-us-1 us-east-1.example.com:80 check\n    server site-a-us-2 us-west-2.example.com:80 check\n\nbackend site_a_europe\n    balance leastconn\n    option httpchk GET /health\n    server site-a-eu-1 eu-west-1.example.com:80 check\n    server site-a-eu-2 eu-central-1.example.com:80 check\n\nbackend site_a_asia\n    balance leastconn\n    option httpchk GET /health\n    server site-a-ap-1 ap-southeast-1.example.com:80 check\n    server site-a-ap-2 ap-northeast-1.example.com:80 check\nEOF\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"monitoring-and-observability\" class=\"mobile-header\"\u003eMonitoring and Observability\u003c/h2\u003e\n\u003ch3 id=\"prometheus-integration\" class=\"mobile-header\"\u003ePrometheus Integration\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Configure HAProxy for Prometheus scraping\nsudo tee -a /etc/haproxy/haproxy.cfg \u0026gt; /dev/null \u0026lt;\u0026lt;EOF\n\n# Prometheus metrics endpoint\nfrontend prometheus_frontend\n    bind *:8405\n    http-request use-service prometheus-exporter if { path /metrics }\n    http-request deny\nEOF\n\n# Create HAProxy exporter configuration\nsudo tee /etc/systemd/system/haproxy-exporter.service \u0026gt; /dev/null \u0026lt;\u0026lt;EOF\n[Unit]\nDescription=HAProxy Exporter for Prometheus\nAfter=network.target\n\n[Service]\nType=simple\nUser=haproxy\nExecStart=/usr/local/bin/haproxy_exporter \\\n    --haproxy.scrape-uri=\u0026quot;http://admin:secure_stats_password@localhost:8404/stats;csv\u0026quot; \\\n    --web.listen-address=\u0026quot;0.0.0.0:9101\u0026quot;\nRestart=always\n\n[Install]\nWantedBy=multi-user.target\nEOF\n\n# Download HAProxy exporter\nHAPROXY_EXPORTER_VERSION=\u0026quot;0.15.0\u0026quot;\nwget https://github.com/prometheus/haproxy_exporter/releases/download/v${HAPROXY_EXPORTER_VERSION}/haproxy_exporter-${HAPROXY_EXPORTER_VERSION}.linux-amd64.tar.gz\ntar xzf haproxy_exporter-${HAPROXY_EXPORTER_VERSION}.linux-amd64.tar.gz\nsudo cp haproxy_exporter-${HAPROXY_EXPORTER_VERSION}.linux-amd64/haproxy_exporter /usr/local/bin/\n\nsudo systemctl daemon-reload\nsudo systemctl enable --now haproxy-exporter\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"comprehensive-logging\" class=\"mobile-header\"\u003eComprehensive Logging\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Configure rsyslog for HAProxy\nsudo tee /etc/rsyslog.d/49-haproxy.conf \u0026gt; /dev/null \u0026lt;\u0026lt;EOF\n# HAProxy log configuration\n\\$ModLoad imudp\n\\$UDPServerRun 514\n\\$UDPServerAddress 127.0.0.1\n\n# HAProxy logs\nlocal0.*    /var/log/haproxy/haproxy.log\n\u0026amp; stop\n\n# Separate access and error logs\nlocal0.info /var/log/haproxy/access.log\nlocal0.err  /var/log/haproxy/error.log\nlocal0.warning /var/log/haproxy/warning.log\nEOF\n\n# Create log directory\nsudo mkdir -p /var/log/haproxy\nsudo chown syslog:adm /var/log/haproxy\n\n# Configure log rotation\nsudo tee /etc/logrotate.d/haproxy \u0026gt; /dev/null \u0026lt;\u0026lt;EOF\n/var/log/haproxy/*.log {\n    daily\n    rotate 30\n    missingok\n    notifempty\n    compress\n    delaycompress\n    postrotate\n        /bin/kill -HUP \\`cat /var/run/rsyslogd.pid 2\u0026gt;/dev/null\\` 2\u0026gt;/dev/null || true\n    endscript\n}\nEOF\n\nsudo systemctl restart rsyslog\nsudo systemctl reload haproxy\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"performance-optimization\" class=\"mobile-header\"\u003ePerformance Optimization\u003c/h2\u003e\n\u003ch3 id=\"system-level-tuning\" class=\"mobile-header\"\u003eSystem-Level Tuning\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Kernel optimization for HAProxy\nsudo tee -a /etc/sysctl.conf \u0026gt; /dev/null \u0026lt;\u0026lt;EOF\n# HAProxy performance tuning\nnet.core.somaxconn = 65535\nnet.core.netdev_max_backlog = 5000\nnet.ipv4.tcp_max_syn_backlog = 65535\nnet.ipv4.tcp_max_tw_buckets = 400000\nnet.ipv4.tcp_tw_reuse = 1\nnet.ipv4.tcp_fin_timeout = 10\nnet.ipv4.ip_local_port_range = 15000 65000\nnet.core.rmem_default = 262144\nnet.core.rmem_max = 16777216\nnet.core.wmem_default = 262144\nnet.core.wmem_max = 16777216\nnet.ipv4.tcp_rmem = 4096 65536 16777216\nnet.ipv4.tcp_wmem = 4096 65536 16777216\nfs.file-max = 100000\nvm.swappiness = 1\nEOF\n\nsudo sysctl -p\n\n# Set resource limits\nsudo tee -a /etc/security/limits.conf \u0026gt; /dev/null \u0026lt;\u0026lt;EOF\nhaproxy soft nofile 65535\nhaproxy hard nofile 65535\nhaproxy soft nproc 65535\nhaproxy hard nproc 65535\nEOF\n\n# Optimize HAProxy service\nsudo tee /etc/systemd/system/haproxy.service.d/performance.conf \u0026gt; /dev/null \u0026lt;\u0026lt;EOF\n[Service]\nLimitNOFILE=65535\nLimitNPROC=65535\nExecStart=\nExecStart=/usr/sbin/haproxy -f /etc/haproxy/haproxy.cfg -p /run/haproxy.pid -S /run/haproxy-master.sock\nExecReload=/usr/sbin/haproxy -f /etc/haproxy/haproxy.cfg -c -q\nExecReload=/bin/kill -USR2 \\$MAINPID\nEOF\n\nsudo systemctl daemon-reload\nsudo systemctl restart haproxy\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"advanced-performance-configuration\" class=\"mobile-header\"\u003eAdvanced Performance Configuration\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003esudo tee /etc/haproxy/performance.cfg \u0026gt; /dev/null \u0026lt;\u0026lt;EOF\nglobal\n    # Performance optimization\n    maxconn 40000\n    nbthread 8\n    cpu-map auto:1/1-8 0-7\n    \n    # Memory optimization\n    tune.maxrewrite 1024\n    tune.bufsize 32768\n    \n    # Connection optimization\n    tune.maxaccept 500\n    tune.recv_enough 10000\n    \n    # SSL optimization\n    tune.ssl.default-dh-param 2048\n    tune.ssl.maxrecord 1460\n    tune.ssl.capture-buffer-size 0\n    \n    # Compression\n    tune.comp.maxlevel 6\n\ndefaults\n    # Performance settings\n    maxconn 8000\n    \n    # Timeouts\n    timeout connect 3s\n    timeout client 25s\n    timeout server 25s\n    timeout tunnel 3600s\n    timeout http-keep-alive 1s\n    timeout http-request 15s\n    timeout queue 30s\n    timeout tarpit 60s\n    \n    # Keep-alive optimization\n    option http-keep-alive\n    option prefer-last-server\n    \n    # Compression\n    compression algo gzip\n    compression type text/html text/css text/javascript application/javascript application/json application/xml\n\n# High-performance backend configuration\nbackend high_performance_backend\n    balance leastconn\n    option httpchk GET /health\n    http-check expect status 200\n    \n    # Connection pooling\n    option http-reuse always\n    \n    # Server configuration with optimal settings\n    default-server inter 1000 fastinter 500 downinter 2000 rise 2 fall 3 slowstart 30s maxconn 1000 maxqueue 256 weight 100\n    \n    server web1 192.168.1.10:8080 check\n    server web2 192.168.1.11:8080 check\n    server web3 192.168.1.12:8080 check\n    server web4 192.168.1.13:8080 check\nEOF\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"backup-and-disaster-recovery\" class=\"mobile-header\"\u003eBackup and Disaster Recovery\u003c/h2\u003e\n\u003ch3 id=\"configuration-management-and-backup\" class=\"mobile-header\"\u003eConfiguration Management and Backup\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003esudo tee /usr/local/bin/haproxy-backup.sh \u0026gt; /dev/null \u0026lt;\u0026lt;\u0026#039;EOF\u0026#039;\n#!/bin/bash\nBACKUP_DIR=\u0026quot;/backup/haproxy\u0026quot;\nDATE=$(date +%Y%m%d_%H%M%S)\n\nmkdir -p ${BACKUP_DIR}/{config,ssl,stats,logs}\n\n# Backup configuration files\ntar -czf ${BACKUP_DIR}/config/haproxy-config-${DATE}.tar.gz \\\n    /etc/haproxy/ \\\n    /etc/systemd/system/haproxy.service* \\\n    /etc/keepalived/\n\n# Backup SSL certificates\ntar -czf ${BACKUP_DIR}/ssl/haproxy-ssl-${DATE}.tar.gz \\\n    /etc/haproxy/ssl/ \\\n    /etc/letsencrypt/\n\n# Backup statistics and runtime state\necho \u0026quot;show stat\u0026quot; | socat stdio /run/haproxy/admin.sock \u0026gt; ${BACKUP_DIR}/stats/haproxy-stats-${DATE}.txt\necho \u0026quot;show info\u0026quot; | socat stdio /run/haproxy/admin.sock \u0026gt; ${BACKUP_DIR}/stats/haproxy-info-${DATE}.txt\necho \u0026quot;show sess\u0026quot; | socat stdio /run/haproxy/admin.sock \u0026gt; ${BACKUP_DIR}/stats/haproxy-sessions-${DATE}.txt\n\n# Backup recent logs\nfind /var/log/haproxy -name \u0026quot;*.log\u0026quot; -mtime -1 -exec tar -czf ${BACKUP_DIR}/logs/haproxy-logs-${DATE}.tar.gz {} +\n\n# Upload to cloud storage\naws s3 cp ${BACKUP_DIR}/ s3://haproxy-backups/ --recursive\naz storage blob upload-batch --source ${BACKUP_DIR} --destination haproxy-backups\ngsutil cp -r ${BACKUP_DIR}/* gs://haproxy-backups/\n\n# Keep only last 15 backups\nfind ${BACKUP_DIR} -name \u0026quot;haproxy-*\u0026quot; -type f -mtime +15 -delete\n\n# Test configuration validity\nhaproxy -c -f /etc/haproxy/haproxy.cfg\n\necho \u0026quot;HAProxy backup completed: ${DATE}\u0026quot;\nEOF\n\nsudo chmod +x /usr/local/bin/haproxy-backup.sh\n\n# Schedule daily backups\necho \u0026quot;0 2 * * * root /usr/local/bin/haproxy-backup.sh\u0026quot; | sudo tee -a /etc/crontab\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"disaster-recovery-automation\" class=\"mobile-header\"\u003eDisaster Recovery Automation\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003esudo tee /usr/local/bin/haproxy-dr.sh \u0026gt; /dev/null \u0026lt;\u0026lt;\u0026#039;EOF\u0026#039;\n#!/bin/bash\nDR_MODE=\u0026quot;${1:-test}\u0026quot;  # test, activate, or deactivate\n\ncase \u0026quot;$DR_MODE\u0026quot; in\n    \u0026quot;test\u0026quot;)\n        echo \u0026quot;Testing DR procedures...\u0026quot;\n        \n        # Test backup restoration\n        LATEST_BACKUP=$(ls -t /backup/haproxy/config/haproxy-config-*.tar.gz | head -1)\n        if [ -n \u0026quot;$LATEST_BACKUP\u0026quot; ]; then\n            echo \u0026quot;✓ Latest backup found: $LATEST_BACKUP\u0026quot;\n        else\n            echo \u0026quot;✗ No backup files found\u0026quot;\n            exit 1\n        fi\n        \n        # Test configuration\n        haproxy -c -f /etc/haproxy/haproxy.cfg\n        echo \u0026quot;✓ Configuration is valid\u0026quot;\n        \n        # Test backend connectivity\n        for backend in $(echo \u0026quot;show stat\u0026quot; | socat stdio /run/haproxy/admin.sock | grep \u0026quot;,BACKEND,\u0026quot; | cut -d, -f1); do\n            echo \u0026quot;Testing backend: $backend\u0026quot;\n            echo \u0026quot;show stat\u0026quot; | socat stdio /run/haproxy/admin.sock | grep \u0026quot;$backend\u0026quot;\n        done\n        \n        echo \u0026quot;DR test completed\u0026quot;\n        ;;\n        \n    \u0026quot;activate\u0026quot;)\n        echo \u0026quot;Activating DR procedures...\u0026quot;\n        \n        # Switch to DR configuration\n        cp /etc/haproxy/haproxy-dr.cfg /etc/haproxy/haproxy.cfg\n        \n        # Reload HAProxy\n        systemctl reload haproxy\n        \n        # Update DNS (example with Route53)\n        aws route53 change-resource-record-sets --hosted-zone-id Z123456789 --change-batch file://dr-dns-update.json\n        \n        echo \u0026quot;DR activated\u0026quot;\n        ;;\n        \n    \u0026quot;deactivate\u0026quot;)\n        echo \u0026quot;Deactivating DR procedures...\u0026quot;\n        \n        # Restore original configuration\n        cp /etc/haproxy/haproxy.cfg.backup /etc/haproxy/haproxy.cfg\n        \n        # Reload HAProxy\n        systemctl reload haproxy\n        \n        # Update DNS back to primary\n        aws route53 change-resource-record-sets --hosted-zone-id Z123456789 --change-batch file://primary-dns-update.json\n        \n        echo \u0026quot;DR deactivated\u0026quot;\n        ;;\n        \n    *)\n        echo \u0026quot;Usage: $0 {test|activate|deactivate}\u0026quot;\n        exit 1\n        ;;\nesac\nEOF\n\nsudo chmod +x /usr/local/bin/haproxy-dr.sh\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"verification-and-health-checks\" class=\"mobile-header\"\u003eVerification and Health Checks\u003c/h2\u003e\n\u003ch3 id=\"comprehensive-health-monitoring\" class=\"mobile-header\"\u003eComprehensive Health Monitoring\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003esudo tee /usr/local/bin/haproxy-health-check.sh \u0026gt; /dev/null \u0026lt;\u0026lt;\u0026#039;EOF\u0026#039;\n#!/bin/bash\nHEALTH_LOG=\u0026quot;/var/log/haproxy-health.log\u0026quot;\n\nlog_message() {\n    echo \u0026quot;$(date \u0026#039;+%Y-%m-%d %H:%M:%S\u0026#039;) - $1\u0026quot; | tee -a ${HEALTH_LOG}\n}\n\n# Check HAProxy service status\nif systemctl is-active haproxy \u0026gt;/dev/null 2\u0026gt;\u0026amp;1; then\n    log_message \u0026quot;✓ HAProxy service is running\u0026quot;\nelse\n    log_message \u0026quot;✗ HAProxy service is not running\u0026quot;\n    exit 1\nfi\n\n# Check configuration validity\nif haproxy -c -f /etc/haproxy/haproxy.cfg \u0026gt;/dev/null 2\u0026gt;\u0026amp;1; then\n    log_message \u0026quot;✓ HAProxy configuration is valid\u0026quot;\nelse\n    log_message \u0026quot;✗ HAProxy configuration has errors\u0026quot;\n    haproxy -c -f /etc/haproxy/haproxy.cfg\nfi\n\n# Check listening ports\nLISTENING_PORTS=$(netstat -tlnp | grep haproxy | wc -l)\nlog_message \u0026quot;✓ HAProxy is listening on ${LISTENING_PORTS} ports\u0026quot;\n\n# Check backend server health\nBACKEND_STATS=$(echo \u0026quot;show stat\u0026quot; | socat stdio /run/haproxy/admin.sock | grep -c \u0026quot;,UP,\u0026quot;)\nTOTAL_SERVERS=$(echo \u0026quot;show stat\u0026quot; | socat stdio /run/haproxy/admin.sock | grep -c \u0026quot;,.*,\u0026quot;)\nlog_message \u0026quot;✓ ${BACKEND_STATS}/${TOTAL_SERVERS} backend servers are healthy\u0026quot;\n\n# Check SSL certificate expiry\nif [ -d /etc/haproxy/ssl ]; then\n    for cert in /etc/haproxy/ssl/*.pem; do\n        if [ -f \u0026quot;$cert\u0026quot; ]; then\n            EXPIRY=$(openssl x509 -in \u0026quot;$cert\u0026quot; -noout -dates | grep notAfter | cut -d= -f2)\n            EXPIRY_EPOCH=$(date -d \u0026quot;$EXPIRY\u0026quot; +%s)\n            CURRENT_EPOCH=$(date +%s)\n            DAYS_TO_EXPIRY=$(( (EXPIRY_EPOCH - CURRENT_EPOCH) / 86400 ))\n            \n            if [ $DAYS_TO_EXPIRY -lt 30 ]; then\n                log_message \u0026quot;⚠ SSL certificate $(basename $cert) expires in ${DAYS_TO_EXPIRY} days\u0026quot;\n            else\n                log_message \u0026quot;✓ SSL certificate $(basename $cert) expires in ${DAYS_TO_EXPIRY} days\u0026quot;\n            fi\n        fi\n    done\nfi\n\n# Check memory usage\nMEMORY_USAGE=$(ps -o pid,vsz,rss,comm -C haproxy | tail -1 | awk \u0026#039;{print $3/1024}\u0026#039;)\nlog_message \u0026quot;ℹ HAProxy memory usage: ${MEMORY_USAGE}MB\u0026quot;\n\n# Check connection statistics\nCURRENT_CONNS=$(echo \u0026quot;show info\u0026quot; | socat stdio /run/haproxy/admin.sock | grep \u0026quot;CurrConns\u0026quot; | cut -d: -f2 | tr -d \u0026#039; \u0026#039;)\nMAX_CONNS=$(echo \u0026quot;show info\u0026quot; | socat stdio /run/haproxy/admin.sock | grep \u0026quot;MaxConn\u0026quot; | cut -d: -f2 | tr -d \u0026#039; \u0026#039;)\nlog_message \u0026quot;ℹ Current connections: ${CURRENT_CONNS}/${MAX_CONNS}\u0026quot;\n\n# Check for any backend servers that are down\nDOWN_SERVERS=$(echo \u0026quot;show stat\u0026quot; | socat stdio /run/haproxy/admin.sock | grep \u0026quot;,DOWN,\u0026quot; | wc -l)\nif [ $DOWN_SERVERS -gt 0 ]; then\n    log_message \u0026quot;⚠ ${DOWN_SERVERS} backend servers are down\u0026quot;\n    echo \u0026quot;show stat\u0026quot; | socat stdio /run/haproxy/admin.sock | grep \u0026quot;,DOWN,\u0026quot; | while IFS=, read pxname svname; do\n        log_message \u0026quot;  - ${pxname}/${svname} is DOWN\u0026quot;\n    done\nfi\n\nlog_message \u0026quot;HAProxy health check completed\u0026quot;\nEOF\n\nsudo chmod +x /usr/local/bin/haproxy-health-check.sh\n\n# Schedule health checks every 5 minutes\necho \u0026quot;*/5 * * * * root /usr/local/bin/haproxy-health-check.sh\u0026quot; | sudo tee -a /etc/crontab\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"load-testing-and-performance-validation\" class=\"mobile-header\"\u003eLoad Testing and Performance Validation\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003esudo tee /usr/local/bin/haproxy-load-test.sh \u0026gt; /dev/null \u0026lt;\u0026lt;\u0026#039;EOF\u0026#039;\n#!/bin/bash\nTEST_RESULTS=\u0026quot;/tmp/haproxy-load-test-$(date +%Y%m%d_%H%M%S).txt\u0026quot;\nTEST_URL=\u0026quot;https://example.com\u0026quot;\nCONCURRENT_USERS=100\nTEST_DURATION=60\n\necho \u0026quot;HAProxy Load Test Results\u0026quot; \u0026gt; ${TEST_RESULTS}\necho \u0026quot;========================\u0026quot; \u0026gt;\u0026gt; ${TEST_RESULTS}\necho \u0026quot;Date: $(date)\u0026quot; \u0026gt;\u0026gt; ${TEST_RESULTS}\necho \u0026quot;Target URL: ${TEST_URL}\u0026quot; \u0026gt;\u0026gt; ${TEST_RESULTS}\necho \u0026quot;Concurrent Users: ${CONCURRENT_USERS}\u0026quot; \u0026gt;\u0026gt; ${TEST_RESULTS}\necho \u0026quot;Test Duration: ${TEST_DURATION}s\u0026quot; \u0026gt;\u0026gt; ${TEST_RESULTS}\necho \u0026quot;\u0026quot; \u0026gt;\u0026gt; ${TEST_RESULTS}\n\n# Install testing tools if not available\nif ! command -v ab \u0026amp;\u0026gt; /dev/null; then\n    apt-get update \u0026amp;\u0026amp; apt-get install -y apache2-utils\nfi\n\nif ! command -v wrk \u0026amp;\u0026gt; /dev/null; then\n    git clone https://github.com/wg/wrk.git /tmp/wrk\n    cd /tmp/wrk \u0026amp;\u0026amp; make \u0026amp;\u0026amp; cp wrk /usr/local/bin/\nfi\n\n# Run Apache Bench test\necho \u0026quot;Apache Bench Results:\u0026quot; \u0026gt;\u0026gt; ${TEST_RESULTS}\nab -n 10000 -c ${CONCURRENT_USERS} -k ${TEST_URL}/ \u0026gt;\u0026gt; ${TEST_RESULTS} 2\u0026gt;\u0026amp;1\n\necho \u0026quot;\u0026quot; \u0026gt;\u0026gt; ${TEST_RESULTS}\necho \u0026quot;WRK Results:\u0026quot; \u0026gt;\u0026gt; ${TEST_RESULTS}\nwrk -t4 -c${CONCURRENT_USERS} -d${TEST_DURATION}s --latency ${TEST_URL}/ \u0026gt;\u0026gt; ${TEST_RESULTS}\n\n# Capture HAProxy stats during test\necho \u0026quot;\u0026quot; \u0026gt;\u0026gt; ${TEST_RESULTS}\necho \u0026quot;HAProxy Statistics During Test:\u0026quot; \u0026gt;\u0026gt; ${TEST_RESULTS}\necho \u0026quot;show info\u0026quot; | socat stdio /run/haproxy/admin.sock \u0026gt;\u0026gt; ${TEST_RESULTS}\necho \u0026quot;show stat\u0026quot; | socat stdio /run/haproxy/admin.sock \u0026gt;\u0026gt; ${TEST_RESULTS}\n\necho \u0026quot;\u0026quot; \u0026gt;\u0026gt; ${TEST_RESULTS}\necho \u0026quot;Load test completed at: $(date)\u0026quot; \u0026gt;\u0026gt; ${TEST_RESULTS}\n\necho \u0026quot;Load test completed. Results: ${TEST_RESULTS}\u0026quot;\nEOF\n\nsudo chmod +x /usr/local/bin/haproxy-load-test.sh\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"firewall-configuration-cross-platform\" class=\"mobile-header\"\u003eFirewall Configuration (Cross-Platform)\u003c/h2\u003e\n\u003ch3 id=\"security-rules\" class=\"mobile-header\"\u003eSecurity Rules\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# UFW (Ubuntu/Debian)\nsudo ufw allow 80/tcp comment \u0026#039;HTTP\u0026#039;\nsudo ufw allow 443/tcp comment \u0026#039;HTTPS\u0026#039; \nsudo ufw allow from 192.168.1.0/24 to any port 8404 comment \u0026#039;Stats interface - internal only\u0026#039;\nsudo ufw allow from 192.168.1.0/24 to any port 9101 comment \u0026#039;Prometheus exporter - internal only\u0026#039;\nsudo ufw deny 8404 comment \u0026#039;Block stats from public\u0026#039;\nsudo ufw enable\n\n# Firewalld (RHEL/CentOS/Fedora)\nsudo firewall-cmd --permanent --add-service=http\nsudo firewall-cmd --permanent --add-service=https\nsudo firewall-cmd --permanent --new-zone=haproxy-mgmt\nsudo firewall-cmd --permanent --zone=haproxy-mgmt --add-source=192.168.1.0/24\nsudo firewall-cmd --permanent --zone=haproxy-mgmt --add-port=8404/tcp\nsudo firewall-cmd --permanent --zone=haproxy-mgmt --add-port=9101/tcp\nsudo firewall-cmd --reload\n\n# iptables (Universal)\nsudo iptables -A INPUT -p tcp --dport 80 -j ACCEPT\nsudo iptables -A INPUT -p tcp --dport 443 -j ACCEPT\nsudo iptables -A INPUT -p tcp -s 192.168.1.0/24 --dport 8404 -j ACCEPT\nsudo iptables -A INPUT -p tcp -s 192.168.1.0/24 --dport 9101 -j ACCEPT\nsudo iptables -A INPUT -p tcp --dport 8404 -j DROP\nsudo iptables -A INPUT -p tcp --dport 9101 -j DROP\n\n# Save iptables rules\n# Ubuntu/Debian\nsudo apt install -y iptables-persistent\nsudo netfilter-persistent save\n\n# RHEL/CentOS\nsudo service iptables save\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"ddos-protection-configuration\" class=\"mobile-header\"\u003eDDoS Protection Configuration\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003esudo tee /etc/haproxy/ddos-protection.cfg \u0026gt; /dev/null \u0026lt;\u0026lt;EOF\n# DDoS Protection Configuration\n\nglobal\n    # Stick tables for tracking\n    tune.stick-table.enable 1\n\nfrontend ddos_protection\n    bind *:80\n    bind *:443 ssl crt /etc/haproxy/ssl/\n    \n    # Track client behavior\n    stick-table type ip size 1m expire 5m store gpc0,gpc1,http_req_rate(10s),http_err_rate(10s),conn_rate(10s),bytes_out_rate(10s)\n    \n    # Track requests\n    http-request track-sc0 src\n    \n    # Rate limiting rules\n    acl abuse_request_rate sc_http_req_rate(0) gt 100\n    acl abuse_connection_rate sc_conn_rate(0) gt 20\n    acl abuse_error_rate sc_http_err_rate(0) gt 10\n    acl abuse_bandwidth sc_bytes_out_rate(0) gt 10000000  # 10MB/s\n    \n    # Geographic blocking (requires GeoIP)\n    # acl blocked_countries src,map_ip(/etc/haproxy/geoip-country.map) -i CN RU\n    \n    # User-Agent filtering\n    acl bad_user_agent hdr_sub(User-Agent) -i \u0026quot;sqlmap\u0026quot; \u0026quot;nikto\u0026quot; \u0026quot;nmap\u0026quot; \u0026quot;masscan\u0026quot; \u0026quot;zmap\u0026quot;\n    acl empty_user_agent hdr_cnt(User-Agent) eq 0\n    \n    # HTTP method filtering\n    acl allowed_methods method GET POST PUT DELETE HEAD OPTIONS PATCH\n    \n    # Deny rules\n    http-request deny if abuse_request_rate\n    http-request deny if abuse_connection_rate\n    http-request deny if abuse_error_rate\n    http-request deny if abuse_bandwidth\n    http-request deny if bad_user_agent\n    http-request deny if empty_user_agent\n    http-request deny if !allowed_methods\n    # http-request deny if blocked_countries\n    \n    # Tarpit suspicious clients\n    http-request tarpit if { sc_http_req_rate(0) gt 50 }\n    \n    default_backend web_servers\n\n# Clean backend\nbackend web_servers\n    balance leastconn\n    option httpchk GET /health\n    \n    server web1 192.168.1.10:8080 check\n    server web2 192.168.1.11:8080 check\n    server web3 192.168.1.12:8080 check\nEOF\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"runtime-management-and-monitoring\" class=\"mobile-header\"\u003eRuntime Management and Monitoring\u003c/h2\u003e\n\u003ch3 id=\"advanced-runtime-commands\" class=\"mobile-header\"\u003eAdvanced Runtime Commands\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Create HAProxy management script\nsudo tee /usr/local/bin/haproxy-manage.sh \u0026gt; /dev/null \u0026lt;\u0026lt;\u0026#039;EOF\u0026#039;\n#!/bin/bash\nHAPROXY_SOCKET=\u0026quot;/run/haproxy/admin.sock\u0026quot;\n\ncase \u0026quot;$1\u0026quot; in\n    \u0026quot;status\u0026quot;)\n        echo \u0026quot;=== HAProxy Status ===\u0026quot;\n        echo \u0026quot;show info\u0026quot; | socat stdio ${HAPROXY_SOCKET}\n        echo \u0026quot;\u0026quot;\n        echo \u0026quot;=== Server Status ===\u0026quot;\n        echo \u0026quot;show stat\u0026quot; | socat stdio ${HAPROXY_SOCKET} | column -t -s \u0026quot;,\u0026quot;\n        ;;\n    \n    \u0026quot;enable\u0026quot;)\n        if [ -z \u0026quot;$2\u0026quot; ] || [ -z \u0026quot;$3\u0026quot; ]; then\n            echo \u0026quot;Usage: $0 enable \u0026lt;backend\u0026gt; \u0026lt;server\u0026gt;\u0026quot;\n            exit 1\n        fi\n        echo \u0026quot;enable server $2/$3\u0026quot; | socat stdio ${HAPROXY_SOCKET}\n        echo \u0026quot;Server $2/$3 enabled\u0026quot;\n        ;;\n    \n    \u0026quot;disable\u0026quot;)\n        if [ -z \u0026quot;$2\u0026quot; ] || [ -z \u0026quot;$3\u0026quot; ]; then\n            echo \u0026quot;Usage: $0 disable \u0026lt;backend\u0026gt; \u0026lt;server\u0026gt;\u0026quot;\n            exit 1\n        fi\n        echo \u0026quot;disable server $2/$3\u0026quot; | socat stdio ${HAPROXY_SOCKET}\n        echo \u0026quot;Server $2/$3 disabled\u0026quot;\n        ;;\n    \n    \u0026quot;weight\u0026quot;)\n        if [ -z \u0026quot;$2\u0026quot; ] || [ -z \u0026quot;$3\u0026quot; ] || [ -z \u0026quot;$4\u0026quot; ]; then\n            echo \u0026quot;Usage: $0 weight \u0026lt;backend\u0026gt; \u0026lt;server\u0026gt; \u0026lt;weight\u0026gt;\u0026quot;\n            exit 1\n        fi\n        echo \u0026quot;set weight $2/$3 $4\u0026quot; | socat stdio ${HAPROXY_SOCKET}\n        echo \u0026quot;Weight for $2/$3 set to $4\u0026quot;\n        ;;\n    \n    \u0026quot;sessions\u0026quot;)\n        echo \u0026quot;=== Active Sessions ===\u0026quot;\n        echo \u0026quot;show sess\u0026quot; | socat stdio ${HAPROXY_SOCKET}\n        ;;\n    \n    \u0026quot;errors\u0026quot;)\n        echo \u0026quot;=== Recent Errors ===\u0026quot;\n        echo \u0026quot;show errors\u0026quot; | socat stdio ${HAPROXY_SOCKET}\n        ;;\n    \n    \u0026quot;reload\u0026quot;)\n        echo \u0026quot;Reloading HAProxy configuration...\u0026quot;\n        if haproxy -c -f /etc/haproxy/haproxy.cfg; then\n            systemctl reload haproxy\n            echo \u0026quot;Configuration reloaded successfully\u0026quot;\n        else\n            echo \u0026quot;Configuration has errors, reload aborted\u0026quot;\n            exit 1\n        fi\n        ;;\n    \n    \u0026quot;drain\u0026quot;)\n        if [ -z \u0026quot;$2\u0026quot; ] || [ -z \u0026quot;$3\u0026quot; ]; then\n            echo \u0026quot;Usage: $0 drain \u0026lt;backend\u0026gt; \u0026lt;server\u0026gt;\u0026quot;\n            exit 1\n        fi\n        echo \u0026quot;set server $2/$3 state drain\u0026quot; | socat stdio ${HAPROXY_SOCKET}\n        echo \u0026quot;Server $2/$3 is being drained\u0026quot;\n        \n        # Wait for connections to finish\n        while [ $(echo \u0026quot;show stat\u0026quot; | socat stdio ${HAPROXY_SOCKET} | grep \u0026quot;$2,$3\u0026quot; | cut -d, -f5) -gt 0 ]; do\n            echo \u0026quot;Waiting for connections to finish...\u0026quot;\n            sleep 5\n        done\n        echo \u0026quot;Server $2/$3 has been drained\u0026quot;\n        ;;\n    \n    *)\n        echo \u0026quot;Usage: $0 {status|enable|disable|weight|sessions|errors|reload|drain} [options]\u0026quot;\n        echo \u0026quot;\u0026quot;\n        echo \u0026quot;Examples:\u0026quot;\n        echo \u0026quot;  $0 status\u0026quot;\n        echo \u0026quot;  $0 enable web_servers web1\u0026quot;\n        echo \u0026quot;  $0 disable web_servers web1\u0026quot;\n        echo \u0026quot;  $0 weight web_servers web1 50\u0026quot;\n        echo \u0026quot;  $0 drain web_servers web1\u0026quot;\n        echo \u0026quot;  $0 sessions\u0026quot;\n        echo \u0026quot;  $0 errors\u0026quot;\n        echo \u0026quot;  $0 reload\u0026quot;\n        exit 1\n        ;;\nesac\nEOF\n\nsudo chmod +x /usr/local/bin/haproxy-manage.sh\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"automated-log-analysis\" class=\"mobile-header\"\u003eAutomated Log Analysis\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003esudo tee /usr/local/bin/haproxy-log-analysis.sh \u0026gt; /dev/null \u0026lt;\u0026lt;\u0026#039;EOF\u0026#039;\n#!/bin/bash\nLOG_FILE=\u0026quot;/var/log/haproxy/haproxy.log\u0026quot;\nANALYSIS_DIR=\u0026quot;/var/log/haproxy-analysis\u0026quot;\nDATE=$(date +%Y%m%d_%H%M%S)\n\nmkdir -p ${ANALYSIS_DIR}\n\n# Top client IPs\necho \u0026quot;Top Client IPs - ${DATE}\u0026quot; \u0026gt; ${ANALYSIS_DIR}/top-clients-${DATE}.txt\nawk \u0026#039;{print $6}\u0026#039; ${LOG_FILE} | sort | uniq -c | sort -nr | head -20 \u0026gt;\u0026gt; ${ANALYSIS_DIR}/top-clients-${DATE}.txt\n\n# Response time analysis\necho \u0026quot;Response Time Analysis - ${DATE}\u0026quot; \u0026gt; ${ANALYSIS_DIR}/response-times-${DATE}.txt\nawk \u0026#039;{print $11}\u0026#039; ${LOG_FILE} | grep -v \u0026#039;^-$\u0026#039; | sort -n | tail -100 \u0026gt;\u0026gt; ${ANALYSIS_DIR}/response-times-${DATE}.txt\n\n# Error analysis\necho \u0026quot;Error Analysis - ${DATE}\u0026quot; \u0026gt; ${ANALYSIS_DIR}/errors-${DATE}.txt\nawk \u0026#039;$10 \u0026gt;= 400 {print $0}\u0026#039; ${LOG_FILE} | tail -100 \u0026gt;\u0026gt; ${ANALYSIS_DIR}/errors-${DATE}.txt\n\n# Backend server analysis\necho \u0026quot;Backend Server Performance - ${DATE}\u0026quot; \u0026gt; ${ANALYSIS_DIR}/backend-performance-${DATE}.txt\nawk \u0026#039;{print $8}\u0026#039; ${LOG_FILE} | sort | uniq -c | sort -nr \u0026gt;\u0026gt; ${ANALYSIS_DIR}/backend-performance-${DATE}.txt\n\n# SSL/TLS analysis\necho \u0026quot;SSL/TLS Analysis - ${DATE}\u0026quot; \u0026gt; ${ANALYSIS_DIR}/ssl-analysis-${DATE}.txt\ngrep \u0026quot;SSL\u0026quot; ${LOG_FILE} | tail -50 \u0026gt;\u0026gt; ${ANALYSIS_DIR}/ssl-analysis-${DATE}.txt\n\n# Generate summary report\ncat \u0026gt; ${ANALYSIS_DIR}/summary-${DATE}.txt \u0026lt;\u0026lt;EOL\nHAProxy Log Analysis Summary - ${DATE}\n=====================================\n\nTotal Requests: $(wc -l \u0026lt; ${LOG_FILE})\nUnique IPs: $(awk \u0026#039;{print $6}\u0026#039; ${LOG_FILE} | sort -u | wc -l)\n4xx Errors: $(awk \u0026#039;$10 \u0026gt;= 400 \u0026amp;\u0026amp; $10 \u0026lt; 500 {print $0}\u0026#039; ${LOG_FILE} | wc -l)\n5xx Errors: $(awk \u0026#039;$10 \u0026gt;= 500 {print $0}\u0026#039; ${LOG_FILE} | wc -l)\n\nAverage Response Time: $(awk \u0026#039;{sum += $11; count++} END {print sum/count}\u0026#039; ${LOG_FILE})ms\n\nTop 5 Requested URLs:\n$(awk \u0026#039;{print $12}\u0026#039; ${LOG_FILE} | sort | uniq -c | sort -nr | head -5)\n\nAnalysis completed at: $(date)\nEOL\n\necho \u0026quot;Log analysis completed. Reports in: ${ANALYSIS_DIR}/\u0026quot;\nEOF\n\nsudo chmod +x /usr/local/bin/haproxy-log-analysis.sh\n\n# Schedule daily log analysis\necho \u0026quot;0 6 * * * root /usr/local/bin/haproxy-log-analysis.sh\u0026quot; | sudo tee -a /etc/crontab\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"troubleshooting-cross-platform\" class=\"mobile-header\"\u003eTroubleshooting (Cross-Platform)\u003c/h2\u003e\n\u003ch3 id=\"common-issues-and-solutions\" class=\"mobile-header\"\u003eCommon Issues and Solutions\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Check HAProxy process status\nps aux | grep haproxy\nsystemctl status haproxy\n\n# Configuration validation\nhaproxy -c -f /etc/haproxy/haproxy.cfg\nhaproxy -c -V -f /etc/haproxy/haproxy.cfg\n\n# Socket connectivity test\nsocat - /run/haproxy/admin.sock\necho \u0026quot;show info\u0026quot; | socat stdio /run/haproxy/admin.sock\n\n# Backend server connectivity test\nfor server in 192.168.1.10 192.168.1.11 192.168.1.12; do\n    echo \u0026quot;Testing $server...\u0026quot;\n    nc -zv $server 8080\n    curl -I http://$server:8080/health\ndone\n\n# SSL certificate issues\nopenssl x509 -in /etc/haproxy/ssl/example.com.pem -text -noout\nopenssl verify -CAfile /etc/haproxy/ssl/ca.crt /etc/haproxy/ssl/example.com.pem\n\n# Memory usage debugging\npmap -x $(pgrep haproxy)\ncat /proc/$(pgrep haproxy)/status | grep -E \u0026quot;(VmSize|VmRSS|VmData|VmStk)\u0026quot;\n\n# Network debugging\nss -tulpn | grep haproxy\nnetstat -tulpn | grep haproxy\nlsof -i :80,443,8404\n\n# Log debugging\ntail -f /var/log/haproxy/haproxy.log\njournalctl -u haproxy -f\n\n# Performance debugging\necho \u0026quot;show stat\u0026quot; | socat stdio /run/haproxy/admin.sock | grep -v \u0026quot;^#\u0026quot;\necho \u0026quot;show sess\u0026quot; | socat stdio /run/haproxy/admin.sock\necho \u0026quot;show pools\u0026quot; | socat stdio /run/haproxy/admin.sock\n\n# Configuration debugging\nhaproxy -vv\nhaproxy -dM -f /etc/haproxy/haproxy.cfg  # Don\u0026#039;t use in production\n\n# Check for core dumps\nfind /var/crash -name \u0026quot;haproxy*\u0026quot; 2\u0026gt;/dev/null\nfind /var/lib/systemd/coredump -name \u0026quot;*haproxy*\u0026quot; 2\u0026gt;/dev/null\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"advanced-debugging\" class=\"mobile-header\"\u003eAdvanced Debugging\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Enable debug logging\nsudo systemctl edit haproxy.service\n# Add:\n[Service]\nExecStart=\nExecStart=/usr/sbin/haproxy -f /etc/haproxy/haproxy.cfg -p /run/haproxy.pid -S /run/haproxy-master.sock -d\n\nsudo systemctl daemon-reload\nsudo systemctl restart haproxy\n\n# Real-time connection monitoring\nwatch -n 1 \u0026#039;echo \u0026quot;show stat\u0026quot; | socat stdio /run/haproxy/admin.sock | grep -E \u0026quot;FRONTEND|BACKEND\u0026quot; | column -t -s \u0026quot;,\u0026quot;\u0026#039;\n\n# TCP dump for network analysis\ntcpdump -i any -w haproxy-traffic.pcap port 80 or port 443\ntcpdump -i any -w backend-traffic.pcap host 192.168.1.10\n\n# Strace HAProxy process\nstrace -p $(pgrep haproxy) -e trace=network\n\n# Monitor file descriptors\nlsof -p $(pgrep haproxy) | wc -l\ncat /proc/$(pgrep haproxy)/limits | grep \u0026quot;Max open files\u0026quot;\n\n# Check shared memory segments\nipcs -m | grep haproxy\n\n# Monitor syscalls\nperf trace -p $(pgrep haproxy)\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"additional-resources\" class=\"mobile-header\"\u003eAdditional Resources\u003c/h2\u003e\n\u003cli class=\"mobile-list-item\"\u003e\u003ca href=\"https://docs.haproxy.org/\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\"\u003eOfficial Documentation\u003c/a\u003e\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003e\u003ca href=\"https://cbonte.github.io/haproxy-dconv/\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\"\u003eHAProxy Configuration Manual\u003c/a\u003e\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003e\u003ca href=\"https://www.haproxy.com/documentation/hapee/latest/configuration/best-practices/\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\"\u003eBest Practices Guide\u003c/a\u003e\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003e\u003ca href=\"https://www.haproxy.com/blog/haproxy-performance-tuning/\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\"\u003ePerformance Tuning Guide\u003c/a\u003e\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003e\u003ca href=\"https://www.haproxy.com/solutions/security/\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\"\u003eSecurity Guide\u003c/a\u003e\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003e\u003ca href=\"https://discourse.haproxy.org/\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\"\u003eCommunity Forum\u003c/a\u003e\u003c/li\u003e\n\u003cp class=\"mobile-paragraph\"\u003e---\u003c/p\u003e\n\u003cp class=\"mobile-paragraph\"\u003e\u003cstrong\u003eNote:\u003c/strong\u003e This guide is part of the \u003ca href=\"https://howtomgr.github.io\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\"\u003eHowToMgr\u003c/a\u003e collection.\u003c/p\u003e","readTime":"29 min","wordCount":5710,"lastBuilt":"2025-09-14T06:13:06.707Z"},{"name":"nginx","displayName":"NGINX","slug":"nginx","description":"Repo for nginx","category":"web-server","language":null,"stars":0,"forks":0,"topics":[],"githubUrl":"https://github.com/howtomgr/nginx","updatedAt":"2025-09-14T01:30:38Z","createdAt":"2025-09-08T03:12:26Z","readmeRaw":"# NGINX Installation Guide\n\nNGINX is a free and open-source web server, reverse proxy, load balancer, and HTTP cache. Originally written by Igor Sysoev to solve the C10K problem, it's now one of the most popular web servers in the world. NGINX serves as a FOSS alternative to commercial solutions like F5 BIG-IP, Citrix ADC, or proprietary CDNs, offering enterprise-grade performance and reliability without licensing costs.\n\n## Prerequisites\n\n- **Hardware Requirements**:\n  - CPU: 1 core minimum (2+ cores recommended for high traffic)\n  - RAM: 512MB minimum (2GB+ recommended for production)\n  - Storage: 100MB for installation (more for logs and cache)\n- **Operating System**: Linux, BSD, macOS, or Windows\n- **Network Requirements**:\n  - Port 80 (HTTP) and/or 443 (HTTPS)\n  - Additional ports for specific applications\n- **Dependencies**:\n  - PCRE library (for regular expressions)\n  - zlib library (for gzip compression)\n  - OpenSSL library (for SSL/TLS support)\n- **System Access**: root or sudo privileges required\n\n## Installation\n\n### RHEL/CentOS/Rocky Linux/AlmaLinux\n\n```bash\n# RHEL/CentOS 7\nsudo yum install -y epel-release\nsudo yum install -y nginx\n\n# RHEL/CentOS/Rocky/AlmaLinux 8+\nsudo dnf install -y epel-release\nsudo dnf install -y nginx\n\n# Official NGINX repository (recommended for latest stable)\nsudo tee /etc/yum.repos.d/nginx.repo \u003c\u003c'EOF'\n[nginx-stable]\nname=nginx stable repo\nbaseurl=http://nginx.org/packages/centos/$releasever/$basearch/\ngpgcheck=1\nenabled=1\ngpgkey=https://nginx.org/keys/nginx_signing.key\nmodule_hotfixes=true\nEOF\n\n# Install from official repository\nsudo dnf install -y nginx\n\n# Enable and start service\nsudo systemctl enable --now nginx\n```\n\n### Debian/Ubuntu\n\n```bash\n# Distribution packages\nsudo apt update\nsudo apt install -y nginx\n\n# Official NGINX repository (recommended for latest stable)\n# Install prerequisites\nsudo apt install -y curl gnupg2 ca-certificates lsb-release debian-archive-keyring\n\n# Add NGINX signing key\ncurl https://nginx.org/keys/nginx_signing.key | gpg --dearmor \\\n    | sudo tee /usr/share/keyrings/nginx-archive-keyring.gpg \u003e/dev/null\n\n# Add repository\necho \"deb [signed-by=/usr/share/keyrings/nginx-archive-keyring.gpg] \\\n    http://nginx.org/packages/ubuntu `lsb_release -cs` nginx\" \\\n    | sudo tee /etc/apt/sources.list.d/nginx.list\n\n# Install nginx\nsudo apt update\nsudo apt install -y nginx\n\n# Enable and start service\nsudo systemctl enable --now nginx\n```\n\n### Arch Linux\n\n```bash\n# Install nginx from official repositories\nsudo pacman -S nginx\n\n# Optional: Install additional modules\nsudo pacman -S nginx-mod-brotli nginx-mod-headers-more nginx-mod-naxsi\n\n# For GeoIP support\nsudo pacman -S nginx-mod-geoip2\n\n# Enable and start service\nsudo systemctl enable --now nginx\n\n# Install mainline version from AUR\nyay -S nginx-mainline\n\n# Configuration location: /etc/nginx/\n```\n\n### Alpine Linux\n\n```bash\n# Install nginx\napk add --no-cache nginx\n\n# Install additional modules\napk add --no-cache nginx-mod-http-lua nginx-mod-stream nginx-mod-http-geoip2\n\n# Create required directories\nmkdir -p /run/nginx /var/lib/nginx/tmp\n\n# Create nginx user if not exists\nadduser -D -H -s /sbin/nologin -G nginx -g nginx nginx\n\n# Enable and start service\nrc-update add nginx default\nrc-service nginx start\n\n# Configuration location: /etc/nginx/\n```\n\n### openSUSE/SLES\n\n```bash\n# openSUSE Leap/Tumbleweed\nsudo zypper install -y nginx\n\n# Install additional modules\nsudo zypper install -y nginx-module-geoip nginx-module-image-filter\n\n# SLES 15\nsudo SUSEConnect -p sle-module-web-scripting/15.5/x86_64\nsudo zypper install -y nginx\n\n# Enable and start service\nsudo systemctl enable --now nginx\n\n# Configuration location: /etc/nginx/\n```\n\n### macOS\n\n```bash\n# Using Homebrew\nbrew install nginx\n\n# Start as service\nbrew services start nginx\n\n# Or run manually\nnginx\n\n# Configuration location: /usr/local/etc/nginx/\n# Alternative: /opt/homebrew/etc/nginx/ (Apple Silicon)\n```\n\n### FreeBSD\n\n```bash\n# Using pkg\npkg install nginx\n\n# Enable in rc.conf\necho 'nginx_enable=\"YES\"' \u003e\u003e /etc/rc.conf\n\n# Start service\nservice nginx start\n\n# Configuration location: /usr/local/etc/nginx/\n```\n\n### Windows\n\n```powershell\n# Method 1: Using Chocolatey\nchoco install nginx\n\n# Method 2: Using Scoop\nscoop install nginx\n\n# Method 3: Manual installation\n# Download from http://nginx.org/en/download.html\n# Extract to C:\\nginx\n\n# Start nginx\ncd C:\\nginx\nstart nginx\n\n# Install as Windows service using NSSM\nnssm install nginx C:\\nginx\\nginx.exe\nnssm set nginx AppDirectory C:\\nginx\nnssm start nginx\n\n# Configuration location: C:\\nginx\\conf\\\n```\n\n## Initial Configuration\n\n### First-Run Setup\n\n1. **Create nginx user** (if not created by package):\n```bash\n# Linux systems\nsudo useradd -r -d /var/cache/nginx -s /sbin/nologin -c \"nginx user\" nginx\n```\n\n2. **Default configuration locations**:\n- RHEL/CentOS/Rocky/AlmaLinux: `/etc/nginx/nginx.conf`\n- Debian/Ubuntu: `/etc/nginx/nginx.conf`\n- Arch Linux: `/etc/nginx/nginx.conf`\n- Alpine Linux: `/etc/nginx/nginx.conf`\n- openSUSE/SLES: `/etc/nginx/nginx.conf`\n- macOS: `/usr/local/etc/nginx/nginx.conf`\n- FreeBSD: `/usr/local/etc/nginx/nginx.conf`\n- Windows: `C:\\nginx\\conf\\nginx.conf`\n\n3. **Essential settings to change**:\n\n```nginx\n# /etc/nginx/nginx.conf\nuser nginx;  # Run as non-root user\nworker_processes auto;  # Auto-detect CPU cores\nerror_log /var/log/nginx/error.log warn;\npid /var/run/nginx.pid;\n\nevents {\n    worker_connections 1024;  # Increase for high traffic\n    use epoll;  # Linux only, efficient connection method\n}\n\nhttp {\n    # Hide nginx version\n    server_tokens off;\n    \n    # Basic security headers\n    add_header X-Frame-Options \"SAMEORIGIN\" always;\n    add_header X-Content-Type-Options \"nosniff\" always;\n    add_header X-XSS-Protection \"1; mode=block\" always;\n    \n    # Remove default server block\n    # Create site-specific configs in /etc/nginx/conf.d/\n}\n```\n\n### Testing Initial Setup\n\n```bash\n# Test configuration syntax\nsudo nginx -t\n\n# Check nginx version and modules\nnginx -V\n\n# Verify nginx is listening\nsudo ss -tlnp | grep :80\n\n# Test with curl\ncurl -I http://localhost\n```\n\n**WARNING:** Remove or modify the default server block to prevent information disclosure!\n\n## Service Management\n\n### systemd (RHEL, Debian, Ubuntu, Arch, openSUSE)\n\n```bash\n# Enable nginx to start on boot\nsudo systemctl enable nginx\n\n# Start nginx\nsudo systemctl start nginx\n\n# Stop nginx\nsudo systemctl stop nginx\n\n# Restart nginx\nsudo systemctl restart nginx\n\n# Reload configuration without downtime\nsudo systemctl reload nginx\n\n# Check status\nsudo systemctl status nginx\n\n# View logs\nsudo journalctl -u nginx -f\n```\n\n### OpenRC (Alpine Linux)\n\n```bash\n# Enable nginx to start on boot\nrc-update add nginx default\n\n# Start nginx\nrc-service nginx start\n\n# Stop nginx\nrc-service nginx stop\n\n# Restart nginx\nrc-service nginx restart\n\n# Reload configuration\nrc-service nginx reload\n\n# Check status\nrc-service nginx status\n```\n\n### rc.d (FreeBSD)\n\n```bash\n# Enable in /etc/rc.conf\necho 'nginx_enable=\"YES\"' \u003e\u003e /etc/rc.conf\n\n# Start nginx\nservice nginx start\n\n# Stop nginx\nservice nginx stop\n\n# Restart nginx\nservice nginx restart\n\n# Reload configuration\nservice nginx reload\n\n# Check status\nservice nginx status\n```\n\n### launchd (macOS)\n\n```bash\n# Using Homebrew services\nbrew services start nginx\nbrew services stop nginx\nbrew services restart nginx\n\n# Manual launchd control\nsudo launchctl load /Library/LaunchDaemons/homebrew.mxcl.nginx.plist\nsudo launchctl unload /Library/LaunchDaemons/homebrew.mxcl.nginx.plist\n```\n\n### Windows Service Manager\n\n```powershell\n# Using NSSM\nnssm start nginx\nnssm stop nginx\nnssm restart nginx\n\n# Using nginx directly\nnginx -s stop\nnginx -s quit  # Graceful shutdown\nnginx -s reload\nnginx -s reopen  # Reopen log files\n```\n\n## Advanced Configuration\n\n### Main Configuration Structure\n\n```nginx\n# /etc/nginx/nginx.conf\nuser nginx;\nworker_processes auto;\nworker_cpu_affinity auto;\nerror_log /var/log/nginx/error.log warn;\npid /var/run/nginx.pid;\n\n# Load dynamic modules\nload_module modules/ngx_http_geoip2_module.so;\n\nevents {\n    worker_connections 4096;\n    use epoll;\n    multi_accept on;\n}\n\nhttp {\n    include /etc/nginx/mime.types;\n    default_type application/octet-stream;\n\n    # Logging\n    log_format main '$remote_addr - $remote_user [$time_local] \"$request\" '\n                    '$status $body_bytes_sent \"$http_referer\" '\n                    '\"$http_user_agent\" \"$http_x_forwarded_for\"';\n    \n    access_log /var/log/nginx/access.log main buffer=16k;\n\n    # Performance\n    sendfile on;\n    tcp_nopush on;\n    tcp_nodelay on;\n    keepalive_timeout 65;\n    types_hash_max_size 2048;\n    client_max_body_size 100M;\n\n    # Gzip compression\n    gzip on;\n    gzip_vary on;\n    gzip_proxied any;\n    gzip_comp_level 6;\n    gzip_types text/plain text/css text/xml text/javascript \n               application/json application/javascript application/xml+rss \n               application/rss+xml application/atom+xml image/svg+xml;\n\n    # SSL configuration\n    ssl_protocols TLSv1.2 TLSv1.3;\n    ssl_ciphers ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384;\n    ssl_prefer_server_ciphers off;\n    ssl_session_cache shared:SSL:10m;\n    ssl_session_timeout 10m;\n    ssl_session_tickets off;\n    ssl_stapling on;\n    ssl_stapling_verify on;\n\n    # Include server blocks\n    include /etc/nginx/conf.d/*.conf;\n    include /etc/nginx/sites-enabled/*;\n}\n```\n\n### Virtual Host Example\n\n```nginx\n# /etc/nginx/conf.d/example.com.conf\nserver {\n    listen 80;\n    listen [::]:80;\n    server_name example.com www.example.com;\n    \n    # Redirect to HTTPS\n    return 301 https://$server_name$request_uri;\n}\n\nserver {\n    listen 443 ssl http2;\n    listen [::]:443 ssl http2;\n    server_name example.com www.example.com;\n\n    # SSL configuration\n    ssl_certificate /etc/letsencrypt/live/example.com/fullchain.pem;\n    ssl_certificate_key /etc/letsencrypt/live/example.com/privkey.pem;\n    ssl_trusted_certificate /etc/letsencrypt/live/example.com/chain.pem;\n\n    # Security headers\n    add_header Strict-Transport-Security \"max-age=63072000\" always;\n    add_header X-Frame-Options \"DENY\" always;\n    add_header X-Content-Type-Options \"nosniff\" always;\n    add_header X-XSS-Protection \"1; mode=block\" always;\n    add_header Referrer-Policy \"no-referrer-when-downgrade\" always;\n    add_header Content-Security-Policy \"default-src 'self' http: https: data: blob: 'unsafe-inline'\" always;\n\n    # Logging\n    access_log /var/log/nginx/example.com.access.log;\n    error_log /var/log/nginx/example.com.error.log;\n\n    # Root directory\n    root /var/www/example.com/public;\n    index index.html index.htm index.php;\n\n    # Locations\n    location / {\n        try_files $uri $uri/ =404;\n    }\n\n    # PHP-FPM configuration\n    location ~ \\.php$ {\n        fastcgi_pass unix:/var/run/php/php8.1-fpm.sock;\n        fastcgi_index index.php;\n        fastcgi_param SCRIPT_FILENAME $realpath_root$fastcgi_script_name;\n        include fastcgi_params;\n    }\n\n    # Deny access to hidden files\n    location ~ /\\. {\n        deny all;\n    }\n}\n```\n\n## Reverse Proxy Setup\n\n### Basic Reverse Proxy\n\n```nginx\n# /etc/nginx/conf.d/app.example.com.conf\nupstream backend {\n    server 127.0.0.1:3000;\n    server 127.0.0.1:3001 backup;\n    keepalive 32;\n}\n\nserver {\n    listen 80;\n    server_name app.example.com;\n    return 301 https://$server_name$request_uri;\n}\n\nserver {\n    listen 443 ssl http2;\n    server_name app.example.com;\n\n    ssl_certificate /etc/letsencrypt/live/app.example.com/fullchain.pem;\n    ssl_certificate_key /etc/letsencrypt/live/app.example.com/privkey.pem;\n\n    location / {\n        proxy_pass http://backend;\n        proxy_http_version 1.1;\n        \n        # Headers\n        proxy_set_header Host $host;\n        proxy_set_header X-Real-IP $remote_addr;\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n        proxy_set_header X-Forwarded-Proto $scheme;\n        \n        # Timeouts\n        proxy_connect_timeout 60s;\n        proxy_send_timeout 60s;\n        proxy_read_timeout 60s;\n        \n        # Websocket support\n        proxy_set_header Upgrade $http_upgrade;\n        proxy_set_header Connection \"upgrade\";\n    }\n}\n```\n\n### Load Balancing Methods\n\n```nginx\n# Round-robin (default)\nupstream backend {\n    server backend1.example.com;\n    server backend2.example.com;\n    server backend3.example.com;\n}\n\n# Least connections\nupstream backend {\n    least_conn;\n    server backend1.example.com;\n    server backend2.example.com;\n    server backend3.example.com;\n}\n\n# IP hash (session persistence)\nupstream backend {\n    ip_hash;\n    server backend1.example.com;\n    server backend2.example.com;\n    server backend3.example.com;\n}\n\n# Weighted distribution\nupstream backend {\n    server backend1.example.com weight=3;\n    server backend2.example.com weight=2;\n    server backend3.example.com weight=1;\n}\n```\n\n## Security Configuration\n\n### Basic Security Hardening\n\n```nginx\n# Global security settings in nginx.conf\nhttp {\n    # Hide nginx version\n    server_tokens off;\n    \n    # Limit request methods\n    if ($request_method !~ ^(GET|HEAD|POST|PUT|DELETE|OPTIONS)$) {\n        return 405;\n    }\n    \n    # Limit buffer sizes\n    client_body_buffer_size 1K;\n    client_header_buffer_size 1k;\n    client_max_body_size 1M;\n    large_client_header_buffers 2 1k;\n    \n    # Timeouts\n    client_body_timeout 10;\n    client_header_timeout 10;\n    keepalive_timeout 5 5;\n    send_timeout 10;\n    \n    # Rate limiting zones\n    limit_req_zone $binary_remote_addr zone=general:10m rate=10r/s;\n    limit_req_zone $binary_remote_addr zone=login:10m rate=3r/m;\n    limit_conn_zone $binary_remote_addr zone=addr:10m;\n}\n```\n\n### SSL/TLS Best Practices\n\n```nginx\n# Modern SSL configuration\nssl_protocols TLSv1.2 TLSv1.3;\nssl_ciphers ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-CHACHA20-POLY1305:ECDHE-RSA-CHACHA20-POLY1305:DHE-RSA-AES128-GCM-SHA256:DHE-RSA-AES256-GCM-SHA384;\nssl_prefer_server_ciphers off;\n\n# Enable HSTS\nadd_header Strict-Transport-Security \"max-age=63072000; includeSubDomains; preload\" always;\n\n# SSL session caching\nssl_session_cache shared:SSL:50m;\nssl_session_timeout 1d;\nssl_session_tickets off;\n\n# OCSP stapling\nssl_stapling on;\nssl_stapling_verify on;\nresolver 8.8.8.8 8.8.4.4 valid=300s;\nresolver_timeout 5s;\n\n# Diffie-Hellman parameters\nssl_dhparam /etc/nginx/dhparam.pem;\n```\n\n### Firewall Rules\n\n```bash\n# UFW (Ubuntu/Debian)\nsudo ufw allow 'Nginx Full'\nsudo ufw allow 80/tcp\nsudo ufw allow 443/tcp\n\n# firewalld (RHEL/CentOS/openSUSE)\nsudo firewall-cmd --permanent --add-service=http\nsudo firewall-cmd --permanent --add-service=https\nsudo firewall-cmd --reload\n\n# iptables\nsudo iptables -A INPUT -p tcp --dport 80 -j ACCEPT\nsudo iptables -A INPUT -p tcp --dport 443 -j ACCEPT\nsudo iptables-save \u003e /etc/iptables/rules.v4\n\n# pf (FreeBSD)\n# Add to /etc/pf.conf\npass in on $ext_if proto tcp from any to any port {80, 443}\n```\n\n### ModSecurity WAF Integration\n\n```bash\n# Install ModSecurity\n# Debian/Ubuntu\nsudo apt install -y libmodsecurity3 libmodsecurity-nginx\n\n# Build nginx with ModSecurity support\n./configure --add-dynamic-module=/path/to/ModSecurity-nginx\n\n# Load module in nginx.conf\nload_module modules/ngx_http_modsecurity_module.so;\n\n# Enable in server block\nmodsecurity on;\nmodsecurity_rules_file /etc/nginx/modsec/main.conf;\n```\n\n## Database Setup\n\nNot applicable for NGINX as it doesn't require a database. However, NGINX can be configured to work with various database-backed applications through reverse proxy configurations.\n\n## Performance Optimization\n\n### System Tuning\n\n```bash\n# /etc/sysctl.conf\n# Increase system limits\nnet.core.somaxconn = 65535\nnet.core.netdev_max_backlog = 65535\nnet.ipv4.tcp_max_syn_backlog = 65535\nnet.ipv4.tcp_fin_timeout = 30\nnet.ipv4.tcp_keepalive_time = 1200\nnet.ipv4.tcp_max_tw_buckets = 5000\nnet.ipv4.tcp_tw_reuse = 1\nnet.ipv4.tcp_slow_start_after_idle = 0\n\n# File descriptors\nfs.file-max = 65535\n\n# Apply changes\nsudo sysctl -p\n```\n\n### NGINX Optimization\n\n```nginx\n# Worker configuration\nworker_processes auto;\nworker_cpu_affinity auto;\nworker_rlimit_nofile 65535;\n\nevents {\n    worker_connections 65535;\n    use epoll;\n    multi_accept on;\n}\n\nhttp {\n    # Caching\n    open_file_cache max=200000 inactive=20s;\n    open_file_cache_valid 30s;\n    open_file_cache_min_uses 2;\n    open_file_cache_errors on;\n\n    # Buffer sizes\n    client_body_buffer_size 128k;\n    client_max_body_size 10m;\n    client_header_buffer_size 1k;\n    large_client_header_buffers 4 16k;\n    output_buffers 1 32k;\n    postpone_output 1460;\n\n    # Compression\n    gzip on;\n    gzip_vary on;\n    gzip_proxied any;\n    gzip_comp_level 6;\n    gzip_min_length 1000;\n    gzip_disable \"msie6\";\n    gzip_types\n        text/plain\n        text/css\n        text/xml\n        text/javascript\n        application/json\n        application/javascript\n        application/xml+rss\n        application/rss+xml\n        application/atom+xml\n        image/svg+xml;\n}\n```\n\n### Content Caching\n\n```nginx\n# Define cache\nproxy_cache_path /var/cache/nginx levels=1:2 keys_zone=static_cache:10m max_size=1g inactive=60m use_temp_path=off;\n\nserver {\n    location ~* \\.(jpg|jpeg|png|gif|ico|css|js)$ {\n        expires 1y;\n        add_header Cache-Control \"public, immutable\";\n        proxy_cache static_cache;\n        proxy_cache_valid 200 60m;\n        proxy_cache_use_stale error timeout invalid_header updating http_500 http_502 http_503 http_504;\n    }\n}\n```\n\n## Monitoring\n\n### Built-in Status Module\n\n```nginx\n# Enable stub_status\nserver {\n    listen 127.0.0.1:8080;\n    server_name localhost;\n    \n    location /nginx_status {\n        stub_status;\n        allow 127.0.0.1;\n        deny all;\n    }\n}\n```\n\n### Access with curl\n\n```bash\n# Get basic metrics\ncurl http://127.0.0.1:8080/nginx_status\n\n# Sample output:\n# Active connections: 291\n# server accepts handled requests\n#  16630948 16630948 31070465\n# Reading: 6 Writing: 179 Waiting: 106\n```\n\n### Log Analysis\n\n```bash\n# Top 10 IP addresses\nawk '{print $1}' /var/log/nginx/access.log | sort | uniq -c | sort -rn | head -10\n\n# Response codes distribution\nawk '{print $9}' /var/log/nginx/access.log | sort | uniq -c | sort -rn\n\n# Requests per second\ntail -10000 /var/log/nginx/access.log | awk '{print $4}' | uniq -c\n\n# Slow requests (\u003e1s)\nawk '$11 \u003e 1' /var/log/nginx/access.log\n```\n\n### Prometheus Exporter\n\n```bash\n# Install nginx-prometheus-exporter\nwget https://github.com/nginxinc/nginx-prometheus-exporter/releases/download/v0.11.0/nginx-prometheus-exporter_0.11.0_linux_amd64.tar.gz\ntar xzf nginx-prometheus-exporter_0.11.0_linux_amd64.tar.gz\nsudo mv nginx-prometheus-exporter /usr/local/bin/\n\n# Run exporter\nnginx-prometheus-exporter -nginx.scrape-uri=http://127.0.0.1:8080/nginx_status\n\n# Add to Prometheus config\nscrape_configs:\n  - job_name: 'nginx'\n    static_configs:\n      - targets: ['localhost:9113']\n```\n\n## Backup and Restore\n\n### What to Backup\n\n1. **Configuration files**:\n```bash\n/etc/nginx/nginx.conf\n/etc/nginx/conf.d/\n/etc/nginx/sites-available/\n/etc/nginx/sites-enabled/\n/etc/nginx/snippets/\n```\n\n2. **SSL certificates**:\n```bash\n/etc/letsencrypt/\n/etc/ssl/certs/\n/etc/ssl/private/\n```\n\n3. **Log files** (if needed):\n```bash\n/var/log/nginx/\n```\n\n### Backup Script\n\n```bash\n#!/bin/bash\n# backup-nginx.sh\n\nBACKUP_DIR=\"/backup/nginx/$(date +%Y%m%d_%H%M%S)\"\nmkdir -p \"$BACKUP_DIR\"\n\n# Backup nginx configuration\ntar czf \"$BACKUP_DIR/nginx-config.tar.gz\" \\\n    /etc/nginx/ \\\n    --exclude='*.log' \\\n    --exclude='*.pid'\n\n# Backup SSL certificates\nif [ -d /etc/letsencrypt ]; then\n    tar czf \"$BACKUP_DIR/letsencrypt.tar.gz\" /etc/letsencrypt/\nfi\n\n# Save package version\nnginx -v 2\u003e\u00261 | tee \"$BACKUP_DIR/nginx-version.txt\"\n\n# Test configuration backup\ntar -tzf \"$BACKUP_DIR/nginx-config.tar.gz\" \u003e \"$BACKUP_DIR/backup-contents.txt\"\n\necho \"Backup completed: $BACKUP_DIR\"\n```\n\n### Restore Script\n\n```bash\n#!/bin/bash\n# restore-nginx.sh\n\nBACKUP_DIR=\"$1\"\nif [ -z \"$BACKUP_DIR\" ]; then\n    echo \"Usage: $0 \u003cbackup-directory\u003e\"\n    exit 1\nfi\n\n# Stop nginx\nsudo systemctl stop nginx\n\n# Restore configuration\nsudo tar xzf \"$BACKUP_DIR/nginx-config.tar.gz\" -C /\n\n# Restore SSL certificates\nif [ -f \"$BACKUP_DIR/letsencrypt.tar.gz\" ]; then\n    sudo tar xzf \"$BACKUP_DIR/letsencrypt.tar.gz\" -C /\nfi\n\n# Test configuration\nsudo nginx -t\n\nif [ $? -eq 0 ]; then\n    # Start nginx if config is valid\n    sudo systemctl start nginx\n    echo \"Restore completed successfully\"\nelse\n    echo \"Configuration test failed! Please check the configuration\"\n    exit 1\nfi\n```\n\n## Troubleshooting\n\n### Common Issues\n\n1. **Port 80/443 already in use**:\n```bash\n# Find process using port\nsudo ss -tlnp | grep :80\nsudo lsof -i :80\n\n# Stop conflicting service (e.g., Apache)\nsudo systemctl stop apache2\nsudo systemctl disable apache2\n```\n\n2. **Permission denied errors**:\n```bash\n# Check nginx user\nps aux | grep nginx\n\n# Fix ownership\nsudo chown -R nginx:nginx /var/cache/nginx\nsudo chown -R nginx:nginx /var/log/nginx\n\n# SELinux issues (RHEL/CentOS)\nsudo semanage port -l | grep http_port_t\nsudo setsebool -P httpd_can_network_connect 1\n```\n\n3. **502 Bad Gateway**:\n```bash\n# Check upstream service\ncurl -I http://localhost:3000\n\n# Check nginx error log\nsudo tail -f /var/log/nginx/error.log\n\n# Verify socket permissions (PHP-FPM example)\nls -la /var/run/php/php8.1-fpm.sock\n```\n\n4. **SSL certificate issues**:\n```bash\n# Test SSL configuration\nopenssl s_client -connect example.com:443\n\n# Verify certificate\nsudo nginx -t\n\n# Check certificate expiry\necho | openssl s_client -servername example.com -connect example.com:443 2\u003e/dev/null | openssl x509 -noout -dates\n```\n\n### Debug Mode\n\n```nginx\n# Enable debug logging\nerror_log /var/log/nginx/error.log debug;\n\n# Debug specific module\nerror_log /var/log/nginx/error.log debug_http;\n\n# Debug rewrite rules\nrewrite_log on;\nerror_log /var/log/nginx/rewrite.log notice;\n```\n\n## Maintenance\n\n### Update Procedures\n\n```bash\n# RHEL/CentOS/Rocky/AlmaLinux\nsudo dnf check-update nginx\nsudo dnf update nginx\n\n# Debian/Ubuntu\nsudo apt update\nsudo apt upgrade nginx\n\n# Arch Linux\nsudo pacman -Syu nginx\n\n# Alpine Linux\napk update\napk upgrade nginx\n\n# openSUSE\nsudo zypper update nginx\n\n# FreeBSD\npkg update\npkg upgrade nginx\n\n# Always test configuration after update\nsudo nginx -t\nsudo systemctl reload nginx\n```\n\n### Log Rotation\n\n```bash\n# Default logrotate configuration\n# /etc/logrotate.d/nginx\n/var/log/nginx/*.log {\n    daily\n    missingok\n    rotate 14\n    compress\n    delaycompress\n    notifempty\n    create 0640 nginx adm\n    sharedscripts\n    prerotate\n        if [ -d /etc/logrotate.d/httpd-prerotate ]; then \\\n            run-parts /etc/logrotate.d/httpd-prerotate; \\\n        fi\n    endscript\n    postrotate\n        invoke-rc.d nginx rotate \u003e/dev/null 2\u003e\u00261\n    endscript\n}\n```\n\n### Performance Monitoring\n\n```bash\n# Monitor nginx processes\nhtop -p $(pgrep -d, nginx)\n\n# Check memory usage\nps aux | grep nginx | awk '{sum+=$6} END {print \"Total RSS: \" sum/1024 \" MB\"}'\n\n# Monitor connections\nwatch -n 1 'ss -tan | grep :80 | wc -l'\n\n# Check open files\nsudo lsof -u nginx | wc -l\n```\n\n## Integration Examples\n\n### PHP-FPM Integration\n\n```nginx\n# PHP-FPM upstream\nupstream php-fpm {\n    server unix:/var/run/php/php8.1-fpm.sock;\n}\n\nserver {\n    location ~ \\.php$ {\n        try_files $uri =404;\n        fastcgi_split_path_info ^(.+\\.php)(/.+)$;\n        fastcgi_pass php-fpm;\n        fastcgi_index index.php;\n        fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;\n        include fastcgi_params;\n        \n        # Performance\n        fastcgi_buffer_size 16k;\n        fastcgi_buffers 4 16k;\n    }\n}\n```\n\n### Node.js Application\n\n```nginx\nupstream nodejs_app {\n    server 127.0.0.1:3000;\n    keepalive 64;\n}\n\nserver {\n    location / {\n        proxy_pass http://nodejs_app;\n        proxy_http_version 1.1;\n        proxy_set_header Upgrade $http_upgrade;\n        proxy_set_header Connection 'upgrade';\n        proxy_set_header Host $host;\n        proxy_cache_bypass $http_upgrade;\n        proxy_set_header X-Real-IP $remote_addr;\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n        proxy_set_header X-Forwarded-Proto $scheme;\n    }\n}\n```\n\n### Python/Gunicorn Integration\n\n```nginx\nupstream gunicorn_app {\n    server unix:/run/gunicorn.sock fail_timeout=0;\n}\n\nserver {\n    location / {\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n        proxy_set_header X-Forwarded-Proto $scheme;\n        proxy_set_header Host $http_host;\n        proxy_redirect off;\n        proxy_pass http://gunicorn_app;\n    }\n    \n    location /static/ {\n        alias /var/www/app/static/;\n        expires 30d;\n        add_header Cache-Control \"public, immutable\";\n    }\n}\n```\n\n### Ruby on Rails\n\n```nginx\nupstream rails_app {\n    server unix:/var/www/app/shared/sockets/puma.sock fail_timeout=0;\n}\n\nserver {\n    root /var/www/app/current/public;\n    \n    location / {\n        try_files $uri @rails_app;\n    }\n    \n    location @rails_app {\n        proxy_pass http://rails_app;\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n        proxy_set_header X-Forwarded-Proto $scheme;\n        proxy_set_header Host $http_host;\n        proxy_redirect off;\n    }\n    \n    location ~ ^/(assets|packs)/ {\n        gzip_static on;\n        expires max;\n        add_header Cache-Control public;\n    }\n}\n```\n\n### WebSocket Support\n\n```nginx\nmap $http_upgrade $connection_upgrade {\n    default upgrade;\n    '' close;\n}\n\nupstream websocket {\n    server 127.0.0.1:8080;\n}\n\nserver {\n    location /ws {\n        proxy_pass http://websocket;\n        proxy_http_version 1.1;\n        proxy_set_header Upgrade $http_upgrade;\n        proxy_set_header Connection $connection_upgrade;\n        proxy_set_header Host $host;\n        proxy_set_header X-Real-IP $remote_addr;\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n        proxy_set_header X-Forwarded-Proto $scheme;\n        \n        # Timeouts\n        proxy_connect_timeout 7d;\n        proxy_send_timeout 7d;\n        proxy_read_timeout 7d;\n    }\n}\n```\n\n## Additional Resources\n\n- [Official Documentation](https://nginx.org/en/docs/)\n- [GitHub Repository](https://github.com/nginx/nginx)\n- [NGINX Wiki](https://www.nginx.com/resources/wiki/)\n- [NGINX Config Generator](https://www.digitalocean.com/community/tools/nginx)\n- [Community Forum](https://forum.nginx.org/)\n- [Security Advisories](https://nginx.org/en/security_advisories.html)\n- [Module Registry](https://www.nginx.com/resources/wiki/modules/)\n\n---\n\n**Note:** This guide is part of the [HowToMgr](https://howtomgr.github.io) collection. Always refer to official documentation for the most up-to-date information.","readmeHtml":"\u003ch1 id=\"nginx-installation-guide\" class=\"mobile-header\"\u003eNGINX Installation Guide\u003c/h1\u003e\n\u003cp class=\"mobile-paragraph\"\u003eNGINX is a free and open-source web server, reverse proxy, load balancer, and HTTP cache. Originally written by Igor Sysoev to solve the C10K problem, it's now one of the most popular web servers in the world. NGINX serves as a FOSS alternative to commercial solutions like F5 BIG-IP, Citrix ADC, or proprietary CDNs, offering enterprise-grade performance and reliability without licensing costs.\u003c/p\u003e\n\u003ch2 id=\"prerequisites\" class=\"mobile-header\"\u003ePrerequisites\u003c/h2\u003e\n\u003cli class=\"mobile-list-item\"\u003e\u003cstrong\u003eHardware Requirements\u003c/strong\u003e:\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eCPU: 1 core minimum (2+ cores recommended for high traffic)\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eRAM: 512MB minimum (2GB+ recommended for production)\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eStorage: 100MB for installation (more for logs and cache)\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003e\u003cstrong\u003eOperating System\u003c/strong\u003e: Linux, BSD, macOS, or Windows\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003e\u003cstrong\u003eNetwork Requirements\u003c/strong\u003e:\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003ePort 80 (HTTP) and/or 443 (HTTPS)\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eAdditional ports for specific applications\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003e\u003cstrong\u003eDependencies\u003c/strong\u003e:\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003ePCRE library (for regular expressions)\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003ezlib library (for gzip compression)\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eOpenSSL library (for SSL/TLS support)\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003e\u003cstrong\u003eSystem Access\u003c/strong\u003e: root or sudo privileges required\u003c/li\u003e\n\u003ch2 id=\"installation\" class=\"mobile-header\"\u003eInstallation\u003c/h2\u003e\n\u003ch3 id=\"rhelcentosrocky-linuxalmalinux\" class=\"mobile-header\"\u003eRHEL/CentOS/Rocky Linux/AlmaLinux\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# RHEL/CentOS 7\nsudo yum install -y epel-release\nsudo yum install -y nginx\n\n# RHEL/CentOS/Rocky/AlmaLinux 8+\nsudo dnf install -y epel-release\nsudo dnf install -y nginx\n\n# Official NGINX repository (recommended for latest stable)\nsudo tee /etc/yum.repos.d/nginx.repo \u0026lt;\u0026lt;\u0026#039;EOF\u0026#039;\n[nginx-stable]\nname=nginx stable repo\nbaseurl=http://nginx.org/packages/centos/$releasever/$basearch/\ngpgcheck=1\nenabled=1\ngpgkey=https://nginx.org/keys/nginx_signing.key\nmodule_hotfixes=true\nEOF\n\n# Install from official repository\nsudo dnf install -y nginx\n\n# Enable and start service\nsudo systemctl enable --now nginx\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"debianubuntu\" class=\"mobile-header\"\u003eDebian/Ubuntu\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Distribution packages\nsudo apt update\nsudo apt install -y nginx\n\n# Official NGINX repository (recommended for latest stable)\n# Install prerequisites\nsudo apt install -y curl gnupg2 ca-certificates lsb-release debian-archive-keyring\n\n# Add NGINX signing key\ncurl https://nginx.org/keys/nginx_signing.key | gpg --dearmor \\\n    | sudo tee /usr/share/keyrings/nginx-archive-keyring.gpg \u0026gt;/dev/null\n\n# Add repository\necho \u0026quot;deb [signed-by=/usr/share/keyrings/nginx-archive-keyring.gpg] \\\n    http://nginx.org/packages/ubuntu `lsb_release -cs` nginx\u0026quot; \\\n    | sudo tee /etc/apt/sources.list.d/nginx.list\n\n# Install nginx\nsudo apt update\nsudo apt install -y nginx\n\n# Enable and start service\nsudo systemctl enable --now nginx\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"arch-linux\" class=\"mobile-header\"\u003eArch Linux\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Install nginx from official repositories\nsudo pacman -S nginx\n\n# Optional: Install additional modules\nsudo pacman -S nginx-mod-brotli nginx-mod-headers-more nginx-mod-naxsi\n\n# For GeoIP support\nsudo pacman -S nginx-mod-geoip2\n\n# Enable and start service\nsudo systemctl enable --now nginx\n\n# Install mainline version from AUR\nyay -S nginx-mainline\n\n# Configuration location: /etc/nginx/\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"alpine-linux\" class=\"mobile-header\"\u003eAlpine Linux\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Install nginx\napk add --no-cache nginx\n\n# Install additional modules\napk add --no-cache nginx-mod-http-lua nginx-mod-stream nginx-mod-http-geoip2\n\n# Create required directories\nmkdir -p /run/nginx /var/lib/nginx/tmp\n\n# Create nginx user if not exists\nadduser -D -H -s /sbin/nologin -G nginx -g nginx nginx\n\n# Enable and start service\nrc-update add nginx default\nrc-service nginx start\n\n# Configuration location: /etc/nginx/\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"opensusesles\" class=\"mobile-header\"\u003eopenSUSE/SLES\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# openSUSE Leap/Tumbleweed\nsudo zypper install -y nginx\n\n# Install additional modules\nsudo zypper install -y nginx-module-geoip nginx-module-image-filter\n\n# SLES 15\nsudo SUSEConnect -p sle-module-web-scripting/15.5/x86_64\nsudo zypper install -y nginx\n\n# Enable and start service\nsudo systemctl enable --now nginx\n\n# Configuration location: /etc/nginx/\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"macos\" class=\"mobile-header\"\u003emacOS\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Using Homebrew\nbrew install nginx\n\n# Start as service\nbrew services start nginx\n\n# Or run manually\nnginx\n\n# Configuration location: /usr/local/etc/nginx/\n# Alternative: /opt/homebrew/etc/nginx/ (Apple Silicon)\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"freebsd\" class=\"mobile-header\"\u003eFreeBSD\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Using pkg\npkg install nginx\n\n# Enable in rc.conf\necho \u0026#039;nginx_enable=\u0026quot;YES\u0026quot;\u0026#039; \u0026gt;\u0026gt; /etc/rc.conf\n\n# Start service\nservice nginx start\n\n# Configuration location: /usr/local/etc/nginx/\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"windows\" class=\"mobile-header\"\u003eWindows\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"powershell\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003epowershell\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-powershell\"\u003e# Method 1: Using Chocolatey\nchoco install nginx\n\n# Method 2: Using Scoop\nscoop install nginx\n\n# Method 3: Manual installation\n# Download from http://nginx.org/en/download.html\n# Extract to C:\\nginx\n\n# Start nginx\ncd C:\\nginx\nstart nginx\n\n# Install as Windows service using NSSM\nnssm install nginx C:\\nginx\\nginx.exe\nnssm set nginx AppDirectory C:\\nginx\nnssm start nginx\n\n# Configuration location: C:\\nginx\\conf\\\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"initial-configuration\" class=\"mobile-header\"\u003eInitial Configuration\u003c/h2\u003e\n\u003ch3 id=\"first-run-setup\" class=\"mobile-header\"\u003eFirst-Run Setup\u003c/h3\u003e\n\u003cp class=\"mobile-paragraph\"\u003e1. \u003cstrong\u003eCreate nginx user\u003c/strong\u003e (if not created by package):\u003c/p\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Linux systems\nsudo useradd -r -d /var/cache/nginx -s /sbin/nologin -c \u0026quot;nginx user\u0026quot; nginx\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003cp class=\"mobile-paragraph\"\u003e2. \u003cstrong\u003eDefault configuration locations\u003c/strong\u003e:\u003c/p\u003e\n\u003cli class=\"mobile-list-item\"\u003eRHEL/CentOS/Rocky/AlmaLinux: \u003ccode class=\"mobile-inline-code\"\u003e/etc/nginx/nginx.conf\u003c/code\u003e\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eDebian/Ubuntu: \u003ccode class=\"mobile-inline-code\"\u003e/etc/nginx/nginx.conf\u003c/code\u003e\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eArch Linux: \u003ccode class=\"mobile-inline-code\"\u003e/etc/nginx/nginx.conf\u003c/code\u003e\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eAlpine Linux: \u003ccode class=\"mobile-inline-code\"\u003e/etc/nginx/nginx.conf\u003c/code\u003e\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eopenSUSE/SLES: \u003ccode class=\"mobile-inline-code\"\u003e/etc/nginx/nginx.conf\u003c/code\u003e\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003emacOS: \u003ccode class=\"mobile-inline-code\"\u003e/usr/local/etc/nginx/nginx.conf\u003c/code\u003e\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eFreeBSD: \u003ccode class=\"mobile-inline-code\"\u003e/usr/local/etc/nginx/nginx.conf\u003c/code\u003e\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eWindows: \u003ccode class=\"mobile-inline-code\"\u003eC:\\nginx\\conf\\nginx.conf\u003c/code\u003e\u003c/li\u003e\n\u003cp class=\"mobile-paragraph\"\u003e3. \u003cstrong\u003eEssential settings to change\u003c/strong\u003e:\u003c/p\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"nginx\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003enginx\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-nginx\"\u003e# /etc/nginx/nginx.conf\nuser nginx;  # Run as non-root user\nworker_processes auto;  # Auto-detect CPU cores\nerror_log /var/log/nginx/error.log warn;\npid /var/run/nginx.pid;\n\nevents {\n    worker_connections 1024;  # Increase for high traffic\n    use epoll;  # Linux only, efficient connection method\n}\n\nhttp {\n    # Hide nginx version\n    server_tokens off;\n    \n    # Basic security headers\n    add_header X-Frame-Options \u0026quot;SAMEORIGIN\u0026quot; always;\n    add_header X-Content-Type-Options \u0026quot;nosniff\u0026quot; always;\n    add_header X-XSS-Protection \u0026quot;1; mode=block\u0026quot; always;\n    \n    # Remove default server block\n    # Create site-specific configs in /etc/nginx/conf.d/\n}\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"testing-initial-setup\" class=\"mobile-header\"\u003eTesting Initial Setup\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Test configuration syntax\nsudo nginx -t\n\n# Check nginx version and modules\nnginx -V\n\n# Verify nginx is listening\nsudo ss -tlnp | grep :80\n\n# Test with curl\ncurl -I http://localhost\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003cp class=\"mobile-paragraph\"\u003e\u003cstrong\u003eWARNING:\u003c/strong\u003e Remove or modify the default server block to prevent information disclosure!\u003c/p\u003e\n\u003ch2 id=\"service-management\" class=\"mobile-header\"\u003eService Management\u003c/h2\u003e\n\u003ch3 id=\"systemd-rhel-debian-ubuntu-arch-opensuse\" class=\"mobile-header\"\u003esystemd (RHEL, Debian, Ubuntu, Arch, openSUSE)\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Enable nginx to start on boot\nsudo systemctl enable nginx\n\n# Start nginx\nsudo systemctl start nginx\n\n# Stop nginx\nsudo systemctl stop nginx\n\n# Restart nginx\nsudo systemctl restart nginx\n\n# Reload configuration without downtime\nsudo systemctl reload nginx\n\n# Check status\nsudo systemctl status nginx\n\n# View logs\nsudo journalctl -u nginx -f\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"openrc-alpine-linux\" class=\"mobile-header\"\u003eOpenRC (Alpine Linux)\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Enable nginx to start on boot\nrc-update add nginx default\n\n# Start nginx\nrc-service nginx start\n\n# Stop nginx\nrc-service nginx stop\n\n# Restart nginx\nrc-service nginx restart\n\n# Reload configuration\nrc-service nginx reload\n\n# Check status\nrc-service nginx status\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"rcd-freebsd\" class=\"mobile-header\"\u003erc.d (FreeBSD)\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Enable in /etc/rc.conf\necho \u0026#039;nginx_enable=\u0026quot;YES\u0026quot;\u0026#039; \u0026gt;\u0026gt; /etc/rc.conf\n\n# Start nginx\nservice nginx start\n\n# Stop nginx\nservice nginx stop\n\n# Restart nginx\nservice nginx restart\n\n# Reload configuration\nservice nginx reload\n\n# Check status\nservice nginx status\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"launchd-macos\" class=\"mobile-header\"\u003elaunchd (macOS)\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Using Homebrew services\nbrew services start nginx\nbrew services stop nginx\nbrew services restart nginx\n\n# Manual launchd control\nsudo launchctl load /Library/LaunchDaemons/homebrew.mxcl.nginx.plist\nsudo launchctl unload /Library/LaunchDaemons/homebrew.mxcl.nginx.plist\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"windows-service-manager\" class=\"mobile-header\"\u003eWindows Service Manager\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"powershell\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003epowershell\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-powershell\"\u003e# Using NSSM\nnssm start nginx\nnssm stop nginx\nnssm restart nginx\n\n# Using nginx directly\nnginx -s stop\nnginx -s quit  # Graceful shutdown\nnginx -s reload\nnginx -s reopen  # Reopen log files\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"advanced-configuration\" class=\"mobile-header\"\u003eAdvanced Configuration\u003c/h2\u003e\n\u003ch3 id=\"main-configuration-structure\" class=\"mobile-header\"\u003eMain Configuration Structure\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"nginx\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003enginx\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-nginx\"\u003e# /etc/nginx/nginx.conf\nuser nginx;\nworker_processes auto;\nworker_cpu_affinity auto;\nerror_log /var/log/nginx/error.log warn;\npid /var/run/nginx.pid;\n\n# Load dynamic modules\nload_module modules/ngx_http_geoip2_module.so;\n\nevents {\n    worker_connections 4096;\n    use epoll;\n    multi_accept on;\n}\n\nhttp {\n    include /etc/nginx/mime.types;\n    default_type application/octet-stream;\n\n    # Logging\n    log_format main \u0026#039;$remote_addr - $remote_user [$time_local] \u0026quot;$request\u0026quot; \u0026#039;\n                    \u0026#039;$status $body_bytes_sent \u0026quot;$http_referer\u0026quot; \u0026#039;\n                    \u0026#039;\u0026quot;$http_user_agent\u0026quot; \u0026quot;$http_x_forwarded_for\u0026quot;\u0026#039;;\n    \n    access_log /var/log/nginx/access.log main buffer=16k;\n\n    # Performance\n    sendfile on;\n    tcp_nopush on;\n    tcp_nodelay on;\n    keepalive_timeout 65;\n    types_hash_max_size 2048;\n    client_max_body_size 100M;\n\n    # Gzip compression\n    gzip on;\n    gzip_vary on;\n    gzip_proxied any;\n    gzip_comp_level 6;\n    gzip_types text/plain text/css text/xml text/javascript \n               application/json application/javascript application/xml+rss \n               application/rss+xml application/atom+xml image/svg+xml;\n\n    # SSL configuration\n    ssl_protocols TLSv1.2 TLSv1.3;\n    ssl_ciphers ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384;\n    ssl_prefer_server_ciphers off;\n    ssl_session_cache shared:SSL:10m;\n    ssl_session_timeout 10m;\n    ssl_session_tickets off;\n    ssl_stapling on;\n    ssl_stapling_verify on;\n\n    # Include server blocks\n    include /etc/nginx/conf.d/*.conf;\n    include /etc/nginx/sites-enabled/*;\n}\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"virtual-host-example\" class=\"mobile-header\"\u003eVirtual Host Example\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"nginx\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003enginx\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-nginx\"\u003e# /etc/nginx/conf.d/example.com.conf\nserver {\n    listen 80;\n    listen [::]:80;\n    server_name example.com www.example.com;\n    \n    # Redirect to HTTPS\n    return 301 https://$server_name$request_uri;\n}\n\nserver {\n    listen 443 ssl http2;\n    listen [::]:443 ssl http2;\n    server_name example.com www.example.com;\n\n    # SSL configuration\n    ssl_certificate /etc/letsencrypt/live/example.com/fullchain.pem;\n    ssl_certificate_key /etc/letsencrypt/live/example.com/privkey.pem;\n    ssl_trusted_certificate /etc/letsencrypt/live/example.com/chain.pem;\n\n    # Security headers\n    add_header Strict-Transport-Security \u0026quot;max-age=63072000\u0026quot; always;\n    add_header X-Frame-Options \u0026quot;DENY\u0026quot; always;\n    add_header X-Content-Type-Options \u0026quot;nosniff\u0026quot; always;\n    add_header X-XSS-Protection \u0026quot;1; mode=block\u0026quot; always;\n    add_header Referrer-Policy \u0026quot;no-referrer-when-downgrade\u0026quot; always;\n    add_header Content-Security-Policy \u0026quot;default-src \u0026#039;self\u0026#039; http: https: data: blob: \u0026#039;unsafe-inline\u0026#039;\u0026quot; always;\n\n    # Logging\n    access_log /var/log/nginx/example.com.access.log;\n    error_log /var/log/nginx/example.com.error.log;\n\n    # Root directory\n    root /var/www/example.com/public;\n    index index.html index.htm index.php;\n\n    # Locations\n    location / {\n        try_files $uri $uri/ =404;\n    }\n\n    # PHP-FPM configuration\n    location ~ \\.php$ {\n        fastcgi_pass unix:/var/run/php/php8.1-fpm.sock;\n        fastcgi_index index.php;\n        fastcgi_param SCRIPT_FILENAME $realpath_root$fastcgi_script_name;\n        include fastcgi_params;\n    }\n\n    # Deny access to hidden files\n    location ~ /\\. {\n        deny all;\n    }\n}\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"reverse-proxy-setup\" class=\"mobile-header\"\u003eReverse Proxy Setup\u003c/h2\u003e\n\u003ch3 id=\"basic-reverse-proxy\" class=\"mobile-header\"\u003eBasic Reverse Proxy\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"nginx\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003enginx\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-nginx\"\u003e# /etc/nginx/conf.d/app.example.com.conf\nupstream backend {\n    server 127.0.0.1:3000;\n    server 127.0.0.1:3001 backup;\n    keepalive 32;\n}\n\nserver {\n    listen 80;\n    server_name app.example.com;\n    return 301 https://$server_name$request_uri;\n}\n\nserver {\n    listen 443 ssl http2;\n    server_name app.example.com;\n\n    ssl_certificate /etc/letsencrypt/live/app.example.com/fullchain.pem;\n    ssl_certificate_key /etc/letsencrypt/live/app.example.com/privkey.pem;\n\n    location / {\n        proxy_pass http://backend;\n        proxy_http_version 1.1;\n        \n        # Headers\n        proxy_set_header Host $host;\n        proxy_set_header X-Real-IP $remote_addr;\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n        proxy_set_header X-Forwarded-Proto $scheme;\n        \n        # Timeouts\n        proxy_connect_timeout 60s;\n        proxy_send_timeout 60s;\n        proxy_read_timeout 60s;\n        \n        # Websocket support\n        proxy_set_header Upgrade $http_upgrade;\n        proxy_set_header Connection \u0026quot;upgrade\u0026quot;;\n    }\n}\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"load-balancing-methods\" class=\"mobile-header\"\u003eLoad Balancing Methods\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"nginx\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003enginx\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-nginx\"\u003e# Round-robin (default)\nupstream backend {\n    server backend1.example.com;\n    server backend2.example.com;\n    server backend3.example.com;\n}\n\n# Least connections\nupstream backend {\n    least_conn;\n    server backend1.example.com;\n    server backend2.example.com;\n    server backend3.example.com;\n}\n\n# IP hash (session persistence)\nupstream backend {\n    ip_hash;\n    server backend1.example.com;\n    server backend2.example.com;\n    server backend3.example.com;\n}\n\n# Weighted distribution\nupstream backend {\n    server backend1.example.com weight=3;\n    server backend2.example.com weight=2;\n    server backend3.example.com weight=1;\n}\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"security-configuration\" class=\"mobile-header\"\u003eSecurity Configuration\u003c/h2\u003e\n\u003ch3 id=\"basic-security-hardening\" class=\"mobile-header\"\u003eBasic Security Hardening\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"nginx\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003enginx\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-nginx\"\u003e# Global security settings in nginx.conf\nhttp {\n    # Hide nginx version\n    server_tokens off;\n    \n    # Limit request methods\n    if ($request_method !~ ^(GET|HEAD|POST|PUT|DELETE|OPTIONS)$) {\n        return 405;\n    }\n    \n    # Limit buffer sizes\n    client_body_buffer_size 1K;\n    client_header_buffer_size 1k;\n    client_max_body_size 1M;\n    large_client_header_buffers 2 1k;\n    \n    # Timeouts\n    client_body_timeout 10;\n    client_header_timeout 10;\n    keepalive_timeout 5 5;\n    send_timeout 10;\n    \n    # Rate limiting zones\n    limit_req_zone $binary_remote_addr zone=general:10m rate=10r/s;\n    limit_req_zone $binary_remote_addr zone=login:10m rate=3r/m;\n    limit_conn_zone $binary_remote_addr zone=addr:10m;\n}\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"ssltls-best-practices\" class=\"mobile-header\"\u003eSSL/TLS Best Practices\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"nginx\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003enginx\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-nginx\"\u003e# Modern SSL configuration\nssl_protocols TLSv1.2 TLSv1.3;\nssl_ciphers ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-CHACHA20-POLY1305:ECDHE-RSA-CHACHA20-POLY1305:DHE-RSA-AES128-GCM-SHA256:DHE-RSA-AES256-GCM-SHA384;\nssl_prefer_server_ciphers off;\n\n# Enable HSTS\nadd_header Strict-Transport-Security \u0026quot;max-age=63072000; includeSubDomains; preload\u0026quot; always;\n\n# SSL session caching\nssl_session_cache shared:SSL:50m;\nssl_session_timeout 1d;\nssl_session_tickets off;\n\n# OCSP stapling\nssl_stapling on;\nssl_stapling_verify on;\nresolver 8.8.8.8 8.8.4.4 valid=300s;\nresolver_timeout 5s;\n\n# Diffie-Hellman parameters\nssl_dhparam /etc/nginx/dhparam.pem;\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"firewall-rules\" class=\"mobile-header\"\u003eFirewall Rules\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# UFW (Ubuntu/Debian)\nsudo ufw allow \u0026#039;Nginx Full\u0026#039;\nsudo ufw allow 80/tcp\nsudo ufw allow 443/tcp\n\n# firewalld (RHEL/CentOS/openSUSE)\nsudo firewall-cmd --permanent --add-service=http\nsudo firewall-cmd --permanent --add-service=https\nsudo firewall-cmd --reload\n\n# iptables\nsudo iptables -A INPUT -p tcp --dport 80 -j ACCEPT\nsudo iptables -A INPUT -p tcp --dport 443 -j ACCEPT\nsudo iptables-save \u0026gt; /etc/iptables/rules.v4\n\n# pf (FreeBSD)\n# Add to /etc/pf.conf\npass in on $ext_if proto tcp from any to any port {80, 443}\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"modsecurity-waf-integration\" class=\"mobile-header\"\u003eModSecurity WAF Integration\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Install ModSecurity\n# Debian/Ubuntu\nsudo apt install -y libmodsecurity3 libmodsecurity-nginx\n\n# Build nginx with ModSecurity support\n./configure --add-dynamic-module=/path/to/ModSecurity-nginx\n\n# Load module in nginx.conf\nload_module modules/ngx_http_modsecurity_module.so;\n\n# Enable in server block\nmodsecurity on;\nmodsecurity_rules_file /etc/nginx/modsec/main.conf;\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"database-setup\" class=\"mobile-header\"\u003eDatabase Setup\u003c/h2\u003e\n\u003cp class=\"mobile-paragraph\"\u003eNot applicable for NGINX as it doesn't require a database. However, NGINX can be configured to work with various database-backed applications through reverse proxy configurations.\u003c/p\u003e\n\u003ch2 id=\"performance-optimization\" class=\"mobile-header\"\u003ePerformance Optimization\u003c/h2\u003e\n\u003ch3 id=\"system-tuning\" class=\"mobile-header\"\u003eSystem Tuning\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# /etc/sysctl.conf\n# Increase system limits\nnet.core.somaxconn = 65535\nnet.core.netdev_max_backlog = 65535\nnet.ipv4.tcp_max_syn_backlog = 65535\nnet.ipv4.tcp_fin_timeout = 30\nnet.ipv4.tcp_keepalive_time = 1200\nnet.ipv4.tcp_max_tw_buckets = 5000\nnet.ipv4.tcp_tw_reuse = 1\nnet.ipv4.tcp_slow_start_after_idle = 0\n\n# File descriptors\nfs.file-max = 65535\n\n# Apply changes\nsudo sysctl -p\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"nginx-optimization\" class=\"mobile-header\"\u003eNGINX Optimization\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"nginx\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003enginx\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-nginx\"\u003e# Worker configuration\nworker_processes auto;\nworker_cpu_affinity auto;\nworker_rlimit_nofile 65535;\n\nevents {\n    worker_connections 65535;\n    use epoll;\n    multi_accept on;\n}\n\nhttp {\n    # Caching\n    open_file_cache max=200000 inactive=20s;\n    open_file_cache_valid 30s;\n    open_file_cache_min_uses 2;\n    open_file_cache_errors on;\n\n    # Buffer sizes\n    client_body_buffer_size 128k;\n    client_max_body_size 10m;\n    client_header_buffer_size 1k;\n    large_client_header_buffers 4 16k;\n    output_buffers 1 32k;\n    postpone_output 1460;\n\n    # Compression\n    gzip on;\n    gzip_vary on;\n    gzip_proxied any;\n    gzip_comp_level 6;\n    gzip_min_length 1000;\n    gzip_disable \u0026quot;msie6\u0026quot;;\n    gzip_types\n        text/plain\n        text/css\n        text/xml\n        text/javascript\n        application/json\n        application/javascript\n        application/xml+rss\n        application/rss+xml\n        application/atom+xml\n        image/svg+xml;\n}\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"content-caching\" class=\"mobile-header\"\u003eContent Caching\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"nginx\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003enginx\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-nginx\"\u003e# Define cache\nproxy_cache_path /var/cache/nginx levels=1:2 keys_zone=static_cache:10m max_size=1g inactive=60m use_temp_path=off;\n\nserver {\n    location ~* \\.(jpg|jpeg|png|gif|ico|css|js)$ {\n        expires 1y;\n        add_header Cache-Control \u0026quot;public, immutable\u0026quot;;\n        proxy_cache static_cache;\n        proxy_cache_valid 200 60m;\n        proxy_cache_use_stale error timeout invalid_header updating http_500 http_502 http_503 http_504;\n    }\n}\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"monitoring\" class=\"mobile-header\"\u003eMonitoring\u003c/h2\u003e\n\u003ch3 id=\"built-in-status-module\" class=\"mobile-header\"\u003eBuilt-in Status Module\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"nginx\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003enginx\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-nginx\"\u003e# Enable stub_status\nserver {\n    listen 127.0.0.1:8080;\n    server_name localhost;\n    \n    location /nginx_status {\n        stub_status;\n        allow 127.0.0.1;\n        deny all;\n    }\n}\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"access-with-curl\" class=\"mobile-header\"\u003eAccess with curl\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Get basic metrics\ncurl http://127.0.0.1:8080/nginx_status\n\n# Sample output:\n# Active connections: 291\n# server accepts handled requests\n#  16630948 16630948 31070465\n# Reading: 6 Writing: 179 Waiting: 106\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"log-analysis\" class=\"mobile-header\"\u003eLog Analysis\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Top 10 IP addresses\nawk \u0026#039;{print $1}\u0026#039; /var/log/nginx/access.log | sort | uniq -c | sort -rn | head -10\n\n# Response codes distribution\nawk \u0026#039;{print $9}\u0026#039; /var/log/nginx/access.log | sort | uniq -c | sort -rn\n\n# Requests per second\ntail -10000 /var/log/nginx/access.log | awk \u0026#039;{print $4}\u0026#039; | uniq -c\n\n# Slow requests (\u0026gt;1s)\nawk \u0026#039;$11 \u0026gt; 1\u0026#039; /var/log/nginx/access.log\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"prometheus-exporter\" class=\"mobile-header\"\u003ePrometheus Exporter\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Install nginx-prometheus-exporter\nwget https://github.com/nginxinc/nginx-prometheus-exporter/releases/download/v0.11.0/nginx-prometheus-exporter_0.11.0_linux_amd64.tar.gz\ntar xzf nginx-prometheus-exporter_0.11.0_linux_amd64.tar.gz\nsudo mv nginx-prometheus-exporter /usr/local/bin/\n\n# Run exporter\nnginx-prometheus-exporter -nginx.scrape-uri=http://127.0.0.1:8080/nginx_status\n\n# Add to Prometheus config\nscrape_configs:\n  - job_name: \u0026#039;nginx\u0026#039;\n    static_configs:\n      - targets: [\u0026#039;localhost:9113\u0026#039;]\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"backup-and-restore\" class=\"mobile-header\"\u003eBackup and Restore\u003c/h2\u003e\n\u003ch3 id=\"what-to-backup\" class=\"mobile-header\"\u003eWhat to Backup\u003c/h3\u003e\n\u003cp class=\"mobile-paragraph\"\u003e1. \u003cstrong\u003eConfiguration files\u003c/strong\u003e:\u003c/p\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e/etc/nginx/nginx.conf\n/etc/nginx/conf.d/\n/etc/nginx/sites-available/\n/etc/nginx/sites-enabled/\n/etc/nginx/snippets/\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003cp class=\"mobile-paragraph\"\u003e2. \u003cstrong\u003eSSL certificates\u003c/strong\u003e:\u003c/p\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e/etc/letsencrypt/\n/etc/ssl/certs/\n/etc/ssl/private/\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003cp class=\"mobile-paragraph\"\u003e3. \u003cstrong\u003eLog files\u003c/strong\u003e (if needed):\u003c/p\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e/var/log/nginx/\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"backup-script\" class=\"mobile-header\"\u003eBackup Script\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e#!/bin/bash\n# backup-nginx.sh\n\nBACKUP_DIR=\u0026quot;/backup/nginx/$(date +%Y%m%d_%H%M%S)\u0026quot;\nmkdir -p \u0026quot;$BACKUP_DIR\u0026quot;\n\n# Backup nginx configuration\ntar czf \u0026quot;$BACKUP_DIR/nginx-config.tar.gz\u0026quot; \\\n    /etc/nginx/ \\\n    --exclude=\u0026#039;*.log\u0026#039; \\\n    --exclude=\u0026#039;*.pid\u0026#039;\n\n# Backup SSL certificates\nif [ -d /etc/letsencrypt ]; then\n    tar czf \u0026quot;$BACKUP_DIR/letsencrypt.tar.gz\u0026quot; /etc/letsencrypt/\nfi\n\n# Save package version\nnginx -v 2\u0026gt;\u0026amp;1 | tee \u0026quot;$BACKUP_DIR/nginx-version.txt\u0026quot;\n\n# Test configuration backup\ntar -tzf \u0026quot;$BACKUP_DIR/nginx-config.tar.gz\u0026quot; \u0026gt; \u0026quot;$BACKUP_DIR/backup-contents.txt\u0026quot;\n\necho \u0026quot;Backup completed: $BACKUP_DIR\u0026quot;\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"restore-script\" class=\"mobile-header\"\u003eRestore Script\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e#!/bin/bash\n# restore-nginx.sh\n\nBACKUP_DIR=\u0026quot;$1\u0026quot;\nif [ -z \u0026quot;$BACKUP_DIR\u0026quot; ]; then\n    echo \u0026quot;Usage: $0 \u0026lt;backup-directory\u0026gt;\u0026quot;\n    exit 1\nfi\n\n# Stop nginx\nsudo systemctl stop nginx\n\n# Restore configuration\nsudo tar xzf \u0026quot;$BACKUP_DIR/nginx-config.tar.gz\u0026quot; -C /\n\n# Restore SSL certificates\nif [ -f \u0026quot;$BACKUP_DIR/letsencrypt.tar.gz\u0026quot; ]; then\n    sudo tar xzf \u0026quot;$BACKUP_DIR/letsencrypt.tar.gz\u0026quot; -C /\nfi\n\n# Test configuration\nsudo nginx -t\n\nif [ $? -eq 0 ]; then\n    # Start nginx if config is valid\n    sudo systemctl start nginx\n    echo \u0026quot;Restore completed successfully\u0026quot;\nelse\n    echo \u0026quot;Configuration test failed! Please check the configuration\u0026quot;\n    exit 1\nfi\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"troubleshooting\" class=\"mobile-header\"\u003eTroubleshooting\u003c/h2\u003e\n\u003ch3 id=\"common-issues\" class=\"mobile-header\"\u003eCommon Issues\u003c/h3\u003e\n\u003cp class=\"mobile-paragraph\"\u003e1. \u003cstrong\u003ePort 80/443 already in use\u003c/strong\u003e:\u003c/p\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Find process using port\nsudo ss -tlnp | grep :80\nsudo lsof -i :80\n\n# Stop conflicting service (e.g., Apache)\nsudo systemctl stop apache2\nsudo systemctl disable apache2\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003cp class=\"mobile-paragraph\"\u003e2. \u003cstrong\u003ePermission denied errors\u003c/strong\u003e:\u003c/p\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Check nginx user\nps aux | grep nginx\n\n# Fix ownership\nsudo chown -R nginx:nginx /var/cache/nginx\nsudo chown -R nginx:nginx /var/log/nginx\n\n# SELinux issues (RHEL/CentOS)\nsudo semanage port -l | grep http_port_t\nsudo setsebool -P httpd_can_network_connect 1\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003cp class=\"mobile-paragraph\"\u003e3. \u003cstrong\u003e502 Bad Gateway\u003c/strong\u003e:\u003c/p\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Check upstream service\ncurl -I http://localhost:3000\n\n# Check nginx error log\nsudo tail -f /var/log/nginx/error.log\n\n# Verify socket permissions (PHP-FPM example)\nls -la /var/run/php/php8.1-fpm.sock\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003cp class=\"mobile-paragraph\"\u003e4. \u003cstrong\u003eSSL certificate issues\u003c/strong\u003e:\u003c/p\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Test SSL configuration\nopenssl s_client -connect example.com:443\n\n# Verify certificate\nsudo nginx -t\n\n# Check certificate expiry\necho | openssl s_client -servername example.com -connect example.com:443 2\u0026gt;/dev/null | openssl x509 -noout -dates\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"debug-mode\" class=\"mobile-header\"\u003eDebug Mode\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"nginx\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003enginx\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-nginx\"\u003e# Enable debug logging\nerror_log /var/log/nginx/error.log debug;\n\n# Debug specific module\nerror_log /var/log/nginx/error.log debug_http;\n\n# Debug rewrite rules\nrewrite_log on;\nerror_log /var/log/nginx/rewrite.log notice;\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"maintenance\" class=\"mobile-header\"\u003eMaintenance\u003c/h2\u003e\n\u003ch3 id=\"update-procedures\" class=\"mobile-header\"\u003eUpdate Procedures\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# RHEL/CentOS/Rocky/AlmaLinux\nsudo dnf check-update nginx\nsudo dnf update nginx\n\n# Debian/Ubuntu\nsudo apt update\nsudo apt upgrade nginx\n\n# Arch Linux\nsudo pacman -Syu nginx\n\n# Alpine Linux\napk update\napk upgrade nginx\n\n# openSUSE\nsudo zypper update nginx\n\n# FreeBSD\npkg update\npkg upgrade nginx\n\n# Always test configuration after update\nsudo nginx -t\nsudo systemctl reload nginx\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"log-rotation\" class=\"mobile-header\"\u003eLog Rotation\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Default logrotate configuration\n# /etc/logrotate.d/nginx\n/var/log/nginx/*.log {\n    daily\n    missingok\n    rotate 14\n    compress\n    delaycompress\n    notifempty\n    create 0640 nginx adm\n    sharedscripts\n    prerotate\n        if [ -d /etc/logrotate.d/httpd-prerotate ]; then \\\n            run-parts /etc/logrotate.d/httpd-prerotate; \\\n        fi\n    endscript\n    postrotate\n        invoke-rc.d nginx rotate \u0026gt;/dev/null 2\u0026gt;\u0026amp;1\n    endscript\n}\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"performance-monitoring\" class=\"mobile-header\"\u003ePerformance Monitoring\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Monitor nginx processes\nhtop -p $(pgrep -d, nginx)\n\n# Check memory usage\nps aux | grep nginx | awk \u0026#039;{sum+=$6} END {print \u0026quot;Total RSS: \u0026quot; sum/1024 \u0026quot; MB\u0026quot;}\u0026#039;\n\n# Monitor connections\nwatch -n 1 \u0026#039;ss -tan | grep :80 | wc -l\u0026#039;\n\n# Check open files\nsudo lsof -u nginx | wc -l\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"integration-examples\" class=\"mobile-header\"\u003eIntegration Examples\u003c/h2\u003e\n\u003ch3 id=\"php-fpm-integration\" class=\"mobile-header\"\u003ePHP-FPM Integration\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"nginx\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003enginx\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-nginx\"\u003e# PHP-FPM upstream\nupstream php-fpm {\n    server unix:/var/run/php/php8.1-fpm.sock;\n}\n\nserver {\n    location ~ \\.php$ {\n        try_files $uri =404;\n        fastcgi_split_path_info ^(.+\\.php)(/.+)$;\n        fastcgi_pass php-fpm;\n        fastcgi_index index.php;\n        fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;\n        include fastcgi_params;\n        \n        # Performance\n        fastcgi_buffer_size 16k;\n        fastcgi_buffers 4 16k;\n    }\n}\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"nodejs-application\" class=\"mobile-header\"\u003eNode.js Application\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"nginx\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003enginx\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-nginx\"\u003eupstream nodejs_app {\n    server 127.0.0.1:3000;\n    keepalive 64;\n}\n\nserver {\n    location / {\n        proxy_pass http://nodejs_app;\n        proxy_http_version 1.1;\n        proxy_set_header Upgrade $http_upgrade;\n        proxy_set_header Connection \u0026#039;upgrade\u0026#039;;\n        proxy_set_header Host $host;\n        proxy_cache_bypass $http_upgrade;\n        proxy_set_header X-Real-IP $remote_addr;\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n        proxy_set_header X-Forwarded-Proto $scheme;\n    }\n}\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"pythongunicorn-integration\" class=\"mobile-header\"\u003ePython/Gunicorn Integration\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"nginx\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003enginx\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-nginx\"\u003eupstream gunicorn_app {\n    server unix:/run/gunicorn.sock fail_timeout=0;\n}\n\nserver {\n    location / {\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n        proxy_set_header X-Forwarded-Proto $scheme;\n        proxy_set_header Host $http_host;\n        proxy_redirect off;\n        proxy_pass http://gunicorn_app;\n    }\n    \n    location /static/ {\n        alias /var/www/app/static/;\n        expires 30d;\n        add_header Cache-Control \u0026quot;public, immutable\u0026quot;;\n    }\n}\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"ruby-on-rails\" class=\"mobile-header\"\u003eRuby on Rails\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"nginx\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003enginx\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-nginx\"\u003eupstream rails_app {\n    server unix:/var/www/app/shared/sockets/puma.sock fail_timeout=0;\n}\n\nserver {\n    root /var/www/app/current/public;\n    \n    location / {\n        try_files $uri @rails_app;\n    }\n    \n    location @rails_app {\n        proxy_pass http://rails_app;\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n        proxy_set_header X-Forwarded-Proto $scheme;\n        proxy_set_header Host $http_host;\n        proxy_redirect off;\n    }\n    \n    location ~ ^/(assets|packs)/ {\n        gzip_static on;\n        expires max;\n        add_header Cache-Control public;\n    }\n}\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"websocket-support\" class=\"mobile-header\"\u003eWebSocket Support\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"nginx\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003enginx\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-nginx\"\u003emap $http_upgrade $connection_upgrade {\n    default upgrade;\n    \u0026#039;\u0026#039; close;\n}\n\nupstream websocket {\n    server 127.0.0.1:8080;\n}\n\nserver {\n    location /ws {\n        proxy_pass http://websocket;\n        proxy_http_version 1.1;\n        proxy_set_header Upgrade $http_upgrade;\n        proxy_set_header Connection $connection_upgrade;\n        proxy_set_header Host $host;\n        proxy_set_header X-Real-IP $remote_addr;\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n        proxy_set_header X-Forwarded-Proto $scheme;\n        \n        # Timeouts\n        proxy_connect_timeout 7d;\n        proxy_send_timeout 7d;\n        proxy_read_timeout 7d;\n    }\n}\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"additional-resources\" class=\"mobile-header\"\u003eAdditional Resources\u003c/h2\u003e\n\u003cli class=\"mobile-list-item\"\u003e\u003ca href=\"https://nginx.org/en/docs/\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\"\u003eOfficial Documentation\u003c/a\u003e\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003e\u003ca href=\"https://github.com/nginx/nginx\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\"\u003eGitHub Repository\u003c/a\u003e\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003e\u003ca href=\"https://www.nginx.com/resources/wiki/\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\"\u003eNGINX Wiki\u003c/a\u003e\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003e\u003ca href=\"https://www.digitalocean.com/community/tools/nginx\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\"\u003eNGINX Config Generator\u003c/a\u003e\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003e\u003ca href=\"https://forum.nginx.org/\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\"\u003eCommunity Forum\u003c/a\u003e\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003e\u003ca href=\"https://nginx.org/en/security_advisories.html\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\"\u003eSecurity Advisories\u003c/a\u003e\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003e\u003ca href=\"https://www.nginx.com/resources/wiki/modules/\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\"\u003eModule Registry\u003c/a\u003e\u003c/li\u003e\n\u003cp class=\"mobile-paragraph\"\u003e---\u003c/p\u003e\n\u003cp class=\"mobile-paragraph\"\u003e\u003cstrong\u003eNote:\u003c/strong\u003e This guide is part of the \u003ca href=\"https://howtomgr.github.io\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\"\u003eHowToMgr\u003c/a\u003e collection. Always refer to official documentation for the most up-to-date information.\u003c/p\u003e","readTime":"15 min","wordCount":2897,"lastBuilt":"2025-09-14T06:13:05.039Z"},{"name":"traefik","displayName":"Traefik","slug":"traefik","description":"Repo for traefik","category":"web-server","language":null,"stars":0,"forks":0,"topics":[],"githubUrl":"https://github.com/howtomgr/traefik","updatedAt":"2025-09-08T03:17:15Z","createdAt":"2025-09-08T03:17:04Z","readmeRaw":"## 👋 Welcome to traefik 🚀  \n\ntraefik README  \n  \n  \n## Author  \n\n🤖 casjay: [Github](https://github.com/casjay) 🤖  \n","readmeHtml":"\u003ch2 id=\"welcome-to-traefik\" class=\"mobile-header\"\u003e👋 Welcome to traefik 🚀  \u003c/h2\u003e\n\u003cp class=\"mobile-paragraph\"\u003etraefik README  \u003c/p\u003e\n\u003ch2 id=\"author\" class=\"mobile-header\"\u003eAuthor  \u003c/h2\u003e\n\u003cp class=\"mobile-paragraph\"\u003e🤖 casjay: \u003ca href=\"https://github.com/casjay\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\"\u003eGithub\u003c/a\u003e 🤖  \u003c/p\u003e","readTime":"1 min","wordCount":15,"lastBuilt":"2025-09-14T06:13:12.426Z"}]},"__N_SSG":true},"page":"/[category]","query":{"category":"web-server"},"buildId":"Qa3FY_nUAtj8cvSxbxn7x","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>