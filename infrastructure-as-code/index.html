<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8" data-next-head=""/><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes" data-next-head=""/><meta name="theme-color" content="#bd93f9" data-next-head=""/><link rel="icon" href="/favicon.ico" data-next-head=""/><link rel="preconnect" href="https://fonts.googleapis.com" data-next-head=""/><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="true" data-next-head=""/><title class="jsx-6ca0ba86c5b4bb40" data-next-head="">Infrastructure as code Installation Guides - HowToMgr</title><meta name="description" content="1 infrastructure as code installation guides. Infrastructure as code tools and applications" class="jsx-6ca0ba86c5b4bb40" data-next-head=""/><meta name="keywords" content="installation guides, tutorials, linux, docker, kubernetes, mobile-first, responsive" class="jsx-6ca0ba86c5b4bb40" data-next-head=""/><meta property="og:title" content="Infrastructure as code Installation Guides - HowToMgr" class="jsx-6ca0ba86c5b4bb40" data-next-head=""/><meta property="og:description" content="1 infrastructure as code installation guides. Infrastructure as code tools and applications" class="jsx-6ca0ba86c5b4bb40" data-next-head=""/><meta property="og:type" content="website" class="jsx-6ca0ba86c5b4bb40" data-next-head=""/><meta property="og:url" content="https://howtomgr.github.io" class="jsx-6ca0ba86c5b4bb40" data-next-head=""/><meta property="og:image" content="https://howtomgr.github.io/social-preview.png" class="jsx-6ca0ba86c5b4bb40" data-next-head=""/><meta property="twitter:card" content="summary_large_image" class="jsx-6ca0ba86c5b4bb40" data-next-head=""/><meta property="twitter:title" content="Infrastructure as code Installation Guides - HowToMgr" class="jsx-6ca0ba86c5b4bb40" data-next-head=""/><meta property="twitter:description" content="1 infrastructure as code installation guides. Infrastructure as code tools and applications" class="jsx-6ca0ba86c5b4bb40" data-next-head=""/><link rel="dns-prefetch" href="//api.github.com"/><link rel="dns-prefetch" href="//github.com"/><link rel="preload" href="/favicon.ico" as="image"/><meta name="application-name" content="HowToMgr"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="default"/><meta name="apple-mobile-web-app-title" content="HowToMgr"/><meta name="format-detection" content="telephone=no"/><meta name="mobile-web-app-capable" content="yes"/><noscript><style>
            .requires-js { display: none !important; }
            .no-js-message { display: block !important; }
          </style></noscript><link rel="preload" href="/_next/static/css/8f63910774442189.css" as="style"/><link rel="stylesheet" href="/_next/static/css/8f63910774442189.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-42372ed130431b0a.js"></script><script src="/_next/static/chunks/webpack-8cac0b4b405cede1.js" defer=""></script><script src="/_next/static/chunks/framework-a6e0b7e30f98059a.js" defer=""></script><script src="/_next/static/chunks/main-453f16463ca269d8.js" defer=""></script><script src="/_next/static/chunks/pages/_app-2c7289aecf732a54.js" defer=""></script><script src="/_next/static/chunks/473-0e819be9d34ec59b.js" defer=""></script><script src="/_next/static/chunks/pages/%5Bcategory%5D-74bd91863765ea88.js" defer=""></script><script src="/_next/static/LqsI2YPWglIr7mIGTi5lD/_buildManifest.js" defer=""></script><script src="/_next/static/LqsI2YPWglIr7mIGTi5lD/_ssgManifest.js" defer=""></script><style id="__jsx-fba8d10132152d7">.search-box.jsx-fba8d10132152d7{position:relative;width:100%;max-width:500px}.search-input-container.jsx-fba8d10132152d7{position:relative;display:flex;align-items:center}.search-input.jsx-fba8d10132152d7{width:100%;padding:var(--space-3)var(--space-4);padding-right:80px;border:2px solid var(--bg-surface);border-radius:var(--border-radius-lg);background:var(--bg-primary);color:var(--text-primary);font-size:var(--font-base);transition:var(--transition);min-height:48px}.search-input.jsx-fba8d10132152d7:focus{border-color:var(--accent-primary);outline:none;box-shadow:0 0 0 3px rgba(189,147,249,.15)}.search-indicator.jsx-fba8d10132152d7{position:absolute;right:50px;color:var(--text-muted);pointer-events:none}.search-clear.jsx-fba8d10132152d7{position:absolute;right:var(--space-3);background:var(--bg-surface);border:none;border-radius:50%;width:24px;height:24px;display:flex;align-items:center;justify-content:center;cursor:pointer;color:var(--text-muted);font-size:var(--font-sm)}.search-clear.jsx-fba8d10132152d7:hover{background:var(--accent-error);color:var(--bg-primary)}.search-results.jsx-fba8d10132152d7{position:absolute;top:100%;left:0;right:0;background:var(--bg-secondary);border:1px solid var(--bg-surface);border-radius:var(--border-radius-lg);box-shadow:var(--box-shadow-lg);max-height:400px;overflow-y:auto;z-index:var(--z-dropdown);margin-top:var(--space-2)}.search-result-item.jsx-fba8d10132152d7{display:block;padding:var(--space-4);border-bottom:1px solid var(--bg-surface);cursor:pointer;transition:var(--transition);text-decoration:none;color:inherit}.search-result-item.jsx-fba8d10132152d7:last-child{border-bottom:none}.search-result-item.jsx-fba8d10132152d7:hover,.search-result-item.selected.jsx-fba8d10132152d7{background:var(--bg-surface);text-decoration:none;color:inherit}.result-header.jsx-fba8d10132152d7{display:flex;justify-content:space-between;align-items:flex-start;gap:var(--space-3);margin-bottom:var(--space-2)}.result-title.jsx-fba8d10132152d7{color:var(--accent-primary);font-size:var(--font-base);font-weight:600;margin:0}.result-badges.jsx-fba8d10132152d7{display:flex;gap:var(--space-1)}.result-category.jsx-fba8d10132152d7,.result-language.jsx-fba8d10132152d7{padding:var(--space-1)var(--space-2);border-radius:var(--border-radius-sm);font-size:var(--font-xs);font-weight:600;text-transform:uppercase}.result-category.jsx-fba8d10132152d7{background:var(--accent-primary);color:var(--bg-primary)}.result-language.jsx-fba8d10132152d7{background:var(--accent-secondary);color:var(--bg-primary)}.result-description.jsx-fba8d10132152d7{color:var(--text-secondary);font-size:var(--font-sm);margin:0 0 var(--space-2)0;line-height:1.4}.result-meta.jsx-fba8d10132152d7{display:flex;gap:var(--space-3);font-size:var(--font-xs);color:var(--text-muted)}.search-empty.jsx-fba8d10132152d7{padding:var(--space-6)var(--space-4);text-align:center;color:var(--text-secondary)}.empty-icon.jsx-fba8d10132152d7{font-size:var(--font-2xl);margin-bottom:var(--space-3);opacity:.5}.empty-text.jsx-fba8d10132152d7 strong.jsx-fba8d10132152d7{display:block;color:var(--text-primary);margin-bottom:var(--space-2)}.empty-text.jsx-fba8d10132152d7 p.jsx-fba8d10132152d7{margin:0;font-size:var(--font-sm)}@media(max-width:767px){.search-input.jsx-fba8d10132152d7{min-height:52px;font-size:var(--font-base)}.result-header.jsx-fba8d10132152d7{flex-direction:column;align-items:flex-start;gap:var(--space-2)}.result-badges.jsx-fba8d10132152d7{order:-1}}</style><style id="__jsx-6e7ce48e453c7e27">.breadcrumb.jsx-6e7ce48e453c7e27{display:flex;align-items:center;gap:var(--space-2);margin-bottom:var(--space-6);font-size:var(--font-sm);color:var(--text-secondary)}.breadcrumb.jsx-6e7ce48e453c7e27 a.jsx-6e7ce48e453c7e27{color:var(--accent-primary);text-decoration:none}.breadcrumb.jsx-6e7ce48e453c7e27 a.jsx-6e7ce48e453c7e27:hover{text-decoration:underline}.separator.jsx-6e7ce48e453c7e27{color:var(--text-muted)}.current.jsx-6e7ce48e453c7e27{color:var(--text-primary);font-weight:500}.category-header.jsx-6e7ce48e453c7e27{text-align:center;margin-bottom:var(--space-8);padding:var(--space-6)0;background:var(--bg-secondary);border-radius:var(--border-radius-lg)}.category-icon.jsx-6e7ce48e453c7e27{font-size:3rem;margin-bottom:var(--space-4)}.category-title.jsx-6e7ce48e453c7e27{color:var(--accent-primary);font-size:var(--font-3xl);margin-bottom:var(--space-4)}.category-description.jsx-6e7ce48e453c7e27{color:var(--text-secondary);font-size:var(--font-lg);margin-bottom:var(--space-4);max-width:600px;margin-left:auto;margin-right:auto}.category-stats.jsx-6e7ce48e453c7e27{margin-top:var(--space-4)}.category-search.jsx-6e7ce48e453c7e27{margin-bottom:var(--space-6);display:flex;justify-content:center}.controls-section.jsx-6e7ce48e453c7e27{margin-bottom:var(--space-6);display:flex;justify-content:center}.sort-select.jsx-6e7ce48e453c7e27{padding:var(--space-2)var(--space-4);border:1px solid var(--bg-surface);border-radius:var(--border-radius);background:var(--bg-primary);color:var(--text-primary);font-size:var(--font-sm)}.guides-section.jsx-6e7ce48e453c7e27{margin-bottom:var(--space-8)}.guide-card.jsx-6e7ce48e453c7e27:hover .mobile-card-title.jsx-6e7ce48e453c7e27{color:var(--accent-secondary)}.empty-state.jsx-6e7ce48e453c7e27{text-align:center;padding:var(--space-8);color:var(--text-secondary)}.empty-state.jsx-6e7ce48e453c7e27 h3.jsx-6e7ce48e453c7e27{color:var(--text-primary);margin-bottom:var(--space-4)}.loading-container.jsx-6e7ce48e453c7e27{text-align:center;padding:var(--space-8);color:var(--text-secondary)}.error-container.jsx-6e7ce48e453c7e27{text-align:center;padding:var(--space-8)}@media(max-width:767px){.category-header.jsx-6e7ce48e453c7e27{padding:var(--space-4);margin-bottom:var(--space-6)}.category-title.jsx-6e7ce48e453c7e27{font-size:var(--font-2xl)}.category-description.jsx-6e7ce48e453c7e27{font-size:var(--font-base)}.category-icon.jsx-6e7ce48e453c7e27{font-size:2.5rem}}</style><style id="__jsx-6ca0ba86c5b4bb40">.app-container.jsx-6ca0ba86c5b4bb40{min-height:100vh;display:flex;flex-direction:column;padding-top:56px}.main-content.jsx-6ca0ba86c5b4bb40{flex:1;padding:var(--space-6)0}.mobile-footer.jsx-6ca0ba86c5b4bb40{background:var(--bg-secondary);border-top:1px solid var(--bg-surface);padding:var(--space-6)0;margin-top:auto}.footer-content.jsx-6ca0ba86c5b4bb40{text-align:center}.footer-links.jsx-6ca0ba86c5b4bb40{display:flex;justify-content:center;gap:var(--space-6);margin-bottom:var(--space-4);flex-wrap:wrap}.footer-links.jsx-6ca0ba86c5b4bb40 a.jsx-6ca0ba86c5b4bb40{color:var(--accent-primary);text-decoration:none;font-size:var(--font-sm)}.footer-links.jsx-6ca0ba86c5b4bb40 a.jsx-6ca0ba86c5b4bb40:hover{color:var(--accent-secondary)}.footer-separator.jsx-6ca0ba86c5b4bb40{height:1px;background:var(--bg-surface);margin:var(--space-4)auto;width:200px}.footer-text.jsx-6ca0ba86c5b4bb40,.footer-tech.jsx-6ca0ba86c5b4bb40{color:var(--text-secondary);font-size:var(--font-sm);margin-bottom:var(--space-2)}.footer-disclaimer.jsx-6ca0ba86c5b4bb40{color:var(--text-muted);font-size:var(--font-xs)}.footer-updated.jsx-6ca0ba86c5b4bb40{color:var(--text-muted);font-size:var(--font-xs);margin-top:var(--space-2)}.nav-links.jsx-6ca0ba86c5b4bb40{display:flex;gap:var(--space-4)}.nav-link.jsx-6ca0ba86c5b4bb40{color:var(--text-primary);text-decoration:none;padding:var(--space-2)var(--space-3);border-radius:var(--border-radius);font-size:var(--font-sm);font-weight:500;transition:var(--transition);min-height:36px;display:flex;align-items:center}.nav-link.jsx-6ca0ba86c5b4bb40:hover{background:var(--bg-surface);color:var(--accent-primary);text-decoration:none}[data-theme="light"].jsx-6ca0ba86c5b4bb40 .theme-icon-dark.jsx-6ca0ba86c5b4bb40{display:none}[data-theme="light"].jsx-6ca0ba86c5b4bb40 .theme-icon-light.jsx-6ca0ba86c5b4bb40{display:inline!important}@media(max-width:767px){.main-content.jsx-6ca0ba86c5b4bb40{padding:var(--space-4)0}.footer-links.jsx-6ca0ba86c5b4bb40{gap:var(--space-4)}}</style></head><body><noscript><div class="no-js-message" style="padding:1rem;background:#ff5555;color:#f8f8f2;text-align:center;font-size:0.9rem">This site requires JavaScript to function properly. Please enable JavaScript in your browser.</div></noscript><div id="__next"><div class="jsx-6ca0ba86c5b4bb40 app-container"><a href="#main-content" class="jsx-6ca0ba86c5b4bb40 skip-link">Skip to main content</a><nav class="jsx-6ca0ba86c5b4bb40 mobile-nav"><div class="jsx-6ca0ba86c5b4bb40 mobile-nav-content"><a class="mobile-brand" href="/"><span role="img" aria-label="Books" class="jsx-6ca0ba86c5b4bb40">📚</span>HowToMgr</a><div class="jsx-6ca0ba86c5b4bb40 nav-links"><a class="nav-link" href="/all/">All</a><a class="nav-link" href="/search/">Search</a></div><button aria-label="Toggle theme" title="Switch theme" class="jsx-6ca0ba86c5b4bb40 mobile-theme-toggle touch-target"><span class="jsx-6ca0ba86c5b4bb40 theme-icon-dark">🌙</span><span style="display:none" class="jsx-6ca0ba86c5b4bb40 theme-icon-light">☀️</span></button></div></nav><main id="main-content" tabindex="-1" class="jsx-6ca0ba86c5b4bb40 main-content"><div class="jsx-6ca0ba86c5b4bb40 container"><nav aria-label="Breadcrumb" class="jsx-6e7ce48e453c7e27 breadcrumb"><a href="/">Home</a><span class="jsx-6e7ce48e453c7e27 separator">→</span><span class="jsx-6e7ce48e453c7e27 current">Infrastructure as code</span></nav><section class="jsx-6e7ce48e453c7e27 category-header"><div style="color:#44475a" class="jsx-6e7ce48e453c7e27 category-icon">🏗️</div><h1 class="jsx-6e7ce48e453c7e27 category-title">Infrastructure as code</h1><p class="jsx-6e7ce48e453c7e27 category-description">Infrastructure as code tools and applications</p><div class="jsx-6e7ce48e453c7e27 category-stats"><span class="jsx-6e7ce48e453c7e27 mobile-badge mobile-badge-primary">1<!-- --> guides available</span></div></section><section class="jsx-6e7ce48e453c7e27 category-search"><div class="jsx-fba8d10132152d7 search-box"><div class="jsx-fba8d10132152d7 search-input-container"><input type="search" placeholder="Search infrastructure as code..." autoComplete="off" aria-label="Search installation guides" class="jsx-fba8d10132152d7 search-input" value=""/><div class="jsx-fba8d10132152d7 search-indicator"><span class="jsx-fba8d10132152d7 search-icon">🔍</span></div></div></div></section><section class="jsx-6e7ce48e453c7e27 controls-section"><div class="jsx-6e7ce48e453c7e27 sort-controls"><label for="sort-select" class="jsx-6e7ce48e453c7e27 sr-only">Sort guides</label><select id="sort-select" class="jsx-6e7ce48e453c7e27 sort-select"><option value="name" class="jsx-6e7ce48e453c7e27" selected="">Name (A-Z)</option><option value="updated" class="jsx-6e7ce48e453c7e27">Recently Updated</option><option value="stars" class="jsx-6e7ce48e453c7e27">Most Popular</option></select></div></section><section class="jsx-6e7ce48e453c7e27 guides-section"><div class="jsx-6e7ce48e453c7e27 mobile-grid"><a class="mobile-card guide-card" href="/infrastructure-as-code/terraform/"><div class="jsx-6e7ce48e453c7e27 mobile-card-header"><h3 class="jsx-6e7ce48e453c7e27 mobile-card-title">Terraform Installation and Management Guide</h3><p class="jsx-6e7ce48e453c7e27 mobile-card-description">Terraform installation and configuration guide</p></div><div class="jsx-6e7ce48e453c7e27 mobile-card-meta"><span class="jsx-6e7ce48e453c7e27 mobile-badge mobile-badge-info">44 min</span></div></a></div></section></div></main><footer class="jsx-6ca0ba86c5b4bb40 mobile-footer"><div class="jsx-6ca0ba86c5b4bb40 container"><div class="jsx-6ca0ba86c5b4bb40 footer-content"><div class="jsx-6ca0ba86c5b4bb40 footer-links"><a href="/">Home</a><a href="https://github.com/howtomgr" target="_blank" rel="noopener" class="jsx-6ca0ba86c5b4bb40">GitHub</a><a href="https://github.com/howtomgr/howtomgr.github.io" target="_blank" rel="noopener" class="jsx-6ca0ba86c5b4bb40">Source</a></div><div class="jsx-6ca0ba86c5b4bb40 footer-separator"></div><p class="jsx-6ca0ba86c5b4bb40 footer-text">© <!-- -->2025<!-- --> HowToMgr Organization. Open source installation guides.</p><p class="jsx-6ca0ba86c5b4bb40 footer-tech">Built with ❤️ using Next.js + GitHub Pages</p><p class="jsx-6ca0ba86c5b4bb40 footer-disclaimer"><small class="jsx-6ca0ba86c5b4bb40">All guides are provided as-is. Please review and test before production use.</small></p></div></div></footer></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"category":{"key":"infrastructure-as-code","name":"Infrastructure as code","description":"Infrastructure as code tools and applications","icon":"🏗️","color":"#44475a"},"guides":[{"name":"terraform","displayName":"Terraform Installation and Management Guide","slug":"terraform","description":"Terraform installation and configuration guide","category":"infrastructure-as-code","subcategory":"infrastructure-as-code","difficultyLevel":"intermediate","estimatedSetupTime":"15-30 minutes","supportedOS":["rhel","centos","rocky","almalinux","debian","ubuntu","arch","alpine","opensuse","sles","macos","freebsd","windows"],"defaultPorts":[0,4,5,443,2379,5432,8080,8500,8800,8801],"installationMethods":["native-packages","source-compilation"],"features":["multi-os-support","comprehensive-documentation","security-hardening","performance-optimization","backup-restore-procedures","troubleshooting-guides"],"tags":["infrastructure-as-code","orchestration","observability","data-storage","networking","security","data-protection","communication"],"maintenanceStatus":"active","specVersion":"2.0","version":"1.0.0","license":"Open Source","websiteUrl":"https://howtomgr.github.io/infrastructure-as-code/terraform","documentationUrl":"https://howtomgr.github.io/infrastructure-as-code/terraform","language":null,"stars":0,"forks":0,"topics":[],"githubUrl":"https://github.com/howtomgr/terraform","updatedAt":"2025-09-16T17:57:00Z","createdAt":"2025-09-08T03:16:51Z","readmeRaw":"# Terraform Installation and Management Guide\n\n\n\n## Table of Contents\n1. [Prerequisites](#prerequisites)\n2. [Supported Operating Systems](#supported-operating-systems)\n3. [Installation](#installation)\n4. [Configuration](#configuration)\n5. [Service Management](#service-management)\n6. [Troubleshooting](#troubleshooting)\n7. [Security Considerations](#security-considerations)\n8. [Performance Tuning](#performance-tuning)\n9. [Backup and Restore](#backup-and-restore)\n10. [System Requirements](#system-requirements)\n11. [Support](#support)\n12. [Contributing](#contributing)\n13. [License](#license)\n14. [Acknowledgments](#acknowledgments)\n15. [Version History](#version-history)\n16. [Appendices](#appendices)\n\n## 1. Introduction\n\nTerraform is a free and open-source Infrastructure as Code (IaC) tool developed by HashiCorp for building, changing, and versioning infrastructure safely and efficiently across multiple cloud providers. Originally created by Mitchell Hashimoto in 2014, Terraform uses declarative configuration files written in HashiCorp Configuration Language (HCL) to manage infrastructure resources with a declarative approach.\n\n### FOSS Context\n\nAs a pure open-source solution, Terraform serves as a powerful alternative to commercial IaC solutions like AWS CloudFormation (AWS-specific), Azure Resource Manager (Azure-specific), or proprietary enterprise tools like Pulumi Enterprise or VMware vRealize. Terraform provides enterprise-grade capabilities without licensing costs:\n\n- **Multi-cloud management** across 3000+ providers\n- **State management** with remote backends and locking\n- **Extensive provider ecosystem** maintained by HashiCorp and community\n- **Team collaboration** features through Terraform Cloud (freemium) or self-hosted alternatives\n- **Module system** for reusable infrastructure components\n- **Import capabilities** for existing infrastructure\n- **Plan and apply workflow** with preview and approval processes\n\n### Key Benefits\n\n- **Vendor neutrality**: Works across all major cloud providers and on-premises systems\n- **Declarative syntax**: Define desired state, Terraform handles the implementation\n- **Resource graph**: Automatically determines resource dependencies and creation order\n- **State tracking**: Maintains current infrastructure state for accurate change management\n- **Immutable infrastructure**: Encourages infrastructure replacement rather than modification\n- **Community support**: Large ecosystem with extensive documentation and community modules\n\n## 2. Prerequisites\n\n- **Hardware Requirements**:\n  - CPU: 1 core minimum (2+ cores recommended for large infrastructures)\n  - RAM: 2GB minimum (4GB+ recommended for production)\n  - Storage: 5GB minimum (more for state files and provider binaries)\n  - Network: Stable connectivity for cloud provider APIs\n- **Operating System**: \n  - Linux: Any modern distribution with kernel 3.2+\n  - macOS: 10.13+ (High Sierra or newer)\n  - Windows: Windows Server 2016+ or Windows 10\n  - FreeBSD: 12.0+\n- **Network Requirements**:\n  - HTTPS access to cloud provider APIs (port 443)\n  - Access to Terraform Registry (registry.terraform.io)\n  - Access to HashiCorp releases (releases.hashicorp.com)\n- **Dependencies**:\n  - Cloud provider CLI tools (aws-cli, azure-cli, gcloud)\n  - Git for configuration management\n  - Text editor or IDE\n  - Root or administrative access for installation\n- **System Access**: root or sudo privileges required for installation\n\n## 3. Installation\n\n### RHEL/CentOS/Rocky Linux/AlmaLinux\n\n```bash\n# Add HashiCorp repository\nsudo yum install -y yum-utils\nsudo yum-config-manager --add-repo https://rpm.releases.hashicorp.com/RHEL/hashicorp.repo\n\n# Install Terraform\nsudo yum install -y terraform\n\n# Verify installation\nterraform version\n\n# Alternative: DNF for newer systems\nsudo dnf install -y yum-utils\nsudo dnf config-manager --add-repo https://rpm.releases.hashicorp.com/RHEL/hashicorp.repo\nsudo dnf install -y terraform\n```\n\n### Debian/Ubuntu\n\n```bash\n# Add HashiCorp GPG key\nwget -O- https://apt.releases.hashicorp.com/gpg | sudo gpg --dearmor -o /usr/share/keyrings/hashicorp-archive-keyring.gpg\n\n# Add HashiCorp repository\necho \"deb [signed-by=/usr/share/keyrings/hashicorp-archive-keyring.gpg] https://apt.releases.hashicorp.com $(lsb_release -cs) main\" | sudo tee /etc/apt/sources.list.d/hashicorp.list\n\n# Update and install Terraform\nsudo apt update\nsudo apt install -y terraform\n\n# Verify installation\nterraform version\n```\n\n### Arch Linux\n\n```bash\n# Install from community repository\nsudo pacman -S terraform\n\n# Alternative: Install from AUR\nyay -S terraform\n\n# Install additional tools\nsudo pacman -S terraform-docs tflint\n\n# Verify installation\nterraform version\n```\n\n### Alpine Linux\n\n```bash\n# Install from Alpine repositories\nsudo apk update\nsudo apk add terraform\n\n# Install additional tools\nsudo apk add bash git curl\n\n# Verify installation\nterraform version\n```\n\n### openSUSE/SLES\n\n```bash\n# openSUSE Leap/Tumbleweed\nsudo zypper install -y terraform\n\n# SLES 15\nsudo SUSEConnect -p sle-module-development-tools/15.5/x86_64\nsudo zypper install -y terraform\n\n# Alternative: Add HashiCorp repository\nsudo zypper addrepo https://rpm.releases.hashicorp.com/SLES/hashicorp.repo\nsudo zypper refresh\nsudo zypper install terraform\n\n# Verify installation\nterraform version\n```\n\n### macOS\n\n```bash\n# Using Homebrew\nbrew tap hashicorp/tap\nbrew install hashicorp/tap/terraform\n\n# Alternative: Install specific version\nbrew install terraform@1.6\n\n# Verify installation\nterraform version\n\n# Using tfenv for version management\nbrew install tfenv\ntfenv install latest\ntfenv use latest\n```\n\n### FreeBSD\n\n```bash\n# Using pkg\npkg install terraform\n\n# Using ports\ncd /usr/ports/sysutils/terraform\nmake install clean\n\n# Verify installation\nterraform version\n```\n\n### Windows\n\n```powershell\n# Method 1: Using Chocolatey\nchoco install terraform\n\n# Method 2: Using Scoop\nscoop bucket add main\nscoop install terraform\n\n# Method 3: Manual installation\n# Download from https://releases.hashicorp.com/terraform/\n# Extract terraform.exe to C:\\terraform\n# Add C:\\terraform to PATH\n\n# Method 4: Using Winget\nwinget install HashiCorp.Terraform\n\n# Verify installation\nterraform version\n```\n\n## 4. Initial Configuration\n\n### First-Run Setup\n\n1. **Create terraform user** (optional for dedicated service):\n```bash\n# Linux systems\nsudo useradd -r -d /opt/terraform -s /sbin/nologin -c \"Terraform Service\" terraform\n```\n\n2. **Default configuration locations**:\n- RHEL/CentOS/Rocky/AlmaLinux: `/etc/terraform/` (custom) or `/usr/local/bin/`\n- Debian/Ubuntu: `/etc/terraform/` (custom) or `/usr/local/bin/`\n- Arch Linux: `/etc/terraform/` (custom) or `/usr/bin/`\n- Alpine Linux: `/etc/terraform/` (custom) or `/usr/bin/`\n- openSUSE/SLES: `/etc/terraform/` (custom) or `/usr/local/bin/`\n- macOS: `/usr/local/etc/terraform/` or `/opt/homebrew/etc/terraform/`\n- FreeBSD: `/usr/local/etc/terraform/`\n- Windows: `C:\\terraform\\` or `%APPDATA%\\terraform\\`\n\n3. **Essential initial configuration**:\n\n```bash\n# Create workspace directory\nmkdir -p ~/terraform/projects\ncd ~/terraform/projects\n\n# Create first Terraform configuration\ncat \u003e main.tf \u003c\u003cEOF\nterraform {\n  required_version = \"\u003e= 1.6\"\n  required_providers {\n    local = {\n      source  = \"hashicorp/local\"\n      version = \"~\u003e 2.0\"\n    }\n  }\n}\n\nresource \"local_file\" \"hello_world\" {\n  content  = \"Hello, World from Terraform!\"\n  filename = \"hello.txt\"\n}\nEOF\n\n# Initialize Terraform\nterraform init\n\n# Validate configuration\nterraform validate\n\n# Plan deployment\nterraform plan\n\n# Apply configuration\nterraform apply\n```\n\n### Testing Initial Setup\n\n```bash\n# Check Terraform version\nterraform version\n\n# Validate configuration\nterraform validate\n\n# Format configuration files\nterraform fmt\n\n# Initialize and test basic functionality\nterraform init\nterraform plan\nterraform apply\n\n# List state\nterraform state list\n\n# Show state details\nterraform show\n\n# Clean up test resources\nterraform destroy\n```\n\n**WARNING:** Configure proper authentication for cloud providers before deploying real infrastructure!\n\n## 5. Service Management\n\n### systemd (Linux Systems)\n\n```bash\n# Create systemd service for Terraform agent (if using)\nsudo tee /etc/systemd/system/terraform-agent.service \u003c\u003cEOF\n[Unit]\nDescription=Terraform Agent\nAfter=network.target\n\n[Service]\nType=simple\nUser=terraform\nWorkingDirectory=/opt/terraform\nExecStart=/usr/local/bin/terraform-agent\nRestart=always\nRestartSec=10\n\n[Install]\nWantedBy=multi-user.target\nEOF\n\nsudo systemctl daemon-reload\nsudo systemctl enable terraform-agent\n```\n\n### OpenRC (Alpine Linux)\n\n```bash\n# Create OpenRC service script\nsudo tee /etc/init.d/terraform-agent \u003c\u003cEOF\n#!/sbin/openrc-run\n\nname=\"terraform-agent\"\ndescription=\"Terraform Agent\"\ncommand=\"/usr/bin/terraform-agent\"\ncommand_user=\"terraform\"\ncommand_background=true\npidfile=\"/var/run/terraform-agent.pid\"\n\ndepend() {\n    need net\n}\nEOF\n\nsudo chmod +x /etc/init.d/terraform-agent\nrc-update add terraform-agent default\n```\n\n### rc.d (FreeBSD)\n\n```bash\n# Create rc.d script\nsudo tee /usr/local/etc/rc.d/terraform_agent \u003c\u003cEOF\n#!/bin/sh\n. /etc/rc.subr\n\nname=terraform_agent\nrcvar=terraform_agent_enable\ncommand=\"/usr/local/bin/terraform-agent\"\npidfile=\"/var/run/terraform_agent.pid\"\nstart_cmd=\"terraform_agent_start\"\n\nterraform_agent_start() {\n    daemon -p \\${pidfile} \\${command}\n}\n\nload_rc_config \\$name\nrun_rc_command \"\\$1\"\nEOF\n\nsudo chmod +x /usr/local/etc/rc.d/terraform_agent\necho 'terraform_agent_enable=\"YES\"' \u003e\u003e /etc/rc.conf\n```\n\n### launchd (macOS)\n\n```bash\n# Create LaunchDaemon plist\nsudo tee /Library/LaunchDaemons/com.hashicorp.terraform.agent.plist \u003c\u003cEOF\n\u003c?xml version=\"1.0\" encoding=\"UTF-8\"?\u003e\n\u003c!DOCTYPE plist PUBLIC \"-//Apple//DTD PLIST 1.0//EN\" \"http://www.apple.com/DTDs/PropertyList-1.0.dtd\"\u003e\n\u003cplist version=\"1.0\"\u003e\n\u003cdict\u003e\n    \u003ckey\u003eLabel\u003c/key\u003e\n    \u003cstring\u003ecom.hashicorp.terraform.agent\u003c/string\u003e\n    \u003ckey\u003eProgramArguments\u003c/key\u003e\n    \u003carray\u003e\n        \u003cstring\u003e/usr/local/bin/terraform-agent\u003c/string\u003e\n    \u003c/array\u003e\n    \u003ckey\u003eRunAtLoad\u003c/key\u003e\n    \u003ctrue/\u003e\n    \u003ckey\u003eKeepAlive\u003c/key\u003e\n    \u003ctrue/\u003e\n\u003c/dict\u003e\n\u003c/plist\u003e\nEOF\n\nsudo launchctl load /Library/LaunchDaemons/com.hashicorp.terraform.agent.plist\n```\n\n### Windows Service Manager\n\n```powershell\n# Install Terraform as Windows service using NSSM\nnssm install TerraformAgent \"C:\\terraform\\terraform-agent.exe\"\nnssm set TerraformAgent AppDirectory \"C:\\terraform\"\nnssm set TerraformAgent DisplayName \"Terraform Agent\"\nnssm set TerraformAgent Description \"HashiCorp Terraform Agent\"\nnssm start TerraformAgent\n\n# Alternative: Using sc command\nsc create TerraformAgent binPath=\"C:\\terraform\\terraform-agent.exe\" start=auto\nsc start TerraformAgent\n```\n\n## 6. Advanced Configuration\n\n### Multi-Cloud Provider Setup\n\n```bash\n# Create comprehensive multi-cloud configuration\ncat \u003e providers.tf \u003c\u003cEOF\nterraform {\n  required_version = \"\u003e= 1.6\"\n  required_providers {\n    aws = {\n      source  = \"hashicorp/aws\"\n      version = \"~\u003e 5.0\"\n    }\n    azurerm = {\n      source  = \"hashicorp/azurerm\"\n      version = \"~\u003e 3.0\"\n    }\n    google = {\n      source  = \"hashicorp/google\"\n      version = \"~\u003e 5.0\"\n    }\n    kubernetes = {\n      source  = \"hashicorp/kubernetes\"\n      version = \"~\u003e 2.0\"\n    }\n    helm = {\n      source  = \"hashicorp/helm\"\n      version = \"~\u003e 2.0\"\n    }\n  }\n  \n  # Remote state configuration\n  backend \"s3\" {\n    bucket = \"terraform-state-bucket\"\n    key    = \"infrastructure/terraform.tfstate\"\n    region = \"us-west-2\"\n    \n    # State locking with DynamoDB\n    dynamodb_table = \"terraform-state-lock\"\n    encrypt        = true\n  }\n}\n\n# AWS Provider\nprovider \"aws\" {\n  region = var.aws_region\n  \n  default_tags {\n    tags = {\n      Environment   = var.environment\n      ManagedBy     = \"terraform\"\n      Project       = var.project_name\n      Owner         = var.owner\n    }\n  }\n}\n\n# Azure Provider\nprovider \"azurerm\" {\n  features {\n    resource_group {\n      prevent_deletion_if_contains_resources = false\n    }\n    key_vault {\n      purge_soft_delete_on_destroy = true\n    }\n  }\n}\n\n# Google Cloud Provider\nprovider \"google\" {\n  project = var.gcp_project_id\n  region  = var.gcp_region\n  zone    = var.gcp_zone\n}\n\n# Kubernetes Provider\nprovider \"kubernetes\" {\n  config_path = \"~/.kube/config\"\n}\n\n# Helm Provider\nprovider \"helm\" {\n  kubernetes {\n    config_path = \"~/.kube/config\"\n  }\n}\nEOF\n```\n\n### Enterprise Features Configuration\n\n```bash\n# Terraform Cloud/Enterprise configuration\ncat \u003e cloud.tf \u003c\u003cEOF\nterraform {\n  cloud {\n    organization = \"your-organization\"\n    \n    workspaces {\n      name = \"production-infrastructure\"\n    }\n  }\n}\n\n# Remote execution configuration\nterraform {\n  cloud {\n    organization = \"your-organization\"\n    \n    workspaces {\n      tags = [\"production\", \"web-app\"]\n    }\n  }\n  \n  required_providers {\n    tfe = {\n      source  = \"hashicorp/tfe\"\n      version = \"~\u003e 0.48\"\n    }\n  }\n}\n\n# Terraform Enterprise configuration\nprovider \"tfe\" {\n  hostname = \"terraform.company.com\"\n  token    = var.tfe_token\n}\n\n# Workspace configuration\nresource \"tfe_workspace\" \"production\" {\n  name         = \"production-infrastructure\"\n  organization = var.tfe_organization\n  \n  auto_apply = false\n  queue_all_runs = false\n  \n  terraform_version = \"1.6.4\"\n  \n  vcs_repo {\n    identifier     = \"company/infrastructure\"\n    branch         = \"main\"\n    oauth_token_id = var.vcs_oauth_token_id\n  }\n  \n  working_directory = \"environments/production\"\n}\nEOF\n```\n\n### Advanced State Management\n\n```bash\n# Encrypted remote state with multiple backends\ncat \u003e backend-s3.tf \u003c\u003cEOF\n# S3 backend with encryption and locking\nterraform {\n  backend \"s3\" {\n    bucket         = \"terraform-state-bucket\"\n    key            = \"infrastructure/terraform.tfstate\"\n    region         = \"us-west-2\"\n    encrypt        = true\n    kms_key_id     = \"arn:aws:kms:us-west-2:ACCOUNT:key/KEY-ID\"\n    dynamodb_table = \"terraform-state-lock\"\n    \n    # Additional security\n    skip_region_validation      = false\n    skip_credentials_validation = false\n    skip_metadata_api_check     = false\n  }\n}\n\n# State bucket with versioning and lifecycle\nresource \"aws_s3_bucket\" \"terraform_state\" {\n  bucket = \"terraform-state-bucket\"\n  \n  tags = {\n    Name        = \"Terraform State Bucket\"\n    Environment = var.environment\n  }\n}\n\nresource \"aws_s3_bucket_versioning\" \"terraform_state_versioning\" {\n  bucket = aws_s3_bucket.terraform_state.id\n  versioning_configuration {\n    status = \"Enabled\"\n  }\n}\n\nresource \"aws_s3_bucket_server_side_encryption_configuration\" \"terraform_state_encryption\" {\n  bucket = aws_s3_bucket.terraform_state.id\n\n  rule {\n    apply_server_side_encryption_by_default {\n      kms_master_key_id = aws_kms_key.terraform_bucket_key.arn\n      sse_algorithm     = \"aws:kms\"\n    }\n  }\n}\n\nresource \"aws_s3_bucket_public_access_block\" \"terraform_state\" {\n  bucket = aws_s3_bucket.terraform_state.id\n\n  block_public_acls       = true\n  block_public_policy     = true\n  ignore_public_acls      = true\n  restrict_public_buckets = true\n}\n\n# KMS key for encryption\nresource \"aws_kms_key\" \"terraform_bucket_key\" {\n  description             = \"KMS key for Terraform state bucket encryption\"\n  deletion_window_in_days = 7\n\n  tags = {\n    Name        = \"Terraform State Bucket Key\"\n    Environment = var.environment\n  }\n}\n\n# DynamoDB table for state locking\nresource \"aws_dynamodb_table\" \"terraform_state_lock\" {\n  name           = \"terraform-state-lock\"\n  billing_mode   = \"PAY_PER_REQUEST\"\n  hash_key       = \"LockID\"\n\n  attribute {\n    name = \"LockID\"\n    type = \"S\"\n  }\n\n  server_side_encryption {\n    enabled = true\n  }\n\n  point_in_time_recovery {\n    enabled = true\n  }\n\n  tags = {\n    Name        = \"Terraform State Lock Table\"\n    Environment = var.environment\n  }\n}\nEOF\n```\n\n### Terraform Workspaces and Environment Management\n\n```bash\n# Enterprise workspace management\ncat \u003e workspace-management.tf \u003c\u003cEOF\n# Workspace-specific variables\nvariable \"workspace_configs\" {\n  description = \"Configuration per workspace\"\n  type = map(object({\n    instance_type    = string\n    min_size        = number\n    max_size        = number\n    environment_tag = string\n    backup_retention = number\n    monitoring_level = string\n  }))\n  default = {\n    development = {\n      instance_type    = \"t3.micro\"\n      min_size        = 1\n      max_size        = 3\n      environment_tag = \"dev\"\n      backup_retention = 7\n      monitoring_level = \"basic\"\n    }\n    staging = {\n      instance_type    = \"t3.small\"\n      min_size        = 2\n      max_size        = 5\n      environment_tag = \"staging\"\n      backup_retention = 14\n      monitoring_level = \"standard\"\n    }\n    production = {\n      instance_type    = \"m5.large\"\n      min_size        = 3\n      max_size        = 10\n      environment_tag = \"prod\"\n      backup_retention = 30\n      monitoring_level = \"comprehensive\"\n    }\n  }\n}\n\n# Current workspace configuration\nlocals {\n  workspace_config = var.workspace_configs[terraform.workspace]\n  \n  common_tags = {\n    Environment   = local.workspace_config.environment_tag\n    Workspace     = terraform.workspace\n    Project       = var.project_name\n    ManagedBy     = \"terraform\"\n    Owner         = var.owner\n    CostCenter    = var.cost_center\n    Compliance    = var.compliance_level\n  }\n}\n\n# Workspace-aware resource sizing\nresource \"aws_launch_template\" \"web_servers\" {\n  name_prefix   = \"${var.project_name}-${terraform.workspace}-\"\n  image_id      = data.aws_ami.ubuntu.id\n  instance_type = local.workspace_config.instance_type\n  \n  vpc_security_group_ids = [aws_security_group.web.id]\n  \n  user_data = base64encode(templatefile(\"${path.module}/user-data.sh\", {\n    environment = terraform.workspace\n    log_level   = local.workspace_config.monitoring_level\n  }))\n  \n  tag_specifications {\n    resource_type = \"instance\"\n    tags          = local.common_tags\n  }\n  \n  lifecycle {\n    create_before_destroy = true\n  }\n}\n\n# Auto-scaling based on workspace\nresource \"aws_autoscaling_group\" \"web\" {\n  name                = \"${var.project_name}-${terraform.workspace}-asg\"\n  vpc_zone_identifier = var.private_subnet_ids\n  target_group_arns   = [aws_lb_target_group.web.arn]\n  health_check_type   = \"ELB\"\n  health_check_grace_period = 300\n\n  min_size         = local.workspace_config.min_size\n  max_size         = local.workspace_config.max_size\n  desired_capacity = local.workspace_config.min_size\n\n  launch_template {\n    id      = aws_launch_template.web_servers.id\n    version = \"$Latest\"\n  }\n  \n  dynamic \"tag\" {\n    for_each = local.common_tags\n    content {\n      key                 = tag.key\n      value               = tag.value\n      propagate_at_launch = true\n    }\n  }\n}\nEOF\n\n# Workspace management commands\ncat \u003e scripts/workspace-management.sh \u003c\u003c'EOF'\n#!/bin/bash\n\n# List all workspaces with their status\nlist_workspaces() {\n    echo \"📋 Terraform Workspaces:\"\n    terraform workspace list\n    echo \"\"\n    echo \"Current workspace: $(terraform workspace show)\"\n}\n\n# Create new workspace with initialization\ncreate_workspace() {\n    local workspace_name=\"$1\"\n    \n    if [[ -z \"$workspace_name\" ]]; then\n        echo \"Usage: create_workspace \u003cworkspace-name\u003e\"\n        return 1\n    fi\n    \n    echo \"🚀 Creating workspace: $workspace_name\"\n    terraform workspace new \"$workspace_name\"\n    terraform workspace select \"$workspace_name\"\n    \n    # Initialize with workspace-specific variables\n    if [[ ! -f \"$workspace_name.tfvars\" ]]; then\n        echo \"Creating $workspace_name.tfvars template...\"\n        cat \u003e \"$workspace_name.tfvars\" \u003c\u003cVARS\n# Workspace-specific variables for $workspace_name\nproject_name = \"myproject-$workspace_name\"\nenvironment = \"$workspace_name\"\nowner = \"$(whoami)\"\ncost_center = \"engineering\"\ncompliance_level = \"standard\"\n\n# Network configuration\nvpc_cidr = \"10.0.0.0/16\"\navailability_zones = [\"us-west-2a\", \"us-west-2b\", \"us-west-2c\"]\n\n# Resource sizing (adjust per environment)\ninstance_type = \"t3.micro\"\nmin_capacity = 1\nmax_capacity = 3\nVARS\n        echo \"✅ Template created at $workspace_name.tfvars\"\n        echo \"💡 Please review and customize the variables before applying\"\n    fi\n}\n\n# Switch workspace with validation\nswitch_workspace() {\n    local workspace_name=\"$1\"\n    \n    if [[ -z \"$workspace_name\" ]]; then\n        echo \"Usage: switch_workspace \u003cworkspace-name\u003e\"\n        return 1\n    fi\n    \n    if terraform workspace list | grep -q \"\\b$workspace_name\\b\"; then\n        terraform workspace select \"$workspace_name\"\n        echo \"✅ Switched to workspace: $workspace_name\"\n        \n        # Show current configuration\n        echo \"📄 Current configuration file: $workspace_name.tfvars\"\n        if [[ -f \"$workspace_name.tfvars\" ]]; then\n            echo \"✅ Variables file exists\"\n        else\n            echo \"⚠️  Variables file missing - creating template\"\n            create_workspace \"$workspace_name\"\n        fi\n    else\n        echo \"❌ Workspace '$workspace_name' not found\"\n        echo \"Available workspaces:\"\n        terraform workspace list\n    fi\n}\n\n# Delete workspace with safety checks\ndelete_workspace() {\n    local workspace_name=\"$1\"\n    \n    if [[ -z \"$workspace_name\" ]]; then\n        echo \"Usage: delete_workspace \u003cworkspace-name\u003e\"\n        return 1\n    fi\n    \n    if [[ \"$workspace_name\" == \"default\" ]]; then\n        echo \"❌ Cannot delete the default workspace\"\n        return 1\n    fi\n    \n    echo \"⚠️  WARNING: This will delete workspace '$workspace_name' and all its resources!\"\n    echo \"Current resources in workspace:\"\n    \n    # Switch to workspace and show resources\n    terraform workspace select \"$workspace_name\"\n    terraform state list\n    \n    echo \"\"\n    read -p \"Are you sure you want to proceed? (yes/no): \" confirm\n    \n    if [[ \"$confirm\" == \"yes\" ]]; then\n        echo \"🗑️  Destroying resources in workspace: $workspace_name\"\n        terraform destroy -auto-approve -var-file=\"$workspace_name.tfvars\"\n        \n        echo \"🗑️  Deleting workspace: $workspace_name\"\n        terraform workspace select default\n        terraform workspace delete \"$workspace_name\"\n        \n        echo \"✅ Workspace '$workspace_name' deleted\"\n    else\n        echo \"❌ Operation cancelled\"\n    fi\n}\n\n# Main command dispatcher\ncase \"${1:-help}\" in\n    \"list\")\n        list_workspaces\n        ;;\n    \"create\")\n        create_workspace \"$2\"\n        ;;\n    \"switch\")\n        switch_workspace \"$2\"\n        ;;\n    \"delete\")\n        delete_workspace \"$2\"\n        ;;\n    \"help\"|*)\n        echo \"Terraform Workspace Management\"\n        echo \"Usage: $0 [list|create|switch|delete] [workspace-name]\"\n        echo \"\"\n        echo \"Commands:\"\n        echo \"  list                    - List all workspaces\"\n        echo \"  create \u003cname\u003e          - Create new workspace with template\"\n        echo \"  switch \u003cname\u003e          - Switch to existing workspace\"\n        echo \"  delete \u003cname\u003e          - Delete workspace and all resources\"\n        ;;\nesac\nEOF\n\nchmod +x scripts/workspace-management.sh\n```\n\n### Remote State Configuration Best Practices\n\n```bash\n# Enterprise remote state configuration\ncat \u003e remote-state-setup.tf \u003c\u003cEOF\n# Multi-environment state configuration\nterraform {\n  backend \"s3\" {\n    # Use workspace-aware state keys\n    key            = \"infrastructure/\\${terraform.workspace}/terraform.tfstate\"\n    bucket         = var.state_bucket_name\n    region         = var.aws_region\n    encrypt        = true\n    kms_key_id     = var.state_kms_key_arn\n    dynamodb_table = var.state_lock_table\n    \n    # Workspace isolation\n    workspace_key_prefix = \"workspaces\"\n  }\n}\n\n# State bucket with advanced features\nresource \"aws_s3_bucket\" \"terraform_state\" {\n  bucket        = var.state_bucket_name\n  force_destroy = false  # Prevent accidental deletion\n  \n  tags = {\n    Name            = \"Terraform State Bucket\"\n    Purpose         = \"Infrastructure State Storage\"\n    Environment     = \"global\"\n    BackupRequired  = \"true\"\n    ComplianceLevel = \"high\"\n  }\n}\n\n# Cross-region replication for disaster recovery\nresource \"aws_s3_bucket_replication_configuration\" \"terraform_state_replication\" {\n  role   = aws_iam_role.replication.arn\n  bucket = aws_s3_bucket.terraform_state.id\n\n  rule {\n    id     = \"terraform-state-replication\"\n    status = \"Enabled\"\n    \n    filter {\n      prefix = \"workspaces/\"\n    }\n\n    destination {\n      bucket        = aws_s3_bucket.terraform_state_replica.arn\n      storage_class = \"STANDARD_IA\"\n      \n      encryption_configuration {\n        replica_kms_key_id = aws_kms_key.terraform_state_replica.arn\n      }\n    }\n  }\n}\n\n# Lifecycle management for cost optimization\nresource \"aws_s3_bucket_lifecycle_configuration\" \"terraform_state_lifecycle\" {\n  bucket = aws_s3_bucket.terraform_state.id\n\n  rule {\n    id     = \"state_file_lifecycle\"\n    status = \"Enabled\"\n\n    noncurrent_version_transition {\n      noncurrent_days = 30\n      storage_class   = \"STANDARD_IA\"\n    }\n\n    noncurrent_version_transition {\n      noncurrent_days = 90\n      storage_class   = \"GLACIER\"\n    }\n\n    noncurrent_version_expiration {\n      noncurrent_days = 365\n    }\n  }\n}\n\n# Advanced DynamoDB table for state locking with point-in-time recovery\nresource \"aws_dynamodb_table\" \"terraform_state_lock\" {\n  name           = var.state_lock_table\n  billing_mode   = \"PAY_PER_REQUEST\"\n  hash_key       = \"LockID\"\n  \n  attribute {\n    name = \"LockID\"\n    type = \"S\"\n  }\n\n  # Enable point-in-time recovery\n  point_in_time_recovery {\n    enabled = true\n  }\n\n  # Server-side encryption\n  server_side_encryption {\n    enabled     = true\n    kms_key_arn = aws_kms_key.terraform_state.arn\n  }\n\n  # Enable continuous backups\n  tags = {\n    Name           = \"Terraform State Lock\"\n    BackupRequired = \"true\"\n    Environment    = \"global\"\n  }\n}\n\n# CloudWatch alarms for state operations\nresource \"aws_cloudwatch_metric_alarm\" \"state_bucket_errors\" {\n  alarm_name          = \"terraform-state-bucket-errors\"\n  comparison_operator = \"GreaterThanThreshold\"\n  evaluation_periods  = \"2\"\n  metric_name         = \"4xxErrors\"\n  namespace           = \"AWS/S3\"\n  period              = \"300\"\n  statistic           = \"Sum\"\n  threshold           = \"5\"\n  alarm_description   = \"This metric monitors S3 bucket errors for Terraform state\"\n\n  dimensions = {\n    BucketName = aws_s3_bucket.terraform_state.bucket\n  }\n\n  alarm_actions = [aws_sns_topic.infrastructure_alerts.arn]\n}\nEOF\n```\n\n## 7. Reverse Proxy Setup\n\nTerraform itself doesn't typically require reverse proxy setup, but when using Terraform Enterprise or Cloud, you might need to configure proxies for API access:\n\n### Corporate Proxy Configuration\n\n```bash\n# Configure Terraform to work through corporate proxy\nexport HTTP_PROXY=http://proxy.company.com:8080\nexport HTTPS_PROXY=http://proxy.company.com:8080\nexport NO_PROXY=localhost,127.0.0.1,.company.com\n\n# Add to ~/.bashrc or ~/.zshrc\ncat \u003e\u003e ~/.bashrc \u003c\u003cEOF\n# Terraform proxy settings\nexport HTTP_PROXY=http://proxy.company.com:8080\nexport HTTPS_PROXY=http://proxy.company.com:8080\nexport NO_PROXY=localhost,127.0.0.1,.company.com\nEOF\n\n# Configure Git for proxy (if needed for modules)\ngit config --global http.proxy http://proxy.company.com:8080\ngit config --global https.proxy http://proxy.company.com:8080\n```\n\n### nginx Configuration for Terraform Enterprise\n\n```nginx\n# /etc/nginx/sites-available/terraform-enterprise\nupstream terraform_enterprise {\n    server 127.0.0.1:8800;\n    server 127.0.0.1:8801 backup;\n}\n\nserver {\n    listen 443 ssl http2;\n    server_name terraform.company.com;\n\n    ssl_certificate /etc/ssl/certs/terraform.company.com.crt;\n    ssl_certificate_key /etc/ssl/private/terraform.company.com.key;\n\n    # Security headers\n    add_header Strict-Transport-Security \"max-age=31536000\" always;\n    add_header X-Frame-Options \"DENY\" always;\n    add_header X-Content-Type-Options \"nosniff\" always;\n\n    location / {\n        proxy_pass http://terraform_enterprise;\n        proxy_set_header Host $host;\n        proxy_set_header X-Real-IP $remote_addr;\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n        proxy_set_header X-Forwarded-Proto $scheme;\n        \n        # WebSocket support for real-time updates\n        proxy_http_version 1.1;\n        proxy_set_header Upgrade $http_upgrade;\n        proxy_set_header Connection \"upgrade\";\n        \n        # Timeouts for long-running operations\n        proxy_connect_timeout 60s;\n        proxy_send_timeout 60s;\n        proxy_read_timeout 300s;\n    }\n}\n```\n\n## 8. Security Configuration\n\n### Secure Credential Management\n\n```bash\n# Use environment variables for credentials\ncat \u003e .env.example \u003c\u003cEOF\n# AWS credentials\nAWS_ACCESS_KEY_ID=your_access_key\nAWS_SECRET_ACCESS_KEY=your_secret_key\nAWS_DEFAULT_REGION=us-west-2\n\n# Azure credentials\nARM_CLIENT_ID=your_client_id\nARM_CLIENT_SECRET=your_client_secret\nARM_SUBSCRIPTION_ID=your_subscription_id\nARM_TENANT_ID=your_tenant_id\n\n# GCP credentials\nGOOGLE_APPLICATION_CREDENTIALS=/path/to/service-account-key.json\nGOOGLE_PROJECT=your_project_id\n\n# Terraform Cloud\nTF_CLOUD_TOKEN=your_terraform_cloud_token\nEOF\n\n# Use IAM roles for AWS (recommended)\ncat \u003e aws-iam-role.tf \u003c\u003cEOF\n# IAM role for Terraform execution\nresource \"aws_iam_role\" \"terraform_execution\" {\n  name = \"TerraformExecutionRole\"\n\n  assume_role_policy = jsonencode({\n    Version = \"2012-10-17\"\n    Statement = [\n      {\n        Action = \"sts:AssumeRole\"\n        Effect = \"Allow\"\n        Principal = {\n          Service = \"ec2.amazonaws.com\"\n        }\n      },\n    ]\n  })\n}\n\n# Attach managed policies with least privilege\nresource \"aws_iam_role_policy_attachment\" \"terraform_execution\" {\n  for_each = toset([\n    \"arn:aws:iam::aws:policy/PowerUserAccess\"\n  ])\n  \n  role       = aws_iam_role.terraform_execution.name\n  policy_arn = each.value\n}\n\n# Create instance profile\nresource \"aws_iam_instance_profile\" \"terraform_execution\" {\n  name = \"TerraformExecutionProfile\"\n  role = aws_iam_role.terraform_execution.name\n}\nEOF\n```\n\n### Security Scanning and Compliance\n\n```bash\n# Pre-commit hooks for security\ncat \u003e .pre-commit-config.yaml \u003c\u003cEOF\nrepos:\n- repo: https://github.com/antonbabenko/pre-commit-terraform\n  rev: v1.83.5\n  hooks:\n    - id: terraform_fmt\n    - id: terraform_validate\n    - id: terraform_docs\n    - id: terraform_tflint\n    - id: terraform_checkov\n    - id: terraform_trivy\n\n- repo: https://github.com/Yelp/detect-secrets\n  rev: v1.4.0\n  hooks:\n    - id: detect-secrets\n      args: ['--baseline', '.secrets.baseline']\nEOF\n\n# Checkov configuration for security scanning\ncat \u003e .checkov.yaml \u003c\u003cEOF\nframework:\n  - terraform\n  - secrets\n\ncheck:\n  - CKV_AWS_79  # Ensure Instance Metadata Service Version 1 is not enabled\n  - CKV_AWS_8   # Ensure Launch Configuration EBS encryption\n  - CKV_AZURE_1 # Ensure storage account encryption\n\nskip-check:\n  - CKV_AWS_23  # Skip S3 bucket public read check for specific use cases\n\noutput: cli\nquiet: false\ncompact: false\nEOF\n\n# TFLint configuration\ncat \u003e .tflint.hcl \u003c\u003cEOF\nplugin \"aws\" {\n    enabled = true\n    version = \"0.21.2\"\n    source  = \"github.com/terraform-linters/tflint-ruleset-aws\"\n}\n\nplugin \"azurerm\" {\n    enabled = true\n    version = \"0.21.0\"\n    source  = \"github.com/terraform-linters/tflint-ruleset-azurerm\"\n}\n\nrule \"terraform_unused_declarations\" {\n  enabled = true\n}\n\nrule \"terraform_naming_convention\" {\n  enabled = true\n  format  = \"snake_case\"\n}\nEOF\n```\n\n### Policy as Code with OPA\n\n```bash\n# OPA (Open Policy Agent) security policies\ncat \u003e policy/security.rego \u003c\u003cEOF\npackage terraform.security\n\n# Deny instances without encryption\ndeny[reason] {\n    resource := input.resource_changes[_]\n    resource.type == \"aws_instance\"\n    resource.change.after.root_block_device[_].encrypted == false\n    reason := \"AWS instances must have encrypted root volumes\"\n}\n\n# Deny public S3 buckets\ndeny[reason] {\n    resource := input.resource_changes[_]\n    resource.type == \"aws_s3_bucket_public_access_block\"\n    resource.change.after.block_public_acls == false\n    reason := \"S3 buckets must block public access\"\n}\n\n# Require specific instance types in production\ndeny[reason] {\n    resource := input.resource_changes[_]\n    resource.type == \"aws_instance\"\n    instance_type := resource.change.after.instance_type\n    not allowed_instance_type(instance_type)\n    workspace := input.terraform_version.workspace\n    workspace == \"production\"\n    reason := sprintf(\"Production instances must use approved instance types, got: %v\", [instance_type])\n}\n\nallowed_instance_type(instance_type) {\n    allowed_types := [\"t3.micro\", \"t3.small\", \"t3.medium\", \"m5.large\", \"m5.xlarge\"]\n    instance_type in allowed_types\n}\nEOF\n\n# Policy validation script\ncat \u003e scripts/validate-policy.sh \u003c\u003c'EOF'\n#!/bin/bash\n\n# Generate Terraform plan\nterraform plan -out=tfplan\nterraform show -json tfplan \u003e tfplan.json\n\n# Validate against policies\nconftest test tfplan.json --policy policy/\n\n# Cleanup\nrm tfplan tfplan.json\nEOF\n\nchmod +x scripts/validate-policy.sh\n```\n\n## 9. Database Setup\n\nTerraform doesn't require a traditional database, but it does use state files and can integrate with various storage backends:\n\n### State Storage Backends\n\n```bash\n# PostgreSQL backend (for Terraform Enterprise)\ncat \u003e backend-postgres.tf \u003c\u003cEOF\nterraform {\n  backend \"pg\" {\n    conn_str = \"postgres://user:pass@localhost/terraform_backend?sslmode=require\"\n  }\n}\nEOF\n\n# Consul backend for distributed state\ncat \u003e backend-consul.tf \u003c\u003cEOF\nterraform {\n  backend \"consul\" {\n    address = \"consul.company.com:8500\"\n    scheme  = \"https\"\n    path    = \"terraform/infrastructure\"\n  }\n}\nEOF\n\n# etcd backend\ncat \u003e backend-etcd.tf \u003c\u003cEOF\nterraform {\n  backend \"etcdv3\" {\n    endpoints = [\"http://etcd1:2379\", \"http://etcd2:2379\", \"http://etcd3:2379\"]\n    lock      = true\n    prefix    = \"terraform-state/\"\n  }\n}\nEOF\n```\n\n### Database Infrastructure Management\n\n```bash\n# Database deployment with Terraform\ncat \u003e database.tf \u003c\u003cEOF\n# RDS instance with Multi-AZ\nresource \"aws_db_instance\" \"main\" {\n  identifier = \"${var.project_name}-db\"\n  \n  engine         = \"postgresql\"\n  engine_version = \"15.4\"\n  instance_class = \"db.t3.micro\"\n  \n  allocated_storage     = 20\n  max_allocated_storage = 100\n  storage_type         = \"gp3\"\n  storage_encrypted    = true\n  kms_key_id          = aws_kms_key.rds.arn\n  \n  db_name  = var.database_name\n  username = var.database_username\n  password = var.database_password\n  port     = 5432\n  \n  multi_az               = true\n  publicly_accessible    = false\n  backup_retention_period = 7\n  backup_window          = \"03:00-04:00\"\n  maintenance_window     = \"sun:04:00-sun:05:00\"\n  \n  skip_final_snapshot = false\n  final_snapshot_identifier = \"${var.project_name}-db-final-snapshot\"\n  \n  vpc_security_group_ids = [aws_security_group.rds.id]\n  db_subnet_group_name   = aws_db_subnet_group.main.name\n  \n  tags = var.common_tags\n}\n\n# Database subnet group\nresource \"aws_db_subnet_group\" \"main\" {\n  name       = \"${var.project_name}-db-subnet-group\"\n  subnet_ids = var.private_subnet_ids\n\n  tags = merge(var.common_tags, {\n    Name = \"${var.project_name}-db-subnet-group\"\n  })\n}\n\n# KMS key for RDS encryption\nresource \"aws_kms_key\" \"rds\" {\n  description             = \"KMS key for RDS encryption\"\n  deletion_window_in_days = 7\n\n  tags = merge(var.common_tags, {\n    Name = \"${var.project_name}-rds-kms-key\"\n  })\n}\nEOF\n```\n\n## 10. Performance Optimization\n\n### Terraform Performance Tuning\n\n```bash\n# Optimize Terraform execution\ncat \u003e terraform.tfvars \u003c\u003cEOF\n# Performance settings\nterraform_parallelism = 10\nterraform_refresh = true\nterraform_upgrade = false\nEOF\n\n# Performance optimization script\ncat \u003e scripts/optimize-terraform.sh \u003c\u003c'EOF'\n#!/bin/bash\n\n# Increase parallelism for faster execution\nexport TF_CLI_ARGS_plan=\"-parallelism=10\"\nexport TF_CLI_ARGS_apply=\"-parallelism=10\"\n\n# Use faster JSON output for large states\nexport TF_CLI_ARGS_show=\"-json\"\n\n# Optimize provider caching\nexport TF_PLUGIN_CACHE_DIR=\"$HOME/.terraform.d/plugin-cache\"\nmkdir -p \"$TF_PLUGIN_CACHE_DIR\"\n\n# Performance monitoring\necho \"Starting Terraform operation at $(date)\"\ntime terraform \"$@\"\necho \"Completed Terraform operation at $(date)\"\nEOF\n\nchmod +x scripts/optimize-terraform.sh\n```\n\n### Large Infrastructure Management\n\n```bash\n# Workspace and module organization\ncat \u003e modules/infrastructure/main.tf \u003c\u003cEOF\n# Optimized module structure for large deployments\nterraform {\n  required_providers {\n    aws = {\n      source  = \"hashicorp/aws\"\n      version = \"~\u003e 5.0\"\n    }\n  }\n}\n\n# Use data sources efficiently\ndata \"aws_availability_zones\" \"available\" {\n  state = \"available\"\n  \n  # Cache this data to avoid repeated API calls\n  lifecycle {\n    postcondition {\n      condition     = length(self.names) \u003e= 2\n      error_message = \"At least 2 availability zones required.\"\n    }\n  }\n}\n\n# Optimize resource creation with for_each\nresource \"aws_subnet\" \"private\" {\n  for_each = toset(slice(data.aws_availability_zones.available.names, 0, var.subnet_count))\n  \n  vpc_id            = aws_vpc.main.id\n  cidr_block        = cidrsubnet(var.vpc_cidr, 8, index(data.aws_availability_zones.available.names, each.value) + 10)\n  availability_zone = each.value\n  \n  tags = merge(var.common_tags, {\n    Name = \"${var.name_prefix}-private-${each.value}\"\n    Type = \"private\"\n  })\n}\n\n# Use locals for complex computations\nlocals {\n  # Pre-compute values to avoid recalculation\n  availability_zones = slice(data.aws_availability_zones.available.names, 0, var.subnet_count)\n  \n  # Create maps for efficient lookups\n  subnet_map = {\n    for subnet in aws_subnet.private : \n    subnet.availability_zone =\u003e subnet.id\n  }\n}\nEOF\n```\n\n### State Optimization\n\n```bash\n# State file optimization script\ncat \u003e scripts/optimize-state.sh \u003c\u003c'EOF'\n#!/bin/bash\n\n# Pull current state for backup\nterraform state pull \u003e state-backup-$(date +%Y%m%d_%H%M%S).json\n\n# Remove unused resources from state\nterraform state list | while read resource; do\n    if terraform plan -target=\"$resource\" | grep -q \"No changes\"; then\n        echo \"Checking if $resource can be safely removed...\"\n        # Add logic to safely remove unused resources\n    fi\ndone\n\n# Refresh state to sync with real infrastructure\nterraform refresh\n\necho \"State optimization completed\"\nEOF\n\nchmod +x scripts/optimize-state.sh\n```\n\n## 11. Monitoring\n\n### Terraform Operations Monitoring\n\n```bash\n# Terraform execution monitoring\ncat \u003e scripts/monitor-terraform.sh \u003c\u003c'EOF'\n#!/bin/bash\n\nLOG_FILE=\"/var/log/terraform/operations.log\"\nMETRICS_FILE=\"/var/log/terraform/metrics.log\"\n\n# Ensure log directory exists\nmkdir -p \"$(dirname \"$LOG_FILE\")\"\nmkdir -p \"$(dirname \"$METRICS_FILE\")\"\n\n# Function to log operations\nlog_operation() {\n    local operation=\"$1\"\n    local status=\"$2\"\n    local duration=\"$3\"\n    local timestamp=$(date '+%Y-%m-%d %H:%M:%S')\n    \n    echo \"[$timestamp] Operation: $operation, Status: $status, Duration: ${duration}s\" \u003e\u003e \"$LOG_FILE\"\n    echo \"terraform_operation_duration{operation=\\\"$operation\\\",status=\\\"$status\\\"} $duration\" \u003e\u003e \"$METRICS_FILE\"\n}\n\n# Wrapper function for terraform commands\nterraform_monitored() {\n    local operation=\"$1\"\n    shift\n    local start_time=$(date +%s)\n    local exit_code=0\n    \n    echo \"Starting Terraform $operation at $(date)\"\n    \n    if terraform \"$operation\" \"$@\"; then\n        local end_time=$(date +%s)\n        local duration=$((end_time - start_time))\n        log_operation \"$operation\" \"success\" \"$duration\"\n        echo \"Terraform $operation completed successfully in ${duration}s\"\n    else\n        exit_code=$?\n        local end_time=$(date +%s)\n        local duration=$((end_time - start_time))\n        log_operation \"$operation\" \"failure\" \"$duration\"\n        echo \"Terraform $operation failed after ${duration}s\"\n        return $exit_code\n    fi\n}\n\n# Usage: terraform_monitored plan, terraform_monitored apply, etc.\nterraform_monitored \"$@\"\nEOF\n\nchmod +x scripts/monitor-terraform.sh\n```\n\n### Infrastructure Monitoring with Terraform\n\n```bash\n# Deploy monitoring stack with Terraform\ncat \u003e monitoring.tf \u003c\u003cEOF\n# CloudWatch alarms for infrastructure\nresource \"aws_cloudwatch_metric_alarm\" \"high_cpu\" {\n  for_each = toset(module.compute.instance_ids)\n  \n  alarm_name          = \"high-cpu-${each.key}\"\n  comparison_operator = \"GreaterThanThreshold\"\n  evaluation_periods  = \"2\"\n  metric_name        = \"CPUUtilization\"\n  namespace          = \"AWS/EC2\"\n  period             = \"300\"\n  statistic          = \"Average\"\n  threshold          = \"80\"\n  alarm_description  = \"This metric monitors EC2 CPU utilization\"\n\n  dimensions = {\n    InstanceId = each.value\n  }\n\n  alarm_actions = [aws_sns_topic.alerts.arn]\n  \n  tags = var.common_tags\n}\n\n# SNS topic for alerts\nresource \"aws_sns_topic\" \"alerts\" {\n  name = \"${var.project_name}-infrastructure-alerts\"\n  \n  tags = var.common_tags\n}\n\nresource \"aws_sns_topic_subscription\" \"email_alerts\" {\n  topic_arn = aws_sns_topic.alerts.arn\n  protocol  = \"email\"\n  endpoint  = var.alert_email\n}\n\n# Log group for Terraform operations\nresource \"aws_cloudwatch_log_group\" \"terraform_ops\" {\n  name              = \"/terraform/operations\"\n  retention_in_days = 30\n  \n  tags = var.common_tags\n}\n\n# Dashboard for infrastructure monitoring\nresource \"aws_cloudwatch_dashboard\" \"main\" {\n  dashboard_name = \"${var.project_name}-infrastructure\"\n\n  dashboard_body = jsonencode({\n    widgets = [\n      {\n        type   = \"metric\"\n        x      = 0\n        y      = 0\n        width  = 12\n        height = 6\n\n        properties = {\n          metrics = [\n            [\"AWS/EC2\", \"CPUUtilization\", \"InstanceId\", module.compute.instance_ids[0]],\n          ]\n          view    = \"timeSeries\"\n          stacked = false\n          region  = var.aws_region\n          title   = \"EC2 Instance CPU\"\n          period  = 300\n        }\n      }\n    ]\n  })\n}\nEOF\n```\n\n### Terraform Cloud Monitoring\n\n```bash\n# Monitor Terraform Cloud workspaces\ncat \u003e scripts/monitor-tf-cloud.sh \u003c\u003c'EOF'\n#!/bin/bash\n\nTF_CLOUD_TOKEN=\"${TF_CLOUD_TOKEN}\"\nORGANIZATION=\"${TF_ORGANIZATION}\"\n\n# Function to get workspace status\nget_workspace_status() {\n    local workspace_name=\"$1\"\n    \n    curl -s \\\n        --header \"Authorization: Bearer $TF_CLOUD_TOKEN\" \\\n        --header \"Content-Type: application/vnd.api+json\" \\\n        \"https://app.terraform.io/api/v2/organizations/$ORGANIZATION/workspaces/$workspace_name/current-run\" \\\n        | jq -r '.data.attributes.status'\n}\n\n# Function to get workspace runs\nget_recent_runs() {\n    local workspace_id=\"$1\"\n    \n    curl -s \\\n        --header \"Authorization: Bearer $TF_CLOUD_TOKEN\" \\\n        --header \"Content-Type: application/vnd.api+json\" \\\n        \"https://app.terraform.io/api/v2/workspaces/$workspace_id/runs\" \\\n        | jq -r '.data[].attributes | \"\\(.status) - \\(.created_at)\"'\n}\n\n# Monitor critical workspaces\nWORKSPACES=(\"production-web\" \"production-database\" \"staging-environment\")\n\nfor workspace in \"${WORKSPACES[@]}\"; do\n    status=$(get_workspace_status \"$workspace\")\n    echo \"Workspace: $workspace, Status: $status\"\n    \n    if [[ \"$status\" == \"errored\" ]]; then\n        echo \"❌ ALERT: Workspace $workspace has errors!\"\n        # Send alert to monitoring system\n        curl -X POST \\\n            -H \"Content-Type: application/json\" \\\n            -d \"{\\\"text\\\": \\\"Terraform workspace $workspace has errors\\\"}\" \\\n            \"$SLACK_WEBHOOK_URL\"\n    elif [[ \"$status\" == \"planned_and_finished\" ]]; then\n        echo \"✅ Workspace $workspace is healthy\"\n    fi\ndone\nEOF\n\nchmod +x scripts/monitor-tf-cloud.sh\n```\n\n## 12. Backup and Restore\n\n### State File Backup\n\n```bash\n# Comprehensive state backup script\ncat \u003e scripts/backup-terraform-state.sh \u003c\u003c'EOF'\n#!/bin/bash\n\nBACKUP_DIR=\"/backup/terraform\"\nDATE=$(date +%Y%m%d_%H%M%S)\nENVIRONMENTS=(\"development\" \"staging\" \"production\")\n\nmkdir -p \"$BACKUP_DIR\"\n\nbackup_state() {\n    local environment=\"$1\"\n    local backup_path=\"$BACKUP_DIR/$environment\"\n    \n    echo \"Backing up $environment state...\"\n    mkdir -p \"$backup_path\"\n    \n    # Change to environment directory\n    cd \"environments/$environment\" || return 1\n    \n    # Pull current state\n    terraform state pull \u003e \"$backup_path/terraform-state-$DATE.json\"\n    \n    # Backup configuration files\n    tar -czf \"$backup_path/terraform-config-$DATE.tar.gz\" \\\n        --exclude=\".terraform\" \\\n        --exclude=\"*.tfplan\" \\\n        .\n    \n    # Backup workspace info\n    terraform workspace show \u003e \"$backup_path/current-workspace-$DATE.txt\"\n    terraform workspace list \u003e \"$backup_path/all-workspaces-$DATE.txt\"\n    \n    # Backup provider versions\n    terraform version \u003e \"$backup_path/terraform-version-$DATE.txt\"\n    \n    cd - \u003e /dev/null\n    \n    echo \"✅ Backup completed for $environment\"\n}\n\n# Backup all environments\nfor env in \"${ENVIRONMENTS[@]}\"; do\n    if [[ -d \"environments/$env\" ]]; then\n        backup_state \"$env\"\n    else\n        echo \"⚠️  Environment directory not found: environments/$env\"\n    fi\ndone\n\n# Create consolidated backup\ncd \"$BACKUP_DIR\"\ntar -czf \"terraform-complete-backup-$DATE.tar.gz\" \\\n    --exclude=\"*.tar.gz\" \\\n    .\n\n# Upload to cloud storage\nif command -v aws \u0026\u003e /dev/null; then\n    aws s3 cp \"terraform-complete-backup-$DATE.tar.gz\" \\\n        s3://terraform-backups/\nfi\n\nif command -v az \u0026\u003e /dev/null; then\n    az storage blob upload \\\n        --file \"terraform-complete-backup-$DATE.tar.gz\" \\\n        --container-name terraform-backups \\\n        --name \"terraform-complete-backup-$DATE.tar.gz\"\nfi\n\nif command -v gsutil \u0026\u003e /dev/null; then\n    gsutil cp \"terraform-complete-backup-$DATE.tar.gz\" \\\n        gs://terraform-backups/\nfi\n\n# Cleanup old backups (keep last 30 days)\nfind \"$BACKUP_DIR\" -name \"terraform-complete-backup-*.tar.gz\" \\\n    -mtime +30 -delete\n\necho \"🎉 All backups completed successfully\"\nEOF\n\nchmod +x scripts/backup-terraform-state.sh\n```\n\n### Disaster Recovery Procedures\n\n```bash\n# Disaster recovery script\ncat \u003e scripts/disaster-recovery.sh \u003c\u003c'EOF'\n#!/bin/bash\n\nBACKUP_FILE=\"$1\"\nTARGET_ENVIRONMENT=\"$2\"\n\nif [[ -z \"$BACKUP_FILE\" || -z \"$TARGET_ENVIRONMENT\" ]]; then\n    echo \"Usage: $0 \u003cbackup-file.tar.gz\u003e \u003ctarget-environment\u003e\"\n    echo \"Example: $0 terraform-complete-backup-20240115_143000.tar.gz production\"\n    exit 1\nfi\n\n# Verify backup file exists\nif [[ ! -f \"$BACKUP_FILE\" ]]; then\n    echo \"❌ Backup file not found: $BACKUP_FILE\"\n    exit 1\nfi\n\n# Create recovery directory\nRECOVERY_DIR=\"/tmp/terraform-recovery-$(date +%s)\"\nmkdir -p \"$RECOVERY_DIR\"\n\n# Extract backup\necho \"📦 Extracting backup...\"\ntar -xzf \"$BACKUP_FILE\" -C \"$RECOVERY_DIR\"\n\n# Navigate to target environment\ncd \"environments/$TARGET_ENVIRONMENT\" || {\n    echo \"❌ Target environment directory not found: environments/$TARGET_ENVIRONMENT\"\n    exit 1\n}\n\n# Backup current state before recovery\necho \"💾 Backing up current state...\"\nterraform state pull \u003e \"current-state-backup-$(date +%Y%m%d_%H%M%S).json\"\n\n# Import recovered state\nRECOVERED_STATE=\"$RECOVERY_DIR/$TARGET_ENVIRONMENT/terraform-state-*.json\"\nif [[ -f $RECOVERED_STATE ]]; then\n    echo \"🔄 Restoring state from backup...\"\n    terraform state push \"$RECOVERED_STATE\"\nelse\n    echo \"❌ No state file found in backup for environment: $TARGET_ENVIRONMENT\"\n    exit 1\nfi\n\n# Verify state consistency\necho \"🔍 Verifying state consistency...\"\nif terraform plan -detailed-exitcode; then\n    echo \"✅ State restored successfully - no drift detected\"\nelif [[ $? -eq 2 ]]; then\n    echo \"⚠️  State restored but drift detected - manual review required\"\n    terraform plan\nelse\n    echo \"❌ State restoration failed - check error messages above\"\n    exit 1\nfi\n\n# Cleanup\nrm -rf \"$RECOVERY_DIR\"\n\necho \"🎉 Disaster recovery completed for environment: $TARGET_ENVIRONMENT\"\necho \"💡 Please review the plan output and apply changes if necessary\"\nEOF\n\nchmod +x scripts/disaster-recovery.sh\n```\n\n### State Migration and Refactoring\n\n```bash\n# State migration script for refactoring\ncat \u003e scripts/migrate-state.sh \u003c\u003c'EOF'\n#!/bin/bash\n\n# Function to safely move resources in state\nmove_resource() {\n    local old_address=\"$1\"\n    local new_address=\"$2\"\n    \n    echo \"Moving $old_address to $new_address\"\n    \n    # Check if source resource exists\n    if terraform state show \"$old_address\" \u0026\u003e/dev/null; then\n        terraform state mv \"$old_address\" \"$new_address\"\n        echo \"✅ Successfully moved $old_address to $new_address\"\n    else\n        echo \"⚠️  Resource not found: $old_address\"\n    fi\n}\n\n# Function to import existing resources\nimport_resource() {\n    local resource_address=\"$1\"\n    local resource_id=\"$2\"\n    \n    echo \"Importing $resource_id as $resource_address\"\n    \n    if terraform import \"$resource_address\" \"$resource_id\"; then\n        echo \"✅ Successfully imported $resource_id as $resource_address\"\n    else\n        echo \"❌ Failed to import $resource_id\"\n    fi\n}\n\n# Example migrations\necho \"🔄 Starting state migrations...\"\n\n# Move resources to modules\nmove_resource \"aws_instance.web\" \"module.web_servers.aws_instance.main[0]\"\nmove_resource \"aws_security_group.web\" \"module.web_servers.aws_security_group.main\"\n\n# Import existing resources\nimport_resource \"aws_s3_bucket.existing_bucket\" \"existing-bucket-name\"\n\n# Remove resources that are no longer managed\nterraform state rm aws_instance.deprecated\n\necho \"🎉 State migrations completed\"\necho \"💡 Run 'terraform plan' to verify changes\"\nEOF\n\nchmod +x scripts/migrate-state.sh\n```\n\n## 13. Troubleshooting\n\n### Common Issues and Solutions\n\n```bash\n# Terraform troubleshooting script\ncat \u003e scripts/troubleshoot-terraform.sh \u003c\u003c'EOF'\n#!/bin/bash\n\necho \"🔧 Terraform Troubleshooting Tool\"\necho \"================================\"\n\n# Check Terraform installation\ncheck_installation() {\n    echo \"📋 Checking Terraform installation...\"\n    \n    if command -v terraform \u0026\u003e /dev/null; then\n        terraform version\n        echo \"✅ Terraform is installed\"\n    else\n        echo \"❌ Terraform is not installed or not in PATH\"\n        return 1\n    fi\n}\n\n# Check configuration syntax\ncheck_configuration() {\n    echo \"📋 Checking configuration syntax...\"\n    \n    if terraform fmt -check -diff; then\n        echo \"✅ Configuration is properly formatted\"\n    else\n        echo \"⚠️  Configuration formatting issues found\"\n        terraform fmt -diff\n    fi\n    \n    if terraform validate; then\n        echo \"✅ Configuration is valid\"\n    else\n        echo \"❌ Configuration validation failed\"\n        return 1\n    fi\n}\n\n# Check provider authentication\ncheck_providers() {\n    echo \"📋 Checking provider authentication...\"\n    \n    # AWS\n    if aws sts get-caller-identity \u0026\u003e/dev/null; then\n        echo \"✅ AWS credentials are valid\"\n    else\n        echo \"⚠️  AWS credentials may be invalid or not configured\"\n    fi\n    \n    # Azure\n    if az account show \u0026\u003e/dev/null; then\n        echo \"✅ Azure credentials are valid\"\n    else\n        echo \"⚠️  Azure credentials may be invalid or not configured\"\n    fi\n    \n    # GCP\n    if gcloud auth list --filter=status:ACTIVE --format=\"value(account)\" \u0026\u003e/dev/null; then\n        echo \"✅ GCP credentials are valid\"\n    else\n        echo \"⚠️  GCP credentials may be invalid or not configured\"\n    fi\n}\n\n# Check state file\ncheck_state() {\n    echo \"📋 Checking state file...\"\n    \n    if terraform state list \u0026\u003e/dev/null; then\n        resource_count=$(terraform state list | wc -l)\n        echo \"✅ State file is accessible with $resource_count resources\"\n    else\n        echo \"❌ Cannot access state file\"\n        return 1\n    fi\n}\n\n# Check for common issues\ncheck_common_issues() {\n    echo \"📋 Checking for common issues...\"\n    \n    # Check for lock file\n    if [[ -f \".terraform.lock.hcl\" ]]; then\n        echo \"✅ Lock file exists\"\n    else\n        echo \"⚠️  Lock file missing - run 'terraform init'\"\n    fi\n    \n    # Check for local state file in production\n    if [[ -f \"terraform.tfstate\" ]] \u0026\u0026 [[ $(terraform workspace show) == \"production\" ]]; then\n        echo \"⚠️  Local state file detected in production workspace\"\n        echo \"    Consider using remote state for production\"\n    fi\n    \n    # Check for hardcoded secrets\n    if grep -r \"password\\s*=\\s*\\\"\" . --include=\"*.tf\" --include=\"*.tfvars\" 2\u003e/dev/null; then\n        echo \"⚠️  Potential hardcoded passwords found\"\n    fi\n    \n    # Check for large state file\n    if [[ -f \"terraform.tfstate\" ]]; then\n        state_size=$(stat -f%z \"terraform.tfstate\" 2\u003e/dev/null || stat -c%s \"terraform.tfstate\" 2\u003e/dev/null)\n        if [[ $state_size -gt 10485760 ]]; then  # 10MB\n            echo \"⚠️  Large state file detected ($(($state_size / 1024 / 1024))MB)\"\n            echo \"    Consider splitting into smaller configurations\"\n        fi\n    fi\n}\n\n# Debug mode information\ndebug_info() {\n    echo \"📋 Debug information...\"\n    \n    echo \"Working directory: $(pwd)\"\n    echo \"Terraform workspace: $(terraform workspace show)\"\n    echo \"Environment variables:\"\n    env | grep -E \"^(TF_|AWS_|ARM_|GOOGLE_)\" | sed 's/=.*/=***/' | sort\n}\n\n# Run all checks\nrun_all_checks() {\n    check_installation || return 1\n    check_configuration || return 1\n    check_providers\n    check_state || return 1\n    check_common_issues\n    debug_info\n}\n\n# Main execution\ncase \"${1:-all}\" in\n    \"installation\")\n        check_installation\n        ;;\n    \"config\")\n        check_configuration\n        ;;\n    \"providers\")\n        check_providers\n        ;;\n    \"state\")\n        check_state\n        ;;\n    \"common\")\n        check_common_issues\n        ;;\n    \"debug\")\n        debug_info\n        ;;\n    \"all\")\n        run_all_checks\n        ;;\n    *)\n        echo \"Usage: $0 [installation|config|providers|state|common|debug|all]\"\n        exit 1\n        ;;\nesac\nEOF\n\nchmod +x scripts/troubleshoot-terraform.sh\n```\n\n### Advanced Debugging\n\n```bash\n# Advanced debugging techniques\ncat \u003e scripts/debug-terraform.sh \u003c\u003c'EOF'\n#!/bin/bash\n\n# Enable debug logging\nexport TF_LOG=DEBUG\nexport TF_LOG_PATH=\"terraform-debug-$(date +%Y%m%d_%H%M%S).log\"\n\n# Create debug session\ndebug_session() {\n    local operation=\"$1\"\n    shift\n    \n    echo \"🐛 Starting debug session for: $operation\"\n    echo \"Debug log: $TF_LOG_PATH\"\n    \n    # Capture detailed timing information\n    time terraform \"$operation\" \"$@\" 2\u003e\u00261 | tee -a \"$TF_LOG_PATH\"\n    \n    local exit_code=${PIPESTATUS[0]}\n    \n    if [[ $exit_code -ne 0 ]]; then\n        echo \"❌ Operation failed with exit code: $exit_code\"\n        echo \"📄 Last 50 lines of debug log:\"\n        tail -50 \"$TF_LOG_PATH\"\n    else\n        echo \"✅ Operation completed successfully\"\n    fi\n    \n    return $exit_code\n}\n\n# Analyze state file for issues\nanalyze_state() {\n    echo \"🔍 Analyzing state file...\"\n    \n    # Check for orphaned resources\n    echo \"Checking for potential orphaned resources...\"\n    terraform state list | while read resource; do\n        if ! terraform plan -target=\"$resource\" -detailed-exitcode \u003e/dev/null 2\u003e\u00261; then\n            echo \"⚠️  Potential issue with resource: $resource\"\n        fi\n    done\n    \n    # Check for large resources in state\n    echo \"Checking for large resources...\"\n    terraform state pull | jq -r '.resources[] | select(.instances[0].attributes | length \u003e 50) | .address' 2\u003e/dev/null | head -10\n}\n\n# Provider debug information\ndebug_providers() {\n    echo \"🔍 Debugging provider issues...\"\n    \n    # Show provider configuration\n    terraform providers\n    \n    # Check provider cache\n    if [[ -d \"$HOME/.terraform.d/plugin-cache\" ]]; then\n        echo \"Provider cache contents:\"\n        ls -la \"$HOME/.terraform.d/plugin-cache\"\n    fi\n    \n    # Check for provider version conflicts\n    terraform version -json | jq '.provider_selections' 2\u003e/dev/null\n}\n\n# Network and API debugging\ndebug_network() {\n    echo \"🌐 Debugging network connectivity...\"\n    \n    # Test connectivity to common endpoints\n    local endpoints=(\n        \"https://releases.hashicorp.com\"\n        \"https://registry.terraform.io\"\n        \"https://api.github.com\"\n        \"https://aws.amazon.com\"\n        \"https://management.azure.com\"\n        \"https://www.googleapis.com\"\n    )\n    \n    for endpoint in \"${endpoints[@]}\"; do\n        if curl -s --connect-timeout 5 \"$endpoint\" \u003e/dev/null; then\n            echo \"✅ $endpoint - OK\"\n        else\n            echo \"❌ $endpoint - FAILED\"\n        fi\n    done\n}\n\n# Performance analysis\nanalyze_performance() {\n    echo \"📊 Analyzing Terraform performance...\"\n    \n    # Generate and analyze dependency graph\n    terraform graph \u003e dependency-graph.dot\n    \n    # Count resources by type\n    echo \"Resource distribution:\"\n    terraform state list | cut -d. -f1 | sort | uniq -c | sort -nr | head -10\n    \n    # Estimate plan time based on resources\n    resource_count=$(terraform state list | wc -l)\n    estimated_time=$((resource_count * 2))  # Rough estimate: 2 seconds per resource\n    echo \"Estimated plan time: ${estimated_time} seconds for $resource_count resources\"\n}\n\n# Usage\ncase \"${1:-help}\" in\n    \"session\")\n        shift\n        debug_session \"$@\"\n        ;;\n    \"state\")\n        analyze_state\n        ;;\n    \"providers\")\n        debug_providers\n        ;;\n    \"network\")\n        debug_network\n        ;;\n    \"performance\")\n        analyze_performance\n        ;;\n    \"all\")\n        debug_providers\n        debug_network\n        analyze_state\n        analyze_performance\n        ;;\n    \"help\"|*)\n        echo \"Usage: $0 [session|state|providers|network|performance|all]\"\n        echo \"\"\n        echo \"  session \u003coperation\u003e [args]  - Debug specific Terraform operation\"\n        echo \"  state                       - Analyze state file for issues\"\n        echo \"  providers                   - Debug provider configuration\"\n        echo \"  network                     - Test network connectivity\"\n        echo \"  performance                 - Analyze performance characteristics\"\n        echo \"  all                         - Run all debug checks\"\n        ;;\nesac\nEOF\n\nchmod +x scripts/debug-terraform.sh\n```\n\n## 14. Maintenance\n\n### Update Procedures\n\n```bash\n# Terraform update script\ncat \u003e scripts/update-terraform.sh \u003c\u003c'EOF'\n#!/bin/bash\n\nCURRENT_VERSION=$(terraform version -json | jq -r '.terraform_version')\necho \"Current Terraform version: $CURRENT_VERSION\"\n\n# Check for latest version\ncheck_latest_version() {\n    local latest_version\n    latest_version=$(curl -s https://api.github.com/repos/hashicorp/terraform/releases/latest | jq -r '.tag_name' | sed 's/v//')\n    echo \"Latest Terraform version: $latest_version\"\n    \n    if [[ \"$CURRENT_VERSION\" != \"$latest_version\" ]]; then\n        echo \"⚠️  Update available: $CURRENT_VERSION → $latest_version\"\n        return 1\n    else\n        echo \"✅ Terraform is up to date\"\n        return 0\n    fi\n}\n\n# Update using package manager\nupdate_terraform() {\n    echo \"🔄 Updating Terraform...\"\n    \n    if command -v apt \u0026\u003e/dev/null; then\n        sudo apt update \u0026\u0026 sudo apt upgrade terraform\n    elif command -v yum \u0026\u003e/dev/null; then\n        sudo yum update terraform\n    elif command -v dnf \u0026\u003e/dev/null; then\n        sudo dnf update terraform\n    elif command -v pacman \u0026\u003e/dev/null; then\n        sudo pacman -Syu terraform\n    elif command -v zypper \u0026\u003e/dev/null; then\n        sudo zypper update terraform\n    elif command -v brew \u0026\u003e/dev/null; then\n        brew upgrade terraform\n    else\n        echo \"❌ No supported package manager found\"\n        echo \"💡 Please update manually from: https://releases.hashicorp.com/terraform/\"\n        return 1\n    fi\n}\n\n# Update providers\nupdate_providers() {\n    echo \"🔄 Updating providers...\"\n    terraform init -upgrade\n}\n\n# Verify update\nverify_update() {\n    echo \"🔍 Verifying update...\"\n    \n    terraform version\n    \n    # Test basic functionality\n    if terraform validate; then\n        echo \"✅ Update verification successful\"\n    else\n        echo \"❌ Update verification failed\"\n        return 1\n    fi\n}\n\n# Main update process\nmain() {\n    if check_latest_version; then\n        exit 0\n    fi\n    \n    echo \"Proceed with update? (y/N)\"\n    read -r response\n    \n    if [[ \"$response\" =~ ^[Yy]$ ]]; then\n        update_terraform || exit 1\n        update_providers || exit 1\n        verify_update || exit 1\n        echo \"🎉 Terraform update completed successfully\"\n    else\n        echo \"Update cancelled\"\n    fi\n}\n\nmain \"$@\"\nEOF\n\nchmod +x scripts/update-terraform.sh\n```\n\n### Maintenance Tasks\n\n```bash\n# Comprehensive maintenance script\ncat \u003e scripts/terraform-maintenance.sh \u003c\u003c'EOF'\n#!/bin/bash\n\nMAINTENANCE_LOG=\"/var/log/terraform-maintenance-$(date +%Y%m%d_%H%M%S).log\"\n\nlog() {\n    echo \"$(date '+%Y-%m-%d %H:%M:%S') - $1\" | tee -a \"$MAINTENANCE_LOG\"\n}\n\n# Cleanup old plan files\ncleanup_plans() {\n    log \"🧹 Cleaning up old plan files...\"\n    find . -name \"*.tfplan\" -mtime +7 -delete\n    find . -name \"*.tfplan.json\" -mtime +7 -delete\n    log \"✅ Plan file cleanup completed\"\n}\n\n# Cleanup provider cache\ncleanup_provider_cache() {\n    log \"🧹 Cleaning up provider cache...\"\n    if [[ -d \"$HOME/.terraform.d/plugin-cache\" ]]; then\n        # Remove providers older than 30 days\n        find \"$HOME/.terraform.d/plugin-cache\" -type f -mtime +30 -delete\n        \n        # Remove empty directories\n        find \"$HOME/.terraform.d/plugin-cache\" -type d -empty -delete\n        \n        cache_size=$(du -sh \"$HOME/.terraform.d/plugin-cache\" 2\u003e/dev/null | cut -f1)\n        log \"✅ Provider cache cleanup completed - current size: $cache_size\"\n    fi\n}\n\n# Validate all configurations\nvalidate_configurations() {\n    log \"🔍 Validating all configurations...\"\n    \n    local validation_failed=false\n    \n    # Find all directories with Terraform files\n    find . -name \"*.tf\" -exec dirname {} \\; | sort -u | while read -r dir; do\n        log \"Validating: $dir\"\n        cd \"$dir\" || continue\n        \n        if terraform validate; then\n            log \"✅ $dir validation passed\"\n        else\n            log \"❌ $dir validation failed\"\n            validation_failed=true\n        fi\n        \n        cd - \u003e /dev/null\n    done\n    \n    if [[ \"$validation_failed\" == \"true\" ]]; then\n        log \"⚠️  Some validations failed - please review\"\n    else\n        log \"✅ All validations passed\"\n    fi\n}\n\n# Check for deprecated features\ncheck_deprecated() {\n    log \"🔍 Checking for deprecated features...\"\n    \n    # Check for deprecated syntax\n    local deprecated_patterns=(\n        \"provider\\s+\\\"[^\\\"]+\\\"\\s+{\" # Old provider syntax\n        \"terraform\\s+{[^}]*version\\s*=\" # Old terraform version constraints\n        \"ignore_changes\\s*=\" # Old ignore_changes syntax\n    )\n    \n    for pattern in \"${deprecated_patterns[@]}\"; do\n        if grep -r \"$pattern\" . --include=\"*.tf\" 2\u003e/dev/null; then\n            log \"⚠️  Deprecated pattern found: $pattern\"\n        fi\n    done\n    \n    log \"✅ Deprecation check completed\"\n}\n\n# Security audit\nsecurity_audit() {\n    log \"🔒 Performing security audit...\"\n    \n    # Check for potential security issues\n    local security_issues=()\n    \n    # Check for hardcoded secrets\n    if grep -r -i \"password\\s*=\\s*\\\"[^$]\" . --include=\"*.tf\" --include=\"*.tfvars\" 2\u003e/dev/null; then\n        security_issues+=(\"Potential hardcoded passwords\")\n    fi\n    \n    # Check for public access\n    if grep -r \"0.0.0.0/0\" . --include=\"*.tf\" 2\u003e/dev/null; then\n        security_issues+=(\"Public access (0.0.0.0/0) found\")\n    fi\n    \n    # Check for unencrypted resources\n    if grep -r \"encrypt.*=.*false\" . --include=\"*.tf\" 2\u003e/dev/null; then\n        security_issues+=(\"Unencrypted resources found\")\n    fi\n    \n    if [[ ${#security_issues[@]} -gt 0 ]]; then\n        log \"⚠️  Security issues found:\"\n        for issue in \"${security_issues[@]}\"; do\n            log \"  - $issue\"\n        done\n    else\n        log \"✅ No obvious security issues found\"\n    fi\n}\n\n# State health check\nstate_health_check() {\n    log \"🏥 Performing state health check...\"\n    \n    # Check state file size\n    if [[ -f \"terraform.tfstate\" ]]; then\n        state_size=$(stat -f%z \"terraform.tfstate\" 2\u003e/dev/null || stat -c%s \"terraform.tfstate\" 2\u003e/dev/null)\n        state_size_mb=$((state_size / 1024 / 1024))\n        \n        if [[ $state_size_mb -gt 50 ]]; then\n            log \"⚠️  Large state file detected: ${state_size_mb}MB\"\n        else\n            log \"✅ State file size OK: ${state_size_mb}MB\"\n        fi\n    fi\n    \n    # Check for drift\n    if terraform plan -detailed-exitcode \u003e /dev/null 2\u003e\u00261; then\n        log \"✅ No infrastructure drift detected\"\n    else\n        exit_code=$?\n        if [[ $exit_code -eq 2 ]]; then\n            log \"⚠️  Infrastructure drift detected\"\n        else\n            log \"❌ Error checking for drift\"\n        fi\n    fi\n}\n\n# Generate maintenance report\ngenerate_report() {\n    log \"📊 Generating maintenance report...\"\n    \n    local report_file=\"/tmp/terraform-maintenance-report-$(date +%Y%m%d_%H%M%S).md\"\n    \n    cat \u003e \"$report_file\" \u003c\u003cEOF\n# Terraform Maintenance Report\n\n**Date:** $(date)\n**Duration:** $((SECONDS / 60)) minutes\n\n## Summary\n\n- Configuration validation: $(grep \"validation\" \"$MAINTENANCE_LOG\" | grep -c \"passed\")\n- Security audit: Completed\n- State health check: Completed\n- Cleanup operations: Completed\n\n## Recommendations\n\n$(grep \"⚠️\" \"$MAINTENANCE_LOG\" | sed 's/.*⚠️  /- /')\n\n## Full Log\n\n\\`\\`\\`\n$(cat \"$MAINTENANCE_LOG\")\n\\`\\`\\`\nEOF\n    \n    log \"📄 Maintenance report generated: $report_file\"\n    \n    # Email report if configured\n    if [[ -n \"$MAINTENANCE_EMAIL\" ]]; then\n        mail -s \"Terraform Maintenance Report - $(date)\" \"$MAINTENANCE_EMAIL\" \u003c \"$report_file\"\n        log \"📧 Report emailed to: $MAINTENANCE_EMAIL\"\n    fi\n}\n\n# Main maintenance routine\nmain() {\n    log \"🚀 Starting Terraform maintenance...\"\n    \n    cleanup_plans\n    cleanup_provider_cache\n    validate_configurations\n    check_deprecated\n    security_audit\n    state_health_check\n    generate_report\n    \n    log \"🎉 Terraform maintenance completed\"\n    log \"📊 Total runtime: $((SECONDS / 60)) minutes\"\n}\n\n# Run maintenance\nmain \"$@\"\nEOF\n\nchmod +x scripts/terraform-maintenance.sh\n\n# Schedule maintenance with cron\ncat \u003e scripts/schedule-maintenance.sh \u003c\u003c'EOF'\n#!/bin/bash\n\n# Add to crontab for weekly maintenance\n(crontab -l 2\u003e/dev/null; echo \"0 2 * * 0 /path/to/terraform-maintenance.sh\") | crontab -\n\necho \"✅ Weekly maintenance scheduled for Sundays at 2 AM\"\nEOF\n\nchmod +x scripts/schedule-maintenance.sh\n```\n\n## 15. Integration Examples\n\n### CI/CD Pipeline Integration\n\n```bash\n# GitHub Actions workflow\nmkdir -p .github/workflows\ncat \u003e .github/workflows/terraform.yml \u003c\u003cEOF\nname: Terraform Multi-Cloud Deployment\n\non:\n  push:\n    branches: [ main, develop ]\n  pull_request:\n    branches: [ main ]\n\nenv:\n  TF_VERSION: 1.6.4\n\njobs:\n  terraform:\n    runs-on: ubuntu-latest\n    strategy:\n      matrix:\n        environment: [development, staging, production]\n        \n    steps:\n    - name: Checkout code\n      uses: actions/checkout@v4\n    \n    - name: Setup Terraform\n      uses: hashicorp/setup-terraform@v3\n      with:\n        terraform_version: \\${{ env.TF_VERSION }}\n        cli_config_credentials_token: \\${{ secrets.TF_CLOUD_TOKEN }}\n    \n    - name: Configure AWS credentials\n      uses: aws-actions/configure-aws-credentials@v4\n      with:\n        aws-access-key-id: \\${{ secrets.AWS_ACCESS_KEY_ID }}\n        aws-secret-access-key: \\${{ secrets.AWS_SECRET_ACCESS_KEY }}\n        aws-region: us-west-2\n    \n    - name: Terraform Format Check\n      run: terraform fmt -check -recursive\n    \n    - name: Terraform Initialize\n      run: terraform init\n      working-directory: environments/\\${{ matrix.environment }}\n    \n    - name: Terraform Validate\n      run: terraform validate\n      working-directory: environments/\\${{ matrix.environment }}\n    \n    - name: Terraform Plan\n      run: terraform plan -var-file=\"\\${{ matrix.environment }}.tfvars\"\n      working-directory: environments/\\${{ matrix.environment }}\n    \n    - name: Security Scan with Checkov\n      uses: bridgecrewio/checkov-action@master\n      with:\n        directory: .\n        framework: terraform\n        output_format: sarif\n        output_file_path: checkov.sarif\n    \n    - name: Upload Checkov results\n      uses: github/codeql-action/upload-sarif@v2\n      if: always()\n      with:\n        sarif_file: checkov.sarif\n    \n    - name: Terraform Apply (Production)\n      if: github.ref == 'refs/heads/main' \u0026\u0026 matrix.environment == 'production'\n      run: terraform apply -auto-approve -var-file=\"production.tfvars\"\n      working-directory: environments/production\nEOF\n```\n\n### GitLab CI Integration\n\n```bash\ncat \u003e .gitlab-ci.yml \u003c\u003cEOF\nstages:\n  - validate\n  - plan\n  - apply\n  - destroy\n\nvariables:\n  TF_ROOT: \\${CI_PROJECT_DIR}\n  TF_VERSION: \"1.6.4\"\n  TF_IN_AUTOMATION: \"true\"\n\ncache:\n  key: \"\\${TF_ROOT}\"\n  paths:\n    - \\${TF_ROOT}/.terraform\n\nbefore_script:\n  - cd \\${TF_ROOT}\n  - terraform version\n  - terraform init\n\nvalidate:\n  stage: validate\n  script:\n    - terraform fmt -check -recursive\n    - terraform validate\n    - |\n      for dir in environments/*/; do\n        cd \"\\$dir\"\n        terraform validate\n        cd -\n      done\n  rules:\n    - if: '\\$CI_MERGE_REQUEST_IID'\n    - if: '\\$CI_COMMIT_BRANCH == \\$CI_DEFAULT_BRANCH'\n\nplan:production:\n  stage: plan\n  script:\n    - cd environments/production\n    - terraform plan -var-file=\"production.tfvars\" -out=\"production.tfplan\"\n  artifacts:\n    paths:\n      - environments/production/production.tfplan\n    expire_in: 1 week\n  rules:\n    - if: '\\$CI_COMMIT_BRANCH == \\$CI_DEFAULT_BRANCH'\n\napply:production:\n  stage: apply\n  script:\n    - cd environments/production\n    - terraform apply -input=false \"production.tfplan\"\n  dependencies:\n    - plan:production\n  rules:\n    - if: '\\$CI_COMMIT_BRANCH == \\$CI_DEFAULT_BRANCH'\n      when: manual\nEOF\n```\n\n### Jenkins Pipeline\n\n```groovy\n// Jenkinsfile\npipeline {\n    agent any\n    \n    environment {\n        TF_VERSION = '1.6.4'\n        AWS_DEFAULT_REGION = 'us-west-2'\n    }\n    \n    stages {\n        stage('Checkout') {\n            steps {\n                checkout scm\n            }\n        }\n        \n        stage('Setup') {\n            steps {\n                sh '''\n                    # Install Terraform if not present\n                    if ! command -v terraform \u0026\u003e /dev/null; then\n                        wget https://releases.hashicorp.com/terraform/${TF_VERSION}/terraform_${TF_VERSION}_linux_amd64.zip\n                        unzip terraform_${TF_VERSION}_linux_amd64.zip\n                        chmod +x terraform\n                        sudo mv terraform /usr/local/bin/\n                    fi\n                    \n                    terraform version\n                '''\n            }\n        }\n        \n        stage('Validate') {\n            parallel {\n                stage('Format Check') {\n                    steps {\n                        sh 'terraform fmt -check -recursive'\n                    }\n                }\n                stage('Configuration Validation') {\n                    steps {\n                        sh '''\n                            for dir in environments/*/; do\n                                cd \"$dir\"\n                                terraform init\n                                terraform validate\n                                cd -\n                            done\n                        '''\n                    }\n                }\n                stage('Security Scan') {\n                    steps {\n                        sh '''\n                            # Install and run Checkov\n                            pip3 install checkov\n                            checkov --framework terraform --directory .\n                        '''\n                    }\n                }\n            }\n        }\n        \n        stage('Plan') {\n            steps {\n                script {\n                    def environments = ['development', 'staging', 'production']\n                    def planResults = [:]\n                    \n                    environments.each { env -\u003e\n                        planResults[env] = {\n                            dir(\"environments/${env}\") {\n                                sh \"\"\"\n                                    terraform init\n                                    terraform plan -var-file=\"${env}.tfvars\" -out=\"${env}.tfplan\"\n                                \"\"\"\n                            }\n                        }\n                    }\n                    \n                    parallel planResults\n                }\n            }\n        }\n        \n        stage('Apply') {\n            when {\n                branch 'main'\n            }\n            steps {\n                script {\n                    input message: 'Apply Terraform changes?', ok: 'Apply'\n                    \n                    dir('environments/production') {\n                        sh 'terraform apply -input=false production.tfplan'\n                    }\n                }\n            }\n        }\n    }\n    \n    post {\n        always {\n            archiveArtifacts artifacts: 'environments/**/*.tfplan', fingerprint: true\n            publishHTML([\n                allowMissing: false,\n                alwaysLinkToLastBuild: true,\n                keepAll: true,\n                reportDir: 'checkov-report',\n                reportFiles: 'index.html',\n                reportName: 'Checkov Security Report'\n            ])\n        }\n        failure {\n            emailext (\n                subject: \"Terraform Pipeline Failed: ${env.JOB_NAME} - ${env.BUILD_NUMBER}\",\n                body: \"The Terraform pipeline has failed. Please check the build logs for details.\",\n                to: \"${env.CHANGE_AUTHOR_EMAIL}\"\n            )\n        }\n    }\n}\n```\n\n### Azure DevOps Pipeline\n\n```yaml\n# azure-pipelines.yml\ntrigger:\n  branches:\n    include:\n    - main\n    - develop\n  paths:\n    include:\n    - terraform/*\n    - environments/*\n\npool:\n  vmImage: 'ubuntu-latest'\n\nvariables:\n  TF_VERSION: '1.6.4'\n  TF_IN_AUTOMATION: 'true'\n\nstages:\n- stage: Validate\n  displayName: 'Validate Terraform'\n  jobs:\n  - job: ValidateJob\n    displayName: 'Validate Configuration'\n    steps:\n    - task: TerraformInstaller@0\n      displayName: 'Install Terraform'\n      inputs:\n        terraformVersion: $(TF_VERSION)\n    \n    - script: |\n        terraform fmt -check -recursive\n        if [ $? -ne 0 ]; then\n          echo \"##vso[task.logissue type=error]Terraform files are not formatted correctly\"\n          exit 1\n        fi\n      displayName: 'Check Terraform Format'\n    \n    - script: |\n        for dir in environments/*/; do\n          echo \"Validating $dir\"\n          cd \"$dir\"\n          terraform init -backend=false\n          terraform validate\n          cd -\n        done\n      displayName: 'Validate All Environments'\n    \n    - script: |\n        # Install and run security scanning\n        pip install checkov\n        checkov --framework terraform --directory . --output cli --output junitxml --output-file-path checkov-results.xml\n      displayName: 'Security Scan with Checkov'\n    \n    - task: PublishTestResults@2\n      condition: always()\n      inputs:\n        testResultsFormat: 'JUnit'\n        testResultsFiles: 'checkov-results.xml'\n        failTaskOnFailedTests: true\n\n- stage: Plan\n  displayName: 'Terraform Plan'\n  dependsOn: Validate\n  condition: succeeded()\n  jobs:\n  - job: PlanProduction\n    displayName: 'Plan Production Environment'\n    steps:\n    - task: TerraformInstaller@0\n      inputs:\n        terraformVersion: $(TF_VERSION)\n    \n    - task: AzureCLI@2\n      displayName: 'Configure Azure Backend'\n      inputs:\n        azureSubscription: 'Production-ServiceConnection'\n        scriptType: 'bash'\n        scriptLocation: 'inlineScript'\n        inlineScript: |\n          cd environments/production\n          terraform init \\\n            -backend-config=\"resource_group_name=$(BACKEND_RESOURCE_GROUP)\" \\\n            -backend-config=\"storage_account_name=$(BACKEND_STORAGE_ACCOUNT)\" \\\n            -backend-config=\"container_name=$(BACKEND_CONTAINER)\" \\\n            -backend-config=\"key=production.tfstate\"\n    \n    - task: AzureCLI@2\n      displayName: 'Terraform Plan'\n      inputs:\n        azureSubscription: 'Production-ServiceConnection'\n        scriptType: 'bash'\n        scriptLocation: 'inlineScript'\n        inlineScript: |\n          cd environments/production\n          terraform plan -var-file=\"production.tfvars\" -out=production.tfplan\n    \n    - task: PublishPipelineArtifact@1\n      inputs:\n        targetPath: 'environments/production/production.tfplan'\n        artifact: 'terraform-plan-production'\n\n- stage: Apply\n  displayName: 'Terraform Apply'\n  dependsOn: Plan\n  condition: and(succeeded(), eq(variables['Build.SourceBranch'], 'refs/heads/main'))\n  jobs:\n  - deployment: ApplyProduction\n    displayName: 'Apply to Production'\n    environment: 'Production'\n    strategy:\n      runOnce:\n        deploy:\n          steps:\n          - task: TerraformInstaller@0\n            inputs:\n              terraformVersion: $(TF_VERSION)\n          \n          - task: DownloadPipelineArtifact@2\n            inputs:\n              artifact: 'terraform-plan-production'\n              path: $(System.DefaultWorkingDirectory)/environments/production\n          \n          - task: AzureCLI@2\n            displayName: 'Terraform Apply'\n            inputs:\n              azureSubscription: 'Production-ServiceConnection'\n              scriptType: 'bash'\n              scriptLocation: 'inlineScript'\n              inlineScript: |\n                cd environments/production\n                terraform init \\\n                  -backend-config=\"resource_group_name=$(BACKEND_RESOURCE_GROUP)\" \\\n                  -backend-config=\"storage_account_name=$(BACKEND_STORAGE_ACCOUNT)\" \\\n                  -backend-config=\"container_name=$(BACKEND_CONTAINER)\" \\\n                  -backend-config=\"key=production.tfstate\"\n                terraform apply -input=false production.tfplan\n```\n\n### Advanced Atlantis Configuration\n\n```yaml\n# atlantis.yaml - GitOps for Terraform\nversion: 3\nautomerge: false\ndelete_source_branch_on_merge: true\n\nprojects:\n- name: production\n  dir: environments/production\n  workspace: production\n  terraform_version: v1.6.4\n  apply_requirements: [approved, mergeable]\n  plan_requirements: [mergeable]\n  workflow: production\n  \n- name: staging\n  dir: environments/staging  \n  workspace: staging\n  terraform_version: v1.6.4\n  apply_requirements: [mergeable]\n  workflow: staging\n\n- name: development\n  dir: environments/development\n  workspace: development\n  terraform_version: v1.6.4\n  workflow: development\n\nworkflows:\n  production:\n    plan:\n      steps:\n      - env:\n          name: TF_IN_AUTOMATION\n          value: \"true\"\n      - init\n      - plan:\n          extra_args: [\"-var-file=production.tfvars\"]\n      - run: |\n          # Security scanning\n          checkov --framework terraform --directory . --check CKV_AWS_79,CKV_AWS_8\n          \n          # Cost estimation\n          if command -v infracost \u0026\u003e /dev/null; then\n            infracost breakdown --path=.\n          fi\n    apply:\n      steps:\n      - env:\n          name: TF_IN_AUTOMATION  \n          value: \"true\"\n      - init\n      - apply:\n          extra_args: [\"-var-file=production.tfvars\"]\n      - run: |\n          # Post-apply notifications\n          curl -X POST -H 'Content-type: application/json' \\\n            --data '{\"text\":\"✅ Production infrastructure updated successfully\"}' \\\n            \"$SLACK_WEBHOOK_URL\"\n            \n  staging:\n    plan:\n      steps:\n      - init\n      - plan:\n          extra_args: [\"-var-file=staging.tfvars\"]\n    apply:\n      steps:\n      - init  \n      - apply:\n          extra_args: [\"-var-file=staging.tfvars\"]\n          \n  development:\n    plan:\n      steps:\n      - init\n      - plan:\n          extra_args: [\"-var-file=development.tfvars\"]\n    apply:\n      steps:\n      - init\n      - apply:\n          extra_args: [\"-var-file=development.tfvars\"]\n```\n\n### Kubernetes Operator Integration\n\n```yaml\n# terraform-operator.yaml - Deploy Terraform via Kubernetes\napiVersion: apiextensions.k8s.io/v1\nkind: CustomResourceDefinition\nmetadata:\n  name: terraforms.infrastructure.company.com\nspec:\n  group: infrastructure.company.com\n  versions:\n  - name: v1\n    served: true\n    storage: true\n    schema:\n      openAPIV3Schema:\n        type: object\n        properties:\n          spec:\n            type: object\n            properties:\n              source:\n                type: object\n                properties:\n                  git:\n                    type: object\n                    properties:\n                      url:\n                        type: string\n                      branch:\n                        type: string\n                      path:\n                        type: string\n              variables:\n                type: object\n                additionalProperties:\n                  type: string\n              workspace:\n                type: string\n              destroy:\n                type: boolean\n                default: false\n          status:\n            type: object\n            properties:\n              phase:\n                type: string\n              lastApplied:\n                type: string\n                format: date-time\n              outputs:\n                type: object\n                additionalProperties:\n                  type: string\n  scope: Namespaced\n  names:\n    plural: terraforms\n    singular: terraform\n    kind: Terraform\n    shortNames:\n    - tf\n\n---\n# Example Terraform resource managed by Kubernetes\napiVersion: infrastructure.company.com/v1\nkind: Terraform\nmetadata:\n  name: web-application-infrastructure\n  namespace: production\nspec:\n  source:\n    git:\n      url: \"https://github.com/company/infrastructure\"\n      branch: \"main\"\n      path: \"environments/production\"\n  workspace: \"production\"\n  variables:\n    project_name: \"web-application\"\n    environment: \"production\"\n    instance_type: \"m5.large\"\n    min_capacity: \"3\"\n    max_capacity: \"10\"\n  destroy: false\n```\n\n### Terraform with Vault Integration\n\n```bash\n# Vault integration for dynamic credentials\ncat \u003e vault-integration.tf \u003c\u003cEOF\n# Vault provider for dynamic secrets\nterraform {\n  required_providers {\n    vault = {\n      source  = \"hashicorp/vault\"\n      version = \"~\u003e 3.20\"\n    }\n    aws = {\n      source  = \"hashicorp/aws\"\n      version = \"~\u003e 5.0\"\n    }\n  }\n}\n\nprovider \"vault\" {\n  address = var.vault_address\n  # Authentication handled via VAULT_TOKEN env var or AWS auth\n}\n\n# Dynamic AWS credentials from Vault\ndata \"vault_aws_access_credentials\" \"aws_creds\" {\n  backend = \"aws\"\n  role    = \"terraform-${terraform.workspace}\"\n  type    = \"creds\"\n}\n\nprovider \"aws\" {\n  region     = var.aws_region\n  access_key = data.vault_aws_access_credentials.aws_creds.access_key\n  secret_key = data.vault_aws_access_credentials.aws_creds.secret_key\n  token      = data.vault_aws_access_credentials.aws_creds.security_token\n}\n\n# Dynamic database credentials\ndata \"vault_database_credentials\" \"db\" {\n  backend = \"database\"\n  role    = \"terraform-${terraform.workspace}-db\"\n}\n\n# RDS instance with dynamic credentials\nresource \"aws_db_instance\" \"main\" {\n  identifier = \"${var.project_name}-${terraform.workspace}\"\n  \n  engine         = \"postgresql\"\n  engine_version = \"15.4\"\n  instance_class = var.db_instance_class\n  \n  allocated_storage = 20\n  storage_encrypted = true\n  \n  db_name  = var.database_name\n  username = data.vault_database_credentials.db.username\n  password = data.vault_database_credentials.db.password\n  \n  skip_final_snapshot = false\n  final_snapshot_identifier = \"${var.project_name}-${terraform.workspace}-final\"\n  \n  tags = local.common_tags\n}\n\n# Store outputs back in Vault\nresource \"vault_kv_secret_v2\" \"terraform_outputs\" {\n  mount = \"terraform\"\n  name  = \"${terraform.workspace}/outputs\"\n  \n  data_json = jsonencode({\n    vpc_id           = aws_vpc.main.id\n    database_endpoint = aws_db_instance.main.endpoint\n    load_balancer_dns = aws_lb.main.dns_name\n    timestamp        = timestamp()\n  })\n}\nEOF\n\n# Vault configuration script\ncat \u003e scripts/setup-vault-integration.sh \u003c\u003c'EOF'\n#!/bin/bash\n\nVAULT_ADDR=\"${VAULT_ADDR:-https://vault.company.com}\"\nVAULT_TOKEN=\"${VAULT_TOKEN}\"\n\n# Enable AWS secrets engine\nvault auth -method=aws\nvault secrets enable -path=aws aws\n\n# Configure AWS secrets engine\nvault write aws/config/root \\\n    access_key=\"$AWS_ACCESS_KEY_ID\" \\\n    secret_key=\"$AWS_SECRET_ACCESS_KEY\" \\\n    region=\"us-west-2\"\n\n# Create Terraform role for each environment\nfor env in development staging production; do\n    vault write aws/roles/terraform-$env \\\n        credential_type=\"assumed_role\" \\\n        role_arns=\"arn:aws:iam::ACCOUNT:role/TerraformRole-$env\" \\\n        default_sts_ttl=\"3600\" \\\n        max_sts_ttl=\"7200\"\ndone\n\n# Enable database secrets engine\nvault secrets enable database\n\n# Configure PostgreSQL database\nvault write database/config/production-db \\\n    plugin_name=\"postgresql-database-plugin\" \\\n    connection_url=\"postgresql://{{username}}:{{password}}@postgres.company.com:5432/terraform?sslmode=require\" \\\n    allowed_roles=\"terraform-production-db\" \\\n    username=\"vault-admin\" \\\n    password=\"vault-admin-password\"\n\n# Create database role\nvault write database/roles/terraform-production-db \\\n    db_name=\"production-db\" \\\n    creation_statements=\"CREATE ROLE \\\"{{name}}\\\" WITH LOGIN PASSWORD '{{password}}' VALID UNTIL '{{expiration}}'; GRANT SELECT, INSERT, UPDATE, DELETE ON ALL TABLES IN SCHEMA public TO \\\"{{name}}\\\";\" \\\n    default_ttl=\"1h\" \\\n    max_ttl=\"24h\"\n\necho \"✅ Vault integration configured successfully\"\nEOF\n\nchmod +x scripts/setup-vault-integration.sh\n```\n\n## 16. Additional Resources\n\n- [Official Terraform Documentation](https://developer.hashicorp.com/terraform/docs)\n- [Terraform Registry](https://registry.terraform.io/)\n- [Terraform Best Practices](https://developer.hashicorp.com/terraform/cloud-docs/recommended-practices)\n- [Multi-Cloud Architecture Guide](https://developer.hashicorp.com/terraform/tutorials/aws-get-started)\n- [Security Best Practices](https://developer.hashicorp.com/terraform/language/values/sensitive)\n- [AWS Provider Documentation](https://registry.terraform.io/providers/hashicorp/aws/latest/docs)\n- [Azure Provider Documentation](https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs)\n- [GCP Provider Documentation](https://registry.terraform.io/providers/hashicorp/google/latest/docs)\n- [Terraform Community Forum](https://discuss.hashicorp.com/c/terraform-core)\n- [HashiCorp Learn Terraform](https://learn.hashicorp.com/terraform)\n\n---\n\n**Note:** This guide is part of the [HowToMgr](https://howtomgr.github.io) collection. Always refer to official documentation for the most up-to-date information.","readmeHtml":"\u003ch2 id=\"1-introduction\" class=\"mobile-header\"\u003e1. Introduction\u003c/h2\u003e\n\u003cp class=\"mobile-paragraph\"\u003eTerraform is a free and open-source Infrastructure as Code (IaC) tool developed by HashiCorp for building, changing, and versioning infrastructure safely and efficiently across multiple cloud providers. Originally created by Mitchell Hashimoto in 2014, Terraform uses declarative configuration files written in HashiCorp Configuration Language (HCL) to manage infrastructure resources with a declarative approach.\u003c/p\u003e\n\u003ch3 id=\"foss-context\" class=\"mobile-header\"\u003eFOSS Context\u003c/h3\u003e\n\u003cp class=\"mobile-paragraph\"\u003eAs a pure open-source solution, Terraform serves as a powerful alternative to commercial IaC solutions like AWS CloudFormation (AWS-specific), Azure Resource Manager (Azure-specific), or proprietary enterprise tools like Pulumi Enterprise or VMware vRealize. Terraform provides enterprise-grade capabilities without licensing costs:\u003c/p\u003e\n\u003cli class=\"mobile-list-item\"\u003e\u003cstrong\u003eMulti-cloud management\u003c/strong\u003e across 3000+ providers\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003e\u003cstrong\u003eState management\u003c/strong\u003e with remote backends and locking\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003e\u003cstrong\u003eExtensive provider ecosystem\u003c/strong\u003e maintained by HashiCorp and community\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003e\u003cstrong\u003eTeam collaboration\u003c/strong\u003e features through Terraform Cloud (freemium) or self-hosted alternatives\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003e\u003cstrong\u003eModule system\u003c/strong\u003e for reusable infrastructure components\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003e\u003cstrong\u003eImport capabilities\u003c/strong\u003e for existing infrastructure\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003e\u003cstrong\u003ePlan and apply workflow\u003c/strong\u003e with preview and approval processes\u003c/li\u003e\n\u003ch3 id=\"key-benefits\" class=\"mobile-header\"\u003eKey Benefits\u003c/h3\u003e\n\u003cli class=\"mobile-list-item\"\u003e\u003cstrong\u003eVendor neutrality\u003c/strong\u003e: Works across all major cloud providers and on-premises systems\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003e\u003cstrong\u003eDeclarative syntax\u003c/strong\u003e: Define desired state, Terraform handles the implementation\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003e\u003cstrong\u003eResource graph\u003c/strong\u003e: Automatically determines resource dependencies and creation order\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003e\u003cstrong\u003eState tracking\u003c/strong\u003e: Maintains current infrastructure state for accurate change management\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003e\u003cstrong\u003eImmutable infrastructure\u003c/strong\u003e: Encourages infrastructure replacement rather than modification\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003e\u003cstrong\u003eCommunity support\u003c/strong\u003e: Large ecosystem with extensive documentation and community modules\u003c/li\u003e\n\u003ch2 id=\"2-prerequisites\" class=\"mobile-header\"\u003e2. Prerequisites\u003c/h2\u003e\n\u003cli class=\"mobile-list-item\"\u003e\u003cstrong\u003eHardware Requirements\u003c/strong\u003e:\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eCPU: 1 core minimum (2+ cores recommended for large infrastructures)\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eRAM: 2GB minimum (4GB+ recommended for production)\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eStorage: 5GB minimum (more for state files and provider binaries)\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eNetwork: Stable connectivity for cloud provider APIs\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003e\u003cstrong\u003eOperating System\u003c/strong\u003e: \u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eLinux: Any modern distribution with kernel 3.2+\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003emacOS: 10.13+ (High Sierra or newer)\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eWindows: Windows Server 2016+ or Windows 10\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eFreeBSD: 12.0+\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003e\u003cstrong\u003eNetwork Requirements\u003c/strong\u003e:\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eHTTPS access to cloud provider APIs (port 443)\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eAccess to Terraform Registry (registry.terraform.io)\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eAccess to HashiCorp releases (releases.hashicorp.com)\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003e\u003cstrong\u003eDependencies\u003c/strong\u003e:\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eCloud provider CLI tools (aws-cli, azure-cli, gcloud)\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eGit for configuration management\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eText editor or IDE\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eRoot or administrative access for installation\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003e\u003cstrong\u003eSystem Access\u003c/strong\u003e: root or sudo privileges required for installation\u003c/li\u003e\n\u003ch2 id=\"3-installation\" class=\"mobile-header\"\u003e3. Installation\u003c/h2\u003e\n\u003ch3 id=\"rhelcentosrocky-linuxalmalinux\" class=\"mobile-header\"\u003eRHEL/CentOS/Rocky Linux/AlmaLinux\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Add HashiCorp repository\nsudo yum install -y yum-utils\nsudo yum-config-manager --add-repo https://rpm.releases.hashicorp.com/RHEL/hashicorp.repo\n\n# Install Terraform\nsudo yum install -y terraform\n\n# Verify installation\nterraform version\n\n# Alternative: DNF for newer systems\nsudo dnf install -y yum-utils\nsudo dnf config-manager --add-repo https://rpm.releases.hashicorp.com/RHEL/hashicorp.repo\nsudo dnf install -y terraform\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"debianubuntu\" class=\"mobile-header\"\u003eDebian/Ubuntu\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Add HashiCorp GPG key\nwget -O- https://apt.releases.hashicorp.com/gpg | sudo gpg --dearmor -o /usr/share/keyrings/hashicorp-archive-keyring.gpg\n\n# Add HashiCorp repository\necho \u0026quot;deb [signed-by=/usr/share/keyrings/hashicorp-archive-keyring.gpg] https://apt.releases.hashicorp.com $(lsb_release -cs) main\u0026quot; | sudo tee /etc/apt/sources.list.d/hashicorp.list\n\n# Update and install Terraform\nsudo apt update\nsudo apt install -y terraform\n\n# Verify installation\nterraform version\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"arch-linux\" class=\"mobile-header\"\u003eArch Linux\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Install from community repository\nsudo pacman -S terraform\n\n# Alternative: Install from AUR\nyay -S terraform\n\n# Install additional tools\nsudo pacman -S terraform-docs tflint\n\n# Verify installation\nterraform version\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"alpine-linux\" class=\"mobile-header\"\u003eAlpine Linux\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Install from Alpine repositories\nsudo apk update\nsudo apk add terraform\n\n# Install additional tools\nsudo apk add bash git curl\n\n# Verify installation\nterraform version\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"opensusesles\" class=\"mobile-header\"\u003eopenSUSE/SLES\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# openSUSE Leap/Tumbleweed\nsudo zypper install -y terraform\n\n# SLES 15\nsudo SUSEConnect -p sle-module-development-tools/15.5/x86_64\nsudo zypper install -y terraform\n\n# Alternative: Add HashiCorp repository\nsudo zypper addrepo https://rpm.releases.hashicorp.com/SLES/hashicorp.repo\nsudo zypper refresh\nsudo zypper install terraform\n\n# Verify installation\nterraform version\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"macos\" class=\"mobile-header\"\u003emacOS\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Using Homebrew\nbrew tap hashicorp/tap\nbrew install hashicorp/tap/terraform\n\n# Alternative: Install specific version\nbrew install terraform@1.6\n\n# Verify installation\nterraform version\n\n# Using tfenv for version management\nbrew install tfenv\ntfenv install latest\ntfenv use latest\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"freebsd\" class=\"mobile-header\"\u003eFreeBSD\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Using pkg\npkg install terraform\n\n# Using ports\ncd /usr/ports/sysutils/terraform\nmake install clean\n\n# Verify installation\nterraform version\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"windows\" class=\"mobile-header\"\u003eWindows\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"powershell\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003epowershell\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-powershell\"\u003e# Method 1: Using Chocolatey\nchoco install terraform\n\n# Method 2: Using Scoop\nscoop bucket add main\nscoop install terraform\n\n# Method 3: Manual installation\n# Download from https://releases.hashicorp.com/terraform/\n# Extract terraform.exe to C:\\terraform\n# Add C:\\terraform to PATH\n\n# Method 4: Using Winget\nwinget install HashiCorp.Terraform\n\n# Verify installation\nterraform version\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"4-initial-configuration\" class=\"mobile-header\"\u003e4. Initial Configuration\u003c/h2\u003e\n\u003ch3 id=\"first-run-setup\" class=\"mobile-header\"\u003eFirst-Run Setup\u003c/h3\u003e\n\u003cp class=\"mobile-paragraph\"\u003e1. \u003cstrong\u003eCreate terraform user\u003c/strong\u003e (optional for dedicated service):\u003c/p\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Linux systems\nsudo useradd -r -d /opt/terraform -s /sbin/nologin -c \u0026quot;Terraform Service\u0026quot; terraform\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003cp class=\"mobile-paragraph\"\u003e2. \u003cstrong\u003eDefault configuration locations\u003c/strong\u003e:\u003c/p\u003e\n\u003cli class=\"mobile-list-item\"\u003eRHEL/CentOS/Rocky/AlmaLinux: \u003ccode class=\"mobile-inline-code\"\u003e/etc/terraform/\u003c/code\u003e (custom) or \u003ccode class=\"mobile-inline-code\"\u003e/usr/local/bin/\u003c/code\u003e\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eDebian/Ubuntu: \u003ccode class=\"mobile-inline-code\"\u003e/etc/terraform/\u003c/code\u003e (custom) or \u003ccode class=\"mobile-inline-code\"\u003e/usr/local/bin/\u003c/code\u003e\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eArch Linux: \u003ccode class=\"mobile-inline-code\"\u003e/etc/terraform/\u003c/code\u003e (custom) or \u003ccode class=\"mobile-inline-code\"\u003e/usr/bin/\u003c/code\u003e\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eAlpine Linux: \u003ccode class=\"mobile-inline-code\"\u003e/etc/terraform/\u003c/code\u003e (custom) or \u003ccode class=\"mobile-inline-code\"\u003e/usr/bin/\u003c/code\u003e\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eopenSUSE/SLES: \u003ccode class=\"mobile-inline-code\"\u003e/etc/terraform/\u003c/code\u003e (custom) or \u003ccode class=\"mobile-inline-code\"\u003e/usr/local/bin/\u003c/code\u003e\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003emacOS: \u003ccode class=\"mobile-inline-code\"\u003e/usr/local/etc/terraform/\u003c/code\u003e or \u003ccode class=\"mobile-inline-code\"\u003e/opt/homebrew/etc/terraform/\u003c/code\u003e\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eFreeBSD: \u003ccode class=\"mobile-inline-code\"\u003e/usr/local/etc/terraform/\u003c/code\u003e\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eWindows: \u003ccode class=\"mobile-inline-code\"\u003eC:\\terraform\\\u003c/code\u003e or \u003ccode class=\"mobile-inline-code\"\u003e%APPDATA%\\terraform\\\u003c/code\u003e\u003c/li\u003e\n\u003cp class=\"mobile-paragraph\"\u003e3. \u003cstrong\u003eEssential initial configuration\u003c/strong\u003e:\u003c/p\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Create workspace directory\nmkdir -p ~/terraform/projects\ncd ~/terraform/projects\n\n# Create first Terraform configuration\ncat \u0026gt; main.tf \u0026lt;\u0026lt;EOF\nterraform {\n  required_version = \u0026quot;\u0026gt;= 1.6\u0026quot;\n  required_providers {\n    local = {\n      source  = \u0026quot;hashicorp/local\u0026quot;\n      version = \u0026quot;~\u0026gt; 2.0\u0026quot;\n    }\n  }\n}\n\nresource \u0026quot;local_file\u0026quot; \u0026quot;hello_world\u0026quot; {\n  content  = \u0026quot;Hello, World from Terraform!\u0026quot;\n  filename = \u0026quot;hello.txt\u0026quot;\n}\nEOF\n\n# Initialize Terraform\nterraform init\n\n# Validate configuration\nterraform validate\n\n# Plan deployment\nterraform plan\n\n# Apply configuration\nterraform apply\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"testing-initial-setup\" class=\"mobile-header\"\u003eTesting Initial Setup\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Check Terraform version\nterraform version\n\n# Validate configuration\nterraform validate\n\n# Format configuration files\nterraform fmt\n\n# Initialize and test basic functionality\nterraform init\nterraform plan\nterraform apply\n\n# List state\nterraform state list\n\n# Show state details\nterraform show\n\n# Clean up test resources\nterraform destroy\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003cp class=\"mobile-paragraph\"\u003e\u003cstrong\u003eWARNING:\u003c/strong\u003e Configure proper authentication for cloud providers before deploying real infrastructure!\u003c/p\u003e\n\u003ch2 id=\"5-service-management\" class=\"mobile-header\"\u003e5. Service Management\u003c/h2\u003e\n\u003ch3 id=\"systemd-linux-systems\" class=\"mobile-header\"\u003esystemd (Linux Systems)\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Create systemd service for Terraform agent (if using)\nsudo tee /etc/systemd/system/terraform-agent.service \u0026lt;\u0026lt;EOF\n[Unit]\nDescription=Terraform Agent\nAfter=network.target\n\n[Service]\nType=simple\nUser=terraform\nWorkingDirectory=/opt/terraform\nExecStart=/usr/local/bin/terraform-agent\nRestart=always\nRestartSec=10\n\n[Install]\nWantedBy=multi-user.target\nEOF\n\nsudo systemctl daemon-reload\nsudo systemctl enable terraform-agent\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"openrc-alpine-linux\" class=\"mobile-header\"\u003eOpenRC (Alpine Linux)\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Create OpenRC service script\nsudo tee /etc/init.d/terraform-agent \u0026lt;\u0026lt;EOF\n#!/sbin/openrc-run\n\nname=\u0026quot;terraform-agent\u0026quot;\ndescription=\u0026quot;Terraform Agent\u0026quot;\ncommand=\u0026quot;/usr/bin/terraform-agent\u0026quot;\ncommand_user=\u0026quot;terraform\u0026quot;\ncommand_background=true\npidfile=\u0026quot;/var/run/terraform-agent.pid\u0026quot;\n\ndepend() {\n    need net\n}\nEOF\n\nsudo chmod +x /etc/init.d/terraform-agent\nrc-update add terraform-agent default\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"rcd-freebsd\" class=\"mobile-header\"\u003erc.d (FreeBSD)\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Create rc.d script\nsudo tee /usr/local/etc/rc.d/terraform_agent \u0026lt;\u0026lt;EOF\n#!/bin/sh\n. /etc/rc.subr\n\nname=terraform_agent\nrcvar=terraform_agent_enable\ncommand=\u0026quot;/usr/local/bin/terraform-agent\u0026quot;\npidfile=\u0026quot;/var/run/terraform_agent.pid\u0026quot;\nstart_cmd=\u0026quot;terraform_agent_start\u0026quot;\n\nterraform_agent_start() {\n    daemon -p \\${pidfile} \\${command}\n}\n\nload_rc_config \\$name\nrun_rc_command \u0026quot;\\$1\u0026quot;\nEOF\n\nsudo chmod +x /usr/local/etc/rc.d/terraform_agent\necho \u0026#039;terraform_agent_enable=\u0026quot;YES\u0026quot;\u0026#039; \u0026gt;\u0026gt; /etc/rc.conf\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"launchd-macos\" class=\"mobile-header\"\u003elaunchd (macOS)\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Create LaunchDaemon plist\nsudo tee /Library/LaunchDaemons/com.hashicorp.terraform.agent.plist \u0026lt;\u0026lt;EOF\n\u0026lt;?xml version=\u0026quot;1.0\u0026quot; encoding=\u0026quot;UTF-8\u0026quot;?\u0026gt;\n\u0026lt;!DOCTYPE plist PUBLIC \u0026quot;-//Apple//DTD PLIST 1.0//EN\u0026quot; \u0026quot;http://www.apple.com/DTDs/PropertyList-1.0.dtd\u0026quot;\u0026gt;\n\u0026lt;plist version=\u0026quot;1.0\u0026quot;\u0026gt;\n\u0026lt;dict\u0026gt;\n    \u0026lt;key\u0026gt;Label\u0026lt;/key\u0026gt;\n    \u0026lt;string\u0026gt;com.hashicorp.terraform.agent\u0026lt;/string\u0026gt;\n    \u0026lt;key\u0026gt;ProgramArguments\u0026lt;/key\u0026gt;\n    \u0026lt;array\u0026gt;\n        \u0026lt;string\u0026gt;/usr/local/bin/terraform-agent\u0026lt;/string\u0026gt;\n    \u0026lt;/array\u0026gt;\n    \u0026lt;key\u0026gt;RunAtLoad\u0026lt;/key\u0026gt;\n    \u0026lt;true/\u0026gt;\n    \u0026lt;key\u0026gt;KeepAlive\u0026lt;/key\u0026gt;\n    \u0026lt;true/\u0026gt;\n\u0026lt;/dict\u0026gt;\n\u0026lt;/plist\u0026gt;\nEOF\n\nsudo launchctl load /Library/LaunchDaemons/com.hashicorp.terraform.agent.plist\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"windows-service-manager\" class=\"mobile-header\"\u003eWindows Service Manager\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"powershell\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003epowershell\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-powershell\"\u003e# Install Terraform as Windows service using NSSM\nnssm install TerraformAgent \u0026quot;C:\\terraform\\terraform-agent.exe\u0026quot;\nnssm set TerraformAgent AppDirectory \u0026quot;C:\\terraform\u0026quot;\nnssm set TerraformAgent DisplayName \u0026quot;Terraform Agent\u0026quot;\nnssm set TerraformAgent Description \u0026quot;HashiCorp Terraform Agent\u0026quot;\nnssm start TerraformAgent\n\n# Alternative: Using sc command\nsc create TerraformAgent binPath=\u0026quot;C:\\terraform\\terraform-agent.exe\u0026quot; start=auto\nsc start TerraformAgent\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"6-advanced-configuration\" class=\"mobile-header\"\u003e6. Advanced Configuration\u003c/h2\u003e\n\u003ch3 id=\"multi-cloud-provider-setup\" class=\"mobile-header\"\u003eMulti-Cloud Provider Setup\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Create comprehensive multi-cloud configuration\ncat \u0026gt; providers.tf \u0026lt;\u0026lt;EOF\nterraform {\n  required_version = \u0026quot;\u0026gt;= 1.6\u0026quot;\n  required_providers {\n    aws = {\n      source  = \u0026quot;hashicorp/aws\u0026quot;\n      version = \u0026quot;~\u0026gt; 5.0\u0026quot;\n    }\n    azurerm = {\n      source  = \u0026quot;hashicorp/azurerm\u0026quot;\n      version = \u0026quot;~\u0026gt; 3.0\u0026quot;\n    }\n    google = {\n      source  = \u0026quot;hashicorp/google\u0026quot;\n      version = \u0026quot;~\u0026gt; 5.0\u0026quot;\n    }\n    kubernetes = {\n      source  = \u0026quot;hashicorp/kubernetes\u0026quot;\n      version = \u0026quot;~\u0026gt; 2.0\u0026quot;\n    }\n    helm = {\n      source  = \u0026quot;hashicorp/helm\u0026quot;\n      version = \u0026quot;~\u0026gt; 2.0\u0026quot;\n    }\n  }\n  \n  # Remote state configuration\n  backend \u0026quot;s3\u0026quot; {\n    bucket = \u0026quot;terraform-state-bucket\u0026quot;\n    key    = \u0026quot;infrastructure/terraform.tfstate\u0026quot;\n    region = \u0026quot;us-west-2\u0026quot;\n    \n    # State locking with DynamoDB\n    dynamodb_table = \u0026quot;terraform-state-lock\u0026quot;\n    encrypt        = true\n  }\n}\n\n# AWS Provider\nprovider \u0026quot;aws\u0026quot; {\n  region = var.aws_region\n  \n  default_tags {\n    tags = {\n      Environment   = var.environment\n      ManagedBy     = \u0026quot;terraform\u0026quot;\n      Project       = var.project_name\n      Owner         = var.owner\n    }\n  }\n}\n\n# Azure Provider\nprovider \u0026quot;azurerm\u0026quot; {\n  features {\n    resource_group {\n      prevent_deletion_if_contains_resources = false\n    }\n    key_vault {\n      purge_soft_delete_on_destroy = true\n    }\n  }\n}\n\n# Google Cloud Provider\nprovider \u0026quot;google\u0026quot; {\n  project = var.gcp_project_id\n  region  = var.gcp_region\n  zone    = var.gcp_zone\n}\n\n# Kubernetes Provider\nprovider \u0026quot;kubernetes\u0026quot; {\n  config_path = \u0026quot;~/.kube/config\u0026quot;\n}\n\n# Helm Provider\nprovider \u0026quot;helm\u0026quot; {\n  kubernetes {\n    config_path = \u0026quot;~/.kube/config\u0026quot;\n  }\n}\nEOF\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"enterprise-features-configuration\" class=\"mobile-header\"\u003eEnterprise Features Configuration\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Terraform Cloud/Enterprise configuration\ncat \u0026gt; cloud.tf \u0026lt;\u0026lt;EOF\nterraform {\n  cloud {\n    organization = \u0026quot;your-organization\u0026quot;\n    \n    workspaces {\n      name = \u0026quot;production-infrastructure\u0026quot;\n    }\n  }\n}\n\n# Remote execution configuration\nterraform {\n  cloud {\n    organization = \u0026quot;your-organization\u0026quot;\n    \n    workspaces {\n      tags = [\u0026quot;production\u0026quot;, \u0026quot;web-app\u0026quot;]\n    }\n  }\n  \n  required_providers {\n    tfe = {\n      source  = \u0026quot;hashicorp/tfe\u0026quot;\n      version = \u0026quot;~\u0026gt; 0.48\u0026quot;\n    }\n  }\n}\n\n# Terraform Enterprise configuration\nprovider \u0026quot;tfe\u0026quot; {\n  hostname = \u0026quot;terraform.company.com\u0026quot;\n  token    = var.tfe_token\n}\n\n# Workspace configuration\nresource \u0026quot;tfe_workspace\u0026quot; \u0026quot;production\u0026quot; {\n  name         = \u0026quot;production-infrastructure\u0026quot;\n  organization = var.tfe_organization\n  \n  auto_apply = false\n  queue_all_runs = false\n  \n  terraform_version = \u0026quot;1.6.4\u0026quot;\n  \n  vcs_repo {\n    identifier     = \u0026quot;company/infrastructure\u0026quot;\n    branch         = \u0026quot;main\u0026quot;\n    oauth_token_id = var.vcs_oauth_token_id\n  }\n  \n  working_directory = \u0026quot;environments/production\u0026quot;\n}\nEOF\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"advanced-state-management\" class=\"mobile-header\"\u003eAdvanced State Management\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Encrypted remote state with multiple backends\ncat \u0026gt; backend-s3.tf \u0026lt;\u0026lt;EOF\n# S3 backend with encryption and locking\nterraform {\n  backend \u0026quot;s3\u0026quot; {\n    bucket         = \u0026quot;terraform-state-bucket\u0026quot;\n    key            = \u0026quot;infrastructure/terraform.tfstate\u0026quot;\n    region         = \u0026quot;us-west-2\u0026quot;\n    encrypt        = true\n    kms_key_id     = \u0026quot;arn:aws:kms:us-west-2:ACCOUNT:key/KEY-ID\u0026quot;\n    dynamodb_table = \u0026quot;terraform-state-lock\u0026quot;\n    \n    # Additional security\n    skip_region_validation      = false\n    skip_credentials_validation = false\n    skip_metadata_api_check     = false\n  }\n}\n\n# State bucket with versioning and lifecycle\nresource \u0026quot;aws_s3_bucket\u0026quot; \u0026quot;terraform_state\u0026quot; {\n  bucket = \u0026quot;terraform-state-bucket\u0026quot;\n  \n  tags = {\n    Name        = \u0026quot;Terraform State Bucket\u0026quot;\n    Environment = var.environment\n  }\n}\n\nresource \u0026quot;aws_s3_bucket_versioning\u0026quot; \u0026quot;terraform_state_versioning\u0026quot; {\n  bucket = aws_s3_bucket.terraform_state.id\n  versioning_configuration {\n    status = \u0026quot;Enabled\u0026quot;\n  }\n}\n\nresource \u0026quot;aws_s3_bucket_server_side_encryption_configuration\u0026quot; \u0026quot;terraform_state_encryption\u0026quot; {\n  bucket = aws_s3_bucket.terraform_state.id\n\n  rule {\n    apply_server_side_encryption_by_default {\n      kms_master_key_id = aws_kms_key.terraform_bucket_key.arn\n      sse_algorithm     = \u0026quot;aws:kms\u0026quot;\n    }\n  }\n}\n\nresource \u0026quot;aws_s3_bucket_public_access_block\u0026quot; \u0026quot;terraform_state\u0026quot; {\n  bucket = aws_s3_bucket.terraform_state.id\n\n  block_public_acls       = true\n  block_public_policy     = true\n  ignore_public_acls      = true\n  restrict_public_buckets = true\n}\n\n# KMS key for encryption\nresource \u0026quot;aws_kms_key\u0026quot; \u0026quot;terraform_bucket_key\u0026quot; {\n  description             = \u0026quot;KMS key for Terraform state bucket encryption\u0026quot;\n  deletion_window_in_days = 7\n\n  tags = {\n    Name        = \u0026quot;Terraform State Bucket Key\u0026quot;\n    Environment = var.environment\n  }\n}\n\n# DynamoDB table for state locking\nresource \u0026quot;aws_dynamodb_table\u0026quot; \u0026quot;terraform_state_lock\u0026quot; {\n  name           = \u0026quot;terraform-state-lock\u0026quot;\n  billing_mode   = \u0026quot;PAY_PER_REQUEST\u0026quot;\n  hash_key       = \u0026quot;LockID\u0026quot;\n\n  attribute {\n    name = \u0026quot;LockID\u0026quot;\n    type = \u0026quot;S\u0026quot;\n  }\n\n  server_side_encryption {\n    enabled = true\n  }\n\n  point_in_time_recovery {\n    enabled = true\n  }\n\n  tags = {\n    Name        = \u0026quot;Terraform State Lock Table\u0026quot;\n    Environment = var.environment\n  }\n}\nEOF\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"terraform-workspaces-and-environment-management\" class=\"mobile-header\"\u003eTerraform Workspaces and Environment Management\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Enterprise workspace management\ncat \u0026gt; workspace-management.tf \u0026lt;\u0026lt;EOF\n# Workspace-specific variables\nvariable \u0026quot;workspace_configs\u0026quot; {\n  description = \u0026quot;Configuration per workspace\u0026quot;\n  type = map(object({\n    instance_type    = string\n    min_size        = number\n    max_size        = number\n    environment_tag = string\n    backup_retention = number\n    monitoring_level = string\n  }))\n  default = {\n    development = {\n      instance_type    = \u0026quot;t3.micro\u0026quot;\n      min_size        = 1\n      max_size        = 3\n      environment_tag = \u0026quot;dev\u0026quot;\n      backup_retention = 7\n      monitoring_level = \u0026quot;basic\u0026quot;\n    }\n    staging = {\n      instance_type    = \u0026quot;t3.small\u0026quot;\n      min_size        = 2\n      max_size        = 5\n      environment_tag = \u0026quot;staging\u0026quot;\n      backup_retention = 14\n      monitoring_level = \u0026quot;standard\u0026quot;\n    }\n    production = {\n      instance_type    = \u0026quot;m5.large\u0026quot;\n      min_size        = 3\n      max_size        = 10\n      environment_tag = \u0026quot;prod\u0026quot;\n      backup_retention = 30\n      monitoring_level = \u0026quot;comprehensive\u0026quot;\n    }\n  }\n}\n\n# Current workspace configuration\nlocals {\n  workspace_config = var.workspace_configs[terraform.workspace]\n  \n  common_tags = {\n    Environment   = local.workspace_config.environment_tag\n    Workspace     = terraform.workspace\n    Project       = var.project_name\n    ManagedBy     = \u0026quot;terraform\u0026quot;\n    Owner         = var.owner\n    CostCenter    = var.cost_center\n    Compliance    = var.compliance_level\n  }\n}\n\n# Workspace-aware resource sizing\nresource \u0026quot;aws_launch_template\u0026quot; \u0026quot;web_servers\u0026quot; {\n  name_prefix   = \u0026quot;${var.project_name}-${terraform.workspace}-\u0026quot;\n  image_id      = data.aws_ami.ubuntu.id\n  instance_type = local.workspace_config.instance_type\n  \n  vpc_security_group_ids = [aws_security_group.web.id]\n  \n  user_data = base64encode(templatefile(\u0026quot;${path.module}/user-data.sh\u0026quot;, {\n    environment = terraform.workspace\n    log_level   = local.workspace_config.monitoring_level\n  }))\n  \n  tag_specifications {\n    resource_type = \u0026quot;instance\u0026quot;\n    tags          = local.common_tags\n  }\n  \n  lifecycle {\n    create_before_destroy = true\n  }\n}\n\n# Auto-scaling based on workspace\nresource \u0026quot;aws_autoscaling_group\u0026quot; \u0026quot;web\u0026quot; {\n  name                = \u0026quot;${var.project_name}-${terraform.workspace}-asg\u0026quot;\n  vpc_zone_identifier = var.private_subnet_ids\n  target_group_arns   = [aws_lb_target_group.web.arn]\n  health_check_type   = \u0026quot;ELB\u0026quot;\n  health_check_grace_period = 300\n\n  min_size         = local.workspace_config.min_size\n  max_size         = local.workspace_config.max_size\n  desired_capacity = local.workspace_config.min_size\n\n  launch_template {\n    id      = aws_launch_template.web_servers.id\n    version = \u0026quot;$Latest\u0026quot;\n  }\n  \n  dynamic \u0026quot;tag\u0026quot; {\n    for_each = local.common_tags\n    content {\n      key                 = tag.key\n      value               = tag.value\n      propagate_at_launch = true\n    }\n  }\n}\nEOF\n\n# Workspace management commands\ncat \u0026gt; scripts/workspace-management.sh \u0026lt;\u0026lt;\u0026#039;EOF\u0026#039;\n#!/bin/bash\n\n# List all workspaces with their status\nlist_workspaces() {\n    echo \u0026quot;📋 Terraform Workspaces:\u0026quot;\n    terraform workspace list\n    echo \u0026quot;\u0026quot;\n    echo \u0026quot;Current workspace: $(terraform workspace show)\u0026quot;\n}\n\n# Create new workspace with initialization\ncreate_workspace() {\n    local workspace_name=\u0026quot;$1\u0026quot;\n    \n    if [[ -z \u0026quot;$workspace_name\u0026quot; ]]; then\n        echo \u0026quot;Usage: create_workspace \u0026lt;workspace-name\u0026gt;\u0026quot;\n        return 1\n    fi\n    \n    echo \u0026quot;🚀 Creating workspace: $workspace_name\u0026quot;\n    terraform workspace new \u0026quot;$workspace_name\u0026quot;\n    terraform workspace select \u0026quot;$workspace_name\u0026quot;\n    \n    # Initialize with workspace-specific variables\n    if [[ ! -f \u0026quot;$workspace_name.tfvars\u0026quot; ]]; then\n        echo \u0026quot;Creating $workspace_name.tfvars template...\u0026quot;\n        cat \u0026gt; \u0026quot;$workspace_name.tfvars\u0026quot; \u0026lt;\u0026lt;VARS\n# Workspace-specific variables for $workspace_name\nproject_name = \u0026quot;myproject-$workspace_name\u0026quot;\nenvironment = \u0026quot;$workspace_name\u0026quot;\nowner = \u0026quot;$(whoami)\u0026quot;\ncost_center = \u0026quot;engineering\u0026quot;\ncompliance_level = \u0026quot;standard\u0026quot;\n\n# Network configuration\nvpc_cidr = \u0026quot;10.0.0.0/16\u0026quot;\navailability_zones = [\u0026quot;us-west-2a\u0026quot;, \u0026quot;us-west-2b\u0026quot;, \u0026quot;us-west-2c\u0026quot;]\n\n# Resource sizing (adjust per environment)\ninstance_type = \u0026quot;t3.micro\u0026quot;\nmin_capacity = 1\nmax_capacity = 3\nVARS\n        echo \u0026quot;✅ Template created at $workspace_name.tfvars\u0026quot;\n        echo \u0026quot;💡 Please review and customize the variables before applying\u0026quot;\n    fi\n}\n\n# Switch workspace with validation\nswitch_workspace() {\n    local workspace_name=\u0026quot;$1\u0026quot;\n    \n    if [[ -z \u0026quot;$workspace_name\u0026quot; ]]; then\n        echo \u0026quot;Usage: switch_workspace \u0026lt;workspace-name\u0026gt;\u0026quot;\n        return 1\n    fi\n    \n    if terraform workspace list | grep -q \u0026quot;\\b$workspace_name\\b\u0026quot;; then\n        terraform workspace select \u0026quot;$workspace_name\u0026quot;\n        echo \u0026quot;✅ Switched to workspace: $workspace_name\u0026quot;\n        \n        # Show current configuration\n        echo \u0026quot;📄 Current configuration file: $workspace_name.tfvars\u0026quot;\n        if [[ -f \u0026quot;$workspace_name.tfvars\u0026quot; ]]; then\n            echo \u0026quot;✅ Variables file exists\u0026quot;\n        else\n            echo \u0026quot;⚠️  Variables file missing - creating template\u0026quot;\n            create_workspace \u0026quot;$workspace_name\u0026quot;\n        fi\n    else\n        echo \u0026quot;❌ Workspace \u0026#039;$workspace_name\u0026#039; not found\u0026quot;\n        echo \u0026quot;Available workspaces:\u0026quot;\n        terraform workspace list\n    fi\n}\n\n# Delete workspace with safety checks\ndelete_workspace() {\n    local workspace_name=\u0026quot;$1\u0026quot;\n    \n    if [[ -z \u0026quot;$workspace_name\u0026quot; ]]; then\n        echo \u0026quot;Usage: delete_workspace \u0026lt;workspace-name\u0026gt;\u0026quot;\n        return 1\n    fi\n    \n    if [[ \u0026quot;$workspace_name\u0026quot; == \u0026quot;default\u0026quot; ]]; then\n        echo \u0026quot;❌ Cannot delete the default workspace\u0026quot;\n        return 1\n    fi\n    \n    echo \u0026quot;⚠️  WARNING: This will delete workspace \u0026#039;$workspace_name\u0026#039; and all its resources!\u0026quot;\n    echo \u0026quot;Current resources in workspace:\u0026quot;\n    \n    # Switch to workspace and show resources\n    terraform workspace select \u0026quot;$workspace_name\u0026quot;\n    terraform state list\n    \n    echo \u0026quot;\u0026quot;\n    read -p \u0026quot;Are you sure you want to proceed? (yes/no): \u0026quot; confirm\n    \n    if [[ \u0026quot;$confirm\u0026quot; == \u0026quot;yes\u0026quot; ]]; then\n        echo \u0026quot;🗑️  Destroying resources in workspace: $workspace_name\u0026quot;\n        terraform destroy -auto-approve -var-file=\u0026quot;$workspace_name.tfvars\u0026quot;\n        \n        echo \u0026quot;🗑️  Deleting workspace: $workspace_name\u0026quot;\n        terraform workspace select default\n        terraform workspace delete \u0026quot;$workspace_name\u0026quot;\n        \n        echo \u0026quot;✅ Workspace \u0026#039;$workspace_name\u0026#039; deleted\u0026quot;\n    else\n        echo \u0026quot;❌ Operation cancelled\u0026quot;\n    fi\n}\n\n# Main command dispatcher\ncase \u0026quot;${1:-help}\u0026quot; in\n    \u0026quot;list\u0026quot;)\n        list_workspaces\n        ;;\n    \u0026quot;create\u0026quot;)\n        create_workspace \u0026quot;$2\u0026quot;\n        ;;\n    \u0026quot;switch\u0026quot;)\n        switch_workspace \u0026quot;$2\u0026quot;\n        ;;\n    \u0026quot;delete\u0026quot;)\n        delete_workspace \u0026quot;$2\u0026quot;\n        ;;\n    \u0026quot;help\u0026quot;|*)\n        echo \u0026quot;Terraform Workspace Management\u0026quot;\n        echo \u0026quot;Usage: $0 [list|create|switch|delete] [workspace-name]\u0026quot;\n        echo \u0026quot;\u0026quot;\n        echo \u0026quot;Commands:\u0026quot;\n        echo \u0026quot;  list                    - List all workspaces\u0026quot;\n        echo \u0026quot;  create \u0026lt;name\u0026gt;          - Create new workspace with template\u0026quot;\n        echo \u0026quot;  switch \u0026lt;name\u0026gt;          - Switch to existing workspace\u0026quot;\n        echo \u0026quot;  delete \u0026lt;name\u0026gt;          - Delete workspace and all resources\u0026quot;\n        ;;\nesac\nEOF\n\nchmod +x scripts/workspace-management.sh\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"remote-state-configuration-best-practices\" class=\"mobile-header\"\u003eRemote State Configuration Best Practices\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Enterprise remote state configuration\ncat \u0026gt; remote-state-setup.tf \u0026lt;\u0026lt;EOF\n# Multi-environment state configuration\nterraform {\n  backend \u0026quot;s3\u0026quot; {\n    # Use workspace-aware state keys\n    key            = \u0026quot;infrastructure/\\${terraform.workspace}/terraform.tfstate\u0026quot;\n    bucket         = var.state_bucket_name\n    region         = var.aws_region\n    encrypt        = true\n    kms_key_id     = var.state_kms_key_arn\n    dynamodb_table = var.state_lock_table\n    \n    # Workspace isolation\n    workspace_key_prefix = \u0026quot;workspaces\u0026quot;\n  }\n}\n\n# State bucket with advanced features\nresource \u0026quot;aws_s3_bucket\u0026quot; \u0026quot;terraform_state\u0026quot; {\n  bucket        = var.state_bucket_name\n  force_destroy = false  # Prevent accidental deletion\n  \n  tags = {\n    Name            = \u0026quot;Terraform State Bucket\u0026quot;\n    Purpose         = \u0026quot;Infrastructure State Storage\u0026quot;\n    Environment     = \u0026quot;global\u0026quot;\n    BackupRequired  = \u0026quot;true\u0026quot;\n    ComplianceLevel = \u0026quot;high\u0026quot;\n  }\n}\n\n# Cross-region replication for disaster recovery\nresource \u0026quot;aws_s3_bucket_replication_configuration\u0026quot; \u0026quot;terraform_state_replication\u0026quot; {\n  role   = aws_iam_role.replication.arn\n  bucket = aws_s3_bucket.terraform_state.id\n\n  rule {\n    id     = \u0026quot;terraform-state-replication\u0026quot;\n    status = \u0026quot;Enabled\u0026quot;\n    \n    filter {\n      prefix = \u0026quot;workspaces/\u0026quot;\n    }\n\n    destination {\n      bucket        = aws_s3_bucket.terraform_state_replica.arn\n      storage_class = \u0026quot;STANDARD_IA\u0026quot;\n      \n      encryption_configuration {\n        replica_kms_key_id = aws_kms_key.terraform_state_replica.arn\n      }\n    }\n  }\n}\n\n# Lifecycle management for cost optimization\nresource \u0026quot;aws_s3_bucket_lifecycle_configuration\u0026quot; \u0026quot;terraform_state_lifecycle\u0026quot; {\n  bucket = aws_s3_bucket.terraform_state.id\n\n  rule {\n    id     = \u0026quot;state_file_lifecycle\u0026quot;\n    status = \u0026quot;Enabled\u0026quot;\n\n    noncurrent_version_transition {\n      noncurrent_days = 30\n      storage_class   = \u0026quot;STANDARD_IA\u0026quot;\n    }\n\n    noncurrent_version_transition {\n      noncurrent_days = 90\n      storage_class   = \u0026quot;GLACIER\u0026quot;\n    }\n\n    noncurrent_version_expiration {\n      noncurrent_days = 365\n    }\n  }\n}\n\n# Advanced DynamoDB table for state locking with point-in-time recovery\nresource \u0026quot;aws_dynamodb_table\u0026quot; \u0026quot;terraform_state_lock\u0026quot; {\n  name           = var.state_lock_table\n  billing_mode   = \u0026quot;PAY_PER_REQUEST\u0026quot;\n  hash_key       = \u0026quot;LockID\u0026quot;\n  \n  attribute {\n    name = \u0026quot;LockID\u0026quot;\n    type = \u0026quot;S\u0026quot;\n  }\n\n  # Enable point-in-time recovery\n  point_in_time_recovery {\n    enabled = true\n  }\n\n  # Server-side encryption\n  server_side_encryption {\n    enabled     = true\n    kms_key_arn = aws_kms_key.terraform_state.arn\n  }\n\n  # Enable continuous backups\n  tags = {\n    Name           = \u0026quot;Terraform State Lock\u0026quot;\n    BackupRequired = \u0026quot;true\u0026quot;\n    Environment    = \u0026quot;global\u0026quot;\n  }\n}\n\n# CloudWatch alarms for state operations\nresource \u0026quot;aws_cloudwatch_metric_alarm\u0026quot; \u0026quot;state_bucket_errors\u0026quot; {\n  alarm_name          = \u0026quot;terraform-state-bucket-errors\u0026quot;\n  comparison_operator = \u0026quot;GreaterThanThreshold\u0026quot;\n  evaluation_periods  = \u0026quot;2\u0026quot;\n  metric_name         = \u0026quot;4xxErrors\u0026quot;\n  namespace           = \u0026quot;AWS/S3\u0026quot;\n  period              = \u0026quot;300\u0026quot;\n  statistic           = \u0026quot;Sum\u0026quot;\n  threshold           = \u0026quot;5\u0026quot;\n  alarm_description   = \u0026quot;This metric monitors S3 bucket errors for Terraform state\u0026quot;\n\n  dimensions = {\n    BucketName = aws_s3_bucket.terraform_state.bucket\n  }\n\n  alarm_actions = [aws_sns_topic.infrastructure_alerts.arn]\n}\nEOF\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"7-reverse-proxy-setup\" class=\"mobile-header\"\u003e7. Reverse Proxy Setup\u003c/h2\u003e\n\u003cp class=\"mobile-paragraph\"\u003eTerraform itself doesn't typically require reverse proxy setup, but when using Terraform Enterprise or Cloud, you might need to configure proxies for API access:\u003c/p\u003e\n\u003ch3 id=\"corporate-proxy-configuration\" class=\"mobile-header\"\u003eCorporate Proxy Configuration\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Configure Terraform to work through corporate proxy\nexport HTTP_PROXY=http://proxy.company.com:8080\nexport HTTPS_PROXY=http://proxy.company.com:8080\nexport NO_PROXY=localhost,127.0.0.1,.company.com\n\n# Add to ~/.bashrc or ~/.zshrc\ncat \u0026gt;\u0026gt; ~/.bashrc \u0026lt;\u0026lt;EOF\n# Terraform proxy settings\nexport HTTP_PROXY=http://proxy.company.com:8080\nexport HTTPS_PROXY=http://proxy.company.com:8080\nexport NO_PROXY=localhost,127.0.0.1,.company.com\nEOF\n\n# Configure Git for proxy (if needed for modules)\ngit config --global http.proxy http://proxy.company.com:8080\ngit config --global https.proxy http://proxy.company.com:8080\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"nginx-configuration-for-terraform-enterprise\" class=\"mobile-header\"\u003enginx Configuration for Terraform Enterprise\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"nginx\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003enginx\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-nginx\"\u003e# /etc/nginx/sites-available/terraform-enterprise\nupstream terraform_enterprise {\n    server 127.0.0.1:8800;\n    server 127.0.0.1:8801 backup;\n}\n\nserver {\n    listen 443 ssl http2;\n    server_name terraform.company.com;\n\n    ssl_certificate /etc/ssl/certs/terraform.company.com.crt;\n    ssl_certificate_key /etc/ssl/private/terraform.company.com.key;\n\n    # Security headers\n    add_header Strict-Transport-Security \u0026quot;max-age=31536000\u0026quot; always;\n    add_header X-Frame-Options \u0026quot;DENY\u0026quot; always;\n    add_header X-Content-Type-Options \u0026quot;nosniff\u0026quot; always;\n\n    location / {\n        proxy_pass http://terraform_enterprise;\n        proxy_set_header Host $host;\n        proxy_set_header X-Real-IP $remote_addr;\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n        proxy_set_header X-Forwarded-Proto $scheme;\n        \n        # WebSocket support for real-time updates\n        proxy_http_version 1.1;\n        proxy_set_header Upgrade $http_upgrade;\n        proxy_set_header Connection \u0026quot;upgrade\u0026quot;;\n        \n        # Timeouts for long-running operations\n        proxy_connect_timeout 60s;\n        proxy_send_timeout 60s;\n        proxy_read_timeout 300s;\n    }\n}\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"8-security-configuration\" class=\"mobile-header\"\u003e8. Security Configuration\u003c/h2\u003e\n\u003ch3 id=\"secure-credential-management\" class=\"mobile-header\"\u003eSecure Credential Management\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Use environment variables for credentials\ncat \u0026gt; .env.example \u0026lt;\u0026lt;EOF\n# AWS credentials\nAWS_ACCESS_KEY_ID=your_access_key\nAWS_SECRET_ACCESS_KEY=your_secret_key\nAWS_DEFAULT_REGION=us-west-2\n\n# Azure credentials\nARM_CLIENT_ID=your_client_id\nARM_CLIENT_SECRET=your_client_secret\nARM_SUBSCRIPTION_ID=your_subscription_id\nARM_TENANT_ID=your_tenant_id\n\n# GCP credentials\nGOOGLE_APPLICATION_CREDENTIALS=/path/to/service-account-key.json\nGOOGLE_PROJECT=your_project_id\n\n# Terraform Cloud\nTF_CLOUD_TOKEN=your_terraform_cloud_token\nEOF\n\n# Use IAM roles for AWS (recommended)\ncat \u0026gt; aws-iam-role.tf \u0026lt;\u0026lt;EOF\n# IAM role for Terraform execution\nresource \u0026quot;aws_iam_role\u0026quot; \u0026quot;terraform_execution\u0026quot; {\n  name = \u0026quot;TerraformExecutionRole\u0026quot;\n\n  assume_role_policy = jsonencode({\n    Version = \u0026quot;2012-10-17\u0026quot;\n    Statement = [\n      {\n        Action = \u0026quot;sts:AssumeRole\u0026quot;\n        Effect = \u0026quot;Allow\u0026quot;\n        Principal = {\n          Service = \u0026quot;ec2.amazonaws.com\u0026quot;\n        }\n      },\n    ]\n  })\n}\n\n# Attach managed policies with least privilege\nresource \u0026quot;aws_iam_role_policy_attachment\u0026quot; \u0026quot;terraform_execution\u0026quot; {\n  for_each = toset([\n    \u0026quot;arn:aws:iam::aws:policy/PowerUserAccess\u0026quot;\n  ])\n  \n  role       = aws_iam_role.terraform_execution.name\n  policy_arn = each.value\n}\n\n# Create instance profile\nresource \u0026quot;aws_iam_instance_profile\u0026quot; \u0026quot;terraform_execution\u0026quot; {\n  name = \u0026quot;TerraformExecutionProfile\u0026quot;\n  role = aws_iam_role.terraform_execution.name\n}\nEOF\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"security-scanning-and-compliance\" class=\"mobile-header\"\u003eSecurity Scanning and Compliance\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Pre-commit hooks for security\ncat \u0026gt; .pre-commit-config.yaml \u0026lt;\u0026lt;EOF\nrepos:\n- repo: https://github.com/antonbabenko/pre-commit-terraform\n  rev: v1.83.5\n  hooks:\n    - id: terraform_fmt\n    - id: terraform_validate\n    - id: terraform_docs\n    - id: terraform_tflint\n    - id: terraform_checkov\n    - id: terraform_trivy\n\n- repo: https://github.com/Yelp/detect-secrets\n  rev: v1.4.0\n  hooks:\n    - id: detect-secrets\n      args: [\u0026#039;--baseline\u0026#039;, \u0026#039;.secrets.baseline\u0026#039;]\nEOF\n\n# Checkov configuration for security scanning\ncat \u0026gt; .checkov.yaml \u0026lt;\u0026lt;EOF\nframework:\n  - terraform\n  - secrets\n\ncheck:\n  - CKV_AWS_79  # Ensure Instance Metadata Service Version 1 is not enabled\n  - CKV_AWS_8   # Ensure Launch Configuration EBS encryption\n  - CKV_AZURE_1 # Ensure storage account encryption\n\nskip-check:\n  - CKV_AWS_23  # Skip S3 bucket public read check for specific use cases\n\noutput: cli\nquiet: false\ncompact: false\nEOF\n\n# TFLint configuration\ncat \u0026gt; .tflint.hcl \u0026lt;\u0026lt;EOF\nplugin \u0026quot;aws\u0026quot; {\n    enabled = true\n    version = \u0026quot;0.21.2\u0026quot;\n    source  = \u0026quot;github.com/terraform-linters/tflint-ruleset-aws\u0026quot;\n}\n\nplugin \u0026quot;azurerm\u0026quot; {\n    enabled = true\n    version = \u0026quot;0.21.0\u0026quot;\n    source  = \u0026quot;github.com/terraform-linters/tflint-ruleset-azurerm\u0026quot;\n}\n\nrule \u0026quot;terraform_unused_declarations\u0026quot; {\n  enabled = true\n}\n\nrule \u0026quot;terraform_naming_convention\u0026quot; {\n  enabled = true\n  format  = \u0026quot;snake_case\u0026quot;\n}\nEOF\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"policy-as-code-with-opa\" class=\"mobile-header\"\u003ePolicy as Code with OPA\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# OPA (Open Policy Agent) security policies\ncat \u0026gt; policy/security.rego \u0026lt;\u0026lt;EOF\npackage terraform.security\n\n# Deny instances without encryption\ndeny[reason] {\n    resource := input.resource_changes[_]\n    resource.type == \u0026quot;aws_instance\u0026quot;\n    resource.change.after.root_block_device[_].encrypted == false\n    reason := \u0026quot;AWS instances must have encrypted root volumes\u0026quot;\n}\n\n# Deny public S3 buckets\ndeny[reason] {\n    resource := input.resource_changes[_]\n    resource.type == \u0026quot;aws_s3_bucket_public_access_block\u0026quot;\n    resource.change.after.block_public_acls == false\n    reason := \u0026quot;S3 buckets must block public access\u0026quot;\n}\n\n# Require specific instance types in production\ndeny[reason] {\n    resource := input.resource_changes[_]\n    resource.type == \u0026quot;aws_instance\u0026quot;\n    instance_type := resource.change.after.instance_type\n    not allowed_instance_type(instance_type)\n    workspace := input.terraform_version.workspace\n    workspace == \u0026quot;production\u0026quot;\n    reason := sprintf(\u0026quot;Production instances must use approved instance types, got: %v\u0026quot;, [instance_type])\n}\n\nallowed_instance_type(instance_type) {\n    allowed_types := [\u0026quot;t3.micro\u0026quot;, \u0026quot;t3.small\u0026quot;, \u0026quot;t3.medium\u0026quot;, \u0026quot;m5.large\u0026quot;, \u0026quot;m5.xlarge\u0026quot;]\n    instance_type in allowed_types\n}\nEOF\n\n# Policy validation script\ncat \u0026gt; scripts/validate-policy.sh \u0026lt;\u0026lt;\u0026#039;EOF\u0026#039;\n#!/bin/bash\n\n# Generate Terraform plan\nterraform plan -out=tfplan\nterraform show -json tfplan \u0026gt; tfplan.json\n\n# Validate against policies\nconftest test tfplan.json --policy policy/\n\n# Cleanup\nrm tfplan tfplan.json\nEOF\n\nchmod +x scripts/validate-policy.sh\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"9-database-setup\" class=\"mobile-header\"\u003e9. Database Setup\u003c/h2\u003e\n\u003cp class=\"mobile-paragraph\"\u003eTerraform doesn't require a traditional database, but it does use state files and can integrate with various storage backends:\u003c/p\u003e\n\u003ch3 id=\"state-storage-backends\" class=\"mobile-header\"\u003eState Storage Backends\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# PostgreSQL backend (for Terraform Enterprise)\ncat \u0026gt; backend-postgres.tf \u0026lt;\u0026lt;EOF\nterraform {\n  backend \u0026quot;pg\u0026quot; {\n    conn_str = \u0026quot;postgres://user:pass@localhost/terraform_backend?sslmode=require\u0026quot;\n  }\n}\nEOF\n\n# Consul backend for distributed state\ncat \u0026gt; backend-consul.tf \u0026lt;\u0026lt;EOF\nterraform {\n  backend \u0026quot;consul\u0026quot; {\n    address = \u0026quot;consul.company.com:8500\u0026quot;\n    scheme  = \u0026quot;https\u0026quot;\n    path    = \u0026quot;terraform/infrastructure\u0026quot;\n  }\n}\nEOF\n\n# etcd backend\ncat \u0026gt; backend-etcd.tf \u0026lt;\u0026lt;EOF\nterraform {\n  backend \u0026quot;etcdv3\u0026quot; {\n    endpoints = [\u0026quot;http://etcd1:2379\u0026quot;, \u0026quot;http://etcd2:2379\u0026quot;, \u0026quot;http://etcd3:2379\u0026quot;]\n    lock      = true\n    prefix    = \u0026quot;terraform-state/\u0026quot;\n  }\n}\nEOF\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"database-infrastructure-management\" class=\"mobile-header\"\u003eDatabase Infrastructure Management\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Database deployment with Terraform\ncat \u0026gt; database.tf \u0026lt;\u0026lt;EOF\n# RDS instance with Multi-AZ\nresource \u0026quot;aws_db_instance\u0026quot; \u0026quot;main\u0026quot; {\n  identifier = \u0026quot;${var.project_name}-db\u0026quot;\n  \n  engine         = \u0026quot;postgresql\u0026quot;\n  engine_version = \u0026quot;15.4\u0026quot;\n  instance_class = \u0026quot;db.t3.micro\u0026quot;\n  \n  allocated_storage     = 20\n  max_allocated_storage = 100\n  storage_type         = \u0026quot;gp3\u0026quot;\n  storage_encrypted    = true\n  kms_key_id          = aws_kms_key.rds.arn\n  \n  db_name  = var.database_name\n  username = var.database_username\n  password = var.database_password\n  port     = 5432\n  \n  multi_az               = true\n  publicly_accessible    = false\n  backup_retention_period = 7\n  backup_window          = \u0026quot;03:00-04:00\u0026quot;\n  maintenance_window     = \u0026quot;sun:04:00-sun:05:00\u0026quot;\n  \n  skip_final_snapshot = false\n  final_snapshot_identifier = \u0026quot;${var.project_name}-db-final-snapshot\u0026quot;\n  \n  vpc_security_group_ids = [aws_security_group.rds.id]\n  db_subnet_group_name   = aws_db_subnet_group.main.name\n  \n  tags = var.common_tags\n}\n\n# Database subnet group\nresource \u0026quot;aws_db_subnet_group\u0026quot; \u0026quot;main\u0026quot; {\n  name       = \u0026quot;${var.project_name}-db-subnet-group\u0026quot;\n  subnet_ids = var.private_subnet_ids\n\n  tags = merge(var.common_tags, {\n    Name = \u0026quot;${var.project_name}-db-subnet-group\u0026quot;\n  })\n}\n\n# KMS key for RDS encryption\nresource \u0026quot;aws_kms_key\u0026quot; \u0026quot;rds\u0026quot; {\n  description             = \u0026quot;KMS key for RDS encryption\u0026quot;\n  deletion_window_in_days = 7\n\n  tags = merge(var.common_tags, {\n    Name = \u0026quot;${var.project_name}-rds-kms-key\u0026quot;\n  })\n}\nEOF\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"10-performance-optimization\" class=\"mobile-header\"\u003e10. Performance Optimization\u003c/h2\u003e\n\u003ch3 id=\"terraform-performance-tuning\" class=\"mobile-header\"\u003eTerraform Performance Tuning\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Optimize Terraform execution\ncat \u0026gt; terraform.tfvars \u0026lt;\u0026lt;EOF\n# Performance settings\nterraform_parallelism = 10\nterraform_refresh = true\nterraform_upgrade = false\nEOF\n\n# Performance optimization script\ncat \u0026gt; scripts/optimize-terraform.sh \u0026lt;\u0026lt;\u0026#039;EOF\u0026#039;\n#!/bin/bash\n\n# Increase parallelism for faster execution\nexport TF_CLI_ARGS_plan=\u0026quot;-parallelism=10\u0026quot;\nexport TF_CLI_ARGS_apply=\u0026quot;-parallelism=10\u0026quot;\n\n# Use faster JSON output for large states\nexport TF_CLI_ARGS_show=\u0026quot;-json\u0026quot;\n\n# Optimize provider caching\nexport TF_PLUGIN_CACHE_DIR=\u0026quot;$HOME/.terraform.d/plugin-cache\u0026quot;\nmkdir -p \u0026quot;$TF_PLUGIN_CACHE_DIR\u0026quot;\n\n# Performance monitoring\necho \u0026quot;Starting Terraform operation at $(date)\u0026quot;\ntime terraform \u0026quot;$@\u0026quot;\necho \u0026quot;Completed Terraform operation at $(date)\u0026quot;\nEOF\n\nchmod +x scripts/optimize-terraform.sh\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"large-infrastructure-management\" class=\"mobile-header\"\u003eLarge Infrastructure Management\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Workspace and module organization\ncat \u0026gt; modules/infrastructure/main.tf \u0026lt;\u0026lt;EOF\n# Optimized module structure for large deployments\nterraform {\n  required_providers {\n    aws = {\n      source  = \u0026quot;hashicorp/aws\u0026quot;\n      version = \u0026quot;~\u0026gt; 5.0\u0026quot;\n    }\n  }\n}\n\n# Use data sources efficiently\ndata \u0026quot;aws_availability_zones\u0026quot; \u0026quot;available\u0026quot; {\n  state = \u0026quot;available\u0026quot;\n  \n  # Cache this data to avoid repeated API calls\n  lifecycle {\n    postcondition {\n      condition     = length(self.names) \u0026gt;= 2\n      error_message = \u0026quot;At least 2 availability zones required.\u0026quot;\n    }\n  }\n}\n\n# Optimize resource creation with for_each\nresource \u0026quot;aws_subnet\u0026quot; \u0026quot;private\u0026quot; {\n  for_each = toset(slice(data.aws_availability_zones.available.names, 0, var.subnet_count))\n  \n  vpc_id            = aws_vpc.main.id\n  cidr_block        = cidrsubnet(var.vpc_cidr, 8, index(data.aws_availability_zones.available.names, each.value) + 10)\n  availability_zone = each.value\n  \n  tags = merge(var.common_tags, {\n    Name = \u0026quot;${var.name_prefix}-private-${each.value}\u0026quot;\n    Type = \u0026quot;private\u0026quot;\n  })\n}\n\n# Use locals for complex computations\nlocals {\n  # Pre-compute values to avoid recalculation\n  availability_zones = slice(data.aws_availability_zones.available.names, 0, var.subnet_count)\n  \n  # Create maps for efficient lookups\n  subnet_map = {\n    for subnet in aws_subnet.private : \n    subnet.availability_zone =\u0026gt; subnet.id\n  }\n}\nEOF\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"state-optimization\" class=\"mobile-header\"\u003eState Optimization\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# State file optimization script\ncat \u0026gt; scripts/optimize-state.sh \u0026lt;\u0026lt;\u0026#039;EOF\u0026#039;\n#!/bin/bash\n\n# Pull current state for backup\nterraform state pull \u0026gt; state-backup-$(date +%Y%m%d_%H%M%S).json\n\n# Remove unused resources from state\nterraform state list | while read resource; do\n    if terraform plan -target=\u0026quot;$resource\u0026quot; | grep -q \u0026quot;No changes\u0026quot;; then\n        echo \u0026quot;Checking if $resource can be safely removed...\u0026quot;\n        # Add logic to safely remove unused resources\n    fi\ndone\n\n# Refresh state to sync with real infrastructure\nterraform refresh\n\necho \u0026quot;State optimization completed\u0026quot;\nEOF\n\nchmod +x scripts/optimize-state.sh\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"11-monitoring\" class=\"mobile-header\"\u003e11. Monitoring\u003c/h2\u003e\n\u003ch3 id=\"terraform-operations-monitoring\" class=\"mobile-header\"\u003eTerraform Operations Monitoring\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Terraform execution monitoring\ncat \u0026gt; scripts/monitor-terraform.sh \u0026lt;\u0026lt;\u0026#039;EOF\u0026#039;\n#!/bin/bash\n\nLOG_FILE=\u0026quot;/var/log/terraform/operations.log\u0026quot;\nMETRICS_FILE=\u0026quot;/var/log/terraform/metrics.log\u0026quot;\n\n# Ensure log directory exists\nmkdir -p \u0026quot;$(dirname \u0026quot;$LOG_FILE\u0026quot;)\u0026quot;\nmkdir -p \u0026quot;$(dirname \u0026quot;$METRICS_FILE\u0026quot;)\u0026quot;\n\n# Function to log operations\nlog_operation() {\n    local operation=\u0026quot;$1\u0026quot;\n    local status=\u0026quot;$2\u0026quot;\n    local duration=\u0026quot;$3\u0026quot;\n    local timestamp=$(date \u0026#039;+%Y-%m-%d %H:%M:%S\u0026#039;)\n    \n    echo \u0026quot;[$timestamp] Operation: $operation, Status: $status, Duration: ${duration}s\u0026quot; \u0026gt;\u0026gt; \u0026quot;$LOG_FILE\u0026quot;\n    echo \u0026quot;terraform_operation_duration{operation=\\\u0026quot;$operation\\\u0026quot;,status=\\\u0026quot;$status\\\u0026quot;} $duration\u0026quot; \u0026gt;\u0026gt; \u0026quot;$METRICS_FILE\u0026quot;\n}\n\n# Wrapper function for terraform commands\nterraform_monitored() {\n    local operation=\u0026quot;$1\u0026quot;\n    shift\n    local start_time=$(date +%s)\n    local exit_code=0\n    \n    echo \u0026quot;Starting Terraform $operation at $(date)\u0026quot;\n    \n    if terraform \u0026quot;$operation\u0026quot; \u0026quot;$@\u0026quot;; then\n        local end_time=$(date +%s)\n        local duration=$((end_time - start_time))\n        log_operation \u0026quot;$operation\u0026quot; \u0026quot;success\u0026quot; \u0026quot;$duration\u0026quot;\n        echo \u0026quot;Terraform $operation completed successfully in ${duration}s\u0026quot;\n    else\n        exit_code=$?\n        local end_time=$(date +%s)\n        local duration=$((end_time - start_time))\n        log_operation \u0026quot;$operation\u0026quot; \u0026quot;failure\u0026quot; \u0026quot;$duration\u0026quot;\n        echo \u0026quot;Terraform $operation failed after ${duration}s\u0026quot;\n        return $exit_code\n    fi\n}\n\n# Usage: terraform_monitored plan, terraform_monitored apply, etc.\nterraform_monitored \u0026quot;$@\u0026quot;\nEOF\n\nchmod +x scripts/monitor-terraform.sh\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"infrastructure-monitoring-with-terraform\" class=\"mobile-header\"\u003eInfrastructure Monitoring with Terraform\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Deploy monitoring stack with Terraform\ncat \u0026gt; monitoring.tf \u0026lt;\u0026lt;EOF\n# CloudWatch alarms for infrastructure\nresource \u0026quot;aws_cloudwatch_metric_alarm\u0026quot; \u0026quot;high_cpu\u0026quot; {\n  for_each = toset(module.compute.instance_ids)\n  \n  alarm_name          = \u0026quot;high-cpu-${each.key}\u0026quot;\n  comparison_operator = \u0026quot;GreaterThanThreshold\u0026quot;\n  evaluation_periods  = \u0026quot;2\u0026quot;\n  metric_name        = \u0026quot;CPUUtilization\u0026quot;\n  namespace          = \u0026quot;AWS/EC2\u0026quot;\n  period             = \u0026quot;300\u0026quot;\n  statistic          = \u0026quot;Average\u0026quot;\n  threshold          = \u0026quot;80\u0026quot;\n  alarm_description  = \u0026quot;This metric monitors EC2 CPU utilization\u0026quot;\n\n  dimensions = {\n    InstanceId = each.value\n  }\n\n  alarm_actions = [aws_sns_topic.alerts.arn]\n  \n  tags = var.common_tags\n}\n\n# SNS topic for alerts\nresource \u0026quot;aws_sns_topic\u0026quot; \u0026quot;alerts\u0026quot; {\n  name = \u0026quot;${var.project_name}-infrastructure-alerts\u0026quot;\n  \n  tags = var.common_tags\n}\n\nresource \u0026quot;aws_sns_topic_subscription\u0026quot; \u0026quot;email_alerts\u0026quot; {\n  topic_arn = aws_sns_topic.alerts.arn\n  protocol  = \u0026quot;email\u0026quot;\n  endpoint  = var.alert_email\n}\n\n# Log group for Terraform operations\nresource \u0026quot;aws_cloudwatch_log_group\u0026quot; \u0026quot;terraform_ops\u0026quot; {\n  name              = \u0026quot;/terraform/operations\u0026quot;\n  retention_in_days = 30\n  \n  tags = var.common_tags\n}\n\n# Dashboard for infrastructure monitoring\nresource \u0026quot;aws_cloudwatch_dashboard\u0026quot; \u0026quot;main\u0026quot; {\n  dashboard_name = \u0026quot;${var.project_name}-infrastructure\u0026quot;\n\n  dashboard_body = jsonencode({\n    widgets = [\n      {\n        type   = \u0026quot;metric\u0026quot;\n        x      = 0\n        y      = 0\n        width  = 12\n        height = 6\n\n        properties = {\n          metrics = [\n            [\u0026quot;AWS/EC2\u0026quot;, \u0026quot;CPUUtilization\u0026quot;, \u0026quot;InstanceId\u0026quot;, module.compute.instance_ids[0]],\n          ]\n          view    = \u0026quot;timeSeries\u0026quot;\n          stacked = false\n          region  = var.aws_region\n          title   = \u0026quot;EC2 Instance CPU\u0026quot;\n          period  = 300\n        }\n      }\n    ]\n  })\n}\nEOF\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"terraform-cloud-monitoring\" class=\"mobile-header\"\u003eTerraform Cloud Monitoring\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Monitor Terraform Cloud workspaces\ncat \u0026gt; scripts/monitor-tf-cloud.sh \u0026lt;\u0026lt;\u0026#039;EOF\u0026#039;\n#!/bin/bash\n\nTF_CLOUD_TOKEN=\u0026quot;${TF_CLOUD_TOKEN}\u0026quot;\nORGANIZATION=\u0026quot;${TF_ORGANIZATION}\u0026quot;\n\n# Function to get workspace status\nget_workspace_status() {\n    local workspace_name=\u0026quot;$1\u0026quot;\n    \n    curl -s \\\n        --header \u0026quot;Authorization: Bearer $TF_CLOUD_TOKEN\u0026quot; \\\n        --header \u0026quot;Content-Type: application/vnd.api+json\u0026quot; \\\n        \u0026quot;https://app.terraform.io/api/v2/organizations/$ORGANIZATION/workspaces/$workspace_name/current-run\u0026quot; \\\n        | jq -r \u0026#039;.data.attributes.status\u0026#039;\n}\n\n# Function to get workspace runs\nget_recent_runs() {\n    local workspace_id=\u0026quot;$1\u0026quot;\n    \n    curl -s \\\n        --header \u0026quot;Authorization: Bearer $TF_CLOUD_TOKEN\u0026quot; \\\n        --header \u0026quot;Content-Type: application/vnd.api+json\u0026quot; \\\n        \u0026quot;https://app.terraform.io/api/v2/workspaces/$workspace_id/runs\u0026quot; \\\n        | jq -r \u0026#039;.data[].attributes | \u0026quot;\\(.status) - \\(.created_at)\u0026quot;\u0026#039;\n}\n\n# Monitor critical workspaces\nWORKSPACES=(\u0026quot;production-web\u0026quot; \u0026quot;production-database\u0026quot; \u0026quot;staging-environment\u0026quot;)\n\nfor workspace in \u0026quot;${WORKSPACES[@]}\u0026quot;; do\n    status=$(get_workspace_status \u0026quot;$workspace\u0026quot;)\n    echo \u0026quot;Workspace: $workspace, Status: $status\u0026quot;\n    \n    if [[ \u0026quot;$status\u0026quot; == \u0026quot;errored\u0026quot; ]]; then\n        echo \u0026quot;❌ ALERT: Workspace $workspace has errors!\u0026quot;\n        # Send alert to monitoring system\n        curl -X POST \\\n            -H \u0026quot;Content-Type: application/json\u0026quot; \\\n            -d \u0026quot;{\\\u0026quot;text\\\u0026quot;: \\\u0026quot;Terraform workspace $workspace has errors\\\u0026quot;}\u0026quot; \\\n            \u0026quot;$SLACK_WEBHOOK_URL\u0026quot;\n    elif [[ \u0026quot;$status\u0026quot; == \u0026quot;planned_and_finished\u0026quot; ]]; then\n        echo \u0026quot;✅ Workspace $workspace is healthy\u0026quot;\n    fi\ndone\nEOF\n\nchmod +x scripts/monitor-tf-cloud.sh\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"12-backup-and-restore\" class=\"mobile-header\"\u003e12. Backup and Restore\u003c/h2\u003e\n\u003ch3 id=\"state-file-backup\" class=\"mobile-header\"\u003eState File Backup\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Comprehensive state backup script\ncat \u0026gt; scripts/backup-terraform-state.sh \u0026lt;\u0026lt;\u0026#039;EOF\u0026#039;\n#!/bin/bash\n\nBACKUP_DIR=\u0026quot;/backup/terraform\u0026quot;\nDATE=$(date +%Y%m%d_%H%M%S)\nENVIRONMENTS=(\u0026quot;development\u0026quot; \u0026quot;staging\u0026quot; \u0026quot;production\u0026quot;)\n\nmkdir -p \u0026quot;$BACKUP_DIR\u0026quot;\n\nbackup_state() {\n    local environment=\u0026quot;$1\u0026quot;\n    local backup_path=\u0026quot;$BACKUP_DIR/$environment\u0026quot;\n    \n    echo \u0026quot;Backing up $environment state...\u0026quot;\n    mkdir -p \u0026quot;$backup_path\u0026quot;\n    \n    # Change to environment directory\n    cd \u0026quot;environments/$environment\u0026quot; || return 1\n    \n    # Pull current state\n    terraform state pull \u0026gt; \u0026quot;$backup_path/terraform-state-$DATE.json\u0026quot;\n    \n    # Backup configuration files\n    tar -czf \u0026quot;$backup_path/terraform-config-$DATE.tar.gz\u0026quot; \\\n        --exclude=\u0026quot;.terraform\u0026quot; \\\n        --exclude=\u0026quot;*.tfplan\u0026quot; \\\n        .\n    \n    # Backup workspace info\n    terraform workspace show \u0026gt; \u0026quot;$backup_path/current-workspace-$DATE.txt\u0026quot;\n    terraform workspace list \u0026gt; \u0026quot;$backup_path/all-workspaces-$DATE.txt\u0026quot;\n    \n    # Backup provider versions\n    terraform version \u0026gt; \u0026quot;$backup_path/terraform-version-$DATE.txt\u0026quot;\n    \n    cd - \u0026gt; /dev/null\n    \n    echo \u0026quot;✅ Backup completed for $environment\u0026quot;\n}\n\n# Backup all environments\nfor env in \u0026quot;${ENVIRONMENTS[@]}\u0026quot;; do\n    if [[ -d \u0026quot;environments/$env\u0026quot; ]]; then\n        backup_state \u0026quot;$env\u0026quot;\n    else\n        echo \u0026quot;⚠️  Environment directory not found: environments/$env\u0026quot;\n    fi\ndone\n\n# Create consolidated backup\ncd \u0026quot;$BACKUP_DIR\u0026quot;\ntar -czf \u0026quot;terraform-complete-backup-$DATE.tar.gz\u0026quot; \\\n    --exclude=\u0026quot;*.tar.gz\u0026quot; \\\n    .\n\n# Upload to cloud storage\nif command -v aws \u0026amp;\u0026gt; /dev/null; then\n    aws s3 cp \u0026quot;terraform-complete-backup-$DATE.tar.gz\u0026quot; \\\n        s3://terraform-backups/\nfi\n\nif command -v az \u0026amp;\u0026gt; /dev/null; then\n    az storage blob upload \\\n        --file \u0026quot;terraform-complete-backup-$DATE.tar.gz\u0026quot; \\\n        --container-name terraform-backups \\\n        --name \u0026quot;terraform-complete-backup-$DATE.tar.gz\u0026quot;\nfi\n\nif command -v gsutil \u0026amp;\u0026gt; /dev/null; then\n    gsutil cp \u0026quot;terraform-complete-backup-$DATE.tar.gz\u0026quot; \\\n        gs://terraform-backups/\nfi\n\n# Cleanup old backups (keep last 30 days)\nfind \u0026quot;$BACKUP_DIR\u0026quot; -name \u0026quot;terraform-complete-backup-*.tar.gz\u0026quot; \\\n    -mtime +30 -delete\n\necho \u0026quot;🎉 All backups completed successfully\u0026quot;\nEOF\n\nchmod +x scripts/backup-terraform-state.sh\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"disaster-recovery-procedures\" class=\"mobile-header\"\u003eDisaster Recovery Procedures\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Disaster recovery script\ncat \u0026gt; scripts/disaster-recovery.sh \u0026lt;\u0026lt;\u0026#039;EOF\u0026#039;\n#!/bin/bash\n\nBACKUP_FILE=\u0026quot;$1\u0026quot;\nTARGET_ENVIRONMENT=\u0026quot;$2\u0026quot;\n\nif [[ -z \u0026quot;$BACKUP_FILE\u0026quot; || -z \u0026quot;$TARGET_ENVIRONMENT\u0026quot; ]]; then\n    echo \u0026quot;Usage: $0 \u0026lt;backup-file.tar.gz\u0026gt; \u0026lt;target-environment\u0026gt;\u0026quot;\n    echo \u0026quot;Example: $0 terraform-complete-backup-20240115_143000.tar.gz production\u0026quot;\n    exit 1\nfi\n\n# Verify backup file exists\nif [[ ! -f \u0026quot;$BACKUP_FILE\u0026quot; ]]; then\n    echo \u0026quot;❌ Backup file not found: $BACKUP_FILE\u0026quot;\n    exit 1\nfi\n\n# Create recovery directory\nRECOVERY_DIR=\u0026quot;/tmp/terraform-recovery-$(date +%s)\u0026quot;\nmkdir -p \u0026quot;$RECOVERY_DIR\u0026quot;\n\n# Extract backup\necho \u0026quot;📦 Extracting backup...\u0026quot;\ntar -xzf \u0026quot;$BACKUP_FILE\u0026quot; -C \u0026quot;$RECOVERY_DIR\u0026quot;\n\n# Navigate to target environment\ncd \u0026quot;environments/$TARGET_ENVIRONMENT\u0026quot; || {\n    echo \u0026quot;❌ Target environment directory not found: environments/$TARGET_ENVIRONMENT\u0026quot;\n    exit 1\n}\n\n# Backup current state before recovery\necho \u0026quot;💾 Backing up current state...\u0026quot;\nterraform state pull \u0026gt; \u0026quot;current-state-backup-$(date +%Y%m%d_%H%M%S).json\u0026quot;\n\n# Import recovered state\nRECOVERED_STATE=\u0026quot;$RECOVERY_DIR/$TARGET_ENVIRONMENT/terraform-state-*.json\u0026quot;\nif [[ -f $RECOVERED_STATE ]]; then\n    echo \u0026quot;🔄 Restoring state from backup...\u0026quot;\n    terraform state push \u0026quot;$RECOVERED_STATE\u0026quot;\nelse\n    echo \u0026quot;❌ No state file found in backup for environment: $TARGET_ENVIRONMENT\u0026quot;\n    exit 1\nfi\n\n# Verify state consistency\necho \u0026quot;🔍 Verifying state consistency...\u0026quot;\nif terraform plan -detailed-exitcode; then\n    echo \u0026quot;✅ State restored successfully - no drift detected\u0026quot;\nelif [[ $? -eq 2 ]]; then\n    echo \u0026quot;⚠️  State restored but drift detected - manual review required\u0026quot;\n    terraform plan\nelse\n    echo \u0026quot;❌ State restoration failed - check error messages above\u0026quot;\n    exit 1\nfi\n\n# Cleanup\nrm -rf \u0026quot;$RECOVERY_DIR\u0026quot;\n\necho \u0026quot;🎉 Disaster recovery completed for environment: $TARGET_ENVIRONMENT\u0026quot;\necho \u0026quot;💡 Please review the plan output and apply changes if necessary\u0026quot;\nEOF\n\nchmod +x scripts/disaster-recovery.sh\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"state-migration-and-refactoring\" class=\"mobile-header\"\u003eState Migration and Refactoring\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# State migration script for refactoring\ncat \u0026gt; scripts/migrate-state.sh \u0026lt;\u0026lt;\u0026#039;EOF\u0026#039;\n#!/bin/bash\n\n# Function to safely move resources in state\nmove_resource() {\n    local old_address=\u0026quot;$1\u0026quot;\n    local new_address=\u0026quot;$2\u0026quot;\n    \n    echo \u0026quot;Moving $old_address to $new_address\u0026quot;\n    \n    # Check if source resource exists\n    if terraform state show \u0026quot;$old_address\u0026quot; \u0026amp;\u0026gt;/dev/null; then\n        terraform state mv \u0026quot;$old_address\u0026quot; \u0026quot;$new_address\u0026quot;\n        echo \u0026quot;✅ Successfully moved $old_address to $new_address\u0026quot;\n    else\n        echo \u0026quot;⚠️  Resource not found: $old_address\u0026quot;\n    fi\n}\n\n# Function to import existing resources\nimport_resource() {\n    local resource_address=\u0026quot;$1\u0026quot;\n    local resource_id=\u0026quot;$2\u0026quot;\n    \n    echo \u0026quot;Importing $resource_id as $resource_address\u0026quot;\n    \n    if terraform import \u0026quot;$resource_address\u0026quot; \u0026quot;$resource_id\u0026quot;; then\n        echo \u0026quot;✅ Successfully imported $resource_id as $resource_address\u0026quot;\n    else\n        echo \u0026quot;❌ Failed to import $resource_id\u0026quot;\n    fi\n}\n\n# Example migrations\necho \u0026quot;🔄 Starting state migrations...\u0026quot;\n\n# Move resources to modules\nmove_resource \u0026quot;aws_instance.web\u0026quot; \u0026quot;module.web_servers.aws_instance.main[0]\u0026quot;\nmove_resource \u0026quot;aws_security_group.web\u0026quot; \u0026quot;module.web_servers.aws_security_group.main\u0026quot;\n\n# Import existing resources\nimport_resource \u0026quot;aws_s3_bucket.existing_bucket\u0026quot; \u0026quot;existing-bucket-name\u0026quot;\n\n# Remove resources that are no longer managed\nterraform state rm aws_instance.deprecated\n\necho \u0026quot;🎉 State migrations completed\u0026quot;\necho \u0026quot;💡 Run \u0026#039;terraform plan\u0026#039; to verify changes\u0026quot;\nEOF\n\nchmod +x scripts/migrate-state.sh\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"13-troubleshooting\" class=\"mobile-header\"\u003e13. Troubleshooting\u003c/h2\u003e\n\u003ch3 id=\"common-issues-and-solutions\" class=\"mobile-header\"\u003eCommon Issues and Solutions\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Terraform troubleshooting script\ncat \u0026gt; scripts/troubleshoot-terraform.sh \u0026lt;\u0026lt;\u0026#039;EOF\u0026#039;\n#!/bin/bash\n\necho \u0026quot;🔧 Terraform Troubleshooting Tool\u0026quot;\necho \u0026quot;================================\u0026quot;\n\n# Check Terraform installation\ncheck_installation() {\n    echo \u0026quot;📋 Checking Terraform installation...\u0026quot;\n    \n    if command -v terraform \u0026amp;\u0026gt; /dev/null; then\n        terraform version\n        echo \u0026quot;✅ Terraform is installed\u0026quot;\n    else\n        echo \u0026quot;❌ Terraform is not installed or not in PATH\u0026quot;\n        return 1\n    fi\n}\n\n# Check configuration syntax\ncheck_configuration() {\n    echo \u0026quot;📋 Checking configuration syntax...\u0026quot;\n    \n    if terraform fmt -check -diff; then\n        echo \u0026quot;✅ Configuration is properly formatted\u0026quot;\n    else\n        echo \u0026quot;⚠️  Configuration formatting issues found\u0026quot;\n        terraform fmt -diff\n    fi\n    \n    if terraform validate; then\n        echo \u0026quot;✅ Configuration is valid\u0026quot;\n    else\n        echo \u0026quot;❌ Configuration validation failed\u0026quot;\n        return 1\n    fi\n}\n\n# Check provider authentication\ncheck_providers() {\n    echo \u0026quot;📋 Checking provider authentication...\u0026quot;\n    \n    # AWS\n    if aws sts get-caller-identity \u0026amp;\u0026gt;/dev/null; then\n        echo \u0026quot;✅ AWS credentials are valid\u0026quot;\n    else\n        echo \u0026quot;⚠️  AWS credentials may be invalid or not configured\u0026quot;\n    fi\n    \n    # Azure\n    if az account show \u0026amp;\u0026gt;/dev/null; then\n        echo \u0026quot;✅ Azure credentials are valid\u0026quot;\n    else\n        echo \u0026quot;⚠️  Azure credentials may be invalid or not configured\u0026quot;\n    fi\n    \n    # GCP\n    if gcloud auth list --filter=status:ACTIVE --format=\u0026quot;value(account)\u0026quot; \u0026amp;\u0026gt;/dev/null; then\n        echo \u0026quot;✅ GCP credentials are valid\u0026quot;\n    else\n        echo \u0026quot;⚠️  GCP credentials may be invalid or not configured\u0026quot;\n    fi\n}\n\n# Check state file\ncheck_state() {\n    echo \u0026quot;📋 Checking state file...\u0026quot;\n    \n    if terraform state list \u0026amp;\u0026gt;/dev/null; then\n        resource_count=$(terraform state list | wc -l)\n        echo \u0026quot;✅ State file is accessible with $resource_count resources\u0026quot;\n    else\n        echo \u0026quot;❌ Cannot access state file\u0026quot;\n        return 1\n    fi\n}\n\n# Check for common issues\ncheck_common_issues() {\n    echo \u0026quot;📋 Checking for common issues...\u0026quot;\n    \n    # Check for lock file\n    if [[ -f \u0026quot;.terraform.lock.hcl\u0026quot; ]]; then\n        echo \u0026quot;✅ Lock file exists\u0026quot;\n    else\n        echo \u0026quot;⚠️  Lock file missing - run \u0026#039;terraform init\u0026#039;\u0026quot;\n    fi\n    \n    # Check for local state file in production\n    if [[ -f \u0026quot;terraform.tfstate\u0026quot; ]] \u0026amp;\u0026amp; [[ $(terraform workspace show) == \u0026quot;production\u0026quot; ]]; then\n        echo \u0026quot;⚠️  Local state file detected in production workspace\u0026quot;\n        echo \u0026quot;    Consider using remote state for production\u0026quot;\n    fi\n    \n    # Check for hardcoded secrets\n    if grep -r \u0026quot;password\\s*=\\s*\\\u0026quot;\u0026quot; . --include=\u0026quot;*.tf\u0026quot; --include=\u0026quot;*.tfvars\u0026quot; 2\u0026gt;/dev/null; then\n        echo \u0026quot;⚠️  Potential hardcoded passwords found\u0026quot;\n    fi\n    \n    # Check for large state file\n    if [[ -f \u0026quot;terraform.tfstate\u0026quot; ]]; then\n        state_size=$(stat -f%z \u0026quot;terraform.tfstate\u0026quot; 2\u0026gt;/dev/null || stat -c%s \u0026quot;terraform.tfstate\u0026quot; 2\u0026gt;/dev/null)\n        if [[ $state_size -gt 10485760 ]]; then  # 10MB\n            echo \u0026quot;⚠️  Large state file detected ($(($state_size / 1024 / 1024))MB)\u0026quot;\n            echo \u0026quot;    Consider splitting into smaller configurations\u0026quot;\n        fi\n    fi\n}\n\n# Debug mode information\ndebug_info() {\n    echo \u0026quot;📋 Debug information...\u0026quot;\n    \n    echo \u0026quot;Working directory: $(pwd)\u0026quot;\n    echo \u0026quot;Terraform workspace: $(terraform workspace show)\u0026quot;\n    echo \u0026quot;Environment variables:\u0026quot;\n    env | grep -E \u0026quot;^(TF_|AWS_|ARM_|GOOGLE_)\u0026quot; | sed \u0026#039;s/=.*/=***/\u0026#039; | sort\n}\n\n# Run all checks\nrun_all_checks() {\n    check_installation || return 1\n    check_configuration || return 1\n    check_providers\n    check_state || return 1\n    check_common_issues\n    debug_info\n}\n\n# Main execution\ncase \u0026quot;${1:-all}\u0026quot; in\n    \u0026quot;installation\u0026quot;)\n        check_installation\n        ;;\n    \u0026quot;config\u0026quot;)\n        check_configuration\n        ;;\n    \u0026quot;providers\u0026quot;)\n        check_providers\n        ;;\n    \u0026quot;state\u0026quot;)\n        check_state\n        ;;\n    \u0026quot;common\u0026quot;)\n        check_common_issues\n        ;;\n    \u0026quot;debug\u0026quot;)\n        debug_info\n        ;;\n    \u0026quot;all\u0026quot;)\n        run_all_checks\n        ;;\n    *)\n        echo \u0026quot;Usage: $0 [installation|config|providers|state|common|debug|all]\u0026quot;\n        exit 1\n        ;;\nesac\nEOF\n\nchmod +x scripts/troubleshoot-terraform.sh\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"advanced-debugging\" class=\"mobile-header\"\u003eAdvanced Debugging\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Advanced debugging techniques\ncat \u0026gt; scripts/debug-terraform.sh \u0026lt;\u0026lt;\u0026#039;EOF\u0026#039;\n#!/bin/bash\n\n# Enable debug logging\nexport TF_LOG=DEBUG\nexport TF_LOG_PATH=\u0026quot;terraform-debug-$(date +%Y%m%d_%H%M%S).log\u0026quot;\n\n# Create debug session\ndebug_session() {\n    local operation=\u0026quot;$1\u0026quot;\n    shift\n    \n    echo \u0026quot;🐛 Starting debug session for: $operation\u0026quot;\n    echo \u0026quot;Debug log: $TF_LOG_PATH\u0026quot;\n    \n    # Capture detailed timing information\n    time terraform \u0026quot;$operation\u0026quot; \u0026quot;$@\u0026quot; 2\u0026gt;\u0026amp;1 | tee -a \u0026quot;$TF_LOG_PATH\u0026quot;\n    \n    local exit_code=${PIPESTATUS[0]}\n    \n    if [[ $exit_code -ne 0 ]]; then\n        echo \u0026quot;❌ Operation failed with exit code: $exit_code\u0026quot;\n        echo \u0026quot;📄 Last 50 lines of debug log:\u0026quot;\n        tail -50 \u0026quot;$TF_LOG_PATH\u0026quot;\n    else\n        echo \u0026quot;✅ Operation completed successfully\u0026quot;\n    fi\n    \n    return $exit_code\n}\n\n# Analyze state file for issues\nanalyze_state() {\n    echo \u0026quot;🔍 Analyzing state file...\u0026quot;\n    \n    # Check for orphaned resources\n    echo \u0026quot;Checking for potential orphaned resources...\u0026quot;\n    terraform state list | while read resource; do\n        if ! terraform plan -target=\u0026quot;$resource\u0026quot; -detailed-exitcode \u0026gt;/dev/null 2\u0026gt;\u0026amp;1; then\n            echo \u0026quot;⚠️  Potential issue with resource: $resource\u0026quot;\n        fi\n    done\n    \n    # Check for large resources in state\n    echo \u0026quot;Checking for large resources...\u0026quot;\n    terraform state pull | jq -r \u0026#039;.resources[] | select(.instances[0].attributes | length \u0026gt; 50) | .address\u0026#039; 2\u0026gt;/dev/null | head -10\n}\n\n# Provider debug information\ndebug_providers() {\n    echo \u0026quot;🔍 Debugging provider issues...\u0026quot;\n    \n    # Show provider configuration\n    terraform providers\n    \n    # Check provider cache\n    if [[ -d \u0026quot;$HOME/.terraform.d/plugin-cache\u0026quot; ]]; then\n        echo \u0026quot;Provider cache contents:\u0026quot;\n        ls -la \u0026quot;$HOME/.terraform.d/plugin-cache\u0026quot;\n    fi\n    \n    # Check for provider version conflicts\n    terraform version -json | jq \u0026#039;.provider_selections\u0026#039; 2\u0026gt;/dev/null\n}\n\n# Network and API debugging\ndebug_network() {\n    echo \u0026quot;🌐 Debugging network connectivity...\u0026quot;\n    \n    # Test connectivity to common endpoints\n    local endpoints=(\n        \u0026quot;https://releases.hashicorp.com\u0026quot;\n        \u0026quot;https://registry.terraform.io\u0026quot;\n        \u0026quot;https://api.github.com\u0026quot;\n        \u0026quot;https://aws.amazon.com\u0026quot;\n        \u0026quot;https://management.azure.com\u0026quot;\n        \u0026quot;https://www.googleapis.com\u0026quot;\n    )\n    \n    for endpoint in \u0026quot;${endpoints[@]}\u0026quot;; do\n        if curl -s --connect-timeout 5 \u0026quot;$endpoint\u0026quot; \u0026gt;/dev/null; then\n            echo \u0026quot;✅ $endpoint - OK\u0026quot;\n        else\n            echo \u0026quot;❌ $endpoint - FAILED\u0026quot;\n        fi\n    done\n}\n\n# Performance analysis\nanalyze_performance() {\n    echo \u0026quot;📊 Analyzing Terraform performance...\u0026quot;\n    \n    # Generate and analyze dependency graph\n    terraform graph \u0026gt; dependency-graph.dot\n    \n    # Count resources by type\n    echo \u0026quot;Resource distribution:\u0026quot;\n    terraform state list | cut -d. -f1 | sort | uniq -c | sort -nr | head -10\n    \n    # Estimate plan time based on resources\n    resource_count=$(terraform state list | wc -l)\n    estimated_time=$((resource_count * 2))  # Rough estimate: 2 seconds per resource\n    echo \u0026quot;Estimated plan time: ${estimated_time} seconds for $resource_count resources\u0026quot;\n}\n\n# Usage\ncase \u0026quot;${1:-help}\u0026quot; in\n    \u0026quot;session\u0026quot;)\n        shift\n        debug_session \u0026quot;$@\u0026quot;\n        ;;\n    \u0026quot;state\u0026quot;)\n        analyze_state\n        ;;\n    \u0026quot;providers\u0026quot;)\n        debug_providers\n        ;;\n    \u0026quot;network\u0026quot;)\n        debug_network\n        ;;\n    \u0026quot;performance\u0026quot;)\n        analyze_performance\n        ;;\n    \u0026quot;all\u0026quot;)\n        debug_providers\n        debug_network\n        analyze_state\n        analyze_performance\n        ;;\n    \u0026quot;help\u0026quot;|*)\n        echo \u0026quot;Usage: $0 [session|state|providers|network|performance|all]\u0026quot;\n        echo \u0026quot;\u0026quot;\n        echo \u0026quot;  session \u0026lt;operation\u0026gt; [args]  - Debug specific Terraform operation\u0026quot;\n        echo \u0026quot;  state                       - Analyze state file for issues\u0026quot;\n        echo \u0026quot;  providers                   - Debug provider configuration\u0026quot;\n        echo \u0026quot;  network                     - Test network connectivity\u0026quot;\n        echo \u0026quot;  performance                 - Analyze performance characteristics\u0026quot;\n        echo \u0026quot;  all                         - Run all debug checks\u0026quot;\n        ;;\nesac\nEOF\n\nchmod +x scripts/debug-terraform.sh\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"14-maintenance\" class=\"mobile-header\"\u003e14. Maintenance\u003c/h2\u003e\n\u003ch3 id=\"update-procedures\" class=\"mobile-header\"\u003eUpdate Procedures\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Terraform update script\ncat \u0026gt; scripts/update-terraform.sh \u0026lt;\u0026lt;\u0026#039;EOF\u0026#039;\n#!/bin/bash\n\nCURRENT_VERSION=$(terraform version -json | jq -r \u0026#039;.terraform_version\u0026#039;)\necho \u0026quot;Current Terraform version: $CURRENT_VERSION\u0026quot;\n\n# Check for latest version\ncheck_latest_version() {\n    local latest_version\n    latest_version=$(curl -s https://api.github.com/repos/hashicorp/terraform/releases/latest | jq -r \u0026#039;.tag_name\u0026#039; | sed \u0026#039;s/v//\u0026#039;)\n    echo \u0026quot;Latest Terraform version: $latest_version\u0026quot;\n    \n    if [[ \u0026quot;$CURRENT_VERSION\u0026quot; != \u0026quot;$latest_version\u0026quot; ]]; then\n        echo \u0026quot;⚠️  Update available: $CURRENT_VERSION → $latest_version\u0026quot;\n        return 1\n    else\n        echo \u0026quot;✅ Terraform is up to date\u0026quot;\n        return 0\n    fi\n}\n\n# Update using package manager\nupdate_terraform() {\n    echo \u0026quot;🔄 Updating Terraform...\u0026quot;\n    \n    if command -v apt \u0026amp;\u0026gt;/dev/null; then\n        sudo apt update \u0026amp;\u0026amp; sudo apt upgrade terraform\n    elif command -v yum \u0026amp;\u0026gt;/dev/null; then\n        sudo yum update terraform\n    elif command -v dnf \u0026amp;\u0026gt;/dev/null; then\n        sudo dnf update terraform\n    elif command -v pacman \u0026amp;\u0026gt;/dev/null; then\n        sudo pacman -Syu terraform\n    elif command -v zypper \u0026amp;\u0026gt;/dev/null; then\n        sudo zypper update terraform\n    elif command -v brew \u0026amp;\u0026gt;/dev/null; then\n        brew upgrade terraform\n    else\n        echo \u0026quot;❌ No supported package manager found\u0026quot;\n        echo \u0026quot;💡 Please update manually from: https://releases.hashicorp.com/terraform/\u0026quot;\n        return 1\n    fi\n}\n\n# Update providers\nupdate_providers() {\n    echo \u0026quot;🔄 Updating providers...\u0026quot;\n    terraform init -upgrade\n}\n\n# Verify update\nverify_update() {\n    echo \u0026quot;🔍 Verifying update...\u0026quot;\n    \n    terraform version\n    \n    # Test basic functionality\n    if terraform validate; then\n        echo \u0026quot;✅ Update verification successful\u0026quot;\n    else\n        echo \u0026quot;❌ Update verification failed\u0026quot;\n        return 1\n    fi\n}\n\n# Main update process\nmain() {\n    if check_latest_version; then\n        exit 0\n    fi\n    \n    echo \u0026quot;Proceed with update? (y/N)\u0026quot;\n    read -r response\n    \n    if [[ \u0026quot;$response\u0026quot; =~ ^[Yy]$ ]]; then\n        update_terraform || exit 1\n        update_providers || exit 1\n        verify_update || exit 1\n        echo \u0026quot;🎉 Terraform update completed successfully\u0026quot;\n    else\n        echo \u0026quot;Update cancelled\u0026quot;\n    fi\n}\n\nmain \u0026quot;$@\u0026quot;\nEOF\n\nchmod +x scripts/update-terraform.sh\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"maintenance-tasks\" class=\"mobile-header\"\u003eMaintenance Tasks\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Comprehensive maintenance script\ncat \u0026gt; scripts/terraform-maintenance.sh \u0026lt;\u0026lt;\u0026#039;EOF\u0026#039;\n#!/bin/bash\n\nMAINTENANCE_LOG=\u0026quot;/var/log/terraform-maintenance-$(date +%Y%m%d_%H%M%S).log\u0026quot;\n\nlog() {\n    echo \u0026quot;$(date \u0026#039;+%Y-%m-%d %H:%M:%S\u0026#039;) - $1\u0026quot; | tee -a \u0026quot;$MAINTENANCE_LOG\u0026quot;\n}\n\n# Cleanup old plan files\ncleanup_plans() {\n    log \u0026quot;🧹 Cleaning up old plan files...\u0026quot;\n    find . -name \u0026quot;*.tfplan\u0026quot; -mtime +7 -delete\n    find . -name \u0026quot;*.tfplan.json\u0026quot; -mtime +7 -delete\n    log \u0026quot;✅ Plan file cleanup completed\u0026quot;\n}\n\n# Cleanup provider cache\ncleanup_provider_cache() {\n    log \u0026quot;🧹 Cleaning up provider cache...\u0026quot;\n    if [[ -d \u0026quot;$HOME/.terraform.d/plugin-cache\u0026quot; ]]; then\n        # Remove providers older than 30 days\n        find \u0026quot;$HOME/.terraform.d/plugin-cache\u0026quot; -type f -mtime +30 -delete\n        \n        # Remove empty directories\n        find \u0026quot;$HOME/.terraform.d/plugin-cache\u0026quot; -type d -empty -delete\n        \n        cache_size=$(du -sh \u0026quot;$HOME/.terraform.d/plugin-cache\u0026quot; 2\u0026gt;/dev/null | cut -f1)\n        log \u0026quot;✅ Provider cache cleanup completed - current size: $cache_size\u0026quot;\n    fi\n}\n\n# Validate all configurations\nvalidate_configurations() {\n    log \u0026quot;🔍 Validating all configurations...\u0026quot;\n    \n    local validation_failed=false\n    \n    # Find all directories with Terraform files\n    find . -name \u0026quot;*.tf\u0026quot; -exec dirname {} \\; | sort -u | while read -r dir; do\n        log \u0026quot;Validating: $dir\u0026quot;\n        cd \u0026quot;$dir\u0026quot; || continue\n        \n        if terraform validate; then\n            log \u0026quot;✅ $dir validation passed\u0026quot;\n        else\n            log \u0026quot;❌ $dir validation failed\u0026quot;\n            validation_failed=true\n        fi\n        \n        cd - \u0026gt; /dev/null\n    done\n    \n    if [[ \u0026quot;$validation_failed\u0026quot; == \u0026quot;true\u0026quot; ]]; then\n        log \u0026quot;⚠️  Some validations failed - please review\u0026quot;\n    else\n        log \u0026quot;✅ All validations passed\u0026quot;\n    fi\n}\n\n# Check for deprecated features\ncheck_deprecated() {\n    log \u0026quot;🔍 Checking for deprecated features...\u0026quot;\n    \n    # Check for deprecated syntax\n    local deprecated_patterns=(\n        \u0026quot;provider\\s+\\\u0026quot;[^\\\u0026quot;]+\\\u0026quot;\\s+{\u0026quot; # Old provider syntax\n        \u0026quot;terraform\\s+{[^}]*version\\s*=\u0026quot; # Old terraform version constraints\n        \u0026quot;ignore_changes\\s*=\u0026quot; # Old ignore_changes syntax\n    )\n    \n    for pattern in \u0026quot;${deprecated_patterns[@]}\u0026quot;; do\n        if grep -r \u0026quot;$pattern\u0026quot; . --include=\u0026quot;*.tf\u0026quot; 2\u0026gt;/dev/null; then\n            log \u0026quot;⚠️  Deprecated pattern found: $pattern\u0026quot;\n        fi\n    done\n    \n    log \u0026quot;✅ Deprecation check completed\u0026quot;\n}\n\n# Security audit\nsecurity_audit() {\n    log \u0026quot;🔒 Performing security audit...\u0026quot;\n    \n    # Check for potential security issues\n    local security_issues=()\n    \n    # Check for hardcoded secrets\n    if grep -r -i \u0026quot;password\\s*=\\s*\\\u0026quot;[^$]\u0026quot; . --include=\u0026quot;*.tf\u0026quot; --include=\u0026quot;*.tfvars\u0026quot; 2\u0026gt;/dev/null; then\n        security_issues+=(\u0026quot;Potential hardcoded passwords\u0026quot;)\n    fi\n    \n    # Check for public access\n    if grep -r \u0026quot;0.0.0.0/0\u0026quot; . --include=\u0026quot;*.tf\u0026quot; 2\u0026gt;/dev/null; then\n        security_issues+=(\u0026quot;Public access (0.0.0.0/0) found\u0026quot;)\n    fi\n    \n    # Check for unencrypted resources\n    if grep -r \u0026quot;encrypt.*=.*false\u0026quot; . --include=\u0026quot;*.tf\u0026quot; 2\u0026gt;/dev/null; then\n        security_issues+=(\u0026quot;Unencrypted resources found\u0026quot;)\n    fi\n    \n    if [[ ${#security_issues[@]} -gt 0 ]]; then\n        log \u0026quot;⚠️  Security issues found:\u0026quot;\n        for issue in \u0026quot;${security_issues[@]}\u0026quot;; do\n            log \u0026quot;  - $issue\u0026quot;\n        done\n    else\n        log \u0026quot;✅ No obvious security issues found\u0026quot;\n    fi\n}\n\n# State health check\nstate_health_check() {\n    log \u0026quot;🏥 Performing state health check...\u0026quot;\n    \n    # Check state file size\n    if [[ -f \u0026quot;terraform.tfstate\u0026quot; ]]; then\n        state_size=$(stat -f%z \u0026quot;terraform.tfstate\u0026quot; 2\u0026gt;/dev/null || stat -c%s \u0026quot;terraform.tfstate\u0026quot; 2\u0026gt;/dev/null)\n        state_size_mb=$((state_size / 1024 / 1024))\n        \n        if [[ $state_size_mb -gt 50 ]]; then\n            log \u0026quot;⚠️  Large state file detected: ${state_size_mb}MB\u0026quot;\n        else\n            log \u0026quot;✅ State file size OK: ${state_size_mb}MB\u0026quot;\n        fi\n    fi\n    \n    # Check for drift\n    if terraform plan -detailed-exitcode \u0026gt; /dev/null 2\u0026gt;\u0026amp;1; then\n        log \u0026quot;✅ No infrastructure drift detected\u0026quot;\n    else\n        exit_code=$?\n        if [[ $exit_code -eq 2 ]]; then\n            log \u0026quot;⚠️  Infrastructure drift detected\u0026quot;\n        else\n            log \u0026quot;❌ Error checking for drift\u0026quot;\n        fi\n    fi\n}\n\n# Generate maintenance report\ngenerate_report() {\n    log \u0026quot;📊 Generating maintenance report...\u0026quot;\n    \n    local report_file=\u0026quot;/tmp/terraform-maintenance-report-$(date +%Y%m%d_%H%M%S).md\u0026quot;\n    \n    cat \u0026gt; \u0026quot;$report_file\u0026quot; \u0026lt;\u0026lt;EOF\n# Terraform Maintenance Report\n\n**Date:** $(date)\n**Duration:** $((SECONDS / 60)) minutes\n\n## Summary\n\n- Configuration validation: $(grep \u0026quot;validation\u0026quot; \u0026quot;$MAINTENANCE_LOG\u0026quot; | grep -c \u0026quot;passed\u0026quot;)\n- Security audit: Completed\n- State health check: Completed\n- Cleanup operations: Completed\n\n## Recommendations\n\n$(grep \u0026quot;⚠️\u0026quot; \u0026quot;$MAINTENANCE_LOG\u0026quot; | sed \u0026#039;s/.*⚠️  /- /\u0026#039;)\n\n## Full Log\n\n\\`\\`\\`\n$(cat \u0026quot;$MAINTENANCE_LOG\u0026quot;)\n\\`\\`\\`\nEOF\n    \n    log \u0026quot;📄 Maintenance report generated: $report_file\u0026quot;\n    \n    # Email report if configured\n    if [[ -n \u0026quot;$MAINTENANCE_EMAIL\u0026quot; ]]; then\n        mail -s \u0026quot;Terraform Maintenance Report - $(date)\u0026quot; \u0026quot;$MAINTENANCE_EMAIL\u0026quot; \u0026lt; \u0026quot;$report_file\u0026quot;\n        log \u0026quot;📧 Report emailed to: $MAINTENANCE_EMAIL\u0026quot;\n    fi\n}\n\n# Main maintenance routine\nmain() {\n    log \u0026quot;🚀 Starting Terraform maintenance...\u0026quot;\n    \n    cleanup_plans\n    cleanup_provider_cache\n    validate_configurations\n    check_deprecated\n    security_audit\n    state_health_check\n    generate_report\n    \n    log \u0026quot;🎉 Terraform maintenance completed\u0026quot;\n    log \u0026quot;📊 Total runtime: $((SECONDS / 60)) minutes\u0026quot;\n}\n\n# Run maintenance\nmain \u0026quot;$@\u0026quot;\nEOF\n\nchmod +x scripts/terraform-maintenance.sh\n\n# Schedule maintenance with cron\ncat \u0026gt; scripts/schedule-maintenance.sh \u0026lt;\u0026lt;\u0026#039;EOF\u0026#039;\n#!/bin/bash\n\n# Add to crontab for weekly maintenance\n(crontab -l 2\u0026gt;/dev/null; echo \u0026quot;0 2 * * 0 /path/to/terraform-maintenance.sh\u0026quot;) | crontab -\n\necho \u0026quot;✅ Weekly maintenance scheduled for Sundays at 2 AM\u0026quot;\nEOF\n\nchmod +x scripts/schedule-maintenance.sh\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"15-integration-examples\" class=\"mobile-header\"\u003e15. Integration Examples\u003c/h2\u003e\n\u003ch3 id=\"cicd-pipeline-integration\" class=\"mobile-header\"\u003eCI/CD Pipeline Integration\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# GitHub Actions workflow\nmkdir -p .github/workflows\ncat \u0026gt; .github/workflows/terraform.yml \u0026lt;\u0026lt;EOF\nname: Terraform Multi-Cloud Deployment\n\non:\n  push:\n    branches: [ main, develop ]\n  pull_request:\n    branches: [ main ]\n\nenv:\n  TF_VERSION: 1.6.4\n\njobs:\n  terraform:\n    runs-on: ubuntu-latest\n    strategy:\n      matrix:\n        environment: [development, staging, production]\n        \n    steps:\n    - name: Checkout code\n      uses: actions/checkout@v4\n    \n    - name: Setup Terraform\n      uses: hashicorp/setup-terraform@v3\n      with:\n        terraform_version: \\${{ env.TF_VERSION }}\n        cli_config_credentials_token: \\${{ secrets.TF_CLOUD_TOKEN }}\n    \n    - name: Configure AWS credentials\n      uses: aws-actions/configure-aws-credentials@v4\n      with:\n        aws-access-key-id: \\${{ secrets.AWS_ACCESS_KEY_ID }}\n        aws-secret-access-key: \\${{ secrets.AWS_SECRET_ACCESS_KEY }}\n        aws-region: us-west-2\n    \n    - name: Terraform Format Check\n      run: terraform fmt -check -recursive\n    \n    - name: Terraform Initialize\n      run: terraform init\n      working-directory: environments/\\${{ matrix.environment }}\n    \n    - name: Terraform Validate\n      run: terraform validate\n      working-directory: environments/\\${{ matrix.environment }}\n    \n    - name: Terraform Plan\n      run: terraform plan -var-file=\u0026quot;\\${{ matrix.environment }}.tfvars\u0026quot;\n      working-directory: environments/\\${{ matrix.environment }}\n    \n    - name: Security Scan with Checkov\n      uses: bridgecrewio/checkov-action@master\n      with:\n        directory: .\n        framework: terraform\n        output_format: sarif\n        output_file_path: checkov.sarif\n    \n    - name: Upload Checkov results\n      uses: github/codeql-action/upload-sarif@v2\n      if: always()\n      with:\n        sarif_file: checkov.sarif\n    \n    - name: Terraform Apply (Production)\n      if: github.ref == \u0026#039;refs/heads/main\u0026#039; \u0026amp;\u0026amp; matrix.environment == \u0026#039;production\u0026#039;\n      run: terraform apply -auto-approve -var-file=\u0026quot;production.tfvars\u0026quot;\n      working-directory: environments/production\nEOF\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"gitlab-ci-integration\" class=\"mobile-header\"\u003eGitLab CI Integration\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003ecat \u0026gt; .gitlab-ci.yml \u0026lt;\u0026lt;EOF\nstages:\n  - validate\n  - plan\n  - apply\n  - destroy\n\nvariables:\n  TF_ROOT: \\${CI_PROJECT_DIR}\n  TF_VERSION: \u0026quot;1.6.4\u0026quot;\n  TF_IN_AUTOMATION: \u0026quot;true\u0026quot;\n\ncache:\n  key: \u0026quot;\\${TF_ROOT}\u0026quot;\n  paths:\n    - \\${TF_ROOT}/.terraform\n\nbefore_script:\n  - cd \\${TF_ROOT}\n  - terraform version\n  - terraform init\n\nvalidate:\n  stage: validate\n  script:\n    - terraform fmt -check -recursive\n    - terraform validate\n    - |\n      for dir in environments/*/; do\n        cd \u0026quot;\\$dir\u0026quot;\n        terraform validate\n        cd -\n      done\n  rules:\n    - if: \u0026#039;\\$CI_MERGE_REQUEST_IID\u0026#039;\n    - if: \u0026#039;\\$CI_COMMIT_BRANCH == \\$CI_DEFAULT_BRANCH\u0026#039;\n\nplan:production:\n  stage: plan\n  script:\n    - cd environments/production\n    - terraform plan -var-file=\u0026quot;production.tfvars\u0026quot; -out=\u0026quot;production.tfplan\u0026quot;\n  artifacts:\n    paths:\n      - environments/production/production.tfplan\n    expire_in: 1 week\n  rules:\n    - if: \u0026#039;\\$CI_COMMIT_BRANCH == \\$CI_DEFAULT_BRANCH\u0026#039;\n\napply:production:\n  stage: apply\n  script:\n    - cd environments/production\n    - terraform apply -input=false \u0026quot;production.tfplan\u0026quot;\n  dependencies:\n    - plan:production\n  rules:\n    - if: \u0026#039;\\$CI_COMMIT_BRANCH == \\$CI_DEFAULT_BRANCH\u0026#039;\n      when: manual\nEOF\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"jenkins-pipeline\" class=\"mobile-header\"\u003eJenkins Pipeline\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"groovy\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003egroovy\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-groovy\"\u003e// Jenkinsfile\npipeline {\n    agent any\n    \n    environment {\n        TF_VERSION = \u0026#039;1.6.4\u0026#039;\n        AWS_DEFAULT_REGION = \u0026#039;us-west-2\u0026#039;\n    }\n    \n    stages {\n        stage(\u0026#039;Checkout\u0026#039;) {\n            steps {\n                checkout scm\n            }\n        }\n        \n        stage(\u0026#039;Setup\u0026#039;) {\n            steps {\n                sh \u0026#039;\u0026#039;\u0026#039;\n                    # Install Terraform if not present\n                    if ! command -v terraform \u0026amp;\u0026gt; /dev/null; then\n                        wget https://releases.hashicorp.com/terraform/${TF_VERSION}/terraform_${TF_VERSION}_linux_amd64.zip\n                        unzip terraform_${TF_VERSION}_linux_amd64.zip\n                        chmod +x terraform\n                        sudo mv terraform /usr/local/bin/\n                    fi\n                    \n                    terraform version\n                \u0026#039;\u0026#039;\u0026#039;\n            }\n        }\n        \n        stage(\u0026#039;Validate\u0026#039;) {\n            parallel {\n                stage(\u0026#039;Format Check\u0026#039;) {\n                    steps {\n                        sh \u0026#039;terraform fmt -check -recursive\u0026#039;\n                    }\n                }\n                stage(\u0026#039;Configuration Validation\u0026#039;) {\n                    steps {\n                        sh \u0026#039;\u0026#039;\u0026#039;\n                            for dir in environments/*/; do\n                                cd \u0026quot;$dir\u0026quot;\n                                terraform init\n                                terraform validate\n                                cd -\n                            done\n                        \u0026#039;\u0026#039;\u0026#039;\n                    }\n                }\n                stage(\u0026#039;Security Scan\u0026#039;) {\n                    steps {\n                        sh \u0026#039;\u0026#039;\u0026#039;\n                            # Install and run Checkov\n                            pip3 install checkov\n                            checkov --framework terraform --directory .\n                        \u0026#039;\u0026#039;\u0026#039;\n                    }\n                }\n            }\n        }\n        \n        stage(\u0026#039;Plan\u0026#039;) {\n            steps {\n                script {\n                    def environments = [\u0026#039;development\u0026#039;, \u0026#039;staging\u0026#039;, \u0026#039;production\u0026#039;]\n                    def planResults = [:]\n                    \n                    environments.each { env -\u0026gt;\n                        planResults[env] = {\n                            dir(\u0026quot;environments/${env}\u0026quot;) {\n                                sh \u0026quot;\u0026quot;\u0026quot;\n                                    terraform init\n                                    terraform plan -var-file=\u0026quot;${env}.tfvars\u0026quot; -out=\u0026quot;${env}.tfplan\u0026quot;\n                                \u0026quot;\u0026quot;\u0026quot;\n                            }\n                        }\n                    }\n                    \n                    parallel planResults\n                }\n            }\n        }\n        \n        stage(\u0026#039;Apply\u0026#039;) {\n            when {\n                branch \u0026#039;main\u0026#039;\n            }\n            steps {\n                script {\n                    input message: \u0026#039;Apply Terraform changes?\u0026#039;, ok: \u0026#039;Apply\u0026#039;\n                    \n                    dir(\u0026#039;environments/production\u0026#039;) {\n                        sh \u0026#039;terraform apply -input=false production.tfplan\u0026#039;\n                    }\n                }\n            }\n        }\n    }\n    \n    post {\n        always {\n            archiveArtifacts artifacts: \u0026#039;environments/**/*.tfplan\u0026#039;, fingerprint: true\n            publishHTML([\n                allowMissing: false,\n                alwaysLinkToLastBuild: true,\n                keepAll: true,\n                reportDir: \u0026#039;checkov-report\u0026#039;,\n                reportFiles: \u0026#039;index.html\u0026#039;,\n                reportName: \u0026#039;Checkov Security Report\u0026#039;\n            ])\n        }\n        failure {\n            emailext (\n                subject: \u0026quot;Terraform Pipeline Failed: ${env.JOB_NAME} - ${env.BUILD_NUMBER}\u0026quot;,\n                body: \u0026quot;The Terraform pipeline has failed. Please check the build logs for details.\u0026quot;,\n                to: \u0026quot;${env.CHANGE_AUTHOR_EMAIL}\u0026quot;\n            )\n        }\n    }\n}\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"azure-devops-pipeline\" class=\"mobile-header\"\u003eAzure DevOps Pipeline\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"yaml\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003eyaml\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-yaml\"\u003e# azure-pipelines.yml\ntrigger:\n  branches:\n    include:\n    - main\n    - develop\n  paths:\n    include:\n    - terraform/*\n    - environments/*\n\npool:\n  vmImage: \u0026#039;ubuntu-latest\u0026#039;\n\nvariables:\n  TF_VERSION: \u0026#039;1.6.4\u0026#039;\n  TF_IN_AUTOMATION: \u0026#039;true\u0026#039;\n\nstages:\n- stage: Validate\n  displayName: \u0026#039;Validate Terraform\u0026#039;\n  jobs:\n  - job: ValidateJob\n    displayName: \u0026#039;Validate Configuration\u0026#039;\n    steps:\n    - task: TerraformInstaller@0\n      displayName: \u0026#039;Install Terraform\u0026#039;\n      inputs:\n        terraformVersion: $(TF_VERSION)\n    \n    - script: |\n        terraform fmt -check -recursive\n        if [ $? -ne 0 ]; then\n          echo \u0026quot;##vso[task.logissue type=error]Terraform files are not formatted correctly\u0026quot;\n          exit 1\n        fi\n      displayName: \u0026#039;Check Terraform Format\u0026#039;\n    \n    - script: |\n        for dir in environments/*/; do\n          echo \u0026quot;Validating $dir\u0026quot;\n          cd \u0026quot;$dir\u0026quot;\n          terraform init -backend=false\n          terraform validate\n          cd -\n        done\n      displayName: \u0026#039;Validate All Environments\u0026#039;\n    \n    - script: |\n        # Install and run security scanning\n        pip install checkov\n        checkov --framework terraform --directory . --output cli --output junitxml --output-file-path checkov-results.xml\n      displayName: \u0026#039;Security Scan with Checkov\u0026#039;\n    \n    - task: PublishTestResults@2\n      condition: always()\n      inputs:\n        testResultsFormat: \u0026#039;JUnit\u0026#039;\n        testResultsFiles: \u0026#039;checkov-results.xml\u0026#039;\n        failTaskOnFailedTests: true\n\n- stage: Plan\n  displayName: \u0026#039;Terraform Plan\u0026#039;\n  dependsOn: Validate\n  condition: succeeded()\n  jobs:\n  - job: PlanProduction\n    displayName: \u0026#039;Plan Production Environment\u0026#039;\n    steps:\n    - task: TerraformInstaller@0\n      inputs:\n        terraformVersion: $(TF_VERSION)\n    \n    - task: AzureCLI@2\n      displayName: \u0026#039;Configure Azure Backend\u0026#039;\n      inputs:\n        azureSubscription: \u0026#039;Production-ServiceConnection\u0026#039;\n        scriptType: \u0026#039;bash\u0026#039;\n        scriptLocation: \u0026#039;inlineScript\u0026#039;\n        inlineScript: |\n          cd environments/production\n          terraform init \\\n            -backend-config=\u0026quot;resource_group_name=$(BACKEND_RESOURCE_GROUP)\u0026quot; \\\n            -backend-config=\u0026quot;storage_account_name=$(BACKEND_STORAGE_ACCOUNT)\u0026quot; \\\n            -backend-config=\u0026quot;container_name=$(BACKEND_CONTAINER)\u0026quot; \\\n            -backend-config=\u0026quot;key=production.tfstate\u0026quot;\n    \n    - task: AzureCLI@2\n      displayName: \u0026#039;Terraform Plan\u0026#039;\n      inputs:\n        azureSubscription: \u0026#039;Production-ServiceConnection\u0026#039;\n        scriptType: \u0026#039;bash\u0026#039;\n        scriptLocation: \u0026#039;inlineScript\u0026#039;\n        inlineScript: |\n          cd environments/production\n          terraform plan -var-file=\u0026quot;production.tfvars\u0026quot; -out=production.tfplan\n    \n    - task: PublishPipelineArtifact@1\n      inputs:\n        targetPath: \u0026#039;environments/production/production.tfplan\u0026#039;\n        artifact: \u0026#039;terraform-plan-production\u0026#039;\n\n- stage: Apply\n  displayName: \u0026#039;Terraform Apply\u0026#039;\n  dependsOn: Plan\n  condition: and(succeeded(), eq(variables[\u0026#039;Build.SourceBranch\u0026#039;], \u0026#039;refs/heads/main\u0026#039;))\n  jobs:\n  - deployment: ApplyProduction\n    displayName: \u0026#039;Apply to Production\u0026#039;\n    environment: \u0026#039;Production\u0026#039;\n    strategy:\n      runOnce:\n        deploy:\n          steps:\n          - task: TerraformInstaller@0\n            inputs:\n              terraformVersion: $(TF_VERSION)\n          \n          - task: DownloadPipelineArtifact@2\n            inputs:\n              artifact: \u0026#039;terraform-plan-production\u0026#039;\n              path: $(System.DefaultWorkingDirectory)/environments/production\n          \n          - task: AzureCLI@2\n            displayName: \u0026#039;Terraform Apply\u0026#039;\n            inputs:\n              azureSubscription: \u0026#039;Production-ServiceConnection\u0026#039;\n              scriptType: \u0026#039;bash\u0026#039;\n              scriptLocation: \u0026#039;inlineScript\u0026#039;\n              inlineScript: |\n                cd environments/production\n                terraform init \\\n                  -backend-config=\u0026quot;resource_group_name=$(BACKEND_RESOURCE_GROUP)\u0026quot; \\\n                  -backend-config=\u0026quot;storage_account_name=$(BACKEND_STORAGE_ACCOUNT)\u0026quot; \\\n                  -backend-config=\u0026quot;container_name=$(BACKEND_CONTAINER)\u0026quot; \\\n                  -backend-config=\u0026quot;key=production.tfstate\u0026quot;\n                terraform apply -input=false production.tfplan\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"advanced-atlantis-configuration\" class=\"mobile-header\"\u003eAdvanced Atlantis Configuration\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"yaml\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003eyaml\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-yaml\"\u003e# atlantis.yaml - GitOps for Terraform\nversion: 3\nautomerge: false\ndelete_source_branch_on_merge: true\n\nprojects:\n- name: production\n  dir: environments/production\n  workspace: production\n  terraform_version: v1.6.4\n  apply_requirements: [approved, mergeable]\n  plan_requirements: [mergeable]\n  workflow: production\n  \n- name: staging\n  dir: environments/staging  \n  workspace: staging\n  terraform_version: v1.6.4\n  apply_requirements: [mergeable]\n  workflow: staging\n\n- name: development\n  dir: environments/development\n  workspace: development\n  terraform_version: v1.6.4\n  workflow: development\n\nworkflows:\n  production:\n    plan:\n      steps:\n      - env:\n          name: TF_IN_AUTOMATION\n          value: \u0026quot;true\u0026quot;\n      - init\n      - plan:\n          extra_args: [\u0026quot;-var-file=production.tfvars\u0026quot;]\n      - run: |\n          # Security scanning\n          checkov --framework terraform --directory . --check CKV_AWS_79,CKV_AWS_8\n          \n          # Cost estimation\n          if command -v infracost \u0026amp;\u0026gt; /dev/null; then\n            infracost breakdown --path=.\n          fi\n    apply:\n      steps:\n      - env:\n          name: TF_IN_AUTOMATION  \n          value: \u0026quot;true\u0026quot;\n      - init\n      - apply:\n          extra_args: [\u0026quot;-var-file=production.tfvars\u0026quot;]\n      - run: |\n          # Post-apply notifications\n          curl -X POST -H \u0026#039;Content-type: application/json\u0026#039; \\\n            --data \u0026#039;{\u0026quot;text\u0026quot;:\u0026quot;✅ Production infrastructure updated successfully\u0026quot;}\u0026#039; \\\n            \u0026quot;$SLACK_WEBHOOK_URL\u0026quot;\n            \n  staging:\n    plan:\n      steps:\n      - init\n      - plan:\n          extra_args: [\u0026quot;-var-file=staging.tfvars\u0026quot;]\n    apply:\n      steps:\n      - init  \n      - apply:\n          extra_args: [\u0026quot;-var-file=staging.tfvars\u0026quot;]\n          \n  development:\n    plan:\n      steps:\n      - init\n      - plan:\n          extra_args: [\u0026quot;-var-file=development.tfvars\u0026quot;]\n    apply:\n      steps:\n      - init\n      - apply:\n          extra_args: [\u0026quot;-var-file=development.tfvars\u0026quot;]\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"kubernetes-operator-integration\" class=\"mobile-header\"\u003eKubernetes Operator Integration\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"yaml\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003eyaml\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-yaml\"\u003e# terraform-operator.yaml - Deploy Terraform via Kubernetes\napiVersion: apiextensions.k8s.io/v1\nkind: CustomResourceDefinition\nmetadata:\n  name: terraforms.infrastructure.company.com\nspec:\n  group: infrastructure.company.com\n  versions:\n  - name: v1\n    served: true\n    storage: true\n    schema:\n      openAPIV3Schema:\n        type: object\n        properties:\n          spec:\n            type: object\n            properties:\n              source:\n                type: object\n                properties:\n                  git:\n                    type: object\n                    properties:\n                      url:\n                        type: string\n                      branch:\n                        type: string\n                      path:\n                        type: string\n              variables:\n                type: object\n                additionalProperties:\n                  type: string\n              workspace:\n                type: string\n              destroy:\n                type: boolean\n                default: false\n          status:\n            type: object\n            properties:\n              phase:\n                type: string\n              lastApplied:\n                type: string\n                format: date-time\n              outputs:\n                type: object\n                additionalProperties:\n                  type: string\n  scope: Namespaced\n  names:\n    plural: terraforms\n    singular: terraform\n    kind: Terraform\n    shortNames:\n    - tf\n\n---\n# Example Terraform resource managed by Kubernetes\napiVersion: infrastructure.company.com/v1\nkind: Terraform\nmetadata:\n  name: web-application-infrastructure\n  namespace: production\nspec:\n  source:\n    git:\n      url: \u0026quot;https://github.com/company/infrastructure\u0026quot;\n      branch: \u0026quot;main\u0026quot;\n      path: \u0026quot;environments/production\u0026quot;\n  workspace: \u0026quot;production\u0026quot;\n  variables:\n    project_name: \u0026quot;web-application\u0026quot;\n    environment: \u0026quot;production\u0026quot;\n    instance_type: \u0026quot;m5.large\u0026quot;\n    min_capacity: \u0026quot;3\u0026quot;\n    max_capacity: \u0026quot;10\u0026quot;\n  destroy: false\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"terraform-with-vault-integration\" class=\"mobile-header\"\u003eTerraform with Vault Integration\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Vault integration for dynamic credentials\ncat \u0026gt; vault-integration.tf \u0026lt;\u0026lt;EOF\n# Vault provider for dynamic secrets\nterraform {\n  required_providers {\n    vault = {\n      source  = \u0026quot;hashicorp/vault\u0026quot;\n      version = \u0026quot;~\u0026gt; 3.20\u0026quot;\n    }\n    aws = {\n      source  = \u0026quot;hashicorp/aws\u0026quot;\n      version = \u0026quot;~\u0026gt; 5.0\u0026quot;\n    }\n  }\n}\n\nprovider \u0026quot;vault\u0026quot; {\n  address = var.vault_address\n  # Authentication handled via VAULT_TOKEN env var or AWS auth\n}\n\n# Dynamic AWS credentials from Vault\ndata \u0026quot;vault_aws_access_credentials\u0026quot; \u0026quot;aws_creds\u0026quot; {\n  backend = \u0026quot;aws\u0026quot;\n  role    = \u0026quot;terraform-${terraform.workspace}\u0026quot;\n  type    = \u0026quot;creds\u0026quot;\n}\n\nprovider \u0026quot;aws\u0026quot; {\n  region     = var.aws_region\n  access_key = data.vault_aws_access_credentials.aws_creds.access_key\n  secret_key = data.vault_aws_access_credentials.aws_creds.secret_key\n  token      = data.vault_aws_access_credentials.aws_creds.security_token\n}\n\n# Dynamic database credentials\ndata \u0026quot;vault_database_credentials\u0026quot; \u0026quot;db\u0026quot; {\n  backend = \u0026quot;database\u0026quot;\n  role    = \u0026quot;terraform-${terraform.workspace}-db\u0026quot;\n}\n\n# RDS instance with dynamic credentials\nresource \u0026quot;aws_db_instance\u0026quot; \u0026quot;main\u0026quot; {\n  identifier = \u0026quot;${var.project_name}-${terraform.workspace}\u0026quot;\n  \n  engine         = \u0026quot;postgresql\u0026quot;\n  engine_version = \u0026quot;15.4\u0026quot;\n  instance_class = var.db_instance_class\n  \n  allocated_storage = 20\n  storage_encrypted = true\n  \n  db_name  = var.database_name\n  username = data.vault_database_credentials.db.username\n  password = data.vault_database_credentials.db.password\n  \n  skip_final_snapshot = false\n  final_snapshot_identifier = \u0026quot;${var.project_name}-${terraform.workspace}-final\u0026quot;\n  \n  tags = local.common_tags\n}\n\n# Store outputs back in Vault\nresource \u0026quot;vault_kv_secret_v2\u0026quot; \u0026quot;terraform_outputs\u0026quot; {\n  mount = \u0026quot;terraform\u0026quot;\n  name  = \u0026quot;${terraform.workspace}/outputs\u0026quot;\n  \n  data_json = jsonencode({\n    vpc_id           = aws_vpc.main.id\n    database_endpoint = aws_db_instance.main.endpoint\n    load_balancer_dns = aws_lb.main.dns_name\n    timestamp        = timestamp()\n  })\n}\nEOF\n\n# Vault configuration script\ncat \u0026gt; scripts/setup-vault-integration.sh \u0026lt;\u0026lt;\u0026#039;EOF\u0026#039;\n#!/bin/bash\n\nVAULT_ADDR=\u0026quot;${VAULT_ADDR:-https://vault.company.com}\u0026quot;\nVAULT_TOKEN=\u0026quot;${VAULT_TOKEN}\u0026quot;\n\n# Enable AWS secrets engine\nvault auth -method=aws\nvault secrets enable -path=aws aws\n\n# Configure AWS secrets engine\nvault write aws/config/root \\\n    access_key=\u0026quot;$AWS_ACCESS_KEY_ID\u0026quot; \\\n    secret_key=\u0026quot;$AWS_SECRET_ACCESS_KEY\u0026quot; \\\n    region=\u0026quot;us-west-2\u0026quot;\n\n# Create Terraform role for each environment\nfor env in development staging production; do\n    vault write aws/roles/terraform-$env \\\n        credential_type=\u0026quot;assumed_role\u0026quot; \\\n        role_arns=\u0026quot;arn:aws:iam::ACCOUNT:role/TerraformRole-$env\u0026quot; \\\n        default_sts_ttl=\u0026quot;3600\u0026quot; \\\n        max_sts_ttl=\u0026quot;7200\u0026quot;\ndone\n\n# Enable database secrets engine\nvault secrets enable database\n\n# Configure PostgreSQL database\nvault write database/config/production-db \\\n    plugin_name=\u0026quot;postgresql-database-plugin\u0026quot; \\\n    connection_url=\u0026quot;postgresql://{{username}}:{{password}}@postgres.company.com:5432/terraform?sslmode=require\u0026quot; \\\n    allowed_roles=\u0026quot;terraform-production-db\u0026quot; \\\n    username=\u0026quot;vault-admin\u0026quot; \\\n    password=\u0026quot;vault-admin-password\u0026quot;\n\n# Create database role\nvault write database/roles/terraform-production-db \\\n    db_name=\u0026quot;production-db\u0026quot; \\\n    creation_statements=\u0026quot;CREATE ROLE \\\u0026quot;{{name}}\\\u0026quot; WITH LOGIN PASSWORD \u0026#039;{{password}}\u0026#039; VALID UNTIL \u0026#039;{{expiration}}\u0026#039;; GRANT SELECT, INSERT, UPDATE, DELETE ON ALL TABLES IN SCHEMA public TO \\\u0026quot;{{name}}\\\u0026quot;;\u0026quot; \\\n    default_ttl=\u0026quot;1h\u0026quot; \\\n    max_ttl=\u0026quot;24h\u0026quot;\n\necho \u0026quot;✅ Vault integration configured successfully\u0026quot;\nEOF\n\nchmod +x scripts/setup-vault-integration.sh\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"16-additional-resources\" class=\"mobile-header\"\u003e16. Additional Resources\u003c/h2\u003e\n\u003cli class=\"mobile-list-item\"\u003e\u003ca href=\"https://developer.hashicorp.com/terraform/docs\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\"\u003eOfficial Terraform Documentation\u003c/a\u003e\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003e\u003ca href=\"https://registry.terraform.io/\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\"\u003eTerraform Registry\u003c/a\u003e\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003e\u003ca href=\"https://developer.hashicorp.com/terraform/cloud-docs/recommended-practices\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\"\u003eTerraform Best Practices\u003c/a\u003e\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003e\u003ca href=\"https://developer.hashicorp.com/terraform/tutorials/aws-get-started\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\"\u003eMulti-Cloud Architecture Guide\u003c/a\u003e\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003e\u003ca href=\"https://developer.hashicorp.com/terraform/language/values/sensitive\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\"\u003eSecurity Best Practices\u003c/a\u003e\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003e\u003ca href=\"https://registry.terraform.io/providers/hashicorp/aws/latest/docs\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\"\u003eAWS Provider Documentation\u003c/a\u003e\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003e\u003ca href=\"https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\"\u003eAzure Provider Documentation\u003c/a\u003e\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003e\u003ca href=\"https://registry.terraform.io/providers/hashicorp/google/latest/docs\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\"\u003eGCP Provider Documentation\u003c/a\u003e\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003e\u003ca href=\"https://discuss.hashicorp.com/c/terraform-core\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\"\u003eTerraform Community Forum\u003c/a\u003e\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003e\u003ca href=\"https://learn.hashicorp.com/terraform\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\"\u003eHashiCorp Learn Terraform\u003c/a\u003e\u003c/li\u003e\n\u003cp class=\"mobile-paragraph\"\u003e---\u003c/p\u003e\n\u003cp class=\"mobile-paragraph\"\u003e\u003cstrong\u003eNote:\u003c/strong\u003e This guide is part of the \u003ca href=\"https://howtomgr.github.io\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\"\u003eHowToMgr\u003c/a\u003e collection. Always refer to official documentation for the most up-to-date information.\u003c/p\u003e","readTime":"44 min","wordCount":8635,"tableOfContents":[{"level":2,"text":"1. Introduction","id":"1-introduction"},{"level":3,"text":"FOSS Context","id":"foss-context"},{"level":3,"text":"Key Benefits","id":"key-benefits"},{"level":2,"text":"2. Prerequisites","id":"2-prerequisites"},{"level":2,"text":"3. Installation","id":"3-installation"},{"level":3,"text":"RHEL/CentOS/Rocky Linux/AlmaLinux","id":"rhelcentosrocky-linuxalmalinux"},{"level":3,"text":"Debian/Ubuntu","id":"debianubuntu"},{"level":3,"text":"Arch Linux","id":"arch-linux"},{"level":3,"text":"Alpine Linux","id":"alpine-linux"},{"level":3,"text":"openSUSE/SLES","id":"opensusesles"},{"level":3,"text":"macOS","id":"macos"},{"level":3,"text":"FreeBSD","id":"freebsd"},{"level":3,"text":"Windows","id":"windows"},{"level":2,"text":"4. Initial Configuration","id":"4-initial-configuration"},{"level":3,"text":"First-Run Setup","id":"first-run-setup"},{"level":3,"text":"Testing Initial Setup","id":"testing-initial-setup"},{"level":2,"text":"5. Service Management","id":"5-service-management"},{"level":3,"text":"systemd (Linux Systems)","id":"systemd-linux-systems"},{"level":3,"text":"OpenRC (Alpine Linux)","id":"openrc-alpine-linux"},{"level":3,"text":"rc.d (FreeBSD)","id":"rcd-freebsd"},{"level":3,"text":"launchd (macOS)","id":"launchd-macos"},{"level":3,"text":"Windows Service Manager","id":"windows-service-manager"},{"level":2,"text":"6. Advanced Configuration","id":"6-advanced-configuration"},{"level":3,"text":"Multi-Cloud Provider Setup","id":"multi-cloud-provider-setup"},{"level":3,"text":"Enterprise Features Configuration","id":"enterprise-features-configuration"},{"level":3,"text":"Advanced State Management","id":"advanced-state-management"},{"level":3,"text":"Terraform Workspaces and Environment Management","id":"terraform-workspaces-and-environment-management"},{"level":3,"text":"Remote State Configuration Best Practices","id":"remote-state-configuration-best-practices"},{"level":2,"text":"7. Reverse Proxy Setup","id":"7-reverse-proxy-setup"},{"level":3,"text":"Corporate Proxy Configuration","id":"corporate-proxy-configuration"},{"level":3,"text":"nginx Configuration for Terraform Enterprise","id":"nginx-configuration-for-terraform-enterprise"},{"level":2,"text":"8. Security Configuration","id":"8-security-configuration"},{"level":3,"text":"Secure Credential Management","id":"secure-credential-management"},{"level":3,"text":"Security Scanning and Compliance","id":"security-scanning-and-compliance"},{"level":3,"text":"Policy as Code with OPA","id":"policy-as-code-with-opa"},{"level":2,"text":"9. Database Setup","id":"9-database-setup"},{"level":3,"text":"State Storage Backends","id":"state-storage-backends"},{"level":3,"text":"Database Infrastructure Management","id":"database-infrastructure-management"},{"level":2,"text":"10. Performance Optimization","id":"10-performance-optimization"},{"level":3,"text":"Terraform Performance Tuning","id":"terraform-performance-tuning"},{"level":3,"text":"Large Infrastructure Management","id":"large-infrastructure-management"},{"level":3,"text":"State Optimization","id":"state-optimization"},{"level":2,"text":"11. Monitoring","id":"11-monitoring"},{"level":3,"text":"Terraform Operations Monitoring","id":"terraform-operations-monitoring"},{"level":3,"text":"Infrastructure Monitoring with Terraform","id":"infrastructure-monitoring-with-terraform"},{"level":3,"text":"Terraform Cloud Monitoring","id":"terraform-cloud-monitoring"},{"level":2,"text":"12. Backup and Restore","id":"12-backup-and-restore"},{"level":3,"text":"State File Backup","id":"state-file-backup"},{"level":3,"text":"Disaster Recovery Procedures","id":"disaster-recovery-procedures"},{"level":3,"text":"State Migration and Refactoring","id":"state-migration-and-refactoring"},{"level":2,"text":"13. Troubleshooting","id":"13-troubleshooting"},{"level":3,"text":"Common Issues and Solutions","id":"common-issues-and-solutions"},{"level":3,"text":"Advanced Debugging","id":"advanced-debugging"},{"level":2,"text":"14. Maintenance","id":"14-maintenance"},{"level":3,"text":"Update Procedures","id":"update-procedures"},{"level":3,"text":"Maintenance Tasks","id":"maintenance-tasks"},{"level":2,"text":"15. Integration Examples","id":"15-integration-examples"},{"level":3,"text":"CI/CD Pipeline Integration","id":"cicd-pipeline-integration"},{"level":3,"text":"GitLab CI Integration","id":"gitlab-ci-integration"},{"level":3,"text":"Jenkins Pipeline","id":"jenkins-pipeline"},{"level":3,"text":"Azure DevOps Pipeline","id":"azure-devops-pipeline"},{"level":3,"text":"Advanced Atlantis Configuration","id":"advanced-atlantis-configuration"},{"level":3,"text":"Kubernetes Operator Integration","id":"kubernetes-operator-integration"},{"level":3,"text":"Terraform with Vault Integration","id":"terraform-with-vault-integration"},{"level":2,"text":"16. Additional Resources","id":"16-additional-resources"}],"lastBuilt":"2025-10-12T18:13:10.576Z","metadataVersion":"2.0"}]},"__N_SSG":true},"page":"/[category]","query":{"category":"infrastructure-as-code"},"buildId":"LqsI2YPWglIr7mIGTi5lD","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>