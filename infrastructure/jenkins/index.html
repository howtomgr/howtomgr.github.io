<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes"/><meta name="theme-color" content="#bd93f9"/><link rel="icon" href="/favicon.ico"/><link rel="preconnect" href="https://fonts.googleapis.com"/><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="true"/><title class="jsx-745d6189719dfe72">Jenkins Installation Guide - HowToMgr</title><meta name="description" content="Repo for jenkins" class="jsx-745d6189719dfe72"/><meta name="keywords" content="installation guides, tutorials, linux, docker, kubernetes, mobile-first, responsive" class="jsx-745d6189719dfe72"/><meta property="og:title" content="Jenkins Installation Guide - HowToMgr" class="jsx-745d6189719dfe72"/><meta property="og:description" content="Repo for jenkins" class="jsx-745d6189719dfe72"/><meta property="og:type" content="website" class="jsx-745d6189719dfe72"/><meta property="og:url" content="https://howtomgr.github.io" class="jsx-745d6189719dfe72"/><meta property="og:image" content="https://howtomgr.github.io/social-preview.png" class="jsx-745d6189719dfe72"/><meta property="twitter:card" content="summary_large_image" class="jsx-745d6189719dfe72"/><meta property="twitter:title" content="Jenkins Installation Guide - HowToMgr" class="jsx-745d6189719dfe72"/><meta property="twitter:description" content="Repo for jenkins" class="jsx-745d6189719dfe72"/><meta name="next-head-count" content="17"/><link rel="dns-prefetch" href="//api.github.com"/><link rel="dns-prefetch" href="//github.com"/><link rel="preload" href="/favicon.ico" as="image"/><meta name="application-name" content="HowToMgr"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="default"/><meta name="apple-mobile-web-app-title" content="HowToMgr"/><meta name="format-detection" content="telephone=no"/><meta name="mobile-web-app-capable" content="yes"/><noscript><style>
            .requires-js { display: none !important; }
            .no-js-message { display: block !important; }
          </style></noscript><link rel="preload" href="/_next/static/css/eec6c1c201affe77.css" as="style"/><link rel="stylesheet" href="/_next/static/css/eec6c1c201affe77.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-42372ed130431b0a.js"></script><script src="/_next/static/chunks/webpack-ee7e63bc15b31913.js" defer=""></script><script src="/_next/static/chunks/framework-2b1f7a23d657eae4.js" defer=""></script><script src="/_next/static/chunks/main-6ec3f7584970eebe.js" defer=""></script><script src="/_next/static/chunks/pages/_app-f7367f88af207b64.js" defer=""></script><script src="/_next/static/chunks/pages/%5Bcategory%5D/%5Bguide%5D-3627c3f992e50f0b.js" defer=""></script><script src="/_next/static/5Rz7EoqouwVFEUR51MgnT/_buildManifest.js" defer=""></script><script src="/_next/static/5Rz7EoqouwVFEUR51MgnT/_ssgManifest.js" defer=""></script><style id="__jsx-8a7f0cdcf94f52ce">.breadcrumb.jsx-8a7f0cdcf94f52ce{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;gap:var(--space-2);margin-bottom:var(--space-6);font-size:var(--font-sm);color:var(--text-secondary);overflow-x:auto;white-space:nowrap;-webkit-overflow-scrolling:touch}.breadcrumb.jsx-8a7f0cdcf94f52ce a.jsx-8a7f0cdcf94f52ce{color:var(--accent-primary);text-decoration:none;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0}.breadcrumb.jsx-8a7f0cdcf94f52ce a.jsx-8a7f0cdcf94f52ce:hover{text-decoration:underline}.separator.jsx-8a7f0cdcf94f52ce{color:var(--text-muted);-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0}.current.jsx-8a7f0cdcf94f52ce{color:var(--text-primary);font-weight:500;white-space:nowrap;overflow:hidden;-o-text-overflow:ellipsis;text-overflow:ellipsis}.guide-header.jsx-8a7f0cdcf94f52ce{background:var(--bg-secondary);-webkit-border-radius:var(--border-radius-lg);-moz-border-radius:var(--border-radius-lg);border-radius:var(--border-radius-lg);padding:var(--space-6);margin-bottom:var(--space-8);border:1px solid var(--bg-surface)}.guide-title.jsx-8a7f0cdcf94f52ce{color:var(--accent-primary);font-size:var(--font-3xl);margin-bottom:var(--space-4);line-height:1.2;word-break:break-word}.guide-description.jsx-8a7f0cdcf94f52ce{color:var(--text-secondary);font-size:var(--font-lg);margin-bottom:var(--space-5);line-height:1.5}.guide-badges.jsx-8a7f0cdcf94f52ce{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;gap:var(--space-3);margin-bottom:var(--space-5);-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap}.guide-actions.jsx-8a7f0cdcf94f52ce{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;gap:var(--space-3);-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap}.guide-content.jsx-8a7f0cdcf94f52ce{background:var(--bg-secondary);-webkit-border-radius:var(--border-radius-lg);-moz-border-radius:var(--border-radius-lg);border-radius:var(--border-radius-lg);padding:var(--space-6);margin-bottom:var(--space-8);border:1px solid var(--bg-surface);overflow-x:hidden}.related-section.jsx-8a7f0cdcf94f52ce{margin-bottom:var(--space-8)}.section-title.jsx-8a7f0cdcf94f52ce{color:var(--accent-primary);font-size:var(--font-2xl);text-align:center;margin-bottom:var(--space-6)}.guide-navigation.jsx-8a7f0cdcf94f52ce{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;gap:var(--space-4);-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;margin-bottom:var(--space-8)}.loading-container.jsx-8a7f0cdcf94f52ce,.error-container.jsx-8a7f0cdcf94f52ce{text-align:center;padding:var(--space-8)}.error-actions.jsx-8a7f0cdcf94f52ce{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;gap:var(--space-4);-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;margin-top:var(--space-6);-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap}@media(max-width:767px){.guide-header.jsx-8a7f0cdcf94f52ce{padding:var(--space-4);margin-bottom:var(--space-6)}.guide-title.jsx-8a7f0cdcf94f52ce{font-size:var(--font-2xl)}.guide-description.jsx-8a7f0cdcf94f52ce{font-size:var(--font-base)}.guide-content.jsx-8a7f0cdcf94f52ce{padding:var(--space-4);margin-bottom:var(--space-6)}.guide-badges.jsx-8a7f0cdcf94f52ce{gap:var(--space-2)}.guide-actions.jsx-8a7f0cdcf94f52ce{-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column}.guide-navigation.jsx-8a7f0cdcf94f52ce{-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column}.breadcrumb.jsx-8a7f0cdcf94f52ce{margin-bottom:var(--space-4)}}</style><style id="__jsx-745d6189719dfe72">.app-container.jsx-745d6189719dfe72{min-height:100vh;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;padding-top:56px}.main-content.jsx-745d6189719dfe72{-webkit-box-flex:1;-webkit-flex:1;-moz-box-flex:1;-ms-flex:1;flex:1;padding:var(--space-6)0}.mobile-footer.jsx-745d6189719dfe72{background:var(--bg-secondary);border-top:1px solid var(--bg-surface);padding:var(--space-6)0;margin-top:auto}.footer-content.jsx-745d6189719dfe72{text-align:center}.footer-links.jsx-745d6189719dfe72{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;gap:var(--space-6);margin-bottom:var(--space-4);-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap}.footer-links.jsx-745d6189719dfe72 a.jsx-745d6189719dfe72{color:var(--accent-primary);text-decoration:none;font-size:var(--font-sm)}.footer-links.jsx-745d6189719dfe72 a.jsx-745d6189719dfe72:hover{color:var(--accent-secondary)}.footer-separator.jsx-745d6189719dfe72{height:1px;background:var(--bg-surface);margin:var(--space-4)auto;width:200px}.footer-text.jsx-745d6189719dfe72,.footer-tech.jsx-745d6189719dfe72{color:var(--text-secondary);font-size:var(--font-sm);margin-bottom:var(--space-2)}.footer-disclaimer.jsx-745d6189719dfe72{color:var(--text-muted);font-size:var(--font-xs)}[data-theme="light"].jsx-745d6189719dfe72 .theme-icon-dark.jsx-745d6189719dfe72{display:none}[data-theme="light"].jsx-745d6189719dfe72 .theme-icon-light.jsx-745d6189719dfe72{display:inline!important}@media(max-width:767px){.main-content.jsx-745d6189719dfe72{padding:var(--space-4)0}.footer-links.jsx-745d6189719dfe72{gap:var(--space-4)}}</style></head><body><noscript><div class="no-js-message" style="padding:1rem;background:#ff5555;color:#f8f8f2;text-align:center;font-size:0.9rem">This site requires JavaScript to function properly. Please enable JavaScript in your browser.</div></noscript><div id="__next"><div class="jsx-745d6189719dfe72 app-container"><a href="#main-content" class="jsx-745d6189719dfe72 skip-link">Skip to main content</a><nav class="jsx-745d6189719dfe72 mobile-nav"><div class="jsx-745d6189719dfe72 mobile-nav-content"><a class="mobile-brand" href="/"><span role="img" aria-label="Books" class="jsx-745d6189719dfe72">📚</span>HowToMgr</a><button aria-label="Toggle theme" title="Switch theme" class="jsx-745d6189719dfe72 mobile-theme-toggle touch-target"><span class="jsx-745d6189719dfe72 theme-icon-dark">🌙</span><span style="display:none" class="jsx-745d6189719dfe72 theme-icon-light">☀️</span></button></div></nav><main id="main-content" tabindex="-1" class="jsx-745d6189719dfe72 main-content"><div class="jsx-745d6189719dfe72 container"><nav aria-label="Breadcrumb" class="jsx-8a7f0cdcf94f52ce breadcrumb"><a href="/">Home</a><span class="jsx-8a7f0cdcf94f52ce separator">→</span><a href="/infrastructure/">Infrastructure</a><span class="jsx-8a7f0cdcf94f52ce separator">→</span><span class="jsx-8a7f0cdcf94f52ce current">Jenkins</span></nav><header class="jsx-8a7f0cdcf94f52ce guide-header"><div class="jsx-8a7f0cdcf94f52ce guide-meta-top"><h1 class="jsx-8a7f0cdcf94f52ce guide-title">Jenkins</h1><p class="jsx-8a7f0cdcf94f52ce guide-description">Repo for jenkins</p><div class="jsx-8a7f0cdcf94f52ce guide-badges"><span class="jsx-8a7f0cdcf94f52ce mobile-badge mobile-badge-primary">Infrastructure</span><span class="jsx-8a7f0cdcf94f52ce mobile-badge mobile-badge-info">38 min</span></div><div class="jsx-8a7f0cdcf94f52ce guide-actions"><a href="https://github.com/howtomgr/jenkins" target="_blank" rel="noopener" class="jsx-8a7f0cdcf94f52ce btn btn-secondary">View on GitHub</a></div></div></header><article class="jsx-8a7f0cdcf94f52ce guide-content"><div class="jsx-8a7f0cdcf94f52ce readme-content"><h1 id="jenkins-installation-guide" class="mobile-header">Jenkins Installation Guide</h1>
<p class="mobile-paragraph">Jenkins is a free and open-source automation server for building, testing, and deploying applications. Originally developed by Kohsuke Kawaguchi and now maintained by the Jenkins community, Jenkins is the industry-leading CI/CD platform with extensive plugin ecosystem and enterprise-grade features. It serves as a FOSS alternative to commercial CI/CD solutions like TeamCity, GitLab CI Premium, or Azure DevOps Server, offering unlimited build minutes, unlimited private repositories, and advanced pipeline capabilities without licensing costs, with features like distributed builds, Pipeline as Code, and extensive plugin ecosystem.</p>
<h2 id="prerequisites" class="mobile-header">Prerequisites</h2>
<li class="mobile-list-item"><strong>Hardware Requirements</strong>:</li>
<li class="mobile-list-item">CPU: 2 cores minimum (4+ cores recommended for production)</li>
<li class="mobile-list-item">RAM: 2GB minimum (8GB+ recommended for production)</li>
<li class="mobile-list-item">Storage: 50GB minimum (SSD recommended for build performance)</li>
<li class="mobile-list-item">Network: Stable connectivity for agent communication and external integrations</li>
<li class="mobile-list-item"><strong>Operating System</strong>: </li>
<li class="mobile-list-item">Linux: Any modern distribution with kernel 3.2+</li>
<li class="mobile-list-item">macOS: 10.13+ (High Sierra or newer)</li>
<li class="mobile-list-item">Windows: Windows Server 2016+ or Windows 10</li>
<li class="mobile-list-item">FreeBSD: 11.0+</li>
<li class="mobile-list-item"><strong>Network Requirements</strong>:</li>
<li class="mobile-list-item">Port 8080 (default Jenkins HTTP)</li>
<li class="mobile-list-item">Port 50000 (default Jenkins agent communication)</li>
<li class="mobile-list-item">Additional ports for external integrations (webhooks, etc.)</li>
<li class="mobile-list-item"><strong>Dependencies</strong>:</li>
<li class="mobile-list-item">Java 11 or 17 LTS (OpenJDK recommended)</li>
<li class="mobile-list-item">systemd or compatible init system (Linux)</li>
<li class="mobile-list-item">Root or administrative access for installation</li>
<li class="mobile-list-item"><strong>System Access</strong>: root or sudo privileges required</li>
<h2 id="installation" class="mobile-header">Installation</h2>
<h3 id="rhelcentosrocky-linuxalmalinux" class="mobile-header">RHEL/CentOS/Rocky Linux/AlmaLinux</h3>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash"># Install Java 17 LTS
sudo dnf install -y java-17-openjdk java-17-openjdk-devel

# Add Jenkins repository
curl -fsSL https://pkg.jenkins.io/redhat-stable/jenkins.io-2023.key | sudo tee /etc/yum.repos.d/jenkins.io.key

sudo tee /etc/yum.repos.d/jenkins.repo &lt;&lt;EOF
[jenkins]
name=Jenkins-stable
baseurl=http://pkg.jenkins.io/redhat-stable
gpgcheck=1
gpgkey=file:///etc/yum.repos.d/jenkins.io.key
enabled=1
EOF

# Install Jenkins
sudo dnf install -y jenkins

# Enable and start service
sudo systemctl enable --now jenkins

# Configure firewall
sudo firewall-cmd --permanent --add-port=8080/tcp
sudo firewall-cmd --permanent --add-port=50000/tcp
sudo firewall-cmd --reload

# Get initial admin password
sudo cat /var/lib/jenkins/secrets/initialAdminPassword</code></pre>
      </div>
    </div>
<h3 id="debianubuntu" class="mobile-header">Debian/Ubuntu</h3>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash"># Update system packages
sudo apt update

# Install Java 17 LTS
sudo apt install -y openjdk-17-jdk openjdk-17-jre

# Add Jenkins repository
wget -O /tmp/jenkins-key.asc https://pkg.jenkins.io/debian-stable/jenkins.io-2023.key
sudo mv /tmp/jenkins-key.asc /etc/apt/trusted.gpg.d/jenkins.asc

echo &quot;deb https://pkg.jenkins.io/debian-stable binary/&quot; | sudo tee /etc/apt/sources.list.d/jenkins.list

# Update package index
sudo apt update

# Install Jenkins
sudo apt install -y jenkins

# Enable and start service
sudo systemctl enable --now jenkins

# Configure firewall
sudo ufw allow 8080/tcp
sudo ufw allow 50000/tcp

# Get initial admin password
sudo cat /var/lib/jenkins/secrets/initialAdminPassword</code></pre>
      </div>
    </div>
<h3 id="arch-linux" class="mobile-header">Arch Linux</h3>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash"># Install Java 17 LTS
sudo pacman -S jdk17-openjdk

# Install Jenkins from AUR
yay -S jenkins

# Alternative: Install manually from AUR
git clone https://aur.archlinux.org/jenkins.git
cd jenkins
makepkg -si

# Create jenkins user if not created
sudo useradd -r -d /var/lib/jenkins -s /sbin/nologin jenkins

# Enable and start service
sudo systemctl enable --now jenkins

# Get initial admin password
sudo cat /var/lib/jenkins/secrets/initialAdminPassword

# Configuration location: /etc/jenkins/</code></pre>
      </div>
    </div>
<h3 id="alpine-linux" class="mobile-header">Alpine Linux</h3>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash"># Jenkins is not officially packaged for Alpine Linux
# Use Docker or manual installation

# Method 1: Docker installation
apk add --no-cache docker docker-compose
rc-update add docker default
rc-service docker start

# Create Jenkins data directory
mkdir -p /var/lib/jenkins

# Run Jenkins container
docker run -d \
  --name jenkins \
  --restart unless-stopped \
  -p 8080:8080 \
  -p 50000:50000 \
  -v /var/lib/jenkins:/var/jenkins_home \
  -v /var/run/docker.sock:/var/run/docker.sock \
  --group-add $(getent group docker | cut -d: -f3) \
  jenkins/jenkins:lts-jdk17

# Get initial admin password
docker exec jenkins cat /var/jenkins_home/secrets/initialAdminPassword

# Method 2: Manual installation with OpenJDK
apk add --no-cache openjdk17-jre-headless
wget https://get.jenkins.io/war-stable/latest/jenkins.war -O /opt/jenkins.war

# Create jenkins user and directories
adduser -D -s /sbin/nologin jenkins
mkdir -p /var/lib/jenkins /var/log/jenkins
chown -R jenkins:jenkins /var/lib/jenkins /var/log/jenkins

# Create init script
tee /etc/init.d/jenkins &lt;&lt;&#039;EOF&#039;
#!/sbin/openrc-run
name=&quot;Jenkins&quot;
command=&quot;java&quot;
command_args=&quot;-jar /opt/jenkins.war --httpPort=8080 --ajp13Port=-1&quot;
command_user=&quot;jenkins&quot;
pidfile=&quot;/run/jenkins.pid&quot;
command_background=&quot;yes&quot;
depend() {
    need net
}
EOF

chmod +x /etc/init.d/jenkins
rc-update add jenkins default
rc-service jenkins start</code></pre>
      </div>
    </div>
<h3 id="opensusesles" class="mobile-header">openSUSE/SLES</h3>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash"># openSUSE Leap/Tumbleweed
sudo zypper install -y java-17-openjdk java-17-openjdk-devel

# Add Jenkins repository
sudo zypper addrepo -G https://pkg.jenkins.io/opensuse-stable/ jenkins
sudo zypper refresh

# Install Jenkins
sudo zypper install -y jenkins

# SLES 15
sudo SUSEConnect -p sle-module-development-tools/15.5/x86_64
sudo zypper install -y java-17-openjdk jenkins

# Enable and start service
sudo systemctl enable --now jenkins

# Configure firewall
sudo firewall-cmd --permanent --add-port=8080/tcp
sudo firewall-cmd --permanent --add-port=50000/tcp
sudo firewall-cmd --reload

# Get initial admin password
sudo cat /var/lib/jenkins/secrets/initialAdminPassword</code></pre>
      </div>
    </div>
<h3 id="macos" class="mobile-header">macOS</h3>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash"># Using Homebrew
brew install jenkins-lts

# Start Jenkins service
brew services start jenkins-lts

# Or run manually
jenkins-lts

# Alternative: Install specific version
brew install jenkins-lts@2.414

# Get initial admin password
cat ~/.jenkins/secrets/initialAdminPassword

# Configuration location: ~/.jenkins/
# Alternative: /usr/local/var/jenkins_home/ (Intel Macs)
# Alternative: /opt/homebrew/var/jenkins_home/ (Apple Silicon)</code></pre>
      </div>
    </div>
<h3 id="freebsd" class="mobile-header">FreeBSD</h3>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash"># Using pkg
pkg install jenkins openjdk17

# Using ports
cd /usr/ports/devel/jenkins
make install clean

# Enable Jenkins
echo &#039;jenkins_enable=&quot;YES&quot;&#039; &gt;&gt; /etc/rc.conf
echo &#039;jenkins_java_home=&quot;/usr/local/openjdk17&quot;&#039; &gt;&gt; /etc/rc.conf

# Create jenkins user and directories
pw useradd jenkins -d /usr/local/jenkins -s /sbin/nologin
mkdir -p /usr/local/jenkins
chown jenkins:jenkins /usr/local/jenkins

# Start service
service jenkins start

# Get initial admin password
cat /usr/local/jenkins/secrets/initialAdminPassword

# Configuration location: /usr/local/jenkins/</code></pre>
      </div>
    </div>
<h3 id="windows" class="mobile-header">Windows</h3>
<div class="mobile-code-block" data-language="powershell">
      <div class="mobile-code-header">
        <span class="mobile-code-language">powershell</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-powershell"># Method 1: Using Chocolatey
choco install jenkins

# Method 2: Using Scoop
scoop install jenkins

# Method 3: Manual installation
# Download from https://www.jenkins.io/download/
# Run jenkins.msi installer

# Method 4: Windows service installation
# Download jenkins.war
# Install as Windows service
java -jar jenkins.war --httpPort=8080 --install

# Start service
net start Jenkins

# Get initial admin password
Get-Content &quot;C:\Program Files\Jenkins\secrets\initialAdminPassword&quot;

# Configuration location: C:\Program Files\Jenkins\
# Or: %JENKINS_HOME% (if custom location)</code></pre>
      </div>
    </div>
<h2 id="initial-configuration" class="mobile-header">Initial Configuration</h2>
<h3 id="first-run-setup" class="mobile-header">First-Run Setup</h3>
<p class="mobile-paragraph">1. <strong>Java Environment Setup</strong>:</p>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash"># Set JAVA_HOME (Linux/macOS)
export JAVA_HOME=/usr/lib/jvm/java-17-openjdk
echo &#039;export JAVA_HOME=/usr/lib/jvm/java-17-openjdk&#039; &gt;&gt; ~/.bashrc

# Verify Java installation
java -version</code></pre>
      </div>
    </div>
<p class="mobile-paragraph">2. <strong>Default configuration locations</strong>:</p>
<li class="mobile-list-item">RHEL/CentOS/Rocky/AlmaLinux: <code class="mobile-inline-code">/var/lib/jenkins/</code>, <code class="mobile-inline-code">/etc/sysconfig/jenkins</code></li>
<li class="mobile-list-item">Debian/Ubuntu: <code class="mobile-inline-code">/var/lib/jenkins/</code>, <code class="mobile-inline-code">/etc/default/jenkins</code></li>
<li class="mobile-list-item">Arch Linux: <code class="mobile-inline-code">/var/lib/jenkins/</code>, <code class="mobile-inline-code">/etc/jenkins/</code></li>
<li class="mobile-list-item">Alpine Linux: <code class="mobile-inline-code">/var/lib/jenkins/</code> (Docker) or <code class="mobile-inline-code">/var/lib/jenkins/</code> (manual)</li>
<li class="mobile-list-item">openSUSE/SLES: <code class="mobile-inline-code">/var/lib/jenkins/</code>, <code class="mobile-inline-code">/etc/sysconfig/jenkins</code></li>
<li class="mobile-list-item">macOS: <code class="mobile-inline-code">~/.jenkins/</code> or <code class="mobile-inline-code">/usr/local/var/jenkins_home/</code></li>
<li class="mobile-list-item">FreeBSD: <code class="mobile-inline-code">/usr/local/jenkins/</code></li>
<li class="mobile-list-item">Windows: <code class="mobile-inline-code">C:\Program Files\Jenkins\</code> or <code class="mobile-inline-code">%JENKINS_HOME%</code></li>
<p class="mobile-paragraph">3. <strong>Essential initial configuration</strong>:</p>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash"># Initial web setup (after accessing http://your-server:8080)
# 1. Enter admin password from: /var/lib/jenkins/secrets/initialAdminPassword
# 2. Install suggested plugins or select specific plugins
# 3. Create first admin user
# 4. Configure Jenkins URL

# Essential plugins to install:
# - Pipeline plugins (Pipeline Suite)
# - Git plugin
# - Credentials Binding Plugin
# - Build Timeout Plugin
# - Timestamper Plugin
# - Workspace Cleanup Plugin
# - Blue Ocean (modern UI)
# - Matrix Authorization Strategy Plugin</code></pre>
      </div>
    </div>
<h3 id="testing-initial-setup" class="mobile-header">Testing Initial Setup</h3>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash"># Check service status
sudo systemctl status jenkins

# Check web interface
curl -I http://localhost:8080

# Test Java version
java -version

# Check Jenkins process
ps aux | grep jenkins

# Verify Jenkins CLI
wget http://localhost:8080/jnlpJars/jenkins-cli.jar
java -jar jenkins-cli.jar -s http://localhost:8080 version

# Check available plugins
java -jar jenkins-cli.jar -s http://localhost:8080 list-plugins</code></pre>
      </div>
    </div>
<p class="mobile-paragraph"><strong>WARNING:</strong> Change the default admin password immediately and configure proper authentication!</p>
<h2 id="service-management" class="mobile-header">Service Management</h2>
<h3 id="systemd-rhel-debian-ubuntu-arch-opensuse" class="mobile-header">systemd (RHEL, Debian, Ubuntu, Arch, openSUSE)</h3>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash"># Enable Jenkins to start on boot
sudo systemctl enable jenkins

# Start Jenkins
sudo systemctl start jenkins

# Stop Jenkins
sudo systemctl stop jenkins

# Restart Jenkins
sudo systemctl restart jenkins

# Graceful restart (wait for running builds)
sudo systemctl reload jenkins

# Check status
sudo systemctl status jenkins

# View logs
sudo journalctl -u jenkins -f

# Edit service configuration
sudo systemctl edit jenkins
# Add custom environment variables or JVM options</code></pre>
      </div>
    </div>
<h3 id="openrc-alpine-linux" class="mobile-header">OpenRC (Alpine Linux)</h3>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash"># Docker-based installation
docker start jenkins
docker stop jenkins
docker restart jenkins

# Check container status
docker ps | grep jenkins

# View logs
docker logs -f jenkins

# Manual installation
rc-update add jenkins default
rc-service jenkins start
rc-service jenkins stop
rc-service jenkins restart
rc-service jenkins status</code></pre>
      </div>
    </div>
<h3 id="rcd-freebsd" class="mobile-header">rc.d (FreeBSD)</h3>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash"># Enable in /etc/rc.conf
echo &#039;jenkins_enable=&quot;YES&quot;&#039; &gt;&gt; /etc/rc.conf

# Start Jenkins
service jenkins start

# Stop Jenkins
service jenkins stop

# Restart Jenkins
service jenkins restart

# Check status
service jenkins status

# View logs
tail -f /var/log/jenkins/jenkins.log</code></pre>
      </div>
    </div>
<h3 id="launchd-macos" class="mobile-header">launchd (macOS)</h3>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash"># Using Homebrew services
brew services start jenkins-lts
brew services stop jenkins-lts
brew services restart jenkins-lts

# Check status
brew services list | grep jenkins

# Manual control
jenkins-lts --httpPort=8080

# View logs
tail -f /usr/local/var/log/jenkins/jenkins.log</code></pre>
      </div>
    </div>
<h3 id="windows-service-manager" class="mobile-header">Windows Service Manager</h3>
<div class="mobile-code-block" data-language="powershell">
      <div class="mobile-code-header">
        <span class="mobile-code-language">powershell</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-powershell"># Start Jenkins service
net start Jenkins

# Stop Jenkins service
net stop Jenkins

# Using PowerShell
Start-Service Jenkins
Stop-Service Jenkins
Restart-Service Jenkins

# Check status
Get-Service Jenkins

# View logs (Windows Event Log)
Get-EventLog -LogName Application -Source Jenkins

# Or check Jenkins logs
Get-Content &quot;C:\Program Files\Jenkins\logs\jenkins.log&quot; -Tail 50 -Wait</code></pre>
      </div>
    </div>
<h2 id="advanced-configuration" class="mobile-header">Advanced Configuration</h2>
<h3 id="high-availability-configuration" class="mobile-header">High Availability Configuration</h3>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash"># Multi-master setup with shared storage
# Method 1: Shared filesystem (NFS, GlusterFS)
sudo mkdir -p /shared/jenkins
sudo mount -t nfs nfs-server:/jenkins /shared/jenkins

# Update Jenkins home
sudo systemctl edit jenkins
# Add:
[Service]
Environment=&quot;JENKINS_HOME=/shared/jenkins&quot;

# Method 2: Database-backed configuration
# Install CloudBees Jenkins Enterprise plugins for HA
# Configure external database (PostgreSQL recommended)

# Agent configuration for load distribution
sudo tee /var/lib/jenkins/casc_configs/agents.yaml &lt;&lt;EOF
jenkins:
  nodes:
    - permanent:
        name: &quot;linux-agent-1&quot;
        remoteFS: &quot;/var/lib/jenkins&quot;
        numExecutors: 4
        launcher:
          ssh:
            host: &quot;agent1.example.com&quot;
            credentialsId: &quot;ssh-agent-key&quot;
    - permanent:
        name: &quot;windows-agent-1&quot;
        remoteFS: &quot;C:\\Jenkins&quot;
        numExecutors: 2
        launcher:
          command:
            command: &quot;java -jar agent.jar&quot;
EOF</code></pre>
      </div>
    </div>
<h3 id="advanced-security-settings" class="mobile-header">Advanced Security Settings</h3>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash"># Configure Jenkins Configuration as Code (JCasC) for security
sudo tee /var/lib/jenkins/casc_configs/security.yaml &lt;&lt;EOF
jenkins:
  securityRealm:
    ldap:
      configurations:
        - server: &quot;ldaps://ldap.example.com:636&quot;
          rootDN: &quot;DC=example,DC=com&quot;
          userSearchBase: &quot;OU=Users&quot;
          userSearch: &quot;(&amp;(objectCategory=Person)(objectClass=user)(sAMAccountName={0}))&quot;
          groupSearchBase: &quot;OU=Groups&quot;
          managerDN: &quot;CN=jenkins,OU=Service Accounts,DC=example,DC=com&quot;
          managerPasswordSecret: &quot;ldap-password&quot;
          
  authorizationStrategy:
    roleBased:
      roles:
        global:
          - name: &quot;admin&quot;
            permissions:
              - &quot;Overall/Administer&quot;
            assignments:
              - &quot;jenkins-admins&quot;
          - name: &quot;developer&quot;
            permissions:
              - &quot;Overall/Read&quot;
              - &quot;Job/Build&quot;
              - &quot;Job/Read&quot;
            assignments:
              - &quot;developers&quot;

security:
  globalJobDslSecurityConfiguration:
    useScriptSecurity: true
  scriptApproval:
    approvedSignatures:
      - &quot;method java.lang.String trim&quot;
      - &quot;staticMethod java.lang.System getProperty java.lang.String&quot;

unclassified:
  location:
    adminAddress: &quot;jenkins@example.com&quot;
    url: &quot;https://jenkins.example.com/&quot;
    
  mailer:
    smtpHost: &quot;smtp.example.com&quot;
    smtpPort: 587
    charset: &quot;UTF-8&quot;
    authentication:
      username: &quot;jenkins@example.com&quot;
      password: &quot;{AQAAABAAAAAQhudQr8JjwNNI9pj8oI3L2gE=}&quot;
    useSsl: false
    useTls: true
EOF</code></pre>
      </div>
    </div>
<h2 id="reverse-proxy-setup" class="mobile-header">Reverse Proxy Setup</h2>
<h3 id="nginx-configuration" class="mobile-header">nginx Configuration</h3>
<div class="mobile-code-block" data-language="nginx">
      <div class="mobile-code-header">
        <span class="mobile-code-language">nginx</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-nginx"># /etc/nginx/sites-available/jenkins
upstream jenkins {
    server 127.0.0.1:8080 fail_timeout=0;
    keepalive 32;
}

server {
    listen 80;
    server_name jenkins.example.com;
    return 301 https://$server_name$request_uri;
}

server {
    listen 443 ssl http2;
    server_name jenkins.example.com;

    ssl_certificate /etc/letsencrypt/live/jenkins.example.com/fullchain.pem;
    ssl_certificate_key /etc/letsencrypt/live/jenkins.example.com/privkey.pem;
    
    # Security headers
    add_header Strict-Transport-Security &quot;max-age=31536000; includeSubDomains&quot; always;
    add_header X-Content-Type-Options nosniff always;
    add_header X-Frame-Options DENY always;
    add_header X-XSS-Protection &quot;1; mode=block&quot; always;
    add_header Referrer-Policy &quot;strict-origin-when-cross-origin&quot; always;

    client_max_body_size 100M;
    
    location / {
        proxy_pass http://jenkins;
        proxy_redirect default;
        proxy_http_version 1.1;
        
        # Required headers for Jenkins
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
        proxy_set_header X-Forwarded-Port $server_port;
        
        # WebSocket support for Jenkins
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection &quot;upgrade&quot;;
        
        # Timeout settings
        proxy_connect_timeout 90;
        proxy_send_timeout 90;
        proxy_read_timeout 90;
        
        proxy_buffering off;
        proxy_request_buffering off;
        proxy_max_temp_file_size 0;
    }
}</code></pre>
      </div>
    </div>
<h3 id="haproxy-configuration" class="mobile-header">HAProxy Configuration</h3>
<div class="mobile-code-block" data-language="haproxy">
      <div class="mobile-code-header">
        <span class="mobile-code-language">haproxy</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-haproxy"># /etc/haproxy/haproxy.cfg
frontend jenkins_frontend
    bind *:80
    bind *:443 ssl crt /etc/ssl/certs/jenkins.pem
    redirect scheme https if !{ ssl_fc }
    default_backend jenkins_servers

backend jenkins_servers
    mode http
    balance roundrobin
    option httpchk GET /login
    http-check expect status 200
    server jenkins1 127.0.0.1:8080 check inter 30s rise 2 fall 3
    server jenkins2 127.0.0.1:8081 check inter 30s rise 2 fall 3 backup

    # Headers for Jenkins
    http-request set-header X-Forwarded-Proto https
    http-request set-header X-Forwarded-Port %[dst_port]
    http-response set-header Strict-Transport-Security &quot;max-age=31536000; includeSubDomains&quot;</code></pre>
      </div>
    </div>
<h3 id="apache-http-server-configuration" class="mobile-header">Apache HTTP Server Configuration</h3>
<div class="mobile-code-block" data-language="apache">
      <div class="mobile-code-header">
        <span class="mobile-code-language">apache</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-apache"># /etc/apache2/sites-available/jenkins.conf
&lt;VirtualHost *:80&gt;
    ServerName jenkins.example.com
    Redirect permanent / https://jenkins.example.com/
&lt;/VirtualHost&gt;

&lt;VirtualHost *:443&gt;
    ServerName jenkins.example.com
    
    SSLEngine on
    SSLCertificateFile /etc/letsencrypt/live/jenkins.example.com/fullchain.pem
    SSLCertificateKeyFile /etc/letsencrypt/live/jenkins.example.com/privkey.pem
    
    # Security headers
    Header always set Strict-Transport-Security &quot;max-age=31536000; includeSubDomains&quot;
    Header always set X-Content-Type-Options nosniff
    Header always set X-Frame-Options DENY
    Header always set X-XSS-Protection &quot;1; mode=block&quot;
    
    ProxyPreserveHost On
    ProxyRequests Off
    
    ProxyPass / http://127.0.0.1:8080/ nocanon
    ProxyPassReverse / http://127.0.0.1:8080/
    ProxyPassReverse  /  http://jenkins.example.com/
    
    # WebSocket support
    RewriteEngine on
    RewriteCond %{HTTP:Upgrade} websocket [NC]
    RewriteCond %{HTTP:Connection} upgrade [NC]
    RewriteRule ^/?(.*) &quot;ws://127.0.0.1:8080/$1&quot; [P,L]
    
    AllowEncodedSlashes NoDecode
&lt;/VirtualHost&gt;</code></pre>
      </div>
    </div>
<h2 id="security-configuration" class="mobile-header">Security Configuration</h2>
<h3 id="ssltls-setup" class="mobile-header">SSL/TLS Setup</h3>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash"># Generate self-signed certificate (development only)
sudo mkdir -p /etc/jenkins/ssl
sudo openssl req -x509 -newkey rsa:4096 -keyout /etc/jenkins/ssl/jenkins.key -out /etc/jenkins/ssl/jenkins.crt -days 365 -nodes -subj &quot;/C=US/ST=State/L=City/O=Organization/CN=jenkins.example.com&quot;

# Create Java keystore
sudo keytool -genkey -alias jenkins -keyalg RSA -keystore /etc/jenkins/ssl/jenkins.jks -keysize 2048 -dname &quot;CN=jenkins.example.com,OU=IT,O=Organization,L=City,ST=State,C=US&quot; -storepass changeit -keypass changeit

# Configure Jenkins to use HTTPS
sudo systemctl edit jenkins
# Add:
[Service]
Environment=&quot;JENKINS_OPTS=--httpPort=-1 --httpsPort=8443 --httpsKeyStore=/etc/jenkins/ssl/jenkins.jks --httpsKeyStorePassword=changeit&quot;

sudo systemctl restart jenkins

# Or use Let&#039;s Encrypt with reverse proxy (recommended)
sudo certbot --nginx -d jenkins.example.com</code></pre>
      </div>
    </div>
<h3 id="authentication-and-authorization" class="mobile-header">Authentication and Authorization</h3>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash"># Configure LDAP authentication via JCasC
sudo tee /var/lib/jenkins/casc_configs/auth.yaml &lt;&lt;EOF
jenkins:
  securityRealm:
    ldap:
      configurations:
        - server: &quot;ldaps://ldap.example.com:636&quot;
          rootDN: &quot;DC=example,DC=com&quot;
          inhibitInferRootDN: false
          userSearchBase: &quot;OU=Users&quot;
          userSearch: &quot;(&amp;(objectCategory=Person)(objectClass=user)(sAMAccountName={0}))&quot;
          groupSearchBase: &quot;OU=Groups&quot;
          groupSearchFilter: &quot;(&amp;(objectClass=group)(cn={0}))&quot;
          managerDN: &quot;CN=jenkins,OU=Service Accounts,DC=example,DC=com&quot;
          managerPasswordSecret: &quot;ldap-password&quot;
          displayNameAttributeName: &quot;displayName&quot;
          mailAddressAttributeName: &quot;mail&quot;

  authorizationStrategy:
    roleBased:
      roles:
        global:
          - name: &quot;jenkins-admins&quot;
            permissions:
              - &quot;Overall/Administer&quot;
            assignments:
              - &quot;Domain Admins&quot;
              - &quot;jenkins-admins&quot;
          - name: &quot;developers&quot;
            permissions:
              - &quot;Overall/Read&quot;
              - &quot;Job/Build&quot;
              - &quot;Job/Cancel&quot;
              - &quot;Job/Read&quot;
              - &quot;Job/Workspace&quot;
              - &quot;Run/Replay&quot;
              - &quot;Run/Update&quot;
            assignments:
              - &quot;developers&quot;
              - &quot;authenticated&quot;
          - name: &quot;viewers&quot;
            permissions:
              - &quot;Overall/Read&quot;
              - &quot;Job/Read&quot;
            assignments:
              - &quot;viewers&quot;
              
credentials:
  system:
    domainCredentials:
      - credentials:
          - usernamePassword:
              scope: GLOBAL
              id: &quot;ldap-password&quot;
              username: &quot;CN=jenkins,OU=Service Accounts,DC=example,DC=com&quot;
              password: &quot;{AQAAABAAAAAQSecureEncryptedPassword=}&quot;
              description: &quot;LDAP Service Account&quot;
          - basicSSHUserPrivateKey:
              scope: GLOBAL
              id: &quot;ssh-agent-key&quot;
              username: &quot;jenkins&quot;
              description: &quot;SSH key for Jenkins agents&quot;
              privateKeySource:
                directEntry:
                  privateKey: |
                    -----BEGIN OPENSSH PRIVATE KEY-----
                    EncryptedPrivateKeyContentHere
                    -----END OPENSSH PRIVATE KEY-----
EOF</code></pre>
      </div>
    </div>
<h3 id="firewall-rules" class="mobile-header">Firewall Rules</h3>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash"># UFW (Ubuntu/Debian)
sudo ufw allow from 192.168.1.0/24 to any port 8080
sudo ufw allow from 192.168.1.0/24 to any port 50000
sudo ufw reload

# firewalld (RHEL/CentOS/openSUSE)
sudo firewall-cmd --permanent --new-zone=jenkins
sudo firewall-cmd --permanent --zone=jenkins --add-source=192.168.1.0/24
sudo firewall-cmd --permanent --zone=jenkins --add-port=8080/tcp
sudo firewall-cmd --permanent --zone=jenkins --add-port=50000/tcp
sudo firewall-cmd --reload

# iptables
sudo iptables -A INPUT -s 192.168.1.0/24 -p tcp --dport 8080 -j ACCEPT
sudo iptables -A INPUT -s 192.168.1.0/24 -p tcp --dport 50000 -j ACCEPT
sudo iptables-save &gt; /etc/iptables/rules.v4

# pf (FreeBSD)
# Add to /etc/pf.conf
pass in on $ext_if proto tcp from 192.168.1.0/24 to any port {8080, 50000}

# Windows Firewall
New-NetFirewallRule -DisplayName &quot;Jenkins HTTP&quot; -Direction Inbound -Protocol TCP -LocalPort 8080 -RemoteAddress 192.168.1.0/24 -Action Allow
New-NetFirewallRule -DisplayName &quot;Jenkins Agent&quot; -Direction Inbound -Protocol TCP -LocalPort 50000 -RemoteAddress 192.168.1.0/24 -Action Allow</code></pre>
      </div>
    </div>
<h2 id="database-setup" class="mobile-header">Database Setup</h2>
<h3 id="external-database-configuration-postgresql" class="mobile-header">External Database Configuration (PostgreSQL)</h3>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash"># Install PostgreSQL
sudo apt install -y postgresql postgresql-contrib

# Create Jenkins database
sudo -u postgres createdb jenkinsdb
sudo -u postgres createuser jenkinsuser
sudo -u postgres psql -c &quot;ALTER USER jenkinsuser WITH PASSWORD &#039;SecureJenkinsPassword123!&#039;;&quot;
sudo -u postgres psql -c &quot;GRANT ALL PRIVILEGES ON DATABASE jenkinsdb TO jenkinsuser;&quot;

# Download PostgreSQL driver
wget https://jdbc.postgresql.org/download/postgresql-42.6.0.jar -O /var/lib/jenkins/postgresql-connector.jar

# Configure Jenkins to use PostgreSQL
sudo tee -a /etc/default/jenkins &lt;&lt;EOF
# PostgreSQL database configuration
JENKINS_JAVA_OPTIONS=&quot;-Djenkins.install.runSetupWizard=false -Dhudson.model.DirectoryBrowserSupport.CSP=\&quot;sandbox allow-scripts; default-src &#039;self&#039;; script-src &#039;self&#039; &#039;unsafe-inline&#039;; style-src &#039;self&#039; &#039;unsafe-inline&#039;;\&quot;&quot;
EOF

# Create database configuration
sudo tee /var/lib/jenkins/database-config.xml &lt;&lt;EOF
&lt;databaseConfiguration&gt;
  &lt;database class=&quot;org.jenkinsci.plugins.database.postgresql.PostgreSQLDatabase&quot;&gt;
    &lt;hostname&gt;localhost&lt;/hostname&gt;
    &lt;port&gt;5432&lt;/port&gt;
    &lt;database&gt;jenkinsdb&lt;/database&gt;
    &lt;username&gt;jenkinsuser&lt;/username&gt;
    &lt;password&gt;{AQAAABAAAAAQEncryptedPasswordHere=}&lt;/password&gt;
    &lt;properties&gt;sslmode=require&lt;/properties&gt;
  &lt;/database&gt;
&lt;/databaseConfiguration&gt;
EOF</code></pre>
      </div>
    </div>
<h3 id="backup-database-schema" class="mobile-header">Backup Database Schema</h3>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash"># Create database schema backup
sudo -u postgres pg_dump jenkinsdb &gt; /backup/jenkins/jenkinsdb-schema-$(date +%Y%m%d).sql

# Create Jenkins jobs and configuration backup
sudo tee /usr/local/bin/jenkins-db-backup.sh &lt;&lt;&#039;EOF&#039;
#!/bin/bash
BACKUP_DIR=&quot;/backup/jenkins/$(date +%Y%m%d_%H%M%S)&quot;
mkdir -p &quot;$BACKUP_DIR&quot;

# PostgreSQL backup
sudo -u postgres pg_dump jenkinsdb | gzip &gt; &quot;$BACKUP_DIR/jenkinsdb.sql.gz&quot;

# Jenkins configuration backup
tar -czf &quot;$BACKUP_DIR/jenkins-config.tar.gz&quot; \
  --exclude=&quot;/var/lib/jenkins/workspace/*&quot; \
  --exclude=&quot;/var/lib/jenkins/builds/*/archive&quot; \
  --exclude=&quot;/var/lib/jenkins/logs/*&quot; \
  /var/lib/jenkins/

echo &quot;Database backup completed: $BACKUP_DIR&quot;
EOF

chmod +x /usr/local/bin/jenkins-db-backup.sh</code></pre>
      </div>
    </div>
<h2 id="performance-optimization" class="mobile-header">Performance Optimization</h2>
<h3 id="system-tuning" class="mobile-header">System Tuning</h3>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash"># Jenkins-specific system optimizations
sudo tee -a /etc/sysctl.conf &lt;&lt;EOF
# Jenkins optimizations
vm.swappiness = 1
fs.file-max = 65535
net.core.somaxconn = 32768
net.ipv4.tcp_max_syn_backlog = 8192
net.ipv4.ip_local_port_range = 1024 65535
EOF

sudo sysctl -p

# Increase file descriptor limits
sudo tee -a /etc/security/limits.conf &lt;&lt;EOF
jenkins soft nofile 65535
jenkins hard nofile 65535
jenkins soft nproc 32768
jenkins hard nproc 32768
EOF

# Optimize Jenkins JVM settings
sudo systemctl edit jenkins
# Add:
[Service]
Environment=&quot;JAVA_OPTS=-Xmx8g -Xms4g -XX:+UseG1GC -XX:+UseStringDeduplication -XX:+DisableExplicitGC -XX:+UnlockExperimentalVMOptions -XX:+UseCGroupMemoryLimitForHeap&quot;
Environment=&quot;JENKINS_OPTS=--sessionTimeout=1440 --sessionEviction=86400&quot;

sudo systemctl daemon-reload
sudo systemctl restart jenkins</code></pre>
      </div>
    </div>
<h3 id="jenkins-performance-configuration" class="mobile-header">Jenkins Performance Configuration</h3>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash"># Configure Jenkins for high performance
sudo tee /var/lib/jenkins/casc_configs/performance.yaml &lt;&lt;EOF
jenkins:
  systemMessage: &quot;High-Performance Jenkins Instance&quot;
  numExecutors: 0  # Don&#039;t run builds on controller
  mode: EXCLUSIVE
  quietPeriod: 5
  scmCheckoutRetryCount: 3
  
  # Global pipeline libraries for shared code
  globalLibraries:
    libraries:
      - name: &quot;shared-pipeline-library&quot;
        defaultVersion: &quot;main&quot;
        implicit: true
        retriever:
          modernSCM:
            scm:
              git:
                remote: &quot;https://github.com/example/jenkins-shared-library.git&quot;
                credentialsId: &quot;github-token&quot;

  # Configure build discarders globally
  buildDiscarders:
    configuredBuildDiscarders:
      - &quot;logRotator&quot;:
          artifactDaysToKeepStr: &quot;30&quot;
          artifactNumToKeepStr: &quot;10&quot;
          daysToKeepStr: &quot;30&quot;
          numToKeepStr: &quot;100&quot;

unclassified:
  # Configure global timeout
  buildTimeout:
    operations:
      - timeoutMinutes: 60
      - failBuild: true
      - writingDescription: true
      
  # Workspace cleanup configuration  
  wsCleanup:
    deleteDirs: true
    cleanupMatrixParent: true
    skipWhenFailed: false
    
tool:
  # Configure tools for performance
  git:
    installations:
      - name: &quot;Default&quot;
        home: &quot;/usr/bin/git&quot;
        
  maven:
    installations:
      - name: &quot;Maven 3.9&quot;
        properties:
          - installSource:
              installers:
                - maven:
                    id: &quot;3.9.6&quot;
                    
  gradle:
    installations:
      - name: &quot;Gradle 8&quot;
        properties:
          - installSource:
              installers:
                - gradleInstaller:
                    id: &quot;8.4&quot;

  nodejs:
    installations:
      - name: &quot;NodeJS 18&quot;
        properties:
          - installSource:
              installers:
                - nodeJSInstaller:
                    id: &quot;18.18.2&quot;
                    
  dockerTool:
    installations:
      - name: &quot;Docker&quot;
        properties:
          - installSource:
              installers:
                - dockerInstaller:
                    version: &quot;latest&quot;
EOF

# Configure agent templates for auto-scaling
sudo tee /var/lib/jenkins/casc_configs/agents.yaml &lt;&lt;EOF
jenkins:
  clouds:
    - kubernetes:
        name: &quot;kubernetes&quot;
        serverUrl: &quot;https://kubernetes.default.svc.cluster.local&quot;
        namespace: &quot;jenkins&quot;
        credentialsId: &quot;kubernetes-token&quot;
        jenkinsUrl: &quot;http://jenkins.jenkins.svc.cluster.local:8080&quot;
        jenkinsTunnel: &quot;jenkins-agent.jenkins.svc.cluster.local:50000&quot;
        connectTimeout: 300
        readTimeout: 300
        containerCapStr: 100
        templates:
          - name: &quot;jenkins-agent&quot;
            namespace: &quot;jenkins&quot;
            label: &quot;kubernetes docker&quot;
            nodeUsageMode: EXCLUSIVE
            containers:
              - name: &quot;jnlp&quot;
                image: &quot;jenkins/inbound-agent:latest&quot;
                alwaysPullImage: true
                workingDir: &quot;/home/jenkins/agent&quot;
                command: &quot;&quot;
                args: &quot;&quot;
                resourceRequestCpu: &quot;500m&quot;
                resourceRequestMemory: &quot;1Gi&quot;
                resourceLimitCpu: &quot;2&quot;
                resourceLimitMemory: &quot;4Gi&quot;
            volumes:
              - hostPathVolume:
                  hostPath: &quot;/var/run/docker.sock&quot;
                  mountPath: &quot;/var/run/docker.sock&quot;
EOF</code></pre>
      </div>
    </div>
<h3 id="pipeline-optimization" class="mobile-header">Pipeline Optimization</h3>
<div class="mobile-code-block" data-language="groovy">
      <div class="mobile-code-header">
        <span class="mobile-code-language">groovy</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-groovy">// Optimized Jenkins Pipeline Template
// /var/lib/jenkins/pipeline-templates/optimized-pipeline.groovy
@Library(&#039;shared-pipeline-library&#039;) _

pipeline {
    agent {
        label &#039;docker &amp;&amp; linux&#039;
    }
    
    options {
        buildDiscarder(logRotator(numToKeepStr: &#039;50&#039;, artifactNumToKeepStr: &#039;10&#039;))
        timeout(time: 120, unit: &#039;MINUTES&#039;)
        timestamps()
        skipDefaultCheckout(true)
        disableConcurrentBuilds()
        ansiColor(&#039;xterm&#039;)
        parallelsAlwaysFailFast()
        copyArtifactPermission(&#039;*&#039;)
    }
    
    environment {
        DOCKER_REGISTRY = credentials(&#039;docker-registry-url&#039;)
        MAVEN_OPTS = &#039;-Xmx2g -XX:+UseG1GC&#039;
        GRADLE_OPTS = &#039;-Xmx2g -Dorg.gradle.daemon=false&#039;
        CI = &#039;true&#039;
    }
    
    stages {
        stage(&#039;Checkout&#039;) {
            steps {
                checkout scm
                script {
                    env.GIT_COMMIT_SHORT = env.GIT_COMMIT.take(8)
                    env.BUILD_VERSION = &quot;${env.BUILD_NUMBER}-${env.GIT_COMMIT_SHORT}&quot;
                }
            }
        }
        
        stage(&#039;Parallel Analysis&#039;) {
            parallel {
                stage(&#039;Code Quality&#039;) {
                    steps {
                        script {
                            // SonarQube analysis
                            withSonarQubeEnv(&#039;SonarQube&#039;) {
                                sh &#039;&#039;&#039;
                                    mvn sonar:sonar \
                                        -Dsonar.projectKey=${JOB_NAME} \
                                        -Dsonar.projectVersion=${BUILD_VERSION} \
                                        -Dsonar.sources=src/main \
                                        -Dsonar.tests=src/test \
                                        -Dsonar.coverage.jacoco.xmlReportPaths=target/site/jacoco/jacoco.xml
                                &#039;&#039;&#039;
                            }
                            
                            timeout(time: 10, unit: &#039;MINUTES&#039;) {
                                waitForQualityGate abortPipeline: true
                            }
                        }
                    }
                }
                
                stage(&#039;Security Scan&#039;) {
                    steps {
                        // OWASP Dependency Check
                        dependencyCheck additionalArguments: &#039;&#039;&#039;
                            --enableRetired
                            --enableExperimental  
                            --scan ./
                            --format JSON
                            --format HTML
                            --suppression dependency-check-suppressions.xml
                        &#039;&#039;&#039;, odcInstallation: &#039;dependency-check-8.4.0&#039;
                        
                        dependencyCheckPublisher pattern: &#039;**/dependency-check-report.xml&#039;
                        
                        // Secret scanning
                        sh &#039;&#039;&#039;
                            docker run --rm -v $(pwd):/repo \
                                trufflesecurity/trufflehog:latest \
                                git file:///repo \
                                --json \
                                --fail &gt; trufflehog-results.json || true
                        &#039;&#039;&#039;
                    }
                }
                
                stage(&#039;Test&#039;) {
                    steps {
                        sh &#039;&#039;&#039;
                            # Parallel test execution
                            mvn clean test \
                                -Dmaven.test.failure.ignore=true \
                                -Dspring.profiles.active=test \
                                -Djunit.jupiter.execution.parallel.enabled=true \
                                -Djunit.jupiter.execution.parallel.mode.default=concurrent
                        &#039;&#039;&#039;
                        
                        publishTestResults testResultsPattern: &#039;target/surefire-reports/*.xml&#039;
                        publishCoverage adapters: [jacocoAdapter(&#039;target/site/jacoco/jacoco.xml&#039;)], 
                                       sourceFileResolver: sourceFiles(&#039;STORE_LAST_BUILD&#039;)
                    }
                    post {
                        always {
                            archiveArtifacts artifacts: &#039;target/surefire-reports/**&#039;, allowEmptyArchive: true
                        }
                    }
                }
            }
        }
        
        stage(&#039;Build &amp; Package&#039;) {
            steps {
                sh &#039;&#039;&#039;
                    # Optimized build with parallel processing
                    mvn clean package \
                        -DskipTests \
                        -T 2C \
                        -Dspring.profiles.active=production \
                        -Dmaven.javadoc.skip=true
                &#039;&#039;&#039;
                
                // Docker build with BuildKit
                script {
                    def image = docker.build(&quot;${env.DOCKER_REGISTRY}/${env.JOB_NAME}:${env.BUILD_VERSION}&quot;, 
                                           &quot;--build-arg BUILD_VERSION=${env.BUILD_VERSION} .&quot;)
                    
                    // Security scanning with Trivy
                    sh &quot;&quot;&quot;
                        docker run --rm -v /var/run/docker.sock:/var/run/docker.sock \
                            aquasec/trivy:latest image \
                            --format table \
                            --severity HIGH,CRITICAL \
                            --exit-code 1 \
                            ${env.DOCKER_REGISTRY}/${env.JOB_NAME}:${env.BUILD_VERSION}
                    &quot;&quot;&quot;
                    
                    image.push()
                    image.push(&quot;latest&quot;)
                }
            }
        }
        
        stage(&#039;Deploy&#039;) {
            when {
                anyOf {
                    branch &#039;main&#039;
                    branch &#039;develop&#039;
                    branch &#039;release/*&#039;
                }
            }
            parallel {
                stage(&#039;Staging&#039;) {
                    when { branch &#039;develop&#039; }
                    steps {
                        script {
                            // Deploy to staging environment
                            sh &#039;&#039;&#039;
                                kubectl set image deployment/myapp-staging \
                                    myapp=${DOCKER_REGISTRY}/${JOB_NAME}:${BUILD_VERSION} \
                                    --namespace=staging
                                
                                kubectl rollout status deployment/myapp-staging \
                                    --namespace=staging --timeout=300s
                            &#039;&#039;&#039;
                            
                            // Run smoke tests
                            sh &#039;&#039;&#039;
                                curl -f http://myapp-staging.example.com/health || exit 1
                                npm run test:e2e -- --base-url http://myapp-staging.example.com
                            &#039;&#039;&#039;
                        }
                    }
                }
                
                stage(&#039;Production&#039;) {
                    when { 
                        anyOf {
                            branch &#039;main&#039;
                            branch &#039;release/*&#039;
                        }
                    }
                    steps {
                        // Manual approval for production
                        timeout(time: 60, unit: &#039;MINUTES&#039;) {
                            input message: &#039;Deploy to production?&#039;, 
                                  ok: &#039;Deploy&#039;,
                                  submitterParameter: &#039;APPROVER&#039;
                        }
                        
                        script {
                            sh &#039;&#039;&#039;
                                # Blue-green deployment
                                kubectl set image deployment/myapp-production \
                                    myapp=${DOCKER_REGISTRY}/${JOB_NAME}:${BUILD_VERSION} \
                                    --namespace=production
                                
                                kubectl rollout status deployment/myapp-production \
                                    --namespace=production --timeout=600s
                            &#039;&#039;&#039;
                        }
                    }
                }
            }
        }
    }
    
    post {
        always {
            // Cleanup workspace
            cleanWs()
            
            // Archive artifacts
            archiveArtifacts artifacts: &#039;target/*.jar,docker-compose.yml&#039;, 
                           allowEmptyArchive: true, 
                           fingerprint: true
                           
            // Collect build metrics
            script {
                def buildDuration = currentBuild.duration / 1000
                echo &quot;Build completed in ${buildDuration} seconds&quot;
                
                // Custom metrics collection
                sh &quot;&quot;&quot;
                    echo &quot;build_duration_seconds{job=\&quot;${env.JOB_NAME}\&quot;,build=\&quot;${env.BUILD_NUMBER}\&quot;} ${buildDuration}&quot; &gt; build-metrics.txt
                &quot;&quot;&quot;
                
                archiveArtifacts artifacts: &#039;build-metrics.txt&#039;, allowEmptyArchive: true
            }
        }
        
        success {
            // Success notifications
            emailext(
                subject: &quot;✅ Build Success: ${env.JOB_NAME} - ${env.BUILD_NUMBER}&quot;,
                body: &quot;&quot;&quot;Build successful for ${env.JOB_NAME} build ${env.BUILD_NUMBER}
                         
                Build URL: ${env.BUILD_URL}
                Git Commit: ${env.GIT_COMMIT}
                Duration: ${currentBuild.durationString}
                Approver: ${env.APPROVER ?: &#039;Automatic&#039;}&quot;&quot;&quot;,
                to: &quot;${env.CHANGE_AUTHOR_EMAIL ?: &#039;jenkins@example.com&#039;}&quot;
            )
            
            slackSend(
                channel: &#039;#deployments&#039;,
                color: &#039;good&#039;,
                message: &quot;✅ Deployment Success: ${env.JOB_NAME} - ${env.BUILD_NUMBER} by ${env.APPROVER ?: &#039;System&#039;}&quot;
            )
        }
        
        failure {
            emailext(
                subject: &quot;❌ Build Failed: ${env.JOB_NAME} - ${env.BUILD_NUMBER}&quot;,
                body: &quot;Build failed for ${env.JOB_NAME} build ${env.BUILD_NUMBER}\n\nBuild URL: ${env.BUILD_URL}&quot;,
                to: &quot;${env.CHANGE_AUTHOR_EMAIL ?: &#039;jenkins@example.com&#039;}&quot;
            )
            
            slackSend(
                channel: &#039;#ci-cd-alerts&#039;,
                color: &#039;danger&#039;,
                message: &quot;❌ Build Failed: ${env.JOB_NAME} - ${env.BUILD_NUMBER} (&lt;${env.BUILD_URL}|View Details&gt;)&quot;
            )
        }
        
        unstable {
            emailext(
                subject: &quot;⚠️  Build Unstable: ${env.JOB_NAME} - ${env.BUILD_NUMBER}&quot;,
                body: &quot;Build unstable for ${env.JOB_NAME} build ${env.BUILD_NUMBER}\n\nBuild URL: ${env.BUILD_URL}&quot;,
                to: &quot;${env.CHANGE_AUTHOR_EMAIL ?: &#039;jenkins@example.com&#039;}&quot;
            )
        }
    }
}</code></pre>
      </div>
    </div>
<h2 id="monitoring" class="mobile-header">Monitoring</h2>
<h3 id="built-in-monitoring" class="mobile-header">Built-in Monitoring</h3>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash"># Jenkins CLI monitoring commands
java -jar jenkins-cli.jar -s http://localhost:8080 -auth admin:password version
java -jar jenkins-cli.jar -s http://localhost:8080 -auth admin:password list-jobs
java -jar jenkins-cli.jar -s http://localhost:8080 -auth admin:password list-builds job-name
java -jar jenkins-cli.jar -s http://localhost:8080 -auth admin:password get-build job-name 1

# System information
curl -u admin:password http://localhost:8080/systemInfo

# Build queue status
curl -u admin:password http://localhost:8080/queue/api/json

# Node status
curl -u admin:password http://localhost:8080/computer/api/json

# Plugin information
curl -u admin:password http://localhost:8080/pluginManager/api/json?depth=1</code></pre>
      </div>
    </div>
<h3 id="external-monitoring-setup" class="mobile-header">External Monitoring Setup</h3>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash"># Install Jenkins Prometheus Plugin and configure metrics
# Via Jenkins UI: Manage Jenkins &gt; Manage Plugins &gt; Available &gt; Prometheus metrics plugin

# Configure Prometheus to scrape Jenkins metrics
sudo tee /etc/prometheus/jenkins.yml &lt;&lt;EOF
global:
  scrape_interval: 15s

scrape_configs:
  - job_name: &#039;jenkins&#039;
    static_configs:
      - targets: [&#039;localhost:8080&#039;]
    metrics_path: /prometheus/
    scrape_interval: 30s
    scrape_timeout: 10s
EOF

# Install Jenkins Exporter (alternative)
wget https://github.com/lovoo/jenkins_exporter/releases/download/v1.0.0/jenkins_exporter-1.0.0.linux-amd64.tar.gz
tar xzf jenkins_exporter-*.tar.gz
sudo cp jenkins_exporter /usr/local/bin/

# Create systemd service
sudo tee /etc/systemd/system/jenkins_exporter.service &lt;&lt;EOF
[Unit]
Description=Jenkins Exporter
After=network.target

[Service]
Type=simple
User=jenkins
ExecStart=/usr/local/bin/jenkins_exporter \
    --jenkins.address=http://localhost:8080 \
    --jenkins.username=monitoring \
    --jenkins.password=MonitoringPassword123! \
    --web.listen-address=:9118
Restart=always

[Install]
WantedBy=multi-user.target
EOF

sudo systemctl enable --now jenkins_exporter</code></pre>
      </div>
    </div>
<h3 id="health-check-scripts" class="mobile-header">Health Check Scripts</h3>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash">#!/bin/bash
# jenkins-health-check.sh

JENKINS_URL=&quot;http://localhost:8080&quot;
HEALTH_LOG=&quot;/var/log/jenkins-health.log&quot;

log_message() {
    echo &quot;$(date &#039;+%Y-%m-%d %H:%M:%S&#039;) - $1&quot; | tee -a ${HEALTH_LOG}
}

# Check service status
if systemctl is-active jenkins &gt;/dev/null 2&gt;&amp;1; then
    log_message &quot;✅ Jenkins service is running&quot;
else
    log_message &quot;❌ Jenkins service is not running&quot;
    exit 2
fi

# Check web interface
HTTP_STATUS=$(curl -s -o /dev/null -w &quot;%{http_code}&quot; ${JENKINS_URL}/login)
if [ &quot;${HTTP_STATUS}&quot; = &quot;200&quot; ]; then
    log_message &quot;✅ Jenkins web interface responding (HTTP ${HTTP_STATUS})&quot;
else
    log_message &quot;❌ Jenkins web interface issues (HTTP ${HTTP_STATUS})&quot;
    exit 2
fi

# Check disk space
JENKINS_HOME_USAGE=$(df /var/lib/jenkins | awk &#039;NR==2 {print $5}&#039; | sed &#039;s/%//&#039;)
if [ ${JENKINS_HOME_USAGE} -gt 85 ]; then
    log_message &quot;⚠️  High disk usage: ${JENKINS_HOME_USAGE}%&quot;
    exit 1
else
    log_message &quot;✅ Jenkins home disk usage: ${JENKINS_HOME_USAGE}%&quot;
fi

# Check memory usage
JAVA_MEMORY=$(ps -o pid,vsz,rss,comm -C java | grep jenkins | awk &#039;{rss+=$3} END {print rss/1024}&#039;)
if (( $(echo &quot;${JAVA_MEMORY} &gt; 6144&quot; | bc -l) )); then
    log_message &quot;⚠️  High memory usage: ${JAVA_MEMORY}MB&quot;
    exit 1
else
    log_message &quot;✅ Jenkins memory usage: ${JAVA_MEMORY}MB&quot;
fi

# Check running builds (if Jenkins CLI is available)
if [ -f /var/lib/jenkins/jenkins-cli.jar ]; then
    RUNNING_BUILDS=$(java -jar /var/lib/jenkins/jenkins-cli.jar -s ${JENKINS_URL} -auth monitoring:MonitoringPassword123! list-builds 2&gt;/dev/null | grep -c &quot;RUNNING&quot; || echo &quot;0&quot;)
    log_message &quot;ℹ️  Running builds: ${RUNNING_BUILDS}&quot;
    
    # Check for failed builds in last 24 hours
    FAILED_BUILDS=$(java -jar /var/lib/jenkins/jenkins-cli.jar -s ${JENKINS_URL} -auth monitoring:MonitoringPassword123! list-builds 2&gt;/dev/null | grep -c &quot;FAILURE&quot; || echo &quot;0&quot;)
    if [ ${FAILED_BUILDS} -gt 5 ]; then
        log_message &quot;⚠️  High number of failed builds: ${FAILED_BUILDS}&quot;
        exit 1
    fi
fi

# Check plugin health
PLUGIN_ERRORS=$(curl -s ${JENKINS_URL}/pluginManager/api/json?depth=1 | jq &#039;.plugins[] | select(.hasUpdate==true or .enabled==false) | .shortName&#039; | wc -l)
if [ ${PLUGIN_ERRORS} -gt 0 ]; then
    log_message &quot;⚠️  Plugins need attention: ${PLUGIN_ERRORS}&quot;
fi

log_message &quot;✅ Jenkins health check completed&quot;
exit 0</code></pre>
      </div>
    </div>
<h2 id="backup-and-restore" class="mobile-header">Backup and Restore</h2>
<h3 id="comprehensive-backup-strategy" class="mobile-header">Comprehensive Backup Strategy</h3>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash">#!/bin/bash
# jenkins-backup.sh

BACKUP_DIR=&quot;/backup/jenkins&quot;
DATE=$(date +%Y%m%d_%H%M%S)
JENKINS_HOME=&quot;/var/lib/jenkins&quot;
RETENTION_DAYS=14

mkdir -p ${BACKUP_DIR}/{config,jobs,plugins,secrets,workspace}

echo &quot;Starting Jenkins comprehensive backup...&quot;

# Function to gracefully shutdown Jenkins
graceful_shutdown() {
    echo &quot;Putting Jenkins in quiet mode...&quot;
    java -jar ${JENKINS_HOME}/jenkins-cli.jar -s http://localhost:8080 -auth admin:SecureAdminPassword123! quiet-down
    
    # Wait for running builds to complete (max 20 minutes)
    for i in {1..120}; do
        RUNNING_BUILDS=$(java -jar ${JENKINS_HOME}/jenkins-cli.jar -s http://localhost:8080 -auth admin:SecureAdminPassword123! list-builds | grep -c &quot;RUNNING&quot; || echo &quot;0&quot;)
        if [ &quot;$RUNNING_BUILDS&quot; -eq 0 ]; then
            echo &quot;All builds completed, stopping Jenkins...&quot;
            systemctl stop jenkins
            break
        fi
        echo &quot;Waiting for $RUNNING_BUILDS running builds to complete... (${i}/120)&quot;
        sleep 10
    done
    
    if [ &quot;$RUNNING_BUILDS&quot; -gt 0 ]; then
        echo &quot;Warning: Stopping Jenkins with $RUNNING_BUILDS builds still running&quot;
        systemctl stop jenkins
    fi
}

# Function to start Jenkins
start_jenkins() {
    echo &quot;Starting Jenkins...&quot;
    systemctl start jenkins
    
    # Wait for Jenkins to be ready
    for i in {1..60}; do
        if curl -f http://localhost:8080/login &gt;/dev/null 2&gt;&amp;1; then
            echo &quot;Jenkins is ready, canceling quiet mode...&quot;
            java -jar ${JENKINS_HOME}/jenkins-cli.jar -s http://localhost:8080 -auth admin:SecureAdminPassword123! cancel-quiet-down
            break
        fi
        echo &quot;Waiting for Jenkins to start... (${i}/60)&quot;
        sleep 10
    done
}

# Gracefully shutdown Jenkins
graceful_shutdown

# Full Jenkins home backup (excluding large/temporary directories)
echo &quot;Creating full Jenkins home backup...&quot;
tar --exclude=&quot;${JENKINS_HOME}/workspace/*&quot; \
    --exclude=&quot;${JENKINS_HOME}/builds/*/archive&quot; \
    --exclude=&quot;${JENKINS_HOME}/logs/*&quot; \
    --exclude=&quot;${JENKINS_HOME}/.m2/repository&quot; \
    --exclude=&quot;${JENKINS_HOME}/caches&quot; \
    --exclude=&quot;${JENKINS_HOME}/war&quot; \
    -czf ${BACKUP_DIR}/config/jenkins-home-${DATE}.tar.gz \
    -C ${JENKINS_HOME} .

# Job configurations backup
echo &quot;Backing up job configurations...&quot;
mkdir -p ${BACKUP_DIR}/jobs
find ${JENKINS_HOME}/jobs -name &quot;config.xml&quot; -exec cp {} ${BACKUP_DIR}/jobs/ \;
tar -czf ${BACKUP_DIR}/jobs/job-configs-${DATE}.tar.gz -C ${BACKUP_DIR}/jobs .
rm ${BACKUP_DIR}/jobs/config.xml 2&gt;/dev/null

# Plugins backup
echo &quot;Backing up installed plugins...&quot;
java -jar ${JENKINS_HOME}/jenkins-cli.jar -s http://localhost:8080 -auth admin:SecureAdminPassword123! list-plugins &gt; ${BACKUP_DIR}/plugins/plugin-list-${DATE}.txt
cp -r ${JENKINS_HOME}/plugins ${BACKUP_DIR}/plugins/plugins-${DATE}/ 2&gt;/dev/null

# Secrets and credentials backup
echo &quot;Backing up secrets and credentials...&quot;
if [ -d &quot;${JENKINS_HOME}/secrets&quot; ]; then
    tar -czf ${BACKUP_DIR}/secrets/jenkins-secrets-${DATE}.tar.gz -C ${JENKINS_HOME} secrets/
fi

# System configuration backup
echo &quot;Backing up system configuration...&quot;
tar -czf ${BACKUP_DIR}/config/system-config-${DATE}.tar.gz \
    /etc/default/jenkins \
    /etc/sysconfig/jenkins \
    /etc/systemd/system/jenkins.service.d/ 2&gt;/dev/null

# Database backup (if using external database)
if [ -f &quot;${JENKINS_HOME}/database-config.xml&quot; ]; then
    echo &quot;Backing up external database...&quot;
    sudo -u postgres pg_dump jenkinsdb | gzip &gt; ${BACKUP_DIR}/config/jenkinsdb-${DATE}.sql.gz
fi

# Start Jenkins
start_jenkins

# Cloud backup (uncomment and configure as needed)
# aws s3 cp ${BACKUP_DIR}/ s3://jenkins-backups/${DATE}/ --recursive --sse AES256
# az storage blob upload-batch --source ${BACKUP_DIR} --destination jenkins-backups --destination-path ${DATE}
# gsutil cp -r ${BACKUP_DIR}/* gs://jenkins-backups/${DATE}/

# Verify backup integrity
echo &quot;Verifying backup integrity...&quot;
LATEST_BACKUP=$(ls -t ${BACKUP_DIR}/config/jenkins-home-*.tar.gz | head -1)
if tar -tzf &quot;$LATEST_BACKUP&quot; &gt;/dev/null 2&gt;&amp;1; then
    echo &quot;✅ Backup integrity verified&quot;
    BACKUP_SIZE=$(du -h &quot;$LATEST_BACKUP&quot; | cut -f1)
    echo &quot;Backup size: $BACKUP_SIZE&quot;
else
    echo &quot;❌ Backup integrity check failed&quot;
    exit 1
fi

# Cleanup old backups
echo &quot;Cleaning up old backups (keeping last $RETENTION_DAYS days)...&quot;
find ${BACKUP_DIR} -name &quot;jenkins-*&quot; -type f -mtime +${RETENTION_DAYS} -delete
find ${BACKUP_DIR} -name &quot;plugin-list-*&quot; -type f -mtime +${RETENTION_DAYS} -delete
find ${BACKUP_DIR} -name &quot;*-${DATE}*&quot; -type d -mtime +${RETENTION_DAYS} -exec rm -rf {} \;

# Generate backup report
echo &quot;Generating backup report...&quot;
cat &gt; ${BACKUP_DIR}/backup-report-${DATE}.txt &lt;&lt;EOF
Jenkins Backup Report - ${DATE}
================================

Backup Location: ${BACKUP_DIR}
Jenkins Home: ${JENKINS_HOME}
Backup Date: $(date)
Server: $(hostname)

Files backed up:
- Jenkins Home: $(ls -lh ${BACKUP_DIR}/config/jenkins-home-${DATE}.tar.gz)
- Job Configs: $(ls -lh ${BACKUP_DIR}/jobs/job-configs-${DATE}.tar.gz)
- Plugins: $(ls -lh ${BACKUP_DIR}/plugins/plugin-list-${DATE}.txt)
- Secrets: $(ls -lh ${BACKUP_DIR}/secrets/jenkins-secrets-${DATE}.tar.gz 2&gt;/dev/null || echo &quot;No secrets backup&quot;)
- System Config: $(ls -lh ${BACKUP_DIR}/config/system-config-${DATE}.tar.gz 2&gt;/dev/null || echo &quot;No system config backup&quot;)

Total Backup Size: $(du -h ${BACKUP_DIR} | tail -1 | cut -f1)

Verification: ✅ Passed
EOF

echo &quot;✅ Jenkins backup completed: ${DATE}&quot;
echo &quot;📊 Backup report: ${BACKUP_DIR}/backup-report-${DATE}.txt&quot;</code></pre>
      </div>
    </div>
<h3 id="restore-procedures" class="mobile-header">Restore Procedures</h3>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash">#!/bin/bash
# jenkins-restore.sh

BACKUP_FILE=&quot;${1}&quot;
RESTORE_TYPE=&quot;${2:-full}&quot;  # full, config-only, jobs-only

usage() {
    echo &quot;Usage: $0 &lt;backup_file&gt; [restore_type]&quot;
    echo &quot;Restore types: full (default), config-only, jobs-only&quot;
    echo &quot;&quot;
    echo &quot;Available backups:&quot;
    ls -la /backup/jenkins/config/jenkins-home-*.tar.gz | head -10
    exit 1
}

if [ -z &quot;$BACKUP_FILE&quot; ]; then
    usage
fi

if [ ! -f &quot;$BACKUP_FILE&quot; ]; then
    echo &quot;❌ Backup file not found: $BACKUP_FILE&quot;
    exit 1
fi

echo &quot;🔄 Starting Jenkins restore from: $BACKUP_FILE&quot;
echo &quot;Restore type: $RESTORE_TYPE&quot;

# Pre-restore backup of current state
if [ -d &quot;/var/lib/jenkins&quot; ]; then
    echo &quot;📦 Creating backup of current installation...&quot;
    CURRENT_BACKUP=&quot;/backup/jenkins/pre-restore-$(date +%s)&quot;
    mkdir -p &quot;$CURRENT_BACKUP&quot;
    mv /var/lib/jenkins &quot;$CURRENT_BACKUP/jenkins-$(date +%Y%m%d_%H%M%S)&quot;
    echo &quot;Current installation backed up to: $CURRENT_BACKUP&quot;
fi

# Stop Jenkins
echo &quot;⏹️  Stopping Jenkins...&quot;
systemctl stop jenkins

case &quot;$RESTORE_TYPE&quot; in
    &quot;full&quot;)
        echo &quot;🔄 Performing full restore...&quot;
        
        # Create new Jenkins directory
        mkdir -p /var/lib/jenkins
        
        # Restore from backup
        echo &quot;📂 Extracting backup archive...&quot;
        tar -xzf &quot;$BACKUP_FILE&quot; -C /var/lib/jenkins
        
        # Set proper ownership
        chown -R jenkins:jenkins /var/lib/jenkins
        chmod -R 755 /var/lib/jenkins
        
        # Special permissions for secrets
        if [ -d &quot;/var/lib/jenkins/secrets&quot; ]; then
            chmod 700 /var/lib/jenkins/secrets
            chmod 600 /var/lib/jenkins/secrets/*
        fi
        ;;
        
    &quot;config-only&quot;)
        echo &quot;🔄 Performing configuration-only restore...&quot;
        
        # Create minimal Jenkins directory
        mkdir -p /var/lib/jenkins
        
        # Extract only configuration files
        tar -xzf &quot;$BACKUP_FILE&quot; -C /var/lib/jenkins \
            --include=&quot;*/config.xml&quot; \
            --include=&quot;*/secrets/*&quot; \
            --include=&quot;*/users/*&quot; \
            --include=&quot;*/plugins/*&quot; \
            --exclude=&quot;*/workspace/*&quot; \
            --exclude=&quot;*/builds/*&quot;
            
        chown -R jenkins:jenkins /var/lib/jenkins
        ;;
        
    &quot;jobs-only&quot;)
        echo &quot;🔄 Performing jobs-only restore...&quot;
        
        if [ ! -d &quot;/var/lib/jenkins&quot; ]; then
            echo &quot;❌ Jenkins directory not found. Cannot restore jobs only.&quot;
            exit 1
        fi
        
        # Backup current jobs
        if [ -d &quot;/var/lib/jenkins/jobs&quot; ]; then
            mv /var/lib/jenkins/jobs &quot;/var/lib/jenkins/jobs.backup.$(date +%s)&quot;
        fi
        
        # Extract only jobs
        tar -xzf &quot;$BACKUP_FILE&quot; -C /var/lib/jenkins jobs/
        chown -R jenkins:jenkins /var/lib/jenkins/jobs
        ;;
        
    *)
        echo &quot;❌ Unknown restore type: $RESTORE_TYPE&quot;
        usage
        ;;
esac

# Restore system configuration if available
BACKUP_DIR=$(dirname &quot;$BACKUP_FILE&quot;)
BACKUP_DATE=$(basename &quot;$BACKUP_FILE&quot; .tar.gz | sed &#039;s/jenkins-home-//&#039;)
SYSTEM_CONFIG=&quot;${BACKUP_DIR}/../config/system-config-${BACKUP_DATE}.tar.gz&quot;

if [ -f &quot;$SYSTEM_CONFIG&quot; ]; then
    echo &quot;🔧 Restoring system configuration...&quot;
    tar -xzf &quot;$SYSTEM_CONFIG&quot; -C / 2&gt;/dev/null
    systemctl daemon-reload
fi

# Restore database if available
DB_BACKUP=&quot;${BACKUP_DIR}/jenkinsdb-${BACKUP_DATE}.sql.gz&quot;
if [ -f &quot;$DB_BACKUP&quot; ]; then
    echo &quot;🗄️  Restoring database...&quot;
    zcat &quot;$DB_BACKUP&quot; | sudo -u postgres psql jenkinsdb
fi

# Start Jenkins
echo &quot;▶️  Starting Jenkins...&quot;
systemctl start jenkins

# Wait for Jenkins to start and verify
echo &quot;⏳ Waiting for Jenkins to start...&quot;
for i in {1..120}; do
    if curl -f http://localhost:8080/login &gt;/dev/null 2&gt;&amp;1; then
        echo &quot;✅ Jenkins started successfully&quot;
        break
    fi
    echo &quot;Waiting for Jenkins to start... (${i}/120)&quot;
    sleep 10
done

# Verify restoration
echo &quot;🔍 Verifying restoration...&quot;
if curl -f http://localhost:8080/login &gt;/dev/null 2&gt;&amp;1; then
    echo &quot;✅ Jenkins is responding&quot;
    
    # Check if jobs were restored
    if [ -d &quot;/var/lib/jenkins/jobs&quot; ]; then
        JOB_COUNT=$(ls -1 /var/lib/jenkins/jobs | wc -l)
        echo &quot;📋 Jobs restored: $JOB_COUNT&quot;
    fi
    
    # Check if plugins were restored
    if [ -d &quot;/var/lib/jenkins/plugins&quot; ]; then
        PLUGIN_COUNT=$(ls -1 /var/lib/jenkins/plugins | wc -l)
        echo &quot;🔌 Plugins restored: $PLUGIN_COUNT&quot;
    fi
    
    echo &quot;✅ Jenkins restoration completed successfully&quot;
    echo &quot;&quot;
    echo &quot;📝 Next steps:&quot;
    echo &quot;1. Verify Jenkins configuration via web interface&quot;
    echo &quot;2. Check plugin compatibility and update if needed&quot;
    echo &quot;3. Verify job configurations and test builds&quot;
    echo &quot;4. Update any environment-specific settings&quot;
    
else
    echo &quot;❌ Jenkins restoration failed - service not responding&quot;
    echo &quot;Check logs: journalctl -u jenkins -n 50&quot;
    exit 1
fi</code></pre>
      </div>
    </div>
<h3 id="disaster-recovery" class="mobile-header">Disaster Recovery</h3>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash">#!/bin/bash
# jenkins-disaster-recovery.sh

echo &quot;🚨 Jenkins Disaster Recovery Procedure&quot;
echo &quot;======================================&quot;

# Check if Jenkins is running
if systemctl is-active jenkins &gt;/dev/null 2&gt;&amp;1; then
    echo &quot;⚠️  Jenkins is running. This procedure should be run on a failed system.&quot;
    read -p &quot;Continue anyway? (y/N): &quot; -n 1 -r
    echo
    if [[ ! $REPLY =~ ^[Yy]$ ]]; then
        exit 1
    fi
fi

# Find latest backup
BACKUP_DIR=&quot;/backup/jenkins&quot;
LATEST_BACKUP=$(ls -t ${BACKUP_DIR}/config/jenkins-home-*.tar.gz 2&gt;/dev/null | head -1)

if [ -z &quot;$LATEST_BACKUP&quot; ]; then
    echo &quot;❌ No backups found in ${BACKUP_DIR}&quot;
    echo &quot;Please restore from cloud backup or external storage&quot;
    exit 1
fi

echo &quot;📦 Latest backup found: $LATEST_BACKUP&quot;
echo &quot;📅 Backup date: $(basename &quot;$LATEST_BACKUP&quot; .tar.gz | sed &#039;s/jenkins-home-//&#039;)&quot;

# Verify backup integrity
echo &quot;🔍 Verifying backup integrity...&quot;
if tar -tzf &quot;$LATEST_BACKUP&quot; &gt;/dev/null 2&gt;&amp;1; then
    echo &quot;✅ Backup integrity verified&quot;
else
    echo &quot;❌ Backup is corrupted. Cannot proceed with recovery.&quot;
    exit 1
fi

# Create disaster recovery log
DR_LOG=&quot;/var/log/jenkins-disaster-recovery-$(date +%Y%m%d_%H%M%S).log&quot;
exec &gt; &gt;(tee -a &quot;$DR_LOG&quot;)
exec 2&gt;&amp;1

echo &quot;📝 Disaster recovery log: $DR_LOG&quot;

# System preparation
echo &quot;🔧 Preparing system for recovery...&quot;

# Install Jenkins if not present
if ! command -v jenkins &gt;/dev/null 2&gt;&amp;1; then
    echo &quot;📦 Installing Jenkins...&quot;
    # Add Jenkins repository and install (distribution-specific commands)
    if [ -f /etc/debian_version ]; then
        wget -q -O - https://pkg.jenkins.io/debian-stable/jenkins.io.key | apt-key add -
        echo &quot;deb https://pkg.jenkins.io/debian-stable binary/&quot; &gt; /etc/apt/sources.list.d/jenkins.list
        apt-get update
        apt-get install -y openjdk-17-jdk jenkins
    elif [ -f /etc/redhat-release ]; then
        yum install -y java-17-openjdk jenkins
    fi
fi

# Stop Jenkins service
systemctl stop jenkins

# Clear existing Jenkins data
if [ -d &quot;/var/lib/jenkins&quot; ]; then
    echo &quot;🗑️  Removing existing Jenkins data...&quot;
    rm -rf /var/lib/jenkins.disaster-backup-$(date +%s)
    mv /var/lib/jenkins /var/lib/jenkins.disaster-backup-$(date +%s)
fi

# Create new Jenkins directory
mkdir -p /var/lib/jenkins

# Restore from backup
echo &quot;🔄 Restoring Jenkins from backup...&quot;
tar -xzf &quot;$LATEST_BACKUP&quot; -C /var/lib/jenkins

# Set proper permissions
chown -R jenkins:jenkins /var/lib/jenkins
chmod -R 755 /var/lib/jenkins

# Special permissions for sensitive files
if [ -d &quot;/var/lib/jenkins/secrets&quot; ]; then
    chmod 700 /var/lib/jenkins/secrets
    chmod 600 /var/lib/jenkins/secrets/*
fi

if [ -d &quot;/var/lib/jenkins/users&quot; ]; then
    chmod 700 /var/lib/jenkins/users
fi

# Restore system configuration
BACKUP_DATE=$(basename &quot;$LATEST_BACKUP&quot; .tar.gz | sed &#039;s/jenkins-home-//&#039;)
SYSTEM_CONFIG=&quot;${BACKUP_DIR}/config/system-config-${BACKUP_DATE}.tar.gz&quot;

if [ -f &quot;$SYSTEM_CONFIG&quot; ]; then
    echo &quot;🔧 Restoring system configuration...&quot;
    tar -xzf &quot;$SYSTEM_CONFIG&quot; -C / 2&gt;/dev/null
    systemctl daemon-reload
fi

# Restore database if available
DB_BACKUP=&quot;${BACKUP_DIR}/config/jenkinsdb-${BACKUP_DATE}.sql.gz&quot;
if [ -f &quot;$DB_BACKUP&quot; ]; then
    echo &quot;🗄️  Restoring database...&quot;
    # Ensure PostgreSQL is running
    systemctl start postgresql
    
    # Drop and recreate database
    sudo -u postgres psql -c &quot;DROP DATABASE IF EXISTS jenkinsdb;&quot;
    sudo -u postgres psql -c &quot;CREATE DATABASE jenkinsdb;&quot;
    sudo -u postgres psql -c &quot;GRANT ALL PRIVILEGES ON DATABASE jenkinsdb TO jenkinsuser;&quot;
    
    # Restore database
    zcat &quot;$DB_BACKUP&quot; | sudo -u postgres psql jenkinsdb
fi

# Configure firewall
echo &quot;🔥 Configuring firewall...&quot;
if command -v ufw &gt;/dev/null 2&gt;&amp;1; then
    ufw allow 8080/tcp
    ufw allow 50000/tcp
elif command -v firewall-cmd &gt;/dev/null 2&gt;&amp;1; then
    firewall-cmd --permanent --add-port=8080/tcp
    firewall-cmd --permanent --add-port=50000/tcp
    firewall-cmd --reload
fi

# Start Jenkins
echo &quot;▶️  Starting Jenkins...&quot;
systemctl enable jenkins
systemctl start jenkins

# Wait for Jenkins to start
echo &quot;⏳ Waiting for Jenkins to initialize...&quot;
for i in {1..300}; do
    if curl -f http://localhost:8080/login &gt;/dev/null 2&gt;&amp;1; then
        echo &quot;✅ Jenkins is responding&quot;
        break
    fi
    echo &quot;Waiting for Jenkins... (${i}/300)&quot;
    sleep 10
done

# Verify recovery
echo &quot;🔍 Verifying disaster recovery...&quot;

# Check Jenkins status
if systemctl is-active jenkins &gt;/dev/null 2&gt;&amp;1; then
    echo &quot;✅ Jenkins service is running&quot;
else
    echo &quot;❌ Jenkins service failed to start&quot;
    echo &quot;Check logs: journalctl -u jenkins -n 50&quot;
    exit 1
fi

# Check web interface
if curl -f http://localhost:8080/login &gt;/dev/null 2&gt;&amp;1; then
    echo &quot;✅ Jenkins web interface is accessible&quot;
else
    echo &quot;❌ Jenkins web interface is not responding&quot;
    exit 1
fi

# Check jobs restoration
if [ -d &quot;/var/lib/jenkins/jobs&quot; ]; then
    JOB_COUNT=$(ls -1 /var/lib/jenkins/jobs 2&gt;/dev/null | wc -l)
    echo &quot;📋 Jobs recovered: $JOB_COUNT&quot;
else
    echo &quot;⚠️  No jobs directory found&quot;
fi

# Check plugins restoration
if [ -d &quot;/var/lib/jenkins/plugins&quot; ]; then
    PLUGIN_COUNT=$(ls -1 /var/lib/jenkins/plugins 2&gt;/dev/null | wc -l)
    echo &quot;🔌 Plugins recovered: $PLUGIN_COUNT&quot;
else
    echo &quot;⚠️  No plugins directory found&quot;
fi

# Generate recovery report
echo &quot;📊 Generating disaster recovery report...&quot;
cat &gt; &quot;/var/log/jenkins-recovery-report-$(date +%Y%m%d_%H%M%S).txt&quot; &lt;&lt;EOF
Jenkins Disaster Recovery Report
===============================
Recovery Date: $(date)
Server: $(hostname)
Backup Used: $LATEST_BACKUP
Recovery Log: $DR_LOG

Recovery Summary:
- Jenkins Service: $(systemctl is-active jenkins)
- Web Interface: $(curl -s -o /dev/null -w &quot;%{http_code}&quot; http://localhost:8080/login)
- Jobs Recovered: $JOB_COUNT
- Plugins Recovered: $PLUGIN_COUNT
- Database Restored: $([ -f &quot;$DB_BACKUP&quot; ] &amp;&amp; echo &quot;Yes&quot; || echo &quot;No&quot;)

Next Steps:
1. Verify Jenkins configuration via web interface: http://$(hostname):8080
2. Test critical job configurations
3. Update any environment-specific settings
4. Verify agent connections
5. Test integrations (SCM, notifications, etc.)
6. Update DNS/load balancer configurations if needed
7. Notify team of recovery completion

Recovery Status: ✅ COMPLETED
EOF

echo &quot;&quot;
echo &quot;🎉 Jenkins disaster recovery completed successfully!&quot;
echo &quot;📝 Recovery report saved to: /var/log/jenkins-recovery-report-$(date +%Y%m%d_%H%M%S).txt&quot;
echo &quot;&quot;
echo &quot;🔗 Access Jenkins: http://$(hostname):8080&quot;
echo &quot;&quot;
echo &quot;⚠️  Important post-recovery tasks:&quot;
echo &quot;1. Verify all job configurations&quot;
echo &quot;2. Test agent connections&quot;
echo &quot;3. Verify integrations (GitHub, LDAP, etc.)&quot;
echo &quot;4. Update any environment-specific configurations&quot;
echo &quot;5. Perform a backup of the recovered system&quot;</code></pre>
      </div>
    </div>
<h2 id="troubleshooting" class="mobile-header">Troubleshooting</h2>
<h3 id="common-issues" class="mobile-header">Common Issues</h3>
<p class="mobile-paragraph">1. <strong>Jenkins won't start</strong>:</p>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash"># Check service status and logs
sudo systemctl status jenkins
sudo journalctl -u jenkins -f

# Check Java version and JAVA_HOME
java -version
echo $JAVA_HOME

# Check disk space
df -h /var/lib/jenkins

# Check permissions
ls -la /var/lib/jenkins
sudo chown -R jenkins:jenkins /var/lib/jenkins

# Check memory allocation
free -h
ps aux | grep jenkins

# Clear Jenkins cache
sudo systemctl stop jenkins
sudo rm -rf /var/lib/jenkins/war
sudo systemctl start jenkins</code></pre>
      </div>
    </div>
<p class="mobile-paragraph">2. <strong>Memory issues</strong>:</p>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash"># Increase JVM memory
sudo systemctl edit jenkins
# Add:
[Service]
Environment=&quot;JAVA_OPTS=-Xmx8g -Xms4g -XX:+UseG1GC&quot;

sudo systemctl daemon-reload
sudo systemctl restart jenkins

# Monitor memory usage
top -p $(pgrep java)
jstat -gc $(pgrep java) 5s</code></pre>
      </div>
    </div>
<p class="mobile-paragraph">3. <strong>Plugin issues</strong>:</p>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash"># Safe start (disable all plugins)
sudo systemctl stop jenkins
echo &#039;jenkins.install.runSetupWizard=false&#039; &gt; /var/lib/jenkins/jenkins.install.runSetupWizard
sudo systemctl start jenkins

# Clear plugin cache
sudo rm -rf /var/lib/jenkins/plugins/*.bak
sudo rm -rf /var/lib/jenkins/plugins/*.hpi.pinned

# Update plugins via CLI
java -jar jenkins-cli.jar -s http://localhost:8080 -auth admin:password list-plugins | grep -E &quot;\)$&quot; | awk &#039;{print $1}&#039; | xargs java -jar jenkins-cli.jar -s http://localhost:8080 -auth admin:password install-plugin

# Check plugin dependencies
java -jar jenkins-cli.jar -s http://localhost:8080 -auth admin:password list-plugins | grep -v &quot;^$&quot;</code></pre>
      </div>
    </div>
<p class="mobile-paragraph">4. <strong>Build failures</strong>:</p>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash"># Check workspace permissions
sudo chown -R jenkins:jenkins /var/lib/jenkins/workspace

# Clear old builds
java -jar jenkins-cli.jar -s http://localhost:8080 -auth admin:password delete-builds job-name 1-100

# Check agent connectivity
java -jar jenkins-cli.jar -s http://localhost:8080 -auth admin:password list-computers
java -jar jenkins-cli.jar -s http://localhost:8080 -auth admin:password connect-node agent-name

# Monitor build resources
htop
iostat -x 1</code></pre>
      </div>
    </div>
<h3 id="debug-mode" class="mobile-header">Debug Mode</h3>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash"># Enable debug logging for Jenkins
sudo systemctl edit jenkins
# Add:
[Service]
Environment=&quot;JAVA_OPTS=-Xmx4g -Djava.util.logging.config.file=/var/lib/jenkins/logging.properties&quot;

# Create detailed logging configuration
sudo tee /var/lib/jenkins/logging.properties &lt;&lt;EOF
.level = INFO

# Root logger
handlers = java.util.logging.ConsoleHandler, java.util.logging.FileHandler

# Console logging
java.util.logging.ConsoleHandler.level = INFO
java.util.logging.ConsoleHandler.formatter = java.util.logging.SimpleFormatter

# File logging
java.util.logging.FileHandler.pattern = /var/log/jenkins/jenkins-debug.log
java.util.logging.FileHandler.limit = 50000000
java.util.logging.FileHandler.count = 5
java.util.logging.FileHandler.formatter = java.util.logging.SimpleFormatter

# Component-specific logging
hudson.level = FINE
jenkins.level = FINE
hudson.security.level = FINE
hudson.plugins.level = FINE
hudson.model.level = FINE

# Plugin debugging
hudson.plugins.git.level = FINE
org.jenkinsci.plugins.workflow.level = FINE
EOF

sudo systemctl restart jenkins

# View debug logs
sudo tail -f /var/log/jenkins/jenkins-debug.log

# Enable specific plugin debugging via Jenkins CLI
java -jar jenkins-cli.jar -s http://localhost:8080 -auth admin:password groovy = &lt;&lt;EOF
import java.util.logging.Logger
import java.util.logging.Level

// Enable debug logging for specific components
Logger.getLogger(&quot;hudson.security&quot;).setLevel(Level.FINE)
Logger.getLogger(&quot;hudson.plugins.git&quot;).setLevel(Level.FINE)
Logger.getLogger(&quot;org.jenkinsci.plugins.workflow&quot;).setLevel(Level.FINE)

println &quot;Debug logging enabled&quot;
EOF</code></pre>
      </div>
    </div>
<h2 id="maintenance" class="mobile-header">Maintenance</h2>
<h3 id="update-procedures" class="mobile-header">Update Procedures</h3>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash"># RHEL/CentOS/Rocky/AlmaLinux
sudo dnf check-update jenkins
sudo dnf update jenkins

# Debian/Ubuntu
sudo apt update
sudo apt upgrade jenkins

# Arch Linux
yay -Syu jenkins

# Alpine Linux (Docker)
docker pull jenkins/jenkins:lts-jdk17
docker stop jenkins
docker rm jenkins
# Re-run docker run command with new image

# openSUSE
sudo zypper update jenkins

# FreeBSD
pkg update
pkg upgrade jenkins

# macOS
brew upgrade jenkins-lts

# Always backup before updates
sudo /usr/local/bin/jenkins-backup.sh

# Update plugins after Jenkins update
java -jar jenkins-cli.jar -s http://localhost:8080 -auth admin:password list-plugins | grep -E &quot;\)$&quot; | awk &#039;{print $1}&#039; | xargs java -jar jenkins-cli.jar -s http://localhost:8080 -auth admin:password install-plugin

# Restart after updates
sudo systemctl restart jenkins</code></pre>
      </div>
    </div>
<h3 id="maintenance-tasks" class="mobile-header">Maintenance Tasks</h3>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash">#!/bin/bash
# jenkins-maintenance.sh

JENKINS_HOME=&quot;/var/lib/jenkins&quot;
JENKINS_URL=&quot;http://localhost:8080&quot;
ADMIN_CREDENTIALS=&quot;admin:SecureAdminPassword123!&quot;

echo &quot;🔧 Starting Jenkins maintenance tasks...&quot;

# Clean up old builds
echo &quot;🗑️  Cleaning up old builds...&quot;
java -jar ${JENKINS_HOME}/jenkins-cli.jar -s ${JENKINS_URL} -auth ${ADMIN_CREDENTIALS} groovy = &lt;&lt;EOF
import jenkins.model.Jenkins
import hudson.model.*

Jenkins.instance.getAllItems(Job.class).each { job -&gt;
    if (job.getBuilds().size() &gt; 50) {
        def buildsToDelete = job.getBuilds().drop(50)
        println &quot;Deleting \${buildsToDelete.size()} old builds for job: \${job.name}&quot;
        buildsToDelete.each { build -&gt;
            build.delete()
        }
    }
}
EOF

# Clean up workspace
echo &quot;🧹 Cleaning up workspaces...&quot;
java -jar ${JENKINS_HOME}/jenkins-cli.jar -s ${JENKINS_URL} -auth ${ADMIN_CREDENTIALS} groovy = &lt;&lt;EOF
import hudson.model.*
import hudson.FilePath
import jenkins.model.Jenkins

Jenkins.instance.getAllItems(AbstractProject.class).each { job -&gt;
    def workspace = job.getWorkspace()
    if (workspace != null &amp;&amp; workspace.exists()) {
        def size = workspace.length()
        if (size &gt; 1024 * 1024 * 100) { // &gt; 100MB
            println &quot;Workspace for \${job.name} is \${size / (1024*1024)} MB&quot;
            workspace.deleteRecursive()
            println &quot;Cleaned workspace for job: \${job.name}&quot;
        }
    }
}
EOF

# Update plugins
echo &quot;🔌 Checking for plugin updates...&quot;
java -jar ${JENKINS_HOME}/jenkins-cli.jar -s ${JENKINS_URL} -auth ${ADMIN_CREDENTIALS} list-plugins | grep -E &quot;\)$&quot; &gt; /tmp/outdated-plugins.txt

if [ -s /tmp/outdated-plugins.txt ]; then
    echo &quot;📦 Updating outdated plugins:&quot;
    cat /tmp/outdated-plugins.txt
    
    # Update plugins
    awk &#039;{print $1}&#039; /tmp/outdated-plugins.txt | xargs java -jar ${JENKINS_HOME}/jenkins-cli.jar -s ${JENKINS_URL} -auth ${ADMIN_CREDENTIALS} install-plugin
    
    echo &quot;🔄 Restarting Jenkins to apply plugin updates...&quot;
    java -jar ${JENKINS_HOME}/jenkins-cli.jar -s ${JENKINS_URL} -auth ${ADMIN_CREDENTIALS} safe-restart
fi

# Clean up logs
echo &quot;📋 Rotating and cleaning logs...&quot;
find ${JENKINS_HOME}/logs -name &quot;*.log&quot; -mtime +7 -delete
find /var/log/jenkins -name &quot;*.log.*&quot; -mtime +7 -delete

# Disk usage check
echo &quot;💾 Checking disk usage...&quot;
DISK_USAGE=$(df ${JENKINS_HOME} | awk &#039;NR==2 {print $5}&#039; | sed &#039;s/%//&#039;)
if [ ${DISK_USAGE} -gt 80 ]; then
    echo &quot;⚠️  High disk usage: ${DISK_USAGE}%&quot;
    
    # Clean up large files
    find ${JENKINS_HOME}/jobs -name &quot;*.log&quot; -size +100M -mtime +3 -delete
    find ${JENKINS_HOME}/workspace -name &quot;*&quot; -size +500M -mtime +1 -delete
fi

# Backup verification
echo &quot;🔍 Verifying recent backups...&quot;
LATEST_BACKUP=$(ls -t /backup/jenkins/config/jenkins-home-*.tar.gz 2&gt;/dev/null | head -1)
if [ -n &quot;$LATEST_BACKUP&quot; ]; then
    BACKUP_AGE=$(($(date +%s) - $(stat -c %Y &quot;$LATEST_BACKUP&quot;)))
    if [ $BACKUP_AGE -gt 172800 ]; then  # 2 days
        echo &quot;⚠️  Latest backup is older than 2 days: $LATEST_BACKUP&quot;
        echo &quot;💾 Running backup now...&quot;
        /usr/local/bin/jenkins-backup.sh
    else
        echo &quot;✅ Recent backup found: $LATEST_BACKUP&quot;
    fi
else
    echo &quot;❌ No backups found. Running backup...&quot;
    /usr/local/bin/jenkins-backup.sh
fi

# Security check
echo &quot;🔒 Running security checks...&quot;
java -jar ${JENKINS_HOME}/jenkins-cli.jar -s ${JENKINS_URL} -auth ${ADMIN_CREDENTIALS} groovy = &lt;&lt;EOF
import jenkins.security.ApiTokenProperty
import hudson.security.SecurityRealm
import jenkins.model.Jenkins

def instance = Jenkins.getInstance()

// Check for default passwords
def realm = instance.getSecurityRealm()
if (realm instanceof hudson.security.HudsonPrivateSecurityRealm) {
    def users = realm.getAllUsers()
    users.each { user -&gt;
        if (user.getId() == &quot;admin&quot;) {
            println &quot;⚠️  Default admin user found. Consider renaming or removing.&quot;
        }
    }
}

// Check for anonymous access
def authStrategy = instance.getAuthorizationStrategy()
if (authStrategy.hasPermission(org.acegisecurity.Authentication.ANONYMOUS_USER, Jenkins.READ)) {
    println &quot;⚠️  Anonymous read access is enabled&quot;
}

println &quot;Security check completed&quot;
EOF

# Performance check
echo &quot;📊 Checking performance metrics...&quot;
JAVA_PID=$(pgrep java)
if [ -n &quot;$JAVA_PID&quot; ]; then
    MEMORY_USAGE=$(ps -o pid,vsz,rss,comm -p $JAVA_PID | awk &#039;NR==2 {print $3/1024}&#039;)
    CPU_USAGE=$(ps -o pid,pcpu,comm -p $JAVA_PID | awk &#039;NR==2 {print $2}&#039;)
    
    echo &quot;Memory usage: ${MEMORY_USAGE}MB&quot;
    echo &quot;CPU usage: ${CPU_USAGE}%&quot;
    
    if (( $(echo &quot;${MEMORY_USAGE} &gt; 6144&quot; | bc -l) )); then
        echo &quot;⚠️  High memory usage detected&quot;
    fi
fi

echo &quot;✅ Jenkins maintenance completed&quot;

# Generate maintenance report
cat &gt; /var/log/jenkins-maintenance-$(date +%Y%m%d).log &lt;&lt;EOF
Jenkins Maintenance Report - $(date)
===================================

Tasks Completed:
- Old builds cleanup: ✅
- Workspace cleanup: ✅
- Plugin updates: $([ -s /tmp/outdated-plugins.txt ] &amp;&amp; echo &quot;✅ Updated&quot; || echo &quot;✅ Up to date&quot;)
- Log rotation: ✅
- Disk usage check: ✅ (${DISK_USAGE}%)
- Backup verification: ✅
- Security check: ✅
- Performance check: ✅

System Status:
- Memory usage: ${MEMORY_USAGE}MB
- CPU usage: ${CPU_USAGE}%
- Disk usage: ${DISK_USAGE}%

Next maintenance: $(date -d &quot;next week&quot; +%Y-%m-%d)
EOF

echo &quot;📊 Maintenance report: /var/log/jenkins-maintenance-$(date +%Y%m%d).log&quot;</code></pre>
      </div>
    </div>
<h3 id="health-monitoring" class="mobile-header">Health Monitoring</h3>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash"># Create monitoring cron job
echo &quot;0 2 * * * root /usr/local/bin/jenkins-maintenance.sh&quot; | sudo tee -a /etc/crontab
echo &quot;*/15 * * * * root /usr/local/bin/jenkins-health-check.sh&quot; | sudo tee -a /etc/crontab

# Log rotation configuration
sudo tee /etc/logrotate.d/jenkins &lt;&lt;EOF
/var/log/jenkins/*.log {
    daily
    rotate 30
    compress
    delaycompress
    missingok
    notifempty
    create 640 jenkins adm
    postrotate
        systemctl reload jenkins &gt; /dev/null 2&gt;&amp;1 || true
    endscript
}

/var/lib/jenkins/logs/*.log {
    daily
    rotate 7
    compress
    delaycompress
    missingok
    notifempty
    create 640 jenkins jenkins
}
EOF</code></pre>
      </div>
    </div>
<h2 id="integration-examples" class="mobile-header">Integration Examples</h2>
<h3 id="git-integration-with-webhooks" class="mobile-header">Git Integration with Webhooks</h3>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash"># Configure Git webhook for automatic builds
sudo tee /var/lib/jenkins/casc_configs/git-integration.yaml &lt;&lt;EOF
unclassified:
  gitHubPluginConfig:
    hookUrl: &quot;https://jenkins.example.com/github-webhook/&quot;
    
  gitLabConnectionConfig:
    connections:
      - name: &quot;GitLab&quot;
        url: &quot;https://gitlab.example.com&quot;
        apiTokenId: &quot;gitlab-api-token&quot;
        clientBuilderId: &quot;autodetect&quot;
        connectionTimeout: 10
        readTimeout: 10

jobs:
  - script: |
      multibranchPipelineJob(&#039;example-app&#039;) {
        branchSources {
          git {
            id(&#039;github-example&#039;)
            remote(&#039;https://github.com/example/app.git&#039;)
            credentialsId(&#039;github-credentials&#039;)
            includes(&#039;main develop feature/* release/*&#039;)
          }
        }
        
        factory {
          workflowBranchProjectFactory {
            scriptPath(&#039;Jenkinsfile&#039;)
          }
        }
        
        triggers {
          periodicFolderTrigger {
            interval(&#039;1d&#039;)
          }
        }
        
        orphanedItemStrategy {
          discardOldItems {
            daysToKeep(7)
            numToKeep(10)
          }
        }
      }
EOF</code></pre>
      </div>
    </div>
<h3 id="docker-integration" class="mobile-header">Docker Integration</h3>
<div class="mobile-code-block" data-language="groovy">
      <div class="mobile-code-header">
        <span class="mobile-code-language">groovy</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-groovy">// Docker pipeline example
pipeline {
    agent any
    
    environment {
        DOCKER_REGISTRY = credentials(&#039;docker-registry&#039;)
        DOCKER_IMAGE = &quot;${env.JOB_NAME}:${env.BUILD_NUMBER}&quot;
    }
    
    stages {
        stage(&#039;Build Docker Image&#039;) {
            steps {
                script {
                    def image = docker.build(&quot;${DOCKER_REGISTRY}/${DOCKER_IMAGE}&quot;)
                    
                    // Security scan
                    sh &quot;&quot;&quot;
                        docker run --rm -v /var/run/docker.sock:/var/run/docker.sock \
                            aquasec/trivy:latest image \
                            --severity HIGH,CRITICAL \
                            --exit-code 1 \
                            ${DOCKER_REGISTRY}/${DOCKER_IMAGE}
                    &quot;&quot;&quot;
                    
                    // Push to registry
                    docker.withRegistry(&quot;https://${DOCKER_REGISTRY}&quot;, &#039;docker-registry-credentials&#039;) {
                        image.push()
                        image.push(&quot;latest&quot;)
                    }
                }
            }
        }
        
        stage(&#039;Deploy&#039;) {
            steps {
                script {
                    // Deploy to Kubernetes
                    sh &quot;&quot;&quot;
                        kubectl set image deployment/myapp \
                            myapp=${DOCKER_REGISTRY}/${DOCKER_IMAGE} \
                            --namespace=production
                        
                        kubectl rollout status deployment/myapp \
                            --namespace=production --timeout=300s
                    &quot;&quot;&quot;
                }
            }
        }
    }
}</code></pre>
      </div>
    </div>
<h3 id="kubernetes-integration" class="mobile-header">Kubernetes Integration</h3>
<div class="mobile-code-block" data-language="yaml">
      <div class="mobile-code-header">
        <span class="mobile-code-language">yaml</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-yaml"># Jenkins agent in Kubernetes
apiVersion: v1
kind: ServiceAccount
metadata:
  name: jenkins
  namespace: jenkins
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  name: jenkins
rules:
- apiGroups: [&quot;&quot;]
  resources: [&quot;pods&quot;,&quot;pods/exec&quot;]
  verbs: [&quot;create&quot;,&quot;delete&quot;,&quot;get&quot;,&quot;list&quot;,&quot;patch&quot;,&quot;update&quot;,&quot;watch&quot;]
- apiGroups: [&quot;&quot;]
  resources: [&quot;pods/log&quot;]
  verbs: [&quot;get&quot;,&quot;list&quot;,&quot;watch&quot;]
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  name: jenkins
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: jenkins
subjects:
- kind: ServiceAccount
  name: jenkins
  namespace: jenkins
---
# Jenkins Configuration as Code for Kubernetes
jenkins:
  clouds:
    - kubernetes:
        name: &quot;kubernetes&quot;
        serverUrl: &quot;https://kubernetes.default&quot;
        namespace: &quot;jenkins&quot;
        credentialsId: &quot;kubernetes-token&quot;
        jenkinsUrl: &quot;http://jenkins.jenkins.svc.cluster.local:8080&quot;
        containerCapStr: &quot;10&quot;
        templates:
          - name: &quot;jenkins-agent&quot;
            namespace: &quot;jenkins&quot;
            label: &quot;kubernetes&quot;
            containers:
              - name: &quot;jnlp&quot;
                image: &quot;jenkins/inbound-agent:latest&quot;
                workingDir: &quot;/home/jenkins/agent&quot;
                resourceRequestCpu: &quot;100m&quot;
                resourceRequestMemory: &quot;256Mi&quot;
                resourceLimitCpu: &quot;500m&quot;
                resourceLimitMemory: &quot;1Gi&quot;</code></pre>
      </div>
    </div>
<h3 id="ldapactive-directory-integration" class="mobile-header">LDAP/Active Directory Integration</h3>
<div class="mobile-code-block" data-language="yaml">
      <div class="mobile-code-header">
        <span class="mobile-code-language">yaml</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-yaml">jenkins:
  securityRealm:
    ldap:
      configurations:
        - server: &quot;ldaps://ad.example.com:636&quot;
          rootDN: &quot;DC=example,DC=com&quot;
          inhibitInferRootDN: false
          userSearchBase: &quot;OU=Users,OU=Company&quot;
          userSearch: &quot;(&amp;(objectCategory=Person)(objectClass=user)(sAMAccountName={0}))&quot;
          groupSearchBase: &quot;OU=Groups,OU=Company&quot;
          groupSearchFilter: &quot;(&amp;(objectClass=group)(cn={0}))&quot;
          managerDN: &quot;CN=jenkins,OU=Service Accounts,DC=example,DC=com&quot;
          managerPasswordSecret: &quot;ldap-service-password&quot;
          displayNameAttributeName: &quot;displayName&quot;
          mailAddressAttributeName: &quot;mail&quot;
          
  authorizationStrategy:
    roleBased:
      roles:
        global:
          - name: &quot;administrators&quot;
            permissions:
              - &quot;Overall/Administer&quot;
            assignments:
              - &quot;Domain Admins&quot;
              - &quot;Jenkins Admins&quot;
        items:
          - name: &quot;developers&quot;
            pattern: &quot;.*&quot;
            permissions:
              - &quot;Job/Build&quot;
              - &quot;Job/Cancel&quot;
              - &quot;Job/Read&quot;
            assignments:
              - &quot;Development Team&quot;</code></pre>
      </div>
    </div>
<h2 id="additional-resources" class="mobile-header">Additional Resources</h2>
<li class="mobile-list-item"><a href="https://www.jenkins.io/doc/" target="_blank" rel="noopener" class="mobile-link">Official Jenkins Documentation</a></li>
<li class="mobile-list-item"><a href="https://jenkins.io/projects/jcasc/" target="_blank" rel="noopener" class="mobile-link">Jenkins Configuration as Code</a></li>
<li class="mobile-list-item"><a href="https://www.jenkins.io/doc/book/pipeline/" target="_blank" rel="noopener" class="mobile-link">Jenkins Pipeline Documentation</a></li>
<li class="mobile-list-item"><a href="https://www.jenkins.io/doc/book/security/" target="_blank" rel="noopener" class="mobile-link">Jenkins Security Guide</a></li>
<li class="mobile-list-item"><a href="https://plugins.jenkins.io/" target="_blank" rel="noopener" class="mobile-link">Jenkins Plugin Index</a></li>
<li class="mobile-list-item"><a href="https://www.jenkins.io/community/" target="_blank" rel="noopener" class="mobile-link">Jenkins Community</a></li>
<li class="mobile-list-item"><a href="https://www.jenkins.io/doc/book/pipeline/pipeline-best-practices/" target="_blank" rel="noopener" class="mobile-link">Jenkins Best Practices</a></li>
<li class="mobile-list-item"><a href="https://github.com/jenkinsci/jenkins" target="_blank" rel="noopener" class="mobile-link">Jenkins GitHub Repository</a></li>
<p class="mobile-paragraph">---</p>
<p class="mobile-paragraph"><strong>Note:</strong> This guide is part of the <a href="https://howtomgr.github.io" target="_blank" rel="noopener" class="mobile-link">HowToMgr</a> collection. Always refer to official documentation for the most up-to-date information.</p></div></article><section class="jsx-8a7f0cdcf94f52ce related-section"><h2 class="jsx-8a7f0cdcf94f52ce section-title">Related <!-- -->Infrastructure<!-- --> Guides</h2><div class="jsx-8a7f0cdcf94f52ce mobile-grid"><a class="mobile-card" href="/infrastructure/adguard-home/"><div class="jsx-8a7f0cdcf94f52ce mobile-card-header"><h3 class="jsx-8a7f0cdcf94f52ce mobile-card-title">Adguard Home</h3><p class="jsx-8a7f0cdcf94f52ce mobile-card-description">Repo for adguard-home</p></div><div class="jsx-8a7f0cdcf94f52ce mobile-card-meta"><span class="jsx-8a7f0cdcf94f52ce mobile-badge mobile-badge-info">1 min</span></div></a><a class="mobile-card" href="/infrastructure/adminer/"><div class="jsx-8a7f0cdcf94f52ce mobile-card-header"><h3 class="jsx-8a7f0cdcf94f52ce mobile-card-title">Adminer</h3><p class="jsx-8a7f0cdcf94f52ce mobile-card-description">Repo for adminer</p></div><div class="jsx-8a7f0cdcf94f52ce mobile-card-meta"><span class="jsx-8a7f0cdcf94f52ce mobile-badge mobile-badge-info">1 min</span></div></a><a class="mobile-card" href="/infrastructure/ansible/"><div class="jsx-8a7f0cdcf94f52ce mobile-card-header"><h3 class="jsx-8a7f0cdcf94f52ce mobile-card-title">Ansible</h3><p class="jsx-8a7f0cdcf94f52ce mobile-card-description">Repo for ansible</p></div><div class="jsx-8a7f0cdcf94f52ce mobile-card-meta"><span class="jsx-8a7f0cdcf94f52ce mobile-badge mobile-badge-info">31 min</span></div></a></div></section><nav class="jsx-8a7f0cdcf94f52ce guide-navigation"><a class="btn btn-secondary" href="/infrastructure/">← All <!-- -->Infrastructure</a><a class="btn btn-secondary" href="/">All Categories</a></nav></div></main><footer class="jsx-745d6189719dfe72 mobile-footer"><div class="jsx-745d6189719dfe72 container"><div class="jsx-745d6189719dfe72 footer-content"><div class="jsx-745d6189719dfe72 footer-links"><a href="/">Home</a><a href="https://github.com/howtomgr" target="_blank" rel="noopener" class="jsx-745d6189719dfe72">GitHub</a><a href="https://github.com/howtomgr/howtomgr.github.io" target="_blank" rel="noopener" class="jsx-745d6189719dfe72">Source</a></div><div class="jsx-745d6189719dfe72 footer-separator"></div><p class="jsx-745d6189719dfe72 footer-text">© <!-- -->2025<!-- --> HowToMgr Organization. Open source installation guides.</p><p class="jsx-745d6189719dfe72 footer-tech">Built with ❤️ using Next.js + GitHub Pages</p><p class="jsx-745d6189719dfe72 footer-disclaimer"><small class="jsx-745d6189719dfe72">All guides are provided as-is. Please review and test before production use.</small></p></div></div></footer></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"guide":{"name":"jenkins","displayName":"Jenkins","slug":"jenkins","description":"Repo for jenkins","category":"infrastructure","language":null,"stars":0,"forks":0,"topics":[],"githubUrl":"https://github.com/howtomgr/jenkins","updatedAt":"2025-09-14T03:45:21Z","createdAt":"2023-08-28T03:48:15Z","readmeRaw":"# Jenkins Installation Guide\n\nJenkins is a free and open-source automation server for building, testing, and deploying applications. Originally developed by Kohsuke Kawaguchi and now maintained by the Jenkins community, Jenkins is the industry-leading CI/CD platform with extensive plugin ecosystem and enterprise-grade features. It serves as a FOSS alternative to commercial CI/CD solutions like TeamCity, GitLab CI Premium, or Azure DevOps Server, offering unlimited build minutes, unlimited private repositories, and advanced pipeline capabilities without licensing costs, with features like distributed builds, Pipeline as Code, and extensive plugin ecosystem.\n\n## Prerequisites\n\n- **Hardware Requirements**:\n  - CPU: 2 cores minimum (4+ cores recommended for production)\n  - RAM: 2GB minimum (8GB+ recommended for production)\n  - Storage: 50GB minimum (SSD recommended for build performance)\n  - Network: Stable connectivity for agent communication and external integrations\n- **Operating System**: \n  - Linux: Any modern distribution with kernel 3.2+\n  - macOS: 10.13+ (High Sierra or newer)\n  - Windows: Windows Server 2016+ or Windows 10\n  - FreeBSD: 11.0+\n- **Network Requirements**:\n  - Port 8080 (default Jenkins HTTP)\n  - Port 50000 (default Jenkins agent communication)\n  - Additional ports for external integrations (webhooks, etc.)\n- **Dependencies**:\n  - Java 11 or 17 LTS (OpenJDK recommended)\n  - systemd or compatible init system (Linux)\n  - Root or administrative access for installation\n- **System Access**: root or sudo privileges required\n\n## Installation\n\n### RHEL/CentOS/Rocky Linux/AlmaLinux\n\n```bash\n# Install Java 17 LTS\nsudo dnf install -y java-17-openjdk java-17-openjdk-devel\n\n# Add Jenkins repository\ncurl -fsSL https://pkg.jenkins.io/redhat-stable/jenkins.io-2023.key | sudo tee /etc/yum.repos.d/jenkins.io.key\n\nsudo tee /etc/yum.repos.d/jenkins.repo \u003c\u003cEOF\n[jenkins]\nname=Jenkins-stable\nbaseurl=http://pkg.jenkins.io/redhat-stable\ngpgcheck=1\ngpgkey=file:///etc/yum.repos.d/jenkins.io.key\nenabled=1\nEOF\n\n# Install Jenkins\nsudo dnf install -y jenkins\n\n# Enable and start service\nsudo systemctl enable --now jenkins\n\n# Configure firewall\nsudo firewall-cmd --permanent --add-port=8080/tcp\nsudo firewall-cmd --permanent --add-port=50000/tcp\nsudo firewall-cmd --reload\n\n# Get initial admin password\nsudo cat /var/lib/jenkins/secrets/initialAdminPassword\n```\n\n### Debian/Ubuntu\n\n```bash\n# Update system packages\nsudo apt update\n\n# Install Java 17 LTS\nsudo apt install -y openjdk-17-jdk openjdk-17-jre\n\n# Add Jenkins repository\nwget -O /tmp/jenkins-key.asc https://pkg.jenkins.io/debian-stable/jenkins.io-2023.key\nsudo mv /tmp/jenkins-key.asc /etc/apt/trusted.gpg.d/jenkins.asc\n\necho \"deb https://pkg.jenkins.io/debian-stable binary/\" | sudo tee /etc/apt/sources.list.d/jenkins.list\n\n# Update package index\nsudo apt update\n\n# Install Jenkins\nsudo apt install -y jenkins\n\n# Enable and start service\nsudo systemctl enable --now jenkins\n\n# Configure firewall\nsudo ufw allow 8080/tcp\nsudo ufw allow 50000/tcp\n\n# Get initial admin password\nsudo cat /var/lib/jenkins/secrets/initialAdminPassword\n```\n\n### Arch Linux\n\n```bash\n# Install Java 17 LTS\nsudo pacman -S jdk17-openjdk\n\n# Install Jenkins from AUR\nyay -S jenkins\n\n# Alternative: Install manually from AUR\ngit clone https://aur.archlinux.org/jenkins.git\ncd jenkins\nmakepkg -si\n\n# Create jenkins user if not created\nsudo useradd -r -d /var/lib/jenkins -s /sbin/nologin jenkins\n\n# Enable and start service\nsudo systemctl enable --now jenkins\n\n# Get initial admin password\nsudo cat /var/lib/jenkins/secrets/initialAdminPassword\n\n# Configuration location: /etc/jenkins/\n```\n\n### Alpine Linux\n\n```bash\n# Jenkins is not officially packaged for Alpine Linux\n# Use Docker or manual installation\n\n# Method 1: Docker installation\napk add --no-cache docker docker-compose\nrc-update add docker default\nrc-service docker start\n\n# Create Jenkins data directory\nmkdir -p /var/lib/jenkins\n\n# Run Jenkins container\ndocker run -d \\\n  --name jenkins \\\n  --restart unless-stopped \\\n  -p 8080:8080 \\\n  -p 50000:50000 \\\n  -v /var/lib/jenkins:/var/jenkins_home \\\n  -v /var/run/docker.sock:/var/run/docker.sock \\\n  --group-add $(getent group docker | cut -d: -f3) \\\n  jenkins/jenkins:lts-jdk17\n\n# Get initial admin password\ndocker exec jenkins cat /var/jenkins_home/secrets/initialAdminPassword\n\n# Method 2: Manual installation with OpenJDK\napk add --no-cache openjdk17-jre-headless\nwget https://get.jenkins.io/war-stable/latest/jenkins.war -O /opt/jenkins.war\n\n# Create jenkins user and directories\nadduser -D -s /sbin/nologin jenkins\nmkdir -p /var/lib/jenkins /var/log/jenkins\nchown -R jenkins:jenkins /var/lib/jenkins /var/log/jenkins\n\n# Create init script\ntee /etc/init.d/jenkins \u003c\u003c'EOF'\n#!/sbin/openrc-run\nname=\"Jenkins\"\ncommand=\"java\"\ncommand_args=\"-jar /opt/jenkins.war --httpPort=8080 --ajp13Port=-1\"\ncommand_user=\"jenkins\"\npidfile=\"/run/jenkins.pid\"\ncommand_background=\"yes\"\ndepend() {\n    need net\n}\nEOF\n\nchmod +x /etc/init.d/jenkins\nrc-update add jenkins default\nrc-service jenkins start\n```\n\n### openSUSE/SLES\n\n```bash\n# openSUSE Leap/Tumbleweed\nsudo zypper install -y java-17-openjdk java-17-openjdk-devel\n\n# Add Jenkins repository\nsudo zypper addrepo -G https://pkg.jenkins.io/opensuse-stable/ jenkins\nsudo zypper refresh\n\n# Install Jenkins\nsudo zypper install -y jenkins\n\n# SLES 15\nsudo SUSEConnect -p sle-module-development-tools/15.5/x86_64\nsudo zypper install -y java-17-openjdk jenkins\n\n# Enable and start service\nsudo systemctl enable --now jenkins\n\n# Configure firewall\nsudo firewall-cmd --permanent --add-port=8080/tcp\nsudo firewall-cmd --permanent --add-port=50000/tcp\nsudo firewall-cmd --reload\n\n# Get initial admin password\nsudo cat /var/lib/jenkins/secrets/initialAdminPassword\n```\n\n### macOS\n\n```bash\n# Using Homebrew\nbrew install jenkins-lts\n\n# Start Jenkins service\nbrew services start jenkins-lts\n\n# Or run manually\njenkins-lts\n\n# Alternative: Install specific version\nbrew install jenkins-lts@2.414\n\n# Get initial admin password\ncat ~/.jenkins/secrets/initialAdminPassword\n\n# Configuration location: ~/.jenkins/\n# Alternative: /usr/local/var/jenkins_home/ (Intel Macs)\n# Alternative: /opt/homebrew/var/jenkins_home/ (Apple Silicon)\n```\n\n### FreeBSD\n\n```bash\n# Using pkg\npkg install jenkins openjdk17\n\n# Using ports\ncd /usr/ports/devel/jenkins\nmake install clean\n\n# Enable Jenkins\necho 'jenkins_enable=\"YES\"' \u003e\u003e /etc/rc.conf\necho 'jenkins_java_home=\"/usr/local/openjdk17\"' \u003e\u003e /etc/rc.conf\n\n# Create jenkins user and directories\npw useradd jenkins -d /usr/local/jenkins -s /sbin/nologin\nmkdir -p /usr/local/jenkins\nchown jenkins:jenkins /usr/local/jenkins\n\n# Start service\nservice jenkins start\n\n# Get initial admin password\ncat /usr/local/jenkins/secrets/initialAdminPassword\n\n# Configuration location: /usr/local/jenkins/\n```\n\n### Windows\n\n```powershell\n# Method 1: Using Chocolatey\nchoco install jenkins\n\n# Method 2: Using Scoop\nscoop install jenkins\n\n# Method 3: Manual installation\n# Download from https://www.jenkins.io/download/\n# Run jenkins.msi installer\n\n# Method 4: Windows service installation\n# Download jenkins.war\n# Install as Windows service\njava -jar jenkins.war --httpPort=8080 --install\n\n# Start service\nnet start Jenkins\n\n# Get initial admin password\nGet-Content \"C:\\Program Files\\Jenkins\\secrets\\initialAdminPassword\"\n\n# Configuration location: C:\\Program Files\\Jenkins\\\n# Or: %JENKINS_HOME% (if custom location)\n```\n\n## Initial Configuration\n\n### First-Run Setup\n\n1. **Java Environment Setup**:\n```bash\n# Set JAVA_HOME (Linux/macOS)\nexport JAVA_HOME=/usr/lib/jvm/java-17-openjdk\necho 'export JAVA_HOME=/usr/lib/jvm/java-17-openjdk' \u003e\u003e ~/.bashrc\n\n# Verify Java installation\njava -version\n```\n\n2. **Default configuration locations**:\n- RHEL/CentOS/Rocky/AlmaLinux: `/var/lib/jenkins/`, `/etc/sysconfig/jenkins`\n- Debian/Ubuntu: `/var/lib/jenkins/`, `/etc/default/jenkins`\n- Arch Linux: `/var/lib/jenkins/`, `/etc/jenkins/`\n- Alpine Linux: `/var/lib/jenkins/` (Docker) or `/var/lib/jenkins/` (manual)\n- openSUSE/SLES: `/var/lib/jenkins/`, `/etc/sysconfig/jenkins`\n- macOS: `~/.jenkins/` or `/usr/local/var/jenkins_home/`\n- FreeBSD: `/usr/local/jenkins/`\n- Windows: `C:\\Program Files\\Jenkins\\` or `%JENKINS_HOME%`\n\n3. **Essential initial configuration**:\n\n```bash\n# Initial web setup (after accessing http://your-server:8080)\n# 1. Enter admin password from: /var/lib/jenkins/secrets/initialAdminPassword\n# 2. Install suggested plugins or select specific plugins\n# 3. Create first admin user\n# 4. Configure Jenkins URL\n\n# Essential plugins to install:\n# - Pipeline plugins (Pipeline Suite)\n# - Git plugin\n# - Credentials Binding Plugin\n# - Build Timeout Plugin\n# - Timestamper Plugin\n# - Workspace Cleanup Plugin\n# - Blue Ocean (modern UI)\n# - Matrix Authorization Strategy Plugin\n```\n\n### Testing Initial Setup\n\n```bash\n# Check service status\nsudo systemctl status jenkins\n\n# Check web interface\ncurl -I http://localhost:8080\n\n# Test Java version\njava -version\n\n# Check Jenkins process\nps aux | grep jenkins\n\n# Verify Jenkins CLI\nwget http://localhost:8080/jnlpJars/jenkins-cli.jar\njava -jar jenkins-cli.jar -s http://localhost:8080 version\n\n# Check available plugins\njava -jar jenkins-cli.jar -s http://localhost:8080 list-plugins\n```\n\n**WARNING:** Change the default admin password immediately and configure proper authentication!\n\n## Service Management\n\n### systemd (RHEL, Debian, Ubuntu, Arch, openSUSE)\n\n```bash\n# Enable Jenkins to start on boot\nsudo systemctl enable jenkins\n\n# Start Jenkins\nsudo systemctl start jenkins\n\n# Stop Jenkins\nsudo systemctl stop jenkins\n\n# Restart Jenkins\nsudo systemctl restart jenkins\n\n# Graceful restart (wait for running builds)\nsudo systemctl reload jenkins\n\n# Check status\nsudo systemctl status jenkins\n\n# View logs\nsudo journalctl -u jenkins -f\n\n# Edit service configuration\nsudo systemctl edit jenkins\n# Add custom environment variables or JVM options\n```\n\n### OpenRC (Alpine Linux)\n\n```bash\n# Docker-based installation\ndocker start jenkins\ndocker stop jenkins\ndocker restart jenkins\n\n# Check container status\ndocker ps | grep jenkins\n\n# View logs\ndocker logs -f jenkins\n\n# Manual installation\nrc-update add jenkins default\nrc-service jenkins start\nrc-service jenkins stop\nrc-service jenkins restart\nrc-service jenkins status\n```\n\n### rc.d (FreeBSD)\n\n```bash\n# Enable in /etc/rc.conf\necho 'jenkins_enable=\"YES\"' \u003e\u003e /etc/rc.conf\n\n# Start Jenkins\nservice jenkins start\n\n# Stop Jenkins\nservice jenkins stop\n\n# Restart Jenkins\nservice jenkins restart\n\n# Check status\nservice jenkins status\n\n# View logs\ntail -f /var/log/jenkins/jenkins.log\n```\n\n### launchd (macOS)\n\n```bash\n# Using Homebrew services\nbrew services start jenkins-lts\nbrew services stop jenkins-lts\nbrew services restart jenkins-lts\n\n# Check status\nbrew services list | grep jenkins\n\n# Manual control\njenkins-lts --httpPort=8080\n\n# View logs\ntail -f /usr/local/var/log/jenkins/jenkins.log\n```\n\n### Windows Service Manager\n\n```powershell\n# Start Jenkins service\nnet start Jenkins\n\n# Stop Jenkins service\nnet stop Jenkins\n\n# Using PowerShell\nStart-Service Jenkins\nStop-Service Jenkins\nRestart-Service Jenkins\n\n# Check status\nGet-Service Jenkins\n\n# View logs (Windows Event Log)\nGet-EventLog -LogName Application -Source Jenkins\n\n# Or check Jenkins logs\nGet-Content \"C:\\Program Files\\Jenkins\\logs\\jenkins.log\" -Tail 50 -Wait\n```\n\n## Advanced Configuration\n\n### High Availability Configuration\n\n```bash\n# Multi-master setup with shared storage\n# Method 1: Shared filesystem (NFS, GlusterFS)\nsudo mkdir -p /shared/jenkins\nsudo mount -t nfs nfs-server:/jenkins /shared/jenkins\n\n# Update Jenkins home\nsudo systemctl edit jenkins\n# Add:\n[Service]\nEnvironment=\"JENKINS_HOME=/shared/jenkins\"\n\n# Method 2: Database-backed configuration\n# Install CloudBees Jenkins Enterprise plugins for HA\n# Configure external database (PostgreSQL recommended)\n\n# Agent configuration for load distribution\nsudo tee /var/lib/jenkins/casc_configs/agents.yaml \u003c\u003cEOF\njenkins:\n  nodes:\n    - permanent:\n        name: \"linux-agent-1\"\n        remoteFS: \"/var/lib/jenkins\"\n        numExecutors: 4\n        launcher:\n          ssh:\n            host: \"agent1.example.com\"\n            credentialsId: \"ssh-agent-key\"\n    - permanent:\n        name: \"windows-agent-1\"\n        remoteFS: \"C:\\\\Jenkins\"\n        numExecutors: 2\n        launcher:\n          command:\n            command: \"java -jar agent.jar\"\nEOF\n```\n\n### Advanced Security Settings\n\n```bash\n# Configure Jenkins Configuration as Code (JCasC) for security\nsudo tee /var/lib/jenkins/casc_configs/security.yaml \u003c\u003cEOF\njenkins:\n  securityRealm:\n    ldap:\n      configurations:\n        - server: \"ldaps://ldap.example.com:636\"\n          rootDN: \"DC=example,DC=com\"\n          userSearchBase: \"OU=Users\"\n          userSearch: \"(\u0026(objectCategory=Person)(objectClass=user)(sAMAccountName={0}))\"\n          groupSearchBase: \"OU=Groups\"\n          managerDN: \"CN=jenkins,OU=Service Accounts,DC=example,DC=com\"\n          managerPasswordSecret: \"ldap-password\"\n          \n  authorizationStrategy:\n    roleBased:\n      roles:\n        global:\n          - name: \"admin\"\n            permissions:\n              - \"Overall/Administer\"\n            assignments:\n              - \"jenkins-admins\"\n          - name: \"developer\"\n            permissions:\n              - \"Overall/Read\"\n              - \"Job/Build\"\n              - \"Job/Read\"\n            assignments:\n              - \"developers\"\n\nsecurity:\n  globalJobDslSecurityConfiguration:\n    useScriptSecurity: true\n  scriptApproval:\n    approvedSignatures:\n      - \"method java.lang.String trim\"\n      - \"staticMethod java.lang.System getProperty java.lang.String\"\n\nunclassified:\n  location:\n    adminAddress: \"jenkins@example.com\"\n    url: \"https://jenkins.example.com/\"\n    \n  mailer:\n    smtpHost: \"smtp.example.com\"\n    smtpPort: 587\n    charset: \"UTF-8\"\n    authentication:\n      username: \"jenkins@example.com\"\n      password: \"{AQAAABAAAAAQhudQr8JjwNNI9pj8oI3L2gE=}\"\n    useSsl: false\n    useTls: true\nEOF\n```\n\n## Reverse Proxy Setup\n\n### nginx Configuration\n\n```nginx\n# /etc/nginx/sites-available/jenkins\nupstream jenkins {\n    server 127.0.0.1:8080 fail_timeout=0;\n    keepalive 32;\n}\n\nserver {\n    listen 80;\n    server_name jenkins.example.com;\n    return 301 https://$server_name$request_uri;\n}\n\nserver {\n    listen 443 ssl http2;\n    server_name jenkins.example.com;\n\n    ssl_certificate /etc/letsencrypt/live/jenkins.example.com/fullchain.pem;\n    ssl_certificate_key /etc/letsencrypt/live/jenkins.example.com/privkey.pem;\n    \n    # Security headers\n    add_header Strict-Transport-Security \"max-age=31536000; includeSubDomains\" always;\n    add_header X-Content-Type-Options nosniff always;\n    add_header X-Frame-Options DENY always;\n    add_header X-XSS-Protection \"1; mode=block\" always;\n    add_header Referrer-Policy \"strict-origin-when-cross-origin\" always;\n\n    client_max_body_size 100M;\n    \n    location / {\n        proxy_pass http://jenkins;\n        proxy_redirect default;\n        proxy_http_version 1.1;\n        \n        # Required headers for Jenkins\n        proxy_set_header Host $host;\n        proxy_set_header X-Real-IP $remote_addr;\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n        proxy_set_header X-Forwarded-Proto $scheme;\n        proxy_set_header X-Forwarded-Port $server_port;\n        \n        # WebSocket support for Jenkins\n        proxy_set_header Upgrade $http_upgrade;\n        proxy_set_header Connection \"upgrade\";\n        \n        # Timeout settings\n        proxy_connect_timeout 90;\n        proxy_send_timeout 90;\n        proxy_read_timeout 90;\n        \n        proxy_buffering off;\n        proxy_request_buffering off;\n        proxy_max_temp_file_size 0;\n    }\n}\n```\n\n### HAProxy Configuration\n\n```haproxy\n# /etc/haproxy/haproxy.cfg\nfrontend jenkins_frontend\n    bind *:80\n    bind *:443 ssl crt /etc/ssl/certs/jenkins.pem\n    redirect scheme https if !{ ssl_fc }\n    default_backend jenkins_servers\n\nbackend jenkins_servers\n    mode http\n    balance roundrobin\n    option httpchk GET /login\n    http-check expect status 200\n    server jenkins1 127.0.0.1:8080 check inter 30s rise 2 fall 3\n    server jenkins2 127.0.0.1:8081 check inter 30s rise 2 fall 3 backup\n\n    # Headers for Jenkins\n    http-request set-header X-Forwarded-Proto https\n    http-request set-header X-Forwarded-Port %[dst_port]\n    http-response set-header Strict-Transport-Security \"max-age=31536000; includeSubDomains\"\n```\n\n### Apache HTTP Server Configuration\n\n```apache\n# /etc/apache2/sites-available/jenkins.conf\n\u003cVirtualHost *:80\u003e\n    ServerName jenkins.example.com\n    Redirect permanent / https://jenkins.example.com/\n\u003c/VirtualHost\u003e\n\n\u003cVirtualHost *:443\u003e\n    ServerName jenkins.example.com\n    \n    SSLEngine on\n    SSLCertificateFile /etc/letsencrypt/live/jenkins.example.com/fullchain.pem\n    SSLCertificateKeyFile /etc/letsencrypt/live/jenkins.example.com/privkey.pem\n    \n    # Security headers\n    Header always set Strict-Transport-Security \"max-age=31536000; includeSubDomains\"\n    Header always set X-Content-Type-Options nosniff\n    Header always set X-Frame-Options DENY\n    Header always set X-XSS-Protection \"1; mode=block\"\n    \n    ProxyPreserveHost On\n    ProxyRequests Off\n    \n    ProxyPass / http://127.0.0.1:8080/ nocanon\n    ProxyPassReverse / http://127.0.0.1:8080/\n    ProxyPassReverse  /  http://jenkins.example.com/\n    \n    # WebSocket support\n    RewriteEngine on\n    RewriteCond %{HTTP:Upgrade} websocket [NC]\n    RewriteCond %{HTTP:Connection} upgrade [NC]\n    RewriteRule ^/?(.*) \"ws://127.0.0.1:8080/$1\" [P,L]\n    \n    AllowEncodedSlashes NoDecode\n\u003c/VirtualHost\u003e\n```\n\n## Security Configuration\n\n### SSL/TLS Setup\n\n```bash\n# Generate self-signed certificate (development only)\nsudo mkdir -p /etc/jenkins/ssl\nsudo openssl req -x509 -newkey rsa:4096 -keyout /etc/jenkins/ssl/jenkins.key -out /etc/jenkins/ssl/jenkins.crt -days 365 -nodes -subj \"/C=US/ST=State/L=City/O=Organization/CN=jenkins.example.com\"\n\n# Create Java keystore\nsudo keytool -genkey -alias jenkins -keyalg RSA -keystore /etc/jenkins/ssl/jenkins.jks -keysize 2048 -dname \"CN=jenkins.example.com,OU=IT,O=Organization,L=City,ST=State,C=US\" -storepass changeit -keypass changeit\n\n# Configure Jenkins to use HTTPS\nsudo systemctl edit jenkins\n# Add:\n[Service]\nEnvironment=\"JENKINS_OPTS=--httpPort=-1 --httpsPort=8443 --httpsKeyStore=/etc/jenkins/ssl/jenkins.jks --httpsKeyStorePassword=changeit\"\n\nsudo systemctl restart jenkins\n\n# Or use Let's Encrypt with reverse proxy (recommended)\nsudo certbot --nginx -d jenkins.example.com\n```\n\n### Authentication and Authorization\n\n```bash\n# Configure LDAP authentication via JCasC\nsudo tee /var/lib/jenkins/casc_configs/auth.yaml \u003c\u003cEOF\njenkins:\n  securityRealm:\n    ldap:\n      configurations:\n        - server: \"ldaps://ldap.example.com:636\"\n          rootDN: \"DC=example,DC=com\"\n          inhibitInferRootDN: false\n          userSearchBase: \"OU=Users\"\n          userSearch: \"(\u0026(objectCategory=Person)(objectClass=user)(sAMAccountName={0}))\"\n          groupSearchBase: \"OU=Groups\"\n          groupSearchFilter: \"(\u0026(objectClass=group)(cn={0}))\"\n          managerDN: \"CN=jenkins,OU=Service Accounts,DC=example,DC=com\"\n          managerPasswordSecret: \"ldap-password\"\n          displayNameAttributeName: \"displayName\"\n          mailAddressAttributeName: \"mail\"\n\n  authorizationStrategy:\n    roleBased:\n      roles:\n        global:\n          - name: \"jenkins-admins\"\n            permissions:\n              - \"Overall/Administer\"\n            assignments:\n              - \"Domain Admins\"\n              - \"jenkins-admins\"\n          - name: \"developers\"\n            permissions:\n              - \"Overall/Read\"\n              - \"Job/Build\"\n              - \"Job/Cancel\"\n              - \"Job/Read\"\n              - \"Job/Workspace\"\n              - \"Run/Replay\"\n              - \"Run/Update\"\n            assignments:\n              - \"developers\"\n              - \"authenticated\"\n          - name: \"viewers\"\n            permissions:\n              - \"Overall/Read\"\n              - \"Job/Read\"\n            assignments:\n              - \"viewers\"\n              \ncredentials:\n  system:\n    domainCredentials:\n      - credentials:\n          - usernamePassword:\n              scope: GLOBAL\n              id: \"ldap-password\"\n              username: \"CN=jenkins,OU=Service Accounts,DC=example,DC=com\"\n              password: \"{AQAAABAAAAAQSecureEncryptedPassword=}\"\n              description: \"LDAP Service Account\"\n          - basicSSHUserPrivateKey:\n              scope: GLOBAL\n              id: \"ssh-agent-key\"\n              username: \"jenkins\"\n              description: \"SSH key for Jenkins agents\"\n              privateKeySource:\n                directEntry:\n                  privateKey: |\n                    -----BEGIN OPENSSH PRIVATE KEY-----\n                    EncryptedPrivateKeyContentHere\n                    -----END OPENSSH PRIVATE KEY-----\nEOF\n```\n\n### Firewall Rules\n\n```bash\n# UFW (Ubuntu/Debian)\nsudo ufw allow from 192.168.1.0/24 to any port 8080\nsudo ufw allow from 192.168.1.0/24 to any port 50000\nsudo ufw reload\n\n# firewalld (RHEL/CentOS/openSUSE)\nsudo firewall-cmd --permanent --new-zone=jenkins\nsudo firewall-cmd --permanent --zone=jenkins --add-source=192.168.1.0/24\nsudo firewall-cmd --permanent --zone=jenkins --add-port=8080/tcp\nsudo firewall-cmd --permanent --zone=jenkins --add-port=50000/tcp\nsudo firewall-cmd --reload\n\n# iptables\nsudo iptables -A INPUT -s 192.168.1.0/24 -p tcp --dport 8080 -j ACCEPT\nsudo iptables -A INPUT -s 192.168.1.0/24 -p tcp --dport 50000 -j ACCEPT\nsudo iptables-save \u003e /etc/iptables/rules.v4\n\n# pf (FreeBSD)\n# Add to /etc/pf.conf\npass in on $ext_if proto tcp from 192.168.1.0/24 to any port {8080, 50000}\n\n# Windows Firewall\nNew-NetFirewallRule -DisplayName \"Jenkins HTTP\" -Direction Inbound -Protocol TCP -LocalPort 8080 -RemoteAddress 192.168.1.0/24 -Action Allow\nNew-NetFirewallRule -DisplayName \"Jenkins Agent\" -Direction Inbound -Protocol TCP -LocalPort 50000 -RemoteAddress 192.168.1.0/24 -Action Allow\n```\n\n## Database Setup\n\n### External Database Configuration (PostgreSQL)\n\n```bash\n# Install PostgreSQL\nsudo apt install -y postgresql postgresql-contrib\n\n# Create Jenkins database\nsudo -u postgres createdb jenkinsdb\nsudo -u postgres createuser jenkinsuser\nsudo -u postgres psql -c \"ALTER USER jenkinsuser WITH PASSWORD 'SecureJenkinsPassword123!';\"\nsudo -u postgres psql -c \"GRANT ALL PRIVILEGES ON DATABASE jenkinsdb TO jenkinsuser;\"\n\n# Download PostgreSQL driver\nwget https://jdbc.postgresql.org/download/postgresql-42.6.0.jar -O /var/lib/jenkins/postgresql-connector.jar\n\n# Configure Jenkins to use PostgreSQL\nsudo tee -a /etc/default/jenkins \u003c\u003cEOF\n# PostgreSQL database configuration\nJENKINS_JAVA_OPTIONS=\"-Djenkins.install.runSetupWizard=false -Dhudson.model.DirectoryBrowserSupport.CSP=\\\"sandbox allow-scripts; default-src 'self'; script-src 'self' 'unsafe-inline'; style-src 'self' 'unsafe-inline';\\\"\"\nEOF\n\n# Create database configuration\nsudo tee /var/lib/jenkins/database-config.xml \u003c\u003cEOF\n\u003cdatabaseConfiguration\u003e\n  \u003cdatabase class=\"org.jenkinsci.plugins.database.postgresql.PostgreSQLDatabase\"\u003e\n    \u003chostname\u003elocalhost\u003c/hostname\u003e\n    \u003cport\u003e5432\u003c/port\u003e\n    \u003cdatabase\u003ejenkinsdb\u003c/database\u003e\n    \u003cusername\u003ejenkinsuser\u003c/username\u003e\n    \u003cpassword\u003e{AQAAABAAAAAQEncryptedPasswordHere=}\u003c/password\u003e\n    \u003cproperties\u003esslmode=require\u003c/properties\u003e\n  \u003c/database\u003e\n\u003c/databaseConfiguration\u003e\nEOF\n```\n\n### Backup Database Schema\n\n```bash\n# Create database schema backup\nsudo -u postgres pg_dump jenkinsdb \u003e /backup/jenkins/jenkinsdb-schema-$(date +%Y%m%d).sql\n\n# Create Jenkins jobs and configuration backup\nsudo tee /usr/local/bin/jenkins-db-backup.sh \u003c\u003c'EOF'\n#!/bin/bash\nBACKUP_DIR=\"/backup/jenkins/$(date +%Y%m%d_%H%M%S)\"\nmkdir -p \"$BACKUP_DIR\"\n\n# PostgreSQL backup\nsudo -u postgres pg_dump jenkinsdb | gzip \u003e \"$BACKUP_DIR/jenkinsdb.sql.gz\"\n\n# Jenkins configuration backup\ntar -czf \"$BACKUP_DIR/jenkins-config.tar.gz\" \\\n  --exclude=\"/var/lib/jenkins/workspace/*\" \\\n  --exclude=\"/var/lib/jenkins/builds/*/archive\" \\\n  --exclude=\"/var/lib/jenkins/logs/*\" \\\n  /var/lib/jenkins/\n\necho \"Database backup completed: $BACKUP_DIR\"\nEOF\n\nchmod +x /usr/local/bin/jenkins-db-backup.sh\n```\n\n## Performance Optimization\n\n### System Tuning\n\n```bash\n# Jenkins-specific system optimizations\nsudo tee -a /etc/sysctl.conf \u003c\u003cEOF\n# Jenkins optimizations\nvm.swappiness = 1\nfs.file-max = 65535\nnet.core.somaxconn = 32768\nnet.ipv4.tcp_max_syn_backlog = 8192\nnet.ipv4.ip_local_port_range = 1024 65535\nEOF\n\nsudo sysctl -p\n\n# Increase file descriptor limits\nsudo tee -a /etc/security/limits.conf \u003c\u003cEOF\njenkins soft nofile 65535\njenkins hard nofile 65535\njenkins soft nproc 32768\njenkins hard nproc 32768\nEOF\n\n# Optimize Jenkins JVM settings\nsudo systemctl edit jenkins\n# Add:\n[Service]\nEnvironment=\"JAVA_OPTS=-Xmx8g -Xms4g -XX:+UseG1GC -XX:+UseStringDeduplication -XX:+DisableExplicitGC -XX:+UnlockExperimentalVMOptions -XX:+UseCGroupMemoryLimitForHeap\"\nEnvironment=\"JENKINS_OPTS=--sessionTimeout=1440 --sessionEviction=86400\"\n\nsudo systemctl daemon-reload\nsudo systemctl restart jenkins\n```\n\n### Jenkins Performance Configuration\n\n```bash\n# Configure Jenkins for high performance\nsudo tee /var/lib/jenkins/casc_configs/performance.yaml \u003c\u003cEOF\njenkins:\n  systemMessage: \"High-Performance Jenkins Instance\"\n  numExecutors: 0  # Don't run builds on controller\n  mode: EXCLUSIVE\n  quietPeriod: 5\n  scmCheckoutRetryCount: 3\n  \n  # Global pipeline libraries for shared code\n  globalLibraries:\n    libraries:\n      - name: \"shared-pipeline-library\"\n        defaultVersion: \"main\"\n        implicit: true\n        retriever:\n          modernSCM:\n            scm:\n              git:\n                remote: \"https://github.com/example/jenkins-shared-library.git\"\n                credentialsId: \"github-token\"\n\n  # Configure build discarders globally\n  buildDiscarders:\n    configuredBuildDiscarders:\n      - \"logRotator\":\n          artifactDaysToKeepStr: \"30\"\n          artifactNumToKeepStr: \"10\"\n          daysToKeepStr: \"30\"\n          numToKeepStr: \"100\"\n\nunclassified:\n  # Configure global timeout\n  buildTimeout:\n    operations:\n      - timeoutMinutes: 60\n      - failBuild: true\n      - writingDescription: true\n      \n  # Workspace cleanup configuration  \n  wsCleanup:\n    deleteDirs: true\n    cleanupMatrixParent: true\n    skipWhenFailed: false\n    \ntool:\n  # Configure tools for performance\n  git:\n    installations:\n      - name: \"Default\"\n        home: \"/usr/bin/git\"\n        \n  maven:\n    installations:\n      - name: \"Maven 3.9\"\n        properties:\n          - installSource:\n              installers:\n                - maven:\n                    id: \"3.9.6\"\n                    \n  gradle:\n    installations:\n      - name: \"Gradle 8\"\n        properties:\n          - installSource:\n              installers:\n                - gradleInstaller:\n                    id: \"8.4\"\n\n  nodejs:\n    installations:\n      - name: \"NodeJS 18\"\n        properties:\n          - installSource:\n              installers:\n                - nodeJSInstaller:\n                    id: \"18.18.2\"\n                    \n  dockerTool:\n    installations:\n      - name: \"Docker\"\n        properties:\n          - installSource:\n              installers:\n                - dockerInstaller:\n                    version: \"latest\"\nEOF\n\n# Configure agent templates for auto-scaling\nsudo tee /var/lib/jenkins/casc_configs/agents.yaml \u003c\u003cEOF\njenkins:\n  clouds:\n    - kubernetes:\n        name: \"kubernetes\"\n        serverUrl: \"https://kubernetes.default.svc.cluster.local\"\n        namespace: \"jenkins\"\n        credentialsId: \"kubernetes-token\"\n        jenkinsUrl: \"http://jenkins.jenkins.svc.cluster.local:8080\"\n        jenkinsTunnel: \"jenkins-agent.jenkins.svc.cluster.local:50000\"\n        connectTimeout: 300\n        readTimeout: 300\n        containerCapStr: 100\n        templates:\n          - name: \"jenkins-agent\"\n            namespace: \"jenkins\"\n            label: \"kubernetes docker\"\n            nodeUsageMode: EXCLUSIVE\n            containers:\n              - name: \"jnlp\"\n                image: \"jenkins/inbound-agent:latest\"\n                alwaysPullImage: true\n                workingDir: \"/home/jenkins/agent\"\n                command: \"\"\n                args: \"\"\n                resourceRequestCpu: \"500m\"\n                resourceRequestMemory: \"1Gi\"\n                resourceLimitCpu: \"2\"\n                resourceLimitMemory: \"4Gi\"\n            volumes:\n              - hostPathVolume:\n                  hostPath: \"/var/run/docker.sock\"\n                  mountPath: \"/var/run/docker.sock\"\nEOF\n```\n\n### Pipeline Optimization\n\n```groovy\n// Optimized Jenkins Pipeline Template\n// /var/lib/jenkins/pipeline-templates/optimized-pipeline.groovy\n@Library('shared-pipeline-library') _\n\npipeline {\n    agent {\n        label 'docker \u0026\u0026 linux'\n    }\n    \n    options {\n        buildDiscarder(logRotator(numToKeepStr: '50', artifactNumToKeepStr: '10'))\n        timeout(time: 120, unit: 'MINUTES')\n        timestamps()\n        skipDefaultCheckout(true)\n        disableConcurrentBuilds()\n        ansiColor('xterm')\n        parallelsAlwaysFailFast()\n        copyArtifactPermission('*')\n    }\n    \n    environment {\n        DOCKER_REGISTRY = credentials('docker-registry-url')\n        MAVEN_OPTS = '-Xmx2g -XX:+UseG1GC'\n        GRADLE_OPTS = '-Xmx2g -Dorg.gradle.daemon=false'\n        CI = 'true'\n    }\n    \n    stages {\n        stage('Checkout') {\n            steps {\n                checkout scm\n                script {\n                    env.GIT_COMMIT_SHORT = env.GIT_COMMIT.take(8)\n                    env.BUILD_VERSION = \"${env.BUILD_NUMBER}-${env.GIT_COMMIT_SHORT}\"\n                }\n            }\n        }\n        \n        stage('Parallel Analysis') {\n            parallel {\n                stage('Code Quality') {\n                    steps {\n                        script {\n                            // SonarQube analysis\n                            withSonarQubeEnv('SonarQube') {\n                                sh '''\n                                    mvn sonar:sonar \\\n                                        -Dsonar.projectKey=${JOB_NAME} \\\n                                        -Dsonar.projectVersion=${BUILD_VERSION} \\\n                                        -Dsonar.sources=src/main \\\n                                        -Dsonar.tests=src/test \\\n                                        -Dsonar.coverage.jacoco.xmlReportPaths=target/site/jacoco/jacoco.xml\n                                '''\n                            }\n                            \n                            timeout(time: 10, unit: 'MINUTES') {\n                                waitForQualityGate abortPipeline: true\n                            }\n                        }\n                    }\n                }\n                \n                stage('Security Scan') {\n                    steps {\n                        // OWASP Dependency Check\n                        dependencyCheck additionalArguments: '''\n                            --enableRetired\n                            --enableExperimental  \n                            --scan ./\n                            --format JSON\n                            --format HTML\n                            --suppression dependency-check-suppressions.xml\n                        ''', odcInstallation: 'dependency-check-8.4.0'\n                        \n                        dependencyCheckPublisher pattern: '**/dependency-check-report.xml'\n                        \n                        // Secret scanning\n                        sh '''\n                            docker run --rm -v $(pwd):/repo \\\n                                trufflesecurity/trufflehog:latest \\\n                                git file:///repo \\\n                                --json \\\n                                --fail \u003e trufflehog-results.json || true\n                        '''\n                    }\n                }\n                \n                stage('Test') {\n                    steps {\n                        sh '''\n                            # Parallel test execution\n                            mvn clean test \\\n                                -Dmaven.test.failure.ignore=true \\\n                                -Dspring.profiles.active=test \\\n                                -Djunit.jupiter.execution.parallel.enabled=true \\\n                                -Djunit.jupiter.execution.parallel.mode.default=concurrent\n                        '''\n                        \n                        publishTestResults testResultsPattern: 'target/surefire-reports/*.xml'\n                        publishCoverage adapters: [jacocoAdapter('target/site/jacoco/jacoco.xml')], \n                                       sourceFileResolver: sourceFiles('STORE_LAST_BUILD')\n                    }\n                    post {\n                        always {\n                            archiveArtifacts artifacts: 'target/surefire-reports/**', allowEmptyArchive: true\n                        }\n                    }\n                }\n            }\n        }\n        \n        stage('Build \u0026 Package') {\n            steps {\n                sh '''\n                    # Optimized build with parallel processing\n                    mvn clean package \\\n                        -DskipTests \\\n                        -T 2C \\\n                        -Dspring.profiles.active=production \\\n                        -Dmaven.javadoc.skip=true\n                '''\n                \n                // Docker build with BuildKit\n                script {\n                    def image = docker.build(\"${env.DOCKER_REGISTRY}/${env.JOB_NAME}:${env.BUILD_VERSION}\", \n                                           \"--build-arg BUILD_VERSION=${env.BUILD_VERSION} .\")\n                    \n                    // Security scanning with Trivy\n                    sh \"\"\"\n                        docker run --rm -v /var/run/docker.sock:/var/run/docker.sock \\\n                            aquasec/trivy:latest image \\\n                            --format table \\\n                            --severity HIGH,CRITICAL \\\n                            --exit-code 1 \\\n                            ${env.DOCKER_REGISTRY}/${env.JOB_NAME}:${env.BUILD_VERSION}\n                    \"\"\"\n                    \n                    image.push()\n                    image.push(\"latest\")\n                }\n            }\n        }\n        \n        stage('Deploy') {\n            when {\n                anyOf {\n                    branch 'main'\n                    branch 'develop'\n                    branch 'release/*'\n                }\n            }\n            parallel {\n                stage('Staging') {\n                    when { branch 'develop' }\n                    steps {\n                        script {\n                            // Deploy to staging environment\n                            sh '''\n                                kubectl set image deployment/myapp-staging \\\n                                    myapp=${DOCKER_REGISTRY}/${JOB_NAME}:${BUILD_VERSION} \\\n                                    --namespace=staging\n                                \n                                kubectl rollout status deployment/myapp-staging \\\n                                    --namespace=staging --timeout=300s\n                            '''\n                            \n                            // Run smoke tests\n                            sh '''\n                                curl -f http://myapp-staging.example.com/health || exit 1\n                                npm run test:e2e -- --base-url http://myapp-staging.example.com\n                            '''\n                        }\n                    }\n                }\n                \n                stage('Production') {\n                    when { \n                        anyOf {\n                            branch 'main'\n                            branch 'release/*'\n                        }\n                    }\n                    steps {\n                        // Manual approval for production\n                        timeout(time: 60, unit: 'MINUTES') {\n                            input message: 'Deploy to production?', \n                                  ok: 'Deploy',\n                                  submitterParameter: 'APPROVER'\n                        }\n                        \n                        script {\n                            sh '''\n                                # Blue-green deployment\n                                kubectl set image deployment/myapp-production \\\n                                    myapp=${DOCKER_REGISTRY}/${JOB_NAME}:${BUILD_VERSION} \\\n                                    --namespace=production\n                                \n                                kubectl rollout status deployment/myapp-production \\\n                                    --namespace=production --timeout=600s\n                            '''\n                        }\n                    }\n                }\n            }\n        }\n    }\n    \n    post {\n        always {\n            // Cleanup workspace\n            cleanWs()\n            \n            // Archive artifacts\n            archiveArtifacts artifacts: 'target/*.jar,docker-compose.yml', \n                           allowEmptyArchive: true, \n                           fingerprint: true\n                           \n            // Collect build metrics\n            script {\n                def buildDuration = currentBuild.duration / 1000\n                echo \"Build completed in ${buildDuration} seconds\"\n                \n                // Custom metrics collection\n                sh \"\"\"\n                    echo \"build_duration_seconds{job=\\\"${env.JOB_NAME}\\\",build=\\\"${env.BUILD_NUMBER}\\\"} ${buildDuration}\" \u003e build-metrics.txt\n                \"\"\"\n                \n                archiveArtifacts artifacts: 'build-metrics.txt', allowEmptyArchive: true\n            }\n        }\n        \n        success {\n            // Success notifications\n            emailext(\n                subject: \"✅ Build Success: ${env.JOB_NAME} - ${env.BUILD_NUMBER}\",\n                body: \"\"\"Build successful for ${env.JOB_NAME} build ${env.BUILD_NUMBER}\n                         \n                Build URL: ${env.BUILD_URL}\n                Git Commit: ${env.GIT_COMMIT}\n                Duration: ${currentBuild.durationString}\n                Approver: ${env.APPROVER ?: 'Automatic'}\"\"\",\n                to: \"${env.CHANGE_AUTHOR_EMAIL ?: 'jenkins@example.com'}\"\n            )\n            \n            slackSend(\n                channel: '#deployments',\n                color: 'good',\n                message: \"✅ Deployment Success: ${env.JOB_NAME} - ${env.BUILD_NUMBER} by ${env.APPROVER ?: 'System'}\"\n            )\n        }\n        \n        failure {\n            emailext(\n                subject: \"❌ Build Failed: ${env.JOB_NAME} - ${env.BUILD_NUMBER}\",\n                body: \"Build failed for ${env.JOB_NAME} build ${env.BUILD_NUMBER}\\n\\nBuild URL: ${env.BUILD_URL}\",\n                to: \"${env.CHANGE_AUTHOR_EMAIL ?: 'jenkins@example.com'}\"\n            )\n            \n            slackSend(\n                channel: '#ci-cd-alerts',\n                color: 'danger',\n                message: \"❌ Build Failed: ${env.JOB_NAME} - ${env.BUILD_NUMBER} (\u003c${env.BUILD_URL}|View Details\u003e)\"\n            )\n        }\n        \n        unstable {\n            emailext(\n                subject: \"⚠️  Build Unstable: ${env.JOB_NAME} - ${env.BUILD_NUMBER}\",\n                body: \"Build unstable for ${env.JOB_NAME} build ${env.BUILD_NUMBER}\\n\\nBuild URL: ${env.BUILD_URL}\",\n                to: \"${env.CHANGE_AUTHOR_EMAIL ?: 'jenkins@example.com'}\"\n            )\n        }\n    }\n}\n```\n\n## Monitoring\n\n### Built-in Monitoring\n\n```bash\n# Jenkins CLI monitoring commands\njava -jar jenkins-cli.jar -s http://localhost:8080 -auth admin:password version\njava -jar jenkins-cli.jar -s http://localhost:8080 -auth admin:password list-jobs\njava -jar jenkins-cli.jar -s http://localhost:8080 -auth admin:password list-builds job-name\njava -jar jenkins-cli.jar -s http://localhost:8080 -auth admin:password get-build job-name 1\n\n# System information\ncurl -u admin:password http://localhost:8080/systemInfo\n\n# Build queue status\ncurl -u admin:password http://localhost:8080/queue/api/json\n\n# Node status\ncurl -u admin:password http://localhost:8080/computer/api/json\n\n# Plugin information\ncurl -u admin:password http://localhost:8080/pluginManager/api/json?depth=1\n```\n\n### External Monitoring Setup\n\n```bash\n# Install Jenkins Prometheus Plugin and configure metrics\n# Via Jenkins UI: Manage Jenkins \u003e Manage Plugins \u003e Available \u003e Prometheus metrics plugin\n\n# Configure Prometheus to scrape Jenkins metrics\nsudo tee /etc/prometheus/jenkins.yml \u003c\u003cEOF\nglobal:\n  scrape_interval: 15s\n\nscrape_configs:\n  - job_name: 'jenkins'\n    static_configs:\n      - targets: ['localhost:8080']\n    metrics_path: /prometheus/\n    scrape_interval: 30s\n    scrape_timeout: 10s\nEOF\n\n# Install Jenkins Exporter (alternative)\nwget https://github.com/lovoo/jenkins_exporter/releases/download/v1.0.0/jenkins_exporter-1.0.0.linux-amd64.tar.gz\ntar xzf jenkins_exporter-*.tar.gz\nsudo cp jenkins_exporter /usr/local/bin/\n\n# Create systemd service\nsudo tee /etc/systemd/system/jenkins_exporter.service \u003c\u003cEOF\n[Unit]\nDescription=Jenkins Exporter\nAfter=network.target\n\n[Service]\nType=simple\nUser=jenkins\nExecStart=/usr/local/bin/jenkins_exporter \\\n    --jenkins.address=http://localhost:8080 \\\n    --jenkins.username=monitoring \\\n    --jenkins.password=MonitoringPassword123! \\\n    --web.listen-address=:9118\nRestart=always\n\n[Install]\nWantedBy=multi-user.target\nEOF\n\nsudo systemctl enable --now jenkins_exporter\n```\n\n### Health Check Scripts\n\n```bash\n#!/bin/bash\n# jenkins-health-check.sh\n\nJENKINS_URL=\"http://localhost:8080\"\nHEALTH_LOG=\"/var/log/jenkins-health.log\"\n\nlog_message() {\n    echo \"$(date '+%Y-%m-%d %H:%M:%S') - $1\" | tee -a ${HEALTH_LOG}\n}\n\n# Check service status\nif systemctl is-active jenkins \u003e/dev/null 2\u003e\u00261; then\n    log_message \"✅ Jenkins service is running\"\nelse\n    log_message \"❌ Jenkins service is not running\"\n    exit 2\nfi\n\n# Check web interface\nHTTP_STATUS=$(curl -s -o /dev/null -w \"%{http_code}\" ${JENKINS_URL}/login)\nif [ \"${HTTP_STATUS}\" = \"200\" ]; then\n    log_message \"✅ Jenkins web interface responding (HTTP ${HTTP_STATUS})\"\nelse\n    log_message \"❌ Jenkins web interface issues (HTTP ${HTTP_STATUS})\"\n    exit 2\nfi\n\n# Check disk space\nJENKINS_HOME_USAGE=$(df /var/lib/jenkins | awk 'NR==2 {print $5}' | sed 's/%//')\nif [ ${JENKINS_HOME_USAGE} -gt 85 ]; then\n    log_message \"⚠️  High disk usage: ${JENKINS_HOME_USAGE}%\"\n    exit 1\nelse\n    log_message \"✅ Jenkins home disk usage: ${JENKINS_HOME_USAGE}%\"\nfi\n\n# Check memory usage\nJAVA_MEMORY=$(ps -o pid,vsz,rss,comm -C java | grep jenkins | awk '{rss+=$3} END {print rss/1024}')\nif (( $(echo \"${JAVA_MEMORY} \u003e 6144\" | bc -l) )); then\n    log_message \"⚠️  High memory usage: ${JAVA_MEMORY}MB\"\n    exit 1\nelse\n    log_message \"✅ Jenkins memory usage: ${JAVA_MEMORY}MB\"\nfi\n\n# Check running builds (if Jenkins CLI is available)\nif [ -f /var/lib/jenkins/jenkins-cli.jar ]; then\n    RUNNING_BUILDS=$(java -jar /var/lib/jenkins/jenkins-cli.jar -s ${JENKINS_URL} -auth monitoring:MonitoringPassword123! list-builds 2\u003e/dev/null | grep -c \"RUNNING\" || echo \"0\")\n    log_message \"ℹ️  Running builds: ${RUNNING_BUILDS}\"\n    \n    # Check for failed builds in last 24 hours\n    FAILED_BUILDS=$(java -jar /var/lib/jenkins/jenkins-cli.jar -s ${JENKINS_URL} -auth monitoring:MonitoringPassword123! list-builds 2\u003e/dev/null | grep -c \"FAILURE\" || echo \"0\")\n    if [ ${FAILED_BUILDS} -gt 5 ]; then\n        log_message \"⚠️  High number of failed builds: ${FAILED_BUILDS}\"\n        exit 1\n    fi\nfi\n\n# Check plugin health\nPLUGIN_ERRORS=$(curl -s ${JENKINS_URL}/pluginManager/api/json?depth=1 | jq '.plugins[] | select(.hasUpdate==true or .enabled==false) | .shortName' | wc -l)\nif [ ${PLUGIN_ERRORS} -gt 0 ]; then\n    log_message \"⚠️  Plugins need attention: ${PLUGIN_ERRORS}\"\nfi\n\nlog_message \"✅ Jenkins health check completed\"\nexit 0\n```\n\n## Backup and Restore\n\n### Comprehensive Backup Strategy\n\n```bash\n#!/bin/bash\n# jenkins-backup.sh\n\nBACKUP_DIR=\"/backup/jenkins\"\nDATE=$(date +%Y%m%d_%H%M%S)\nJENKINS_HOME=\"/var/lib/jenkins\"\nRETENTION_DAYS=14\n\nmkdir -p ${BACKUP_DIR}/{config,jobs,plugins,secrets,workspace}\n\necho \"Starting Jenkins comprehensive backup...\"\n\n# Function to gracefully shutdown Jenkins\ngraceful_shutdown() {\n    echo \"Putting Jenkins in quiet mode...\"\n    java -jar ${JENKINS_HOME}/jenkins-cli.jar -s http://localhost:8080 -auth admin:SecureAdminPassword123! quiet-down\n    \n    # Wait for running builds to complete (max 20 minutes)\n    for i in {1..120}; do\n        RUNNING_BUILDS=$(java -jar ${JENKINS_HOME}/jenkins-cli.jar -s http://localhost:8080 -auth admin:SecureAdminPassword123! list-builds | grep -c \"RUNNING\" || echo \"0\")\n        if [ \"$RUNNING_BUILDS\" -eq 0 ]; then\n            echo \"All builds completed, stopping Jenkins...\"\n            systemctl stop jenkins\n            break\n        fi\n        echo \"Waiting for $RUNNING_BUILDS running builds to complete... (${i}/120)\"\n        sleep 10\n    done\n    \n    if [ \"$RUNNING_BUILDS\" -gt 0 ]; then\n        echo \"Warning: Stopping Jenkins with $RUNNING_BUILDS builds still running\"\n        systemctl stop jenkins\n    fi\n}\n\n# Function to start Jenkins\nstart_jenkins() {\n    echo \"Starting Jenkins...\"\n    systemctl start jenkins\n    \n    # Wait for Jenkins to be ready\n    for i in {1..60}; do\n        if curl -f http://localhost:8080/login \u003e/dev/null 2\u003e\u00261; then\n            echo \"Jenkins is ready, canceling quiet mode...\"\n            java -jar ${JENKINS_HOME}/jenkins-cli.jar -s http://localhost:8080 -auth admin:SecureAdminPassword123! cancel-quiet-down\n            break\n        fi\n        echo \"Waiting for Jenkins to start... (${i}/60)\"\n        sleep 10\n    done\n}\n\n# Gracefully shutdown Jenkins\ngraceful_shutdown\n\n# Full Jenkins home backup (excluding large/temporary directories)\necho \"Creating full Jenkins home backup...\"\ntar --exclude=\"${JENKINS_HOME}/workspace/*\" \\\n    --exclude=\"${JENKINS_HOME}/builds/*/archive\" \\\n    --exclude=\"${JENKINS_HOME}/logs/*\" \\\n    --exclude=\"${JENKINS_HOME}/.m2/repository\" \\\n    --exclude=\"${JENKINS_HOME}/caches\" \\\n    --exclude=\"${JENKINS_HOME}/war\" \\\n    -czf ${BACKUP_DIR}/config/jenkins-home-${DATE}.tar.gz \\\n    -C ${JENKINS_HOME} .\n\n# Job configurations backup\necho \"Backing up job configurations...\"\nmkdir -p ${BACKUP_DIR}/jobs\nfind ${JENKINS_HOME}/jobs -name \"config.xml\" -exec cp {} ${BACKUP_DIR}/jobs/ \\;\ntar -czf ${BACKUP_DIR}/jobs/job-configs-${DATE}.tar.gz -C ${BACKUP_DIR}/jobs .\nrm ${BACKUP_DIR}/jobs/config.xml 2\u003e/dev/null\n\n# Plugins backup\necho \"Backing up installed plugins...\"\njava -jar ${JENKINS_HOME}/jenkins-cli.jar -s http://localhost:8080 -auth admin:SecureAdminPassword123! list-plugins \u003e ${BACKUP_DIR}/plugins/plugin-list-${DATE}.txt\ncp -r ${JENKINS_HOME}/plugins ${BACKUP_DIR}/plugins/plugins-${DATE}/ 2\u003e/dev/null\n\n# Secrets and credentials backup\necho \"Backing up secrets and credentials...\"\nif [ -d \"${JENKINS_HOME}/secrets\" ]; then\n    tar -czf ${BACKUP_DIR}/secrets/jenkins-secrets-${DATE}.tar.gz -C ${JENKINS_HOME} secrets/\nfi\n\n# System configuration backup\necho \"Backing up system configuration...\"\ntar -czf ${BACKUP_DIR}/config/system-config-${DATE}.tar.gz \\\n    /etc/default/jenkins \\\n    /etc/sysconfig/jenkins \\\n    /etc/systemd/system/jenkins.service.d/ 2\u003e/dev/null\n\n# Database backup (if using external database)\nif [ -f \"${JENKINS_HOME}/database-config.xml\" ]; then\n    echo \"Backing up external database...\"\n    sudo -u postgres pg_dump jenkinsdb | gzip \u003e ${BACKUP_DIR}/config/jenkinsdb-${DATE}.sql.gz\nfi\n\n# Start Jenkins\nstart_jenkins\n\n# Cloud backup (uncomment and configure as needed)\n# aws s3 cp ${BACKUP_DIR}/ s3://jenkins-backups/${DATE}/ --recursive --sse AES256\n# az storage blob upload-batch --source ${BACKUP_DIR} --destination jenkins-backups --destination-path ${DATE}\n# gsutil cp -r ${BACKUP_DIR}/* gs://jenkins-backups/${DATE}/\n\n# Verify backup integrity\necho \"Verifying backup integrity...\"\nLATEST_BACKUP=$(ls -t ${BACKUP_DIR}/config/jenkins-home-*.tar.gz | head -1)\nif tar -tzf \"$LATEST_BACKUP\" \u003e/dev/null 2\u003e\u00261; then\n    echo \"✅ Backup integrity verified\"\n    BACKUP_SIZE=$(du -h \"$LATEST_BACKUP\" | cut -f1)\n    echo \"Backup size: $BACKUP_SIZE\"\nelse\n    echo \"❌ Backup integrity check failed\"\n    exit 1\nfi\n\n# Cleanup old backups\necho \"Cleaning up old backups (keeping last $RETENTION_DAYS days)...\"\nfind ${BACKUP_DIR} -name \"jenkins-*\" -type f -mtime +${RETENTION_DAYS} -delete\nfind ${BACKUP_DIR} -name \"plugin-list-*\" -type f -mtime +${RETENTION_DAYS} -delete\nfind ${BACKUP_DIR} -name \"*-${DATE}*\" -type d -mtime +${RETENTION_DAYS} -exec rm -rf {} \\;\n\n# Generate backup report\necho \"Generating backup report...\"\ncat \u003e ${BACKUP_DIR}/backup-report-${DATE}.txt \u003c\u003cEOF\nJenkins Backup Report - ${DATE}\n================================\n\nBackup Location: ${BACKUP_DIR}\nJenkins Home: ${JENKINS_HOME}\nBackup Date: $(date)\nServer: $(hostname)\n\nFiles backed up:\n- Jenkins Home: $(ls -lh ${BACKUP_DIR}/config/jenkins-home-${DATE}.tar.gz)\n- Job Configs: $(ls -lh ${BACKUP_DIR}/jobs/job-configs-${DATE}.tar.gz)\n- Plugins: $(ls -lh ${BACKUP_DIR}/plugins/plugin-list-${DATE}.txt)\n- Secrets: $(ls -lh ${BACKUP_DIR}/secrets/jenkins-secrets-${DATE}.tar.gz 2\u003e/dev/null || echo \"No secrets backup\")\n- System Config: $(ls -lh ${BACKUP_DIR}/config/system-config-${DATE}.tar.gz 2\u003e/dev/null || echo \"No system config backup\")\n\nTotal Backup Size: $(du -h ${BACKUP_DIR} | tail -1 | cut -f1)\n\nVerification: ✅ Passed\nEOF\n\necho \"✅ Jenkins backup completed: ${DATE}\"\necho \"📊 Backup report: ${BACKUP_DIR}/backup-report-${DATE}.txt\"\n```\n\n### Restore Procedures\n\n```bash\n#!/bin/bash\n# jenkins-restore.sh\n\nBACKUP_FILE=\"${1}\"\nRESTORE_TYPE=\"${2:-full}\"  # full, config-only, jobs-only\n\nusage() {\n    echo \"Usage: $0 \u003cbackup_file\u003e [restore_type]\"\n    echo \"Restore types: full (default), config-only, jobs-only\"\n    echo \"\"\n    echo \"Available backups:\"\n    ls -la /backup/jenkins/config/jenkins-home-*.tar.gz | head -10\n    exit 1\n}\n\nif [ -z \"$BACKUP_FILE\" ]; then\n    usage\nfi\n\nif [ ! -f \"$BACKUP_FILE\" ]; then\n    echo \"❌ Backup file not found: $BACKUP_FILE\"\n    exit 1\nfi\n\necho \"🔄 Starting Jenkins restore from: $BACKUP_FILE\"\necho \"Restore type: $RESTORE_TYPE\"\n\n# Pre-restore backup of current state\nif [ -d \"/var/lib/jenkins\" ]; then\n    echo \"📦 Creating backup of current installation...\"\n    CURRENT_BACKUP=\"/backup/jenkins/pre-restore-$(date +%s)\"\n    mkdir -p \"$CURRENT_BACKUP\"\n    mv /var/lib/jenkins \"$CURRENT_BACKUP/jenkins-$(date +%Y%m%d_%H%M%S)\"\n    echo \"Current installation backed up to: $CURRENT_BACKUP\"\nfi\n\n# Stop Jenkins\necho \"⏹️  Stopping Jenkins...\"\nsystemctl stop jenkins\n\ncase \"$RESTORE_TYPE\" in\n    \"full\")\n        echo \"🔄 Performing full restore...\"\n        \n        # Create new Jenkins directory\n        mkdir -p /var/lib/jenkins\n        \n        # Restore from backup\n        echo \"📂 Extracting backup archive...\"\n        tar -xzf \"$BACKUP_FILE\" -C /var/lib/jenkins\n        \n        # Set proper ownership\n        chown -R jenkins:jenkins /var/lib/jenkins\n        chmod -R 755 /var/lib/jenkins\n        \n        # Special permissions for secrets\n        if [ -d \"/var/lib/jenkins/secrets\" ]; then\n            chmod 700 /var/lib/jenkins/secrets\n            chmod 600 /var/lib/jenkins/secrets/*\n        fi\n        ;;\n        \n    \"config-only\")\n        echo \"🔄 Performing configuration-only restore...\"\n        \n        # Create minimal Jenkins directory\n        mkdir -p /var/lib/jenkins\n        \n        # Extract only configuration files\n        tar -xzf \"$BACKUP_FILE\" -C /var/lib/jenkins \\\n            --include=\"*/config.xml\" \\\n            --include=\"*/secrets/*\" \\\n            --include=\"*/users/*\" \\\n            --include=\"*/plugins/*\" \\\n            --exclude=\"*/workspace/*\" \\\n            --exclude=\"*/builds/*\"\n            \n        chown -R jenkins:jenkins /var/lib/jenkins\n        ;;\n        \n    \"jobs-only\")\n        echo \"🔄 Performing jobs-only restore...\"\n        \n        if [ ! -d \"/var/lib/jenkins\" ]; then\n            echo \"❌ Jenkins directory not found. Cannot restore jobs only.\"\n            exit 1\n        fi\n        \n        # Backup current jobs\n        if [ -d \"/var/lib/jenkins/jobs\" ]; then\n            mv /var/lib/jenkins/jobs \"/var/lib/jenkins/jobs.backup.$(date +%s)\"\n        fi\n        \n        # Extract only jobs\n        tar -xzf \"$BACKUP_FILE\" -C /var/lib/jenkins jobs/\n        chown -R jenkins:jenkins /var/lib/jenkins/jobs\n        ;;\n        \n    *)\n        echo \"❌ Unknown restore type: $RESTORE_TYPE\"\n        usage\n        ;;\nesac\n\n# Restore system configuration if available\nBACKUP_DIR=$(dirname \"$BACKUP_FILE\")\nBACKUP_DATE=$(basename \"$BACKUP_FILE\" .tar.gz | sed 's/jenkins-home-//')\nSYSTEM_CONFIG=\"${BACKUP_DIR}/../config/system-config-${BACKUP_DATE}.tar.gz\"\n\nif [ -f \"$SYSTEM_CONFIG\" ]; then\n    echo \"🔧 Restoring system configuration...\"\n    tar -xzf \"$SYSTEM_CONFIG\" -C / 2\u003e/dev/null\n    systemctl daemon-reload\nfi\n\n# Restore database if available\nDB_BACKUP=\"${BACKUP_DIR}/jenkinsdb-${BACKUP_DATE}.sql.gz\"\nif [ -f \"$DB_BACKUP\" ]; then\n    echo \"🗄️  Restoring database...\"\n    zcat \"$DB_BACKUP\" | sudo -u postgres psql jenkinsdb\nfi\n\n# Start Jenkins\necho \"▶️  Starting Jenkins...\"\nsystemctl start jenkins\n\n# Wait for Jenkins to start and verify\necho \"⏳ Waiting for Jenkins to start...\"\nfor i in {1..120}; do\n    if curl -f http://localhost:8080/login \u003e/dev/null 2\u003e\u00261; then\n        echo \"✅ Jenkins started successfully\"\n        break\n    fi\n    echo \"Waiting for Jenkins to start... (${i}/120)\"\n    sleep 10\ndone\n\n# Verify restoration\necho \"🔍 Verifying restoration...\"\nif curl -f http://localhost:8080/login \u003e/dev/null 2\u003e\u00261; then\n    echo \"✅ Jenkins is responding\"\n    \n    # Check if jobs were restored\n    if [ -d \"/var/lib/jenkins/jobs\" ]; then\n        JOB_COUNT=$(ls -1 /var/lib/jenkins/jobs | wc -l)\n        echo \"📋 Jobs restored: $JOB_COUNT\"\n    fi\n    \n    # Check if plugins were restored\n    if [ -d \"/var/lib/jenkins/plugins\" ]; then\n        PLUGIN_COUNT=$(ls -1 /var/lib/jenkins/plugins | wc -l)\n        echo \"🔌 Plugins restored: $PLUGIN_COUNT\"\n    fi\n    \n    echo \"✅ Jenkins restoration completed successfully\"\n    echo \"\"\n    echo \"📝 Next steps:\"\n    echo \"1. Verify Jenkins configuration via web interface\"\n    echo \"2. Check plugin compatibility and update if needed\"\n    echo \"3. Verify job configurations and test builds\"\n    echo \"4. Update any environment-specific settings\"\n    \nelse\n    echo \"❌ Jenkins restoration failed - service not responding\"\n    echo \"Check logs: journalctl -u jenkins -n 50\"\n    exit 1\nfi\n```\n\n### Disaster Recovery\n\n```bash\n#!/bin/bash\n# jenkins-disaster-recovery.sh\n\necho \"🚨 Jenkins Disaster Recovery Procedure\"\necho \"======================================\"\n\n# Check if Jenkins is running\nif systemctl is-active jenkins \u003e/dev/null 2\u003e\u00261; then\n    echo \"⚠️  Jenkins is running. This procedure should be run on a failed system.\"\n    read -p \"Continue anyway? (y/N): \" -n 1 -r\n    echo\n    if [[ ! $REPLY =~ ^[Yy]$ ]]; then\n        exit 1\n    fi\nfi\n\n# Find latest backup\nBACKUP_DIR=\"/backup/jenkins\"\nLATEST_BACKUP=$(ls -t ${BACKUP_DIR}/config/jenkins-home-*.tar.gz 2\u003e/dev/null | head -1)\n\nif [ -z \"$LATEST_BACKUP\" ]; then\n    echo \"❌ No backups found in ${BACKUP_DIR}\"\n    echo \"Please restore from cloud backup or external storage\"\n    exit 1\nfi\n\necho \"📦 Latest backup found: $LATEST_BACKUP\"\necho \"📅 Backup date: $(basename \"$LATEST_BACKUP\" .tar.gz | sed 's/jenkins-home-//')\"\n\n# Verify backup integrity\necho \"🔍 Verifying backup integrity...\"\nif tar -tzf \"$LATEST_BACKUP\" \u003e/dev/null 2\u003e\u00261; then\n    echo \"✅ Backup integrity verified\"\nelse\n    echo \"❌ Backup is corrupted. Cannot proceed with recovery.\"\n    exit 1\nfi\n\n# Create disaster recovery log\nDR_LOG=\"/var/log/jenkins-disaster-recovery-$(date +%Y%m%d_%H%M%S).log\"\nexec \u003e \u003e(tee -a \"$DR_LOG\")\nexec 2\u003e\u00261\n\necho \"📝 Disaster recovery log: $DR_LOG\"\n\n# System preparation\necho \"🔧 Preparing system for recovery...\"\n\n# Install Jenkins if not present\nif ! command -v jenkins \u003e/dev/null 2\u003e\u00261; then\n    echo \"📦 Installing Jenkins...\"\n    # Add Jenkins repository and install (distribution-specific commands)\n    if [ -f /etc/debian_version ]; then\n        wget -q -O - https://pkg.jenkins.io/debian-stable/jenkins.io.key | apt-key add -\n        echo \"deb https://pkg.jenkins.io/debian-stable binary/\" \u003e /etc/apt/sources.list.d/jenkins.list\n        apt-get update\n        apt-get install -y openjdk-17-jdk jenkins\n    elif [ -f /etc/redhat-release ]; then\n        yum install -y java-17-openjdk jenkins\n    fi\nfi\n\n# Stop Jenkins service\nsystemctl stop jenkins\n\n# Clear existing Jenkins data\nif [ -d \"/var/lib/jenkins\" ]; then\n    echo \"🗑️  Removing existing Jenkins data...\"\n    rm -rf /var/lib/jenkins.disaster-backup-$(date +%s)\n    mv /var/lib/jenkins /var/lib/jenkins.disaster-backup-$(date +%s)\nfi\n\n# Create new Jenkins directory\nmkdir -p /var/lib/jenkins\n\n# Restore from backup\necho \"🔄 Restoring Jenkins from backup...\"\ntar -xzf \"$LATEST_BACKUP\" -C /var/lib/jenkins\n\n# Set proper permissions\nchown -R jenkins:jenkins /var/lib/jenkins\nchmod -R 755 /var/lib/jenkins\n\n# Special permissions for sensitive files\nif [ -d \"/var/lib/jenkins/secrets\" ]; then\n    chmod 700 /var/lib/jenkins/secrets\n    chmod 600 /var/lib/jenkins/secrets/*\nfi\n\nif [ -d \"/var/lib/jenkins/users\" ]; then\n    chmod 700 /var/lib/jenkins/users\nfi\n\n# Restore system configuration\nBACKUP_DATE=$(basename \"$LATEST_BACKUP\" .tar.gz | sed 's/jenkins-home-//')\nSYSTEM_CONFIG=\"${BACKUP_DIR}/config/system-config-${BACKUP_DATE}.tar.gz\"\n\nif [ -f \"$SYSTEM_CONFIG\" ]; then\n    echo \"🔧 Restoring system configuration...\"\n    tar -xzf \"$SYSTEM_CONFIG\" -C / 2\u003e/dev/null\n    systemctl daemon-reload\nfi\n\n# Restore database if available\nDB_BACKUP=\"${BACKUP_DIR}/config/jenkinsdb-${BACKUP_DATE}.sql.gz\"\nif [ -f \"$DB_BACKUP\" ]; then\n    echo \"🗄️  Restoring database...\"\n    # Ensure PostgreSQL is running\n    systemctl start postgresql\n    \n    # Drop and recreate database\n    sudo -u postgres psql -c \"DROP DATABASE IF EXISTS jenkinsdb;\"\n    sudo -u postgres psql -c \"CREATE DATABASE jenkinsdb;\"\n    sudo -u postgres psql -c \"GRANT ALL PRIVILEGES ON DATABASE jenkinsdb TO jenkinsuser;\"\n    \n    # Restore database\n    zcat \"$DB_BACKUP\" | sudo -u postgres psql jenkinsdb\nfi\n\n# Configure firewall\necho \"🔥 Configuring firewall...\"\nif command -v ufw \u003e/dev/null 2\u003e\u00261; then\n    ufw allow 8080/tcp\n    ufw allow 50000/tcp\nelif command -v firewall-cmd \u003e/dev/null 2\u003e\u00261; then\n    firewall-cmd --permanent --add-port=8080/tcp\n    firewall-cmd --permanent --add-port=50000/tcp\n    firewall-cmd --reload\nfi\n\n# Start Jenkins\necho \"▶️  Starting Jenkins...\"\nsystemctl enable jenkins\nsystemctl start jenkins\n\n# Wait for Jenkins to start\necho \"⏳ Waiting for Jenkins to initialize...\"\nfor i in {1..300}; do\n    if curl -f http://localhost:8080/login \u003e/dev/null 2\u003e\u00261; then\n        echo \"✅ Jenkins is responding\"\n        break\n    fi\n    echo \"Waiting for Jenkins... (${i}/300)\"\n    sleep 10\ndone\n\n# Verify recovery\necho \"🔍 Verifying disaster recovery...\"\n\n# Check Jenkins status\nif systemctl is-active jenkins \u003e/dev/null 2\u003e\u00261; then\n    echo \"✅ Jenkins service is running\"\nelse\n    echo \"❌ Jenkins service failed to start\"\n    echo \"Check logs: journalctl -u jenkins -n 50\"\n    exit 1\nfi\n\n# Check web interface\nif curl -f http://localhost:8080/login \u003e/dev/null 2\u003e\u00261; then\n    echo \"✅ Jenkins web interface is accessible\"\nelse\n    echo \"❌ Jenkins web interface is not responding\"\n    exit 1\nfi\n\n# Check jobs restoration\nif [ -d \"/var/lib/jenkins/jobs\" ]; then\n    JOB_COUNT=$(ls -1 /var/lib/jenkins/jobs 2\u003e/dev/null | wc -l)\n    echo \"📋 Jobs recovered: $JOB_COUNT\"\nelse\n    echo \"⚠️  No jobs directory found\"\nfi\n\n# Check plugins restoration\nif [ -d \"/var/lib/jenkins/plugins\" ]; then\n    PLUGIN_COUNT=$(ls -1 /var/lib/jenkins/plugins 2\u003e/dev/null | wc -l)\n    echo \"🔌 Plugins recovered: $PLUGIN_COUNT\"\nelse\n    echo \"⚠️  No plugins directory found\"\nfi\n\n# Generate recovery report\necho \"📊 Generating disaster recovery report...\"\ncat \u003e \"/var/log/jenkins-recovery-report-$(date +%Y%m%d_%H%M%S).txt\" \u003c\u003cEOF\nJenkins Disaster Recovery Report\n===============================\nRecovery Date: $(date)\nServer: $(hostname)\nBackup Used: $LATEST_BACKUP\nRecovery Log: $DR_LOG\n\nRecovery Summary:\n- Jenkins Service: $(systemctl is-active jenkins)\n- Web Interface: $(curl -s -o /dev/null -w \"%{http_code}\" http://localhost:8080/login)\n- Jobs Recovered: $JOB_COUNT\n- Plugins Recovered: $PLUGIN_COUNT\n- Database Restored: $([ -f \"$DB_BACKUP\" ] \u0026\u0026 echo \"Yes\" || echo \"No\")\n\nNext Steps:\n1. Verify Jenkins configuration via web interface: http://$(hostname):8080\n2. Test critical job configurations\n3. Update any environment-specific settings\n4. Verify agent connections\n5. Test integrations (SCM, notifications, etc.)\n6. Update DNS/load balancer configurations if needed\n7. Notify team of recovery completion\n\nRecovery Status: ✅ COMPLETED\nEOF\n\necho \"\"\necho \"🎉 Jenkins disaster recovery completed successfully!\"\necho \"📝 Recovery report saved to: /var/log/jenkins-recovery-report-$(date +%Y%m%d_%H%M%S).txt\"\necho \"\"\necho \"🔗 Access Jenkins: http://$(hostname):8080\"\necho \"\"\necho \"⚠️  Important post-recovery tasks:\"\necho \"1. Verify all job configurations\"\necho \"2. Test agent connections\"\necho \"3. Verify integrations (GitHub, LDAP, etc.)\"\necho \"4. Update any environment-specific configurations\"\necho \"5. Perform a backup of the recovered system\"\n```\n\n## Troubleshooting\n\n### Common Issues\n\n1. **Jenkins won't start**:\n```bash\n# Check service status and logs\nsudo systemctl status jenkins\nsudo journalctl -u jenkins -f\n\n# Check Java version and JAVA_HOME\njava -version\necho $JAVA_HOME\n\n# Check disk space\ndf -h /var/lib/jenkins\n\n# Check permissions\nls -la /var/lib/jenkins\nsudo chown -R jenkins:jenkins /var/lib/jenkins\n\n# Check memory allocation\nfree -h\nps aux | grep jenkins\n\n# Clear Jenkins cache\nsudo systemctl stop jenkins\nsudo rm -rf /var/lib/jenkins/war\nsudo systemctl start jenkins\n```\n\n2. **Memory issues**:\n```bash\n# Increase JVM memory\nsudo systemctl edit jenkins\n# Add:\n[Service]\nEnvironment=\"JAVA_OPTS=-Xmx8g -Xms4g -XX:+UseG1GC\"\n\nsudo systemctl daemon-reload\nsudo systemctl restart jenkins\n\n# Monitor memory usage\ntop -p $(pgrep java)\njstat -gc $(pgrep java) 5s\n```\n\n3. **Plugin issues**:\n```bash\n# Safe start (disable all plugins)\nsudo systemctl stop jenkins\necho 'jenkins.install.runSetupWizard=false' \u003e /var/lib/jenkins/jenkins.install.runSetupWizard\nsudo systemctl start jenkins\n\n# Clear plugin cache\nsudo rm -rf /var/lib/jenkins/plugins/*.bak\nsudo rm -rf /var/lib/jenkins/plugins/*.hpi.pinned\n\n# Update plugins via CLI\njava -jar jenkins-cli.jar -s http://localhost:8080 -auth admin:password list-plugins | grep -E \"\\)$\" | awk '{print $1}' | xargs java -jar jenkins-cli.jar -s http://localhost:8080 -auth admin:password install-plugin\n\n# Check plugin dependencies\njava -jar jenkins-cli.jar -s http://localhost:8080 -auth admin:password list-plugins | grep -v \"^$\"\n```\n\n4. **Build failures**:\n```bash\n# Check workspace permissions\nsudo chown -R jenkins:jenkins /var/lib/jenkins/workspace\n\n# Clear old builds\njava -jar jenkins-cli.jar -s http://localhost:8080 -auth admin:password delete-builds job-name 1-100\n\n# Check agent connectivity\njava -jar jenkins-cli.jar -s http://localhost:8080 -auth admin:password list-computers\njava -jar jenkins-cli.jar -s http://localhost:8080 -auth admin:password connect-node agent-name\n\n# Monitor build resources\nhtop\niostat -x 1\n```\n\n### Debug Mode\n\n```bash\n# Enable debug logging for Jenkins\nsudo systemctl edit jenkins\n# Add:\n[Service]\nEnvironment=\"JAVA_OPTS=-Xmx4g -Djava.util.logging.config.file=/var/lib/jenkins/logging.properties\"\n\n# Create detailed logging configuration\nsudo tee /var/lib/jenkins/logging.properties \u003c\u003cEOF\n.level = INFO\n\n# Root logger\nhandlers = java.util.logging.ConsoleHandler, java.util.logging.FileHandler\n\n# Console logging\njava.util.logging.ConsoleHandler.level = INFO\njava.util.logging.ConsoleHandler.formatter = java.util.logging.SimpleFormatter\n\n# File logging\njava.util.logging.FileHandler.pattern = /var/log/jenkins/jenkins-debug.log\njava.util.logging.FileHandler.limit = 50000000\njava.util.logging.FileHandler.count = 5\njava.util.logging.FileHandler.formatter = java.util.logging.SimpleFormatter\n\n# Component-specific logging\nhudson.level = FINE\njenkins.level = FINE\nhudson.security.level = FINE\nhudson.plugins.level = FINE\nhudson.model.level = FINE\n\n# Plugin debugging\nhudson.plugins.git.level = FINE\norg.jenkinsci.plugins.workflow.level = FINE\nEOF\n\nsudo systemctl restart jenkins\n\n# View debug logs\nsudo tail -f /var/log/jenkins/jenkins-debug.log\n\n# Enable specific plugin debugging via Jenkins CLI\njava -jar jenkins-cli.jar -s http://localhost:8080 -auth admin:password groovy = \u003c\u003cEOF\nimport java.util.logging.Logger\nimport java.util.logging.Level\n\n// Enable debug logging for specific components\nLogger.getLogger(\"hudson.security\").setLevel(Level.FINE)\nLogger.getLogger(\"hudson.plugins.git\").setLevel(Level.FINE)\nLogger.getLogger(\"org.jenkinsci.plugins.workflow\").setLevel(Level.FINE)\n\nprintln \"Debug logging enabled\"\nEOF\n```\n\n## Maintenance\n\n### Update Procedures\n\n```bash\n# RHEL/CentOS/Rocky/AlmaLinux\nsudo dnf check-update jenkins\nsudo dnf update jenkins\n\n# Debian/Ubuntu\nsudo apt update\nsudo apt upgrade jenkins\n\n# Arch Linux\nyay -Syu jenkins\n\n# Alpine Linux (Docker)\ndocker pull jenkins/jenkins:lts-jdk17\ndocker stop jenkins\ndocker rm jenkins\n# Re-run docker run command with new image\n\n# openSUSE\nsudo zypper update jenkins\n\n# FreeBSD\npkg update\npkg upgrade jenkins\n\n# macOS\nbrew upgrade jenkins-lts\n\n# Always backup before updates\nsudo /usr/local/bin/jenkins-backup.sh\n\n# Update plugins after Jenkins update\njava -jar jenkins-cli.jar -s http://localhost:8080 -auth admin:password list-plugins | grep -E \"\\)$\" | awk '{print $1}' | xargs java -jar jenkins-cli.jar -s http://localhost:8080 -auth admin:password install-plugin\n\n# Restart after updates\nsudo systemctl restart jenkins\n```\n\n### Maintenance Tasks\n\n```bash\n#!/bin/bash\n# jenkins-maintenance.sh\n\nJENKINS_HOME=\"/var/lib/jenkins\"\nJENKINS_URL=\"http://localhost:8080\"\nADMIN_CREDENTIALS=\"admin:SecureAdminPassword123!\"\n\necho \"🔧 Starting Jenkins maintenance tasks...\"\n\n# Clean up old builds\necho \"🗑️  Cleaning up old builds...\"\njava -jar ${JENKINS_HOME}/jenkins-cli.jar -s ${JENKINS_URL} -auth ${ADMIN_CREDENTIALS} groovy = \u003c\u003cEOF\nimport jenkins.model.Jenkins\nimport hudson.model.*\n\nJenkins.instance.getAllItems(Job.class).each { job -\u003e\n    if (job.getBuilds().size() \u003e 50) {\n        def buildsToDelete = job.getBuilds().drop(50)\n        println \"Deleting \\${buildsToDelete.size()} old builds for job: \\${job.name}\"\n        buildsToDelete.each { build -\u003e\n            build.delete()\n        }\n    }\n}\nEOF\n\n# Clean up workspace\necho \"🧹 Cleaning up workspaces...\"\njava -jar ${JENKINS_HOME}/jenkins-cli.jar -s ${JENKINS_URL} -auth ${ADMIN_CREDENTIALS} groovy = \u003c\u003cEOF\nimport hudson.model.*\nimport hudson.FilePath\nimport jenkins.model.Jenkins\n\nJenkins.instance.getAllItems(AbstractProject.class).each { job -\u003e\n    def workspace = job.getWorkspace()\n    if (workspace != null \u0026\u0026 workspace.exists()) {\n        def size = workspace.length()\n        if (size \u003e 1024 * 1024 * 100) { // \u003e 100MB\n            println \"Workspace for \\${job.name} is \\${size / (1024*1024)} MB\"\n            workspace.deleteRecursive()\n            println \"Cleaned workspace for job: \\${job.name}\"\n        }\n    }\n}\nEOF\n\n# Update plugins\necho \"🔌 Checking for plugin updates...\"\njava -jar ${JENKINS_HOME}/jenkins-cli.jar -s ${JENKINS_URL} -auth ${ADMIN_CREDENTIALS} list-plugins | grep -E \"\\)$\" \u003e /tmp/outdated-plugins.txt\n\nif [ -s /tmp/outdated-plugins.txt ]; then\n    echo \"📦 Updating outdated plugins:\"\n    cat /tmp/outdated-plugins.txt\n    \n    # Update plugins\n    awk '{print $1}' /tmp/outdated-plugins.txt | xargs java -jar ${JENKINS_HOME}/jenkins-cli.jar -s ${JENKINS_URL} -auth ${ADMIN_CREDENTIALS} install-plugin\n    \n    echo \"🔄 Restarting Jenkins to apply plugin updates...\"\n    java -jar ${JENKINS_HOME}/jenkins-cli.jar -s ${JENKINS_URL} -auth ${ADMIN_CREDENTIALS} safe-restart\nfi\n\n# Clean up logs\necho \"📋 Rotating and cleaning logs...\"\nfind ${JENKINS_HOME}/logs -name \"*.log\" -mtime +7 -delete\nfind /var/log/jenkins -name \"*.log.*\" -mtime +7 -delete\n\n# Disk usage check\necho \"💾 Checking disk usage...\"\nDISK_USAGE=$(df ${JENKINS_HOME} | awk 'NR==2 {print $5}' | sed 's/%//')\nif [ ${DISK_USAGE} -gt 80 ]; then\n    echo \"⚠️  High disk usage: ${DISK_USAGE}%\"\n    \n    # Clean up large files\n    find ${JENKINS_HOME}/jobs -name \"*.log\" -size +100M -mtime +3 -delete\n    find ${JENKINS_HOME}/workspace -name \"*\" -size +500M -mtime +1 -delete\nfi\n\n# Backup verification\necho \"🔍 Verifying recent backups...\"\nLATEST_BACKUP=$(ls -t /backup/jenkins/config/jenkins-home-*.tar.gz 2\u003e/dev/null | head -1)\nif [ -n \"$LATEST_BACKUP\" ]; then\n    BACKUP_AGE=$(($(date +%s) - $(stat -c %Y \"$LATEST_BACKUP\")))\n    if [ $BACKUP_AGE -gt 172800 ]; then  # 2 days\n        echo \"⚠️  Latest backup is older than 2 days: $LATEST_BACKUP\"\n        echo \"💾 Running backup now...\"\n        /usr/local/bin/jenkins-backup.sh\n    else\n        echo \"✅ Recent backup found: $LATEST_BACKUP\"\n    fi\nelse\n    echo \"❌ No backups found. Running backup...\"\n    /usr/local/bin/jenkins-backup.sh\nfi\n\n# Security check\necho \"🔒 Running security checks...\"\njava -jar ${JENKINS_HOME}/jenkins-cli.jar -s ${JENKINS_URL} -auth ${ADMIN_CREDENTIALS} groovy = \u003c\u003cEOF\nimport jenkins.security.ApiTokenProperty\nimport hudson.security.SecurityRealm\nimport jenkins.model.Jenkins\n\ndef instance = Jenkins.getInstance()\n\n// Check for default passwords\ndef realm = instance.getSecurityRealm()\nif (realm instanceof hudson.security.HudsonPrivateSecurityRealm) {\n    def users = realm.getAllUsers()\n    users.each { user -\u003e\n        if (user.getId() == \"admin\") {\n            println \"⚠️  Default admin user found. Consider renaming or removing.\"\n        }\n    }\n}\n\n// Check for anonymous access\ndef authStrategy = instance.getAuthorizationStrategy()\nif (authStrategy.hasPermission(org.acegisecurity.Authentication.ANONYMOUS_USER, Jenkins.READ)) {\n    println \"⚠️  Anonymous read access is enabled\"\n}\n\nprintln \"Security check completed\"\nEOF\n\n# Performance check\necho \"📊 Checking performance metrics...\"\nJAVA_PID=$(pgrep java)\nif [ -n \"$JAVA_PID\" ]; then\n    MEMORY_USAGE=$(ps -o pid,vsz,rss,comm -p $JAVA_PID | awk 'NR==2 {print $3/1024}')\n    CPU_USAGE=$(ps -o pid,pcpu,comm -p $JAVA_PID | awk 'NR==2 {print $2}')\n    \n    echo \"Memory usage: ${MEMORY_USAGE}MB\"\n    echo \"CPU usage: ${CPU_USAGE}%\"\n    \n    if (( $(echo \"${MEMORY_USAGE} \u003e 6144\" | bc -l) )); then\n        echo \"⚠️  High memory usage detected\"\n    fi\nfi\n\necho \"✅ Jenkins maintenance completed\"\n\n# Generate maintenance report\ncat \u003e /var/log/jenkins-maintenance-$(date +%Y%m%d).log \u003c\u003cEOF\nJenkins Maintenance Report - $(date)\n===================================\n\nTasks Completed:\n- Old builds cleanup: ✅\n- Workspace cleanup: ✅\n- Plugin updates: $([ -s /tmp/outdated-plugins.txt ] \u0026\u0026 echo \"✅ Updated\" || echo \"✅ Up to date\")\n- Log rotation: ✅\n- Disk usage check: ✅ (${DISK_USAGE}%)\n- Backup verification: ✅\n- Security check: ✅\n- Performance check: ✅\n\nSystem Status:\n- Memory usage: ${MEMORY_USAGE}MB\n- CPU usage: ${CPU_USAGE}%\n- Disk usage: ${DISK_USAGE}%\n\nNext maintenance: $(date -d \"next week\" +%Y-%m-%d)\nEOF\n\necho \"📊 Maintenance report: /var/log/jenkins-maintenance-$(date +%Y%m%d).log\"\n```\n\n### Health Monitoring\n\n```bash\n# Create monitoring cron job\necho \"0 2 * * * root /usr/local/bin/jenkins-maintenance.sh\" | sudo tee -a /etc/crontab\necho \"*/15 * * * * root /usr/local/bin/jenkins-health-check.sh\" | sudo tee -a /etc/crontab\n\n# Log rotation configuration\nsudo tee /etc/logrotate.d/jenkins \u003c\u003cEOF\n/var/log/jenkins/*.log {\n    daily\n    rotate 30\n    compress\n    delaycompress\n    missingok\n    notifempty\n    create 640 jenkins adm\n    postrotate\n        systemctl reload jenkins \u003e /dev/null 2\u003e\u00261 || true\n    endscript\n}\n\n/var/lib/jenkins/logs/*.log {\n    daily\n    rotate 7\n    compress\n    delaycompress\n    missingok\n    notifempty\n    create 640 jenkins jenkins\n}\nEOF\n```\n\n## Integration Examples\n\n### Git Integration with Webhooks\n\n```bash\n# Configure Git webhook for automatic builds\nsudo tee /var/lib/jenkins/casc_configs/git-integration.yaml \u003c\u003cEOF\nunclassified:\n  gitHubPluginConfig:\n    hookUrl: \"https://jenkins.example.com/github-webhook/\"\n    \n  gitLabConnectionConfig:\n    connections:\n      - name: \"GitLab\"\n        url: \"https://gitlab.example.com\"\n        apiTokenId: \"gitlab-api-token\"\n        clientBuilderId: \"autodetect\"\n        connectionTimeout: 10\n        readTimeout: 10\n\njobs:\n  - script: |\n      multibranchPipelineJob('example-app') {\n        branchSources {\n          git {\n            id('github-example')\n            remote('https://github.com/example/app.git')\n            credentialsId('github-credentials')\n            includes('main develop feature/* release/*')\n          }\n        }\n        \n        factory {\n          workflowBranchProjectFactory {\n            scriptPath('Jenkinsfile')\n          }\n        }\n        \n        triggers {\n          periodicFolderTrigger {\n            interval('1d')\n          }\n        }\n        \n        orphanedItemStrategy {\n          discardOldItems {\n            daysToKeep(7)\n            numToKeep(10)\n          }\n        }\n      }\nEOF\n```\n\n### Docker Integration\n\n```groovy\n// Docker pipeline example\npipeline {\n    agent any\n    \n    environment {\n        DOCKER_REGISTRY = credentials('docker-registry')\n        DOCKER_IMAGE = \"${env.JOB_NAME}:${env.BUILD_NUMBER}\"\n    }\n    \n    stages {\n        stage('Build Docker Image') {\n            steps {\n                script {\n                    def image = docker.build(\"${DOCKER_REGISTRY}/${DOCKER_IMAGE}\")\n                    \n                    // Security scan\n                    sh \"\"\"\n                        docker run --rm -v /var/run/docker.sock:/var/run/docker.sock \\\n                            aquasec/trivy:latest image \\\n                            --severity HIGH,CRITICAL \\\n                            --exit-code 1 \\\n                            ${DOCKER_REGISTRY}/${DOCKER_IMAGE}\n                    \"\"\"\n                    \n                    // Push to registry\n                    docker.withRegistry(\"https://${DOCKER_REGISTRY}\", 'docker-registry-credentials') {\n                        image.push()\n                        image.push(\"latest\")\n                    }\n                }\n            }\n        }\n        \n        stage('Deploy') {\n            steps {\n                script {\n                    // Deploy to Kubernetes\n                    sh \"\"\"\n                        kubectl set image deployment/myapp \\\n                            myapp=${DOCKER_REGISTRY}/${DOCKER_IMAGE} \\\n                            --namespace=production\n                        \n                        kubectl rollout status deployment/myapp \\\n                            --namespace=production --timeout=300s\n                    \"\"\"\n                }\n            }\n        }\n    }\n}\n```\n\n### Kubernetes Integration\n\n```yaml\n# Jenkins agent in Kubernetes\napiVersion: v1\nkind: ServiceAccount\nmetadata:\n  name: jenkins\n  namespace: jenkins\n---\napiVersion: rbac.authorization.k8s.io/v1\nkind: ClusterRole\nmetadata:\n  name: jenkins\nrules:\n- apiGroups: [\"\"]\n  resources: [\"pods\",\"pods/exec\"]\n  verbs: [\"create\",\"delete\",\"get\",\"list\",\"patch\",\"update\",\"watch\"]\n- apiGroups: [\"\"]\n  resources: [\"pods/log\"]\n  verbs: [\"get\",\"list\",\"watch\"]\n---\napiVersion: rbac.authorization.k8s.io/v1\nkind: ClusterRoleBinding\nmetadata:\n  name: jenkins\nroleRef:\n  apiGroup: rbac.authorization.k8s.io\n  kind: ClusterRole\n  name: jenkins\nsubjects:\n- kind: ServiceAccount\n  name: jenkins\n  namespace: jenkins\n---\n# Jenkins Configuration as Code for Kubernetes\njenkins:\n  clouds:\n    - kubernetes:\n        name: \"kubernetes\"\n        serverUrl: \"https://kubernetes.default\"\n        namespace: \"jenkins\"\n        credentialsId: \"kubernetes-token\"\n        jenkinsUrl: \"http://jenkins.jenkins.svc.cluster.local:8080\"\n        containerCapStr: \"10\"\n        templates:\n          - name: \"jenkins-agent\"\n            namespace: \"jenkins\"\n            label: \"kubernetes\"\n            containers:\n              - name: \"jnlp\"\n                image: \"jenkins/inbound-agent:latest\"\n                workingDir: \"/home/jenkins/agent\"\n                resourceRequestCpu: \"100m\"\n                resourceRequestMemory: \"256Mi\"\n                resourceLimitCpu: \"500m\"\n                resourceLimitMemory: \"1Gi\"\n```\n\n### LDAP/Active Directory Integration\n\n```yaml\njenkins:\n  securityRealm:\n    ldap:\n      configurations:\n        - server: \"ldaps://ad.example.com:636\"\n          rootDN: \"DC=example,DC=com\"\n          inhibitInferRootDN: false\n          userSearchBase: \"OU=Users,OU=Company\"\n          userSearch: \"(\u0026(objectCategory=Person)(objectClass=user)(sAMAccountName={0}))\"\n          groupSearchBase: \"OU=Groups,OU=Company\"\n          groupSearchFilter: \"(\u0026(objectClass=group)(cn={0}))\"\n          managerDN: \"CN=jenkins,OU=Service Accounts,DC=example,DC=com\"\n          managerPasswordSecret: \"ldap-service-password\"\n          displayNameAttributeName: \"displayName\"\n          mailAddressAttributeName: \"mail\"\n          \n  authorizationStrategy:\n    roleBased:\n      roles:\n        global:\n          - name: \"administrators\"\n            permissions:\n              - \"Overall/Administer\"\n            assignments:\n              - \"Domain Admins\"\n              - \"Jenkins Admins\"\n        items:\n          - name: \"developers\"\n            pattern: \".*\"\n            permissions:\n              - \"Job/Build\"\n              - \"Job/Cancel\"\n              - \"Job/Read\"\n            assignments:\n              - \"Development Team\"\n```\n\n## Additional Resources\n\n- [Official Jenkins Documentation](https://www.jenkins.io/doc/)\n- [Jenkins Configuration as Code](https://jenkins.io/projects/jcasc/)\n- [Jenkins Pipeline Documentation](https://www.jenkins.io/doc/book/pipeline/)\n- [Jenkins Security Guide](https://www.jenkins.io/doc/book/security/)\n- [Jenkins Plugin Index](https://plugins.jenkins.io/)\n- [Jenkins Community](https://www.jenkins.io/community/)\n- [Jenkins Best Practices](https://www.jenkins.io/doc/book/pipeline/pipeline-best-practices/)\n- [Jenkins GitHub Repository](https://github.com/jenkinsci/jenkins)\n\n---\n\n**Note:** This guide is part of the [HowToMgr](https://howtomgr.github.io) collection. Always refer to official documentation for the most up-to-date information.","readmeHtml":"\u003ch1 id=\"jenkins-installation-guide\" class=\"mobile-header\"\u003eJenkins Installation Guide\u003c/h1\u003e\n\u003cp class=\"mobile-paragraph\"\u003eJenkins is a free and open-source automation server for building, testing, and deploying applications. Originally developed by Kohsuke Kawaguchi and now maintained by the Jenkins community, Jenkins is the industry-leading CI/CD platform with extensive plugin ecosystem and enterprise-grade features. It serves as a FOSS alternative to commercial CI/CD solutions like TeamCity, GitLab CI Premium, or Azure DevOps Server, offering unlimited build minutes, unlimited private repositories, and advanced pipeline capabilities without licensing costs, with features like distributed builds, Pipeline as Code, and extensive plugin ecosystem.\u003c/p\u003e\n\u003ch2 id=\"prerequisites\" class=\"mobile-header\"\u003ePrerequisites\u003c/h2\u003e\n\u003cli class=\"mobile-list-item\"\u003e\u003cstrong\u003eHardware Requirements\u003c/strong\u003e:\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eCPU: 2 cores minimum (4+ cores recommended for production)\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eRAM: 2GB minimum (8GB+ recommended for production)\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eStorage: 50GB minimum (SSD recommended for build performance)\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eNetwork: Stable connectivity for agent communication and external integrations\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003e\u003cstrong\u003eOperating System\u003c/strong\u003e: \u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eLinux: Any modern distribution with kernel 3.2+\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003emacOS: 10.13+ (High Sierra or newer)\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eWindows: Windows Server 2016+ or Windows 10\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eFreeBSD: 11.0+\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003e\u003cstrong\u003eNetwork Requirements\u003c/strong\u003e:\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003ePort 8080 (default Jenkins HTTP)\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003ePort 50000 (default Jenkins agent communication)\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eAdditional ports for external integrations (webhooks, etc.)\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003e\u003cstrong\u003eDependencies\u003c/strong\u003e:\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eJava 11 or 17 LTS (OpenJDK recommended)\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003esystemd or compatible init system (Linux)\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eRoot or administrative access for installation\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003e\u003cstrong\u003eSystem Access\u003c/strong\u003e: root or sudo privileges required\u003c/li\u003e\n\u003ch2 id=\"installation\" class=\"mobile-header\"\u003eInstallation\u003c/h2\u003e\n\u003ch3 id=\"rhelcentosrocky-linuxalmalinux\" class=\"mobile-header\"\u003eRHEL/CentOS/Rocky Linux/AlmaLinux\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Install Java 17 LTS\nsudo dnf install -y java-17-openjdk java-17-openjdk-devel\n\n# Add Jenkins repository\ncurl -fsSL https://pkg.jenkins.io/redhat-stable/jenkins.io-2023.key | sudo tee /etc/yum.repos.d/jenkins.io.key\n\nsudo tee /etc/yum.repos.d/jenkins.repo \u0026lt;\u0026lt;EOF\n[jenkins]\nname=Jenkins-stable\nbaseurl=http://pkg.jenkins.io/redhat-stable\ngpgcheck=1\ngpgkey=file:///etc/yum.repos.d/jenkins.io.key\nenabled=1\nEOF\n\n# Install Jenkins\nsudo dnf install -y jenkins\n\n# Enable and start service\nsudo systemctl enable --now jenkins\n\n# Configure firewall\nsudo firewall-cmd --permanent --add-port=8080/tcp\nsudo firewall-cmd --permanent --add-port=50000/tcp\nsudo firewall-cmd --reload\n\n# Get initial admin password\nsudo cat /var/lib/jenkins/secrets/initialAdminPassword\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"debianubuntu\" class=\"mobile-header\"\u003eDebian/Ubuntu\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Update system packages\nsudo apt update\n\n# Install Java 17 LTS\nsudo apt install -y openjdk-17-jdk openjdk-17-jre\n\n# Add Jenkins repository\nwget -O /tmp/jenkins-key.asc https://pkg.jenkins.io/debian-stable/jenkins.io-2023.key\nsudo mv /tmp/jenkins-key.asc /etc/apt/trusted.gpg.d/jenkins.asc\n\necho \u0026quot;deb https://pkg.jenkins.io/debian-stable binary/\u0026quot; | sudo tee /etc/apt/sources.list.d/jenkins.list\n\n# Update package index\nsudo apt update\n\n# Install Jenkins\nsudo apt install -y jenkins\n\n# Enable and start service\nsudo systemctl enable --now jenkins\n\n# Configure firewall\nsudo ufw allow 8080/tcp\nsudo ufw allow 50000/tcp\n\n# Get initial admin password\nsudo cat /var/lib/jenkins/secrets/initialAdminPassword\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"arch-linux\" class=\"mobile-header\"\u003eArch Linux\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Install Java 17 LTS\nsudo pacman -S jdk17-openjdk\n\n# Install Jenkins from AUR\nyay -S jenkins\n\n# Alternative: Install manually from AUR\ngit clone https://aur.archlinux.org/jenkins.git\ncd jenkins\nmakepkg -si\n\n# Create jenkins user if not created\nsudo useradd -r -d /var/lib/jenkins -s /sbin/nologin jenkins\n\n# Enable and start service\nsudo systemctl enable --now jenkins\n\n# Get initial admin password\nsudo cat /var/lib/jenkins/secrets/initialAdminPassword\n\n# Configuration location: /etc/jenkins/\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"alpine-linux\" class=\"mobile-header\"\u003eAlpine Linux\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Jenkins is not officially packaged for Alpine Linux\n# Use Docker or manual installation\n\n# Method 1: Docker installation\napk add --no-cache docker docker-compose\nrc-update add docker default\nrc-service docker start\n\n# Create Jenkins data directory\nmkdir -p /var/lib/jenkins\n\n# Run Jenkins container\ndocker run -d \\\n  --name jenkins \\\n  --restart unless-stopped \\\n  -p 8080:8080 \\\n  -p 50000:50000 \\\n  -v /var/lib/jenkins:/var/jenkins_home \\\n  -v /var/run/docker.sock:/var/run/docker.sock \\\n  --group-add $(getent group docker | cut -d: -f3) \\\n  jenkins/jenkins:lts-jdk17\n\n# Get initial admin password\ndocker exec jenkins cat /var/jenkins_home/secrets/initialAdminPassword\n\n# Method 2: Manual installation with OpenJDK\napk add --no-cache openjdk17-jre-headless\nwget https://get.jenkins.io/war-stable/latest/jenkins.war -O /opt/jenkins.war\n\n# Create jenkins user and directories\nadduser -D -s /sbin/nologin jenkins\nmkdir -p /var/lib/jenkins /var/log/jenkins\nchown -R jenkins:jenkins /var/lib/jenkins /var/log/jenkins\n\n# Create init script\ntee /etc/init.d/jenkins \u0026lt;\u0026lt;\u0026#039;EOF\u0026#039;\n#!/sbin/openrc-run\nname=\u0026quot;Jenkins\u0026quot;\ncommand=\u0026quot;java\u0026quot;\ncommand_args=\u0026quot;-jar /opt/jenkins.war --httpPort=8080 --ajp13Port=-1\u0026quot;\ncommand_user=\u0026quot;jenkins\u0026quot;\npidfile=\u0026quot;/run/jenkins.pid\u0026quot;\ncommand_background=\u0026quot;yes\u0026quot;\ndepend() {\n    need net\n}\nEOF\n\nchmod +x /etc/init.d/jenkins\nrc-update add jenkins default\nrc-service jenkins start\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"opensusesles\" class=\"mobile-header\"\u003eopenSUSE/SLES\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# openSUSE Leap/Tumbleweed\nsudo zypper install -y java-17-openjdk java-17-openjdk-devel\n\n# Add Jenkins repository\nsudo zypper addrepo -G https://pkg.jenkins.io/opensuse-stable/ jenkins\nsudo zypper refresh\n\n# Install Jenkins\nsudo zypper install -y jenkins\n\n# SLES 15\nsudo SUSEConnect -p sle-module-development-tools/15.5/x86_64\nsudo zypper install -y java-17-openjdk jenkins\n\n# Enable and start service\nsudo systemctl enable --now jenkins\n\n# Configure firewall\nsudo firewall-cmd --permanent --add-port=8080/tcp\nsudo firewall-cmd --permanent --add-port=50000/tcp\nsudo firewall-cmd --reload\n\n# Get initial admin password\nsudo cat /var/lib/jenkins/secrets/initialAdminPassword\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"macos\" class=\"mobile-header\"\u003emacOS\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Using Homebrew\nbrew install jenkins-lts\n\n# Start Jenkins service\nbrew services start jenkins-lts\n\n# Or run manually\njenkins-lts\n\n# Alternative: Install specific version\nbrew install jenkins-lts@2.414\n\n# Get initial admin password\ncat ~/.jenkins/secrets/initialAdminPassword\n\n# Configuration location: ~/.jenkins/\n# Alternative: /usr/local/var/jenkins_home/ (Intel Macs)\n# Alternative: /opt/homebrew/var/jenkins_home/ (Apple Silicon)\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"freebsd\" class=\"mobile-header\"\u003eFreeBSD\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Using pkg\npkg install jenkins openjdk17\n\n# Using ports\ncd /usr/ports/devel/jenkins\nmake install clean\n\n# Enable Jenkins\necho \u0026#039;jenkins_enable=\u0026quot;YES\u0026quot;\u0026#039; \u0026gt;\u0026gt; /etc/rc.conf\necho \u0026#039;jenkins_java_home=\u0026quot;/usr/local/openjdk17\u0026quot;\u0026#039; \u0026gt;\u0026gt; /etc/rc.conf\n\n# Create jenkins user and directories\npw useradd jenkins -d /usr/local/jenkins -s /sbin/nologin\nmkdir -p /usr/local/jenkins\nchown jenkins:jenkins /usr/local/jenkins\n\n# Start service\nservice jenkins start\n\n# Get initial admin password\ncat /usr/local/jenkins/secrets/initialAdminPassword\n\n# Configuration location: /usr/local/jenkins/\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"windows\" class=\"mobile-header\"\u003eWindows\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"powershell\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003epowershell\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-powershell\"\u003e# Method 1: Using Chocolatey\nchoco install jenkins\n\n# Method 2: Using Scoop\nscoop install jenkins\n\n# Method 3: Manual installation\n# Download from https://www.jenkins.io/download/\n# Run jenkins.msi installer\n\n# Method 4: Windows service installation\n# Download jenkins.war\n# Install as Windows service\njava -jar jenkins.war --httpPort=8080 --install\n\n# Start service\nnet start Jenkins\n\n# Get initial admin password\nGet-Content \u0026quot;C:\\Program Files\\Jenkins\\secrets\\initialAdminPassword\u0026quot;\n\n# Configuration location: C:\\Program Files\\Jenkins\\\n# Or: %JENKINS_HOME% (if custom location)\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"initial-configuration\" class=\"mobile-header\"\u003eInitial Configuration\u003c/h2\u003e\n\u003ch3 id=\"first-run-setup\" class=\"mobile-header\"\u003eFirst-Run Setup\u003c/h3\u003e\n\u003cp class=\"mobile-paragraph\"\u003e1. \u003cstrong\u003eJava Environment Setup\u003c/strong\u003e:\u003c/p\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Set JAVA_HOME (Linux/macOS)\nexport JAVA_HOME=/usr/lib/jvm/java-17-openjdk\necho \u0026#039;export JAVA_HOME=/usr/lib/jvm/java-17-openjdk\u0026#039; \u0026gt;\u0026gt; ~/.bashrc\n\n# Verify Java installation\njava -version\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003cp class=\"mobile-paragraph\"\u003e2. \u003cstrong\u003eDefault configuration locations\u003c/strong\u003e:\u003c/p\u003e\n\u003cli class=\"mobile-list-item\"\u003eRHEL/CentOS/Rocky/AlmaLinux: \u003ccode class=\"mobile-inline-code\"\u003e/var/lib/jenkins/\u003c/code\u003e, \u003ccode class=\"mobile-inline-code\"\u003e/etc/sysconfig/jenkins\u003c/code\u003e\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eDebian/Ubuntu: \u003ccode class=\"mobile-inline-code\"\u003e/var/lib/jenkins/\u003c/code\u003e, \u003ccode class=\"mobile-inline-code\"\u003e/etc/default/jenkins\u003c/code\u003e\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eArch Linux: \u003ccode class=\"mobile-inline-code\"\u003e/var/lib/jenkins/\u003c/code\u003e, \u003ccode class=\"mobile-inline-code\"\u003e/etc/jenkins/\u003c/code\u003e\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eAlpine Linux: \u003ccode class=\"mobile-inline-code\"\u003e/var/lib/jenkins/\u003c/code\u003e (Docker) or \u003ccode class=\"mobile-inline-code\"\u003e/var/lib/jenkins/\u003c/code\u003e (manual)\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eopenSUSE/SLES: \u003ccode class=\"mobile-inline-code\"\u003e/var/lib/jenkins/\u003c/code\u003e, \u003ccode class=\"mobile-inline-code\"\u003e/etc/sysconfig/jenkins\u003c/code\u003e\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003emacOS: \u003ccode class=\"mobile-inline-code\"\u003e~/.jenkins/\u003c/code\u003e or \u003ccode class=\"mobile-inline-code\"\u003e/usr/local/var/jenkins_home/\u003c/code\u003e\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eFreeBSD: \u003ccode class=\"mobile-inline-code\"\u003e/usr/local/jenkins/\u003c/code\u003e\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eWindows: \u003ccode class=\"mobile-inline-code\"\u003eC:\\Program Files\\Jenkins\\\u003c/code\u003e or \u003ccode class=\"mobile-inline-code\"\u003e%JENKINS_HOME%\u003c/code\u003e\u003c/li\u003e\n\u003cp class=\"mobile-paragraph\"\u003e3. \u003cstrong\u003eEssential initial configuration\u003c/strong\u003e:\u003c/p\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Initial web setup (after accessing http://your-server:8080)\n# 1. Enter admin password from: /var/lib/jenkins/secrets/initialAdminPassword\n# 2. Install suggested plugins or select specific plugins\n# 3. Create first admin user\n# 4. Configure Jenkins URL\n\n# Essential plugins to install:\n# - Pipeline plugins (Pipeline Suite)\n# - Git plugin\n# - Credentials Binding Plugin\n# - Build Timeout Plugin\n# - Timestamper Plugin\n# - Workspace Cleanup Plugin\n# - Blue Ocean (modern UI)\n# - Matrix Authorization Strategy Plugin\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"testing-initial-setup\" class=\"mobile-header\"\u003eTesting Initial Setup\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Check service status\nsudo systemctl status jenkins\n\n# Check web interface\ncurl -I http://localhost:8080\n\n# Test Java version\njava -version\n\n# Check Jenkins process\nps aux | grep jenkins\n\n# Verify Jenkins CLI\nwget http://localhost:8080/jnlpJars/jenkins-cli.jar\njava -jar jenkins-cli.jar -s http://localhost:8080 version\n\n# Check available plugins\njava -jar jenkins-cli.jar -s http://localhost:8080 list-plugins\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003cp class=\"mobile-paragraph\"\u003e\u003cstrong\u003eWARNING:\u003c/strong\u003e Change the default admin password immediately and configure proper authentication!\u003c/p\u003e\n\u003ch2 id=\"service-management\" class=\"mobile-header\"\u003eService Management\u003c/h2\u003e\n\u003ch3 id=\"systemd-rhel-debian-ubuntu-arch-opensuse\" class=\"mobile-header\"\u003esystemd (RHEL, Debian, Ubuntu, Arch, openSUSE)\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Enable Jenkins to start on boot\nsudo systemctl enable jenkins\n\n# Start Jenkins\nsudo systemctl start jenkins\n\n# Stop Jenkins\nsudo systemctl stop jenkins\n\n# Restart Jenkins\nsudo systemctl restart jenkins\n\n# Graceful restart (wait for running builds)\nsudo systemctl reload jenkins\n\n# Check status\nsudo systemctl status jenkins\n\n# View logs\nsudo journalctl -u jenkins -f\n\n# Edit service configuration\nsudo systemctl edit jenkins\n# Add custom environment variables or JVM options\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"openrc-alpine-linux\" class=\"mobile-header\"\u003eOpenRC (Alpine Linux)\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Docker-based installation\ndocker start jenkins\ndocker stop jenkins\ndocker restart jenkins\n\n# Check container status\ndocker ps | grep jenkins\n\n# View logs\ndocker logs -f jenkins\n\n# Manual installation\nrc-update add jenkins default\nrc-service jenkins start\nrc-service jenkins stop\nrc-service jenkins restart\nrc-service jenkins status\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"rcd-freebsd\" class=\"mobile-header\"\u003erc.d (FreeBSD)\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Enable in /etc/rc.conf\necho \u0026#039;jenkins_enable=\u0026quot;YES\u0026quot;\u0026#039; \u0026gt;\u0026gt; /etc/rc.conf\n\n# Start Jenkins\nservice jenkins start\n\n# Stop Jenkins\nservice jenkins stop\n\n# Restart Jenkins\nservice jenkins restart\n\n# Check status\nservice jenkins status\n\n# View logs\ntail -f /var/log/jenkins/jenkins.log\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"launchd-macos\" class=\"mobile-header\"\u003elaunchd (macOS)\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Using Homebrew services\nbrew services start jenkins-lts\nbrew services stop jenkins-lts\nbrew services restart jenkins-lts\n\n# Check status\nbrew services list | grep jenkins\n\n# Manual control\njenkins-lts --httpPort=8080\n\n# View logs\ntail -f /usr/local/var/log/jenkins/jenkins.log\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"windows-service-manager\" class=\"mobile-header\"\u003eWindows Service Manager\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"powershell\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003epowershell\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-powershell\"\u003e# Start Jenkins service\nnet start Jenkins\n\n# Stop Jenkins service\nnet stop Jenkins\n\n# Using PowerShell\nStart-Service Jenkins\nStop-Service Jenkins\nRestart-Service Jenkins\n\n# Check status\nGet-Service Jenkins\n\n# View logs (Windows Event Log)\nGet-EventLog -LogName Application -Source Jenkins\n\n# Or check Jenkins logs\nGet-Content \u0026quot;C:\\Program Files\\Jenkins\\logs\\jenkins.log\u0026quot; -Tail 50 -Wait\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"advanced-configuration\" class=\"mobile-header\"\u003eAdvanced Configuration\u003c/h2\u003e\n\u003ch3 id=\"high-availability-configuration\" class=\"mobile-header\"\u003eHigh Availability Configuration\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Multi-master setup with shared storage\n# Method 1: Shared filesystem (NFS, GlusterFS)\nsudo mkdir -p /shared/jenkins\nsudo mount -t nfs nfs-server:/jenkins /shared/jenkins\n\n# Update Jenkins home\nsudo systemctl edit jenkins\n# Add:\n[Service]\nEnvironment=\u0026quot;JENKINS_HOME=/shared/jenkins\u0026quot;\n\n# Method 2: Database-backed configuration\n# Install CloudBees Jenkins Enterprise plugins for HA\n# Configure external database (PostgreSQL recommended)\n\n# Agent configuration for load distribution\nsudo tee /var/lib/jenkins/casc_configs/agents.yaml \u0026lt;\u0026lt;EOF\njenkins:\n  nodes:\n    - permanent:\n        name: \u0026quot;linux-agent-1\u0026quot;\n        remoteFS: \u0026quot;/var/lib/jenkins\u0026quot;\n        numExecutors: 4\n        launcher:\n          ssh:\n            host: \u0026quot;agent1.example.com\u0026quot;\n            credentialsId: \u0026quot;ssh-agent-key\u0026quot;\n    - permanent:\n        name: \u0026quot;windows-agent-1\u0026quot;\n        remoteFS: \u0026quot;C:\\\\Jenkins\u0026quot;\n        numExecutors: 2\n        launcher:\n          command:\n            command: \u0026quot;java -jar agent.jar\u0026quot;\nEOF\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"advanced-security-settings\" class=\"mobile-header\"\u003eAdvanced Security Settings\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Configure Jenkins Configuration as Code (JCasC) for security\nsudo tee /var/lib/jenkins/casc_configs/security.yaml \u0026lt;\u0026lt;EOF\njenkins:\n  securityRealm:\n    ldap:\n      configurations:\n        - server: \u0026quot;ldaps://ldap.example.com:636\u0026quot;\n          rootDN: \u0026quot;DC=example,DC=com\u0026quot;\n          userSearchBase: \u0026quot;OU=Users\u0026quot;\n          userSearch: \u0026quot;(\u0026amp;(objectCategory=Person)(objectClass=user)(sAMAccountName={0}))\u0026quot;\n          groupSearchBase: \u0026quot;OU=Groups\u0026quot;\n          managerDN: \u0026quot;CN=jenkins,OU=Service Accounts,DC=example,DC=com\u0026quot;\n          managerPasswordSecret: \u0026quot;ldap-password\u0026quot;\n          \n  authorizationStrategy:\n    roleBased:\n      roles:\n        global:\n          - name: \u0026quot;admin\u0026quot;\n            permissions:\n              - \u0026quot;Overall/Administer\u0026quot;\n            assignments:\n              - \u0026quot;jenkins-admins\u0026quot;\n          - name: \u0026quot;developer\u0026quot;\n            permissions:\n              - \u0026quot;Overall/Read\u0026quot;\n              - \u0026quot;Job/Build\u0026quot;\n              - \u0026quot;Job/Read\u0026quot;\n            assignments:\n              - \u0026quot;developers\u0026quot;\n\nsecurity:\n  globalJobDslSecurityConfiguration:\n    useScriptSecurity: true\n  scriptApproval:\n    approvedSignatures:\n      - \u0026quot;method java.lang.String trim\u0026quot;\n      - \u0026quot;staticMethod java.lang.System getProperty java.lang.String\u0026quot;\n\nunclassified:\n  location:\n    adminAddress: \u0026quot;jenkins@example.com\u0026quot;\n    url: \u0026quot;https://jenkins.example.com/\u0026quot;\n    \n  mailer:\n    smtpHost: \u0026quot;smtp.example.com\u0026quot;\n    smtpPort: 587\n    charset: \u0026quot;UTF-8\u0026quot;\n    authentication:\n      username: \u0026quot;jenkins@example.com\u0026quot;\n      password: \u0026quot;{AQAAABAAAAAQhudQr8JjwNNI9pj8oI3L2gE=}\u0026quot;\n    useSsl: false\n    useTls: true\nEOF\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"reverse-proxy-setup\" class=\"mobile-header\"\u003eReverse Proxy Setup\u003c/h2\u003e\n\u003ch3 id=\"nginx-configuration\" class=\"mobile-header\"\u003enginx Configuration\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"nginx\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003enginx\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-nginx\"\u003e# /etc/nginx/sites-available/jenkins\nupstream jenkins {\n    server 127.0.0.1:8080 fail_timeout=0;\n    keepalive 32;\n}\n\nserver {\n    listen 80;\n    server_name jenkins.example.com;\n    return 301 https://$server_name$request_uri;\n}\n\nserver {\n    listen 443 ssl http2;\n    server_name jenkins.example.com;\n\n    ssl_certificate /etc/letsencrypt/live/jenkins.example.com/fullchain.pem;\n    ssl_certificate_key /etc/letsencrypt/live/jenkins.example.com/privkey.pem;\n    \n    # Security headers\n    add_header Strict-Transport-Security \u0026quot;max-age=31536000; includeSubDomains\u0026quot; always;\n    add_header X-Content-Type-Options nosniff always;\n    add_header X-Frame-Options DENY always;\n    add_header X-XSS-Protection \u0026quot;1; mode=block\u0026quot; always;\n    add_header Referrer-Policy \u0026quot;strict-origin-when-cross-origin\u0026quot; always;\n\n    client_max_body_size 100M;\n    \n    location / {\n        proxy_pass http://jenkins;\n        proxy_redirect default;\n        proxy_http_version 1.1;\n        \n        # Required headers for Jenkins\n        proxy_set_header Host $host;\n        proxy_set_header X-Real-IP $remote_addr;\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n        proxy_set_header X-Forwarded-Proto $scheme;\n        proxy_set_header X-Forwarded-Port $server_port;\n        \n        # WebSocket support for Jenkins\n        proxy_set_header Upgrade $http_upgrade;\n        proxy_set_header Connection \u0026quot;upgrade\u0026quot;;\n        \n        # Timeout settings\n        proxy_connect_timeout 90;\n        proxy_send_timeout 90;\n        proxy_read_timeout 90;\n        \n        proxy_buffering off;\n        proxy_request_buffering off;\n        proxy_max_temp_file_size 0;\n    }\n}\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"haproxy-configuration\" class=\"mobile-header\"\u003eHAProxy Configuration\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"haproxy\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ehaproxy\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-haproxy\"\u003e# /etc/haproxy/haproxy.cfg\nfrontend jenkins_frontend\n    bind *:80\n    bind *:443 ssl crt /etc/ssl/certs/jenkins.pem\n    redirect scheme https if !{ ssl_fc }\n    default_backend jenkins_servers\n\nbackend jenkins_servers\n    mode http\n    balance roundrobin\n    option httpchk GET /login\n    http-check expect status 200\n    server jenkins1 127.0.0.1:8080 check inter 30s rise 2 fall 3\n    server jenkins2 127.0.0.1:8081 check inter 30s rise 2 fall 3 backup\n\n    # Headers for Jenkins\n    http-request set-header X-Forwarded-Proto https\n    http-request set-header X-Forwarded-Port %[dst_port]\n    http-response set-header Strict-Transport-Security \u0026quot;max-age=31536000; includeSubDomains\u0026quot;\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"apache-http-server-configuration\" class=\"mobile-header\"\u003eApache HTTP Server Configuration\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"apache\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003eapache\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-apache\"\u003e# /etc/apache2/sites-available/jenkins.conf\n\u0026lt;VirtualHost *:80\u0026gt;\n    ServerName jenkins.example.com\n    Redirect permanent / https://jenkins.example.com/\n\u0026lt;/VirtualHost\u0026gt;\n\n\u0026lt;VirtualHost *:443\u0026gt;\n    ServerName jenkins.example.com\n    \n    SSLEngine on\n    SSLCertificateFile /etc/letsencrypt/live/jenkins.example.com/fullchain.pem\n    SSLCertificateKeyFile /etc/letsencrypt/live/jenkins.example.com/privkey.pem\n    \n    # Security headers\n    Header always set Strict-Transport-Security \u0026quot;max-age=31536000; includeSubDomains\u0026quot;\n    Header always set X-Content-Type-Options nosniff\n    Header always set X-Frame-Options DENY\n    Header always set X-XSS-Protection \u0026quot;1; mode=block\u0026quot;\n    \n    ProxyPreserveHost On\n    ProxyRequests Off\n    \n    ProxyPass / http://127.0.0.1:8080/ nocanon\n    ProxyPassReverse / http://127.0.0.1:8080/\n    ProxyPassReverse  /  http://jenkins.example.com/\n    \n    # WebSocket support\n    RewriteEngine on\n    RewriteCond %{HTTP:Upgrade} websocket [NC]\n    RewriteCond %{HTTP:Connection} upgrade [NC]\n    RewriteRule ^/?(.*) \u0026quot;ws://127.0.0.1:8080/$1\u0026quot; [P,L]\n    \n    AllowEncodedSlashes NoDecode\n\u0026lt;/VirtualHost\u0026gt;\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"security-configuration\" class=\"mobile-header\"\u003eSecurity Configuration\u003c/h2\u003e\n\u003ch3 id=\"ssltls-setup\" class=\"mobile-header\"\u003eSSL/TLS Setup\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Generate self-signed certificate (development only)\nsudo mkdir -p /etc/jenkins/ssl\nsudo openssl req -x509 -newkey rsa:4096 -keyout /etc/jenkins/ssl/jenkins.key -out /etc/jenkins/ssl/jenkins.crt -days 365 -nodes -subj \u0026quot;/C=US/ST=State/L=City/O=Organization/CN=jenkins.example.com\u0026quot;\n\n# Create Java keystore\nsudo keytool -genkey -alias jenkins -keyalg RSA -keystore /etc/jenkins/ssl/jenkins.jks -keysize 2048 -dname \u0026quot;CN=jenkins.example.com,OU=IT,O=Organization,L=City,ST=State,C=US\u0026quot; -storepass changeit -keypass changeit\n\n# Configure Jenkins to use HTTPS\nsudo systemctl edit jenkins\n# Add:\n[Service]\nEnvironment=\u0026quot;JENKINS_OPTS=--httpPort=-1 --httpsPort=8443 --httpsKeyStore=/etc/jenkins/ssl/jenkins.jks --httpsKeyStorePassword=changeit\u0026quot;\n\nsudo systemctl restart jenkins\n\n# Or use Let\u0026#039;s Encrypt with reverse proxy (recommended)\nsudo certbot --nginx -d jenkins.example.com\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"authentication-and-authorization\" class=\"mobile-header\"\u003eAuthentication and Authorization\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Configure LDAP authentication via JCasC\nsudo tee /var/lib/jenkins/casc_configs/auth.yaml \u0026lt;\u0026lt;EOF\njenkins:\n  securityRealm:\n    ldap:\n      configurations:\n        - server: \u0026quot;ldaps://ldap.example.com:636\u0026quot;\n          rootDN: \u0026quot;DC=example,DC=com\u0026quot;\n          inhibitInferRootDN: false\n          userSearchBase: \u0026quot;OU=Users\u0026quot;\n          userSearch: \u0026quot;(\u0026amp;(objectCategory=Person)(objectClass=user)(sAMAccountName={0}))\u0026quot;\n          groupSearchBase: \u0026quot;OU=Groups\u0026quot;\n          groupSearchFilter: \u0026quot;(\u0026amp;(objectClass=group)(cn={0}))\u0026quot;\n          managerDN: \u0026quot;CN=jenkins,OU=Service Accounts,DC=example,DC=com\u0026quot;\n          managerPasswordSecret: \u0026quot;ldap-password\u0026quot;\n          displayNameAttributeName: \u0026quot;displayName\u0026quot;\n          mailAddressAttributeName: \u0026quot;mail\u0026quot;\n\n  authorizationStrategy:\n    roleBased:\n      roles:\n        global:\n          - name: \u0026quot;jenkins-admins\u0026quot;\n            permissions:\n              - \u0026quot;Overall/Administer\u0026quot;\n            assignments:\n              - \u0026quot;Domain Admins\u0026quot;\n              - \u0026quot;jenkins-admins\u0026quot;\n          - name: \u0026quot;developers\u0026quot;\n            permissions:\n              - \u0026quot;Overall/Read\u0026quot;\n              - \u0026quot;Job/Build\u0026quot;\n              - \u0026quot;Job/Cancel\u0026quot;\n              - \u0026quot;Job/Read\u0026quot;\n              - \u0026quot;Job/Workspace\u0026quot;\n              - \u0026quot;Run/Replay\u0026quot;\n              - \u0026quot;Run/Update\u0026quot;\n            assignments:\n              - \u0026quot;developers\u0026quot;\n              - \u0026quot;authenticated\u0026quot;\n          - name: \u0026quot;viewers\u0026quot;\n            permissions:\n              - \u0026quot;Overall/Read\u0026quot;\n              - \u0026quot;Job/Read\u0026quot;\n            assignments:\n              - \u0026quot;viewers\u0026quot;\n              \ncredentials:\n  system:\n    domainCredentials:\n      - credentials:\n          - usernamePassword:\n              scope: GLOBAL\n              id: \u0026quot;ldap-password\u0026quot;\n              username: \u0026quot;CN=jenkins,OU=Service Accounts,DC=example,DC=com\u0026quot;\n              password: \u0026quot;{AQAAABAAAAAQSecureEncryptedPassword=}\u0026quot;\n              description: \u0026quot;LDAP Service Account\u0026quot;\n          - basicSSHUserPrivateKey:\n              scope: GLOBAL\n              id: \u0026quot;ssh-agent-key\u0026quot;\n              username: \u0026quot;jenkins\u0026quot;\n              description: \u0026quot;SSH key for Jenkins agents\u0026quot;\n              privateKeySource:\n                directEntry:\n                  privateKey: |\n                    -----BEGIN OPENSSH PRIVATE KEY-----\n                    EncryptedPrivateKeyContentHere\n                    -----END OPENSSH PRIVATE KEY-----\nEOF\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"firewall-rules\" class=\"mobile-header\"\u003eFirewall Rules\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# UFW (Ubuntu/Debian)\nsudo ufw allow from 192.168.1.0/24 to any port 8080\nsudo ufw allow from 192.168.1.0/24 to any port 50000\nsudo ufw reload\n\n# firewalld (RHEL/CentOS/openSUSE)\nsudo firewall-cmd --permanent --new-zone=jenkins\nsudo firewall-cmd --permanent --zone=jenkins --add-source=192.168.1.0/24\nsudo firewall-cmd --permanent --zone=jenkins --add-port=8080/tcp\nsudo firewall-cmd --permanent --zone=jenkins --add-port=50000/tcp\nsudo firewall-cmd --reload\n\n# iptables\nsudo iptables -A INPUT -s 192.168.1.0/24 -p tcp --dport 8080 -j ACCEPT\nsudo iptables -A INPUT -s 192.168.1.0/24 -p tcp --dport 50000 -j ACCEPT\nsudo iptables-save \u0026gt; /etc/iptables/rules.v4\n\n# pf (FreeBSD)\n# Add to /etc/pf.conf\npass in on $ext_if proto tcp from 192.168.1.0/24 to any port {8080, 50000}\n\n# Windows Firewall\nNew-NetFirewallRule -DisplayName \u0026quot;Jenkins HTTP\u0026quot; -Direction Inbound -Protocol TCP -LocalPort 8080 -RemoteAddress 192.168.1.0/24 -Action Allow\nNew-NetFirewallRule -DisplayName \u0026quot;Jenkins Agent\u0026quot; -Direction Inbound -Protocol TCP -LocalPort 50000 -RemoteAddress 192.168.1.0/24 -Action Allow\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"database-setup\" class=\"mobile-header\"\u003eDatabase Setup\u003c/h2\u003e\n\u003ch3 id=\"external-database-configuration-postgresql\" class=\"mobile-header\"\u003eExternal Database Configuration (PostgreSQL)\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Install PostgreSQL\nsudo apt install -y postgresql postgresql-contrib\n\n# Create Jenkins database\nsudo -u postgres createdb jenkinsdb\nsudo -u postgres createuser jenkinsuser\nsudo -u postgres psql -c \u0026quot;ALTER USER jenkinsuser WITH PASSWORD \u0026#039;SecureJenkinsPassword123!\u0026#039;;\u0026quot;\nsudo -u postgres psql -c \u0026quot;GRANT ALL PRIVILEGES ON DATABASE jenkinsdb TO jenkinsuser;\u0026quot;\n\n# Download PostgreSQL driver\nwget https://jdbc.postgresql.org/download/postgresql-42.6.0.jar -O /var/lib/jenkins/postgresql-connector.jar\n\n# Configure Jenkins to use PostgreSQL\nsudo tee -a /etc/default/jenkins \u0026lt;\u0026lt;EOF\n# PostgreSQL database configuration\nJENKINS_JAVA_OPTIONS=\u0026quot;-Djenkins.install.runSetupWizard=false -Dhudson.model.DirectoryBrowserSupport.CSP=\\\u0026quot;sandbox allow-scripts; default-src \u0026#039;self\u0026#039;; script-src \u0026#039;self\u0026#039; \u0026#039;unsafe-inline\u0026#039;; style-src \u0026#039;self\u0026#039; \u0026#039;unsafe-inline\u0026#039;;\\\u0026quot;\u0026quot;\nEOF\n\n# Create database configuration\nsudo tee /var/lib/jenkins/database-config.xml \u0026lt;\u0026lt;EOF\n\u0026lt;databaseConfiguration\u0026gt;\n  \u0026lt;database class=\u0026quot;org.jenkinsci.plugins.database.postgresql.PostgreSQLDatabase\u0026quot;\u0026gt;\n    \u0026lt;hostname\u0026gt;localhost\u0026lt;/hostname\u0026gt;\n    \u0026lt;port\u0026gt;5432\u0026lt;/port\u0026gt;\n    \u0026lt;database\u0026gt;jenkinsdb\u0026lt;/database\u0026gt;\n    \u0026lt;username\u0026gt;jenkinsuser\u0026lt;/username\u0026gt;\n    \u0026lt;password\u0026gt;{AQAAABAAAAAQEncryptedPasswordHere=}\u0026lt;/password\u0026gt;\n    \u0026lt;properties\u0026gt;sslmode=require\u0026lt;/properties\u0026gt;\n  \u0026lt;/database\u0026gt;\n\u0026lt;/databaseConfiguration\u0026gt;\nEOF\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"backup-database-schema\" class=\"mobile-header\"\u003eBackup Database Schema\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Create database schema backup\nsudo -u postgres pg_dump jenkinsdb \u0026gt; /backup/jenkins/jenkinsdb-schema-$(date +%Y%m%d).sql\n\n# Create Jenkins jobs and configuration backup\nsudo tee /usr/local/bin/jenkins-db-backup.sh \u0026lt;\u0026lt;\u0026#039;EOF\u0026#039;\n#!/bin/bash\nBACKUP_DIR=\u0026quot;/backup/jenkins/$(date +%Y%m%d_%H%M%S)\u0026quot;\nmkdir -p \u0026quot;$BACKUP_DIR\u0026quot;\n\n# PostgreSQL backup\nsudo -u postgres pg_dump jenkinsdb | gzip \u0026gt; \u0026quot;$BACKUP_DIR/jenkinsdb.sql.gz\u0026quot;\n\n# Jenkins configuration backup\ntar -czf \u0026quot;$BACKUP_DIR/jenkins-config.tar.gz\u0026quot; \\\n  --exclude=\u0026quot;/var/lib/jenkins/workspace/*\u0026quot; \\\n  --exclude=\u0026quot;/var/lib/jenkins/builds/*/archive\u0026quot; \\\n  --exclude=\u0026quot;/var/lib/jenkins/logs/*\u0026quot; \\\n  /var/lib/jenkins/\n\necho \u0026quot;Database backup completed: $BACKUP_DIR\u0026quot;\nEOF\n\nchmod +x /usr/local/bin/jenkins-db-backup.sh\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"performance-optimization\" class=\"mobile-header\"\u003ePerformance Optimization\u003c/h2\u003e\n\u003ch3 id=\"system-tuning\" class=\"mobile-header\"\u003eSystem Tuning\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Jenkins-specific system optimizations\nsudo tee -a /etc/sysctl.conf \u0026lt;\u0026lt;EOF\n# Jenkins optimizations\nvm.swappiness = 1\nfs.file-max = 65535\nnet.core.somaxconn = 32768\nnet.ipv4.tcp_max_syn_backlog = 8192\nnet.ipv4.ip_local_port_range = 1024 65535\nEOF\n\nsudo sysctl -p\n\n# Increase file descriptor limits\nsudo tee -a /etc/security/limits.conf \u0026lt;\u0026lt;EOF\njenkins soft nofile 65535\njenkins hard nofile 65535\njenkins soft nproc 32768\njenkins hard nproc 32768\nEOF\n\n# Optimize Jenkins JVM settings\nsudo systemctl edit jenkins\n# Add:\n[Service]\nEnvironment=\u0026quot;JAVA_OPTS=-Xmx8g -Xms4g -XX:+UseG1GC -XX:+UseStringDeduplication -XX:+DisableExplicitGC -XX:+UnlockExperimentalVMOptions -XX:+UseCGroupMemoryLimitForHeap\u0026quot;\nEnvironment=\u0026quot;JENKINS_OPTS=--sessionTimeout=1440 --sessionEviction=86400\u0026quot;\n\nsudo systemctl daemon-reload\nsudo systemctl restart jenkins\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"jenkins-performance-configuration\" class=\"mobile-header\"\u003eJenkins Performance Configuration\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Configure Jenkins for high performance\nsudo tee /var/lib/jenkins/casc_configs/performance.yaml \u0026lt;\u0026lt;EOF\njenkins:\n  systemMessage: \u0026quot;High-Performance Jenkins Instance\u0026quot;\n  numExecutors: 0  # Don\u0026#039;t run builds on controller\n  mode: EXCLUSIVE\n  quietPeriod: 5\n  scmCheckoutRetryCount: 3\n  \n  # Global pipeline libraries for shared code\n  globalLibraries:\n    libraries:\n      - name: \u0026quot;shared-pipeline-library\u0026quot;\n        defaultVersion: \u0026quot;main\u0026quot;\n        implicit: true\n        retriever:\n          modernSCM:\n            scm:\n              git:\n                remote: \u0026quot;https://github.com/example/jenkins-shared-library.git\u0026quot;\n                credentialsId: \u0026quot;github-token\u0026quot;\n\n  # Configure build discarders globally\n  buildDiscarders:\n    configuredBuildDiscarders:\n      - \u0026quot;logRotator\u0026quot;:\n          artifactDaysToKeepStr: \u0026quot;30\u0026quot;\n          artifactNumToKeepStr: \u0026quot;10\u0026quot;\n          daysToKeepStr: \u0026quot;30\u0026quot;\n          numToKeepStr: \u0026quot;100\u0026quot;\n\nunclassified:\n  # Configure global timeout\n  buildTimeout:\n    operations:\n      - timeoutMinutes: 60\n      - failBuild: true\n      - writingDescription: true\n      \n  # Workspace cleanup configuration  \n  wsCleanup:\n    deleteDirs: true\n    cleanupMatrixParent: true\n    skipWhenFailed: false\n    \ntool:\n  # Configure tools for performance\n  git:\n    installations:\n      - name: \u0026quot;Default\u0026quot;\n        home: \u0026quot;/usr/bin/git\u0026quot;\n        \n  maven:\n    installations:\n      - name: \u0026quot;Maven 3.9\u0026quot;\n        properties:\n          - installSource:\n              installers:\n                - maven:\n                    id: \u0026quot;3.9.6\u0026quot;\n                    \n  gradle:\n    installations:\n      - name: \u0026quot;Gradle 8\u0026quot;\n        properties:\n          - installSource:\n              installers:\n                - gradleInstaller:\n                    id: \u0026quot;8.4\u0026quot;\n\n  nodejs:\n    installations:\n      - name: \u0026quot;NodeJS 18\u0026quot;\n        properties:\n          - installSource:\n              installers:\n                - nodeJSInstaller:\n                    id: \u0026quot;18.18.2\u0026quot;\n                    \n  dockerTool:\n    installations:\n      - name: \u0026quot;Docker\u0026quot;\n        properties:\n          - installSource:\n              installers:\n                - dockerInstaller:\n                    version: \u0026quot;latest\u0026quot;\nEOF\n\n# Configure agent templates for auto-scaling\nsudo tee /var/lib/jenkins/casc_configs/agents.yaml \u0026lt;\u0026lt;EOF\njenkins:\n  clouds:\n    - kubernetes:\n        name: \u0026quot;kubernetes\u0026quot;\n        serverUrl: \u0026quot;https://kubernetes.default.svc.cluster.local\u0026quot;\n        namespace: \u0026quot;jenkins\u0026quot;\n        credentialsId: \u0026quot;kubernetes-token\u0026quot;\n        jenkinsUrl: \u0026quot;http://jenkins.jenkins.svc.cluster.local:8080\u0026quot;\n        jenkinsTunnel: \u0026quot;jenkins-agent.jenkins.svc.cluster.local:50000\u0026quot;\n        connectTimeout: 300\n        readTimeout: 300\n        containerCapStr: 100\n        templates:\n          - name: \u0026quot;jenkins-agent\u0026quot;\n            namespace: \u0026quot;jenkins\u0026quot;\n            label: \u0026quot;kubernetes docker\u0026quot;\n            nodeUsageMode: EXCLUSIVE\n            containers:\n              - name: \u0026quot;jnlp\u0026quot;\n                image: \u0026quot;jenkins/inbound-agent:latest\u0026quot;\n                alwaysPullImage: true\n                workingDir: \u0026quot;/home/jenkins/agent\u0026quot;\n                command: \u0026quot;\u0026quot;\n                args: \u0026quot;\u0026quot;\n                resourceRequestCpu: \u0026quot;500m\u0026quot;\n                resourceRequestMemory: \u0026quot;1Gi\u0026quot;\n                resourceLimitCpu: \u0026quot;2\u0026quot;\n                resourceLimitMemory: \u0026quot;4Gi\u0026quot;\n            volumes:\n              - hostPathVolume:\n                  hostPath: \u0026quot;/var/run/docker.sock\u0026quot;\n                  mountPath: \u0026quot;/var/run/docker.sock\u0026quot;\nEOF\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"pipeline-optimization\" class=\"mobile-header\"\u003ePipeline Optimization\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"groovy\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003egroovy\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-groovy\"\u003e// Optimized Jenkins Pipeline Template\n// /var/lib/jenkins/pipeline-templates/optimized-pipeline.groovy\n@Library(\u0026#039;shared-pipeline-library\u0026#039;) _\n\npipeline {\n    agent {\n        label \u0026#039;docker \u0026amp;\u0026amp; linux\u0026#039;\n    }\n    \n    options {\n        buildDiscarder(logRotator(numToKeepStr: \u0026#039;50\u0026#039;, artifactNumToKeepStr: \u0026#039;10\u0026#039;))\n        timeout(time: 120, unit: \u0026#039;MINUTES\u0026#039;)\n        timestamps()\n        skipDefaultCheckout(true)\n        disableConcurrentBuilds()\n        ansiColor(\u0026#039;xterm\u0026#039;)\n        parallelsAlwaysFailFast()\n        copyArtifactPermission(\u0026#039;*\u0026#039;)\n    }\n    \n    environment {\n        DOCKER_REGISTRY = credentials(\u0026#039;docker-registry-url\u0026#039;)\n        MAVEN_OPTS = \u0026#039;-Xmx2g -XX:+UseG1GC\u0026#039;\n        GRADLE_OPTS = \u0026#039;-Xmx2g -Dorg.gradle.daemon=false\u0026#039;\n        CI = \u0026#039;true\u0026#039;\n    }\n    \n    stages {\n        stage(\u0026#039;Checkout\u0026#039;) {\n            steps {\n                checkout scm\n                script {\n                    env.GIT_COMMIT_SHORT = env.GIT_COMMIT.take(8)\n                    env.BUILD_VERSION = \u0026quot;${env.BUILD_NUMBER}-${env.GIT_COMMIT_SHORT}\u0026quot;\n                }\n            }\n        }\n        \n        stage(\u0026#039;Parallel Analysis\u0026#039;) {\n            parallel {\n                stage(\u0026#039;Code Quality\u0026#039;) {\n                    steps {\n                        script {\n                            // SonarQube analysis\n                            withSonarQubeEnv(\u0026#039;SonarQube\u0026#039;) {\n                                sh \u0026#039;\u0026#039;\u0026#039;\n                                    mvn sonar:sonar \\\n                                        -Dsonar.projectKey=${JOB_NAME} \\\n                                        -Dsonar.projectVersion=${BUILD_VERSION} \\\n                                        -Dsonar.sources=src/main \\\n                                        -Dsonar.tests=src/test \\\n                                        -Dsonar.coverage.jacoco.xmlReportPaths=target/site/jacoco/jacoco.xml\n                                \u0026#039;\u0026#039;\u0026#039;\n                            }\n                            \n                            timeout(time: 10, unit: \u0026#039;MINUTES\u0026#039;) {\n                                waitForQualityGate abortPipeline: true\n                            }\n                        }\n                    }\n                }\n                \n                stage(\u0026#039;Security Scan\u0026#039;) {\n                    steps {\n                        // OWASP Dependency Check\n                        dependencyCheck additionalArguments: \u0026#039;\u0026#039;\u0026#039;\n                            --enableRetired\n                            --enableExperimental  \n                            --scan ./\n                            --format JSON\n                            --format HTML\n                            --suppression dependency-check-suppressions.xml\n                        \u0026#039;\u0026#039;\u0026#039;, odcInstallation: \u0026#039;dependency-check-8.4.0\u0026#039;\n                        \n                        dependencyCheckPublisher pattern: \u0026#039;**/dependency-check-report.xml\u0026#039;\n                        \n                        // Secret scanning\n                        sh \u0026#039;\u0026#039;\u0026#039;\n                            docker run --rm -v $(pwd):/repo \\\n                                trufflesecurity/trufflehog:latest \\\n                                git file:///repo \\\n                                --json \\\n                                --fail \u0026gt; trufflehog-results.json || true\n                        \u0026#039;\u0026#039;\u0026#039;\n                    }\n                }\n                \n                stage(\u0026#039;Test\u0026#039;) {\n                    steps {\n                        sh \u0026#039;\u0026#039;\u0026#039;\n                            # Parallel test execution\n                            mvn clean test \\\n                                -Dmaven.test.failure.ignore=true \\\n                                -Dspring.profiles.active=test \\\n                                -Djunit.jupiter.execution.parallel.enabled=true \\\n                                -Djunit.jupiter.execution.parallel.mode.default=concurrent\n                        \u0026#039;\u0026#039;\u0026#039;\n                        \n                        publishTestResults testResultsPattern: \u0026#039;target/surefire-reports/*.xml\u0026#039;\n                        publishCoverage adapters: [jacocoAdapter(\u0026#039;target/site/jacoco/jacoco.xml\u0026#039;)], \n                                       sourceFileResolver: sourceFiles(\u0026#039;STORE_LAST_BUILD\u0026#039;)\n                    }\n                    post {\n                        always {\n                            archiveArtifacts artifacts: \u0026#039;target/surefire-reports/**\u0026#039;, allowEmptyArchive: true\n                        }\n                    }\n                }\n            }\n        }\n        \n        stage(\u0026#039;Build \u0026amp; Package\u0026#039;) {\n            steps {\n                sh \u0026#039;\u0026#039;\u0026#039;\n                    # Optimized build with parallel processing\n                    mvn clean package \\\n                        -DskipTests \\\n                        -T 2C \\\n                        -Dspring.profiles.active=production \\\n                        -Dmaven.javadoc.skip=true\n                \u0026#039;\u0026#039;\u0026#039;\n                \n                // Docker build with BuildKit\n                script {\n                    def image = docker.build(\u0026quot;${env.DOCKER_REGISTRY}/${env.JOB_NAME}:${env.BUILD_VERSION}\u0026quot;, \n                                           \u0026quot;--build-arg BUILD_VERSION=${env.BUILD_VERSION} .\u0026quot;)\n                    \n                    // Security scanning with Trivy\n                    sh \u0026quot;\u0026quot;\u0026quot;\n                        docker run --rm -v /var/run/docker.sock:/var/run/docker.sock \\\n                            aquasec/trivy:latest image \\\n                            --format table \\\n                            --severity HIGH,CRITICAL \\\n                            --exit-code 1 \\\n                            ${env.DOCKER_REGISTRY}/${env.JOB_NAME}:${env.BUILD_VERSION}\n                    \u0026quot;\u0026quot;\u0026quot;\n                    \n                    image.push()\n                    image.push(\u0026quot;latest\u0026quot;)\n                }\n            }\n        }\n        \n        stage(\u0026#039;Deploy\u0026#039;) {\n            when {\n                anyOf {\n                    branch \u0026#039;main\u0026#039;\n                    branch \u0026#039;develop\u0026#039;\n                    branch \u0026#039;release/*\u0026#039;\n                }\n            }\n            parallel {\n                stage(\u0026#039;Staging\u0026#039;) {\n                    when { branch \u0026#039;develop\u0026#039; }\n                    steps {\n                        script {\n                            // Deploy to staging environment\n                            sh \u0026#039;\u0026#039;\u0026#039;\n                                kubectl set image deployment/myapp-staging \\\n                                    myapp=${DOCKER_REGISTRY}/${JOB_NAME}:${BUILD_VERSION} \\\n                                    --namespace=staging\n                                \n                                kubectl rollout status deployment/myapp-staging \\\n                                    --namespace=staging --timeout=300s\n                            \u0026#039;\u0026#039;\u0026#039;\n                            \n                            // Run smoke tests\n                            sh \u0026#039;\u0026#039;\u0026#039;\n                                curl -f http://myapp-staging.example.com/health || exit 1\n                                npm run test:e2e -- --base-url http://myapp-staging.example.com\n                            \u0026#039;\u0026#039;\u0026#039;\n                        }\n                    }\n                }\n                \n                stage(\u0026#039;Production\u0026#039;) {\n                    when { \n                        anyOf {\n                            branch \u0026#039;main\u0026#039;\n                            branch \u0026#039;release/*\u0026#039;\n                        }\n                    }\n                    steps {\n                        // Manual approval for production\n                        timeout(time: 60, unit: \u0026#039;MINUTES\u0026#039;) {\n                            input message: \u0026#039;Deploy to production?\u0026#039;, \n                                  ok: \u0026#039;Deploy\u0026#039;,\n                                  submitterParameter: \u0026#039;APPROVER\u0026#039;\n                        }\n                        \n                        script {\n                            sh \u0026#039;\u0026#039;\u0026#039;\n                                # Blue-green deployment\n                                kubectl set image deployment/myapp-production \\\n                                    myapp=${DOCKER_REGISTRY}/${JOB_NAME}:${BUILD_VERSION} \\\n                                    --namespace=production\n                                \n                                kubectl rollout status deployment/myapp-production \\\n                                    --namespace=production --timeout=600s\n                            \u0026#039;\u0026#039;\u0026#039;\n                        }\n                    }\n                }\n            }\n        }\n    }\n    \n    post {\n        always {\n            // Cleanup workspace\n            cleanWs()\n            \n            // Archive artifacts\n            archiveArtifacts artifacts: \u0026#039;target/*.jar,docker-compose.yml\u0026#039;, \n                           allowEmptyArchive: true, \n                           fingerprint: true\n                           \n            // Collect build metrics\n            script {\n                def buildDuration = currentBuild.duration / 1000\n                echo \u0026quot;Build completed in ${buildDuration} seconds\u0026quot;\n                \n                // Custom metrics collection\n                sh \u0026quot;\u0026quot;\u0026quot;\n                    echo \u0026quot;build_duration_seconds{job=\\\u0026quot;${env.JOB_NAME}\\\u0026quot;,build=\\\u0026quot;${env.BUILD_NUMBER}\\\u0026quot;} ${buildDuration}\u0026quot; \u0026gt; build-metrics.txt\n                \u0026quot;\u0026quot;\u0026quot;\n                \n                archiveArtifacts artifacts: \u0026#039;build-metrics.txt\u0026#039;, allowEmptyArchive: true\n            }\n        }\n        \n        success {\n            // Success notifications\n            emailext(\n                subject: \u0026quot;✅ Build Success: ${env.JOB_NAME} - ${env.BUILD_NUMBER}\u0026quot;,\n                body: \u0026quot;\u0026quot;\u0026quot;Build successful for ${env.JOB_NAME} build ${env.BUILD_NUMBER}\n                         \n                Build URL: ${env.BUILD_URL}\n                Git Commit: ${env.GIT_COMMIT}\n                Duration: ${currentBuild.durationString}\n                Approver: ${env.APPROVER ?: \u0026#039;Automatic\u0026#039;}\u0026quot;\u0026quot;\u0026quot;,\n                to: \u0026quot;${env.CHANGE_AUTHOR_EMAIL ?: \u0026#039;jenkins@example.com\u0026#039;}\u0026quot;\n            )\n            \n            slackSend(\n                channel: \u0026#039;#deployments\u0026#039;,\n                color: \u0026#039;good\u0026#039;,\n                message: \u0026quot;✅ Deployment Success: ${env.JOB_NAME} - ${env.BUILD_NUMBER} by ${env.APPROVER ?: \u0026#039;System\u0026#039;}\u0026quot;\n            )\n        }\n        \n        failure {\n            emailext(\n                subject: \u0026quot;❌ Build Failed: ${env.JOB_NAME} - ${env.BUILD_NUMBER}\u0026quot;,\n                body: \u0026quot;Build failed for ${env.JOB_NAME} build ${env.BUILD_NUMBER}\\n\\nBuild URL: ${env.BUILD_URL}\u0026quot;,\n                to: \u0026quot;${env.CHANGE_AUTHOR_EMAIL ?: \u0026#039;jenkins@example.com\u0026#039;}\u0026quot;\n            )\n            \n            slackSend(\n                channel: \u0026#039;#ci-cd-alerts\u0026#039;,\n                color: \u0026#039;danger\u0026#039;,\n                message: \u0026quot;❌ Build Failed: ${env.JOB_NAME} - ${env.BUILD_NUMBER} (\u0026lt;${env.BUILD_URL}|View Details\u0026gt;)\u0026quot;\n            )\n        }\n        \n        unstable {\n            emailext(\n                subject: \u0026quot;⚠️  Build Unstable: ${env.JOB_NAME} - ${env.BUILD_NUMBER}\u0026quot;,\n                body: \u0026quot;Build unstable for ${env.JOB_NAME} build ${env.BUILD_NUMBER}\\n\\nBuild URL: ${env.BUILD_URL}\u0026quot;,\n                to: \u0026quot;${env.CHANGE_AUTHOR_EMAIL ?: \u0026#039;jenkins@example.com\u0026#039;}\u0026quot;\n            )\n        }\n    }\n}\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"monitoring\" class=\"mobile-header\"\u003eMonitoring\u003c/h2\u003e\n\u003ch3 id=\"built-in-monitoring\" class=\"mobile-header\"\u003eBuilt-in Monitoring\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Jenkins CLI monitoring commands\njava -jar jenkins-cli.jar -s http://localhost:8080 -auth admin:password version\njava -jar jenkins-cli.jar -s http://localhost:8080 -auth admin:password list-jobs\njava -jar jenkins-cli.jar -s http://localhost:8080 -auth admin:password list-builds job-name\njava -jar jenkins-cli.jar -s http://localhost:8080 -auth admin:password get-build job-name 1\n\n# System information\ncurl -u admin:password http://localhost:8080/systemInfo\n\n# Build queue status\ncurl -u admin:password http://localhost:8080/queue/api/json\n\n# Node status\ncurl -u admin:password http://localhost:8080/computer/api/json\n\n# Plugin information\ncurl -u admin:password http://localhost:8080/pluginManager/api/json?depth=1\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"external-monitoring-setup\" class=\"mobile-header\"\u003eExternal Monitoring Setup\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Install Jenkins Prometheus Plugin and configure metrics\n# Via Jenkins UI: Manage Jenkins \u0026gt; Manage Plugins \u0026gt; Available \u0026gt; Prometheus metrics plugin\n\n# Configure Prometheus to scrape Jenkins metrics\nsudo tee /etc/prometheus/jenkins.yml \u0026lt;\u0026lt;EOF\nglobal:\n  scrape_interval: 15s\n\nscrape_configs:\n  - job_name: \u0026#039;jenkins\u0026#039;\n    static_configs:\n      - targets: [\u0026#039;localhost:8080\u0026#039;]\n    metrics_path: /prometheus/\n    scrape_interval: 30s\n    scrape_timeout: 10s\nEOF\n\n# Install Jenkins Exporter (alternative)\nwget https://github.com/lovoo/jenkins_exporter/releases/download/v1.0.0/jenkins_exporter-1.0.0.linux-amd64.tar.gz\ntar xzf jenkins_exporter-*.tar.gz\nsudo cp jenkins_exporter /usr/local/bin/\n\n# Create systemd service\nsudo tee /etc/systemd/system/jenkins_exporter.service \u0026lt;\u0026lt;EOF\n[Unit]\nDescription=Jenkins Exporter\nAfter=network.target\n\n[Service]\nType=simple\nUser=jenkins\nExecStart=/usr/local/bin/jenkins_exporter \\\n    --jenkins.address=http://localhost:8080 \\\n    --jenkins.username=monitoring \\\n    --jenkins.password=MonitoringPassword123! \\\n    --web.listen-address=:9118\nRestart=always\n\n[Install]\nWantedBy=multi-user.target\nEOF\n\nsudo systemctl enable --now jenkins_exporter\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"health-check-scripts\" class=\"mobile-header\"\u003eHealth Check Scripts\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e#!/bin/bash\n# jenkins-health-check.sh\n\nJENKINS_URL=\u0026quot;http://localhost:8080\u0026quot;\nHEALTH_LOG=\u0026quot;/var/log/jenkins-health.log\u0026quot;\n\nlog_message() {\n    echo \u0026quot;$(date \u0026#039;+%Y-%m-%d %H:%M:%S\u0026#039;) - $1\u0026quot; | tee -a ${HEALTH_LOG}\n}\n\n# Check service status\nif systemctl is-active jenkins \u0026gt;/dev/null 2\u0026gt;\u0026amp;1; then\n    log_message \u0026quot;✅ Jenkins service is running\u0026quot;\nelse\n    log_message \u0026quot;❌ Jenkins service is not running\u0026quot;\n    exit 2\nfi\n\n# Check web interface\nHTTP_STATUS=$(curl -s -o /dev/null -w \u0026quot;%{http_code}\u0026quot; ${JENKINS_URL}/login)\nif [ \u0026quot;${HTTP_STATUS}\u0026quot; = \u0026quot;200\u0026quot; ]; then\n    log_message \u0026quot;✅ Jenkins web interface responding (HTTP ${HTTP_STATUS})\u0026quot;\nelse\n    log_message \u0026quot;❌ Jenkins web interface issues (HTTP ${HTTP_STATUS})\u0026quot;\n    exit 2\nfi\n\n# Check disk space\nJENKINS_HOME_USAGE=$(df /var/lib/jenkins | awk \u0026#039;NR==2 {print $5}\u0026#039; | sed \u0026#039;s/%//\u0026#039;)\nif [ ${JENKINS_HOME_USAGE} -gt 85 ]; then\n    log_message \u0026quot;⚠️  High disk usage: ${JENKINS_HOME_USAGE}%\u0026quot;\n    exit 1\nelse\n    log_message \u0026quot;✅ Jenkins home disk usage: ${JENKINS_HOME_USAGE}%\u0026quot;\nfi\n\n# Check memory usage\nJAVA_MEMORY=$(ps -o pid,vsz,rss,comm -C java | grep jenkins | awk \u0026#039;{rss+=$3} END {print rss/1024}\u0026#039;)\nif (( $(echo \u0026quot;${JAVA_MEMORY} \u0026gt; 6144\u0026quot; | bc -l) )); then\n    log_message \u0026quot;⚠️  High memory usage: ${JAVA_MEMORY}MB\u0026quot;\n    exit 1\nelse\n    log_message \u0026quot;✅ Jenkins memory usage: ${JAVA_MEMORY}MB\u0026quot;\nfi\n\n# Check running builds (if Jenkins CLI is available)\nif [ -f /var/lib/jenkins/jenkins-cli.jar ]; then\n    RUNNING_BUILDS=$(java -jar /var/lib/jenkins/jenkins-cli.jar -s ${JENKINS_URL} -auth monitoring:MonitoringPassword123! list-builds 2\u0026gt;/dev/null | grep -c \u0026quot;RUNNING\u0026quot; || echo \u0026quot;0\u0026quot;)\n    log_message \u0026quot;ℹ️  Running builds: ${RUNNING_BUILDS}\u0026quot;\n    \n    # Check for failed builds in last 24 hours\n    FAILED_BUILDS=$(java -jar /var/lib/jenkins/jenkins-cli.jar -s ${JENKINS_URL} -auth monitoring:MonitoringPassword123! list-builds 2\u0026gt;/dev/null | grep -c \u0026quot;FAILURE\u0026quot; || echo \u0026quot;0\u0026quot;)\n    if [ ${FAILED_BUILDS} -gt 5 ]; then\n        log_message \u0026quot;⚠️  High number of failed builds: ${FAILED_BUILDS}\u0026quot;\n        exit 1\n    fi\nfi\n\n# Check plugin health\nPLUGIN_ERRORS=$(curl -s ${JENKINS_URL}/pluginManager/api/json?depth=1 | jq \u0026#039;.plugins[] | select(.hasUpdate==true or .enabled==false) | .shortName\u0026#039; | wc -l)\nif [ ${PLUGIN_ERRORS} -gt 0 ]; then\n    log_message \u0026quot;⚠️  Plugins need attention: ${PLUGIN_ERRORS}\u0026quot;\nfi\n\nlog_message \u0026quot;✅ Jenkins health check completed\u0026quot;\nexit 0\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"backup-and-restore\" class=\"mobile-header\"\u003eBackup and Restore\u003c/h2\u003e\n\u003ch3 id=\"comprehensive-backup-strategy\" class=\"mobile-header\"\u003eComprehensive Backup Strategy\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e#!/bin/bash\n# jenkins-backup.sh\n\nBACKUP_DIR=\u0026quot;/backup/jenkins\u0026quot;\nDATE=$(date +%Y%m%d_%H%M%S)\nJENKINS_HOME=\u0026quot;/var/lib/jenkins\u0026quot;\nRETENTION_DAYS=14\n\nmkdir -p ${BACKUP_DIR}/{config,jobs,plugins,secrets,workspace}\n\necho \u0026quot;Starting Jenkins comprehensive backup...\u0026quot;\n\n# Function to gracefully shutdown Jenkins\ngraceful_shutdown() {\n    echo \u0026quot;Putting Jenkins in quiet mode...\u0026quot;\n    java -jar ${JENKINS_HOME}/jenkins-cli.jar -s http://localhost:8080 -auth admin:SecureAdminPassword123! quiet-down\n    \n    # Wait for running builds to complete (max 20 minutes)\n    for i in {1..120}; do\n        RUNNING_BUILDS=$(java -jar ${JENKINS_HOME}/jenkins-cli.jar -s http://localhost:8080 -auth admin:SecureAdminPassword123! list-builds | grep -c \u0026quot;RUNNING\u0026quot; || echo \u0026quot;0\u0026quot;)\n        if [ \u0026quot;$RUNNING_BUILDS\u0026quot; -eq 0 ]; then\n            echo \u0026quot;All builds completed, stopping Jenkins...\u0026quot;\n            systemctl stop jenkins\n            break\n        fi\n        echo \u0026quot;Waiting for $RUNNING_BUILDS running builds to complete... (${i}/120)\u0026quot;\n        sleep 10\n    done\n    \n    if [ \u0026quot;$RUNNING_BUILDS\u0026quot; -gt 0 ]; then\n        echo \u0026quot;Warning: Stopping Jenkins with $RUNNING_BUILDS builds still running\u0026quot;\n        systemctl stop jenkins\n    fi\n}\n\n# Function to start Jenkins\nstart_jenkins() {\n    echo \u0026quot;Starting Jenkins...\u0026quot;\n    systemctl start jenkins\n    \n    # Wait for Jenkins to be ready\n    for i in {1..60}; do\n        if curl -f http://localhost:8080/login \u0026gt;/dev/null 2\u0026gt;\u0026amp;1; then\n            echo \u0026quot;Jenkins is ready, canceling quiet mode...\u0026quot;\n            java -jar ${JENKINS_HOME}/jenkins-cli.jar -s http://localhost:8080 -auth admin:SecureAdminPassword123! cancel-quiet-down\n            break\n        fi\n        echo \u0026quot;Waiting for Jenkins to start... (${i}/60)\u0026quot;\n        sleep 10\n    done\n}\n\n# Gracefully shutdown Jenkins\ngraceful_shutdown\n\n# Full Jenkins home backup (excluding large/temporary directories)\necho \u0026quot;Creating full Jenkins home backup...\u0026quot;\ntar --exclude=\u0026quot;${JENKINS_HOME}/workspace/*\u0026quot; \\\n    --exclude=\u0026quot;${JENKINS_HOME}/builds/*/archive\u0026quot; \\\n    --exclude=\u0026quot;${JENKINS_HOME}/logs/*\u0026quot; \\\n    --exclude=\u0026quot;${JENKINS_HOME}/.m2/repository\u0026quot; \\\n    --exclude=\u0026quot;${JENKINS_HOME}/caches\u0026quot; \\\n    --exclude=\u0026quot;${JENKINS_HOME}/war\u0026quot; \\\n    -czf ${BACKUP_DIR}/config/jenkins-home-${DATE}.tar.gz \\\n    -C ${JENKINS_HOME} .\n\n# Job configurations backup\necho \u0026quot;Backing up job configurations...\u0026quot;\nmkdir -p ${BACKUP_DIR}/jobs\nfind ${JENKINS_HOME}/jobs -name \u0026quot;config.xml\u0026quot; -exec cp {} ${BACKUP_DIR}/jobs/ \\;\ntar -czf ${BACKUP_DIR}/jobs/job-configs-${DATE}.tar.gz -C ${BACKUP_DIR}/jobs .\nrm ${BACKUP_DIR}/jobs/config.xml 2\u0026gt;/dev/null\n\n# Plugins backup\necho \u0026quot;Backing up installed plugins...\u0026quot;\njava -jar ${JENKINS_HOME}/jenkins-cli.jar -s http://localhost:8080 -auth admin:SecureAdminPassword123! list-plugins \u0026gt; ${BACKUP_DIR}/plugins/plugin-list-${DATE}.txt\ncp -r ${JENKINS_HOME}/plugins ${BACKUP_DIR}/plugins/plugins-${DATE}/ 2\u0026gt;/dev/null\n\n# Secrets and credentials backup\necho \u0026quot;Backing up secrets and credentials...\u0026quot;\nif [ -d \u0026quot;${JENKINS_HOME}/secrets\u0026quot; ]; then\n    tar -czf ${BACKUP_DIR}/secrets/jenkins-secrets-${DATE}.tar.gz -C ${JENKINS_HOME} secrets/\nfi\n\n# System configuration backup\necho \u0026quot;Backing up system configuration...\u0026quot;\ntar -czf ${BACKUP_DIR}/config/system-config-${DATE}.tar.gz \\\n    /etc/default/jenkins \\\n    /etc/sysconfig/jenkins \\\n    /etc/systemd/system/jenkins.service.d/ 2\u0026gt;/dev/null\n\n# Database backup (if using external database)\nif [ -f \u0026quot;${JENKINS_HOME}/database-config.xml\u0026quot; ]; then\n    echo \u0026quot;Backing up external database...\u0026quot;\n    sudo -u postgres pg_dump jenkinsdb | gzip \u0026gt; ${BACKUP_DIR}/config/jenkinsdb-${DATE}.sql.gz\nfi\n\n# Start Jenkins\nstart_jenkins\n\n# Cloud backup (uncomment and configure as needed)\n# aws s3 cp ${BACKUP_DIR}/ s3://jenkins-backups/${DATE}/ --recursive --sse AES256\n# az storage blob upload-batch --source ${BACKUP_DIR} --destination jenkins-backups --destination-path ${DATE}\n# gsutil cp -r ${BACKUP_DIR}/* gs://jenkins-backups/${DATE}/\n\n# Verify backup integrity\necho \u0026quot;Verifying backup integrity...\u0026quot;\nLATEST_BACKUP=$(ls -t ${BACKUP_DIR}/config/jenkins-home-*.tar.gz | head -1)\nif tar -tzf \u0026quot;$LATEST_BACKUP\u0026quot; \u0026gt;/dev/null 2\u0026gt;\u0026amp;1; then\n    echo \u0026quot;✅ Backup integrity verified\u0026quot;\n    BACKUP_SIZE=$(du -h \u0026quot;$LATEST_BACKUP\u0026quot; | cut -f1)\n    echo \u0026quot;Backup size: $BACKUP_SIZE\u0026quot;\nelse\n    echo \u0026quot;❌ Backup integrity check failed\u0026quot;\n    exit 1\nfi\n\n# Cleanup old backups\necho \u0026quot;Cleaning up old backups (keeping last $RETENTION_DAYS days)...\u0026quot;\nfind ${BACKUP_DIR} -name \u0026quot;jenkins-*\u0026quot; -type f -mtime +${RETENTION_DAYS} -delete\nfind ${BACKUP_DIR} -name \u0026quot;plugin-list-*\u0026quot; -type f -mtime +${RETENTION_DAYS} -delete\nfind ${BACKUP_DIR} -name \u0026quot;*-${DATE}*\u0026quot; -type d -mtime +${RETENTION_DAYS} -exec rm -rf {} \\;\n\n# Generate backup report\necho \u0026quot;Generating backup report...\u0026quot;\ncat \u0026gt; ${BACKUP_DIR}/backup-report-${DATE}.txt \u0026lt;\u0026lt;EOF\nJenkins Backup Report - ${DATE}\n================================\n\nBackup Location: ${BACKUP_DIR}\nJenkins Home: ${JENKINS_HOME}\nBackup Date: $(date)\nServer: $(hostname)\n\nFiles backed up:\n- Jenkins Home: $(ls -lh ${BACKUP_DIR}/config/jenkins-home-${DATE}.tar.gz)\n- Job Configs: $(ls -lh ${BACKUP_DIR}/jobs/job-configs-${DATE}.tar.gz)\n- Plugins: $(ls -lh ${BACKUP_DIR}/plugins/plugin-list-${DATE}.txt)\n- Secrets: $(ls -lh ${BACKUP_DIR}/secrets/jenkins-secrets-${DATE}.tar.gz 2\u0026gt;/dev/null || echo \u0026quot;No secrets backup\u0026quot;)\n- System Config: $(ls -lh ${BACKUP_DIR}/config/system-config-${DATE}.tar.gz 2\u0026gt;/dev/null || echo \u0026quot;No system config backup\u0026quot;)\n\nTotal Backup Size: $(du -h ${BACKUP_DIR} | tail -1 | cut -f1)\n\nVerification: ✅ Passed\nEOF\n\necho \u0026quot;✅ Jenkins backup completed: ${DATE}\u0026quot;\necho \u0026quot;📊 Backup report: ${BACKUP_DIR}/backup-report-${DATE}.txt\u0026quot;\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"restore-procedures\" class=\"mobile-header\"\u003eRestore Procedures\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e#!/bin/bash\n# jenkins-restore.sh\n\nBACKUP_FILE=\u0026quot;${1}\u0026quot;\nRESTORE_TYPE=\u0026quot;${2:-full}\u0026quot;  # full, config-only, jobs-only\n\nusage() {\n    echo \u0026quot;Usage: $0 \u0026lt;backup_file\u0026gt; [restore_type]\u0026quot;\n    echo \u0026quot;Restore types: full (default), config-only, jobs-only\u0026quot;\n    echo \u0026quot;\u0026quot;\n    echo \u0026quot;Available backups:\u0026quot;\n    ls -la /backup/jenkins/config/jenkins-home-*.tar.gz | head -10\n    exit 1\n}\n\nif [ -z \u0026quot;$BACKUP_FILE\u0026quot; ]; then\n    usage\nfi\n\nif [ ! -f \u0026quot;$BACKUP_FILE\u0026quot; ]; then\n    echo \u0026quot;❌ Backup file not found: $BACKUP_FILE\u0026quot;\n    exit 1\nfi\n\necho \u0026quot;🔄 Starting Jenkins restore from: $BACKUP_FILE\u0026quot;\necho \u0026quot;Restore type: $RESTORE_TYPE\u0026quot;\n\n# Pre-restore backup of current state\nif [ -d \u0026quot;/var/lib/jenkins\u0026quot; ]; then\n    echo \u0026quot;📦 Creating backup of current installation...\u0026quot;\n    CURRENT_BACKUP=\u0026quot;/backup/jenkins/pre-restore-$(date +%s)\u0026quot;\n    mkdir -p \u0026quot;$CURRENT_BACKUP\u0026quot;\n    mv /var/lib/jenkins \u0026quot;$CURRENT_BACKUP/jenkins-$(date +%Y%m%d_%H%M%S)\u0026quot;\n    echo \u0026quot;Current installation backed up to: $CURRENT_BACKUP\u0026quot;\nfi\n\n# Stop Jenkins\necho \u0026quot;⏹️  Stopping Jenkins...\u0026quot;\nsystemctl stop jenkins\n\ncase \u0026quot;$RESTORE_TYPE\u0026quot; in\n    \u0026quot;full\u0026quot;)\n        echo \u0026quot;🔄 Performing full restore...\u0026quot;\n        \n        # Create new Jenkins directory\n        mkdir -p /var/lib/jenkins\n        \n        # Restore from backup\n        echo \u0026quot;📂 Extracting backup archive...\u0026quot;\n        tar -xzf \u0026quot;$BACKUP_FILE\u0026quot; -C /var/lib/jenkins\n        \n        # Set proper ownership\n        chown -R jenkins:jenkins /var/lib/jenkins\n        chmod -R 755 /var/lib/jenkins\n        \n        # Special permissions for secrets\n        if [ -d \u0026quot;/var/lib/jenkins/secrets\u0026quot; ]; then\n            chmod 700 /var/lib/jenkins/secrets\n            chmod 600 /var/lib/jenkins/secrets/*\n        fi\n        ;;\n        \n    \u0026quot;config-only\u0026quot;)\n        echo \u0026quot;🔄 Performing configuration-only restore...\u0026quot;\n        \n        # Create minimal Jenkins directory\n        mkdir -p /var/lib/jenkins\n        \n        # Extract only configuration files\n        tar -xzf \u0026quot;$BACKUP_FILE\u0026quot; -C /var/lib/jenkins \\\n            --include=\u0026quot;*/config.xml\u0026quot; \\\n            --include=\u0026quot;*/secrets/*\u0026quot; \\\n            --include=\u0026quot;*/users/*\u0026quot; \\\n            --include=\u0026quot;*/plugins/*\u0026quot; \\\n            --exclude=\u0026quot;*/workspace/*\u0026quot; \\\n            --exclude=\u0026quot;*/builds/*\u0026quot;\n            \n        chown -R jenkins:jenkins /var/lib/jenkins\n        ;;\n        \n    \u0026quot;jobs-only\u0026quot;)\n        echo \u0026quot;🔄 Performing jobs-only restore...\u0026quot;\n        \n        if [ ! -d \u0026quot;/var/lib/jenkins\u0026quot; ]; then\n            echo \u0026quot;❌ Jenkins directory not found. Cannot restore jobs only.\u0026quot;\n            exit 1\n        fi\n        \n        # Backup current jobs\n        if [ -d \u0026quot;/var/lib/jenkins/jobs\u0026quot; ]; then\n            mv /var/lib/jenkins/jobs \u0026quot;/var/lib/jenkins/jobs.backup.$(date +%s)\u0026quot;\n        fi\n        \n        # Extract only jobs\n        tar -xzf \u0026quot;$BACKUP_FILE\u0026quot; -C /var/lib/jenkins jobs/\n        chown -R jenkins:jenkins /var/lib/jenkins/jobs\n        ;;\n        \n    *)\n        echo \u0026quot;❌ Unknown restore type: $RESTORE_TYPE\u0026quot;\n        usage\n        ;;\nesac\n\n# Restore system configuration if available\nBACKUP_DIR=$(dirname \u0026quot;$BACKUP_FILE\u0026quot;)\nBACKUP_DATE=$(basename \u0026quot;$BACKUP_FILE\u0026quot; .tar.gz | sed \u0026#039;s/jenkins-home-//\u0026#039;)\nSYSTEM_CONFIG=\u0026quot;${BACKUP_DIR}/../config/system-config-${BACKUP_DATE}.tar.gz\u0026quot;\n\nif [ -f \u0026quot;$SYSTEM_CONFIG\u0026quot; ]; then\n    echo \u0026quot;🔧 Restoring system configuration...\u0026quot;\n    tar -xzf \u0026quot;$SYSTEM_CONFIG\u0026quot; -C / 2\u0026gt;/dev/null\n    systemctl daemon-reload\nfi\n\n# Restore database if available\nDB_BACKUP=\u0026quot;${BACKUP_DIR}/jenkinsdb-${BACKUP_DATE}.sql.gz\u0026quot;\nif [ -f \u0026quot;$DB_BACKUP\u0026quot; ]; then\n    echo \u0026quot;🗄️  Restoring database...\u0026quot;\n    zcat \u0026quot;$DB_BACKUP\u0026quot; | sudo -u postgres psql jenkinsdb\nfi\n\n# Start Jenkins\necho \u0026quot;▶️  Starting Jenkins...\u0026quot;\nsystemctl start jenkins\n\n# Wait for Jenkins to start and verify\necho \u0026quot;⏳ Waiting for Jenkins to start...\u0026quot;\nfor i in {1..120}; do\n    if curl -f http://localhost:8080/login \u0026gt;/dev/null 2\u0026gt;\u0026amp;1; then\n        echo \u0026quot;✅ Jenkins started successfully\u0026quot;\n        break\n    fi\n    echo \u0026quot;Waiting for Jenkins to start... (${i}/120)\u0026quot;\n    sleep 10\ndone\n\n# Verify restoration\necho \u0026quot;🔍 Verifying restoration...\u0026quot;\nif curl -f http://localhost:8080/login \u0026gt;/dev/null 2\u0026gt;\u0026amp;1; then\n    echo \u0026quot;✅ Jenkins is responding\u0026quot;\n    \n    # Check if jobs were restored\n    if [ -d \u0026quot;/var/lib/jenkins/jobs\u0026quot; ]; then\n        JOB_COUNT=$(ls -1 /var/lib/jenkins/jobs | wc -l)\n        echo \u0026quot;📋 Jobs restored: $JOB_COUNT\u0026quot;\n    fi\n    \n    # Check if plugins were restored\n    if [ -d \u0026quot;/var/lib/jenkins/plugins\u0026quot; ]; then\n        PLUGIN_COUNT=$(ls -1 /var/lib/jenkins/plugins | wc -l)\n        echo \u0026quot;🔌 Plugins restored: $PLUGIN_COUNT\u0026quot;\n    fi\n    \n    echo \u0026quot;✅ Jenkins restoration completed successfully\u0026quot;\n    echo \u0026quot;\u0026quot;\n    echo \u0026quot;📝 Next steps:\u0026quot;\n    echo \u0026quot;1. Verify Jenkins configuration via web interface\u0026quot;\n    echo \u0026quot;2. Check plugin compatibility and update if needed\u0026quot;\n    echo \u0026quot;3. Verify job configurations and test builds\u0026quot;\n    echo \u0026quot;4. Update any environment-specific settings\u0026quot;\n    \nelse\n    echo \u0026quot;❌ Jenkins restoration failed - service not responding\u0026quot;\n    echo \u0026quot;Check logs: journalctl -u jenkins -n 50\u0026quot;\n    exit 1\nfi\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"disaster-recovery\" class=\"mobile-header\"\u003eDisaster Recovery\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e#!/bin/bash\n# jenkins-disaster-recovery.sh\n\necho \u0026quot;🚨 Jenkins Disaster Recovery Procedure\u0026quot;\necho \u0026quot;======================================\u0026quot;\n\n# Check if Jenkins is running\nif systemctl is-active jenkins \u0026gt;/dev/null 2\u0026gt;\u0026amp;1; then\n    echo \u0026quot;⚠️  Jenkins is running. This procedure should be run on a failed system.\u0026quot;\n    read -p \u0026quot;Continue anyway? (y/N): \u0026quot; -n 1 -r\n    echo\n    if [[ ! $REPLY =~ ^[Yy]$ ]]; then\n        exit 1\n    fi\nfi\n\n# Find latest backup\nBACKUP_DIR=\u0026quot;/backup/jenkins\u0026quot;\nLATEST_BACKUP=$(ls -t ${BACKUP_DIR}/config/jenkins-home-*.tar.gz 2\u0026gt;/dev/null | head -1)\n\nif [ -z \u0026quot;$LATEST_BACKUP\u0026quot; ]; then\n    echo \u0026quot;❌ No backups found in ${BACKUP_DIR}\u0026quot;\n    echo \u0026quot;Please restore from cloud backup or external storage\u0026quot;\n    exit 1\nfi\n\necho \u0026quot;📦 Latest backup found: $LATEST_BACKUP\u0026quot;\necho \u0026quot;📅 Backup date: $(basename \u0026quot;$LATEST_BACKUP\u0026quot; .tar.gz | sed \u0026#039;s/jenkins-home-//\u0026#039;)\u0026quot;\n\n# Verify backup integrity\necho \u0026quot;🔍 Verifying backup integrity...\u0026quot;\nif tar -tzf \u0026quot;$LATEST_BACKUP\u0026quot; \u0026gt;/dev/null 2\u0026gt;\u0026amp;1; then\n    echo \u0026quot;✅ Backup integrity verified\u0026quot;\nelse\n    echo \u0026quot;❌ Backup is corrupted. Cannot proceed with recovery.\u0026quot;\n    exit 1\nfi\n\n# Create disaster recovery log\nDR_LOG=\u0026quot;/var/log/jenkins-disaster-recovery-$(date +%Y%m%d_%H%M%S).log\u0026quot;\nexec \u0026gt; \u0026gt;(tee -a \u0026quot;$DR_LOG\u0026quot;)\nexec 2\u0026gt;\u0026amp;1\n\necho \u0026quot;📝 Disaster recovery log: $DR_LOG\u0026quot;\n\n# System preparation\necho \u0026quot;🔧 Preparing system for recovery...\u0026quot;\n\n# Install Jenkins if not present\nif ! command -v jenkins \u0026gt;/dev/null 2\u0026gt;\u0026amp;1; then\n    echo \u0026quot;📦 Installing Jenkins...\u0026quot;\n    # Add Jenkins repository and install (distribution-specific commands)\n    if [ -f /etc/debian_version ]; then\n        wget -q -O - https://pkg.jenkins.io/debian-stable/jenkins.io.key | apt-key add -\n        echo \u0026quot;deb https://pkg.jenkins.io/debian-stable binary/\u0026quot; \u0026gt; /etc/apt/sources.list.d/jenkins.list\n        apt-get update\n        apt-get install -y openjdk-17-jdk jenkins\n    elif [ -f /etc/redhat-release ]; then\n        yum install -y java-17-openjdk jenkins\n    fi\nfi\n\n# Stop Jenkins service\nsystemctl stop jenkins\n\n# Clear existing Jenkins data\nif [ -d \u0026quot;/var/lib/jenkins\u0026quot; ]; then\n    echo \u0026quot;🗑️  Removing existing Jenkins data...\u0026quot;\n    rm -rf /var/lib/jenkins.disaster-backup-$(date +%s)\n    mv /var/lib/jenkins /var/lib/jenkins.disaster-backup-$(date +%s)\nfi\n\n# Create new Jenkins directory\nmkdir -p /var/lib/jenkins\n\n# Restore from backup\necho \u0026quot;🔄 Restoring Jenkins from backup...\u0026quot;\ntar -xzf \u0026quot;$LATEST_BACKUP\u0026quot; -C /var/lib/jenkins\n\n# Set proper permissions\nchown -R jenkins:jenkins /var/lib/jenkins\nchmod -R 755 /var/lib/jenkins\n\n# Special permissions for sensitive files\nif [ -d \u0026quot;/var/lib/jenkins/secrets\u0026quot; ]; then\n    chmod 700 /var/lib/jenkins/secrets\n    chmod 600 /var/lib/jenkins/secrets/*\nfi\n\nif [ -d \u0026quot;/var/lib/jenkins/users\u0026quot; ]; then\n    chmod 700 /var/lib/jenkins/users\nfi\n\n# Restore system configuration\nBACKUP_DATE=$(basename \u0026quot;$LATEST_BACKUP\u0026quot; .tar.gz | sed \u0026#039;s/jenkins-home-//\u0026#039;)\nSYSTEM_CONFIG=\u0026quot;${BACKUP_DIR}/config/system-config-${BACKUP_DATE}.tar.gz\u0026quot;\n\nif [ -f \u0026quot;$SYSTEM_CONFIG\u0026quot; ]; then\n    echo \u0026quot;🔧 Restoring system configuration...\u0026quot;\n    tar -xzf \u0026quot;$SYSTEM_CONFIG\u0026quot; -C / 2\u0026gt;/dev/null\n    systemctl daemon-reload\nfi\n\n# Restore database if available\nDB_BACKUP=\u0026quot;${BACKUP_DIR}/config/jenkinsdb-${BACKUP_DATE}.sql.gz\u0026quot;\nif [ -f \u0026quot;$DB_BACKUP\u0026quot; ]; then\n    echo \u0026quot;🗄️  Restoring database...\u0026quot;\n    # Ensure PostgreSQL is running\n    systemctl start postgresql\n    \n    # Drop and recreate database\n    sudo -u postgres psql -c \u0026quot;DROP DATABASE IF EXISTS jenkinsdb;\u0026quot;\n    sudo -u postgres psql -c \u0026quot;CREATE DATABASE jenkinsdb;\u0026quot;\n    sudo -u postgres psql -c \u0026quot;GRANT ALL PRIVILEGES ON DATABASE jenkinsdb TO jenkinsuser;\u0026quot;\n    \n    # Restore database\n    zcat \u0026quot;$DB_BACKUP\u0026quot; | sudo -u postgres psql jenkinsdb\nfi\n\n# Configure firewall\necho \u0026quot;🔥 Configuring firewall...\u0026quot;\nif command -v ufw \u0026gt;/dev/null 2\u0026gt;\u0026amp;1; then\n    ufw allow 8080/tcp\n    ufw allow 50000/tcp\nelif command -v firewall-cmd \u0026gt;/dev/null 2\u0026gt;\u0026amp;1; then\n    firewall-cmd --permanent --add-port=8080/tcp\n    firewall-cmd --permanent --add-port=50000/tcp\n    firewall-cmd --reload\nfi\n\n# Start Jenkins\necho \u0026quot;▶️  Starting Jenkins...\u0026quot;\nsystemctl enable jenkins\nsystemctl start jenkins\n\n# Wait for Jenkins to start\necho \u0026quot;⏳ Waiting for Jenkins to initialize...\u0026quot;\nfor i in {1..300}; do\n    if curl -f http://localhost:8080/login \u0026gt;/dev/null 2\u0026gt;\u0026amp;1; then\n        echo \u0026quot;✅ Jenkins is responding\u0026quot;\n        break\n    fi\n    echo \u0026quot;Waiting for Jenkins... (${i}/300)\u0026quot;\n    sleep 10\ndone\n\n# Verify recovery\necho \u0026quot;🔍 Verifying disaster recovery...\u0026quot;\n\n# Check Jenkins status\nif systemctl is-active jenkins \u0026gt;/dev/null 2\u0026gt;\u0026amp;1; then\n    echo \u0026quot;✅ Jenkins service is running\u0026quot;\nelse\n    echo \u0026quot;❌ Jenkins service failed to start\u0026quot;\n    echo \u0026quot;Check logs: journalctl -u jenkins -n 50\u0026quot;\n    exit 1\nfi\n\n# Check web interface\nif curl -f http://localhost:8080/login \u0026gt;/dev/null 2\u0026gt;\u0026amp;1; then\n    echo \u0026quot;✅ Jenkins web interface is accessible\u0026quot;\nelse\n    echo \u0026quot;❌ Jenkins web interface is not responding\u0026quot;\n    exit 1\nfi\n\n# Check jobs restoration\nif [ -d \u0026quot;/var/lib/jenkins/jobs\u0026quot; ]; then\n    JOB_COUNT=$(ls -1 /var/lib/jenkins/jobs 2\u0026gt;/dev/null | wc -l)\n    echo \u0026quot;📋 Jobs recovered: $JOB_COUNT\u0026quot;\nelse\n    echo \u0026quot;⚠️  No jobs directory found\u0026quot;\nfi\n\n# Check plugins restoration\nif [ -d \u0026quot;/var/lib/jenkins/plugins\u0026quot; ]; then\n    PLUGIN_COUNT=$(ls -1 /var/lib/jenkins/plugins 2\u0026gt;/dev/null | wc -l)\n    echo \u0026quot;🔌 Plugins recovered: $PLUGIN_COUNT\u0026quot;\nelse\n    echo \u0026quot;⚠️  No plugins directory found\u0026quot;\nfi\n\n# Generate recovery report\necho \u0026quot;📊 Generating disaster recovery report...\u0026quot;\ncat \u0026gt; \u0026quot;/var/log/jenkins-recovery-report-$(date +%Y%m%d_%H%M%S).txt\u0026quot; \u0026lt;\u0026lt;EOF\nJenkins Disaster Recovery Report\n===============================\nRecovery Date: $(date)\nServer: $(hostname)\nBackup Used: $LATEST_BACKUP\nRecovery Log: $DR_LOG\n\nRecovery Summary:\n- Jenkins Service: $(systemctl is-active jenkins)\n- Web Interface: $(curl -s -o /dev/null -w \u0026quot;%{http_code}\u0026quot; http://localhost:8080/login)\n- Jobs Recovered: $JOB_COUNT\n- Plugins Recovered: $PLUGIN_COUNT\n- Database Restored: $([ -f \u0026quot;$DB_BACKUP\u0026quot; ] \u0026amp;\u0026amp; echo \u0026quot;Yes\u0026quot; || echo \u0026quot;No\u0026quot;)\n\nNext Steps:\n1. Verify Jenkins configuration via web interface: http://$(hostname):8080\n2. Test critical job configurations\n3. Update any environment-specific settings\n4. Verify agent connections\n5. Test integrations (SCM, notifications, etc.)\n6. Update DNS/load balancer configurations if needed\n7. Notify team of recovery completion\n\nRecovery Status: ✅ COMPLETED\nEOF\n\necho \u0026quot;\u0026quot;\necho \u0026quot;🎉 Jenkins disaster recovery completed successfully!\u0026quot;\necho \u0026quot;📝 Recovery report saved to: /var/log/jenkins-recovery-report-$(date +%Y%m%d_%H%M%S).txt\u0026quot;\necho \u0026quot;\u0026quot;\necho \u0026quot;🔗 Access Jenkins: http://$(hostname):8080\u0026quot;\necho \u0026quot;\u0026quot;\necho \u0026quot;⚠️  Important post-recovery tasks:\u0026quot;\necho \u0026quot;1. Verify all job configurations\u0026quot;\necho \u0026quot;2. Test agent connections\u0026quot;\necho \u0026quot;3. Verify integrations (GitHub, LDAP, etc.)\u0026quot;\necho \u0026quot;4. Update any environment-specific configurations\u0026quot;\necho \u0026quot;5. Perform a backup of the recovered system\u0026quot;\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"troubleshooting\" class=\"mobile-header\"\u003eTroubleshooting\u003c/h2\u003e\n\u003ch3 id=\"common-issues\" class=\"mobile-header\"\u003eCommon Issues\u003c/h3\u003e\n\u003cp class=\"mobile-paragraph\"\u003e1. \u003cstrong\u003eJenkins won't start\u003c/strong\u003e:\u003c/p\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Check service status and logs\nsudo systemctl status jenkins\nsudo journalctl -u jenkins -f\n\n# Check Java version and JAVA_HOME\njava -version\necho $JAVA_HOME\n\n# Check disk space\ndf -h /var/lib/jenkins\n\n# Check permissions\nls -la /var/lib/jenkins\nsudo chown -R jenkins:jenkins /var/lib/jenkins\n\n# Check memory allocation\nfree -h\nps aux | grep jenkins\n\n# Clear Jenkins cache\nsudo systemctl stop jenkins\nsudo rm -rf /var/lib/jenkins/war\nsudo systemctl start jenkins\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003cp class=\"mobile-paragraph\"\u003e2. \u003cstrong\u003eMemory issues\u003c/strong\u003e:\u003c/p\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Increase JVM memory\nsudo systemctl edit jenkins\n# Add:\n[Service]\nEnvironment=\u0026quot;JAVA_OPTS=-Xmx8g -Xms4g -XX:+UseG1GC\u0026quot;\n\nsudo systemctl daemon-reload\nsudo systemctl restart jenkins\n\n# Monitor memory usage\ntop -p $(pgrep java)\njstat -gc $(pgrep java) 5s\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003cp class=\"mobile-paragraph\"\u003e3. \u003cstrong\u003ePlugin issues\u003c/strong\u003e:\u003c/p\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Safe start (disable all plugins)\nsudo systemctl stop jenkins\necho \u0026#039;jenkins.install.runSetupWizard=false\u0026#039; \u0026gt; /var/lib/jenkins/jenkins.install.runSetupWizard\nsudo systemctl start jenkins\n\n# Clear plugin cache\nsudo rm -rf /var/lib/jenkins/plugins/*.bak\nsudo rm -rf /var/lib/jenkins/plugins/*.hpi.pinned\n\n# Update plugins via CLI\njava -jar jenkins-cli.jar -s http://localhost:8080 -auth admin:password list-plugins | grep -E \u0026quot;\\)$\u0026quot; | awk \u0026#039;{print $1}\u0026#039; | xargs java -jar jenkins-cli.jar -s http://localhost:8080 -auth admin:password install-plugin\n\n# Check plugin dependencies\njava -jar jenkins-cli.jar -s http://localhost:8080 -auth admin:password list-plugins | grep -v \u0026quot;^$\u0026quot;\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003cp class=\"mobile-paragraph\"\u003e4. \u003cstrong\u003eBuild failures\u003c/strong\u003e:\u003c/p\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Check workspace permissions\nsudo chown -R jenkins:jenkins /var/lib/jenkins/workspace\n\n# Clear old builds\njava -jar jenkins-cli.jar -s http://localhost:8080 -auth admin:password delete-builds job-name 1-100\n\n# Check agent connectivity\njava -jar jenkins-cli.jar -s http://localhost:8080 -auth admin:password list-computers\njava -jar jenkins-cli.jar -s http://localhost:8080 -auth admin:password connect-node agent-name\n\n# Monitor build resources\nhtop\niostat -x 1\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"debug-mode\" class=\"mobile-header\"\u003eDebug Mode\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Enable debug logging for Jenkins\nsudo systemctl edit jenkins\n# Add:\n[Service]\nEnvironment=\u0026quot;JAVA_OPTS=-Xmx4g -Djava.util.logging.config.file=/var/lib/jenkins/logging.properties\u0026quot;\n\n# Create detailed logging configuration\nsudo tee /var/lib/jenkins/logging.properties \u0026lt;\u0026lt;EOF\n.level = INFO\n\n# Root logger\nhandlers = java.util.logging.ConsoleHandler, java.util.logging.FileHandler\n\n# Console logging\njava.util.logging.ConsoleHandler.level = INFO\njava.util.logging.ConsoleHandler.formatter = java.util.logging.SimpleFormatter\n\n# File logging\njava.util.logging.FileHandler.pattern = /var/log/jenkins/jenkins-debug.log\njava.util.logging.FileHandler.limit = 50000000\njava.util.logging.FileHandler.count = 5\njava.util.logging.FileHandler.formatter = java.util.logging.SimpleFormatter\n\n# Component-specific logging\nhudson.level = FINE\njenkins.level = FINE\nhudson.security.level = FINE\nhudson.plugins.level = FINE\nhudson.model.level = FINE\n\n# Plugin debugging\nhudson.plugins.git.level = FINE\norg.jenkinsci.plugins.workflow.level = FINE\nEOF\n\nsudo systemctl restart jenkins\n\n# View debug logs\nsudo tail -f /var/log/jenkins/jenkins-debug.log\n\n# Enable specific plugin debugging via Jenkins CLI\njava -jar jenkins-cli.jar -s http://localhost:8080 -auth admin:password groovy = \u0026lt;\u0026lt;EOF\nimport java.util.logging.Logger\nimport java.util.logging.Level\n\n// Enable debug logging for specific components\nLogger.getLogger(\u0026quot;hudson.security\u0026quot;).setLevel(Level.FINE)\nLogger.getLogger(\u0026quot;hudson.plugins.git\u0026quot;).setLevel(Level.FINE)\nLogger.getLogger(\u0026quot;org.jenkinsci.plugins.workflow\u0026quot;).setLevel(Level.FINE)\n\nprintln \u0026quot;Debug logging enabled\u0026quot;\nEOF\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"maintenance\" class=\"mobile-header\"\u003eMaintenance\u003c/h2\u003e\n\u003ch3 id=\"update-procedures\" class=\"mobile-header\"\u003eUpdate Procedures\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# RHEL/CentOS/Rocky/AlmaLinux\nsudo dnf check-update jenkins\nsudo dnf update jenkins\n\n# Debian/Ubuntu\nsudo apt update\nsudo apt upgrade jenkins\n\n# Arch Linux\nyay -Syu jenkins\n\n# Alpine Linux (Docker)\ndocker pull jenkins/jenkins:lts-jdk17\ndocker stop jenkins\ndocker rm jenkins\n# Re-run docker run command with new image\n\n# openSUSE\nsudo zypper update jenkins\n\n# FreeBSD\npkg update\npkg upgrade jenkins\n\n# macOS\nbrew upgrade jenkins-lts\n\n# Always backup before updates\nsudo /usr/local/bin/jenkins-backup.sh\n\n# Update plugins after Jenkins update\njava -jar jenkins-cli.jar -s http://localhost:8080 -auth admin:password list-plugins | grep -E \u0026quot;\\)$\u0026quot; | awk \u0026#039;{print $1}\u0026#039; | xargs java -jar jenkins-cli.jar -s http://localhost:8080 -auth admin:password install-plugin\n\n# Restart after updates\nsudo systemctl restart jenkins\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"maintenance-tasks\" class=\"mobile-header\"\u003eMaintenance Tasks\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e#!/bin/bash\n# jenkins-maintenance.sh\n\nJENKINS_HOME=\u0026quot;/var/lib/jenkins\u0026quot;\nJENKINS_URL=\u0026quot;http://localhost:8080\u0026quot;\nADMIN_CREDENTIALS=\u0026quot;admin:SecureAdminPassword123!\u0026quot;\n\necho \u0026quot;🔧 Starting Jenkins maintenance tasks...\u0026quot;\n\n# Clean up old builds\necho \u0026quot;🗑️  Cleaning up old builds...\u0026quot;\njava -jar ${JENKINS_HOME}/jenkins-cli.jar -s ${JENKINS_URL} -auth ${ADMIN_CREDENTIALS} groovy = \u0026lt;\u0026lt;EOF\nimport jenkins.model.Jenkins\nimport hudson.model.*\n\nJenkins.instance.getAllItems(Job.class).each { job -\u0026gt;\n    if (job.getBuilds().size() \u0026gt; 50) {\n        def buildsToDelete = job.getBuilds().drop(50)\n        println \u0026quot;Deleting \\${buildsToDelete.size()} old builds for job: \\${job.name}\u0026quot;\n        buildsToDelete.each { build -\u0026gt;\n            build.delete()\n        }\n    }\n}\nEOF\n\n# Clean up workspace\necho \u0026quot;🧹 Cleaning up workspaces...\u0026quot;\njava -jar ${JENKINS_HOME}/jenkins-cli.jar -s ${JENKINS_URL} -auth ${ADMIN_CREDENTIALS} groovy = \u0026lt;\u0026lt;EOF\nimport hudson.model.*\nimport hudson.FilePath\nimport jenkins.model.Jenkins\n\nJenkins.instance.getAllItems(AbstractProject.class).each { job -\u0026gt;\n    def workspace = job.getWorkspace()\n    if (workspace != null \u0026amp;\u0026amp; workspace.exists()) {\n        def size = workspace.length()\n        if (size \u0026gt; 1024 * 1024 * 100) { // \u0026gt; 100MB\n            println \u0026quot;Workspace for \\${job.name} is \\${size / (1024*1024)} MB\u0026quot;\n            workspace.deleteRecursive()\n            println \u0026quot;Cleaned workspace for job: \\${job.name}\u0026quot;\n        }\n    }\n}\nEOF\n\n# Update plugins\necho \u0026quot;🔌 Checking for plugin updates...\u0026quot;\njava -jar ${JENKINS_HOME}/jenkins-cli.jar -s ${JENKINS_URL} -auth ${ADMIN_CREDENTIALS} list-plugins | grep -E \u0026quot;\\)$\u0026quot; \u0026gt; /tmp/outdated-plugins.txt\n\nif [ -s /tmp/outdated-plugins.txt ]; then\n    echo \u0026quot;📦 Updating outdated plugins:\u0026quot;\n    cat /tmp/outdated-plugins.txt\n    \n    # Update plugins\n    awk \u0026#039;{print $1}\u0026#039; /tmp/outdated-plugins.txt | xargs java -jar ${JENKINS_HOME}/jenkins-cli.jar -s ${JENKINS_URL} -auth ${ADMIN_CREDENTIALS} install-plugin\n    \n    echo \u0026quot;🔄 Restarting Jenkins to apply plugin updates...\u0026quot;\n    java -jar ${JENKINS_HOME}/jenkins-cli.jar -s ${JENKINS_URL} -auth ${ADMIN_CREDENTIALS} safe-restart\nfi\n\n# Clean up logs\necho \u0026quot;📋 Rotating and cleaning logs...\u0026quot;\nfind ${JENKINS_HOME}/logs -name \u0026quot;*.log\u0026quot; -mtime +7 -delete\nfind /var/log/jenkins -name \u0026quot;*.log.*\u0026quot; -mtime +7 -delete\n\n# Disk usage check\necho \u0026quot;💾 Checking disk usage...\u0026quot;\nDISK_USAGE=$(df ${JENKINS_HOME} | awk \u0026#039;NR==2 {print $5}\u0026#039; | sed \u0026#039;s/%//\u0026#039;)\nif [ ${DISK_USAGE} -gt 80 ]; then\n    echo \u0026quot;⚠️  High disk usage: ${DISK_USAGE}%\u0026quot;\n    \n    # Clean up large files\n    find ${JENKINS_HOME}/jobs -name \u0026quot;*.log\u0026quot; -size +100M -mtime +3 -delete\n    find ${JENKINS_HOME}/workspace -name \u0026quot;*\u0026quot; -size +500M -mtime +1 -delete\nfi\n\n# Backup verification\necho \u0026quot;🔍 Verifying recent backups...\u0026quot;\nLATEST_BACKUP=$(ls -t /backup/jenkins/config/jenkins-home-*.tar.gz 2\u0026gt;/dev/null | head -1)\nif [ -n \u0026quot;$LATEST_BACKUP\u0026quot; ]; then\n    BACKUP_AGE=$(($(date +%s) - $(stat -c %Y \u0026quot;$LATEST_BACKUP\u0026quot;)))\n    if [ $BACKUP_AGE -gt 172800 ]; then  # 2 days\n        echo \u0026quot;⚠️  Latest backup is older than 2 days: $LATEST_BACKUP\u0026quot;\n        echo \u0026quot;💾 Running backup now...\u0026quot;\n        /usr/local/bin/jenkins-backup.sh\n    else\n        echo \u0026quot;✅ Recent backup found: $LATEST_BACKUP\u0026quot;\n    fi\nelse\n    echo \u0026quot;❌ No backups found. Running backup...\u0026quot;\n    /usr/local/bin/jenkins-backup.sh\nfi\n\n# Security check\necho \u0026quot;🔒 Running security checks...\u0026quot;\njava -jar ${JENKINS_HOME}/jenkins-cli.jar -s ${JENKINS_URL} -auth ${ADMIN_CREDENTIALS} groovy = \u0026lt;\u0026lt;EOF\nimport jenkins.security.ApiTokenProperty\nimport hudson.security.SecurityRealm\nimport jenkins.model.Jenkins\n\ndef instance = Jenkins.getInstance()\n\n// Check for default passwords\ndef realm = instance.getSecurityRealm()\nif (realm instanceof hudson.security.HudsonPrivateSecurityRealm) {\n    def users = realm.getAllUsers()\n    users.each { user -\u0026gt;\n        if (user.getId() == \u0026quot;admin\u0026quot;) {\n            println \u0026quot;⚠️  Default admin user found. Consider renaming or removing.\u0026quot;\n        }\n    }\n}\n\n// Check for anonymous access\ndef authStrategy = instance.getAuthorizationStrategy()\nif (authStrategy.hasPermission(org.acegisecurity.Authentication.ANONYMOUS_USER, Jenkins.READ)) {\n    println \u0026quot;⚠️  Anonymous read access is enabled\u0026quot;\n}\n\nprintln \u0026quot;Security check completed\u0026quot;\nEOF\n\n# Performance check\necho \u0026quot;📊 Checking performance metrics...\u0026quot;\nJAVA_PID=$(pgrep java)\nif [ -n \u0026quot;$JAVA_PID\u0026quot; ]; then\n    MEMORY_USAGE=$(ps -o pid,vsz,rss,comm -p $JAVA_PID | awk \u0026#039;NR==2 {print $3/1024}\u0026#039;)\n    CPU_USAGE=$(ps -o pid,pcpu,comm -p $JAVA_PID | awk \u0026#039;NR==2 {print $2}\u0026#039;)\n    \n    echo \u0026quot;Memory usage: ${MEMORY_USAGE}MB\u0026quot;\n    echo \u0026quot;CPU usage: ${CPU_USAGE}%\u0026quot;\n    \n    if (( $(echo \u0026quot;${MEMORY_USAGE} \u0026gt; 6144\u0026quot; | bc -l) )); then\n        echo \u0026quot;⚠️  High memory usage detected\u0026quot;\n    fi\nfi\n\necho \u0026quot;✅ Jenkins maintenance completed\u0026quot;\n\n# Generate maintenance report\ncat \u0026gt; /var/log/jenkins-maintenance-$(date +%Y%m%d).log \u0026lt;\u0026lt;EOF\nJenkins Maintenance Report - $(date)\n===================================\n\nTasks Completed:\n- Old builds cleanup: ✅\n- Workspace cleanup: ✅\n- Plugin updates: $([ -s /tmp/outdated-plugins.txt ] \u0026amp;\u0026amp; echo \u0026quot;✅ Updated\u0026quot; || echo \u0026quot;✅ Up to date\u0026quot;)\n- Log rotation: ✅\n- Disk usage check: ✅ (${DISK_USAGE}%)\n- Backup verification: ✅\n- Security check: ✅\n- Performance check: ✅\n\nSystem Status:\n- Memory usage: ${MEMORY_USAGE}MB\n- CPU usage: ${CPU_USAGE}%\n- Disk usage: ${DISK_USAGE}%\n\nNext maintenance: $(date -d \u0026quot;next week\u0026quot; +%Y-%m-%d)\nEOF\n\necho \u0026quot;📊 Maintenance report: /var/log/jenkins-maintenance-$(date +%Y%m%d).log\u0026quot;\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"health-monitoring\" class=\"mobile-header\"\u003eHealth Monitoring\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Create monitoring cron job\necho \u0026quot;0 2 * * * root /usr/local/bin/jenkins-maintenance.sh\u0026quot; | sudo tee -a /etc/crontab\necho \u0026quot;*/15 * * * * root /usr/local/bin/jenkins-health-check.sh\u0026quot; | sudo tee -a /etc/crontab\n\n# Log rotation configuration\nsudo tee /etc/logrotate.d/jenkins \u0026lt;\u0026lt;EOF\n/var/log/jenkins/*.log {\n    daily\n    rotate 30\n    compress\n    delaycompress\n    missingok\n    notifempty\n    create 640 jenkins adm\n    postrotate\n        systemctl reload jenkins \u0026gt; /dev/null 2\u0026gt;\u0026amp;1 || true\n    endscript\n}\n\n/var/lib/jenkins/logs/*.log {\n    daily\n    rotate 7\n    compress\n    delaycompress\n    missingok\n    notifempty\n    create 640 jenkins jenkins\n}\nEOF\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"integration-examples\" class=\"mobile-header\"\u003eIntegration Examples\u003c/h2\u003e\n\u003ch3 id=\"git-integration-with-webhooks\" class=\"mobile-header\"\u003eGit Integration with Webhooks\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Configure Git webhook for automatic builds\nsudo tee /var/lib/jenkins/casc_configs/git-integration.yaml \u0026lt;\u0026lt;EOF\nunclassified:\n  gitHubPluginConfig:\n    hookUrl: \u0026quot;https://jenkins.example.com/github-webhook/\u0026quot;\n    \n  gitLabConnectionConfig:\n    connections:\n      - name: \u0026quot;GitLab\u0026quot;\n        url: \u0026quot;https://gitlab.example.com\u0026quot;\n        apiTokenId: \u0026quot;gitlab-api-token\u0026quot;\n        clientBuilderId: \u0026quot;autodetect\u0026quot;\n        connectionTimeout: 10\n        readTimeout: 10\n\njobs:\n  - script: |\n      multibranchPipelineJob(\u0026#039;example-app\u0026#039;) {\n        branchSources {\n          git {\n            id(\u0026#039;github-example\u0026#039;)\n            remote(\u0026#039;https://github.com/example/app.git\u0026#039;)\n            credentialsId(\u0026#039;github-credentials\u0026#039;)\n            includes(\u0026#039;main develop feature/* release/*\u0026#039;)\n          }\n        }\n        \n        factory {\n          workflowBranchProjectFactory {\n            scriptPath(\u0026#039;Jenkinsfile\u0026#039;)\n          }\n        }\n        \n        triggers {\n          periodicFolderTrigger {\n            interval(\u0026#039;1d\u0026#039;)\n          }\n        }\n        \n        orphanedItemStrategy {\n          discardOldItems {\n            daysToKeep(7)\n            numToKeep(10)\n          }\n        }\n      }\nEOF\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"docker-integration\" class=\"mobile-header\"\u003eDocker Integration\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"groovy\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003egroovy\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-groovy\"\u003e// Docker pipeline example\npipeline {\n    agent any\n    \n    environment {\n        DOCKER_REGISTRY = credentials(\u0026#039;docker-registry\u0026#039;)\n        DOCKER_IMAGE = \u0026quot;${env.JOB_NAME}:${env.BUILD_NUMBER}\u0026quot;\n    }\n    \n    stages {\n        stage(\u0026#039;Build Docker Image\u0026#039;) {\n            steps {\n                script {\n                    def image = docker.build(\u0026quot;${DOCKER_REGISTRY}/${DOCKER_IMAGE}\u0026quot;)\n                    \n                    // Security scan\n                    sh \u0026quot;\u0026quot;\u0026quot;\n                        docker run --rm -v /var/run/docker.sock:/var/run/docker.sock \\\n                            aquasec/trivy:latest image \\\n                            --severity HIGH,CRITICAL \\\n                            --exit-code 1 \\\n                            ${DOCKER_REGISTRY}/${DOCKER_IMAGE}\n                    \u0026quot;\u0026quot;\u0026quot;\n                    \n                    // Push to registry\n                    docker.withRegistry(\u0026quot;https://${DOCKER_REGISTRY}\u0026quot;, \u0026#039;docker-registry-credentials\u0026#039;) {\n                        image.push()\n                        image.push(\u0026quot;latest\u0026quot;)\n                    }\n                }\n            }\n        }\n        \n        stage(\u0026#039;Deploy\u0026#039;) {\n            steps {\n                script {\n                    // Deploy to Kubernetes\n                    sh \u0026quot;\u0026quot;\u0026quot;\n                        kubectl set image deployment/myapp \\\n                            myapp=${DOCKER_REGISTRY}/${DOCKER_IMAGE} \\\n                            --namespace=production\n                        \n                        kubectl rollout status deployment/myapp \\\n                            --namespace=production --timeout=300s\n                    \u0026quot;\u0026quot;\u0026quot;\n                }\n            }\n        }\n    }\n}\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"kubernetes-integration\" class=\"mobile-header\"\u003eKubernetes Integration\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"yaml\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003eyaml\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-yaml\"\u003e# Jenkins agent in Kubernetes\napiVersion: v1\nkind: ServiceAccount\nmetadata:\n  name: jenkins\n  namespace: jenkins\n---\napiVersion: rbac.authorization.k8s.io/v1\nkind: ClusterRole\nmetadata:\n  name: jenkins\nrules:\n- apiGroups: [\u0026quot;\u0026quot;]\n  resources: [\u0026quot;pods\u0026quot;,\u0026quot;pods/exec\u0026quot;]\n  verbs: [\u0026quot;create\u0026quot;,\u0026quot;delete\u0026quot;,\u0026quot;get\u0026quot;,\u0026quot;list\u0026quot;,\u0026quot;patch\u0026quot;,\u0026quot;update\u0026quot;,\u0026quot;watch\u0026quot;]\n- apiGroups: [\u0026quot;\u0026quot;]\n  resources: [\u0026quot;pods/log\u0026quot;]\n  verbs: [\u0026quot;get\u0026quot;,\u0026quot;list\u0026quot;,\u0026quot;watch\u0026quot;]\n---\napiVersion: rbac.authorization.k8s.io/v1\nkind: ClusterRoleBinding\nmetadata:\n  name: jenkins\nroleRef:\n  apiGroup: rbac.authorization.k8s.io\n  kind: ClusterRole\n  name: jenkins\nsubjects:\n- kind: ServiceAccount\n  name: jenkins\n  namespace: jenkins\n---\n# Jenkins Configuration as Code for Kubernetes\njenkins:\n  clouds:\n    - kubernetes:\n        name: \u0026quot;kubernetes\u0026quot;\n        serverUrl: \u0026quot;https://kubernetes.default\u0026quot;\n        namespace: \u0026quot;jenkins\u0026quot;\n        credentialsId: \u0026quot;kubernetes-token\u0026quot;\n        jenkinsUrl: \u0026quot;http://jenkins.jenkins.svc.cluster.local:8080\u0026quot;\n        containerCapStr: \u0026quot;10\u0026quot;\n        templates:\n          - name: \u0026quot;jenkins-agent\u0026quot;\n            namespace: \u0026quot;jenkins\u0026quot;\n            label: \u0026quot;kubernetes\u0026quot;\n            containers:\n              - name: \u0026quot;jnlp\u0026quot;\n                image: \u0026quot;jenkins/inbound-agent:latest\u0026quot;\n                workingDir: \u0026quot;/home/jenkins/agent\u0026quot;\n                resourceRequestCpu: \u0026quot;100m\u0026quot;\n                resourceRequestMemory: \u0026quot;256Mi\u0026quot;\n                resourceLimitCpu: \u0026quot;500m\u0026quot;\n                resourceLimitMemory: \u0026quot;1Gi\u0026quot;\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"ldapactive-directory-integration\" class=\"mobile-header\"\u003eLDAP/Active Directory Integration\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"yaml\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003eyaml\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-yaml\"\u003ejenkins:\n  securityRealm:\n    ldap:\n      configurations:\n        - server: \u0026quot;ldaps://ad.example.com:636\u0026quot;\n          rootDN: \u0026quot;DC=example,DC=com\u0026quot;\n          inhibitInferRootDN: false\n          userSearchBase: \u0026quot;OU=Users,OU=Company\u0026quot;\n          userSearch: \u0026quot;(\u0026amp;(objectCategory=Person)(objectClass=user)(sAMAccountName={0}))\u0026quot;\n          groupSearchBase: \u0026quot;OU=Groups,OU=Company\u0026quot;\n          groupSearchFilter: \u0026quot;(\u0026amp;(objectClass=group)(cn={0}))\u0026quot;\n          managerDN: \u0026quot;CN=jenkins,OU=Service Accounts,DC=example,DC=com\u0026quot;\n          managerPasswordSecret: \u0026quot;ldap-service-password\u0026quot;\n          displayNameAttributeName: \u0026quot;displayName\u0026quot;\n          mailAddressAttributeName: \u0026quot;mail\u0026quot;\n          \n  authorizationStrategy:\n    roleBased:\n      roles:\n        global:\n          - name: \u0026quot;administrators\u0026quot;\n            permissions:\n              - \u0026quot;Overall/Administer\u0026quot;\n            assignments:\n              - \u0026quot;Domain Admins\u0026quot;\n              - \u0026quot;Jenkins Admins\u0026quot;\n        items:\n          - name: \u0026quot;developers\u0026quot;\n            pattern: \u0026quot;.*\u0026quot;\n            permissions:\n              - \u0026quot;Job/Build\u0026quot;\n              - \u0026quot;Job/Cancel\u0026quot;\n              - \u0026quot;Job/Read\u0026quot;\n            assignments:\n              - \u0026quot;Development Team\u0026quot;\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"additional-resources\" class=\"mobile-header\"\u003eAdditional Resources\u003c/h2\u003e\n\u003cli class=\"mobile-list-item\"\u003e\u003ca href=\"https://www.jenkins.io/doc/\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\"\u003eOfficial Jenkins Documentation\u003c/a\u003e\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003e\u003ca href=\"https://jenkins.io/projects/jcasc/\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\"\u003eJenkins Configuration as Code\u003c/a\u003e\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003e\u003ca href=\"https://www.jenkins.io/doc/book/pipeline/\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\"\u003eJenkins Pipeline Documentation\u003c/a\u003e\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003e\u003ca href=\"https://www.jenkins.io/doc/book/security/\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\"\u003eJenkins Security Guide\u003c/a\u003e\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003e\u003ca href=\"https://plugins.jenkins.io/\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\"\u003eJenkins Plugin Index\u003c/a\u003e\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003e\u003ca href=\"https://www.jenkins.io/community/\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\"\u003eJenkins Community\u003c/a\u003e\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003e\u003ca href=\"https://www.jenkins.io/doc/book/pipeline/pipeline-best-practices/\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\"\u003eJenkins Best Practices\u003c/a\u003e\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003e\u003ca href=\"https://github.com/jenkinsci/jenkins\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\"\u003eJenkins GitHub Repository\u003c/a\u003e\u003c/li\u003e\n\u003cp class=\"mobile-paragraph\"\u003e---\u003c/p\u003e\n\u003cp class=\"mobile-paragraph\"\u003e\u003cstrong\u003eNote:\u003c/strong\u003e This guide is part of the \u003ca href=\"https://howtomgr.github.io\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\"\u003eHowToMgr\u003c/a\u003e collection. Always refer to official documentation for the most up-to-date information.\u003c/p\u003e","readTime":"38 min","wordCount":7477,"lastBuilt":"2025-09-14T03:53:52.057Z"},"category":{"key":"infrastructure","name":"Infrastructure","description":"DevOps and infrastructure automation tools","icon":"🏗️","color":"#44475a","keywords":["ansible","terraform","gitlab","jenkins","consul","etcd"]},"relatedGuides":[{"name":"adguard-home","displayName":"Adguard Home","slug":"adguard-home","description":"Repo for adguard-home","category":"infrastructure","language":null,"stars":0,"forks":0,"topics":[],"githubUrl":"https://github.com/howtomgr/adguard-home","updatedAt":"2025-09-08T03:04:18Z","createdAt":"2025-09-08T03:04:08Z","readmeRaw":"## 👋 Welcome to adguard-home 🚀  \n\nadguard-home README  \n  \n  \n## Author  \n\n🤖 casjay: [Github](https://github.com/casjay) 🤖  \n","readmeHtml":"\u003ch2 id=\"welcome-to-adguard-home\" class=\"mobile-header\"\u003e👋 Welcome to adguard-home 🚀  \u003c/h2\u003e\n\u003cp class=\"mobile-paragraph\"\u003eadguard-home README  \u003c/p\u003e\n\u003ch2 id=\"author\" class=\"mobile-header\"\u003eAuthor  \u003c/h2\u003e\n\u003cp class=\"mobile-paragraph\"\u003e🤖 casjay: \u003ca href=\"https://github.com/casjay\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\"\u003eGithub\u003c/a\u003e 🤖  \u003c/p\u003e","readTime":"1 min","wordCount":15,"lastBuilt":"2025-09-14T03:54:07.593Z"},{"name":"adminer","displayName":"Adminer","slug":"adminer","description":"Repo for adminer","category":"infrastructure","language":null,"stars":0,"forks":0,"topics":[],"githubUrl":"https://github.com/howtomgr/adminer","updatedAt":"2025-09-08T03:04:32Z","createdAt":"2025-09-08T03:04:22Z","readmeRaw":"## 👋 Welcome to adminer 🚀  \n\nadminer README  \n  \n  \n## Author  \n\n🤖 casjay: [Github](https://github.com/casjay) 🤖  \n","readmeHtml":"\u003ch2 id=\"welcome-to-adminer\" class=\"mobile-header\"\u003e👋 Welcome to adminer 🚀  \u003c/h2\u003e\n\u003cp class=\"mobile-paragraph\"\u003eadminer README  \u003c/p\u003e\n\u003ch2 id=\"author\" class=\"mobile-header\"\u003eAuthor  \u003c/h2\u003e\n\u003cp class=\"mobile-paragraph\"\u003e🤖 casjay: \u003ca href=\"https://github.com/casjay\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\"\u003eGithub\u003c/a\u003e 🤖  \u003c/p\u003e","readTime":"1 min","wordCount":15,"lastBuilt":"2025-09-14T03:54:07.421Z"},{"name":"ansible","displayName":"Ansible","slug":"ansible","description":"Repo for ansible","category":"infrastructure","language":null,"stars":0,"forks":0,"topics":[],"githubUrl":"https://github.com/howtomgr/ansible","updatedAt":"2025-09-14T01:29:39Z","createdAt":"2025-09-08T03:04:35Z","readmeRaw":"# Ansible Installation Guide\n\nAgentless automation platform for configuration management, application deployment, and task automation across multiple systems. Industry standard for infrastructure automation with enterprise-grade security.\n\n## Prerequisites\n\n- Linux control machine (any modern distribution)\n- Python 3.8+ on control machine\n- SSH access to target hosts\n- Python 2.7+ or 3.5+ on target hosts\n- 2GB RAM minimum, 4GB+ recommended for large infrastructures\n\n## Installation\n\n### Using Package Manager (Recommended)\n\n#### Ubuntu/Debian\n```bash\n# Update package list\nsudo apt update\n\n# Install Ansible and dependencies\nsudo apt install -y ansible python3-pip python3-venv sshpass\n\n# Install additional collections\nansible-galaxy collection install community.general\nansible-galaxy collection install ansible.posix\nansible-galaxy collection install kubernetes.core\nansible-galaxy collection install amazon.aws\nansible-galaxy collection install azure.azcollection\nansible-galaxy collection install google.cloud\n\n# Verify installation\nansible --version\nansible-galaxy collection list\n```\n\n#### RHEL/CentOS/Rocky Linux/AlmaLinux\n```bash\n# Install EPEL repository\nsudo yum install -y epel-release\n\n# Install Ansible\nsudo yum install -y ansible python3-pip\n\n# For newer distributions\nsudo dnf install -y ansible python3-pip\n\n# Install collections\nansible-galaxy collection install community.general\nansible-galaxy collection install ansible.posix\nansible-galaxy collection install kubernetes.core\n\n# Verify installation\nansible --version\n```\n\n#### Fedora\n```bash\n# Install Ansible\nsudo dnf install -y ansible python3-pip python3-virtualenv\n\n# Install additional collections\nansible-galaxy collection install community.general\nansible-galaxy collection install ansible.posix\nansible-galaxy collection install kubernetes.core\n\n# Verify installation\nansible --version\n```\n\n#### Arch Linux\n```bash\n# Install Ansible\nsudo pacman -Syu ansible python-pip\n\n# Install collections\nansible-galaxy collection install community.general\nansible-galaxy collection install ansible.posix\n\n# Verify installation\nansible --version\n```\n\n#### Alpine Linux\n```bash\n# Install Ansible\nsudo apk update\nsudo apk add ansible python3 py3-pip openssh\n\n# Install collections\nansible-galaxy collection install community.general\n\n# Verify installation\nansible --version\n```\n\n### Using pip (Latest Version)\n```bash\n# Create virtual environment (recommended)\npython3 -m venv ~/ansible-venv\nsource ~/ansible-venv/bin/activate\n\n# Install Ansible via pip\npip install --upgrade pip\npip install ansible ansible-core\n\n# Install additional packages\npip install paramiko jinja2 PyYAML cryptography\n\n# Install cloud provider SDKs\npip install boto3 botocore azure-cli google-cloud-storage\n\n# Install collections\nansible-galaxy collection install community.general\nansible-galaxy collection install ansible.posix\nansible-galaxy collection install kubernetes.core\nansible-galaxy collection install amazon.aws\nansible-galaxy collection install azure.azcollection\nansible-galaxy collection install google.cloud\n\n# Add to PATH permanently\necho 'source ~/ansible-venv/bin/activate' \u003e\u003e ~/.bashrc\n\n# Verify installation\nansible --version\n```\n\n### Using Docker\n```bash\n# Create Ansible Docker container with mounted volumes\ndocker run --rm -it \\\n  -v $(pwd):/ansible \\\n  -v ~/.ssh:/root/.ssh:ro \\\n  -v ~/.aws:/root/.aws:ro \\\n  -v ~/.azure:/root/.azure:ro \\\n  --workdir /ansible \\\n  ansible/ansible:latest\n\n# Create wrapper script for ease of use\nsudo tee /usr/local/bin/ansible-docker \u003e /dev/null \u003c\u003c'EOF'\n#!/bin/bash\ndocker run --rm -it \\\n  -v $(pwd):/ansible \\\n  -v ~/.ssh:/root/.ssh:ro \\\n  -v ~/.aws:/root/.aws:ro \\\n  -v ~/.azure:/root/.azure:ro \\\n  -v ~/.kube:/root/.kube:ro \\\n  --workdir /ansible \\\n  --network host \\\n  ansible/ansible:latest \"$@\"\nEOF\nsudo chmod +x /usr/local/bin/ansible-docker\n\n# Create aliases\necho 'alias ansible=\"ansible-docker ansible\"' \u003e\u003e ~/.bashrc\necho 'alias ansible-playbook=\"ansible-docker ansible-playbook\"' \u003e\u003e ~/.bashrc\n```\n\n## Project Structure and Configuration\n\n### Professional Project Structure\n```bash\n# Create comprehensive Ansible project structure\nmkdir -p ~/ansible-infrastructure/{\n  inventories/{production,staging,development},\n  playbooks,\n  roles,\n  group_vars,\n  host_vars,\n  library,\n  filter_plugins,\n  callback_plugins,\n  vault,\n  collections,\n  logs\n}\n\ncd ~/ansible-infrastructure\n\n# Create ansible.cfg with security best practices\ncat \u003e ansible.cfg \u003c\u003cEOF\n[defaults]\ninventory = inventories/production/hosts.yml\nremote_user = ansible\nprivate_key_file = ~/.ssh/ansible_key\nhost_key_checking = True\ntimeout = 30\nretry_files_enabled = False\nstdout_callback = yaml\nbin_ansible_callbacks = True\ngathering = smart\nfact_caching = jsonfile\nfact_caching_connection = ~/.ansible/facts_cache\nfact_caching_timeout = 86400\ninterpreter_python = auto_silent\nvault_password_file = ~/.ansible_vault_pass\n\n# Logging\nlog_path = logs/ansible.log\ndisplay_skipped_hosts = False\ndisplay_ok_hosts = False\n\n# Performance\nforks = 20\npoll_interval = 15\ninternal_poll_interval = 0.001\n\n# Security\ncommand_warnings = True\ndeprecation_warnings = True\naction_warnings = True\nlocalhost_warning = True\n\n[ssh_connection]\nssh_args = -o ControlMaster=auto -o ControlPersist=3600s -o PreferredAuthentications=publickey\npipelining = True\ncontrol_path = ~/.ansible/cp/%%h-%%p-%%r\nretries = 3\n\n[privilege_escalation]\nbecome = False\nbecome_method = sudo\nbecome_user = root\nbecome_ask_pass = False\n\n[inventory]\nenable_plugins = host_list, script, auto, yaml, ini, toml\ncache = True\ncache_plugin = jsonfile\ncache_timeout = 3600\ncache_connection = ~/.ansible/inventory_cache\n\n[galaxy]\nserver_list = automation_hub, galaxy\nEOF\n```\n\n### Advanced Inventory Management\n```bash\n# Create production inventory with groups and variables\ncat \u003e inventories/production/hosts.yml \u003c\u003cEOF\nall:\n  children:\n    webservers:\n      hosts:\n        web-prod-01:\n          ansible_host: 10.0.1.10\n          ansible_user: ansible\n          server_role: frontend\n          backup_enabled: true\n        web-prod-02:\n          ansible_host: 10.0.1.11\n          ansible_user: ansible\n          server_role: frontend\n          backup_enabled: true\n        web-prod-03:\n          ansible_host: 10.0.1.12\n          ansible_user: ansible\n          server_role: frontend\n          backup_enabled: true\n      vars:\n        http_port: 80\n        https_port: 443\n        max_clients: 200\n        environment: production\n        monitoring_enabled: true\n\n    dbservers:\n      hosts:\n        db-prod-01:\n          ansible_host: 10.0.2.10\n          ansible_user: ansible\n          mysql_server_id: 1\n          mysql_role: master\n        db-prod-02:\n          ansible_host: 10.0.2.11\n          ansible_user: ansible\n          mysql_server_id: 2\n          mysql_role: slave\n      vars:\n        mysql_port: 3306\n        mysql_root_password: \"{{ vault_mysql_root_password }}\"\n        mysql_replication_user: \"{{ vault_mysql_replication_user }}\"\n        mysql_replication_password: \"{{ vault_mysql_replication_password }}\"\n\n    loadbalancers:\n      hosts:\n        lb-prod-01:\n          ansible_host: 10.0.3.10\n          ansible_user: ansible\n          lb_algorithm: roundrobin\n        lb-prod-02:\n          ansible_host: 10.0.3.11\n          ansible_user: ansible\n          lb_algorithm: roundrobin\n      vars:\n        haproxy_stats_enabled: true\n        haproxy_stats_user: admin\n        haproxy_stats_password: \"{{ vault_haproxy_stats_password }}\"\n\n    monitoring:\n      hosts:\n        monitor-prod-01:\n          ansible_host: 10.0.4.10\n          ansible_user: ansible\n          prometheus_retention: 30d\n          grafana_admin_password: \"{{ vault_grafana_admin_password }}\"\n\n    bastion:\n      hosts:\n        bastion-prod-01:\n          ansible_host: bastion.example.com\n          ansible_user: ansible\n          ansible_port: 22\n\n# Global variables for all hosts\nwebservers:\n  vars:\n    nginx_worker_processes: auto\n    nginx_worker_connections: 1024\n    ssl_certificate_path: /etc/ssl/certs\n    backup_schedule: \"0 2 * * *\"\n\ndbservers:\n  vars:\n    mysql_innodb_buffer_pool_size: 2G\n    mysql_max_connections: 200\n    backup_schedule: \"0 1 * * *\"\n    monitoring_enabled: true\nEOF\n\n# Create dynamic inventory script for cloud environments\ncat \u003e inventories/production/aws_ec2.yml \u003c\u003cEOF\nplugin: amazon.aws.aws_ec2\nregions:\n  - us-west-2\n  - us-east-1\nfilters:\n  tag:Environment: production\n  tag:Ansible: managed\n  instance-state-name: running\n\nhostnames:\n  - tag:Name\n  - dns-name\n  - private-ip-address\n\ncompose:\n  ansible_host: private_ip_address\n  ec2_state: ec2_state_name\n  ec2_arch: ec2_architecture\n\ngroups:\n  # Group by instance type\n  webservers: \"'web' in tags.Role\"\n  databases: \"'db' in tags.Role\"\n  loadbalancers: \"'lb' in tags.Role\"\n  \n  # Group by environment\n  production: \"tags.Environment == 'production'\"\n  staging: \"tags.Environment == 'staging'\"\n  \n  # Group by availability zone\n  us_west_2a: ec2_placement_availability_zone == \"us-west-2a\"\n  us_west_2b: ec2_placement_availability_zone == \"us-west-2b\"\n\nkeyed_groups:\n  # Create groups based on tags\n  - key: tags.Environment\n    prefix: env\n  - key: tags.Role  \n    prefix: role\n  - key: ec2_instance_type\n    prefix: type\nEOF\n```\n\n### Ansible Vault Security\n```bash\n# Create strong vault password\nopenssl rand -base64 32 \u003e ~/.ansible_vault_pass\nchmod 600 ~/.ansible_vault_pass\n\n# Create encrypted vault file for secrets\nansible-vault create group_vars/all/vault.yml\n# Enter secure passwords and API keys:\n# vault_mysql_root_password: your_secure_mysql_password\n# vault_grafana_admin_password: your_secure_grafana_password  \n# vault_ssl_private_key: |\n#   -----BEGIN PRIVATE KEY-----\n#   your_private_key_content\n#   -----END PRIVATE KEY-----\n\n# Create non-encrypted variables file\ncat \u003e group_vars/all/vars.yml \u003c\u003cEOF\n# Non-sensitive variables\nmysql_port: 3306\nnginx_port: 80\ngrafana_port: 3000\nprometheus_port: 9090\n\n# Reference vault variables\nmysql_root_password: \"{{ vault_mysql_root_password }}\"\ngrafana_admin_password: \"{{ vault_grafana_admin_password }}\"\n\n# SSL configuration\nssl_certificate_path: /etc/ssl/certs/server.crt\nssl_private_key_path: /etc/ssl/private/server.key\nssl_private_key_content: \"{{ vault_ssl_private_key }}\"\n\n# Security settings\nansible_ssh_common_args: '-o StrictHostKeyChecking=yes -o UserKnownHostsFile=~/.ssh/known_hosts'\nansible_become_method: sudo\nansible_become_user: root\nEOF\n\n# Edit vault file\nansible-vault edit group_vars/all/vault.yml\n\n# View vault file (read-only)\nansible-vault view group_vars/all/vault.yml\n\n# Change vault password\nansible-vault rekey group_vars/all/vault.yml\n```\n\n## Comprehensive Playbooks\n\n### System Hardening Playbook\n```bash\ncat \u003e playbooks/system-hardening.yml \u003c\u003cEOF\n---\n- name: System Security Hardening\n  hosts: all\n  become: yes\n  gather_facts: yes\n  vars:\n    security_packages:\n      - fail2ban\n      - ufw\n      - aide\n      - chkrootkit\n      - rkhunter\n      - clamav\n      - lynis\n    \n    disabled_services:\n      - telnet\n      - rsh\n      - rlogin\n      - tftp\n      - talk\n      - finger\n\n  pre_tasks:\n    - name: Update package cache\n      package:\n        update_cache: yes\n        cache_valid_time: 3600\n      when: ansible_os_family in [\"Debian\", \"RedHat\"]\n\n  tasks:\n    # System updates\n    - name: Upgrade all packages\n      package:\n        name: \"*\"\n        state: latest\n      when: ansible_os_family == \"RedHat\"\n\n    - name: Upgrade all packages (Debian/Ubuntu)\n      apt:\n        upgrade: dist\n        autoremove: yes\n        autoclean: yes\n      when: ansible_os_family == \"Debian\"\n\n    # Install security packages\n    - name: Install security packages\n      package:\n        name: \"{{ security_packages }}\"\n        state: present\n\n    # User security\n    - name: Create ansible user with limited privileges\n      user:\n        name: ansible\n        groups: sudo\n        shell: /bin/bash\n        create_home: yes\n        generate_ssh_key: yes\n        ssh_key_bits: 4096\n        ssh_key_type: rsa\n\n    - name: Configure sudo for ansible user\n      lineinfile:\n        path: /etc/sudoers.d/ansible\n        line: 'ansible ALL=(ALL) NOPASSWD:ALL'\n        create: yes\n        mode: '0440'\n        validate: 'visudo -cf %s'\n\n    # SSH hardening\n    - name: Configure SSH security\n      lineinfile:\n        path: /etc/ssh/sshd_config\n        regexp: \"{{ item.regexp }}\"\n        line: \"{{ item.line }}\"\n        backup: yes\n      loop:\n        - { regexp: '^#?PermitRootLogin', line: 'PermitRootLogin no' }\n        - { regexp: '^#?PasswordAuthentication', line: 'PasswordAuthentication no' }\n        - { regexp: '^#?X11Forwarding', line: 'X11Forwarding no' }\n        - { regexp: '^#?MaxAuthTries', line: 'MaxAuthTries 3' }\n        - { regexp: '^#?ClientAliveInterval', line: 'ClientAliveInterval 300' }\n        - { regexp: '^#?ClientAliveCountMax', line: 'ClientAliveCountMax 0' }\n        - { regexp: '^#?Protocol', line: 'Protocol 2' }\n        - { regexp: '^#?LogLevel', line: 'LogLevel VERBOSE' }\n      notify: restart ssh\n\n    # Firewall configuration\n    - name: Configure UFW firewall (Debian/Ubuntu)\n      ufw:\n        state: enabled\n        policy: deny\n        direction: incoming\n      when: ansible_os_family == \"Debian\"\n\n    - name: Allow SSH through UFW\n      ufw:\n        rule: allow\n        port: 22\n        proto: tcp\n        comment: 'SSH access'\n      when: ansible_os_family == \"Debian\"\n\n    - name: Configure firewalld (RHEL/CentOS/Fedora)\n      firewalld:\n        state: enabled\n        permanent: yes\n        immediate: yes\n      when: ansible_os_family == \"RedHat\"\n\n    - name: Allow SSH through firewalld\n      firewalld:\n        service: ssh\n        permanent: yes\n        state: enabled\n        immediate: yes\n      when: ansible_os_family == \"RedHat\"\n\n    # Disable unnecessary services\n    - name: Disable unnecessary services\n      systemd:\n        name: \"{{ item }}\"\n        enabled: no\n        state: stopped\n      loop: \"{{ disabled_services }}\"\n      ignore_errors: yes\n\n    # File system security\n    - name: Set proper permissions on sensitive files\n      file:\n        path: \"{{ item.path }}\"\n        mode: \"{{ item.mode }}\"\n        owner: root\n        group: root\n      loop:\n        - { path: '/etc/passwd', mode: '0644' }\n        - { path: '/etc/shadow', mode: '0640' }\n        - { path: '/etc/group', mode: '0644' }\n        - { path: '/etc/gshadow', mode: '0640' }\n        - { path: '/etc/ssh/sshd_config', mode: '0600' }\n\n    # Kernel security parameters\n    - name: Configure kernel security parameters\n      sysctl:\n        name: \"{{ item.key }}\"\n        value: \"{{ item.value }}\"\n        sysctl_set: yes\n        state: present\n        reload: yes\n      loop:\n        - { key: 'net.ipv4.ip_forward', value: '0' }\n        - { key: 'net.ipv4.conf.all.send_redirects', value: '0' }\n        - { key: 'net.ipv4.conf.default.send_redirects', value: '0' }\n        - { key: 'net.ipv4.conf.all.accept_source_route', value: '0' }\n        - { key: 'net.ipv4.conf.default.accept_source_route', value: '0' }\n        - { key: 'net.ipv4.conf.all.accept_redirects', value: '0' }\n        - { key: 'net.ipv4.conf.default.accept_redirects', value: '0' }\n        - { key: 'net.ipv4.conf.all.secure_redirects', value: '0' }\n        - { key: 'net.ipv4.conf.default.secure_redirects', value: '0' }\n        - { key: 'net.ipv4.conf.all.log_martians', value: '1' }\n        - { key: 'net.ipv4.conf.default.log_martians', value: '1' }\n        - { key: 'kernel.randomize_va_space', value: '2' }\n\n    # Configure fail2ban\n    - name: Configure fail2ban for SSH protection\n      template:\n        src: templates/fail2ban-jail.local.j2\n        dest: /etc/fail2ban/jail.local\n        backup: yes\n      notify: restart fail2ban\n\n  handlers:\n    - name: restart ssh\n      service:\n        name: \"{{ 'ssh' if ansible_os_family == 'Debian' else 'sshd' }}\"\n        state: restarted\n\n    - name: restart fail2ban\n      service:\n        name: fail2ban\n        state: restarted\nEOF\n```\n\n### Application Deployment Playbook\n```bash\ncat \u003e playbooks/web-application-deployment.yml \u003c\u003cEOF\n---\n- name: Deploy Web Application Stack\n  hosts: webservers\n  become: yes\n  serial: \"25%\"  # Rolling deployment\n  max_fail_percentage: 10\n  vars:\n    app_name: mywebapp\n    app_version: \"{{ app_version | default('latest') }}\"\n    app_port: 3000\n    nginx_workers: \"{{ ansible_processor_cores }}\"\n    \n  pre_tasks:\n    - name: Check if maintenance mode file exists\n      stat:\n        path: /var/www/html/maintenance.html\n      register: maintenance_mode\n\n    - name: Fail if in maintenance mode\n      fail:\n        msg: \"Server is in maintenance mode\"\n      when: maintenance_mode.stat.exists and not force_deployment | default(false)\n\n  tasks:\n    # Application deployment\n    - name: Create application user\n      user:\n        name: \"{{ app_name }}\"\n        system: yes\n        shell: /bin/false\n        home: \"/opt/{{ app_name }}\"\n        create_home: yes\n\n    - name: Create application directories\n      file:\n        path: \"{{ item }}\"\n        state: directory\n        owner: \"{{ app_name }}\"\n        group: \"{{ app_name }}\"\n        mode: '0755'\n      loop:\n        - \"/opt/{{ app_name }}\"\n        - \"/opt/{{ app_name }}/releases\"\n        - \"/opt/{{ app_name }}/shared\"\n        - \"/var/log/{{ app_name }}\"\n\n    - name: Download application release\n      get_url:\n        url: \"https://releases.example.com/{{ app_name }}/{{ app_version }}/{{ app_name }}-{{ app_version }}.tar.gz\"\n        dest: \"/tmp/{{ app_name }}-{{ app_version }}.tar.gz\"\n        mode: '0644'\n        timeout: 300\n      register: download_result\n\n    - name: Extract application\n      unarchive:\n        src: \"/tmp/{{ app_name }}-{{ app_version }}.tar.gz\"\n        dest: \"/opt/{{ app_name }}/releases/\"\n        owner: \"{{ app_name }}\"\n        group: \"{{ app_name }}\"\n        remote_src: yes\n        creates: \"/opt/{{ app_name }}/releases/{{ app_version }}\"\n\n    - name: Create symlink to current release\n      file:\n        src: \"/opt/{{ app_name }}/releases/{{ app_version }}\"\n        dest: \"/opt/{{ app_name }}/current\"\n        state: link\n        owner: \"{{ app_name }}\"\n        group: \"{{ app_name }}\"\n      notify:\n        - reload application\n        - reload nginx\n\n    # Configuration management\n    - name: Deploy application configuration\n      template:\n        src: \"templates/{{ app_name }}.conf.j2\"\n        dest: \"/opt/{{ app_name }}/shared/{{ app_name }}.conf\"\n        owner: \"{{ app_name }}\"\n        group: \"{{ app_name }}\"\n        mode: '0640'\n        backup: yes\n      notify: reload application\n\n    # Service management\n    - name: Deploy systemd service file\n      template:\n        src: \"templates/{{ app_name }}.service.j2\"\n        dest: \"/etc/systemd/system/{{ app_name }}.service\"\n        mode: '0644'\n      notify:\n        - daemon reload\n        - restart application\n\n    - name: Enable and start application service\n      systemd:\n        name: \"{{ app_name }}\"\n        enabled: yes\n        state: started\n        daemon_reload: yes\n\n    # Health check\n    - name: Wait for application to be ready\n      uri:\n        url: \"http://localhost:{{ app_port }}/health\"\n        method: GET\n        status_code: 200\n      retries: 30\n      delay: 10\n\n    # Cleanup old releases\n    - name: Clean up old releases (keep last 3)\n      shell: |\n        cd /opt/{{ app_name }}/releases\n        ls -t | tail -n +4 | xargs rm -rf\n      args:\n        executable: /bin/bash\n\n  post_tasks:\n    - name: Verify application is running\n      uri:\n        url: \"http://{{ ansible_default_ipv4.address }}:{{ app_port }}/health\"\n        method: GET\n        status_code: 200\n      delegate_to: localhost\n\n    - name: Log deployment success\n      lineinfile:\n        path: \"/var/log/{{ app_name }}/deployments.log\"\n        line: \"{{ ansible_date_time.iso8601 }} - Successfully deployed {{ app_version }} to {{ inventory_hostname }}\"\n        create: yes\n\n  handlers:\n    - name: daemon reload\n      systemd:\n        daemon_reload: yes\n\n    - name: restart application\n      systemd:\n        name: \"{{ app_name }}\"\n        state: restarted\n\n    - name: reload application\n      systemd:\n        name: \"{{ app_name }}\"\n        state: reloaded\n\n    - name: reload nginx\n      service:\n        name: nginx\n        state: reloaded\nEOF\n```\n\n### Infrastructure as Code Playbook\n```bash\ncat \u003e playbooks/infrastructure-provisioning.yml \u003c\u003cEOF\n---\n- name: Infrastructure Provisioning and Configuration\n  hosts: all\n  become: yes\n  strategy: free  # Parallel execution\n  vars:\n    base_packages:\n      Debian:\n        - curl\n        - wget\n        - vim\n        - htop\n        - git\n        - python3\n        - python3-pip\n        - unzip\n        - tree\n      RedHat:\n        - curl\n        - wget\n        - vim\n        - htop\n        - git\n        - python3\n        - python3-pip\n        - unzip\n        - tree\n        - epel-release\n\n  tasks:\n    # System preparation\n    - name: Set hostname\n      hostname:\n        name: \"{{ inventory_hostname }}\"\n\n    - name: Update /etc/hosts\n      lineinfile:\n        path: /etc/hosts\n        line: \"{{ ansible_default_ipv4.address }} {{ inventory_hostname }}\"\n        backup: yes\n\n    # Package management\n    - name: Install base packages\n      package:\n        name: \"{{ base_packages[ansible_os_family] | default(base_packages['Debian']) }}\"\n        state: present\n\n    # Time synchronization\n    - name: Install and configure NTP\n      package:\n        name: \"{{ 'ntp' if ansible_os_family == 'Debian' else 'chrony' }}\"\n        state: present\n\n    - name: Start and enable time synchronization\n      service:\n        name: \"{{ 'ntp' if ansible_os_family == 'Debian' else 'chronyd' }}\"\n        state: started\n        enabled: yes\n\n    # Log management\n    - name: Configure logrotate for application logs\n      template:\n        src: templates/app-logrotate.j2\n        dest: /etc/logrotate.d/applications\n        mode: '0644'\n\n    # Monitoring agent installation\n    - name: Install Node Exporter for Prometheus monitoring\n      get_url:\n        url: \"https://github.com/prometheus/node_exporter/releases/download/v1.6.1/node_exporter-1.6.1.linux-amd64.tar.gz\"\n        dest: /tmp/node_exporter.tar.gz\n        mode: '0644'\n\n    - name: Extract Node Exporter\n      unarchive:\n        src: /tmp/node_exporter.tar.gz\n        dest: /tmp\n        remote_src: yes\n\n    - name: Copy Node Exporter binary\n      copy:\n        src: /tmp/node_exporter-1.6.1.linux-amd64/node_exporter\n        dest: /usr/local/bin/node_exporter\n        mode: '0755'\n        owner: root\n        group: root\n        remote_src: yes\n\n    - name: Create node_exporter systemd service\n      template:\n        src: templates/node_exporter.service.j2\n        dest: /etc/systemd/system/node_exporter.service\n        mode: '0644'\n      notify:\n        - daemon reload\n        - restart node_exporter\n\n    # Security configuration\n    - name: Configure kernel parameters for security\n      sysctl:\n        name: \"{{ item.key }}\"\n        value: \"{{ item.value }}\"\n        sysctl_set: yes\n        state: present\n        reload: yes\n      loop:\n        - { key: 'kernel.dmesg_restrict', value: '1' }\n        - { key: 'kernel.kptr_restrict', value: '2' }\n        - { key: 'kernel.yama.ptrace_scope', value: '1' }\n        - { key: 'net.ipv4.conf.all.log_martians', value: '1' }\n        - { key: 'net.ipv4.conf.default.log_martians', value: '1' }\n        - { key: 'net.ipv4.conf.all.send_redirects', value: '0' }\n        - { key: 'net.ipv4.conf.default.send_redirects', value: '0' }\n\n    # File integrity monitoring\n    - name: Initialize AIDE database\n      shell: |\n        aide --init\n        mv /var/lib/aide/aide.db.new /var/lib/aide/aide.db\n      args:\n        creates: /var/lib/aide/aide.db\n\n    - name: Schedule AIDE integrity checks\n      cron:\n        name: \"AIDE integrity check\"\n        minute: \"0\"\n        hour: \"3\"\n        job: \"/usr/bin/aide --check\"\n        user: root\n\n  handlers:\n    - name: daemon reload\n      systemd:\n        daemon_reload: yes\n\n    - name: restart node_exporter\n      service:\n        name: node_exporter\n        state: restarted\n        enabled: yes\nEOF\n```\n\n## Advanced Role Development\n\n### Comprehensive NGINX Role\n```bash\n# Create NGINX role structure\nansible-galaxy init roles/nginx\n\n# Main tasks\ncat \u003e roles/nginx/tasks/main.yml \u003c\u003cEOF\n---\n# NGINX Installation and Configuration Role\n- name: Include OS-specific variables\n  include_vars: \"{{ ansible_os_family }}.yml\"\n\n- name: Install NGINX\n  include_tasks: \"install-{{ ansible_os_family }}.yml\"\n\n- name: Create NGINX directories\n  file:\n    path: \"{{ item }}\"\n    state: directory\n    owner: root\n    group: root\n    mode: '0755'\n  loop:\n    - /etc/nginx/sites-available\n    - /etc/nginx/sites-enabled\n    - /etc/nginx/conf.d\n    - /var/log/nginx\n    - /var/cache/nginx\n\n- name: Generate DH parameters\n  openssl_dhparam:\n    path: /etc/ssl/certs/dhparam.pem\n    size: 2048\n  when: nginx_ssl_enabled | default(false)\n\n- name: Deploy NGINX main configuration\n  template:\n    src: nginx.conf.j2\n    dest: /etc/nginx/nginx.conf\n    backup: yes\n    validate: 'nginx -t -c %s'\n  notify: reload nginx\n\n- name: Deploy virtual host configurations\n  template:\n    src: vhost.conf.j2\n    dest: \"/etc/nginx/sites-available/{{ item.name }}.conf\"\n    backup: yes\n  loop: \"{{ nginx_vhosts | default([]) }}\"\n  notify: reload nginx\n\n- name: Enable virtual hosts\n  file:\n    src: \"/etc/nginx/sites-available/{{ item.name }}.conf\"\n    dest: \"/etc/nginx/sites-enabled/{{ item.name }}.conf\"\n    state: link\n  loop: \"{{ nginx_vhosts | default([]) }}\"\n  when: item.enabled | default(true)\n  notify: reload nginx\n\n- name: Remove default site\n  file:\n    path: /etc/nginx/sites-enabled/default\n    state: absent\n  notify: reload nginx\n\n- name: Start and enable NGINX\n  service:\n    name: nginx\n    state: started\n    enabled: yes\n\n- name: Configure log rotation\n  template:\n    src: nginx-logrotate.j2\n    dest: /etc/logrotate.d/nginx\n    mode: '0644'\n\n- name: Setup NGINX monitoring\n  include_tasks: monitoring.yml\n  when: nginx_monitoring_enabled | default(false)\n\n- name: Configure SSL certificates\n  include_tasks: ssl.yml\n  when: nginx_ssl_enabled | default(false)\nEOF\n\n# OS-specific installation tasks\ncat \u003e roles/nginx/tasks/install-Debian.yml \u003c\u003cEOF\n---\n- name: Add NGINX signing key (Debian/Ubuntu)\n  apt_key:\n    url: https://nginx.org/keys/nginx_signing.key\n    state: present\n\n- name: Add NGINX repository (Debian/Ubuntu)\n  apt_repository:\n    repo: \"deb https://nginx.org/packages/{{ ansible_distribution | lower }}/ {{ ansible_distribution_release }} nginx\"\n    state: present\n\n- name: Install NGINX (Debian/Ubuntu)\n  apt:\n    name: nginx\n    state: present\n    update_cache: yes\nEOF\n\ncat \u003e roles/nginx/tasks/install-RedHat.yml \u003c\u003cEOF\n---\n- name: Add NGINX repository (RHEL/CentOS)\n  yum_repository:\n    name: nginx\n    description: NGINX Repository\n    baseurl: \"https://nginx.org/packages/centos/{{ ansible_distribution_major_version }}/$basearch/\"\n    gpgcheck: yes\n    gpgkey: https://nginx.org/keys/nginx_signing.key\n    enabled: yes\n\n- name: Install NGINX (RHEL/CentOS)\n  yum:\n    name: nginx\n    state: present\nEOF\n\n# Variables\ncat \u003e roles/nginx/vars/main.yml \u003c\u003cEOF\n---\nnginx_user: nginx\nnginx_worker_processes: auto\nnginx_worker_connections: 1024\nnginx_keepalive_timeout: 65\nnginx_ssl_enabled: false\nnginx_monitoring_enabled: true\n\nnginx_security_headers:\n  - \"add_header X-Frame-Options SAMEORIGIN always;\"\n  - \"add_header X-Content-Type-Options nosniff always;\"\n  - \"add_header X-XSS-Protection '1; mode=block' always;\"\n  - \"add_header Strict-Transport-Security 'max-age=31536000; includeSubDomains' always;\"\n\nnginx_default_vhost:\n  name: default\n  listen: 80\n  server_name: \"_\"\n  root: /var/www/html\n  index: index.html\n  enabled: false\nEOF\n\n# Templates\ncat \u003e roles/nginx/templates/nginx.conf.j2 \u003c\u003cEOF\nuser {{ nginx_user }};\nworker_processes {{ nginx_worker_processes }};\npid /var/run/nginx.pid;\n\nevents {\n    worker_connections {{ nginx_worker_connections }};\n    use epoll;\n    multi_accept on;\n}\n\nhttp {\n    # Basic settings\n    sendfile on;\n    tcp_nopush on;\n    tcp_nodelay on;\n    keepalive_timeout {{ nginx_keepalive_timeout }};\n    types_hash_max_size 2048;\n    server_tokens off;\n\n    include /etc/nginx/mime.types;\n    default_type application/octet-stream;\n\n    # SSL configuration\n{% if nginx_ssl_enabled %}\n    ssl_protocols TLSv1.2 TLSv1.3;\n    ssl_prefer_server_ciphers off;\n    ssl_dhparam /etc/ssl/certs/dhparam.pem;\n{% endif %}\n\n    # Gzip compression\n    gzip on;\n    gzip_vary on;\n    gzip_proxied any;\n    gzip_comp_level 6;\n    gzip_types\n        application/javascript\n        application/json\n        application/xml\n        text/css\n        text/javascript\n        text/xml\n        text/plain;\n\n    # Security headers\n{% for header in nginx_security_headers %}\n    {{ header }}\n{% endfor %}\n\n    # Logging\n    log_format main '\\$remote_addr - \\$remote_user [\\$time_local] \"\\$request\" '\n                    '\\$status \\$body_bytes_sent \"\\$http_referer\" '\n                    '\"\\$http_user_agent\" \"\\$http_x_forwarded_for\"';\n\n    access_log /var/log/nginx/access.log main;\n    error_log /var/log/nginx/error.log;\n\n    # Rate limiting\n    limit_req_zone \\$binary_remote_addr zone=login:10m rate=10r/m;\n    limit_conn_zone \\$binary_remote_addr zone=addr:10m;\n\n    # Include configurations\n    include /etc/nginx/conf.d/*.conf;\n    include /etc/nginx/sites-enabled/*;\n}\nEOF\n\n# Handlers\ncat \u003e roles/nginx/handlers/main.yml \u003c\u003cEOF\n---\n- name: restart nginx\n  service:\n    name: nginx\n    state: restarted\n\n- name: reload nginx\n  service:\n    name: nginx\n    state: reloaded\n\n- name: validate nginx config\n  command: nginx -t\n  changed_when: false\nEOF\n```\n\n## Security and Compliance\n\n### Ansible Security Scanner Integration\n```bash\n# Create security scanning playbook\ncat \u003e playbooks/security-scan.yml \u003c\u003cEOF\n---\n- name: Security Compliance Scanning\n  hosts: all\n  become: yes\n  gather_facts: yes\n  vars:\n    scan_results_dir: \"/tmp/security-scans\"\n    \n  tasks:\n    - name: Create scan results directory\n      file:\n        path: \"{{ scan_results_dir }}\"\n        state: directory\n        mode: '0755'\n\n    # CIS benchmark scanning\n    - name: Download CIS benchmark script\n      get_url:\n        url: \"https://github.com/dev-sec/cis-dil-benchmark/archive/master.zip\"\n        dest: \"/tmp/cis-benchmark.zip\"\n        mode: '0644'\n\n    - name: Run CIS benchmark scan\n      shell: |\n        cd /tmp\n        unzip -o cis-benchmark.zip\n        cd cis-dil-benchmark-master\n        bash cis_ubuntu2204.sh \u003e {{ scan_results_dir }}/cis-scan-{{ inventory_hostname }}.txt\n      args:\n        creates: \"{{ scan_results_dir }}/cis-scan-{{ inventory_hostname }}.txt\"\n\n    # Lynis security audit\n    - name: Install Lynis\n      package:\n        name: lynis\n        state: present\n\n    - name: Run Lynis security audit\n      command: lynis audit system --quiet --cronjob\n      register: lynis_result\n      changed_when: false\n\n    - name: Save Lynis results\n      copy:\n        content: \"{{ lynis_result.stdout }}\"\n        dest: \"{{ scan_results_dir }}/lynis-scan-{{ inventory_hostname }}.txt\"\n        mode: '0644'\n\n    # OpenSCAP compliance scanning\n    - name: Install OpenSCAP (RHEL/CentOS)\n      package:\n        name:\n          - openscap-scanner\n          - scap-security-guide\n        state: present\n      when: ansible_os_family == \"RedHat\"\n\n    - name: Install OpenSCAP (Debian/Ubuntu)\n      package:\n        name:\n          - libopenscap8\n          - ssg-debian\n        state: present\n      when: ansible_os_family == \"Debian\"\n\n    - name: Run OpenSCAP scan\n      shell: |\n        oscap xccdf eval --profile xccdf_org.ssgproject.content_profile_standard \\\n          --results {{ scan_results_dir }}/oscap-results-{{ inventory_hostname }}.xml \\\n          --report {{ scan_results_dir }}/oscap-report-{{ inventory_hostname }}.html \\\n          /usr/share/xml/scap/ssg/content/ssg-{{ ansible_distribution | lower }}{{ ansible_distribution_major_version }}-xccdf.xml\n      ignore_errors: yes\n      when: ansible_os_family in [\"RedHat\", \"Debian\"]\n\n    # Vulnerability scanning with Trivy\n    - name: Install Trivy vulnerability scanner\n      shell: |\n        curl -sfL https://raw.githubusercontent.com/aquasecurity/trivy/main/contrib/install.sh | sh -s -- -b /usr/local/bin\n      args:\n        creates: /usr/local/bin/trivy\n\n    - name: Run Trivy filesystem scan\n      shell: |\n        trivy fs --format json --output {{ scan_results_dir }}/trivy-scan-{{ inventory_hostname }}.json /\n      ignore_errors: yes\n\n    # Collect scan results\n    - name: Fetch scan results to control machine\n      fetch:\n        src: \"{{ item }}\"\n        dest: \"./security-reports/{{ inventory_hostname }}/\"\n        flat: yes\n      loop:\n        - \"{{ scan_results_dir }}/cis-scan-{{ inventory_hostname }}.txt\"\n        - \"{{ scan_results_dir }}/lynis-scan-{{ inventory_hostname }}.txt\"\n        - \"{{ scan_results_dir }}/oscap-report-{{ inventory_hostname }}.html\"\n        - \"{{ scan_results_dir }}/trivy-scan-{{ inventory_hostname }}.json\"\n      ignore_errors: yes\n      delegate_to: localhost\n\n  post_tasks:\n    - name: Generate compliance summary\n      template:\n        src: templates/compliance-summary.j2\n        dest: \"{{ scan_results_dir }}/compliance-summary-{{ inventory_hostname }}.txt\"\n        mode: '0644'\nEOF\n```\n\n### Ansible AWX/Tower Integration\n```bash\n# Install Ansible AWX (open source)\ncat \u003e playbooks/install-awx.yml \u003c\u003cEOF\n---\n- name: Install Ansible AWX\n  hosts: localhost\n  connection: local\n  become: yes\n  vars:\n    awx_namespace: awx\n    awx_admin_user: admin\n    awx_admin_password: \"{{ vault_awx_admin_password }}\"\n\n  tasks:\n    - name: Install prerequisite packages\n      package:\n        name:\n          - git\n          - curl\n          - docker.io\n          - docker-compose\n        state: present\n\n    - name: Clone AWX repository\n      git:\n        repo: https://github.com/ansible/awx.git\n        dest: /opt/awx\n        version: devel\n\n    - name: Create AWX Docker inventory\n      template:\n        src: templates/awx-docker-inventory.j2\n        dest: /opt/awx/installer/inventory\n        mode: '0644'\n\n    - name: Install AWX using Ansible\n      shell: ansible-playbook -i inventory install.yml\n      args:\n        chdir: /opt/awx/installer\n      environment:\n        ANSIBLE_HOST_KEY_CHECKING: False\n\n    - name: Wait for AWX to be ready\n      uri:\n        url: \"http://localhost:80/api/v2/ping/\"\n        method: GET\n      retries: 30\n      delay: 10\n\n    - name: Configure AWX organizations and projects\n      uri:\n        url: \"http://localhost:80/api/v2/organizations/\"\n        method: POST\n        user: \"{{ awx_admin_user }}\"\n        password: \"{{ awx_admin_password }}\"\n        force_basic_auth: yes\n        body_format: json\n        body:\n          name: \"Production\"\n          description: \"Production environment organization\"\n        status_code: [200, 201, 409]\nEOF\n```\n\n## Multi-Cloud Automation\n\n### AWS Infrastructure Automation\n```bash\ncat \u003e playbooks/aws-infrastructure.yml \u003c\u003cEOF\n---\n- name: AWS Infrastructure Automation\n  hosts: localhost\n  connection: local\n  gather_facts: no\n  vars:\n    aws_region: \"{{ aws_region | default('us-west-2') }}\"\n    vpc_cidr: \"{{ vpc_cidr | default('10.0.0.0/16') }}\"\n    environment: \"{{ environment | default('production') }}\"\n\n  tasks:\n    # VPC Creation\n    - name: Create VPC\n      amazon.aws.ec2_vpc_info:\n        filters:\n          \"tag:Name\": \"{{ environment }}-vpc\"\n        region: \"{{ aws_region }}\"\n      register: existing_vpc\n\n    - name: Create new VPC if not exists\n      amazon.aws.ec2_vpc_net:\n        name: \"{{ environment }}-vpc\"\n        cidr_block: \"{{ vpc_cidr }}\"\n        region: \"{{ aws_region }}\"\n        state: present\n        dns_hostnames: yes\n        dns_support: yes\n        tags:\n          Environment: \"{{ environment }}\"\n          ManagedBy: ansible\n      register: vpc\n      when: existing_vpc.vpcs | length == 0\n\n    # Security Groups\n    - name: Create web security group\n      amazon.aws.ec2_group:\n        name: \"{{ environment }}-web-sg\"\n        description: \"Security group for web servers\"\n        vpc_id: \"{{ vpc.vpc.id if vpc.vpc is defined else existing_vpc.vpcs[0].vpc_id }}\"\n        region: \"{{ aws_region }}\"\n        rules:\n          - proto: tcp\n            ports:\n              - 80\n              - 443\n            cidr_ip: 0.0.0.0/0\n            rule_desc: \"HTTP and HTTPS access\"\n          - proto: tcp\n            ports:\n              - 22\n            group_id: \"{{ environment }}-bastion-sg\"\n            rule_desc: \"SSH from bastion\"\n        tags:\n          Environment: \"{{ environment }}\"\n\n    # Launch EC2 instances\n    - name: Launch web servers\n      amazon.aws.ec2_instance:\n        name: \"{{ environment }}-web-{{ item }}\"\n        instance_type: t3.medium\n        image_id: ami-0c02fb55956c7d316  # Amazon Linux 2\n        key_name: \"{{ ec2_key_name }}\"\n        vpc_subnet_id: \"{{ web_subnet_id }}\"\n        security_groups:\n          - \"{{ environment }}-web-sg\"\n        region: \"{{ aws_region }}\"\n        state: running\n        wait: yes\n        wait_timeout: 300\n        user_data: |\n          #!/bin/bash\n          yum update -y\n          yum install -y python3\n        tags:\n          Environment: \"{{ environment }}\"\n          Role: webserver\n          Ansible: managed\n      loop: \"{{ range(1, web_server_count + 1) | list }}\"\n      register: web_instances\n\n    # Add instances to inventory\n    - name: Add web servers to inventory\n      add_host:\n        name: \"{{ item.instances[0].tags.Name }}\"\n        hostname: \"{{ item.instances[0].public_ip_address }}\"\n        groups: webservers\n        ansible_ssh_private_key_file: \"~/.ssh/{{ ec2_key_name }}.pem\"\n        ansible_user: ec2-user\n      loop: \"{{ web_instances.results }}\"\n      changed_when: false\nEOF\n```\n\n### Kubernetes Cluster Management\n```bash\ncat \u003e playbooks/k8s-cluster-management.yml \u003c\u003cEOF\n---\n- name: Kubernetes Cluster Management with Ansible\n  hosts: k8s_masters\n  become: yes\n  serial: 1\n  vars:\n    k8s_version: \"1.28.2\"\n    containerd_version: \"1.6.24\"\n    cni_version: \"1.3.0\"\n\n  tasks:\n    # Pre-flight checks\n    - name: Check system requirements\n      assert:\n        that:\n          - ansible_memtotal_mb \u003e= 1700\n          - ansible_processor_cores \u003e= 2\n        fail_msg: \"System doesn't meet minimum requirements\"\n\n    - name: Verify connectivity to all nodes\n      ping:\n      delegate_to: \"{{ item }}\"\n      loop: \"{{ groups['k8s_all'] }}\"\n\n    # Container runtime setup\n    - name: Install containerd\n      include_role:\n        name: containerd\n      vars:\n        containerd_version: \"{{ containerd_version }}\"\n\n    # Kubernetes installation\n    - name: Install Kubernetes components\n      include_role:\n        name: kubernetes\n      vars:\n        kubernetes_version: \"{{ k8s_version }}\"\n\n    # Cluster initialization\n    - name: Initialize Kubernetes cluster\n      shell: |\n        kubeadm init \\\n          --pod-network-cidr=10.244.0.0/16 \\\n          --service-cidr=10.96.0.0/12 \\\n          --apiserver-advertise-address={{ ansible_default_ipv4.address }} \\\n          --node-name={{ inventory_hostname }}\n      args:\n        creates: /etc/kubernetes/admin.conf\n      register: kubeadm_init\n\n    - name: Create .kube directory\n      file:\n        path: \"{{ ansible_env.HOME }}/.kube\"\n        state: directory\n        mode: '0755'\n\n    - name: Copy admin.conf to user's kube config\n      copy:\n        src: /etc/kubernetes/admin.conf\n        dest: \"{{ ansible_env.HOME }}/.kube/config\"\n        owner: \"{{ ansible_user }}\"\n        group: \"{{ ansible_user }}\"\n        mode: '0644'\n        remote_src: yes\n\n    # Network plugin installation\n    - name: Install Flannel CNI\n      shell: kubectl apply -f https://github.com/flannel-io/flannel/releases/latest/download/kube-flannel.yml\n      environment:\n        KUBECONFIG: \"{{ ansible_env.HOME }}/.kube/config\"\n\n    # Join worker nodes\n    - name: Get join command\n      shell: kubeadm token create --print-join-command\n      register: join_command\n      when: inventory_hostname in groups['k8s_masters'][0]\n\n    - name: Join worker nodes to cluster\n      shell: \"{{ hostvars[groups['k8s_masters'][0]]['join_command'].stdout }}\"\n      when: inventory_hostname in groups['k8s_workers']\n\n  post_tasks:\n    - name: Verify cluster status\n      shell: kubectl get nodes\n      environment:\n        KUBECONFIG: \"{{ ansible_env.HOME }}/.kube/config\"\n      register: cluster_status\n      when: inventory_hostname in groups['k8s_masters'][0]\n\n    - name: Display cluster status\n      debug:\n        var: cluster_status.stdout_lines\n      when: inventory_hostname in groups['k8s_masters'][0]\nEOF\n```\n\n## Performance Optimization and Scaling\n\n### Parallel Execution Strategies\n```bash\n# Create high-performance playbook configuration\ncat \u003e playbooks/high-performance-deployment.yml \u003c\u003cEOF\n---\n- name: High-Performance Deployment\n  hosts: all\n  become: yes\n  strategy: free  # Parallel execution\n  serial: \"30%\"   # Process 30% of hosts at a time\n  max_fail_percentage: 10\n  gather_facts: yes\n  fact_caching: smart\n  vars:\n    deployment_batch_size: 10\n    max_concurrent_tasks: 50\n\n  pre_tasks:\n    - name: Check system load\n      shell: uptime | awk '{print $(NF-2)}' | sed 's/,//'\n      register: system_load\n      changed_when: false\n\n    - name: Skip high-load systems\n      meta: end_host\n      when: system_load.stdout | float \u003e 5.0\n\n  tasks:\n    - name: Update packages with retries\n      package:\n        name: \"*\"\n        state: latest\n      retries: 3\n      delay: 30\n      async: 300\n      poll: 10\n\n    - name: Deploy configuration files in parallel\n      template:\n        src: \"{{ item.src }}\"\n        dest: \"{{ item.dest }}\"\n        mode: \"{{ item.mode | default('0644') }}\"\n        backup: yes\n      loop:\n        - { src: \"nginx.conf.j2\", dest: \"/etc/nginx/nginx.conf\" }\n        - { src: \"mysql.cnf.j2\", dest: \"/etc/mysql/my.cnf\" }\n        - { src: \"redis.conf.j2\", dest: \"/etc/redis/redis.conf\" }\n      async: 120\n      poll: 5\n      register: config_deployment\n\n    - name: Wait for all configuration deployments\n      async_status:\n        jid: \"{{ item.ansible_job_id }}\"\n      loop: \"{{ config_deployment.results }}\"\n      when: item.ansible_job_id is defined\n\n  handlers:\n    - name: restart services\n      service:\n        name: \"{{ item }}\"\n        state: restarted\n      loop:\n        - nginx\n        - mysql\n        - redis\n      listen: \"restart all services\"\nEOF\n\n# Performance monitoring playbook\ncat \u003e playbooks/performance-monitoring.yml \u003c\u003cEOF\n---\n- name: Performance Monitoring Setup\n  hosts: all\n  become: yes\n  vars:\n    monitoring_tools:\n      - htop\n      - iotop\n      - nethogs\n      - dstat\n      - sysstat\n      - perf\n\n  tasks:\n    - name: Install performance monitoring tools\n      package:\n        name: \"{{ monitoring_tools }}\"\n        state: present\n\n    - name: Configure system monitoring\n      template:\n        src: templates/sysstat.j2\n        dest: /etc/default/sysstat\n        backup: yes\n      when: ansible_os_family == \"Debian\"\n\n    - name: Enable system statistics collection\n      service:\n        name: \"{{ 'sysstat' if ansible_os_family == 'Debian' else 'sysstat' }}\"\n        enabled: yes\n        state: started\n\n    - name: Create performance monitoring script\n      template:\n        src: templates/performance-monitor.sh.j2\n        dest: /usr/local/bin/performance-monitor.sh\n        mode: '0755'\n\n    - name: Schedule performance monitoring\n      cron:\n        name: \"Performance monitoring\"\n        minute: \"*/5\"\n        job: \"/usr/local/bin/performance-monitor.sh\"\n        user: root\nEOF\n```\n\n## Testing and Validation\n\n### Molecule Testing Framework\n```bash\n# Install Molecule for role testing\npip install molecule[docker] molecule[vagrant] molecule[libvirt]\n\n# Initialize Molecule in role directory\ncd roles/nginx\nmolecule init scenario --driver-name docker\n\n# Create molecule configuration\ncat \u003e molecule/default/molecule.yml \u003c\u003cEOF\n---\ndependency:\n  name: galaxy\ndriver:\n  name: docker\nplatforms:\n  - name: nginx-ubuntu\n    image: ubuntu:22.04\n    pre_build_image: true\n    privileged: true\n    volumes:\n      - /sys/fs/cgroup:/sys/fs/cgroup:ro\n    command: /lib/systemd/systemd\n    networks:\n      - name: molecule\n  - name: nginx-centos\n    image: centos:8\n    pre_build_image: true\n    privileged: true\n    volumes:\n      - /sys/fs/cgroup:/sys/fs/cgroup:ro\n    command: /usr/sbin/init\n    networks:\n      - name: molecule\nprovisioner:\n  name: ansible\n  config_options:\n    defaults:\n      callbacks_enabled: profile_tasks,timer,yaml\n  inventory:\n    host_vars:\n      nginx-ubuntu:\n        ansible_python_interpreter: /usr/bin/python3\n      nginx-centos:\n        ansible_python_interpreter: /usr/bin/python3\nverifier:\n  name: ansible\nlint: |\n  set -e\n  yamllint .\n  ansible-lint\n  flake8\nEOF\n\n# Create test playbook\ncat \u003e molecule/default/converge.yml \u003c\u003cEOF\n---\n- name: Converge\n  hosts: all\n  become: true\n  tasks:\n    - name: \"Include nginx role\"\n      include_role:\n        name: nginx\n      vars:\n        nginx_vhosts:\n          - name: default\n            server_name: localhost\n            listen: 80\n            root: /var/www/html\n            enabled: true\nEOF\n\n# Create test verification\ncat \u003e molecule/default/verify.yml \u003c\u003cEOF\n---\n- name: Verify\n  hosts: all\n  gather_facts: false\n  tasks:\n    - name: Check if NGINX is running\n      uri:\n        url: http://localhost\n        method: GET\n      register: nginx_check\n\n    - name: Verify NGINX is responding\n      assert:\n        that:\n          - nginx_check.status == 200\n        fail_msg: \"NGINX is not responding correctly\"\n\n    - name: Check NGINX configuration\n      shell: nginx -t\n      changed_when: false\n\n    - name: Verify NGINX process\n      shell: pgrep nginx\n      changed_when: false\nEOF\n\n# Run tests\nmolecule test\n```\n\n### Ansible Lint and Security Scanning\n```bash\n# Install Ansible Lint\npip install ansible-lint\n\n# Create .ansible-lint configuration\ncat \u003e .ansible-lint \u003c\u003cEOF\n---\nprofile: production\n\nexclude_paths:\n  - .cache/\n  - .github/\n  - molecule/\n  - .venv/\n\nskip_list:\n  - yaml[line-length]  # Allow longer lines for readability\n\nwarn_list:\n  - experimental  # Warn about experimental features\n\n# Custom rules\nrules:\n  braces:\n    min-spaces-inside: 0\n    max-spaces-inside: 1\n  brackets:\n    min-spaces-inside: 0\n    max-spaces-inside: 0\n  colons:\n    max-spaces-before: 0\n    min-spaces-after: 1\n    max-spaces-after: 1\n  commas:\n    max-spaces-before: 0\n    min-spaces-after: 1\n    max-spaces-after: 1\n  comments:\n    min-spaces-from-content: 1\n  document-start: disable\n  empty-lines:\n    max: 2\n    max-start: 0\n    max-end: 1\n  hyphens:\n    max-spaces-after: 1\n  indentation:\n    spaces: 2\n    indent-sequences: true\n  line-length:\n    max: 120\n  new-line-at-end-of-file: enable\n  trailing-spaces: enable\n  truthy:\n    allowed-values: ['true', 'false', 'yes', 'no']\nEOF\n\n# Create security-focused playbook linting\ncat \u003e .yamllint \u003c\u003cEOF\n---\nextends: default\n\nrules:\n  braces:\n    min-spaces-inside: 0\n    max-spaces-inside: 1\n  brackets:\n    min-spaces-inside: 0\n    max-spaces-inside: 0\n  colons:\n    max-spaces-before: 0\n    min-spaces-after: 1\n    max-spaces-after: 1\n  commas:\n    max-spaces-before: 0\n    min-spaces-after: 1\n    max-spaces-after: 1\n  comments: disable\n  comments-indentation: disable\n  document-start: disable\n  empty-lines:\n    max: 2\n    max-start: 0\n    max-end: 1\n  hyphens:\n    max-spaces-after: 1\n  indentation:\n    spaces: 2\n    indent-sequences: true\n    check-multi-line-strings: false\n  key-duplicates: enable\n  line-length:\n    max: 120\n  new-line-at-end-of-file: enable\n  octal-values:\n    forbid-implicit-octal: true\n  trailing-spaces: enable\n  truthy: disable\nEOF\n\n# Run linting\nansible-lint playbooks/\nyamllint .\n```\n\n## Backup and Disaster Recovery\n\n### Comprehensive Backup Automation\n```bash\ncat \u003e playbooks/backup-automation.yml \u003c\u003cEOF\n---\n- name: Automated Backup System\n  hosts: all\n  become: yes\n  vars:\n    backup_root: /backup\n    backup_retention_days: 30\n    backup_schedule:\n      databases: \"0 2 * * *\"\n      files: \"0 3 * * *\"\n      configs: \"0 4 * * *\"\n\n  tasks:\n    - name: Create backup directories\n      file:\n        path: \"{{ backup_root }}/{{ item }}\"\n        state: directory\n        mode: '0755'\n        owner: root\n        group: root\n      loop:\n        - databases\n        - files\n        - configs\n        - logs\n\n    # Database backups\n    - name: Create database backup script\n      template:\n        src: templates/mysql-backup.sh.j2\n        dest: /usr/local/bin/mysql-backup.sh\n        mode: '0755'\n      when: \"'dbservers' in group_names\"\n\n    - name: Schedule database backups\n      cron:\n        name: \"MySQL backup\"\n        minute: \"0\"\n        hour: \"2\"\n        job: \"/usr/local/bin/mysql-backup.sh\"\n        user: root\n      when: \"'dbservers' in group_names\"\n\n    # File system backups\n    - name: Create file backup script\n      template:\n        src: templates/file-backup.sh.j2\n        dest: /usr/local/bin/file-backup.sh\n        mode: '0755'\n\n    - name: Schedule file backups\n      cron:\n        name: \"File system backup\"\n        minute: \"0\"\n        hour: \"3\"\n        job: \"/usr/local/bin/file-backup.sh\"\n        user: root\n\n    # Configuration backups\n    - name: Backup system configurations\n      archive:\n        path:\n          - /etc/nginx\n          - /etc/mysql\n          - /etc/systemd/system\n          - /etc/crontab\n          - /etc/hosts\n          - /etc/fstab\n        dest: \"{{ backup_root }}/configs/system-config-{{ ansible_date_time.epoch }}.tar.gz\"\n        mode: '0600'\n\n    # Remote backup synchronization\n    - name: Synchronize backups to remote storage\n      synchronize:\n        src: \"{{ backup_root }}/\"\n        dest: \"backup-server.example.com:{{ backup_root }}/{{ inventory_hostname }}/\"\n        delete: yes\n        rsync_opts:\n          - \"--exclude=*.tmp\"\n          - \"--compress\"\n          - \"--archive\"\n      when: backup_remote_sync | default(true)\n\n    # Cleanup old backups\n    - name: Clean up old backup files\n      find:\n        paths: \"{{ backup_root }}\"\n        age: \"{{ backup_retention_days }}d\"\n        file_type: file\n      register: old_backups\n\n    - name: Remove old backup files\n      file:\n        path: \"{{ item.path }}\"\n        state: absent\n      loop: \"{{ old_backups.files }}\"\nEOF\n```\n\n## Verification and Monitoring\n\n### Cross-Platform System Verification\n```bash\n# Create comprehensive verification playbook\ncat \u003e playbooks/system-verification.yml \u003c\u003cEOF\n---\n- name: System Verification and Health Check\n  hosts: all\n  become: yes\n  gather_facts: yes\n  vars:\n    health_checks:\n      - service: nginx\n        port: 80\n        process: nginx\n      - service: mysql\n        port: 3306\n        process: mysqld\n      - service: redis\n        port: 6379\n        process: redis-server\n\n  tasks:\n    # System information gathering\n    - name: Gather system information\n      setup:\n        gather_subset:\n          - all\n          - !facter\n          - !ohai\n\n    # Service verification\n    - name: Check critical services status\n      service_facts:\n\n    - name: Verify services are running\n      assert:\n        that:\n          - \"ansible_facts.services[item.service + '.service'].state == 'running'\"\n        fail_msg: \"Service {{ item.service }} is not running\"\n        success_msg: \"Service {{ item.service }} is healthy\"\n      loop: \"{{ health_checks }}\"\n      when: \"item.service + '.service' in ansible_facts.services\"\n\n    # Network connectivity tests\n    - name: Test network connectivity\n      wait_for:\n        host: \"{{ item.host }}\"\n        port: \"{{ item.port }}\"\n        timeout: 5\n      loop:\n        - { host: \"8.8.8.8\", port: 53 }\n        - { host: \"1.1.1.1\", port: 53 }\n      ignore_errors: yes\n\n    # Disk space monitoring\n    - name: Check disk space usage\n      shell: df -h | awk '$5 \u003e \"85%\" {print $0}'\n      register: disk_usage\n      changed_when: false\n      failed_when: disk_usage.stdout != \"\"\n\n    # Memory usage check\n    - name: Check memory usage\n      shell: free | grep Mem | awk '{printf \"%.0f\", $3/$2 * 100.0}'\n      register: memory_usage\n      changed_when: false\n\n    - name: Alert on high memory usage\n      debug:\n        msg: \"WARNING: Memory usage is {{ memory_usage.stdout }}%\"\n      when: memory_usage.stdout | int \u003e 85\n\n    # Security verification\n    - name: Check for failed login attempts\n      shell: grep \"Failed password\" /var/log/auth.log | tail -10\n      register: failed_logins\n      changed_when: false\n      ignore_errors: yes\n      when: ansible_os_family == \"Debian\"\n\n    - name: Check firewall status\n      shell: |\n        if command -v ufw \u003e/dev/null 2\u003e\u00261; then\n          ufw status\n        elif command -v firewall-cmd \u003e/dev/null 2\u003e\u00261; then\n          firewall-cmd --state\n        else\n          echo \"No supported firewall found\"\n        fi\n      register: firewall_status\n      changed_when: false\n\n  post_tasks:\n    - name: Generate system health report\n      template:\n        src: templates/health-report.j2\n        dest: \"/tmp/health-report-{{ inventory_hostname }}-{{ ansible_date_time.epoch }}.txt\"\n        mode: '0644'\n\n    - name: Fetch health reports\n      fetch:\n        src: \"/tmp/health-report-{{ inventory_hostname }}-{{ ansible_date_time.epoch }}.txt\"\n        dest: \"./reports/\"\n        flat: yes\nEOF\n```\n\n### Continuous Compliance Monitoring\n```bash\ncat \u003e playbooks/compliance-monitoring.yml \u003c\u003cEOF\n---\n- name: Continuous Compliance Monitoring\n  hosts: all\n  become: yes\n  vars:\n    compliance_standards:\n      - cis\n      - pci_dss\n      - soc2\n      - hipaa\n    \n    audit_log_paths:\n      - /var/log/auth.log\n      - /var/log/syslog\n      - /var/log/audit/audit.log\n\n  tasks:\n    # Install audit tools\n    - name: Install audit daemon\n      package:\n        name: \"{{ 'auditd' if ansible_os_family == 'RedHat' else 'auditd' }}\"\n        state: present\n\n    - name: Configure audit rules\n      template:\n        src: templates/audit.rules.j2\n        dest: /etc/audit/rules.d/audit.rules\n        backup: yes\n      notify: restart auditd\n\n    # CIS compliance checks\n    - name: Run CIS benchmark checks\n      shell: |\n        if [ -f /opt/cis-cat/CIS-CAT.sh ]; then\n          /opt/cis-cat/CIS-CAT.sh -b /opt/cis-cat/benchmarks/\n        else\n          echo \"CIS-CAT not installed, skipping\"\n        fi\n      register: cis_results\n      ignore_errors: yes\n\n    # File integrity monitoring\n    - name: Install AIDE\n      package:\n        name: aide\n        state: present\n\n    - name: Initialize AIDE database\n      shell: |\n        aide --init\n        mv /var/lib/aide/aide.db.new /var/lib/aide/aide.db\n      args:\n        creates: /var/lib/aide/aide.db\n\n    - name: Schedule AIDE integrity checks\n      cron:\n        name: \"AIDE integrity check\"\n        minute: \"0\"\n        hour: \"3\"\n        job: \"/usr/bin/aide --check | mail -s 'AIDE Report' security@example.com\"\n        user: root\n\n    # Log monitoring\n    - name: Install log monitoring tools\n      package:\n        name:\n          - logwatch\n          - rsyslog\n        state: present\n\n    - name: Configure centralized logging\n      template:\n        src: templates/rsyslog.conf.j2\n        dest: /etc/rsyslog.conf\n        backup: yes\n      notify: restart rsyslog\n\n  handlers:\n    - name: restart auditd\n      service:\n        name: auditd\n        state: restarted\n\n    - name: restart rsyslog\n      service:\n        name: rsyslog\n        state: restarted\nEOF\n```\n\n## CI/CD Integration\n\n### Jenkins Pipeline Integration\n```bash\n# Create Jenkinsfile for Ansible automation\ncat \u003e Jenkinsfile \u003c\u003cEOF\npipeline {\n    agent any\n    \n    environment {\n        ANSIBLE_CONFIG = 'ansible.cfg'\n        ANSIBLE_HOST_KEY_CHECKING = 'False'\n    }\n    \n    stages {\n        stage('Lint') {\n            steps {\n                sh 'ansible-lint playbooks/'\n                sh 'yamllint .'\n            }\n        }\n        \n        stage('Syntax Check') {\n            steps {\n                sh 'ansible-playbook playbooks/site.yml --syntax-check'\n            }\n        }\n        \n        stage('Dry Run') {\n            steps {\n                sh 'ansible-playbook playbooks/site.yml --check --diff'\n            }\n        }\n        \n        stage('Deploy to Staging') {\n            when {\n                branch 'develop'\n            }\n            steps {\n                sh 'ansible-playbook -i inventories/staging playbooks/site.yml'\n            }\n        }\n        \n        stage('Deploy to Production') {\n            when {\n                branch 'main'\n            }\n            steps {\n                input 'Deploy to Production?'\n                sh 'ansible-playbook -i inventories/production playbooks/site.yml'\n            }\n        }\n        \n        stage('Verify Deployment') {\n            steps {\n                sh 'ansible-playbook playbooks/system-verification.yml'\n            }\n        }\n    }\n    \n    post {\n        always {\n            archiveArtifacts artifacts: 'logs/*.log', allowEmptyArchive: true\n            publishHTML([\n                allowMissing: false,\n                alwaysLinkToLastBuild: true,\n                keepAll: true,\n                reportDir: 'reports',\n                reportFiles: '*.html',\n                reportName: 'Ansible Report'\n            ])\n        }\n        failure {\n            emailext (\n                subject: \"Failed Pipeline: ${env.JOB_NAME} - ${env.BUILD_NUMBER}\",\n                body: \"Something is wrong with ${env.BUILD_URL}\",\n                to: \"${env.DEFAULT_RECIPIENTS}\"\n            )\n        }\n    }\n}\nEOF\n```\n\n### GitLab CI Integration\n```bash\ncat \u003e .gitlab-ci.yml \u003c\u003cEOF\nstages:\n  - lint\n  - test\n  - deploy-staging\n  - deploy-production\n\nvariables:\n  ANSIBLE_CONFIG: ansible.cfg\n  ANSIBLE_HOST_KEY_CHECKING: \"False\"\n\nbefore_script:\n  - pip install ansible ansible-lint yamllint\n  - ansible-galaxy install -r requirements.yml\n\nlint:\n  stage: lint\n  script:\n    - ansible-lint playbooks/\n    - yamllint .\n  rules:\n    - if: '$CI_MERGE_REQUEST_IID'\n    - if: '$CI_COMMIT_BRANCH == $CI_DEFAULT_BRANCH'\n\nsyntax-check:\n  stage: test\n  script:\n    - ansible-playbook playbooks/site.yml --syntax-check\n    - ansible-playbook playbooks/site.yml --check --diff -i inventories/staging\n  rules:\n    - if: '$CI_MERGE_REQUEST_IID'\n    - if: '$CI_COMMIT_BRANCH == $CI_DEFAULT_BRANCH'\n\ndeploy-staging:\n  stage: deploy-staging\n  script:\n    - ansible-playbook -i inventories/staging playbooks/site.yml\n  rules:\n    - if: '$CI_COMMIT_BRANCH == \"develop\"'\n\ndeploy-production:\n  stage: deploy-production\n  script:\n    - ansible-playbook -i inventories/production playbooks/site.yml\n  rules:\n    - if: '$CI_COMMIT_BRANCH == $CI_DEFAULT_BRANCH'\n      when: manual\n  environment:\n    name: production\n    url: https://production.example.com\nEOF\n```\n\n## Troubleshooting (Cross-Platform)\n\n### Common Issues and Solutions\n```bash\n# Debug connection issues\nansible all -m ping -vvv\n\n# Check SSH connectivity\nansible all -m setup --ask-pass --ask-become-pass\n\n# Verify inventory\nansible-inventory --list\nansible-inventory --graph\n\n# Test specific host\nansible target-host -m command -a \"uptime\"\n\n# Check syntax without execution\nansible-playbook playbooks/site.yml --syntax-check\n\n# Dry run with verbose output\nansible-playbook playbooks/site.yml --check --diff -vvv\n\n# Debug variable resolution\nansible-playbook playbooks/site.yml --extra-vars=\"debug=true\" --tags debug\n\n# Check facts\nansible all -m setup | grep ansible_os_family\n\n# Connection troubleshooting\nssh -vvv user@target-host\n\n# Permission issues\nansible all -m file -a \"path=/tmp/test state=touch\" --become\n\n# Vault issues\nansible-vault view group_vars/all/vault.yml\n\n# Performance debugging\nansible-playbook playbooks/site.yml --start-at-task=\"specific task name\"\nansible-playbook playbooks/site.yml --step\n\n# Module testing\nansible localhost -m debug -a \"var=hostvars\"\nansible localhost -m setup\n\n# Check for syntax errors in roles\nfind roles/ -name \"*.yml\" -exec ansible-playbook {} --syntax-check \\;\n```\n\n### Advanced Debugging\n```bash\n# Enable comprehensive logging\nexport ANSIBLE_DEBUG=1\nexport ANSIBLE_VERBOSITY=4\nansible-playbook playbooks/site.yml\n\n# Profile playbook execution\nansible-playbook playbooks/site.yml --extra-vars=\"profile_tasks_sort_order=none\"\n\n# Memory usage analysis\nansible-playbook playbooks/site.yml --extra-vars=\"ansible_python_interpreter=/usr/bin/python3\"\n\n# Network debugging\nansible all -m command -a \"ss -tulpn\"\nansible all -m command -a \"netstat -rn\"\n\n# Process debugging\nansible all -m command -a \"ps aux --sort=-%mem | head -10\"\n\n# Disk usage analysis\nansible all -m command -a \"df -h\"\nansible all -m command -a \"du -sh /var/log/*\"\n\n# Service debugging\nansible all -m systemd -a \"name=nginx\" --become\nansible all -m command -a \"systemctl status nginx\" --become\n\n# Variable debugging\nansible-playbook playbooks/site.yml --extra-vars=\"debug_vars=true\" --tags debug_vars\n```\n\n## Additional Resources\n\n- [Official Documentation](https://docs.ansible.com/)\n- [Ansible Galaxy](https://galaxy.ansible.com/)\n- [Best Practices Guide](https://docs.ansible.com/ansible/latest/user_guide/playbooks_best_practices.html)\n- [Security Best Practices](https://docs.ansible.com/ansible/latest/user_guide/become.html#security-best-practices)\n- [Ansible Molecule Testing](https://molecule.readthedocs.io/)\n- [Community Collections](https://docs.ansible.com/ansible/latest/collections/index.html)\n\n---\n\n**Note:** This guide is part of the [HowToMgr](https://howtomgr.github.io) collection.","readmeHtml":"\u003ch1 id=\"ansible-installation-guide\" class=\"mobile-header\"\u003eAnsible Installation Guide\u003c/h1\u003e\n\u003cp class=\"mobile-paragraph\"\u003eAgentless automation platform for configuration management, application deployment, and task automation across multiple systems. Industry standard for infrastructure automation with enterprise-grade security.\u003c/p\u003e\n\u003ch2 id=\"prerequisites\" class=\"mobile-header\"\u003ePrerequisites\u003c/h2\u003e\n\u003cli class=\"mobile-list-item\"\u003eLinux control machine (any modern distribution)\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003ePython 3.8+ on control machine\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eSSH access to target hosts\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003ePython 2.7+ or 3.5+ on target hosts\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003e2GB RAM minimum, 4GB+ recommended for large infrastructures\u003c/li\u003e\n\u003ch2 id=\"installation\" class=\"mobile-header\"\u003eInstallation\u003c/h2\u003e\n\u003ch3 id=\"using-package-manager-recommended\" class=\"mobile-header\"\u003eUsing Package Manager (Recommended)\u003c/h3\u003e\n\u003cp class=\"mobile-paragraph\"\u003e#### Ubuntu/Debian\u003c/p\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Update package list\nsudo apt update\n\n# Install Ansible and dependencies\nsudo apt install -y ansible python3-pip python3-venv sshpass\n\n# Install additional collections\nansible-galaxy collection install community.general\nansible-galaxy collection install ansible.posix\nansible-galaxy collection install kubernetes.core\nansible-galaxy collection install amazon.aws\nansible-galaxy collection install azure.azcollection\nansible-galaxy collection install google.cloud\n\n# Verify installation\nansible --version\nansible-galaxy collection list\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003cp class=\"mobile-paragraph\"\u003e#### RHEL/CentOS/Rocky Linux/AlmaLinux\u003c/p\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Install EPEL repository\nsudo yum install -y epel-release\n\n# Install Ansible\nsudo yum install -y ansible python3-pip\n\n# For newer distributions\nsudo dnf install -y ansible python3-pip\n\n# Install collections\nansible-galaxy collection install community.general\nansible-galaxy collection install ansible.posix\nansible-galaxy collection install kubernetes.core\n\n# Verify installation\nansible --version\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003cp class=\"mobile-paragraph\"\u003e#### Fedora\u003c/p\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Install Ansible\nsudo dnf install -y ansible python3-pip python3-virtualenv\n\n# Install additional collections\nansible-galaxy collection install community.general\nansible-galaxy collection install ansible.posix\nansible-galaxy collection install kubernetes.core\n\n# Verify installation\nansible --version\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003cp class=\"mobile-paragraph\"\u003e#### Arch Linux\u003c/p\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Install Ansible\nsudo pacman -Syu ansible python-pip\n\n# Install collections\nansible-galaxy collection install community.general\nansible-galaxy collection install ansible.posix\n\n# Verify installation\nansible --version\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003cp class=\"mobile-paragraph\"\u003e#### Alpine Linux\u003c/p\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Install Ansible\nsudo apk update\nsudo apk add ansible python3 py3-pip openssh\n\n# Install collections\nansible-galaxy collection install community.general\n\n# Verify installation\nansible --version\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"using-pip-latest-version\" class=\"mobile-header\"\u003eUsing pip (Latest Version)\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Create virtual environment (recommended)\npython3 -m venv ~/ansible-venv\nsource ~/ansible-venv/bin/activate\n\n# Install Ansible via pip\npip install --upgrade pip\npip install ansible ansible-core\n\n# Install additional packages\npip install paramiko jinja2 PyYAML cryptography\n\n# Install cloud provider SDKs\npip install boto3 botocore azure-cli google-cloud-storage\n\n# Install collections\nansible-galaxy collection install community.general\nansible-galaxy collection install ansible.posix\nansible-galaxy collection install kubernetes.core\nansible-galaxy collection install amazon.aws\nansible-galaxy collection install azure.azcollection\nansible-galaxy collection install google.cloud\n\n# Add to PATH permanently\necho \u0026#039;source ~/ansible-venv/bin/activate\u0026#039; \u0026gt;\u0026gt; ~/.bashrc\n\n# Verify installation\nansible --version\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"using-docker\" class=\"mobile-header\"\u003eUsing Docker\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Create Ansible Docker container with mounted volumes\ndocker run --rm -it \\\n  -v $(pwd):/ansible \\\n  -v ~/.ssh:/root/.ssh:ro \\\n  -v ~/.aws:/root/.aws:ro \\\n  -v ~/.azure:/root/.azure:ro \\\n  --workdir /ansible \\\n  ansible/ansible:latest\n\n# Create wrapper script for ease of use\nsudo tee /usr/local/bin/ansible-docker \u0026gt; /dev/null \u0026lt;\u0026lt;\u0026#039;EOF\u0026#039;\n#!/bin/bash\ndocker run --rm -it \\\n  -v $(pwd):/ansible \\\n  -v ~/.ssh:/root/.ssh:ro \\\n  -v ~/.aws:/root/.aws:ro \\\n  -v ~/.azure:/root/.azure:ro \\\n  -v ~/.kube:/root/.kube:ro \\\n  --workdir /ansible \\\n  --network host \\\n  ansible/ansible:latest \u0026quot;$@\u0026quot;\nEOF\nsudo chmod +x /usr/local/bin/ansible-docker\n\n# Create aliases\necho \u0026#039;alias ansible=\u0026quot;ansible-docker ansible\u0026quot;\u0026#039; \u0026gt;\u0026gt; ~/.bashrc\necho \u0026#039;alias ansible-playbook=\u0026quot;ansible-docker ansible-playbook\u0026quot;\u0026#039; \u0026gt;\u0026gt; ~/.bashrc\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"project-structure-and-configuration\" class=\"mobile-header\"\u003eProject Structure and Configuration\u003c/h2\u003e\n\u003ch3 id=\"professional-project-structure\" class=\"mobile-header\"\u003eProfessional Project Structure\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Create comprehensive Ansible project structure\nmkdir -p ~/ansible-infrastructure/{\n  inventories/{production,staging,development},\n  playbooks,\n  roles,\n  group_vars,\n  host_vars,\n  library,\n  filter_plugins,\n  callback_plugins,\n  vault,\n  collections,\n  logs\n}\n\ncd ~/ansible-infrastructure\n\n# Create ansible.cfg with security best practices\ncat \u0026gt; ansible.cfg \u0026lt;\u0026lt;EOF\n[defaults]\ninventory = inventories/production/hosts.yml\nremote_user = ansible\nprivate_key_file = ~/.ssh/ansible_key\nhost_key_checking = True\ntimeout = 30\nretry_files_enabled = False\nstdout_callback = yaml\nbin_ansible_callbacks = True\ngathering = smart\nfact_caching = jsonfile\nfact_caching_connection = ~/.ansible/facts_cache\nfact_caching_timeout = 86400\ninterpreter_python = auto_silent\nvault_password_file = ~/.ansible_vault_pass\n\n# Logging\nlog_path = logs/ansible.log\ndisplay_skipped_hosts = False\ndisplay_ok_hosts = False\n\n# Performance\nforks = 20\npoll_interval = 15\ninternal_poll_interval = 0.001\n\n# Security\ncommand_warnings = True\ndeprecation_warnings = True\naction_warnings = True\nlocalhost_warning = True\n\n[ssh_connection]\nssh_args = -o ControlMaster=auto -o ControlPersist=3600s -o PreferredAuthentications=publickey\npipelining = True\ncontrol_path = ~/.ansible/cp/%%h-%%p-%%r\nretries = 3\n\n[privilege_escalation]\nbecome = False\nbecome_method = sudo\nbecome_user = root\nbecome_ask_pass = False\n\n[inventory]\nenable_plugins = host_list, script, auto, yaml, ini, toml\ncache = True\ncache_plugin = jsonfile\ncache_timeout = 3600\ncache_connection = ~/.ansible/inventory_cache\n\n[galaxy]\nserver_list = automation_hub, galaxy\nEOF\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"advanced-inventory-management\" class=\"mobile-header\"\u003eAdvanced Inventory Management\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Create production inventory with groups and variables\ncat \u0026gt; inventories/production/hosts.yml \u0026lt;\u0026lt;EOF\nall:\n  children:\n    webservers:\n      hosts:\n        web-prod-01:\n          ansible_host: 10.0.1.10\n          ansible_user: ansible\n          server_role: frontend\n          backup_enabled: true\n        web-prod-02:\n          ansible_host: 10.0.1.11\n          ansible_user: ansible\n          server_role: frontend\n          backup_enabled: true\n        web-prod-03:\n          ansible_host: 10.0.1.12\n          ansible_user: ansible\n          server_role: frontend\n          backup_enabled: true\n      vars:\n        http_port: 80\n        https_port: 443\n        max_clients: 200\n        environment: production\n        monitoring_enabled: true\n\n    dbservers:\n      hosts:\n        db-prod-01:\n          ansible_host: 10.0.2.10\n          ansible_user: ansible\n          mysql_server_id: 1\n          mysql_role: master\n        db-prod-02:\n          ansible_host: 10.0.2.11\n          ansible_user: ansible\n          mysql_server_id: 2\n          mysql_role: slave\n      vars:\n        mysql_port: 3306\n        mysql_root_password: \u0026quot;{{ vault_mysql_root_password }}\u0026quot;\n        mysql_replication_user: \u0026quot;{{ vault_mysql_replication_user }}\u0026quot;\n        mysql_replication_password: \u0026quot;{{ vault_mysql_replication_password }}\u0026quot;\n\n    loadbalancers:\n      hosts:\n        lb-prod-01:\n          ansible_host: 10.0.3.10\n          ansible_user: ansible\n          lb_algorithm: roundrobin\n        lb-prod-02:\n          ansible_host: 10.0.3.11\n          ansible_user: ansible\n          lb_algorithm: roundrobin\n      vars:\n        haproxy_stats_enabled: true\n        haproxy_stats_user: admin\n        haproxy_stats_password: \u0026quot;{{ vault_haproxy_stats_password }}\u0026quot;\n\n    monitoring:\n      hosts:\n        monitor-prod-01:\n          ansible_host: 10.0.4.10\n          ansible_user: ansible\n          prometheus_retention: 30d\n          grafana_admin_password: \u0026quot;{{ vault_grafana_admin_password }}\u0026quot;\n\n    bastion:\n      hosts:\n        bastion-prod-01:\n          ansible_host: bastion.example.com\n          ansible_user: ansible\n          ansible_port: 22\n\n# Global variables for all hosts\nwebservers:\n  vars:\n    nginx_worker_processes: auto\n    nginx_worker_connections: 1024\n    ssl_certificate_path: /etc/ssl/certs\n    backup_schedule: \u0026quot;0 2 * * *\u0026quot;\n\ndbservers:\n  vars:\n    mysql_innodb_buffer_pool_size: 2G\n    mysql_max_connections: 200\n    backup_schedule: \u0026quot;0 1 * * *\u0026quot;\n    monitoring_enabled: true\nEOF\n\n# Create dynamic inventory script for cloud environments\ncat \u0026gt; inventories/production/aws_ec2.yml \u0026lt;\u0026lt;EOF\nplugin: amazon.aws.aws_ec2\nregions:\n  - us-west-2\n  - us-east-1\nfilters:\n  tag:Environment: production\n  tag:Ansible: managed\n  instance-state-name: running\n\nhostnames:\n  - tag:Name\n  - dns-name\n  - private-ip-address\n\ncompose:\n  ansible_host: private_ip_address\n  ec2_state: ec2_state_name\n  ec2_arch: ec2_architecture\n\ngroups:\n  # Group by instance type\n  webservers: \u0026quot;\u0026#039;web\u0026#039; in tags.Role\u0026quot;\n  databases: \u0026quot;\u0026#039;db\u0026#039; in tags.Role\u0026quot;\n  loadbalancers: \u0026quot;\u0026#039;lb\u0026#039; in tags.Role\u0026quot;\n  \n  # Group by environment\n  production: \u0026quot;tags.Environment == \u0026#039;production\u0026#039;\u0026quot;\n  staging: \u0026quot;tags.Environment == \u0026#039;staging\u0026#039;\u0026quot;\n  \n  # Group by availability zone\n  us_west_2a: ec2_placement_availability_zone == \u0026quot;us-west-2a\u0026quot;\n  us_west_2b: ec2_placement_availability_zone == \u0026quot;us-west-2b\u0026quot;\n\nkeyed_groups:\n  # Create groups based on tags\n  - key: tags.Environment\n    prefix: env\n  - key: tags.Role  \n    prefix: role\n  - key: ec2_instance_type\n    prefix: type\nEOF\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"ansible-vault-security\" class=\"mobile-header\"\u003eAnsible Vault Security\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Create strong vault password\nopenssl rand -base64 32 \u0026gt; ~/.ansible_vault_pass\nchmod 600 ~/.ansible_vault_pass\n\n# Create encrypted vault file for secrets\nansible-vault create group_vars/all/vault.yml\n# Enter secure passwords and API keys:\n# vault_mysql_root_password: your_secure_mysql_password\n# vault_grafana_admin_password: your_secure_grafana_password  \n# vault_ssl_private_key: |\n#   -----BEGIN PRIVATE KEY-----\n#   your_private_key_content\n#   -----END PRIVATE KEY-----\n\n# Create non-encrypted variables file\ncat \u0026gt; group_vars/all/vars.yml \u0026lt;\u0026lt;EOF\n# Non-sensitive variables\nmysql_port: 3306\nnginx_port: 80\ngrafana_port: 3000\nprometheus_port: 9090\n\n# Reference vault variables\nmysql_root_password: \u0026quot;{{ vault_mysql_root_password }}\u0026quot;\ngrafana_admin_password: \u0026quot;{{ vault_grafana_admin_password }}\u0026quot;\n\n# SSL configuration\nssl_certificate_path: /etc/ssl/certs/server.crt\nssl_private_key_path: /etc/ssl/private/server.key\nssl_private_key_content: \u0026quot;{{ vault_ssl_private_key }}\u0026quot;\n\n# Security settings\nansible_ssh_common_args: \u0026#039;-o StrictHostKeyChecking=yes -o UserKnownHostsFile=~/.ssh/known_hosts\u0026#039;\nansible_become_method: sudo\nansible_become_user: root\nEOF\n\n# Edit vault file\nansible-vault edit group_vars/all/vault.yml\n\n# View vault file (read-only)\nansible-vault view group_vars/all/vault.yml\n\n# Change vault password\nansible-vault rekey group_vars/all/vault.yml\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"comprehensive-playbooks\" class=\"mobile-header\"\u003eComprehensive Playbooks\u003c/h2\u003e\n\u003ch3 id=\"system-hardening-playbook\" class=\"mobile-header\"\u003eSystem Hardening Playbook\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003ecat \u0026gt; playbooks/system-hardening.yml \u0026lt;\u0026lt;EOF\n---\n- name: System Security Hardening\n  hosts: all\n  become: yes\n  gather_facts: yes\n  vars:\n    security_packages:\n      - fail2ban\n      - ufw\n      - aide\n      - chkrootkit\n      - rkhunter\n      - clamav\n      - lynis\n    \n    disabled_services:\n      - telnet\n      - rsh\n      - rlogin\n      - tftp\n      - talk\n      - finger\n\n  pre_tasks:\n    - name: Update package cache\n      package:\n        update_cache: yes\n        cache_valid_time: 3600\n      when: ansible_os_family in [\u0026quot;Debian\u0026quot;, \u0026quot;RedHat\u0026quot;]\n\n  tasks:\n    # System updates\n    - name: Upgrade all packages\n      package:\n        name: \u0026quot;*\u0026quot;\n        state: latest\n      when: ansible_os_family == \u0026quot;RedHat\u0026quot;\n\n    - name: Upgrade all packages (Debian/Ubuntu)\n      apt:\n        upgrade: dist\n        autoremove: yes\n        autoclean: yes\n      when: ansible_os_family == \u0026quot;Debian\u0026quot;\n\n    # Install security packages\n    - name: Install security packages\n      package:\n        name: \u0026quot;{{ security_packages }}\u0026quot;\n        state: present\n\n    # User security\n    - name: Create ansible user with limited privileges\n      user:\n        name: ansible\n        groups: sudo\n        shell: /bin/bash\n        create_home: yes\n        generate_ssh_key: yes\n        ssh_key_bits: 4096\n        ssh_key_type: rsa\n\n    - name: Configure sudo for ansible user\n      lineinfile:\n        path: /etc/sudoers.d/ansible\n        line: \u0026#039;ansible ALL=(ALL) NOPASSWD:ALL\u0026#039;\n        create: yes\n        mode: \u0026#039;0440\u0026#039;\n        validate: \u0026#039;visudo -cf %s\u0026#039;\n\n    # SSH hardening\n    - name: Configure SSH security\n      lineinfile:\n        path: /etc/ssh/sshd_config\n        regexp: \u0026quot;{{ item.regexp }}\u0026quot;\n        line: \u0026quot;{{ item.line }}\u0026quot;\n        backup: yes\n      loop:\n        - { regexp: \u0026#039;^#?PermitRootLogin\u0026#039;, line: \u0026#039;PermitRootLogin no\u0026#039; }\n        - { regexp: \u0026#039;^#?PasswordAuthentication\u0026#039;, line: \u0026#039;PasswordAuthentication no\u0026#039; }\n        - { regexp: \u0026#039;^#?X11Forwarding\u0026#039;, line: \u0026#039;X11Forwarding no\u0026#039; }\n        - { regexp: \u0026#039;^#?MaxAuthTries\u0026#039;, line: \u0026#039;MaxAuthTries 3\u0026#039; }\n        - { regexp: \u0026#039;^#?ClientAliveInterval\u0026#039;, line: \u0026#039;ClientAliveInterval 300\u0026#039; }\n        - { regexp: \u0026#039;^#?ClientAliveCountMax\u0026#039;, line: \u0026#039;ClientAliveCountMax 0\u0026#039; }\n        - { regexp: \u0026#039;^#?Protocol\u0026#039;, line: \u0026#039;Protocol 2\u0026#039; }\n        - { regexp: \u0026#039;^#?LogLevel\u0026#039;, line: \u0026#039;LogLevel VERBOSE\u0026#039; }\n      notify: restart ssh\n\n    # Firewall configuration\n    - name: Configure UFW firewall (Debian/Ubuntu)\n      ufw:\n        state: enabled\n        policy: deny\n        direction: incoming\n      when: ansible_os_family == \u0026quot;Debian\u0026quot;\n\n    - name: Allow SSH through UFW\n      ufw:\n        rule: allow\n        port: 22\n        proto: tcp\n        comment: \u0026#039;SSH access\u0026#039;\n      when: ansible_os_family == \u0026quot;Debian\u0026quot;\n\n    - name: Configure firewalld (RHEL/CentOS/Fedora)\n      firewalld:\n        state: enabled\n        permanent: yes\n        immediate: yes\n      when: ansible_os_family == \u0026quot;RedHat\u0026quot;\n\n    - name: Allow SSH through firewalld\n      firewalld:\n        service: ssh\n        permanent: yes\n        state: enabled\n        immediate: yes\n      when: ansible_os_family == \u0026quot;RedHat\u0026quot;\n\n    # Disable unnecessary services\n    - name: Disable unnecessary services\n      systemd:\n        name: \u0026quot;{{ item }}\u0026quot;\n        enabled: no\n        state: stopped\n      loop: \u0026quot;{{ disabled_services }}\u0026quot;\n      ignore_errors: yes\n\n    # File system security\n    - name: Set proper permissions on sensitive files\n      file:\n        path: \u0026quot;{{ item.path }}\u0026quot;\n        mode: \u0026quot;{{ item.mode }}\u0026quot;\n        owner: root\n        group: root\n      loop:\n        - { path: \u0026#039;/etc/passwd\u0026#039;, mode: \u0026#039;0644\u0026#039; }\n        - { path: \u0026#039;/etc/shadow\u0026#039;, mode: \u0026#039;0640\u0026#039; }\n        - { path: \u0026#039;/etc/group\u0026#039;, mode: \u0026#039;0644\u0026#039; }\n        - { path: \u0026#039;/etc/gshadow\u0026#039;, mode: \u0026#039;0640\u0026#039; }\n        - { path: \u0026#039;/etc/ssh/sshd_config\u0026#039;, mode: \u0026#039;0600\u0026#039; }\n\n    # Kernel security parameters\n    - name: Configure kernel security parameters\n      sysctl:\n        name: \u0026quot;{{ item.key }}\u0026quot;\n        value: \u0026quot;{{ item.value }}\u0026quot;\n        sysctl_set: yes\n        state: present\n        reload: yes\n      loop:\n        - { key: \u0026#039;net.ipv4.ip_forward\u0026#039;, value: \u0026#039;0\u0026#039; }\n        - { key: \u0026#039;net.ipv4.conf.all.send_redirects\u0026#039;, value: \u0026#039;0\u0026#039; }\n        - { key: \u0026#039;net.ipv4.conf.default.send_redirects\u0026#039;, value: \u0026#039;0\u0026#039; }\n        - { key: \u0026#039;net.ipv4.conf.all.accept_source_route\u0026#039;, value: \u0026#039;0\u0026#039; }\n        - { key: \u0026#039;net.ipv4.conf.default.accept_source_route\u0026#039;, value: \u0026#039;0\u0026#039; }\n        - { key: \u0026#039;net.ipv4.conf.all.accept_redirects\u0026#039;, value: \u0026#039;0\u0026#039; }\n        - { key: \u0026#039;net.ipv4.conf.default.accept_redirects\u0026#039;, value: \u0026#039;0\u0026#039; }\n        - { key: \u0026#039;net.ipv4.conf.all.secure_redirects\u0026#039;, value: \u0026#039;0\u0026#039; }\n        - { key: \u0026#039;net.ipv4.conf.default.secure_redirects\u0026#039;, value: \u0026#039;0\u0026#039; }\n        - { key: \u0026#039;net.ipv4.conf.all.log_martians\u0026#039;, value: \u0026#039;1\u0026#039; }\n        - { key: \u0026#039;net.ipv4.conf.default.log_martians\u0026#039;, value: \u0026#039;1\u0026#039; }\n        - { key: \u0026#039;kernel.randomize_va_space\u0026#039;, value: \u0026#039;2\u0026#039; }\n\n    # Configure fail2ban\n    - name: Configure fail2ban for SSH protection\n      template:\n        src: templates/fail2ban-jail.local.j2\n        dest: /etc/fail2ban/jail.local\n        backup: yes\n      notify: restart fail2ban\n\n  handlers:\n    - name: restart ssh\n      service:\n        name: \u0026quot;{{ \u0026#039;ssh\u0026#039; if ansible_os_family == \u0026#039;Debian\u0026#039; else \u0026#039;sshd\u0026#039; }}\u0026quot;\n        state: restarted\n\n    - name: restart fail2ban\n      service:\n        name: fail2ban\n        state: restarted\nEOF\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"application-deployment-playbook\" class=\"mobile-header\"\u003eApplication Deployment Playbook\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003ecat \u0026gt; playbooks/web-application-deployment.yml \u0026lt;\u0026lt;EOF\n---\n- name: Deploy Web Application Stack\n  hosts: webservers\n  become: yes\n  serial: \u0026quot;25%\u0026quot;  # Rolling deployment\n  max_fail_percentage: 10\n  vars:\n    app_name: mywebapp\n    app_version: \u0026quot;{{ app_version | default(\u0026#039;latest\u0026#039;) }}\u0026quot;\n    app_port: 3000\n    nginx_workers: \u0026quot;{{ ansible_processor_cores }}\u0026quot;\n    \n  pre_tasks:\n    - name: Check if maintenance mode file exists\n      stat:\n        path: /var/www/html/maintenance.html\n      register: maintenance_mode\n\n    - name: Fail if in maintenance mode\n      fail:\n        msg: \u0026quot;Server is in maintenance mode\u0026quot;\n      when: maintenance_mode.stat.exists and not force_deployment | default(false)\n\n  tasks:\n    # Application deployment\n    - name: Create application user\n      user:\n        name: \u0026quot;{{ app_name }}\u0026quot;\n        system: yes\n        shell: /bin/false\n        home: \u0026quot;/opt/{{ app_name }}\u0026quot;\n        create_home: yes\n\n    - name: Create application directories\n      file:\n        path: \u0026quot;{{ item }}\u0026quot;\n        state: directory\n        owner: \u0026quot;{{ app_name }}\u0026quot;\n        group: \u0026quot;{{ app_name }}\u0026quot;\n        mode: \u0026#039;0755\u0026#039;\n      loop:\n        - \u0026quot;/opt/{{ app_name }}\u0026quot;\n        - \u0026quot;/opt/{{ app_name }}/releases\u0026quot;\n        - \u0026quot;/opt/{{ app_name }}/shared\u0026quot;\n        - \u0026quot;/var/log/{{ app_name }}\u0026quot;\n\n    - name: Download application release\n      get_url:\n        url: \u0026quot;https://releases.example.com/{{ app_name }}/{{ app_version }}/{{ app_name }}-{{ app_version }}.tar.gz\u0026quot;\n        dest: \u0026quot;/tmp/{{ app_name }}-{{ app_version }}.tar.gz\u0026quot;\n        mode: \u0026#039;0644\u0026#039;\n        timeout: 300\n      register: download_result\n\n    - name: Extract application\n      unarchive:\n        src: \u0026quot;/tmp/{{ app_name }}-{{ app_version }}.tar.gz\u0026quot;\n        dest: \u0026quot;/opt/{{ app_name }}/releases/\u0026quot;\n        owner: \u0026quot;{{ app_name }}\u0026quot;\n        group: \u0026quot;{{ app_name }}\u0026quot;\n        remote_src: yes\n        creates: \u0026quot;/opt/{{ app_name }}/releases/{{ app_version }}\u0026quot;\n\n    - name: Create symlink to current release\n      file:\n        src: \u0026quot;/opt/{{ app_name }}/releases/{{ app_version }}\u0026quot;\n        dest: \u0026quot;/opt/{{ app_name }}/current\u0026quot;\n        state: link\n        owner: \u0026quot;{{ app_name }}\u0026quot;\n        group: \u0026quot;{{ app_name }}\u0026quot;\n      notify:\n        - reload application\n        - reload nginx\n\n    # Configuration management\n    - name: Deploy application configuration\n      template:\n        src: \u0026quot;templates/{{ app_name }}.conf.j2\u0026quot;\n        dest: \u0026quot;/opt/{{ app_name }}/shared/{{ app_name }}.conf\u0026quot;\n        owner: \u0026quot;{{ app_name }}\u0026quot;\n        group: \u0026quot;{{ app_name }}\u0026quot;\n        mode: \u0026#039;0640\u0026#039;\n        backup: yes\n      notify: reload application\n\n    # Service management\n    - name: Deploy systemd service file\n      template:\n        src: \u0026quot;templates/{{ app_name }}.service.j2\u0026quot;\n        dest: \u0026quot;/etc/systemd/system/{{ app_name }}.service\u0026quot;\n        mode: \u0026#039;0644\u0026#039;\n      notify:\n        - daemon reload\n        - restart application\n\n    - name: Enable and start application service\n      systemd:\n        name: \u0026quot;{{ app_name }}\u0026quot;\n        enabled: yes\n        state: started\n        daemon_reload: yes\n\n    # Health check\n    - name: Wait for application to be ready\n      uri:\n        url: \u0026quot;http://localhost:{{ app_port }}/health\u0026quot;\n        method: GET\n        status_code: 200\n      retries: 30\n      delay: 10\n\n    # Cleanup old releases\n    - name: Clean up old releases (keep last 3)\n      shell: |\n        cd /opt/{{ app_name }}/releases\n        ls -t | tail -n +4 | xargs rm -rf\n      args:\n        executable: /bin/bash\n\n  post_tasks:\n    - name: Verify application is running\n      uri:\n        url: \u0026quot;http://{{ ansible_default_ipv4.address }}:{{ app_port }}/health\u0026quot;\n        method: GET\n        status_code: 200\n      delegate_to: localhost\n\n    - name: Log deployment success\n      lineinfile:\n        path: \u0026quot;/var/log/{{ app_name }}/deployments.log\u0026quot;\n        line: \u0026quot;{{ ansible_date_time.iso8601 }} - Successfully deployed {{ app_version }} to {{ inventory_hostname }}\u0026quot;\n        create: yes\n\n  handlers:\n    - name: daemon reload\n      systemd:\n        daemon_reload: yes\n\n    - name: restart application\n      systemd:\n        name: \u0026quot;{{ app_name }}\u0026quot;\n        state: restarted\n\n    - name: reload application\n      systemd:\n        name: \u0026quot;{{ app_name }}\u0026quot;\n        state: reloaded\n\n    - name: reload nginx\n      service:\n        name: nginx\n        state: reloaded\nEOF\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"infrastructure-as-code-playbook\" class=\"mobile-header\"\u003eInfrastructure as Code Playbook\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003ecat \u0026gt; playbooks/infrastructure-provisioning.yml \u0026lt;\u0026lt;EOF\n---\n- name: Infrastructure Provisioning and Configuration\n  hosts: all\n  become: yes\n  strategy: free  # Parallel execution\n  vars:\n    base_packages:\n      Debian:\n        - curl\n        - wget\n        - vim\n        - htop\n        - git\n        - python3\n        - python3-pip\n        - unzip\n        - tree\n      RedHat:\n        - curl\n        - wget\n        - vim\n        - htop\n        - git\n        - python3\n        - python3-pip\n        - unzip\n        - tree\n        - epel-release\n\n  tasks:\n    # System preparation\n    - name: Set hostname\n      hostname:\n        name: \u0026quot;{{ inventory_hostname }}\u0026quot;\n\n    - name: Update /etc/hosts\n      lineinfile:\n        path: /etc/hosts\n        line: \u0026quot;{{ ansible_default_ipv4.address }} {{ inventory_hostname }}\u0026quot;\n        backup: yes\n\n    # Package management\n    - name: Install base packages\n      package:\n        name: \u0026quot;{{ base_packages[ansible_os_family] | default(base_packages[\u0026#039;Debian\u0026#039;]) }}\u0026quot;\n        state: present\n\n    # Time synchronization\n    - name: Install and configure NTP\n      package:\n        name: \u0026quot;{{ \u0026#039;ntp\u0026#039; if ansible_os_family == \u0026#039;Debian\u0026#039; else \u0026#039;chrony\u0026#039; }}\u0026quot;\n        state: present\n\n    - name: Start and enable time synchronization\n      service:\n        name: \u0026quot;{{ \u0026#039;ntp\u0026#039; if ansible_os_family == \u0026#039;Debian\u0026#039; else \u0026#039;chronyd\u0026#039; }}\u0026quot;\n        state: started\n        enabled: yes\n\n    # Log management\n    - name: Configure logrotate for application logs\n      template:\n        src: templates/app-logrotate.j2\n        dest: /etc/logrotate.d/applications\n        mode: \u0026#039;0644\u0026#039;\n\n    # Monitoring agent installation\n    - name: Install Node Exporter for Prometheus monitoring\n      get_url:\n        url: \u0026quot;https://github.com/prometheus/node_exporter/releases/download/v1.6.1/node_exporter-1.6.1.linux-amd64.tar.gz\u0026quot;\n        dest: /tmp/node_exporter.tar.gz\n        mode: \u0026#039;0644\u0026#039;\n\n    - name: Extract Node Exporter\n      unarchive:\n        src: /tmp/node_exporter.tar.gz\n        dest: /tmp\n        remote_src: yes\n\n    - name: Copy Node Exporter binary\n      copy:\n        src: /tmp/node_exporter-1.6.1.linux-amd64/node_exporter\n        dest: /usr/local/bin/node_exporter\n        mode: \u0026#039;0755\u0026#039;\n        owner: root\n        group: root\n        remote_src: yes\n\n    - name: Create node_exporter systemd service\n      template:\n        src: templates/node_exporter.service.j2\n        dest: /etc/systemd/system/node_exporter.service\n        mode: \u0026#039;0644\u0026#039;\n      notify:\n        - daemon reload\n        - restart node_exporter\n\n    # Security configuration\n    - name: Configure kernel parameters for security\n      sysctl:\n        name: \u0026quot;{{ item.key }}\u0026quot;\n        value: \u0026quot;{{ item.value }}\u0026quot;\n        sysctl_set: yes\n        state: present\n        reload: yes\n      loop:\n        - { key: \u0026#039;kernel.dmesg_restrict\u0026#039;, value: \u0026#039;1\u0026#039; }\n        - { key: \u0026#039;kernel.kptr_restrict\u0026#039;, value: \u0026#039;2\u0026#039; }\n        - { key: \u0026#039;kernel.yama.ptrace_scope\u0026#039;, value: \u0026#039;1\u0026#039; }\n        - { key: \u0026#039;net.ipv4.conf.all.log_martians\u0026#039;, value: \u0026#039;1\u0026#039; }\n        - { key: \u0026#039;net.ipv4.conf.default.log_martians\u0026#039;, value: \u0026#039;1\u0026#039; }\n        - { key: \u0026#039;net.ipv4.conf.all.send_redirects\u0026#039;, value: \u0026#039;0\u0026#039; }\n        - { key: \u0026#039;net.ipv4.conf.default.send_redirects\u0026#039;, value: \u0026#039;0\u0026#039; }\n\n    # File integrity monitoring\n    - name: Initialize AIDE database\n      shell: |\n        aide --init\n        mv /var/lib/aide/aide.db.new /var/lib/aide/aide.db\n      args:\n        creates: /var/lib/aide/aide.db\n\n    - name: Schedule AIDE integrity checks\n      cron:\n        name: \u0026quot;AIDE integrity check\u0026quot;\n        minute: \u0026quot;0\u0026quot;\n        hour: \u0026quot;3\u0026quot;\n        job: \u0026quot;/usr/bin/aide --check\u0026quot;\n        user: root\n\n  handlers:\n    - name: daemon reload\n      systemd:\n        daemon_reload: yes\n\n    - name: restart node_exporter\n      service:\n        name: node_exporter\n        state: restarted\n        enabled: yes\nEOF\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"advanced-role-development\" class=\"mobile-header\"\u003eAdvanced Role Development\u003c/h2\u003e\n\u003ch3 id=\"comprehensive-nginx-role\" class=\"mobile-header\"\u003eComprehensive NGINX Role\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Create NGINX role structure\nansible-galaxy init roles/nginx\n\n# Main tasks\ncat \u0026gt; roles/nginx/tasks/main.yml \u0026lt;\u0026lt;EOF\n---\n# NGINX Installation and Configuration Role\n- name: Include OS-specific variables\n  include_vars: \u0026quot;{{ ansible_os_family }}.yml\u0026quot;\n\n- name: Install NGINX\n  include_tasks: \u0026quot;install-{{ ansible_os_family }}.yml\u0026quot;\n\n- name: Create NGINX directories\n  file:\n    path: \u0026quot;{{ item }}\u0026quot;\n    state: directory\n    owner: root\n    group: root\n    mode: \u0026#039;0755\u0026#039;\n  loop:\n    - /etc/nginx/sites-available\n    - /etc/nginx/sites-enabled\n    - /etc/nginx/conf.d\n    - /var/log/nginx\n    - /var/cache/nginx\n\n- name: Generate DH parameters\n  openssl_dhparam:\n    path: /etc/ssl/certs/dhparam.pem\n    size: 2048\n  when: nginx_ssl_enabled | default(false)\n\n- name: Deploy NGINX main configuration\n  template:\n    src: nginx.conf.j2\n    dest: /etc/nginx/nginx.conf\n    backup: yes\n    validate: \u0026#039;nginx -t -c %s\u0026#039;\n  notify: reload nginx\n\n- name: Deploy virtual host configurations\n  template:\n    src: vhost.conf.j2\n    dest: \u0026quot;/etc/nginx/sites-available/{{ item.name }}.conf\u0026quot;\n    backup: yes\n  loop: \u0026quot;{{ nginx_vhosts | default([]) }}\u0026quot;\n  notify: reload nginx\n\n- name: Enable virtual hosts\n  file:\n    src: \u0026quot;/etc/nginx/sites-available/{{ item.name }}.conf\u0026quot;\n    dest: \u0026quot;/etc/nginx/sites-enabled/{{ item.name }}.conf\u0026quot;\n    state: link\n  loop: \u0026quot;{{ nginx_vhosts | default([]) }}\u0026quot;\n  when: item.enabled | default(true)\n  notify: reload nginx\n\n- name: Remove default site\n  file:\n    path: /etc/nginx/sites-enabled/default\n    state: absent\n  notify: reload nginx\n\n- name: Start and enable NGINX\n  service:\n    name: nginx\n    state: started\n    enabled: yes\n\n- name: Configure log rotation\n  template:\n    src: nginx-logrotate.j2\n    dest: /etc/logrotate.d/nginx\n    mode: \u0026#039;0644\u0026#039;\n\n- name: Setup NGINX monitoring\n  include_tasks: monitoring.yml\n  when: nginx_monitoring_enabled | default(false)\n\n- name: Configure SSL certificates\n  include_tasks: ssl.yml\n  when: nginx_ssl_enabled | default(false)\nEOF\n\n# OS-specific installation tasks\ncat \u0026gt; roles/nginx/tasks/install-Debian.yml \u0026lt;\u0026lt;EOF\n---\n- name: Add NGINX signing key (Debian/Ubuntu)\n  apt_key:\n    url: https://nginx.org/keys/nginx_signing.key\n    state: present\n\n- name: Add NGINX repository (Debian/Ubuntu)\n  apt_repository:\n    repo: \u0026quot;deb https://nginx.org/packages/{{ ansible_distribution | lower }}/ {{ ansible_distribution_release }} nginx\u0026quot;\n    state: present\n\n- name: Install NGINX (Debian/Ubuntu)\n  apt:\n    name: nginx\n    state: present\n    update_cache: yes\nEOF\n\ncat \u0026gt; roles/nginx/tasks/install-RedHat.yml \u0026lt;\u0026lt;EOF\n---\n- name: Add NGINX repository (RHEL/CentOS)\n  yum_repository:\n    name: nginx\n    description: NGINX Repository\n    baseurl: \u0026quot;https://nginx.org/packages/centos/{{ ansible_distribution_major_version }}/$basearch/\u0026quot;\n    gpgcheck: yes\n    gpgkey: https://nginx.org/keys/nginx_signing.key\n    enabled: yes\n\n- name: Install NGINX (RHEL/CentOS)\n  yum:\n    name: nginx\n    state: present\nEOF\n\n# Variables\ncat \u0026gt; roles/nginx/vars/main.yml \u0026lt;\u0026lt;EOF\n---\nnginx_user: nginx\nnginx_worker_processes: auto\nnginx_worker_connections: 1024\nnginx_keepalive_timeout: 65\nnginx_ssl_enabled: false\nnginx_monitoring_enabled: true\n\nnginx_security_headers:\n  - \u0026quot;add_header X-Frame-Options SAMEORIGIN always;\u0026quot;\n  - \u0026quot;add_header X-Content-Type-Options nosniff always;\u0026quot;\n  - \u0026quot;add_header X-XSS-Protection \u0026#039;1; mode=block\u0026#039; always;\u0026quot;\n  - \u0026quot;add_header Strict-Transport-Security \u0026#039;max-age=31536000; includeSubDomains\u0026#039; always;\u0026quot;\n\nnginx_default_vhost:\n  name: default\n  listen: 80\n  server_name: \u0026quot;_\u0026quot;\n  root: /var/www/html\n  index: index.html\n  enabled: false\nEOF\n\n# Templates\ncat \u0026gt; roles/nginx/templates/nginx.conf.j2 \u0026lt;\u0026lt;EOF\nuser {{ nginx_user }};\nworker_processes {{ nginx_worker_processes }};\npid /var/run/nginx.pid;\n\nevents {\n    worker_connections {{ nginx_worker_connections }};\n    use epoll;\n    multi_accept on;\n}\n\nhttp {\n    # Basic settings\n    sendfile on;\n    tcp_nopush on;\n    tcp_nodelay on;\n    keepalive_timeout {{ nginx_keepalive_timeout }};\n    types_hash_max_size 2048;\n    server_tokens off;\n\n    include /etc/nginx/mime.types;\n    default_type application/octet-stream;\n\n    # SSL configuration\n{% if nginx_ssl_enabled %}\n    ssl_protocols TLSv1.2 TLSv1.3;\n    ssl_prefer_server_ciphers off;\n    ssl_dhparam /etc/ssl/certs/dhparam.pem;\n{% endif %}\n\n    # Gzip compression\n    gzip on;\n    gzip_vary on;\n    gzip_proxied any;\n    gzip_comp_level 6;\n    gzip_types\n        application/javascript\n        application/json\n        application/xml\n        text/css\n        text/javascript\n        text/xml\n        text/plain;\n\n    # Security headers\n{% for header in nginx_security_headers %}\n    {{ header }}\n{% endfor %}\n\n    # Logging\n    log_format main \u0026#039;\\$remote_addr - \\$remote_user [\\$time_local] \u0026quot;\\$request\u0026quot; \u0026#039;\n                    \u0026#039;\\$status \\$body_bytes_sent \u0026quot;\\$http_referer\u0026quot; \u0026#039;\n                    \u0026#039;\u0026quot;\\$http_user_agent\u0026quot; \u0026quot;\\$http_x_forwarded_for\u0026quot;\u0026#039;;\n\n    access_log /var/log/nginx/access.log main;\n    error_log /var/log/nginx/error.log;\n\n    # Rate limiting\n    limit_req_zone \\$binary_remote_addr zone=login:10m rate=10r/m;\n    limit_conn_zone \\$binary_remote_addr zone=addr:10m;\n\n    # Include configurations\n    include /etc/nginx/conf.d/*.conf;\n    include /etc/nginx/sites-enabled/*;\n}\nEOF\n\n# Handlers\ncat \u0026gt; roles/nginx/handlers/main.yml \u0026lt;\u0026lt;EOF\n---\n- name: restart nginx\n  service:\n    name: nginx\n    state: restarted\n\n- name: reload nginx\n  service:\n    name: nginx\n    state: reloaded\n\n- name: validate nginx config\n  command: nginx -t\n  changed_when: false\nEOF\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"security-and-compliance\" class=\"mobile-header\"\u003eSecurity and Compliance\u003c/h2\u003e\n\u003ch3 id=\"ansible-security-scanner-integration\" class=\"mobile-header\"\u003eAnsible Security Scanner Integration\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Create security scanning playbook\ncat \u0026gt; playbooks/security-scan.yml \u0026lt;\u0026lt;EOF\n---\n- name: Security Compliance Scanning\n  hosts: all\n  become: yes\n  gather_facts: yes\n  vars:\n    scan_results_dir: \u0026quot;/tmp/security-scans\u0026quot;\n    \n  tasks:\n    - name: Create scan results directory\n      file:\n        path: \u0026quot;{{ scan_results_dir }}\u0026quot;\n        state: directory\n        mode: \u0026#039;0755\u0026#039;\n\n    # CIS benchmark scanning\n    - name: Download CIS benchmark script\n      get_url:\n        url: \u0026quot;https://github.com/dev-sec/cis-dil-benchmark/archive/master.zip\u0026quot;\n        dest: \u0026quot;/tmp/cis-benchmark.zip\u0026quot;\n        mode: \u0026#039;0644\u0026#039;\n\n    - name: Run CIS benchmark scan\n      shell: |\n        cd /tmp\n        unzip -o cis-benchmark.zip\n        cd cis-dil-benchmark-master\n        bash cis_ubuntu2204.sh \u0026gt; {{ scan_results_dir }}/cis-scan-{{ inventory_hostname }}.txt\n      args:\n        creates: \u0026quot;{{ scan_results_dir }}/cis-scan-{{ inventory_hostname }}.txt\u0026quot;\n\n    # Lynis security audit\n    - name: Install Lynis\n      package:\n        name: lynis\n        state: present\n\n    - name: Run Lynis security audit\n      command: lynis audit system --quiet --cronjob\n      register: lynis_result\n      changed_when: false\n\n    - name: Save Lynis results\n      copy:\n        content: \u0026quot;{{ lynis_result.stdout }}\u0026quot;\n        dest: \u0026quot;{{ scan_results_dir }}/lynis-scan-{{ inventory_hostname }}.txt\u0026quot;\n        mode: \u0026#039;0644\u0026#039;\n\n    # OpenSCAP compliance scanning\n    - name: Install OpenSCAP (RHEL/CentOS)\n      package:\n        name:\n          - openscap-scanner\n          - scap-security-guide\n        state: present\n      when: ansible_os_family == \u0026quot;RedHat\u0026quot;\n\n    - name: Install OpenSCAP (Debian/Ubuntu)\n      package:\n        name:\n          - libopenscap8\n          - ssg-debian\n        state: present\n      when: ansible_os_family == \u0026quot;Debian\u0026quot;\n\n    - name: Run OpenSCAP scan\n      shell: |\n        oscap xccdf eval --profile xccdf_org.ssgproject.content_profile_standard \\\n          --results {{ scan_results_dir }}/oscap-results-{{ inventory_hostname }}.xml \\\n          --report {{ scan_results_dir }}/oscap-report-{{ inventory_hostname }}.html \\\n          /usr/share/xml/scap/ssg/content/ssg-{{ ansible_distribution | lower }}{{ ansible_distribution_major_version }}-xccdf.xml\n      ignore_errors: yes\n      when: ansible_os_family in [\u0026quot;RedHat\u0026quot;, \u0026quot;Debian\u0026quot;]\n\n    # Vulnerability scanning with Trivy\n    - name: Install Trivy vulnerability scanner\n      shell: |\n        curl -sfL https://raw.githubusercontent.com/aquasecurity/trivy/main/contrib/install.sh | sh -s -- -b /usr/local/bin\n      args:\n        creates: /usr/local/bin/trivy\n\n    - name: Run Trivy filesystem scan\n      shell: |\n        trivy fs --format json --output {{ scan_results_dir }}/trivy-scan-{{ inventory_hostname }}.json /\n      ignore_errors: yes\n\n    # Collect scan results\n    - name: Fetch scan results to control machine\n      fetch:\n        src: \u0026quot;{{ item }}\u0026quot;\n        dest: \u0026quot;./security-reports/{{ inventory_hostname }}/\u0026quot;\n        flat: yes\n      loop:\n        - \u0026quot;{{ scan_results_dir }}/cis-scan-{{ inventory_hostname }}.txt\u0026quot;\n        - \u0026quot;{{ scan_results_dir }}/lynis-scan-{{ inventory_hostname }}.txt\u0026quot;\n        - \u0026quot;{{ scan_results_dir }}/oscap-report-{{ inventory_hostname }}.html\u0026quot;\n        - \u0026quot;{{ scan_results_dir }}/trivy-scan-{{ inventory_hostname }}.json\u0026quot;\n      ignore_errors: yes\n      delegate_to: localhost\n\n  post_tasks:\n    - name: Generate compliance summary\n      template:\n        src: templates/compliance-summary.j2\n        dest: \u0026quot;{{ scan_results_dir }}/compliance-summary-{{ inventory_hostname }}.txt\u0026quot;\n        mode: \u0026#039;0644\u0026#039;\nEOF\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"ansible-awxtower-integration\" class=\"mobile-header\"\u003eAnsible AWX/Tower Integration\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Install Ansible AWX (open source)\ncat \u0026gt; playbooks/install-awx.yml \u0026lt;\u0026lt;EOF\n---\n- name: Install Ansible AWX\n  hosts: localhost\n  connection: local\n  become: yes\n  vars:\n    awx_namespace: awx\n    awx_admin_user: admin\n    awx_admin_password: \u0026quot;{{ vault_awx_admin_password }}\u0026quot;\n\n  tasks:\n    - name: Install prerequisite packages\n      package:\n        name:\n          - git\n          - curl\n          - docker.io\n          - docker-compose\n        state: present\n\n    - name: Clone AWX repository\n      git:\n        repo: https://github.com/ansible/awx.git\n        dest: /opt/awx\n        version: devel\n\n    - name: Create AWX Docker inventory\n      template:\n        src: templates/awx-docker-inventory.j2\n        dest: /opt/awx/installer/inventory\n        mode: \u0026#039;0644\u0026#039;\n\n    - name: Install AWX using Ansible\n      shell: ansible-playbook -i inventory install.yml\n      args:\n        chdir: /opt/awx/installer\n      environment:\n        ANSIBLE_HOST_KEY_CHECKING: False\n\n    - name: Wait for AWX to be ready\n      uri:\n        url: \u0026quot;http://localhost:80/api/v2/ping/\u0026quot;\n        method: GET\n      retries: 30\n      delay: 10\n\n    - name: Configure AWX organizations and projects\n      uri:\n        url: \u0026quot;http://localhost:80/api/v2/organizations/\u0026quot;\n        method: POST\n        user: \u0026quot;{{ awx_admin_user }}\u0026quot;\n        password: \u0026quot;{{ awx_admin_password }}\u0026quot;\n        force_basic_auth: yes\n        body_format: json\n        body:\n          name: \u0026quot;Production\u0026quot;\n          description: \u0026quot;Production environment organization\u0026quot;\n        status_code: [200, 201, 409]\nEOF\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"multi-cloud-automation\" class=\"mobile-header\"\u003eMulti-Cloud Automation\u003c/h2\u003e\n\u003ch3 id=\"aws-infrastructure-automation\" class=\"mobile-header\"\u003eAWS Infrastructure Automation\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003ecat \u0026gt; playbooks/aws-infrastructure.yml \u0026lt;\u0026lt;EOF\n---\n- name: AWS Infrastructure Automation\n  hosts: localhost\n  connection: local\n  gather_facts: no\n  vars:\n    aws_region: \u0026quot;{{ aws_region | default(\u0026#039;us-west-2\u0026#039;) }}\u0026quot;\n    vpc_cidr: \u0026quot;{{ vpc_cidr | default(\u0026#039;10.0.0.0/16\u0026#039;) }}\u0026quot;\n    environment: \u0026quot;{{ environment | default(\u0026#039;production\u0026#039;) }}\u0026quot;\n\n  tasks:\n    # VPC Creation\n    - name: Create VPC\n      amazon.aws.ec2_vpc_info:\n        filters:\n          \u0026quot;tag:Name\u0026quot;: \u0026quot;{{ environment }}-vpc\u0026quot;\n        region: \u0026quot;{{ aws_region }}\u0026quot;\n      register: existing_vpc\n\n    - name: Create new VPC if not exists\n      amazon.aws.ec2_vpc_net:\n        name: \u0026quot;{{ environment }}-vpc\u0026quot;\n        cidr_block: \u0026quot;{{ vpc_cidr }}\u0026quot;\n        region: \u0026quot;{{ aws_region }}\u0026quot;\n        state: present\n        dns_hostnames: yes\n        dns_support: yes\n        tags:\n          Environment: \u0026quot;{{ environment }}\u0026quot;\n          ManagedBy: ansible\n      register: vpc\n      when: existing_vpc.vpcs | length == 0\n\n    # Security Groups\n    - name: Create web security group\n      amazon.aws.ec2_group:\n        name: \u0026quot;{{ environment }}-web-sg\u0026quot;\n        description: \u0026quot;Security group for web servers\u0026quot;\n        vpc_id: \u0026quot;{{ vpc.vpc.id if vpc.vpc is defined else existing_vpc.vpcs[0].vpc_id }}\u0026quot;\n        region: \u0026quot;{{ aws_region }}\u0026quot;\n        rules:\n          - proto: tcp\n            ports:\n              - 80\n              - 443\n            cidr_ip: 0.0.0.0/0\n            rule_desc: \u0026quot;HTTP and HTTPS access\u0026quot;\n          - proto: tcp\n            ports:\n              - 22\n            group_id: \u0026quot;{{ environment }}-bastion-sg\u0026quot;\n            rule_desc: \u0026quot;SSH from bastion\u0026quot;\n        tags:\n          Environment: \u0026quot;{{ environment }}\u0026quot;\n\n    # Launch EC2 instances\n    - name: Launch web servers\n      amazon.aws.ec2_instance:\n        name: \u0026quot;{{ environment }}-web-{{ item }}\u0026quot;\n        instance_type: t3.medium\n        image_id: ami-0c02fb55956c7d316  # Amazon Linux 2\n        key_name: \u0026quot;{{ ec2_key_name }}\u0026quot;\n        vpc_subnet_id: \u0026quot;{{ web_subnet_id }}\u0026quot;\n        security_groups:\n          - \u0026quot;{{ environment }}-web-sg\u0026quot;\n        region: \u0026quot;{{ aws_region }}\u0026quot;\n        state: running\n        wait: yes\n        wait_timeout: 300\n        user_data: |\n          #!/bin/bash\n          yum update -y\n          yum install -y python3\n        tags:\n          Environment: \u0026quot;{{ environment }}\u0026quot;\n          Role: webserver\n          Ansible: managed\n      loop: \u0026quot;{{ range(1, web_server_count + 1) | list }}\u0026quot;\n      register: web_instances\n\n    # Add instances to inventory\n    - name: Add web servers to inventory\n      add_host:\n        name: \u0026quot;{{ item.instances[0].tags.Name }}\u0026quot;\n        hostname: \u0026quot;{{ item.instances[0].public_ip_address }}\u0026quot;\n        groups: webservers\n        ansible_ssh_private_key_file: \u0026quot;~/.ssh/{{ ec2_key_name }}.pem\u0026quot;\n        ansible_user: ec2-user\n      loop: \u0026quot;{{ web_instances.results }}\u0026quot;\n      changed_when: false\nEOF\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"kubernetes-cluster-management\" class=\"mobile-header\"\u003eKubernetes Cluster Management\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003ecat \u0026gt; playbooks/k8s-cluster-management.yml \u0026lt;\u0026lt;EOF\n---\n- name: Kubernetes Cluster Management with Ansible\n  hosts: k8s_masters\n  become: yes\n  serial: 1\n  vars:\n    k8s_version: \u0026quot;1.28.2\u0026quot;\n    containerd_version: \u0026quot;1.6.24\u0026quot;\n    cni_version: \u0026quot;1.3.0\u0026quot;\n\n  tasks:\n    # Pre-flight checks\n    - name: Check system requirements\n      assert:\n        that:\n          - ansible_memtotal_mb \u0026gt;= 1700\n          - ansible_processor_cores \u0026gt;= 2\n        fail_msg: \u0026quot;System doesn\u0026#039;t meet minimum requirements\u0026quot;\n\n    - name: Verify connectivity to all nodes\n      ping:\n      delegate_to: \u0026quot;{{ item }}\u0026quot;\n      loop: \u0026quot;{{ groups[\u0026#039;k8s_all\u0026#039;] }}\u0026quot;\n\n    # Container runtime setup\n    - name: Install containerd\n      include_role:\n        name: containerd\n      vars:\n        containerd_version: \u0026quot;{{ containerd_version }}\u0026quot;\n\n    # Kubernetes installation\n    - name: Install Kubernetes components\n      include_role:\n        name: kubernetes\n      vars:\n        kubernetes_version: \u0026quot;{{ k8s_version }}\u0026quot;\n\n    # Cluster initialization\n    - name: Initialize Kubernetes cluster\n      shell: |\n        kubeadm init \\\n          --pod-network-cidr=10.244.0.0/16 \\\n          --service-cidr=10.96.0.0/12 \\\n          --apiserver-advertise-address={{ ansible_default_ipv4.address }} \\\n          --node-name={{ inventory_hostname }}\n      args:\n        creates: /etc/kubernetes/admin.conf\n      register: kubeadm_init\n\n    - name: Create .kube directory\n      file:\n        path: \u0026quot;{{ ansible_env.HOME }}/.kube\u0026quot;\n        state: directory\n        mode: \u0026#039;0755\u0026#039;\n\n    - name: Copy admin.conf to user\u0026#039;s kube config\n      copy:\n        src: /etc/kubernetes/admin.conf\n        dest: \u0026quot;{{ ansible_env.HOME }}/.kube/config\u0026quot;\n        owner: \u0026quot;{{ ansible_user }}\u0026quot;\n        group: \u0026quot;{{ ansible_user }}\u0026quot;\n        mode: \u0026#039;0644\u0026#039;\n        remote_src: yes\n\n    # Network plugin installation\n    - name: Install Flannel CNI\n      shell: kubectl apply -f https://github.com/flannel-io/flannel/releases/latest/download/kube-flannel.yml\n      environment:\n        KUBECONFIG: \u0026quot;{{ ansible_env.HOME }}/.kube/config\u0026quot;\n\n    # Join worker nodes\n    - name: Get join command\n      shell: kubeadm token create --print-join-command\n      register: join_command\n      when: inventory_hostname in groups[\u0026#039;k8s_masters\u0026#039;][0]\n\n    - name: Join worker nodes to cluster\n      shell: \u0026quot;{{ hostvars[groups[\u0026#039;k8s_masters\u0026#039;][0]][\u0026#039;join_command\u0026#039;].stdout }}\u0026quot;\n      when: inventory_hostname in groups[\u0026#039;k8s_workers\u0026#039;]\n\n  post_tasks:\n    - name: Verify cluster status\n      shell: kubectl get nodes\n      environment:\n        KUBECONFIG: \u0026quot;{{ ansible_env.HOME }}/.kube/config\u0026quot;\n      register: cluster_status\n      when: inventory_hostname in groups[\u0026#039;k8s_masters\u0026#039;][0]\n\n    - name: Display cluster status\n      debug:\n        var: cluster_status.stdout_lines\n      when: inventory_hostname in groups[\u0026#039;k8s_masters\u0026#039;][0]\nEOF\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"performance-optimization-and-scaling\" class=\"mobile-header\"\u003ePerformance Optimization and Scaling\u003c/h2\u003e\n\u003ch3 id=\"parallel-execution-strategies\" class=\"mobile-header\"\u003eParallel Execution Strategies\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Create high-performance playbook configuration\ncat \u0026gt; playbooks/high-performance-deployment.yml \u0026lt;\u0026lt;EOF\n---\n- name: High-Performance Deployment\n  hosts: all\n  become: yes\n  strategy: free  # Parallel execution\n  serial: \u0026quot;30%\u0026quot;   # Process 30% of hosts at a time\n  max_fail_percentage: 10\n  gather_facts: yes\n  fact_caching: smart\n  vars:\n    deployment_batch_size: 10\n    max_concurrent_tasks: 50\n\n  pre_tasks:\n    - name: Check system load\n      shell: uptime | awk \u0026#039;{print $(NF-2)}\u0026#039; | sed \u0026#039;s/,//\u0026#039;\n      register: system_load\n      changed_when: false\n\n    - name: Skip high-load systems\n      meta: end_host\n      when: system_load.stdout | float \u0026gt; 5.0\n\n  tasks:\n    - name: Update packages with retries\n      package:\n        name: \u0026quot;*\u0026quot;\n        state: latest\n      retries: 3\n      delay: 30\n      async: 300\n      poll: 10\n\n    - name: Deploy configuration files in parallel\n      template:\n        src: \u0026quot;{{ item.src }}\u0026quot;\n        dest: \u0026quot;{{ item.dest }}\u0026quot;\n        mode: \u0026quot;{{ item.mode | default(\u0026#039;0644\u0026#039;) }}\u0026quot;\n        backup: yes\n      loop:\n        - { src: \u0026quot;nginx.conf.j2\u0026quot;, dest: \u0026quot;/etc/nginx/nginx.conf\u0026quot; }\n        - { src: \u0026quot;mysql.cnf.j2\u0026quot;, dest: \u0026quot;/etc/mysql/my.cnf\u0026quot; }\n        - { src: \u0026quot;redis.conf.j2\u0026quot;, dest: \u0026quot;/etc/redis/redis.conf\u0026quot; }\n      async: 120\n      poll: 5\n      register: config_deployment\n\n    - name: Wait for all configuration deployments\n      async_status:\n        jid: \u0026quot;{{ item.ansible_job_id }}\u0026quot;\n      loop: \u0026quot;{{ config_deployment.results }}\u0026quot;\n      when: item.ansible_job_id is defined\n\n  handlers:\n    - name: restart services\n      service:\n        name: \u0026quot;{{ item }}\u0026quot;\n        state: restarted\n      loop:\n        - nginx\n        - mysql\n        - redis\n      listen: \u0026quot;restart all services\u0026quot;\nEOF\n\n# Performance monitoring playbook\ncat \u0026gt; playbooks/performance-monitoring.yml \u0026lt;\u0026lt;EOF\n---\n- name: Performance Monitoring Setup\n  hosts: all\n  become: yes\n  vars:\n    monitoring_tools:\n      - htop\n      - iotop\n      - nethogs\n      - dstat\n      - sysstat\n      - perf\n\n  tasks:\n    - name: Install performance monitoring tools\n      package:\n        name: \u0026quot;{{ monitoring_tools }}\u0026quot;\n        state: present\n\n    - name: Configure system monitoring\n      template:\n        src: templates/sysstat.j2\n        dest: /etc/default/sysstat\n        backup: yes\n      when: ansible_os_family == \u0026quot;Debian\u0026quot;\n\n    - name: Enable system statistics collection\n      service:\n        name: \u0026quot;{{ \u0026#039;sysstat\u0026#039; if ansible_os_family == \u0026#039;Debian\u0026#039; else \u0026#039;sysstat\u0026#039; }}\u0026quot;\n        enabled: yes\n        state: started\n\n    - name: Create performance monitoring script\n      template:\n        src: templates/performance-monitor.sh.j2\n        dest: /usr/local/bin/performance-monitor.sh\n        mode: \u0026#039;0755\u0026#039;\n\n    - name: Schedule performance monitoring\n      cron:\n        name: \u0026quot;Performance monitoring\u0026quot;\n        minute: \u0026quot;*/5\u0026quot;\n        job: \u0026quot;/usr/local/bin/performance-monitor.sh\u0026quot;\n        user: root\nEOF\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"testing-and-validation\" class=\"mobile-header\"\u003eTesting and Validation\u003c/h2\u003e\n\u003ch3 id=\"molecule-testing-framework\" class=\"mobile-header\"\u003eMolecule Testing Framework\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Install Molecule for role testing\npip install molecule[docker] molecule[vagrant] molecule[libvirt]\n\n# Initialize Molecule in role directory\ncd roles/nginx\nmolecule init scenario --driver-name docker\n\n# Create molecule configuration\ncat \u0026gt; molecule/default/molecule.yml \u0026lt;\u0026lt;EOF\n---\ndependency:\n  name: galaxy\ndriver:\n  name: docker\nplatforms:\n  - name: nginx-ubuntu\n    image: ubuntu:22.04\n    pre_build_image: true\n    privileged: true\n    volumes:\n      - /sys/fs/cgroup:/sys/fs/cgroup:ro\n    command: /lib/systemd/systemd\n    networks:\n      - name: molecule\n  - name: nginx-centos\n    image: centos:8\n    pre_build_image: true\n    privileged: true\n    volumes:\n      - /sys/fs/cgroup:/sys/fs/cgroup:ro\n    command: /usr/sbin/init\n    networks:\n      - name: molecule\nprovisioner:\n  name: ansible\n  config_options:\n    defaults:\n      callbacks_enabled: profile_tasks,timer,yaml\n  inventory:\n    host_vars:\n      nginx-ubuntu:\n        ansible_python_interpreter: /usr/bin/python3\n      nginx-centos:\n        ansible_python_interpreter: /usr/bin/python3\nverifier:\n  name: ansible\nlint: |\n  set -e\n  yamllint .\n  ansible-lint\n  flake8\nEOF\n\n# Create test playbook\ncat \u0026gt; molecule/default/converge.yml \u0026lt;\u0026lt;EOF\n---\n- name: Converge\n  hosts: all\n  become: true\n  tasks:\n    - name: \u0026quot;Include nginx role\u0026quot;\n      include_role:\n        name: nginx\n      vars:\n        nginx_vhosts:\n          - name: default\n            server_name: localhost\n            listen: 80\n            root: /var/www/html\n            enabled: true\nEOF\n\n# Create test verification\ncat \u0026gt; molecule/default/verify.yml \u0026lt;\u0026lt;EOF\n---\n- name: Verify\n  hosts: all\n  gather_facts: false\n  tasks:\n    - name: Check if NGINX is running\n      uri:\n        url: http://localhost\n        method: GET\n      register: nginx_check\n\n    - name: Verify NGINX is responding\n      assert:\n        that:\n          - nginx_check.status == 200\n        fail_msg: \u0026quot;NGINX is not responding correctly\u0026quot;\n\n    - name: Check NGINX configuration\n      shell: nginx -t\n      changed_when: false\n\n    - name: Verify NGINX process\n      shell: pgrep nginx\n      changed_when: false\nEOF\n\n# Run tests\nmolecule test\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"ansible-lint-and-security-scanning\" class=\"mobile-header\"\u003eAnsible Lint and Security Scanning\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Install Ansible Lint\npip install ansible-lint\n\n# Create .ansible-lint configuration\ncat \u0026gt; .ansible-lint \u0026lt;\u0026lt;EOF\n---\nprofile: production\n\nexclude_paths:\n  - .cache/\n  - .github/\n  - molecule/\n  - .venv/\n\nskip_list:\n  - yaml[line-length]  # Allow longer lines for readability\n\nwarn_list:\n  - experimental  # Warn about experimental features\n\n# Custom rules\nrules:\n  braces:\n    min-spaces-inside: 0\n    max-spaces-inside: 1\n  brackets:\n    min-spaces-inside: 0\n    max-spaces-inside: 0\n  colons:\n    max-spaces-before: 0\n    min-spaces-after: 1\n    max-spaces-after: 1\n  commas:\n    max-spaces-before: 0\n    min-spaces-after: 1\n    max-spaces-after: 1\n  comments:\n    min-spaces-from-content: 1\n  document-start: disable\n  empty-lines:\n    max: 2\n    max-start: 0\n    max-end: 1\n  hyphens:\n    max-spaces-after: 1\n  indentation:\n    spaces: 2\n    indent-sequences: true\n  line-length:\n    max: 120\n  new-line-at-end-of-file: enable\n  trailing-spaces: enable\n  truthy:\n    allowed-values: [\u0026#039;true\u0026#039;, \u0026#039;false\u0026#039;, \u0026#039;yes\u0026#039;, \u0026#039;no\u0026#039;]\nEOF\n\n# Create security-focused playbook linting\ncat \u0026gt; .yamllint \u0026lt;\u0026lt;EOF\n---\nextends: default\n\nrules:\n  braces:\n    min-spaces-inside: 0\n    max-spaces-inside: 1\n  brackets:\n    min-spaces-inside: 0\n    max-spaces-inside: 0\n  colons:\n    max-spaces-before: 0\n    min-spaces-after: 1\n    max-spaces-after: 1\n  commas:\n    max-spaces-before: 0\n    min-spaces-after: 1\n    max-spaces-after: 1\n  comments: disable\n  comments-indentation: disable\n  document-start: disable\n  empty-lines:\n    max: 2\n    max-start: 0\n    max-end: 1\n  hyphens:\n    max-spaces-after: 1\n  indentation:\n    spaces: 2\n    indent-sequences: true\n    check-multi-line-strings: false\n  key-duplicates: enable\n  line-length:\n    max: 120\n  new-line-at-end-of-file: enable\n  octal-values:\n    forbid-implicit-octal: true\n  trailing-spaces: enable\n  truthy: disable\nEOF\n\n# Run linting\nansible-lint playbooks/\nyamllint .\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"backup-and-disaster-recovery\" class=\"mobile-header\"\u003eBackup and Disaster Recovery\u003c/h2\u003e\n\u003ch3 id=\"comprehensive-backup-automation\" class=\"mobile-header\"\u003eComprehensive Backup Automation\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003ecat \u0026gt; playbooks/backup-automation.yml \u0026lt;\u0026lt;EOF\n---\n- name: Automated Backup System\n  hosts: all\n  become: yes\n  vars:\n    backup_root: /backup\n    backup_retention_days: 30\n    backup_schedule:\n      databases: \u0026quot;0 2 * * *\u0026quot;\n      files: \u0026quot;0 3 * * *\u0026quot;\n      configs: \u0026quot;0 4 * * *\u0026quot;\n\n  tasks:\n    - name: Create backup directories\n      file:\n        path: \u0026quot;{{ backup_root }}/{{ item }}\u0026quot;\n        state: directory\n        mode: \u0026#039;0755\u0026#039;\n        owner: root\n        group: root\n      loop:\n        - databases\n        - files\n        - configs\n        - logs\n\n    # Database backups\n    - name: Create database backup script\n      template:\n        src: templates/mysql-backup.sh.j2\n        dest: /usr/local/bin/mysql-backup.sh\n        mode: \u0026#039;0755\u0026#039;\n      when: \u0026quot;\u0026#039;dbservers\u0026#039; in group_names\u0026quot;\n\n    - name: Schedule database backups\n      cron:\n        name: \u0026quot;MySQL backup\u0026quot;\n        minute: \u0026quot;0\u0026quot;\n        hour: \u0026quot;2\u0026quot;\n        job: \u0026quot;/usr/local/bin/mysql-backup.sh\u0026quot;\n        user: root\n      when: \u0026quot;\u0026#039;dbservers\u0026#039; in group_names\u0026quot;\n\n    # File system backups\n    - name: Create file backup script\n      template:\n        src: templates/file-backup.sh.j2\n        dest: /usr/local/bin/file-backup.sh\n        mode: \u0026#039;0755\u0026#039;\n\n    - name: Schedule file backups\n      cron:\n        name: \u0026quot;File system backup\u0026quot;\n        minute: \u0026quot;0\u0026quot;\n        hour: \u0026quot;3\u0026quot;\n        job: \u0026quot;/usr/local/bin/file-backup.sh\u0026quot;\n        user: root\n\n    # Configuration backups\n    - name: Backup system configurations\n      archive:\n        path:\n          - /etc/nginx\n          - /etc/mysql\n          - /etc/systemd/system\n          - /etc/crontab\n          - /etc/hosts\n          - /etc/fstab\n        dest: \u0026quot;{{ backup_root }}/configs/system-config-{{ ansible_date_time.epoch }}.tar.gz\u0026quot;\n        mode: \u0026#039;0600\u0026#039;\n\n    # Remote backup synchronization\n    - name: Synchronize backups to remote storage\n      synchronize:\n        src: \u0026quot;{{ backup_root }}/\u0026quot;\n        dest: \u0026quot;backup-server.example.com:{{ backup_root }}/{{ inventory_hostname }}/\u0026quot;\n        delete: yes\n        rsync_opts:\n          - \u0026quot;--exclude=*.tmp\u0026quot;\n          - \u0026quot;--compress\u0026quot;\n          - \u0026quot;--archive\u0026quot;\n      when: backup_remote_sync | default(true)\n\n    # Cleanup old backups\n    - name: Clean up old backup files\n      find:\n        paths: \u0026quot;{{ backup_root }}\u0026quot;\n        age: \u0026quot;{{ backup_retention_days }}d\u0026quot;\n        file_type: file\n      register: old_backups\n\n    - name: Remove old backup files\n      file:\n        path: \u0026quot;{{ item.path }}\u0026quot;\n        state: absent\n      loop: \u0026quot;{{ old_backups.files }}\u0026quot;\nEOF\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"verification-and-monitoring\" class=\"mobile-header\"\u003eVerification and Monitoring\u003c/h2\u003e\n\u003ch3 id=\"cross-platform-system-verification\" class=\"mobile-header\"\u003eCross-Platform System Verification\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Create comprehensive verification playbook\ncat \u0026gt; playbooks/system-verification.yml \u0026lt;\u0026lt;EOF\n---\n- name: System Verification and Health Check\n  hosts: all\n  become: yes\n  gather_facts: yes\n  vars:\n    health_checks:\n      - service: nginx\n        port: 80\n        process: nginx\n      - service: mysql\n        port: 3306\n        process: mysqld\n      - service: redis\n        port: 6379\n        process: redis-server\n\n  tasks:\n    # System information gathering\n    - name: Gather system information\n      setup:\n        gather_subset:\n          - all\n          - !facter\n          - !ohai\n\n    # Service verification\n    - name: Check critical services status\n      service_facts:\n\n    - name: Verify services are running\n      assert:\n        that:\n          - \u0026quot;ansible_facts.services[item.service + \u0026#039;.service\u0026#039;].state == \u0026#039;running\u0026#039;\u0026quot;\n        fail_msg: \u0026quot;Service {{ item.service }} is not running\u0026quot;\n        success_msg: \u0026quot;Service {{ item.service }} is healthy\u0026quot;\n      loop: \u0026quot;{{ health_checks }}\u0026quot;\n      when: \u0026quot;item.service + \u0026#039;.service\u0026#039; in ansible_facts.services\u0026quot;\n\n    # Network connectivity tests\n    - name: Test network connectivity\n      wait_for:\n        host: \u0026quot;{{ item.host }}\u0026quot;\n        port: \u0026quot;{{ item.port }}\u0026quot;\n        timeout: 5\n      loop:\n        - { host: \u0026quot;8.8.8.8\u0026quot;, port: 53 }\n        - { host: \u0026quot;1.1.1.1\u0026quot;, port: 53 }\n      ignore_errors: yes\n\n    # Disk space monitoring\n    - name: Check disk space usage\n      shell: df -h | awk \u0026#039;$5 \u0026gt; \u0026quot;85%\u0026quot; {print $0}\u0026#039;\n      register: disk_usage\n      changed_when: false\n      failed_when: disk_usage.stdout != \u0026quot;\u0026quot;\n\n    # Memory usage check\n    - name: Check memory usage\n      shell: free | grep Mem | awk \u0026#039;{printf \u0026quot;%.0f\u0026quot;, $3/$2 * 100.0}\u0026#039;\n      register: memory_usage\n      changed_when: false\n\n    - name: Alert on high memory usage\n      debug:\n        msg: \u0026quot;WARNING: Memory usage is {{ memory_usage.stdout }}%\u0026quot;\n      when: memory_usage.stdout | int \u0026gt; 85\n\n    # Security verification\n    - name: Check for failed login attempts\n      shell: grep \u0026quot;Failed password\u0026quot; /var/log/auth.log | tail -10\n      register: failed_logins\n      changed_when: false\n      ignore_errors: yes\n      when: ansible_os_family == \u0026quot;Debian\u0026quot;\n\n    - name: Check firewall status\n      shell: |\n        if command -v ufw \u0026gt;/dev/null 2\u0026gt;\u0026amp;1; then\n          ufw status\n        elif command -v firewall-cmd \u0026gt;/dev/null 2\u0026gt;\u0026amp;1; then\n          firewall-cmd --state\n        else\n          echo \u0026quot;No supported firewall found\u0026quot;\n        fi\n      register: firewall_status\n      changed_when: false\n\n  post_tasks:\n    - name: Generate system health report\n      template:\n        src: templates/health-report.j2\n        dest: \u0026quot;/tmp/health-report-{{ inventory_hostname }}-{{ ansible_date_time.epoch }}.txt\u0026quot;\n        mode: \u0026#039;0644\u0026#039;\n\n    - name: Fetch health reports\n      fetch:\n        src: \u0026quot;/tmp/health-report-{{ inventory_hostname }}-{{ ansible_date_time.epoch }}.txt\u0026quot;\n        dest: \u0026quot;./reports/\u0026quot;\n        flat: yes\nEOF\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"continuous-compliance-monitoring\" class=\"mobile-header\"\u003eContinuous Compliance Monitoring\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003ecat \u0026gt; playbooks/compliance-monitoring.yml \u0026lt;\u0026lt;EOF\n---\n- name: Continuous Compliance Monitoring\n  hosts: all\n  become: yes\n  vars:\n    compliance_standards:\n      - cis\n      - pci_dss\n      - soc2\n      - hipaa\n    \n    audit_log_paths:\n      - /var/log/auth.log\n      - /var/log/syslog\n      - /var/log/audit/audit.log\n\n  tasks:\n    # Install audit tools\n    - name: Install audit daemon\n      package:\n        name: \u0026quot;{{ \u0026#039;auditd\u0026#039; if ansible_os_family == \u0026#039;RedHat\u0026#039; else \u0026#039;auditd\u0026#039; }}\u0026quot;\n        state: present\n\n    - name: Configure audit rules\n      template:\n        src: templates/audit.rules.j2\n        dest: /etc/audit/rules.d/audit.rules\n        backup: yes\n      notify: restart auditd\n\n    # CIS compliance checks\n    - name: Run CIS benchmark checks\n      shell: |\n        if [ -f /opt/cis-cat/CIS-CAT.sh ]; then\n          /opt/cis-cat/CIS-CAT.sh -b /opt/cis-cat/benchmarks/\n        else\n          echo \u0026quot;CIS-CAT not installed, skipping\u0026quot;\n        fi\n      register: cis_results\n      ignore_errors: yes\n\n    # File integrity monitoring\n    - name: Install AIDE\n      package:\n        name: aide\n        state: present\n\n    - name: Initialize AIDE database\n      shell: |\n        aide --init\n        mv /var/lib/aide/aide.db.new /var/lib/aide/aide.db\n      args:\n        creates: /var/lib/aide/aide.db\n\n    - name: Schedule AIDE integrity checks\n      cron:\n        name: \u0026quot;AIDE integrity check\u0026quot;\n        minute: \u0026quot;0\u0026quot;\n        hour: \u0026quot;3\u0026quot;\n        job: \u0026quot;/usr/bin/aide --check | mail -s \u0026#039;AIDE Report\u0026#039; security@example.com\u0026quot;\n        user: root\n\n    # Log monitoring\n    - name: Install log monitoring tools\n      package:\n        name:\n          - logwatch\n          - rsyslog\n        state: present\n\n    - name: Configure centralized logging\n      template:\n        src: templates/rsyslog.conf.j2\n        dest: /etc/rsyslog.conf\n        backup: yes\n      notify: restart rsyslog\n\n  handlers:\n    - name: restart auditd\n      service:\n        name: auditd\n        state: restarted\n\n    - name: restart rsyslog\n      service:\n        name: rsyslog\n        state: restarted\nEOF\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"cicd-integration\" class=\"mobile-header\"\u003eCI/CD Integration\u003c/h2\u003e\n\u003ch3 id=\"jenkins-pipeline-integration\" class=\"mobile-header\"\u003eJenkins Pipeline Integration\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Create Jenkinsfile for Ansible automation\ncat \u0026gt; Jenkinsfile \u0026lt;\u0026lt;EOF\npipeline {\n    agent any\n    \n    environment {\n        ANSIBLE_CONFIG = \u0026#039;ansible.cfg\u0026#039;\n        ANSIBLE_HOST_KEY_CHECKING = \u0026#039;False\u0026#039;\n    }\n    \n    stages {\n        stage(\u0026#039;Lint\u0026#039;) {\n            steps {\n                sh \u0026#039;ansible-lint playbooks/\u0026#039;\n                sh \u0026#039;yamllint .\u0026#039;\n            }\n        }\n        \n        stage(\u0026#039;Syntax Check\u0026#039;) {\n            steps {\n                sh \u0026#039;ansible-playbook playbooks/site.yml --syntax-check\u0026#039;\n            }\n        }\n        \n        stage(\u0026#039;Dry Run\u0026#039;) {\n            steps {\n                sh \u0026#039;ansible-playbook playbooks/site.yml --check --diff\u0026#039;\n            }\n        }\n        \n        stage(\u0026#039;Deploy to Staging\u0026#039;) {\n            when {\n                branch \u0026#039;develop\u0026#039;\n            }\n            steps {\n                sh \u0026#039;ansible-playbook -i inventories/staging playbooks/site.yml\u0026#039;\n            }\n        }\n        \n        stage(\u0026#039;Deploy to Production\u0026#039;) {\n            when {\n                branch \u0026#039;main\u0026#039;\n            }\n            steps {\n                input \u0026#039;Deploy to Production?\u0026#039;\n                sh \u0026#039;ansible-playbook -i inventories/production playbooks/site.yml\u0026#039;\n            }\n        }\n        \n        stage(\u0026#039;Verify Deployment\u0026#039;) {\n            steps {\n                sh \u0026#039;ansible-playbook playbooks/system-verification.yml\u0026#039;\n            }\n        }\n    }\n    \n    post {\n        always {\n            archiveArtifacts artifacts: \u0026#039;logs/*.log\u0026#039;, allowEmptyArchive: true\n            publishHTML([\n                allowMissing: false,\n                alwaysLinkToLastBuild: true,\n                keepAll: true,\n                reportDir: \u0026#039;reports\u0026#039;,\n                reportFiles: \u0026#039;*.html\u0026#039;,\n                reportName: \u0026#039;Ansible Report\u0026#039;\n            ])\n        }\n        failure {\n            emailext (\n                subject: \u0026quot;Failed Pipeline: ${env.JOB_NAME} - ${env.BUILD_NUMBER}\u0026quot;,\n                body: \u0026quot;Something is wrong with ${env.BUILD_URL}\u0026quot;,\n                to: \u0026quot;${env.DEFAULT_RECIPIENTS}\u0026quot;\n            )\n        }\n    }\n}\nEOF\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"gitlab-ci-integration\" class=\"mobile-header\"\u003eGitLab CI Integration\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003ecat \u0026gt; .gitlab-ci.yml \u0026lt;\u0026lt;EOF\nstages:\n  - lint\n  - test\n  - deploy-staging\n  - deploy-production\n\nvariables:\n  ANSIBLE_CONFIG: ansible.cfg\n  ANSIBLE_HOST_KEY_CHECKING: \u0026quot;False\u0026quot;\n\nbefore_script:\n  - pip install ansible ansible-lint yamllint\n  - ansible-galaxy install -r requirements.yml\n\nlint:\n  stage: lint\n  script:\n    - ansible-lint playbooks/\n    - yamllint .\n  rules:\n    - if: \u0026#039;$CI_MERGE_REQUEST_IID\u0026#039;\n    - if: \u0026#039;$CI_COMMIT_BRANCH == $CI_DEFAULT_BRANCH\u0026#039;\n\nsyntax-check:\n  stage: test\n  script:\n    - ansible-playbook playbooks/site.yml --syntax-check\n    - ansible-playbook playbooks/site.yml --check --diff -i inventories/staging\n  rules:\n    - if: \u0026#039;$CI_MERGE_REQUEST_IID\u0026#039;\n    - if: \u0026#039;$CI_COMMIT_BRANCH == $CI_DEFAULT_BRANCH\u0026#039;\n\ndeploy-staging:\n  stage: deploy-staging\n  script:\n    - ansible-playbook -i inventories/staging playbooks/site.yml\n  rules:\n    - if: \u0026#039;$CI_COMMIT_BRANCH == \u0026quot;develop\u0026quot;\u0026#039;\n\ndeploy-production:\n  stage: deploy-production\n  script:\n    - ansible-playbook -i inventories/production playbooks/site.yml\n  rules:\n    - if: \u0026#039;$CI_COMMIT_BRANCH == $CI_DEFAULT_BRANCH\u0026#039;\n      when: manual\n  environment:\n    name: production\n    url: https://production.example.com\nEOF\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"troubleshooting-cross-platform\" class=\"mobile-header\"\u003eTroubleshooting (Cross-Platform)\u003c/h2\u003e\n\u003ch3 id=\"common-issues-and-solutions\" class=\"mobile-header\"\u003eCommon Issues and Solutions\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Debug connection issues\nansible all -m ping -vvv\n\n# Check SSH connectivity\nansible all -m setup --ask-pass --ask-become-pass\n\n# Verify inventory\nansible-inventory --list\nansible-inventory --graph\n\n# Test specific host\nansible target-host -m command -a \u0026quot;uptime\u0026quot;\n\n# Check syntax without execution\nansible-playbook playbooks/site.yml --syntax-check\n\n# Dry run with verbose output\nansible-playbook playbooks/site.yml --check --diff -vvv\n\n# Debug variable resolution\nansible-playbook playbooks/site.yml --extra-vars=\u0026quot;debug=true\u0026quot; --tags debug\n\n# Check facts\nansible all -m setup | grep ansible_os_family\n\n# Connection troubleshooting\nssh -vvv user@target-host\n\n# Permission issues\nansible all -m file -a \u0026quot;path=/tmp/test state=touch\u0026quot; --become\n\n# Vault issues\nansible-vault view group_vars/all/vault.yml\n\n# Performance debugging\nansible-playbook playbooks/site.yml --start-at-task=\u0026quot;specific task name\u0026quot;\nansible-playbook playbooks/site.yml --step\n\n# Module testing\nansible localhost -m debug -a \u0026quot;var=hostvars\u0026quot;\nansible localhost -m setup\n\n# Check for syntax errors in roles\nfind roles/ -name \u0026quot;*.yml\u0026quot; -exec ansible-playbook {} --syntax-check \\;\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"advanced-debugging\" class=\"mobile-header\"\u003eAdvanced Debugging\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Enable comprehensive logging\nexport ANSIBLE_DEBUG=1\nexport ANSIBLE_VERBOSITY=4\nansible-playbook playbooks/site.yml\n\n# Profile playbook execution\nansible-playbook playbooks/site.yml --extra-vars=\u0026quot;profile_tasks_sort_order=none\u0026quot;\n\n# Memory usage analysis\nansible-playbook playbooks/site.yml --extra-vars=\u0026quot;ansible_python_interpreter=/usr/bin/python3\u0026quot;\n\n# Network debugging\nansible all -m command -a \u0026quot;ss -tulpn\u0026quot;\nansible all -m command -a \u0026quot;netstat -rn\u0026quot;\n\n# Process debugging\nansible all -m command -a \u0026quot;ps aux --sort=-%mem | head -10\u0026quot;\n\n# Disk usage analysis\nansible all -m command -a \u0026quot;df -h\u0026quot;\nansible all -m command -a \u0026quot;du -sh /var/log/*\u0026quot;\n\n# Service debugging\nansible all -m systemd -a \u0026quot;name=nginx\u0026quot; --become\nansible all -m command -a \u0026quot;systemctl status nginx\u0026quot; --become\n\n# Variable debugging\nansible-playbook playbooks/site.yml --extra-vars=\u0026quot;debug_vars=true\u0026quot; --tags debug_vars\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"additional-resources\" class=\"mobile-header\"\u003eAdditional Resources\u003c/h2\u003e\n\u003cli class=\"mobile-list-item\"\u003e\u003ca href=\"https://docs.ansible.com/\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\"\u003eOfficial Documentation\u003c/a\u003e\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003e\u003ca href=\"https://galaxy.ansible.com/\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\"\u003eAnsible Galaxy\u003c/a\u003e\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003e\u003ca href=\"https://docs.ansible.com/ansible/latest/user_guide/playbooks_best_practices.html\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\"\u003eBest Practices Guide\u003c/a\u003e\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003e\u003ca href=\"https://docs.ansible.com/ansible/latest/user_guide/become.html#security-best-practices\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\"\u003eSecurity Best Practices\u003c/a\u003e\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003e\u003ca href=\"https://molecule.readthedocs.io/\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\"\u003eAnsible Molecule Testing\u003c/a\u003e\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003e\u003ca href=\"https://docs.ansible.com/ansible/latest/collections/index.html\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\"\u003eCommunity Collections\u003c/a\u003e\u003c/li\u003e\n\u003cp class=\"mobile-paragraph\"\u003e---\u003c/p\u003e\n\u003cp class=\"mobile-paragraph\"\u003e\u003cstrong\u003eNote:\u003c/strong\u003e This guide is part of the \u003ca href=\"https://howtomgr.github.io\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\"\u003eHowToMgr\u003c/a\u003e collection.\u003c/p\u003e","readTime":"31 min","wordCount":6191,"lastBuilt":"2025-09-14T03:53:57.225Z"}]},"__N_SSG":true},"page":"/[category]/[guide]","query":{"category":"infrastructure","guide":"jenkins"},"buildId":"5Rz7EoqouwVFEUR51MgnT","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>