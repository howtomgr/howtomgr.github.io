<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes"/><meta name="theme-color" content="#bd93f9"/><link rel="icon" href="/favicon.ico"/><link rel="preconnect" href="https://fonts.googleapis.com"/><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="true"/><title class="jsx-745d6189719dfe72">Terraform Installation Guide - HowToMgr</title><meta name="description" content="Repo for terraform" class="jsx-745d6189719dfe72"/><meta name="keywords" content="installation guides, tutorials, linux, docker, kubernetes, mobile-first, responsive" class="jsx-745d6189719dfe72"/><meta property="og:title" content="Terraform Installation Guide - HowToMgr" class="jsx-745d6189719dfe72"/><meta property="og:description" content="Repo for terraform" class="jsx-745d6189719dfe72"/><meta property="og:type" content="website" class="jsx-745d6189719dfe72"/><meta property="og:url" content="https://howtomgr.github.io" class="jsx-745d6189719dfe72"/><meta property="og:image" content="https://howtomgr.github.io/social-preview.png" class="jsx-745d6189719dfe72"/><meta property="twitter:card" content="summary_large_image" class="jsx-745d6189719dfe72"/><meta property="twitter:title" content="Terraform Installation Guide - HowToMgr" class="jsx-745d6189719dfe72"/><meta property="twitter:description" content="Repo for terraform" class="jsx-745d6189719dfe72"/><meta name="next-head-count" content="17"/><link rel="dns-prefetch" href="//api.github.com"/><link rel="dns-prefetch" href="//github.com"/><link rel="preload" href="/favicon.ico" as="image"/><meta name="application-name" content="HowToMgr"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="default"/><meta name="apple-mobile-web-app-title" content="HowToMgr"/><meta name="format-detection" content="telephone=no"/><meta name="mobile-web-app-capable" content="yes"/><noscript><style>
            .requires-js { display: none !important; }
            .no-js-message { display: block !important; }
          </style></noscript><link rel="preload" href="/_next/static/css/eec6c1c201affe77.css" as="style"/><link rel="stylesheet" href="/_next/static/css/eec6c1c201affe77.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-42372ed130431b0a.js"></script><script src="/_next/static/chunks/webpack-ee7e63bc15b31913.js" defer=""></script><script src="/_next/static/chunks/framework-2b1f7a23d657eae4.js" defer=""></script><script src="/_next/static/chunks/main-6ec3f7584970eebe.js" defer=""></script><script src="/_next/static/chunks/pages/_app-f7367f88af207b64.js" defer=""></script><script src="/_next/static/chunks/119-31b669b0d3a809df.js" defer=""></script><script src="/_next/static/chunks/pages/%5Bcategory%5D/%5Bguide%5D-d216741aa5f42291.js" defer=""></script><script src="/_next/static/4R1IqQKHZQ9OAix6sl9bM/_buildManifest.js" defer=""></script><script src="/_next/static/4R1IqQKHZQ9OAix6sl9bM/_ssgManifest.js" defer=""></script><style id="__jsx-8a7f0cdcf94f52ce">.breadcrumb.jsx-8a7f0cdcf94f52ce{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;gap:var(--space-2);margin-bottom:var(--space-6);font-size:var(--font-sm);color:var(--text-secondary);overflow-x:auto;white-space:nowrap;-webkit-overflow-scrolling:touch}.breadcrumb.jsx-8a7f0cdcf94f52ce a.jsx-8a7f0cdcf94f52ce{color:var(--accent-primary);text-decoration:none;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0}.breadcrumb.jsx-8a7f0cdcf94f52ce a.jsx-8a7f0cdcf94f52ce:hover{text-decoration:underline}.separator.jsx-8a7f0cdcf94f52ce{color:var(--text-muted);-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0}.current.jsx-8a7f0cdcf94f52ce{color:var(--text-primary);font-weight:500;white-space:nowrap;overflow:hidden;-o-text-overflow:ellipsis;text-overflow:ellipsis}.guide-header.jsx-8a7f0cdcf94f52ce{background:var(--bg-secondary);-webkit-border-radius:var(--border-radius-lg);-moz-border-radius:var(--border-radius-lg);border-radius:var(--border-radius-lg);padding:var(--space-6);margin-bottom:var(--space-8);border:1px solid var(--bg-surface)}.guide-title.jsx-8a7f0cdcf94f52ce{color:var(--accent-primary);font-size:var(--font-3xl);margin-bottom:var(--space-4);line-height:1.2;word-break:break-word}.guide-description.jsx-8a7f0cdcf94f52ce{color:var(--text-secondary);font-size:var(--font-lg);margin-bottom:var(--space-5);line-height:1.5}.guide-badges.jsx-8a7f0cdcf94f52ce{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;gap:var(--space-3);margin-bottom:var(--space-5);-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap}.guide-actions.jsx-8a7f0cdcf94f52ce{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;gap:var(--space-3);-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap}.guide-content.jsx-8a7f0cdcf94f52ce{background:var(--bg-secondary);-webkit-border-radius:var(--border-radius-lg);-moz-border-radius:var(--border-radius-lg);border-radius:var(--border-radius-lg);padding:var(--space-6);margin-bottom:var(--space-8);border:1px solid var(--bg-surface);overflow-x:hidden}.related-section.jsx-8a7f0cdcf94f52ce{margin-bottom:var(--space-8)}.section-title.jsx-8a7f0cdcf94f52ce{color:var(--accent-primary);font-size:var(--font-2xl);text-align:center;margin-bottom:var(--space-6)}.guide-navigation.jsx-8a7f0cdcf94f52ce{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;gap:var(--space-4);-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;margin-bottom:var(--space-8)}.loading-container.jsx-8a7f0cdcf94f52ce,.error-container.jsx-8a7f0cdcf94f52ce{text-align:center;padding:var(--space-8)}.error-actions.jsx-8a7f0cdcf94f52ce{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;gap:var(--space-4);-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;margin-top:var(--space-6);-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap}@media(max-width:767px){.guide-header.jsx-8a7f0cdcf94f52ce{padding:var(--space-4);margin-bottom:var(--space-6)}.guide-title.jsx-8a7f0cdcf94f52ce{font-size:var(--font-2xl)}.guide-description.jsx-8a7f0cdcf94f52ce{font-size:var(--font-base)}.guide-content.jsx-8a7f0cdcf94f52ce{padding:var(--space-4);margin-bottom:var(--space-6)}.guide-badges.jsx-8a7f0cdcf94f52ce{gap:var(--space-2)}.guide-actions.jsx-8a7f0cdcf94f52ce{-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column}.guide-navigation.jsx-8a7f0cdcf94f52ce{-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column}.breadcrumb.jsx-8a7f0cdcf94f52ce{margin-bottom:var(--space-4)}}</style><style id="__jsx-745d6189719dfe72">.app-container.jsx-745d6189719dfe72{min-height:100vh;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;padding-top:56px}.main-content.jsx-745d6189719dfe72{-webkit-box-flex:1;-webkit-flex:1;-moz-box-flex:1;-ms-flex:1;flex:1;padding:var(--space-6)0}.mobile-footer.jsx-745d6189719dfe72{background:var(--bg-secondary);border-top:1px solid var(--bg-surface);padding:var(--space-6)0;margin-top:auto}.footer-content.jsx-745d6189719dfe72{text-align:center}.footer-links.jsx-745d6189719dfe72{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;gap:var(--space-6);margin-bottom:var(--space-4);-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap}.footer-links.jsx-745d6189719dfe72 a.jsx-745d6189719dfe72{color:var(--accent-primary);text-decoration:none;font-size:var(--font-sm)}.footer-links.jsx-745d6189719dfe72 a.jsx-745d6189719dfe72:hover{color:var(--accent-secondary)}.footer-separator.jsx-745d6189719dfe72{height:1px;background:var(--bg-surface);margin:var(--space-4)auto;width:200px}.footer-text.jsx-745d6189719dfe72,.footer-tech.jsx-745d6189719dfe72{color:var(--text-secondary);font-size:var(--font-sm);margin-bottom:var(--space-2)}.footer-disclaimer.jsx-745d6189719dfe72{color:var(--text-muted);font-size:var(--font-xs)}[data-theme="light"].jsx-745d6189719dfe72 .theme-icon-dark.jsx-745d6189719dfe72{display:none}[data-theme="light"].jsx-745d6189719dfe72 .theme-icon-light.jsx-745d6189719dfe72{display:inline!important}@media(max-width:767px){.main-content.jsx-745d6189719dfe72{padding:var(--space-4)0}.footer-links.jsx-745d6189719dfe72{gap:var(--space-4)}}</style></head><body><noscript><div class="no-js-message" style="padding:1rem;background:#ff5555;color:#f8f8f2;text-align:center;font-size:0.9rem">This site requires JavaScript to function properly. Please enable JavaScript in your browser.</div></noscript><div id="__next"><div class="jsx-745d6189719dfe72 app-container"><a href="#main-content" class="jsx-745d6189719dfe72 skip-link">Skip to main content</a><nav class="jsx-745d6189719dfe72 mobile-nav"><div class="jsx-745d6189719dfe72 mobile-nav-content"><a class="mobile-brand" href="/"><span role="img" aria-label="Books" class="jsx-745d6189719dfe72">📚</span>HowToMgr</a><button aria-label="Toggle theme" title="Switch theme" class="jsx-745d6189719dfe72 mobile-theme-toggle touch-target"><span class="jsx-745d6189719dfe72 theme-icon-dark">🌙</span><span style="display:none" class="jsx-745d6189719dfe72 theme-icon-light">☀️</span></button></div></nav><main id="main-content" tabindex="-1" class="jsx-745d6189719dfe72 main-content"><div class="jsx-745d6189719dfe72 container"><nav aria-label="Breadcrumb" class="jsx-8a7f0cdcf94f52ce breadcrumb"><a href="/">Home</a><span class="jsx-8a7f0cdcf94f52ce separator">→</span><a href="/infrastructure/">Infrastructure</a><span class="jsx-8a7f0cdcf94f52ce separator">→</span><span class="jsx-8a7f0cdcf94f52ce current">Terraform</span></nav><header class="jsx-8a7f0cdcf94f52ce guide-header"><div class="jsx-8a7f0cdcf94f52ce guide-meta-top"><h1 class="jsx-8a7f0cdcf94f52ce guide-title">Terraform</h1><p class="jsx-8a7f0cdcf94f52ce guide-description">Repo for terraform</p><div class="jsx-8a7f0cdcf94f52ce guide-badges"><span class="jsx-8a7f0cdcf94f52ce mobile-badge mobile-badge-primary">Infrastructure</span><span class="jsx-8a7f0cdcf94f52ce mobile-badge mobile-badge-info">29 min</span></div><div class="jsx-8a7f0cdcf94f52ce guide-actions"><a href="https://github.com/howtomgr/terraform" target="_blank" rel="noopener" class="jsx-8a7f0cdcf94f52ce btn btn-secondary">View on GitHub</a></div></div></header><article class="jsx-8a7f0cdcf94f52ce guide-content"><div class="jsx-8a7f0cdcf94f52ce readme-content"><h1 id="terraform-installation-guide" class="mobile-header">Terraform Installation Guide</h1>
<p class="mobile-paragraph">Infrastructure as Code (IaC) tool for building, changing, and versioning infrastructure safely and efficiently across multiple cloud providers. Industry standard for multi-cloud infrastructure management.</p>
<h2 id="prerequisites" class="mobile-header">Prerequisites</h2>
<li class="mobile-list-item">Linux system (any modern distribution)</li>
<li class="mobile-list-item">Root or sudo access</li>
<li class="mobile-list-item">Cloud provider account(s) (AWS, Azure, GCP, etc.)</li>
<li class="mobile-list-item">Basic understanding of infrastructure concepts</li>
<li class="mobile-list-item">2GB RAM minimum, 4GB+ recommended for large infrastructures</li>
<h2 id="installation" class="mobile-header">Installation</h2>
<h3 id="using-package-manager-recommended" class="mobile-header">Using Package Manager (Recommended)</h3>
<p class="mobile-paragraph">#### Ubuntu/Debian</p>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash"># Add HashiCorp GPG key
wget -O- https://apt.releases.hashicorp.com/gpg | sudo gpg --dearmor -o /usr/share/keyrings/hashicorp-archive-keyring.gpg

# Add HashiCorp repository
echo &quot;deb [signed-by=/usr/share/keyrings/hashicorp-archive-keyring.gpg] https://apt.releases.hashicorp.com $(lsb_release -cs) main&quot; | sudo tee /etc/apt/sources.list.d/hashicorp.list

# Update and install Terraform
sudo apt update
sudo apt install -y terraform

# Verify installation
terraform version</code></pre>
      </div>
    </div>
<p class="mobile-paragraph">#### RHEL/CentOS/Rocky Linux/AlmaLinux</p>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash"># Add HashiCorp repository
sudo yum install -y yum-utils
sudo yum-config-manager --add-repo https://rpm.releases.hashicorp.com/RHEL/hashicorp.repo

# Install Terraform
sudo yum install -y terraform

# Verify installation
terraform version</code></pre>
      </div>
    </div>
<p class="mobile-paragraph">#### Fedora</p>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash"># Add HashiCorp repository
sudo dnf install -y dnf-plugins-core
sudo dnf config-manager --add-repo https://rpm.releases.hashicorp.com/fedora/hashicorp.repo

# Install Terraform
sudo dnf install -y terraform

# Verify installation
terraform version</code></pre>
      </div>
    </div>
<p class="mobile-paragraph">#### Arch Linux</p>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash"># Install from AUR
yay -S terraform

# Or from community repository
sudo pacman -Syu terraform

# Verify installation
terraform version</code></pre>
      </div>
    </div>
<p class="mobile-paragraph">#### Alpine Linux</p>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash"># Install from Alpine repositories
sudo apk update
sudo apk add terraform

# Verify installation
terraform version</code></pre>
      </div>
    </div>
<h3 id="manual-binary-installation" class="mobile-header">Manual Binary Installation</h3>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash"># Download latest Terraform
TERRAFORM_VERSION=&quot;1.6.4&quot;
cd /tmp
wget https://releases.hashicorp.com/terraform/${TERRAFORM_VERSION}/terraform_${TERRAFORM_VERSION}_linux_amd64.zip

# Install unzip if needed
sudo apt install -y unzip  # Ubuntu/Debian
sudo yum install -y unzip  # RHEL/CentOS
sudo dnf install -y unzip  # Fedora
sudo pacman -S unzip       # Arch Linux

# Extract and install
unzip terraform_${TERRAFORM_VERSION}_linux_amd64.zip
sudo mv terraform /usr/local/bin/
sudo chmod +x /usr/local/bin/terraform

# Verify installation
terraform version

# Clean up
rm terraform_${TERRAFORM_VERSION}_linux_amd64.zip</code></pre>
      </div>
    </div>
<h3 id="using-docker" class="mobile-header">Using Docker</h3>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash"># Create alias for Docker-based Terraform
echo &#039;alias terraform=&quot;docker run --rm -it -v $(pwd):/workspace -w /workspace hashicorp/terraform:latest&quot;&#039; &gt;&gt; ~/.bashrc
source ~/.bashrc

# Or create comprehensive wrapper script
sudo tee /usr/local/bin/terraform &gt; /dev/null &lt;&lt;&#039;EOF&#039;
#!/bin/bash
docker run --rm -it \
  -v $(pwd):/workspace \
  -v ~/.aws:/root/.aws:ro \
  -v ~/.azure:/root/.azure:ro \
  -v ~/.config/gcloud:/root/.config/gcloud:ro \
  -v ~/.kube:/root/.kube:ro \
  -v ~/.ssh:/root/.ssh:ro \
  -e AWS_PROFILE \
  -e AZURE_SUBSCRIPTION_ID \
  -e GOOGLE_APPLICATION_CREDENTIALS \
  -w /workspace \
  hashicorp/terraform:latest &quot;$@&quot;
EOF
sudo chmod +x /usr/local/bin/terraform

# Test Docker installation
terraform version</code></pre>
      </div>
    </div>
<h3 id="using-tfenv-version-manager" class="mobile-header">Using tfenv (Version Manager)</h3>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash"># Install tfenv for managing multiple Terraform versions
git clone https://github.com/tfutils/tfenv.git ~/.tfenv
echo &#039;export PATH=&quot;$HOME/.tfenv/bin:$PATH&quot;&#039; &gt;&gt; ~/.bashrc
source ~/.bashrc

# Install and use specific Terraform version
tfenv install 1.6.4
tfenv use 1.6.4

# List available versions
tfenv list-remote
tfenv list

# Auto-install based on .terraform-version file
echo &quot;1.6.4&quot; &gt; .terraform-version
tfenv install</code></pre>
      </div>
    </div>
<h2 id="multi-cloud-provider-setup" class="mobile-header">Multi-Cloud Provider Setup</h2>
<h3 id="aws-configuration" class="mobile-header">AWS Configuration</h3>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash"># Install AWS CLI
curl &quot;https://awscli.amazonaws.com/awscli-exe-linux-x86_64.zip&quot; -o &quot;awscliv2.zip&quot;
unzip awscliv2.zip
sudo ./aws/install

# Configure AWS credentials
aws configure
# AWS Access Key ID: YOUR_ACCESS_KEY
# AWS Secret Access Key: YOUR_SECRET_KEY  
# Default region name: us-west-2
# Default output format: json

# Alternative: Use IAM roles (recommended for EC2)
# Instance metadata service automatically provides credentials

# Create Terraform AWS configuration
mkdir -p ~/terraform/multi-cloud
cd ~/terraform/multi-cloud

cat &gt; providers.tf &lt;&lt;EOF
terraform {
  required_version = &quot;&gt;= 1.5&quot;
  required_providers {
    aws = {
      source  = &quot;hashicorp/aws&quot;
      version = &quot;~&gt; 5.0&quot;
    }
    azurerm = {
      source  = &quot;hashicorp/azurerm&quot;
      version = &quot;~&gt; 3.0&quot;
    }
    google = {
      source  = &quot;hashicorp/google&quot;
      version = &quot;~&gt; 5.0&quot;
    }
  }
  
  # Remote state configuration
  backend &quot;s3&quot; {
    bucket = &quot;your-terraform-state-bucket&quot;
    key    = &quot;multi-cloud/terraform.tfstate&quot;
    region = &quot;us-west-2&quot;
    
    # State locking with DynamoDB
    dynamodb_table = &quot;terraform-state-lock&quot;
    encrypt        = true
  }
}

# AWS Provider
provider &quot;aws&quot; {
  region = var.aws_region
  
  default_tags {
    tags = {
      Environment   = var.environment
      ManagedBy     = &quot;terraform&quot;
      Project       = var.project_name
      Owner         = var.owner
    }
  }
}

# Azure Provider
provider &quot;azurerm&quot; {
  features {
    resource_group {
      prevent_deletion_if_contains_resources = false
    }
    key_vault {
      purge_soft_delete_on_destroy = true
    }
  }
}

# Google Cloud Provider
provider &quot;google&quot; {
  project = var.gcp_project_id
  region  = var.gcp_region
  zone    = var.gcp_zone
}
EOF</code></pre>
      </div>
    </div>
<h3 id="azure-configuration" class="mobile-header">Azure Configuration</h3>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash"># Install Azure CLI
curl -sL https://aka.ms/InstallAzureCLIDeb | sudo bash

# Login to Azure
az login

# Create service principal for Terraform
az ad sp create-for-rbac \
  --name &quot;terraform-sp&quot; \
  --role=&quot;Contributor&quot; \
  --scopes=&quot;/subscriptions/YOUR_SUBSCRIPTION_ID&quot;

# Set environment variables (add to ~/.bashrc)
cat &gt;&gt; ~/.bashrc &lt;&lt;EOF
# Azure Terraform Authentication
export ARM_CLIENT_ID=&quot;your-client-id&quot;
export ARM_CLIENT_SECRET=&quot;your-client-secret&quot;
export ARM_SUBSCRIPTION_ID=&quot;your-subscription-id&quot;
export ARM_TENANT_ID=&quot;your-tenant-id&quot;
EOF

source ~/.bashrc

# Create Azure Terraform configuration
cat &gt; azure-main.tf &lt;&lt;EOF
# Resource Group
resource &quot;azurerm_resource_group&quot; &quot;main&quot; {
  name     = &quot;\${var.environment}-rg&quot;
  location = var.azure_location
  
  tags = {
    Environment = var.environment
    ManagedBy   = &quot;terraform&quot;
  }
}

# Virtual Network
resource &quot;azurerm_virtual_network&quot; &quot;main&quot; {
  name                = &quot;\${var.environment}-vnet&quot;
  address_space       = [&quot;10.1.0.0/16&quot;]
  location            = azurerm_resource_group.main.location
  resource_group_name = azurerm_resource_group.main.name

  tags = {
    Environment = var.environment
  }
}

# Subnet
resource &quot;azurerm_subnet&quot; &quot;internal&quot; {
  name                 = &quot;internal&quot;
  resource_group_name  = azurerm_resource_group.main.name
  virtual_network_name = azurerm_virtual_network.main.name
  address_prefixes     = [&quot;10.1.2.0/24&quot;]
}

# Network Security Group
resource &quot;azurerm_network_security_group&quot; &quot;main&quot; {
  name                = &quot;\${var.environment}-nsg&quot;
  location            = azurerm_resource_group.main.location
  resource_group_name = azurerm_resource_group.main.name

  security_rule {
    name                       = &quot;SSH&quot;
    priority                   = 1001
    direction                  = &quot;Inbound&quot;
    access                     = &quot;Allow&quot;
    protocol                   = &quot;Tcp&quot;
    source_port_range          = &quot;*&quot;
    destination_port_range     = &quot;22&quot;
    source_address_prefix      = &quot;*&quot;
    destination_address_prefix = &quot;*&quot;
  }

  security_rule {
    name                       = &quot;HTTP&quot;
    priority                   = 1002
    direction                  = &quot;Inbound&quot;
    access                     = &quot;Allow&quot;
    protocol                   = &quot;Tcp&quot;
    source_port_range          = &quot;*&quot;
    destination_port_range     = &quot;80&quot;
    source_address_prefix      = &quot;*&quot;
    destination_address_prefix = &quot;*&quot;
  }

  security_rule {
    name                       = &quot;HTTPS&quot;
    priority                   = 1003
    direction                  = &quot;Inbound&quot;
    access                     = &quot;Allow&quot;
    protocol                   = &quot;Tcp&quot;
    source_port_range          = &quot;*&quot;
    destination_port_range     = &quot;443&quot;
    source_address_prefix      = &quot;*&quot;
    destination_address_prefix = &quot;*&quot;
  }
}
EOF</code></pre>
      </div>
    </div>
<h3 id="google-cloud-configuration" class="mobile-header">Google Cloud Configuration</h3>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash"># Install Google Cloud SDK
echo &quot;deb [signed-by=/usr/share/keyrings/cloud.google.gpg] https://packages.cloud.google.com/apt cloud-sdk main&quot; | sudo tee -a /etc/apt/sources.list.d/google-cloud-sdk.list
curl https://packages.cloud.google.com/apt/doc/apt-key.gpg | sudo apt-key --keyring /usr/share/keyrings/cloud.google.gpg add -
sudo apt-get update &amp;&amp; sudo apt-get install -y google-cloud-cli

# Authenticate
gcloud auth login
gcloud config set project YOUR_PROJECT_ID

# Create service account for Terraform
gcloud iam service-accounts create terraform \
  --display-name=&quot;Terraform Service Account&quot;

gcloud projects add-iam-policy-binding YOUR_PROJECT_ID \
  --member=&quot;serviceAccount:terraform@YOUR_PROJECT_ID.iam.gserviceaccount.com&quot; \
  --role=&quot;roles/editor&quot;

gcloud iam service-accounts keys create ~/gcp-terraform-key.json \
  --iam-account=terraform@YOUR_PROJECT_ID.iam.gserviceaccount.com

# Set environment variable
export GOOGLE_APPLICATION_CREDENTIALS=&quot;$HOME/gcp-terraform-key.json&quot;
echo &#039;export GOOGLE_APPLICATION_CREDENTIALS=&quot;$HOME/gcp-terraform-key.json&quot;&#039; &gt;&gt; ~/.bashrc

# Create GCP Terraform configuration
cat &gt; gcp-main.tf &lt;&lt;EOF
# VPC Network
resource &quot;google_compute_network&quot; &quot;main&quot; {
  name                    = &quot;\${var.environment}-vpc&quot;
  auto_create_subnetworks = false
  project                 = var.gcp_project_id
}

# Subnet
resource &quot;google_compute_subnetwork&quot; &quot;main&quot; {
  name          = &quot;\${var.environment}-subnet&quot;
  ip_cidr_range = &quot;10.2.0.0/24&quot;
  region        = var.gcp_region
  network       = google_compute_network.main.id
  project       = var.gcp_project_id
}

# Firewall rules
resource &quot;google_compute_firewall&quot; &quot;allow-ssh&quot; {
  name    = &quot;\${var.environment}-allow-ssh&quot;
  network = google_compute_network.main.name
  project = var.gcp_project_id

  allow {
    protocol = &quot;tcp&quot;
    ports    = [&quot;22&quot;]
  }

  source_ranges = [&quot;0.0.0.0/0&quot;]
  target_tags   = [&quot;ssh-allowed&quot;]
}

resource &quot;google_compute_firewall&quot; &quot;allow-http&quot; {
  name    = &quot;\${var.environment}-allow-http&quot;
  network = google_compute_network.main.name
  project = var.gcp_project_id

  allow {
    protocol = &quot;tcp&quot;
    ports    = [&quot;80&quot;, &quot;443&quot;]
  }

  source_ranges = [&quot;0.0.0.0/0&quot;]
  target_tags   = [&quot;http-server&quot;, &quot;https-server&quot;]
}
EOF</code></pre>
      </div>
    </div>
<h2 id="security-best-practices" class="mobile-header">Security Best Practices</h2>
<h3 id="secure-state-management" class="mobile-header">Secure State Management</h3>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash"># Create S3 backend with encryption and locking
cat &gt; backend.tf &lt;&lt;EOF
terraform {
  backend &quot;s3&quot; {
    bucket         = &quot;your-terraform-state-bucket&quot;
    key            = &quot;infrastructure/terraform.tfstate&quot;
    region         = &quot;us-west-2&quot;
    encrypt        = true
    kms_key_id     = &quot;arn:aws:kms:us-west-2:ACCOUNT:key/KEY-ID&quot;
    dynamodb_table = &quot;terraform-state-lock&quot;
    
    # Additional security
    skip_region_validation      = false
    skip_credentials_validation = false
    skip_metadata_api_check     = false
  }
}

# DynamoDB table for state locking
resource &quot;aws_dynamodb_table&quot; &quot;terraform_state_lock&quot; {
  name           = &quot;terraform-state-lock&quot;
  billing_mode   = &quot;PAY_PER_REQUEST&quot;
  hash_key       = &quot;LockID&quot;

  attribute {
    name = &quot;LockID&quot;
    type = &quot;S&quot;
  }

  server_side_encryption {
    enabled = true
  }

  point_in_time_recovery {
    enabled = true
  }

  tags = {
    Name        = &quot;Terraform State Lock Table&quot;
    Environment = var.environment
  }
}

# S3 bucket for state storage
resource &quot;aws_s3_bucket&quot; &quot;terraform_state&quot; {
  bucket        = &quot;your-terraform-state-bucket&quot;
  force_destroy = false

  tags = {
    Name        = &quot;Terraform State Bucket&quot;
    Environment = var.environment
  }
}

resource &quot;aws_s3_bucket_encryption_configuration&quot; &quot;terraform_state_encryption&quot; {
  bucket = aws_s3_bucket.terraform_state.id

  rule {
    apply_server_side_encryption_by_default {
      kms_master_key_id = aws_kms_key.terraform_bucket_key.arn
      sse_algorithm     = &quot;aws:kms&quot;
    }
  }
}

resource &quot;aws_s3_bucket_versioning&quot; &quot;terraform_state_versioning&quot; {
  bucket = aws_s3_bucket.terraform_state.id
  versioning_configuration {
    status = &quot;Enabled&quot;
  }
}

resource &quot;aws_s3_bucket_public_access_block&quot; &quot;terraform_state&quot; {
  bucket = aws_s3_bucket.terraform_state.id

  block_public_acls       = true
  block_public_policy     = true
  ignore_public_acls      = true
  restrict_public_buckets = true
}

# KMS key for S3 encryption
resource &quot;aws_kms_key&quot; &quot;terraform_bucket_key&quot; {
  description             = &quot;KMS key for Terraform state bucket encryption&quot;
  deletion_window_in_days = 7

  tags = {
    Name        = &quot;Terraform State Bucket Key&quot;
    Environment = var.environment
  }
}
EOF</code></pre>
      </div>
    </div>
<h3 id="variables-and-secrets-management" class="mobile-header">Variables and Secrets Management</h3>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash"># Create variables.tf with proper typing and validation
cat &gt; variables.tf &lt;&lt;EOF
# AWS Variables
variable &quot;aws_region&quot; {
  description = &quot;AWS region for resources&quot;
  type        = string
  default     = &quot;us-west-2&quot;
  validation {
    condition     = can(regex(&quot;^[a-z]{2}-[a-z]+-[0-9]{1}$&quot;, var.aws_region))
    error_message = &quot;AWS region must be a valid region format.&quot;
  }
}

variable &quot;aws_availability_zones&quot; {
  description = &quot;List of AWS availability zones&quot;
  type        = list(string)
  default     = [&quot;us-west-2a&quot;, &quot;us-west-2b&quot;, &quot;us-west-2c&quot;]
}

# Azure Variables
variable &quot;azure_location&quot; {
  description = &quot;Azure region for resources&quot;
  type        = string
  default     = &quot;East US&quot;
  validation {
    condition = contains([
      &quot;East US&quot;, &quot;East US 2&quot;, &quot;West US&quot;, &quot;West US 2&quot;, &quot;West US 3&quot;,
      &quot;Central US&quot;, &quot;North Central US&quot;, &quot;South Central US&quot;, &quot;West Central US&quot;,
      &quot;Canada Central&quot;, &quot;Canada East&quot;, &quot;Brazil South&quot;, &quot;UK South&quot;, &quot;UK West&quot;,
      &quot;West Europe&quot;, &quot;North Europe&quot;, &quot;France Central&quot;, &quot;Germany West Central&quot;,
      &quot;Switzerland North&quot;, &quot;Norway East&quot;, &quot;UAE North&quot;, &quot;South Africa North&quot;,
      &quot;Australia East&quot;, &quot;Australia Southeast&quot;, &quot;Central India&quot;, &quot;South India&quot;,
      &quot;West India&quot;, &quot;Japan East&quot;, &quot;Japan West&quot;, &quot;Korea Central&quot;, &quot;Korea South&quot;,
      &quot;Southeast Asia&quot;, &quot;East Asia&quot;
    ], var.azure_location)
    error_message = &quot;Azure location must be a valid Azure region.&quot;
  }
}

# GCP Variables
variable &quot;gcp_project_id&quot; {
  description = &quot;GCP project ID&quot;
  type        = string
  validation {
    condition     = length(var.gcp_project_id) &gt; 0
    error_message = &quot;GCP project ID cannot be empty.&quot;
  }
}

variable &quot;gcp_region&quot; {
  description = &quot;GCP region for resources&quot;
  type        = string
  default     = &quot;us-central1&quot;
}

variable &quot;gcp_zone&quot; {
  description = &quot;GCP zone for resources&quot;
  type        = string
  default     = &quot;us-central1-a&quot;
}

# Environment Variables
variable &quot;environment&quot; {
  description = &quot;Environment name&quot;
  type        = string
  default     = &quot;development&quot;
  validation {
    condition     = contains([&quot;development&quot;, &quot;staging&quot;, &quot;production&quot;], var.environment)
    error_message = &quot;Environment must be development, staging, or production.&quot;
  }
}

variable &quot;project_name&quot; {
  description = &quot;Project name for resource naming&quot;
  type        = string
  validation {
    condition     = length(var.project_name) &gt; 0 &amp;&amp; length(var.project_name) &lt;= 20
    error_message = &quot;Project name must be between 1 and 20 characters.&quot;
  }
}

variable &quot;owner&quot; {
  description = &quot;Owner of the infrastructure&quot;
  type        = string
}

# Networking Variables
variable &quot;vpc_cidr&quot; {
  description = &quot;CIDR block for VPC&quot;
  type        = string
  default     = &quot;10.0.0.0/16&quot;
  validation {
    condition     = can(cidrhost(var.vpc_cidr, 0))
    error_message = &quot;VPC CIDR must be a valid IPv4 CIDR block.&quot;
  }
}

# Instance Variables
variable &quot;instance_type&quot; {
  description = &quot;Instance types for different clouds&quot;
  type = object({
    aws   = string
    azure = string
    gcp   = string
  })
  default = {
    aws   = &quot;t3.micro&quot;
    azure = &quot;Standard_B1s&quot;
    gcp   = &quot;e2-micro&quot;
  }
}

# Sensitive Variables (use terraform.tfvars or environment variables)
variable &quot;database_password&quot; {
  description = &quot;Database password&quot;
  type        = string
  sensitive   = true
  validation {
    condition     = length(var.database_password) &gt;= 12
    error_message = &quot;Database password must be at least 12 characters.&quot;
  }
}

variable &quot;ssh_public_key&quot; {
  description = &quot;SSH public key for instance access&quot;
  type        = string
  validation {
    condition     = can(regex(&quot;^ssh-&quot;, var.ssh_public_key))
    error_message = &quot;SSH public key must be a valid SSH public key.&quot;
  }
}
EOF

# Create terraform.tfvars (never commit to version control)
cat &gt; terraform.tfvars.example &lt;&lt;EOF
# Copy to terraform.tfvars and fill in your values
project_name     = &quot;myproject&quot;
owner           = &quot;devops-team&quot;
environment     = &quot;production&quot;

# AWS
aws_region = &quot;us-west-2&quot;

# Azure  
azure_location = &quot;East US&quot;

# GCP
gcp_project_id = &quot;my-gcp-project-id&quot;
gcp_region     = &quot;us-central1&quot;
gcp_zone       = &quot;us-central1-a&quot;

# Security
database_password = &quot;your-secure-database-password&quot;
ssh_public_key   = &quot;ssh-rsa AAAAB3NzaC1yc2E...&quot;
EOF</code></pre>
      </div>
    </div>
<h3 id="secrets-management-integration" class="mobile-header">Secrets Management Integration</h3>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash"># HashiCorp Vault integration
cat &gt; vault.tf &lt;&lt;EOF
# Vault provider for secrets management
terraform {
  required_providers {
    vault = {
      source  = &quot;hashicorp/vault&quot;
      version = &quot;~&gt; 3.0&quot;
    }
  }
}

provider &quot;vault&quot; {
  address = var.vault_address
  token   = var.vault_token
}

# Read secrets from Vault
data &quot;vault_generic_secret&quot; &quot;database&quot; {
  path = &quot;secret/database&quot;
}

# Use secrets in resources
resource &quot;aws_db_instance&quot; &quot;main&quot; {
  identifier_prefix = var.project_name
  
  username = data.vault_generic_secret.database.data[&quot;username&quot;]
  password = data.vault_generic_secret.database.data[&quot;password&quot;]
  
  # Other configuration...
}
EOF

# AWS Secrets Manager integration
cat &gt; aws-secrets.tf &lt;&lt;EOF
# Retrieve secrets from AWS Secrets Manager
data &quot;aws_secretsmanager_secret_version&quot; &quot;database_credentials&quot; {
  secret_id = &quot;prod/database/credentials&quot;
}

locals {
  database_creds = jsondecode(data.aws_secretsmanager_secret_version.database_credentials.secret_string)
}

resource &quot;aws_db_instance&quot; &quot;main&quot; {
  username = local.database_creds.username
  password = local.database_creds.password
  
  # Other configuration...
}
EOF</code></pre>
      </div>
    </div>
<h2 id="advanced-multi-cloud-architecture" class="mobile-header">Advanced Multi-Cloud Architecture</h2>
<h3 id="cross-cloud-networking" class="mobile-header">Cross-Cloud Networking</h3>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash"># Create multi-cloud VPN connection
cat &gt; networking.tf &lt;&lt;EOF
# AWS VPC and VPN Gateway
resource &quot;aws_vpc&quot; &quot;main&quot; {
  cidr_block           = &quot;10.0.0.0/16&quot;
  enable_dns_hostnames = true
  enable_dns_support   = true

  tags = {
    Name = &quot;\${var.environment}-aws-vpc&quot;
  }
}

resource &quot;aws_vpn_gateway&quot; &quot;main&quot; {
  vpc_id = aws_vpc.main.id

  tags = {
    Name = &quot;\${var.environment}-aws-vpn-gw&quot;
  }
}

# Azure Virtual Network Gateway
resource &quot;azurerm_virtual_network_gateway&quot; &quot;main&quot; {
  name                = &quot;\${var.environment}-azure-vpn-gw&quot;
  location            = azurerm_resource_group.main.location
  resource_group_name = azurerm_resource_group.main.name

  type     = &quot;Vpn&quot;
  vpn_type = &quot;RouteBased&quot;

  active_active = false
  enable_bgp    = false
  sku           = &quot;VpnGw1&quot;

  ip_configuration {
    name                          = &quot;vnetGatewayConfig&quot;
    public_ip_address_id          = azurerm_public_ip.vpn_gateway.id
    private_ip_address_allocation = &quot;Dynamic&quot;
    subnet_id                     = azurerm_subnet.gateway.id
  }
}

# GCP VPN Gateway
resource &quot;google_compute_vpn_gateway&quot; &quot;main&quot; {
  name    = &quot;\${var.environment}-gcp-vpn-gw&quot;
  network = google_compute_network.main.id
  project = var.gcp_project_id
  region  = var.gcp_region
}

# Cross-cloud VPN tunnels
resource &quot;aws_vpn_connection&quot; &quot;aws_to_azure&quot; {
  vpn_gateway_id      = aws_vpn_gateway.main.id
  customer_gateway_id = aws_customer_gateway.azure.id
  type                = &quot;ipsec.1&quot;
  static_routes_only  = true

  tags = {
    Name = &quot;\${var.environment}-aws-to-azure-vpn&quot;
  }
}

# Local values for cross-cloud coordination
locals {
  aws_vpc_cidr   = &quot;10.0.0.0/16&quot;
  azure_vnet_cidr = &quot;10.1.0.0/16&quot;
  gcp_vpc_cidr   = &quot;10.2.0.0/16&quot;
  
  common_tags = {
    Environment   = var.environment
    Project       = var.project_name
    ManagedBy     = &quot;terraform&quot;
    Owner         = var.owner
    CreatedAt     = timestamp()
  }
}
EOF</code></pre>
      </div>
    </div>
<h3 id="global-load-balancing" class="mobile-header">Global Load Balancing</h3>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash"># Multi-cloud global load balancer using Cloudflare
cat &gt; global-lb.tf &lt;&lt;EOF
terraform {
  required_providers {
    cloudflare = {
      source  = &quot;cloudflare/cloudflare&quot;
      version = &quot;~&gt; 4.0&quot;
    }
  }
}

provider &quot;cloudflare&quot; {
  api_token = var.cloudflare_api_token
}

# Cloudflare zone
data &quot;cloudflare_zone&quot; &quot;main&quot; {
  name = var.domain_name
}

# AWS ALB DNS record
resource &quot;cloudflare_record&quot; &quot;aws_lb&quot; {
  zone_id = data.cloudflare_zone.main.id
  name    = &quot;aws&quot;
  value   = aws_lb.main.dns_name
  type    = &quot;CNAME&quot;
  ttl     = 300

  comment = &quot;AWS Application Load Balancer&quot;
}

# Azure Load Balancer DNS record  
resource &quot;cloudflare_record&quot; &quot;azure_lb&quot; {
  zone_id = data.cloudflare_zone.main.id
  name    = &quot;azure&quot;
  value   = azurerm_public_ip.lb.fqdn
  type    = &quot;CNAME&quot;
  ttl     = 300

  comment = &quot;Azure Load Balancer&quot;
}

# GCP Load Balancer DNS record
resource &quot;cloudflare_record&quot; &quot;gcp_lb&quot; {
  zone_id = data.cloudflare_zone.main.id
  name    = &quot;gcp&quot;
  value   = google_compute_global_address.main.address
  type    = &quot;A&quot;
  ttl     = 300

  comment = &quot;GCP Global Load Balancer&quot;
}

# Global load balancer with health checks and failover
resource &quot;cloudflare_load_balancer&quot; &quot;global&quot; {
  zone_id = data.cloudflare_zone.main.id
  name    = &quot;global-lb&quot;
  
  fallback_pool_id = cloudflare_load_balancer_pool.backup.id
  default_pool_ids = [
    cloudflare_load_balancer_pool.primary.id,
    cloudflare_load_balancer_pool.secondary.id
  ]

  description = &quot;Multi-cloud global load balancer&quot;
  ttl         = 30
  proxied     = true

  adaptive_routing {
    failover_across_pools = true
  }

  location_strategy {
    prefer_ecs = &quot;never&quot;
    mode       = &quot;resolver_ip&quot;
  }
}

# Primary pool (AWS)
resource &quot;cloudflare_load_balancer_pool&quot; &quot;primary&quot; {
  name = &quot;aws-primary&quot;

  origins {
    name    = &quot;aws-west&quot;
    address = aws_lb.main.dns_name
    enabled = true
  }

  monitor              = cloudflare_load_balancer_monitor.http.id
  description          = &quot;AWS West Coast&quot;
  enabled              = true
  minimum_origins      = 1
  notification_email   = &quot;alerts@example.com&quot;
}

# Secondary pool (Azure)
resource &quot;cloudflare_load_balancer_pool&quot; &quot;secondary&quot; {
  name = &quot;azure-secondary&quot;

  origins {
    name    = &quot;azure-east&quot;
    address = azurerm_public_ip.lb.ip_address
    enabled = true
  }

  monitor         = cloudflare_load_balancer_monitor.http.id
  description     = &quot;Azure East Coast&quot;
  enabled         = true
  minimum_origins = 1
}

# Health monitor
resource &quot;cloudflare_load_balancer_monitor&quot; &quot;http&quot; {
  expected_codes = &quot;200&quot;
  method         = &quot;GET&quot;
  timeout        = 7
  path           = &quot;/health&quot;
  interval       = 60
  retries        = 3
  description    = &quot;HTTP health check&quot;

  header {
    header = &quot;Host&quot;
    values = [&quot;example.com&quot;]
  }
}
EOF</code></pre>
      </div>
    </div>
<h2 id="cicd-integration" class="mobile-header">CI/CD Integration</h2>
<h3 id="github-actions-workflow" class="mobile-header">GitHub Actions Workflow</h3>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash">mkdir -p .github/workflows
cat &gt; .github/workflows/terraform.yml &lt;&lt;EOF
name: Terraform Multi-Cloud Deployment

on:
  push:
    branches: [ main, develop ]
  pull_request:
    branches: [ main ]

env:
  TF_VERSION: 1.6.4

jobs:
  terraform:
    runs-on: ubuntu-latest
    strategy:
      matrix:
        environment: [development, staging, production]
        
    steps:
    - name: Checkout code
      uses: actions/checkout@v4
    
    - name: Setup Terraform
      uses: hashicorp/setup-terraform@v3
      with:
        terraform_version: \${{ env.TF_VERSION }}
        cli_config_credentials_token: \${{ secrets.TF_CLOUD_TOKEN }}
    
    - name: Configure AWS credentials
      uses: aws-actions/configure-aws-credentials@v4
      with:
        aws-access-key-id: \${{ secrets.AWS_ACCESS_KEY_ID }}
        aws-secret-access-key: \${{ secrets.AWS_SECRET_ACCESS_KEY }}
        aws-region: us-west-2
    
    - name: Configure Azure credentials
      uses: azure/login@v1
      with:
        creds: \${{ secrets.AZURE_CREDENTIALS }}
    
    - name: Configure GCP credentials
      uses: google-github-actions/setup-gcloud@v1
      with:
        service_account_key: \${{ secrets.GCP_SA_KEY }}
        project_id: \${{ secrets.GCP_PROJECT_ID }}
    
    - name: Terraform Format Check
      run: terraform fmt -check -recursive
    
    - name: Terraform Initialize
      run: terraform init
      working-directory: environments/\${{ matrix.environment }}
    
    - name: Terraform Validate
      run: terraform validate
      working-directory: environments/\${{ matrix.environment }}
    
    - name: Terraform Plan
      run: terraform plan -var-file=&quot;\${{ matrix.environment }}.tfvars&quot;
      working-directory: environments/\${{ matrix.environment }}
    
    - name: Terraform Apply (Production)
      if: github.ref == &#039;refs/heads/main&#039; &amp;&amp; matrix.environment == &#039;production&#039;
      run: terraform apply -auto-approve -var-file=&quot;production.tfvars&quot;
      working-directory: environments/production
    
    - name: Terraform Plan Status
      if: steps.plan.outcome == &#039;failure&#039;
      run: exit 1
    
    - name: Security Scan with Checkov
      uses: bridgecrewio/checkov-action@master
      with:
        directory: .
        framework: terraform
        output_format: sarif
        output_file_path: checkov.sarif
    
    - name: Upload Checkov results to GitHub
      uses: github/codeql-action/upload-sarif@v2
      if: always()
      with:
        sarif_file: checkov.sarif
EOF</code></pre>
      </div>
    </div>
<h3 id="gitlab-ci-integration" class="mobile-header">GitLab CI Integration</h3>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash">cat &gt; .gitlab-ci.yml &lt;&lt;EOF
stages:
  - validate
  - plan
  - apply
  - destroy

variables:
  TF_ROOT: \${CI_PROJECT_DIR}
  TF_VERSION: &quot;1.6.4&quot;
  TF_IN_AUTOMATION: &quot;true&quot;

cache:
  key: &quot;\${TF_ROOT}&quot;
  paths:
    - \${TF_ROOT}/.terraform

before_script:
  - cd \${TF_ROOT}
  - terraform version
  - terraform init

validate:
  stage: validate
  script:
    - terraform fmt -check -recursive
    - terraform validate
    - |
      for dir in environments/*/; do
        cd &quot;\$dir&quot;
        terraform validate
        cd -
      done
  rules:
    - if: &#039;\$CI_MERGE_REQUEST_IID&#039;
    - if: &#039;\$CI_COMMIT_BRANCH == \$CI_DEFAULT_BRANCH&#039;

plan:development:
  stage: plan
  script:
    - cd environments/development
    - terraform plan -var-file=&quot;development.tfvars&quot; -out=&quot;development.tfplan&quot;
  artifacts:
    paths:
      - environments/development/development.tfplan
    expire_in: 1 week
  rules:
    - if: &#039;\$CI_MERGE_REQUEST_IID&#039;
    - if: &#039;\$CI_COMMIT_BRANCH == &quot;develop&quot;&#039;

plan:production:
  stage: plan
  script:
    - cd environments/production
    - terraform plan -var-file=&quot;production.tfvars&quot; -out=&quot;production.tfplan&quot;
  artifacts:
    paths:
      - environments/production/production.tfplan
    expire_in: 1 week
  rules:
    - if: &#039;\$CI_COMMIT_BRANCH == \$CI_DEFAULT_BRANCH&#039;

apply:development:
  stage: apply
  script:
    - cd environments/development
    - terraform apply -input=false &quot;development.tfplan&quot;
  dependencies:
    - plan:development
  rules:
    - if: &#039;\$CI_COMMIT_BRANCH == &quot;develop&quot;&#039;
      when: manual

apply:production:
  stage: apply
  script:
    - cd environments/production
    - terraform apply -input=false &quot;production.tfplan&quot;
  dependencies:
    - plan:production
  rules:
    - if: &#039;\$CI_COMMIT_BRANCH == \$CI_DEFAULT_BRANCH&#039;
      when: manual

destroy:
  stage: destroy
  script:
    - terraform destroy -auto-approve -var-file=&quot;\${ENVIRONMENT}.tfvars&quot;
  rules:
    - if: &#039;\$CI_COMMIT_BRANCH&#039;
      when: manual
  variables:
    ENVIRONMENT: &quot;development&quot;  # Change as needed
EOF</code></pre>
      </div>
    </div>
<h2 id="modules-and-best-practices" class="mobile-header">Modules and Best Practices</h2>
<h3 id="reusable-module-structure" class="mobile-header">Reusable Module Structure</h3>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash"># Create module directory structure
mkdir -p modules/compute/{aws,azure,gcp}

# AWS Compute Module
cat &gt; modules/compute/aws/main.tf &lt;&lt;EOF
# AWS EC2 Instance Module
resource &quot;aws_instance&quot; &quot;main&quot; {
  count                  = var.instance_count
  ami                    = data.aws_ami.ubuntu.id
  instance_type          = var.instance_type
  key_name              = aws_key_pair.main.key_name
  vpc_security_group_ids = [aws_security_group.main.id]
  subnet_id             = var.subnet_id

  user_data = templatefile(&quot;\${path.module}/user-data.sh&quot;, {
    hostname = &quot;\${var.name_prefix}-\${count.index + 1}&quot;
  })

  root_block_device {
    volume_type           = &quot;gp3&quot;
    volume_size           = var.disk_size
    encrypted             = true
    delete_on_termination = true
  }

  metadata_options {
    http_endpoint = &quot;enabled&quot;
    http_tokens   = &quot;required&quot;  # IMDSv2 only
    http_put_response_hop_limit = 1
  }

  tags = merge(var.common_tags, {
    Name = &quot;\${var.name_prefix}-\${count.index + 1}&quot;
    Type = &quot;compute&quot;
  })
}

# Security Group
resource &quot;aws_security_group&quot; &quot;main&quot; {
  name_prefix = &quot;\${var.name_prefix}-&quot;
  vpc_id      = var.vpc_id

  ingress {
    description = &quot;SSH&quot;
    from_port   = 22
    to_port     = 22
    protocol    = &quot;tcp&quot;
    cidr_blocks = [var.vpc_cidr]
  }

  ingress {
    description = &quot;HTTP&quot;
    from_port   = 80
    to_port     = 80
    protocol    = &quot;tcp&quot;
    cidr_blocks = [&quot;0.0.0.0/0&quot;]
  }

  ingress {
    description = &quot;HTTPS&quot;
    from_port   = 443
    to_port     = 443
    protocol    = &quot;tcp&quot;
    cidr_blocks = [&quot;0.0.0.0/0&quot;]
  }

  egress {
    from_port   = 0
    to_port     = 0
    protocol    = &quot;-1&quot;
    cidr_blocks = [&quot;0.0.0.0/0&quot;]
  }

  tags = var.common_tags
}

# Key pair
resource &quot;aws_key_pair&quot; &quot;main&quot; {
  key_name   = &quot;\${var.name_prefix}-keypair&quot;
  public_key = var.ssh_public_key

  tags = var.common_tags
}

# Data source for latest Ubuntu AMI
data &quot;aws_ami&quot; &quot;ubuntu&quot; {
  most_recent = true
  owners      = [&quot;099720109477&quot;] # Canonical

  filter {
    name   = &quot;name&quot;
    values = [&quot;ubuntu/images/hvm-ssd/ubuntu-jammy-22.04-amd64-server-*&quot;]
  }

  filter {
    name   = &quot;virtualization-type&quot;
    values = [&quot;hvm&quot;]
  }
}
EOF

# Module variables
cat &gt; modules/compute/aws/variables.tf &lt;&lt;EOF
variable &quot;instance_count&quot; {
  description = &quot;Number of instances to create&quot;
  type        = number
  default     = 1
}

variable &quot;instance_type&quot; {
  description = &quot;AWS instance type&quot;
  type        = string
  default     = &quot;t3.micro&quot;
}

variable &quot;disk_size&quot; {
  description = &quot;Root disk size in GB&quot;
  type        = number
  default     = 20
}

variable &quot;name_prefix&quot; {
  description = &quot;Name prefix for resources&quot;
  type        = string
}

variable &quot;vpc_id&quot; {
  description = &quot;VPC ID&quot;
  type        = string
}

variable &quot;subnet_id&quot; {
  description = &quot;Subnet ID for instances&quot;
  type        = string
}

variable &quot;vpc_cidr&quot; {
  description = &quot;VPC CIDR block&quot;
  type        = string
}

variable &quot;ssh_public_key&quot; {
  description = &quot;SSH public key&quot;
  type        = string
}

variable &quot;common_tags&quot; {
  description = &quot;Common tags for all resources&quot;
  type        = map(string)
  default     = {}
}
EOF

# Module outputs
cat &gt; modules/compute/aws/outputs.tf &lt;&lt;EOF
output &quot;instance_ids&quot; {
  description = &quot;List of instance IDs&quot;
  value       = aws_instance.main[*].id
}

output &quot;instance_ips&quot; {
  description = &quot;List of instance private IP addresses&quot;
  value       = aws_instance.main[*].private_ip
}

output &quot;instance_public_ips&quot; {
  description = &quot;List of instance public IP addresses&quot;
  value       = aws_instance.main[*].public_ip
}

output &quot;security_group_id&quot; {
  description = &quot;Security group ID&quot;
  value       = aws_security_group.main.id
}
EOF</code></pre>
      </div>
    </div>
<h3 id="environment-specific-configurations" class="mobile-header">Environment-Specific Configurations</h3>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash"># Create environment directory structure
mkdir -p environments/{development,staging,production}

# Development environment
cat &gt; environments/development/main.tf &lt;&lt;EOF
# Development Environment Configuration
module &quot;aws_infrastructure&quot; {
  source = &quot;../../modules/infrastructure/aws&quot;
  
  environment     = &quot;development&quot;
  instance_type   = &quot;t3.micro&quot;
  min_size       = 1
  max_size       = 2
  disk_size      = 20
  
  common_tags = local.common_tags
}

module &quot;azure_infrastructure&quot; {
  source = &quot;../../modules/infrastructure/azure&quot;
  
  environment   = &quot;development&quot;
  vm_size      = &quot;Standard_B1s&quot;
  instance_count = 1
  
  common_tags = local.common_tags
}

locals {
  common_tags = {
    Environment   = &quot;development&quot;
    Project       = var.project_name
    ManagedBy     = &quot;terraform&quot;
    Owner         = var.owner
    CostCenter    = &quot;development&quot;
  }
}
EOF

cat &gt; environments/development/development.tfvars &lt;&lt;EOF
# Development Environment Variables
project_name = &quot;myproject-dev&quot;
environment  = &quot;development&quot;
owner       = &quot;devops-team&quot;

# AWS
aws_region = &quot;us-west-2&quot;
instance_type = {
  aws   = &quot;t3.micro&quot;
  azure = &quot;Standard_B1s&quot; 
  gcp   = &quot;e2-micro&quot;
}

# Networking
vpc_cidr = &quot;10.0.0.0/16&quot;

# Development-specific settings
enable_detailed_monitoring = false
backup_retention_days     = 7
log_retention_days       = 30
EOF

# Production environment
cat &gt; environments/production/main.tf &lt;&lt;EOF
# Production Environment Configuration
module &quot;aws_infrastructure&quot; {
  source = &quot;../../modules/infrastructure/aws&quot;
  
  environment     = &quot;production&quot;
  instance_type   = &quot;t3.large&quot;
  min_size       = 3
  max_size       = 10
  disk_size      = 100
  
  enable_monitoring = true
  backup_enabled   = true
  
  common_tags = local.common_tags
}

module &quot;azure_infrastructure&quot; {
  source = &quot;../../modules/infrastructure/azure&quot;
  
  environment    = &quot;production&quot;
  vm_size       = &quot;Standard_D2s_v3&quot;
  instance_count = 3
  
  enable_backup = true
  
  common_tags = local.common_tags
}

module &quot;gcp_infrastructure&quot; {
  source = &quot;../../modules/infrastructure/gcp&quot;
  
  environment    = &quot;production&quot;
  machine_type  = &quot;e2-standard-2&quot;
  instance_count = 3
  
  enable_backup = true
  
  common_tags = local.common_tags
}

locals {
  common_tags = {
    Environment   = &quot;production&quot;
    Project       = var.project_name
    ManagedBy     = &quot;terraform&quot;
    Owner         = var.owner
    CostCenter    = &quot;production&quot;
    Compliance    = &quot;SOC2&quot;
  }
}
EOF</code></pre>
      </div>
    </div>
<h2 id="security-scanning-and-compliance" class="mobile-header">Security Scanning and Compliance</h2>
<h3 id="pre-commit-hooks" class="mobile-header">Pre-commit Hooks</h3>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash"># Install pre-commit
pip3 install pre-commit

# Create .pre-commit-config.yaml
cat &gt; .pre-commit-config.yaml &lt;&lt;EOF
repos:
- repo: https://github.com/antonbabenko/pre-commit-terraform
  rev: v1.83.5
  hooks:
    - id: terraform_fmt
    - id: terraform_validate
    - id: terraform_docs
    - id: terraform_tflint
      args:
        - --args=--config=__GIT_WORKING_DIR__/.tflint.hcl
    - id: terraform_checkov
      args:
        - --args=--config-file __GIT_WORKING_DIR__/.checkov.yaml
    - id: terraform_trivy

- repo: https://github.com/pre-commit/pre-commit-hooks
  rev: v4.4.0
  hooks:
    - id: trailing-whitespace
    - id: end-of-file-fixer
    - id: check-yaml
    - id: check-added-large-files
    - id: check-merge-conflict
EOF

# Install pre-commit hooks
pre-commit install

# Create security scanning configuration
cat &gt; .checkov.yaml &lt;&lt;EOF
framework:
  - terraform
  - secrets

check:
  - CKV_AWS_79  # Ensure Instance Metadata Service Version 1 is not enabled
  - CKV_AWS_8   # Ensure all data stored in the Launch configuration EBS is securely encrypted at rest
  - CKV_AWS_3   # Ensure all data stored in the Launch configuration EBS is securely encrypted at rest

skip-check:
  - CKV_AWS_79  # Skip if IMDSv1 is required for legacy applications

output: cli
quiet: false
compact: false
EOF

# TFLint configuration
cat &gt; .tflint.hcl &lt;&lt;EOF
plugin &quot;aws&quot; {
    enabled = true
    version = &quot;0.21.2&quot;
    source  = &quot;github.com/terraform-linters/tflint-ruleset-aws&quot;
}

plugin &quot;azurerm&quot; {
    enabled = true
    version = &quot;0.21.0&quot;
    source  = &quot;github.com/terraform-linters/tflint-ruleset-azurerm&quot;
}

plugin &quot;google&quot; {
    enabled = true
    version = &quot;0.21.0&quot;
    source  = &quot;github.com/terraform-linters/tflint-ruleset-google&quot;
}

rule &quot;aws_instance_invalid_type&quot; {
  enabled = true
}

rule &quot;aws_instance_previous_type&quot; {
  enabled = true
}

rule &quot;terraform_unused_declarations&quot; {
  enabled = true
}

rule &quot;terraform_naming_convention&quot; {
  enabled = true
  format  = &quot;snake_case&quot;
}
EOF</code></pre>
      </div>
    </div>
<h2 id="terraform-workspace-management" class="mobile-header">Terraform Workspace Management</h2>
<h3 id="multi-environment-workflows" class="mobile-header">Multi-Environment Workflows</h3>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash"># Create and manage workspaces
terraform workspace new development
terraform workspace new staging
terraform workspace new production

# List workspaces
terraform workspace list

# Switch workspace
terraform workspace select production

# Show current workspace
terraform workspace show

# Workspace-specific configurations
cat &gt; workspace-vars.tf &lt;&lt;EOF
locals {
  workspace_config = {
    development = {
      instance_type = &quot;t3.micro&quot;
      min_size     = 1
      max_size     = 2
      environment  = &quot;dev&quot;
    }
    staging = {
      instance_type = &quot;t3.small&quot;
      min_size     = 2
      max_size     = 4
      environment  = &quot;staging&quot;
    }
    production = {
      instance_type = &quot;t3.large&quot;
      min_size     = 3
      max_size     = 10
      environment  = &quot;prod&quot;
    }
  }
  
  current_config = local.workspace_config[terraform.workspace]
}

# Use workspace-specific configuration
resource &quot;aws_instance&quot; &quot;web&quot; {
  count         = local.current_config.min_size
  instance_type = local.current_config.instance_type
  
  tags = {
    Name        = &quot;\${local.current_config.environment}-web-\${count.index + 1}&quot;
    Environment = local.current_config.environment
    Workspace   = terraform.workspace
  }
}
EOF</code></pre>
      </div>
    </div>
<h3 id="state-management-best-practices" class="mobile-header">State Management Best Practices</h3>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash"># Remote state configuration with different backends
cat &gt; backend-configs/s3.conf &lt;&lt;EOF
bucket         = &quot;terraform-state-bucket&quot;
key            = &quot;infrastructure/terraform.tfstate&quot;
region         = &quot;us-west-2&quot;
encrypt        = true
kms_key_id     = &quot;arn:aws:kms:us-west-2:ACCOUNT:key/KEY-ID&quot;
dynamodb_table = &quot;terraform-state-lock&quot;
EOF

cat &gt; backend-configs/azurerm.conf &lt;&lt;EOF
resource_group_name  = &quot;terraform-state-rg&quot;
storage_account_name = &quot;terraformstatestorage&quot;
container_name      = &quot;tfstate&quot;
key                 = &quot;infrastructure.terraform.tfstate&quot;
EOF

cat &gt; backend-configs/gcs.conf &lt;&lt;EOF
bucket  = &quot;terraform-state-bucket&quot;
prefix  = &quot;infrastructure/state&quot;
EOF

# Initialize with specific backend
terraform init -backend-config=backend-configs/s3.conf

# Import existing resources
terraform import aws_instance.web i-1234567890abcdef0
terraform import azurerm_virtual_machine.main /subscriptions/.../resourceGroups/.../providers/Microsoft.Compute/virtualMachines/vm-name

# State manipulation commands
terraform state list
terraform state show aws_instance.web
terraform state mv aws_instance.web aws_instance.web_server
terraform state rm aws_instance.old</code></pre>
      </div>
    </div>
<h2 id="security-hardening" class="mobile-header">Security Hardening</h2>
<h3 id="credential-management" class="mobile-header">Credential Management</h3>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash"># Use environment variables for credentials (never hardcode)
cat &gt; .env.example &lt;&lt;EOF
# AWS
AWS_ACCESS_KEY_ID=your_access_key
AWS_SECRET_ACCESS_KEY=your_secret_key
AWS_DEFAULT_REGION=us-west-2

# Azure
ARM_CLIENT_ID=your_client_id
ARM_CLIENT_SECRET=your_client_secret
ARM_SUBSCRIPTION_ID=your_subscription_id
ARM_TENANT_ID=your_tenant_id

# GCP
GOOGLE_APPLICATION_CREDENTIALS=/path/to/service-account-key.json
GOOGLE_PROJECT=your_project_id
GOOGLE_REGION=us-central1

# Terraform Cloud/Enterprise
TF_CLOUD_TOKEN=your_terraform_cloud_token
EOF

# Use IAM roles instead of access keys (AWS)
cat &gt; iam-role.tf &lt;&lt;EOF
# IAM role for Terraform execution (when running on EC2)
resource &quot;aws_iam_role&quot; &quot;terraform_execution&quot; {
  name = &quot;TerraformExecutionRole&quot;

  assume_role_policy = jsonencode({
    Version = &quot;2012-10-17&quot;
    Statement = [
      {
        Action = &quot;sts:AssumeRole&quot;
        Effect = &quot;Allow&quot;
        Principal = {
          Service = &quot;ec2.amazonaws.com&quot;
        }
      },
    ]
  })
}

# Attach policies with least privilege
resource &quot;aws_iam_role_policy&quot; &quot;terraform_execution&quot; {
  name = &quot;TerraformExecutionPolicy&quot;
  role = aws_iam_role.terraform_execution.id

  policy = jsonencode({
    Version = &quot;2012-10-17&quot;
    Statement = [
      {
        Effect = &quot;Allow&quot;
        Action = [
          &quot;ec2:*&quot;,
          &quot;vpc:*&quot;,
          &quot;iam:PassRole&quot;,
          &quot;s3:GetObject&quot;,
          &quot;s3:PutObject&quot;
        ]
        Resource = &quot;*&quot;
      }
    ]
  })
}
EOF</code></pre>
      </div>
    </div>
<h3 id="policy-as-code" class="mobile-header">Policy as Code</h3>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash"># OPA (Open Policy Agent) integration
cat &gt; policy/security.rego &lt;&lt;EOF
package terraform.security

# Deny instances without encryption
deny[reason] {
    resource := input.resource_changes[_]
    resource.type == &quot;aws_instance&quot;
    resource.change.after.root_block_device[_].encrypted == false
    reason := &quot;AWS instances must have encrypted root volumes&quot;
}

# Deny public S3 buckets
deny[reason] {
    resource := input.resource_changes[_]
    resource.type == &quot;aws_s3_bucket_public_access_block&quot;
    resource.change.after.block_public_acls == false
    reason := &quot;S3 buckets must block public access&quot;
}

# Require specific instance types in production
deny[reason] {
    resource := input.resource_changes[_]
    resource.type == &quot;aws_instance&quot;
    instance_type := resource.change.after.instance_type
    not startswith(instance_type, &quot;t3.&quot;)
    not startswith(instance_type, &quot;m5.&quot;)
    workspace := input.terraform_version.workspace
    workspace == &quot;production&quot;
    reason := &quot;Production instances must use approved instance types&quot;
}
EOF

# Conftest for policy validation
# Install conftest
CONFTEST_VERSION=&quot;0.46.0&quot;
wget https://github.com/open-policy-agent/conftest/releases/download/v${CONFTEST_VERSION}/conftest_${CONFTEST_VERSION}_Linux_x86_64.tar.gz
tar xzf conftest_${CONFTEST_VERSION}_Linux_x86_64.tar.gz
sudo mv conftest /usr/local/bin/

# Validate Terraform plan against policies
terraform plan -out=tfplan
terraform show -json tfplan &gt; tfplan.json
conftest test tfplan.json --policy policy/</code></pre>
      </div>
    </div>
<h3 id="compliance-and-governance" class="mobile-header">Compliance and Governance</h3>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash"># Sentinel policy example (Terraform Cloud/Enterprise)
cat &gt; sentinel/require-encryption.sentinel &lt;&lt;EOF
import &quot;tfplan/v2&quot; as tfplan
import &quot;strings&quot;

# Main rule
main = rule {
    all tfplan.resource_changes as _, changes {
        changes.type is &quot;aws_instance&quot; implies
            changes.change.after.root_block_device[0].encrypted is true
    }
}

# Helper function
is_encrypted = func(resource) {
    return resource.change.after.root_block_device[0].encrypted else false
}
EOF

# Cost estimation with Infracost
# Install Infracost
curl -fsSL https://raw.githubusercontent.com/infracost/infracost/master/scripts/install.sh | sh

# Configure Infracost
infracost auth login

# Generate cost estimate
infracost breakdown --path .
infracost diff --path . --compare-to main</code></pre>
      </div>
    </div>
<h2 id="disaster-recovery-and-business-continuity" class="mobile-header">Disaster Recovery and Business Continuity</h2>
<h3 id="multi-region-deployment" class="mobile-header">Multi-Region Deployment</h3>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash">cat &gt; multi-region.tf &lt;&lt;EOF
# Multi-region deployment with disaster recovery
module &quot;primary_region&quot; {
  source = &quot;./modules/infrastructure&quot;
  
  providers = {
    aws = aws.us-west-2
  }
  
  environment = var.environment
  region     = &quot;us-west-2&quot;
  is_primary = true
  
  # Primary region configuration
  instance_count    = var.primary_instance_count
  database_backup  = true
  cross_region_backup = true
}

module &quot;disaster_recovery_region&quot; {
  source = &quot;./modules/infrastructure&quot;
  
  providers = {
    aws = aws.us-east-1
  }
  
  environment = var.environment
  region     = &quot;us-east-1&quot;
  is_primary = false
  
  # DR region configuration
  instance_count = var.dr_instance_count
  database_mode = &quot;read_replica&quot;
  
  # Dependency on primary region
  depends_on = [module.primary_region]
}

# Provider configurations for multiple regions
provider &quot;aws&quot; {
  alias  = &quot;us-west-2&quot;
  region = &quot;us-west-2&quot;
}

provider &quot;aws&quot; {
  alias  = &quot;us-east-1&quot;
  region = &quot;us-east-1&quot;
}

# Cross-region replication
resource &quot;aws_s3_bucket_replication_configuration&quot; &quot;main&quot; {
  role   = aws_iam_role.replication.arn
  bucket = module.primary_region.s3_bucket_id

  rule {
    id     = &quot;replicate-everything&quot;
    status = &quot;Enabled&quot;

    destination {
      bucket        = module.disaster_recovery_region.s3_bucket_arn
      storage_class = &quot;STANDARD_IA&quot;
    }
  }

  depends_on = [aws_s3_bucket_versioning.main]
}
EOF</code></pre>
      </div>
    </div>
<h3 id="backup-and-recovery-automation" class="mobile-header">Backup and Recovery Automation</h3>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash"># Automated backup script for Terraform state and configurations
sudo tee /usr/local/bin/terraform-backup.sh &gt; /dev/null &lt;&lt;&#039;EOF&#039;
#!/bin/bash
BACKUP_DIR=&quot;/backup/terraform&quot;
DATE=$(date +%Y%m%d_%H%M%S)

mkdir -p ${BACKUP_DIR}/{state,configs,plans}

# Backup Terraform configurations
find /opt/terraform -name &quot;*.tf&quot; -o -name &quot;*.tfvars&quot; | while read tf_file; do
    relative_path=$(echo $tf_file | sed &#039;s|^/opt/terraform/||&#039;)
    mkdir -p ${BACKUP_DIR}/configs/$(dirname $relative_path)
    cp &quot;$tf_file&quot; ${BACKUP_DIR}/configs/$relative_path
done

# Backup state files (if using local backend)
find /opt/terraform -name &quot;terraform.tfstate*&quot; | while read state_file; do
    relative_path=$(echo $state_file | sed &#039;s|^/opt/terraform/||&#039;)
    mkdir -p ${BACKUP_DIR}/state/$(dirname $relative_path)
    cp &quot;$state_file&quot; ${BACKUP_DIR}/state/$relative_path
done

# Backup remote state (if using S3)
aws s3 sync s3://terraform-state-bucket/ ${BACKUP_DIR}/remote-state/

# Create archive
tar -czf ${BACKUP_DIR}/terraform-complete-backup-${DATE}.tar.gz -C ${BACKUP_DIR} configs state remote-state

# Upload to multiple cloud storage
aws s3 cp ${BACKUP_DIR}/terraform-complete-backup-${DATE}.tar.gz s3://terraform-backups/
az storage blob upload --file ${BACKUP_DIR}/terraform-complete-backup-${DATE}.tar.gz --container-name terraform-backups --name terraform-complete-backup-${DATE}.tar.gz
gsutil cp ${BACKUP_DIR}/terraform-complete-backup-${DATE}.tar.gz gs://terraform-backups/

# Keep only last 30 backups
find ${BACKUP_DIR} -name &quot;terraform-complete-backup-*.tar.gz&quot; -mtime +30 -delete

echo &quot;Terraform backup completed: ${DATE}&quot;
EOF

sudo chmod +x /usr/local/bin/terraform-backup.sh

# Schedule daily backup
echo &quot;0 1 * * * root /usr/local/bin/terraform-backup.sh&quot; | sudo tee -a /etc/crontab</code></pre>
      </div>
    </div>
<h2 id="verification-and-testing" class="mobile-header">Verification and Testing</h2>
<h3 id="comprehensive-testing" class="mobile-header">Comprehensive Testing</h3>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash"># Test Terraform configuration
terraform fmt -check -recursive
terraform validate

# Test across all environments
for env in development staging production; do
    echo &quot;Testing $env environment...&quot;
    cd environments/$env
    terraform init
    terraform validate
    terraform plan -var-file=&quot;$env.tfvars&quot;
    cd ../..
done

# Security scanning
checkov --framework terraform --directory .
terrascan scan -t aws
trivy config .

# Cost estimation
infracost breakdown --path .

# Compliance checking
terraform-compliance -p . -f compliance-tests/

# Integration testing with Terratest (Go)
cat &gt; test/integration_test.go &lt;&lt;EOF
package test

import (
    &quot;testing&quot;
    &quot;github.com/gruntwork-io/terratest/modules/terraform&quot;
    &quot;github.com/stretchr/testify/assert&quot;
)

func TestTerraformAWSExample(t *testing.T) {
    terraformOptions := &amp;terraform.Options{
        TerraformDir: &quot;../environments/development&quot;,
        VarFiles:     []string{&quot;development.tfvars&quot;},
    }

    defer terraform.Destroy(t, terraformOptions)
    terraform.InitAndApply(t, terraformOptions)

    # Test that resources were created
    instanceID := terraform.Output(t, terraformOptions, &quot;instance_id&quot;)
    assert.NotEmpty(t, instanceID)
}
EOF</code></pre>
      </div>
    </div>
<h3 id="performance-and-monitoring" class="mobile-header">Performance and Monitoring</h3>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash"># Monitor Terraform execution
terraform apply -parallelism=10

# Profile Terraform execution
TF_LOG=DEBUG terraform apply

# State file analysis
terraform state list
terraform show

# Resource drift detection
terraform plan -refresh-only

# Dependency graphing
terraform graph | dot -Tsvg &gt; graph.svg

# Resource import verification
terraform plan -generate-config-out=generated.tf</code></pre>
      </div>
    </div>
<h2 id="advanced-use-cases" class="mobile-header">Advanced Use Cases</h2>
<h3 id="multi-cloud-kubernetes-deployment" class="mobile-header">Multi-Cloud Kubernetes Deployment</h3>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash">cat &gt; multi-cloud-k8s.tf &lt;&lt;EOF
# EKS Cluster (AWS)
module &quot;aws_eks&quot; {
  source = &quot;terraform-aws-modules/eks/aws&quot;
  version = &quot;~&gt; 19.0&quot;

  cluster_name    = &quot;\${var.project_name}-eks-\${var.environment}&quot;
  cluster_version = &quot;1.28&quot;

  vpc_id                          = module.aws_vpc.vpc_id
  subnet_ids                      = module.aws_vpc.private_subnets
  cluster_endpoint_public_access  = false
  cluster_endpoint_private_access = true

  eks_managed_node_groups = {
    main = {
      min_size     = 1
      max_size     = 5
      desired_size = 3

      instance_types = [&quot;t3.medium&quot;]
      capacity_type  = &quot;ON_DEMAND&quot;
      
      k8s_labels = {
        Environment = var.environment
        NodeGroup   = &quot;main&quot;
      }
    }
  }

  tags = var.common_tags
}

# AKS Cluster (Azure)
resource &quot;azurerm_kubernetes_cluster&quot; &quot;main&quot; {
  name                = &quot;\${var.project_name}-aks-\${var.environment}&quot;
  location            = azurerm_resource_group.main.location
  resource_group_name = azurerm_resource_group.main.name
  dns_prefix          = &quot;\${var.project_name}-aks&quot;

  default_node_pool {
    name       = &quot;default&quot;
    node_count = 3
    vm_size    = &quot;Standard_D2_v2&quot;
    
    upgrade_settings {
      max_surge = &quot;10%&quot;
    }
  }

  identity {
    type = &quot;SystemAssigned&quot;
  }

  network_profile {
    network_plugin = &quot;azure&quot;
    network_policy = &quot;calico&quot;
  }

  tags = var.common_tags
}

# GKE Cluster (GCP)
resource &quot;google_container_cluster&quot; &quot;main&quot; {
  name     = &quot;\${var.project_name}-gke-\${var.environment}&quot;
  location = var.gcp_region
  project  = var.gcp_project_id

  # Remove default node pool
  remove_default_node_pool = true
  initial_node_count       = 1

  network    = google_compute_network.main.name
  subnetwork = google_compute_subnetwork.main.name

  private_cluster_config {
    enable_private_nodes    = true
    enable_private_endpoint = false
    master_ipv4_cidr_block  = &quot;172.16.0.0/28&quot;
  }

  workload_identity_config {
    workload_pool = &quot;\${var.gcp_project_id}.svc.id.goog&quot;
  }
}

resource &quot;google_container_node_pool&quot; &quot;main&quot; {
  name       = &quot;main&quot;
  location   = var.gcp_region
  cluster    = google_container_cluster.main.name
  node_count = 1
  project    = var.gcp_project_id

  autoscaling {
    min_node_count = 1
    max_node_count = 5
  }

  node_config {
    preemptible  = false
    machine_type = &quot;e2-medium&quot;

    oauth_scopes = [
      &quot;https://www.googleapis.com/auth/cloud-platform&quot;
    ]

    workload_metadata_config {
      mode = &quot;GKE_METADATA&quot;
    }
  }
}
EOF</code></pre>
      </div>
    </div>
<h3 id="infrastructure-monitoring-with-terraform" class="mobile-header">Infrastructure Monitoring with Terraform</h3>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash">cat &gt; monitoring.tf &lt;&lt;EOF
# CloudWatch alarms (AWS)
resource &quot;aws_cloudwatch_metric_alarm&quot; &quot;high_cpu&quot; {
  for_each = toset(module.aws_infrastructure.instance_ids)
  
  alarm_name          = &quot;high-cpu-\${each.key}&quot;
  comparison_operator = &quot;GreaterThanThreshold&quot;
  evaluation_periods  = &quot;2&quot;
  metric_name        = &quot;CPUUtilization&quot;
  namespace          = &quot;AWS/EC2&quot;
  period             = &quot;300&quot;
  statistic          = &quot;Average&quot;
  threshold          = &quot;80&quot;
  alarm_description  = &quot;This metric monitors ec2 cpu utilization&quot;

  dimensions = {
    InstanceId = each.value
  }

  alarm_actions = [aws_sns_topic.alerts.arn]
}

# Azure Monitor alerts
resource &quot;azurerm_monitor_metric_alert&quot; &quot;cpu_alert&quot; {
  name                = &quot;cpu-alert&quot;
  resource_group_name = azurerm_resource_group.main.name
  scopes              = [azurerm_virtual_machine.main.id]

  criteria {
    metric_namespace = &quot;Microsoft.Compute/virtualMachines&quot;
    metric_name      = &quot;Percentage CPU&quot;
    aggregation      = &quot;Average&quot;
    operator         = &quot;GreaterThan&quot;
    threshold        = 80
  }

  action {
    action_group_id = azurerm_monitor_action_group.main.id
  }
}

# GCP monitoring policy
resource &quot;google_monitoring_alert_policy&quot; &quot;cpu_usage&quot; {
  display_name = &quot;CPU Usage Alert&quot;
  combiner     = &quot;OR&quot;
  project      = var.gcp_project_id

  conditions {
    display_name = &quot;CPU usage condition&quot;

    condition_threshold {
      filter         = &quot;resource.type=\&quot;gce_instance\&quot;&quot;
      duration       = &quot;300s&quot;
      comparison     = &quot;COMPARISON_GREATER_THAN&quot;
      threshold_value = 0.8

      aggregations {
        alignment_period   = &quot;300s&quot;
        per_series_aligner = &quot;ALIGN_RATE&quot;
      }
    }
  }

  alert_strategy {
    notification_rate_limit {
      period = &quot;300s&quot;
    }
    auto_close = &quot;1800s&quot;
  }

  notification_channels = [google_monitoring_notification_channel.email.name]
}
EOF</code></pre>
      </div>
    </div>
<h2 id="troubleshooting" class="mobile-header">Troubleshooting</h2>
<h3 id="common-issues-and-solutions" class="mobile-header">Common Issues and Solutions</h3>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash"># Check Terraform configuration
terraform fmt -check -diff
terraform validate

# Debug Terraform execution
TF_LOG=DEBUG terraform apply
TF_LOG=TRACE terraform apply

# State file issues
terraform state list
terraform state show resource_name

# Provider authentication issues
terraform init -upgrade
terraform providers

# Lock issues
terraform force-unlock LOCK_ID

# Refresh state from real infrastructure
terraform refresh

# Import existing resources
terraform import aws_instance.example i-1234567890abcdef0

# Validate provider configurations
# AWS
aws sts get-caller-identity

# Azure
az account show

# GCP
gcloud auth list
gcloud config get-value project

# Check resource quotas
aws service-quotas get-service-quota --service-code ec2 --quota-code L-1216C47A
az vm list-usage --location &quot;East US&quot;
gcloud compute project-info describe --project=$PROJECT_ID

# Plan file analysis
terraform show tfplan
terraform show -json tfplan | jq &#039;.resource_changes[] | {type: .type, name: .name, action: .change.actions}&#039;</code></pre>
      </div>
    </div>
<h3 id="advanced-debugging" class="mobile-header">Advanced Debugging</h3>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash"># Provider debug logging
TF_LOG_PROVIDER=DEBUG terraform apply

# Crash log analysis
cat crash.log

# Performance profiling
terraform apply -parallelism=1  # Sequential execution for debugging

# Resource graph visualization
terraform graph -type=plan | dot -Tpng &gt; plan.png

# State manipulation for recovery
terraform state rm problematic_resource
terraform import resource_type.name resource_id

# Force resource recreation
terraform taint resource_type.name
terraform apply

# Workspace state recovery
terraform workspace select production
terraform state pull &gt; production.tfstate.backup</code></pre>
      </div>
    </div>
<h2 id="additional-resources" class="mobile-header">Additional Resources</h2>
<li class="mobile-list-item"><a href="https://developer.hashicorp.com/terraform/docs" target="_blank" rel="noopener" class="mobile-link">Official Documentation</a></li>
<li class="mobile-list-item"><a href="https://registry.terraform.io/" target="_blank" rel="noopener" class="mobile-link">Terraform Registry</a></li>
<li class="mobile-list-item"><a href="https://developer.hashicorp.com/terraform/cloud-docs/recommended-practices" target="_blank" rel="noopener" class="mobile-link">Multi-Cloud Best Practices</a></li>
<li class="mobile-list-item"><a href="https://developer.hashicorp.com/terraform/language/values/sensitive" target="_blank" rel="noopener" class="mobile-link">Security Best Practices</a></li>
<li class="mobile-list-item"><a href="https://registry.terraform.io/providers/hashicorp/aws/latest/docs" target="_blank" rel="noopener" class="mobile-link">AWS Provider Documentation</a></li>
<li class="mobile-list-item"><a href="https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs" target="_blank" rel="noopener" class="mobile-link">Azure Provider Documentation</a></li>
<li class="mobile-list-item"><a href="https://registry.terraform.io/providers/hashicorp/google/latest/docs" target="_blank" rel="noopener" class="mobile-link">GCP Provider Documentation</a></li>
<p class="mobile-paragraph">---</p>
<p class="mobile-paragraph"><strong>Note:</strong> This guide is part of the <a href="https://howtomgr.github.io" target="_blank" rel="noopener" class="mobile-link">HowToMgr</a> collection.</p></div></article><section class="jsx-8a7f0cdcf94f52ce related-section"><h2 class="jsx-8a7f0cdcf94f52ce section-title">Related <!-- -->Infrastructure<!-- --> Guides</h2><div class="jsx-8a7f0cdcf94f52ce mobile-grid"><a class="mobile-card" href="/infrastructure/adguard-home/"><div class="jsx-8a7f0cdcf94f52ce mobile-card-header"><h3 class="jsx-8a7f0cdcf94f52ce mobile-card-title">Adguard Home</h3><p class="jsx-8a7f0cdcf94f52ce mobile-card-description">Repo for adguard-home</p></div><div class="jsx-8a7f0cdcf94f52ce mobile-card-meta"><span class="jsx-8a7f0cdcf94f52ce mobile-badge mobile-badge-info">1 min</span></div></a><a class="mobile-card" href="/infrastructure/adminer/"><div class="jsx-8a7f0cdcf94f52ce mobile-card-header"><h3 class="jsx-8a7f0cdcf94f52ce mobile-card-title">Adminer</h3><p class="jsx-8a7f0cdcf94f52ce mobile-card-description">Repo for adminer</p></div><div class="jsx-8a7f0cdcf94f52ce mobile-card-meta"><span class="jsx-8a7f0cdcf94f52ce mobile-badge mobile-badge-info">1 min</span></div></a><a class="mobile-card" href="/infrastructure/ansible/"><div class="jsx-8a7f0cdcf94f52ce mobile-card-header"><h3 class="jsx-8a7f0cdcf94f52ce mobile-card-title">Ansible</h3><p class="jsx-8a7f0cdcf94f52ce mobile-card-description">Repo for ansible</p></div><div class="jsx-8a7f0cdcf94f52ce mobile-card-meta"><span class="jsx-8a7f0cdcf94f52ce mobile-badge mobile-badge-info">31 min</span></div></a></div></section><nav class="jsx-8a7f0cdcf94f52ce guide-navigation"><a class="btn btn-secondary" href="/infrastructure/">← All <!-- -->Infrastructure</a><a class="btn btn-secondary" href="/">All Categories</a></nav></div></main><footer class="jsx-745d6189719dfe72 mobile-footer"><div class="jsx-745d6189719dfe72 container"><div class="jsx-745d6189719dfe72 footer-content"><div class="jsx-745d6189719dfe72 footer-links"><a href="/">Home</a><a href="https://github.com/howtomgr" target="_blank" rel="noopener" class="jsx-745d6189719dfe72">GitHub</a><a href="https://github.com/howtomgr/howtomgr.github.io" target="_blank" rel="noopener" class="jsx-745d6189719dfe72">Source</a></div><div class="jsx-745d6189719dfe72 footer-separator"></div><p class="jsx-745d6189719dfe72 footer-text">© <!-- -->2025<!-- --> HowToMgr Organization. Open source installation guides.</p><p class="jsx-745d6189719dfe72 footer-tech">Built with ❤️ using Next.js + GitHub Pages</p><p class="jsx-745d6189719dfe72 footer-disclaimer"><small class="jsx-745d6189719dfe72">All guides are provided as-is. Please review and test before production use.</small></p></div></div></footer></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"guide":{"name":"terraform","displayName":"Terraform","slug":"terraform","description":"Repo for terraform","category":"infrastructure","language":null,"stars":0,"forks":0,"topics":[],"githubUrl":"https://github.com/howtomgr/terraform","updatedAt":"2025-09-14T01:31:13Z","createdAt":"2025-09-08T03:16:51Z","readmeRaw":"# Terraform Installation Guide\n\nInfrastructure as Code (IaC) tool for building, changing, and versioning infrastructure safely and efficiently across multiple cloud providers. Industry standard for multi-cloud infrastructure management.\n\n## Prerequisites\n\n- Linux system (any modern distribution)\n- Root or sudo access\n- Cloud provider account(s) (AWS, Azure, GCP, etc.)\n- Basic understanding of infrastructure concepts\n- 2GB RAM minimum, 4GB+ recommended for large infrastructures\n\n## Installation\n\n### Using Package Manager (Recommended)\n\n#### Ubuntu/Debian\n```bash\n# Add HashiCorp GPG key\nwget -O- https://apt.releases.hashicorp.com/gpg | sudo gpg --dearmor -o /usr/share/keyrings/hashicorp-archive-keyring.gpg\n\n# Add HashiCorp repository\necho \"deb [signed-by=/usr/share/keyrings/hashicorp-archive-keyring.gpg] https://apt.releases.hashicorp.com $(lsb_release -cs) main\" | sudo tee /etc/apt/sources.list.d/hashicorp.list\n\n# Update and install Terraform\nsudo apt update\nsudo apt install -y terraform\n\n# Verify installation\nterraform version\n```\n\n#### RHEL/CentOS/Rocky Linux/AlmaLinux\n```bash\n# Add HashiCorp repository\nsudo yum install -y yum-utils\nsudo yum-config-manager --add-repo https://rpm.releases.hashicorp.com/RHEL/hashicorp.repo\n\n# Install Terraform\nsudo yum install -y terraform\n\n# Verify installation\nterraform version\n```\n\n#### Fedora\n```bash\n# Add HashiCorp repository\nsudo dnf install -y dnf-plugins-core\nsudo dnf config-manager --add-repo https://rpm.releases.hashicorp.com/fedora/hashicorp.repo\n\n# Install Terraform\nsudo dnf install -y terraform\n\n# Verify installation\nterraform version\n```\n\n#### Arch Linux\n```bash\n# Install from AUR\nyay -S terraform\n\n# Or from community repository\nsudo pacman -Syu terraform\n\n# Verify installation\nterraform version\n```\n\n#### Alpine Linux\n```bash\n# Install from Alpine repositories\nsudo apk update\nsudo apk add terraform\n\n# Verify installation\nterraform version\n```\n\n### Manual Binary Installation\n```bash\n# Download latest Terraform\nTERRAFORM_VERSION=\"1.6.4\"\ncd /tmp\nwget https://releases.hashicorp.com/terraform/${TERRAFORM_VERSION}/terraform_${TERRAFORM_VERSION}_linux_amd64.zip\n\n# Install unzip if needed\nsudo apt install -y unzip  # Ubuntu/Debian\nsudo yum install -y unzip  # RHEL/CentOS\nsudo dnf install -y unzip  # Fedora\nsudo pacman -S unzip       # Arch Linux\n\n# Extract and install\nunzip terraform_${TERRAFORM_VERSION}_linux_amd64.zip\nsudo mv terraform /usr/local/bin/\nsudo chmod +x /usr/local/bin/terraform\n\n# Verify installation\nterraform version\n\n# Clean up\nrm terraform_${TERRAFORM_VERSION}_linux_amd64.zip\n```\n\n### Using Docker\n```bash\n# Create alias for Docker-based Terraform\necho 'alias terraform=\"docker run --rm -it -v $(pwd):/workspace -w /workspace hashicorp/terraform:latest\"' \u003e\u003e ~/.bashrc\nsource ~/.bashrc\n\n# Or create comprehensive wrapper script\nsudo tee /usr/local/bin/terraform \u003e /dev/null \u003c\u003c'EOF'\n#!/bin/bash\ndocker run --rm -it \\\n  -v $(pwd):/workspace \\\n  -v ~/.aws:/root/.aws:ro \\\n  -v ~/.azure:/root/.azure:ro \\\n  -v ~/.config/gcloud:/root/.config/gcloud:ro \\\n  -v ~/.kube:/root/.kube:ro \\\n  -v ~/.ssh:/root/.ssh:ro \\\n  -e AWS_PROFILE \\\n  -e AZURE_SUBSCRIPTION_ID \\\n  -e GOOGLE_APPLICATION_CREDENTIALS \\\n  -w /workspace \\\n  hashicorp/terraform:latest \"$@\"\nEOF\nsudo chmod +x /usr/local/bin/terraform\n\n# Test Docker installation\nterraform version\n```\n\n### Using tfenv (Version Manager)\n```bash\n# Install tfenv for managing multiple Terraform versions\ngit clone https://github.com/tfutils/tfenv.git ~/.tfenv\necho 'export PATH=\"$HOME/.tfenv/bin:$PATH\"' \u003e\u003e ~/.bashrc\nsource ~/.bashrc\n\n# Install and use specific Terraform version\ntfenv install 1.6.4\ntfenv use 1.6.4\n\n# List available versions\ntfenv list-remote\ntfenv list\n\n# Auto-install based on .terraform-version file\necho \"1.6.4\" \u003e .terraform-version\ntfenv install\n```\n\n## Multi-Cloud Provider Setup\n\n### AWS Configuration\n```bash\n# Install AWS CLI\ncurl \"https://awscli.amazonaws.com/awscli-exe-linux-x86_64.zip\" -o \"awscliv2.zip\"\nunzip awscliv2.zip\nsudo ./aws/install\n\n# Configure AWS credentials\naws configure\n# AWS Access Key ID: YOUR_ACCESS_KEY\n# AWS Secret Access Key: YOUR_SECRET_KEY  \n# Default region name: us-west-2\n# Default output format: json\n\n# Alternative: Use IAM roles (recommended for EC2)\n# Instance metadata service automatically provides credentials\n\n# Create Terraform AWS configuration\nmkdir -p ~/terraform/multi-cloud\ncd ~/terraform/multi-cloud\n\ncat \u003e providers.tf \u003c\u003cEOF\nterraform {\n  required_version = \"\u003e= 1.5\"\n  required_providers {\n    aws = {\n      source  = \"hashicorp/aws\"\n      version = \"~\u003e 5.0\"\n    }\n    azurerm = {\n      source  = \"hashicorp/azurerm\"\n      version = \"~\u003e 3.0\"\n    }\n    google = {\n      source  = \"hashicorp/google\"\n      version = \"~\u003e 5.0\"\n    }\n  }\n  \n  # Remote state configuration\n  backend \"s3\" {\n    bucket = \"your-terraform-state-bucket\"\n    key    = \"multi-cloud/terraform.tfstate\"\n    region = \"us-west-2\"\n    \n    # State locking with DynamoDB\n    dynamodb_table = \"terraform-state-lock\"\n    encrypt        = true\n  }\n}\n\n# AWS Provider\nprovider \"aws\" {\n  region = var.aws_region\n  \n  default_tags {\n    tags = {\n      Environment   = var.environment\n      ManagedBy     = \"terraform\"\n      Project       = var.project_name\n      Owner         = var.owner\n    }\n  }\n}\n\n# Azure Provider\nprovider \"azurerm\" {\n  features {\n    resource_group {\n      prevent_deletion_if_contains_resources = false\n    }\n    key_vault {\n      purge_soft_delete_on_destroy = true\n    }\n  }\n}\n\n# Google Cloud Provider\nprovider \"google\" {\n  project = var.gcp_project_id\n  region  = var.gcp_region\n  zone    = var.gcp_zone\n}\nEOF\n```\n\n### Azure Configuration\n```bash\n# Install Azure CLI\ncurl -sL https://aka.ms/InstallAzureCLIDeb | sudo bash\n\n# Login to Azure\naz login\n\n# Create service principal for Terraform\naz ad sp create-for-rbac \\\n  --name \"terraform-sp\" \\\n  --role=\"Contributor\" \\\n  --scopes=\"/subscriptions/YOUR_SUBSCRIPTION_ID\"\n\n# Set environment variables (add to ~/.bashrc)\ncat \u003e\u003e ~/.bashrc \u003c\u003cEOF\n# Azure Terraform Authentication\nexport ARM_CLIENT_ID=\"your-client-id\"\nexport ARM_CLIENT_SECRET=\"your-client-secret\"\nexport ARM_SUBSCRIPTION_ID=\"your-subscription-id\"\nexport ARM_TENANT_ID=\"your-tenant-id\"\nEOF\n\nsource ~/.bashrc\n\n# Create Azure Terraform configuration\ncat \u003e azure-main.tf \u003c\u003cEOF\n# Resource Group\nresource \"azurerm_resource_group\" \"main\" {\n  name     = \"\\${var.environment}-rg\"\n  location = var.azure_location\n  \n  tags = {\n    Environment = var.environment\n    ManagedBy   = \"terraform\"\n  }\n}\n\n# Virtual Network\nresource \"azurerm_virtual_network\" \"main\" {\n  name                = \"\\${var.environment}-vnet\"\n  address_space       = [\"10.1.0.0/16\"]\n  location            = azurerm_resource_group.main.location\n  resource_group_name = azurerm_resource_group.main.name\n\n  tags = {\n    Environment = var.environment\n  }\n}\n\n# Subnet\nresource \"azurerm_subnet\" \"internal\" {\n  name                 = \"internal\"\n  resource_group_name  = azurerm_resource_group.main.name\n  virtual_network_name = azurerm_virtual_network.main.name\n  address_prefixes     = [\"10.1.2.0/24\"]\n}\n\n# Network Security Group\nresource \"azurerm_network_security_group\" \"main\" {\n  name                = \"\\${var.environment}-nsg\"\n  location            = azurerm_resource_group.main.location\n  resource_group_name = azurerm_resource_group.main.name\n\n  security_rule {\n    name                       = \"SSH\"\n    priority                   = 1001\n    direction                  = \"Inbound\"\n    access                     = \"Allow\"\n    protocol                   = \"Tcp\"\n    source_port_range          = \"*\"\n    destination_port_range     = \"22\"\n    source_address_prefix      = \"*\"\n    destination_address_prefix = \"*\"\n  }\n\n  security_rule {\n    name                       = \"HTTP\"\n    priority                   = 1002\n    direction                  = \"Inbound\"\n    access                     = \"Allow\"\n    protocol                   = \"Tcp\"\n    source_port_range          = \"*\"\n    destination_port_range     = \"80\"\n    source_address_prefix      = \"*\"\n    destination_address_prefix = \"*\"\n  }\n\n  security_rule {\n    name                       = \"HTTPS\"\n    priority                   = 1003\n    direction                  = \"Inbound\"\n    access                     = \"Allow\"\n    protocol                   = \"Tcp\"\n    source_port_range          = \"*\"\n    destination_port_range     = \"443\"\n    source_address_prefix      = \"*\"\n    destination_address_prefix = \"*\"\n  }\n}\nEOF\n```\n\n### Google Cloud Configuration\n```bash\n# Install Google Cloud SDK\necho \"deb [signed-by=/usr/share/keyrings/cloud.google.gpg] https://packages.cloud.google.com/apt cloud-sdk main\" | sudo tee -a /etc/apt/sources.list.d/google-cloud-sdk.list\ncurl https://packages.cloud.google.com/apt/doc/apt-key.gpg | sudo apt-key --keyring /usr/share/keyrings/cloud.google.gpg add -\nsudo apt-get update \u0026\u0026 sudo apt-get install -y google-cloud-cli\n\n# Authenticate\ngcloud auth login\ngcloud config set project YOUR_PROJECT_ID\n\n# Create service account for Terraform\ngcloud iam service-accounts create terraform \\\n  --display-name=\"Terraform Service Account\"\n\ngcloud projects add-iam-policy-binding YOUR_PROJECT_ID \\\n  --member=\"serviceAccount:terraform@YOUR_PROJECT_ID.iam.gserviceaccount.com\" \\\n  --role=\"roles/editor\"\n\ngcloud iam service-accounts keys create ~/gcp-terraform-key.json \\\n  --iam-account=terraform@YOUR_PROJECT_ID.iam.gserviceaccount.com\n\n# Set environment variable\nexport GOOGLE_APPLICATION_CREDENTIALS=\"$HOME/gcp-terraform-key.json\"\necho 'export GOOGLE_APPLICATION_CREDENTIALS=\"$HOME/gcp-terraform-key.json\"' \u003e\u003e ~/.bashrc\n\n# Create GCP Terraform configuration\ncat \u003e gcp-main.tf \u003c\u003cEOF\n# VPC Network\nresource \"google_compute_network\" \"main\" {\n  name                    = \"\\${var.environment}-vpc\"\n  auto_create_subnetworks = false\n  project                 = var.gcp_project_id\n}\n\n# Subnet\nresource \"google_compute_subnetwork\" \"main\" {\n  name          = \"\\${var.environment}-subnet\"\n  ip_cidr_range = \"10.2.0.0/24\"\n  region        = var.gcp_region\n  network       = google_compute_network.main.id\n  project       = var.gcp_project_id\n}\n\n# Firewall rules\nresource \"google_compute_firewall\" \"allow-ssh\" {\n  name    = \"\\${var.environment}-allow-ssh\"\n  network = google_compute_network.main.name\n  project = var.gcp_project_id\n\n  allow {\n    protocol = \"tcp\"\n    ports    = [\"22\"]\n  }\n\n  source_ranges = [\"0.0.0.0/0\"]\n  target_tags   = [\"ssh-allowed\"]\n}\n\nresource \"google_compute_firewall\" \"allow-http\" {\n  name    = \"\\${var.environment}-allow-http\"\n  network = google_compute_network.main.name\n  project = var.gcp_project_id\n\n  allow {\n    protocol = \"tcp\"\n    ports    = [\"80\", \"443\"]\n  }\n\n  source_ranges = [\"0.0.0.0/0\"]\n  target_tags   = [\"http-server\", \"https-server\"]\n}\nEOF\n```\n\n## Security Best Practices\n\n### Secure State Management\n```bash\n# Create S3 backend with encryption and locking\ncat \u003e backend.tf \u003c\u003cEOF\nterraform {\n  backend \"s3\" {\n    bucket         = \"your-terraform-state-bucket\"\n    key            = \"infrastructure/terraform.tfstate\"\n    region         = \"us-west-2\"\n    encrypt        = true\n    kms_key_id     = \"arn:aws:kms:us-west-2:ACCOUNT:key/KEY-ID\"\n    dynamodb_table = \"terraform-state-lock\"\n    \n    # Additional security\n    skip_region_validation      = false\n    skip_credentials_validation = false\n    skip_metadata_api_check     = false\n  }\n}\n\n# DynamoDB table for state locking\nresource \"aws_dynamodb_table\" \"terraform_state_lock\" {\n  name           = \"terraform-state-lock\"\n  billing_mode   = \"PAY_PER_REQUEST\"\n  hash_key       = \"LockID\"\n\n  attribute {\n    name = \"LockID\"\n    type = \"S\"\n  }\n\n  server_side_encryption {\n    enabled = true\n  }\n\n  point_in_time_recovery {\n    enabled = true\n  }\n\n  tags = {\n    Name        = \"Terraform State Lock Table\"\n    Environment = var.environment\n  }\n}\n\n# S3 bucket for state storage\nresource \"aws_s3_bucket\" \"terraform_state\" {\n  bucket        = \"your-terraform-state-bucket\"\n  force_destroy = false\n\n  tags = {\n    Name        = \"Terraform State Bucket\"\n    Environment = var.environment\n  }\n}\n\nresource \"aws_s3_bucket_encryption_configuration\" \"terraform_state_encryption\" {\n  bucket = aws_s3_bucket.terraform_state.id\n\n  rule {\n    apply_server_side_encryption_by_default {\n      kms_master_key_id = aws_kms_key.terraform_bucket_key.arn\n      sse_algorithm     = \"aws:kms\"\n    }\n  }\n}\n\nresource \"aws_s3_bucket_versioning\" \"terraform_state_versioning\" {\n  bucket = aws_s3_bucket.terraform_state.id\n  versioning_configuration {\n    status = \"Enabled\"\n  }\n}\n\nresource \"aws_s3_bucket_public_access_block\" \"terraform_state\" {\n  bucket = aws_s3_bucket.terraform_state.id\n\n  block_public_acls       = true\n  block_public_policy     = true\n  ignore_public_acls      = true\n  restrict_public_buckets = true\n}\n\n# KMS key for S3 encryption\nresource \"aws_kms_key\" \"terraform_bucket_key\" {\n  description             = \"KMS key for Terraform state bucket encryption\"\n  deletion_window_in_days = 7\n\n  tags = {\n    Name        = \"Terraform State Bucket Key\"\n    Environment = var.environment\n  }\n}\nEOF\n```\n\n### Variables and Secrets Management\n```bash\n# Create variables.tf with proper typing and validation\ncat \u003e variables.tf \u003c\u003cEOF\n# AWS Variables\nvariable \"aws_region\" {\n  description = \"AWS region for resources\"\n  type        = string\n  default     = \"us-west-2\"\n  validation {\n    condition     = can(regex(\"^[a-z]{2}-[a-z]+-[0-9]{1}$\", var.aws_region))\n    error_message = \"AWS region must be a valid region format.\"\n  }\n}\n\nvariable \"aws_availability_zones\" {\n  description = \"List of AWS availability zones\"\n  type        = list(string)\n  default     = [\"us-west-2a\", \"us-west-2b\", \"us-west-2c\"]\n}\n\n# Azure Variables\nvariable \"azure_location\" {\n  description = \"Azure region for resources\"\n  type        = string\n  default     = \"East US\"\n  validation {\n    condition = contains([\n      \"East US\", \"East US 2\", \"West US\", \"West US 2\", \"West US 3\",\n      \"Central US\", \"North Central US\", \"South Central US\", \"West Central US\",\n      \"Canada Central\", \"Canada East\", \"Brazil South\", \"UK South\", \"UK West\",\n      \"West Europe\", \"North Europe\", \"France Central\", \"Germany West Central\",\n      \"Switzerland North\", \"Norway East\", \"UAE North\", \"South Africa North\",\n      \"Australia East\", \"Australia Southeast\", \"Central India\", \"South India\",\n      \"West India\", \"Japan East\", \"Japan West\", \"Korea Central\", \"Korea South\",\n      \"Southeast Asia\", \"East Asia\"\n    ], var.azure_location)\n    error_message = \"Azure location must be a valid Azure region.\"\n  }\n}\n\n# GCP Variables\nvariable \"gcp_project_id\" {\n  description = \"GCP project ID\"\n  type        = string\n  validation {\n    condition     = length(var.gcp_project_id) \u003e 0\n    error_message = \"GCP project ID cannot be empty.\"\n  }\n}\n\nvariable \"gcp_region\" {\n  description = \"GCP region for resources\"\n  type        = string\n  default     = \"us-central1\"\n}\n\nvariable \"gcp_zone\" {\n  description = \"GCP zone for resources\"\n  type        = string\n  default     = \"us-central1-a\"\n}\n\n# Environment Variables\nvariable \"environment\" {\n  description = \"Environment name\"\n  type        = string\n  default     = \"development\"\n  validation {\n    condition     = contains([\"development\", \"staging\", \"production\"], var.environment)\n    error_message = \"Environment must be development, staging, or production.\"\n  }\n}\n\nvariable \"project_name\" {\n  description = \"Project name for resource naming\"\n  type        = string\n  validation {\n    condition     = length(var.project_name) \u003e 0 \u0026\u0026 length(var.project_name) \u003c= 20\n    error_message = \"Project name must be between 1 and 20 characters.\"\n  }\n}\n\nvariable \"owner\" {\n  description = \"Owner of the infrastructure\"\n  type        = string\n}\n\n# Networking Variables\nvariable \"vpc_cidr\" {\n  description = \"CIDR block for VPC\"\n  type        = string\n  default     = \"10.0.0.0/16\"\n  validation {\n    condition     = can(cidrhost(var.vpc_cidr, 0))\n    error_message = \"VPC CIDR must be a valid IPv4 CIDR block.\"\n  }\n}\n\n# Instance Variables\nvariable \"instance_type\" {\n  description = \"Instance types for different clouds\"\n  type = object({\n    aws   = string\n    azure = string\n    gcp   = string\n  })\n  default = {\n    aws   = \"t3.micro\"\n    azure = \"Standard_B1s\"\n    gcp   = \"e2-micro\"\n  }\n}\n\n# Sensitive Variables (use terraform.tfvars or environment variables)\nvariable \"database_password\" {\n  description = \"Database password\"\n  type        = string\n  sensitive   = true\n  validation {\n    condition     = length(var.database_password) \u003e= 12\n    error_message = \"Database password must be at least 12 characters.\"\n  }\n}\n\nvariable \"ssh_public_key\" {\n  description = \"SSH public key for instance access\"\n  type        = string\n  validation {\n    condition     = can(regex(\"^ssh-\", var.ssh_public_key))\n    error_message = \"SSH public key must be a valid SSH public key.\"\n  }\n}\nEOF\n\n# Create terraform.tfvars (never commit to version control)\ncat \u003e terraform.tfvars.example \u003c\u003cEOF\n# Copy to terraform.tfvars and fill in your values\nproject_name     = \"myproject\"\nowner           = \"devops-team\"\nenvironment     = \"production\"\n\n# AWS\naws_region = \"us-west-2\"\n\n# Azure  \nazure_location = \"East US\"\n\n# GCP\ngcp_project_id = \"my-gcp-project-id\"\ngcp_region     = \"us-central1\"\ngcp_zone       = \"us-central1-a\"\n\n# Security\ndatabase_password = \"your-secure-database-password\"\nssh_public_key   = \"ssh-rsa AAAAB3NzaC1yc2E...\"\nEOF\n```\n\n### Secrets Management Integration\n```bash\n# HashiCorp Vault integration\ncat \u003e vault.tf \u003c\u003cEOF\n# Vault provider for secrets management\nterraform {\n  required_providers {\n    vault = {\n      source  = \"hashicorp/vault\"\n      version = \"~\u003e 3.0\"\n    }\n  }\n}\n\nprovider \"vault\" {\n  address = var.vault_address\n  token   = var.vault_token\n}\n\n# Read secrets from Vault\ndata \"vault_generic_secret\" \"database\" {\n  path = \"secret/database\"\n}\n\n# Use secrets in resources\nresource \"aws_db_instance\" \"main\" {\n  identifier_prefix = var.project_name\n  \n  username = data.vault_generic_secret.database.data[\"username\"]\n  password = data.vault_generic_secret.database.data[\"password\"]\n  \n  # Other configuration...\n}\nEOF\n\n# AWS Secrets Manager integration\ncat \u003e aws-secrets.tf \u003c\u003cEOF\n# Retrieve secrets from AWS Secrets Manager\ndata \"aws_secretsmanager_secret_version\" \"database_credentials\" {\n  secret_id = \"prod/database/credentials\"\n}\n\nlocals {\n  database_creds = jsondecode(data.aws_secretsmanager_secret_version.database_credentials.secret_string)\n}\n\nresource \"aws_db_instance\" \"main\" {\n  username = local.database_creds.username\n  password = local.database_creds.password\n  \n  # Other configuration...\n}\nEOF\n```\n\n## Advanced Multi-Cloud Architecture\n\n### Cross-Cloud Networking\n```bash\n# Create multi-cloud VPN connection\ncat \u003e networking.tf \u003c\u003cEOF\n# AWS VPC and VPN Gateway\nresource \"aws_vpc\" \"main\" {\n  cidr_block           = \"10.0.0.0/16\"\n  enable_dns_hostnames = true\n  enable_dns_support   = true\n\n  tags = {\n    Name = \"\\${var.environment}-aws-vpc\"\n  }\n}\n\nresource \"aws_vpn_gateway\" \"main\" {\n  vpc_id = aws_vpc.main.id\n\n  tags = {\n    Name = \"\\${var.environment}-aws-vpn-gw\"\n  }\n}\n\n# Azure Virtual Network Gateway\nresource \"azurerm_virtual_network_gateway\" \"main\" {\n  name                = \"\\${var.environment}-azure-vpn-gw\"\n  location            = azurerm_resource_group.main.location\n  resource_group_name = azurerm_resource_group.main.name\n\n  type     = \"Vpn\"\n  vpn_type = \"RouteBased\"\n\n  active_active = false\n  enable_bgp    = false\n  sku           = \"VpnGw1\"\n\n  ip_configuration {\n    name                          = \"vnetGatewayConfig\"\n    public_ip_address_id          = azurerm_public_ip.vpn_gateway.id\n    private_ip_address_allocation = \"Dynamic\"\n    subnet_id                     = azurerm_subnet.gateway.id\n  }\n}\n\n# GCP VPN Gateway\nresource \"google_compute_vpn_gateway\" \"main\" {\n  name    = \"\\${var.environment}-gcp-vpn-gw\"\n  network = google_compute_network.main.id\n  project = var.gcp_project_id\n  region  = var.gcp_region\n}\n\n# Cross-cloud VPN tunnels\nresource \"aws_vpn_connection\" \"aws_to_azure\" {\n  vpn_gateway_id      = aws_vpn_gateway.main.id\n  customer_gateway_id = aws_customer_gateway.azure.id\n  type                = \"ipsec.1\"\n  static_routes_only  = true\n\n  tags = {\n    Name = \"\\${var.environment}-aws-to-azure-vpn\"\n  }\n}\n\n# Local values for cross-cloud coordination\nlocals {\n  aws_vpc_cidr   = \"10.0.0.0/16\"\n  azure_vnet_cidr = \"10.1.0.0/16\"\n  gcp_vpc_cidr   = \"10.2.0.0/16\"\n  \n  common_tags = {\n    Environment   = var.environment\n    Project       = var.project_name\n    ManagedBy     = \"terraform\"\n    Owner         = var.owner\n    CreatedAt     = timestamp()\n  }\n}\nEOF\n```\n\n### Global Load Balancing\n```bash\n# Multi-cloud global load balancer using Cloudflare\ncat \u003e global-lb.tf \u003c\u003cEOF\nterraform {\n  required_providers {\n    cloudflare = {\n      source  = \"cloudflare/cloudflare\"\n      version = \"~\u003e 4.0\"\n    }\n  }\n}\n\nprovider \"cloudflare\" {\n  api_token = var.cloudflare_api_token\n}\n\n# Cloudflare zone\ndata \"cloudflare_zone\" \"main\" {\n  name = var.domain_name\n}\n\n# AWS ALB DNS record\nresource \"cloudflare_record\" \"aws_lb\" {\n  zone_id = data.cloudflare_zone.main.id\n  name    = \"aws\"\n  value   = aws_lb.main.dns_name\n  type    = \"CNAME\"\n  ttl     = 300\n\n  comment = \"AWS Application Load Balancer\"\n}\n\n# Azure Load Balancer DNS record  \nresource \"cloudflare_record\" \"azure_lb\" {\n  zone_id = data.cloudflare_zone.main.id\n  name    = \"azure\"\n  value   = azurerm_public_ip.lb.fqdn\n  type    = \"CNAME\"\n  ttl     = 300\n\n  comment = \"Azure Load Balancer\"\n}\n\n# GCP Load Balancer DNS record\nresource \"cloudflare_record\" \"gcp_lb\" {\n  zone_id = data.cloudflare_zone.main.id\n  name    = \"gcp\"\n  value   = google_compute_global_address.main.address\n  type    = \"A\"\n  ttl     = 300\n\n  comment = \"GCP Global Load Balancer\"\n}\n\n# Global load balancer with health checks and failover\nresource \"cloudflare_load_balancer\" \"global\" {\n  zone_id = data.cloudflare_zone.main.id\n  name    = \"global-lb\"\n  \n  fallback_pool_id = cloudflare_load_balancer_pool.backup.id\n  default_pool_ids = [\n    cloudflare_load_balancer_pool.primary.id,\n    cloudflare_load_balancer_pool.secondary.id\n  ]\n\n  description = \"Multi-cloud global load balancer\"\n  ttl         = 30\n  proxied     = true\n\n  adaptive_routing {\n    failover_across_pools = true\n  }\n\n  location_strategy {\n    prefer_ecs = \"never\"\n    mode       = \"resolver_ip\"\n  }\n}\n\n# Primary pool (AWS)\nresource \"cloudflare_load_balancer_pool\" \"primary\" {\n  name = \"aws-primary\"\n\n  origins {\n    name    = \"aws-west\"\n    address = aws_lb.main.dns_name\n    enabled = true\n  }\n\n  monitor              = cloudflare_load_balancer_monitor.http.id\n  description          = \"AWS West Coast\"\n  enabled              = true\n  minimum_origins      = 1\n  notification_email   = \"alerts@example.com\"\n}\n\n# Secondary pool (Azure)\nresource \"cloudflare_load_balancer_pool\" \"secondary\" {\n  name = \"azure-secondary\"\n\n  origins {\n    name    = \"azure-east\"\n    address = azurerm_public_ip.lb.ip_address\n    enabled = true\n  }\n\n  monitor         = cloudflare_load_balancer_monitor.http.id\n  description     = \"Azure East Coast\"\n  enabled         = true\n  minimum_origins = 1\n}\n\n# Health monitor\nresource \"cloudflare_load_balancer_monitor\" \"http\" {\n  expected_codes = \"200\"\n  method         = \"GET\"\n  timeout        = 7\n  path           = \"/health\"\n  interval       = 60\n  retries        = 3\n  description    = \"HTTP health check\"\n\n  header {\n    header = \"Host\"\n    values = [\"example.com\"]\n  }\n}\nEOF\n```\n\n## CI/CD Integration\n\n### GitHub Actions Workflow\n```bash\nmkdir -p .github/workflows\ncat \u003e .github/workflows/terraform.yml \u003c\u003cEOF\nname: Terraform Multi-Cloud Deployment\n\non:\n  push:\n    branches: [ main, develop ]\n  pull_request:\n    branches: [ main ]\n\nenv:\n  TF_VERSION: 1.6.4\n\njobs:\n  terraform:\n    runs-on: ubuntu-latest\n    strategy:\n      matrix:\n        environment: [development, staging, production]\n        \n    steps:\n    - name: Checkout code\n      uses: actions/checkout@v4\n    \n    - name: Setup Terraform\n      uses: hashicorp/setup-terraform@v3\n      with:\n        terraform_version: \\${{ env.TF_VERSION }}\n        cli_config_credentials_token: \\${{ secrets.TF_CLOUD_TOKEN }}\n    \n    - name: Configure AWS credentials\n      uses: aws-actions/configure-aws-credentials@v4\n      with:\n        aws-access-key-id: \\${{ secrets.AWS_ACCESS_KEY_ID }}\n        aws-secret-access-key: \\${{ secrets.AWS_SECRET_ACCESS_KEY }}\n        aws-region: us-west-2\n    \n    - name: Configure Azure credentials\n      uses: azure/login@v1\n      with:\n        creds: \\${{ secrets.AZURE_CREDENTIALS }}\n    \n    - name: Configure GCP credentials\n      uses: google-github-actions/setup-gcloud@v1\n      with:\n        service_account_key: \\${{ secrets.GCP_SA_KEY }}\n        project_id: \\${{ secrets.GCP_PROJECT_ID }}\n    \n    - name: Terraform Format Check\n      run: terraform fmt -check -recursive\n    \n    - name: Terraform Initialize\n      run: terraform init\n      working-directory: environments/\\${{ matrix.environment }}\n    \n    - name: Terraform Validate\n      run: terraform validate\n      working-directory: environments/\\${{ matrix.environment }}\n    \n    - name: Terraform Plan\n      run: terraform plan -var-file=\"\\${{ matrix.environment }}.tfvars\"\n      working-directory: environments/\\${{ matrix.environment }}\n    \n    - name: Terraform Apply (Production)\n      if: github.ref == 'refs/heads/main' \u0026\u0026 matrix.environment == 'production'\n      run: terraform apply -auto-approve -var-file=\"production.tfvars\"\n      working-directory: environments/production\n    \n    - name: Terraform Plan Status\n      if: steps.plan.outcome == 'failure'\n      run: exit 1\n    \n    - name: Security Scan with Checkov\n      uses: bridgecrewio/checkov-action@master\n      with:\n        directory: .\n        framework: terraform\n        output_format: sarif\n        output_file_path: checkov.sarif\n    \n    - name: Upload Checkov results to GitHub\n      uses: github/codeql-action/upload-sarif@v2\n      if: always()\n      with:\n        sarif_file: checkov.sarif\nEOF\n```\n\n### GitLab CI Integration\n```bash\ncat \u003e .gitlab-ci.yml \u003c\u003cEOF\nstages:\n  - validate\n  - plan\n  - apply\n  - destroy\n\nvariables:\n  TF_ROOT: \\${CI_PROJECT_DIR}\n  TF_VERSION: \"1.6.4\"\n  TF_IN_AUTOMATION: \"true\"\n\ncache:\n  key: \"\\${TF_ROOT}\"\n  paths:\n    - \\${TF_ROOT}/.terraform\n\nbefore_script:\n  - cd \\${TF_ROOT}\n  - terraform version\n  - terraform init\n\nvalidate:\n  stage: validate\n  script:\n    - terraform fmt -check -recursive\n    - terraform validate\n    - |\n      for dir in environments/*/; do\n        cd \"\\$dir\"\n        terraform validate\n        cd -\n      done\n  rules:\n    - if: '\\$CI_MERGE_REQUEST_IID'\n    - if: '\\$CI_COMMIT_BRANCH == \\$CI_DEFAULT_BRANCH'\n\nplan:development:\n  stage: plan\n  script:\n    - cd environments/development\n    - terraform plan -var-file=\"development.tfvars\" -out=\"development.tfplan\"\n  artifacts:\n    paths:\n      - environments/development/development.tfplan\n    expire_in: 1 week\n  rules:\n    - if: '\\$CI_MERGE_REQUEST_IID'\n    - if: '\\$CI_COMMIT_BRANCH == \"develop\"'\n\nplan:production:\n  stage: plan\n  script:\n    - cd environments/production\n    - terraform plan -var-file=\"production.tfvars\" -out=\"production.tfplan\"\n  artifacts:\n    paths:\n      - environments/production/production.tfplan\n    expire_in: 1 week\n  rules:\n    - if: '\\$CI_COMMIT_BRANCH == \\$CI_DEFAULT_BRANCH'\n\napply:development:\n  stage: apply\n  script:\n    - cd environments/development\n    - terraform apply -input=false \"development.tfplan\"\n  dependencies:\n    - plan:development\n  rules:\n    - if: '\\$CI_COMMIT_BRANCH == \"develop\"'\n      when: manual\n\napply:production:\n  stage: apply\n  script:\n    - cd environments/production\n    - terraform apply -input=false \"production.tfplan\"\n  dependencies:\n    - plan:production\n  rules:\n    - if: '\\$CI_COMMIT_BRANCH == \\$CI_DEFAULT_BRANCH'\n      when: manual\n\ndestroy:\n  stage: destroy\n  script:\n    - terraform destroy -auto-approve -var-file=\"\\${ENVIRONMENT}.tfvars\"\n  rules:\n    - if: '\\$CI_COMMIT_BRANCH'\n      when: manual\n  variables:\n    ENVIRONMENT: \"development\"  # Change as needed\nEOF\n```\n\n## Modules and Best Practices\n\n### Reusable Module Structure\n```bash\n# Create module directory structure\nmkdir -p modules/compute/{aws,azure,gcp}\n\n# AWS Compute Module\ncat \u003e modules/compute/aws/main.tf \u003c\u003cEOF\n# AWS EC2 Instance Module\nresource \"aws_instance\" \"main\" {\n  count                  = var.instance_count\n  ami                    = data.aws_ami.ubuntu.id\n  instance_type          = var.instance_type\n  key_name              = aws_key_pair.main.key_name\n  vpc_security_group_ids = [aws_security_group.main.id]\n  subnet_id             = var.subnet_id\n\n  user_data = templatefile(\"\\${path.module}/user-data.sh\", {\n    hostname = \"\\${var.name_prefix}-\\${count.index + 1}\"\n  })\n\n  root_block_device {\n    volume_type           = \"gp3\"\n    volume_size           = var.disk_size\n    encrypted             = true\n    delete_on_termination = true\n  }\n\n  metadata_options {\n    http_endpoint = \"enabled\"\n    http_tokens   = \"required\"  # IMDSv2 only\n    http_put_response_hop_limit = 1\n  }\n\n  tags = merge(var.common_tags, {\n    Name = \"\\${var.name_prefix}-\\${count.index + 1}\"\n    Type = \"compute\"\n  })\n}\n\n# Security Group\nresource \"aws_security_group\" \"main\" {\n  name_prefix = \"\\${var.name_prefix}-\"\n  vpc_id      = var.vpc_id\n\n  ingress {\n    description = \"SSH\"\n    from_port   = 22\n    to_port     = 22\n    protocol    = \"tcp\"\n    cidr_blocks = [var.vpc_cidr]\n  }\n\n  ingress {\n    description = \"HTTP\"\n    from_port   = 80\n    to_port     = 80\n    protocol    = \"tcp\"\n    cidr_blocks = [\"0.0.0.0/0\"]\n  }\n\n  ingress {\n    description = \"HTTPS\"\n    from_port   = 443\n    to_port     = 443\n    protocol    = \"tcp\"\n    cidr_blocks = [\"0.0.0.0/0\"]\n  }\n\n  egress {\n    from_port   = 0\n    to_port     = 0\n    protocol    = \"-1\"\n    cidr_blocks = [\"0.0.0.0/0\"]\n  }\n\n  tags = var.common_tags\n}\n\n# Key pair\nresource \"aws_key_pair\" \"main\" {\n  key_name   = \"\\${var.name_prefix}-keypair\"\n  public_key = var.ssh_public_key\n\n  tags = var.common_tags\n}\n\n# Data source for latest Ubuntu AMI\ndata \"aws_ami\" \"ubuntu\" {\n  most_recent = true\n  owners      = [\"099720109477\"] # Canonical\n\n  filter {\n    name   = \"name\"\n    values = [\"ubuntu/images/hvm-ssd/ubuntu-jammy-22.04-amd64-server-*\"]\n  }\n\n  filter {\n    name   = \"virtualization-type\"\n    values = [\"hvm\"]\n  }\n}\nEOF\n\n# Module variables\ncat \u003e modules/compute/aws/variables.tf \u003c\u003cEOF\nvariable \"instance_count\" {\n  description = \"Number of instances to create\"\n  type        = number\n  default     = 1\n}\n\nvariable \"instance_type\" {\n  description = \"AWS instance type\"\n  type        = string\n  default     = \"t3.micro\"\n}\n\nvariable \"disk_size\" {\n  description = \"Root disk size in GB\"\n  type        = number\n  default     = 20\n}\n\nvariable \"name_prefix\" {\n  description = \"Name prefix for resources\"\n  type        = string\n}\n\nvariable \"vpc_id\" {\n  description = \"VPC ID\"\n  type        = string\n}\n\nvariable \"subnet_id\" {\n  description = \"Subnet ID for instances\"\n  type        = string\n}\n\nvariable \"vpc_cidr\" {\n  description = \"VPC CIDR block\"\n  type        = string\n}\n\nvariable \"ssh_public_key\" {\n  description = \"SSH public key\"\n  type        = string\n}\n\nvariable \"common_tags\" {\n  description = \"Common tags for all resources\"\n  type        = map(string)\n  default     = {}\n}\nEOF\n\n# Module outputs\ncat \u003e modules/compute/aws/outputs.tf \u003c\u003cEOF\noutput \"instance_ids\" {\n  description = \"List of instance IDs\"\n  value       = aws_instance.main[*].id\n}\n\noutput \"instance_ips\" {\n  description = \"List of instance private IP addresses\"\n  value       = aws_instance.main[*].private_ip\n}\n\noutput \"instance_public_ips\" {\n  description = \"List of instance public IP addresses\"\n  value       = aws_instance.main[*].public_ip\n}\n\noutput \"security_group_id\" {\n  description = \"Security group ID\"\n  value       = aws_security_group.main.id\n}\nEOF\n```\n\n### Environment-Specific Configurations\n```bash\n# Create environment directory structure\nmkdir -p environments/{development,staging,production}\n\n# Development environment\ncat \u003e environments/development/main.tf \u003c\u003cEOF\n# Development Environment Configuration\nmodule \"aws_infrastructure\" {\n  source = \"../../modules/infrastructure/aws\"\n  \n  environment     = \"development\"\n  instance_type   = \"t3.micro\"\n  min_size       = 1\n  max_size       = 2\n  disk_size      = 20\n  \n  common_tags = local.common_tags\n}\n\nmodule \"azure_infrastructure\" {\n  source = \"../../modules/infrastructure/azure\"\n  \n  environment   = \"development\"\n  vm_size      = \"Standard_B1s\"\n  instance_count = 1\n  \n  common_tags = local.common_tags\n}\n\nlocals {\n  common_tags = {\n    Environment   = \"development\"\n    Project       = var.project_name\n    ManagedBy     = \"terraform\"\n    Owner         = var.owner\n    CostCenter    = \"development\"\n  }\n}\nEOF\n\ncat \u003e environments/development/development.tfvars \u003c\u003cEOF\n# Development Environment Variables\nproject_name = \"myproject-dev\"\nenvironment  = \"development\"\nowner       = \"devops-team\"\n\n# AWS\naws_region = \"us-west-2\"\ninstance_type = {\n  aws   = \"t3.micro\"\n  azure = \"Standard_B1s\" \n  gcp   = \"e2-micro\"\n}\n\n# Networking\nvpc_cidr = \"10.0.0.0/16\"\n\n# Development-specific settings\nenable_detailed_monitoring = false\nbackup_retention_days     = 7\nlog_retention_days       = 30\nEOF\n\n# Production environment\ncat \u003e environments/production/main.tf \u003c\u003cEOF\n# Production Environment Configuration\nmodule \"aws_infrastructure\" {\n  source = \"../../modules/infrastructure/aws\"\n  \n  environment     = \"production\"\n  instance_type   = \"t3.large\"\n  min_size       = 3\n  max_size       = 10\n  disk_size      = 100\n  \n  enable_monitoring = true\n  backup_enabled   = true\n  \n  common_tags = local.common_tags\n}\n\nmodule \"azure_infrastructure\" {\n  source = \"../../modules/infrastructure/azure\"\n  \n  environment    = \"production\"\n  vm_size       = \"Standard_D2s_v3\"\n  instance_count = 3\n  \n  enable_backup = true\n  \n  common_tags = local.common_tags\n}\n\nmodule \"gcp_infrastructure\" {\n  source = \"../../modules/infrastructure/gcp\"\n  \n  environment    = \"production\"\n  machine_type  = \"e2-standard-2\"\n  instance_count = 3\n  \n  enable_backup = true\n  \n  common_tags = local.common_tags\n}\n\nlocals {\n  common_tags = {\n    Environment   = \"production\"\n    Project       = var.project_name\n    ManagedBy     = \"terraform\"\n    Owner         = var.owner\n    CostCenter    = \"production\"\n    Compliance    = \"SOC2\"\n  }\n}\nEOF\n```\n\n## Security Scanning and Compliance\n\n### Pre-commit Hooks\n```bash\n# Install pre-commit\npip3 install pre-commit\n\n# Create .pre-commit-config.yaml\ncat \u003e .pre-commit-config.yaml \u003c\u003cEOF\nrepos:\n- repo: https://github.com/antonbabenko/pre-commit-terraform\n  rev: v1.83.5\n  hooks:\n    - id: terraform_fmt\n    - id: terraform_validate\n    - id: terraform_docs\n    - id: terraform_tflint\n      args:\n        - --args=--config=__GIT_WORKING_DIR__/.tflint.hcl\n    - id: terraform_checkov\n      args:\n        - --args=--config-file __GIT_WORKING_DIR__/.checkov.yaml\n    - id: terraform_trivy\n\n- repo: https://github.com/pre-commit/pre-commit-hooks\n  rev: v4.4.0\n  hooks:\n    - id: trailing-whitespace\n    - id: end-of-file-fixer\n    - id: check-yaml\n    - id: check-added-large-files\n    - id: check-merge-conflict\nEOF\n\n# Install pre-commit hooks\npre-commit install\n\n# Create security scanning configuration\ncat \u003e .checkov.yaml \u003c\u003cEOF\nframework:\n  - terraform\n  - secrets\n\ncheck:\n  - CKV_AWS_79  # Ensure Instance Metadata Service Version 1 is not enabled\n  - CKV_AWS_8   # Ensure all data stored in the Launch configuration EBS is securely encrypted at rest\n  - CKV_AWS_3   # Ensure all data stored in the Launch configuration EBS is securely encrypted at rest\n\nskip-check:\n  - CKV_AWS_79  # Skip if IMDSv1 is required for legacy applications\n\noutput: cli\nquiet: false\ncompact: false\nEOF\n\n# TFLint configuration\ncat \u003e .tflint.hcl \u003c\u003cEOF\nplugin \"aws\" {\n    enabled = true\n    version = \"0.21.2\"\n    source  = \"github.com/terraform-linters/tflint-ruleset-aws\"\n}\n\nplugin \"azurerm\" {\n    enabled = true\n    version = \"0.21.0\"\n    source  = \"github.com/terraform-linters/tflint-ruleset-azurerm\"\n}\n\nplugin \"google\" {\n    enabled = true\n    version = \"0.21.0\"\n    source  = \"github.com/terraform-linters/tflint-ruleset-google\"\n}\n\nrule \"aws_instance_invalid_type\" {\n  enabled = true\n}\n\nrule \"aws_instance_previous_type\" {\n  enabled = true\n}\n\nrule \"terraform_unused_declarations\" {\n  enabled = true\n}\n\nrule \"terraform_naming_convention\" {\n  enabled = true\n  format  = \"snake_case\"\n}\nEOF\n```\n\n## Terraform Workspace Management\n\n### Multi-Environment Workflows\n```bash\n# Create and manage workspaces\nterraform workspace new development\nterraform workspace new staging\nterraform workspace new production\n\n# List workspaces\nterraform workspace list\n\n# Switch workspace\nterraform workspace select production\n\n# Show current workspace\nterraform workspace show\n\n# Workspace-specific configurations\ncat \u003e workspace-vars.tf \u003c\u003cEOF\nlocals {\n  workspace_config = {\n    development = {\n      instance_type = \"t3.micro\"\n      min_size     = 1\n      max_size     = 2\n      environment  = \"dev\"\n    }\n    staging = {\n      instance_type = \"t3.small\"\n      min_size     = 2\n      max_size     = 4\n      environment  = \"staging\"\n    }\n    production = {\n      instance_type = \"t3.large\"\n      min_size     = 3\n      max_size     = 10\n      environment  = \"prod\"\n    }\n  }\n  \n  current_config = local.workspace_config[terraform.workspace]\n}\n\n# Use workspace-specific configuration\nresource \"aws_instance\" \"web\" {\n  count         = local.current_config.min_size\n  instance_type = local.current_config.instance_type\n  \n  tags = {\n    Name        = \"\\${local.current_config.environment}-web-\\${count.index + 1}\"\n    Environment = local.current_config.environment\n    Workspace   = terraform.workspace\n  }\n}\nEOF\n```\n\n### State Management Best Practices\n```bash\n# Remote state configuration with different backends\ncat \u003e backend-configs/s3.conf \u003c\u003cEOF\nbucket         = \"terraform-state-bucket\"\nkey            = \"infrastructure/terraform.tfstate\"\nregion         = \"us-west-2\"\nencrypt        = true\nkms_key_id     = \"arn:aws:kms:us-west-2:ACCOUNT:key/KEY-ID\"\ndynamodb_table = \"terraform-state-lock\"\nEOF\n\ncat \u003e backend-configs/azurerm.conf \u003c\u003cEOF\nresource_group_name  = \"terraform-state-rg\"\nstorage_account_name = \"terraformstatestorage\"\ncontainer_name      = \"tfstate\"\nkey                 = \"infrastructure.terraform.tfstate\"\nEOF\n\ncat \u003e backend-configs/gcs.conf \u003c\u003cEOF\nbucket  = \"terraform-state-bucket\"\nprefix  = \"infrastructure/state\"\nEOF\n\n# Initialize with specific backend\nterraform init -backend-config=backend-configs/s3.conf\n\n# Import existing resources\nterraform import aws_instance.web i-1234567890abcdef0\nterraform import azurerm_virtual_machine.main /subscriptions/.../resourceGroups/.../providers/Microsoft.Compute/virtualMachines/vm-name\n\n# State manipulation commands\nterraform state list\nterraform state show aws_instance.web\nterraform state mv aws_instance.web aws_instance.web_server\nterraform state rm aws_instance.old\n```\n\n## Security Hardening\n\n### Credential Management\n```bash\n# Use environment variables for credentials (never hardcode)\ncat \u003e .env.example \u003c\u003cEOF\n# AWS\nAWS_ACCESS_KEY_ID=your_access_key\nAWS_SECRET_ACCESS_KEY=your_secret_key\nAWS_DEFAULT_REGION=us-west-2\n\n# Azure\nARM_CLIENT_ID=your_client_id\nARM_CLIENT_SECRET=your_client_secret\nARM_SUBSCRIPTION_ID=your_subscription_id\nARM_TENANT_ID=your_tenant_id\n\n# GCP\nGOOGLE_APPLICATION_CREDENTIALS=/path/to/service-account-key.json\nGOOGLE_PROJECT=your_project_id\nGOOGLE_REGION=us-central1\n\n# Terraform Cloud/Enterprise\nTF_CLOUD_TOKEN=your_terraform_cloud_token\nEOF\n\n# Use IAM roles instead of access keys (AWS)\ncat \u003e iam-role.tf \u003c\u003cEOF\n# IAM role for Terraform execution (when running on EC2)\nresource \"aws_iam_role\" \"terraform_execution\" {\n  name = \"TerraformExecutionRole\"\n\n  assume_role_policy = jsonencode({\n    Version = \"2012-10-17\"\n    Statement = [\n      {\n        Action = \"sts:AssumeRole\"\n        Effect = \"Allow\"\n        Principal = {\n          Service = \"ec2.amazonaws.com\"\n        }\n      },\n    ]\n  })\n}\n\n# Attach policies with least privilege\nresource \"aws_iam_role_policy\" \"terraform_execution\" {\n  name = \"TerraformExecutionPolicy\"\n  role = aws_iam_role.terraform_execution.id\n\n  policy = jsonencode({\n    Version = \"2012-10-17\"\n    Statement = [\n      {\n        Effect = \"Allow\"\n        Action = [\n          \"ec2:*\",\n          \"vpc:*\",\n          \"iam:PassRole\",\n          \"s3:GetObject\",\n          \"s3:PutObject\"\n        ]\n        Resource = \"*\"\n      }\n    ]\n  })\n}\nEOF\n```\n\n### Policy as Code\n```bash\n# OPA (Open Policy Agent) integration\ncat \u003e policy/security.rego \u003c\u003cEOF\npackage terraform.security\n\n# Deny instances without encryption\ndeny[reason] {\n    resource := input.resource_changes[_]\n    resource.type == \"aws_instance\"\n    resource.change.after.root_block_device[_].encrypted == false\n    reason := \"AWS instances must have encrypted root volumes\"\n}\n\n# Deny public S3 buckets\ndeny[reason] {\n    resource := input.resource_changes[_]\n    resource.type == \"aws_s3_bucket_public_access_block\"\n    resource.change.after.block_public_acls == false\n    reason := \"S3 buckets must block public access\"\n}\n\n# Require specific instance types in production\ndeny[reason] {\n    resource := input.resource_changes[_]\n    resource.type == \"aws_instance\"\n    instance_type := resource.change.after.instance_type\n    not startswith(instance_type, \"t3.\")\n    not startswith(instance_type, \"m5.\")\n    workspace := input.terraform_version.workspace\n    workspace == \"production\"\n    reason := \"Production instances must use approved instance types\"\n}\nEOF\n\n# Conftest for policy validation\n# Install conftest\nCONFTEST_VERSION=\"0.46.0\"\nwget https://github.com/open-policy-agent/conftest/releases/download/v${CONFTEST_VERSION}/conftest_${CONFTEST_VERSION}_Linux_x86_64.tar.gz\ntar xzf conftest_${CONFTEST_VERSION}_Linux_x86_64.tar.gz\nsudo mv conftest /usr/local/bin/\n\n# Validate Terraform plan against policies\nterraform plan -out=tfplan\nterraform show -json tfplan \u003e tfplan.json\nconftest test tfplan.json --policy policy/\n```\n\n### Compliance and Governance\n```bash\n# Sentinel policy example (Terraform Cloud/Enterprise)\ncat \u003e sentinel/require-encryption.sentinel \u003c\u003cEOF\nimport \"tfplan/v2\" as tfplan\nimport \"strings\"\n\n# Main rule\nmain = rule {\n    all tfplan.resource_changes as _, changes {\n        changes.type is \"aws_instance\" implies\n            changes.change.after.root_block_device[0].encrypted is true\n    }\n}\n\n# Helper function\nis_encrypted = func(resource) {\n    return resource.change.after.root_block_device[0].encrypted else false\n}\nEOF\n\n# Cost estimation with Infracost\n# Install Infracost\ncurl -fsSL https://raw.githubusercontent.com/infracost/infracost/master/scripts/install.sh | sh\n\n# Configure Infracost\ninfracost auth login\n\n# Generate cost estimate\ninfracost breakdown --path .\ninfracost diff --path . --compare-to main\n```\n\n## Disaster Recovery and Business Continuity\n\n### Multi-Region Deployment\n```bash\ncat \u003e multi-region.tf \u003c\u003cEOF\n# Multi-region deployment with disaster recovery\nmodule \"primary_region\" {\n  source = \"./modules/infrastructure\"\n  \n  providers = {\n    aws = aws.us-west-2\n  }\n  \n  environment = var.environment\n  region     = \"us-west-2\"\n  is_primary = true\n  \n  # Primary region configuration\n  instance_count    = var.primary_instance_count\n  database_backup  = true\n  cross_region_backup = true\n}\n\nmodule \"disaster_recovery_region\" {\n  source = \"./modules/infrastructure\"\n  \n  providers = {\n    aws = aws.us-east-1\n  }\n  \n  environment = var.environment\n  region     = \"us-east-1\"\n  is_primary = false\n  \n  # DR region configuration\n  instance_count = var.dr_instance_count\n  database_mode = \"read_replica\"\n  \n  # Dependency on primary region\n  depends_on = [module.primary_region]\n}\n\n# Provider configurations for multiple regions\nprovider \"aws\" {\n  alias  = \"us-west-2\"\n  region = \"us-west-2\"\n}\n\nprovider \"aws\" {\n  alias  = \"us-east-1\"\n  region = \"us-east-1\"\n}\n\n# Cross-region replication\nresource \"aws_s3_bucket_replication_configuration\" \"main\" {\n  role   = aws_iam_role.replication.arn\n  bucket = module.primary_region.s3_bucket_id\n\n  rule {\n    id     = \"replicate-everything\"\n    status = \"Enabled\"\n\n    destination {\n      bucket        = module.disaster_recovery_region.s3_bucket_arn\n      storage_class = \"STANDARD_IA\"\n    }\n  }\n\n  depends_on = [aws_s3_bucket_versioning.main]\n}\nEOF\n```\n\n### Backup and Recovery Automation\n```bash\n# Automated backup script for Terraform state and configurations\nsudo tee /usr/local/bin/terraform-backup.sh \u003e /dev/null \u003c\u003c'EOF'\n#!/bin/bash\nBACKUP_DIR=\"/backup/terraform\"\nDATE=$(date +%Y%m%d_%H%M%S)\n\nmkdir -p ${BACKUP_DIR}/{state,configs,plans}\n\n# Backup Terraform configurations\nfind /opt/terraform -name \"*.tf\" -o -name \"*.tfvars\" | while read tf_file; do\n    relative_path=$(echo $tf_file | sed 's|^/opt/terraform/||')\n    mkdir -p ${BACKUP_DIR}/configs/$(dirname $relative_path)\n    cp \"$tf_file\" ${BACKUP_DIR}/configs/$relative_path\ndone\n\n# Backup state files (if using local backend)\nfind /opt/terraform -name \"terraform.tfstate*\" | while read state_file; do\n    relative_path=$(echo $state_file | sed 's|^/opt/terraform/||')\n    mkdir -p ${BACKUP_DIR}/state/$(dirname $relative_path)\n    cp \"$state_file\" ${BACKUP_DIR}/state/$relative_path\ndone\n\n# Backup remote state (if using S3)\naws s3 sync s3://terraform-state-bucket/ ${BACKUP_DIR}/remote-state/\n\n# Create archive\ntar -czf ${BACKUP_DIR}/terraform-complete-backup-${DATE}.tar.gz -C ${BACKUP_DIR} configs state remote-state\n\n# Upload to multiple cloud storage\naws s3 cp ${BACKUP_DIR}/terraform-complete-backup-${DATE}.tar.gz s3://terraform-backups/\naz storage blob upload --file ${BACKUP_DIR}/terraform-complete-backup-${DATE}.tar.gz --container-name terraform-backups --name terraform-complete-backup-${DATE}.tar.gz\ngsutil cp ${BACKUP_DIR}/terraform-complete-backup-${DATE}.tar.gz gs://terraform-backups/\n\n# Keep only last 30 backups\nfind ${BACKUP_DIR} -name \"terraform-complete-backup-*.tar.gz\" -mtime +30 -delete\n\necho \"Terraform backup completed: ${DATE}\"\nEOF\n\nsudo chmod +x /usr/local/bin/terraform-backup.sh\n\n# Schedule daily backup\necho \"0 1 * * * root /usr/local/bin/terraform-backup.sh\" | sudo tee -a /etc/crontab\n```\n\n## Verification and Testing\n\n### Comprehensive Testing\n```bash\n# Test Terraform configuration\nterraform fmt -check -recursive\nterraform validate\n\n# Test across all environments\nfor env in development staging production; do\n    echo \"Testing $env environment...\"\n    cd environments/$env\n    terraform init\n    terraform validate\n    terraform plan -var-file=\"$env.tfvars\"\n    cd ../..\ndone\n\n# Security scanning\ncheckov --framework terraform --directory .\nterrascan scan -t aws\ntrivy config .\n\n# Cost estimation\ninfracost breakdown --path .\n\n# Compliance checking\nterraform-compliance -p . -f compliance-tests/\n\n# Integration testing with Terratest (Go)\ncat \u003e test/integration_test.go \u003c\u003cEOF\npackage test\n\nimport (\n    \"testing\"\n    \"github.com/gruntwork-io/terratest/modules/terraform\"\n    \"github.com/stretchr/testify/assert\"\n)\n\nfunc TestTerraformAWSExample(t *testing.T) {\n    terraformOptions := \u0026terraform.Options{\n        TerraformDir: \"../environments/development\",\n        VarFiles:     []string{\"development.tfvars\"},\n    }\n\n    defer terraform.Destroy(t, terraformOptions)\n    terraform.InitAndApply(t, terraformOptions)\n\n    # Test that resources were created\n    instanceID := terraform.Output(t, terraformOptions, \"instance_id\")\n    assert.NotEmpty(t, instanceID)\n}\nEOF\n```\n\n### Performance and Monitoring\n```bash\n# Monitor Terraform execution\nterraform apply -parallelism=10\n\n# Profile Terraform execution\nTF_LOG=DEBUG terraform apply\n\n# State file analysis\nterraform state list\nterraform show\n\n# Resource drift detection\nterraform plan -refresh-only\n\n# Dependency graphing\nterraform graph | dot -Tsvg \u003e graph.svg\n\n# Resource import verification\nterraform plan -generate-config-out=generated.tf\n```\n\n## Advanced Use Cases\n\n### Multi-Cloud Kubernetes Deployment\n```bash\ncat \u003e multi-cloud-k8s.tf \u003c\u003cEOF\n# EKS Cluster (AWS)\nmodule \"aws_eks\" {\n  source = \"terraform-aws-modules/eks/aws\"\n  version = \"~\u003e 19.0\"\n\n  cluster_name    = \"\\${var.project_name}-eks-\\${var.environment}\"\n  cluster_version = \"1.28\"\n\n  vpc_id                          = module.aws_vpc.vpc_id\n  subnet_ids                      = module.aws_vpc.private_subnets\n  cluster_endpoint_public_access  = false\n  cluster_endpoint_private_access = true\n\n  eks_managed_node_groups = {\n    main = {\n      min_size     = 1\n      max_size     = 5\n      desired_size = 3\n\n      instance_types = [\"t3.medium\"]\n      capacity_type  = \"ON_DEMAND\"\n      \n      k8s_labels = {\n        Environment = var.environment\n        NodeGroup   = \"main\"\n      }\n    }\n  }\n\n  tags = var.common_tags\n}\n\n# AKS Cluster (Azure)\nresource \"azurerm_kubernetes_cluster\" \"main\" {\n  name                = \"\\${var.project_name}-aks-\\${var.environment}\"\n  location            = azurerm_resource_group.main.location\n  resource_group_name = azurerm_resource_group.main.name\n  dns_prefix          = \"\\${var.project_name}-aks\"\n\n  default_node_pool {\n    name       = \"default\"\n    node_count = 3\n    vm_size    = \"Standard_D2_v2\"\n    \n    upgrade_settings {\n      max_surge = \"10%\"\n    }\n  }\n\n  identity {\n    type = \"SystemAssigned\"\n  }\n\n  network_profile {\n    network_plugin = \"azure\"\n    network_policy = \"calico\"\n  }\n\n  tags = var.common_tags\n}\n\n# GKE Cluster (GCP)\nresource \"google_container_cluster\" \"main\" {\n  name     = \"\\${var.project_name}-gke-\\${var.environment}\"\n  location = var.gcp_region\n  project  = var.gcp_project_id\n\n  # Remove default node pool\n  remove_default_node_pool = true\n  initial_node_count       = 1\n\n  network    = google_compute_network.main.name\n  subnetwork = google_compute_subnetwork.main.name\n\n  private_cluster_config {\n    enable_private_nodes    = true\n    enable_private_endpoint = false\n    master_ipv4_cidr_block  = \"172.16.0.0/28\"\n  }\n\n  workload_identity_config {\n    workload_pool = \"\\${var.gcp_project_id}.svc.id.goog\"\n  }\n}\n\nresource \"google_container_node_pool\" \"main\" {\n  name       = \"main\"\n  location   = var.gcp_region\n  cluster    = google_container_cluster.main.name\n  node_count = 1\n  project    = var.gcp_project_id\n\n  autoscaling {\n    min_node_count = 1\n    max_node_count = 5\n  }\n\n  node_config {\n    preemptible  = false\n    machine_type = \"e2-medium\"\n\n    oauth_scopes = [\n      \"https://www.googleapis.com/auth/cloud-platform\"\n    ]\n\n    workload_metadata_config {\n      mode = \"GKE_METADATA\"\n    }\n  }\n}\nEOF\n```\n\n### Infrastructure Monitoring with Terraform\n```bash\ncat \u003e monitoring.tf \u003c\u003cEOF\n# CloudWatch alarms (AWS)\nresource \"aws_cloudwatch_metric_alarm\" \"high_cpu\" {\n  for_each = toset(module.aws_infrastructure.instance_ids)\n  \n  alarm_name          = \"high-cpu-\\${each.key}\"\n  comparison_operator = \"GreaterThanThreshold\"\n  evaluation_periods  = \"2\"\n  metric_name        = \"CPUUtilization\"\n  namespace          = \"AWS/EC2\"\n  period             = \"300\"\n  statistic          = \"Average\"\n  threshold          = \"80\"\n  alarm_description  = \"This metric monitors ec2 cpu utilization\"\n\n  dimensions = {\n    InstanceId = each.value\n  }\n\n  alarm_actions = [aws_sns_topic.alerts.arn]\n}\n\n# Azure Monitor alerts\nresource \"azurerm_monitor_metric_alert\" \"cpu_alert\" {\n  name                = \"cpu-alert\"\n  resource_group_name = azurerm_resource_group.main.name\n  scopes              = [azurerm_virtual_machine.main.id]\n\n  criteria {\n    metric_namespace = \"Microsoft.Compute/virtualMachines\"\n    metric_name      = \"Percentage CPU\"\n    aggregation      = \"Average\"\n    operator         = \"GreaterThan\"\n    threshold        = 80\n  }\n\n  action {\n    action_group_id = azurerm_monitor_action_group.main.id\n  }\n}\n\n# GCP monitoring policy\nresource \"google_monitoring_alert_policy\" \"cpu_usage\" {\n  display_name = \"CPU Usage Alert\"\n  combiner     = \"OR\"\n  project      = var.gcp_project_id\n\n  conditions {\n    display_name = \"CPU usage condition\"\n\n    condition_threshold {\n      filter         = \"resource.type=\\\"gce_instance\\\"\"\n      duration       = \"300s\"\n      comparison     = \"COMPARISON_GREATER_THAN\"\n      threshold_value = 0.8\n\n      aggregations {\n        alignment_period   = \"300s\"\n        per_series_aligner = \"ALIGN_RATE\"\n      }\n    }\n  }\n\n  alert_strategy {\n    notification_rate_limit {\n      period = \"300s\"\n    }\n    auto_close = \"1800s\"\n  }\n\n  notification_channels = [google_monitoring_notification_channel.email.name]\n}\nEOF\n```\n\n## Troubleshooting\n\n### Common Issues and Solutions\n```bash\n# Check Terraform configuration\nterraform fmt -check -diff\nterraform validate\n\n# Debug Terraform execution\nTF_LOG=DEBUG terraform apply\nTF_LOG=TRACE terraform apply\n\n# State file issues\nterraform state list\nterraform state show resource_name\n\n# Provider authentication issues\nterraform init -upgrade\nterraform providers\n\n# Lock issues\nterraform force-unlock LOCK_ID\n\n# Refresh state from real infrastructure\nterraform refresh\n\n# Import existing resources\nterraform import aws_instance.example i-1234567890abcdef0\n\n# Validate provider configurations\n# AWS\naws sts get-caller-identity\n\n# Azure\naz account show\n\n# GCP\ngcloud auth list\ngcloud config get-value project\n\n# Check resource quotas\naws service-quotas get-service-quota --service-code ec2 --quota-code L-1216C47A\naz vm list-usage --location \"East US\"\ngcloud compute project-info describe --project=$PROJECT_ID\n\n# Plan file analysis\nterraform show tfplan\nterraform show -json tfplan | jq '.resource_changes[] | {type: .type, name: .name, action: .change.actions}'\n```\n\n### Advanced Debugging\n```bash\n# Provider debug logging\nTF_LOG_PROVIDER=DEBUG terraform apply\n\n# Crash log analysis\ncat crash.log\n\n# Performance profiling\nterraform apply -parallelism=1  # Sequential execution for debugging\n\n# Resource graph visualization\nterraform graph -type=plan | dot -Tpng \u003e plan.png\n\n# State manipulation for recovery\nterraform state rm problematic_resource\nterraform import resource_type.name resource_id\n\n# Force resource recreation\nterraform taint resource_type.name\nterraform apply\n\n# Workspace state recovery\nterraform workspace select production\nterraform state pull \u003e production.tfstate.backup\n```\n\n## Additional Resources\n\n- [Official Documentation](https://developer.hashicorp.com/terraform/docs)\n- [Terraform Registry](https://registry.terraform.io/)\n- [Multi-Cloud Best Practices](https://developer.hashicorp.com/terraform/cloud-docs/recommended-practices)\n- [Security Best Practices](https://developer.hashicorp.com/terraform/language/values/sensitive)\n- [AWS Provider Documentation](https://registry.terraform.io/providers/hashicorp/aws/latest/docs)\n- [Azure Provider Documentation](https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs)\n- [GCP Provider Documentation](https://registry.terraform.io/providers/hashicorp/google/latest/docs)\n\n---\n\n**Note:** This guide is part of the [HowToMgr](https://howtomgr.github.io) collection.","readmeHtml":"\u003ch1 id=\"terraform-installation-guide\" class=\"mobile-header\"\u003eTerraform Installation Guide\u003c/h1\u003e\n\u003cp class=\"mobile-paragraph\"\u003eInfrastructure as Code (IaC) tool for building, changing, and versioning infrastructure safely and efficiently across multiple cloud providers. Industry standard for multi-cloud infrastructure management.\u003c/p\u003e\n\u003ch2 id=\"prerequisites\" class=\"mobile-header\"\u003ePrerequisites\u003c/h2\u003e\n\u003cli class=\"mobile-list-item\"\u003eLinux system (any modern distribution)\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eRoot or sudo access\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eCloud provider account(s) (AWS, Azure, GCP, etc.)\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eBasic understanding of infrastructure concepts\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003e2GB RAM minimum, 4GB+ recommended for large infrastructures\u003c/li\u003e\n\u003ch2 id=\"installation\" class=\"mobile-header\"\u003eInstallation\u003c/h2\u003e\n\u003ch3 id=\"using-package-manager-recommended\" class=\"mobile-header\"\u003eUsing Package Manager (Recommended)\u003c/h3\u003e\n\u003cp class=\"mobile-paragraph\"\u003e#### Ubuntu/Debian\u003c/p\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Add HashiCorp GPG key\nwget -O- https://apt.releases.hashicorp.com/gpg | sudo gpg --dearmor -o /usr/share/keyrings/hashicorp-archive-keyring.gpg\n\n# Add HashiCorp repository\necho \u0026quot;deb [signed-by=/usr/share/keyrings/hashicorp-archive-keyring.gpg] https://apt.releases.hashicorp.com $(lsb_release -cs) main\u0026quot; | sudo tee /etc/apt/sources.list.d/hashicorp.list\n\n# Update and install Terraform\nsudo apt update\nsudo apt install -y terraform\n\n# Verify installation\nterraform version\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003cp class=\"mobile-paragraph\"\u003e#### RHEL/CentOS/Rocky Linux/AlmaLinux\u003c/p\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Add HashiCorp repository\nsudo yum install -y yum-utils\nsudo yum-config-manager --add-repo https://rpm.releases.hashicorp.com/RHEL/hashicorp.repo\n\n# Install Terraform\nsudo yum install -y terraform\n\n# Verify installation\nterraform version\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003cp class=\"mobile-paragraph\"\u003e#### Fedora\u003c/p\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Add HashiCorp repository\nsudo dnf install -y dnf-plugins-core\nsudo dnf config-manager --add-repo https://rpm.releases.hashicorp.com/fedora/hashicorp.repo\n\n# Install Terraform\nsudo dnf install -y terraform\n\n# Verify installation\nterraform version\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003cp class=\"mobile-paragraph\"\u003e#### Arch Linux\u003c/p\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Install from AUR\nyay -S terraform\n\n# Or from community repository\nsudo pacman -Syu terraform\n\n# Verify installation\nterraform version\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003cp class=\"mobile-paragraph\"\u003e#### Alpine Linux\u003c/p\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Install from Alpine repositories\nsudo apk update\nsudo apk add terraform\n\n# Verify installation\nterraform version\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"manual-binary-installation\" class=\"mobile-header\"\u003eManual Binary Installation\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Download latest Terraform\nTERRAFORM_VERSION=\u0026quot;1.6.4\u0026quot;\ncd /tmp\nwget https://releases.hashicorp.com/terraform/${TERRAFORM_VERSION}/terraform_${TERRAFORM_VERSION}_linux_amd64.zip\n\n# Install unzip if needed\nsudo apt install -y unzip  # Ubuntu/Debian\nsudo yum install -y unzip  # RHEL/CentOS\nsudo dnf install -y unzip  # Fedora\nsudo pacman -S unzip       # Arch Linux\n\n# Extract and install\nunzip terraform_${TERRAFORM_VERSION}_linux_amd64.zip\nsudo mv terraform /usr/local/bin/\nsudo chmod +x /usr/local/bin/terraform\n\n# Verify installation\nterraform version\n\n# Clean up\nrm terraform_${TERRAFORM_VERSION}_linux_amd64.zip\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"using-docker\" class=\"mobile-header\"\u003eUsing Docker\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Create alias for Docker-based Terraform\necho \u0026#039;alias terraform=\u0026quot;docker run --rm -it -v $(pwd):/workspace -w /workspace hashicorp/terraform:latest\u0026quot;\u0026#039; \u0026gt;\u0026gt; ~/.bashrc\nsource ~/.bashrc\n\n# Or create comprehensive wrapper script\nsudo tee /usr/local/bin/terraform \u0026gt; /dev/null \u0026lt;\u0026lt;\u0026#039;EOF\u0026#039;\n#!/bin/bash\ndocker run --rm -it \\\n  -v $(pwd):/workspace \\\n  -v ~/.aws:/root/.aws:ro \\\n  -v ~/.azure:/root/.azure:ro \\\n  -v ~/.config/gcloud:/root/.config/gcloud:ro \\\n  -v ~/.kube:/root/.kube:ro \\\n  -v ~/.ssh:/root/.ssh:ro \\\n  -e AWS_PROFILE \\\n  -e AZURE_SUBSCRIPTION_ID \\\n  -e GOOGLE_APPLICATION_CREDENTIALS \\\n  -w /workspace \\\n  hashicorp/terraform:latest \u0026quot;$@\u0026quot;\nEOF\nsudo chmod +x /usr/local/bin/terraform\n\n# Test Docker installation\nterraform version\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"using-tfenv-version-manager\" class=\"mobile-header\"\u003eUsing tfenv (Version Manager)\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Install tfenv for managing multiple Terraform versions\ngit clone https://github.com/tfutils/tfenv.git ~/.tfenv\necho \u0026#039;export PATH=\u0026quot;$HOME/.tfenv/bin:$PATH\u0026quot;\u0026#039; \u0026gt;\u0026gt; ~/.bashrc\nsource ~/.bashrc\n\n# Install and use specific Terraform version\ntfenv install 1.6.4\ntfenv use 1.6.4\n\n# List available versions\ntfenv list-remote\ntfenv list\n\n# Auto-install based on .terraform-version file\necho \u0026quot;1.6.4\u0026quot; \u0026gt; .terraform-version\ntfenv install\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"multi-cloud-provider-setup\" class=\"mobile-header\"\u003eMulti-Cloud Provider Setup\u003c/h2\u003e\n\u003ch3 id=\"aws-configuration\" class=\"mobile-header\"\u003eAWS Configuration\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Install AWS CLI\ncurl \u0026quot;https://awscli.amazonaws.com/awscli-exe-linux-x86_64.zip\u0026quot; -o \u0026quot;awscliv2.zip\u0026quot;\nunzip awscliv2.zip\nsudo ./aws/install\n\n# Configure AWS credentials\naws configure\n# AWS Access Key ID: YOUR_ACCESS_KEY\n# AWS Secret Access Key: YOUR_SECRET_KEY  \n# Default region name: us-west-2\n# Default output format: json\n\n# Alternative: Use IAM roles (recommended for EC2)\n# Instance metadata service automatically provides credentials\n\n# Create Terraform AWS configuration\nmkdir -p ~/terraform/multi-cloud\ncd ~/terraform/multi-cloud\n\ncat \u0026gt; providers.tf \u0026lt;\u0026lt;EOF\nterraform {\n  required_version = \u0026quot;\u0026gt;= 1.5\u0026quot;\n  required_providers {\n    aws = {\n      source  = \u0026quot;hashicorp/aws\u0026quot;\n      version = \u0026quot;~\u0026gt; 5.0\u0026quot;\n    }\n    azurerm = {\n      source  = \u0026quot;hashicorp/azurerm\u0026quot;\n      version = \u0026quot;~\u0026gt; 3.0\u0026quot;\n    }\n    google = {\n      source  = \u0026quot;hashicorp/google\u0026quot;\n      version = \u0026quot;~\u0026gt; 5.0\u0026quot;\n    }\n  }\n  \n  # Remote state configuration\n  backend \u0026quot;s3\u0026quot; {\n    bucket = \u0026quot;your-terraform-state-bucket\u0026quot;\n    key    = \u0026quot;multi-cloud/terraform.tfstate\u0026quot;\n    region = \u0026quot;us-west-2\u0026quot;\n    \n    # State locking with DynamoDB\n    dynamodb_table = \u0026quot;terraform-state-lock\u0026quot;\n    encrypt        = true\n  }\n}\n\n# AWS Provider\nprovider \u0026quot;aws\u0026quot; {\n  region = var.aws_region\n  \n  default_tags {\n    tags = {\n      Environment   = var.environment\n      ManagedBy     = \u0026quot;terraform\u0026quot;\n      Project       = var.project_name\n      Owner         = var.owner\n    }\n  }\n}\n\n# Azure Provider\nprovider \u0026quot;azurerm\u0026quot; {\n  features {\n    resource_group {\n      prevent_deletion_if_contains_resources = false\n    }\n    key_vault {\n      purge_soft_delete_on_destroy = true\n    }\n  }\n}\n\n# Google Cloud Provider\nprovider \u0026quot;google\u0026quot; {\n  project = var.gcp_project_id\n  region  = var.gcp_region\n  zone    = var.gcp_zone\n}\nEOF\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"azure-configuration\" class=\"mobile-header\"\u003eAzure Configuration\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Install Azure CLI\ncurl -sL https://aka.ms/InstallAzureCLIDeb | sudo bash\n\n# Login to Azure\naz login\n\n# Create service principal for Terraform\naz ad sp create-for-rbac \\\n  --name \u0026quot;terraform-sp\u0026quot; \\\n  --role=\u0026quot;Contributor\u0026quot; \\\n  --scopes=\u0026quot;/subscriptions/YOUR_SUBSCRIPTION_ID\u0026quot;\n\n# Set environment variables (add to ~/.bashrc)\ncat \u0026gt;\u0026gt; ~/.bashrc \u0026lt;\u0026lt;EOF\n# Azure Terraform Authentication\nexport ARM_CLIENT_ID=\u0026quot;your-client-id\u0026quot;\nexport ARM_CLIENT_SECRET=\u0026quot;your-client-secret\u0026quot;\nexport ARM_SUBSCRIPTION_ID=\u0026quot;your-subscription-id\u0026quot;\nexport ARM_TENANT_ID=\u0026quot;your-tenant-id\u0026quot;\nEOF\n\nsource ~/.bashrc\n\n# Create Azure Terraform configuration\ncat \u0026gt; azure-main.tf \u0026lt;\u0026lt;EOF\n# Resource Group\nresource \u0026quot;azurerm_resource_group\u0026quot; \u0026quot;main\u0026quot; {\n  name     = \u0026quot;\\${var.environment}-rg\u0026quot;\n  location = var.azure_location\n  \n  tags = {\n    Environment = var.environment\n    ManagedBy   = \u0026quot;terraform\u0026quot;\n  }\n}\n\n# Virtual Network\nresource \u0026quot;azurerm_virtual_network\u0026quot; \u0026quot;main\u0026quot; {\n  name                = \u0026quot;\\${var.environment}-vnet\u0026quot;\n  address_space       = [\u0026quot;10.1.0.0/16\u0026quot;]\n  location            = azurerm_resource_group.main.location\n  resource_group_name = azurerm_resource_group.main.name\n\n  tags = {\n    Environment = var.environment\n  }\n}\n\n# Subnet\nresource \u0026quot;azurerm_subnet\u0026quot; \u0026quot;internal\u0026quot; {\n  name                 = \u0026quot;internal\u0026quot;\n  resource_group_name  = azurerm_resource_group.main.name\n  virtual_network_name = azurerm_virtual_network.main.name\n  address_prefixes     = [\u0026quot;10.1.2.0/24\u0026quot;]\n}\n\n# Network Security Group\nresource \u0026quot;azurerm_network_security_group\u0026quot; \u0026quot;main\u0026quot; {\n  name                = \u0026quot;\\${var.environment}-nsg\u0026quot;\n  location            = azurerm_resource_group.main.location\n  resource_group_name = azurerm_resource_group.main.name\n\n  security_rule {\n    name                       = \u0026quot;SSH\u0026quot;\n    priority                   = 1001\n    direction                  = \u0026quot;Inbound\u0026quot;\n    access                     = \u0026quot;Allow\u0026quot;\n    protocol                   = \u0026quot;Tcp\u0026quot;\n    source_port_range          = \u0026quot;*\u0026quot;\n    destination_port_range     = \u0026quot;22\u0026quot;\n    source_address_prefix      = \u0026quot;*\u0026quot;\n    destination_address_prefix = \u0026quot;*\u0026quot;\n  }\n\n  security_rule {\n    name                       = \u0026quot;HTTP\u0026quot;\n    priority                   = 1002\n    direction                  = \u0026quot;Inbound\u0026quot;\n    access                     = \u0026quot;Allow\u0026quot;\n    protocol                   = \u0026quot;Tcp\u0026quot;\n    source_port_range          = \u0026quot;*\u0026quot;\n    destination_port_range     = \u0026quot;80\u0026quot;\n    source_address_prefix      = \u0026quot;*\u0026quot;\n    destination_address_prefix = \u0026quot;*\u0026quot;\n  }\n\n  security_rule {\n    name                       = \u0026quot;HTTPS\u0026quot;\n    priority                   = 1003\n    direction                  = \u0026quot;Inbound\u0026quot;\n    access                     = \u0026quot;Allow\u0026quot;\n    protocol                   = \u0026quot;Tcp\u0026quot;\n    source_port_range          = \u0026quot;*\u0026quot;\n    destination_port_range     = \u0026quot;443\u0026quot;\n    source_address_prefix      = \u0026quot;*\u0026quot;\n    destination_address_prefix = \u0026quot;*\u0026quot;\n  }\n}\nEOF\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"google-cloud-configuration\" class=\"mobile-header\"\u003eGoogle Cloud Configuration\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Install Google Cloud SDK\necho \u0026quot;deb [signed-by=/usr/share/keyrings/cloud.google.gpg] https://packages.cloud.google.com/apt cloud-sdk main\u0026quot; | sudo tee -a /etc/apt/sources.list.d/google-cloud-sdk.list\ncurl https://packages.cloud.google.com/apt/doc/apt-key.gpg | sudo apt-key --keyring /usr/share/keyrings/cloud.google.gpg add -\nsudo apt-get update \u0026amp;\u0026amp; sudo apt-get install -y google-cloud-cli\n\n# Authenticate\ngcloud auth login\ngcloud config set project YOUR_PROJECT_ID\n\n# Create service account for Terraform\ngcloud iam service-accounts create terraform \\\n  --display-name=\u0026quot;Terraform Service Account\u0026quot;\n\ngcloud projects add-iam-policy-binding YOUR_PROJECT_ID \\\n  --member=\u0026quot;serviceAccount:terraform@YOUR_PROJECT_ID.iam.gserviceaccount.com\u0026quot; \\\n  --role=\u0026quot;roles/editor\u0026quot;\n\ngcloud iam service-accounts keys create ~/gcp-terraform-key.json \\\n  --iam-account=terraform@YOUR_PROJECT_ID.iam.gserviceaccount.com\n\n# Set environment variable\nexport GOOGLE_APPLICATION_CREDENTIALS=\u0026quot;$HOME/gcp-terraform-key.json\u0026quot;\necho \u0026#039;export GOOGLE_APPLICATION_CREDENTIALS=\u0026quot;$HOME/gcp-terraform-key.json\u0026quot;\u0026#039; \u0026gt;\u0026gt; ~/.bashrc\n\n# Create GCP Terraform configuration\ncat \u0026gt; gcp-main.tf \u0026lt;\u0026lt;EOF\n# VPC Network\nresource \u0026quot;google_compute_network\u0026quot; \u0026quot;main\u0026quot; {\n  name                    = \u0026quot;\\${var.environment}-vpc\u0026quot;\n  auto_create_subnetworks = false\n  project                 = var.gcp_project_id\n}\n\n# Subnet\nresource \u0026quot;google_compute_subnetwork\u0026quot; \u0026quot;main\u0026quot; {\n  name          = \u0026quot;\\${var.environment}-subnet\u0026quot;\n  ip_cidr_range = \u0026quot;10.2.0.0/24\u0026quot;\n  region        = var.gcp_region\n  network       = google_compute_network.main.id\n  project       = var.gcp_project_id\n}\n\n# Firewall rules\nresource \u0026quot;google_compute_firewall\u0026quot; \u0026quot;allow-ssh\u0026quot; {\n  name    = \u0026quot;\\${var.environment}-allow-ssh\u0026quot;\n  network = google_compute_network.main.name\n  project = var.gcp_project_id\n\n  allow {\n    protocol = \u0026quot;tcp\u0026quot;\n    ports    = [\u0026quot;22\u0026quot;]\n  }\n\n  source_ranges = [\u0026quot;0.0.0.0/0\u0026quot;]\n  target_tags   = [\u0026quot;ssh-allowed\u0026quot;]\n}\n\nresource \u0026quot;google_compute_firewall\u0026quot; \u0026quot;allow-http\u0026quot; {\n  name    = \u0026quot;\\${var.environment}-allow-http\u0026quot;\n  network = google_compute_network.main.name\n  project = var.gcp_project_id\n\n  allow {\n    protocol = \u0026quot;tcp\u0026quot;\n    ports    = [\u0026quot;80\u0026quot;, \u0026quot;443\u0026quot;]\n  }\n\n  source_ranges = [\u0026quot;0.0.0.0/0\u0026quot;]\n  target_tags   = [\u0026quot;http-server\u0026quot;, \u0026quot;https-server\u0026quot;]\n}\nEOF\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"security-best-practices\" class=\"mobile-header\"\u003eSecurity Best Practices\u003c/h2\u003e\n\u003ch3 id=\"secure-state-management\" class=\"mobile-header\"\u003eSecure State Management\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Create S3 backend with encryption and locking\ncat \u0026gt; backend.tf \u0026lt;\u0026lt;EOF\nterraform {\n  backend \u0026quot;s3\u0026quot; {\n    bucket         = \u0026quot;your-terraform-state-bucket\u0026quot;\n    key            = \u0026quot;infrastructure/terraform.tfstate\u0026quot;\n    region         = \u0026quot;us-west-2\u0026quot;\n    encrypt        = true\n    kms_key_id     = \u0026quot;arn:aws:kms:us-west-2:ACCOUNT:key/KEY-ID\u0026quot;\n    dynamodb_table = \u0026quot;terraform-state-lock\u0026quot;\n    \n    # Additional security\n    skip_region_validation      = false\n    skip_credentials_validation = false\n    skip_metadata_api_check     = false\n  }\n}\n\n# DynamoDB table for state locking\nresource \u0026quot;aws_dynamodb_table\u0026quot; \u0026quot;terraform_state_lock\u0026quot; {\n  name           = \u0026quot;terraform-state-lock\u0026quot;\n  billing_mode   = \u0026quot;PAY_PER_REQUEST\u0026quot;\n  hash_key       = \u0026quot;LockID\u0026quot;\n\n  attribute {\n    name = \u0026quot;LockID\u0026quot;\n    type = \u0026quot;S\u0026quot;\n  }\n\n  server_side_encryption {\n    enabled = true\n  }\n\n  point_in_time_recovery {\n    enabled = true\n  }\n\n  tags = {\n    Name        = \u0026quot;Terraform State Lock Table\u0026quot;\n    Environment = var.environment\n  }\n}\n\n# S3 bucket for state storage\nresource \u0026quot;aws_s3_bucket\u0026quot; \u0026quot;terraform_state\u0026quot; {\n  bucket        = \u0026quot;your-terraform-state-bucket\u0026quot;\n  force_destroy = false\n\n  tags = {\n    Name        = \u0026quot;Terraform State Bucket\u0026quot;\n    Environment = var.environment\n  }\n}\n\nresource \u0026quot;aws_s3_bucket_encryption_configuration\u0026quot; \u0026quot;terraform_state_encryption\u0026quot; {\n  bucket = aws_s3_bucket.terraform_state.id\n\n  rule {\n    apply_server_side_encryption_by_default {\n      kms_master_key_id = aws_kms_key.terraform_bucket_key.arn\n      sse_algorithm     = \u0026quot;aws:kms\u0026quot;\n    }\n  }\n}\n\nresource \u0026quot;aws_s3_bucket_versioning\u0026quot; \u0026quot;terraform_state_versioning\u0026quot; {\n  bucket = aws_s3_bucket.terraform_state.id\n  versioning_configuration {\n    status = \u0026quot;Enabled\u0026quot;\n  }\n}\n\nresource \u0026quot;aws_s3_bucket_public_access_block\u0026quot; \u0026quot;terraform_state\u0026quot; {\n  bucket = aws_s3_bucket.terraform_state.id\n\n  block_public_acls       = true\n  block_public_policy     = true\n  ignore_public_acls      = true\n  restrict_public_buckets = true\n}\n\n# KMS key for S3 encryption\nresource \u0026quot;aws_kms_key\u0026quot; \u0026quot;terraform_bucket_key\u0026quot; {\n  description             = \u0026quot;KMS key for Terraform state bucket encryption\u0026quot;\n  deletion_window_in_days = 7\n\n  tags = {\n    Name        = \u0026quot;Terraform State Bucket Key\u0026quot;\n    Environment = var.environment\n  }\n}\nEOF\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"variables-and-secrets-management\" class=\"mobile-header\"\u003eVariables and Secrets Management\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Create variables.tf with proper typing and validation\ncat \u0026gt; variables.tf \u0026lt;\u0026lt;EOF\n# AWS Variables\nvariable \u0026quot;aws_region\u0026quot; {\n  description = \u0026quot;AWS region for resources\u0026quot;\n  type        = string\n  default     = \u0026quot;us-west-2\u0026quot;\n  validation {\n    condition     = can(regex(\u0026quot;^[a-z]{2}-[a-z]+-[0-9]{1}$\u0026quot;, var.aws_region))\n    error_message = \u0026quot;AWS region must be a valid region format.\u0026quot;\n  }\n}\n\nvariable \u0026quot;aws_availability_zones\u0026quot; {\n  description = \u0026quot;List of AWS availability zones\u0026quot;\n  type        = list(string)\n  default     = [\u0026quot;us-west-2a\u0026quot;, \u0026quot;us-west-2b\u0026quot;, \u0026quot;us-west-2c\u0026quot;]\n}\n\n# Azure Variables\nvariable \u0026quot;azure_location\u0026quot; {\n  description = \u0026quot;Azure region for resources\u0026quot;\n  type        = string\n  default     = \u0026quot;East US\u0026quot;\n  validation {\n    condition = contains([\n      \u0026quot;East US\u0026quot;, \u0026quot;East US 2\u0026quot;, \u0026quot;West US\u0026quot;, \u0026quot;West US 2\u0026quot;, \u0026quot;West US 3\u0026quot;,\n      \u0026quot;Central US\u0026quot;, \u0026quot;North Central US\u0026quot;, \u0026quot;South Central US\u0026quot;, \u0026quot;West Central US\u0026quot;,\n      \u0026quot;Canada Central\u0026quot;, \u0026quot;Canada East\u0026quot;, \u0026quot;Brazil South\u0026quot;, \u0026quot;UK South\u0026quot;, \u0026quot;UK West\u0026quot;,\n      \u0026quot;West Europe\u0026quot;, \u0026quot;North Europe\u0026quot;, \u0026quot;France Central\u0026quot;, \u0026quot;Germany West Central\u0026quot;,\n      \u0026quot;Switzerland North\u0026quot;, \u0026quot;Norway East\u0026quot;, \u0026quot;UAE North\u0026quot;, \u0026quot;South Africa North\u0026quot;,\n      \u0026quot;Australia East\u0026quot;, \u0026quot;Australia Southeast\u0026quot;, \u0026quot;Central India\u0026quot;, \u0026quot;South India\u0026quot;,\n      \u0026quot;West India\u0026quot;, \u0026quot;Japan East\u0026quot;, \u0026quot;Japan West\u0026quot;, \u0026quot;Korea Central\u0026quot;, \u0026quot;Korea South\u0026quot;,\n      \u0026quot;Southeast Asia\u0026quot;, \u0026quot;East Asia\u0026quot;\n    ], var.azure_location)\n    error_message = \u0026quot;Azure location must be a valid Azure region.\u0026quot;\n  }\n}\n\n# GCP Variables\nvariable \u0026quot;gcp_project_id\u0026quot; {\n  description = \u0026quot;GCP project ID\u0026quot;\n  type        = string\n  validation {\n    condition     = length(var.gcp_project_id) \u0026gt; 0\n    error_message = \u0026quot;GCP project ID cannot be empty.\u0026quot;\n  }\n}\n\nvariable \u0026quot;gcp_region\u0026quot; {\n  description = \u0026quot;GCP region for resources\u0026quot;\n  type        = string\n  default     = \u0026quot;us-central1\u0026quot;\n}\n\nvariable \u0026quot;gcp_zone\u0026quot; {\n  description = \u0026quot;GCP zone for resources\u0026quot;\n  type        = string\n  default     = \u0026quot;us-central1-a\u0026quot;\n}\n\n# Environment Variables\nvariable \u0026quot;environment\u0026quot; {\n  description = \u0026quot;Environment name\u0026quot;\n  type        = string\n  default     = \u0026quot;development\u0026quot;\n  validation {\n    condition     = contains([\u0026quot;development\u0026quot;, \u0026quot;staging\u0026quot;, \u0026quot;production\u0026quot;], var.environment)\n    error_message = \u0026quot;Environment must be development, staging, or production.\u0026quot;\n  }\n}\n\nvariable \u0026quot;project_name\u0026quot; {\n  description = \u0026quot;Project name for resource naming\u0026quot;\n  type        = string\n  validation {\n    condition     = length(var.project_name) \u0026gt; 0 \u0026amp;\u0026amp; length(var.project_name) \u0026lt;= 20\n    error_message = \u0026quot;Project name must be between 1 and 20 characters.\u0026quot;\n  }\n}\n\nvariable \u0026quot;owner\u0026quot; {\n  description = \u0026quot;Owner of the infrastructure\u0026quot;\n  type        = string\n}\n\n# Networking Variables\nvariable \u0026quot;vpc_cidr\u0026quot; {\n  description = \u0026quot;CIDR block for VPC\u0026quot;\n  type        = string\n  default     = \u0026quot;10.0.0.0/16\u0026quot;\n  validation {\n    condition     = can(cidrhost(var.vpc_cidr, 0))\n    error_message = \u0026quot;VPC CIDR must be a valid IPv4 CIDR block.\u0026quot;\n  }\n}\n\n# Instance Variables\nvariable \u0026quot;instance_type\u0026quot; {\n  description = \u0026quot;Instance types for different clouds\u0026quot;\n  type = object({\n    aws   = string\n    azure = string\n    gcp   = string\n  })\n  default = {\n    aws   = \u0026quot;t3.micro\u0026quot;\n    azure = \u0026quot;Standard_B1s\u0026quot;\n    gcp   = \u0026quot;e2-micro\u0026quot;\n  }\n}\n\n# Sensitive Variables (use terraform.tfvars or environment variables)\nvariable \u0026quot;database_password\u0026quot; {\n  description = \u0026quot;Database password\u0026quot;\n  type        = string\n  sensitive   = true\n  validation {\n    condition     = length(var.database_password) \u0026gt;= 12\n    error_message = \u0026quot;Database password must be at least 12 characters.\u0026quot;\n  }\n}\n\nvariable \u0026quot;ssh_public_key\u0026quot; {\n  description = \u0026quot;SSH public key for instance access\u0026quot;\n  type        = string\n  validation {\n    condition     = can(regex(\u0026quot;^ssh-\u0026quot;, var.ssh_public_key))\n    error_message = \u0026quot;SSH public key must be a valid SSH public key.\u0026quot;\n  }\n}\nEOF\n\n# Create terraform.tfvars (never commit to version control)\ncat \u0026gt; terraform.tfvars.example \u0026lt;\u0026lt;EOF\n# Copy to terraform.tfvars and fill in your values\nproject_name     = \u0026quot;myproject\u0026quot;\nowner           = \u0026quot;devops-team\u0026quot;\nenvironment     = \u0026quot;production\u0026quot;\n\n# AWS\naws_region = \u0026quot;us-west-2\u0026quot;\n\n# Azure  \nazure_location = \u0026quot;East US\u0026quot;\n\n# GCP\ngcp_project_id = \u0026quot;my-gcp-project-id\u0026quot;\ngcp_region     = \u0026quot;us-central1\u0026quot;\ngcp_zone       = \u0026quot;us-central1-a\u0026quot;\n\n# Security\ndatabase_password = \u0026quot;your-secure-database-password\u0026quot;\nssh_public_key   = \u0026quot;ssh-rsa AAAAB3NzaC1yc2E...\u0026quot;\nEOF\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"secrets-management-integration\" class=\"mobile-header\"\u003eSecrets Management Integration\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# HashiCorp Vault integration\ncat \u0026gt; vault.tf \u0026lt;\u0026lt;EOF\n# Vault provider for secrets management\nterraform {\n  required_providers {\n    vault = {\n      source  = \u0026quot;hashicorp/vault\u0026quot;\n      version = \u0026quot;~\u0026gt; 3.0\u0026quot;\n    }\n  }\n}\n\nprovider \u0026quot;vault\u0026quot; {\n  address = var.vault_address\n  token   = var.vault_token\n}\n\n# Read secrets from Vault\ndata \u0026quot;vault_generic_secret\u0026quot; \u0026quot;database\u0026quot; {\n  path = \u0026quot;secret/database\u0026quot;\n}\n\n# Use secrets in resources\nresource \u0026quot;aws_db_instance\u0026quot; \u0026quot;main\u0026quot; {\n  identifier_prefix = var.project_name\n  \n  username = data.vault_generic_secret.database.data[\u0026quot;username\u0026quot;]\n  password = data.vault_generic_secret.database.data[\u0026quot;password\u0026quot;]\n  \n  # Other configuration...\n}\nEOF\n\n# AWS Secrets Manager integration\ncat \u0026gt; aws-secrets.tf \u0026lt;\u0026lt;EOF\n# Retrieve secrets from AWS Secrets Manager\ndata \u0026quot;aws_secretsmanager_secret_version\u0026quot; \u0026quot;database_credentials\u0026quot; {\n  secret_id = \u0026quot;prod/database/credentials\u0026quot;\n}\n\nlocals {\n  database_creds = jsondecode(data.aws_secretsmanager_secret_version.database_credentials.secret_string)\n}\n\nresource \u0026quot;aws_db_instance\u0026quot; \u0026quot;main\u0026quot; {\n  username = local.database_creds.username\n  password = local.database_creds.password\n  \n  # Other configuration...\n}\nEOF\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"advanced-multi-cloud-architecture\" class=\"mobile-header\"\u003eAdvanced Multi-Cloud Architecture\u003c/h2\u003e\n\u003ch3 id=\"cross-cloud-networking\" class=\"mobile-header\"\u003eCross-Cloud Networking\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Create multi-cloud VPN connection\ncat \u0026gt; networking.tf \u0026lt;\u0026lt;EOF\n# AWS VPC and VPN Gateway\nresource \u0026quot;aws_vpc\u0026quot; \u0026quot;main\u0026quot; {\n  cidr_block           = \u0026quot;10.0.0.0/16\u0026quot;\n  enable_dns_hostnames = true\n  enable_dns_support   = true\n\n  tags = {\n    Name = \u0026quot;\\${var.environment}-aws-vpc\u0026quot;\n  }\n}\n\nresource \u0026quot;aws_vpn_gateway\u0026quot; \u0026quot;main\u0026quot; {\n  vpc_id = aws_vpc.main.id\n\n  tags = {\n    Name = \u0026quot;\\${var.environment}-aws-vpn-gw\u0026quot;\n  }\n}\n\n# Azure Virtual Network Gateway\nresource \u0026quot;azurerm_virtual_network_gateway\u0026quot; \u0026quot;main\u0026quot; {\n  name                = \u0026quot;\\${var.environment}-azure-vpn-gw\u0026quot;\n  location            = azurerm_resource_group.main.location\n  resource_group_name = azurerm_resource_group.main.name\n\n  type     = \u0026quot;Vpn\u0026quot;\n  vpn_type = \u0026quot;RouteBased\u0026quot;\n\n  active_active = false\n  enable_bgp    = false\n  sku           = \u0026quot;VpnGw1\u0026quot;\n\n  ip_configuration {\n    name                          = \u0026quot;vnetGatewayConfig\u0026quot;\n    public_ip_address_id          = azurerm_public_ip.vpn_gateway.id\n    private_ip_address_allocation = \u0026quot;Dynamic\u0026quot;\n    subnet_id                     = azurerm_subnet.gateway.id\n  }\n}\n\n# GCP VPN Gateway\nresource \u0026quot;google_compute_vpn_gateway\u0026quot; \u0026quot;main\u0026quot; {\n  name    = \u0026quot;\\${var.environment}-gcp-vpn-gw\u0026quot;\n  network = google_compute_network.main.id\n  project = var.gcp_project_id\n  region  = var.gcp_region\n}\n\n# Cross-cloud VPN tunnels\nresource \u0026quot;aws_vpn_connection\u0026quot; \u0026quot;aws_to_azure\u0026quot; {\n  vpn_gateway_id      = aws_vpn_gateway.main.id\n  customer_gateway_id = aws_customer_gateway.azure.id\n  type                = \u0026quot;ipsec.1\u0026quot;\n  static_routes_only  = true\n\n  tags = {\n    Name = \u0026quot;\\${var.environment}-aws-to-azure-vpn\u0026quot;\n  }\n}\n\n# Local values for cross-cloud coordination\nlocals {\n  aws_vpc_cidr   = \u0026quot;10.0.0.0/16\u0026quot;\n  azure_vnet_cidr = \u0026quot;10.1.0.0/16\u0026quot;\n  gcp_vpc_cidr   = \u0026quot;10.2.0.0/16\u0026quot;\n  \n  common_tags = {\n    Environment   = var.environment\n    Project       = var.project_name\n    ManagedBy     = \u0026quot;terraform\u0026quot;\n    Owner         = var.owner\n    CreatedAt     = timestamp()\n  }\n}\nEOF\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"global-load-balancing\" class=\"mobile-header\"\u003eGlobal Load Balancing\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Multi-cloud global load balancer using Cloudflare\ncat \u0026gt; global-lb.tf \u0026lt;\u0026lt;EOF\nterraform {\n  required_providers {\n    cloudflare = {\n      source  = \u0026quot;cloudflare/cloudflare\u0026quot;\n      version = \u0026quot;~\u0026gt; 4.0\u0026quot;\n    }\n  }\n}\n\nprovider \u0026quot;cloudflare\u0026quot; {\n  api_token = var.cloudflare_api_token\n}\n\n# Cloudflare zone\ndata \u0026quot;cloudflare_zone\u0026quot; \u0026quot;main\u0026quot; {\n  name = var.domain_name\n}\n\n# AWS ALB DNS record\nresource \u0026quot;cloudflare_record\u0026quot; \u0026quot;aws_lb\u0026quot; {\n  zone_id = data.cloudflare_zone.main.id\n  name    = \u0026quot;aws\u0026quot;\n  value   = aws_lb.main.dns_name\n  type    = \u0026quot;CNAME\u0026quot;\n  ttl     = 300\n\n  comment = \u0026quot;AWS Application Load Balancer\u0026quot;\n}\n\n# Azure Load Balancer DNS record  \nresource \u0026quot;cloudflare_record\u0026quot; \u0026quot;azure_lb\u0026quot; {\n  zone_id = data.cloudflare_zone.main.id\n  name    = \u0026quot;azure\u0026quot;\n  value   = azurerm_public_ip.lb.fqdn\n  type    = \u0026quot;CNAME\u0026quot;\n  ttl     = 300\n\n  comment = \u0026quot;Azure Load Balancer\u0026quot;\n}\n\n# GCP Load Balancer DNS record\nresource \u0026quot;cloudflare_record\u0026quot; \u0026quot;gcp_lb\u0026quot; {\n  zone_id = data.cloudflare_zone.main.id\n  name    = \u0026quot;gcp\u0026quot;\n  value   = google_compute_global_address.main.address\n  type    = \u0026quot;A\u0026quot;\n  ttl     = 300\n\n  comment = \u0026quot;GCP Global Load Balancer\u0026quot;\n}\n\n# Global load balancer with health checks and failover\nresource \u0026quot;cloudflare_load_balancer\u0026quot; \u0026quot;global\u0026quot; {\n  zone_id = data.cloudflare_zone.main.id\n  name    = \u0026quot;global-lb\u0026quot;\n  \n  fallback_pool_id = cloudflare_load_balancer_pool.backup.id\n  default_pool_ids = [\n    cloudflare_load_balancer_pool.primary.id,\n    cloudflare_load_balancer_pool.secondary.id\n  ]\n\n  description = \u0026quot;Multi-cloud global load balancer\u0026quot;\n  ttl         = 30\n  proxied     = true\n\n  adaptive_routing {\n    failover_across_pools = true\n  }\n\n  location_strategy {\n    prefer_ecs = \u0026quot;never\u0026quot;\n    mode       = \u0026quot;resolver_ip\u0026quot;\n  }\n}\n\n# Primary pool (AWS)\nresource \u0026quot;cloudflare_load_balancer_pool\u0026quot; \u0026quot;primary\u0026quot; {\n  name = \u0026quot;aws-primary\u0026quot;\n\n  origins {\n    name    = \u0026quot;aws-west\u0026quot;\n    address = aws_lb.main.dns_name\n    enabled = true\n  }\n\n  monitor              = cloudflare_load_balancer_monitor.http.id\n  description          = \u0026quot;AWS West Coast\u0026quot;\n  enabled              = true\n  minimum_origins      = 1\n  notification_email   = \u0026quot;alerts@example.com\u0026quot;\n}\n\n# Secondary pool (Azure)\nresource \u0026quot;cloudflare_load_balancer_pool\u0026quot; \u0026quot;secondary\u0026quot; {\n  name = \u0026quot;azure-secondary\u0026quot;\n\n  origins {\n    name    = \u0026quot;azure-east\u0026quot;\n    address = azurerm_public_ip.lb.ip_address\n    enabled = true\n  }\n\n  monitor         = cloudflare_load_balancer_monitor.http.id\n  description     = \u0026quot;Azure East Coast\u0026quot;\n  enabled         = true\n  minimum_origins = 1\n}\n\n# Health monitor\nresource \u0026quot;cloudflare_load_balancer_monitor\u0026quot; \u0026quot;http\u0026quot; {\n  expected_codes = \u0026quot;200\u0026quot;\n  method         = \u0026quot;GET\u0026quot;\n  timeout        = 7\n  path           = \u0026quot;/health\u0026quot;\n  interval       = 60\n  retries        = 3\n  description    = \u0026quot;HTTP health check\u0026quot;\n\n  header {\n    header = \u0026quot;Host\u0026quot;\n    values = [\u0026quot;example.com\u0026quot;]\n  }\n}\nEOF\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"cicd-integration\" class=\"mobile-header\"\u003eCI/CD Integration\u003c/h2\u003e\n\u003ch3 id=\"github-actions-workflow\" class=\"mobile-header\"\u003eGitHub Actions Workflow\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003emkdir -p .github/workflows\ncat \u0026gt; .github/workflows/terraform.yml \u0026lt;\u0026lt;EOF\nname: Terraform Multi-Cloud Deployment\n\non:\n  push:\n    branches: [ main, develop ]\n  pull_request:\n    branches: [ main ]\n\nenv:\n  TF_VERSION: 1.6.4\n\njobs:\n  terraform:\n    runs-on: ubuntu-latest\n    strategy:\n      matrix:\n        environment: [development, staging, production]\n        \n    steps:\n    - name: Checkout code\n      uses: actions/checkout@v4\n    \n    - name: Setup Terraform\n      uses: hashicorp/setup-terraform@v3\n      with:\n        terraform_version: \\${{ env.TF_VERSION }}\n        cli_config_credentials_token: \\${{ secrets.TF_CLOUD_TOKEN }}\n    \n    - name: Configure AWS credentials\n      uses: aws-actions/configure-aws-credentials@v4\n      with:\n        aws-access-key-id: \\${{ secrets.AWS_ACCESS_KEY_ID }}\n        aws-secret-access-key: \\${{ secrets.AWS_SECRET_ACCESS_KEY }}\n        aws-region: us-west-2\n    \n    - name: Configure Azure credentials\n      uses: azure/login@v1\n      with:\n        creds: \\${{ secrets.AZURE_CREDENTIALS }}\n    \n    - name: Configure GCP credentials\n      uses: google-github-actions/setup-gcloud@v1\n      with:\n        service_account_key: \\${{ secrets.GCP_SA_KEY }}\n        project_id: \\${{ secrets.GCP_PROJECT_ID }}\n    \n    - name: Terraform Format Check\n      run: terraform fmt -check -recursive\n    \n    - name: Terraform Initialize\n      run: terraform init\n      working-directory: environments/\\${{ matrix.environment }}\n    \n    - name: Terraform Validate\n      run: terraform validate\n      working-directory: environments/\\${{ matrix.environment }}\n    \n    - name: Terraform Plan\n      run: terraform plan -var-file=\u0026quot;\\${{ matrix.environment }}.tfvars\u0026quot;\n      working-directory: environments/\\${{ matrix.environment }}\n    \n    - name: Terraform Apply (Production)\n      if: github.ref == \u0026#039;refs/heads/main\u0026#039; \u0026amp;\u0026amp; matrix.environment == \u0026#039;production\u0026#039;\n      run: terraform apply -auto-approve -var-file=\u0026quot;production.tfvars\u0026quot;\n      working-directory: environments/production\n    \n    - name: Terraform Plan Status\n      if: steps.plan.outcome == \u0026#039;failure\u0026#039;\n      run: exit 1\n    \n    - name: Security Scan with Checkov\n      uses: bridgecrewio/checkov-action@master\n      with:\n        directory: .\n        framework: terraform\n        output_format: sarif\n        output_file_path: checkov.sarif\n    \n    - name: Upload Checkov results to GitHub\n      uses: github/codeql-action/upload-sarif@v2\n      if: always()\n      with:\n        sarif_file: checkov.sarif\nEOF\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"gitlab-ci-integration\" class=\"mobile-header\"\u003eGitLab CI Integration\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003ecat \u0026gt; .gitlab-ci.yml \u0026lt;\u0026lt;EOF\nstages:\n  - validate\n  - plan\n  - apply\n  - destroy\n\nvariables:\n  TF_ROOT: \\${CI_PROJECT_DIR}\n  TF_VERSION: \u0026quot;1.6.4\u0026quot;\n  TF_IN_AUTOMATION: \u0026quot;true\u0026quot;\n\ncache:\n  key: \u0026quot;\\${TF_ROOT}\u0026quot;\n  paths:\n    - \\${TF_ROOT}/.terraform\n\nbefore_script:\n  - cd \\${TF_ROOT}\n  - terraform version\n  - terraform init\n\nvalidate:\n  stage: validate\n  script:\n    - terraform fmt -check -recursive\n    - terraform validate\n    - |\n      for dir in environments/*/; do\n        cd \u0026quot;\\$dir\u0026quot;\n        terraform validate\n        cd -\n      done\n  rules:\n    - if: \u0026#039;\\$CI_MERGE_REQUEST_IID\u0026#039;\n    - if: \u0026#039;\\$CI_COMMIT_BRANCH == \\$CI_DEFAULT_BRANCH\u0026#039;\n\nplan:development:\n  stage: plan\n  script:\n    - cd environments/development\n    - terraform plan -var-file=\u0026quot;development.tfvars\u0026quot; -out=\u0026quot;development.tfplan\u0026quot;\n  artifacts:\n    paths:\n      - environments/development/development.tfplan\n    expire_in: 1 week\n  rules:\n    - if: \u0026#039;\\$CI_MERGE_REQUEST_IID\u0026#039;\n    - if: \u0026#039;\\$CI_COMMIT_BRANCH == \u0026quot;develop\u0026quot;\u0026#039;\n\nplan:production:\n  stage: plan\n  script:\n    - cd environments/production\n    - terraform plan -var-file=\u0026quot;production.tfvars\u0026quot; -out=\u0026quot;production.tfplan\u0026quot;\n  artifacts:\n    paths:\n      - environments/production/production.tfplan\n    expire_in: 1 week\n  rules:\n    - if: \u0026#039;\\$CI_COMMIT_BRANCH == \\$CI_DEFAULT_BRANCH\u0026#039;\n\napply:development:\n  stage: apply\n  script:\n    - cd environments/development\n    - terraform apply -input=false \u0026quot;development.tfplan\u0026quot;\n  dependencies:\n    - plan:development\n  rules:\n    - if: \u0026#039;\\$CI_COMMIT_BRANCH == \u0026quot;develop\u0026quot;\u0026#039;\n      when: manual\n\napply:production:\n  stage: apply\n  script:\n    - cd environments/production\n    - terraform apply -input=false \u0026quot;production.tfplan\u0026quot;\n  dependencies:\n    - plan:production\n  rules:\n    - if: \u0026#039;\\$CI_COMMIT_BRANCH == \\$CI_DEFAULT_BRANCH\u0026#039;\n      when: manual\n\ndestroy:\n  stage: destroy\n  script:\n    - terraform destroy -auto-approve -var-file=\u0026quot;\\${ENVIRONMENT}.tfvars\u0026quot;\n  rules:\n    - if: \u0026#039;\\$CI_COMMIT_BRANCH\u0026#039;\n      when: manual\n  variables:\n    ENVIRONMENT: \u0026quot;development\u0026quot;  # Change as needed\nEOF\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"modules-and-best-practices\" class=\"mobile-header\"\u003eModules and Best Practices\u003c/h2\u003e\n\u003ch3 id=\"reusable-module-structure\" class=\"mobile-header\"\u003eReusable Module Structure\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Create module directory structure\nmkdir -p modules/compute/{aws,azure,gcp}\n\n# AWS Compute Module\ncat \u0026gt; modules/compute/aws/main.tf \u0026lt;\u0026lt;EOF\n# AWS EC2 Instance Module\nresource \u0026quot;aws_instance\u0026quot; \u0026quot;main\u0026quot; {\n  count                  = var.instance_count\n  ami                    = data.aws_ami.ubuntu.id\n  instance_type          = var.instance_type\n  key_name              = aws_key_pair.main.key_name\n  vpc_security_group_ids = [aws_security_group.main.id]\n  subnet_id             = var.subnet_id\n\n  user_data = templatefile(\u0026quot;\\${path.module}/user-data.sh\u0026quot;, {\n    hostname = \u0026quot;\\${var.name_prefix}-\\${count.index + 1}\u0026quot;\n  })\n\n  root_block_device {\n    volume_type           = \u0026quot;gp3\u0026quot;\n    volume_size           = var.disk_size\n    encrypted             = true\n    delete_on_termination = true\n  }\n\n  metadata_options {\n    http_endpoint = \u0026quot;enabled\u0026quot;\n    http_tokens   = \u0026quot;required\u0026quot;  # IMDSv2 only\n    http_put_response_hop_limit = 1\n  }\n\n  tags = merge(var.common_tags, {\n    Name = \u0026quot;\\${var.name_prefix}-\\${count.index + 1}\u0026quot;\n    Type = \u0026quot;compute\u0026quot;\n  })\n}\n\n# Security Group\nresource \u0026quot;aws_security_group\u0026quot; \u0026quot;main\u0026quot; {\n  name_prefix = \u0026quot;\\${var.name_prefix}-\u0026quot;\n  vpc_id      = var.vpc_id\n\n  ingress {\n    description = \u0026quot;SSH\u0026quot;\n    from_port   = 22\n    to_port     = 22\n    protocol    = \u0026quot;tcp\u0026quot;\n    cidr_blocks = [var.vpc_cidr]\n  }\n\n  ingress {\n    description = \u0026quot;HTTP\u0026quot;\n    from_port   = 80\n    to_port     = 80\n    protocol    = \u0026quot;tcp\u0026quot;\n    cidr_blocks = [\u0026quot;0.0.0.0/0\u0026quot;]\n  }\n\n  ingress {\n    description = \u0026quot;HTTPS\u0026quot;\n    from_port   = 443\n    to_port     = 443\n    protocol    = \u0026quot;tcp\u0026quot;\n    cidr_blocks = [\u0026quot;0.0.0.0/0\u0026quot;]\n  }\n\n  egress {\n    from_port   = 0\n    to_port     = 0\n    protocol    = \u0026quot;-1\u0026quot;\n    cidr_blocks = [\u0026quot;0.0.0.0/0\u0026quot;]\n  }\n\n  tags = var.common_tags\n}\n\n# Key pair\nresource \u0026quot;aws_key_pair\u0026quot; \u0026quot;main\u0026quot; {\n  key_name   = \u0026quot;\\${var.name_prefix}-keypair\u0026quot;\n  public_key = var.ssh_public_key\n\n  tags = var.common_tags\n}\n\n# Data source for latest Ubuntu AMI\ndata \u0026quot;aws_ami\u0026quot; \u0026quot;ubuntu\u0026quot; {\n  most_recent = true\n  owners      = [\u0026quot;099720109477\u0026quot;] # Canonical\n\n  filter {\n    name   = \u0026quot;name\u0026quot;\n    values = [\u0026quot;ubuntu/images/hvm-ssd/ubuntu-jammy-22.04-amd64-server-*\u0026quot;]\n  }\n\n  filter {\n    name   = \u0026quot;virtualization-type\u0026quot;\n    values = [\u0026quot;hvm\u0026quot;]\n  }\n}\nEOF\n\n# Module variables\ncat \u0026gt; modules/compute/aws/variables.tf \u0026lt;\u0026lt;EOF\nvariable \u0026quot;instance_count\u0026quot; {\n  description = \u0026quot;Number of instances to create\u0026quot;\n  type        = number\n  default     = 1\n}\n\nvariable \u0026quot;instance_type\u0026quot; {\n  description = \u0026quot;AWS instance type\u0026quot;\n  type        = string\n  default     = \u0026quot;t3.micro\u0026quot;\n}\n\nvariable \u0026quot;disk_size\u0026quot; {\n  description = \u0026quot;Root disk size in GB\u0026quot;\n  type        = number\n  default     = 20\n}\n\nvariable \u0026quot;name_prefix\u0026quot; {\n  description = \u0026quot;Name prefix for resources\u0026quot;\n  type        = string\n}\n\nvariable \u0026quot;vpc_id\u0026quot; {\n  description = \u0026quot;VPC ID\u0026quot;\n  type        = string\n}\n\nvariable \u0026quot;subnet_id\u0026quot; {\n  description = \u0026quot;Subnet ID for instances\u0026quot;\n  type        = string\n}\n\nvariable \u0026quot;vpc_cidr\u0026quot; {\n  description = \u0026quot;VPC CIDR block\u0026quot;\n  type        = string\n}\n\nvariable \u0026quot;ssh_public_key\u0026quot; {\n  description = \u0026quot;SSH public key\u0026quot;\n  type        = string\n}\n\nvariable \u0026quot;common_tags\u0026quot; {\n  description = \u0026quot;Common tags for all resources\u0026quot;\n  type        = map(string)\n  default     = {}\n}\nEOF\n\n# Module outputs\ncat \u0026gt; modules/compute/aws/outputs.tf \u0026lt;\u0026lt;EOF\noutput \u0026quot;instance_ids\u0026quot; {\n  description = \u0026quot;List of instance IDs\u0026quot;\n  value       = aws_instance.main[*].id\n}\n\noutput \u0026quot;instance_ips\u0026quot; {\n  description = \u0026quot;List of instance private IP addresses\u0026quot;\n  value       = aws_instance.main[*].private_ip\n}\n\noutput \u0026quot;instance_public_ips\u0026quot; {\n  description = \u0026quot;List of instance public IP addresses\u0026quot;\n  value       = aws_instance.main[*].public_ip\n}\n\noutput \u0026quot;security_group_id\u0026quot; {\n  description = \u0026quot;Security group ID\u0026quot;\n  value       = aws_security_group.main.id\n}\nEOF\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"environment-specific-configurations\" class=\"mobile-header\"\u003eEnvironment-Specific Configurations\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Create environment directory structure\nmkdir -p environments/{development,staging,production}\n\n# Development environment\ncat \u0026gt; environments/development/main.tf \u0026lt;\u0026lt;EOF\n# Development Environment Configuration\nmodule \u0026quot;aws_infrastructure\u0026quot; {\n  source = \u0026quot;../../modules/infrastructure/aws\u0026quot;\n  \n  environment     = \u0026quot;development\u0026quot;\n  instance_type   = \u0026quot;t3.micro\u0026quot;\n  min_size       = 1\n  max_size       = 2\n  disk_size      = 20\n  \n  common_tags = local.common_tags\n}\n\nmodule \u0026quot;azure_infrastructure\u0026quot; {\n  source = \u0026quot;../../modules/infrastructure/azure\u0026quot;\n  \n  environment   = \u0026quot;development\u0026quot;\n  vm_size      = \u0026quot;Standard_B1s\u0026quot;\n  instance_count = 1\n  \n  common_tags = local.common_tags\n}\n\nlocals {\n  common_tags = {\n    Environment   = \u0026quot;development\u0026quot;\n    Project       = var.project_name\n    ManagedBy     = \u0026quot;terraform\u0026quot;\n    Owner         = var.owner\n    CostCenter    = \u0026quot;development\u0026quot;\n  }\n}\nEOF\n\ncat \u0026gt; environments/development/development.tfvars \u0026lt;\u0026lt;EOF\n# Development Environment Variables\nproject_name = \u0026quot;myproject-dev\u0026quot;\nenvironment  = \u0026quot;development\u0026quot;\nowner       = \u0026quot;devops-team\u0026quot;\n\n# AWS\naws_region = \u0026quot;us-west-2\u0026quot;\ninstance_type = {\n  aws   = \u0026quot;t3.micro\u0026quot;\n  azure = \u0026quot;Standard_B1s\u0026quot; \n  gcp   = \u0026quot;e2-micro\u0026quot;\n}\n\n# Networking\nvpc_cidr = \u0026quot;10.0.0.0/16\u0026quot;\n\n# Development-specific settings\nenable_detailed_monitoring = false\nbackup_retention_days     = 7\nlog_retention_days       = 30\nEOF\n\n# Production environment\ncat \u0026gt; environments/production/main.tf \u0026lt;\u0026lt;EOF\n# Production Environment Configuration\nmodule \u0026quot;aws_infrastructure\u0026quot; {\n  source = \u0026quot;../../modules/infrastructure/aws\u0026quot;\n  \n  environment     = \u0026quot;production\u0026quot;\n  instance_type   = \u0026quot;t3.large\u0026quot;\n  min_size       = 3\n  max_size       = 10\n  disk_size      = 100\n  \n  enable_monitoring = true\n  backup_enabled   = true\n  \n  common_tags = local.common_tags\n}\n\nmodule \u0026quot;azure_infrastructure\u0026quot; {\n  source = \u0026quot;../../modules/infrastructure/azure\u0026quot;\n  \n  environment    = \u0026quot;production\u0026quot;\n  vm_size       = \u0026quot;Standard_D2s_v3\u0026quot;\n  instance_count = 3\n  \n  enable_backup = true\n  \n  common_tags = local.common_tags\n}\n\nmodule \u0026quot;gcp_infrastructure\u0026quot; {\n  source = \u0026quot;../../modules/infrastructure/gcp\u0026quot;\n  \n  environment    = \u0026quot;production\u0026quot;\n  machine_type  = \u0026quot;e2-standard-2\u0026quot;\n  instance_count = 3\n  \n  enable_backup = true\n  \n  common_tags = local.common_tags\n}\n\nlocals {\n  common_tags = {\n    Environment   = \u0026quot;production\u0026quot;\n    Project       = var.project_name\n    ManagedBy     = \u0026quot;terraform\u0026quot;\n    Owner         = var.owner\n    CostCenter    = \u0026quot;production\u0026quot;\n    Compliance    = \u0026quot;SOC2\u0026quot;\n  }\n}\nEOF\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"security-scanning-and-compliance\" class=\"mobile-header\"\u003eSecurity Scanning and Compliance\u003c/h2\u003e\n\u003ch3 id=\"pre-commit-hooks\" class=\"mobile-header\"\u003ePre-commit Hooks\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Install pre-commit\npip3 install pre-commit\n\n# Create .pre-commit-config.yaml\ncat \u0026gt; .pre-commit-config.yaml \u0026lt;\u0026lt;EOF\nrepos:\n- repo: https://github.com/antonbabenko/pre-commit-terraform\n  rev: v1.83.5\n  hooks:\n    - id: terraform_fmt\n    - id: terraform_validate\n    - id: terraform_docs\n    - id: terraform_tflint\n      args:\n        - --args=--config=__GIT_WORKING_DIR__/.tflint.hcl\n    - id: terraform_checkov\n      args:\n        - --args=--config-file __GIT_WORKING_DIR__/.checkov.yaml\n    - id: terraform_trivy\n\n- repo: https://github.com/pre-commit/pre-commit-hooks\n  rev: v4.4.0\n  hooks:\n    - id: trailing-whitespace\n    - id: end-of-file-fixer\n    - id: check-yaml\n    - id: check-added-large-files\n    - id: check-merge-conflict\nEOF\n\n# Install pre-commit hooks\npre-commit install\n\n# Create security scanning configuration\ncat \u0026gt; .checkov.yaml \u0026lt;\u0026lt;EOF\nframework:\n  - terraform\n  - secrets\n\ncheck:\n  - CKV_AWS_79  # Ensure Instance Metadata Service Version 1 is not enabled\n  - CKV_AWS_8   # Ensure all data stored in the Launch configuration EBS is securely encrypted at rest\n  - CKV_AWS_3   # Ensure all data stored in the Launch configuration EBS is securely encrypted at rest\n\nskip-check:\n  - CKV_AWS_79  # Skip if IMDSv1 is required for legacy applications\n\noutput: cli\nquiet: false\ncompact: false\nEOF\n\n# TFLint configuration\ncat \u0026gt; .tflint.hcl \u0026lt;\u0026lt;EOF\nplugin \u0026quot;aws\u0026quot; {\n    enabled = true\n    version = \u0026quot;0.21.2\u0026quot;\n    source  = \u0026quot;github.com/terraform-linters/tflint-ruleset-aws\u0026quot;\n}\n\nplugin \u0026quot;azurerm\u0026quot; {\n    enabled = true\n    version = \u0026quot;0.21.0\u0026quot;\n    source  = \u0026quot;github.com/terraform-linters/tflint-ruleset-azurerm\u0026quot;\n}\n\nplugin \u0026quot;google\u0026quot; {\n    enabled = true\n    version = \u0026quot;0.21.0\u0026quot;\n    source  = \u0026quot;github.com/terraform-linters/tflint-ruleset-google\u0026quot;\n}\n\nrule \u0026quot;aws_instance_invalid_type\u0026quot; {\n  enabled = true\n}\n\nrule \u0026quot;aws_instance_previous_type\u0026quot; {\n  enabled = true\n}\n\nrule \u0026quot;terraform_unused_declarations\u0026quot; {\n  enabled = true\n}\n\nrule \u0026quot;terraform_naming_convention\u0026quot; {\n  enabled = true\n  format  = \u0026quot;snake_case\u0026quot;\n}\nEOF\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"terraform-workspace-management\" class=\"mobile-header\"\u003eTerraform Workspace Management\u003c/h2\u003e\n\u003ch3 id=\"multi-environment-workflows\" class=\"mobile-header\"\u003eMulti-Environment Workflows\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Create and manage workspaces\nterraform workspace new development\nterraform workspace new staging\nterraform workspace new production\n\n# List workspaces\nterraform workspace list\n\n# Switch workspace\nterraform workspace select production\n\n# Show current workspace\nterraform workspace show\n\n# Workspace-specific configurations\ncat \u0026gt; workspace-vars.tf \u0026lt;\u0026lt;EOF\nlocals {\n  workspace_config = {\n    development = {\n      instance_type = \u0026quot;t3.micro\u0026quot;\n      min_size     = 1\n      max_size     = 2\n      environment  = \u0026quot;dev\u0026quot;\n    }\n    staging = {\n      instance_type = \u0026quot;t3.small\u0026quot;\n      min_size     = 2\n      max_size     = 4\n      environment  = \u0026quot;staging\u0026quot;\n    }\n    production = {\n      instance_type = \u0026quot;t3.large\u0026quot;\n      min_size     = 3\n      max_size     = 10\n      environment  = \u0026quot;prod\u0026quot;\n    }\n  }\n  \n  current_config = local.workspace_config[terraform.workspace]\n}\n\n# Use workspace-specific configuration\nresource \u0026quot;aws_instance\u0026quot; \u0026quot;web\u0026quot; {\n  count         = local.current_config.min_size\n  instance_type = local.current_config.instance_type\n  \n  tags = {\n    Name        = \u0026quot;\\${local.current_config.environment}-web-\\${count.index + 1}\u0026quot;\n    Environment = local.current_config.environment\n    Workspace   = terraform.workspace\n  }\n}\nEOF\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"state-management-best-practices\" class=\"mobile-header\"\u003eState Management Best Practices\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Remote state configuration with different backends\ncat \u0026gt; backend-configs/s3.conf \u0026lt;\u0026lt;EOF\nbucket         = \u0026quot;terraform-state-bucket\u0026quot;\nkey            = \u0026quot;infrastructure/terraform.tfstate\u0026quot;\nregion         = \u0026quot;us-west-2\u0026quot;\nencrypt        = true\nkms_key_id     = \u0026quot;arn:aws:kms:us-west-2:ACCOUNT:key/KEY-ID\u0026quot;\ndynamodb_table = \u0026quot;terraform-state-lock\u0026quot;\nEOF\n\ncat \u0026gt; backend-configs/azurerm.conf \u0026lt;\u0026lt;EOF\nresource_group_name  = \u0026quot;terraform-state-rg\u0026quot;\nstorage_account_name = \u0026quot;terraformstatestorage\u0026quot;\ncontainer_name      = \u0026quot;tfstate\u0026quot;\nkey                 = \u0026quot;infrastructure.terraform.tfstate\u0026quot;\nEOF\n\ncat \u0026gt; backend-configs/gcs.conf \u0026lt;\u0026lt;EOF\nbucket  = \u0026quot;terraform-state-bucket\u0026quot;\nprefix  = \u0026quot;infrastructure/state\u0026quot;\nEOF\n\n# Initialize with specific backend\nterraform init -backend-config=backend-configs/s3.conf\n\n# Import existing resources\nterraform import aws_instance.web i-1234567890abcdef0\nterraform import azurerm_virtual_machine.main /subscriptions/.../resourceGroups/.../providers/Microsoft.Compute/virtualMachines/vm-name\n\n# State manipulation commands\nterraform state list\nterraform state show aws_instance.web\nterraform state mv aws_instance.web aws_instance.web_server\nterraform state rm aws_instance.old\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"security-hardening\" class=\"mobile-header\"\u003eSecurity Hardening\u003c/h2\u003e\n\u003ch3 id=\"credential-management\" class=\"mobile-header\"\u003eCredential Management\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Use environment variables for credentials (never hardcode)\ncat \u0026gt; .env.example \u0026lt;\u0026lt;EOF\n# AWS\nAWS_ACCESS_KEY_ID=your_access_key\nAWS_SECRET_ACCESS_KEY=your_secret_key\nAWS_DEFAULT_REGION=us-west-2\n\n# Azure\nARM_CLIENT_ID=your_client_id\nARM_CLIENT_SECRET=your_client_secret\nARM_SUBSCRIPTION_ID=your_subscription_id\nARM_TENANT_ID=your_tenant_id\n\n# GCP\nGOOGLE_APPLICATION_CREDENTIALS=/path/to/service-account-key.json\nGOOGLE_PROJECT=your_project_id\nGOOGLE_REGION=us-central1\n\n# Terraform Cloud/Enterprise\nTF_CLOUD_TOKEN=your_terraform_cloud_token\nEOF\n\n# Use IAM roles instead of access keys (AWS)\ncat \u0026gt; iam-role.tf \u0026lt;\u0026lt;EOF\n# IAM role for Terraform execution (when running on EC2)\nresource \u0026quot;aws_iam_role\u0026quot; \u0026quot;terraform_execution\u0026quot; {\n  name = \u0026quot;TerraformExecutionRole\u0026quot;\n\n  assume_role_policy = jsonencode({\n    Version = \u0026quot;2012-10-17\u0026quot;\n    Statement = [\n      {\n        Action = \u0026quot;sts:AssumeRole\u0026quot;\n        Effect = \u0026quot;Allow\u0026quot;\n        Principal = {\n          Service = \u0026quot;ec2.amazonaws.com\u0026quot;\n        }\n      },\n    ]\n  })\n}\n\n# Attach policies with least privilege\nresource \u0026quot;aws_iam_role_policy\u0026quot; \u0026quot;terraform_execution\u0026quot; {\n  name = \u0026quot;TerraformExecutionPolicy\u0026quot;\n  role = aws_iam_role.terraform_execution.id\n\n  policy = jsonencode({\n    Version = \u0026quot;2012-10-17\u0026quot;\n    Statement = [\n      {\n        Effect = \u0026quot;Allow\u0026quot;\n        Action = [\n          \u0026quot;ec2:*\u0026quot;,\n          \u0026quot;vpc:*\u0026quot;,\n          \u0026quot;iam:PassRole\u0026quot;,\n          \u0026quot;s3:GetObject\u0026quot;,\n          \u0026quot;s3:PutObject\u0026quot;\n        ]\n        Resource = \u0026quot;*\u0026quot;\n      }\n    ]\n  })\n}\nEOF\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"policy-as-code\" class=\"mobile-header\"\u003ePolicy as Code\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# OPA (Open Policy Agent) integration\ncat \u0026gt; policy/security.rego \u0026lt;\u0026lt;EOF\npackage terraform.security\n\n# Deny instances without encryption\ndeny[reason] {\n    resource := input.resource_changes[_]\n    resource.type == \u0026quot;aws_instance\u0026quot;\n    resource.change.after.root_block_device[_].encrypted == false\n    reason := \u0026quot;AWS instances must have encrypted root volumes\u0026quot;\n}\n\n# Deny public S3 buckets\ndeny[reason] {\n    resource := input.resource_changes[_]\n    resource.type == \u0026quot;aws_s3_bucket_public_access_block\u0026quot;\n    resource.change.after.block_public_acls == false\n    reason := \u0026quot;S3 buckets must block public access\u0026quot;\n}\n\n# Require specific instance types in production\ndeny[reason] {\n    resource := input.resource_changes[_]\n    resource.type == \u0026quot;aws_instance\u0026quot;\n    instance_type := resource.change.after.instance_type\n    not startswith(instance_type, \u0026quot;t3.\u0026quot;)\n    not startswith(instance_type, \u0026quot;m5.\u0026quot;)\n    workspace := input.terraform_version.workspace\n    workspace == \u0026quot;production\u0026quot;\n    reason := \u0026quot;Production instances must use approved instance types\u0026quot;\n}\nEOF\n\n# Conftest for policy validation\n# Install conftest\nCONFTEST_VERSION=\u0026quot;0.46.0\u0026quot;\nwget https://github.com/open-policy-agent/conftest/releases/download/v${CONFTEST_VERSION}/conftest_${CONFTEST_VERSION}_Linux_x86_64.tar.gz\ntar xzf conftest_${CONFTEST_VERSION}_Linux_x86_64.tar.gz\nsudo mv conftest /usr/local/bin/\n\n# Validate Terraform plan against policies\nterraform plan -out=tfplan\nterraform show -json tfplan \u0026gt; tfplan.json\nconftest test tfplan.json --policy policy/\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"compliance-and-governance\" class=\"mobile-header\"\u003eCompliance and Governance\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Sentinel policy example (Terraform Cloud/Enterprise)\ncat \u0026gt; sentinel/require-encryption.sentinel \u0026lt;\u0026lt;EOF\nimport \u0026quot;tfplan/v2\u0026quot; as tfplan\nimport \u0026quot;strings\u0026quot;\n\n# Main rule\nmain = rule {\n    all tfplan.resource_changes as _, changes {\n        changes.type is \u0026quot;aws_instance\u0026quot; implies\n            changes.change.after.root_block_device[0].encrypted is true\n    }\n}\n\n# Helper function\nis_encrypted = func(resource) {\n    return resource.change.after.root_block_device[0].encrypted else false\n}\nEOF\n\n# Cost estimation with Infracost\n# Install Infracost\ncurl -fsSL https://raw.githubusercontent.com/infracost/infracost/master/scripts/install.sh | sh\n\n# Configure Infracost\ninfracost auth login\n\n# Generate cost estimate\ninfracost breakdown --path .\ninfracost diff --path . --compare-to main\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"disaster-recovery-and-business-continuity\" class=\"mobile-header\"\u003eDisaster Recovery and Business Continuity\u003c/h2\u003e\n\u003ch3 id=\"multi-region-deployment\" class=\"mobile-header\"\u003eMulti-Region Deployment\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003ecat \u0026gt; multi-region.tf \u0026lt;\u0026lt;EOF\n# Multi-region deployment with disaster recovery\nmodule \u0026quot;primary_region\u0026quot; {\n  source = \u0026quot;./modules/infrastructure\u0026quot;\n  \n  providers = {\n    aws = aws.us-west-2\n  }\n  \n  environment = var.environment\n  region     = \u0026quot;us-west-2\u0026quot;\n  is_primary = true\n  \n  # Primary region configuration\n  instance_count    = var.primary_instance_count\n  database_backup  = true\n  cross_region_backup = true\n}\n\nmodule \u0026quot;disaster_recovery_region\u0026quot; {\n  source = \u0026quot;./modules/infrastructure\u0026quot;\n  \n  providers = {\n    aws = aws.us-east-1\n  }\n  \n  environment = var.environment\n  region     = \u0026quot;us-east-1\u0026quot;\n  is_primary = false\n  \n  # DR region configuration\n  instance_count = var.dr_instance_count\n  database_mode = \u0026quot;read_replica\u0026quot;\n  \n  # Dependency on primary region\n  depends_on = [module.primary_region]\n}\n\n# Provider configurations for multiple regions\nprovider \u0026quot;aws\u0026quot; {\n  alias  = \u0026quot;us-west-2\u0026quot;\n  region = \u0026quot;us-west-2\u0026quot;\n}\n\nprovider \u0026quot;aws\u0026quot; {\n  alias  = \u0026quot;us-east-1\u0026quot;\n  region = \u0026quot;us-east-1\u0026quot;\n}\n\n# Cross-region replication\nresource \u0026quot;aws_s3_bucket_replication_configuration\u0026quot; \u0026quot;main\u0026quot; {\n  role   = aws_iam_role.replication.arn\n  bucket = module.primary_region.s3_bucket_id\n\n  rule {\n    id     = \u0026quot;replicate-everything\u0026quot;\n    status = \u0026quot;Enabled\u0026quot;\n\n    destination {\n      bucket        = module.disaster_recovery_region.s3_bucket_arn\n      storage_class = \u0026quot;STANDARD_IA\u0026quot;\n    }\n  }\n\n  depends_on = [aws_s3_bucket_versioning.main]\n}\nEOF\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"backup-and-recovery-automation\" class=\"mobile-header\"\u003eBackup and Recovery Automation\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Automated backup script for Terraform state and configurations\nsudo tee /usr/local/bin/terraform-backup.sh \u0026gt; /dev/null \u0026lt;\u0026lt;\u0026#039;EOF\u0026#039;\n#!/bin/bash\nBACKUP_DIR=\u0026quot;/backup/terraform\u0026quot;\nDATE=$(date +%Y%m%d_%H%M%S)\n\nmkdir -p ${BACKUP_DIR}/{state,configs,plans}\n\n# Backup Terraform configurations\nfind /opt/terraform -name \u0026quot;*.tf\u0026quot; -o -name \u0026quot;*.tfvars\u0026quot; | while read tf_file; do\n    relative_path=$(echo $tf_file | sed \u0026#039;s|^/opt/terraform/||\u0026#039;)\n    mkdir -p ${BACKUP_DIR}/configs/$(dirname $relative_path)\n    cp \u0026quot;$tf_file\u0026quot; ${BACKUP_DIR}/configs/$relative_path\ndone\n\n# Backup state files (if using local backend)\nfind /opt/terraform -name \u0026quot;terraform.tfstate*\u0026quot; | while read state_file; do\n    relative_path=$(echo $state_file | sed \u0026#039;s|^/opt/terraform/||\u0026#039;)\n    mkdir -p ${BACKUP_DIR}/state/$(dirname $relative_path)\n    cp \u0026quot;$state_file\u0026quot; ${BACKUP_DIR}/state/$relative_path\ndone\n\n# Backup remote state (if using S3)\naws s3 sync s3://terraform-state-bucket/ ${BACKUP_DIR}/remote-state/\n\n# Create archive\ntar -czf ${BACKUP_DIR}/terraform-complete-backup-${DATE}.tar.gz -C ${BACKUP_DIR} configs state remote-state\n\n# Upload to multiple cloud storage\naws s3 cp ${BACKUP_DIR}/terraform-complete-backup-${DATE}.tar.gz s3://terraform-backups/\naz storage blob upload --file ${BACKUP_DIR}/terraform-complete-backup-${DATE}.tar.gz --container-name terraform-backups --name terraform-complete-backup-${DATE}.tar.gz\ngsutil cp ${BACKUP_DIR}/terraform-complete-backup-${DATE}.tar.gz gs://terraform-backups/\n\n# Keep only last 30 backups\nfind ${BACKUP_DIR} -name \u0026quot;terraform-complete-backup-*.tar.gz\u0026quot; -mtime +30 -delete\n\necho \u0026quot;Terraform backup completed: ${DATE}\u0026quot;\nEOF\n\nsudo chmod +x /usr/local/bin/terraform-backup.sh\n\n# Schedule daily backup\necho \u0026quot;0 1 * * * root /usr/local/bin/terraform-backup.sh\u0026quot; | sudo tee -a /etc/crontab\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"verification-and-testing\" class=\"mobile-header\"\u003eVerification and Testing\u003c/h2\u003e\n\u003ch3 id=\"comprehensive-testing\" class=\"mobile-header\"\u003eComprehensive Testing\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Test Terraform configuration\nterraform fmt -check -recursive\nterraform validate\n\n# Test across all environments\nfor env in development staging production; do\n    echo \u0026quot;Testing $env environment...\u0026quot;\n    cd environments/$env\n    terraform init\n    terraform validate\n    terraform plan -var-file=\u0026quot;$env.tfvars\u0026quot;\n    cd ../..\ndone\n\n# Security scanning\ncheckov --framework terraform --directory .\nterrascan scan -t aws\ntrivy config .\n\n# Cost estimation\ninfracost breakdown --path .\n\n# Compliance checking\nterraform-compliance -p . -f compliance-tests/\n\n# Integration testing with Terratest (Go)\ncat \u0026gt; test/integration_test.go \u0026lt;\u0026lt;EOF\npackage test\n\nimport (\n    \u0026quot;testing\u0026quot;\n    \u0026quot;github.com/gruntwork-io/terratest/modules/terraform\u0026quot;\n    \u0026quot;github.com/stretchr/testify/assert\u0026quot;\n)\n\nfunc TestTerraformAWSExample(t *testing.T) {\n    terraformOptions := \u0026amp;terraform.Options{\n        TerraformDir: \u0026quot;../environments/development\u0026quot;,\n        VarFiles:     []string{\u0026quot;development.tfvars\u0026quot;},\n    }\n\n    defer terraform.Destroy(t, terraformOptions)\n    terraform.InitAndApply(t, terraformOptions)\n\n    # Test that resources were created\n    instanceID := terraform.Output(t, terraformOptions, \u0026quot;instance_id\u0026quot;)\n    assert.NotEmpty(t, instanceID)\n}\nEOF\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"performance-and-monitoring\" class=\"mobile-header\"\u003ePerformance and Monitoring\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Monitor Terraform execution\nterraform apply -parallelism=10\n\n# Profile Terraform execution\nTF_LOG=DEBUG terraform apply\n\n# State file analysis\nterraform state list\nterraform show\n\n# Resource drift detection\nterraform plan -refresh-only\n\n# Dependency graphing\nterraform graph | dot -Tsvg \u0026gt; graph.svg\n\n# Resource import verification\nterraform plan -generate-config-out=generated.tf\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"advanced-use-cases\" class=\"mobile-header\"\u003eAdvanced Use Cases\u003c/h2\u003e\n\u003ch3 id=\"multi-cloud-kubernetes-deployment\" class=\"mobile-header\"\u003eMulti-Cloud Kubernetes Deployment\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003ecat \u0026gt; multi-cloud-k8s.tf \u0026lt;\u0026lt;EOF\n# EKS Cluster (AWS)\nmodule \u0026quot;aws_eks\u0026quot; {\n  source = \u0026quot;terraform-aws-modules/eks/aws\u0026quot;\n  version = \u0026quot;~\u0026gt; 19.0\u0026quot;\n\n  cluster_name    = \u0026quot;\\${var.project_name}-eks-\\${var.environment}\u0026quot;\n  cluster_version = \u0026quot;1.28\u0026quot;\n\n  vpc_id                          = module.aws_vpc.vpc_id\n  subnet_ids                      = module.aws_vpc.private_subnets\n  cluster_endpoint_public_access  = false\n  cluster_endpoint_private_access = true\n\n  eks_managed_node_groups = {\n    main = {\n      min_size     = 1\n      max_size     = 5\n      desired_size = 3\n\n      instance_types = [\u0026quot;t3.medium\u0026quot;]\n      capacity_type  = \u0026quot;ON_DEMAND\u0026quot;\n      \n      k8s_labels = {\n        Environment = var.environment\n        NodeGroup   = \u0026quot;main\u0026quot;\n      }\n    }\n  }\n\n  tags = var.common_tags\n}\n\n# AKS Cluster (Azure)\nresource \u0026quot;azurerm_kubernetes_cluster\u0026quot; \u0026quot;main\u0026quot; {\n  name                = \u0026quot;\\${var.project_name}-aks-\\${var.environment}\u0026quot;\n  location            = azurerm_resource_group.main.location\n  resource_group_name = azurerm_resource_group.main.name\n  dns_prefix          = \u0026quot;\\${var.project_name}-aks\u0026quot;\n\n  default_node_pool {\n    name       = \u0026quot;default\u0026quot;\n    node_count = 3\n    vm_size    = \u0026quot;Standard_D2_v2\u0026quot;\n    \n    upgrade_settings {\n      max_surge = \u0026quot;10%\u0026quot;\n    }\n  }\n\n  identity {\n    type = \u0026quot;SystemAssigned\u0026quot;\n  }\n\n  network_profile {\n    network_plugin = \u0026quot;azure\u0026quot;\n    network_policy = \u0026quot;calico\u0026quot;\n  }\n\n  tags = var.common_tags\n}\n\n# GKE Cluster (GCP)\nresource \u0026quot;google_container_cluster\u0026quot; \u0026quot;main\u0026quot; {\n  name     = \u0026quot;\\${var.project_name}-gke-\\${var.environment}\u0026quot;\n  location = var.gcp_region\n  project  = var.gcp_project_id\n\n  # Remove default node pool\n  remove_default_node_pool = true\n  initial_node_count       = 1\n\n  network    = google_compute_network.main.name\n  subnetwork = google_compute_subnetwork.main.name\n\n  private_cluster_config {\n    enable_private_nodes    = true\n    enable_private_endpoint = false\n    master_ipv4_cidr_block  = \u0026quot;172.16.0.0/28\u0026quot;\n  }\n\n  workload_identity_config {\n    workload_pool = \u0026quot;\\${var.gcp_project_id}.svc.id.goog\u0026quot;\n  }\n}\n\nresource \u0026quot;google_container_node_pool\u0026quot; \u0026quot;main\u0026quot; {\n  name       = \u0026quot;main\u0026quot;\n  location   = var.gcp_region\n  cluster    = google_container_cluster.main.name\n  node_count = 1\n  project    = var.gcp_project_id\n\n  autoscaling {\n    min_node_count = 1\n    max_node_count = 5\n  }\n\n  node_config {\n    preemptible  = false\n    machine_type = \u0026quot;e2-medium\u0026quot;\n\n    oauth_scopes = [\n      \u0026quot;https://www.googleapis.com/auth/cloud-platform\u0026quot;\n    ]\n\n    workload_metadata_config {\n      mode = \u0026quot;GKE_METADATA\u0026quot;\n    }\n  }\n}\nEOF\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"infrastructure-monitoring-with-terraform\" class=\"mobile-header\"\u003eInfrastructure Monitoring with Terraform\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003ecat \u0026gt; monitoring.tf \u0026lt;\u0026lt;EOF\n# CloudWatch alarms (AWS)\nresource \u0026quot;aws_cloudwatch_metric_alarm\u0026quot; \u0026quot;high_cpu\u0026quot; {\n  for_each = toset(module.aws_infrastructure.instance_ids)\n  \n  alarm_name          = \u0026quot;high-cpu-\\${each.key}\u0026quot;\n  comparison_operator = \u0026quot;GreaterThanThreshold\u0026quot;\n  evaluation_periods  = \u0026quot;2\u0026quot;\n  metric_name        = \u0026quot;CPUUtilization\u0026quot;\n  namespace          = \u0026quot;AWS/EC2\u0026quot;\n  period             = \u0026quot;300\u0026quot;\n  statistic          = \u0026quot;Average\u0026quot;\n  threshold          = \u0026quot;80\u0026quot;\n  alarm_description  = \u0026quot;This metric monitors ec2 cpu utilization\u0026quot;\n\n  dimensions = {\n    InstanceId = each.value\n  }\n\n  alarm_actions = [aws_sns_topic.alerts.arn]\n}\n\n# Azure Monitor alerts\nresource \u0026quot;azurerm_monitor_metric_alert\u0026quot; \u0026quot;cpu_alert\u0026quot; {\n  name                = \u0026quot;cpu-alert\u0026quot;\n  resource_group_name = azurerm_resource_group.main.name\n  scopes              = [azurerm_virtual_machine.main.id]\n\n  criteria {\n    metric_namespace = \u0026quot;Microsoft.Compute/virtualMachines\u0026quot;\n    metric_name      = \u0026quot;Percentage CPU\u0026quot;\n    aggregation      = \u0026quot;Average\u0026quot;\n    operator         = \u0026quot;GreaterThan\u0026quot;\n    threshold        = 80\n  }\n\n  action {\n    action_group_id = azurerm_monitor_action_group.main.id\n  }\n}\n\n# GCP monitoring policy\nresource \u0026quot;google_monitoring_alert_policy\u0026quot; \u0026quot;cpu_usage\u0026quot; {\n  display_name = \u0026quot;CPU Usage Alert\u0026quot;\n  combiner     = \u0026quot;OR\u0026quot;\n  project      = var.gcp_project_id\n\n  conditions {\n    display_name = \u0026quot;CPU usage condition\u0026quot;\n\n    condition_threshold {\n      filter         = \u0026quot;resource.type=\\\u0026quot;gce_instance\\\u0026quot;\u0026quot;\n      duration       = \u0026quot;300s\u0026quot;\n      comparison     = \u0026quot;COMPARISON_GREATER_THAN\u0026quot;\n      threshold_value = 0.8\n\n      aggregations {\n        alignment_period   = \u0026quot;300s\u0026quot;\n        per_series_aligner = \u0026quot;ALIGN_RATE\u0026quot;\n      }\n    }\n  }\n\n  alert_strategy {\n    notification_rate_limit {\n      period = \u0026quot;300s\u0026quot;\n    }\n    auto_close = \u0026quot;1800s\u0026quot;\n  }\n\n  notification_channels = [google_monitoring_notification_channel.email.name]\n}\nEOF\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"troubleshooting\" class=\"mobile-header\"\u003eTroubleshooting\u003c/h2\u003e\n\u003ch3 id=\"common-issues-and-solutions\" class=\"mobile-header\"\u003eCommon Issues and Solutions\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Check Terraform configuration\nterraform fmt -check -diff\nterraform validate\n\n# Debug Terraform execution\nTF_LOG=DEBUG terraform apply\nTF_LOG=TRACE terraform apply\n\n# State file issues\nterraform state list\nterraform state show resource_name\n\n# Provider authentication issues\nterraform init -upgrade\nterraform providers\n\n# Lock issues\nterraform force-unlock LOCK_ID\n\n# Refresh state from real infrastructure\nterraform refresh\n\n# Import existing resources\nterraform import aws_instance.example i-1234567890abcdef0\n\n# Validate provider configurations\n# AWS\naws sts get-caller-identity\n\n# Azure\naz account show\n\n# GCP\ngcloud auth list\ngcloud config get-value project\n\n# Check resource quotas\naws service-quotas get-service-quota --service-code ec2 --quota-code L-1216C47A\naz vm list-usage --location \u0026quot;East US\u0026quot;\ngcloud compute project-info describe --project=$PROJECT_ID\n\n# Plan file analysis\nterraform show tfplan\nterraform show -json tfplan | jq \u0026#039;.resource_changes[] | {type: .type, name: .name, action: .change.actions}\u0026#039;\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"advanced-debugging\" class=\"mobile-header\"\u003eAdvanced Debugging\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Provider debug logging\nTF_LOG_PROVIDER=DEBUG terraform apply\n\n# Crash log analysis\ncat crash.log\n\n# Performance profiling\nterraform apply -parallelism=1  # Sequential execution for debugging\n\n# Resource graph visualization\nterraform graph -type=plan | dot -Tpng \u0026gt; plan.png\n\n# State manipulation for recovery\nterraform state rm problematic_resource\nterraform import resource_type.name resource_id\n\n# Force resource recreation\nterraform taint resource_type.name\nterraform apply\n\n# Workspace state recovery\nterraform workspace select production\nterraform state pull \u0026gt; production.tfstate.backup\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"additional-resources\" class=\"mobile-header\"\u003eAdditional Resources\u003c/h2\u003e\n\u003cli class=\"mobile-list-item\"\u003e\u003ca href=\"https://developer.hashicorp.com/terraform/docs\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\"\u003eOfficial Documentation\u003c/a\u003e\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003e\u003ca href=\"https://registry.terraform.io/\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\"\u003eTerraform Registry\u003c/a\u003e\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003e\u003ca href=\"https://developer.hashicorp.com/terraform/cloud-docs/recommended-practices\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\"\u003eMulti-Cloud Best Practices\u003c/a\u003e\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003e\u003ca href=\"https://developer.hashicorp.com/terraform/language/values/sensitive\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\"\u003eSecurity Best Practices\u003c/a\u003e\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003e\u003ca href=\"https://registry.terraform.io/providers/hashicorp/aws/latest/docs\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\"\u003eAWS Provider Documentation\u003c/a\u003e\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003e\u003ca href=\"https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\"\u003eAzure Provider Documentation\u003c/a\u003e\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003e\u003ca href=\"https://registry.terraform.io/providers/hashicorp/google/latest/docs\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\"\u003eGCP Provider Documentation\u003c/a\u003e\u003c/li\u003e\n\u003cp class=\"mobile-paragraph\"\u003e---\u003c/p\u003e\n\u003cp class=\"mobile-paragraph\"\u003e\u003cstrong\u003eNote:\u003c/strong\u003e This guide is part of the \u003ca href=\"https://howtomgr.github.io\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\"\u003eHowToMgr\u003c/a\u003e collection.\u003c/p\u003e","readTime":"29 min","wordCount":5734,"lastBuilt":"2025-09-14T03:45:44.621Z"},"category":{"key":"infrastructure","name":"Infrastructure","description":"DevOps and infrastructure automation tools","icon":"🏗️","color":"#44475a","keywords":["ansible","terraform","gitlab","jenkins","consul","etcd"]},"relatedGuides":[{"name":"adguard-home","displayName":"Adguard Home","slug":"adguard-home","description":"Repo for adguard-home","category":"infrastructure","language":null,"stars":0,"forks":0,"topics":[],"githubUrl":"https://github.com/howtomgr/adguard-home","updatedAt":"2025-09-08T03:04:18Z","createdAt":"2025-09-08T03:04:08Z","readmeRaw":"## 👋 Welcome to adguard-home 🚀  \n\nadguard-home README  \n  \n  \n## Author  \n\n🤖 casjay: [Github](https://github.com/casjay) 🤖  \n","readmeHtml":"\u003ch2 id=\"welcome-to-adguard-home\" class=\"mobile-header\"\u003e👋 Welcome to adguard-home 🚀  \u003c/h2\u003e\n\u003cp class=\"mobile-paragraph\"\u003eadguard-home README  \u003c/p\u003e\n\u003ch2 id=\"author\" class=\"mobile-header\"\u003eAuthor  \u003c/h2\u003e\n\u003cp class=\"mobile-paragraph\"\u003e🤖 casjay: \u003ca href=\"https://github.com/casjay\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\"\u003eGithub\u003c/a\u003e 🤖  \u003c/p\u003e","readTime":"1 min","wordCount":15,"lastBuilt":"2025-09-14T03:46:07.037Z"},{"name":"adminer","displayName":"Adminer","slug":"adminer","description":"Repo for adminer","category":"infrastructure","language":null,"stars":0,"forks":0,"topics":[],"githubUrl":"https://github.com/howtomgr/adminer","updatedAt":"2025-09-08T03:04:32Z","createdAt":"2025-09-08T03:04:22Z","readmeRaw":"## 👋 Welcome to adminer 🚀  \n\nadminer README  \n  \n  \n## Author  \n\n🤖 casjay: [Github](https://github.com/casjay) 🤖  \n","readmeHtml":"\u003ch2 id=\"welcome-to-adminer\" class=\"mobile-header\"\u003e👋 Welcome to adminer 🚀  \u003c/h2\u003e\n\u003cp class=\"mobile-paragraph\"\u003eadminer README  \u003c/p\u003e\n\u003ch2 id=\"author\" class=\"mobile-header\"\u003eAuthor  \u003c/h2\u003e\n\u003cp class=\"mobile-paragraph\"\u003e🤖 casjay: \u003ca href=\"https://github.com/casjay\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\"\u003eGithub\u003c/a\u003e 🤖  \u003c/p\u003e","readTime":"1 min","wordCount":15,"lastBuilt":"2025-09-14T03:46:06.794Z"},{"name":"ansible","displayName":"Ansible","slug":"ansible","description":"Repo for ansible","category":"infrastructure","language":null,"stars":0,"forks":0,"topics":[],"githubUrl":"https://github.com/howtomgr/ansible","updatedAt":"2025-09-14T01:29:39Z","createdAt":"2025-09-08T03:04:35Z","readmeRaw":"# Ansible Installation Guide\n\nAgentless automation platform for configuration management, application deployment, and task automation across multiple systems. Industry standard for infrastructure automation with enterprise-grade security.\n\n## Prerequisites\n\n- Linux control machine (any modern distribution)\n- Python 3.8+ on control machine\n- SSH access to target hosts\n- Python 2.7+ or 3.5+ on target hosts\n- 2GB RAM minimum, 4GB+ recommended for large infrastructures\n\n## Installation\n\n### Using Package Manager (Recommended)\n\n#### Ubuntu/Debian\n```bash\n# Update package list\nsudo apt update\n\n# Install Ansible and dependencies\nsudo apt install -y ansible python3-pip python3-venv sshpass\n\n# Install additional collections\nansible-galaxy collection install community.general\nansible-galaxy collection install ansible.posix\nansible-galaxy collection install kubernetes.core\nansible-galaxy collection install amazon.aws\nansible-galaxy collection install azure.azcollection\nansible-galaxy collection install google.cloud\n\n# Verify installation\nansible --version\nansible-galaxy collection list\n```\n\n#### RHEL/CentOS/Rocky Linux/AlmaLinux\n```bash\n# Install EPEL repository\nsudo yum install -y epel-release\n\n# Install Ansible\nsudo yum install -y ansible python3-pip\n\n# For newer distributions\nsudo dnf install -y ansible python3-pip\n\n# Install collections\nansible-galaxy collection install community.general\nansible-galaxy collection install ansible.posix\nansible-galaxy collection install kubernetes.core\n\n# Verify installation\nansible --version\n```\n\n#### Fedora\n```bash\n# Install Ansible\nsudo dnf install -y ansible python3-pip python3-virtualenv\n\n# Install additional collections\nansible-galaxy collection install community.general\nansible-galaxy collection install ansible.posix\nansible-galaxy collection install kubernetes.core\n\n# Verify installation\nansible --version\n```\n\n#### Arch Linux\n```bash\n# Install Ansible\nsudo pacman -Syu ansible python-pip\n\n# Install collections\nansible-galaxy collection install community.general\nansible-galaxy collection install ansible.posix\n\n# Verify installation\nansible --version\n```\n\n#### Alpine Linux\n```bash\n# Install Ansible\nsudo apk update\nsudo apk add ansible python3 py3-pip openssh\n\n# Install collections\nansible-galaxy collection install community.general\n\n# Verify installation\nansible --version\n```\n\n### Using pip (Latest Version)\n```bash\n# Create virtual environment (recommended)\npython3 -m venv ~/ansible-venv\nsource ~/ansible-venv/bin/activate\n\n# Install Ansible via pip\npip install --upgrade pip\npip install ansible ansible-core\n\n# Install additional packages\npip install paramiko jinja2 PyYAML cryptography\n\n# Install cloud provider SDKs\npip install boto3 botocore azure-cli google-cloud-storage\n\n# Install collections\nansible-galaxy collection install community.general\nansible-galaxy collection install ansible.posix\nansible-galaxy collection install kubernetes.core\nansible-galaxy collection install amazon.aws\nansible-galaxy collection install azure.azcollection\nansible-galaxy collection install google.cloud\n\n# Add to PATH permanently\necho 'source ~/ansible-venv/bin/activate' \u003e\u003e ~/.bashrc\n\n# Verify installation\nansible --version\n```\n\n### Using Docker\n```bash\n# Create Ansible Docker container with mounted volumes\ndocker run --rm -it \\\n  -v $(pwd):/ansible \\\n  -v ~/.ssh:/root/.ssh:ro \\\n  -v ~/.aws:/root/.aws:ro \\\n  -v ~/.azure:/root/.azure:ro \\\n  --workdir /ansible \\\n  ansible/ansible:latest\n\n# Create wrapper script for ease of use\nsudo tee /usr/local/bin/ansible-docker \u003e /dev/null \u003c\u003c'EOF'\n#!/bin/bash\ndocker run --rm -it \\\n  -v $(pwd):/ansible \\\n  -v ~/.ssh:/root/.ssh:ro \\\n  -v ~/.aws:/root/.aws:ro \\\n  -v ~/.azure:/root/.azure:ro \\\n  -v ~/.kube:/root/.kube:ro \\\n  --workdir /ansible \\\n  --network host \\\n  ansible/ansible:latest \"$@\"\nEOF\nsudo chmod +x /usr/local/bin/ansible-docker\n\n# Create aliases\necho 'alias ansible=\"ansible-docker ansible\"' \u003e\u003e ~/.bashrc\necho 'alias ansible-playbook=\"ansible-docker ansible-playbook\"' \u003e\u003e ~/.bashrc\n```\n\n## Project Structure and Configuration\n\n### Professional Project Structure\n```bash\n# Create comprehensive Ansible project structure\nmkdir -p ~/ansible-infrastructure/{\n  inventories/{production,staging,development},\n  playbooks,\n  roles,\n  group_vars,\n  host_vars,\n  library,\n  filter_plugins,\n  callback_plugins,\n  vault,\n  collections,\n  logs\n}\n\ncd ~/ansible-infrastructure\n\n# Create ansible.cfg with security best practices\ncat \u003e ansible.cfg \u003c\u003cEOF\n[defaults]\ninventory = inventories/production/hosts.yml\nremote_user = ansible\nprivate_key_file = ~/.ssh/ansible_key\nhost_key_checking = True\ntimeout = 30\nretry_files_enabled = False\nstdout_callback = yaml\nbin_ansible_callbacks = True\ngathering = smart\nfact_caching = jsonfile\nfact_caching_connection = ~/.ansible/facts_cache\nfact_caching_timeout = 86400\ninterpreter_python = auto_silent\nvault_password_file = ~/.ansible_vault_pass\n\n# Logging\nlog_path = logs/ansible.log\ndisplay_skipped_hosts = False\ndisplay_ok_hosts = False\n\n# Performance\nforks = 20\npoll_interval = 15\ninternal_poll_interval = 0.001\n\n# Security\ncommand_warnings = True\ndeprecation_warnings = True\naction_warnings = True\nlocalhost_warning = True\n\n[ssh_connection]\nssh_args = -o ControlMaster=auto -o ControlPersist=3600s -o PreferredAuthentications=publickey\npipelining = True\ncontrol_path = ~/.ansible/cp/%%h-%%p-%%r\nretries = 3\n\n[privilege_escalation]\nbecome = False\nbecome_method = sudo\nbecome_user = root\nbecome_ask_pass = False\n\n[inventory]\nenable_plugins = host_list, script, auto, yaml, ini, toml\ncache = True\ncache_plugin = jsonfile\ncache_timeout = 3600\ncache_connection = ~/.ansible/inventory_cache\n\n[galaxy]\nserver_list = automation_hub, galaxy\nEOF\n```\n\n### Advanced Inventory Management\n```bash\n# Create production inventory with groups and variables\ncat \u003e inventories/production/hosts.yml \u003c\u003cEOF\nall:\n  children:\n    webservers:\n      hosts:\n        web-prod-01:\n          ansible_host: 10.0.1.10\n          ansible_user: ansible\n          server_role: frontend\n          backup_enabled: true\n        web-prod-02:\n          ansible_host: 10.0.1.11\n          ansible_user: ansible\n          server_role: frontend\n          backup_enabled: true\n        web-prod-03:\n          ansible_host: 10.0.1.12\n          ansible_user: ansible\n          server_role: frontend\n          backup_enabled: true\n      vars:\n        http_port: 80\n        https_port: 443\n        max_clients: 200\n        environment: production\n        monitoring_enabled: true\n\n    dbservers:\n      hosts:\n        db-prod-01:\n          ansible_host: 10.0.2.10\n          ansible_user: ansible\n          mysql_server_id: 1\n          mysql_role: master\n        db-prod-02:\n          ansible_host: 10.0.2.11\n          ansible_user: ansible\n          mysql_server_id: 2\n          mysql_role: slave\n      vars:\n        mysql_port: 3306\n        mysql_root_password: \"{{ vault_mysql_root_password }}\"\n        mysql_replication_user: \"{{ vault_mysql_replication_user }}\"\n        mysql_replication_password: \"{{ vault_mysql_replication_password }}\"\n\n    loadbalancers:\n      hosts:\n        lb-prod-01:\n          ansible_host: 10.0.3.10\n          ansible_user: ansible\n          lb_algorithm: roundrobin\n        lb-prod-02:\n          ansible_host: 10.0.3.11\n          ansible_user: ansible\n          lb_algorithm: roundrobin\n      vars:\n        haproxy_stats_enabled: true\n        haproxy_stats_user: admin\n        haproxy_stats_password: \"{{ vault_haproxy_stats_password }}\"\n\n    monitoring:\n      hosts:\n        monitor-prod-01:\n          ansible_host: 10.0.4.10\n          ansible_user: ansible\n          prometheus_retention: 30d\n          grafana_admin_password: \"{{ vault_grafana_admin_password }}\"\n\n    bastion:\n      hosts:\n        bastion-prod-01:\n          ansible_host: bastion.example.com\n          ansible_user: ansible\n          ansible_port: 22\n\n# Global variables for all hosts\nwebservers:\n  vars:\n    nginx_worker_processes: auto\n    nginx_worker_connections: 1024\n    ssl_certificate_path: /etc/ssl/certs\n    backup_schedule: \"0 2 * * *\"\n\ndbservers:\n  vars:\n    mysql_innodb_buffer_pool_size: 2G\n    mysql_max_connections: 200\n    backup_schedule: \"0 1 * * *\"\n    monitoring_enabled: true\nEOF\n\n# Create dynamic inventory script for cloud environments\ncat \u003e inventories/production/aws_ec2.yml \u003c\u003cEOF\nplugin: amazon.aws.aws_ec2\nregions:\n  - us-west-2\n  - us-east-1\nfilters:\n  tag:Environment: production\n  tag:Ansible: managed\n  instance-state-name: running\n\nhostnames:\n  - tag:Name\n  - dns-name\n  - private-ip-address\n\ncompose:\n  ansible_host: private_ip_address\n  ec2_state: ec2_state_name\n  ec2_arch: ec2_architecture\n\ngroups:\n  # Group by instance type\n  webservers: \"'web' in tags.Role\"\n  databases: \"'db' in tags.Role\"\n  loadbalancers: \"'lb' in tags.Role\"\n  \n  # Group by environment\n  production: \"tags.Environment == 'production'\"\n  staging: \"tags.Environment == 'staging'\"\n  \n  # Group by availability zone\n  us_west_2a: ec2_placement_availability_zone == \"us-west-2a\"\n  us_west_2b: ec2_placement_availability_zone == \"us-west-2b\"\n\nkeyed_groups:\n  # Create groups based on tags\n  - key: tags.Environment\n    prefix: env\n  - key: tags.Role  \n    prefix: role\n  - key: ec2_instance_type\n    prefix: type\nEOF\n```\n\n### Ansible Vault Security\n```bash\n# Create strong vault password\nopenssl rand -base64 32 \u003e ~/.ansible_vault_pass\nchmod 600 ~/.ansible_vault_pass\n\n# Create encrypted vault file for secrets\nansible-vault create group_vars/all/vault.yml\n# Enter secure passwords and API keys:\n# vault_mysql_root_password: your_secure_mysql_password\n# vault_grafana_admin_password: your_secure_grafana_password  \n# vault_ssl_private_key: |\n#   -----BEGIN PRIVATE KEY-----\n#   your_private_key_content\n#   -----END PRIVATE KEY-----\n\n# Create non-encrypted variables file\ncat \u003e group_vars/all/vars.yml \u003c\u003cEOF\n# Non-sensitive variables\nmysql_port: 3306\nnginx_port: 80\ngrafana_port: 3000\nprometheus_port: 9090\n\n# Reference vault variables\nmysql_root_password: \"{{ vault_mysql_root_password }}\"\ngrafana_admin_password: \"{{ vault_grafana_admin_password }}\"\n\n# SSL configuration\nssl_certificate_path: /etc/ssl/certs/server.crt\nssl_private_key_path: /etc/ssl/private/server.key\nssl_private_key_content: \"{{ vault_ssl_private_key }}\"\n\n# Security settings\nansible_ssh_common_args: '-o StrictHostKeyChecking=yes -o UserKnownHostsFile=~/.ssh/known_hosts'\nansible_become_method: sudo\nansible_become_user: root\nEOF\n\n# Edit vault file\nansible-vault edit group_vars/all/vault.yml\n\n# View vault file (read-only)\nansible-vault view group_vars/all/vault.yml\n\n# Change vault password\nansible-vault rekey group_vars/all/vault.yml\n```\n\n## Comprehensive Playbooks\n\n### System Hardening Playbook\n```bash\ncat \u003e playbooks/system-hardening.yml \u003c\u003cEOF\n---\n- name: System Security Hardening\n  hosts: all\n  become: yes\n  gather_facts: yes\n  vars:\n    security_packages:\n      - fail2ban\n      - ufw\n      - aide\n      - chkrootkit\n      - rkhunter\n      - clamav\n      - lynis\n    \n    disabled_services:\n      - telnet\n      - rsh\n      - rlogin\n      - tftp\n      - talk\n      - finger\n\n  pre_tasks:\n    - name: Update package cache\n      package:\n        update_cache: yes\n        cache_valid_time: 3600\n      when: ansible_os_family in [\"Debian\", \"RedHat\"]\n\n  tasks:\n    # System updates\n    - name: Upgrade all packages\n      package:\n        name: \"*\"\n        state: latest\n      when: ansible_os_family == \"RedHat\"\n\n    - name: Upgrade all packages (Debian/Ubuntu)\n      apt:\n        upgrade: dist\n        autoremove: yes\n        autoclean: yes\n      when: ansible_os_family == \"Debian\"\n\n    # Install security packages\n    - name: Install security packages\n      package:\n        name: \"{{ security_packages }}\"\n        state: present\n\n    # User security\n    - name: Create ansible user with limited privileges\n      user:\n        name: ansible\n        groups: sudo\n        shell: /bin/bash\n        create_home: yes\n        generate_ssh_key: yes\n        ssh_key_bits: 4096\n        ssh_key_type: rsa\n\n    - name: Configure sudo for ansible user\n      lineinfile:\n        path: /etc/sudoers.d/ansible\n        line: 'ansible ALL=(ALL) NOPASSWD:ALL'\n        create: yes\n        mode: '0440'\n        validate: 'visudo -cf %s'\n\n    # SSH hardening\n    - name: Configure SSH security\n      lineinfile:\n        path: /etc/ssh/sshd_config\n        regexp: \"{{ item.regexp }}\"\n        line: \"{{ item.line }}\"\n        backup: yes\n      loop:\n        - { regexp: '^#?PermitRootLogin', line: 'PermitRootLogin no' }\n        - { regexp: '^#?PasswordAuthentication', line: 'PasswordAuthentication no' }\n        - { regexp: '^#?X11Forwarding', line: 'X11Forwarding no' }\n        - { regexp: '^#?MaxAuthTries', line: 'MaxAuthTries 3' }\n        - { regexp: '^#?ClientAliveInterval', line: 'ClientAliveInterval 300' }\n        - { regexp: '^#?ClientAliveCountMax', line: 'ClientAliveCountMax 0' }\n        - { regexp: '^#?Protocol', line: 'Protocol 2' }\n        - { regexp: '^#?LogLevel', line: 'LogLevel VERBOSE' }\n      notify: restart ssh\n\n    # Firewall configuration\n    - name: Configure UFW firewall (Debian/Ubuntu)\n      ufw:\n        state: enabled\n        policy: deny\n        direction: incoming\n      when: ansible_os_family == \"Debian\"\n\n    - name: Allow SSH through UFW\n      ufw:\n        rule: allow\n        port: 22\n        proto: tcp\n        comment: 'SSH access'\n      when: ansible_os_family == \"Debian\"\n\n    - name: Configure firewalld (RHEL/CentOS/Fedora)\n      firewalld:\n        state: enabled\n        permanent: yes\n        immediate: yes\n      when: ansible_os_family == \"RedHat\"\n\n    - name: Allow SSH through firewalld\n      firewalld:\n        service: ssh\n        permanent: yes\n        state: enabled\n        immediate: yes\n      when: ansible_os_family == \"RedHat\"\n\n    # Disable unnecessary services\n    - name: Disable unnecessary services\n      systemd:\n        name: \"{{ item }}\"\n        enabled: no\n        state: stopped\n      loop: \"{{ disabled_services }}\"\n      ignore_errors: yes\n\n    # File system security\n    - name: Set proper permissions on sensitive files\n      file:\n        path: \"{{ item.path }}\"\n        mode: \"{{ item.mode }}\"\n        owner: root\n        group: root\n      loop:\n        - { path: '/etc/passwd', mode: '0644' }\n        - { path: '/etc/shadow', mode: '0640' }\n        - { path: '/etc/group', mode: '0644' }\n        - { path: '/etc/gshadow', mode: '0640' }\n        - { path: '/etc/ssh/sshd_config', mode: '0600' }\n\n    # Kernel security parameters\n    - name: Configure kernel security parameters\n      sysctl:\n        name: \"{{ item.key }}\"\n        value: \"{{ item.value }}\"\n        sysctl_set: yes\n        state: present\n        reload: yes\n      loop:\n        - { key: 'net.ipv4.ip_forward', value: '0' }\n        - { key: 'net.ipv4.conf.all.send_redirects', value: '0' }\n        - { key: 'net.ipv4.conf.default.send_redirects', value: '0' }\n        - { key: 'net.ipv4.conf.all.accept_source_route', value: '0' }\n        - { key: 'net.ipv4.conf.default.accept_source_route', value: '0' }\n        - { key: 'net.ipv4.conf.all.accept_redirects', value: '0' }\n        - { key: 'net.ipv4.conf.default.accept_redirects', value: '0' }\n        - { key: 'net.ipv4.conf.all.secure_redirects', value: '0' }\n        - { key: 'net.ipv4.conf.default.secure_redirects', value: '0' }\n        - { key: 'net.ipv4.conf.all.log_martians', value: '1' }\n        - { key: 'net.ipv4.conf.default.log_martians', value: '1' }\n        - { key: 'kernel.randomize_va_space', value: '2' }\n\n    # Configure fail2ban\n    - name: Configure fail2ban for SSH protection\n      template:\n        src: templates/fail2ban-jail.local.j2\n        dest: /etc/fail2ban/jail.local\n        backup: yes\n      notify: restart fail2ban\n\n  handlers:\n    - name: restart ssh\n      service:\n        name: \"{{ 'ssh' if ansible_os_family == 'Debian' else 'sshd' }}\"\n        state: restarted\n\n    - name: restart fail2ban\n      service:\n        name: fail2ban\n        state: restarted\nEOF\n```\n\n### Application Deployment Playbook\n```bash\ncat \u003e playbooks/web-application-deployment.yml \u003c\u003cEOF\n---\n- name: Deploy Web Application Stack\n  hosts: webservers\n  become: yes\n  serial: \"25%\"  # Rolling deployment\n  max_fail_percentage: 10\n  vars:\n    app_name: mywebapp\n    app_version: \"{{ app_version | default('latest') }}\"\n    app_port: 3000\n    nginx_workers: \"{{ ansible_processor_cores }}\"\n    \n  pre_tasks:\n    - name: Check if maintenance mode file exists\n      stat:\n        path: /var/www/html/maintenance.html\n      register: maintenance_mode\n\n    - name: Fail if in maintenance mode\n      fail:\n        msg: \"Server is in maintenance mode\"\n      when: maintenance_mode.stat.exists and not force_deployment | default(false)\n\n  tasks:\n    # Application deployment\n    - name: Create application user\n      user:\n        name: \"{{ app_name }}\"\n        system: yes\n        shell: /bin/false\n        home: \"/opt/{{ app_name }}\"\n        create_home: yes\n\n    - name: Create application directories\n      file:\n        path: \"{{ item }}\"\n        state: directory\n        owner: \"{{ app_name }}\"\n        group: \"{{ app_name }}\"\n        mode: '0755'\n      loop:\n        - \"/opt/{{ app_name }}\"\n        - \"/opt/{{ app_name }}/releases\"\n        - \"/opt/{{ app_name }}/shared\"\n        - \"/var/log/{{ app_name }}\"\n\n    - name: Download application release\n      get_url:\n        url: \"https://releases.example.com/{{ app_name }}/{{ app_version }}/{{ app_name }}-{{ app_version }}.tar.gz\"\n        dest: \"/tmp/{{ app_name }}-{{ app_version }}.tar.gz\"\n        mode: '0644'\n        timeout: 300\n      register: download_result\n\n    - name: Extract application\n      unarchive:\n        src: \"/tmp/{{ app_name }}-{{ app_version }}.tar.gz\"\n        dest: \"/opt/{{ app_name }}/releases/\"\n        owner: \"{{ app_name }}\"\n        group: \"{{ app_name }}\"\n        remote_src: yes\n        creates: \"/opt/{{ app_name }}/releases/{{ app_version }}\"\n\n    - name: Create symlink to current release\n      file:\n        src: \"/opt/{{ app_name }}/releases/{{ app_version }}\"\n        dest: \"/opt/{{ app_name }}/current\"\n        state: link\n        owner: \"{{ app_name }}\"\n        group: \"{{ app_name }}\"\n      notify:\n        - reload application\n        - reload nginx\n\n    # Configuration management\n    - name: Deploy application configuration\n      template:\n        src: \"templates/{{ app_name }}.conf.j2\"\n        dest: \"/opt/{{ app_name }}/shared/{{ app_name }}.conf\"\n        owner: \"{{ app_name }}\"\n        group: \"{{ app_name }}\"\n        mode: '0640'\n        backup: yes\n      notify: reload application\n\n    # Service management\n    - name: Deploy systemd service file\n      template:\n        src: \"templates/{{ app_name }}.service.j2\"\n        dest: \"/etc/systemd/system/{{ app_name }}.service\"\n        mode: '0644'\n      notify:\n        - daemon reload\n        - restart application\n\n    - name: Enable and start application service\n      systemd:\n        name: \"{{ app_name }}\"\n        enabled: yes\n        state: started\n        daemon_reload: yes\n\n    # Health check\n    - name: Wait for application to be ready\n      uri:\n        url: \"http://localhost:{{ app_port }}/health\"\n        method: GET\n        status_code: 200\n      retries: 30\n      delay: 10\n\n    # Cleanup old releases\n    - name: Clean up old releases (keep last 3)\n      shell: |\n        cd /opt/{{ app_name }}/releases\n        ls -t | tail -n +4 | xargs rm -rf\n      args:\n        executable: /bin/bash\n\n  post_tasks:\n    - name: Verify application is running\n      uri:\n        url: \"http://{{ ansible_default_ipv4.address }}:{{ app_port }}/health\"\n        method: GET\n        status_code: 200\n      delegate_to: localhost\n\n    - name: Log deployment success\n      lineinfile:\n        path: \"/var/log/{{ app_name }}/deployments.log\"\n        line: \"{{ ansible_date_time.iso8601 }} - Successfully deployed {{ app_version }} to {{ inventory_hostname }}\"\n        create: yes\n\n  handlers:\n    - name: daemon reload\n      systemd:\n        daemon_reload: yes\n\n    - name: restart application\n      systemd:\n        name: \"{{ app_name }}\"\n        state: restarted\n\n    - name: reload application\n      systemd:\n        name: \"{{ app_name }}\"\n        state: reloaded\n\n    - name: reload nginx\n      service:\n        name: nginx\n        state: reloaded\nEOF\n```\n\n### Infrastructure as Code Playbook\n```bash\ncat \u003e playbooks/infrastructure-provisioning.yml \u003c\u003cEOF\n---\n- name: Infrastructure Provisioning and Configuration\n  hosts: all\n  become: yes\n  strategy: free  # Parallel execution\n  vars:\n    base_packages:\n      Debian:\n        - curl\n        - wget\n        - vim\n        - htop\n        - git\n        - python3\n        - python3-pip\n        - unzip\n        - tree\n      RedHat:\n        - curl\n        - wget\n        - vim\n        - htop\n        - git\n        - python3\n        - python3-pip\n        - unzip\n        - tree\n        - epel-release\n\n  tasks:\n    # System preparation\n    - name: Set hostname\n      hostname:\n        name: \"{{ inventory_hostname }}\"\n\n    - name: Update /etc/hosts\n      lineinfile:\n        path: /etc/hosts\n        line: \"{{ ansible_default_ipv4.address }} {{ inventory_hostname }}\"\n        backup: yes\n\n    # Package management\n    - name: Install base packages\n      package:\n        name: \"{{ base_packages[ansible_os_family] | default(base_packages['Debian']) }}\"\n        state: present\n\n    # Time synchronization\n    - name: Install and configure NTP\n      package:\n        name: \"{{ 'ntp' if ansible_os_family == 'Debian' else 'chrony' }}\"\n        state: present\n\n    - name: Start and enable time synchronization\n      service:\n        name: \"{{ 'ntp' if ansible_os_family == 'Debian' else 'chronyd' }}\"\n        state: started\n        enabled: yes\n\n    # Log management\n    - name: Configure logrotate for application logs\n      template:\n        src: templates/app-logrotate.j2\n        dest: /etc/logrotate.d/applications\n        mode: '0644'\n\n    # Monitoring agent installation\n    - name: Install Node Exporter for Prometheus monitoring\n      get_url:\n        url: \"https://github.com/prometheus/node_exporter/releases/download/v1.6.1/node_exporter-1.6.1.linux-amd64.tar.gz\"\n        dest: /tmp/node_exporter.tar.gz\n        mode: '0644'\n\n    - name: Extract Node Exporter\n      unarchive:\n        src: /tmp/node_exporter.tar.gz\n        dest: /tmp\n        remote_src: yes\n\n    - name: Copy Node Exporter binary\n      copy:\n        src: /tmp/node_exporter-1.6.1.linux-amd64/node_exporter\n        dest: /usr/local/bin/node_exporter\n        mode: '0755'\n        owner: root\n        group: root\n        remote_src: yes\n\n    - name: Create node_exporter systemd service\n      template:\n        src: templates/node_exporter.service.j2\n        dest: /etc/systemd/system/node_exporter.service\n        mode: '0644'\n      notify:\n        - daemon reload\n        - restart node_exporter\n\n    # Security configuration\n    - name: Configure kernel parameters for security\n      sysctl:\n        name: \"{{ item.key }}\"\n        value: \"{{ item.value }}\"\n        sysctl_set: yes\n        state: present\n        reload: yes\n      loop:\n        - { key: 'kernel.dmesg_restrict', value: '1' }\n        - { key: 'kernel.kptr_restrict', value: '2' }\n        - { key: 'kernel.yama.ptrace_scope', value: '1' }\n        - { key: 'net.ipv4.conf.all.log_martians', value: '1' }\n        - { key: 'net.ipv4.conf.default.log_martians', value: '1' }\n        - { key: 'net.ipv4.conf.all.send_redirects', value: '0' }\n        - { key: 'net.ipv4.conf.default.send_redirects', value: '0' }\n\n    # File integrity monitoring\n    - name: Initialize AIDE database\n      shell: |\n        aide --init\n        mv /var/lib/aide/aide.db.new /var/lib/aide/aide.db\n      args:\n        creates: /var/lib/aide/aide.db\n\n    - name: Schedule AIDE integrity checks\n      cron:\n        name: \"AIDE integrity check\"\n        minute: \"0\"\n        hour: \"3\"\n        job: \"/usr/bin/aide --check\"\n        user: root\n\n  handlers:\n    - name: daemon reload\n      systemd:\n        daemon_reload: yes\n\n    - name: restart node_exporter\n      service:\n        name: node_exporter\n        state: restarted\n        enabled: yes\nEOF\n```\n\n## Advanced Role Development\n\n### Comprehensive NGINX Role\n```bash\n# Create NGINX role structure\nansible-galaxy init roles/nginx\n\n# Main tasks\ncat \u003e roles/nginx/tasks/main.yml \u003c\u003cEOF\n---\n# NGINX Installation and Configuration Role\n- name: Include OS-specific variables\n  include_vars: \"{{ ansible_os_family }}.yml\"\n\n- name: Install NGINX\n  include_tasks: \"install-{{ ansible_os_family }}.yml\"\n\n- name: Create NGINX directories\n  file:\n    path: \"{{ item }}\"\n    state: directory\n    owner: root\n    group: root\n    mode: '0755'\n  loop:\n    - /etc/nginx/sites-available\n    - /etc/nginx/sites-enabled\n    - /etc/nginx/conf.d\n    - /var/log/nginx\n    - /var/cache/nginx\n\n- name: Generate DH parameters\n  openssl_dhparam:\n    path: /etc/ssl/certs/dhparam.pem\n    size: 2048\n  when: nginx_ssl_enabled | default(false)\n\n- name: Deploy NGINX main configuration\n  template:\n    src: nginx.conf.j2\n    dest: /etc/nginx/nginx.conf\n    backup: yes\n    validate: 'nginx -t -c %s'\n  notify: reload nginx\n\n- name: Deploy virtual host configurations\n  template:\n    src: vhost.conf.j2\n    dest: \"/etc/nginx/sites-available/{{ item.name }}.conf\"\n    backup: yes\n  loop: \"{{ nginx_vhosts | default([]) }}\"\n  notify: reload nginx\n\n- name: Enable virtual hosts\n  file:\n    src: \"/etc/nginx/sites-available/{{ item.name }}.conf\"\n    dest: \"/etc/nginx/sites-enabled/{{ item.name }}.conf\"\n    state: link\n  loop: \"{{ nginx_vhosts | default([]) }}\"\n  when: item.enabled | default(true)\n  notify: reload nginx\n\n- name: Remove default site\n  file:\n    path: /etc/nginx/sites-enabled/default\n    state: absent\n  notify: reload nginx\n\n- name: Start and enable NGINX\n  service:\n    name: nginx\n    state: started\n    enabled: yes\n\n- name: Configure log rotation\n  template:\n    src: nginx-logrotate.j2\n    dest: /etc/logrotate.d/nginx\n    mode: '0644'\n\n- name: Setup NGINX monitoring\n  include_tasks: monitoring.yml\n  when: nginx_monitoring_enabled | default(false)\n\n- name: Configure SSL certificates\n  include_tasks: ssl.yml\n  when: nginx_ssl_enabled | default(false)\nEOF\n\n# OS-specific installation tasks\ncat \u003e roles/nginx/tasks/install-Debian.yml \u003c\u003cEOF\n---\n- name: Add NGINX signing key (Debian/Ubuntu)\n  apt_key:\n    url: https://nginx.org/keys/nginx_signing.key\n    state: present\n\n- name: Add NGINX repository (Debian/Ubuntu)\n  apt_repository:\n    repo: \"deb https://nginx.org/packages/{{ ansible_distribution | lower }}/ {{ ansible_distribution_release }} nginx\"\n    state: present\n\n- name: Install NGINX (Debian/Ubuntu)\n  apt:\n    name: nginx\n    state: present\n    update_cache: yes\nEOF\n\ncat \u003e roles/nginx/tasks/install-RedHat.yml \u003c\u003cEOF\n---\n- name: Add NGINX repository (RHEL/CentOS)\n  yum_repository:\n    name: nginx\n    description: NGINX Repository\n    baseurl: \"https://nginx.org/packages/centos/{{ ansible_distribution_major_version }}/$basearch/\"\n    gpgcheck: yes\n    gpgkey: https://nginx.org/keys/nginx_signing.key\n    enabled: yes\n\n- name: Install NGINX (RHEL/CentOS)\n  yum:\n    name: nginx\n    state: present\nEOF\n\n# Variables\ncat \u003e roles/nginx/vars/main.yml \u003c\u003cEOF\n---\nnginx_user: nginx\nnginx_worker_processes: auto\nnginx_worker_connections: 1024\nnginx_keepalive_timeout: 65\nnginx_ssl_enabled: false\nnginx_monitoring_enabled: true\n\nnginx_security_headers:\n  - \"add_header X-Frame-Options SAMEORIGIN always;\"\n  - \"add_header X-Content-Type-Options nosniff always;\"\n  - \"add_header X-XSS-Protection '1; mode=block' always;\"\n  - \"add_header Strict-Transport-Security 'max-age=31536000; includeSubDomains' always;\"\n\nnginx_default_vhost:\n  name: default\n  listen: 80\n  server_name: \"_\"\n  root: /var/www/html\n  index: index.html\n  enabled: false\nEOF\n\n# Templates\ncat \u003e roles/nginx/templates/nginx.conf.j2 \u003c\u003cEOF\nuser {{ nginx_user }};\nworker_processes {{ nginx_worker_processes }};\npid /var/run/nginx.pid;\n\nevents {\n    worker_connections {{ nginx_worker_connections }};\n    use epoll;\n    multi_accept on;\n}\n\nhttp {\n    # Basic settings\n    sendfile on;\n    tcp_nopush on;\n    tcp_nodelay on;\n    keepalive_timeout {{ nginx_keepalive_timeout }};\n    types_hash_max_size 2048;\n    server_tokens off;\n\n    include /etc/nginx/mime.types;\n    default_type application/octet-stream;\n\n    # SSL configuration\n{% if nginx_ssl_enabled %}\n    ssl_protocols TLSv1.2 TLSv1.3;\n    ssl_prefer_server_ciphers off;\n    ssl_dhparam /etc/ssl/certs/dhparam.pem;\n{% endif %}\n\n    # Gzip compression\n    gzip on;\n    gzip_vary on;\n    gzip_proxied any;\n    gzip_comp_level 6;\n    gzip_types\n        application/javascript\n        application/json\n        application/xml\n        text/css\n        text/javascript\n        text/xml\n        text/plain;\n\n    # Security headers\n{% for header in nginx_security_headers %}\n    {{ header }}\n{% endfor %}\n\n    # Logging\n    log_format main '\\$remote_addr - \\$remote_user [\\$time_local] \"\\$request\" '\n                    '\\$status \\$body_bytes_sent \"\\$http_referer\" '\n                    '\"\\$http_user_agent\" \"\\$http_x_forwarded_for\"';\n\n    access_log /var/log/nginx/access.log main;\n    error_log /var/log/nginx/error.log;\n\n    # Rate limiting\n    limit_req_zone \\$binary_remote_addr zone=login:10m rate=10r/m;\n    limit_conn_zone \\$binary_remote_addr zone=addr:10m;\n\n    # Include configurations\n    include /etc/nginx/conf.d/*.conf;\n    include /etc/nginx/sites-enabled/*;\n}\nEOF\n\n# Handlers\ncat \u003e roles/nginx/handlers/main.yml \u003c\u003cEOF\n---\n- name: restart nginx\n  service:\n    name: nginx\n    state: restarted\n\n- name: reload nginx\n  service:\n    name: nginx\n    state: reloaded\n\n- name: validate nginx config\n  command: nginx -t\n  changed_when: false\nEOF\n```\n\n## Security and Compliance\n\n### Ansible Security Scanner Integration\n```bash\n# Create security scanning playbook\ncat \u003e playbooks/security-scan.yml \u003c\u003cEOF\n---\n- name: Security Compliance Scanning\n  hosts: all\n  become: yes\n  gather_facts: yes\n  vars:\n    scan_results_dir: \"/tmp/security-scans\"\n    \n  tasks:\n    - name: Create scan results directory\n      file:\n        path: \"{{ scan_results_dir }}\"\n        state: directory\n        mode: '0755'\n\n    # CIS benchmark scanning\n    - name: Download CIS benchmark script\n      get_url:\n        url: \"https://github.com/dev-sec/cis-dil-benchmark/archive/master.zip\"\n        dest: \"/tmp/cis-benchmark.zip\"\n        mode: '0644'\n\n    - name: Run CIS benchmark scan\n      shell: |\n        cd /tmp\n        unzip -o cis-benchmark.zip\n        cd cis-dil-benchmark-master\n        bash cis_ubuntu2204.sh \u003e {{ scan_results_dir }}/cis-scan-{{ inventory_hostname }}.txt\n      args:\n        creates: \"{{ scan_results_dir }}/cis-scan-{{ inventory_hostname }}.txt\"\n\n    # Lynis security audit\n    - name: Install Lynis\n      package:\n        name: lynis\n        state: present\n\n    - name: Run Lynis security audit\n      command: lynis audit system --quiet --cronjob\n      register: lynis_result\n      changed_when: false\n\n    - name: Save Lynis results\n      copy:\n        content: \"{{ lynis_result.stdout }}\"\n        dest: \"{{ scan_results_dir }}/lynis-scan-{{ inventory_hostname }}.txt\"\n        mode: '0644'\n\n    # OpenSCAP compliance scanning\n    - name: Install OpenSCAP (RHEL/CentOS)\n      package:\n        name:\n          - openscap-scanner\n          - scap-security-guide\n        state: present\n      when: ansible_os_family == \"RedHat\"\n\n    - name: Install OpenSCAP (Debian/Ubuntu)\n      package:\n        name:\n          - libopenscap8\n          - ssg-debian\n        state: present\n      when: ansible_os_family == \"Debian\"\n\n    - name: Run OpenSCAP scan\n      shell: |\n        oscap xccdf eval --profile xccdf_org.ssgproject.content_profile_standard \\\n          --results {{ scan_results_dir }}/oscap-results-{{ inventory_hostname }}.xml \\\n          --report {{ scan_results_dir }}/oscap-report-{{ inventory_hostname }}.html \\\n          /usr/share/xml/scap/ssg/content/ssg-{{ ansible_distribution | lower }}{{ ansible_distribution_major_version }}-xccdf.xml\n      ignore_errors: yes\n      when: ansible_os_family in [\"RedHat\", \"Debian\"]\n\n    # Vulnerability scanning with Trivy\n    - name: Install Trivy vulnerability scanner\n      shell: |\n        curl -sfL https://raw.githubusercontent.com/aquasecurity/trivy/main/contrib/install.sh | sh -s -- -b /usr/local/bin\n      args:\n        creates: /usr/local/bin/trivy\n\n    - name: Run Trivy filesystem scan\n      shell: |\n        trivy fs --format json --output {{ scan_results_dir }}/trivy-scan-{{ inventory_hostname }}.json /\n      ignore_errors: yes\n\n    # Collect scan results\n    - name: Fetch scan results to control machine\n      fetch:\n        src: \"{{ item }}\"\n        dest: \"./security-reports/{{ inventory_hostname }}/\"\n        flat: yes\n      loop:\n        - \"{{ scan_results_dir }}/cis-scan-{{ inventory_hostname }}.txt\"\n        - \"{{ scan_results_dir }}/lynis-scan-{{ inventory_hostname }}.txt\"\n        - \"{{ scan_results_dir }}/oscap-report-{{ inventory_hostname }}.html\"\n        - \"{{ scan_results_dir }}/trivy-scan-{{ inventory_hostname }}.json\"\n      ignore_errors: yes\n      delegate_to: localhost\n\n  post_tasks:\n    - name: Generate compliance summary\n      template:\n        src: templates/compliance-summary.j2\n        dest: \"{{ scan_results_dir }}/compliance-summary-{{ inventory_hostname }}.txt\"\n        mode: '0644'\nEOF\n```\n\n### Ansible AWX/Tower Integration\n```bash\n# Install Ansible AWX (open source)\ncat \u003e playbooks/install-awx.yml \u003c\u003cEOF\n---\n- name: Install Ansible AWX\n  hosts: localhost\n  connection: local\n  become: yes\n  vars:\n    awx_namespace: awx\n    awx_admin_user: admin\n    awx_admin_password: \"{{ vault_awx_admin_password }}\"\n\n  tasks:\n    - name: Install prerequisite packages\n      package:\n        name:\n          - git\n          - curl\n          - docker.io\n          - docker-compose\n        state: present\n\n    - name: Clone AWX repository\n      git:\n        repo: https://github.com/ansible/awx.git\n        dest: /opt/awx\n        version: devel\n\n    - name: Create AWX Docker inventory\n      template:\n        src: templates/awx-docker-inventory.j2\n        dest: /opt/awx/installer/inventory\n        mode: '0644'\n\n    - name: Install AWX using Ansible\n      shell: ansible-playbook -i inventory install.yml\n      args:\n        chdir: /opt/awx/installer\n      environment:\n        ANSIBLE_HOST_KEY_CHECKING: False\n\n    - name: Wait for AWX to be ready\n      uri:\n        url: \"http://localhost:80/api/v2/ping/\"\n        method: GET\n      retries: 30\n      delay: 10\n\n    - name: Configure AWX organizations and projects\n      uri:\n        url: \"http://localhost:80/api/v2/organizations/\"\n        method: POST\n        user: \"{{ awx_admin_user }}\"\n        password: \"{{ awx_admin_password }}\"\n        force_basic_auth: yes\n        body_format: json\n        body:\n          name: \"Production\"\n          description: \"Production environment organization\"\n        status_code: [200, 201, 409]\nEOF\n```\n\n## Multi-Cloud Automation\n\n### AWS Infrastructure Automation\n```bash\ncat \u003e playbooks/aws-infrastructure.yml \u003c\u003cEOF\n---\n- name: AWS Infrastructure Automation\n  hosts: localhost\n  connection: local\n  gather_facts: no\n  vars:\n    aws_region: \"{{ aws_region | default('us-west-2') }}\"\n    vpc_cidr: \"{{ vpc_cidr | default('10.0.0.0/16') }}\"\n    environment: \"{{ environment | default('production') }}\"\n\n  tasks:\n    # VPC Creation\n    - name: Create VPC\n      amazon.aws.ec2_vpc_info:\n        filters:\n          \"tag:Name\": \"{{ environment }}-vpc\"\n        region: \"{{ aws_region }}\"\n      register: existing_vpc\n\n    - name: Create new VPC if not exists\n      amazon.aws.ec2_vpc_net:\n        name: \"{{ environment }}-vpc\"\n        cidr_block: \"{{ vpc_cidr }}\"\n        region: \"{{ aws_region }}\"\n        state: present\n        dns_hostnames: yes\n        dns_support: yes\n        tags:\n          Environment: \"{{ environment }}\"\n          ManagedBy: ansible\n      register: vpc\n      when: existing_vpc.vpcs | length == 0\n\n    # Security Groups\n    - name: Create web security group\n      amazon.aws.ec2_group:\n        name: \"{{ environment }}-web-sg\"\n        description: \"Security group for web servers\"\n        vpc_id: \"{{ vpc.vpc.id if vpc.vpc is defined else existing_vpc.vpcs[0].vpc_id }}\"\n        region: \"{{ aws_region }}\"\n        rules:\n          - proto: tcp\n            ports:\n              - 80\n              - 443\n            cidr_ip: 0.0.0.0/0\n            rule_desc: \"HTTP and HTTPS access\"\n          - proto: tcp\n            ports:\n              - 22\n            group_id: \"{{ environment }}-bastion-sg\"\n            rule_desc: \"SSH from bastion\"\n        tags:\n          Environment: \"{{ environment }}\"\n\n    # Launch EC2 instances\n    - name: Launch web servers\n      amazon.aws.ec2_instance:\n        name: \"{{ environment }}-web-{{ item }}\"\n        instance_type: t3.medium\n        image_id: ami-0c02fb55956c7d316  # Amazon Linux 2\n        key_name: \"{{ ec2_key_name }}\"\n        vpc_subnet_id: \"{{ web_subnet_id }}\"\n        security_groups:\n          - \"{{ environment }}-web-sg\"\n        region: \"{{ aws_region }}\"\n        state: running\n        wait: yes\n        wait_timeout: 300\n        user_data: |\n          #!/bin/bash\n          yum update -y\n          yum install -y python3\n        tags:\n          Environment: \"{{ environment }}\"\n          Role: webserver\n          Ansible: managed\n      loop: \"{{ range(1, web_server_count + 1) | list }}\"\n      register: web_instances\n\n    # Add instances to inventory\n    - name: Add web servers to inventory\n      add_host:\n        name: \"{{ item.instances[0].tags.Name }}\"\n        hostname: \"{{ item.instances[0].public_ip_address }}\"\n        groups: webservers\n        ansible_ssh_private_key_file: \"~/.ssh/{{ ec2_key_name }}.pem\"\n        ansible_user: ec2-user\n      loop: \"{{ web_instances.results }}\"\n      changed_when: false\nEOF\n```\n\n### Kubernetes Cluster Management\n```bash\ncat \u003e playbooks/k8s-cluster-management.yml \u003c\u003cEOF\n---\n- name: Kubernetes Cluster Management with Ansible\n  hosts: k8s_masters\n  become: yes\n  serial: 1\n  vars:\n    k8s_version: \"1.28.2\"\n    containerd_version: \"1.6.24\"\n    cni_version: \"1.3.0\"\n\n  tasks:\n    # Pre-flight checks\n    - name: Check system requirements\n      assert:\n        that:\n          - ansible_memtotal_mb \u003e= 1700\n          - ansible_processor_cores \u003e= 2\n        fail_msg: \"System doesn't meet minimum requirements\"\n\n    - name: Verify connectivity to all nodes\n      ping:\n      delegate_to: \"{{ item }}\"\n      loop: \"{{ groups['k8s_all'] }}\"\n\n    # Container runtime setup\n    - name: Install containerd\n      include_role:\n        name: containerd\n      vars:\n        containerd_version: \"{{ containerd_version }}\"\n\n    # Kubernetes installation\n    - name: Install Kubernetes components\n      include_role:\n        name: kubernetes\n      vars:\n        kubernetes_version: \"{{ k8s_version }}\"\n\n    # Cluster initialization\n    - name: Initialize Kubernetes cluster\n      shell: |\n        kubeadm init \\\n          --pod-network-cidr=10.244.0.0/16 \\\n          --service-cidr=10.96.0.0/12 \\\n          --apiserver-advertise-address={{ ansible_default_ipv4.address }} \\\n          --node-name={{ inventory_hostname }}\n      args:\n        creates: /etc/kubernetes/admin.conf\n      register: kubeadm_init\n\n    - name: Create .kube directory\n      file:\n        path: \"{{ ansible_env.HOME }}/.kube\"\n        state: directory\n        mode: '0755'\n\n    - name: Copy admin.conf to user's kube config\n      copy:\n        src: /etc/kubernetes/admin.conf\n        dest: \"{{ ansible_env.HOME }}/.kube/config\"\n        owner: \"{{ ansible_user }}\"\n        group: \"{{ ansible_user }}\"\n        mode: '0644'\n        remote_src: yes\n\n    # Network plugin installation\n    - name: Install Flannel CNI\n      shell: kubectl apply -f https://github.com/flannel-io/flannel/releases/latest/download/kube-flannel.yml\n      environment:\n        KUBECONFIG: \"{{ ansible_env.HOME }}/.kube/config\"\n\n    # Join worker nodes\n    - name: Get join command\n      shell: kubeadm token create --print-join-command\n      register: join_command\n      when: inventory_hostname in groups['k8s_masters'][0]\n\n    - name: Join worker nodes to cluster\n      shell: \"{{ hostvars[groups['k8s_masters'][0]]['join_command'].stdout }}\"\n      when: inventory_hostname in groups['k8s_workers']\n\n  post_tasks:\n    - name: Verify cluster status\n      shell: kubectl get nodes\n      environment:\n        KUBECONFIG: \"{{ ansible_env.HOME }}/.kube/config\"\n      register: cluster_status\n      when: inventory_hostname in groups['k8s_masters'][0]\n\n    - name: Display cluster status\n      debug:\n        var: cluster_status.stdout_lines\n      when: inventory_hostname in groups['k8s_masters'][0]\nEOF\n```\n\n## Performance Optimization and Scaling\n\n### Parallel Execution Strategies\n```bash\n# Create high-performance playbook configuration\ncat \u003e playbooks/high-performance-deployment.yml \u003c\u003cEOF\n---\n- name: High-Performance Deployment\n  hosts: all\n  become: yes\n  strategy: free  # Parallel execution\n  serial: \"30%\"   # Process 30% of hosts at a time\n  max_fail_percentage: 10\n  gather_facts: yes\n  fact_caching: smart\n  vars:\n    deployment_batch_size: 10\n    max_concurrent_tasks: 50\n\n  pre_tasks:\n    - name: Check system load\n      shell: uptime | awk '{print $(NF-2)}' | sed 's/,//'\n      register: system_load\n      changed_when: false\n\n    - name: Skip high-load systems\n      meta: end_host\n      when: system_load.stdout | float \u003e 5.0\n\n  tasks:\n    - name: Update packages with retries\n      package:\n        name: \"*\"\n        state: latest\n      retries: 3\n      delay: 30\n      async: 300\n      poll: 10\n\n    - name: Deploy configuration files in parallel\n      template:\n        src: \"{{ item.src }}\"\n        dest: \"{{ item.dest }}\"\n        mode: \"{{ item.mode | default('0644') }}\"\n        backup: yes\n      loop:\n        - { src: \"nginx.conf.j2\", dest: \"/etc/nginx/nginx.conf\" }\n        - { src: \"mysql.cnf.j2\", dest: \"/etc/mysql/my.cnf\" }\n        - { src: \"redis.conf.j2\", dest: \"/etc/redis/redis.conf\" }\n      async: 120\n      poll: 5\n      register: config_deployment\n\n    - name: Wait for all configuration deployments\n      async_status:\n        jid: \"{{ item.ansible_job_id }}\"\n      loop: \"{{ config_deployment.results }}\"\n      when: item.ansible_job_id is defined\n\n  handlers:\n    - name: restart services\n      service:\n        name: \"{{ item }}\"\n        state: restarted\n      loop:\n        - nginx\n        - mysql\n        - redis\n      listen: \"restart all services\"\nEOF\n\n# Performance monitoring playbook\ncat \u003e playbooks/performance-monitoring.yml \u003c\u003cEOF\n---\n- name: Performance Monitoring Setup\n  hosts: all\n  become: yes\n  vars:\n    monitoring_tools:\n      - htop\n      - iotop\n      - nethogs\n      - dstat\n      - sysstat\n      - perf\n\n  tasks:\n    - name: Install performance monitoring tools\n      package:\n        name: \"{{ monitoring_tools }}\"\n        state: present\n\n    - name: Configure system monitoring\n      template:\n        src: templates/sysstat.j2\n        dest: /etc/default/sysstat\n        backup: yes\n      when: ansible_os_family == \"Debian\"\n\n    - name: Enable system statistics collection\n      service:\n        name: \"{{ 'sysstat' if ansible_os_family == 'Debian' else 'sysstat' }}\"\n        enabled: yes\n        state: started\n\n    - name: Create performance monitoring script\n      template:\n        src: templates/performance-monitor.sh.j2\n        dest: /usr/local/bin/performance-monitor.sh\n        mode: '0755'\n\n    - name: Schedule performance monitoring\n      cron:\n        name: \"Performance monitoring\"\n        minute: \"*/5\"\n        job: \"/usr/local/bin/performance-monitor.sh\"\n        user: root\nEOF\n```\n\n## Testing and Validation\n\n### Molecule Testing Framework\n```bash\n# Install Molecule for role testing\npip install molecule[docker] molecule[vagrant] molecule[libvirt]\n\n# Initialize Molecule in role directory\ncd roles/nginx\nmolecule init scenario --driver-name docker\n\n# Create molecule configuration\ncat \u003e molecule/default/molecule.yml \u003c\u003cEOF\n---\ndependency:\n  name: galaxy\ndriver:\n  name: docker\nplatforms:\n  - name: nginx-ubuntu\n    image: ubuntu:22.04\n    pre_build_image: true\n    privileged: true\n    volumes:\n      - /sys/fs/cgroup:/sys/fs/cgroup:ro\n    command: /lib/systemd/systemd\n    networks:\n      - name: molecule\n  - name: nginx-centos\n    image: centos:8\n    pre_build_image: true\n    privileged: true\n    volumes:\n      - /sys/fs/cgroup:/sys/fs/cgroup:ro\n    command: /usr/sbin/init\n    networks:\n      - name: molecule\nprovisioner:\n  name: ansible\n  config_options:\n    defaults:\n      callbacks_enabled: profile_tasks,timer,yaml\n  inventory:\n    host_vars:\n      nginx-ubuntu:\n        ansible_python_interpreter: /usr/bin/python3\n      nginx-centos:\n        ansible_python_interpreter: /usr/bin/python3\nverifier:\n  name: ansible\nlint: |\n  set -e\n  yamllint .\n  ansible-lint\n  flake8\nEOF\n\n# Create test playbook\ncat \u003e molecule/default/converge.yml \u003c\u003cEOF\n---\n- name: Converge\n  hosts: all\n  become: true\n  tasks:\n    - name: \"Include nginx role\"\n      include_role:\n        name: nginx\n      vars:\n        nginx_vhosts:\n          - name: default\n            server_name: localhost\n            listen: 80\n            root: /var/www/html\n            enabled: true\nEOF\n\n# Create test verification\ncat \u003e molecule/default/verify.yml \u003c\u003cEOF\n---\n- name: Verify\n  hosts: all\n  gather_facts: false\n  tasks:\n    - name: Check if NGINX is running\n      uri:\n        url: http://localhost\n        method: GET\n      register: nginx_check\n\n    - name: Verify NGINX is responding\n      assert:\n        that:\n          - nginx_check.status == 200\n        fail_msg: \"NGINX is not responding correctly\"\n\n    - name: Check NGINX configuration\n      shell: nginx -t\n      changed_when: false\n\n    - name: Verify NGINX process\n      shell: pgrep nginx\n      changed_when: false\nEOF\n\n# Run tests\nmolecule test\n```\n\n### Ansible Lint and Security Scanning\n```bash\n# Install Ansible Lint\npip install ansible-lint\n\n# Create .ansible-lint configuration\ncat \u003e .ansible-lint \u003c\u003cEOF\n---\nprofile: production\n\nexclude_paths:\n  - .cache/\n  - .github/\n  - molecule/\n  - .venv/\n\nskip_list:\n  - yaml[line-length]  # Allow longer lines for readability\n\nwarn_list:\n  - experimental  # Warn about experimental features\n\n# Custom rules\nrules:\n  braces:\n    min-spaces-inside: 0\n    max-spaces-inside: 1\n  brackets:\n    min-spaces-inside: 0\n    max-spaces-inside: 0\n  colons:\n    max-spaces-before: 0\n    min-spaces-after: 1\n    max-spaces-after: 1\n  commas:\n    max-spaces-before: 0\n    min-spaces-after: 1\n    max-spaces-after: 1\n  comments:\n    min-spaces-from-content: 1\n  document-start: disable\n  empty-lines:\n    max: 2\n    max-start: 0\n    max-end: 1\n  hyphens:\n    max-spaces-after: 1\n  indentation:\n    spaces: 2\n    indent-sequences: true\n  line-length:\n    max: 120\n  new-line-at-end-of-file: enable\n  trailing-spaces: enable\n  truthy:\n    allowed-values: ['true', 'false', 'yes', 'no']\nEOF\n\n# Create security-focused playbook linting\ncat \u003e .yamllint \u003c\u003cEOF\n---\nextends: default\n\nrules:\n  braces:\n    min-spaces-inside: 0\n    max-spaces-inside: 1\n  brackets:\n    min-spaces-inside: 0\n    max-spaces-inside: 0\n  colons:\n    max-spaces-before: 0\n    min-spaces-after: 1\n    max-spaces-after: 1\n  commas:\n    max-spaces-before: 0\n    min-spaces-after: 1\n    max-spaces-after: 1\n  comments: disable\n  comments-indentation: disable\n  document-start: disable\n  empty-lines:\n    max: 2\n    max-start: 0\n    max-end: 1\n  hyphens:\n    max-spaces-after: 1\n  indentation:\n    spaces: 2\n    indent-sequences: true\n    check-multi-line-strings: false\n  key-duplicates: enable\n  line-length:\n    max: 120\n  new-line-at-end-of-file: enable\n  octal-values:\n    forbid-implicit-octal: true\n  trailing-spaces: enable\n  truthy: disable\nEOF\n\n# Run linting\nansible-lint playbooks/\nyamllint .\n```\n\n## Backup and Disaster Recovery\n\n### Comprehensive Backup Automation\n```bash\ncat \u003e playbooks/backup-automation.yml \u003c\u003cEOF\n---\n- name: Automated Backup System\n  hosts: all\n  become: yes\n  vars:\n    backup_root: /backup\n    backup_retention_days: 30\n    backup_schedule:\n      databases: \"0 2 * * *\"\n      files: \"0 3 * * *\"\n      configs: \"0 4 * * *\"\n\n  tasks:\n    - name: Create backup directories\n      file:\n        path: \"{{ backup_root }}/{{ item }}\"\n        state: directory\n        mode: '0755'\n        owner: root\n        group: root\n      loop:\n        - databases\n        - files\n        - configs\n        - logs\n\n    # Database backups\n    - name: Create database backup script\n      template:\n        src: templates/mysql-backup.sh.j2\n        dest: /usr/local/bin/mysql-backup.sh\n        mode: '0755'\n      when: \"'dbservers' in group_names\"\n\n    - name: Schedule database backups\n      cron:\n        name: \"MySQL backup\"\n        minute: \"0\"\n        hour: \"2\"\n        job: \"/usr/local/bin/mysql-backup.sh\"\n        user: root\n      when: \"'dbservers' in group_names\"\n\n    # File system backups\n    - name: Create file backup script\n      template:\n        src: templates/file-backup.sh.j2\n        dest: /usr/local/bin/file-backup.sh\n        mode: '0755'\n\n    - name: Schedule file backups\n      cron:\n        name: \"File system backup\"\n        minute: \"0\"\n        hour: \"3\"\n        job: \"/usr/local/bin/file-backup.sh\"\n        user: root\n\n    # Configuration backups\n    - name: Backup system configurations\n      archive:\n        path:\n          - /etc/nginx\n          - /etc/mysql\n          - /etc/systemd/system\n          - /etc/crontab\n          - /etc/hosts\n          - /etc/fstab\n        dest: \"{{ backup_root }}/configs/system-config-{{ ansible_date_time.epoch }}.tar.gz\"\n        mode: '0600'\n\n    # Remote backup synchronization\n    - name: Synchronize backups to remote storage\n      synchronize:\n        src: \"{{ backup_root }}/\"\n        dest: \"backup-server.example.com:{{ backup_root }}/{{ inventory_hostname }}/\"\n        delete: yes\n        rsync_opts:\n          - \"--exclude=*.tmp\"\n          - \"--compress\"\n          - \"--archive\"\n      when: backup_remote_sync | default(true)\n\n    # Cleanup old backups\n    - name: Clean up old backup files\n      find:\n        paths: \"{{ backup_root }}\"\n        age: \"{{ backup_retention_days }}d\"\n        file_type: file\n      register: old_backups\n\n    - name: Remove old backup files\n      file:\n        path: \"{{ item.path }}\"\n        state: absent\n      loop: \"{{ old_backups.files }}\"\nEOF\n```\n\n## Verification and Monitoring\n\n### Cross-Platform System Verification\n```bash\n# Create comprehensive verification playbook\ncat \u003e playbooks/system-verification.yml \u003c\u003cEOF\n---\n- name: System Verification and Health Check\n  hosts: all\n  become: yes\n  gather_facts: yes\n  vars:\n    health_checks:\n      - service: nginx\n        port: 80\n        process: nginx\n      - service: mysql\n        port: 3306\n        process: mysqld\n      - service: redis\n        port: 6379\n        process: redis-server\n\n  tasks:\n    # System information gathering\n    - name: Gather system information\n      setup:\n        gather_subset:\n          - all\n          - !facter\n          - !ohai\n\n    # Service verification\n    - name: Check critical services status\n      service_facts:\n\n    - name: Verify services are running\n      assert:\n        that:\n          - \"ansible_facts.services[item.service + '.service'].state == 'running'\"\n        fail_msg: \"Service {{ item.service }} is not running\"\n        success_msg: \"Service {{ item.service }} is healthy\"\n      loop: \"{{ health_checks }}\"\n      when: \"item.service + '.service' in ansible_facts.services\"\n\n    # Network connectivity tests\n    - name: Test network connectivity\n      wait_for:\n        host: \"{{ item.host }}\"\n        port: \"{{ item.port }}\"\n        timeout: 5\n      loop:\n        - { host: \"8.8.8.8\", port: 53 }\n        - { host: \"1.1.1.1\", port: 53 }\n      ignore_errors: yes\n\n    # Disk space monitoring\n    - name: Check disk space usage\n      shell: df -h | awk '$5 \u003e \"85%\" {print $0}'\n      register: disk_usage\n      changed_when: false\n      failed_when: disk_usage.stdout != \"\"\n\n    # Memory usage check\n    - name: Check memory usage\n      shell: free | grep Mem | awk '{printf \"%.0f\", $3/$2 * 100.0}'\n      register: memory_usage\n      changed_when: false\n\n    - name: Alert on high memory usage\n      debug:\n        msg: \"WARNING: Memory usage is {{ memory_usage.stdout }}%\"\n      when: memory_usage.stdout | int \u003e 85\n\n    # Security verification\n    - name: Check for failed login attempts\n      shell: grep \"Failed password\" /var/log/auth.log | tail -10\n      register: failed_logins\n      changed_when: false\n      ignore_errors: yes\n      when: ansible_os_family == \"Debian\"\n\n    - name: Check firewall status\n      shell: |\n        if command -v ufw \u003e/dev/null 2\u003e\u00261; then\n          ufw status\n        elif command -v firewall-cmd \u003e/dev/null 2\u003e\u00261; then\n          firewall-cmd --state\n        else\n          echo \"No supported firewall found\"\n        fi\n      register: firewall_status\n      changed_when: false\n\n  post_tasks:\n    - name: Generate system health report\n      template:\n        src: templates/health-report.j2\n        dest: \"/tmp/health-report-{{ inventory_hostname }}-{{ ansible_date_time.epoch }}.txt\"\n        mode: '0644'\n\n    - name: Fetch health reports\n      fetch:\n        src: \"/tmp/health-report-{{ inventory_hostname }}-{{ ansible_date_time.epoch }}.txt\"\n        dest: \"./reports/\"\n        flat: yes\nEOF\n```\n\n### Continuous Compliance Monitoring\n```bash\ncat \u003e playbooks/compliance-monitoring.yml \u003c\u003cEOF\n---\n- name: Continuous Compliance Monitoring\n  hosts: all\n  become: yes\n  vars:\n    compliance_standards:\n      - cis\n      - pci_dss\n      - soc2\n      - hipaa\n    \n    audit_log_paths:\n      - /var/log/auth.log\n      - /var/log/syslog\n      - /var/log/audit/audit.log\n\n  tasks:\n    # Install audit tools\n    - name: Install audit daemon\n      package:\n        name: \"{{ 'auditd' if ansible_os_family == 'RedHat' else 'auditd' }}\"\n        state: present\n\n    - name: Configure audit rules\n      template:\n        src: templates/audit.rules.j2\n        dest: /etc/audit/rules.d/audit.rules\n        backup: yes\n      notify: restart auditd\n\n    # CIS compliance checks\n    - name: Run CIS benchmark checks\n      shell: |\n        if [ -f /opt/cis-cat/CIS-CAT.sh ]; then\n          /opt/cis-cat/CIS-CAT.sh -b /opt/cis-cat/benchmarks/\n        else\n          echo \"CIS-CAT not installed, skipping\"\n        fi\n      register: cis_results\n      ignore_errors: yes\n\n    # File integrity monitoring\n    - name: Install AIDE\n      package:\n        name: aide\n        state: present\n\n    - name: Initialize AIDE database\n      shell: |\n        aide --init\n        mv /var/lib/aide/aide.db.new /var/lib/aide/aide.db\n      args:\n        creates: /var/lib/aide/aide.db\n\n    - name: Schedule AIDE integrity checks\n      cron:\n        name: \"AIDE integrity check\"\n        minute: \"0\"\n        hour: \"3\"\n        job: \"/usr/bin/aide --check | mail -s 'AIDE Report' security@example.com\"\n        user: root\n\n    # Log monitoring\n    - name: Install log monitoring tools\n      package:\n        name:\n          - logwatch\n          - rsyslog\n        state: present\n\n    - name: Configure centralized logging\n      template:\n        src: templates/rsyslog.conf.j2\n        dest: /etc/rsyslog.conf\n        backup: yes\n      notify: restart rsyslog\n\n  handlers:\n    - name: restart auditd\n      service:\n        name: auditd\n        state: restarted\n\n    - name: restart rsyslog\n      service:\n        name: rsyslog\n        state: restarted\nEOF\n```\n\n## CI/CD Integration\n\n### Jenkins Pipeline Integration\n```bash\n# Create Jenkinsfile for Ansible automation\ncat \u003e Jenkinsfile \u003c\u003cEOF\npipeline {\n    agent any\n    \n    environment {\n        ANSIBLE_CONFIG = 'ansible.cfg'\n        ANSIBLE_HOST_KEY_CHECKING = 'False'\n    }\n    \n    stages {\n        stage('Lint') {\n            steps {\n                sh 'ansible-lint playbooks/'\n                sh 'yamllint .'\n            }\n        }\n        \n        stage('Syntax Check') {\n            steps {\n                sh 'ansible-playbook playbooks/site.yml --syntax-check'\n            }\n        }\n        \n        stage('Dry Run') {\n            steps {\n                sh 'ansible-playbook playbooks/site.yml --check --diff'\n            }\n        }\n        \n        stage('Deploy to Staging') {\n            when {\n                branch 'develop'\n            }\n            steps {\n                sh 'ansible-playbook -i inventories/staging playbooks/site.yml'\n            }\n        }\n        \n        stage('Deploy to Production') {\n            when {\n                branch 'main'\n            }\n            steps {\n                input 'Deploy to Production?'\n                sh 'ansible-playbook -i inventories/production playbooks/site.yml'\n            }\n        }\n        \n        stage('Verify Deployment') {\n            steps {\n                sh 'ansible-playbook playbooks/system-verification.yml'\n            }\n        }\n    }\n    \n    post {\n        always {\n            archiveArtifacts artifacts: 'logs/*.log', allowEmptyArchive: true\n            publishHTML([\n                allowMissing: false,\n                alwaysLinkToLastBuild: true,\n                keepAll: true,\n                reportDir: 'reports',\n                reportFiles: '*.html',\n                reportName: 'Ansible Report'\n            ])\n        }\n        failure {\n            emailext (\n                subject: \"Failed Pipeline: ${env.JOB_NAME} - ${env.BUILD_NUMBER}\",\n                body: \"Something is wrong with ${env.BUILD_URL}\",\n                to: \"${env.DEFAULT_RECIPIENTS}\"\n            )\n        }\n    }\n}\nEOF\n```\n\n### GitLab CI Integration\n```bash\ncat \u003e .gitlab-ci.yml \u003c\u003cEOF\nstages:\n  - lint\n  - test\n  - deploy-staging\n  - deploy-production\n\nvariables:\n  ANSIBLE_CONFIG: ansible.cfg\n  ANSIBLE_HOST_KEY_CHECKING: \"False\"\n\nbefore_script:\n  - pip install ansible ansible-lint yamllint\n  - ansible-galaxy install -r requirements.yml\n\nlint:\n  stage: lint\n  script:\n    - ansible-lint playbooks/\n    - yamllint .\n  rules:\n    - if: '$CI_MERGE_REQUEST_IID'\n    - if: '$CI_COMMIT_BRANCH == $CI_DEFAULT_BRANCH'\n\nsyntax-check:\n  stage: test\n  script:\n    - ansible-playbook playbooks/site.yml --syntax-check\n    - ansible-playbook playbooks/site.yml --check --diff -i inventories/staging\n  rules:\n    - if: '$CI_MERGE_REQUEST_IID'\n    - if: '$CI_COMMIT_BRANCH == $CI_DEFAULT_BRANCH'\n\ndeploy-staging:\n  stage: deploy-staging\n  script:\n    - ansible-playbook -i inventories/staging playbooks/site.yml\n  rules:\n    - if: '$CI_COMMIT_BRANCH == \"develop\"'\n\ndeploy-production:\n  stage: deploy-production\n  script:\n    - ansible-playbook -i inventories/production playbooks/site.yml\n  rules:\n    - if: '$CI_COMMIT_BRANCH == $CI_DEFAULT_BRANCH'\n      when: manual\n  environment:\n    name: production\n    url: https://production.example.com\nEOF\n```\n\n## Troubleshooting (Cross-Platform)\n\n### Common Issues and Solutions\n```bash\n# Debug connection issues\nansible all -m ping -vvv\n\n# Check SSH connectivity\nansible all -m setup --ask-pass --ask-become-pass\n\n# Verify inventory\nansible-inventory --list\nansible-inventory --graph\n\n# Test specific host\nansible target-host -m command -a \"uptime\"\n\n# Check syntax without execution\nansible-playbook playbooks/site.yml --syntax-check\n\n# Dry run with verbose output\nansible-playbook playbooks/site.yml --check --diff -vvv\n\n# Debug variable resolution\nansible-playbook playbooks/site.yml --extra-vars=\"debug=true\" --tags debug\n\n# Check facts\nansible all -m setup | grep ansible_os_family\n\n# Connection troubleshooting\nssh -vvv user@target-host\n\n# Permission issues\nansible all -m file -a \"path=/tmp/test state=touch\" --become\n\n# Vault issues\nansible-vault view group_vars/all/vault.yml\n\n# Performance debugging\nansible-playbook playbooks/site.yml --start-at-task=\"specific task name\"\nansible-playbook playbooks/site.yml --step\n\n# Module testing\nansible localhost -m debug -a \"var=hostvars\"\nansible localhost -m setup\n\n# Check for syntax errors in roles\nfind roles/ -name \"*.yml\" -exec ansible-playbook {} --syntax-check \\;\n```\n\n### Advanced Debugging\n```bash\n# Enable comprehensive logging\nexport ANSIBLE_DEBUG=1\nexport ANSIBLE_VERBOSITY=4\nansible-playbook playbooks/site.yml\n\n# Profile playbook execution\nansible-playbook playbooks/site.yml --extra-vars=\"profile_tasks_sort_order=none\"\n\n# Memory usage analysis\nansible-playbook playbooks/site.yml --extra-vars=\"ansible_python_interpreter=/usr/bin/python3\"\n\n# Network debugging\nansible all -m command -a \"ss -tulpn\"\nansible all -m command -a \"netstat -rn\"\n\n# Process debugging\nansible all -m command -a \"ps aux --sort=-%mem | head -10\"\n\n# Disk usage analysis\nansible all -m command -a \"df -h\"\nansible all -m command -a \"du -sh /var/log/*\"\n\n# Service debugging\nansible all -m systemd -a \"name=nginx\" --become\nansible all -m command -a \"systemctl status nginx\" --become\n\n# Variable debugging\nansible-playbook playbooks/site.yml --extra-vars=\"debug_vars=true\" --tags debug_vars\n```\n\n## Additional Resources\n\n- [Official Documentation](https://docs.ansible.com/)\n- [Ansible Galaxy](https://galaxy.ansible.com/)\n- [Best Practices Guide](https://docs.ansible.com/ansible/latest/user_guide/playbooks_best_practices.html)\n- [Security Best Practices](https://docs.ansible.com/ansible/latest/user_guide/become.html#security-best-practices)\n- [Ansible Molecule Testing](https://molecule.readthedocs.io/)\n- [Community Collections](https://docs.ansible.com/ansible/latest/collections/index.html)\n\n---\n\n**Note:** This guide is part of the [HowToMgr](https://howtomgr.github.io) collection.","readmeHtml":"\u003ch1 id=\"ansible-installation-guide\" class=\"mobile-header\"\u003eAnsible Installation Guide\u003c/h1\u003e\n\u003cp class=\"mobile-paragraph\"\u003eAgentless automation platform for configuration management, application deployment, and task automation across multiple systems. Industry standard for infrastructure automation with enterprise-grade security.\u003c/p\u003e\n\u003ch2 id=\"prerequisites\" class=\"mobile-header\"\u003ePrerequisites\u003c/h2\u003e\n\u003cli class=\"mobile-list-item\"\u003eLinux control machine (any modern distribution)\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003ePython 3.8+ on control machine\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eSSH access to target hosts\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003ePython 2.7+ or 3.5+ on target hosts\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003e2GB RAM minimum, 4GB+ recommended for large infrastructures\u003c/li\u003e\n\u003ch2 id=\"installation\" class=\"mobile-header\"\u003eInstallation\u003c/h2\u003e\n\u003ch3 id=\"using-package-manager-recommended\" class=\"mobile-header\"\u003eUsing Package Manager (Recommended)\u003c/h3\u003e\n\u003cp class=\"mobile-paragraph\"\u003e#### Ubuntu/Debian\u003c/p\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Update package list\nsudo apt update\n\n# Install Ansible and dependencies\nsudo apt install -y ansible python3-pip python3-venv sshpass\n\n# Install additional collections\nansible-galaxy collection install community.general\nansible-galaxy collection install ansible.posix\nansible-galaxy collection install kubernetes.core\nansible-galaxy collection install amazon.aws\nansible-galaxy collection install azure.azcollection\nansible-galaxy collection install google.cloud\n\n# Verify installation\nansible --version\nansible-galaxy collection list\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003cp class=\"mobile-paragraph\"\u003e#### RHEL/CentOS/Rocky Linux/AlmaLinux\u003c/p\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Install EPEL repository\nsudo yum install -y epel-release\n\n# Install Ansible\nsudo yum install -y ansible python3-pip\n\n# For newer distributions\nsudo dnf install -y ansible python3-pip\n\n# Install collections\nansible-galaxy collection install community.general\nansible-galaxy collection install ansible.posix\nansible-galaxy collection install kubernetes.core\n\n# Verify installation\nansible --version\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003cp class=\"mobile-paragraph\"\u003e#### Fedora\u003c/p\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Install Ansible\nsudo dnf install -y ansible python3-pip python3-virtualenv\n\n# Install additional collections\nansible-galaxy collection install community.general\nansible-galaxy collection install ansible.posix\nansible-galaxy collection install kubernetes.core\n\n# Verify installation\nansible --version\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003cp class=\"mobile-paragraph\"\u003e#### Arch Linux\u003c/p\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Install Ansible\nsudo pacman -Syu ansible python-pip\n\n# Install collections\nansible-galaxy collection install community.general\nansible-galaxy collection install ansible.posix\n\n# Verify installation\nansible --version\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003cp class=\"mobile-paragraph\"\u003e#### Alpine Linux\u003c/p\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Install Ansible\nsudo apk update\nsudo apk add ansible python3 py3-pip openssh\n\n# Install collections\nansible-galaxy collection install community.general\n\n# Verify installation\nansible --version\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"using-pip-latest-version\" class=\"mobile-header\"\u003eUsing pip (Latest Version)\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Create virtual environment (recommended)\npython3 -m venv ~/ansible-venv\nsource ~/ansible-venv/bin/activate\n\n# Install Ansible via pip\npip install --upgrade pip\npip install ansible ansible-core\n\n# Install additional packages\npip install paramiko jinja2 PyYAML cryptography\n\n# Install cloud provider SDKs\npip install boto3 botocore azure-cli google-cloud-storage\n\n# Install collections\nansible-galaxy collection install community.general\nansible-galaxy collection install ansible.posix\nansible-galaxy collection install kubernetes.core\nansible-galaxy collection install amazon.aws\nansible-galaxy collection install azure.azcollection\nansible-galaxy collection install google.cloud\n\n# Add to PATH permanently\necho \u0026#039;source ~/ansible-venv/bin/activate\u0026#039; \u0026gt;\u0026gt; ~/.bashrc\n\n# Verify installation\nansible --version\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"using-docker\" class=\"mobile-header\"\u003eUsing Docker\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Create Ansible Docker container with mounted volumes\ndocker run --rm -it \\\n  -v $(pwd):/ansible \\\n  -v ~/.ssh:/root/.ssh:ro \\\n  -v ~/.aws:/root/.aws:ro \\\n  -v ~/.azure:/root/.azure:ro \\\n  --workdir /ansible \\\n  ansible/ansible:latest\n\n# Create wrapper script for ease of use\nsudo tee /usr/local/bin/ansible-docker \u0026gt; /dev/null \u0026lt;\u0026lt;\u0026#039;EOF\u0026#039;\n#!/bin/bash\ndocker run --rm -it \\\n  -v $(pwd):/ansible \\\n  -v ~/.ssh:/root/.ssh:ro \\\n  -v ~/.aws:/root/.aws:ro \\\n  -v ~/.azure:/root/.azure:ro \\\n  -v ~/.kube:/root/.kube:ro \\\n  --workdir /ansible \\\n  --network host \\\n  ansible/ansible:latest \u0026quot;$@\u0026quot;\nEOF\nsudo chmod +x /usr/local/bin/ansible-docker\n\n# Create aliases\necho \u0026#039;alias ansible=\u0026quot;ansible-docker ansible\u0026quot;\u0026#039; \u0026gt;\u0026gt; ~/.bashrc\necho \u0026#039;alias ansible-playbook=\u0026quot;ansible-docker ansible-playbook\u0026quot;\u0026#039; \u0026gt;\u0026gt; ~/.bashrc\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"project-structure-and-configuration\" class=\"mobile-header\"\u003eProject Structure and Configuration\u003c/h2\u003e\n\u003ch3 id=\"professional-project-structure\" class=\"mobile-header\"\u003eProfessional Project Structure\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Create comprehensive Ansible project structure\nmkdir -p ~/ansible-infrastructure/{\n  inventories/{production,staging,development},\n  playbooks,\n  roles,\n  group_vars,\n  host_vars,\n  library,\n  filter_plugins,\n  callback_plugins,\n  vault,\n  collections,\n  logs\n}\n\ncd ~/ansible-infrastructure\n\n# Create ansible.cfg with security best practices\ncat \u0026gt; ansible.cfg \u0026lt;\u0026lt;EOF\n[defaults]\ninventory = inventories/production/hosts.yml\nremote_user = ansible\nprivate_key_file = ~/.ssh/ansible_key\nhost_key_checking = True\ntimeout = 30\nretry_files_enabled = False\nstdout_callback = yaml\nbin_ansible_callbacks = True\ngathering = smart\nfact_caching = jsonfile\nfact_caching_connection = ~/.ansible/facts_cache\nfact_caching_timeout = 86400\ninterpreter_python = auto_silent\nvault_password_file = ~/.ansible_vault_pass\n\n# Logging\nlog_path = logs/ansible.log\ndisplay_skipped_hosts = False\ndisplay_ok_hosts = False\n\n# Performance\nforks = 20\npoll_interval = 15\ninternal_poll_interval = 0.001\n\n# Security\ncommand_warnings = True\ndeprecation_warnings = True\naction_warnings = True\nlocalhost_warning = True\n\n[ssh_connection]\nssh_args = -o ControlMaster=auto -o ControlPersist=3600s -o PreferredAuthentications=publickey\npipelining = True\ncontrol_path = ~/.ansible/cp/%%h-%%p-%%r\nretries = 3\n\n[privilege_escalation]\nbecome = False\nbecome_method = sudo\nbecome_user = root\nbecome_ask_pass = False\n\n[inventory]\nenable_plugins = host_list, script, auto, yaml, ini, toml\ncache = True\ncache_plugin = jsonfile\ncache_timeout = 3600\ncache_connection = ~/.ansible/inventory_cache\n\n[galaxy]\nserver_list = automation_hub, galaxy\nEOF\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"advanced-inventory-management\" class=\"mobile-header\"\u003eAdvanced Inventory Management\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Create production inventory with groups and variables\ncat \u0026gt; inventories/production/hosts.yml \u0026lt;\u0026lt;EOF\nall:\n  children:\n    webservers:\n      hosts:\n        web-prod-01:\n          ansible_host: 10.0.1.10\n          ansible_user: ansible\n          server_role: frontend\n          backup_enabled: true\n        web-prod-02:\n          ansible_host: 10.0.1.11\n          ansible_user: ansible\n          server_role: frontend\n          backup_enabled: true\n        web-prod-03:\n          ansible_host: 10.0.1.12\n          ansible_user: ansible\n          server_role: frontend\n          backup_enabled: true\n      vars:\n        http_port: 80\n        https_port: 443\n        max_clients: 200\n        environment: production\n        monitoring_enabled: true\n\n    dbservers:\n      hosts:\n        db-prod-01:\n          ansible_host: 10.0.2.10\n          ansible_user: ansible\n          mysql_server_id: 1\n          mysql_role: master\n        db-prod-02:\n          ansible_host: 10.0.2.11\n          ansible_user: ansible\n          mysql_server_id: 2\n          mysql_role: slave\n      vars:\n        mysql_port: 3306\n        mysql_root_password: \u0026quot;{{ vault_mysql_root_password }}\u0026quot;\n        mysql_replication_user: \u0026quot;{{ vault_mysql_replication_user }}\u0026quot;\n        mysql_replication_password: \u0026quot;{{ vault_mysql_replication_password }}\u0026quot;\n\n    loadbalancers:\n      hosts:\n        lb-prod-01:\n          ansible_host: 10.0.3.10\n          ansible_user: ansible\n          lb_algorithm: roundrobin\n        lb-prod-02:\n          ansible_host: 10.0.3.11\n          ansible_user: ansible\n          lb_algorithm: roundrobin\n      vars:\n        haproxy_stats_enabled: true\n        haproxy_stats_user: admin\n        haproxy_stats_password: \u0026quot;{{ vault_haproxy_stats_password }}\u0026quot;\n\n    monitoring:\n      hosts:\n        monitor-prod-01:\n          ansible_host: 10.0.4.10\n          ansible_user: ansible\n          prometheus_retention: 30d\n          grafana_admin_password: \u0026quot;{{ vault_grafana_admin_password }}\u0026quot;\n\n    bastion:\n      hosts:\n        bastion-prod-01:\n          ansible_host: bastion.example.com\n          ansible_user: ansible\n          ansible_port: 22\n\n# Global variables for all hosts\nwebservers:\n  vars:\n    nginx_worker_processes: auto\n    nginx_worker_connections: 1024\n    ssl_certificate_path: /etc/ssl/certs\n    backup_schedule: \u0026quot;0 2 * * *\u0026quot;\n\ndbservers:\n  vars:\n    mysql_innodb_buffer_pool_size: 2G\n    mysql_max_connections: 200\n    backup_schedule: \u0026quot;0 1 * * *\u0026quot;\n    monitoring_enabled: true\nEOF\n\n# Create dynamic inventory script for cloud environments\ncat \u0026gt; inventories/production/aws_ec2.yml \u0026lt;\u0026lt;EOF\nplugin: amazon.aws.aws_ec2\nregions:\n  - us-west-2\n  - us-east-1\nfilters:\n  tag:Environment: production\n  tag:Ansible: managed\n  instance-state-name: running\n\nhostnames:\n  - tag:Name\n  - dns-name\n  - private-ip-address\n\ncompose:\n  ansible_host: private_ip_address\n  ec2_state: ec2_state_name\n  ec2_arch: ec2_architecture\n\ngroups:\n  # Group by instance type\n  webservers: \u0026quot;\u0026#039;web\u0026#039; in tags.Role\u0026quot;\n  databases: \u0026quot;\u0026#039;db\u0026#039; in tags.Role\u0026quot;\n  loadbalancers: \u0026quot;\u0026#039;lb\u0026#039; in tags.Role\u0026quot;\n  \n  # Group by environment\n  production: \u0026quot;tags.Environment == \u0026#039;production\u0026#039;\u0026quot;\n  staging: \u0026quot;tags.Environment == \u0026#039;staging\u0026#039;\u0026quot;\n  \n  # Group by availability zone\n  us_west_2a: ec2_placement_availability_zone == \u0026quot;us-west-2a\u0026quot;\n  us_west_2b: ec2_placement_availability_zone == \u0026quot;us-west-2b\u0026quot;\n\nkeyed_groups:\n  # Create groups based on tags\n  - key: tags.Environment\n    prefix: env\n  - key: tags.Role  \n    prefix: role\n  - key: ec2_instance_type\n    prefix: type\nEOF\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"ansible-vault-security\" class=\"mobile-header\"\u003eAnsible Vault Security\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Create strong vault password\nopenssl rand -base64 32 \u0026gt; ~/.ansible_vault_pass\nchmod 600 ~/.ansible_vault_pass\n\n# Create encrypted vault file for secrets\nansible-vault create group_vars/all/vault.yml\n# Enter secure passwords and API keys:\n# vault_mysql_root_password: your_secure_mysql_password\n# vault_grafana_admin_password: your_secure_grafana_password  \n# vault_ssl_private_key: |\n#   -----BEGIN PRIVATE KEY-----\n#   your_private_key_content\n#   -----END PRIVATE KEY-----\n\n# Create non-encrypted variables file\ncat \u0026gt; group_vars/all/vars.yml \u0026lt;\u0026lt;EOF\n# Non-sensitive variables\nmysql_port: 3306\nnginx_port: 80\ngrafana_port: 3000\nprometheus_port: 9090\n\n# Reference vault variables\nmysql_root_password: \u0026quot;{{ vault_mysql_root_password }}\u0026quot;\ngrafana_admin_password: \u0026quot;{{ vault_grafana_admin_password }}\u0026quot;\n\n# SSL configuration\nssl_certificate_path: /etc/ssl/certs/server.crt\nssl_private_key_path: /etc/ssl/private/server.key\nssl_private_key_content: \u0026quot;{{ vault_ssl_private_key }}\u0026quot;\n\n# Security settings\nansible_ssh_common_args: \u0026#039;-o StrictHostKeyChecking=yes -o UserKnownHostsFile=~/.ssh/known_hosts\u0026#039;\nansible_become_method: sudo\nansible_become_user: root\nEOF\n\n# Edit vault file\nansible-vault edit group_vars/all/vault.yml\n\n# View vault file (read-only)\nansible-vault view group_vars/all/vault.yml\n\n# Change vault password\nansible-vault rekey group_vars/all/vault.yml\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"comprehensive-playbooks\" class=\"mobile-header\"\u003eComprehensive Playbooks\u003c/h2\u003e\n\u003ch3 id=\"system-hardening-playbook\" class=\"mobile-header\"\u003eSystem Hardening Playbook\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003ecat \u0026gt; playbooks/system-hardening.yml \u0026lt;\u0026lt;EOF\n---\n- name: System Security Hardening\n  hosts: all\n  become: yes\n  gather_facts: yes\n  vars:\n    security_packages:\n      - fail2ban\n      - ufw\n      - aide\n      - chkrootkit\n      - rkhunter\n      - clamav\n      - lynis\n    \n    disabled_services:\n      - telnet\n      - rsh\n      - rlogin\n      - tftp\n      - talk\n      - finger\n\n  pre_tasks:\n    - name: Update package cache\n      package:\n        update_cache: yes\n        cache_valid_time: 3600\n      when: ansible_os_family in [\u0026quot;Debian\u0026quot;, \u0026quot;RedHat\u0026quot;]\n\n  tasks:\n    # System updates\n    - name: Upgrade all packages\n      package:\n        name: \u0026quot;*\u0026quot;\n        state: latest\n      when: ansible_os_family == \u0026quot;RedHat\u0026quot;\n\n    - name: Upgrade all packages (Debian/Ubuntu)\n      apt:\n        upgrade: dist\n        autoremove: yes\n        autoclean: yes\n      when: ansible_os_family == \u0026quot;Debian\u0026quot;\n\n    # Install security packages\n    - name: Install security packages\n      package:\n        name: \u0026quot;{{ security_packages }}\u0026quot;\n        state: present\n\n    # User security\n    - name: Create ansible user with limited privileges\n      user:\n        name: ansible\n        groups: sudo\n        shell: /bin/bash\n        create_home: yes\n        generate_ssh_key: yes\n        ssh_key_bits: 4096\n        ssh_key_type: rsa\n\n    - name: Configure sudo for ansible user\n      lineinfile:\n        path: /etc/sudoers.d/ansible\n        line: \u0026#039;ansible ALL=(ALL) NOPASSWD:ALL\u0026#039;\n        create: yes\n        mode: \u0026#039;0440\u0026#039;\n        validate: \u0026#039;visudo -cf %s\u0026#039;\n\n    # SSH hardening\n    - name: Configure SSH security\n      lineinfile:\n        path: /etc/ssh/sshd_config\n        regexp: \u0026quot;{{ item.regexp }}\u0026quot;\n        line: \u0026quot;{{ item.line }}\u0026quot;\n        backup: yes\n      loop:\n        - { regexp: \u0026#039;^#?PermitRootLogin\u0026#039;, line: \u0026#039;PermitRootLogin no\u0026#039; }\n        - { regexp: \u0026#039;^#?PasswordAuthentication\u0026#039;, line: \u0026#039;PasswordAuthentication no\u0026#039; }\n        - { regexp: \u0026#039;^#?X11Forwarding\u0026#039;, line: \u0026#039;X11Forwarding no\u0026#039; }\n        - { regexp: \u0026#039;^#?MaxAuthTries\u0026#039;, line: \u0026#039;MaxAuthTries 3\u0026#039; }\n        - { regexp: \u0026#039;^#?ClientAliveInterval\u0026#039;, line: \u0026#039;ClientAliveInterval 300\u0026#039; }\n        - { regexp: \u0026#039;^#?ClientAliveCountMax\u0026#039;, line: \u0026#039;ClientAliveCountMax 0\u0026#039; }\n        - { regexp: \u0026#039;^#?Protocol\u0026#039;, line: \u0026#039;Protocol 2\u0026#039; }\n        - { regexp: \u0026#039;^#?LogLevel\u0026#039;, line: \u0026#039;LogLevel VERBOSE\u0026#039; }\n      notify: restart ssh\n\n    # Firewall configuration\n    - name: Configure UFW firewall (Debian/Ubuntu)\n      ufw:\n        state: enabled\n        policy: deny\n        direction: incoming\n      when: ansible_os_family == \u0026quot;Debian\u0026quot;\n\n    - name: Allow SSH through UFW\n      ufw:\n        rule: allow\n        port: 22\n        proto: tcp\n        comment: \u0026#039;SSH access\u0026#039;\n      when: ansible_os_family == \u0026quot;Debian\u0026quot;\n\n    - name: Configure firewalld (RHEL/CentOS/Fedora)\n      firewalld:\n        state: enabled\n        permanent: yes\n        immediate: yes\n      when: ansible_os_family == \u0026quot;RedHat\u0026quot;\n\n    - name: Allow SSH through firewalld\n      firewalld:\n        service: ssh\n        permanent: yes\n        state: enabled\n        immediate: yes\n      when: ansible_os_family == \u0026quot;RedHat\u0026quot;\n\n    # Disable unnecessary services\n    - name: Disable unnecessary services\n      systemd:\n        name: \u0026quot;{{ item }}\u0026quot;\n        enabled: no\n        state: stopped\n      loop: \u0026quot;{{ disabled_services }}\u0026quot;\n      ignore_errors: yes\n\n    # File system security\n    - name: Set proper permissions on sensitive files\n      file:\n        path: \u0026quot;{{ item.path }}\u0026quot;\n        mode: \u0026quot;{{ item.mode }}\u0026quot;\n        owner: root\n        group: root\n      loop:\n        - { path: \u0026#039;/etc/passwd\u0026#039;, mode: \u0026#039;0644\u0026#039; }\n        - { path: \u0026#039;/etc/shadow\u0026#039;, mode: \u0026#039;0640\u0026#039; }\n        - { path: \u0026#039;/etc/group\u0026#039;, mode: \u0026#039;0644\u0026#039; }\n        - { path: \u0026#039;/etc/gshadow\u0026#039;, mode: \u0026#039;0640\u0026#039; }\n        - { path: \u0026#039;/etc/ssh/sshd_config\u0026#039;, mode: \u0026#039;0600\u0026#039; }\n\n    # Kernel security parameters\n    - name: Configure kernel security parameters\n      sysctl:\n        name: \u0026quot;{{ item.key }}\u0026quot;\n        value: \u0026quot;{{ item.value }}\u0026quot;\n        sysctl_set: yes\n        state: present\n        reload: yes\n      loop:\n        - { key: \u0026#039;net.ipv4.ip_forward\u0026#039;, value: \u0026#039;0\u0026#039; }\n        - { key: \u0026#039;net.ipv4.conf.all.send_redirects\u0026#039;, value: \u0026#039;0\u0026#039; }\n        - { key: \u0026#039;net.ipv4.conf.default.send_redirects\u0026#039;, value: \u0026#039;0\u0026#039; }\n        - { key: \u0026#039;net.ipv4.conf.all.accept_source_route\u0026#039;, value: \u0026#039;0\u0026#039; }\n        - { key: \u0026#039;net.ipv4.conf.default.accept_source_route\u0026#039;, value: \u0026#039;0\u0026#039; }\n        - { key: \u0026#039;net.ipv4.conf.all.accept_redirects\u0026#039;, value: \u0026#039;0\u0026#039; }\n        - { key: \u0026#039;net.ipv4.conf.default.accept_redirects\u0026#039;, value: \u0026#039;0\u0026#039; }\n        - { key: \u0026#039;net.ipv4.conf.all.secure_redirects\u0026#039;, value: \u0026#039;0\u0026#039; }\n        - { key: \u0026#039;net.ipv4.conf.default.secure_redirects\u0026#039;, value: \u0026#039;0\u0026#039; }\n        - { key: \u0026#039;net.ipv4.conf.all.log_martians\u0026#039;, value: \u0026#039;1\u0026#039; }\n        - { key: \u0026#039;net.ipv4.conf.default.log_martians\u0026#039;, value: \u0026#039;1\u0026#039; }\n        - { key: \u0026#039;kernel.randomize_va_space\u0026#039;, value: \u0026#039;2\u0026#039; }\n\n    # Configure fail2ban\n    - name: Configure fail2ban for SSH protection\n      template:\n        src: templates/fail2ban-jail.local.j2\n        dest: /etc/fail2ban/jail.local\n        backup: yes\n      notify: restart fail2ban\n\n  handlers:\n    - name: restart ssh\n      service:\n        name: \u0026quot;{{ \u0026#039;ssh\u0026#039; if ansible_os_family == \u0026#039;Debian\u0026#039; else \u0026#039;sshd\u0026#039; }}\u0026quot;\n        state: restarted\n\n    - name: restart fail2ban\n      service:\n        name: fail2ban\n        state: restarted\nEOF\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"application-deployment-playbook\" class=\"mobile-header\"\u003eApplication Deployment Playbook\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003ecat \u0026gt; playbooks/web-application-deployment.yml \u0026lt;\u0026lt;EOF\n---\n- name: Deploy Web Application Stack\n  hosts: webservers\n  become: yes\n  serial: \u0026quot;25%\u0026quot;  # Rolling deployment\n  max_fail_percentage: 10\n  vars:\n    app_name: mywebapp\n    app_version: \u0026quot;{{ app_version | default(\u0026#039;latest\u0026#039;) }}\u0026quot;\n    app_port: 3000\n    nginx_workers: \u0026quot;{{ ansible_processor_cores }}\u0026quot;\n    \n  pre_tasks:\n    - name: Check if maintenance mode file exists\n      stat:\n        path: /var/www/html/maintenance.html\n      register: maintenance_mode\n\n    - name: Fail if in maintenance mode\n      fail:\n        msg: \u0026quot;Server is in maintenance mode\u0026quot;\n      when: maintenance_mode.stat.exists and not force_deployment | default(false)\n\n  tasks:\n    # Application deployment\n    - name: Create application user\n      user:\n        name: \u0026quot;{{ app_name }}\u0026quot;\n        system: yes\n        shell: /bin/false\n        home: \u0026quot;/opt/{{ app_name }}\u0026quot;\n        create_home: yes\n\n    - name: Create application directories\n      file:\n        path: \u0026quot;{{ item }}\u0026quot;\n        state: directory\n        owner: \u0026quot;{{ app_name }}\u0026quot;\n        group: \u0026quot;{{ app_name }}\u0026quot;\n        mode: \u0026#039;0755\u0026#039;\n      loop:\n        - \u0026quot;/opt/{{ app_name }}\u0026quot;\n        - \u0026quot;/opt/{{ app_name }}/releases\u0026quot;\n        - \u0026quot;/opt/{{ app_name }}/shared\u0026quot;\n        - \u0026quot;/var/log/{{ app_name }}\u0026quot;\n\n    - name: Download application release\n      get_url:\n        url: \u0026quot;https://releases.example.com/{{ app_name }}/{{ app_version }}/{{ app_name }}-{{ app_version }}.tar.gz\u0026quot;\n        dest: \u0026quot;/tmp/{{ app_name }}-{{ app_version }}.tar.gz\u0026quot;\n        mode: \u0026#039;0644\u0026#039;\n        timeout: 300\n      register: download_result\n\n    - name: Extract application\n      unarchive:\n        src: \u0026quot;/tmp/{{ app_name }}-{{ app_version }}.tar.gz\u0026quot;\n        dest: \u0026quot;/opt/{{ app_name }}/releases/\u0026quot;\n        owner: \u0026quot;{{ app_name }}\u0026quot;\n        group: \u0026quot;{{ app_name }}\u0026quot;\n        remote_src: yes\n        creates: \u0026quot;/opt/{{ app_name }}/releases/{{ app_version }}\u0026quot;\n\n    - name: Create symlink to current release\n      file:\n        src: \u0026quot;/opt/{{ app_name }}/releases/{{ app_version }}\u0026quot;\n        dest: \u0026quot;/opt/{{ app_name }}/current\u0026quot;\n        state: link\n        owner: \u0026quot;{{ app_name }}\u0026quot;\n        group: \u0026quot;{{ app_name }}\u0026quot;\n      notify:\n        - reload application\n        - reload nginx\n\n    # Configuration management\n    - name: Deploy application configuration\n      template:\n        src: \u0026quot;templates/{{ app_name }}.conf.j2\u0026quot;\n        dest: \u0026quot;/opt/{{ app_name }}/shared/{{ app_name }}.conf\u0026quot;\n        owner: \u0026quot;{{ app_name }}\u0026quot;\n        group: \u0026quot;{{ app_name }}\u0026quot;\n        mode: \u0026#039;0640\u0026#039;\n        backup: yes\n      notify: reload application\n\n    # Service management\n    - name: Deploy systemd service file\n      template:\n        src: \u0026quot;templates/{{ app_name }}.service.j2\u0026quot;\n        dest: \u0026quot;/etc/systemd/system/{{ app_name }}.service\u0026quot;\n        mode: \u0026#039;0644\u0026#039;\n      notify:\n        - daemon reload\n        - restart application\n\n    - name: Enable and start application service\n      systemd:\n        name: \u0026quot;{{ app_name }}\u0026quot;\n        enabled: yes\n        state: started\n        daemon_reload: yes\n\n    # Health check\n    - name: Wait for application to be ready\n      uri:\n        url: \u0026quot;http://localhost:{{ app_port }}/health\u0026quot;\n        method: GET\n        status_code: 200\n      retries: 30\n      delay: 10\n\n    # Cleanup old releases\n    - name: Clean up old releases (keep last 3)\n      shell: |\n        cd /opt/{{ app_name }}/releases\n        ls -t | tail -n +4 | xargs rm -rf\n      args:\n        executable: /bin/bash\n\n  post_tasks:\n    - name: Verify application is running\n      uri:\n        url: \u0026quot;http://{{ ansible_default_ipv4.address }}:{{ app_port }}/health\u0026quot;\n        method: GET\n        status_code: 200\n      delegate_to: localhost\n\n    - name: Log deployment success\n      lineinfile:\n        path: \u0026quot;/var/log/{{ app_name }}/deployments.log\u0026quot;\n        line: \u0026quot;{{ ansible_date_time.iso8601 }} - Successfully deployed {{ app_version }} to {{ inventory_hostname }}\u0026quot;\n        create: yes\n\n  handlers:\n    - name: daemon reload\n      systemd:\n        daemon_reload: yes\n\n    - name: restart application\n      systemd:\n        name: \u0026quot;{{ app_name }}\u0026quot;\n        state: restarted\n\n    - name: reload application\n      systemd:\n        name: \u0026quot;{{ app_name }}\u0026quot;\n        state: reloaded\n\n    - name: reload nginx\n      service:\n        name: nginx\n        state: reloaded\nEOF\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"infrastructure-as-code-playbook\" class=\"mobile-header\"\u003eInfrastructure as Code Playbook\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003ecat \u0026gt; playbooks/infrastructure-provisioning.yml \u0026lt;\u0026lt;EOF\n---\n- name: Infrastructure Provisioning and Configuration\n  hosts: all\n  become: yes\n  strategy: free  # Parallel execution\n  vars:\n    base_packages:\n      Debian:\n        - curl\n        - wget\n        - vim\n        - htop\n        - git\n        - python3\n        - python3-pip\n        - unzip\n        - tree\n      RedHat:\n        - curl\n        - wget\n        - vim\n        - htop\n        - git\n        - python3\n        - python3-pip\n        - unzip\n        - tree\n        - epel-release\n\n  tasks:\n    # System preparation\n    - name: Set hostname\n      hostname:\n        name: \u0026quot;{{ inventory_hostname }}\u0026quot;\n\n    - name: Update /etc/hosts\n      lineinfile:\n        path: /etc/hosts\n        line: \u0026quot;{{ ansible_default_ipv4.address }} {{ inventory_hostname }}\u0026quot;\n        backup: yes\n\n    # Package management\n    - name: Install base packages\n      package:\n        name: \u0026quot;{{ base_packages[ansible_os_family] | default(base_packages[\u0026#039;Debian\u0026#039;]) }}\u0026quot;\n        state: present\n\n    # Time synchronization\n    - name: Install and configure NTP\n      package:\n        name: \u0026quot;{{ \u0026#039;ntp\u0026#039; if ansible_os_family == \u0026#039;Debian\u0026#039; else \u0026#039;chrony\u0026#039; }}\u0026quot;\n        state: present\n\n    - name: Start and enable time synchronization\n      service:\n        name: \u0026quot;{{ \u0026#039;ntp\u0026#039; if ansible_os_family == \u0026#039;Debian\u0026#039; else \u0026#039;chronyd\u0026#039; }}\u0026quot;\n        state: started\n        enabled: yes\n\n    # Log management\n    - name: Configure logrotate for application logs\n      template:\n        src: templates/app-logrotate.j2\n        dest: /etc/logrotate.d/applications\n        mode: \u0026#039;0644\u0026#039;\n\n    # Monitoring agent installation\n    - name: Install Node Exporter for Prometheus monitoring\n      get_url:\n        url: \u0026quot;https://github.com/prometheus/node_exporter/releases/download/v1.6.1/node_exporter-1.6.1.linux-amd64.tar.gz\u0026quot;\n        dest: /tmp/node_exporter.tar.gz\n        mode: \u0026#039;0644\u0026#039;\n\n    - name: Extract Node Exporter\n      unarchive:\n        src: /tmp/node_exporter.tar.gz\n        dest: /tmp\n        remote_src: yes\n\n    - name: Copy Node Exporter binary\n      copy:\n        src: /tmp/node_exporter-1.6.1.linux-amd64/node_exporter\n        dest: /usr/local/bin/node_exporter\n        mode: \u0026#039;0755\u0026#039;\n        owner: root\n        group: root\n        remote_src: yes\n\n    - name: Create node_exporter systemd service\n      template:\n        src: templates/node_exporter.service.j2\n        dest: /etc/systemd/system/node_exporter.service\n        mode: \u0026#039;0644\u0026#039;\n      notify:\n        - daemon reload\n        - restart node_exporter\n\n    # Security configuration\n    - name: Configure kernel parameters for security\n      sysctl:\n        name: \u0026quot;{{ item.key }}\u0026quot;\n        value: \u0026quot;{{ item.value }}\u0026quot;\n        sysctl_set: yes\n        state: present\n        reload: yes\n      loop:\n        - { key: \u0026#039;kernel.dmesg_restrict\u0026#039;, value: \u0026#039;1\u0026#039; }\n        - { key: \u0026#039;kernel.kptr_restrict\u0026#039;, value: \u0026#039;2\u0026#039; }\n        - { key: \u0026#039;kernel.yama.ptrace_scope\u0026#039;, value: \u0026#039;1\u0026#039; }\n        - { key: \u0026#039;net.ipv4.conf.all.log_martians\u0026#039;, value: \u0026#039;1\u0026#039; }\n        - { key: \u0026#039;net.ipv4.conf.default.log_martians\u0026#039;, value: \u0026#039;1\u0026#039; }\n        - { key: \u0026#039;net.ipv4.conf.all.send_redirects\u0026#039;, value: \u0026#039;0\u0026#039; }\n        - { key: \u0026#039;net.ipv4.conf.default.send_redirects\u0026#039;, value: \u0026#039;0\u0026#039; }\n\n    # File integrity monitoring\n    - name: Initialize AIDE database\n      shell: |\n        aide --init\n        mv /var/lib/aide/aide.db.new /var/lib/aide/aide.db\n      args:\n        creates: /var/lib/aide/aide.db\n\n    - name: Schedule AIDE integrity checks\n      cron:\n        name: \u0026quot;AIDE integrity check\u0026quot;\n        minute: \u0026quot;0\u0026quot;\n        hour: \u0026quot;3\u0026quot;\n        job: \u0026quot;/usr/bin/aide --check\u0026quot;\n        user: root\n\n  handlers:\n    - name: daemon reload\n      systemd:\n        daemon_reload: yes\n\n    - name: restart node_exporter\n      service:\n        name: node_exporter\n        state: restarted\n        enabled: yes\nEOF\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"advanced-role-development\" class=\"mobile-header\"\u003eAdvanced Role Development\u003c/h2\u003e\n\u003ch3 id=\"comprehensive-nginx-role\" class=\"mobile-header\"\u003eComprehensive NGINX Role\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Create NGINX role structure\nansible-galaxy init roles/nginx\n\n# Main tasks\ncat \u0026gt; roles/nginx/tasks/main.yml \u0026lt;\u0026lt;EOF\n---\n# NGINX Installation and Configuration Role\n- name: Include OS-specific variables\n  include_vars: \u0026quot;{{ ansible_os_family }}.yml\u0026quot;\n\n- name: Install NGINX\n  include_tasks: \u0026quot;install-{{ ansible_os_family }}.yml\u0026quot;\n\n- name: Create NGINX directories\n  file:\n    path: \u0026quot;{{ item }}\u0026quot;\n    state: directory\n    owner: root\n    group: root\n    mode: \u0026#039;0755\u0026#039;\n  loop:\n    - /etc/nginx/sites-available\n    - /etc/nginx/sites-enabled\n    - /etc/nginx/conf.d\n    - /var/log/nginx\n    - /var/cache/nginx\n\n- name: Generate DH parameters\n  openssl_dhparam:\n    path: /etc/ssl/certs/dhparam.pem\n    size: 2048\n  when: nginx_ssl_enabled | default(false)\n\n- name: Deploy NGINX main configuration\n  template:\n    src: nginx.conf.j2\n    dest: /etc/nginx/nginx.conf\n    backup: yes\n    validate: \u0026#039;nginx -t -c %s\u0026#039;\n  notify: reload nginx\n\n- name: Deploy virtual host configurations\n  template:\n    src: vhost.conf.j2\n    dest: \u0026quot;/etc/nginx/sites-available/{{ item.name }}.conf\u0026quot;\n    backup: yes\n  loop: \u0026quot;{{ nginx_vhosts | default([]) }}\u0026quot;\n  notify: reload nginx\n\n- name: Enable virtual hosts\n  file:\n    src: \u0026quot;/etc/nginx/sites-available/{{ item.name }}.conf\u0026quot;\n    dest: \u0026quot;/etc/nginx/sites-enabled/{{ item.name }}.conf\u0026quot;\n    state: link\n  loop: \u0026quot;{{ nginx_vhosts | default([]) }}\u0026quot;\n  when: item.enabled | default(true)\n  notify: reload nginx\n\n- name: Remove default site\n  file:\n    path: /etc/nginx/sites-enabled/default\n    state: absent\n  notify: reload nginx\n\n- name: Start and enable NGINX\n  service:\n    name: nginx\n    state: started\n    enabled: yes\n\n- name: Configure log rotation\n  template:\n    src: nginx-logrotate.j2\n    dest: /etc/logrotate.d/nginx\n    mode: \u0026#039;0644\u0026#039;\n\n- name: Setup NGINX monitoring\n  include_tasks: monitoring.yml\n  when: nginx_monitoring_enabled | default(false)\n\n- name: Configure SSL certificates\n  include_tasks: ssl.yml\n  when: nginx_ssl_enabled | default(false)\nEOF\n\n# OS-specific installation tasks\ncat \u0026gt; roles/nginx/tasks/install-Debian.yml \u0026lt;\u0026lt;EOF\n---\n- name: Add NGINX signing key (Debian/Ubuntu)\n  apt_key:\n    url: https://nginx.org/keys/nginx_signing.key\n    state: present\n\n- name: Add NGINX repository (Debian/Ubuntu)\n  apt_repository:\n    repo: \u0026quot;deb https://nginx.org/packages/{{ ansible_distribution | lower }}/ {{ ansible_distribution_release }} nginx\u0026quot;\n    state: present\n\n- name: Install NGINX (Debian/Ubuntu)\n  apt:\n    name: nginx\n    state: present\n    update_cache: yes\nEOF\n\ncat \u0026gt; roles/nginx/tasks/install-RedHat.yml \u0026lt;\u0026lt;EOF\n---\n- name: Add NGINX repository (RHEL/CentOS)\n  yum_repository:\n    name: nginx\n    description: NGINX Repository\n    baseurl: \u0026quot;https://nginx.org/packages/centos/{{ ansible_distribution_major_version }}/$basearch/\u0026quot;\n    gpgcheck: yes\n    gpgkey: https://nginx.org/keys/nginx_signing.key\n    enabled: yes\n\n- name: Install NGINX (RHEL/CentOS)\n  yum:\n    name: nginx\n    state: present\nEOF\n\n# Variables\ncat \u0026gt; roles/nginx/vars/main.yml \u0026lt;\u0026lt;EOF\n---\nnginx_user: nginx\nnginx_worker_processes: auto\nnginx_worker_connections: 1024\nnginx_keepalive_timeout: 65\nnginx_ssl_enabled: false\nnginx_monitoring_enabled: true\n\nnginx_security_headers:\n  - \u0026quot;add_header X-Frame-Options SAMEORIGIN always;\u0026quot;\n  - \u0026quot;add_header X-Content-Type-Options nosniff always;\u0026quot;\n  - \u0026quot;add_header X-XSS-Protection \u0026#039;1; mode=block\u0026#039; always;\u0026quot;\n  - \u0026quot;add_header Strict-Transport-Security \u0026#039;max-age=31536000; includeSubDomains\u0026#039; always;\u0026quot;\n\nnginx_default_vhost:\n  name: default\n  listen: 80\n  server_name: \u0026quot;_\u0026quot;\n  root: /var/www/html\n  index: index.html\n  enabled: false\nEOF\n\n# Templates\ncat \u0026gt; roles/nginx/templates/nginx.conf.j2 \u0026lt;\u0026lt;EOF\nuser {{ nginx_user }};\nworker_processes {{ nginx_worker_processes }};\npid /var/run/nginx.pid;\n\nevents {\n    worker_connections {{ nginx_worker_connections }};\n    use epoll;\n    multi_accept on;\n}\n\nhttp {\n    # Basic settings\n    sendfile on;\n    tcp_nopush on;\n    tcp_nodelay on;\n    keepalive_timeout {{ nginx_keepalive_timeout }};\n    types_hash_max_size 2048;\n    server_tokens off;\n\n    include /etc/nginx/mime.types;\n    default_type application/octet-stream;\n\n    # SSL configuration\n{% if nginx_ssl_enabled %}\n    ssl_protocols TLSv1.2 TLSv1.3;\n    ssl_prefer_server_ciphers off;\n    ssl_dhparam /etc/ssl/certs/dhparam.pem;\n{% endif %}\n\n    # Gzip compression\n    gzip on;\n    gzip_vary on;\n    gzip_proxied any;\n    gzip_comp_level 6;\n    gzip_types\n        application/javascript\n        application/json\n        application/xml\n        text/css\n        text/javascript\n        text/xml\n        text/plain;\n\n    # Security headers\n{% for header in nginx_security_headers %}\n    {{ header }}\n{% endfor %}\n\n    # Logging\n    log_format main \u0026#039;\\$remote_addr - \\$remote_user [\\$time_local] \u0026quot;\\$request\u0026quot; \u0026#039;\n                    \u0026#039;\\$status \\$body_bytes_sent \u0026quot;\\$http_referer\u0026quot; \u0026#039;\n                    \u0026#039;\u0026quot;\\$http_user_agent\u0026quot; \u0026quot;\\$http_x_forwarded_for\u0026quot;\u0026#039;;\n\n    access_log /var/log/nginx/access.log main;\n    error_log /var/log/nginx/error.log;\n\n    # Rate limiting\n    limit_req_zone \\$binary_remote_addr zone=login:10m rate=10r/m;\n    limit_conn_zone \\$binary_remote_addr zone=addr:10m;\n\n    # Include configurations\n    include /etc/nginx/conf.d/*.conf;\n    include /etc/nginx/sites-enabled/*;\n}\nEOF\n\n# Handlers\ncat \u0026gt; roles/nginx/handlers/main.yml \u0026lt;\u0026lt;EOF\n---\n- name: restart nginx\n  service:\n    name: nginx\n    state: restarted\n\n- name: reload nginx\n  service:\n    name: nginx\n    state: reloaded\n\n- name: validate nginx config\n  command: nginx -t\n  changed_when: false\nEOF\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"security-and-compliance\" class=\"mobile-header\"\u003eSecurity and Compliance\u003c/h2\u003e\n\u003ch3 id=\"ansible-security-scanner-integration\" class=\"mobile-header\"\u003eAnsible Security Scanner Integration\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Create security scanning playbook\ncat \u0026gt; playbooks/security-scan.yml \u0026lt;\u0026lt;EOF\n---\n- name: Security Compliance Scanning\n  hosts: all\n  become: yes\n  gather_facts: yes\n  vars:\n    scan_results_dir: \u0026quot;/tmp/security-scans\u0026quot;\n    \n  tasks:\n    - name: Create scan results directory\n      file:\n        path: \u0026quot;{{ scan_results_dir }}\u0026quot;\n        state: directory\n        mode: \u0026#039;0755\u0026#039;\n\n    # CIS benchmark scanning\n    - name: Download CIS benchmark script\n      get_url:\n        url: \u0026quot;https://github.com/dev-sec/cis-dil-benchmark/archive/master.zip\u0026quot;\n        dest: \u0026quot;/tmp/cis-benchmark.zip\u0026quot;\n        mode: \u0026#039;0644\u0026#039;\n\n    - name: Run CIS benchmark scan\n      shell: |\n        cd /tmp\n        unzip -o cis-benchmark.zip\n        cd cis-dil-benchmark-master\n        bash cis_ubuntu2204.sh \u0026gt; {{ scan_results_dir }}/cis-scan-{{ inventory_hostname }}.txt\n      args:\n        creates: \u0026quot;{{ scan_results_dir }}/cis-scan-{{ inventory_hostname }}.txt\u0026quot;\n\n    # Lynis security audit\n    - name: Install Lynis\n      package:\n        name: lynis\n        state: present\n\n    - name: Run Lynis security audit\n      command: lynis audit system --quiet --cronjob\n      register: lynis_result\n      changed_when: false\n\n    - name: Save Lynis results\n      copy:\n        content: \u0026quot;{{ lynis_result.stdout }}\u0026quot;\n        dest: \u0026quot;{{ scan_results_dir }}/lynis-scan-{{ inventory_hostname }}.txt\u0026quot;\n        mode: \u0026#039;0644\u0026#039;\n\n    # OpenSCAP compliance scanning\n    - name: Install OpenSCAP (RHEL/CentOS)\n      package:\n        name:\n          - openscap-scanner\n          - scap-security-guide\n        state: present\n      when: ansible_os_family == \u0026quot;RedHat\u0026quot;\n\n    - name: Install OpenSCAP (Debian/Ubuntu)\n      package:\n        name:\n          - libopenscap8\n          - ssg-debian\n        state: present\n      when: ansible_os_family == \u0026quot;Debian\u0026quot;\n\n    - name: Run OpenSCAP scan\n      shell: |\n        oscap xccdf eval --profile xccdf_org.ssgproject.content_profile_standard \\\n          --results {{ scan_results_dir }}/oscap-results-{{ inventory_hostname }}.xml \\\n          --report {{ scan_results_dir }}/oscap-report-{{ inventory_hostname }}.html \\\n          /usr/share/xml/scap/ssg/content/ssg-{{ ansible_distribution | lower }}{{ ansible_distribution_major_version }}-xccdf.xml\n      ignore_errors: yes\n      when: ansible_os_family in [\u0026quot;RedHat\u0026quot;, \u0026quot;Debian\u0026quot;]\n\n    # Vulnerability scanning with Trivy\n    - name: Install Trivy vulnerability scanner\n      shell: |\n        curl -sfL https://raw.githubusercontent.com/aquasecurity/trivy/main/contrib/install.sh | sh -s -- -b /usr/local/bin\n      args:\n        creates: /usr/local/bin/trivy\n\n    - name: Run Trivy filesystem scan\n      shell: |\n        trivy fs --format json --output {{ scan_results_dir }}/trivy-scan-{{ inventory_hostname }}.json /\n      ignore_errors: yes\n\n    # Collect scan results\n    - name: Fetch scan results to control machine\n      fetch:\n        src: \u0026quot;{{ item }}\u0026quot;\n        dest: \u0026quot;./security-reports/{{ inventory_hostname }}/\u0026quot;\n        flat: yes\n      loop:\n        - \u0026quot;{{ scan_results_dir }}/cis-scan-{{ inventory_hostname }}.txt\u0026quot;\n        - \u0026quot;{{ scan_results_dir }}/lynis-scan-{{ inventory_hostname }}.txt\u0026quot;\n        - \u0026quot;{{ scan_results_dir }}/oscap-report-{{ inventory_hostname }}.html\u0026quot;\n        - \u0026quot;{{ scan_results_dir }}/trivy-scan-{{ inventory_hostname }}.json\u0026quot;\n      ignore_errors: yes\n      delegate_to: localhost\n\n  post_tasks:\n    - name: Generate compliance summary\n      template:\n        src: templates/compliance-summary.j2\n        dest: \u0026quot;{{ scan_results_dir }}/compliance-summary-{{ inventory_hostname }}.txt\u0026quot;\n        mode: \u0026#039;0644\u0026#039;\nEOF\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"ansible-awxtower-integration\" class=\"mobile-header\"\u003eAnsible AWX/Tower Integration\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Install Ansible AWX (open source)\ncat \u0026gt; playbooks/install-awx.yml \u0026lt;\u0026lt;EOF\n---\n- name: Install Ansible AWX\n  hosts: localhost\n  connection: local\n  become: yes\n  vars:\n    awx_namespace: awx\n    awx_admin_user: admin\n    awx_admin_password: \u0026quot;{{ vault_awx_admin_password }}\u0026quot;\n\n  tasks:\n    - name: Install prerequisite packages\n      package:\n        name:\n          - git\n          - curl\n          - docker.io\n          - docker-compose\n        state: present\n\n    - name: Clone AWX repository\n      git:\n        repo: https://github.com/ansible/awx.git\n        dest: /opt/awx\n        version: devel\n\n    - name: Create AWX Docker inventory\n      template:\n        src: templates/awx-docker-inventory.j2\n        dest: /opt/awx/installer/inventory\n        mode: \u0026#039;0644\u0026#039;\n\n    - name: Install AWX using Ansible\n      shell: ansible-playbook -i inventory install.yml\n      args:\n        chdir: /opt/awx/installer\n      environment:\n        ANSIBLE_HOST_KEY_CHECKING: False\n\n    - name: Wait for AWX to be ready\n      uri:\n        url: \u0026quot;http://localhost:80/api/v2/ping/\u0026quot;\n        method: GET\n      retries: 30\n      delay: 10\n\n    - name: Configure AWX organizations and projects\n      uri:\n        url: \u0026quot;http://localhost:80/api/v2/organizations/\u0026quot;\n        method: POST\n        user: \u0026quot;{{ awx_admin_user }}\u0026quot;\n        password: \u0026quot;{{ awx_admin_password }}\u0026quot;\n        force_basic_auth: yes\n        body_format: json\n        body:\n          name: \u0026quot;Production\u0026quot;\n          description: \u0026quot;Production environment organization\u0026quot;\n        status_code: [200, 201, 409]\nEOF\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"multi-cloud-automation\" class=\"mobile-header\"\u003eMulti-Cloud Automation\u003c/h2\u003e\n\u003ch3 id=\"aws-infrastructure-automation\" class=\"mobile-header\"\u003eAWS Infrastructure Automation\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003ecat \u0026gt; playbooks/aws-infrastructure.yml \u0026lt;\u0026lt;EOF\n---\n- name: AWS Infrastructure Automation\n  hosts: localhost\n  connection: local\n  gather_facts: no\n  vars:\n    aws_region: \u0026quot;{{ aws_region | default(\u0026#039;us-west-2\u0026#039;) }}\u0026quot;\n    vpc_cidr: \u0026quot;{{ vpc_cidr | default(\u0026#039;10.0.0.0/16\u0026#039;) }}\u0026quot;\n    environment: \u0026quot;{{ environment | default(\u0026#039;production\u0026#039;) }}\u0026quot;\n\n  tasks:\n    # VPC Creation\n    - name: Create VPC\n      amazon.aws.ec2_vpc_info:\n        filters:\n          \u0026quot;tag:Name\u0026quot;: \u0026quot;{{ environment }}-vpc\u0026quot;\n        region: \u0026quot;{{ aws_region }}\u0026quot;\n      register: existing_vpc\n\n    - name: Create new VPC if not exists\n      amazon.aws.ec2_vpc_net:\n        name: \u0026quot;{{ environment }}-vpc\u0026quot;\n        cidr_block: \u0026quot;{{ vpc_cidr }}\u0026quot;\n        region: \u0026quot;{{ aws_region }}\u0026quot;\n        state: present\n        dns_hostnames: yes\n        dns_support: yes\n        tags:\n          Environment: \u0026quot;{{ environment }}\u0026quot;\n          ManagedBy: ansible\n      register: vpc\n      when: existing_vpc.vpcs | length == 0\n\n    # Security Groups\n    - name: Create web security group\n      amazon.aws.ec2_group:\n        name: \u0026quot;{{ environment }}-web-sg\u0026quot;\n        description: \u0026quot;Security group for web servers\u0026quot;\n        vpc_id: \u0026quot;{{ vpc.vpc.id if vpc.vpc is defined else existing_vpc.vpcs[0].vpc_id }}\u0026quot;\n        region: \u0026quot;{{ aws_region }}\u0026quot;\n        rules:\n          - proto: tcp\n            ports:\n              - 80\n              - 443\n            cidr_ip: 0.0.0.0/0\n            rule_desc: \u0026quot;HTTP and HTTPS access\u0026quot;\n          - proto: tcp\n            ports:\n              - 22\n            group_id: \u0026quot;{{ environment }}-bastion-sg\u0026quot;\n            rule_desc: \u0026quot;SSH from bastion\u0026quot;\n        tags:\n          Environment: \u0026quot;{{ environment }}\u0026quot;\n\n    # Launch EC2 instances\n    - name: Launch web servers\n      amazon.aws.ec2_instance:\n        name: \u0026quot;{{ environment }}-web-{{ item }}\u0026quot;\n        instance_type: t3.medium\n        image_id: ami-0c02fb55956c7d316  # Amazon Linux 2\n        key_name: \u0026quot;{{ ec2_key_name }}\u0026quot;\n        vpc_subnet_id: \u0026quot;{{ web_subnet_id }}\u0026quot;\n        security_groups:\n          - \u0026quot;{{ environment }}-web-sg\u0026quot;\n        region: \u0026quot;{{ aws_region }}\u0026quot;\n        state: running\n        wait: yes\n        wait_timeout: 300\n        user_data: |\n          #!/bin/bash\n          yum update -y\n          yum install -y python3\n        tags:\n          Environment: \u0026quot;{{ environment }}\u0026quot;\n          Role: webserver\n          Ansible: managed\n      loop: \u0026quot;{{ range(1, web_server_count + 1) | list }}\u0026quot;\n      register: web_instances\n\n    # Add instances to inventory\n    - name: Add web servers to inventory\n      add_host:\n        name: \u0026quot;{{ item.instances[0].tags.Name }}\u0026quot;\n        hostname: \u0026quot;{{ item.instances[0].public_ip_address }}\u0026quot;\n        groups: webservers\n        ansible_ssh_private_key_file: \u0026quot;~/.ssh/{{ ec2_key_name }}.pem\u0026quot;\n        ansible_user: ec2-user\n      loop: \u0026quot;{{ web_instances.results }}\u0026quot;\n      changed_when: false\nEOF\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"kubernetes-cluster-management\" class=\"mobile-header\"\u003eKubernetes Cluster Management\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003ecat \u0026gt; playbooks/k8s-cluster-management.yml \u0026lt;\u0026lt;EOF\n---\n- name: Kubernetes Cluster Management with Ansible\n  hosts: k8s_masters\n  become: yes\n  serial: 1\n  vars:\n    k8s_version: \u0026quot;1.28.2\u0026quot;\n    containerd_version: \u0026quot;1.6.24\u0026quot;\n    cni_version: \u0026quot;1.3.0\u0026quot;\n\n  tasks:\n    # Pre-flight checks\n    - name: Check system requirements\n      assert:\n        that:\n          - ansible_memtotal_mb \u0026gt;= 1700\n          - ansible_processor_cores \u0026gt;= 2\n        fail_msg: \u0026quot;System doesn\u0026#039;t meet minimum requirements\u0026quot;\n\n    - name: Verify connectivity to all nodes\n      ping:\n      delegate_to: \u0026quot;{{ item }}\u0026quot;\n      loop: \u0026quot;{{ groups[\u0026#039;k8s_all\u0026#039;] }}\u0026quot;\n\n    # Container runtime setup\n    - name: Install containerd\n      include_role:\n        name: containerd\n      vars:\n        containerd_version: \u0026quot;{{ containerd_version }}\u0026quot;\n\n    # Kubernetes installation\n    - name: Install Kubernetes components\n      include_role:\n        name: kubernetes\n      vars:\n        kubernetes_version: \u0026quot;{{ k8s_version }}\u0026quot;\n\n    # Cluster initialization\n    - name: Initialize Kubernetes cluster\n      shell: |\n        kubeadm init \\\n          --pod-network-cidr=10.244.0.0/16 \\\n          --service-cidr=10.96.0.0/12 \\\n          --apiserver-advertise-address={{ ansible_default_ipv4.address }} \\\n          --node-name={{ inventory_hostname }}\n      args:\n        creates: /etc/kubernetes/admin.conf\n      register: kubeadm_init\n\n    - name: Create .kube directory\n      file:\n        path: \u0026quot;{{ ansible_env.HOME }}/.kube\u0026quot;\n        state: directory\n        mode: \u0026#039;0755\u0026#039;\n\n    - name: Copy admin.conf to user\u0026#039;s kube config\n      copy:\n        src: /etc/kubernetes/admin.conf\n        dest: \u0026quot;{{ ansible_env.HOME }}/.kube/config\u0026quot;\n        owner: \u0026quot;{{ ansible_user }}\u0026quot;\n        group: \u0026quot;{{ ansible_user }}\u0026quot;\n        mode: \u0026#039;0644\u0026#039;\n        remote_src: yes\n\n    # Network plugin installation\n    - name: Install Flannel CNI\n      shell: kubectl apply -f https://github.com/flannel-io/flannel/releases/latest/download/kube-flannel.yml\n      environment:\n        KUBECONFIG: \u0026quot;{{ ansible_env.HOME }}/.kube/config\u0026quot;\n\n    # Join worker nodes\n    - name: Get join command\n      shell: kubeadm token create --print-join-command\n      register: join_command\n      when: inventory_hostname in groups[\u0026#039;k8s_masters\u0026#039;][0]\n\n    - name: Join worker nodes to cluster\n      shell: \u0026quot;{{ hostvars[groups[\u0026#039;k8s_masters\u0026#039;][0]][\u0026#039;join_command\u0026#039;].stdout }}\u0026quot;\n      when: inventory_hostname in groups[\u0026#039;k8s_workers\u0026#039;]\n\n  post_tasks:\n    - name: Verify cluster status\n      shell: kubectl get nodes\n      environment:\n        KUBECONFIG: \u0026quot;{{ ansible_env.HOME }}/.kube/config\u0026quot;\n      register: cluster_status\n      when: inventory_hostname in groups[\u0026#039;k8s_masters\u0026#039;][0]\n\n    - name: Display cluster status\n      debug:\n        var: cluster_status.stdout_lines\n      when: inventory_hostname in groups[\u0026#039;k8s_masters\u0026#039;][0]\nEOF\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"performance-optimization-and-scaling\" class=\"mobile-header\"\u003ePerformance Optimization and Scaling\u003c/h2\u003e\n\u003ch3 id=\"parallel-execution-strategies\" class=\"mobile-header\"\u003eParallel Execution Strategies\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Create high-performance playbook configuration\ncat \u0026gt; playbooks/high-performance-deployment.yml \u0026lt;\u0026lt;EOF\n---\n- name: High-Performance Deployment\n  hosts: all\n  become: yes\n  strategy: free  # Parallel execution\n  serial: \u0026quot;30%\u0026quot;   # Process 30% of hosts at a time\n  max_fail_percentage: 10\n  gather_facts: yes\n  fact_caching: smart\n  vars:\n    deployment_batch_size: 10\n    max_concurrent_tasks: 50\n\n  pre_tasks:\n    - name: Check system load\n      shell: uptime | awk \u0026#039;{print $(NF-2)}\u0026#039; | sed \u0026#039;s/,//\u0026#039;\n      register: system_load\n      changed_when: false\n\n    - name: Skip high-load systems\n      meta: end_host\n      when: system_load.stdout | float \u0026gt; 5.0\n\n  tasks:\n    - name: Update packages with retries\n      package:\n        name: \u0026quot;*\u0026quot;\n        state: latest\n      retries: 3\n      delay: 30\n      async: 300\n      poll: 10\n\n    - name: Deploy configuration files in parallel\n      template:\n        src: \u0026quot;{{ item.src }}\u0026quot;\n        dest: \u0026quot;{{ item.dest }}\u0026quot;\n        mode: \u0026quot;{{ item.mode | default(\u0026#039;0644\u0026#039;) }}\u0026quot;\n        backup: yes\n      loop:\n        - { src: \u0026quot;nginx.conf.j2\u0026quot;, dest: \u0026quot;/etc/nginx/nginx.conf\u0026quot; }\n        - { src: \u0026quot;mysql.cnf.j2\u0026quot;, dest: \u0026quot;/etc/mysql/my.cnf\u0026quot; }\n        - { src: \u0026quot;redis.conf.j2\u0026quot;, dest: \u0026quot;/etc/redis/redis.conf\u0026quot; }\n      async: 120\n      poll: 5\n      register: config_deployment\n\n    - name: Wait for all configuration deployments\n      async_status:\n        jid: \u0026quot;{{ item.ansible_job_id }}\u0026quot;\n      loop: \u0026quot;{{ config_deployment.results }}\u0026quot;\n      when: item.ansible_job_id is defined\n\n  handlers:\n    - name: restart services\n      service:\n        name: \u0026quot;{{ item }}\u0026quot;\n        state: restarted\n      loop:\n        - nginx\n        - mysql\n        - redis\n      listen: \u0026quot;restart all services\u0026quot;\nEOF\n\n# Performance monitoring playbook\ncat \u0026gt; playbooks/performance-monitoring.yml \u0026lt;\u0026lt;EOF\n---\n- name: Performance Monitoring Setup\n  hosts: all\n  become: yes\n  vars:\n    monitoring_tools:\n      - htop\n      - iotop\n      - nethogs\n      - dstat\n      - sysstat\n      - perf\n\n  tasks:\n    - name: Install performance monitoring tools\n      package:\n        name: \u0026quot;{{ monitoring_tools }}\u0026quot;\n        state: present\n\n    - name: Configure system monitoring\n      template:\n        src: templates/sysstat.j2\n        dest: /etc/default/sysstat\n        backup: yes\n      when: ansible_os_family == \u0026quot;Debian\u0026quot;\n\n    - name: Enable system statistics collection\n      service:\n        name: \u0026quot;{{ \u0026#039;sysstat\u0026#039; if ansible_os_family == \u0026#039;Debian\u0026#039; else \u0026#039;sysstat\u0026#039; }}\u0026quot;\n        enabled: yes\n        state: started\n\n    - name: Create performance monitoring script\n      template:\n        src: templates/performance-monitor.sh.j2\n        dest: /usr/local/bin/performance-monitor.sh\n        mode: \u0026#039;0755\u0026#039;\n\n    - name: Schedule performance monitoring\n      cron:\n        name: \u0026quot;Performance monitoring\u0026quot;\n        minute: \u0026quot;*/5\u0026quot;\n        job: \u0026quot;/usr/local/bin/performance-monitor.sh\u0026quot;\n        user: root\nEOF\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"testing-and-validation\" class=\"mobile-header\"\u003eTesting and Validation\u003c/h2\u003e\n\u003ch3 id=\"molecule-testing-framework\" class=\"mobile-header\"\u003eMolecule Testing Framework\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Install Molecule for role testing\npip install molecule[docker] molecule[vagrant] molecule[libvirt]\n\n# Initialize Molecule in role directory\ncd roles/nginx\nmolecule init scenario --driver-name docker\n\n# Create molecule configuration\ncat \u0026gt; molecule/default/molecule.yml \u0026lt;\u0026lt;EOF\n---\ndependency:\n  name: galaxy\ndriver:\n  name: docker\nplatforms:\n  - name: nginx-ubuntu\n    image: ubuntu:22.04\n    pre_build_image: true\n    privileged: true\n    volumes:\n      - /sys/fs/cgroup:/sys/fs/cgroup:ro\n    command: /lib/systemd/systemd\n    networks:\n      - name: molecule\n  - name: nginx-centos\n    image: centos:8\n    pre_build_image: true\n    privileged: true\n    volumes:\n      - /sys/fs/cgroup:/sys/fs/cgroup:ro\n    command: /usr/sbin/init\n    networks:\n      - name: molecule\nprovisioner:\n  name: ansible\n  config_options:\n    defaults:\n      callbacks_enabled: profile_tasks,timer,yaml\n  inventory:\n    host_vars:\n      nginx-ubuntu:\n        ansible_python_interpreter: /usr/bin/python3\n      nginx-centos:\n        ansible_python_interpreter: /usr/bin/python3\nverifier:\n  name: ansible\nlint: |\n  set -e\n  yamllint .\n  ansible-lint\n  flake8\nEOF\n\n# Create test playbook\ncat \u0026gt; molecule/default/converge.yml \u0026lt;\u0026lt;EOF\n---\n- name: Converge\n  hosts: all\n  become: true\n  tasks:\n    - name: \u0026quot;Include nginx role\u0026quot;\n      include_role:\n        name: nginx\n      vars:\n        nginx_vhosts:\n          - name: default\n            server_name: localhost\n            listen: 80\n            root: /var/www/html\n            enabled: true\nEOF\n\n# Create test verification\ncat \u0026gt; molecule/default/verify.yml \u0026lt;\u0026lt;EOF\n---\n- name: Verify\n  hosts: all\n  gather_facts: false\n  tasks:\n    - name: Check if NGINX is running\n      uri:\n        url: http://localhost\n        method: GET\n      register: nginx_check\n\n    - name: Verify NGINX is responding\n      assert:\n        that:\n          - nginx_check.status == 200\n        fail_msg: \u0026quot;NGINX is not responding correctly\u0026quot;\n\n    - name: Check NGINX configuration\n      shell: nginx -t\n      changed_when: false\n\n    - name: Verify NGINX process\n      shell: pgrep nginx\n      changed_when: false\nEOF\n\n# Run tests\nmolecule test\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"ansible-lint-and-security-scanning\" class=\"mobile-header\"\u003eAnsible Lint and Security Scanning\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Install Ansible Lint\npip install ansible-lint\n\n# Create .ansible-lint configuration\ncat \u0026gt; .ansible-lint \u0026lt;\u0026lt;EOF\n---\nprofile: production\n\nexclude_paths:\n  - .cache/\n  - .github/\n  - molecule/\n  - .venv/\n\nskip_list:\n  - yaml[line-length]  # Allow longer lines for readability\n\nwarn_list:\n  - experimental  # Warn about experimental features\n\n# Custom rules\nrules:\n  braces:\n    min-spaces-inside: 0\n    max-spaces-inside: 1\n  brackets:\n    min-spaces-inside: 0\n    max-spaces-inside: 0\n  colons:\n    max-spaces-before: 0\n    min-spaces-after: 1\n    max-spaces-after: 1\n  commas:\n    max-spaces-before: 0\n    min-spaces-after: 1\n    max-spaces-after: 1\n  comments:\n    min-spaces-from-content: 1\n  document-start: disable\n  empty-lines:\n    max: 2\n    max-start: 0\n    max-end: 1\n  hyphens:\n    max-spaces-after: 1\n  indentation:\n    spaces: 2\n    indent-sequences: true\n  line-length:\n    max: 120\n  new-line-at-end-of-file: enable\n  trailing-spaces: enable\n  truthy:\n    allowed-values: [\u0026#039;true\u0026#039;, \u0026#039;false\u0026#039;, \u0026#039;yes\u0026#039;, \u0026#039;no\u0026#039;]\nEOF\n\n# Create security-focused playbook linting\ncat \u0026gt; .yamllint \u0026lt;\u0026lt;EOF\n---\nextends: default\n\nrules:\n  braces:\n    min-spaces-inside: 0\n    max-spaces-inside: 1\n  brackets:\n    min-spaces-inside: 0\n    max-spaces-inside: 0\n  colons:\n    max-spaces-before: 0\n    min-spaces-after: 1\n    max-spaces-after: 1\n  commas:\n    max-spaces-before: 0\n    min-spaces-after: 1\n    max-spaces-after: 1\n  comments: disable\n  comments-indentation: disable\n  document-start: disable\n  empty-lines:\n    max: 2\n    max-start: 0\n    max-end: 1\n  hyphens:\n    max-spaces-after: 1\n  indentation:\n    spaces: 2\n    indent-sequences: true\n    check-multi-line-strings: false\n  key-duplicates: enable\n  line-length:\n    max: 120\n  new-line-at-end-of-file: enable\n  octal-values:\n    forbid-implicit-octal: true\n  trailing-spaces: enable\n  truthy: disable\nEOF\n\n# Run linting\nansible-lint playbooks/\nyamllint .\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"backup-and-disaster-recovery\" class=\"mobile-header\"\u003eBackup and Disaster Recovery\u003c/h2\u003e\n\u003ch3 id=\"comprehensive-backup-automation\" class=\"mobile-header\"\u003eComprehensive Backup Automation\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003ecat \u0026gt; playbooks/backup-automation.yml \u0026lt;\u0026lt;EOF\n---\n- name: Automated Backup System\n  hosts: all\n  become: yes\n  vars:\n    backup_root: /backup\n    backup_retention_days: 30\n    backup_schedule:\n      databases: \u0026quot;0 2 * * *\u0026quot;\n      files: \u0026quot;0 3 * * *\u0026quot;\n      configs: \u0026quot;0 4 * * *\u0026quot;\n\n  tasks:\n    - name: Create backup directories\n      file:\n        path: \u0026quot;{{ backup_root }}/{{ item }}\u0026quot;\n        state: directory\n        mode: \u0026#039;0755\u0026#039;\n        owner: root\n        group: root\n      loop:\n        - databases\n        - files\n        - configs\n        - logs\n\n    # Database backups\n    - name: Create database backup script\n      template:\n        src: templates/mysql-backup.sh.j2\n        dest: /usr/local/bin/mysql-backup.sh\n        mode: \u0026#039;0755\u0026#039;\n      when: \u0026quot;\u0026#039;dbservers\u0026#039; in group_names\u0026quot;\n\n    - name: Schedule database backups\n      cron:\n        name: \u0026quot;MySQL backup\u0026quot;\n        minute: \u0026quot;0\u0026quot;\n        hour: \u0026quot;2\u0026quot;\n        job: \u0026quot;/usr/local/bin/mysql-backup.sh\u0026quot;\n        user: root\n      when: \u0026quot;\u0026#039;dbservers\u0026#039; in group_names\u0026quot;\n\n    # File system backups\n    - name: Create file backup script\n      template:\n        src: templates/file-backup.sh.j2\n        dest: /usr/local/bin/file-backup.sh\n        mode: \u0026#039;0755\u0026#039;\n\n    - name: Schedule file backups\n      cron:\n        name: \u0026quot;File system backup\u0026quot;\n        minute: \u0026quot;0\u0026quot;\n        hour: \u0026quot;3\u0026quot;\n        job: \u0026quot;/usr/local/bin/file-backup.sh\u0026quot;\n        user: root\n\n    # Configuration backups\n    - name: Backup system configurations\n      archive:\n        path:\n          - /etc/nginx\n          - /etc/mysql\n          - /etc/systemd/system\n          - /etc/crontab\n          - /etc/hosts\n          - /etc/fstab\n        dest: \u0026quot;{{ backup_root }}/configs/system-config-{{ ansible_date_time.epoch }}.tar.gz\u0026quot;\n        mode: \u0026#039;0600\u0026#039;\n\n    # Remote backup synchronization\n    - name: Synchronize backups to remote storage\n      synchronize:\n        src: \u0026quot;{{ backup_root }}/\u0026quot;\n        dest: \u0026quot;backup-server.example.com:{{ backup_root }}/{{ inventory_hostname }}/\u0026quot;\n        delete: yes\n        rsync_opts:\n          - \u0026quot;--exclude=*.tmp\u0026quot;\n          - \u0026quot;--compress\u0026quot;\n          - \u0026quot;--archive\u0026quot;\n      when: backup_remote_sync | default(true)\n\n    # Cleanup old backups\n    - name: Clean up old backup files\n      find:\n        paths: \u0026quot;{{ backup_root }}\u0026quot;\n        age: \u0026quot;{{ backup_retention_days }}d\u0026quot;\n        file_type: file\n      register: old_backups\n\n    - name: Remove old backup files\n      file:\n        path: \u0026quot;{{ item.path }}\u0026quot;\n        state: absent\n      loop: \u0026quot;{{ old_backups.files }}\u0026quot;\nEOF\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"verification-and-monitoring\" class=\"mobile-header\"\u003eVerification and Monitoring\u003c/h2\u003e\n\u003ch3 id=\"cross-platform-system-verification\" class=\"mobile-header\"\u003eCross-Platform System Verification\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Create comprehensive verification playbook\ncat \u0026gt; playbooks/system-verification.yml \u0026lt;\u0026lt;EOF\n---\n- name: System Verification and Health Check\n  hosts: all\n  become: yes\n  gather_facts: yes\n  vars:\n    health_checks:\n      - service: nginx\n        port: 80\n        process: nginx\n      - service: mysql\n        port: 3306\n        process: mysqld\n      - service: redis\n        port: 6379\n        process: redis-server\n\n  tasks:\n    # System information gathering\n    - name: Gather system information\n      setup:\n        gather_subset:\n          - all\n          - !facter\n          - !ohai\n\n    # Service verification\n    - name: Check critical services status\n      service_facts:\n\n    - name: Verify services are running\n      assert:\n        that:\n          - \u0026quot;ansible_facts.services[item.service + \u0026#039;.service\u0026#039;].state == \u0026#039;running\u0026#039;\u0026quot;\n        fail_msg: \u0026quot;Service {{ item.service }} is not running\u0026quot;\n        success_msg: \u0026quot;Service {{ item.service }} is healthy\u0026quot;\n      loop: \u0026quot;{{ health_checks }}\u0026quot;\n      when: \u0026quot;item.service + \u0026#039;.service\u0026#039; in ansible_facts.services\u0026quot;\n\n    # Network connectivity tests\n    - name: Test network connectivity\n      wait_for:\n        host: \u0026quot;{{ item.host }}\u0026quot;\n        port: \u0026quot;{{ item.port }}\u0026quot;\n        timeout: 5\n      loop:\n        - { host: \u0026quot;8.8.8.8\u0026quot;, port: 53 }\n        - { host: \u0026quot;1.1.1.1\u0026quot;, port: 53 }\n      ignore_errors: yes\n\n    # Disk space monitoring\n    - name: Check disk space usage\n      shell: df -h | awk \u0026#039;$5 \u0026gt; \u0026quot;85%\u0026quot; {print $0}\u0026#039;\n      register: disk_usage\n      changed_when: false\n      failed_when: disk_usage.stdout != \u0026quot;\u0026quot;\n\n    # Memory usage check\n    - name: Check memory usage\n      shell: free | grep Mem | awk \u0026#039;{printf \u0026quot;%.0f\u0026quot;, $3/$2 * 100.0}\u0026#039;\n      register: memory_usage\n      changed_when: false\n\n    - name: Alert on high memory usage\n      debug:\n        msg: \u0026quot;WARNING: Memory usage is {{ memory_usage.stdout }}%\u0026quot;\n      when: memory_usage.stdout | int \u0026gt; 85\n\n    # Security verification\n    - name: Check for failed login attempts\n      shell: grep \u0026quot;Failed password\u0026quot; /var/log/auth.log | tail -10\n      register: failed_logins\n      changed_when: false\n      ignore_errors: yes\n      when: ansible_os_family == \u0026quot;Debian\u0026quot;\n\n    - name: Check firewall status\n      shell: |\n        if command -v ufw \u0026gt;/dev/null 2\u0026gt;\u0026amp;1; then\n          ufw status\n        elif command -v firewall-cmd \u0026gt;/dev/null 2\u0026gt;\u0026amp;1; then\n          firewall-cmd --state\n        else\n          echo \u0026quot;No supported firewall found\u0026quot;\n        fi\n      register: firewall_status\n      changed_when: false\n\n  post_tasks:\n    - name: Generate system health report\n      template:\n        src: templates/health-report.j2\n        dest: \u0026quot;/tmp/health-report-{{ inventory_hostname }}-{{ ansible_date_time.epoch }}.txt\u0026quot;\n        mode: \u0026#039;0644\u0026#039;\n\n    - name: Fetch health reports\n      fetch:\n        src: \u0026quot;/tmp/health-report-{{ inventory_hostname }}-{{ ansible_date_time.epoch }}.txt\u0026quot;\n        dest: \u0026quot;./reports/\u0026quot;\n        flat: yes\nEOF\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"continuous-compliance-monitoring\" class=\"mobile-header\"\u003eContinuous Compliance Monitoring\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003ecat \u0026gt; playbooks/compliance-monitoring.yml \u0026lt;\u0026lt;EOF\n---\n- name: Continuous Compliance Monitoring\n  hosts: all\n  become: yes\n  vars:\n    compliance_standards:\n      - cis\n      - pci_dss\n      - soc2\n      - hipaa\n    \n    audit_log_paths:\n      - /var/log/auth.log\n      - /var/log/syslog\n      - /var/log/audit/audit.log\n\n  tasks:\n    # Install audit tools\n    - name: Install audit daemon\n      package:\n        name: \u0026quot;{{ \u0026#039;auditd\u0026#039; if ansible_os_family == \u0026#039;RedHat\u0026#039; else \u0026#039;auditd\u0026#039; }}\u0026quot;\n        state: present\n\n    - name: Configure audit rules\n      template:\n        src: templates/audit.rules.j2\n        dest: /etc/audit/rules.d/audit.rules\n        backup: yes\n      notify: restart auditd\n\n    # CIS compliance checks\n    - name: Run CIS benchmark checks\n      shell: |\n        if [ -f /opt/cis-cat/CIS-CAT.sh ]; then\n          /opt/cis-cat/CIS-CAT.sh -b /opt/cis-cat/benchmarks/\n        else\n          echo \u0026quot;CIS-CAT not installed, skipping\u0026quot;\n        fi\n      register: cis_results\n      ignore_errors: yes\n\n    # File integrity monitoring\n    - name: Install AIDE\n      package:\n        name: aide\n        state: present\n\n    - name: Initialize AIDE database\n      shell: |\n        aide --init\n        mv /var/lib/aide/aide.db.new /var/lib/aide/aide.db\n      args:\n        creates: /var/lib/aide/aide.db\n\n    - name: Schedule AIDE integrity checks\n      cron:\n        name: \u0026quot;AIDE integrity check\u0026quot;\n        minute: \u0026quot;0\u0026quot;\n        hour: \u0026quot;3\u0026quot;\n        job: \u0026quot;/usr/bin/aide --check | mail -s \u0026#039;AIDE Report\u0026#039; security@example.com\u0026quot;\n        user: root\n\n    # Log monitoring\n    - name: Install log monitoring tools\n      package:\n        name:\n          - logwatch\n          - rsyslog\n        state: present\n\n    - name: Configure centralized logging\n      template:\n        src: templates/rsyslog.conf.j2\n        dest: /etc/rsyslog.conf\n        backup: yes\n      notify: restart rsyslog\n\n  handlers:\n    - name: restart auditd\n      service:\n        name: auditd\n        state: restarted\n\n    - name: restart rsyslog\n      service:\n        name: rsyslog\n        state: restarted\nEOF\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"cicd-integration\" class=\"mobile-header\"\u003eCI/CD Integration\u003c/h2\u003e\n\u003ch3 id=\"jenkins-pipeline-integration\" class=\"mobile-header\"\u003eJenkins Pipeline Integration\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Create Jenkinsfile for Ansible automation\ncat \u0026gt; Jenkinsfile \u0026lt;\u0026lt;EOF\npipeline {\n    agent any\n    \n    environment {\n        ANSIBLE_CONFIG = \u0026#039;ansible.cfg\u0026#039;\n        ANSIBLE_HOST_KEY_CHECKING = \u0026#039;False\u0026#039;\n    }\n    \n    stages {\n        stage(\u0026#039;Lint\u0026#039;) {\n            steps {\n                sh \u0026#039;ansible-lint playbooks/\u0026#039;\n                sh \u0026#039;yamllint .\u0026#039;\n            }\n        }\n        \n        stage(\u0026#039;Syntax Check\u0026#039;) {\n            steps {\n                sh \u0026#039;ansible-playbook playbooks/site.yml --syntax-check\u0026#039;\n            }\n        }\n        \n        stage(\u0026#039;Dry Run\u0026#039;) {\n            steps {\n                sh \u0026#039;ansible-playbook playbooks/site.yml --check --diff\u0026#039;\n            }\n        }\n        \n        stage(\u0026#039;Deploy to Staging\u0026#039;) {\n            when {\n                branch \u0026#039;develop\u0026#039;\n            }\n            steps {\n                sh \u0026#039;ansible-playbook -i inventories/staging playbooks/site.yml\u0026#039;\n            }\n        }\n        \n        stage(\u0026#039;Deploy to Production\u0026#039;) {\n            when {\n                branch \u0026#039;main\u0026#039;\n            }\n            steps {\n                input \u0026#039;Deploy to Production?\u0026#039;\n                sh \u0026#039;ansible-playbook -i inventories/production playbooks/site.yml\u0026#039;\n            }\n        }\n        \n        stage(\u0026#039;Verify Deployment\u0026#039;) {\n            steps {\n                sh \u0026#039;ansible-playbook playbooks/system-verification.yml\u0026#039;\n            }\n        }\n    }\n    \n    post {\n        always {\n            archiveArtifacts artifacts: \u0026#039;logs/*.log\u0026#039;, allowEmptyArchive: true\n            publishHTML([\n                allowMissing: false,\n                alwaysLinkToLastBuild: true,\n                keepAll: true,\n                reportDir: \u0026#039;reports\u0026#039;,\n                reportFiles: \u0026#039;*.html\u0026#039;,\n                reportName: \u0026#039;Ansible Report\u0026#039;\n            ])\n        }\n        failure {\n            emailext (\n                subject: \u0026quot;Failed Pipeline: ${env.JOB_NAME} - ${env.BUILD_NUMBER}\u0026quot;,\n                body: \u0026quot;Something is wrong with ${env.BUILD_URL}\u0026quot;,\n                to: \u0026quot;${env.DEFAULT_RECIPIENTS}\u0026quot;\n            )\n        }\n    }\n}\nEOF\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"gitlab-ci-integration\" class=\"mobile-header\"\u003eGitLab CI Integration\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003ecat \u0026gt; .gitlab-ci.yml \u0026lt;\u0026lt;EOF\nstages:\n  - lint\n  - test\n  - deploy-staging\n  - deploy-production\n\nvariables:\n  ANSIBLE_CONFIG: ansible.cfg\n  ANSIBLE_HOST_KEY_CHECKING: \u0026quot;False\u0026quot;\n\nbefore_script:\n  - pip install ansible ansible-lint yamllint\n  - ansible-galaxy install -r requirements.yml\n\nlint:\n  stage: lint\n  script:\n    - ansible-lint playbooks/\n    - yamllint .\n  rules:\n    - if: \u0026#039;$CI_MERGE_REQUEST_IID\u0026#039;\n    - if: \u0026#039;$CI_COMMIT_BRANCH == $CI_DEFAULT_BRANCH\u0026#039;\n\nsyntax-check:\n  stage: test\n  script:\n    - ansible-playbook playbooks/site.yml --syntax-check\n    - ansible-playbook playbooks/site.yml --check --diff -i inventories/staging\n  rules:\n    - if: \u0026#039;$CI_MERGE_REQUEST_IID\u0026#039;\n    - if: \u0026#039;$CI_COMMIT_BRANCH == $CI_DEFAULT_BRANCH\u0026#039;\n\ndeploy-staging:\n  stage: deploy-staging\n  script:\n    - ansible-playbook -i inventories/staging playbooks/site.yml\n  rules:\n    - if: \u0026#039;$CI_COMMIT_BRANCH == \u0026quot;develop\u0026quot;\u0026#039;\n\ndeploy-production:\n  stage: deploy-production\n  script:\n    - ansible-playbook -i inventories/production playbooks/site.yml\n  rules:\n    - if: \u0026#039;$CI_COMMIT_BRANCH == $CI_DEFAULT_BRANCH\u0026#039;\n      when: manual\n  environment:\n    name: production\n    url: https://production.example.com\nEOF\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"troubleshooting-cross-platform\" class=\"mobile-header\"\u003eTroubleshooting (Cross-Platform)\u003c/h2\u003e\n\u003ch3 id=\"common-issues-and-solutions\" class=\"mobile-header\"\u003eCommon Issues and Solutions\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Debug connection issues\nansible all -m ping -vvv\n\n# Check SSH connectivity\nansible all -m setup --ask-pass --ask-become-pass\n\n# Verify inventory\nansible-inventory --list\nansible-inventory --graph\n\n# Test specific host\nansible target-host -m command -a \u0026quot;uptime\u0026quot;\n\n# Check syntax without execution\nansible-playbook playbooks/site.yml --syntax-check\n\n# Dry run with verbose output\nansible-playbook playbooks/site.yml --check --diff -vvv\n\n# Debug variable resolution\nansible-playbook playbooks/site.yml --extra-vars=\u0026quot;debug=true\u0026quot; --tags debug\n\n# Check facts\nansible all -m setup | grep ansible_os_family\n\n# Connection troubleshooting\nssh -vvv user@target-host\n\n# Permission issues\nansible all -m file -a \u0026quot;path=/tmp/test state=touch\u0026quot; --become\n\n# Vault issues\nansible-vault view group_vars/all/vault.yml\n\n# Performance debugging\nansible-playbook playbooks/site.yml --start-at-task=\u0026quot;specific task name\u0026quot;\nansible-playbook playbooks/site.yml --step\n\n# Module testing\nansible localhost -m debug -a \u0026quot;var=hostvars\u0026quot;\nansible localhost -m setup\n\n# Check for syntax errors in roles\nfind roles/ -name \u0026quot;*.yml\u0026quot; -exec ansible-playbook {} --syntax-check \\;\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"advanced-debugging\" class=\"mobile-header\"\u003eAdvanced Debugging\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Enable comprehensive logging\nexport ANSIBLE_DEBUG=1\nexport ANSIBLE_VERBOSITY=4\nansible-playbook playbooks/site.yml\n\n# Profile playbook execution\nansible-playbook playbooks/site.yml --extra-vars=\u0026quot;profile_tasks_sort_order=none\u0026quot;\n\n# Memory usage analysis\nansible-playbook playbooks/site.yml --extra-vars=\u0026quot;ansible_python_interpreter=/usr/bin/python3\u0026quot;\n\n# Network debugging\nansible all -m command -a \u0026quot;ss -tulpn\u0026quot;\nansible all -m command -a \u0026quot;netstat -rn\u0026quot;\n\n# Process debugging\nansible all -m command -a \u0026quot;ps aux --sort=-%mem | head -10\u0026quot;\n\n# Disk usage analysis\nansible all -m command -a \u0026quot;df -h\u0026quot;\nansible all -m command -a \u0026quot;du -sh /var/log/*\u0026quot;\n\n# Service debugging\nansible all -m systemd -a \u0026quot;name=nginx\u0026quot; --become\nansible all -m command -a \u0026quot;systemctl status nginx\u0026quot; --become\n\n# Variable debugging\nansible-playbook playbooks/site.yml --extra-vars=\u0026quot;debug_vars=true\u0026quot; --tags debug_vars\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"additional-resources\" class=\"mobile-header\"\u003eAdditional Resources\u003c/h2\u003e\n\u003cli class=\"mobile-list-item\"\u003e\u003ca href=\"https://docs.ansible.com/\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\"\u003eOfficial Documentation\u003c/a\u003e\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003e\u003ca href=\"https://galaxy.ansible.com/\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\"\u003eAnsible Galaxy\u003c/a\u003e\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003e\u003ca href=\"https://docs.ansible.com/ansible/latest/user_guide/playbooks_best_practices.html\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\"\u003eBest Practices Guide\u003c/a\u003e\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003e\u003ca href=\"https://docs.ansible.com/ansible/latest/user_guide/become.html#security-best-practices\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\"\u003eSecurity Best Practices\u003c/a\u003e\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003e\u003ca href=\"https://molecule.readthedocs.io/\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\"\u003eAnsible Molecule Testing\u003c/a\u003e\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003e\u003ca href=\"https://docs.ansible.com/ansible/latest/collections/index.html\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\"\u003eCommunity Collections\u003c/a\u003e\u003c/li\u003e\n\u003cp class=\"mobile-paragraph\"\u003e---\u003c/p\u003e\n\u003cp class=\"mobile-paragraph\"\u003e\u003cstrong\u003eNote:\u003c/strong\u003e This guide is part of the \u003ca href=\"https://howtomgr.github.io\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\"\u003eHowToMgr\u003c/a\u003e collection.\u003c/p\u003e","readTime":"31 min","wordCount":6191,"lastBuilt":"2025-09-14T03:45:51.595Z"}]},"__N_SSG":true},"page":"/[category]/[guide]","query":{"category":"infrastructure","guide":"terraform"},"buildId":"4R1IqQKHZQ9OAix6sl9bM","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>