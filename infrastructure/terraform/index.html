<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes"/><meta name="theme-color" content="#bd93f9"/><link rel="icon" href="/favicon.ico"/><link rel="preconnect" href="https://fonts.googleapis.com"/><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="true"/><title class="jsx-f92e766e9414ef16">Terraform Installation Guide - HowToMgr</title><meta name="description" content="Repo for terraform" class="jsx-f92e766e9414ef16"/><meta name="keywords" content="installation guides, tutorials, linux, docker, kubernetes, mobile-first, responsive" class="jsx-f92e766e9414ef16"/><meta property="og:title" content="Terraform Installation Guide - HowToMgr" class="jsx-f92e766e9414ef16"/><meta property="og:description" content="Repo for terraform" class="jsx-f92e766e9414ef16"/><meta property="og:type" content="website" class="jsx-f92e766e9414ef16"/><meta property="og:url" content="https://howtomgr.github.io" class="jsx-f92e766e9414ef16"/><meta property="og:image" content="https://howtomgr.github.io/social-preview.png" class="jsx-f92e766e9414ef16"/><meta property="twitter:card" content="summary_large_image" class="jsx-f92e766e9414ef16"/><meta property="twitter:title" content="Terraform Installation Guide - HowToMgr" class="jsx-f92e766e9414ef16"/><meta property="twitter:description" content="Repo for terraform" class="jsx-f92e766e9414ef16"/><meta name="next-head-count" content="17"/><link rel="dns-prefetch" href="//api.github.com"/><link rel="dns-prefetch" href="//github.com"/><link rel="preload" href="/favicon.ico" as="image"/><meta name="application-name" content="HowToMgr"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="default"/><meta name="apple-mobile-web-app-title" content="HowToMgr"/><meta name="format-detection" content="telephone=no"/><meta name="mobile-web-app-capable" content="yes"/><noscript><style>
            .requires-js { display: none !important; }
            .no-js-message { display: block !important; }
          </style></noscript><link rel="preload" href="/_next/static/css/eec6c1c201affe77.css" as="style"/><link rel="stylesheet" href="/_next/static/css/eec6c1c201affe77.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-42372ed130431b0a.js"></script><script src="/_next/static/chunks/webpack-ee7e63bc15b31913.js" defer=""></script><script src="/_next/static/chunks/framework-2b1f7a23d657eae4.js" defer=""></script><script src="/_next/static/chunks/main-6ec3f7584970eebe.js" defer=""></script><script src="/_next/static/chunks/pages/_app-f7367f88af207b64.js" defer=""></script><script src="/_next/static/chunks/119-abfbe7c9e22798da.js" defer=""></script><script src="/_next/static/chunks/pages/%5Bcategory%5D/%5Bguide%5D-ae7274cbb918ed8b.js" defer=""></script><script src="/_next/static/FWaJNz_CPEuOjXz3AhtJ8/_buildManifest.js" defer=""></script><script src="/_next/static/FWaJNz_CPEuOjXz3AhtJ8/_ssgManifest.js" defer=""></script><style id="__jsx-8a7f0cdcf94f52ce">.breadcrumb.jsx-8a7f0cdcf94f52ce{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;gap:var(--space-2);margin-bottom:var(--space-6);font-size:var(--font-sm);color:var(--text-secondary);overflow-x:auto;white-space:nowrap;-webkit-overflow-scrolling:touch}.breadcrumb.jsx-8a7f0cdcf94f52ce a.jsx-8a7f0cdcf94f52ce{color:var(--accent-primary);text-decoration:none;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0}.breadcrumb.jsx-8a7f0cdcf94f52ce a.jsx-8a7f0cdcf94f52ce:hover{text-decoration:underline}.separator.jsx-8a7f0cdcf94f52ce{color:var(--text-muted);-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0}.current.jsx-8a7f0cdcf94f52ce{color:var(--text-primary);font-weight:500;white-space:nowrap;overflow:hidden;-o-text-overflow:ellipsis;text-overflow:ellipsis}.guide-header.jsx-8a7f0cdcf94f52ce{background:var(--bg-secondary);-webkit-border-radius:var(--border-radius-lg);-moz-border-radius:var(--border-radius-lg);border-radius:var(--border-radius-lg);padding:var(--space-6);margin-bottom:var(--space-8);border:1px solid var(--bg-surface)}.guide-title.jsx-8a7f0cdcf94f52ce{color:var(--accent-primary);font-size:var(--font-3xl);margin-bottom:var(--space-4);line-height:1.2;word-break:break-word}.guide-description.jsx-8a7f0cdcf94f52ce{color:var(--text-secondary);font-size:var(--font-lg);margin-bottom:var(--space-5);line-height:1.5}.guide-badges.jsx-8a7f0cdcf94f52ce{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;gap:var(--space-3);margin-bottom:var(--space-5);-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap}.guide-actions.jsx-8a7f0cdcf94f52ce{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;gap:var(--space-3);-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap}.guide-content.jsx-8a7f0cdcf94f52ce{background:var(--bg-secondary);-webkit-border-radius:var(--border-radius-lg);-moz-border-radius:var(--border-radius-lg);border-radius:var(--border-radius-lg);padding:var(--space-6);margin-bottom:var(--space-8);border:1px solid var(--bg-surface);overflow-x:hidden}.related-section.jsx-8a7f0cdcf94f52ce{margin-bottom:var(--space-8)}.section-title.jsx-8a7f0cdcf94f52ce{color:var(--accent-primary);font-size:var(--font-2xl);text-align:center;margin-bottom:var(--space-6)}.guide-navigation.jsx-8a7f0cdcf94f52ce{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;gap:var(--space-4);-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;margin-bottom:var(--space-8)}.loading-container.jsx-8a7f0cdcf94f52ce,.error-container.jsx-8a7f0cdcf94f52ce{text-align:center;padding:var(--space-8)}.error-actions.jsx-8a7f0cdcf94f52ce{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;gap:var(--space-4);-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;margin-top:var(--space-6);-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap}@media(max-width:767px){.guide-header.jsx-8a7f0cdcf94f52ce{padding:var(--space-4);margin-bottom:var(--space-6)}.guide-title.jsx-8a7f0cdcf94f52ce{font-size:var(--font-2xl)}.guide-description.jsx-8a7f0cdcf94f52ce{font-size:var(--font-base)}.guide-content.jsx-8a7f0cdcf94f52ce{padding:var(--space-4);margin-bottom:var(--space-6)}.guide-badges.jsx-8a7f0cdcf94f52ce{gap:var(--space-2)}.guide-actions.jsx-8a7f0cdcf94f52ce{-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column}.guide-navigation.jsx-8a7f0cdcf94f52ce{-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column}.breadcrumb.jsx-8a7f0cdcf94f52ce{margin-bottom:var(--space-4)}}</style><style id="__jsx-f92e766e9414ef16">.app-container.jsx-f92e766e9414ef16{min-height:100vh;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;padding-top:56px}.main-content.jsx-f92e766e9414ef16{-webkit-box-flex:1;-webkit-flex:1;-moz-box-flex:1;-ms-flex:1;flex:1;padding:var(--space-6)0}.mobile-footer.jsx-f92e766e9414ef16{background:var(--bg-secondary);border-top:1px solid var(--bg-surface);padding:var(--space-6)0;margin-top:auto}.footer-content.jsx-f92e766e9414ef16{text-align:center}.footer-links.jsx-f92e766e9414ef16{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;gap:var(--space-6);margin-bottom:var(--space-4);-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap}.footer-links.jsx-f92e766e9414ef16 a.jsx-f92e766e9414ef16{color:var(--accent-primary);text-decoration:none;font-size:var(--font-sm)}.footer-links.jsx-f92e766e9414ef16 a.jsx-f92e766e9414ef16:hover{color:var(--accent-secondary)}.footer-separator.jsx-f92e766e9414ef16{height:1px;background:var(--bg-surface);margin:var(--space-4)auto;width:200px}.footer-text.jsx-f92e766e9414ef16,.footer-tech.jsx-f92e766e9414ef16{color:var(--text-secondary);font-size:var(--font-sm);margin-bottom:var(--space-2)}.footer-disclaimer.jsx-f92e766e9414ef16{color:var(--text-muted);font-size:var(--font-xs)}.nav-links.jsx-f92e766e9414ef16{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;gap:var(--space-4)}.nav-link.jsx-f92e766e9414ef16{color:var(--text-primary);text-decoration:none;padding:var(--space-2)var(--space-3);-webkit-border-radius:var(--border-radius);-moz-border-radius:var(--border-radius);border-radius:var(--border-radius);font-size:var(--font-sm);font-weight:500;-webkit-transition:var(--transition);-moz-transition:var(--transition);-o-transition:var(--transition);transition:var(--transition);min-height:36px;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center}.nav-link.jsx-f92e766e9414ef16:hover{background:var(--bg-surface);color:var(--accent-primary);text-decoration:none}[data-theme="light"].jsx-f92e766e9414ef16 .theme-icon-dark.jsx-f92e766e9414ef16{display:none}[data-theme="light"].jsx-f92e766e9414ef16 .theme-icon-light.jsx-f92e766e9414ef16{display:inline!important}@media(max-width:767px){.main-content.jsx-f92e766e9414ef16{padding:var(--space-4)0}.footer-links.jsx-f92e766e9414ef16{gap:var(--space-4)}}</style></head><body><noscript><div class="no-js-message" style="padding:1rem;background:#ff5555;color:#f8f8f2;text-align:center;font-size:0.9rem">This site requires JavaScript to function properly. Please enable JavaScript in your browser.</div></noscript><div id="__next"><div class="jsx-f92e766e9414ef16 app-container"><a href="#main-content" class="jsx-f92e766e9414ef16 skip-link">Skip to main content</a><nav class="jsx-f92e766e9414ef16 mobile-nav"><div class="jsx-f92e766e9414ef16 mobile-nav-content"><a class="mobile-brand" href="/"><span role="img" aria-label="Books" class="jsx-f92e766e9414ef16">📚</span>HowToMgr</a><div class="jsx-f92e766e9414ef16 nav-links"><a class="nav-link" href="/all/">All</a><a class="nav-link" href="/search/">Search</a></div><button aria-label="Toggle theme" title="Switch theme" class="jsx-f92e766e9414ef16 mobile-theme-toggle touch-target"><span class="jsx-f92e766e9414ef16 theme-icon-dark">🌙</span><span style="display:none" class="jsx-f92e766e9414ef16 theme-icon-light">☀️</span></button></div></nav><main id="main-content" tabindex="-1" class="jsx-f92e766e9414ef16 main-content"><div class="jsx-f92e766e9414ef16 container"><nav aria-label="Breadcrumb" class="jsx-8a7f0cdcf94f52ce breadcrumb"><a href="/">Home</a><span class="jsx-8a7f0cdcf94f52ce separator">→</span><a href="/infrastructure/">Infrastructure</a><span class="jsx-8a7f0cdcf94f52ce separator">→</span><span class="jsx-8a7f0cdcf94f52ce current">Terraform</span></nav><header class="jsx-8a7f0cdcf94f52ce guide-header"><div class="jsx-8a7f0cdcf94f52ce guide-meta-top"><h1 class="jsx-8a7f0cdcf94f52ce guide-title">Terraform</h1><p class="jsx-8a7f0cdcf94f52ce guide-description">Repo for terraform</p><div class="jsx-8a7f0cdcf94f52ce guide-badges"><span class="jsx-8a7f0cdcf94f52ce mobile-badge mobile-badge-primary">Infrastructure</span><span class="jsx-8a7f0cdcf94f52ce mobile-badge mobile-badge-info">33 min</span></div><div class="jsx-8a7f0cdcf94f52ce guide-actions"><a href="https://github.com/howtomgr/terraform" target="_blank" rel="noopener" class="jsx-8a7f0cdcf94f52ce btn btn-secondary">View on GitHub</a></div></div></header><article class="jsx-8a7f0cdcf94f52ce guide-content"><div class="jsx-8a7f0cdcf94f52ce readme-content"><h1 id="terraform-installation-guide" class="mobile-header">Terraform Installation Guide</h1>
<p class="mobile-paragraph">Terraform is a free and open-source Infrastructure as Code (IaC) tool developed by HashiCorp for building, changing, and versioning infrastructure safely and efficiently across multiple cloud providers. Originally created by Mitchell Hashimoto in 2014, Terraform uses declarative configuration files to manage infrastructure resources. It serves as a FOSS alternative to commercial IaC solutions like AWS CloudFormation, Azure Resource Manager, or proprietary enterprise tools, offering enterprise-grade features including multi-cloud management, state management, provider ecosystem, and team collaboration without licensing costs.</p>
<h2 id="prerequisites" class="mobile-header">Prerequisites</h2>
<li class="mobile-list-item"><strong>Hardware Requirements</strong>:</li>
<li class="mobile-list-item">CPU: 1 core minimum (2+ cores recommended for large infrastructures)</li>
<li class="mobile-list-item">RAM: 2GB minimum (4GB+ recommended for production)</li>
<li class="mobile-list-item">Storage: 5GB minimum (more for state files and provider binaries)</li>
<li class="mobile-list-item">Network: Stable connectivity for cloud provider APIs</li>
<li class="mobile-list-item"><strong>Operating System</strong>: </li>
<li class="mobile-list-item">Linux: Any modern distribution with kernel 3.2+</li>
<li class="mobile-list-item">macOS: 10.13+ (High Sierra or newer)</li>
<li class="mobile-list-item">Windows: Windows Server 2016+ or Windows 10</li>
<li class="mobile-list-item">FreeBSD: 12.0+</li>
<li class="mobile-list-item"><strong>Network Requirements</strong>:</li>
<li class="mobile-list-item">HTTPS access to cloud provider APIs (port 443)</li>
<li class="mobile-list-item">Access to Terraform Registry (registry.terraform.io)</li>
<li class="mobile-list-item">Access to HashiCorp releases (releases.hashicorp.com)</li>
<li class="mobile-list-item"><strong>Dependencies</strong>:</li>
<li class="mobile-list-item">Cloud provider CLI tools (aws-cli, azure-cli, gcloud)</li>
<li class="mobile-list-item">Git for configuration management</li>
<li class="mobile-list-item">Text editor or IDE</li>
<li class="mobile-list-item">Root or administrative access for installation</li>
<li class="mobile-list-item"><strong>System Access</strong>: root or sudo privileges required for installation</li>
<h2 id="installation" class="mobile-header">Installation</h2>
<h3 id="rhelcentosrocky-linuxalmalinux" class="mobile-header">RHEL/CentOS/Rocky Linux/AlmaLinux</h3>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash"># Add HashiCorp repository
sudo yum install -y yum-utils
sudo yum-config-manager --add-repo https://rpm.releases.hashicorp.com/RHEL/hashicorp.repo

# Install Terraform
sudo yum install -y terraform

# Verify installation
terraform version

# Alternative: DNF for newer systems
sudo dnf install -y yum-utils
sudo dnf config-manager --add-repo https://rpm.releases.hashicorp.com/RHEL/hashicorp.repo
sudo dnf install -y terraform</code></pre>
      </div>
    </div>
<h3 id="debianubuntu" class="mobile-header">Debian/Ubuntu</h3>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash"># Add HashiCorp GPG key
wget -O- https://apt.releases.hashicorp.com/gpg | sudo gpg --dearmor -o /usr/share/keyrings/hashicorp-archive-keyring.gpg

# Add HashiCorp repository
echo &quot;deb [signed-by=/usr/share/keyrings/hashicorp-archive-keyring.gpg] https://apt.releases.hashicorp.com $(lsb_release -cs) main&quot; | sudo tee /etc/apt/sources.list.d/hashicorp.list

# Update and install Terraform
sudo apt update
sudo apt install -y terraform

# Verify installation
terraform version</code></pre>
      </div>
    </div>
<h3 id="arch-linux" class="mobile-header">Arch Linux</h3>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash"># Install from community repository
sudo pacman -S terraform

# Alternative: Install from AUR
yay -S terraform

# Install additional tools
sudo pacman -S terraform-docs tflint

# Verify installation
terraform version</code></pre>
      </div>
    </div>
<h3 id="alpine-linux" class="mobile-header">Alpine Linux</h3>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash"># Install from Alpine repositories
sudo apk update
sudo apk add terraform

# Install additional tools
sudo apk add bash git curl

# Verify installation
terraform version</code></pre>
      </div>
    </div>
<h3 id="opensusesles" class="mobile-header">openSUSE/SLES</h3>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash"># openSUSE Leap/Tumbleweed
sudo zypper install -y terraform

# SLES 15
sudo SUSEConnect -p sle-module-development-tools/15.5/x86_64
sudo zypper install -y terraform

# Alternative: Add HashiCorp repository
sudo zypper addrepo https://rpm.releases.hashicorp.com/SLES/hashicorp.repo
sudo zypper refresh
sudo zypper install terraform

# Verify installation
terraform version</code></pre>
      </div>
    </div>
<h3 id="macos" class="mobile-header">macOS</h3>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash"># Using Homebrew
brew tap hashicorp/tap
brew install hashicorp/tap/terraform

# Alternative: Install specific version
brew install terraform@1.6

# Verify installation
terraform version

# Using tfenv for version management
brew install tfenv
tfenv install latest
tfenv use latest</code></pre>
      </div>
    </div>
<h3 id="freebsd" class="mobile-header">FreeBSD</h3>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash"># Using pkg
pkg install terraform

# Using ports
cd /usr/ports/sysutils/terraform
make install clean

# Verify installation
terraform version</code></pre>
      </div>
    </div>
<h3 id="windows" class="mobile-header">Windows</h3>
<div class="mobile-code-block" data-language="powershell">
      <div class="mobile-code-header">
        <span class="mobile-code-language">powershell</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-powershell"># Method 1: Using Chocolatey
choco install terraform

# Method 2: Using Scoop
scoop bucket add main
scoop install terraform

# Method 3: Manual installation
# Download from https://releases.hashicorp.com/terraform/
# Extract terraform.exe to C:\terraform
# Add C:\terraform to PATH

# Method 4: Using Winget
winget install HashiCorp.Terraform

# Verify installation
terraform version</code></pre>
      </div>
    </div>
<h2 id="initial-configuration" class="mobile-header">Initial Configuration</h2>
<h3 id="first-run-setup" class="mobile-header">First-Run Setup</h3>
<p class="mobile-paragraph">1. <strong>Create terraform user</strong> (optional for dedicated service):</p>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash"># Linux systems
sudo useradd -r -d /opt/terraform -s /sbin/nologin -c &quot;Terraform Service&quot; terraform</code></pre>
      </div>
    </div>
<p class="mobile-paragraph">2. <strong>Default configuration locations</strong>:</p>
<li class="mobile-list-item">RHEL/CentOS/Rocky/AlmaLinux: <code class="mobile-inline-code">/etc/terraform/</code> (custom) or <code class="mobile-inline-code">/usr/local/bin/</code></li>
<li class="mobile-list-item">Debian/Ubuntu: <code class="mobile-inline-code">/etc/terraform/</code> (custom) or <code class="mobile-inline-code">/usr/local/bin/</code></li>
<li class="mobile-list-item">Arch Linux: <code class="mobile-inline-code">/etc/terraform/</code> (custom) or <code class="mobile-inline-code">/usr/bin/</code></li>
<li class="mobile-list-item">Alpine Linux: <code class="mobile-inline-code">/etc/terraform/</code> (custom) or <code class="mobile-inline-code">/usr/bin/</code></li>
<li class="mobile-list-item">openSUSE/SLES: <code class="mobile-inline-code">/etc/terraform/</code> (custom) or <code class="mobile-inline-code">/usr/local/bin/</code></li>
<li class="mobile-list-item">macOS: <code class="mobile-inline-code">/usr/local/etc/terraform/</code> or <code class="mobile-inline-code">/opt/homebrew/etc/terraform/</code></li>
<li class="mobile-list-item">FreeBSD: <code class="mobile-inline-code">/usr/local/etc/terraform/</code></li>
<li class="mobile-list-item">Windows: <code class="mobile-inline-code">C:\terraform\</code> or <code class="mobile-inline-code">%APPDATA%\terraform\</code></li>
<p class="mobile-paragraph">3. <strong>Essential initial configuration</strong>:</p>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash"># Create workspace directory
mkdir -p ~/terraform/projects
cd ~/terraform/projects

# Create first Terraform configuration
cat &gt; main.tf &lt;&lt;EOF
terraform {
  required_version = &quot;&gt;= 1.6&quot;
  required_providers {
    local = {
      source  = &quot;hashicorp/local&quot;
      version = &quot;~&gt; 2.0&quot;
    }
  }
}

resource &quot;local_file&quot; &quot;hello_world&quot; {
  content  = &quot;Hello, World from Terraform!&quot;
  filename = &quot;hello.txt&quot;
}
EOF

# Initialize Terraform
terraform init

# Validate configuration
terraform validate

# Plan deployment
terraform plan

# Apply configuration
terraform apply</code></pre>
      </div>
    </div>
<h3 id="testing-initial-setup" class="mobile-header">Testing Initial Setup</h3>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash"># Check Terraform version
terraform version

# Validate configuration
terraform validate

# Format configuration files
terraform fmt

# Initialize and test basic functionality
terraform init
terraform plan
terraform apply

# List state
terraform state list

# Show state details
terraform show

# Clean up test resources
terraform destroy</code></pre>
      </div>
    </div>
<p class="mobile-paragraph"><strong>WARNING:</strong> Configure proper authentication for cloud providers before deploying real infrastructure!</p>
<h2 id="service-management" class="mobile-header">Service Management</h2>
<h3 id="systemd-linux-systems" class="mobile-header">systemd (Linux Systems)</h3>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash"># Create systemd service for Terraform agent (if using)
sudo tee /etc/systemd/system/terraform-agent.service &lt;&lt;EOF
[Unit]
Description=Terraform Agent
After=network.target

[Service]
Type=simple
User=terraform
WorkingDirectory=/opt/terraform
ExecStart=/usr/local/bin/terraform-agent
Restart=always
RestartSec=10

[Install]
WantedBy=multi-user.target
EOF

sudo systemctl daemon-reload
sudo systemctl enable terraform-agent</code></pre>
      </div>
    </div>
<h3 id="openrc-alpine-linux" class="mobile-header">OpenRC (Alpine Linux)</h3>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash"># Create OpenRC service script
sudo tee /etc/init.d/terraform-agent &lt;&lt;EOF
#!/sbin/openrc-run

name=&quot;terraform-agent&quot;
description=&quot;Terraform Agent&quot;
command=&quot;/usr/bin/terraform-agent&quot;
command_user=&quot;terraform&quot;
command_background=true
pidfile=&quot;/var/run/terraform-agent.pid&quot;

depend() {
    need net
}
EOF

sudo chmod +x /etc/init.d/terraform-agent
rc-update add terraform-agent default</code></pre>
      </div>
    </div>
<h3 id="rcd-freebsd" class="mobile-header">rc.d (FreeBSD)</h3>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash"># Create rc.d script
sudo tee /usr/local/etc/rc.d/terraform_agent &lt;&lt;EOF
#!/bin/sh
. /etc/rc.subr

name=terraform_agent
rcvar=terraform_agent_enable
command=&quot;/usr/local/bin/terraform-agent&quot;
pidfile=&quot;/var/run/terraform_agent.pid&quot;
start_cmd=&quot;terraform_agent_start&quot;

terraform_agent_start() {
    daemon -p \${pidfile} \${command}
}

load_rc_config \$name
run_rc_command &quot;\$1&quot;
EOF

sudo chmod +x /usr/local/etc/rc.d/terraform_agent
echo &#039;terraform_agent_enable=&quot;YES&quot;&#039; &gt;&gt; /etc/rc.conf</code></pre>
      </div>
    </div>
<h3 id="launchd-macos" class="mobile-header">launchd (macOS)</h3>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash"># Create LaunchDaemon plist
sudo tee /Library/LaunchDaemons/com.hashicorp.terraform.agent.plist &lt;&lt;EOF
&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;!DOCTYPE plist PUBLIC &quot;-//Apple//DTD PLIST 1.0//EN&quot; &quot;http://www.apple.com/DTDs/PropertyList-1.0.dtd&quot;&gt;
&lt;plist version=&quot;1.0&quot;&gt;
&lt;dict&gt;
    &lt;key&gt;Label&lt;/key&gt;
    &lt;string&gt;com.hashicorp.terraform.agent&lt;/string&gt;
    &lt;key&gt;ProgramArguments&lt;/key&gt;
    &lt;array&gt;
        &lt;string&gt;/usr/local/bin/terraform-agent&lt;/string&gt;
    &lt;/array&gt;
    &lt;key&gt;RunAtLoad&lt;/key&gt;
    &lt;true/&gt;
    &lt;key&gt;KeepAlive&lt;/key&gt;
    &lt;true/&gt;
&lt;/dict&gt;
&lt;/plist&gt;
EOF

sudo launchctl load /Library/LaunchDaemons/com.hashicorp.terraform.agent.plist</code></pre>
      </div>
    </div>
<h3 id="windows-service-manager" class="mobile-header">Windows Service Manager</h3>
<div class="mobile-code-block" data-language="powershell">
      <div class="mobile-code-header">
        <span class="mobile-code-language">powershell</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-powershell"># Install Terraform as Windows service using NSSM
nssm install TerraformAgent &quot;C:\terraform\terraform-agent.exe&quot;
nssm set TerraformAgent AppDirectory &quot;C:\terraform&quot;
nssm set TerraformAgent DisplayName &quot;Terraform Agent&quot;
nssm set TerraformAgent Description &quot;HashiCorp Terraform Agent&quot;
nssm start TerraformAgent

# Alternative: Using sc command
sc create TerraformAgent binPath=&quot;C:\terraform\terraform-agent.exe&quot; start=auto
sc start TerraformAgent</code></pre>
      </div>
    </div>
<h2 id="advanced-configuration" class="mobile-header">Advanced Configuration</h2>
<h3 id="multi-cloud-provider-setup" class="mobile-header">Multi-Cloud Provider Setup</h3>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash"># Create comprehensive multi-cloud configuration
cat &gt; providers.tf &lt;&lt;EOF
terraform {
  required_version = &quot;&gt;= 1.6&quot;
  required_providers {
    aws = {
      source  = &quot;hashicorp/aws&quot;
      version = &quot;~&gt; 5.0&quot;
    }
    azurerm = {
      source  = &quot;hashicorp/azurerm&quot;
      version = &quot;~&gt; 3.0&quot;
    }
    google = {
      source  = &quot;hashicorp/google&quot;
      version = &quot;~&gt; 5.0&quot;
    }
    kubernetes = {
      source  = &quot;hashicorp/kubernetes&quot;
      version = &quot;~&gt; 2.0&quot;
    }
    helm = {
      source  = &quot;hashicorp/helm&quot;
      version = &quot;~&gt; 2.0&quot;
    }
  }
  
  # Remote state configuration
  backend &quot;s3&quot; {
    bucket = &quot;terraform-state-bucket&quot;
    key    = &quot;infrastructure/terraform.tfstate&quot;
    region = &quot;us-west-2&quot;
    
    # State locking with DynamoDB
    dynamodb_table = &quot;terraform-state-lock&quot;
    encrypt        = true
  }
}

# AWS Provider
provider &quot;aws&quot; {
  region = var.aws_region
  
  default_tags {
    tags = {
      Environment   = var.environment
      ManagedBy     = &quot;terraform&quot;
      Project       = var.project_name
      Owner         = var.owner
    }
  }
}

# Azure Provider
provider &quot;azurerm&quot; {
  features {
    resource_group {
      prevent_deletion_if_contains_resources = false
    }
    key_vault {
      purge_soft_delete_on_destroy = true
    }
  }
}

# Google Cloud Provider
provider &quot;google&quot; {
  project = var.gcp_project_id
  region  = var.gcp_region
  zone    = var.gcp_zone
}

# Kubernetes Provider
provider &quot;kubernetes&quot; {
  config_path = &quot;~/.kube/config&quot;
}

# Helm Provider
provider &quot;helm&quot; {
  kubernetes {
    config_path = &quot;~/.kube/config&quot;
  }
}
EOF</code></pre>
      </div>
    </div>
<h3 id="enterprise-features-configuration" class="mobile-header">Enterprise Features Configuration</h3>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash"># Terraform Cloud/Enterprise configuration
cat &gt; cloud.tf &lt;&lt;EOF
terraform {
  cloud {
    organization = &quot;your-organization&quot;
    
    workspaces {
      name = &quot;production-infrastructure&quot;
    }
  }
}

# Remote execution configuration
terraform {
  cloud {
    organization = &quot;your-organization&quot;
    
    workspaces {
      tags = [&quot;production&quot;, &quot;web-app&quot;]
    }
  }
  
  required_providers {
    tfe = {
      source  = &quot;hashicorp/tfe&quot;
      version = &quot;~&gt; 0.48&quot;
    }
  }
}

# Terraform Enterprise configuration
provider &quot;tfe&quot; {
  hostname = &quot;terraform.company.com&quot;
  token    = var.tfe_token
}

# Workspace configuration
resource &quot;tfe_workspace&quot; &quot;production&quot; {
  name         = &quot;production-infrastructure&quot;
  organization = var.tfe_organization
  
  auto_apply = false
  queue_all_runs = false
  
  terraform_version = &quot;1.6.4&quot;
  
  vcs_repo {
    identifier     = &quot;company/infrastructure&quot;
    branch         = &quot;main&quot;
    oauth_token_id = var.vcs_oauth_token_id
  }
  
  working_directory = &quot;environments/production&quot;
}
EOF</code></pre>
      </div>
    </div>
<h3 id="advanced-state-management" class="mobile-header">Advanced State Management</h3>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash"># Encrypted remote state with multiple backends
cat &gt; backend-s3.tf &lt;&lt;EOF
# S3 backend with encryption and locking
terraform {
  backend &quot;s3&quot; {
    bucket         = &quot;terraform-state-bucket&quot;
    key            = &quot;infrastructure/terraform.tfstate&quot;
    region         = &quot;us-west-2&quot;
    encrypt        = true
    kms_key_id     = &quot;arn:aws:kms:us-west-2:ACCOUNT:key/KEY-ID&quot;
    dynamodb_table = &quot;terraform-state-lock&quot;
    
    # Additional security
    skip_region_validation      = false
    skip_credentials_validation = false
    skip_metadata_api_check     = false
  }
}

# State bucket with versioning and lifecycle
resource &quot;aws_s3_bucket&quot; &quot;terraform_state&quot; {
  bucket = &quot;terraform-state-bucket&quot;
  
  tags = {
    Name        = &quot;Terraform State Bucket&quot;
    Environment = var.environment
  }
}

resource &quot;aws_s3_bucket_versioning&quot; &quot;terraform_state_versioning&quot; {
  bucket = aws_s3_bucket.terraform_state.id
  versioning_configuration {
    status = &quot;Enabled&quot;
  }
}

resource &quot;aws_s3_bucket_server_side_encryption_configuration&quot; &quot;terraform_state_encryption&quot; {
  bucket = aws_s3_bucket.terraform_state.id

  rule {
    apply_server_side_encryption_by_default {
      kms_master_key_id = aws_kms_key.terraform_bucket_key.arn
      sse_algorithm     = &quot;aws:kms&quot;
    }
  }
}

resource &quot;aws_s3_bucket_public_access_block&quot; &quot;terraform_state&quot; {
  bucket = aws_s3_bucket.terraform_state.id

  block_public_acls       = true
  block_public_policy     = true
  ignore_public_acls      = true
  restrict_public_buckets = true
}

# KMS key for encryption
resource &quot;aws_kms_key&quot; &quot;terraform_bucket_key&quot; {
  description             = &quot;KMS key for Terraform state bucket encryption&quot;
  deletion_window_in_days = 7

  tags = {
    Name        = &quot;Terraform State Bucket Key&quot;
    Environment = var.environment
  }
}

# DynamoDB table for state locking
resource &quot;aws_dynamodb_table&quot; &quot;terraform_state_lock&quot; {
  name           = &quot;terraform-state-lock&quot;
  billing_mode   = &quot;PAY_PER_REQUEST&quot;
  hash_key       = &quot;LockID&quot;

  attribute {
    name = &quot;LockID&quot;
    type = &quot;S&quot;
  }

  server_side_encryption {
    enabled = true
  }

  point_in_time_recovery {
    enabled = true
  }

  tags = {
    Name        = &quot;Terraform State Lock Table&quot;
    Environment = var.environment
  }
}
EOF</code></pre>
      </div>
    </div>
<h2 id="reverse-proxy-setup" class="mobile-header">Reverse Proxy Setup</h2>
<p class="mobile-paragraph">Terraform itself doesn't typically require reverse proxy setup, but when using Terraform Enterprise or Cloud, you might need to configure proxies for API access:</p>
<h3 id="corporate-proxy-configuration" class="mobile-header">Corporate Proxy Configuration</h3>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash"># Configure Terraform to work through corporate proxy
export HTTP_PROXY=http://proxy.company.com:8080
export HTTPS_PROXY=http://proxy.company.com:8080
export NO_PROXY=localhost,127.0.0.1,.company.com

# Add to ~/.bashrc or ~/.zshrc
cat &gt;&gt; ~/.bashrc &lt;&lt;EOF
# Terraform proxy settings
export HTTP_PROXY=http://proxy.company.com:8080
export HTTPS_PROXY=http://proxy.company.com:8080
export NO_PROXY=localhost,127.0.0.1,.company.com
EOF

# Configure Git for proxy (if needed for modules)
git config --global http.proxy http://proxy.company.com:8080
git config --global https.proxy http://proxy.company.com:8080</code></pre>
      </div>
    </div>
<h3 id="nginx-configuration-for-terraform-enterprise" class="mobile-header">nginx Configuration for Terraform Enterprise</h3>
<div class="mobile-code-block" data-language="nginx">
      <div class="mobile-code-header">
        <span class="mobile-code-language">nginx</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-nginx"># /etc/nginx/sites-available/terraform-enterprise
upstream terraform_enterprise {
    server 127.0.0.1:8800;
    server 127.0.0.1:8801 backup;
}

server {
    listen 443 ssl http2;
    server_name terraform.company.com;

    ssl_certificate /etc/ssl/certs/terraform.company.com.crt;
    ssl_certificate_key /etc/ssl/private/terraform.company.com.key;

    # Security headers
    add_header Strict-Transport-Security &quot;max-age=31536000&quot; always;
    add_header X-Frame-Options &quot;DENY&quot; always;
    add_header X-Content-Type-Options &quot;nosniff&quot; always;

    location / {
        proxy_pass http://terraform_enterprise;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
        
        # WebSocket support for real-time updates
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection &quot;upgrade&quot;;
        
        # Timeouts for long-running operations
        proxy_connect_timeout 60s;
        proxy_send_timeout 60s;
        proxy_read_timeout 300s;
    }
}</code></pre>
      </div>
    </div>
<h2 id="security-configuration" class="mobile-header">Security Configuration</h2>
<h3 id="secure-credential-management" class="mobile-header">Secure Credential Management</h3>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash"># Use environment variables for credentials
cat &gt; .env.example &lt;&lt;EOF
# AWS credentials
AWS_ACCESS_KEY_ID=your_access_key
AWS_SECRET_ACCESS_KEY=your_secret_key
AWS_DEFAULT_REGION=us-west-2

# Azure credentials
ARM_CLIENT_ID=your_client_id
ARM_CLIENT_SECRET=your_client_secret
ARM_SUBSCRIPTION_ID=your_subscription_id
ARM_TENANT_ID=your_tenant_id

# GCP credentials
GOOGLE_APPLICATION_CREDENTIALS=/path/to/service-account-key.json
GOOGLE_PROJECT=your_project_id

# Terraform Cloud
TF_CLOUD_TOKEN=your_terraform_cloud_token
EOF

# Use IAM roles for AWS (recommended)
cat &gt; aws-iam-role.tf &lt;&lt;EOF
# IAM role for Terraform execution
resource &quot;aws_iam_role&quot; &quot;terraform_execution&quot; {
  name = &quot;TerraformExecutionRole&quot;

  assume_role_policy = jsonencode({
    Version = &quot;2012-10-17&quot;
    Statement = [
      {
        Action = &quot;sts:AssumeRole&quot;
        Effect = &quot;Allow&quot;
        Principal = {
          Service = &quot;ec2.amazonaws.com&quot;
        }
      },
    ]
  })
}

# Attach managed policies with least privilege
resource &quot;aws_iam_role_policy_attachment&quot; &quot;terraform_execution&quot; {
  for_each = toset([
    &quot;arn:aws:iam::aws:policy/PowerUserAccess&quot;
  ])
  
  role       = aws_iam_role.terraform_execution.name
  policy_arn = each.value
}

# Create instance profile
resource &quot;aws_iam_instance_profile&quot; &quot;terraform_execution&quot; {
  name = &quot;TerraformExecutionProfile&quot;
  role = aws_iam_role.terraform_execution.name
}
EOF</code></pre>
      </div>
    </div>
<h3 id="security-scanning-and-compliance" class="mobile-header">Security Scanning and Compliance</h3>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash"># Pre-commit hooks for security
cat &gt; .pre-commit-config.yaml &lt;&lt;EOF
repos:
- repo: https://github.com/antonbabenko/pre-commit-terraform
  rev: v1.83.5
  hooks:
    - id: terraform_fmt
    - id: terraform_validate
    - id: terraform_docs
    - id: terraform_tflint
    - id: terraform_checkov
    - id: terraform_trivy

- repo: https://github.com/Yelp/detect-secrets
  rev: v1.4.0
  hooks:
    - id: detect-secrets
      args: [&#039;--baseline&#039;, &#039;.secrets.baseline&#039;]
EOF

# Checkov configuration for security scanning
cat &gt; .checkov.yaml &lt;&lt;EOF
framework:
  - terraform
  - secrets

check:
  - CKV_AWS_79  # Ensure Instance Metadata Service Version 1 is not enabled
  - CKV_AWS_8   # Ensure Launch Configuration EBS encryption
  - CKV_AZURE_1 # Ensure storage account encryption

skip-check:
  - CKV_AWS_23  # Skip S3 bucket public read check for specific use cases

output: cli
quiet: false
compact: false
EOF

# TFLint configuration
cat &gt; .tflint.hcl &lt;&lt;EOF
plugin &quot;aws&quot; {
    enabled = true
    version = &quot;0.21.2&quot;
    source  = &quot;github.com/terraform-linters/tflint-ruleset-aws&quot;
}

plugin &quot;azurerm&quot; {
    enabled = true
    version = &quot;0.21.0&quot;
    source  = &quot;github.com/terraform-linters/tflint-ruleset-azurerm&quot;
}

rule &quot;terraform_unused_declarations&quot; {
  enabled = true
}

rule &quot;terraform_naming_convention&quot; {
  enabled = true
  format  = &quot;snake_case&quot;
}
EOF</code></pre>
      </div>
    </div>
<h3 id="policy-as-code-with-opa" class="mobile-header">Policy as Code with OPA</h3>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash"># OPA (Open Policy Agent) security policies
cat &gt; policy/security.rego &lt;&lt;EOF
package terraform.security

# Deny instances without encryption
deny[reason] {
    resource := input.resource_changes[_]
    resource.type == &quot;aws_instance&quot;
    resource.change.after.root_block_device[_].encrypted == false
    reason := &quot;AWS instances must have encrypted root volumes&quot;
}

# Deny public S3 buckets
deny[reason] {
    resource := input.resource_changes[_]
    resource.type == &quot;aws_s3_bucket_public_access_block&quot;
    resource.change.after.block_public_acls == false
    reason := &quot;S3 buckets must block public access&quot;
}

# Require specific instance types in production
deny[reason] {
    resource := input.resource_changes[_]
    resource.type == &quot;aws_instance&quot;
    instance_type := resource.change.after.instance_type
    not allowed_instance_type(instance_type)
    workspace := input.terraform_version.workspace
    workspace == &quot;production&quot;
    reason := sprintf(&quot;Production instances must use approved instance types, got: %v&quot;, [instance_type])
}

allowed_instance_type(instance_type) {
    allowed_types := [&quot;t3.micro&quot;, &quot;t3.small&quot;, &quot;t3.medium&quot;, &quot;m5.large&quot;, &quot;m5.xlarge&quot;]
    instance_type in allowed_types
}
EOF

# Policy validation script
cat &gt; scripts/validate-policy.sh &lt;&lt;&#039;EOF&#039;
#!/bin/bash

# Generate Terraform plan
terraform plan -out=tfplan
terraform show -json tfplan &gt; tfplan.json

# Validate against policies
conftest test tfplan.json --policy policy/

# Cleanup
rm tfplan tfplan.json
EOF

chmod +x scripts/validate-policy.sh</code></pre>
      </div>
    </div>
<h2 id="database-setup" class="mobile-header">Database Setup</h2>
<p class="mobile-paragraph">Terraform doesn't require a traditional database, but it does use state files and can integrate with various storage backends:</p>
<h3 id="state-storage-backends" class="mobile-header">State Storage Backends</h3>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash"># PostgreSQL backend (for Terraform Enterprise)
cat &gt; backend-postgres.tf &lt;&lt;EOF
terraform {
  backend &quot;pg&quot; {
    conn_str = &quot;postgres://user:pass@localhost/terraform_backend?sslmode=require&quot;
  }
}
EOF

# Consul backend for distributed state
cat &gt; backend-consul.tf &lt;&lt;EOF
terraform {
  backend &quot;consul&quot; {
    address = &quot;consul.company.com:8500&quot;
    scheme  = &quot;https&quot;
    path    = &quot;terraform/infrastructure&quot;
  }
}
EOF

# etcd backend
cat &gt; backend-etcd.tf &lt;&lt;EOF
terraform {
  backend &quot;etcdv3&quot; {
    endpoints = [&quot;http://etcd1:2379&quot;, &quot;http://etcd2:2379&quot;, &quot;http://etcd3:2379&quot;]
    lock      = true
    prefix    = &quot;terraform-state/&quot;
  }
}
EOF</code></pre>
      </div>
    </div>
<h3 id="database-infrastructure-management" class="mobile-header">Database Infrastructure Management</h3>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash"># Database deployment with Terraform
cat &gt; database.tf &lt;&lt;EOF
# RDS instance with Multi-AZ
resource &quot;aws_db_instance&quot; &quot;main&quot; {
  identifier = &quot;${var.project_name}-db&quot;
  
  engine         = &quot;postgresql&quot;
  engine_version = &quot;15.4&quot;
  instance_class = &quot;db.t3.micro&quot;
  
  allocated_storage     = 20
  max_allocated_storage = 100
  storage_type         = &quot;gp3&quot;
  storage_encrypted    = true
  kms_key_id          = aws_kms_key.rds.arn
  
  db_name  = var.database_name
  username = var.database_username
  password = var.database_password
  port     = 5432
  
  multi_az               = true
  publicly_accessible    = false
  backup_retention_period = 7
  backup_window          = &quot;03:00-04:00&quot;
  maintenance_window     = &quot;sun:04:00-sun:05:00&quot;
  
  skip_final_snapshot = false
  final_snapshot_identifier = &quot;${var.project_name}-db-final-snapshot&quot;
  
  vpc_security_group_ids = [aws_security_group.rds.id]
  db_subnet_group_name   = aws_db_subnet_group.main.name
  
  tags = var.common_tags
}

# Database subnet group
resource &quot;aws_db_subnet_group&quot; &quot;main&quot; {
  name       = &quot;${var.project_name}-db-subnet-group&quot;
  subnet_ids = var.private_subnet_ids

  tags = merge(var.common_tags, {
    Name = &quot;${var.project_name}-db-subnet-group&quot;
  })
}

# KMS key for RDS encryption
resource &quot;aws_kms_key&quot; &quot;rds&quot; {
  description             = &quot;KMS key for RDS encryption&quot;
  deletion_window_in_days = 7

  tags = merge(var.common_tags, {
    Name = &quot;${var.project_name}-rds-kms-key&quot;
  })
}
EOF</code></pre>
      </div>
    </div>
<h2 id="performance-optimization" class="mobile-header">Performance Optimization</h2>
<h3 id="terraform-performance-tuning" class="mobile-header">Terraform Performance Tuning</h3>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash"># Optimize Terraform execution
cat &gt; terraform.tfvars &lt;&lt;EOF
# Performance settings
terraform_parallelism = 10
terraform_refresh = true
terraform_upgrade = false
EOF

# Performance optimization script
cat &gt; scripts/optimize-terraform.sh &lt;&lt;&#039;EOF&#039;
#!/bin/bash

# Increase parallelism for faster execution
export TF_CLI_ARGS_plan=&quot;-parallelism=10&quot;
export TF_CLI_ARGS_apply=&quot;-parallelism=10&quot;

# Use faster JSON output for large states
export TF_CLI_ARGS_show=&quot;-json&quot;

# Optimize provider caching
export TF_PLUGIN_CACHE_DIR=&quot;$HOME/.terraform.d/plugin-cache&quot;
mkdir -p &quot;$TF_PLUGIN_CACHE_DIR&quot;

# Performance monitoring
echo &quot;Starting Terraform operation at $(date)&quot;
time terraform &quot;$@&quot;
echo &quot;Completed Terraform operation at $(date)&quot;
EOF

chmod +x scripts/optimize-terraform.sh</code></pre>
      </div>
    </div>
<h3 id="large-infrastructure-management" class="mobile-header">Large Infrastructure Management</h3>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash"># Workspace and module organization
cat &gt; modules/infrastructure/main.tf &lt;&lt;EOF
# Optimized module structure for large deployments
terraform {
  required_providers {
    aws = {
      source  = &quot;hashicorp/aws&quot;
      version = &quot;~&gt; 5.0&quot;
    }
  }
}

# Use data sources efficiently
data &quot;aws_availability_zones&quot; &quot;available&quot; {
  state = &quot;available&quot;
  
  # Cache this data to avoid repeated API calls
  lifecycle {
    postcondition {
      condition     = length(self.names) &gt;= 2
      error_message = &quot;At least 2 availability zones required.&quot;
    }
  }
}

# Optimize resource creation with for_each
resource &quot;aws_subnet&quot; &quot;private&quot; {
  for_each = toset(slice(data.aws_availability_zones.available.names, 0, var.subnet_count))
  
  vpc_id            = aws_vpc.main.id
  cidr_block        = cidrsubnet(var.vpc_cidr, 8, index(data.aws_availability_zones.available.names, each.value) + 10)
  availability_zone = each.value
  
  tags = merge(var.common_tags, {
    Name = &quot;${var.name_prefix}-private-${each.value}&quot;
    Type = &quot;private&quot;
  })
}

# Use locals for complex computations
locals {
  # Pre-compute values to avoid recalculation
  availability_zones = slice(data.aws_availability_zones.available.names, 0, var.subnet_count)
  
  # Create maps for efficient lookups
  subnet_map = {
    for subnet in aws_subnet.private : 
    subnet.availability_zone =&gt; subnet.id
  }
}
EOF</code></pre>
      </div>
    </div>
<h3 id="state-optimization" class="mobile-header">State Optimization</h3>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash"># State file optimization script
cat &gt; scripts/optimize-state.sh &lt;&lt;&#039;EOF&#039;
#!/bin/bash

# Pull current state for backup
terraform state pull &gt; state-backup-$(date +%Y%m%d_%H%M%S).json

# Remove unused resources from state
terraform state list | while read resource; do
    if terraform plan -target=&quot;$resource&quot; | grep -q &quot;No changes&quot;; then
        echo &quot;Checking if $resource can be safely removed...&quot;
        # Add logic to safely remove unused resources
    fi
done

# Refresh state to sync with real infrastructure
terraform refresh

echo &quot;State optimization completed&quot;
EOF

chmod +x scripts/optimize-state.sh</code></pre>
      </div>
    </div>
<h2 id="monitoring" class="mobile-header">Monitoring</h2>
<h3 id="terraform-operations-monitoring" class="mobile-header">Terraform Operations Monitoring</h3>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash"># Terraform execution monitoring
cat &gt; scripts/monitor-terraform.sh &lt;&lt;&#039;EOF&#039;
#!/bin/bash

LOG_FILE=&quot;/var/log/terraform/operations.log&quot;
METRICS_FILE=&quot;/var/log/terraform/metrics.log&quot;

# Ensure log directory exists
mkdir -p &quot;$(dirname &quot;$LOG_FILE&quot;)&quot;
mkdir -p &quot;$(dirname &quot;$METRICS_FILE&quot;)&quot;

# Function to log operations
log_operation() {
    local operation=&quot;$1&quot;
    local status=&quot;$2&quot;
    local duration=&quot;$3&quot;
    local timestamp=$(date &#039;+%Y-%m-%d %H:%M:%S&#039;)
    
    echo &quot;[$timestamp] Operation: $operation, Status: $status, Duration: ${duration}s&quot; &gt;&gt; &quot;$LOG_FILE&quot;
    echo &quot;terraform_operation_duration{operation=\&quot;$operation\&quot;,status=\&quot;$status\&quot;} $duration&quot; &gt;&gt; &quot;$METRICS_FILE&quot;
}

# Wrapper function for terraform commands
terraform_monitored() {
    local operation=&quot;$1&quot;
    shift
    local start_time=$(date +%s)
    local exit_code=0
    
    echo &quot;Starting Terraform $operation at $(date)&quot;
    
    if terraform &quot;$operation&quot; &quot;$@&quot;; then
        local end_time=$(date +%s)
        local duration=$((end_time - start_time))
        log_operation &quot;$operation&quot; &quot;success&quot; &quot;$duration&quot;
        echo &quot;Terraform $operation completed successfully in ${duration}s&quot;
    else
        exit_code=$?
        local end_time=$(date +%s)
        local duration=$((end_time - start_time))
        log_operation &quot;$operation&quot; &quot;failure&quot; &quot;$duration&quot;
        echo &quot;Terraform $operation failed after ${duration}s&quot;
        return $exit_code
    fi
}

# Usage: terraform_monitored plan, terraform_monitored apply, etc.
terraform_monitored &quot;$@&quot;
EOF

chmod +x scripts/monitor-terraform.sh</code></pre>
      </div>
    </div>
<h3 id="infrastructure-monitoring-with-terraform" class="mobile-header">Infrastructure Monitoring with Terraform</h3>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash"># Deploy monitoring stack with Terraform
cat &gt; monitoring.tf &lt;&lt;EOF
# CloudWatch alarms for infrastructure
resource &quot;aws_cloudwatch_metric_alarm&quot; &quot;high_cpu&quot; {
  for_each = toset(module.compute.instance_ids)
  
  alarm_name          = &quot;high-cpu-${each.key}&quot;
  comparison_operator = &quot;GreaterThanThreshold&quot;
  evaluation_periods  = &quot;2&quot;
  metric_name        = &quot;CPUUtilization&quot;
  namespace          = &quot;AWS/EC2&quot;
  period             = &quot;300&quot;
  statistic          = &quot;Average&quot;
  threshold          = &quot;80&quot;
  alarm_description  = &quot;This metric monitors EC2 CPU utilization&quot;

  dimensions = {
    InstanceId = each.value
  }

  alarm_actions = [aws_sns_topic.alerts.arn]
  
  tags = var.common_tags
}

# SNS topic for alerts
resource &quot;aws_sns_topic&quot; &quot;alerts&quot; {
  name = &quot;${var.project_name}-infrastructure-alerts&quot;
  
  tags = var.common_tags
}

resource &quot;aws_sns_topic_subscription&quot; &quot;email_alerts&quot; {
  topic_arn = aws_sns_topic.alerts.arn
  protocol  = &quot;email&quot;
  endpoint  = var.alert_email
}

# Log group for Terraform operations
resource &quot;aws_cloudwatch_log_group&quot; &quot;terraform_ops&quot; {
  name              = &quot;/terraform/operations&quot;
  retention_in_days = 30
  
  tags = var.common_tags
}

# Dashboard for infrastructure monitoring
resource &quot;aws_cloudwatch_dashboard&quot; &quot;main&quot; {
  dashboard_name = &quot;${var.project_name}-infrastructure&quot;

  dashboard_body = jsonencode({
    widgets = [
      {
        type   = &quot;metric&quot;
        x      = 0
        y      = 0
        width  = 12
        height = 6

        properties = {
          metrics = [
            [&quot;AWS/EC2&quot;, &quot;CPUUtilization&quot;, &quot;InstanceId&quot;, module.compute.instance_ids[0]],
          ]
          view    = &quot;timeSeries&quot;
          stacked = false
          region  = var.aws_region
          title   = &quot;EC2 Instance CPU&quot;
          period  = 300
        }
      }
    ]
  })
}
EOF</code></pre>
      </div>
    </div>
<h3 id="terraform-cloud-monitoring" class="mobile-header">Terraform Cloud Monitoring</h3>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash"># Monitor Terraform Cloud workspaces
cat &gt; scripts/monitor-tf-cloud.sh &lt;&lt;&#039;EOF&#039;
#!/bin/bash

TF_CLOUD_TOKEN=&quot;${TF_CLOUD_TOKEN}&quot;
ORGANIZATION=&quot;${TF_ORGANIZATION}&quot;

# Function to get workspace status
get_workspace_status() {
    local workspace_name=&quot;$1&quot;
    
    curl -s \
        --header &quot;Authorization: Bearer $TF_CLOUD_TOKEN&quot; \
        --header &quot;Content-Type: application/vnd.api+json&quot; \
        &quot;https://app.terraform.io/api/v2/organizations/$ORGANIZATION/workspaces/$workspace_name/current-run&quot; \
        | jq -r &#039;.data.attributes.status&#039;
}

# Function to get workspace runs
get_recent_runs() {
    local workspace_id=&quot;$1&quot;
    
    curl -s \
        --header &quot;Authorization: Bearer $TF_CLOUD_TOKEN&quot; \
        --header &quot;Content-Type: application/vnd.api+json&quot; \
        &quot;https://app.terraform.io/api/v2/workspaces/$workspace_id/runs&quot; \
        | jq -r &#039;.data[].attributes | &quot;\(.status) - \(.created_at)&quot;&#039;
}

# Monitor critical workspaces
WORKSPACES=(&quot;production-web&quot; &quot;production-database&quot; &quot;staging-environment&quot;)

for workspace in &quot;${WORKSPACES[@]}&quot;; do
    status=$(get_workspace_status &quot;$workspace&quot;)
    echo &quot;Workspace: $workspace, Status: $status&quot;
    
    if [[ &quot;$status&quot; == &quot;errored&quot; ]]; then
        echo &quot;❌ ALERT: Workspace $workspace has errors!&quot;
        # Send alert to monitoring system
        curl -X POST \
            -H &quot;Content-Type: application/json&quot; \
            -d &quot;{\&quot;text\&quot;: \&quot;Terraform workspace $workspace has errors\&quot;}&quot; \
            &quot;$SLACK_WEBHOOK_URL&quot;
    elif [[ &quot;$status&quot; == &quot;planned_and_finished&quot; ]]; then
        echo &quot;✅ Workspace $workspace is healthy&quot;
    fi
done
EOF

chmod +x scripts/monitor-tf-cloud.sh</code></pre>
      </div>
    </div>
<h2 id="backup-and-restore" class="mobile-header">Backup and Restore</h2>
<h3 id="state-file-backup" class="mobile-header">State File Backup</h3>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash"># Comprehensive state backup script
cat &gt; scripts/backup-terraform-state.sh &lt;&lt;&#039;EOF&#039;
#!/bin/bash

BACKUP_DIR=&quot;/backup/terraform&quot;
DATE=$(date +%Y%m%d_%H%M%S)
ENVIRONMENTS=(&quot;development&quot; &quot;staging&quot; &quot;production&quot;)

mkdir -p &quot;$BACKUP_DIR&quot;

backup_state() {
    local environment=&quot;$1&quot;
    local backup_path=&quot;$BACKUP_DIR/$environment&quot;
    
    echo &quot;Backing up $environment state...&quot;
    mkdir -p &quot;$backup_path&quot;
    
    # Change to environment directory
    cd &quot;environments/$environment&quot; || return 1
    
    # Pull current state
    terraform state pull &gt; &quot;$backup_path/terraform-state-$DATE.json&quot;
    
    # Backup configuration files
    tar -czf &quot;$backup_path/terraform-config-$DATE.tar.gz&quot; \
        --exclude=&quot;.terraform&quot; \
        --exclude=&quot;*.tfplan&quot; \
        .
    
    # Backup workspace info
    terraform workspace show &gt; &quot;$backup_path/current-workspace-$DATE.txt&quot;
    terraform workspace list &gt; &quot;$backup_path/all-workspaces-$DATE.txt&quot;
    
    # Backup provider versions
    terraform version &gt; &quot;$backup_path/terraform-version-$DATE.txt&quot;
    
    cd - &gt; /dev/null
    
    echo &quot;✅ Backup completed for $environment&quot;
}

# Backup all environments
for env in &quot;${ENVIRONMENTS[@]}&quot;; do
    if [[ -d &quot;environments/$env&quot; ]]; then
        backup_state &quot;$env&quot;
    else
        echo &quot;⚠️  Environment directory not found: environments/$env&quot;
    fi
done

# Create consolidated backup
cd &quot;$BACKUP_DIR&quot;
tar -czf &quot;terraform-complete-backup-$DATE.tar.gz&quot; \
    --exclude=&quot;*.tar.gz&quot; \
    .

# Upload to cloud storage
if command -v aws &amp;&gt; /dev/null; then
    aws s3 cp &quot;terraform-complete-backup-$DATE.tar.gz&quot; \
        s3://terraform-backups/
fi

if command -v az &amp;&gt; /dev/null; then
    az storage blob upload \
        --file &quot;terraform-complete-backup-$DATE.tar.gz&quot; \
        --container-name terraform-backups \
        --name &quot;terraform-complete-backup-$DATE.tar.gz&quot;
fi

if command -v gsutil &amp;&gt; /dev/null; then
    gsutil cp &quot;terraform-complete-backup-$DATE.tar.gz&quot; \
        gs://terraform-backups/
fi

# Cleanup old backups (keep last 30 days)
find &quot;$BACKUP_DIR&quot; -name &quot;terraform-complete-backup-*.tar.gz&quot; \
    -mtime +30 -delete

echo &quot;🎉 All backups completed successfully&quot;
EOF

chmod +x scripts/backup-terraform-state.sh</code></pre>
      </div>
    </div>
<h3 id="disaster-recovery-procedures" class="mobile-header">Disaster Recovery Procedures</h3>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash"># Disaster recovery script
cat &gt; scripts/disaster-recovery.sh &lt;&lt;&#039;EOF&#039;
#!/bin/bash

BACKUP_FILE=&quot;$1&quot;
TARGET_ENVIRONMENT=&quot;$2&quot;

if [[ -z &quot;$BACKUP_FILE&quot; || -z &quot;$TARGET_ENVIRONMENT&quot; ]]; then
    echo &quot;Usage: $0 &lt;backup-file.tar.gz&gt; &lt;target-environment&gt;&quot;
    echo &quot;Example: $0 terraform-complete-backup-20240115_143000.tar.gz production&quot;
    exit 1
fi

# Verify backup file exists
if [[ ! -f &quot;$BACKUP_FILE&quot; ]]; then
    echo &quot;❌ Backup file not found: $BACKUP_FILE&quot;
    exit 1
fi

# Create recovery directory
RECOVERY_DIR=&quot;/tmp/terraform-recovery-$(date +%s)&quot;
mkdir -p &quot;$RECOVERY_DIR&quot;

# Extract backup
echo &quot;📦 Extracting backup...&quot;
tar -xzf &quot;$BACKUP_FILE&quot; -C &quot;$RECOVERY_DIR&quot;

# Navigate to target environment
cd &quot;environments/$TARGET_ENVIRONMENT&quot; || {
    echo &quot;❌ Target environment directory not found: environments/$TARGET_ENVIRONMENT&quot;
    exit 1
}

# Backup current state before recovery
echo &quot;💾 Backing up current state...&quot;
terraform state pull &gt; &quot;current-state-backup-$(date +%Y%m%d_%H%M%S).json&quot;

# Import recovered state
RECOVERED_STATE=&quot;$RECOVERY_DIR/$TARGET_ENVIRONMENT/terraform-state-*.json&quot;
if [[ -f $RECOVERED_STATE ]]; then
    echo &quot;🔄 Restoring state from backup...&quot;
    terraform state push &quot;$RECOVERED_STATE&quot;
else
    echo &quot;❌ No state file found in backup for environment: $TARGET_ENVIRONMENT&quot;
    exit 1
fi

# Verify state consistency
echo &quot;🔍 Verifying state consistency...&quot;
if terraform plan -detailed-exitcode; then
    echo &quot;✅ State restored successfully - no drift detected&quot;
elif [[ $? -eq 2 ]]; then
    echo &quot;⚠️  State restored but drift detected - manual review required&quot;
    terraform plan
else
    echo &quot;❌ State restoration failed - check error messages above&quot;
    exit 1
fi

# Cleanup
rm -rf &quot;$RECOVERY_DIR&quot;

echo &quot;🎉 Disaster recovery completed for environment: $TARGET_ENVIRONMENT&quot;
echo &quot;💡 Please review the plan output and apply changes if necessary&quot;
EOF

chmod +x scripts/disaster-recovery.sh</code></pre>
      </div>
    </div>
<h3 id="state-migration-and-refactoring" class="mobile-header">State Migration and Refactoring</h3>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash"># State migration script for refactoring
cat &gt; scripts/migrate-state.sh &lt;&lt;&#039;EOF&#039;
#!/bin/bash

# Function to safely move resources in state
move_resource() {
    local old_address=&quot;$1&quot;
    local new_address=&quot;$2&quot;
    
    echo &quot;Moving $old_address to $new_address&quot;
    
    # Check if source resource exists
    if terraform state show &quot;$old_address&quot; &amp;&gt;/dev/null; then
        terraform state mv &quot;$old_address&quot; &quot;$new_address&quot;
        echo &quot;✅ Successfully moved $old_address to $new_address&quot;
    else
        echo &quot;⚠️  Resource not found: $old_address&quot;
    fi
}

# Function to import existing resources
import_resource() {
    local resource_address=&quot;$1&quot;
    local resource_id=&quot;$2&quot;
    
    echo &quot;Importing $resource_id as $resource_address&quot;
    
    if terraform import &quot;$resource_address&quot; &quot;$resource_id&quot;; then
        echo &quot;✅ Successfully imported $resource_id as $resource_address&quot;
    else
        echo &quot;❌ Failed to import $resource_id&quot;
    fi
}

# Example migrations
echo &quot;🔄 Starting state migrations...&quot;

# Move resources to modules
move_resource &quot;aws_instance.web&quot; &quot;module.web_servers.aws_instance.main[0]&quot;
move_resource &quot;aws_security_group.web&quot; &quot;module.web_servers.aws_security_group.main&quot;

# Import existing resources
import_resource &quot;aws_s3_bucket.existing_bucket&quot; &quot;existing-bucket-name&quot;

# Remove resources that are no longer managed
terraform state rm aws_instance.deprecated

echo &quot;🎉 State migrations completed&quot;
echo &quot;💡 Run &#039;terraform plan&#039; to verify changes&quot;
EOF

chmod +x scripts/migrate-state.sh</code></pre>
      </div>
    </div>
<h2 id="troubleshooting" class="mobile-header">Troubleshooting</h2>
<h3 id="common-issues-and-solutions" class="mobile-header">Common Issues and Solutions</h3>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash"># Terraform troubleshooting script
cat &gt; scripts/troubleshoot-terraform.sh &lt;&lt;&#039;EOF&#039;
#!/bin/bash

echo &quot;🔧 Terraform Troubleshooting Tool&quot;
echo &quot;================================&quot;

# Check Terraform installation
check_installation() {
    echo &quot;📋 Checking Terraform installation...&quot;
    
    if command -v terraform &amp;&gt; /dev/null; then
        terraform version
        echo &quot;✅ Terraform is installed&quot;
    else
        echo &quot;❌ Terraform is not installed or not in PATH&quot;
        return 1
    fi
}

# Check configuration syntax
check_configuration() {
    echo &quot;📋 Checking configuration syntax...&quot;
    
    if terraform fmt -check -diff; then
        echo &quot;✅ Configuration is properly formatted&quot;
    else
        echo &quot;⚠️  Configuration formatting issues found&quot;
        terraform fmt -diff
    fi
    
    if terraform validate; then
        echo &quot;✅ Configuration is valid&quot;
    else
        echo &quot;❌ Configuration validation failed&quot;
        return 1
    fi
}

# Check provider authentication
check_providers() {
    echo &quot;📋 Checking provider authentication...&quot;
    
    # AWS
    if aws sts get-caller-identity &amp;&gt;/dev/null; then
        echo &quot;✅ AWS credentials are valid&quot;
    else
        echo &quot;⚠️  AWS credentials may be invalid or not configured&quot;
    fi
    
    # Azure
    if az account show &amp;&gt;/dev/null; then
        echo &quot;✅ Azure credentials are valid&quot;
    else
        echo &quot;⚠️  Azure credentials may be invalid or not configured&quot;
    fi
    
    # GCP
    if gcloud auth list --filter=status:ACTIVE --format=&quot;value(account)&quot; &amp;&gt;/dev/null; then
        echo &quot;✅ GCP credentials are valid&quot;
    else
        echo &quot;⚠️  GCP credentials may be invalid or not configured&quot;
    fi
}

# Check state file
check_state() {
    echo &quot;📋 Checking state file...&quot;
    
    if terraform state list &amp;&gt;/dev/null; then
        resource_count=$(terraform state list | wc -l)
        echo &quot;✅ State file is accessible with $resource_count resources&quot;
    else
        echo &quot;❌ Cannot access state file&quot;
        return 1
    fi
}

# Check for common issues
check_common_issues() {
    echo &quot;📋 Checking for common issues...&quot;
    
    # Check for lock file
    if [[ -f &quot;.terraform.lock.hcl&quot; ]]; then
        echo &quot;✅ Lock file exists&quot;
    else
        echo &quot;⚠️  Lock file missing - run &#039;terraform init&#039;&quot;
    fi
    
    # Check for local state file in production
    if [[ -f &quot;terraform.tfstate&quot; ]] &amp;&amp; [[ $(terraform workspace show) == &quot;production&quot; ]]; then
        echo &quot;⚠️  Local state file detected in production workspace&quot;
        echo &quot;    Consider using remote state for production&quot;
    fi
    
    # Check for hardcoded secrets
    if grep -r &quot;password\s*=\s*\&quot;&quot; . --include=&quot;*.tf&quot; --include=&quot;*.tfvars&quot; 2&gt;/dev/null; then
        echo &quot;⚠️  Potential hardcoded passwords found&quot;
    fi
    
    # Check for large state file
    if [[ -f &quot;terraform.tfstate&quot; ]]; then
        state_size=$(stat -f%z &quot;terraform.tfstate&quot; 2&gt;/dev/null || stat -c%s &quot;terraform.tfstate&quot; 2&gt;/dev/null)
        if [[ $state_size -gt 10485760 ]]; then  # 10MB
            echo &quot;⚠️  Large state file detected ($(($state_size / 1024 / 1024))MB)&quot;
            echo &quot;    Consider splitting into smaller configurations&quot;
        fi
    fi
}

# Debug mode information
debug_info() {
    echo &quot;📋 Debug information...&quot;
    
    echo &quot;Working directory: $(pwd)&quot;
    echo &quot;Terraform workspace: $(terraform workspace show)&quot;
    echo &quot;Environment variables:&quot;
    env | grep -E &quot;^(TF_|AWS_|ARM_|GOOGLE_)&quot; | sed &#039;s/=.*/=***/&#039; | sort
}

# Run all checks
run_all_checks() {
    check_installation || return 1
    check_configuration || return 1
    check_providers
    check_state || return 1
    check_common_issues
    debug_info
}

# Main execution
case &quot;${1:-all}&quot; in
    &quot;installation&quot;)
        check_installation
        ;;
    &quot;config&quot;)
        check_configuration
        ;;
    &quot;providers&quot;)
        check_providers
        ;;
    &quot;state&quot;)
        check_state
        ;;
    &quot;common&quot;)
        check_common_issues
        ;;
    &quot;debug&quot;)
        debug_info
        ;;
    &quot;all&quot;)
        run_all_checks
        ;;
    *)
        echo &quot;Usage: $0 [installation|config|providers|state|common|debug|all]&quot;
        exit 1
        ;;
esac
EOF

chmod +x scripts/troubleshoot-terraform.sh</code></pre>
      </div>
    </div>
<h3 id="advanced-debugging" class="mobile-header">Advanced Debugging</h3>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash"># Advanced debugging techniques
cat &gt; scripts/debug-terraform.sh &lt;&lt;&#039;EOF&#039;
#!/bin/bash

# Enable debug logging
export TF_LOG=DEBUG
export TF_LOG_PATH=&quot;terraform-debug-$(date +%Y%m%d_%H%M%S).log&quot;

# Create debug session
debug_session() {
    local operation=&quot;$1&quot;
    shift
    
    echo &quot;🐛 Starting debug session for: $operation&quot;
    echo &quot;Debug log: $TF_LOG_PATH&quot;
    
    # Capture detailed timing information
    time terraform &quot;$operation&quot; &quot;$@&quot; 2&gt;&amp;1 | tee -a &quot;$TF_LOG_PATH&quot;
    
    local exit_code=${PIPESTATUS[0]}
    
    if [[ $exit_code -ne 0 ]]; then
        echo &quot;❌ Operation failed with exit code: $exit_code&quot;
        echo &quot;📄 Last 50 lines of debug log:&quot;
        tail -50 &quot;$TF_LOG_PATH&quot;
    else
        echo &quot;✅ Operation completed successfully&quot;
    fi
    
    return $exit_code
}

# Analyze state file for issues
analyze_state() {
    echo &quot;🔍 Analyzing state file...&quot;
    
    # Check for orphaned resources
    echo &quot;Checking for potential orphaned resources...&quot;
    terraform state list | while read resource; do
        if ! terraform plan -target=&quot;$resource&quot; -detailed-exitcode &gt;/dev/null 2&gt;&amp;1; then
            echo &quot;⚠️  Potential issue with resource: $resource&quot;
        fi
    done
    
    # Check for large resources in state
    echo &quot;Checking for large resources...&quot;
    terraform state pull | jq -r &#039;.resources[] | select(.instances[0].attributes | length &gt; 50) | .address&#039; 2&gt;/dev/null | head -10
}

# Provider debug information
debug_providers() {
    echo &quot;🔍 Debugging provider issues...&quot;
    
    # Show provider configuration
    terraform providers
    
    # Check provider cache
    if [[ -d &quot;$HOME/.terraform.d/plugin-cache&quot; ]]; then
        echo &quot;Provider cache contents:&quot;
        ls -la &quot;$HOME/.terraform.d/plugin-cache&quot;
    fi
    
    # Check for provider version conflicts
    terraform version -json | jq &#039;.provider_selections&#039; 2&gt;/dev/null
}

# Network and API debugging
debug_network() {
    echo &quot;🌐 Debugging network connectivity...&quot;
    
    # Test connectivity to common endpoints
    local endpoints=(
        &quot;https://releases.hashicorp.com&quot;
        &quot;https://registry.terraform.io&quot;
        &quot;https://api.github.com&quot;
        &quot;https://aws.amazon.com&quot;
        &quot;https://management.azure.com&quot;
        &quot;https://www.googleapis.com&quot;
    )
    
    for endpoint in &quot;${endpoints[@]}&quot;; do
        if curl -s --connect-timeout 5 &quot;$endpoint&quot; &gt;/dev/null; then
            echo &quot;✅ $endpoint - OK&quot;
        else
            echo &quot;❌ $endpoint - FAILED&quot;
        fi
    done
}

# Performance analysis
analyze_performance() {
    echo &quot;📊 Analyzing Terraform performance...&quot;
    
    # Generate and analyze dependency graph
    terraform graph &gt; dependency-graph.dot
    
    # Count resources by type
    echo &quot;Resource distribution:&quot;
    terraform state list | cut -d. -f1 | sort | uniq -c | sort -nr | head -10
    
    # Estimate plan time based on resources
    resource_count=$(terraform state list | wc -l)
    estimated_time=$((resource_count * 2))  # Rough estimate: 2 seconds per resource
    echo &quot;Estimated plan time: ${estimated_time} seconds for $resource_count resources&quot;
}

# Usage
case &quot;${1:-help}&quot; in
    &quot;session&quot;)
        shift
        debug_session &quot;$@&quot;
        ;;
    &quot;state&quot;)
        analyze_state
        ;;
    &quot;providers&quot;)
        debug_providers
        ;;
    &quot;network&quot;)
        debug_network
        ;;
    &quot;performance&quot;)
        analyze_performance
        ;;
    &quot;all&quot;)
        debug_providers
        debug_network
        analyze_state
        analyze_performance
        ;;
    &quot;help&quot;|*)
        echo &quot;Usage: $0 [session|state|providers|network|performance|all]&quot;
        echo &quot;&quot;
        echo &quot;  session &lt;operation&gt; [args]  - Debug specific Terraform operation&quot;
        echo &quot;  state                       - Analyze state file for issues&quot;
        echo &quot;  providers                   - Debug provider configuration&quot;
        echo &quot;  network                     - Test network connectivity&quot;
        echo &quot;  performance                 - Analyze performance characteristics&quot;
        echo &quot;  all                         - Run all debug checks&quot;
        ;;
esac
EOF

chmod +x scripts/debug-terraform.sh</code></pre>
      </div>
    </div>
<h2 id="maintenance" class="mobile-header">Maintenance</h2>
<h3 id="update-procedures" class="mobile-header">Update Procedures</h3>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash"># Terraform update script
cat &gt; scripts/update-terraform.sh &lt;&lt;&#039;EOF&#039;
#!/bin/bash

CURRENT_VERSION=$(terraform version -json | jq -r &#039;.terraform_version&#039;)
echo &quot;Current Terraform version: $CURRENT_VERSION&quot;

# Check for latest version
check_latest_version() {
    local latest_version
    latest_version=$(curl -s https://api.github.com/repos/hashicorp/terraform/releases/latest | jq -r &#039;.tag_name&#039; | sed &#039;s/v//&#039;)
    echo &quot;Latest Terraform version: $latest_version&quot;
    
    if [[ &quot;$CURRENT_VERSION&quot; != &quot;$latest_version&quot; ]]; then
        echo &quot;⚠️  Update available: $CURRENT_VERSION → $latest_version&quot;
        return 1
    else
        echo &quot;✅ Terraform is up to date&quot;
        return 0
    fi
}

# Update using package manager
update_terraform() {
    echo &quot;🔄 Updating Terraform...&quot;
    
    if command -v apt &amp;&gt;/dev/null; then
        sudo apt update &amp;&amp; sudo apt upgrade terraform
    elif command -v yum &amp;&gt;/dev/null; then
        sudo yum update terraform
    elif command -v dnf &amp;&gt;/dev/null; then
        sudo dnf update terraform
    elif command -v pacman &amp;&gt;/dev/null; then
        sudo pacman -Syu terraform
    elif command -v zypper &amp;&gt;/dev/null; then
        sudo zypper update terraform
    elif command -v brew &amp;&gt;/dev/null; then
        brew upgrade terraform
    else
        echo &quot;❌ No supported package manager found&quot;
        echo &quot;💡 Please update manually from: https://releases.hashicorp.com/terraform/&quot;
        return 1
    fi
}

# Update providers
update_providers() {
    echo &quot;🔄 Updating providers...&quot;
    terraform init -upgrade
}

# Verify update
verify_update() {
    echo &quot;🔍 Verifying update...&quot;
    
    terraform version
    
    # Test basic functionality
    if terraform validate; then
        echo &quot;✅ Update verification successful&quot;
    else
        echo &quot;❌ Update verification failed&quot;
        return 1
    fi
}

# Main update process
main() {
    if check_latest_version; then
        exit 0
    fi
    
    echo &quot;Proceed with update? (y/N)&quot;
    read -r response
    
    if [[ &quot;$response&quot; =~ ^[Yy]$ ]]; then
        update_terraform || exit 1
        update_providers || exit 1
        verify_update || exit 1
        echo &quot;🎉 Terraform update completed successfully&quot;
    else
        echo &quot;Update cancelled&quot;
    fi
}

main &quot;$@&quot;
EOF

chmod +x scripts/update-terraform.sh</code></pre>
      </div>
    </div>
<h3 id="maintenance-tasks" class="mobile-header">Maintenance Tasks</h3>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash"># Comprehensive maintenance script
cat &gt; scripts/terraform-maintenance.sh &lt;&lt;&#039;EOF&#039;
#!/bin/bash

MAINTENANCE_LOG=&quot;/var/log/terraform-maintenance-$(date +%Y%m%d_%H%M%S).log&quot;

log() {
    echo &quot;$(date &#039;+%Y-%m-%d %H:%M:%S&#039;) - $1&quot; | tee -a &quot;$MAINTENANCE_LOG&quot;
}

# Cleanup old plan files
cleanup_plans() {
    log &quot;🧹 Cleaning up old plan files...&quot;
    find . -name &quot;*.tfplan&quot; -mtime +7 -delete
    find . -name &quot;*.tfplan.json&quot; -mtime +7 -delete
    log &quot;✅ Plan file cleanup completed&quot;
}

# Cleanup provider cache
cleanup_provider_cache() {
    log &quot;🧹 Cleaning up provider cache...&quot;
    if [[ -d &quot;$HOME/.terraform.d/plugin-cache&quot; ]]; then
        # Remove providers older than 30 days
        find &quot;$HOME/.terraform.d/plugin-cache&quot; -type f -mtime +30 -delete
        
        # Remove empty directories
        find &quot;$HOME/.terraform.d/plugin-cache&quot; -type d -empty -delete
        
        cache_size=$(du -sh &quot;$HOME/.terraform.d/plugin-cache&quot; 2&gt;/dev/null | cut -f1)
        log &quot;✅ Provider cache cleanup completed - current size: $cache_size&quot;
    fi
}

# Validate all configurations
validate_configurations() {
    log &quot;🔍 Validating all configurations...&quot;
    
    local validation_failed=false
    
    # Find all directories with Terraform files
    find . -name &quot;*.tf&quot; -exec dirname {} \; | sort -u | while read -r dir; do
        log &quot;Validating: $dir&quot;
        cd &quot;$dir&quot; || continue
        
        if terraform validate; then
            log &quot;✅ $dir validation passed&quot;
        else
            log &quot;❌ $dir validation failed&quot;
            validation_failed=true
        fi
        
        cd - &gt; /dev/null
    done
    
    if [[ &quot;$validation_failed&quot; == &quot;true&quot; ]]; then
        log &quot;⚠️  Some validations failed - please review&quot;
    else
        log &quot;✅ All validations passed&quot;
    fi
}

# Check for deprecated features
check_deprecated() {
    log &quot;🔍 Checking for deprecated features...&quot;
    
    # Check for deprecated syntax
    local deprecated_patterns=(
        &quot;provider\s+\&quot;[^\&quot;]+\&quot;\s+{&quot; # Old provider syntax
        &quot;terraform\s+{[^}]*version\s*=&quot; # Old terraform version constraints
        &quot;ignore_changes\s*=&quot; # Old ignore_changes syntax
    )
    
    for pattern in &quot;${deprecated_patterns[@]}&quot;; do
        if grep -r &quot;$pattern&quot; . --include=&quot;*.tf&quot; 2&gt;/dev/null; then
            log &quot;⚠️  Deprecated pattern found: $pattern&quot;
        fi
    done
    
    log &quot;✅ Deprecation check completed&quot;
}

# Security audit
security_audit() {
    log &quot;🔒 Performing security audit...&quot;
    
    # Check for potential security issues
    local security_issues=()
    
    # Check for hardcoded secrets
    if grep -r -i &quot;password\s*=\s*\&quot;[^$]&quot; . --include=&quot;*.tf&quot; --include=&quot;*.tfvars&quot; 2&gt;/dev/null; then
        security_issues+=(&quot;Potential hardcoded passwords&quot;)
    fi
    
    # Check for public access
    if grep -r &quot;0.0.0.0/0&quot; . --include=&quot;*.tf&quot; 2&gt;/dev/null; then
        security_issues+=(&quot;Public access (0.0.0.0/0) found&quot;)
    fi
    
    # Check for unencrypted resources
    if grep -r &quot;encrypt.*=.*false&quot; . --include=&quot;*.tf&quot; 2&gt;/dev/null; then
        security_issues+=(&quot;Unencrypted resources found&quot;)
    fi
    
    if [[ ${#security_issues[@]} -gt 0 ]]; then
        log &quot;⚠️  Security issues found:&quot;
        for issue in &quot;${security_issues[@]}&quot;; do
            log &quot;  - $issue&quot;
        done
    else
        log &quot;✅ No obvious security issues found&quot;
    fi
}

# State health check
state_health_check() {
    log &quot;🏥 Performing state health check...&quot;
    
    # Check state file size
    if [[ -f &quot;terraform.tfstate&quot; ]]; then
        state_size=$(stat -f%z &quot;terraform.tfstate&quot; 2&gt;/dev/null || stat -c%s &quot;terraform.tfstate&quot; 2&gt;/dev/null)
        state_size_mb=$((state_size / 1024 / 1024))
        
        if [[ $state_size_mb -gt 50 ]]; then
            log &quot;⚠️  Large state file detected: ${state_size_mb}MB&quot;
        else
            log &quot;✅ State file size OK: ${state_size_mb}MB&quot;
        fi
    fi
    
    # Check for drift
    if terraform plan -detailed-exitcode &gt; /dev/null 2&gt;&amp;1; then
        log &quot;✅ No infrastructure drift detected&quot;
    else
        exit_code=$?
        if [[ $exit_code -eq 2 ]]; then
            log &quot;⚠️  Infrastructure drift detected&quot;
        else
            log &quot;❌ Error checking for drift&quot;
        fi
    fi
}

# Generate maintenance report
generate_report() {
    log &quot;📊 Generating maintenance report...&quot;
    
    local report_file=&quot;/tmp/terraform-maintenance-report-$(date +%Y%m%d_%H%M%S).md&quot;
    
    cat &gt; &quot;$report_file&quot; &lt;&lt;EOF
# Terraform Maintenance Report

**Date:** $(date)
**Duration:** $((SECONDS / 60)) minutes

## Summary

- Configuration validation: $(grep &quot;validation&quot; &quot;$MAINTENANCE_LOG&quot; | grep -c &quot;passed&quot;)
- Security audit: Completed
- State health check: Completed
- Cleanup operations: Completed

## Recommendations

$(grep &quot;⚠️&quot; &quot;$MAINTENANCE_LOG&quot; | sed &#039;s/.*⚠️  /- /&#039;)

## Full Log

\`\`\`
$(cat &quot;$MAINTENANCE_LOG&quot;)
\`\`\`
EOF
    
    log &quot;📄 Maintenance report generated: $report_file&quot;
    
    # Email report if configured
    if [[ -n &quot;$MAINTENANCE_EMAIL&quot; ]]; then
        mail -s &quot;Terraform Maintenance Report - $(date)&quot; &quot;$MAINTENANCE_EMAIL&quot; &lt; &quot;$report_file&quot;
        log &quot;📧 Report emailed to: $MAINTENANCE_EMAIL&quot;
    fi
}

# Main maintenance routine
main() {
    log &quot;🚀 Starting Terraform maintenance...&quot;
    
    cleanup_plans
    cleanup_provider_cache
    validate_configurations
    check_deprecated
    security_audit
    state_health_check
    generate_report
    
    log &quot;🎉 Terraform maintenance completed&quot;
    log &quot;📊 Total runtime: $((SECONDS / 60)) minutes&quot;
}

# Run maintenance
main &quot;$@&quot;
EOF

chmod +x scripts/terraform-maintenance.sh

# Schedule maintenance with cron
cat &gt; scripts/schedule-maintenance.sh &lt;&lt;&#039;EOF&#039;
#!/bin/bash

# Add to crontab for weekly maintenance
(crontab -l 2&gt;/dev/null; echo &quot;0 2 * * 0 /path/to/terraform-maintenance.sh&quot;) | crontab -

echo &quot;✅ Weekly maintenance scheduled for Sundays at 2 AM&quot;
EOF

chmod +x scripts/schedule-maintenance.sh</code></pre>
      </div>
    </div>
<h2 id="integration-examples" class="mobile-header">Integration Examples</h2>
<h3 id="cicd-pipeline-integration" class="mobile-header">CI/CD Pipeline Integration</h3>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash"># GitHub Actions workflow
mkdir -p .github/workflows
cat &gt; .github/workflows/terraform.yml &lt;&lt;EOF
name: Terraform Multi-Cloud Deployment

on:
  push:
    branches: [ main, develop ]
  pull_request:
    branches: [ main ]

env:
  TF_VERSION: 1.6.4

jobs:
  terraform:
    runs-on: ubuntu-latest
    strategy:
      matrix:
        environment: [development, staging, production]
        
    steps:
    - name: Checkout code
      uses: actions/checkout@v4
    
    - name: Setup Terraform
      uses: hashicorp/setup-terraform@v3
      with:
        terraform_version: \${{ env.TF_VERSION }}
        cli_config_credentials_token: \${{ secrets.TF_CLOUD_TOKEN }}
    
    - name: Configure AWS credentials
      uses: aws-actions/configure-aws-credentials@v4
      with:
        aws-access-key-id: \${{ secrets.AWS_ACCESS_KEY_ID }}
        aws-secret-access-key: \${{ secrets.AWS_SECRET_ACCESS_KEY }}
        aws-region: us-west-2
    
    - name: Terraform Format Check
      run: terraform fmt -check -recursive
    
    - name: Terraform Initialize
      run: terraform init
      working-directory: environments/\${{ matrix.environment }}
    
    - name: Terraform Validate
      run: terraform validate
      working-directory: environments/\${{ matrix.environment }}
    
    - name: Terraform Plan
      run: terraform plan -var-file=&quot;\${{ matrix.environment }}.tfvars&quot;
      working-directory: environments/\${{ matrix.environment }}
    
    - name: Security Scan with Checkov
      uses: bridgecrewio/checkov-action@master
      with:
        directory: .
        framework: terraform
        output_format: sarif
        output_file_path: checkov.sarif
    
    - name: Upload Checkov results
      uses: github/codeql-action/upload-sarif@v2
      if: always()
      with:
        sarif_file: checkov.sarif
    
    - name: Terraform Apply (Production)
      if: github.ref == &#039;refs/heads/main&#039; &amp;&amp; matrix.environment == &#039;production&#039;
      run: terraform apply -auto-approve -var-file=&quot;production.tfvars&quot;
      working-directory: environments/production
EOF</code></pre>
      </div>
    </div>
<h3 id="gitlab-ci-integration" class="mobile-header">GitLab CI Integration</h3>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash">cat &gt; .gitlab-ci.yml &lt;&lt;EOF
stages:
  - validate
  - plan
  - apply
  - destroy

variables:
  TF_ROOT: \${CI_PROJECT_DIR}
  TF_VERSION: &quot;1.6.4&quot;
  TF_IN_AUTOMATION: &quot;true&quot;

cache:
  key: &quot;\${TF_ROOT}&quot;
  paths:
    - \${TF_ROOT}/.terraform

before_script:
  - cd \${TF_ROOT}
  - terraform version
  - terraform init

validate:
  stage: validate
  script:
    - terraform fmt -check -recursive
    - terraform validate
    - |
      for dir in environments/*/; do
        cd &quot;\$dir&quot;
        terraform validate
        cd -
      done
  rules:
    - if: &#039;\$CI_MERGE_REQUEST_IID&#039;
    - if: &#039;\$CI_COMMIT_BRANCH == \$CI_DEFAULT_BRANCH&#039;

plan:production:
  stage: plan
  script:
    - cd environments/production
    - terraform plan -var-file=&quot;production.tfvars&quot; -out=&quot;production.tfplan&quot;
  artifacts:
    paths:
      - environments/production/production.tfplan
    expire_in: 1 week
  rules:
    - if: &#039;\$CI_COMMIT_BRANCH == \$CI_DEFAULT_BRANCH&#039;

apply:production:
  stage: apply
  script:
    - cd environments/production
    - terraform apply -input=false &quot;production.tfplan&quot;
  dependencies:
    - plan:production
  rules:
    - if: &#039;\$CI_COMMIT_BRANCH == \$CI_DEFAULT_BRANCH&#039;
      when: manual
EOF</code></pre>
      </div>
    </div>
<h3 id="jenkins-pipeline" class="mobile-header">Jenkins Pipeline</h3>
<div class="mobile-code-block" data-language="groovy">
      <div class="mobile-code-header">
        <span class="mobile-code-language">groovy</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-groovy">// Jenkinsfile
pipeline {
    agent any
    
    environment {
        TF_VERSION = &#039;1.6.4&#039;
        AWS_DEFAULT_REGION = &#039;us-west-2&#039;
    }
    
    stages {
        stage(&#039;Checkout&#039;) {
            steps {
                checkout scm
            }
        }
        
        stage(&#039;Setup&#039;) {
            steps {
                sh &#039;&#039;&#039;
                    # Install Terraform if not present
                    if ! command -v terraform &amp;&gt; /dev/null; then
                        wget https://releases.hashicorp.com/terraform/${TF_VERSION}/terraform_${TF_VERSION}_linux_amd64.zip
                        unzip terraform_${TF_VERSION}_linux_amd64.zip
                        chmod +x terraform
                        sudo mv terraform /usr/local/bin/
                    fi
                    
                    terraform version
                &#039;&#039;&#039;
            }
        }
        
        stage(&#039;Validate&#039;) {
            parallel {
                stage(&#039;Format Check&#039;) {
                    steps {
                        sh &#039;terraform fmt -check -recursive&#039;
                    }
                }
                stage(&#039;Configuration Validation&#039;) {
                    steps {
                        sh &#039;&#039;&#039;
                            for dir in environments/*/; do
                                cd &quot;$dir&quot;
                                terraform init
                                terraform validate
                                cd -
                            done
                        &#039;&#039;&#039;
                    }
                }
                stage(&#039;Security Scan&#039;) {
                    steps {
                        sh &#039;&#039;&#039;
                            # Install and run Checkov
                            pip3 install checkov
                            checkov --framework terraform --directory .
                        &#039;&#039;&#039;
                    }
                }
            }
        }
        
        stage(&#039;Plan&#039;) {
            steps {
                script {
                    def environments = [&#039;development&#039;, &#039;staging&#039;, &#039;production&#039;]
                    def planResults = [:]
                    
                    environments.each { env -&gt;
                        planResults[env] = {
                            dir(&quot;environments/${env}&quot;) {
                                sh &quot;&quot;&quot;
                                    terraform init
                                    terraform plan -var-file=&quot;${env}.tfvars&quot; -out=&quot;${env}.tfplan&quot;
                                &quot;&quot;&quot;
                            }
                        }
                    }
                    
                    parallel planResults
                }
            }
        }
        
        stage(&#039;Apply&#039;) {
            when {
                branch &#039;main&#039;
            }
            steps {
                script {
                    input message: &#039;Apply Terraform changes?&#039;, ok: &#039;Apply&#039;
                    
                    dir(&#039;environments/production&#039;) {
                        sh &#039;terraform apply -input=false production.tfplan&#039;
                    }
                }
            }
        }
    }
    
    post {
        always {
            archiveArtifacts artifacts: &#039;environments/**/*.tfplan&#039;, fingerprint: true
            publishHTML([
                allowMissing: false,
                alwaysLinkToLastBuild: true,
                keepAll: true,
                reportDir: &#039;checkov-report&#039;,
                reportFiles: &#039;index.html&#039;,
                reportName: &#039;Checkov Security Report&#039;
            ])
        }
        failure {
            emailext (
                subject: &quot;Terraform Pipeline Failed: ${env.JOB_NAME} - ${env.BUILD_NUMBER}&quot;,
                body: &quot;The Terraform pipeline has failed. Please check the build logs for details.&quot;,
                to: &quot;${env.CHANGE_AUTHOR_EMAIL}&quot;
            )
        }
    }
}</code></pre>
      </div>
    </div>
<h2 id="additional-resources" class="mobile-header">Additional Resources</h2>
<li class="mobile-list-item"><a href="https://developer.hashicorp.com/terraform/docs" target="_blank" rel="noopener" class="mobile-link">Official Terraform Documentation</a></li>
<li class="mobile-list-item"><a href="https://registry.terraform.io/" target="_blank" rel="noopener" class="mobile-link">Terraform Registry</a></li>
<li class="mobile-list-item"><a href="https://developer.hashicorp.com/terraform/cloud-docs/recommended-practices" target="_blank" rel="noopener" class="mobile-link">Terraform Best Practices</a></li>
<li class="mobile-list-item"><a href="https://developer.hashicorp.com/terraform/tutorials/aws-get-started" target="_blank" rel="noopener" class="mobile-link">Multi-Cloud Architecture Guide</a></li>
<li class="mobile-list-item"><a href="https://developer.hashicorp.com/terraform/language/values/sensitive" target="_blank" rel="noopener" class="mobile-link">Security Best Practices</a></li>
<li class="mobile-list-item"><a href="https://registry.terraform.io/providers/hashicorp/aws/latest/docs" target="_blank" rel="noopener" class="mobile-link">AWS Provider Documentation</a></li>
<li class="mobile-list-item"><a href="https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs" target="_blank" rel="noopener" class="mobile-link">Azure Provider Documentation</a></li>
<li class="mobile-list-item"><a href="https://registry.terraform.io/providers/hashicorp/google/latest/docs" target="_blank" rel="noopener" class="mobile-link">GCP Provider Documentation</a></li>
<li class="mobile-list-item"><a href="https://discuss.hashicorp.com/c/terraform-core" target="_blank" rel="noopener" class="mobile-link">Terraform Community Forum</a></li>
<li class="mobile-list-item"><a href="https://learn.hashicorp.com/terraform" target="_blank" rel="noopener" class="mobile-link">HashiCorp Learn Terraform</a></li>
<p class="mobile-paragraph">---</p>
<p class="mobile-paragraph"><strong>Note:</strong> This guide is part of the <a href="https://howtomgr.github.io" target="_blank" rel="noopener" class="mobile-link">HowToMgr</a> collection. Always refer to official documentation for the most up-to-date information.</p></div></article><section class="jsx-8a7f0cdcf94f52ce related-section"><h2 class="jsx-8a7f0cdcf94f52ce section-title">Related <!-- -->Infrastructure<!-- --> Guides</h2><div class="jsx-8a7f0cdcf94f52ce mobile-grid"><a class="mobile-card" href="/infrastructure/adguard-home/"><div class="jsx-8a7f0cdcf94f52ce mobile-card-header"><h3 class="jsx-8a7f0cdcf94f52ce mobile-card-title">Adguard Home</h3><p class="jsx-8a7f0cdcf94f52ce mobile-card-description">Repo for adguard-home</p></div><div class="jsx-8a7f0cdcf94f52ce mobile-card-meta"><span class="jsx-8a7f0cdcf94f52ce mobile-badge mobile-badge-info">1 min</span></div></a><a class="mobile-card" href="/infrastructure/adminer/"><div class="jsx-8a7f0cdcf94f52ce mobile-card-header"><h3 class="jsx-8a7f0cdcf94f52ce mobile-card-title">Adminer</h3><p class="jsx-8a7f0cdcf94f52ce mobile-card-description">Repo for adminer</p></div><div class="jsx-8a7f0cdcf94f52ce mobile-card-meta"><span class="jsx-8a7f0cdcf94f52ce mobile-badge mobile-badge-info">1 min</span></div></a><a class="mobile-card" href="/infrastructure/ansible/"><div class="jsx-8a7f0cdcf94f52ce mobile-card-header"><h3 class="jsx-8a7f0cdcf94f52ce mobile-card-title">Ansible</h3><p class="jsx-8a7f0cdcf94f52ce mobile-card-description">Repo for ansible</p></div><div class="jsx-8a7f0cdcf94f52ce mobile-card-meta"><span class="jsx-8a7f0cdcf94f52ce mobile-badge mobile-badge-info">31 min</span></div></a></div></section><nav class="jsx-8a7f0cdcf94f52ce guide-navigation"><a class="btn btn-secondary" href="/infrastructure/">← All <!-- -->Infrastructure</a><a class="btn btn-secondary" href="/">All Categories</a></nav></div></main><footer class="jsx-f92e766e9414ef16 mobile-footer"><div class="jsx-f92e766e9414ef16 container"><div class="jsx-f92e766e9414ef16 footer-content"><div class="jsx-f92e766e9414ef16 footer-links"><a href="/">Home</a><a href="https://github.com/howtomgr" target="_blank" rel="noopener" class="jsx-f92e766e9414ef16">GitHub</a><a href="https://github.com/howtomgr/howtomgr.github.io" target="_blank" rel="noopener" class="jsx-f92e766e9414ef16">Source</a></div><div class="jsx-f92e766e9414ef16 footer-separator"></div><p class="jsx-f92e766e9414ef16 footer-text">© <!-- -->2025<!-- --> HowToMgr Organization. Open source installation guides.</p><p class="jsx-f92e766e9414ef16 footer-tech">Built with ❤️ using Next.js + GitHub Pages</p><p class="jsx-f92e766e9414ef16 footer-disclaimer"><small class="jsx-f92e766e9414ef16">All guides are provided as-is. Please review and test before production use.</small></p></div></div></footer></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"guide":{"name":"terraform","displayName":"Terraform","slug":"terraform","description":"Repo for terraform","category":"infrastructure","language":null,"stars":0,"forks":0,"topics":[],"githubUrl":"https://github.com/howtomgr/terraform","updatedAt":"2025-09-14T03:45:58Z","createdAt":"2025-09-08T03:16:51Z","readmeRaw":"# Terraform Installation Guide\n\nTerraform is a free and open-source Infrastructure as Code (IaC) tool developed by HashiCorp for building, changing, and versioning infrastructure safely and efficiently across multiple cloud providers. Originally created by Mitchell Hashimoto in 2014, Terraform uses declarative configuration files to manage infrastructure resources. It serves as a FOSS alternative to commercial IaC solutions like AWS CloudFormation, Azure Resource Manager, or proprietary enterprise tools, offering enterprise-grade features including multi-cloud management, state management, provider ecosystem, and team collaboration without licensing costs.\n\n## Prerequisites\n\n- **Hardware Requirements**:\n  - CPU: 1 core minimum (2+ cores recommended for large infrastructures)\n  - RAM: 2GB minimum (4GB+ recommended for production)\n  - Storage: 5GB minimum (more for state files and provider binaries)\n  - Network: Stable connectivity for cloud provider APIs\n- **Operating System**: \n  - Linux: Any modern distribution with kernel 3.2+\n  - macOS: 10.13+ (High Sierra or newer)\n  - Windows: Windows Server 2016+ or Windows 10\n  - FreeBSD: 12.0+\n- **Network Requirements**:\n  - HTTPS access to cloud provider APIs (port 443)\n  - Access to Terraform Registry (registry.terraform.io)\n  - Access to HashiCorp releases (releases.hashicorp.com)\n- **Dependencies**:\n  - Cloud provider CLI tools (aws-cli, azure-cli, gcloud)\n  - Git for configuration management\n  - Text editor or IDE\n  - Root or administrative access for installation\n- **System Access**: root or sudo privileges required for installation\n\n## Installation\n\n### RHEL/CentOS/Rocky Linux/AlmaLinux\n\n```bash\n# Add HashiCorp repository\nsudo yum install -y yum-utils\nsudo yum-config-manager --add-repo https://rpm.releases.hashicorp.com/RHEL/hashicorp.repo\n\n# Install Terraform\nsudo yum install -y terraform\n\n# Verify installation\nterraform version\n\n# Alternative: DNF for newer systems\nsudo dnf install -y yum-utils\nsudo dnf config-manager --add-repo https://rpm.releases.hashicorp.com/RHEL/hashicorp.repo\nsudo dnf install -y terraform\n```\n\n### Debian/Ubuntu\n\n```bash\n# Add HashiCorp GPG key\nwget -O- https://apt.releases.hashicorp.com/gpg | sudo gpg --dearmor -o /usr/share/keyrings/hashicorp-archive-keyring.gpg\n\n# Add HashiCorp repository\necho \"deb [signed-by=/usr/share/keyrings/hashicorp-archive-keyring.gpg] https://apt.releases.hashicorp.com $(lsb_release -cs) main\" | sudo tee /etc/apt/sources.list.d/hashicorp.list\n\n# Update and install Terraform\nsudo apt update\nsudo apt install -y terraform\n\n# Verify installation\nterraform version\n```\n\n### Arch Linux\n\n```bash\n# Install from community repository\nsudo pacman -S terraform\n\n# Alternative: Install from AUR\nyay -S terraform\n\n# Install additional tools\nsudo pacman -S terraform-docs tflint\n\n# Verify installation\nterraform version\n```\n\n### Alpine Linux\n\n```bash\n# Install from Alpine repositories\nsudo apk update\nsudo apk add terraform\n\n# Install additional tools\nsudo apk add bash git curl\n\n# Verify installation\nterraform version\n```\n\n### openSUSE/SLES\n\n```bash\n# openSUSE Leap/Tumbleweed\nsudo zypper install -y terraform\n\n# SLES 15\nsudo SUSEConnect -p sle-module-development-tools/15.5/x86_64\nsudo zypper install -y terraform\n\n# Alternative: Add HashiCorp repository\nsudo zypper addrepo https://rpm.releases.hashicorp.com/SLES/hashicorp.repo\nsudo zypper refresh\nsudo zypper install terraform\n\n# Verify installation\nterraform version\n```\n\n### macOS\n\n```bash\n# Using Homebrew\nbrew tap hashicorp/tap\nbrew install hashicorp/tap/terraform\n\n# Alternative: Install specific version\nbrew install terraform@1.6\n\n# Verify installation\nterraform version\n\n# Using tfenv for version management\nbrew install tfenv\ntfenv install latest\ntfenv use latest\n```\n\n### FreeBSD\n\n```bash\n# Using pkg\npkg install terraform\n\n# Using ports\ncd /usr/ports/sysutils/terraform\nmake install clean\n\n# Verify installation\nterraform version\n```\n\n### Windows\n\n```powershell\n# Method 1: Using Chocolatey\nchoco install terraform\n\n# Method 2: Using Scoop\nscoop bucket add main\nscoop install terraform\n\n# Method 3: Manual installation\n# Download from https://releases.hashicorp.com/terraform/\n# Extract terraform.exe to C:\\terraform\n# Add C:\\terraform to PATH\n\n# Method 4: Using Winget\nwinget install HashiCorp.Terraform\n\n# Verify installation\nterraform version\n```\n\n## Initial Configuration\n\n### First-Run Setup\n\n1. **Create terraform user** (optional for dedicated service):\n```bash\n# Linux systems\nsudo useradd -r -d /opt/terraform -s /sbin/nologin -c \"Terraform Service\" terraform\n```\n\n2. **Default configuration locations**:\n- RHEL/CentOS/Rocky/AlmaLinux: `/etc/terraform/` (custom) or `/usr/local/bin/`\n- Debian/Ubuntu: `/etc/terraform/` (custom) or `/usr/local/bin/`\n- Arch Linux: `/etc/terraform/` (custom) or `/usr/bin/`\n- Alpine Linux: `/etc/terraform/` (custom) or `/usr/bin/`\n- openSUSE/SLES: `/etc/terraform/` (custom) or `/usr/local/bin/`\n- macOS: `/usr/local/etc/terraform/` or `/opt/homebrew/etc/terraform/`\n- FreeBSD: `/usr/local/etc/terraform/`\n- Windows: `C:\\terraform\\` or `%APPDATA%\\terraform\\`\n\n3. **Essential initial configuration**:\n\n```bash\n# Create workspace directory\nmkdir -p ~/terraform/projects\ncd ~/terraform/projects\n\n# Create first Terraform configuration\ncat \u003e main.tf \u003c\u003cEOF\nterraform {\n  required_version = \"\u003e= 1.6\"\n  required_providers {\n    local = {\n      source  = \"hashicorp/local\"\n      version = \"~\u003e 2.0\"\n    }\n  }\n}\n\nresource \"local_file\" \"hello_world\" {\n  content  = \"Hello, World from Terraform!\"\n  filename = \"hello.txt\"\n}\nEOF\n\n# Initialize Terraform\nterraform init\n\n# Validate configuration\nterraform validate\n\n# Plan deployment\nterraform plan\n\n# Apply configuration\nterraform apply\n```\n\n### Testing Initial Setup\n\n```bash\n# Check Terraform version\nterraform version\n\n# Validate configuration\nterraform validate\n\n# Format configuration files\nterraform fmt\n\n# Initialize and test basic functionality\nterraform init\nterraform plan\nterraform apply\n\n# List state\nterraform state list\n\n# Show state details\nterraform show\n\n# Clean up test resources\nterraform destroy\n```\n\n**WARNING:** Configure proper authentication for cloud providers before deploying real infrastructure!\n\n## Service Management\n\n### systemd (Linux Systems)\n\n```bash\n# Create systemd service for Terraform agent (if using)\nsudo tee /etc/systemd/system/terraform-agent.service \u003c\u003cEOF\n[Unit]\nDescription=Terraform Agent\nAfter=network.target\n\n[Service]\nType=simple\nUser=terraform\nWorkingDirectory=/opt/terraform\nExecStart=/usr/local/bin/terraform-agent\nRestart=always\nRestartSec=10\n\n[Install]\nWantedBy=multi-user.target\nEOF\n\nsudo systemctl daemon-reload\nsudo systemctl enable terraform-agent\n```\n\n### OpenRC (Alpine Linux)\n\n```bash\n# Create OpenRC service script\nsudo tee /etc/init.d/terraform-agent \u003c\u003cEOF\n#!/sbin/openrc-run\n\nname=\"terraform-agent\"\ndescription=\"Terraform Agent\"\ncommand=\"/usr/bin/terraform-agent\"\ncommand_user=\"terraform\"\ncommand_background=true\npidfile=\"/var/run/terraform-agent.pid\"\n\ndepend() {\n    need net\n}\nEOF\n\nsudo chmod +x /etc/init.d/terraform-agent\nrc-update add terraform-agent default\n```\n\n### rc.d (FreeBSD)\n\n```bash\n# Create rc.d script\nsudo tee /usr/local/etc/rc.d/terraform_agent \u003c\u003cEOF\n#!/bin/sh\n. /etc/rc.subr\n\nname=terraform_agent\nrcvar=terraform_agent_enable\ncommand=\"/usr/local/bin/terraform-agent\"\npidfile=\"/var/run/terraform_agent.pid\"\nstart_cmd=\"terraform_agent_start\"\n\nterraform_agent_start() {\n    daemon -p \\${pidfile} \\${command}\n}\n\nload_rc_config \\$name\nrun_rc_command \"\\$1\"\nEOF\n\nsudo chmod +x /usr/local/etc/rc.d/terraform_agent\necho 'terraform_agent_enable=\"YES\"' \u003e\u003e /etc/rc.conf\n```\n\n### launchd (macOS)\n\n```bash\n# Create LaunchDaemon plist\nsudo tee /Library/LaunchDaemons/com.hashicorp.terraform.agent.plist \u003c\u003cEOF\n\u003c?xml version=\"1.0\" encoding=\"UTF-8\"?\u003e\n\u003c!DOCTYPE plist PUBLIC \"-//Apple//DTD PLIST 1.0//EN\" \"http://www.apple.com/DTDs/PropertyList-1.0.dtd\"\u003e\n\u003cplist version=\"1.0\"\u003e\n\u003cdict\u003e\n    \u003ckey\u003eLabel\u003c/key\u003e\n    \u003cstring\u003ecom.hashicorp.terraform.agent\u003c/string\u003e\n    \u003ckey\u003eProgramArguments\u003c/key\u003e\n    \u003carray\u003e\n        \u003cstring\u003e/usr/local/bin/terraform-agent\u003c/string\u003e\n    \u003c/array\u003e\n    \u003ckey\u003eRunAtLoad\u003c/key\u003e\n    \u003ctrue/\u003e\n    \u003ckey\u003eKeepAlive\u003c/key\u003e\n    \u003ctrue/\u003e\n\u003c/dict\u003e\n\u003c/plist\u003e\nEOF\n\nsudo launchctl load /Library/LaunchDaemons/com.hashicorp.terraform.agent.plist\n```\n\n### Windows Service Manager\n\n```powershell\n# Install Terraform as Windows service using NSSM\nnssm install TerraformAgent \"C:\\terraform\\terraform-agent.exe\"\nnssm set TerraformAgent AppDirectory \"C:\\terraform\"\nnssm set TerraformAgent DisplayName \"Terraform Agent\"\nnssm set TerraformAgent Description \"HashiCorp Terraform Agent\"\nnssm start TerraformAgent\n\n# Alternative: Using sc command\nsc create TerraformAgent binPath=\"C:\\terraform\\terraform-agent.exe\" start=auto\nsc start TerraformAgent\n```\n\n## Advanced Configuration\n\n### Multi-Cloud Provider Setup\n\n```bash\n# Create comprehensive multi-cloud configuration\ncat \u003e providers.tf \u003c\u003cEOF\nterraform {\n  required_version = \"\u003e= 1.6\"\n  required_providers {\n    aws = {\n      source  = \"hashicorp/aws\"\n      version = \"~\u003e 5.0\"\n    }\n    azurerm = {\n      source  = \"hashicorp/azurerm\"\n      version = \"~\u003e 3.0\"\n    }\n    google = {\n      source  = \"hashicorp/google\"\n      version = \"~\u003e 5.0\"\n    }\n    kubernetes = {\n      source  = \"hashicorp/kubernetes\"\n      version = \"~\u003e 2.0\"\n    }\n    helm = {\n      source  = \"hashicorp/helm\"\n      version = \"~\u003e 2.0\"\n    }\n  }\n  \n  # Remote state configuration\n  backend \"s3\" {\n    bucket = \"terraform-state-bucket\"\n    key    = \"infrastructure/terraform.tfstate\"\n    region = \"us-west-2\"\n    \n    # State locking with DynamoDB\n    dynamodb_table = \"terraform-state-lock\"\n    encrypt        = true\n  }\n}\n\n# AWS Provider\nprovider \"aws\" {\n  region = var.aws_region\n  \n  default_tags {\n    tags = {\n      Environment   = var.environment\n      ManagedBy     = \"terraform\"\n      Project       = var.project_name\n      Owner         = var.owner\n    }\n  }\n}\n\n# Azure Provider\nprovider \"azurerm\" {\n  features {\n    resource_group {\n      prevent_deletion_if_contains_resources = false\n    }\n    key_vault {\n      purge_soft_delete_on_destroy = true\n    }\n  }\n}\n\n# Google Cloud Provider\nprovider \"google\" {\n  project = var.gcp_project_id\n  region  = var.gcp_region\n  zone    = var.gcp_zone\n}\n\n# Kubernetes Provider\nprovider \"kubernetes\" {\n  config_path = \"~/.kube/config\"\n}\n\n# Helm Provider\nprovider \"helm\" {\n  kubernetes {\n    config_path = \"~/.kube/config\"\n  }\n}\nEOF\n```\n\n### Enterprise Features Configuration\n\n```bash\n# Terraform Cloud/Enterprise configuration\ncat \u003e cloud.tf \u003c\u003cEOF\nterraform {\n  cloud {\n    organization = \"your-organization\"\n    \n    workspaces {\n      name = \"production-infrastructure\"\n    }\n  }\n}\n\n# Remote execution configuration\nterraform {\n  cloud {\n    organization = \"your-organization\"\n    \n    workspaces {\n      tags = [\"production\", \"web-app\"]\n    }\n  }\n  \n  required_providers {\n    tfe = {\n      source  = \"hashicorp/tfe\"\n      version = \"~\u003e 0.48\"\n    }\n  }\n}\n\n# Terraform Enterprise configuration\nprovider \"tfe\" {\n  hostname = \"terraform.company.com\"\n  token    = var.tfe_token\n}\n\n# Workspace configuration\nresource \"tfe_workspace\" \"production\" {\n  name         = \"production-infrastructure\"\n  organization = var.tfe_organization\n  \n  auto_apply = false\n  queue_all_runs = false\n  \n  terraform_version = \"1.6.4\"\n  \n  vcs_repo {\n    identifier     = \"company/infrastructure\"\n    branch         = \"main\"\n    oauth_token_id = var.vcs_oauth_token_id\n  }\n  \n  working_directory = \"environments/production\"\n}\nEOF\n```\n\n### Advanced State Management\n\n```bash\n# Encrypted remote state with multiple backends\ncat \u003e backend-s3.tf \u003c\u003cEOF\n# S3 backend with encryption and locking\nterraform {\n  backend \"s3\" {\n    bucket         = \"terraform-state-bucket\"\n    key            = \"infrastructure/terraform.tfstate\"\n    region         = \"us-west-2\"\n    encrypt        = true\n    kms_key_id     = \"arn:aws:kms:us-west-2:ACCOUNT:key/KEY-ID\"\n    dynamodb_table = \"terraform-state-lock\"\n    \n    # Additional security\n    skip_region_validation      = false\n    skip_credentials_validation = false\n    skip_metadata_api_check     = false\n  }\n}\n\n# State bucket with versioning and lifecycle\nresource \"aws_s3_bucket\" \"terraform_state\" {\n  bucket = \"terraform-state-bucket\"\n  \n  tags = {\n    Name        = \"Terraform State Bucket\"\n    Environment = var.environment\n  }\n}\n\nresource \"aws_s3_bucket_versioning\" \"terraform_state_versioning\" {\n  bucket = aws_s3_bucket.terraform_state.id\n  versioning_configuration {\n    status = \"Enabled\"\n  }\n}\n\nresource \"aws_s3_bucket_server_side_encryption_configuration\" \"terraform_state_encryption\" {\n  bucket = aws_s3_bucket.terraform_state.id\n\n  rule {\n    apply_server_side_encryption_by_default {\n      kms_master_key_id = aws_kms_key.terraform_bucket_key.arn\n      sse_algorithm     = \"aws:kms\"\n    }\n  }\n}\n\nresource \"aws_s3_bucket_public_access_block\" \"terraform_state\" {\n  bucket = aws_s3_bucket.terraform_state.id\n\n  block_public_acls       = true\n  block_public_policy     = true\n  ignore_public_acls      = true\n  restrict_public_buckets = true\n}\n\n# KMS key for encryption\nresource \"aws_kms_key\" \"terraform_bucket_key\" {\n  description             = \"KMS key for Terraform state bucket encryption\"\n  deletion_window_in_days = 7\n\n  tags = {\n    Name        = \"Terraform State Bucket Key\"\n    Environment = var.environment\n  }\n}\n\n# DynamoDB table for state locking\nresource \"aws_dynamodb_table\" \"terraform_state_lock\" {\n  name           = \"terraform-state-lock\"\n  billing_mode   = \"PAY_PER_REQUEST\"\n  hash_key       = \"LockID\"\n\n  attribute {\n    name = \"LockID\"\n    type = \"S\"\n  }\n\n  server_side_encryption {\n    enabled = true\n  }\n\n  point_in_time_recovery {\n    enabled = true\n  }\n\n  tags = {\n    Name        = \"Terraform State Lock Table\"\n    Environment = var.environment\n  }\n}\nEOF\n```\n\n## Reverse Proxy Setup\n\nTerraform itself doesn't typically require reverse proxy setup, but when using Terraform Enterprise or Cloud, you might need to configure proxies for API access:\n\n### Corporate Proxy Configuration\n\n```bash\n# Configure Terraform to work through corporate proxy\nexport HTTP_PROXY=http://proxy.company.com:8080\nexport HTTPS_PROXY=http://proxy.company.com:8080\nexport NO_PROXY=localhost,127.0.0.1,.company.com\n\n# Add to ~/.bashrc or ~/.zshrc\ncat \u003e\u003e ~/.bashrc \u003c\u003cEOF\n# Terraform proxy settings\nexport HTTP_PROXY=http://proxy.company.com:8080\nexport HTTPS_PROXY=http://proxy.company.com:8080\nexport NO_PROXY=localhost,127.0.0.1,.company.com\nEOF\n\n# Configure Git for proxy (if needed for modules)\ngit config --global http.proxy http://proxy.company.com:8080\ngit config --global https.proxy http://proxy.company.com:8080\n```\n\n### nginx Configuration for Terraform Enterprise\n\n```nginx\n# /etc/nginx/sites-available/terraform-enterprise\nupstream terraform_enterprise {\n    server 127.0.0.1:8800;\n    server 127.0.0.1:8801 backup;\n}\n\nserver {\n    listen 443 ssl http2;\n    server_name terraform.company.com;\n\n    ssl_certificate /etc/ssl/certs/terraform.company.com.crt;\n    ssl_certificate_key /etc/ssl/private/terraform.company.com.key;\n\n    # Security headers\n    add_header Strict-Transport-Security \"max-age=31536000\" always;\n    add_header X-Frame-Options \"DENY\" always;\n    add_header X-Content-Type-Options \"nosniff\" always;\n\n    location / {\n        proxy_pass http://terraform_enterprise;\n        proxy_set_header Host $host;\n        proxy_set_header X-Real-IP $remote_addr;\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n        proxy_set_header X-Forwarded-Proto $scheme;\n        \n        # WebSocket support for real-time updates\n        proxy_http_version 1.1;\n        proxy_set_header Upgrade $http_upgrade;\n        proxy_set_header Connection \"upgrade\";\n        \n        # Timeouts for long-running operations\n        proxy_connect_timeout 60s;\n        proxy_send_timeout 60s;\n        proxy_read_timeout 300s;\n    }\n}\n```\n\n## Security Configuration\n\n### Secure Credential Management\n\n```bash\n# Use environment variables for credentials\ncat \u003e .env.example \u003c\u003cEOF\n# AWS credentials\nAWS_ACCESS_KEY_ID=your_access_key\nAWS_SECRET_ACCESS_KEY=your_secret_key\nAWS_DEFAULT_REGION=us-west-2\n\n# Azure credentials\nARM_CLIENT_ID=your_client_id\nARM_CLIENT_SECRET=your_client_secret\nARM_SUBSCRIPTION_ID=your_subscription_id\nARM_TENANT_ID=your_tenant_id\n\n# GCP credentials\nGOOGLE_APPLICATION_CREDENTIALS=/path/to/service-account-key.json\nGOOGLE_PROJECT=your_project_id\n\n# Terraform Cloud\nTF_CLOUD_TOKEN=your_terraform_cloud_token\nEOF\n\n# Use IAM roles for AWS (recommended)\ncat \u003e aws-iam-role.tf \u003c\u003cEOF\n# IAM role for Terraform execution\nresource \"aws_iam_role\" \"terraform_execution\" {\n  name = \"TerraformExecutionRole\"\n\n  assume_role_policy = jsonencode({\n    Version = \"2012-10-17\"\n    Statement = [\n      {\n        Action = \"sts:AssumeRole\"\n        Effect = \"Allow\"\n        Principal = {\n          Service = \"ec2.amazonaws.com\"\n        }\n      },\n    ]\n  })\n}\n\n# Attach managed policies with least privilege\nresource \"aws_iam_role_policy_attachment\" \"terraform_execution\" {\n  for_each = toset([\n    \"arn:aws:iam::aws:policy/PowerUserAccess\"\n  ])\n  \n  role       = aws_iam_role.terraform_execution.name\n  policy_arn = each.value\n}\n\n# Create instance profile\nresource \"aws_iam_instance_profile\" \"terraform_execution\" {\n  name = \"TerraformExecutionProfile\"\n  role = aws_iam_role.terraform_execution.name\n}\nEOF\n```\n\n### Security Scanning and Compliance\n\n```bash\n# Pre-commit hooks for security\ncat \u003e .pre-commit-config.yaml \u003c\u003cEOF\nrepos:\n- repo: https://github.com/antonbabenko/pre-commit-terraform\n  rev: v1.83.5\n  hooks:\n    - id: terraform_fmt\n    - id: terraform_validate\n    - id: terraform_docs\n    - id: terraform_tflint\n    - id: terraform_checkov\n    - id: terraform_trivy\n\n- repo: https://github.com/Yelp/detect-secrets\n  rev: v1.4.0\n  hooks:\n    - id: detect-secrets\n      args: ['--baseline', '.secrets.baseline']\nEOF\n\n# Checkov configuration for security scanning\ncat \u003e .checkov.yaml \u003c\u003cEOF\nframework:\n  - terraform\n  - secrets\n\ncheck:\n  - CKV_AWS_79  # Ensure Instance Metadata Service Version 1 is not enabled\n  - CKV_AWS_8   # Ensure Launch Configuration EBS encryption\n  - CKV_AZURE_1 # Ensure storage account encryption\n\nskip-check:\n  - CKV_AWS_23  # Skip S3 bucket public read check for specific use cases\n\noutput: cli\nquiet: false\ncompact: false\nEOF\n\n# TFLint configuration\ncat \u003e .tflint.hcl \u003c\u003cEOF\nplugin \"aws\" {\n    enabled = true\n    version = \"0.21.2\"\n    source  = \"github.com/terraform-linters/tflint-ruleset-aws\"\n}\n\nplugin \"azurerm\" {\n    enabled = true\n    version = \"0.21.0\"\n    source  = \"github.com/terraform-linters/tflint-ruleset-azurerm\"\n}\n\nrule \"terraform_unused_declarations\" {\n  enabled = true\n}\n\nrule \"terraform_naming_convention\" {\n  enabled = true\n  format  = \"snake_case\"\n}\nEOF\n```\n\n### Policy as Code with OPA\n\n```bash\n# OPA (Open Policy Agent) security policies\ncat \u003e policy/security.rego \u003c\u003cEOF\npackage terraform.security\n\n# Deny instances without encryption\ndeny[reason] {\n    resource := input.resource_changes[_]\n    resource.type == \"aws_instance\"\n    resource.change.after.root_block_device[_].encrypted == false\n    reason := \"AWS instances must have encrypted root volumes\"\n}\n\n# Deny public S3 buckets\ndeny[reason] {\n    resource := input.resource_changes[_]\n    resource.type == \"aws_s3_bucket_public_access_block\"\n    resource.change.after.block_public_acls == false\n    reason := \"S3 buckets must block public access\"\n}\n\n# Require specific instance types in production\ndeny[reason] {\n    resource := input.resource_changes[_]\n    resource.type == \"aws_instance\"\n    instance_type := resource.change.after.instance_type\n    not allowed_instance_type(instance_type)\n    workspace := input.terraform_version.workspace\n    workspace == \"production\"\n    reason := sprintf(\"Production instances must use approved instance types, got: %v\", [instance_type])\n}\n\nallowed_instance_type(instance_type) {\n    allowed_types := [\"t3.micro\", \"t3.small\", \"t3.medium\", \"m5.large\", \"m5.xlarge\"]\n    instance_type in allowed_types\n}\nEOF\n\n# Policy validation script\ncat \u003e scripts/validate-policy.sh \u003c\u003c'EOF'\n#!/bin/bash\n\n# Generate Terraform plan\nterraform plan -out=tfplan\nterraform show -json tfplan \u003e tfplan.json\n\n# Validate against policies\nconftest test tfplan.json --policy policy/\n\n# Cleanup\nrm tfplan tfplan.json\nEOF\n\nchmod +x scripts/validate-policy.sh\n```\n\n## Database Setup\n\nTerraform doesn't require a traditional database, but it does use state files and can integrate with various storage backends:\n\n### State Storage Backends\n\n```bash\n# PostgreSQL backend (for Terraform Enterprise)\ncat \u003e backend-postgres.tf \u003c\u003cEOF\nterraform {\n  backend \"pg\" {\n    conn_str = \"postgres://user:pass@localhost/terraform_backend?sslmode=require\"\n  }\n}\nEOF\n\n# Consul backend for distributed state\ncat \u003e backend-consul.tf \u003c\u003cEOF\nterraform {\n  backend \"consul\" {\n    address = \"consul.company.com:8500\"\n    scheme  = \"https\"\n    path    = \"terraform/infrastructure\"\n  }\n}\nEOF\n\n# etcd backend\ncat \u003e backend-etcd.tf \u003c\u003cEOF\nterraform {\n  backend \"etcdv3\" {\n    endpoints = [\"http://etcd1:2379\", \"http://etcd2:2379\", \"http://etcd3:2379\"]\n    lock      = true\n    prefix    = \"terraform-state/\"\n  }\n}\nEOF\n```\n\n### Database Infrastructure Management\n\n```bash\n# Database deployment with Terraform\ncat \u003e database.tf \u003c\u003cEOF\n# RDS instance with Multi-AZ\nresource \"aws_db_instance\" \"main\" {\n  identifier = \"${var.project_name}-db\"\n  \n  engine         = \"postgresql\"\n  engine_version = \"15.4\"\n  instance_class = \"db.t3.micro\"\n  \n  allocated_storage     = 20\n  max_allocated_storage = 100\n  storage_type         = \"gp3\"\n  storage_encrypted    = true\n  kms_key_id          = aws_kms_key.rds.arn\n  \n  db_name  = var.database_name\n  username = var.database_username\n  password = var.database_password\n  port     = 5432\n  \n  multi_az               = true\n  publicly_accessible    = false\n  backup_retention_period = 7\n  backup_window          = \"03:00-04:00\"\n  maintenance_window     = \"sun:04:00-sun:05:00\"\n  \n  skip_final_snapshot = false\n  final_snapshot_identifier = \"${var.project_name}-db-final-snapshot\"\n  \n  vpc_security_group_ids = [aws_security_group.rds.id]\n  db_subnet_group_name   = aws_db_subnet_group.main.name\n  \n  tags = var.common_tags\n}\n\n# Database subnet group\nresource \"aws_db_subnet_group\" \"main\" {\n  name       = \"${var.project_name}-db-subnet-group\"\n  subnet_ids = var.private_subnet_ids\n\n  tags = merge(var.common_tags, {\n    Name = \"${var.project_name}-db-subnet-group\"\n  })\n}\n\n# KMS key for RDS encryption\nresource \"aws_kms_key\" \"rds\" {\n  description             = \"KMS key for RDS encryption\"\n  deletion_window_in_days = 7\n\n  tags = merge(var.common_tags, {\n    Name = \"${var.project_name}-rds-kms-key\"\n  })\n}\nEOF\n```\n\n## Performance Optimization\n\n### Terraform Performance Tuning\n\n```bash\n# Optimize Terraform execution\ncat \u003e terraform.tfvars \u003c\u003cEOF\n# Performance settings\nterraform_parallelism = 10\nterraform_refresh = true\nterraform_upgrade = false\nEOF\n\n# Performance optimization script\ncat \u003e scripts/optimize-terraform.sh \u003c\u003c'EOF'\n#!/bin/bash\n\n# Increase parallelism for faster execution\nexport TF_CLI_ARGS_plan=\"-parallelism=10\"\nexport TF_CLI_ARGS_apply=\"-parallelism=10\"\n\n# Use faster JSON output for large states\nexport TF_CLI_ARGS_show=\"-json\"\n\n# Optimize provider caching\nexport TF_PLUGIN_CACHE_DIR=\"$HOME/.terraform.d/plugin-cache\"\nmkdir -p \"$TF_PLUGIN_CACHE_DIR\"\n\n# Performance monitoring\necho \"Starting Terraform operation at $(date)\"\ntime terraform \"$@\"\necho \"Completed Terraform operation at $(date)\"\nEOF\n\nchmod +x scripts/optimize-terraform.sh\n```\n\n### Large Infrastructure Management\n\n```bash\n# Workspace and module organization\ncat \u003e modules/infrastructure/main.tf \u003c\u003cEOF\n# Optimized module structure for large deployments\nterraform {\n  required_providers {\n    aws = {\n      source  = \"hashicorp/aws\"\n      version = \"~\u003e 5.0\"\n    }\n  }\n}\n\n# Use data sources efficiently\ndata \"aws_availability_zones\" \"available\" {\n  state = \"available\"\n  \n  # Cache this data to avoid repeated API calls\n  lifecycle {\n    postcondition {\n      condition     = length(self.names) \u003e= 2\n      error_message = \"At least 2 availability zones required.\"\n    }\n  }\n}\n\n# Optimize resource creation with for_each\nresource \"aws_subnet\" \"private\" {\n  for_each = toset(slice(data.aws_availability_zones.available.names, 0, var.subnet_count))\n  \n  vpc_id            = aws_vpc.main.id\n  cidr_block        = cidrsubnet(var.vpc_cidr, 8, index(data.aws_availability_zones.available.names, each.value) + 10)\n  availability_zone = each.value\n  \n  tags = merge(var.common_tags, {\n    Name = \"${var.name_prefix}-private-${each.value}\"\n    Type = \"private\"\n  })\n}\n\n# Use locals for complex computations\nlocals {\n  # Pre-compute values to avoid recalculation\n  availability_zones = slice(data.aws_availability_zones.available.names, 0, var.subnet_count)\n  \n  # Create maps for efficient lookups\n  subnet_map = {\n    for subnet in aws_subnet.private : \n    subnet.availability_zone =\u003e subnet.id\n  }\n}\nEOF\n```\n\n### State Optimization\n\n```bash\n# State file optimization script\ncat \u003e scripts/optimize-state.sh \u003c\u003c'EOF'\n#!/bin/bash\n\n# Pull current state for backup\nterraform state pull \u003e state-backup-$(date +%Y%m%d_%H%M%S).json\n\n# Remove unused resources from state\nterraform state list | while read resource; do\n    if terraform plan -target=\"$resource\" | grep -q \"No changes\"; then\n        echo \"Checking if $resource can be safely removed...\"\n        # Add logic to safely remove unused resources\n    fi\ndone\n\n# Refresh state to sync with real infrastructure\nterraform refresh\n\necho \"State optimization completed\"\nEOF\n\nchmod +x scripts/optimize-state.sh\n```\n\n## Monitoring\n\n### Terraform Operations Monitoring\n\n```bash\n# Terraform execution monitoring\ncat \u003e scripts/monitor-terraform.sh \u003c\u003c'EOF'\n#!/bin/bash\n\nLOG_FILE=\"/var/log/terraform/operations.log\"\nMETRICS_FILE=\"/var/log/terraform/metrics.log\"\n\n# Ensure log directory exists\nmkdir -p \"$(dirname \"$LOG_FILE\")\"\nmkdir -p \"$(dirname \"$METRICS_FILE\")\"\n\n# Function to log operations\nlog_operation() {\n    local operation=\"$1\"\n    local status=\"$2\"\n    local duration=\"$3\"\n    local timestamp=$(date '+%Y-%m-%d %H:%M:%S')\n    \n    echo \"[$timestamp] Operation: $operation, Status: $status, Duration: ${duration}s\" \u003e\u003e \"$LOG_FILE\"\n    echo \"terraform_operation_duration{operation=\\\"$operation\\\",status=\\\"$status\\\"} $duration\" \u003e\u003e \"$METRICS_FILE\"\n}\n\n# Wrapper function for terraform commands\nterraform_monitored() {\n    local operation=\"$1\"\n    shift\n    local start_time=$(date +%s)\n    local exit_code=0\n    \n    echo \"Starting Terraform $operation at $(date)\"\n    \n    if terraform \"$operation\" \"$@\"; then\n        local end_time=$(date +%s)\n        local duration=$((end_time - start_time))\n        log_operation \"$operation\" \"success\" \"$duration\"\n        echo \"Terraform $operation completed successfully in ${duration}s\"\n    else\n        exit_code=$?\n        local end_time=$(date +%s)\n        local duration=$((end_time - start_time))\n        log_operation \"$operation\" \"failure\" \"$duration\"\n        echo \"Terraform $operation failed after ${duration}s\"\n        return $exit_code\n    fi\n}\n\n# Usage: terraform_monitored plan, terraform_monitored apply, etc.\nterraform_monitored \"$@\"\nEOF\n\nchmod +x scripts/monitor-terraform.sh\n```\n\n### Infrastructure Monitoring with Terraform\n\n```bash\n# Deploy monitoring stack with Terraform\ncat \u003e monitoring.tf \u003c\u003cEOF\n# CloudWatch alarms for infrastructure\nresource \"aws_cloudwatch_metric_alarm\" \"high_cpu\" {\n  for_each = toset(module.compute.instance_ids)\n  \n  alarm_name          = \"high-cpu-${each.key}\"\n  comparison_operator = \"GreaterThanThreshold\"\n  evaluation_periods  = \"2\"\n  metric_name        = \"CPUUtilization\"\n  namespace          = \"AWS/EC2\"\n  period             = \"300\"\n  statistic          = \"Average\"\n  threshold          = \"80\"\n  alarm_description  = \"This metric monitors EC2 CPU utilization\"\n\n  dimensions = {\n    InstanceId = each.value\n  }\n\n  alarm_actions = [aws_sns_topic.alerts.arn]\n  \n  tags = var.common_tags\n}\n\n# SNS topic for alerts\nresource \"aws_sns_topic\" \"alerts\" {\n  name = \"${var.project_name}-infrastructure-alerts\"\n  \n  tags = var.common_tags\n}\n\nresource \"aws_sns_topic_subscription\" \"email_alerts\" {\n  topic_arn = aws_sns_topic.alerts.arn\n  protocol  = \"email\"\n  endpoint  = var.alert_email\n}\n\n# Log group for Terraform operations\nresource \"aws_cloudwatch_log_group\" \"terraform_ops\" {\n  name              = \"/terraform/operations\"\n  retention_in_days = 30\n  \n  tags = var.common_tags\n}\n\n# Dashboard for infrastructure monitoring\nresource \"aws_cloudwatch_dashboard\" \"main\" {\n  dashboard_name = \"${var.project_name}-infrastructure\"\n\n  dashboard_body = jsonencode({\n    widgets = [\n      {\n        type   = \"metric\"\n        x      = 0\n        y      = 0\n        width  = 12\n        height = 6\n\n        properties = {\n          metrics = [\n            [\"AWS/EC2\", \"CPUUtilization\", \"InstanceId\", module.compute.instance_ids[0]],\n          ]\n          view    = \"timeSeries\"\n          stacked = false\n          region  = var.aws_region\n          title   = \"EC2 Instance CPU\"\n          period  = 300\n        }\n      }\n    ]\n  })\n}\nEOF\n```\n\n### Terraform Cloud Monitoring\n\n```bash\n# Monitor Terraform Cloud workspaces\ncat \u003e scripts/monitor-tf-cloud.sh \u003c\u003c'EOF'\n#!/bin/bash\n\nTF_CLOUD_TOKEN=\"${TF_CLOUD_TOKEN}\"\nORGANIZATION=\"${TF_ORGANIZATION}\"\n\n# Function to get workspace status\nget_workspace_status() {\n    local workspace_name=\"$1\"\n    \n    curl -s \\\n        --header \"Authorization: Bearer $TF_CLOUD_TOKEN\" \\\n        --header \"Content-Type: application/vnd.api+json\" \\\n        \"https://app.terraform.io/api/v2/organizations/$ORGANIZATION/workspaces/$workspace_name/current-run\" \\\n        | jq -r '.data.attributes.status'\n}\n\n# Function to get workspace runs\nget_recent_runs() {\n    local workspace_id=\"$1\"\n    \n    curl -s \\\n        --header \"Authorization: Bearer $TF_CLOUD_TOKEN\" \\\n        --header \"Content-Type: application/vnd.api+json\" \\\n        \"https://app.terraform.io/api/v2/workspaces/$workspace_id/runs\" \\\n        | jq -r '.data[].attributes | \"\\(.status) - \\(.created_at)\"'\n}\n\n# Monitor critical workspaces\nWORKSPACES=(\"production-web\" \"production-database\" \"staging-environment\")\n\nfor workspace in \"${WORKSPACES[@]}\"; do\n    status=$(get_workspace_status \"$workspace\")\n    echo \"Workspace: $workspace, Status: $status\"\n    \n    if [[ \"$status\" == \"errored\" ]]; then\n        echo \"❌ ALERT: Workspace $workspace has errors!\"\n        # Send alert to monitoring system\n        curl -X POST \\\n            -H \"Content-Type: application/json\" \\\n            -d \"{\\\"text\\\": \\\"Terraform workspace $workspace has errors\\\"}\" \\\n            \"$SLACK_WEBHOOK_URL\"\n    elif [[ \"$status\" == \"planned_and_finished\" ]]; then\n        echo \"✅ Workspace $workspace is healthy\"\n    fi\ndone\nEOF\n\nchmod +x scripts/monitor-tf-cloud.sh\n```\n\n## Backup and Restore\n\n### State File Backup\n\n```bash\n# Comprehensive state backup script\ncat \u003e scripts/backup-terraform-state.sh \u003c\u003c'EOF'\n#!/bin/bash\n\nBACKUP_DIR=\"/backup/terraform\"\nDATE=$(date +%Y%m%d_%H%M%S)\nENVIRONMENTS=(\"development\" \"staging\" \"production\")\n\nmkdir -p \"$BACKUP_DIR\"\n\nbackup_state() {\n    local environment=\"$1\"\n    local backup_path=\"$BACKUP_DIR/$environment\"\n    \n    echo \"Backing up $environment state...\"\n    mkdir -p \"$backup_path\"\n    \n    # Change to environment directory\n    cd \"environments/$environment\" || return 1\n    \n    # Pull current state\n    terraform state pull \u003e \"$backup_path/terraform-state-$DATE.json\"\n    \n    # Backup configuration files\n    tar -czf \"$backup_path/terraform-config-$DATE.tar.gz\" \\\n        --exclude=\".terraform\" \\\n        --exclude=\"*.tfplan\" \\\n        .\n    \n    # Backup workspace info\n    terraform workspace show \u003e \"$backup_path/current-workspace-$DATE.txt\"\n    terraform workspace list \u003e \"$backup_path/all-workspaces-$DATE.txt\"\n    \n    # Backup provider versions\n    terraform version \u003e \"$backup_path/terraform-version-$DATE.txt\"\n    \n    cd - \u003e /dev/null\n    \n    echo \"✅ Backup completed for $environment\"\n}\n\n# Backup all environments\nfor env in \"${ENVIRONMENTS[@]}\"; do\n    if [[ -d \"environments/$env\" ]]; then\n        backup_state \"$env\"\n    else\n        echo \"⚠️  Environment directory not found: environments/$env\"\n    fi\ndone\n\n# Create consolidated backup\ncd \"$BACKUP_DIR\"\ntar -czf \"terraform-complete-backup-$DATE.tar.gz\" \\\n    --exclude=\"*.tar.gz\" \\\n    .\n\n# Upload to cloud storage\nif command -v aws \u0026\u003e /dev/null; then\n    aws s3 cp \"terraform-complete-backup-$DATE.tar.gz\" \\\n        s3://terraform-backups/\nfi\n\nif command -v az \u0026\u003e /dev/null; then\n    az storage blob upload \\\n        --file \"terraform-complete-backup-$DATE.tar.gz\" \\\n        --container-name terraform-backups \\\n        --name \"terraform-complete-backup-$DATE.tar.gz\"\nfi\n\nif command -v gsutil \u0026\u003e /dev/null; then\n    gsutil cp \"terraform-complete-backup-$DATE.tar.gz\" \\\n        gs://terraform-backups/\nfi\n\n# Cleanup old backups (keep last 30 days)\nfind \"$BACKUP_DIR\" -name \"terraform-complete-backup-*.tar.gz\" \\\n    -mtime +30 -delete\n\necho \"🎉 All backups completed successfully\"\nEOF\n\nchmod +x scripts/backup-terraform-state.sh\n```\n\n### Disaster Recovery Procedures\n\n```bash\n# Disaster recovery script\ncat \u003e scripts/disaster-recovery.sh \u003c\u003c'EOF'\n#!/bin/bash\n\nBACKUP_FILE=\"$1\"\nTARGET_ENVIRONMENT=\"$2\"\n\nif [[ -z \"$BACKUP_FILE\" || -z \"$TARGET_ENVIRONMENT\" ]]; then\n    echo \"Usage: $0 \u003cbackup-file.tar.gz\u003e \u003ctarget-environment\u003e\"\n    echo \"Example: $0 terraform-complete-backup-20240115_143000.tar.gz production\"\n    exit 1\nfi\n\n# Verify backup file exists\nif [[ ! -f \"$BACKUP_FILE\" ]]; then\n    echo \"❌ Backup file not found: $BACKUP_FILE\"\n    exit 1\nfi\n\n# Create recovery directory\nRECOVERY_DIR=\"/tmp/terraform-recovery-$(date +%s)\"\nmkdir -p \"$RECOVERY_DIR\"\n\n# Extract backup\necho \"📦 Extracting backup...\"\ntar -xzf \"$BACKUP_FILE\" -C \"$RECOVERY_DIR\"\n\n# Navigate to target environment\ncd \"environments/$TARGET_ENVIRONMENT\" || {\n    echo \"❌ Target environment directory not found: environments/$TARGET_ENVIRONMENT\"\n    exit 1\n}\n\n# Backup current state before recovery\necho \"💾 Backing up current state...\"\nterraform state pull \u003e \"current-state-backup-$(date +%Y%m%d_%H%M%S).json\"\n\n# Import recovered state\nRECOVERED_STATE=\"$RECOVERY_DIR/$TARGET_ENVIRONMENT/terraform-state-*.json\"\nif [[ -f $RECOVERED_STATE ]]; then\n    echo \"🔄 Restoring state from backup...\"\n    terraform state push \"$RECOVERED_STATE\"\nelse\n    echo \"❌ No state file found in backup for environment: $TARGET_ENVIRONMENT\"\n    exit 1\nfi\n\n# Verify state consistency\necho \"🔍 Verifying state consistency...\"\nif terraform plan -detailed-exitcode; then\n    echo \"✅ State restored successfully - no drift detected\"\nelif [[ $? -eq 2 ]]; then\n    echo \"⚠️  State restored but drift detected - manual review required\"\n    terraform plan\nelse\n    echo \"❌ State restoration failed - check error messages above\"\n    exit 1\nfi\n\n# Cleanup\nrm -rf \"$RECOVERY_DIR\"\n\necho \"🎉 Disaster recovery completed for environment: $TARGET_ENVIRONMENT\"\necho \"💡 Please review the plan output and apply changes if necessary\"\nEOF\n\nchmod +x scripts/disaster-recovery.sh\n```\n\n### State Migration and Refactoring\n\n```bash\n# State migration script for refactoring\ncat \u003e scripts/migrate-state.sh \u003c\u003c'EOF'\n#!/bin/bash\n\n# Function to safely move resources in state\nmove_resource() {\n    local old_address=\"$1\"\n    local new_address=\"$2\"\n    \n    echo \"Moving $old_address to $new_address\"\n    \n    # Check if source resource exists\n    if terraform state show \"$old_address\" \u0026\u003e/dev/null; then\n        terraform state mv \"$old_address\" \"$new_address\"\n        echo \"✅ Successfully moved $old_address to $new_address\"\n    else\n        echo \"⚠️  Resource not found: $old_address\"\n    fi\n}\n\n# Function to import existing resources\nimport_resource() {\n    local resource_address=\"$1\"\n    local resource_id=\"$2\"\n    \n    echo \"Importing $resource_id as $resource_address\"\n    \n    if terraform import \"$resource_address\" \"$resource_id\"; then\n        echo \"✅ Successfully imported $resource_id as $resource_address\"\n    else\n        echo \"❌ Failed to import $resource_id\"\n    fi\n}\n\n# Example migrations\necho \"🔄 Starting state migrations...\"\n\n# Move resources to modules\nmove_resource \"aws_instance.web\" \"module.web_servers.aws_instance.main[0]\"\nmove_resource \"aws_security_group.web\" \"module.web_servers.aws_security_group.main\"\n\n# Import existing resources\nimport_resource \"aws_s3_bucket.existing_bucket\" \"existing-bucket-name\"\n\n# Remove resources that are no longer managed\nterraform state rm aws_instance.deprecated\n\necho \"🎉 State migrations completed\"\necho \"💡 Run 'terraform plan' to verify changes\"\nEOF\n\nchmod +x scripts/migrate-state.sh\n```\n\n## Troubleshooting\n\n### Common Issues and Solutions\n\n```bash\n# Terraform troubleshooting script\ncat \u003e scripts/troubleshoot-terraform.sh \u003c\u003c'EOF'\n#!/bin/bash\n\necho \"🔧 Terraform Troubleshooting Tool\"\necho \"================================\"\n\n# Check Terraform installation\ncheck_installation() {\n    echo \"📋 Checking Terraform installation...\"\n    \n    if command -v terraform \u0026\u003e /dev/null; then\n        terraform version\n        echo \"✅ Terraform is installed\"\n    else\n        echo \"❌ Terraform is not installed or not in PATH\"\n        return 1\n    fi\n}\n\n# Check configuration syntax\ncheck_configuration() {\n    echo \"📋 Checking configuration syntax...\"\n    \n    if terraform fmt -check -diff; then\n        echo \"✅ Configuration is properly formatted\"\n    else\n        echo \"⚠️  Configuration formatting issues found\"\n        terraform fmt -diff\n    fi\n    \n    if terraform validate; then\n        echo \"✅ Configuration is valid\"\n    else\n        echo \"❌ Configuration validation failed\"\n        return 1\n    fi\n}\n\n# Check provider authentication\ncheck_providers() {\n    echo \"📋 Checking provider authentication...\"\n    \n    # AWS\n    if aws sts get-caller-identity \u0026\u003e/dev/null; then\n        echo \"✅ AWS credentials are valid\"\n    else\n        echo \"⚠️  AWS credentials may be invalid or not configured\"\n    fi\n    \n    # Azure\n    if az account show \u0026\u003e/dev/null; then\n        echo \"✅ Azure credentials are valid\"\n    else\n        echo \"⚠️  Azure credentials may be invalid or not configured\"\n    fi\n    \n    # GCP\n    if gcloud auth list --filter=status:ACTIVE --format=\"value(account)\" \u0026\u003e/dev/null; then\n        echo \"✅ GCP credentials are valid\"\n    else\n        echo \"⚠️  GCP credentials may be invalid or not configured\"\n    fi\n}\n\n# Check state file\ncheck_state() {\n    echo \"📋 Checking state file...\"\n    \n    if terraform state list \u0026\u003e/dev/null; then\n        resource_count=$(terraform state list | wc -l)\n        echo \"✅ State file is accessible with $resource_count resources\"\n    else\n        echo \"❌ Cannot access state file\"\n        return 1\n    fi\n}\n\n# Check for common issues\ncheck_common_issues() {\n    echo \"📋 Checking for common issues...\"\n    \n    # Check for lock file\n    if [[ -f \".terraform.lock.hcl\" ]]; then\n        echo \"✅ Lock file exists\"\n    else\n        echo \"⚠️  Lock file missing - run 'terraform init'\"\n    fi\n    \n    # Check for local state file in production\n    if [[ -f \"terraform.tfstate\" ]] \u0026\u0026 [[ $(terraform workspace show) == \"production\" ]]; then\n        echo \"⚠️  Local state file detected in production workspace\"\n        echo \"    Consider using remote state for production\"\n    fi\n    \n    # Check for hardcoded secrets\n    if grep -r \"password\\s*=\\s*\\\"\" . --include=\"*.tf\" --include=\"*.tfvars\" 2\u003e/dev/null; then\n        echo \"⚠️  Potential hardcoded passwords found\"\n    fi\n    \n    # Check for large state file\n    if [[ -f \"terraform.tfstate\" ]]; then\n        state_size=$(stat -f%z \"terraform.tfstate\" 2\u003e/dev/null || stat -c%s \"terraform.tfstate\" 2\u003e/dev/null)\n        if [[ $state_size -gt 10485760 ]]; then  # 10MB\n            echo \"⚠️  Large state file detected ($(($state_size / 1024 / 1024))MB)\"\n            echo \"    Consider splitting into smaller configurations\"\n        fi\n    fi\n}\n\n# Debug mode information\ndebug_info() {\n    echo \"📋 Debug information...\"\n    \n    echo \"Working directory: $(pwd)\"\n    echo \"Terraform workspace: $(terraform workspace show)\"\n    echo \"Environment variables:\"\n    env | grep -E \"^(TF_|AWS_|ARM_|GOOGLE_)\" | sed 's/=.*/=***/' | sort\n}\n\n# Run all checks\nrun_all_checks() {\n    check_installation || return 1\n    check_configuration || return 1\n    check_providers\n    check_state || return 1\n    check_common_issues\n    debug_info\n}\n\n# Main execution\ncase \"${1:-all}\" in\n    \"installation\")\n        check_installation\n        ;;\n    \"config\")\n        check_configuration\n        ;;\n    \"providers\")\n        check_providers\n        ;;\n    \"state\")\n        check_state\n        ;;\n    \"common\")\n        check_common_issues\n        ;;\n    \"debug\")\n        debug_info\n        ;;\n    \"all\")\n        run_all_checks\n        ;;\n    *)\n        echo \"Usage: $0 [installation|config|providers|state|common|debug|all]\"\n        exit 1\n        ;;\nesac\nEOF\n\nchmod +x scripts/troubleshoot-terraform.sh\n```\n\n### Advanced Debugging\n\n```bash\n# Advanced debugging techniques\ncat \u003e scripts/debug-terraform.sh \u003c\u003c'EOF'\n#!/bin/bash\n\n# Enable debug logging\nexport TF_LOG=DEBUG\nexport TF_LOG_PATH=\"terraform-debug-$(date +%Y%m%d_%H%M%S).log\"\n\n# Create debug session\ndebug_session() {\n    local operation=\"$1\"\n    shift\n    \n    echo \"🐛 Starting debug session for: $operation\"\n    echo \"Debug log: $TF_LOG_PATH\"\n    \n    # Capture detailed timing information\n    time terraform \"$operation\" \"$@\" 2\u003e\u00261 | tee -a \"$TF_LOG_PATH\"\n    \n    local exit_code=${PIPESTATUS[0]}\n    \n    if [[ $exit_code -ne 0 ]]; then\n        echo \"❌ Operation failed with exit code: $exit_code\"\n        echo \"📄 Last 50 lines of debug log:\"\n        tail -50 \"$TF_LOG_PATH\"\n    else\n        echo \"✅ Operation completed successfully\"\n    fi\n    \n    return $exit_code\n}\n\n# Analyze state file for issues\nanalyze_state() {\n    echo \"🔍 Analyzing state file...\"\n    \n    # Check for orphaned resources\n    echo \"Checking for potential orphaned resources...\"\n    terraform state list | while read resource; do\n        if ! terraform plan -target=\"$resource\" -detailed-exitcode \u003e/dev/null 2\u003e\u00261; then\n            echo \"⚠️  Potential issue with resource: $resource\"\n        fi\n    done\n    \n    # Check for large resources in state\n    echo \"Checking for large resources...\"\n    terraform state pull | jq -r '.resources[] | select(.instances[0].attributes | length \u003e 50) | .address' 2\u003e/dev/null | head -10\n}\n\n# Provider debug information\ndebug_providers() {\n    echo \"🔍 Debugging provider issues...\"\n    \n    # Show provider configuration\n    terraform providers\n    \n    # Check provider cache\n    if [[ -d \"$HOME/.terraform.d/plugin-cache\" ]]; then\n        echo \"Provider cache contents:\"\n        ls -la \"$HOME/.terraform.d/plugin-cache\"\n    fi\n    \n    # Check for provider version conflicts\n    terraform version -json | jq '.provider_selections' 2\u003e/dev/null\n}\n\n# Network and API debugging\ndebug_network() {\n    echo \"🌐 Debugging network connectivity...\"\n    \n    # Test connectivity to common endpoints\n    local endpoints=(\n        \"https://releases.hashicorp.com\"\n        \"https://registry.terraform.io\"\n        \"https://api.github.com\"\n        \"https://aws.amazon.com\"\n        \"https://management.azure.com\"\n        \"https://www.googleapis.com\"\n    )\n    \n    for endpoint in \"${endpoints[@]}\"; do\n        if curl -s --connect-timeout 5 \"$endpoint\" \u003e/dev/null; then\n            echo \"✅ $endpoint - OK\"\n        else\n            echo \"❌ $endpoint - FAILED\"\n        fi\n    done\n}\n\n# Performance analysis\nanalyze_performance() {\n    echo \"📊 Analyzing Terraform performance...\"\n    \n    # Generate and analyze dependency graph\n    terraform graph \u003e dependency-graph.dot\n    \n    # Count resources by type\n    echo \"Resource distribution:\"\n    terraform state list | cut -d. -f1 | sort | uniq -c | sort -nr | head -10\n    \n    # Estimate plan time based on resources\n    resource_count=$(terraform state list | wc -l)\n    estimated_time=$((resource_count * 2))  # Rough estimate: 2 seconds per resource\n    echo \"Estimated plan time: ${estimated_time} seconds for $resource_count resources\"\n}\n\n# Usage\ncase \"${1:-help}\" in\n    \"session\")\n        shift\n        debug_session \"$@\"\n        ;;\n    \"state\")\n        analyze_state\n        ;;\n    \"providers\")\n        debug_providers\n        ;;\n    \"network\")\n        debug_network\n        ;;\n    \"performance\")\n        analyze_performance\n        ;;\n    \"all\")\n        debug_providers\n        debug_network\n        analyze_state\n        analyze_performance\n        ;;\n    \"help\"|*)\n        echo \"Usage: $0 [session|state|providers|network|performance|all]\"\n        echo \"\"\n        echo \"  session \u003coperation\u003e [args]  - Debug specific Terraform operation\"\n        echo \"  state                       - Analyze state file for issues\"\n        echo \"  providers                   - Debug provider configuration\"\n        echo \"  network                     - Test network connectivity\"\n        echo \"  performance                 - Analyze performance characteristics\"\n        echo \"  all                         - Run all debug checks\"\n        ;;\nesac\nEOF\n\nchmod +x scripts/debug-terraform.sh\n```\n\n## Maintenance\n\n### Update Procedures\n\n```bash\n# Terraform update script\ncat \u003e scripts/update-terraform.sh \u003c\u003c'EOF'\n#!/bin/bash\n\nCURRENT_VERSION=$(terraform version -json | jq -r '.terraform_version')\necho \"Current Terraform version: $CURRENT_VERSION\"\n\n# Check for latest version\ncheck_latest_version() {\n    local latest_version\n    latest_version=$(curl -s https://api.github.com/repos/hashicorp/terraform/releases/latest | jq -r '.tag_name' | sed 's/v//')\n    echo \"Latest Terraform version: $latest_version\"\n    \n    if [[ \"$CURRENT_VERSION\" != \"$latest_version\" ]]; then\n        echo \"⚠️  Update available: $CURRENT_VERSION → $latest_version\"\n        return 1\n    else\n        echo \"✅ Terraform is up to date\"\n        return 0\n    fi\n}\n\n# Update using package manager\nupdate_terraform() {\n    echo \"🔄 Updating Terraform...\"\n    \n    if command -v apt \u0026\u003e/dev/null; then\n        sudo apt update \u0026\u0026 sudo apt upgrade terraform\n    elif command -v yum \u0026\u003e/dev/null; then\n        sudo yum update terraform\n    elif command -v dnf \u0026\u003e/dev/null; then\n        sudo dnf update terraform\n    elif command -v pacman \u0026\u003e/dev/null; then\n        sudo pacman -Syu terraform\n    elif command -v zypper \u0026\u003e/dev/null; then\n        sudo zypper update terraform\n    elif command -v brew \u0026\u003e/dev/null; then\n        brew upgrade terraform\n    else\n        echo \"❌ No supported package manager found\"\n        echo \"💡 Please update manually from: https://releases.hashicorp.com/terraform/\"\n        return 1\n    fi\n}\n\n# Update providers\nupdate_providers() {\n    echo \"🔄 Updating providers...\"\n    terraform init -upgrade\n}\n\n# Verify update\nverify_update() {\n    echo \"🔍 Verifying update...\"\n    \n    terraform version\n    \n    # Test basic functionality\n    if terraform validate; then\n        echo \"✅ Update verification successful\"\n    else\n        echo \"❌ Update verification failed\"\n        return 1\n    fi\n}\n\n# Main update process\nmain() {\n    if check_latest_version; then\n        exit 0\n    fi\n    \n    echo \"Proceed with update? (y/N)\"\n    read -r response\n    \n    if [[ \"$response\" =~ ^[Yy]$ ]]; then\n        update_terraform || exit 1\n        update_providers || exit 1\n        verify_update || exit 1\n        echo \"🎉 Terraform update completed successfully\"\n    else\n        echo \"Update cancelled\"\n    fi\n}\n\nmain \"$@\"\nEOF\n\nchmod +x scripts/update-terraform.sh\n```\n\n### Maintenance Tasks\n\n```bash\n# Comprehensive maintenance script\ncat \u003e scripts/terraform-maintenance.sh \u003c\u003c'EOF'\n#!/bin/bash\n\nMAINTENANCE_LOG=\"/var/log/terraform-maintenance-$(date +%Y%m%d_%H%M%S).log\"\n\nlog() {\n    echo \"$(date '+%Y-%m-%d %H:%M:%S') - $1\" | tee -a \"$MAINTENANCE_LOG\"\n}\n\n# Cleanup old plan files\ncleanup_plans() {\n    log \"🧹 Cleaning up old plan files...\"\n    find . -name \"*.tfplan\" -mtime +7 -delete\n    find . -name \"*.tfplan.json\" -mtime +7 -delete\n    log \"✅ Plan file cleanup completed\"\n}\n\n# Cleanup provider cache\ncleanup_provider_cache() {\n    log \"🧹 Cleaning up provider cache...\"\n    if [[ -d \"$HOME/.terraform.d/plugin-cache\" ]]; then\n        # Remove providers older than 30 days\n        find \"$HOME/.terraform.d/plugin-cache\" -type f -mtime +30 -delete\n        \n        # Remove empty directories\n        find \"$HOME/.terraform.d/plugin-cache\" -type d -empty -delete\n        \n        cache_size=$(du -sh \"$HOME/.terraform.d/plugin-cache\" 2\u003e/dev/null | cut -f1)\n        log \"✅ Provider cache cleanup completed - current size: $cache_size\"\n    fi\n}\n\n# Validate all configurations\nvalidate_configurations() {\n    log \"🔍 Validating all configurations...\"\n    \n    local validation_failed=false\n    \n    # Find all directories with Terraform files\n    find . -name \"*.tf\" -exec dirname {} \\; | sort -u | while read -r dir; do\n        log \"Validating: $dir\"\n        cd \"$dir\" || continue\n        \n        if terraform validate; then\n            log \"✅ $dir validation passed\"\n        else\n            log \"❌ $dir validation failed\"\n            validation_failed=true\n        fi\n        \n        cd - \u003e /dev/null\n    done\n    \n    if [[ \"$validation_failed\" == \"true\" ]]; then\n        log \"⚠️  Some validations failed - please review\"\n    else\n        log \"✅ All validations passed\"\n    fi\n}\n\n# Check for deprecated features\ncheck_deprecated() {\n    log \"🔍 Checking for deprecated features...\"\n    \n    # Check for deprecated syntax\n    local deprecated_patterns=(\n        \"provider\\s+\\\"[^\\\"]+\\\"\\s+{\" # Old provider syntax\n        \"terraform\\s+{[^}]*version\\s*=\" # Old terraform version constraints\n        \"ignore_changes\\s*=\" # Old ignore_changes syntax\n    )\n    \n    for pattern in \"${deprecated_patterns[@]}\"; do\n        if grep -r \"$pattern\" . --include=\"*.tf\" 2\u003e/dev/null; then\n            log \"⚠️  Deprecated pattern found: $pattern\"\n        fi\n    done\n    \n    log \"✅ Deprecation check completed\"\n}\n\n# Security audit\nsecurity_audit() {\n    log \"🔒 Performing security audit...\"\n    \n    # Check for potential security issues\n    local security_issues=()\n    \n    # Check for hardcoded secrets\n    if grep -r -i \"password\\s*=\\s*\\\"[^$]\" . --include=\"*.tf\" --include=\"*.tfvars\" 2\u003e/dev/null; then\n        security_issues+=(\"Potential hardcoded passwords\")\n    fi\n    \n    # Check for public access\n    if grep -r \"0.0.0.0/0\" . --include=\"*.tf\" 2\u003e/dev/null; then\n        security_issues+=(\"Public access (0.0.0.0/0) found\")\n    fi\n    \n    # Check for unencrypted resources\n    if grep -r \"encrypt.*=.*false\" . --include=\"*.tf\" 2\u003e/dev/null; then\n        security_issues+=(\"Unencrypted resources found\")\n    fi\n    \n    if [[ ${#security_issues[@]} -gt 0 ]]; then\n        log \"⚠️  Security issues found:\"\n        for issue in \"${security_issues[@]}\"; do\n            log \"  - $issue\"\n        done\n    else\n        log \"✅ No obvious security issues found\"\n    fi\n}\n\n# State health check\nstate_health_check() {\n    log \"🏥 Performing state health check...\"\n    \n    # Check state file size\n    if [[ -f \"terraform.tfstate\" ]]; then\n        state_size=$(stat -f%z \"terraform.tfstate\" 2\u003e/dev/null || stat -c%s \"terraform.tfstate\" 2\u003e/dev/null)\n        state_size_mb=$((state_size / 1024 / 1024))\n        \n        if [[ $state_size_mb -gt 50 ]]; then\n            log \"⚠️  Large state file detected: ${state_size_mb}MB\"\n        else\n            log \"✅ State file size OK: ${state_size_mb}MB\"\n        fi\n    fi\n    \n    # Check for drift\n    if terraform plan -detailed-exitcode \u003e /dev/null 2\u003e\u00261; then\n        log \"✅ No infrastructure drift detected\"\n    else\n        exit_code=$?\n        if [[ $exit_code -eq 2 ]]; then\n            log \"⚠️  Infrastructure drift detected\"\n        else\n            log \"❌ Error checking for drift\"\n        fi\n    fi\n}\n\n# Generate maintenance report\ngenerate_report() {\n    log \"📊 Generating maintenance report...\"\n    \n    local report_file=\"/tmp/terraform-maintenance-report-$(date +%Y%m%d_%H%M%S).md\"\n    \n    cat \u003e \"$report_file\" \u003c\u003cEOF\n# Terraform Maintenance Report\n\n**Date:** $(date)\n**Duration:** $((SECONDS / 60)) minutes\n\n## Summary\n\n- Configuration validation: $(grep \"validation\" \"$MAINTENANCE_LOG\" | grep -c \"passed\")\n- Security audit: Completed\n- State health check: Completed\n- Cleanup operations: Completed\n\n## Recommendations\n\n$(grep \"⚠️\" \"$MAINTENANCE_LOG\" | sed 's/.*⚠️  /- /')\n\n## Full Log\n\n\\`\\`\\`\n$(cat \"$MAINTENANCE_LOG\")\n\\`\\`\\`\nEOF\n    \n    log \"📄 Maintenance report generated: $report_file\"\n    \n    # Email report if configured\n    if [[ -n \"$MAINTENANCE_EMAIL\" ]]; then\n        mail -s \"Terraform Maintenance Report - $(date)\" \"$MAINTENANCE_EMAIL\" \u003c \"$report_file\"\n        log \"📧 Report emailed to: $MAINTENANCE_EMAIL\"\n    fi\n}\n\n# Main maintenance routine\nmain() {\n    log \"🚀 Starting Terraform maintenance...\"\n    \n    cleanup_plans\n    cleanup_provider_cache\n    validate_configurations\n    check_deprecated\n    security_audit\n    state_health_check\n    generate_report\n    \n    log \"🎉 Terraform maintenance completed\"\n    log \"📊 Total runtime: $((SECONDS / 60)) minutes\"\n}\n\n# Run maintenance\nmain \"$@\"\nEOF\n\nchmod +x scripts/terraform-maintenance.sh\n\n# Schedule maintenance with cron\ncat \u003e scripts/schedule-maintenance.sh \u003c\u003c'EOF'\n#!/bin/bash\n\n# Add to crontab for weekly maintenance\n(crontab -l 2\u003e/dev/null; echo \"0 2 * * 0 /path/to/terraform-maintenance.sh\") | crontab -\n\necho \"✅ Weekly maintenance scheduled for Sundays at 2 AM\"\nEOF\n\nchmod +x scripts/schedule-maintenance.sh\n```\n\n## Integration Examples\n\n### CI/CD Pipeline Integration\n\n```bash\n# GitHub Actions workflow\nmkdir -p .github/workflows\ncat \u003e .github/workflows/terraform.yml \u003c\u003cEOF\nname: Terraform Multi-Cloud Deployment\n\non:\n  push:\n    branches: [ main, develop ]\n  pull_request:\n    branches: [ main ]\n\nenv:\n  TF_VERSION: 1.6.4\n\njobs:\n  terraform:\n    runs-on: ubuntu-latest\n    strategy:\n      matrix:\n        environment: [development, staging, production]\n        \n    steps:\n    - name: Checkout code\n      uses: actions/checkout@v4\n    \n    - name: Setup Terraform\n      uses: hashicorp/setup-terraform@v3\n      with:\n        terraform_version: \\${{ env.TF_VERSION }}\n        cli_config_credentials_token: \\${{ secrets.TF_CLOUD_TOKEN }}\n    \n    - name: Configure AWS credentials\n      uses: aws-actions/configure-aws-credentials@v4\n      with:\n        aws-access-key-id: \\${{ secrets.AWS_ACCESS_KEY_ID }}\n        aws-secret-access-key: \\${{ secrets.AWS_SECRET_ACCESS_KEY }}\n        aws-region: us-west-2\n    \n    - name: Terraform Format Check\n      run: terraform fmt -check -recursive\n    \n    - name: Terraform Initialize\n      run: terraform init\n      working-directory: environments/\\${{ matrix.environment }}\n    \n    - name: Terraform Validate\n      run: terraform validate\n      working-directory: environments/\\${{ matrix.environment }}\n    \n    - name: Terraform Plan\n      run: terraform plan -var-file=\"\\${{ matrix.environment }}.tfvars\"\n      working-directory: environments/\\${{ matrix.environment }}\n    \n    - name: Security Scan with Checkov\n      uses: bridgecrewio/checkov-action@master\n      with:\n        directory: .\n        framework: terraform\n        output_format: sarif\n        output_file_path: checkov.sarif\n    \n    - name: Upload Checkov results\n      uses: github/codeql-action/upload-sarif@v2\n      if: always()\n      with:\n        sarif_file: checkov.sarif\n    \n    - name: Terraform Apply (Production)\n      if: github.ref == 'refs/heads/main' \u0026\u0026 matrix.environment == 'production'\n      run: terraform apply -auto-approve -var-file=\"production.tfvars\"\n      working-directory: environments/production\nEOF\n```\n\n### GitLab CI Integration\n\n```bash\ncat \u003e .gitlab-ci.yml \u003c\u003cEOF\nstages:\n  - validate\n  - plan\n  - apply\n  - destroy\n\nvariables:\n  TF_ROOT: \\${CI_PROJECT_DIR}\n  TF_VERSION: \"1.6.4\"\n  TF_IN_AUTOMATION: \"true\"\n\ncache:\n  key: \"\\${TF_ROOT}\"\n  paths:\n    - \\${TF_ROOT}/.terraform\n\nbefore_script:\n  - cd \\${TF_ROOT}\n  - terraform version\n  - terraform init\n\nvalidate:\n  stage: validate\n  script:\n    - terraform fmt -check -recursive\n    - terraform validate\n    - |\n      for dir in environments/*/; do\n        cd \"\\$dir\"\n        terraform validate\n        cd -\n      done\n  rules:\n    - if: '\\$CI_MERGE_REQUEST_IID'\n    - if: '\\$CI_COMMIT_BRANCH == \\$CI_DEFAULT_BRANCH'\n\nplan:production:\n  stage: plan\n  script:\n    - cd environments/production\n    - terraform plan -var-file=\"production.tfvars\" -out=\"production.tfplan\"\n  artifacts:\n    paths:\n      - environments/production/production.tfplan\n    expire_in: 1 week\n  rules:\n    - if: '\\$CI_COMMIT_BRANCH == \\$CI_DEFAULT_BRANCH'\n\napply:production:\n  stage: apply\n  script:\n    - cd environments/production\n    - terraform apply -input=false \"production.tfplan\"\n  dependencies:\n    - plan:production\n  rules:\n    - if: '\\$CI_COMMIT_BRANCH == \\$CI_DEFAULT_BRANCH'\n      when: manual\nEOF\n```\n\n### Jenkins Pipeline\n\n```groovy\n// Jenkinsfile\npipeline {\n    agent any\n    \n    environment {\n        TF_VERSION = '1.6.4'\n        AWS_DEFAULT_REGION = 'us-west-2'\n    }\n    \n    stages {\n        stage('Checkout') {\n            steps {\n                checkout scm\n            }\n        }\n        \n        stage('Setup') {\n            steps {\n                sh '''\n                    # Install Terraform if not present\n                    if ! command -v terraform \u0026\u003e /dev/null; then\n                        wget https://releases.hashicorp.com/terraform/${TF_VERSION}/terraform_${TF_VERSION}_linux_amd64.zip\n                        unzip terraform_${TF_VERSION}_linux_amd64.zip\n                        chmod +x terraform\n                        sudo mv terraform /usr/local/bin/\n                    fi\n                    \n                    terraform version\n                '''\n            }\n        }\n        \n        stage('Validate') {\n            parallel {\n                stage('Format Check') {\n                    steps {\n                        sh 'terraform fmt -check -recursive'\n                    }\n                }\n                stage('Configuration Validation') {\n                    steps {\n                        sh '''\n                            for dir in environments/*/; do\n                                cd \"$dir\"\n                                terraform init\n                                terraform validate\n                                cd -\n                            done\n                        '''\n                    }\n                }\n                stage('Security Scan') {\n                    steps {\n                        sh '''\n                            # Install and run Checkov\n                            pip3 install checkov\n                            checkov --framework terraform --directory .\n                        '''\n                    }\n                }\n            }\n        }\n        \n        stage('Plan') {\n            steps {\n                script {\n                    def environments = ['development', 'staging', 'production']\n                    def planResults = [:]\n                    \n                    environments.each { env -\u003e\n                        planResults[env] = {\n                            dir(\"environments/${env}\") {\n                                sh \"\"\"\n                                    terraform init\n                                    terraform plan -var-file=\"${env}.tfvars\" -out=\"${env}.tfplan\"\n                                \"\"\"\n                            }\n                        }\n                    }\n                    \n                    parallel planResults\n                }\n            }\n        }\n        \n        stage('Apply') {\n            when {\n                branch 'main'\n            }\n            steps {\n                script {\n                    input message: 'Apply Terraform changes?', ok: 'Apply'\n                    \n                    dir('environments/production') {\n                        sh 'terraform apply -input=false production.tfplan'\n                    }\n                }\n            }\n        }\n    }\n    \n    post {\n        always {\n            archiveArtifacts artifacts: 'environments/**/*.tfplan', fingerprint: true\n            publishHTML([\n                allowMissing: false,\n                alwaysLinkToLastBuild: true,\n                keepAll: true,\n                reportDir: 'checkov-report',\n                reportFiles: 'index.html',\n                reportName: 'Checkov Security Report'\n            ])\n        }\n        failure {\n            emailext (\n                subject: \"Terraform Pipeline Failed: ${env.JOB_NAME} - ${env.BUILD_NUMBER}\",\n                body: \"The Terraform pipeline has failed. Please check the build logs for details.\",\n                to: \"${env.CHANGE_AUTHOR_EMAIL}\"\n            )\n        }\n    }\n}\n```\n\n## Additional Resources\n\n- [Official Terraform Documentation](https://developer.hashicorp.com/terraform/docs)\n- [Terraform Registry](https://registry.terraform.io/)\n- [Terraform Best Practices](https://developer.hashicorp.com/terraform/cloud-docs/recommended-practices)\n- [Multi-Cloud Architecture Guide](https://developer.hashicorp.com/terraform/tutorials/aws-get-started)\n- [Security Best Practices](https://developer.hashicorp.com/terraform/language/values/sensitive)\n- [AWS Provider Documentation](https://registry.terraform.io/providers/hashicorp/aws/latest/docs)\n- [Azure Provider Documentation](https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs)\n- [GCP Provider Documentation](https://registry.terraform.io/providers/hashicorp/google/latest/docs)\n- [Terraform Community Forum](https://discuss.hashicorp.com/c/terraform-core)\n- [HashiCorp Learn Terraform](https://learn.hashicorp.com/terraform)\n\n---\n\n**Note:** This guide is part of the [HowToMgr](https://howtomgr.github.io) collection. Always refer to official documentation for the most up-to-date information.","readmeHtml":"\u003ch1 id=\"terraform-installation-guide\" class=\"mobile-header\"\u003eTerraform Installation Guide\u003c/h1\u003e\n\u003cp class=\"mobile-paragraph\"\u003eTerraform is a free and open-source Infrastructure as Code (IaC) tool developed by HashiCorp for building, changing, and versioning infrastructure safely and efficiently across multiple cloud providers. Originally created by Mitchell Hashimoto in 2014, Terraform uses declarative configuration files to manage infrastructure resources. It serves as a FOSS alternative to commercial IaC solutions like AWS CloudFormation, Azure Resource Manager, or proprietary enterprise tools, offering enterprise-grade features including multi-cloud management, state management, provider ecosystem, and team collaboration without licensing costs.\u003c/p\u003e\n\u003ch2 id=\"prerequisites\" class=\"mobile-header\"\u003ePrerequisites\u003c/h2\u003e\n\u003cli class=\"mobile-list-item\"\u003e\u003cstrong\u003eHardware Requirements\u003c/strong\u003e:\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eCPU: 1 core minimum (2+ cores recommended for large infrastructures)\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eRAM: 2GB minimum (4GB+ recommended for production)\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eStorage: 5GB minimum (more for state files and provider binaries)\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eNetwork: Stable connectivity for cloud provider APIs\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003e\u003cstrong\u003eOperating System\u003c/strong\u003e: \u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eLinux: Any modern distribution with kernel 3.2+\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003emacOS: 10.13+ (High Sierra or newer)\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eWindows: Windows Server 2016+ or Windows 10\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eFreeBSD: 12.0+\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003e\u003cstrong\u003eNetwork Requirements\u003c/strong\u003e:\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eHTTPS access to cloud provider APIs (port 443)\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eAccess to Terraform Registry (registry.terraform.io)\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eAccess to HashiCorp releases (releases.hashicorp.com)\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003e\u003cstrong\u003eDependencies\u003c/strong\u003e:\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eCloud provider CLI tools (aws-cli, azure-cli, gcloud)\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eGit for configuration management\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eText editor or IDE\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eRoot or administrative access for installation\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003e\u003cstrong\u003eSystem Access\u003c/strong\u003e: root or sudo privileges required for installation\u003c/li\u003e\n\u003ch2 id=\"installation\" class=\"mobile-header\"\u003eInstallation\u003c/h2\u003e\n\u003ch3 id=\"rhelcentosrocky-linuxalmalinux\" class=\"mobile-header\"\u003eRHEL/CentOS/Rocky Linux/AlmaLinux\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Add HashiCorp repository\nsudo yum install -y yum-utils\nsudo yum-config-manager --add-repo https://rpm.releases.hashicorp.com/RHEL/hashicorp.repo\n\n# Install Terraform\nsudo yum install -y terraform\n\n# Verify installation\nterraform version\n\n# Alternative: DNF for newer systems\nsudo dnf install -y yum-utils\nsudo dnf config-manager --add-repo https://rpm.releases.hashicorp.com/RHEL/hashicorp.repo\nsudo dnf install -y terraform\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"debianubuntu\" class=\"mobile-header\"\u003eDebian/Ubuntu\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Add HashiCorp GPG key\nwget -O- https://apt.releases.hashicorp.com/gpg | sudo gpg --dearmor -o /usr/share/keyrings/hashicorp-archive-keyring.gpg\n\n# Add HashiCorp repository\necho \u0026quot;deb [signed-by=/usr/share/keyrings/hashicorp-archive-keyring.gpg] https://apt.releases.hashicorp.com $(lsb_release -cs) main\u0026quot; | sudo tee /etc/apt/sources.list.d/hashicorp.list\n\n# Update and install Terraform\nsudo apt update\nsudo apt install -y terraform\n\n# Verify installation\nterraform version\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"arch-linux\" class=\"mobile-header\"\u003eArch Linux\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Install from community repository\nsudo pacman -S terraform\n\n# Alternative: Install from AUR\nyay -S terraform\n\n# Install additional tools\nsudo pacman -S terraform-docs tflint\n\n# Verify installation\nterraform version\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"alpine-linux\" class=\"mobile-header\"\u003eAlpine Linux\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Install from Alpine repositories\nsudo apk update\nsudo apk add terraform\n\n# Install additional tools\nsudo apk add bash git curl\n\n# Verify installation\nterraform version\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"opensusesles\" class=\"mobile-header\"\u003eopenSUSE/SLES\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# openSUSE Leap/Tumbleweed\nsudo zypper install -y terraform\n\n# SLES 15\nsudo SUSEConnect -p sle-module-development-tools/15.5/x86_64\nsudo zypper install -y terraform\n\n# Alternative: Add HashiCorp repository\nsudo zypper addrepo https://rpm.releases.hashicorp.com/SLES/hashicorp.repo\nsudo zypper refresh\nsudo zypper install terraform\n\n# Verify installation\nterraform version\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"macos\" class=\"mobile-header\"\u003emacOS\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Using Homebrew\nbrew tap hashicorp/tap\nbrew install hashicorp/tap/terraform\n\n# Alternative: Install specific version\nbrew install terraform@1.6\n\n# Verify installation\nterraform version\n\n# Using tfenv for version management\nbrew install tfenv\ntfenv install latest\ntfenv use latest\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"freebsd\" class=\"mobile-header\"\u003eFreeBSD\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Using pkg\npkg install terraform\n\n# Using ports\ncd /usr/ports/sysutils/terraform\nmake install clean\n\n# Verify installation\nterraform version\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"windows\" class=\"mobile-header\"\u003eWindows\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"powershell\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003epowershell\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-powershell\"\u003e# Method 1: Using Chocolatey\nchoco install terraform\n\n# Method 2: Using Scoop\nscoop bucket add main\nscoop install terraform\n\n# Method 3: Manual installation\n# Download from https://releases.hashicorp.com/terraform/\n# Extract terraform.exe to C:\\terraform\n# Add C:\\terraform to PATH\n\n# Method 4: Using Winget\nwinget install HashiCorp.Terraform\n\n# Verify installation\nterraform version\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"initial-configuration\" class=\"mobile-header\"\u003eInitial Configuration\u003c/h2\u003e\n\u003ch3 id=\"first-run-setup\" class=\"mobile-header\"\u003eFirst-Run Setup\u003c/h3\u003e\n\u003cp class=\"mobile-paragraph\"\u003e1. \u003cstrong\u003eCreate terraform user\u003c/strong\u003e (optional for dedicated service):\u003c/p\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Linux systems\nsudo useradd -r -d /opt/terraform -s /sbin/nologin -c \u0026quot;Terraform Service\u0026quot; terraform\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003cp class=\"mobile-paragraph\"\u003e2. \u003cstrong\u003eDefault configuration locations\u003c/strong\u003e:\u003c/p\u003e\n\u003cli class=\"mobile-list-item\"\u003eRHEL/CentOS/Rocky/AlmaLinux: \u003ccode class=\"mobile-inline-code\"\u003e/etc/terraform/\u003c/code\u003e (custom) or \u003ccode class=\"mobile-inline-code\"\u003e/usr/local/bin/\u003c/code\u003e\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eDebian/Ubuntu: \u003ccode class=\"mobile-inline-code\"\u003e/etc/terraform/\u003c/code\u003e (custom) or \u003ccode class=\"mobile-inline-code\"\u003e/usr/local/bin/\u003c/code\u003e\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eArch Linux: \u003ccode class=\"mobile-inline-code\"\u003e/etc/terraform/\u003c/code\u003e (custom) or \u003ccode class=\"mobile-inline-code\"\u003e/usr/bin/\u003c/code\u003e\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eAlpine Linux: \u003ccode class=\"mobile-inline-code\"\u003e/etc/terraform/\u003c/code\u003e (custom) or \u003ccode class=\"mobile-inline-code\"\u003e/usr/bin/\u003c/code\u003e\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eopenSUSE/SLES: \u003ccode class=\"mobile-inline-code\"\u003e/etc/terraform/\u003c/code\u003e (custom) or \u003ccode class=\"mobile-inline-code\"\u003e/usr/local/bin/\u003c/code\u003e\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003emacOS: \u003ccode class=\"mobile-inline-code\"\u003e/usr/local/etc/terraform/\u003c/code\u003e or \u003ccode class=\"mobile-inline-code\"\u003e/opt/homebrew/etc/terraform/\u003c/code\u003e\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eFreeBSD: \u003ccode class=\"mobile-inline-code\"\u003e/usr/local/etc/terraform/\u003c/code\u003e\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eWindows: \u003ccode class=\"mobile-inline-code\"\u003eC:\\terraform\\\u003c/code\u003e or \u003ccode class=\"mobile-inline-code\"\u003e%APPDATA%\\terraform\\\u003c/code\u003e\u003c/li\u003e\n\u003cp class=\"mobile-paragraph\"\u003e3. \u003cstrong\u003eEssential initial configuration\u003c/strong\u003e:\u003c/p\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Create workspace directory\nmkdir -p ~/terraform/projects\ncd ~/terraform/projects\n\n# Create first Terraform configuration\ncat \u0026gt; main.tf \u0026lt;\u0026lt;EOF\nterraform {\n  required_version = \u0026quot;\u0026gt;= 1.6\u0026quot;\n  required_providers {\n    local = {\n      source  = \u0026quot;hashicorp/local\u0026quot;\n      version = \u0026quot;~\u0026gt; 2.0\u0026quot;\n    }\n  }\n}\n\nresource \u0026quot;local_file\u0026quot; \u0026quot;hello_world\u0026quot; {\n  content  = \u0026quot;Hello, World from Terraform!\u0026quot;\n  filename = \u0026quot;hello.txt\u0026quot;\n}\nEOF\n\n# Initialize Terraform\nterraform init\n\n# Validate configuration\nterraform validate\n\n# Plan deployment\nterraform plan\n\n# Apply configuration\nterraform apply\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"testing-initial-setup\" class=\"mobile-header\"\u003eTesting Initial Setup\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Check Terraform version\nterraform version\n\n# Validate configuration\nterraform validate\n\n# Format configuration files\nterraform fmt\n\n# Initialize and test basic functionality\nterraform init\nterraform plan\nterraform apply\n\n# List state\nterraform state list\n\n# Show state details\nterraform show\n\n# Clean up test resources\nterraform destroy\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003cp class=\"mobile-paragraph\"\u003e\u003cstrong\u003eWARNING:\u003c/strong\u003e Configure proper authentication for cloud providers before deploying real infrastructure!\u003c/p\u003e\n\u003ch2 id=\"service-management\" class=\"mobile-header\"\u003eService Management\u003c/h2\u003e\n\u003ch3 id=\"systemd-linux-systems\" class=\"mobile-header\"\u003esystemd (Linux Systems)\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Create systemd service for Terraform agent (if using)\nsudo tee /etc/systemd/system/terraform-agent.service \u0026lt;\u0026lt;EOF\n[Unit]\nDescription=Terraform Agent\nAfter=network.target\n\n[Service]\nType=simple\nUser=terraform\nWorkingDirectory=/opt/terraform\nExecStart=/usr/local/bin/terraform-agent\nRestart=always\nRestartSec=10\n\n[Install]\nWantedBy=multi-user.target\nEOF\n\nsudo systemctl daemon-reload\nsudo systemctl enable terraform-agent\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"openrc-alpine-linux\" class=\"mobile-header\"\u003eOpenRC (Alpine Linux)\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Create OpenRC service script\nsudo tee /etc/init.d/terraform-agent \u0026lt;\u0026lt;EOF\n#!/sbin/openrc-run\n\nname=\u0026quot;terraform-agent\u0026quot;\ndescription=\u0026quot;Terraform Agent\u0026quot;\ncommand=\u0026quot;/usr/bin/terraform-agent\u0026quot;\ncommand_user=\u0026quot;terraform\u0026quot;\ncommand_background=true\npidfile=\u0026quot;/var/run/terraform-agent.pid\u0026quot;\n\ndepend() {\n    need net\n}\nEOF\n\nsudo chmod +x /etc/init.d/terraform-agent\nrc-update add terraform-agent default\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"rcd-freebsd\" class=\"mobile-header\"\u003erc.d (FreeBSD)\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Create rc.d script\nsudo tee /usr/local/etc/rc.d/terraform_agent \u0026lt;\u0026lt;EOF\n#!/bin/sh\n. /etc/rc.subr\n\nname=terraform_agent\nrcvar=terraform_agent_enable\ncommand=\u0026quot;/usr/local/bin/terraform-agent\u0026quot;\npidfile=\u0026quot;/var/run/terraform_agent.pid\u0026quot;\nstart_cmd=\u0026quot;terraform_agent_start\u0026quot;\n\nterraform_agent_start() {\n    daemon -p \\${pidfile} \\${command}\n}\n\nload_rc_config \\$name\nrun_rc_command \u0026quot;\\$1\u0026quot;\nEOF\n\nsudo chmod +x /usr/local/etc/rc.d/terraform_agent\necho \u0026#039;terraform_agent_enable=\u0026quot;YES\u0026quot;\u0026#039; \u0026gt;\u0026gt; /etc/rc.conf\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"launchd-macos\" class=\"mobile-header\"\u003elaunchd (macOS)\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Create LaunchDaemon plist\nsudo tee /Library/LaunchDaemons/com.hashicorp.terraform.agent.plist \u0026lt;\u0026lt;EOF\n\u0026lt;?xml version=\u0026quot;1.0\u0026quot; encoding=\u0026quot;UTF-8\u0026quot;?\u0026gt;\n\u0026lt;!DOCTYPE plist PUBLIC \u0026quot;-//Apple//DTD PLIST 1.0//EN\u0026quot; \u0026quot;http://www.apple.com/DTDs/PropertyList-1.0.dtd\u0026quot;\u0026gt;\n\u0026lt;plist version=\u0026quot;1.0\u0026quot;\u0026gt;\n\u0026lt;dict\u0026gt;\n    \u0026lt;key\u0026gt;Label\u0026lt;/key\u0026gt;\n    \u0026lt;string\u0026gt;com.hashicorp.terraform.agent\u0026lt;/string\u0026gt;\n    \u0026lt;key\u0026gt;ProgramArguments\u0026lt;/key\u0026gt;\n    \u0026lt;array\u0026gt;\n        \u0026lt;string\u0026gt;/usr/local/bin/terraform-agent\u0026lt;/string\u0026gt;\n    \u0026lt;/array\u0026gt;\n    \u0026lt;key\u0026gt;RunAtLoad\u0026lt;/key\u0026gt;\n    \u0026lt;true/\u0026gt;\n    \u0026lt;key\u0026gt;KeepAlive\u0026lt;/key\u0026gt;\n    \u0026lt;true/\u0026gt;\n\u0026lt;/dict\u0026gt;\n\u0026lt;/plist\u0026gt;\nEOF\n\nsudo launchctl load /Library/LaunchDaemons/com.hashicorp.terraform.agent.plist\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"windows-service-manager\" class=\"mobile-header\"\u003eWindows Service Manager\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"powershell\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003epowershell\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-powershell\"\u003e# Install Terraform as Windows service using NSSM\nnssm install TerraformAgent \u0026quot;C:\\terraform\\terraform-agent.exe\u0026quot;\nnssm set TerraformAgent AppDirectory \u0026quot;C:\\terraform\u0026quot;\nnssm set TerraformAgent DisplayName \u0026quot;Terraform Agent\u0026quot;\nnssm set TerraformAgent Description \u0026quot;HashiCorp Terraform Agent\u0026quot;\nnssm start TerraformAgent\n\n# Alternative: Using sc command\nsc create TerraformAgent binPath=\u0026quot;C:\\terraform\\terraform-agent.exe\u0026quot; start=auto\nsc start TerraformAgent\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"advanced-configuration\" class=\"mobile-header\"\u003eAdvanced Configuration\u003c/h2\u003e\n\u003ch3 id=\"multi-cloud-provider-setup\" class=\"mobile-header\"\u003eMulti-Cloud Provider Setup\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Create comprehensive multi-cloud configuration\ncat \u0026gt; providers.tf \u0026lt;\u0026lt;EOF\nterraform {\n  required_version = \u0026quot;\u0026gt;= 1.6\u0026quot;\n  required_providers {\n    aws = {\n      source  = \u0026quot;hashicorp/aws\u0026quot;\n      version = \u0026quot;~\u0026gt; 5.0\u0026quot;\n    }\n    azurerm = {\n      source  = \u0026quot;hashicorp/azurerm\u0026quot;\n      version = \u0026quot;~\u0026gt; 3.0\u0026quot;\n    }\n    google = {\n      source  = \u0026quot;hashicorp/google\u0026quot;\n      version = \u0026quot;~\u0026gt; 5.0\u0026quot;\n    }\n    kubernetes = {\n      source  = \u0026quot;hashicorp/kubernetes\u0026quot;\n      version = \u0026quot;~\u0026gt; 2.0\u0026quot;\n    }\n    helm = {\n      source  = \u0026quot;hashicorp/helm\u0026quot;\n      version = \u0026quot;~\u0026gt; 2.0\u0026quot;\n    }\n  }\n  \n  # Remote state configuration\n  backend \u0026quot;s3\u0026quot; {\n    bucket = \u0026quot;terraform-state-bucket\u0026quot;\n    key    = \u0026quot;infrastructure/terraform.tfstate\u0026quot;\n    region = \u0026quot;us-west-2\u0026quot;\n    \n    # State locking with DynamoDB\n    dynamodb_table = \u0026quot;terraform-state-lock\u0026quot;\n    encrypt        = true\n  }\n}\n\n# AWS Provider\nprovider \u0026quot;aws\u0026quot; {\n  region = var.aws_region\n  \n  default_tags {\n    tags = {\n      Environment   = var.environment\n      ManagedBy     = \u0026quot;terraform\u0026quot;\n      Project       = var.project_name\n      Owner         = var.owner\n    }\n  }\n}\n\n# Azure Provider\nprovider \u0026quot;azurerm\u0026quot; {\n  features {\n    resource_group {\n      prevent_deletion_if_contains_resources = false\n    }\n    key_vault {\n      purge_soft_delete_on_destroy = true\n    }\n  }\n}\n\n# Google Cloud Provider\nprovider \u0026quot;google\u0026quot; {\n  project = var.gcp_project_id\n  region  = var.gcp_region\n  zone    = var.gcp_zone\n}\n\n# Kubernetes Provider\nprovider \u0026quot;kubernetes\u0026quot; {\n  config_path = \u0026quot;~/.kube/config\u0026quot;\n}\n\n# Helm Provider\nprovider \u0026quot;helm\u0026quot; {\n  kubernetes {\n    config_path = \u0026quot;~/.kube/config\u0026quot;\n  }\n}\nEOF\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"enterprise-features-configuration\" class=\"mobile-header\"\u003eEnterprise Features Configuration\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Terraform Cloud/Enterprise configuration\ncat \u0026gt; cloud.tf \u0026lt;\u0026lt;EOF\nterraform {\n  cloud {\n    organization = \u0026quot;your-organization\u0026quot;\n    \n    workspaces {\n      name = \u0026quot;production-infrastructure\u0026quot;\n    }\n  }\n}\n\n# Remote execution configuration\nterraform {\n  cloud {\n    organization = \u0026quot;your-organization\u0026quot;\n    \n    workspaces {\n      tags = [\u0026quot;production\u0026quot;, \u0026quot;web-app\u0026quot;]\n    }\n  }\n  \n  required_providers {\n    tfe = {\n      source  = \u0026quot;hashicorp/tfe\u0026quot;\n      version = \u0026quot;~\u0026gt; 0.48\u0026quot;\n    }\n  }\n}\n\n# Terraform Enterprise configuration\nprovider \u0026quot;tfe\u0026quot; {\n  hostname = \u0026quot;terraform.company.com\u0026quot;\n  token    = var.tfe_token\n}\n\n# Workspace configuration\nresource \u0026quot;tfe_workspace\u0026quot; \u0026quot;production\u0026quot; {\n  name         = \u0026quot;production-infrastructure\u0026quot;\n  organization = var.tfe_organization\n  \n  auto_apply = false\n  queue_all_runs = false\n  \n  terraform_version = \u0026quot;1.6.4\u0026quot;\n  \n  vcs_repo {\n    identifier     = \u0026quot;company/infrastructure\u0026quot;\n    branch         = \u0026quot;main\u0026quot;\n    oauth_token_id = var.vcs_oauth_token_id\n  }\n  \n  working_directory = \u0026quot;environments/production\u0026quot;\n}\nEOF\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"advanced-state-management\" class=\"mobile-header\"\u003eAdvanced State Management\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Encrypted remote state with multiple backends\ncat \u0026gt; backend-s3.tf \u0026lt;\u0026lt;EOF\n# S3 backend with encryption and locking\nterraform {\n  backend \u0026quot;s3\u0026quot; {\n    bucket         = \u0026quot;terraform-state-bucket\u0026quot;\n    key            = \u0026quot;infrastructure/terraform.tfstate\u0026quot;\n    region         = \u0026quot;us-west-2\u0026quot;\n    encrypt        = true\n    kms_key_id     = \u0026quot;arn:aws:kms:us-west-2:ACCOUNT:key/KEY-ID\u0026quot;\n    dynamodb_table = \u0026quot;terraform-state-lock\u0026quot;\n    \n    # Additional security\n    skip_region_validation      = false\n    skip_credentials_validation = false\n    skip_metadata_api_check     = false\n  }\n}\n\n# State bucket with versioning and lifecycle\nresource \u0026quot;aws_s3_bucket\u0026quot; \u0026quot;terraform_state\u0026quot; {\n  bucket = \u0026quot;terraform-state-bucket\u0026quot;\n  \n  tags = {\n    Name        = \u0026quot;Terraform State Bucket\u0026quot;\n    Environment = var.environment\n  }\n}\n\nresource \u0026quot;aws_s3_bucket_versioning\u0026quot; \u0026quot;terraform_state_versioning\u0026quot; {\n  bucket = aws_s3_bucket.terraform_state.id\n  versioning_configuration {\n    status = \u0026quot;Enabled\u0026quot;\n  }\n}\n\nresource \u0026quot;aws_s3_bucket_server_side_encryption_configuration\u0026quot; \u0026quot;terraform_state_encryption\u0026quot; {\n  bucket = aws_s3_bucket.terraform_state.id\n\n  rule {\n    apply_server_side_encryption_by_default {\n      kms_master_key_id = aws_kms_key.terraform_bucket_key.arn\n      sse_algorithm     = \u0026quot;aws:kms\u0026quot;\n    }\n  }\n}\n\nresource \u0026quot;aws_s3_bucket_public_access_block\u0026quot; \u0026quot;terraform_state\u0026quot; {\n  bucket = aws_s3_bucket.terraform_state.id\n\n  block_public_acls       = true\n  block_public_policy     = true\n  ignore_public_acls      = true\n  restrict_public_buckets = true\n}\n\n# KMS key for encryption\nresource \u0026quot;aws_kms_key\u0026quot; \u0026quot;terraform_bucket_key\u0026quot; {\n  description             = \u0026quot;KMS key for Terraform state bucket encryption\u0026quot;\n  deletion_window_in_days = 7\n\n  tags = {\n    Name        = \u0026quot;Terraform State Bucket Key\u0026quot;\n    Environment = var.environment\n  }\n}\n\n# DynamoDB table for state locking\nresource \u0026quot;aws_dynamodb_table\u0026quot; \u0026quot;terraform_state_lock\u0026quot; {\n  name           = \u0026quot;terraform-state-lock\u0026quot;\n  billing_mode   = \u0026quot;PAY_PER_REQUEST\u0026quot;\n  hash_key       = \u0026quot;LockID\u0026quot;\n\n  attribute {\n    name = \u0026quot;LockID\u0026quot;\n    type = \u0026quot;S\u0026quot;\n  }\n\n  server_side_encryption {\n    enabled = true\n  }\n\n  point_in_time_recovery {\n    enabled = true\n  }\n\n  tags = {\n    Name        = \u0026quot;Terraform State Lock Table\u0026quot;\n    Environment = var.environment\n  }\n}\nEOF\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"reverse-proxy-setup\" class=\"mobile-header\"\u003eReverse Proxy Setup\u003c/h2\u003e\n\u003cp class=\"mobile-paragraph\"\u003eTerraform itself doesn't typically require reverse proxy setup, but when using Terraform Enterprise or Cloud, you might need to configure proxies for API access:\u003c/p\u003e\n\u003ch3 id=\"corporate-proxy-configuration\" class=\"mobile-header\"\u003eCorporate Proxy Configuration\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Configure Terraform to work through corporate proxy\nexport HTTP_PROXY=http://proxy.company.com:8080\nexport HTTPS_PROXY=http://proxy.company.com:8080\nexport NO_PROXY=localhost,127.0.0.1,.company.com\n\n# Add to ~/.bashrc or ~/.zshrc\ncat \u0026gt;\u0026gt; ~/.bashrc \u0026lt;\u0026lt;EOF\n# Terraform proxy settings\nexport HTTP_PROXY=http://proxy.company.com:8080\nexport HTTPS_PROXY=http://proxy.company.com:8080\nexport NO_PROXY=localhost,127.0.0.1,.company.com\nEOF\n\n# Configure Git for proxy (if needed for modules)\ngit config --global http.proxy http://proxy.company.com:8080\ngit config --global https.proxy http://proxy.company.com:8080\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"nginx-configuration-for-terraform-enterprise\" class=\"mobile-header\"\u003enginx Configuration for Terraform Enterprise\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"nginx\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003enginx\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-nginx\"\u003e# /etc/nginx/sites-available/terraform-enterprise\nupstream terraform_enterprise {\n    server 127.0.0.1:8800;\n    server 127.0.0.1:8801 backup;\n}\n\nserver {\n    listen 443 ssl http2;\n    server_name terraform.company.com;\n\n    ssl_certificate /etc/ssl/certs/terraform.company.com.crt;\n    ssl_certificate_key /etc/ssl/private/terraform.company.com.key;\n\n    # Security headers\n    add_header Strict-Transport-Security \u0026quot;max-age=31536000\u0026quot; always;\n    add_header X-Frame-Options \u0026quot;DENY\u0026quot; always;\n    add_header X-Content-Type-Options \u0026quot;nosniff\u0026quot; always;\n\n    location / {\n        proxy_pass http://terraform_enterprise;\n        proxy_set_header Host $host;\n        proxy_set_header X-Real-IP $remote_addr;\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n        proxy_set_header X-Forwarded-Proto $scheme;\n        \n        # WebSocket support for real-time updates\n        proxy_http_version 1.1;\n        proxy_set_header Upgrade $http_upgrade;\n        proxy_set_header Connection \u0026quot;upgrade\u0026quot;;\n        \n        # Timeouts for long-running operations\n        proxy_connect_timeout 60s;\n        proxy_send_timeout 60s;\n        proxy_read_timeout 300s;\n    }\n}\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"security-configuration\" class=\"mobile-header\"\u003eSecurity Configuration\u003c/h2\u003e\n\u003ch3 id=\"secure-credential-management\" class=\"mobile-header\"\u003eSecure Credential Management\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Use environment variables for credentials\ncat \u0026gt; .env.example \u0026lt;\u0026lt;EOF\n# AWS credentials\nAWS_ACCESS_KEY_ID=your_access_key\nAWS_SECRET_ACCESS_KEY=your_secret_key\nAWS_DEFAULT_REGION=us-west-2\n\n# Azure credentials\nARM_CLIENT_ID=your_client_id\nARM_CLIENT_SECRET=your_client_secret\nARM_SUBSCRIPTION_ID=your_subscription_id\nARM_TENANT_ID=your_tenant_id\n\n# GCP credentials\nGOOGLE_APPLICATION_CREDENTIALS=/path/to/service-account-key.json\nGOOGLE_PROJECT=your_project_id\n\n# Terraform Cloud\nTF_CLOUD_TOKEN=your_terraform_cloud_token\nEOF\n\n# Use IAM roles for AWS (recommended)\ncat \u0026gt; aws-iam-role.tf \u0026lt;\u0026lt;EOF\n# IAM role for Terraform execution\nresource \u0026quot;aws_iam_role\u0026quot; \u0026quot;terraform_execution\u0026quot; {\n  name = \u0026quot;TerraformExecutionRole\u0026quot;\n\n  assume_role_policy = jsonencode({\n    Version = \u0026quot;2012-10-17\u0026quot;\n    Statement = [\n      {\n        Action = \u0026quot;sts:AssumeRole\u0026quot;\n        Effect = \u0026quot;Allow\u0026quot;\n        Principal = {\n          Service = \u0026quot;ec2.amazonaws.com\u0026quot;\n        }\n      },\n    ]\n  })\n}\n\n# Attach managed policies with least privilege\nresource \u0026quot;aws_iam_role_policy_attachment\u0026quot; \u0026quot;terraform_execution\u0026quot; {\n  for_each = toset([\n    \u0026quot;arn:aws:iam::aws:policy/PowerUserAccess\u0026quot;\n  ])\n  \n  role       = aws_iam_role.terraform_execution.name\n  policy_arn = each.value\n}\n\n# Create instance profile\nresource \u0026quot;aws_iam_instance_profile\u0026quot; \u0026quot;terraform_execution\u0026quot; {\n  name = \u0026quot;TerraformExecutionProfile\u0026quot;\n  role = aws_iam_role.terraform_execution.name\n}\nEOF\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"security-scanning-and-compliance\" class=\"mobile-header\"\u003eSecurity Scanning and Compliance\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Pre-commit hooks for security\ncat \u0026gt; .pre-commit-config.yaml \u0026lt;\u0026lt;EOF\nrepos:\n- repo: https://github.com/antonbabenko/pre-commit-terraform\n  rev: v1.83.5\n  hooks:\n    - id: terraform_fmt\n    - id: terraform_validate\n    - id: terraform_docs\n    - id: terraform_tflint\n    - id: terraform_checkov\n    - id: terraform_trivy\n\n- repo: https://github.com/Yelp/detect-secrets\n  rev: v1.4.0\n  hooks:\n    - id: detect-secrets\n      args: [\u0026#039;--baseline\u0026#039;, \u0026#039;.secrets.baseline\u0026#039;]\nEOF\n\n# Checkov configuration for security scanning\ncat \u0026gt; .checkov.yaml \u0026lt;\u0026lt;EOF\nframework:\n  - terraform\n  - secrets\n\ncheck:\n  - CKV_AWS_79  # Ensure Instance Metadata Service Version 1 is not enabled\n  - CKV_AWS_8   # Ensure Launch Configuration EBS encryption\n  - CKV_AZURE_1 # Ensure storage account encryption\n\nskip-check:\n  - CKV_AWS_23  # Skip S3 bucket public read check for specific use cases\n\noutput: cli\nquiet: false\ncompact: false\nEOF\n\n# TFLint configuration\ncat \u0026gt; .tflint.hcl \u0026lt;\u0026lt;EOF\nplugin \u0026quot;aws\u0026quot; {\n    enabled = true\n    version = \u0026quot;0.21.2\u0026quot;\n    source  = \u0026quot;github.com/terraform-linters/tflint-ruleset-aws\u0026quot;\n}\n\nplugin \u0026quot;azurerm\u0026quot; {\n    enabled = true\n    version = \u0026quot;0.21.0\u0026quot;\n    source  = \u0026quot;github.com/terraform-linters/tflint-ruleset-azurerm\u0026quot;\n}\n\nrule \u0026quot;terraform_unused_declarations\u0026quot; {\n  enabled = true\n}\n\nrule \u0026quot;terraform_naming_convention\u0026quot; {\n  enabled = true\n  format  = \u0026quot;snake_case\u0026quot;\n}\nEOF\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"policy-as-code-with-opa\" class=\"mobile-header\"\u003ePolicy as Code with OPA\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# OPA (Open Policy Agent) security policies\ncat \u0026gt; policy/security.rego \u0026lt;\u0026lt;EOF\npackage terraform.security\n\n# Deny instances without encryption\ndeny[reason] {\n    resource := input.resource_changes[_]\n    resource.type == \u0026quot;aws_instance\u0026quot;\n    resource.change.after.root_block_device[_].encrypted == false\n    reason := \u0026quot;AWS instances must have encrypted root volumes\u0026quot;\n}\n\n# Deny public S3 buckets\ndeny[reason] {\n    resource := input.resource_changes[_]\n    resource.type == \u0026quot;aws_s3_bucket_public_access_block\u0026quot;\n    resource.change.after.block_public_acls == false\n    reason := \u0026quot;S3 buckets must block public access\u0026quot;\n}\n\n# Require specific instance types in production\ndeny[reason] {\n    resource := input.resource_changes[_]\n    resource.type == \u0026quot;aws_instance\u0026quot;\n    instance_type := resource.change.after.instance_type\n    not allowed_instance_type(instance_type)\n    workspace := input.terraform_version.workspace\n    workspace == \u0026quot;production\u0026quot;\n    reason := sprintf(\u0026quot;Production instances must use approved instance types, got: %v\u0026quot;, [instance_type])\n}\n\nallowed_instance_type(instance_type) {\n    allowed_types := [\u0026quot;t3.micro\u0026quot;, \u0026quot;t3.small\u0026quot;, \u0026quot;t3.medium\u0026quot;, \u0026quot;m5.large\u0026quot;, \u0026quot;m5.xlarge\u0026quot;]\n    instance_type in allowed_types\n}\nEOF\n\n# Policy validation script\ncat \u0026gt; scripts/validate-policy.sh \u0026lt;\u0026lt;\u0026#039;EOF\u0026#039;\n#!/bin/bash\n\n# Generate Terraform plan\nterraform plan -out=tfplan\nterraform show -json tfplan \u0026gt; tfplan.json\n\n# Validate against policies\nconftest test tfplan.json --policy policy/\n\n# Cleanup\nrm tfplan tfplan.json\nEOF\n\nchmod +x scripts/validate-policy.sh\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"database-setup\" class=\"mobile-header\"\u003eDatabase Setup\u003c/h2\u003e\n\u003cp class=\"mobile-paragraph\"\u003eTerraform doesn't require a traditional database, but it does use state files and can integrate with various storage backends:\u003c/p\u003e\n\u003ch3 id=\"state-storage-backends\" class=\"mobile-header\"\u003eState Storage Backends\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# PostgreSQL backend (for Terraform Enterprise)\ncat \u0026gt; backend-postgres.tf \u0026lt;\u0026lt;EOF\nterraform {\n  backend \u0026quot;pg\u0026quot; {\n    conn_str = \u0026quot;postgres://user:pass@localhost/terraform_backend?sslmode=require\u0026quot;\n  }\n}\nEOF\n\n# Consul backend for distributed state\ncat \u0026gt; backend-consul.tf \u0026lt;\u0026lt;EOF\nterraform {\n  backend \u0026quot;consul\u0026quot; {\n    address = \u0026quot;consul.company.com:8500\u0026quot;\n    scheme  = \u0026quot;https\u0026quot;\n    path    = \u0026quot;terraform/infrastructure\u0026quot;\n  }\n}\nEOF\n\n# etcd backend\ncat \u0026gt; backend-etcd.tf \u0026lt;\u0026lt;EOF\nterraform {\n  backend \u0026quot;etcdv3\u0026quot; {\n    endpoints = [\u0026quot;http://etcd1:2379\u0026quot;, \u0026quot;http://etcd2:2379\u0026quot;, \u0026quot;http://etcd3:2379\u0026quot;]\n    lock      = true\n    prefix    = \u0026quot;terraform-state/\u0026quot;\n  }\n}\nEOF\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"database-infrastructure-management\" class=\"mobile-header\"\u003eDatabase Infrastructure Management\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Database deployment with Terraform\ncat \u0026gt; database.tf \u0026lt;\u0026lt;EOF\n# RDS instance with Multi-AZ\nresource \u0026quot;aws_db_instance\u0026quot; \u0026quot;main\u0026quot; {\n  identifier = \u0026quot;${var.project_name}-db\u0026quot;\n  \n  engine         = \u0026quot;postgresql\u0026quot;\n  engine_version = \u0026quot;15.4\u0026quot;\n  instance_class = \u0026quot;db.t3.micro\u0026quot;\n  \n  allocated_storage     = 20\n  max_allocated_storage = 100\n  storage_type         = \u0026quot;gp3\u0026quot;\n  storage_encrypted    = true\n  kms_key_id          = aws_kms_key.rds.arn\n  \n  db_name  = var.database_name\n  username = var.database_username\n  password = var.database_password\n  port     = 5432\n  \n  multi_az               = true\n  publicly_accessible    = false\n  backup_retention_period = 7\n  backup_window          = \u0026quot;03:00-04:00\u0026quot;\n  maintenance_window     = \u0026quot;sun:04:00-sun:05:00\u0026quot;\n  \n  skip_final_snapshot = false\n  final_snapshot_identifier = \u0026quot;${var.project_name}-db-final-snapshot\u0026quot;\n  \n  vpc_security_group_ids = [aws_security_group.rds.id]\n  db_subnet_group_name   = aws_db_subnet_group.main.name\n  \n  tags = var.common_tags\n}\n\n# Database subnet group\nresource \u0026quot;aws_db_subnet_group\u0026quot; \u0026quot;main\u0026quot; {\n  name       = \u0026quot;${var.project_name}-db-subnet-group\u0026quot;\n  subnet_ids = var.private_subnet_ids\n\n  tags = merge(var.common_tags, {\n    Name = \u0026quot;${var.project_name}-db-subnet-group\u0026quot;\n  })\n}\n\n# KMS key for RDS encryption\nresource \u0026quot;aws_kms_key\u0026quot; \u0026quot;rds\u0026quot; {\n  description             = \u0026quot;KMS key for RDS encryption\u0026quot;\n  deletion_window_in_days = 7\n\n  tags = merge(var.common_tags, {\n    Name = \u0026quot;${var.project_name}-rds-kms-key\u0026quot;\n  })\n}\nEOF\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"performance-optimization\" class=\"mobile-header\"\u003ePerformance Optimization\u003c/h2\u003e\n\u003ch3 id=\"terraform-performance-tuning\" class=\"mobile-header\"\u003eTerraform Performance Tuning\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Optimize Terraform execution\ncat \u0026gt; terraform.tfvars \u0026lt;\u0026lt;EOF\n# Performance settings\nterraform_parallelism = 10\nterraform_refresh = true\nterraform_upgrade = false\nEOF\n\n# Performance optimization script\ncat \u0026gt; scripts/optimize-terraform.sh \u0026lt;\u0026lt;\u0026#039;EOF\u0026#039;\n#!/bin/bash\n\n# Increase parallelism for faster execution\nexport TF_CLI_ARGS_plan=\u0026quot;-parallelism=10\u0026quot;\nexport TF_CLI_ARGS_apply=\u0026quot;-parallelism=10\u0026quot;\n\n# Use faster JSON output for large states\nexport TF_CLI_ARGS_show=\u0026quot;-json\u0026quot;\n\n# Optimize provider caching\nexport TF_PLUGIN_CACHE_DIR=\u0026quot;$HOME/.terraform.d/plugin-cache\u0026quot;\nmkdir -p \u0026quot;$TF_PLUGIN_CACHE_DIR\u0026quot;\n\n# Performance monitoring\necho \u0026quot;Starting Terraform operation at $(date)\u0026quot;\ntime terraform \u0026quot;$@\u0026quot;\necho \u0026quot;Completed Terraform operation at $(date)\u0026quot;\nEOF\n\nchmod +x scripts/optimize-terraform.sh\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"large-infrastructure-management\" class=\"mobile-header\"\u003eLarge Infrastructure Management\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Workspace and module organization\ncat \u0026gt; modules/infrastructure/main.tf \u0026lt;\u0026lt;EOF\n# Optimized module structure for large deployments\nterraform {\n  required_providers {\n    aws = {\n      source  = \u0026quot;hashicorp/aws\u0026quot;\n      version = \u0026quot;~\u0026gt; 5.0\u0026quot;\n    }\n  }\n}\n\n# Use data sources efficiently\ndata \u0026quot;aws_availability_zones\u0026quot; \u0026quot;available\u0026quot; {\n  state = \u0026quot;available\u0026quot;\n  \n  # Cache this data to avoid repeated API calls\n  lifecycle {\n    postcondition {\n      condition     = length(self.names) \u0026gt;= 2\n      error_message = \u0026quot;At least 2 availability zones required.\u0026quot;\n    }\n  }\n}\n\n# Optimize resource creation with for_each\nresource \u0026quot;aws_subnet\u0026quot; \u0026quot;private\u0026quot; {\n  for_each = toset(slice(data.aws_availability_zones.available.names, 0, var.subnet_count))\n  \n  vpc_id            = aws_vpc.main.id\n  cidr_block        = cidrsubnet(var.vpc_cidr, 8, index(data.aws_availability_zones.available.names, each.value) + 10)\n  availability_zone = each.value\n  \n  tags = merge(var.common_tags, {\n    Name = \u0026quot;${var.name_prefix}-private-${each.value}\u0026quot;\n    Type = \u0026quot;private\u0026quot;\n  })\n}\n\n# Use locals for complex computations\nlocals {\n  # Pre-compute values to avoid recalculation\n  availability_zones = slice(data.aws_availability_zones.available.names, 0, var.subnet_count)\n  \n  # Create maps for efficient lookups\n  subnet_map = {\n    for subnet in aws_subnet.private : \n    subnet.availability_zone =\u0026gt; subnet.id\n  }\n}\nEOF\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"state-optimization\" class=\"mobile-header\"\u003eState Optimization\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# State file optimization script\ncat \u0026gt; scripts/optimize-state.sh \u0026lt;\u0026lt;\u0026#039;EOF\u0026#039;\n#!/bin/bash\n\n# Pull current state for backup\nterraform state pull \u0026gt; state-backup-$(date +%Y%m%d_%H%M%S).json\n\n# Remove unused resources from state\nterraform state list | while read resource; do\n    if terraform plan -target=\u0026quot;$resource\u0026quot; | grep -q \u0026quot;No changes\u0026quot;; then\n        echo \u0026quot;Checking if $resource can be safely removed...\u0026quot;\n        # Add logic to safely remove unused resources\n    fi\ndone\n\n# Refresh state to sync with real infrastructure\nterraform refresh\n\necho \u0026quot;State optimization completed\u0026quot;\nEOF\n\nchmod +x scripts/optimize-state.sh\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"monitoring\" class=\"mobile-header\"\u003eMonitoring\u003c/h2\u003e\n\u003ch3 id=\"terraform-operations-monitoring\" class=\"mobile-header\"\u003eTerraform Operations Monitoring\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Terraform execution monitoring\ncat \u0026gt; scripts/monitor-terraform.sh \u0026lt;\u0026lt;\u0026#039;EOF\u0026#039;\n#!/bin/bash\n\nLOG_FILE=\u0026quot;/var/log/terraform/operations.log\u0026quot;\nMETRICS_FILE=\u0026quot;/var/log/terraform/metrics.log\u0026quot;\n\n# Ensure log directory exists\nmkdir -p \u0026quot;$(dirname \u0026quot;$LOG_FILE\u0026quot;)\u0026quot;\nmkdir -p \u0026quot;$(dirname \u0026quot;$METRICS_FILE\u0026quot;)\u0026quot;\n\n# Function to log operations\nlog_operation() {\n    local operation=\u0026quot;$1\u0026quot;\n    local status=\u0026quot;$2\u0026quot;\n    local duration=\u0026quot;$3\u0026quot;\n    local timestamp=$(date \u0026#039;+%Y-%m-%d %H:%M:%S\u0026#039;)\n    \n    echo \u0026quot;[$timestamp] Operation: $operation, Status: $status, Duration: ${duration}s\u0026quot; \u0026gt;\u0026gt; \u0026quot;$LOG_FILE\u0026quot;\n    echo \u0026quot;terraform_operation_duration{operation=\\\u0026quot;$operation\\\u0026quot;,status=\\\u0026quot;$status\\\u0026quot;} $duration\u0026quot; \u0026gt;\u0026gt; \u0026quot;$METRICS_FILE\u0026quot;\n}\n\n# Wrapper function for terraform commands\nterraform_monitored() {\n    local operation=\u0026quot;$1\u0026quot;\n    shift\n    local start_time=$(date +%s)\n    local exit_code=0\n    \n    echo \u0026quot;Starting Terraform $operation at $(date)\u0026quot;\n    \n    if terraform \u0026quot;$operation\u0026quot; \u0026quot;$@\u0026quot;; then\n        local end_time=$(date +%s)\n        local duration=$((end_time - start_time))\n        log_operation \u0026quot;$operation\u0026quot; \u0026quot;success\u0026quot; \u0026quot;$duration\u0026quot;\n        echo \u0026quot;Terraform $operation completed successfully in ${duration}s\u0026quot;\n    else\n        exit_code=$?\n        local end_time=$(date +%s)\n        local duration=$((end_time - start_time))\n        log_operation \u0026quot;$operation\u0026quot; \u0026quot;failure\u0026quot; \u0026quot;$duration\u0026quot;\n        echo \u0026quot;Terraform $operation failed after ${duration}s\u0026quot;\n        return $exit_code\n    fi\n}\n\n# Usage: terraform_monitored plan, terraform_monitored apply, etc.\nterraform_monitored \u0026quot;$@\u0026quot;\nEOF\n\nchmod +x scripts/monitor-terraform.sh\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"infrastructure-monitoring-with-terraform\" class=\"mobile-header\"\u003eInfrastructure Monitoring with Terraform\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Deploy monitoring stack with Terraform\ncat \u0026gt; monitoring.tf \u0026lt;\u0026lt;EOF\n# CloudWatch alarms for infrastructure\nresource \u0026quot;aws_cloudwatch_metric_alarm\u0026quot; \u0026quot;high_cpu\u0026quot; {\n  for_each = toset(module.compute.instance_ids)\n  \n  alarm_name          = \u0026quot;high-cpu-${each.key}\u0026quot;\n  comparison_operator = \u0026quot;GreaterThanThreshold\u0026quot;\n  evaluation_periods  = \u0026quot;2\u0026quot;\n  metric_name        = \u0026quot;CPUUtilization\u0026quot;\n  namespace          = \u0026quot;AWS/EC2\u0026quot;\n  period             = \u0026quot;300\u0026quot;\n  statistic          = \u0026quot;Average\u0026quot;\n  threshold          = \u0026quot;80\u0026quot;\n  alarm_description  = \u0026quot;This metric monitors EC2 CPU utilization\u0026quot;\n\n  dimensions = {\n    InstanceId = each.value\n  }\n\n  alarm_actions = [aws_sns_topic.alerts.arn]\n  \n  tags = var.common_tags\n}\n\n# SNS topic for alerts\nresource \u0026quot;aws_sns_topic\u0026quot; \u0026quot;alerts\u0026quot; {\n  name = \u0026quot;${var.project_name}-infrastructure-alerts\u0026quot;\n  \n  tags = var.common_tags\n}\n\nresource \u0026quot;aws_sns_topic_subscription\u0026quot; \u0026quot;email_alerts\u0026quot; {\n  topic_arn = aws_sns_topic.alerts.arn\n  protocol  = \u0026quot;email\u0026quot;\n  endpoint  = var.alert_email\n}\n\n# Log group for Terraform operations\nresource \u0026quot;aws_cloudwatch_log_group\u0026quot; \u0026quot;terraform_ops\u0026quot; {\n  name              = \u0026quot;/terraform/operations\u0026quot;\n  retention_in_days = 30\n  \n  tags = var.common_tags\n}\n\n# Dashboard for infrastructure monitoring\nresource \u0026quot;aws_cloudwatch_dashboard\u0026quot; \u0026quot;main\u0026quot; {\n  dashboard_name = \u0026quot;${var.project_name}-infrastructure\u0026quot;\n\n  dashboard_body = jsonencode({\n    widgets = [\n      {\n        type   = \u0026quot;metric\u0026quot;\n        x      = 0\n        y      = 0\n        width  = 12\n        height = 6\n\n        properties = {\n          metrics = [\n            [\u0026quot;AWS/EC2\u0026quot;, \u0026quot;CPUUtilization\u0026quot;, \u0026quot;InstanceId\u0026quot;, module.compute.instance_ids[0]],\n          ]\n          view    = \u0026quot;timeSeries\u0026quot;\n          stacked = false\n          region  = var.aws_region\n          title   = \u0026quot;EC2 Instance CPU\u0026quot;\n          period  = 300\n        }\n      }\n    ]\n  })\n}\nEOF\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"terraform-cloud-monitoring\" class=\"mobile-header\"\u003eTerraform Cloud Monitoring\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Monitor Terraform Cloud workspaces\ncat \u0026gt; scripts/monitor-tf-cloud.sh \u0026lt;\u0026lt;\u0026#039;EOF\u0026#039;\n#!/bin/bash\n\nTF_CLOUD_TOKEN=\u0026quot;${TF_CLOUD_TOKEN}\u0026quot;\nORGANIZATION=\u0026quot;${TF_ORGANIZATION}\u0026quot;\n\n# Function to get workspace status\nget_workspace_status() {\n    local workspace_name=\u0026quot;$1\u0026quot;\n    \n    curl -s \\\n        --header \u0026quot;Authorization: Bearer $TF_CLOUD_TOKEN\u0026quot; \\\n        --header \u0026quot;Content-Type: application/vnd.api+json\u0026quot; \\\n        \u0026quot;https://app.terraform.io/api/v2/organizations/$ORGANIZATION/workspaces/$workspace_name/current-run\u0026quot; \\\n        | jq -r \u0026#039;.data.attributes.status\u0026#039;\n}\n\n# Function to get workspace runs\nget_recent_runs() {\n    local workspace_id=\u0026quot;$1\u0026quot;\n    \n    curl -s \\\n        --header \u0026quot;Authorization: Bearer $TF_CLOUD_TOKEN\u0026quot; \\\n        --header \u0026quot;Content-Type: application/vnd.api+json\u0026quot; \\\n        \u0026quot;https://app.terraform.io/api/v2/workspaces/$workspace_id/runs\u0026quot; \\\n        | jq -r \u0026#039;.data[].attributes | \u0026quot;\\(.status) - \\(.created_at)\u0026quot;\u0026#039;\n}\n\n# Monitor critical workspaces\nWORKSPACES=(\u0026quot;production-web\u0026quot; \u0026quot;production-database\u0026quot; \u0026quot;staging-environment\u0026quot;)\n\nfor workspace in \u0026quot;${WORKSPACES[@]}\u0026quot;; do\n    status=$(get_workspace_status \u0026quot;$workspace\u0026quot;)\n    echo \u0026quot;Workspace: $workspace, Status: $status\u0026quot;\n    \n    if [[ \u0026quot;$status\u0026quot; == \u0026quot;errored\u0026quot; ]]; then\n        echo \u0026quot;❌ ALERT: Workspace $workspace has errors!\u0026quot;\n        # Send alert to monitoring system\n        curl -X POST \\\n            -H \u0026quot;Content-Type: application/json\u0026quot; \\\n            -d \u0026quot;{\\\u0026quot;text\\\u0026quot;: \\\u0026quot;Terraform workspace $workspace has errors\\\u0026quot;}\u0026quot; \\\n            \u0026quot;$SLACK_WEBHOOK_URL\u0026quot;\n    elif [[ \u0026quot;$status\u0026quot; == \u0026quot;planned_and_finished\u0026quot; ]]; then\n        echo \u0026quot;✅ Workspace $workspace is healthy\u0026quot;\n    fi\ndone\nEOF\n\nchmod +x scripts/monitor-tf-cloud.sh\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"backup-and-restore\" class=\"mobile-header\"\u003eBackup and Restore\u003c/h2\u003e\n\u003ch3 id=\"state-file-backup\" class=\"mobile-header\"\u003eState File Backup\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Comprehensive state backup script\ncat \u0026gt; scripts/backup-terraform-state.sh \u0026lt;\u0026lt;\u0026#039;EOF\u0026#039;\n#!/bin/bash\n\nBACKUP_DIR=\u0026quot;/backup/terraform\u0026quot;\nDATE=$(date +%Y%m%d_%H%M%S)\nENVIRONMENTS=(\u0026quot;development\u0026quot; \u0026quot;staging\u0026quot; \u0026quot;production\u0026quot;)\n\nmkdir -p \u0026quot;$BACKUP_DIR\u0026quot;\n\nbackup_state() {\n    local environment=\u0026quot;$1\u0026quot;\n    local backup_path=\u0026quot;$BACKUP_DIR/$environment\u0026quot;\n    \n    echo \u0026quot;Backing up $environment state...\u0026quot;\n    mkdir -p \u0026quot;$backup_path\u0026quot;\n    \n    # Change to environment directory\n    cd \u0026quot;environments/$environment\u0026quot; || return 1\n    \n    # Pull current state\n    terraform state pull \u0026gt; \u0026quot;$backup_path/terraform-state-$DATE.json\u0026quot;\n    \n    # Backup configuration files\n    tar -czf \u0026quot;$backup_path/terraform-config-$DATE.tar.gz\u0026quot; \\\n        --exclude=\u0026quot;.terraform\u0026quot; \\\n        --exclude=\u0026quot;*.tfplan\u0026quot; \\\n        .\n    \n    # Backup workspace info\n    terraform workspace show \u0026gt; \u0026quot;$backup_path/current-workspace-$DATE.txt\u0026quot;\n    terraform workspace list \u0026gt; \u0026quot;$backup_path/all-workspaces-$DATE.txt\u0026quot;\n    \n    # Backup provider versions\n    terraform version \u0026gt; \u0026quot;$backup_path/terraform-version-$DATE.txt\u0026quot;\n    \n    cd - \u0026gt; /dev/null\n    \n    echo \u0026quot;✅ Backup completed for $environment\u0026quot;\n}\n\n# Backup all environments\nfor env in \u0026quot;${ENVIRONMENTS[@]}\u0026quot;; do\n    if [[ -d \u0026quot;environments/$env\u0026quot; ]]; then\n        backup_state \u0026quot;$env\u0026quot;\n    else\n        echo \u0026quot;⚠️  Environment directory not found: environments/$env\u0026quot;\n    fi\ndone\n\n# Create consolidated backup\ncd \u0026quot;$BACKUP_DIR\u0026quot;\ntar -czf \u0026quot;terraform-complete-backup-$DATE.tar.gz\u0026quot; \\\n    --exclude=\u0026quot;*.tar.gz\u0026quot; \\\n    .\n\n# Upload to cloud storage\nif command -v aws \u0026amp;\u0026gt; /dev/null; then\n    aws s3 cp \u0026quot;terraform-complete-backup-$DATE.tar.gz\u0026quot; \\\n        s3://terraform-backups/\nfi\n\nif command -v az \u0026amp;\u0026gt; /dev/null; then\n    az storage blob upload \\\n        --file \u0026quot;terraform-complete-backup-$DATE.tar.gz\u0026quot; \\\n        --container-name terraform-backups \\\n        --name \u0026quot;terraform-complete-backup-$DATE.tar.gz\u0026quot;\nfi\n\nif command -v gsutil \u0026amp;\u0026gt; /dev/null; then\n    gsutil cp \u0026quot;terraform-complete-backup-$DATE.tar.gz\u0026quot; \\\n        gs://terraform-backups/\nfi\n\n# Cleanup old backups (keep last 30 days)\nfind \u0026quot;$BACKUP_DIR\u0026quot; -name \u0026quot;terraform-complete-backup-*.tar.gz\u0026quot; \\\n    -mtime +30 -delete\n\necho \u0026quot;🎉 All backups completed successfully\u0026quot;\nEOF\n\nchmod +x scripts/backup-terraform-state.sh\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"disaster-recovery-procedures\" class=\"mobile-header\"\u003eDisaster Recovery Procedures\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Disaster recovery script\ncat \u0026gt; scripts/disaster-recovery.sh \u0026lt;\u0026lt;\u0026#039;EOF\u0026#039;\n#!/bin/bash\n\nBACKUP_FILE=\u0026quot;$1\u0026quot;\nTARGET_ENVIRONMENT=\u0026quot;$2\u0026quot;\n\nif [[ -z \u0026quot;$BACKUP_FILE\u0026quot; || -z \u0026quot;$TARGET_ENVIRONMENT\u0026quot; ]]; then\n    echo \u0026quot;Usage: $0 \u0026lt;backup-file.tar.gz\u0026gt; \u0026lt;target-environment\u0026gt;\u0026quot;\n    echo \u0026quot;Example: $0 terraform-complete-backup-20240115_143000.tar.gz production\u0026quot;\n    exit 1\nfi\n\n# Verify backup file exists\nif [[ ! -f \u0026quot;$BACKUP_FILE\u0026quot; ]]; then\n    echo \u0026quot;❌ Backup file not found: $BACKUP_FILE\u0026quot;\n    exit 1\nfi\n\n# Create recovery directory\nRECOVERY_DIR=\u0026quot;/tmp/terraform-recovery-$(date +%s)\u0026quot;\nmkdir -p \u0026quot;$RECOVERY_DIR\u0026quot;\n\n# Extract backup\necho \u0026quot;📦 Extracting backup...\u0026quot;\ntar -xzf \u0026quot;$BACKUP_FILE\u0026quot; -C \u0026quot;$RECOVERY_DIR\u0026quot;\n\n# Navigate to target environment\ncd \u0026quot;environments/$TARGET_ENVIRONMENT\u0026quot; || {\n    echo \u0026quot;❌ Target environment directory not found: environments/$TARGET_ENVIRONMENT\u0026quot;\n    exit 1\n}\n\n# Backup current state before recovery\necho \u0026quot;💾 Backing up current state...\u0026quot;\nterraform state pull \u0026gt; \u0026quot;current-state-backup-$(date +%Y%m%d_%H%M%S).json\u0026quot;\n\n# Import recovered state\nRECOVERED_STATE=\u0026quot;$RECOVERY_DIR/$TARGET_ENVIRONMENT/terraform-state-*.json\u0026quot;\nif [[ -f $RECOVERED_STATE ]]; then\n    echo \u0026quot;🔄 Restoring state from backup...\u0026quot;\n    terraform state push \u0026quot;$RECOVERED_STATE\u0026quot;\nelse\n    echo \u0026quot;❌ No state file found in backup for environment: $TARGET_ENVIRONMENT\u0026quot;\n    exit 1\nfi\n\n# Verify state consistency\necho \u0026quot;🔍 Verifying state consistency...\u0026quot;\nif terraform plan -detailed-exitcode; then\n    echo \u0026quot;✅ State restored successfully - no drift detected\u0026quot;\nelif [[ $? -eq 2 ]]; then\n    echo \u0026quot;⚠️  State restored but drift detected - manual review required\u0026quot;\n    terraform plan\nelse\n    echo \u0026quot;❌ State restoration failed - check error messages above\u0026quot;\n    exit 1\nfi\n\n# Cleanup\nrm -rf \u0026quot;$RECOVERY_DIR\u0026quot;\n\necho \u0026quot;🎉 Disaster recovery completed for environment: $TARGET_ENVIRONMENT\u0026quot;\necho \u0026quot;💡 Please review the plan output and apply changes if necessary\u0026quot;\nEOF\n\nchmod +x scripts/disaster-recovery.sh\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"state-migration-and-refactoring\" class=\"mobile-header\"\u003eState Migration and Refactoring\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# State migration script for refactoring\ncat \u0026gt; scripts/migrate-state.sh \u0026lt;\u0026lt;\u0026#039;EOF\u0026#039;\n#!/bin/bash\n\n# Function to safely move resources in state\nmove_resource() {\n    local old_address=\u0026quot;$1\u0026quot;\n    local new_address=\u0026quot;$2\u0026quot;\n    \n    echo \u0026quot;Moving $old_address to $new_address\u0026quot;\n    \n    # Check if source resource exists\n    if terraform state show \u0026quot;$old_address\u0026quot; \u0026amp;\u0026gt;/dev/null; then\n        terraform state mv \u0026quot;$old_address\u0026quot; \u0026quot;$new_address\u0026quot;\n        echo \u0026quot;✅ Successfully moved $old_address to $new_address\u0026quot;\n    else\n        echo \u0026quot;⚠️  Resource not found: $old_address\u0026quot;\n    fi\n}\n\n# Function to import existing resources\nimport_resource() {\n    local resource_address=\u0026quot;$1\u0026quot;\n    local resource_id=\u0026quot;$2\u0026quot;\n    \n    echo \u0026quot;Importing $resource_id as $resource_address\u0026quot;\n    \n    if terraform import \u0026quot;$resource_address\u0026quot; \u0026quot;$resource_id\u0026quot;; then\n        echo \u0026quot;✅ Successfully imported $resource_id as $resource_address\u0026quot;\n    else\n        echo \u0026quot;❌ Failed to import $resource_id\u0026quot;\n    fi\n}\n\n# Example migrations\necho \u0026quot;🔄 Starting state migrations...\u0026quot;\n\n# Move resources to modules\nmove_resource \u0026quot;aws_instance.web\u0026quot; \u0026quot;module.web_servers.aws_instance.main[0]\u0026quot;\nmove_resource \u0026quot;aws_security_group.web\u0026quot; \u0026quot;module.web_servers.aws_security_group.main\u0026quot;\n\n# Import existing resources\nimport_resource \u0026quot;aws_s3_bucket.existing_bucket\u0026quot; \u0026quot;existing-bucket-name\u0026quot;\n\n# Remove resources that are no longer managed\nterraform state rm aws_instance.deprecated\n\necho \u0026quot;🎉 State migrations completed\u0026quot;\necho \u0026quot;💡 Run \u0026#039;terraform plan\u0026#039; to verify changes\u0026quot;\nEOF\n\nchmod +x scripts/migrate-state.sh\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"troubleshooting\" class=\"mobile-header\"\u003eTroubleshooting\u003c/h2\u003e\n\u003ch3 id=\"common-issues-and-solutions\" class=\"mobile-header\"\u003eCommon Issues and Solutions\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Terraform troubleshooting script\ncat \u0026gt; scripts/troubleshoot-terraform.sh \u0026lt;\u0026lt;\u0026#039;EOF\u0026#039;\n#!/bin/bash\n\necho \u0026quot;🔧 Terraform Troubleshooting Tool\u0026quot;\necho \u0026quot;================================\u0026quot;\n\n# Check Terraform installation\ncheck_installation() {\n    echo \u0026quot;📋 Checking Terraform installation...\u0026quot;\n    \n    if command -v terraform \u0026amp;\u0026gt; /dev/null; then\n        terraform version\n        echo \u0026quot;✅ Terraform is installed\u0026quot;\n    else\n        echo \u0026quot;❌ Terraform is not installed or not in PATH\u0026quot;\n        return 1\n    fi\n}\n\n# Check configuration syntax\ncheck_configuration() {\n    echo \u0026quot;📋 Checking configuration syntax...\u0026quot;\n    \n    if terraform fmt -check -diff; then\n        echo \u0026quot;✅ Configuration is properly formatted\u0026quot;\n    else\n        echo \u0026quot;⚠️  Configuration formatting issues found\u0026quot;\n        terraform fmt -diff\n    fi\n    \n    if terraform validate; then\n        echo \u0026quot;✅ Configuration is valid\u0026quot;\n    else\n        echo \u0026quot;❌ Configuration validation failed\u0026quot;\n        return 1\n    fi\n}\n\n# Check provider authentication\ncheck_providers() {\n    echo \u0026quot;📋 Checking provider authentication...\u0026quot;\n    \n    # AWS\n    if aws sts get-caller-identity \u0026amp;\u0026gt;/dev/null; then\n        echo \u0026quot;✅ AWS credentials are valid\u0026quot;\n    else\n        echo \u0026quot;⚠️  AWS credentials may be invalid or not configured\u0026quot;\n    fi\n    \n    # Azure\n    if az account show \u0026amp;\u0026gt;/dev/null; then\n        echo \u0026quot;✅ Azure credentials are valid\u0026quot;\n    else\n        echo \u0026quot;⚠️  Azure credentials may be invalid or not configured\u0026quot;\n    fi\n    \n    # GCP\n    if gcloud auth list --filter=status:ACTIVE --format=\u0026quot;value(account)\u0026quot; \u0026amp;\u0026gt;/dev/null; then\n        echo \u0026quot;✅ GCP credentials are valid\u0026quot;\n    else\n        echo \u0026quot;⚠️  GCP credentials may be invalid or not configured\u0026quot;\n    fi\n}\n\n# Check state file\ncheck_state() {\n    echo \u0026quot;📋 Checking state file...\u0026quot;\n    \n    if terraform state list \u0026amp;\u0026gt;/dev/null; then\n        resource_count=$(terraform state list | wc -l)\n        echo \u0026quot;✅ State file is accessible with $resource_count resources\u0026quot;\n    else\n        echo \u0026quot;❌ Cannot access state file\u0026quot;\n        return 1\n    fi\n}\n\n# Check for common issues\ncheck_common_issues() {\n    echo \u0026quot;📋 Checking for common issues...\u0026quot;\n    \n    # Check for lock file\n    if [[ -f \u0026quot;.terraform.lock.hcl\u0026quot; ]]; then\n        echo \u0026quot;✅ Lock file exists\u0026quot;\n    else\n        echo \u0026quot;⚠️  Lock file missing - run \u0026#039;terraform init\u0026#039;\u0026quot;\n    fi\n    \n    # Check for local state file in production\n    if [[ -f \u0026quot;terraform.tfstate\u0026quot; ]] \u0026amp;\u0026amp; [[ $(terraform workspace show) == \u0026quot;production\u0026quot; ]]; then\n        echo \u0026quot;⚠️  Local state file detected in production workspace\u0026quot;\n        echo \u0026quot;    Consider using remote state for production\u0026quot;\n    fi\n    \n    # Check for hardcoded secrets\n    if grep -r \u0026quot;password\\s*=\\s*\\\u0026quot;\u0026quot; . --include=\u0026quot;*.tf\u0026quot; --include=\u0026quot;*.tfvars\u0026quot; 2\u0026gt;/dev/null; then\n        echo \u0026quot;⚠️  Potential hardcoded passwords found\u0026quot;\n    fi\n    \n    # Check for large state file\n    if [[ -f \u0026quot;terraform.tfstate\u0026quot; ]]; then\n        state_size=$(stat -f%z \u0026quot;terraform.tfstate\u0026quot; 2\u0026gt;/dev/null || stat -c%s \u0026quot;terraform.tfstate\u0026quot; 2\u0026gt;/dev/null)\n        if [[ $state_size -gt 10485760 ]]; then  # 10MB\n            echo \u0026quot;⚠️  Large state file detected ($(($state_size / 1024 / 1024))MB)\u0026quot;\n            echo \u0026quot;    Consider splitting into smaller configurations\u0026quot;\n        fi\n    fi\n}\n\n# Debug mode information\ndebug_info() {\n    echo \u0026quot;📋 Debug information...\u0026quot;\n    \n    echo \u0026quot;Working directory: $(pwd)\u0026quot;\n    echo \u0026quot;Terraform workspace: $(terraform workspace show)\u0026quot;\n    echo \u0026quot;Environment variables:\u0026quot;\n    env | grep -E \u0026quot;^(TF_|AWS_|ARM_|GOOGLE_)\u0026quot; | sed \u0026#039;s/=.*/=***/\u0026#039; | sort\n}\n\n# Run all checks\nrun_all_checks() {\n    check_installation || return 1\n    check_configuration || return 1\n    check_providers\n    check_state || return 1\n    check_common_issues\n    debug_info\n}\n\n# Main execution\ncase \u0026quot;${1:-all}\u0026quot; in\n    \u0026quot;installation\u0026quot;)\n        check_installation\n        ;;\n    \u0026quot;config\u0026quot;)\n        check_configuration\n        ;;\n    \u0026quot;providers\u0026quot;)\n        check_providers\n        ;;\n    \u0026quot;state\u0026quot;)\n        check_state\n        ;;\n    \u0026quot;common\u0026quot;)\n        check_common_issues\n        ;;\n    \u0026quot;debug\u0026quot;)\n        debug_info\n        ;;\n    \u0026quot;all\u0026quot;)\n        run_all_checks\n        ;;\n    *)\n        echo \u0026quot;Usage: $0 [installation|config|providers|state|common|debug|all]\u0026quot;\n        exit 1\n        ;;\nesac\nEOF\n\nchmod +x scripts/troubleshoot-terraform.sh\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"advanced-debugging\" class=\"mobile-header\"\u003eAdvanced Debugging\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Advanced debugging techniques\ncat \u0026gt; scripts/debug-terraform.sh \u0026lt;\u0026lt;\u0026#039;EOF\u0026#039;\n#!/bin/bash\n\n# Enable debug logging\nexport TF_LOG=DEBUG\nexport TF_LOG_PATH=\u0026quot;terraform-debug-$(date +%Y%m%d_%H%M%S).log\u0026quot;\n\n# Create debug session\ndebug_session() {\n    local operation=\u0026quot;$1\u0026quot;\n    shift\n    \n    echo \u0026quot;🐛 Starting debug session for: $operation\u0026quot;\n    echo \u0026quot;Debug log: $TF_LOG_PATH\u0026quot;\n    \n    # Capture detailed timing information\n    time terraform \u0026quot;$operation\u0026quot; \u0026quot;$@\u0026quot; 2\u0026gt;\u0026amp;1 | tee -a \u0026quot;$TF_LOG_PATH\u0026quot;\n    \n    local exit_code=${PIPESTATUS[0]}\n    \n    if [[ $exit_code -ne 0 ]]; then\n        echo \u0026quot;❌ Operation failed with exit code: $exit_code\u0026quot;\n        echo \u0026quot;📄 Last 50 lines of debug log:\u0026quot;\n        tail -50 \u0026quot;$TF_LOG_PATH\u0026quot;\n    else\n        echo \u0026quot;✅ Operation completed successfully\u0026quot;\n    fi\n    \n    return $exit_code\n}\n\n# Analyze state file for issues\nanalyze_state() {\n    echo \u0026quot;🔍 Analyzing state file...\u0026quot;\n    \n    # Check for orphaned resources\n    echo \u0026quot;Checking for potential orphaned resources...\u0026quot;\n    terraform state list | while read resource; do\n        if ! terraform plan -target=\u0026quot;$resource\u0026quot; -detailed-exitcode \u0026gt;/dev/null 2\u0026gt;\u0026amp;1; then\n            echo \u0026quot;⚠️  Potential issue with resource: $resource\u0026quot;\n        fi\n    done\n    \n    # Check for large resources in state\n    echo \u0026quot;Checking for large resources...\u0026quot;\n    terraform state pull | jq -r \u0026#039;.resources[] | select(.instances[0].attributes | length \u0026gt; 50) | .address\u0026#039; 2\u0026gt;/dev/null | head -10\n}\n\n# Provider debug information\ndebug_providers() {\n    echo \u0026quot;🔍 Debugging provider issues...\u0026quot;\n    \n    # Show provider configuration\n    terraform providers\n    \n    # Check provider cache\n    if [[ -d \u0026quot;$HOME/.terraform.d/plugin-cache\u0026quot; ]]; then\n        echo \u0026quot;Provider cache contents:\u0026quot;\n        ls -la \u0026quot;$HOME/.terraform.d/plugin-cache\u0026quot;\n    fi\n    \n    # Check for provider version conflicts\n    terraform version -json | jq \u0026#039;.provider_selections\u0026#039; 2\u0026gt;/dev/null\n}\n\n# Network and API debugging\ndebug_network() {\n    echo \u0026quot;🌐 Debugging network connectivity...\u0026quot;\n    \n    # Test connectivity to common endpoints\n    local endpoints=(\n        \u0026quot;https://releases.hashicorp.com\u0026quot;\n        \u0026quot;https://registry.terraform.io\u0026quot;\n        \u0026quot;https://api.github.com\u0026quot;\n        \u0026quot;https://aws.amazon.com\u0026quot;\n        \u0026quot;https://management.azure.com\u0026quot;\n        \u0026quot;https://www.googleapis.com\u0026quot;\n    )\n    \n    for endpoint in \u0026quot;${endpoints[@]}\u0026quot;; do\n        if curl -s --connect-timeout 5 \u0026quot;$endpoint\u0026quot; \u0026gt;/dev/null; then\n            echo \u0026quot;✅ $endpoint - OK\u0026quot;\n        else\n            echo \u0026quot;❌ $endpoint - FAILED\u0026quot;\n        fi\n    done\n}\n\n# Performance analysis\nanalyze_performance() {\n    echo \u0026quot;📊 Analyzing Terraform performance...\u0026quot;\n    \n    # Generate and analyze dependency graph\n    terraform graph \u0026gt; dependency-graph.dot\n    \n    # Count resources by type\n    echo \u0026quot;Resource distribution:\u0026quot;\n    terraform state list | cut -d. -f1 | sort | uniq -c | sort -nr | head -10\n    \n    # Estimate plan time based on resources\n    resource_count=$(terraform state list | wc -l)\n    estimated_time=$((resource_count * 2))  # Rough estimate: 2 seconds per resource\n    echo \u0026quot;Estimated plan time: ${estimated_time} seconds for $resource_count resources\u0026quot;\n}\n\n# Usage\ncase \u0026quot;${1:-help}\u0026quot; in\n    \u0026quot;session\u0026quot;)\n        shift\n        debug_session \u0026quot;$@\u0026quot;\n        ;;\n    \u0026quot;state\u0026quot;)\n        analyze_state\n        ;;\n    \u0026quot;providers\u0026quot;)\n        debug_providers\n        ;;\n    \u0026quot;network\u0026quot;)\n        debug_network\n        ;;\n    \u0026quot;performance\u0026quot;)\n        analyze_performance\n        ;;\n    \u0026quot;all\u0026quot;)\n        debug_providers\n        debug_network\n        analyze_state\n        analyze_performance\n        ;;\n    \u0026quot;help\u0026quot;|*)\n        echo \u0026quot;Usage: $0 [session|state|providers|network|performance|all]\u0026quot;\n        echo \u0026quot;\u0026quot;\n        echo \u0026quot;  session \u0026lt;operation\u0026gt; [args]  - Debug specific Terraform operation\u0026quot;\n        echo \u0026quot;  state                       - Analyze state file for issues\u0026quot;\n        echo \u0026quot;  providers                   - Debug provider configuration\u0026quot;\n        echo \u0026quot;  network                     - Test network connectivity\u0026quot;\n        echo \u0026quot;  performance                 - Analyze performance characteristics\u0026quot;\n        echo \u0026quot;  all                         - Run all debug checks\u0026quot;\n        ;;\nesac\nEOF\n\nchmod +x scripts/debug-terraform.sh\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"maintenance\" class=\"mobile-header\"\u003eMaintenance\u003c/h2\u003e\n\u003ch3 id=\"update-procedures\" class=\"mobile-header\"\u003eUpdate Procedures\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Terraform update script\ncat \u0026gt; scripts/update-terraform.sh \u0026lt;\u0026lt;\u0026#039;EOF\u0026#039;\n#!/bin/bash\n\nCURRENT_VERSION=$(terraform version -json | jq -r \u0026#039;.terraform_version\u0026#039;)\necho \u0026quot;Current Terraform version: $CURRENT_VERSION\u0026quot;\n\n# Check for latest version\ncheck_latest_version() {\n    local latest_version\n    latest_version=$(curl -s https://api.github.com/repos/hashicorp/terraform/releases/latest | jq -r \u0026#039;.tag_name\u0026#039; | sed \u0026#039;s/v//\u0026#039;)\n    echo \u0026quot;Latest Terraform version: $latest_version\u0026quot;\n    \n    if [[ \u0026quot;$CURRENT_VERSION\u0026quot; != \u0026quot;$latest_version\u0026quot; ]]; then\n        echo \u0026quot;⚠️  Update available: $CURRENT_VERSION → $latest_version\u0026quot;\n        return 1\n    else\n        echo \u0026quot;✅ Terraform is up to date\u0026quot;\n        return 0\n    fi\n}\n\n# Update using package manager\nupdate_terraform() {\n    echo \u0026quot;🔄 Updating Terraform...\u0026quot;\n    \n    if command -v apt \u0026amp;\u0026gt;/dev/null; then\n        sudo apt update \u0026amp;\u0026amp; sudo apt upgrade terraform\n    elif command -v yum \u0026amp;\u0026gt;/dev/null; then\n        sudo yum update terraform\n    elif command -v dnf \u0026amp;\u0026gt;/dev/null; then\n        sudo dnf update terraform\n    elif command -v pacman \u0026amp;\u0026gt;/dev/null; then\n        sudo pacman -Syu terraform\n    elif command -v zypper \u0026amp;\u0026gt;/dev/null; then\n        sudo zypper update terraform\n    elif command -v brew \u0026amp;\u0026gt;/dev/null; then\n        brew upgrade terraform\n    else\n        echo \u0026quot;❌ No supported package manager found\u0026quot;\n        echo \u0026quot;💡 Please update manually from: https://releases.hashicorp.com/terraform/\u0026quot;\n        return 1\n    fi\n}\n\n# Update providers\nupdate_providers() {\n    echo \u0026quot;🔄 Updating providers...\u0026quot;\n    terraform init -upgrade\n}\n\n# Verify update\nverify_update() {\n    echo \u0026quot;🔍 Verifying update...\u0026quot;\n    \n    terraform version\n    \n    # Test basic functionality\n    if terraform validate; then\n        echo \u0026quot;✅ Update verification successful\u0026quot;\n    else\n        echo \u0026quot;❌ Update verification failed\u0026quot;\n        return 1\n    fi\n}\n\n# Main update process\nmain() {\n    if check_latest_version; then\n        exit 0\n    fi\n    \n    echo \u0026quot;Proceed with update? (y/N)\u0026quot;\n    read -r response\n    \n    if [[ \u0026quot;$response\u0026quot; =~ ^[Yy]$ ]]; then\n        update_terraform || exit 1\n        update_providers || exit 1\n        verify_update || exit 1\n        echo \u0026quot;🎉 Terraform update completed successfully\u0026quot;\n    else\n        echo \u0026quot;Update cancelled\u0026quot;\n    fi\n}\n\nmain \u0026quot;$@\u0026quot;\nEOF\n\nchmod +x scripts/update-terraform.sh\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"maintenance-tasks\" class=\"mobile-header\"\u003eMaintenance Tasks\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Comprehensive maintenance script\ncat \u0026gt; scripts/terraform-maintenance.sh \u0026lt;\u0026lt;\u0026#039;EOF\u0026#039;\n#!/bin/bash\n\nMAINTENANCE_LOG=\u0026quot;/var/log/terraform-maintenance-$(date +%Y%m%d_%H%M%S).log\u0026quot;\n\nlog() {\n    echo \u0026quot;$(date \u0026#039;+%Y-%m-%d %H:%M:%S\u0026#039;) - $1\u0026quot; | tee -a \u0026quot;$MAINTENANCE_LOG\u0026quot;\n}\n\n# Cleanup old plan files\ncleanup_plans() {\n    log \u0026quot;🧹 Cleaning up old plan files...\u0026quot;\n    find . -name \u0026quot;*.tfplan\u0026quot; -mtime +7 -delete\n    find . -name \u0026quot;*.tfplan.json\u0026quot; -mtime +7 -delete\n    log \u0026quot;✅ Plan file cleanup completed\u0026quot;\n}\n\n# Cleanup provider cache\ncleanup_provider_cache() {\n    log \u0026quot;🧹 Cleaning up provider cache...\u0026quot;\n    if [[ -d \u0026quot;$HOME/.terraform.d/plugin-cache\u0026quot; ]]; then\n        # Remove providers older than 30 days\n        find \u0026quot;$HOME/.terraform.d/plugin-cache\u0026quot; -type f -mtime +30 -delete\n        \n        # Remove empty directories\n        find \u0026quot;$HOME/.terraform.d/plugin-cache\u0026quot; -type d -empty -delete\n        \n        cache_size=$(du -sh \u0026quot;$HOME/.terraform.d/plugin-cache\u0026quot; 2\u0026gt;/dev/null | cut -f1)\n        log \u0026quot;✅ Provider cache cleanup completed - current size: $cache_size\u0026quot;\n    fi\n}\n\n# Validate all configurations\nvalidate_configurations() {\n    log \u0026quot;🔍 Validating all configurations...\u0026quot;\n    \n    local validation_failed=false\n    \n    # Find all directories with Terraform files\n    find . -name \u0026quot;*.tf\u0026quot; -exec dirname {} \\; | sort -u | while read -r dir; do\n        log \u0026quot;Validating: $dir\u0026quot;\n        cd \u0026quot;$dir\u0026quot; || continue\n        \n        if terraform validate; then\n            log \u0026quot;✅ $dir validation passed\u0026quot;\n        else\n            log \u0026quot;❌ $dir validation failed\u0026quot;\n            validation_failed=true\n        fi\n        \n        cd - \u0026gt; /dev/null\n    done\n    \n    if [[ \u0026quot;$validation_failed\u0026quot; == \u0026quot;true\u0026quot; ]]; then\n        log \u0026quot;⚠️  Some validations failed - please review\u0026quot;\n    else\n        log \u0026quot;✅ All validations passed\u0026quot;\n    fi\n}\n\n# Check for deprecated features\ncheck_deprecated() {\n    log \u0026quot;🔍 Checking for deprecated features...\u0026quot;\n    \n    # Check for deprecated syntax\n    local deprecated_patterns=(\n        \u0026quot;provider\\s+\\\u0026quot;[^\\\u0026quot;]+\\\u0026quot;\\s+{\u0026quot; # Old provider syntax\n        \u0026quot;terraform\\s+{[^}]*version\\s*=\u0026quot; # Old terraform version constraints\n        \u0026quot;ignore_changes\\s*=\u0026quot; # Old ignore_changes syntax\n    )\n    \n    for pattern in \u0026quot;${deprecated_patterns[@]}\u0026quot;; do\n        if grep -r \u0026quot;$pattern\u0026quot; . --include=\u0026quot;*.tf\u0026quot; 2\u0026gt;/dev/null; then\n            log \u0026quot;⚠️  Deprecated pattern found: $pattern\u0026quot;\n        fi\n    done\n    \n    log \u0026quot;✅ Deprecation check completed\u0026quot;\n}\n\n# Security audit\nsecurity_audit() {\n    log \u0026quot;🔒 Performing security audit...\u0026quot;\n    \n    # Check for potential security issues\n    local security_issues=()\n    \n    # Check for hardcoded secrets\n    if grep -r -i \u0026quot;password\\s*=\\s*\\\u0026quot;[^$]\u0026quot; . --include=\u0026quot;*.tf\u0026quot; --include=\u0026quot;*.tfvars\u0026quot; 2\u0026gt;/dev/null; then\n        security_issues+=(\u0026quot;Potential hardcoded passwords\u0026quot;)\n    fi\n    \n    # Check for public access\n    if grep -r \u0026quot;0.0.0.0/0\u0026quot; . --include=\u0026quot;*.tf\u0026quot; 2\u0026gt;/dev/null; then\n        security_issues+=(\u0026quot;Public access (0.0.0.0/0) found\u0026quot;)\n    fi\n    \n    # Check for unencrypted resources\n    if grep -r \u0026quot;encrypt.*=.*false\u0026quot; . --include=\u0026quot;*.tf\u0026quot; 2\u0026gt;/dev/null; then\n        security_issues+=(\u0026quot;Unencrypted resources found\u0026quot;)\n    fi\n    \n    if [[ ${#security_issues[@]} -gt 0 ]]; then\n        log \u0026quot;⚠️  Security issues found:\u0026quot;\n        for issue in \u0026quot;${security_issues[@]}\u0026quot;; do\n            log \u0026quot;  - $issue\u0026quot;\n        done\n    else\n        log \u0026quot;✅ No obvious security issues found\u0026quot;\n    fi\n}\n\n# State health check\nstate_health_check() {\n    log \u0026quot;🏥 Performing state health check...\u0026quot;\n    \n    # Check state file size\n    if [[ -f \u0026quot;terraform.tfstate\u0026quot; ]]; then\n        state_size=$(stat -f%z \u0026quot;terraform.tfstate\u0026quot; 2\u0026gt;/dev/null || stat -c%s \u0026quot;terraform.tfstate\u0026quot; 2\u0026gt;/dev/null)\n        state_size_mb=$((state_size / 1024 / 1024))\n        \n        if [[ $state_size_mb -gt 50 ]]; then\n            log \u0026quot;⚠️  Large state file detected: ${state_size_mb}MB\u0026quot;\n        else\n            log \u0026quot;✅ State file size OK: ${state_size_mb}MB\u0026quot;\n        fi\n    fi\n    \n    # Check for drift\n    if terraform plan -detailed-exitcode \u0026gt; /dev/null 2\u0026gt;\u0026amp;1; then\n        log \u0026quot;✅ No infrastructure drift detected\u0026quot;\n    else\n        exit_code=$?\n        if [[ $exit_code -eq 2 ]]; then\n            log \u0026quot;⚠️  Infrastructure drift detected\u0026quot;\n        else\n            log \u0026quot;❌ Error checking for drift\u0026quot;\n        fi\n    fi\n}\n\n# Generate maintenance report\ngenerate_report() {\n    log \u0026quot;📊 Generating maintenance report...\u0026quot;\n    \n    local report_file=\u0026quot;/tmp/terraform-maintenance-report-$(date +%Y%m%d_%H%M%S).md\u0026quot;\n    \n    cat \u0026gt; \u0026quot;$report_file\u0026quot; \u0026lt;\u0026lt;EOF\n# Terraform Maintenance Report\n\n**Date:** $(date)\n**Duration:** $((SECONDS / 60)) minutes\n\n## Summary\n\n- Configuration validation: $(grep \u0026quot;validation\u0026quot; \u0026quot;$MAINTENANCE_LOG\u0026quot; | grep -c \u0026quot;passed\u0026quot;)\n- Security audit: Completed\n- State health check: Completed\n- Cleanup operations: Completed\n\n## Recommendations\n\n$(grep \u0026quot;⚠️\u0026quot; \u0026quot;$MAINTENANCE_LOG\u0026quot; | sed \u0026#039;s/.*⚠️  /- /\u0026#039;)\n\n## Full Log\n\n\\`\\`\\`\n$(cat \u0026quot;$MAINTENANCE_LOG\u0026quot;)\n\\`\\`\\`\nEOF\n    \n    log \u0026quot;📄 Maintenance report generated: $report_file\u0026quot;\n    \n    # Email report if configured\n    if [[ -n \u0026quot;$MAINTENANCE_EMAIL\u0026quot; ]]; then\n        mail -s \u0026quot;Terraform Maintenance Report - $(date)\u0026quot; \u0026quot;$MAINTENANCE_EMAIL\u0026quot; \u0026lt; \u0026quot;$report_file\u0026quot;\n        log \u0026quot;📧 Report emailed to: $MAINTENANCE_EMAIL\u0026quot;\n    fi\n}\n\n# Main maintenance routine\nmain() {\n    log \u0026quot;🚀 Starting Terraform maintenance...\u0026quot;\n    \n    cleanup_plans\n    cleanup_provider_cache\n    validate_configurations\n    check_deprecated\n    security_audit\n    state_health_check\n    generate_report\n    \n    log \u0026quot;🎉 Terraform maintenance completed\u0026quot;\n    log \u0026quot;📊 Total runtime: $((SECONDS / 60)) minutes\u0026quot;\n}\n\n# Run maintenance\nmain \u0026quot;$@\u0026quot;\nEOF\n\nchmod +x scripts/terraform-maintenance.sh\n\n# Schedule maintenance with cron\ncat \u0026gt; scripts/schedule-maintenance.sh \u0026lt;\u0026lt;\u0026#039;EOF\u0026#039;\n#!/bin/bash\n\n# Add to crontab for weekly maintenance\n(crontab -l 2\u0026gt;/dev/null; echo \u0026quot;0 2 * * 0 /path/to/terraform-maintenance.sh\u0026quot;) | crontab -\n\necho \u0026quot;✅ Weekly maintenance scheduled for Sundays at 2 AM\u0026quot;\nEOF\n\nchmod +x scripts/schedule-maintenance.sh\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"integration-examples\" class=\"mobile-header\"\u003eIntegration Examples\u003c/h2\u003e\n\u003ch3 id=\"cicd-pipeline-integration\" class=\"mobile-header\"\u003eCI/CD Pipeline Integration\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# GitHub Actions workflow\nmkdir -p .github/workflows\ncat \u0026gt; .github/workflows/terraform.yml \u0026lt;\u0026lt;EOF\nname: Terraform Multi-Cloud Deployment\n\non:\n  push:\n    branches: [ main, develop ]\n  pull_request:\n    branches: [ main ]\n\nenv:\n  TF_VERSION: 1.6.4\n\njobs:\n  terraform:\n    runs-on: ubuntu-latest\n    strategy:\n      matrix:\n        environment: [development, staging, production]\n        \n    steps:\n    - name: Checkout code\n      uses: actions/checkout@v4\n    \n    - name: Setup Terraform\n      uses: hashicorp/setup-terraform@v3\n      with:\n        terraform_version: \\${{ env.TF_VERSION }}\n        cli_config_credentials_token: \\${{ secrets.TF_CLOUD_TOKEN }}\n    \n    - name: Configure AWS credentials\n      uses: aws-actions/configure-aws-credentials@v4\n      with:\n        aws-access-key-id: \\${{ secrets.AWS_ACCESS_KEY_ID }}\n        aws-secret-access-key: \\${{ secrets.AWS_SECRET_ACCESS_KEY }}\n        aws-region: us-west-2\n    \n    - name: Terraform Format Check\n      run: terraform fmt -check -recursive\n    \n    - name: Terraform Initialize\n      run: terraform init\n      working-directory: environments/\\${{ matrix.environment }}\n    \n    - name: Terraform Validate\n      run: terraform validate\n      working-directory: environments/\\${{ matrix.environment }}\n    \n    - name: Terraform Plan\n      run: terraform plan -var-file=\u0026quot;\\${{ matrix.environment }}.tfvars\u0026quot;\n      working-directory: environments/\\${{ matrix.environment }}\n    \n    - name: Security Scan with Checkov\n      uses: bridgecrewio/checkov-action@master\n      with:\n        directory: .\n        framework: terraform\n        output_format: sarif\n        output_file_path: checkov.sarif\n    \n    - name: Upload Checkov results\n      uses: github/codeql-action/upload-sarif@v2\n      if: always()\n      with:\n        sarif_file: checkov.sarif\n    \n    - name: Terraform Apply (Production)\n      if: github.ref == \u0026#039;refs/heads/main\u0026#039; \u0026amp;\u0026amp; matrix.environment == \u0026#039;production\u0026#039;\n      run: terraform apply -auto-approve -var-file=\u0026quot;production.tfvars\u0026quot;\n      working-directory: environments/production\nEOF\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"gitlab-ci-integration\" class=\"mobile-header\"\u003eGitLab CI Integration\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003ecat \u0026gt; .gitlab-ci.yml \u0026lt;\u0026lt;EOF\nstages:\n  - validate\n  - plan\n  - apply\n  - destroy\n\nvariables:\n  TF_ROOT: \\${CI_PROJECT_DIR}\n  TF_VERSION: \u0026quot;1.6.4\u0026quot;\n  TF_IN_AUTOMATION: \u0026quot;true\u0026quot;\n\ncache:\n  key: \u0026quot;\\${TF_ROOT}\u0026quot;\n  paths:\n    - \\${TF_ROOT}/.terraform\n\nbefore_script:\n  - cd \\${TF_ROOT}\n  - terraform version\n  - terraform init\n\nvalidate:\n  stage: validate\n  script:\n    - terraform fmt -check -recursive\n    - terraform validate\n    - |\n      for dir in environments/*/; do\n        cd \u0026quot;\\$dir\u0026quot;\n        terraform validate\n        cd -\n      done\n  rules:\n    - if: \u0026#039;\\$CI_MERGE_REQUEST_IID\u0026#039;\n    - if: \u0026#039;\\$CI_COMMIT_BRANCH == \\$CI_DEFAULT_BRANCH\u0026#039;\n\nplan:production:\n  stage: plan\n  script:\n    - cd environments/production\n    - terraform plan -var-file=\u0026quot;production.tfvars\u0026quot; -out=\u0026quot;production.tfplan\u0026quot;\n  artifacts:\n    paths:\n      - environments/production/production.tfplan\n    expire_in: 1 week\n  rules:\n    - if: \u0026#039;\\$CI_COMMIT_BRANCH == \\$CI_DEFAULT_BRANCH\u0026#039;\n\napply:production:\n  stage: apply\n  script:\n    - cd environments/production\n    - terraform apply -input=false \u0026quot;production.tfplan\u0026quot;\n  dependencies:\n    - plan:production\n  rules:\n    - if: \u0026#039;\\$CI_COMMIT_BRANCH == \\$CI_DEFAULT_BRANCH\u0026#039;\n      when: manual\nEOF\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"jenkins-pipeline\" class=\"mobile-header\"\u003eJenkins Pipeline\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"groovy\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003egroovy\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-groovy\"\u003e// Jenkinsfile\npipeline {\n    agent any\n    \n    environment {\n        TF_VERSION = \u0026#039;1.6.4\u0026#039;\n        AWS_DEFAULT_REGION = \u0026#039;us-west-2\u0026#039;\n    }\n    \n    stages {\n        stage(\u0026#039;Checkout\u0026#039;) {\n            steps {\n                checkout scm\n            }\n        }\n        \n        stage(\u0026#039;Setup\u0026#039;) {\n            steps {\n                sh \u0026#039;\u0026#039;\u0026#039;\n                    # Install Terraform if not present\n                    if ! command -v terraform \u0026amp;\u0026gt; /dev/null; then\n                        wget https://releases.hashicorp.com/terraform/${TF_VERSION}/terraform_${TF_VERSION}_linux_amd64.zip\n                        unzip terraform_${TF_VERSION}_linux_amd64.zip\n                        chmod +x terraform\n                        sudo mv terraform /usr/local/bin/\n                    fi\n                    \n                    terraform version\n                \u0026#039;\u0026#039;\u0026#039;\n            }\n        }\n        \n        stage(\u0026#039;Validate\u0026#039;) {\n            parallel {\n                stage(\u0026#039;Format Check\u0026#039;) {\n                    steps {\n                        sh \u0026#039;terraform fmt -check -recursive\u0026#039;\n                    }\n                }\n                stage(\u0026#039;Configuration Validation\u0026#039;) {\n                    steps {\n                        sh \u0026#039;\u0026#039;\u0026#039;\n                            for dir in environments/*/; do\n                                cd \u0026quot;$dir\u0026quot;\n                                terraform init\n                                terraform validate\n                                cd -\n                            done\n                        \u0026#039;\u0026#039;\u0026#039;\n                    }\n                }\n                stage(\u0026#039;Security Scan\u0026#039;) {\n                    steps {\n                        sh \u0026#039;\u0026#039;\u0026#039;\n                            # Install and run Checkov\n                            pip3 install checkov\n                            checkov --framework terraform --directory .\n                        \u0026#039;\u0026#039;\u0026#039;\n                    }\n                }\n            }\n        }\n        \n        stage(\u0026#039;Plan\u0026#039;) {\n            steps {\n                script {\n                    def environments = [\u0026#039;development\u0026#039;, \u0026#039;staging\u0026#039;, \u0026#039;production\u0026#039;]\n                    def planResults = [:]\n                    \n                    environments.each { env -\u0026gt;\n                        planResults[env] = {\n                            dir(\u0026quot;environments/${env}\u0026quot;) {\n                                sh \u0026quot;\u0026quot;\u0026quot;\n                                    terraform init\n                                    terraform plan -var-file=\u0026quot;${env}.tfvars\u0026quot; -out=\u0026quot;${env}.tfplan\u0026quot;\n                                \u0026quot;\u0026quot;\u0026quot;\n                            }\n                        }\n                    }\n                    \n                    parallel planResults\n                }\n            }\n        }\n        \n        stage(\u0026#039;Apply\u0026#039;) {\n            when {\n                branch \u0026#039;main\u0026#039;\n            }\n            steps {\n                script {\n                    input message: \u0026#039;Apply Terraform changes?\u0026#039;, ok: \u0026#039;Apply\u0026#039;\n                    \n                    dir(\u0026#039;environments/production\u0026#039;) {\n                        sh \u0026#039;terraform apply -input=false production.tfplan\u0026#039;\n                    }\n                }\n            }\n        }\n    }\n    \n    post {\n        always {\n            archiveArtifacts artifacts: \u0026#039;environments/**/*.tfplan\u0026#039;, fingerprint: true\n            publishHTML([\n                allowMissing: false,\n                alwaysLinkToLastBuild: true,\n                keepAll: true,\n                reportDir: \u0026#039;checkov-report\u0026#039;,\n                reportFiles: \u0026#039;index.html\u0026#039;,\n                reportName: \u0026#039;Checkov Security Report\u0026#039;\n            ])\n        }\n        failure {\n            emailext (\n                subject: \u0026quot;Terraform Pipeline Failed: ${env.JOB_NAME} - ${env.BUILD_NUMBER}\u0026quot;,\n                body: \u0026quot;The Terraform pipeline has failed. Please check the build logs for details.\u0026quot;,\n                to: \u0026quot;${env.CHANGE_AUTHOR_EMAIL}\u0026quot;\n            )\n        }\n    }\n}\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"additional-resources\" class=\"mobile-header\"\u003eAdditional Resources\u003c/h2\u003e\n\u003cli class=\"mobile-list-item\"\u003e\u003ca href=\"https://developer.hashicorp.com/terraform/docs\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\"\u003eOfficial Terraform Documentation\u003c/a\u003e\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003e\u003ca href=\"https://registry.terraform.io/\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\"\u003eTerraform Registry\u003c/a\u003e\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003e\u003ca href=\"https://developer.hashicorp.com/terraform/cloud-docs/recommended-practices\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\"\u003eTerraform Best Practices\u003c/a\u003e\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003e\u003ca href=\"https://developer.hashicorp.com/terraform/tutorials/aws-get-started\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\"\u003eMulti-Cloud Architecture Guide\u003c/a\u003e\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003e\u003ca href=\"https://developer.hashicorp.com/terraform/language/values/sensitive\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\"\u003eSecurity Best Practices\u003c/a\u003e\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003e\u003ca href=\"https://registry.terraform.io/providers/hashicorp/aws/latest/docs\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\"\u003eAWS Provider Documentation\u003c/a\u003e\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003e\u003ca href=\"https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\"\u003eAzure Provider Documentation\u003c/a\u003e\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003e\u003ca href=\"https://registry.terraform.io/providers/hashicorp/google/latest/docs\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\"\u003eGCP Provider Documentation\u003c/a\u003e\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003e\u003ca href=\"https://discuss.hashicorp.com/c/terraform-core\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\"\u003eTerraform Community Forum\u003c/a\u003e\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003e\u003ca href=\"https://learn.hashicorp.com/terraform\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\"\u003eHashiCorp Learn Terraform\u003c/a\u003e\u003c/li\u003e\n\u003cp class=\"mobile-paragraph\"\u003e---\u003c/p\u003e\n\u003cp class=\"mobile-paragraph\"\u003e\u003cstrong\u003eNote:\u003c/strong\u003e This guide is part of the \u003ca href=\"https://howtomgr.github.io\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\"\u003eHowToMgr\u003c/a\u003e collection. Always refer to official documentation for the most up-to-date information.\u003c/p\u003e","readTime":"33 min","wordCount":6439,"lastBuilt":"2025-09-15T18:14:26.777Z"},"category":{"key":"infrastructure","name":"Infrastructure","description":"DevOps and infrastructure automation tools","icon":"🏗️","color":"#44475a","keywords":["ansible","terraform","gitlab","jenkins","consul","etcd"]},"relatedGuides":[{"name":"adguard-home","displayName":"Adguard Home","slug":"adguard-home","description":"Repo for adguard-home","category":"infrastructure","language":null,"stars":0,"forks":0,"topics":[],"githubUrl":"https://github.com/howtomgr/adguard-home","updatedAt":"2025-09-08T03:04:18Z","createdAt":"2025-09-08T03:04:08Z","readmeRaw":"## 👋 Welcome to adguard-home 🚀  \n\nadguard-home README  \n  \n  \n## Author  \n\n🤖 casjay: [Github](https://github.com/casjay) 🤖  \n","readmeHtml":"\u003ch2 id=\"welcome-to-adguard-home\" class=\"mobile-header\"\u003e👋 Welcome to adguard-home 🚀  \u003c/h2\u003e\n\u003cp class=\"mobile-paragraph\"\u003eadguard-home README  \u003c/p\u003e\n\u003ch2 id=\"author\" class=\"mobile-header\"\u003eAuthor  \u003c/h2\u003e\n\u003cp class=\"mobile-paragraph\"\u003e🤖 casjay: \u003ca href=\"https://github.com/casjay\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\"\u003eGithub\u003c/a\u003e 🤖  \u003c/p\u003e","readTime":"1 min","wordCount":15,"lastBuilt":"2025-09-15T18:14:58.581Z"},{"name":"adminer","displayName":"Adminer","slug":"adminer","description":"Repo for adminer","category":"infrastructure","language":null,"stars":0,"forks":0,"topics":[],"githubUrl":"https://github.com/howtomgr/adminer","updatedAt":"2025-09-08T03:04:32Z","createdAt":"2025-09-08T03:04:22Z","readmeRaw":"## 👋 Welcome to adminer 🚀  \n\nadminer README  \n  \n  \n## Author  \n\n🤖 casjay: [Github](https://github.com/casjay) 🤖  \n","readmeHtml":"\u003ch2 id=\"welcome-to-adminer\" class=\"mobile-header\"\u003e👋 Welcome to adminer 🚀  \u003c/h2\u003e\n\u003cp class=\"mobile-paragraph\"\u003eadminer README  \u003c/p\u003e\n\u003ch2 id=\"author\" class=\"mobile-header\"\u003eAuthor  \u003c/h2\u003e\n\u003cp class=\"mobile-paragraph\"\u003e🤖 casjay: \u003ca href=\"https://github.com/casjay\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\"\u003eGithub\u003c/a\u003e 🤖  \u003c/p\u003e","readTime":"1 min","wordCount":15,"lastBuilt":"2025-09-15T18:14:58.168Z"},{"name":"ansible","displayName":"Ansible","slug":"ansible","description":"Repo for ansible","category":"infrastructure","language":null,"stars":0,"forks":0,"topics":[],"githubUrl":"https://github.com/howtomgr/ansible","updatedAt":"2025-09-14T01:29:39Z","createdAt":"2025-09-08T03:04:35Z","readmeRaw":"# Ansible Installation Guide\n\nAgentless automation platform for configuration management, application deployment, and task automation across multiple systems. Industry standard for infrastructure automation with enterprise-grade security.\n\n## Prerequisites\n\n- Linux control machine (any modern distribution)\n- Python 3.8+ on control machine\n- SSH access to target hosts\n- Python 2.7+ or 3.5+ on target hosts\n- 2GB RAM minimum, 4GB+ recommended for large infrastructures\n\n## Installation\n\n### Using Package Manager (Recommended)\n\n#### Ubuntu/Debian\n```bash\n# Update package list\nsudo apt update\n\n# Install Ansible and dependencies\nsudo apt install -y ansible python3-pip python3-venv sshpass\n\n# Install additional collections\nansible-galaxy collection install community.general\nansible-galaxy collection install ansible.posix\nansible-galaxy collection install kubernetes.core\nansible-galaxy collection install amazon.aws\nansible-galaxy collection install azure.azcollection\nansible-galaxy collection install google.cloud\n\n# Verify installation\nansible --version\nansible-galaxy collection list\n```\n\n#### RHEL/CentOS/Rocky Linux/AlmaLinux\n```bash\n# Install EPEL repository\nsudo yum install -y epel-release\n\n# Install Ansible\nsudo yum install -y ansible python3-pip\n\n# For newer distributions\nsudo dnf install -y ansible python3-pip\n\n# Install collections\nansible-galaxy collection install community.general\nansible-galaxy collection install ansible.posix\nansible-galaxy collection install kubernetes.core\n\n# Verify installation\nansible --version\n```\n\n#### Fedora\n```bash\n# Install Ansible\nsudo dnf install -y ansible python3-pip python3-virtualenv\n\n# Install additional collections\nansible-galaxy collection install community.general\nansible-galaxy collection install ansible.posix\nansible-galaxy collection install kubernetes.core\n\n# Verify installation\nansible --version\n```\n\n#### Arch Linux\n```bash\n# Install Ansible\nsudo pacman -Syu ansible python-pip\n\n# Install collections\nansible-galaxy collection install community.general\nansible-galaxy collection install ansible.posix\n\n# Verify installation\nansible --version\n```\n\n#### Alpine Linux\n```bash\n# Install Ansible\nsudo apk update\nsudo apk add ansible python3 py3-pip openssh\n\n# Install collections\nansible-galaxy collection install community.general\n\n# Verify installation\nansible --version\n```\n\n### Using pip (Latest Version)\n```bash\n# Create virtual environment (recommended)\npython3 -m venv ~/ansible-venv\nsource ~/ansible-venv/bin/activate\n\n# Install Ansible via pip\npip install --upgrade pip\npip install ansible ansible-core\n\n# Install additional packages\npip install paramiko jinja2 PyYAML cryptography\n\n# Install cloud provider SDKs\npip install boto3 botocore azure-cli google-cloud-storage\n\n# Install collections\nansible-galaxy collection install community.general\nansible-galaxy collection install ansible.posix\nansible-galaxy collection install kubernetes.core\nansible-galaxy collection install amazon.aws\nansible-galaxy collection install azure.azcollection\nansible-galaxy collection install google.cloud\n\n# Add to PATH permanently\necho 'source ~/ansible-venv/bin/activate' \u003e\u003e ~/.bashrc\n\n# Verify installation\nansible --version\n```\n\n### Using Docker\n```bash\n# Create Ansible Docker container with mounted volumes\ndocker run --rm -it \\\n  -v $(pwd):/ansible \\\n  -v ~/.ssh:/root/.ssh:ro \\\n  -v ~/.aws:/root/.aws:ro \\\n  -v ~/.azure:/root/.azure:ro \\\n  --workdir /ansible \\\n  ansible/ansible:latest\n\n# Create wrapper script for ease of use\nsudo tee /usr/local/bin/ansible-docker \u003e /dev/null \u003c\u003c'EOF'\n#!/bin/bash\ndocker run --rm -it \\\n  -v $(pwd):/ansible \\\n  -v ~/.ssh:/root/.ssh:ro \\\n  -v ~/.aws:/root/.aws:ro \\\n  -v ~/.azure:/root/.azure:ro \\\n  -v ~/.kube:/root/.kube:ro \\\n  --workdir /ansible \\\n  --network host \\\n  ansible/ansible:latest \"$@\"\nEOF\nsudo chmod +x /usr/local/bin/ansible-docker\n\n# Create aliases\necho 'alias ansible=\"ansible-docker ansible\"' \u003e\u003e ~/.bashrc\necho 'alias ansible-playbook=\"ansible-docker ansible-playbook\"' \u003e\u003e ~/.bashrc\n```\n\n## Project Structure and Configuration\n\n### Professional Project Structure\n```bash\n# Create comprehensive Ansible project structure\nmkdir -p ~/ansible-infrastructure/{\n  inventories/{production,staging,development},\n  playbooks,\n  roles,\n  group_vars,\n  host_vars,\n  library,\n  filter_plugins,\n  callback_plugins,\n  vault,\n  collections,\n  logs\n}\n\ncd ~/ansible-infrastructure\n\n# Create ansible.cfg with security best practices\ncat \u003e ansible.cfg \u003c\u003cEOF\n[defaults]\ninventory = inventories/production/hosts.yml\nremote_user = ansible\nprivate_key_file = ~/.ssh/ansible_key\nhost_key_checking = True\ntimeout = 30\nretry_files_enabled = False\nstdout_callback = yaml\nbin_ansible_callbacks = True\ngathering = smart\nfact_caching = jsonfile\nfact_caching_connection = ~/.ansible/facts_cache\nfact_caching_timeout = 86400\ninterpreter_python = auto_silent\nvault_password_file = ~/.ansible_vault_pass\n\n# Logging\nlog_path = logs/ansible.log\ndisplay_skipped_hosts = False\ndisplay_ok_hosts = False\n\n# Performance\nforks = 20\npoll_interval = 15\ninternal_poll_interval = 0.001\n\n# Security\ncommand_warnings = True\ndeprecation_warnings = True\naction_warnings = True\nlocalhost_warning = True\n\n[ssh_connection]\nssh_args = -o ControlMaster=auto -o ControlPersist=3600s -o PreferredAuthentications=publickey\npipelining = True\ncontrol_path = ~/.ansible/cp/%%h-%%p-%%r\nretries = 3\n\n[privilege_escalation]\nbecome = False\nbecome_method = sudo\nbecome_user = root\nbecome_ask_pass = False\n\n[inventory]\nenable_plugins = host_list, script, auto, yaml, ini, toml\ncache = True\ncache_plugin = jsonfile\ncache_timeout = 3600\ncache_connection = ~/.ansible/inventory_cache\n\n[galaxy]\nserver_list = automation_hub, galaxy\nEOF\n```\n\n### Advanced Inventory Management\n```bash\n# Create production inventory with groups and variables\ncat \u003e inventories/production/hosts.yml \u003c\u003cEOF\nall:\n  children:\n    webservers:\n      hosts:\n        web-prod-01:\n          ansible_host: 10.0.1.10\n          ansible_user: ansible\n          server_role: frontend\n          backup_enabled: true\n        web-prod-02:\n          ansible_host: 10.0.1.11\n          ansible_user: ansible\n          server_role: frontend\n          backup_enabled: true\n        web-prod-03:\n          ansible_host: 10.0.1.12\n          ansible_user: ansible\n          server_role: frontend\n          backup_enabled: true\n      vars:\n        http_port: 80\n        https_port: 443\n        max_clients: 200\n        environment: production\n        monitoring_enabled: true\n\n    dbservers:\n      hosts:\n        db-prod-01:\n          ansible_host: 10.0.2.10\n          ansible_user: ansible\n          mysql_server_id: 1\n          mysql_role: master\n        db-prod-02:\n          ansible_host: 10.0.2.11\n          ansible_user: ansible\n          mysql_server_id: 2\n          mysql_role: slave\n      vars:\n        mysql_port: 3306\n        mysql_root_password: \"{{ vault_mysql_root_password }}\"\n        mysql_replication_user: \"{{ vault_mysql_replication_user }}\"\n        mysql_replication_password: \"{{ vault_mysql_replication_password }}\"\n\n    loadbalancers:\n      hosts:\n        lb-prod-01:\n          ansible_host: 10.0.3.10\n          ansible_user: ansible\n          lb_algorithm: roundrobin\n        lb-prod-02:\n          ansible_host: 10.0.3.11\n          ansible_user: ansible\n          lb_algorithm: roundrobin\n      vars:\n        haproxy_stats_enabled: true\n        haproxy_stats_user: admin\n        haproxy_stats_password: \"{{ vault_haproxy_stats_password }}\"\n\n    monitoring:\n      hosts:\n        monitor-prod-01:\n          ansible_host: 10.0.4.10\n          ansible_user: ansible\n          prometheus_retention: 30d\n          grafana_admin_password: \"{{ vault_grafana_admin_password }}\"\n\n    bastion:\n      hosts:\n        bastion-prod-01:\n          ansible_host: bastion.example.com\n          ansible_user: ansible\n          ansible_port: 22\n\n# Global variables for all hosts\nwebservers:\n  vars:\n    nginx_worker_processes: auto\n    nginx_worker_connections: 1024\n    ssl_certificate_path: /etc/ssl/certs\n    backup_schedule: \"0 2 * * *\"\n\ndbservers:\n  vars:\n    mysql_innodb_buffer_pool_size: 2G\n    mysql_max_connections: 200\n    backup_schedule: \"0 1 * * *\"\n    monitoring_enabled: true\nEOF\n\n# Create dynamic inventory script for cloud environments\ncat \u003e inventories/production/aws_ec2.yml \u003c\u003cEOF\nplugin: amazon.aws.aws_ec2\nregions:\n  - us-west-2\n  - us-east-1\nfilters:\n  tag:Environment: production\n  tag:Ansible: managed\n  instance-state-name: running\n\nhostnames:\n  - tag:Name\n  - dns-name\n  - private-ip-address\n\ncompose:\n  ansible_host: private_ip_address\n  ec2_state: ec2_state_name\n  ec2_arch: ec2_architecture\n\ngroups:\n  # Group by instance type\n  webservers: \"'web' in tags.Role\"\n  databases: \"'db' in tags.Role\"\n  loadbalancers: \"'lb' in tags.Role\"\n  \n  # Group by environment\n  production: \"tags.Environment == 'production'\"\n  staging: \"tags.Environment == 'staging'\"\n  \n  # Group by availability zone\n  us_west_2a: ec2_placement_availability_zone == \"us-west-2a\"\n  us_west_2b: ec2_placement_availability_zone == \"us-west-2b\"\n\nkeyed_groups:\n  # Create groups based on tags\n  - key: tags.Environment\n    prefix: env\n  - key: tags.Role  \n    prefix: role\n  - key: ec2_instance_type\n    prefix: type\nEOF\n```\n\n### Ansible Vault Security\n```bash\n# Create strong vault password\nopenssl rand -base64 32 \u003e ~/.ansible_vault_pass\nchmod 600 ~/.ansible_vault_pass\n\n# Create encrypted vault file for secrets\nansible-vault create group_vars/all/vault.yml\n# Enter secure passwords and API keys:\n# vault_mysql_root_password: your_secure_mysql_password\n# vault_grafana_admin_password: your_secure_grafana_password  \n# vault_ssl_private_key: |\n#   -----BEGIN PRIVATE KEY-----\n#   your_private_key_content\n#   -----END PRIVATE KEY-----\n\n# Create non-encrypted variables file\ncat \u003e group_vars/all/vars.yml \u003c\u003cEOF\n# Non-sensitive variables\nmysql_port: 3306\nnginx_port: 80\ngrafana_port: 3000\nprometheus_port: 9090\n\n# Reference vault variables\nmysql_root_password: \"{{ vault_mysql_root_password }}\"\ngrafana_admin_password: \"{{ vault_grafana_admin_password }}\"\n\n# SSL configuration\nssl_certificate_path: /etc/ssl/certs/server.crt\nssl_private_key_path: /etc/ssl/private/server.key\nssl_private_key_content: \"{{ vault_ssl_private_key }}\"\n\n# Security settings\nansible_ssh_common_args: '-o StrictHostKeyChecking=yes -o UserKnownHostsFile=~/.ssh/known_hosts'\nansible_become_method: sudo\nansible_become_user: root\nEOF\n\n# Edit vault file\nansible-vault edit group_vars/all/vault.yml\n\n# View vault file (read-only)\nansible-vault view group_vars/all/vault.yml\n\n# Change vault password\nansible-vault rekey group_vars/all/vault.yml\n```\n\n## Comprehensive Playbooks\n\n### System Hardening Playbook\n```bash\ncat \u003e playbooks/system-hardening.yml \u003c\u003cEOF\n---\n- name: System Security Hardening\n  hosts: all\n  become: yes\n  gather_facts: yes\n  vars:\n    security_packages:\n      - fail2ban\n      - ufw\n      - aide\n      - chkrootkit\n      - rkhunter\n      - clamav\n      - lynis\n    \n    disabled_services:\n      - telnet\n      - rsh\n      - rlogin\n      - tftp\n      - talk\n      - finger\n\n  pre_tasks:\n    - name: Update package cache\n      package:\n        update_cache: yes\n        cache_valid_time: 3600\n      when: ansible_os_family in [\"Debian\", \"RedHat\"]\n\n  tasks:\n    # System updates\n    - name: Upgrade all packages\n      package:\n        name: \"*\"\n        state: latest\n      when: ansible_os_family == \"RedHat\"\n\n    - name: Upgrade all packages (Debian/Ubuntu)\n      apt:\n        upgrade: dist\n        autoremove: yes\n        autoclean: yes\n      when: ansible_os_family == \"Debian\"\n\n    # Install security packages\n    - name: Install security packages\n      package:\n        name: \"{{ security_packages }}\"\n        state: present\n\n    # User security\n    - name: Create ansible user with limited privileges\n      user:\n        name: ansible\n        groups: sudo\n        shell: /bin/bash\n        create_home: yes\n        generate_ssh_key: yes\n        ssh_key_bits: 4096\n        ssh_key_type: rsa\n\n    - name: Configure sudo for ansible user\n      lineinfile:\n        path: /etc/sudoers.d/ansible\n        line: 'ansible ALL=(ALL) NOPASSWD:ALL'\n        create: yes\n        mode: '0440'\n        validate: 'visudo -cf %s'\n\n    # SSH hardening\n    - name: Configure SSH security\n      lineinfile:\n        path: /etc/ssh/sshd_config\n        regexp: \"{{ item.regexp }}\"\n        line: \"{{ item.line }}\"\n        backup: yes\n      loop:\n        - { regexp: '^#?PermitRootLogin', line: 'PermitRootLogin no' }\n        - { regexp: '^#?PasswordAuthentication', line: 'PasswordAuthentication no' }\n        - { regexp: '^#?X11Forwarding', line: 'X11Forwarding no' }\n        - { regexp: '^#?MaxAuthTries', line: 'MaxAuthTries 3' }\n        - { regexp: '^#?ClientAliveInterval', line: 'ClientAliveInterval 300' }\n        - { regexp: '^#?ClientAliveCountMax', line: 'ClientAliveCountMax 0' }\n        - { regexp: '^#?Protocol', line: 'Protocol 2' }\n        - { regexp: '^#?LogLevel', line: 'LogLevel VERBOSE' }\n      notify: restart ssh\n\n    # Firewall configuration\n    - name: Configure UFW firewall (Debian/Ubuntu)\n      ufw:\n        state: enabled\n        policy: deny\n        direction: incoming\n      when: ansible_os_family == \"Debian\"\n\n    - name: Allow SSH through UFW\n      ufw:\n        rule: allow\n        port: 22\n        proto: tcp\n        comment: 'SSH access'\n      when: ansible_os_family == \"Debian\"\n\n    - name: Configure firewalld (RHEL/CentOS/Fedora)\n      firewalld:\n        state: enabled\n        permanent: yes\n        immediate: yes\n      when: ansible_os_family == \"RedHat\"\n\n    - name: Allow SSH through firewalld\n      firewalld:\n        service: ssh\n        permanent: yes\n        state: enabled\n        immediate: yes\n      when: ansible_os_family == \"RedHat\"\n\n    # Disable unnecessary services\n    - name: Disable unnecessary services\n      systemd:\n        name: \"{{ item }}\"\n        enabled: no\n        state: stopped\n      loop: \"{{ disabled_services }}\"\n      ignore_errors: yes\n\n    # File system security\n    - name: Set proper permissions on sensitive files\n      file:\n        path: \"{{ item.path }}\"\n        mode: \"{{ item.mode }}\"\n        owner: root\n        group: root\n      loop:\n        - { path: '/etc/passwd', mode: '0644' }\n        - { path: '/etc/shadow', mode: '0640' }\n        - { path: '/etc/group', mode: '0644' }\n        - { path: '/etc/gshadow', mode: '0640' }\n        - { path: '/etc/ssh/sshd_config', mode: '0600' }\n\n    # Kernel security parameters\n    - name: Configure kernel security parameters\n      sysctl:\n        name: \"{{ item.key }}\"\n        value: \"{{ item.value }}\"\n        sysctl_set: yes\n        state: present\n        reload: yes\n      loop:\n        - { key: 'net.ipv4.ip_forward', value: '0' }\n        - { key: 'net.ipv4.conf.all.send_redirects', value: '0' }\n        - { key: 'net.ipv4.conf.default.send_redirects', value: '0' }\n        - { key: 'net.ipv4.conf.all.accept_source_route', value: '0' }\n        - { key: 'net.ipv4.conf.default.accept_source_route', value: '0' }\n        - { key: 'net.ipv4.conf.all.accept_redirects', value: '0' }\n        - { key: 'net.ipv4.conf.default.accept_redirects', value: '0' }\n        - { key: 'net.ipv4.conf.all.secure_redirects', value: '0' }\n        - { key: 'net.ipv4.conf.default.secure_redirects', value: '0' }\n        - { key: 'net.ipv4.conf.all.log_martians', value: '1' }\n        - { key: 'net.ipv4.conf.default.log_martians', value: '1' }\n        - { key: 'kernel.randomize_va_space', value: '2' }\n\n    # Configure fail2ban\n    - name: Configure fail2ban for SSH protection\n      template:\n        src: templates/fail2ban-jail.local.j2\n        dest: /etc/fail2ban/jail.local\n        backup: yes\n      notify: restart fail2ban\n\n  handlers:\n    - name: restart ssh\n      service:\n        name: \"{{ 'ssh' if ansible_os_family == 'Debian' else 'sshd' }}\"\n        state: restarted\n\n    - name: restart fail2ban\n      service:\n        name: fail2ban\n        state: restarted\nEOF\n```\n\n### Application Deployment Playbook\n```bash\ncat \u003e playbooks/web-application-deployment.yml \u003c\u003cEOF\n---\n- name: Deploy Web Application Stack\n  hosts: webservers\n  become: yes\n  serial: \"25%\"  # Rolling deployment\n  max_fail_percentage: 10\n  vars:\n    app_name: mywebapp\n    app_version: \"{{ app_version | default('latest') }}\"\n    app_port: 3000\n    nginx_workers: \"{{ ansible_processor_cores }}\"\n    \n  pre_tasks:\n    - name: Check if maintenance mode file exists\n      stat:\n        path: /var/www/html/maintenance.html\n      register: maintenance_mode\n\n    - name: Fail if in maintenance mode\n      fail:\n        msg: \"Server is in maintenance mode\"\n      when: maintenance_mode.stat.exists and not force_deployment | default(false)\n\n  tasks:\n    # Application deployment\n    - name: Create application user\n      user:\n        name: \"{{ app_name }}\"\n        system: yes\n        shell: /bin/false\n        home: \"/opt/{{ app_name }}\"\n        create_home: yes\n\n    - name: Create application directories\n      file:\n        path: \"{{ item }}\"\n        state: directory\n        owner: \"{{ app_name }}\"\n        group: \"{{ app_name }}\"\n        mode: '0755'\n      loop:\n        - \"/opt/{{ app_name }}\"\n        - \"/opt/{{ app_name }}/releases\"\n        - \"/opt/{{ app_name }}/shared\"\n        - \"/var/log/{{ app_name }}\"\n\n    - name: Download application release\n      get_url:\n        url: \"https://releases.example.com/{{ app_name }}/{{ app_version }}/{{ app_name }}-{{ app_version }}.tar.gz\"\n        dest: \"/tmp/{{ app_name }}-{{ app_version }}.tar.gz\"\n        mode: '0644'\n        timeout: 300\n      register: download_result\n\n    - name: Extract application\n      unarchive:\n        src: \"/tmp/{{ app_name }}-{{ app_version }}.tar.gz\"\n        dest: \"/opt/{{ app_name }}/releases/\"\n        owner: \"{{ app_name }}\"\n        group: \"{{ app_name }}\"\n        remote_src: yes\n        creates: \"/opt/{{ app_name }}/releases/{{ app_version }}\"\n\n    - name: Create symlink to current release\n      file:\n        src: \"/opt/{{ app_name }}/releases/{{ app_version }}\"\n        dest: \"/opt/{{ app_name }}/current\"\n        state: link\n        owner: \"{{ app_name }}\"\n        group: \"{{ app_name }}\"\n      notify:\n        - reload application\n        - reload nginx\n\n    # Configuration management\n    - name: Deploy application configuration\n      template:\n        src: \"templates/{{ app_name }}.conf.j2\"\n        dest: \"/opt/{{ app_name }}/shared/{{ app_name }}.conf\"\n        owner: \"{{ app_name }}\"\n        group: \"{{ app_name }}\"\n        mode: '0640'\n        backup: yes\n      notify: reload application\n\n    # Service management\n    - name: Deploy systemd service file\n      template:\n        src: \"templates/{{ app_name }}.service.j2\"\n        dest: \"/etc/systemd/system/{{ app_name }}.service\"\n        mode: '0644'\n      notify:\n        - daemon reload\n        - restart application\n\n    - name: Enable and start application service\n      systemd:\n        name: \"{{ app_name }}\"\n        enabled: yes\n        state: started\n        daemon_reload: yes\n\n    # Health check\n    - name: Wait for application to be ready\n      uri:\n        url: \"http://localhost:{{ app_port }}/health\"\n        method: GET\n        status_code: 200\n      retries: 30\n      delay: 10\n\n    # Cleanup old releases\n    - name: Clean up old releases (keep last 3)\n      shell: |\n        cd /opt/{{ app_name }}/releases\n        ls -t | tail -n +4 | xargs rm -rf\n      args:\n        executable: /bin/bash\n\n  post_tasks:\n    - name: Verify application is running\n      uri:\n        url: \"http://{{ ansible_default_ipv4.address }}:{{ app_port }}/health\"\n        method: GET\n        status_code: 200\n      delegate_to: localhost\n\n    - name: Log deployment success\n      lineinfile:\n        path: \"/var/log/{{ app_name }}/deployments.log\"\n        line: \"{{ ansible_date_time.iso8601 }} - Successfully deployed {{ app_version }} to {{ inventory_hostname }}\"\n        create: yes\n\n  handlers:\n    - name: daemon reload\n      systemd:\n        daemon_reload: yes\n\n    - name: restart application\n      systemd:\n        name: \"{{ app_name }}\"\n        state: restarted\n\n    - name: reload application\n      systemd:\n        name: \"{{ app_name }}\"\n        state: reloaded\n\n    - name: reload nginx\n      service:\n        name: nginx\n        state: reloaded\nEOF\n```\n\n### Infrastructure as Code Playbook\n```bash\ncat \u003e playbooks/infrastructure-provisioning.yml \u003c\u003cEOF\n---\n- name: Infrastructure Provisioning and Configuration\n  hosts: all\n  become: yes\n  strategy: free  # Parallel execution\n  vars:\n    base_packages:\n      Debian:\n        - curl\n        - wget\n        - vim\n        - htop\n        - git\n        - python3\n        - python3-pip\n        - unzip\n        - tree\n      RedHat:\n        - curl\n        - wget\n        - vim\n        - htop\n        - git\n        - python3\n        - python3-pip\n        - unzip\n        - tree\n        - epel-release\n\n  tasks:\n    # System preparation\n    - name: Set hostname\n      hostname:\n        name: \"{{ inventory_hostname }}\"\n\n    - name: Update /etc/hosts\n      lineinfile:\n        path: /etc/hosts\n        line: \"{{ ansible_default_ipv4.address }} {{ inventory_hostname }}\"\n        backup: yes\n\n    # Package management\n    - name: Install base packages\n      package:\n        name: \"{{ base_packages[ansible_os_family] | default(base_packages['Debian']) }}\"\n        state: present\n\n    # Time synchronization\n    - name: Install and configure NTP\n      package:\n        name: \"{{ 'ntp' if ansible_os_family == 'Debian' else 'chrony' }}\"\n        state: present\n\n    - name: Start and enable time synchronization\n      service:\n        name: \"{{ 'ntp' if ansible_os_family == 'Debian' else 'chronyd' }}\"\n        state: started\n        enabled: yes\n\n    # Log management\n    - name: Configure logrotate for application logs\n      template:\n        src: templates/app-logrotate.j2\n        dest: /etc/logrotate.d/applications\n        mode: '0644'\n\n    # Monitoring agent installation\n    - name: Install Node Exporter for Prometheus monitoring\n      get_url:\n        url: \"https://github.com/prometheus/node_exporter/releases/download/v1.6.1/node_exporter-1.6.1.linux-amd64.tar.gz\"\n        dest: /tmp/node_exporter.tar.gz\n        mode: '0644'\n\n    - name: Extract Node Exporter\n      unarchive:\n        src: /tmp/node_exporter.tar.gz\n        dest: /tmp\n        remote_src: yes\n\n    - name: Copy Node Exporter binary\n      copy:\n        src: /tmp/node_exporter-1.6.1.linux-amd64/node_exporter\n        dest: /usr/local/bin/node_exporter\n        mode: '0755'\n        owner: root\n        group: root\n        remote_src: yes\n\n    - name: Create node_exporter systemd service\n      template:\n        src: templates/node_exporter.service.j2\n        dest: /etc/systemd/system/node_exporter.service\n        mode: '0644'\n      notify:\n        - daemon reload\n        - restart node_exporter\n\n    # Security configuration\n    - name: Configure kernel parameters for security\n      sysctl:\n        name: \"{{ item.key }}\"\n        value: \"{{ item.value }}\"\n        sysctl_set: yes\n        state: present\n        reload: yes\n      loop:\n        - { key: 'kernel.dmesg_restrict', value: '1' }\n        - { key: 'kernel.kptr_restrict', value: '2' }\n        - { key: 'kernel.yama.ptrace_scope', value: '1' }\n        - { key: 'net.ipv4.conf.all.log_martians', value: '1' }\n        - { key: 'net.ipv4.conf.default.log_martians', value: '1' }\n        - { key: 'net.ipv4.conf.all.send_redirects', value: '0' }\n        - { key: 'net.ipv4.conf.default.send_redirects', value: '0' }\n\n    # File integrity monitoring\n    - name: Initialize AIDE database\n      shell: |\n        aide --init\n        mv /var/lib/aide/aide.db.new /var/lib/aide/aide.db\n      args:\n        creates: /var/lib/aide/aide.db\n\n    - name: Schedule AIDE integrity checks\n      cron:\n        name: \"AIDE integrity check\"\n        minute: \"0\"\n        hour: \"3\"\n        job: \"/usr/bin/aide --check\"\n        user: root\n\n  handlers:\n    - name: daemon reload\n      systemd:\n        daemon_reload: yes\n\n    - name: restart node_exporter\n      service:\n        name: node_exporter\n        state: restarted\n        enabled: yes\nEOF\n```\n\n## Advanced Role Development\n\n### Comprehensive NGINX Role\n```bash\n# Create NGINX role structure\nansible-galaxy init roles/nginx\n\n# Main tasks\ncat \u003e roles/nginx/tasks/main.yml \u003c\u003cEOF\n---\n# NGINX Installation and Configuration Role\n- name: Include OS-specific variables\n  include_vars: \"{{ ansible_os_family }}.yml\"\n\n- name: Install NGINX\n  include_tasks: \"install-{{ ansible_os_family }}.yml\"\n\n- name: Create NGINX directories\n  file:\n    path: \"{{ item }}\"\n    state: directory\n    owner: root\n    group: root\n    mode: '0755'\n  loop:\n    - /etc/nginx/sites-available\n    - /etc/nginx/sites-enabled\n    - /etc/nginx/conf.d\n    - /var/log/nginx\n    - /var/cache/nginx\n\n- name: Generate DH parameters\n  openssl_dhparam:\n    path: /etc/ssl/certs/dhparam.pem\n    size: 2048\n  when: nginx_ssl_enabled | default(false)\n\n- name: Deploy NGINX main configuration\n  template:\n    src: nginx.conf.j2\n    dest: /etc/nginx/nginx.conf\n    backup: yes\n    validate: 'nginx -t -c %s'\n  notify: reload nginx\n\n- name: Deploy virtual host configurations\n  template:\n    src: vhost.conf.j2\n    dest: \"/etc/nginx/sites-available/{{ item.name }}.conf\"\n    backup: yes\n  loop: \"{{ nginx_vhosts | default([]) }}\"\n  notify: reload nginx\n\n- name: Enable virtual hosts\n  file:\n    src: \"/etc/nginx/sites-available/{{ item.name }}.conf\"\n    dest: \"/etc/nginx/sites-enabled/{{ item.name }}.conf\"\n    state: link\n  loop: \"{{ nginx_vhosts | default([]) }}\"\n  when: item.enabled | default(true)\n  notify: reload nginx\n\n- name: Remove default site\n  file:\n    path: /etc/nginx/sites-enabled/default\n    state: absent\n  notify: reload nginx\n\n- name: Start and enable NGINX\n  service:\n    name: nginx\n    state: started\n    enabled: yes\n\n- name: Configure log rotation\n  template:\n    src: nginx-logrotate.j2\n    dest: /etc/logrotate.d/nginx\n    mode: '0644'\n\n- name: Setup NGINX monitoring\n  include_tasks: monitoring.yml\n  when: nginx_monitoring_enabled | default(false)\n\n- name: Configure SSL certificates\n  include_tasks: ssl.yml\n  when: nginx_ssl_enabled | default(false)\nEOF\n\n# OS-specific installation tasks\ncat \u003e roles/nginx/tasks/install-Debian.yml \u003c\u003cEOF\n---\n- name: Add NGINX signing key (Debian/Ubuntu)\n  apt_key:\n    url: https://nginx.org/keys/nginx_signing.key\n    state: present\n\n- name: Add NGINX repository (Debian/Ubuntu)\n  apt_repository:\n    repo: \"deb https://nginx.org/packages/{{ ansible_distribution | lower }}/ {{ ansible_distribution_release }} nginx\"\n    state: present\n\n- name: Install NGINX (Debian/Ubuntu)\n  apt:\n    name: nginx\n    state: present\n    update_cache: yes\nEOF\n\ncat \u003e roles/nginx/tasks/install-RedHat.yml \u003c\u003cEOF\n---\n- name: Add NGINX repository (RHEL/CentOS)\n  yum_repository:\n    name: nginx\n    description: NGINX Repository\n    baseurl: \"https://nginx.org/packages/centos/{{ ansible_distribution_major_version }}/$basearch/\"\n    gpgcheck: yes\n    gpgkey: https://nginx.org/keys/nginx_signing.key\n    enabled: yes\n\n- name: Install NGINX (RHEL/CentOS)\n  yum:\n    name: nginx\n    state: present\nEOF\n\n# Variables\ncat \u003e roles/nginx/vars/main.yml \u003c\u003cEOF\n---\nnginx_user: nginx\nnginx_worker_processes: auto\nnginx_worker_connections: 1024\nnginx_keepalive_timeout: 65\nnginx_ssl_enabled: false\nnginx_monitoring_enabled: true\n\nnginx_security_headers:\n  - \"add_header X-Frame-Options SAMEORIGIN always;\"\n  - \"add_header X-Content-Type-Options nosniff always;\"\n  - \"add_header X-XSS-Protection '1; mode=block' always;\"\n  - \"add_header Strict-Transport-Security 'max-age=31536000; includeSubDomains' always;\"\n\nnginx_default_vhost:\n  name: default\n  listen: 80\n  server_name: \"_\"\n  root: /var/www/html\n  index: index.html\n  enabled: false\nEOF\n\n# Templates\ncat \u003e roles/nginx/templates/nginx.conf.j2 \u003c\u003cEOF\nuser {{ nginx_user }};\nworker_processes {{ nginx_worker_processes }};\npid /var/run/nginx.pid;\n\nevents {\n    worker_connections {{ nginx_worker_connections }};\n    use epoll;\n    multi_accept on;\n}\n\nhttp {\n    # Basic settings\n    sendfile on;\n    tcp_nopush on;\n    tcp_nodelay on;\n    keepalive_timeout {{ nginx_keepalive_timeout }};\n    types_hash_max_size 2048;\n    server_tokens off;\n\n    include /etc/nginx/mime.types;\n    default_type application/octet-stream;\n\n    # SSL configuration\n{% if nginx_ssl_enabled %}\n    ssl_protocols TLSv1.2 TLSv1.3;\n    ssl_prefer_server_ciphers off;\n    ssl_dhparam /etc/ssl/certs/dhparam.pem;\n{% endif %}\n\n    # Gzip compression\n    gzip on;\n    gzip_vary on;\n    gzip_proxied any;\n    gzip_comp_level 6;\n    gzip_types\n        application/javascript\n        application/json\n        application/xml\n        text/css\n        text/javascript\n        text/xml\n        text/plain;\n\n    # Security headers\n{% for header in nginx_security_headers %}\n    {{ header }}\n{% endfor %}\n\n    # Logging\n    log_format main '\\$remote_addr - \\$remote_user [\\$time_local] \"\\$request\" '\n                    '\\$status \\$body_bytes_sent \"\\$http_referer\" '\n                    '\"\\$http_user_agent\" \"\\$http_x_forwarded_for\"';\n\n    access_log /var/log/nginx/access.log main;\n    error_log /var/log/nginx/error.log;\n\n    # Rate limiting\n    limit_req_zone \\$binary_remote_addr zone=login:10m rate=10r/m;\n    limit_conn_zone \\$binary_remote_addr zone=addr:10m;\n\n    # Include configurations\n    include /etc/nginx/conf.d/*.conf;\n    include /etc/nginx/sites-enabled/*;\n}\nEOF\n\n# Handlers\ncat \u003e roles/nginx/handlers/main.yml \u003c\u003cEOF\n---\n- name: restart nginx\n  service:\n    name: nginx\n    state: restarted\n\n- name: reload nginx\n  service:\n    name: nginx\n    state: reloaded\n\n- name: validate nginx config\n  command: nginx -t\n  changed_when: false\nEOF\n```\n\n## Security and Compliance\n\n### Ansible Security Scanner Integration\n```bash\n# Create security scanning playbook\ncat \u003e playbooks/security-scan.yml \u003c\u003cEOF\n---\n- name: Security Compliance Scanning\n  hosts: all\n  become: yes\n  gather_facts: yes\n  vars:\n    scan_results_dir: \"/tmp/security-scans\"\n    \n  tasks:\n    - name: Create scan results directory\n      file:\n        path: \"{{ scan_results_dir }}\"\n        state: directory\n        mode: '0755'\n\n    # CIS benchmark scanning\n    - name: Download CIS benchmark script\n      get_url:\n        url: \"https://github.com/dev-sec/cis-dil-benchmark/archive/master.zip\"\n        dest: \"/tmp/cis-benchmark.zip\"\n        mode: '0644'\n\n    - name: Run CIS benchmark scan\n      shell: |\n        cd /tmp\n        unzip -o cis-benchmark.zip\n        cd cis-dil-benchmark-master\n        bash cis_ubuntu2204.sh \u003e {{ scan_results_dir }}/cis-scan-{{ inventory_hostname }}.txt\n      args:\n        creates: \"{{ scan_results_dir }}/cis-scan-{{ inventory_hostname }}.txt\"\n\n    # Lynis security audit\n    - name: Install Lynis\n      package:\n        name: lynis\n        state: present\n\n    - name: Run Lynis security audit\n      command: lynis audit system --quiet --cronjob\n      register: lynis_result\n      changed_when: false\n\n    - name: Save Lynis results\n      copy:\n        content: \"{{ lynis_result.stdout }}\"\n        dest: \"{{ scan_results_dir }}/lynis-scan-{{ inventory_hostname }}.txt\"\n        mode: '0644'\n\n    # OpenSCAP compliance scanning\n    - name: Install OpenSCAP (RHEL/CentOS)\n      package:\n        name:\n          - openscap-scanner\n          - scap-security-guide\n        state: present\n      when: ansible_os_family == \"RedHat\"\n\n    - name: Install OpenSCAP (Debian/Ubuntu)\n      package:\n        name:\n          - libopenscap8\n          - ssg-debian\n        state: present\n      when: ansible_os_family == \"Debian\"\n\n    - name: Run OpenSCAP scan\n      shell: |\n        oscap xccdf eval --profile xccdf_org.ssgproject.content_profile_standard \\\n          --results {{ scan_results_dir }}/oscap-results-{{ inventory_hostname }}.xml \\\n          --report {{ scan_results_dir }}/oscap-report-{{ inventory_hostname }}.html \\\n          /usr/share/xml/scap/ssg/content/ssg-{{ ansible_distribution | lower }}{{ ansible_distribution_major_version }}-xccdf.xml\n      ignore_errors: yes\n      when: ansible_os_family in [\"RedHat\", \"Debian\"]\n\n    # Vulnerability scanning with Trivy\n    - name: Install Trivy vulnerability scanner\n      shell: |\n        curl -sfL https://raw.githubusercontent.com/aquasecurity/trivy/main/contrib/install.sh | sh -s -- -b /usr/local/bin\n      args:\n        creates: /usr/local/bin/trivy\n\n    - name: Run Trivy filesystem scan\n      shell: |\n        trivy fs --format json --output {{ scan_results_dir }}/trivy-scan-{{ inventory_hostname }}.json /\n      ignore_errors: yes\n\n    # Collect scan results\n    - name: Fetch scan results to control machine\n      fetch:\n        src: \"{{ item }}\"\n        dest: \"./security-reports/{{ inventory_hostname }}/\"\n        flat: yes\n      loop:\n        - \"{{ scan_results_dir }}/cis-scan-{{ inventory_hostname }}.txt\"\n        - \"{{ scan_results_dir }}/lynis-scan-{{ inventory_hostname }}.txt\"\n        - \"{{ scan_results_dir }}/oscap-report-{{ inventory_hostname }}.html\"\n        - \"{{ scan_results_dir }}/trivy-scan-{{ inventory_hostname }}.json\"\n      ignore_errors: yes\n      delegate_to: localhost\n\n  post_tasks:\n    - name: Generate compliance summary\n      template:\n        src: templates/compliance-summary.j2\n        dest: \"{{ scan_results_dir }}/compliance-summary-{{ inventory_hostname }}.txt\"\n        mode: '0644'\nEOF\n```\n\n### Ansible AWX/Tower Integration\n```bash\n# Install Ansible AWX (open source)\ncat \u003e playbooks/install-awx.yml \u003c\u003cEOF\n---\n- name: Install Ansible AWX\n  hosts: localhost\n  connection: local\n  become: yes\n  vars:\n    awx_namespace: awx\n    awx_admin_user: admin\n    awx_admin_password: \"{{ vault_awx_admin_password }}\"\n\n  tasks:\n    - name: Install prerequisite packages\n      package:\n        name:\n          - git\n          - curl\n          - docker.io\n          - docker-compose\n        state: present\n\n    - name: Clone AWX repository\n      git:\n        repo: https://github.com/ansible/awx.git\n        dest: /opt/awx\n        version: devel\n\n    - name: Create AWX Docker inventory\n      template:\n        src: templates/awx-docker-inventory.j2\n        dest: /opt/awx/installer/inventory\n        mode: '0644'\n\n    - name: Install AWX using Ansible\n      shell: ansible-playbook -i inventory install.yml\n      args:\n        chdir: /opt/awx/installer\n      environment:\n        ANSIBLE_HOST_KEY_CHECKING: False\n\n    - name: Wait for AWX to be ready\n      uri:\n        url: \"http://localhost:80/api/v2/ping/\"\n        method: GET\n      retries: 30\n      delay: 10\n\n    - name: Configure AWX organizations and projects\n      uri:\n        url: \"http://localhost:80/api/v2/organizations/\"\n        method: POST\n        user: \"{{ awx_admin_user }}\"\n        password: \"{{ awx_admin_password }}\"\n        force_basic_auth: yes\n        body_format: json\n        body:\n          name: \"Production\"\n          description: \"Production environment organization\"\n        status_code: [200, 201, 409]\nEOF\n```\n\n## Multi-Cloud Automation\n\n### AWS Infrastructure Automation\n```bash\ncat \u003e playbooks/aws-infrastructure.yml \u003c\u003cEOF\n---\n- name: AWS Infrastructure Automation\n  hosts: localhost\n  connection: local\n  gather_facts: no\n  vars:\n    aws_region: \"{{ aws_region | default('us-west-2') }}\"\n    vpc_cidr: \"{{ vpc_cidr | default('10.0.0.0/16') }}\"\n    environment: \"{{ environment | default('production') }}\"\n\n  tasks:\n    # VPC Creation\n    - name: Create VPC\n      amazon.aws.ec2_vpc_info:\n        filters:\n          \"tag:Name\": \"{{ environment }}-vpc\"\n        region: \"{{ aws_region }}\"\n      register: existing_vpc\n\n    - name: Create new VPC if not exists\n      amazon.aws.ec2_vpc_net:\n        name: \"{{ environment }}-vpc\"\n        cidr_block: \"{{ vpc_cidr }}\"\n        region: \"{{ aws_region }}\"\n        state: present\n        dns_hostnames: yes\n        dns_support: yes\n        tags:\n          Environment: \"{{ environment }}\"\n          ManagedBy: ansible\n      register: vpc\n      when: existing_vpc.vpcs | length == 0\n\n    # Security Groups\n    - name: Create web security group\n      amazon.aws.ec2_group:\n        name: \"{{ environment }}-web-sg\"\n        description: \"Security group for web servers\"\n        vpc_id: \"{{ vpc.vpc.id if vpc.vpc is defined else existing_vpc.vpcs[0].vpc_id }}\"\n        region: \"{{ aws_region }}\"\n        rules:\n          - proto: tcp\n            ports:\n              - 80\n              - 443\n            cidr_ip: 0.0.0.0/0\n            rule_desc: \"HTTP and HTTPS access\"\n          - proto: tcp\n            ports:\n              - 22\n            group_id: \"{{ environment }}-bastion-sg\"\n            rule_desc: \"SSH from bastion\"\n        tags:\n          Environment: \"{{ environment }}\"\n\n    # Launch EC2 instances\n    - name: Launch web servers\n      amazon.aws.ec2_instance:\n        name: \"{{ environment }}-web-{{ item }}\"\n        instance_type: t3.medium\n        image_id: ami-0c02fb55956c7d316  # Amazon Linux 2\n        key_name: \"{{ ec2_key_name }}\"\n        vpc_subnet_id: \"{{ web_subnet_id }}\"\n        security_groups:\n          - \"{{ environment }}-web-sg\"\n        region: \"{{ aws_region }}\"\n        state: running\n        wait: yes\n        wait_timeout: 300\n        user_data: |\n          #!/bin/bash\n          yum update -y\n          yum install -y python3\n        tags:\n          Environment: \"{{ environment }}\"\n          Role: webserver\n          Ansible: managed\n      loop: \"{{ range(1, web_server_count + 1) | list }}\"\n      register: web_instances\n\n    # Add instances to inventory\n    - name: Add web servers to inventory\n      add_host:\n        name: \"{{ item.instances[0].tags.Name }}\"\n        hostname: \"{{ item.instances[0].public_ip_address }}\"\n        groups: webservers\n        ansible_ssh_private_key_file: \"~/.ssh/{{ ec2_key_name }}.pem\"\n        ansible_user: ec2-user\n      loop: \"{{ web_instances.results }}\"\n      changed_when: false\nEOF\n```\n\n### Kubernetes Cluster Management\n```bash\ncat \u003e playbooks/k8s-cluster-management.yml \u003c\u003cEOF\n---\n- name: Kubernetes Cluster Management with Ansible\n  hosts: k8s_masters\n  become: yes\n  serial: 1\n  vars:\n    k8s_version: \"1.28.2\"\n    containerd_version: \"1.6.24\"\n    cni_version: \"1.3.0\"\n\n  tasks:\n    # Pre-flight checks\n    - name: Check system requirements\n      assert:\n        that:\n          - ansible_memtotal_mb \u003e= 1700\n          - ansible_processor_cores \u003e= 2\n        fail_msg: \"System doesn't meet minimum requirements\"\n\n    - name: Verify connectivity to all nodes\n      ping:\n      delegate_to: \"{{ item }}\"\n      loop: \"{{ groups['k8s_all'] }}\"\n\n    # Container runtime setup\n    - name: Install containerd\n      include_role:\n        name: containerd\n      vars:\n        containerd_version: \"{{ containerd_version }}\"\n\n    # Kubernetes installation\n    - name: Install Kubernetes components\n      include_role:\n        name: kubernetes\n      vars:\n        kubernetes_version: \"{{ k8s_version }}\"\n\n    # Cluster initialization\n    - name: Initialize Kubernetes cluster\n      shell: |\n        kubeadm init \\\n          --pod-network-cidr=10.244.0.0/16 \\\n          --service-cidr=10.96.0.0/12 \\\n          --apiserver-advertise-address={{ ansible_default_ipv4.address }} \\\n          --node-name={{ inventory_hostname }}\n      args:\n        creates: /etc/kubernetes/admin.conf\n      register: kubeadm_init\n\n    - name: Create .kube directory\n      file:\n        path: \"{{ ansible_env.HOME }}/.kube\"\n        state: directory\n        mode: '0755'\n\n    - name: Copy admin.conf to user's kube config\n      copy:\n        src: /etc/kubernetes/admin.conf\n        dest: \"{{ ansible_env.HOME }}/.kube/config\"\n        owner: \"{{ ansible_user }}\"\n        group: \"{{ ansible_user }}\"\n        mode: '0644'\n        remote_src: yes\n\n    # Network plugin installation\n    - name: Install Flannel CNI\n      shell: kubectl apply -f https://github.com/flannel-io/flannel/releases/latest/download/kube-flannel.yml\n      environment:\n        KUBECONFIG: \"{{ ansible_env.HOME }}/.kube/config\"\n\n    # Join worker nodes\n    - name: Get join command\n      shell: kubeadm token create --print-join-command\n      register: join_command\n      when: inventory_hostname in groups['k8s_masters'][0]\n\n    - name: Join worker nodes to cluster\n      shell: \"{{ hostvars[groups['k8s_masters'][0]]['join_command'].stdout }}\"\n      when: inventory_hostname in groups['k8s_workers']\n\n  post_tasks:\n    - name: Verify cluster status\n      shell: kubectl get nodes\n      environment:\n        KUBECONFIG: \"{{ ansible_env.HOME }}/.kube/config\"\n      register: cluster_status\n      when: inventory_hostname in groups['k8s_masters'][0]\n\n    - name: Display cluster status\n      debug:\n        var: cluster_status.stdout_lines\n      when: inventory_hostname in groups['k8s_masters'][0]\nEOF\n```\n\n## Performance Optimization and Scaling\n\n### Parallel Execution Strategies\n```bash\n# Create high-performance playbook configuration\ncat \u003e playbooks/high-performance-deployment.yml \u003c\u003cEOF\n---\n- name: High-Performance Deployment\n  hosts: all\n  become: yes\n  strategy: free  # Parallel execution\n  serial: \"30%\"   # Process 30% of hosts at a time\n  max_fail_percentage: 10\n  gather_facts: yes\n  fact_caching: smart\n  vars:\n    deployment_batch_size: 10\n    max_concurrent_tasks: 50\n\n  pre_tasks:\n    - name: Check system load\n      shell: uptime | awk '{print $(NF-2)}' | sed 's/,//'\n      register: system_load\n      changed_when: false\n\n    - name: Skip high-load systems\n      meta: end_host\n      when: system_load.stdout | float \u003e 5.0\n\n  tasks:\n    - name: Update packages with retries\n      package:\n        name: \"*\"\n        state: latest\n      retries: 3\n      delay: 30\n      async: 300\n      poll: 10\n\n    - name: Deploy configuration files in parallel\n      template:\n        src: \"{{ item.src }}\"\n        dest: \"{{ item.dest }}\"\n        mode: \"{{ item.mode | default('0644') }}\"\n        backup: yes\n      loop:\n        - { src: \"nginx.conf.j2\", dest: \"/etc/nginx/nginx.conf\" }\n        - { src: \"mysql.cnf.j2\", dest: \"/etc/mysql/my.cnf\" }\n        - { src: \"redis.conf.j2\", dest: \"/etc/redis/redis.conf\" }\n      async: 120\n      poll: 5\n      register: config_deployment\n\n    - name: Wait for all configuration deployments\n      async_status:\n        jid: \"{{ item.ansible_job_id }}\"\n      loop: \"{{ config_deployment.results }}\"\n      when: item.ansible_job_id is defined\n\n  handlers:\n    - name: restart services\n      service:\n        name: \"{{ item }}\"\n        state: restarted\n      loop:\n        - nginx\n        - mysql\n        - redis\n      listen: \"restart all services\"\nEOF\n\n# Performance monitoring playbook\ncat \u003e playbooks/performance-monitoring.yml \u003c\u003cEOF\n---\n- name: Performance Monitoring Setup\n  hosts: all\n  become: yes\n  vars:\n    monitoring_tools:\n      - htop\n      - iotop\n      - nethogs\n      - dstat\n      - sysstat\n      - perf\n\n  tasks:\n    - name: Install performance monitoring tools\n      package:\n        name: \"{{ monitoring_tools }}\"\n        state: present\n\n    - name: Configure system monitoring\n      template:\n        src: templates/sysstat.j2\n        dest: /etc/default/sysstat\n        backup: yes\n      when: ansible_os_family == \"Debian\"\n\n    - name: Enable system statistics collection\n      service:\n        name: \"{{ 'sysstat' if ansible_os_family == 'Debian' else 'sysstat' }}\"\n        enabled: yes\n        state: started\n\n    - name: Create performance monitoring script\n      template:\n        src: templates/performance-monitor.sh.j2\n        dest: /usr/local/bin/performance-monitor.sh\n        mode: '0755'\n\n    - name: Schedule performance monitoring\n      cron:\n        name: \"Performance monitoring\"\n        minute: \"*/5\"\n        job: \"/usr/local/bin/performance-monitor.sh\"\n        user: root\nEOF\n```\n\n## Testing and Validation\n\n### Molecule Testing Framework\n```bash\n# Install Molecule for role testing\npip install molecule[docker] molecule[vagrant] molecule[libvirt]\n\n# Initialize Molecule in role directory\ncd roles/nginx\nmolecule init scenario --driver-name docker\n\n# Create molecule configuration\ncat \u003e molecule/default/molecule.yml \u003c\u003cEOF\n---\ndependency:\n  name: galaxy\ndriver:\n  name: docker\nplatforms:\n  - name: nginx-ubuntu\n    image: ubuntu:22.04\n    pre_build_image: true\n    privileged: true\n    volumes:\n      - /sys/fs/cgroup:/sys/fs/cgroup:ro\n    command: /lib/systemd/systemd\n    networks:\n      - name: molecule\n  - name: nginx-centos\n    image: centos:8\n    pre_build_image: true\n    privileged: true\n    volumes:\n      - /sys/fs/cgroup:/sys/fs/cgroup:ro\n    command: /usr/sbin/init\n    networks:\n      - name: molecule\nprovisioner:\n  name: ansible\n  config_options:\n    defaults:\n      callbacks_enabled: profile_tasks,timer,yaml\n  inventory:\n    host_vars:\n      nginx-ubuntu:\n        ansible_python_interpreter: /usr/bin/python3\n      nginx-centos:\n        ansible_python_interpreter: /usr/bin/python3\nverifier:\n  name: ansible\nlint: |\n  set -e\n  yamllint .\n  ansible-lint\n  flake8\nEOF\n\n# Create test playbook\ncat \u003e molecule/default/converge.yml \u003c\u003cEOF\n---\n- name: Converge\n  hosts: all\n  become: true\n  tasks:\n    - name: \"Include nginx role\"\n      include_role:\n        name: nginx\n      vars:\n        nginx_vhosts:\n          - name: default\n            server_name: localhost\n            listen: 80\n            root: /var/www/html\n            enabled: true\nEOF\n\n# Create test verification\ncat \u003e molecule/default/verify.yml \u003c\u003cEOF\n---\n- name: Verify\n  hosts: all\n  gather_facts: false\n  tasks:\n    - name: Check if NGINX is running\n      uri:\n        url: http://localhost\n        method: GET\n      register: nginx_check\n\n    - name: Verify NGINX is responding\n      assert:\n        that:\n          - nginx_check.status == 200\n        fail_msg: \"NGINX is not responding correctly\"\n\n    - name: Check NGINX configuration\n      shell: nginx -t\n      changed_when: false\n\n    - name: Verify NGINX process\n      shell: pgrep nginx\n      changed_when: false\nEOF\n\n# Run tests\nmolecule test\n```\n\n### Ansible Lint and Security Scanning\n```bash\n# Install Ansible Lint\npip install ansible-lint\n\n# Create .ansible-lint configuration\ncat \u003e .ansible-lint \u003c\u003cEOF\n---\nprofile: production\n\nexclude_paths:\n  - .cache/\n  - .github/\n  - molecule/\n  - .venv/\n\nskip_list:\n  - yaml[line-length]  # Allow longer lines for readability\n\nwarn_list:\n  - experimental  # Warn about experimental features\n\n# Custom rules\nrules:\n  braces:\n    min-spaces-inside: 0\n    max-spaces-inside: 1\n  brackets:\n    min-spaces-inside: 0\n    max-spaces-inside: 0\n  colons:\n    max-spaces-before: 0\n    min-spaces-after: 1\n    max-spaces-after: 1\n  commas:\n    max-spaces-before: 0\n    min-spaces-after: 1\n    max-spaces-after: 1\n  comments:\n    min-spaces-from-content: 1\n  document-start: disable\n  empty-lines:\n    max: 2\n    max-start: 0\n    max-end: 1\n  hyphens:\n    max-spaces-after: 1\n  indentation:\n    spaces: 2\n    indent-sequences: true\n  line-length:\n    max: 120\n  new-line-at-end-of-file: enable\n  trailing-spaces: enable\n  truthy:\n    allowed-values: ['true', 'false', 'yes', 'no']\nEOF\n\n# Create security-focused playbook linting\ncat \u003e .yamllint \u003c\u003cEOF\n---\nextends: default\n\nrules:\n  braces:\n    min-spaces-inside: 0\n    max-spaces-inside: 1\n  brackets:\n    min-spaces-inside: 0\n    max-spaces-inside: 0\n  colons:\n    max-spaces-before: 0\n    min-spaces-after: 1\n    max-spaces-after: 1\n  commas:\n    max-spaces-before: 0\n    min-spaces-after: 1\n    max-spaces-after: 1\n  comments: disable\n  comments-indentation: disable\n  document-start: disable\n  empty-lines:\n    max: 2\n    max-start: 0\n    max-end: 1\n  hyphens:\n    max-spaces-after: 1\n  indentation:\n    spaces: 2\n    indent-sequences: true\n    check-multi-line-strings: false\n  key-duplicates: enable\n  line-length:\n    max: 120\n  new-line-at-end-of-file: enable\n  octal-values:\n    forbid-implicit-octal: true\n  trailing-spaces: enable\n  truthy: disable\nEOF\n\n# Run linting\nansible-lint playbooks/\nyamllint .\n```\n\n## Backup and Disaster Recovery\n\n### Comprehensive Backup Automation\n```bash\ncat \u003e playbooks/backup-automation.yml \u003c\u003cEOF\n---\n- name: Automated Backup System\n  hosts: all\n  become: yes\n  vars:\n    backup_root: /backup\n    backup_retention_days: 30\n    backup_schedule:\n      databases: \"0 2 * * *\"\n      files: \"0 3 * * *\"\n      configs: \"0 4 * * *\"\n\n  tasks:\n    - name: Create backup directories\n      file:\n        path: \"{{ backup_root }}/{{ item }}\"\n        state: directory\n        mode: '0755'\n        owner: root\n        group: root\n      loop:\n        - databases\n        - files\n        - configs\n        - logs\n\n    # Database backups\n    - name: Create database backup script\n      template:\n        src: templates/mysql-backup.sh.j2\n        dest: /usr/local/bin/mysql-backup.sh\n        mode: '0755'\n      when: \"'dbservers' in group_names\"\n\n    - name: Schedule database backups\n      cron:\n        name: \"MySQL backup\"\n        minute: \"0\"\n        hour: \"2\"\n        job: \"/usr/local/bin/mysql-backup.sh\"\n        user: root\n      when: \"'dbservers' in group_names\"\n\n    # File system backups\n    - name: Create file backup script\n      template:\n        src: templates/file-backup.sh.j2\n        dest: /usr/local/bin/file-backup.sh\n        mode: '0755'\n\n    - name: Schedule file backups\n      cron:\n        name: \"File system backup\"\n        minute: \"0\"\n        hour: \"3\"\n        job: \"/usr/local/bin/file-backup.sh\"\n        user: root\n\n    # Configuration backups\n    - name: Backup system configurations\n      archive:\n        path:\n          - /etc/nginx\n          - /etc/mysql\n          - /etc/systemd/system\n          - /etc/crontab\n          - /etc/hosts\n          - /etc/fstab\n        dest: \"{{ backup_root }}/configs/system-config-{{ ansible_date_time.epoch }}.tar.gz\"\n        mode: '0600'\n\n    # Remote backup synchronization\n    - name: Synchronize backups to remote storage\n      synchronize:\n        src: \"{{ backup_root }}/\"\n        dest: \"backup-server.example.com:{{ backup_root }}/{{ inventory_hostname }}/\"\n        delete: yes\n        rsync_opts:\n          - \"--exclude=*.tmp\"\n          - \"--compress\"\n          - \"--archive\"\n      when: backup_remote_sync | default(true)\n\n    # Cleanup old backups\n    - name: Clean up old backup files\n      find:\n        paths: \"{{ backup_root }}\"\n        age: \"{{ backup_retention_days }}d\"\n        file_type: file\n      register: old_backups\n\n    - name: Remove old backup files\n      file:\n        path: \"{{ item.path }}\"\n        state: absent\n      loop: \"{{ old_backups.files }}\"\nEOF\n```\n\n## Verification and Monitoring\n\n### Cross-Platform System Verification\n```bash\n# Create comprehensive verification playbook\ncat \u003e playbooks/system-verification.yml \u003c\u003cEOF\n---\n- name: System Verification and Health Check\n  hosts: all\n  become: yes\n  gather_facts: yes\n  vars:\n    health_checks:\n      - service: nginx\n        port: 80\n        process: nginx\n      - service: mysql\n        port: 3306\n        process: mysqld\n      - service: redis\n        port: 6379\n        process: redis-server\n\n  tasks:\n    # System information gathering\n    - name: Gather system information\n      setup:\n        gather_subset:\n          - all\n          - !facter\n          - !ohai\n\n    # Service verification\n    - name: Check critical services status\n      service_facts:\n\n    - name: Verify services are running\n      assert:\n        that:\n          - \"ansible_facts.services[item.service + '.service'].state == 'running'\"\n        fail_msg: \"Service {{ item.service }} is not running\"\n        success_msg: \"Service {{ item.service }} is healthy\"\n      loop: \"{{ health_checks }}\"\n      when: \"item.service + '.service' in ansible_facts.services\"\n\n    # Network connectivity tests\n    - name: Test network connectivity\n      wait_for:\n        host: \"{{ item.host }}\"\n        port: \"{{ item.port }}\"\n        timeout: 5\n      loop:\n        - { host: \"8.8.8.8\", port: 53 }\n        - { host: \"1.1.1.1\", port: 53 }\n      ignore_errors: yes\n\n    # Disk space monitoring\n    - name: Check disk space usage\n      shell: df -h | awk '$5 \u003e \"85%\" {print $0}'\n      register: disk_usage\n      changed_when: false\n      failed_when: disk_usage.stdout != \"\"\n\n    # Memory usage check\n    - name: Check memory usage\n      shell: free | grep Mem | awk '{printf \"%.0f\", $3/$2 * 100.0}'\n      register: memory_usage\n      changed_when: false\n\n    - name: Alert on high memory usage\n      debug:\n        msg: \"WARNING: Memory usage is {{ memory_usage.stdout }}%\"\n      when: memory_usage.stdout | int \u003e 85\n\n    # Security verification\n    - name: Check for failed login attempts\n      shell: grep \"Failed password\" /var/log/auth.log | tail -10\n      register: failed_logins\n      changed_when: false\n      ignore_errors: yes\n      when: ansible_os_family == \"Debian\"\n\n    - name: Check firewall status\n      shell: |\n        if command -v ufw \u003e/dev/null 2\u003e\u00261; then\n          ufw status\n        elif command -v firewall-cmd \u003e/dev/null 2\u003e\u00261; then\n          firewall-cmd --state\n        else\n          echo \"No supported firewall found\"\n        fi\n      register: firewall_status\n      changed_when: false\n\n  post_tasks:\n    - name: Generate system health report\n      template:\n        src: templates/health-report.j2\n        dest: \"/tmp/health-report-{{ inventory_hostname }}-{{ ansible_date_time.epoch }}.txt\"\n        mode: '0644'\n\n    - name: Fetch health reports\n      fetch:\n        src: \"/tmp/health-report-{{ inventory_hostname }}-{{ ansible_date_time.epoch }}.txt\"\n        dest: \"./reports/\"\n        flat: yes\nEOF\n```\n\n### Continuous Compliance Monitoring\n```bash\ncat \u003e playbooks/compliance-monitoring.yml \u003c\u003cEOF\n---\n- name: Continuous Compliance Monitoring\n  hosts: all\n  become: yes\n  vars:\n    compliance_standards:\n      - cis\n      - pci_dss\n      - soc2\n      - hipaa\n    \n    audit_log_paths:\n      - /var/log/auth.log\n      - /var/log/syslog\n      - /var/log/audit/audit.log\n\n  tasks:\n    # Install audit tools\n    - name: Install audit daemon\n      package:\n        name: \"{{ 'auditd' if ansible_os_family == 'RedHat' else 'auditd' }}\"\n        state: present\n\n    - name: Configure audit rules\n      template:\n        src: templates/audit.rules.j2\n        dest: /etc/audit/rules.d/audit.rules\n        backup: yes\n      notify: restart auditd\n\n    # CIS compliance checks\n    - name: Run CIS benchmark checks\n      shell: |\n        if [ -f /opt/cis-cat/CIS-CAT.sh ]; then\n          /opt/cis-cat/CIS-CAT.sh -b /opt/cis-cat/benchmarks/\n        else\n          echo \"CIS-CAT not installed, skipping\"\n        fi\n      register: cis_results\n      ignore_errors: yes\n\n    # File integrity monitoring\n    - name: Install AIDE\n      package:\n        name: aide\n        state: present\n\n    - name: Initialize AIDE database\n      shell: |\n        aide --init\n        mv /var/lib/aide/aide.db.new /var/lib/aide/aide.db\n      args:\n        creates: /var/lib/aide/aide.db\n\n    - name: Schedule AIDE integrity checks\n      cron:\n        name: \"AIDE integrity check\"\n        minute: \"0\"\n        hour: \"3\"\n        job: \"/usr/bin/aide --check | mail -s 'AIDE Report' security@example.com\"\n        user: root\n\n    # Log monitoring\n    - name: Install log monitoring tools\n      package:\n        name:\n          - logwatch\n          - rsyslog\n        state: present\n\n    - name: Configure centralized logging\n      template:\n        src: templates/rsyslog.conf.j2\n        dest: /etc/rsyslog.conf\n        backup: yes\n      notify: restart rsyslog\n\n  handlers:\n    - name: restart auditd\n      service:\n        name: auditd\n        state: restarted\n\n    - name: restart rsyslog\n      service:\n        name: rsyslog\n        state: restarted\nEOF\n```\n\n## CI/CD Integration\n\n### Jenkins Pipeline Integration\n```bash\n# Create Jenkinsfile for Ansible automation\ncat \u003e Jenkinsfile \u003c\u003cEOF\npipeline {\n    agent any\n    \n    environment {\n        ANSIBLE_CONFIG = 'ansible.cfg'\n        ANSIBLE_HOST_KEY_CHECKING = 'False'\n    }\n    \n    stages {\n        stage('Lint') {\n            steps {\n                sh 'ansible-lint playbooks/'\n                sh 'yamllint .'\n            }\n        }\n        \n        stage('Syntax Check') {\n            steps {\n                sh 'ansible-playbook playbooks/site.yml --syntax-check'\n            }\n        }\n        \n        stage('Dry Run') {\n            steps {\n                sh 'ansible-playbook playbooks/site.yml --check --diff'\n            }\n        }\n        \n        stage('Deploy to Staging') {\n            when {\n                branch 'develop'\n            }\n            steps {\n                sh 'ansible-playbook -i inventories/staging playbooks/site.yml'\n            }\n        }\n        \n        stage('Deploy to Production') {\n            when {\n                branch 'main'\n            }\n            steps {\n                input 'Deploy to Production?'\n                sh 'ansible-playbook -i inventories/production playbooks/site.yml'\n            }\n        }\n        \n        stage('Verify Deployment') {\n            steps {\n                sh 'ansible-playbook playbooks/system-verification.yml'\n            }\n        }\n    }\n    \n    post {\n        always {\n            archiveArtifacts artifacts: 'logs/*.log', allowEmptyArchive: true\n            publishHTML([\n                allowMissing: false,\n                alwaysLinkToLastBuild: true,\n                keepAll: true,\n                reportDir: 'reports',\n                reportFiles: '*.html',\n                reportName: 'Ansible Report'\n            ])\n        }\n        failure {\n            emailext (\n                subject: \"Failed Pipeline: ${env.JOB_NAME} - ${env.BUILD_NUMBER}\",\n                body: \"Something is wrong with ${env.BUILD_URL}\",\n                to: \"${env.DEFAULT_RECIPIENTS}\"\n            )\n        }\n    }\n}\nEOF\n```\n\n### GitLab CI Integration\n```bash\ncat \u003e .gitlab-ci.yml \u003c\u003cEOF\nstages:\n  - lint\n  - test\n  - deploy-staging\n  - deploy-production\n\nvariables:\n  ANSIBLE_CONFIG: ansible.cfg\n  ANSIBLE_HOST_KEY_CHECKING: \"False\"\n\nbefore_script:\n  - pip install ansible ansible-lint yamllint\n  - ansible-galaxy install -r requirements.yml\n\nlint:\n  stage: lint\n  script:\n    - ansible-lint playbooks/\n    - yamllint .\n  rules:\n    - if: '$CI_MERGE_REQUEST_IID'\n    - if: '$CI_COMMIT_BRANCH == $CI_DEFAULT_BRANCH'\n\nsyntax-check:\n  stage: test\n  script:\n    - ansible-playbook playbooks/site.yml --syntax-check\n    - ansible-playbook playbooks/site.yml --check --diff -i inventories/staging\n  rules:\n    - if: '$CI_MERGE_REQUEST_IID'\n    - if: '$CI_COMMIT_BRANCH == $CI_DEFAULT_BRANCH'\n\ndeploy-staging:\n  stage: deploy-staging\n  script:\n    - ansible-playbook -i inventories/staging playbooks/site.yml\n  rules:\n    - if: '$CI_COMMIT_BRANCH == \"develop\"'\n\ndeploy-production:\n  stage: deploy-production\n  script:\n    - ansible-playbook -i inventories/production playbooks/site.yml\n  rules:\n    - if: '$CI_COMMIT_BRANCH == $CI_DEFAULT_BRANCH'\n      when: manual\n  environment:\n    name: production\n    url: https://production.example.com\nEOF\n```\n\n## Troubleshooting (Cross-Platform)\n\n### Common Issues and Solutions\n```bash\n# Debug connection issues\nansible all -m ping -vvv\n\n# Check SSH connectivity\nansible all -m setup --ask-pass --ask-become-pass\n\n# Verify inventory\nansible-inventory --list\nansible-inventory --graph\n\n# Test specific host\nansible target-host -m command -a \"uptime\"\n\n# Check syntax without execution\nansible-playbook playbooks/site.yml --syntax-check\n\n# Dry run with verbose output\nansible-playbook playbooks/site.yml --check --diff -vvv\n\n# Debug variable resolution\nansible-playbook playbooks/site.yml --extra-vars=\"debug=true\" --tags debug\n\n# Check facts\nansible all -m setup | grep ansible_os_family\n\n# Connection troubleshooting\nssh -vvv user@target-host\n\n# Permission issues\nansible all -m file -a \"path=/tmp/test state=touch\" --become\n\n# Vault issues\nansible-vault view group_vars/all/vault.yml\n\n# Performance debugging\nansible-playbook playbooks/site.yml --start-at-task=\"specific task name\"\nansible-playbook playbooks/site.yml --step\n\n# Module testing\nansible localhost -m debug -a \"var=hostvars\"\nansible localhost -m setup\n\n# Check for syntax errors in roles\nfind roles/ -name \"*.yml\" -exec ansible-playbook {} --syntax-check \\;\n```\n\n### Advanced Debugging\n```bash\n# Enable comprehensive logging\nexport ANSIBLE_DEBUG=1\nexport ANSIBLE_VERBOSITY=4\nansible-playbook playbooks/site.yml\n\n# Profile playbook execution\nansible-playbook playbooks/site.yml --extra-vars=\"profile_tasks_sort_order=none\"\n\n# Memory usage analysis\nansible-playbook playbooks/site.yml --extra-vars=\"ansible_python_interpreter=/usr/bin/python3\"\n\n# Network debugging\nansible all -m command -a \"ss -tulpn\"\nansible all -m command -a \"netstat -rn\"\n\n# Process debugging\nansible all -m command -a \"ps aux --sort=-%mem | head -10\"\n\n# Disk usage analysis\nansible all -m command -a \"df -h\"\nansible all -m command -a \"du -sh /var/log/*\"\n\n# Service debugging\nansible all -m systemd -a \"name=nginx\" --become\nansible all -m command -a \"systemctl status nginx\" --become\n\n# Variable debugging\nansible-playbook playbooks/site.yml --extra-vars=\"debug_vars=true\" --tags debug_vars\n```\n\n## Additional Resources\n\n- [Official Documentation](https://docs.ansible.com/)\n- [Ansible Galaxy](https://galaxy.ansible.com/)\n- [Best Practices Guide](https://docs.ansible.com/ansible/latest/user_guide/playbooks_best_practices.html)\n- [Security Best Practices](https://docs.ansible.com/ansible/latest/user_guide/become.html#security-best-practices)\n- [Ansible Molecule Testing](https://molecule.readthedocs.io/)\n- [Community Collections](https://docs.ansible.com/ansible/latest/collections/index.html)\n\n---\n\n**Note:** This guide is part of the [HowToMgr](https://howtomgr.github.io) collection.","readmeHtml":"\u003ch1 id=\"ansible-installation-guide\" class=\"mobile-header\"\u003eAnsible Installation Guide\u003c/h1\u003e\n\u003cp class=\"mobile-paragraph\"\u003eAgentless automation platform for configuration management, application deployment, and task automation across multiple systems. Industry standard for infrastructure automation with enterprise-grade security.\u003c/p\u003e\n\u003ch2 id=\"prerequisites\" class=\"mobile-header\"\u003ePrerequisites\u003c/h2\u003e\n\u003cli class=\"mobile-list-item\"\u003eLinux control machine (any modern distribution)\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003ePython 3.8+ on control machine\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eSSH access to target hosts\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003ePython 2.7+ or 3.5+ on target hosts\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003e2GB RAM minimum, 4GB+ recommended for large infrastructures\u003c/li\u003e\n\u003ch2 id=\"installation\" class=\"mobile-header\"\u003eInstallation\u003c/h2\u003e\n\u003ch3 id=\"using-package-manager-recommended\" class=\"mobile-header\"\u003eUsing Package Manager (Recommended)\u003c/h3\u003e\n\u003cp class=\"mobile-paragraph\"\u003e#### Ubuntu/Debian\u003c/p\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Update package list\nsudo apt update\n\n# Install Ansible and dependencies\nsudo apt install -y ansible python3-pip python3-venv sshpass\n\n# Install additional collections\nansible-galaxy collection install community.general\nansible-galaxy collection install ansible.posix\nansible-galaxy collection install kubernetes.core\nansible-galaxy collection install amazon.aws\nansible-galaxy collection install azure.azcollection\nansible-galaxy collection install google.cloud\n\n# Verify installation\nansible --version\nansible-galaxy collection list\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003cp class=\"mobile-paragraph\"\u003e#### RHEL/CentOS/Rocky Linux/AlmaLinux\u003c/p\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Install EPEL repository\nsudo yum install -y epel-release\n\n# Install Ansible\nsudo yum install -y ansible python3-pip\n\n# For newer distributions\nsudo dnf install -y ansible python3-pip\n\n# Install collections\nansible-galaxy collection install community.general\nansible-galaxy collection install ansible.posix\nansible-galaxy collection install kubernetes.core\n\n# Verify installation\nansible --version\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003cp class=\"mobile-paragraph\"\u003e#### Fedora\u003c/p\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Install Ansible\nsudo dnf install -y ansible python3-pip python3-virtualenv\n\n# Install additional collections\nansible-galaxy collection install community.general\nansible-galaxy collection install ansible.posix\nansible-galaxy collection install kubernetes.core\n\n# Verify installation\nansible --version\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003cp class=\"mobile-paragraph\"\u003e#### Arch Linux\u003c/p\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Install Ansible\nsudo pacman -Syu ansible python-pip\n\n# Install collections\nansible-galaxy collection install community.general\nansible-galaxy collection install ansible.posix\n\n# Verify installation\nansible --version\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003cp class=\"mobile-paragraph\"\u003e#### Alpine Linux\u003c/p\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Install Ansible\nsudo apk update\nsudo apk add ansible python3 py3-pip openssh\n\n# Install collections\nansible-galaxy collection install community.general\n\n# Verify installation\nansible --version\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"using-pip-latest-version\" class=\"mobile-header\"\u003eUsing pip (Latest Version)\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Create virtual environment (recommended)\npython3 -m venv ~/ansible-venv\nsource ~/ansible-venv/bin/activate\n\n# Install Ansible via pip\npip install --upgrade pip\npip install ansible ansible-core\n\n# Install additional packages\npip install paramiko jinja2 PyYAML cryptography\n\n# Install cloud provider SDKs\npip install boto3 botocore azure-cli google-cloud-storage\n\n# Install collections\nansible-galaxy collection install community.general\nansible-galaxy collection install ansible.posix\nansible-galaxy collection install kubernetes.core\nansible-galaxy collection install amazon.aws\nansible-galaxy collection install azure.azcollection\nansible-galaxy collection install google.cloud\n\n# Add to PATH permanently\necho \u0026#039;source ~/ansible-venv/bin/activate\u0026#039; \u0026gt;\u0026gt; ~/.bashrc\n\n# Verify installation\nansible --version\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"using-docker\" class=\"mobile-header\"\u003eUsing Docker\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Create Ansible Docker container with mounted volumes\ndocker run --rm -it \\\n  -v $(pwd):/ansible \\\n  -v ~/.ssh:/root/.ssh:ro \\\n  -v ~/.aws:/root/.aws:ro \\\n  -v ~/.azure:/root/.azure:ro \\\n  --workdir /ansible \\\n  ansible/ansible:latest\n\n# Create wrapper script for ease of use\nsudo tee /usr/local/bin/ansible-docker \u0026gt; /dev/null \u0026lt;\u0026lt;\u0026#039;EOF\u0026#039;\n#!/bin/bash\ndocker run --rm -it \\\n  -v $(pwd):/ansible \\\n  -v ~/.ssh:/root/.ssh:ro \\\n  -v ~/.aws:/root/.aws:ro \\\n  -v ~/.azure:/root/.azure:ro \\\n  -v ~/.kube:/root/.kube:ro \\\n  --workdir /ansible \\\n  --network host \\\n  ansible/ansible:latest \u0026quot;$@\u0026quot;\nEOF\nsudo chmod +x /usr/local/bin/ansible-docker\n\n# Create aliases\necho \u0026#039;alias ansible=\u0026quot;ansible-docker ansible\u0026quot;\u0026#039; \u0026gt;\u0026gt; ~/.bashrc\necho \u0026#039;alias ansible-playbook=\u0026quot;ansible-docker ansible-playbook\u0026quot;\u0026#039; \u0026gt;\u0026gt; ~/.bashrc\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"project-structure-and-configuration\" class=\"mobile-header\"\u003eProject Structure and Configuration\u003c/h2\u003e\n\u003ch3 id=\"professional-project-structure\" class=\"mobile-header\"\u003eProfessional Project Structure\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Create comprehensive Ansible project structure\nmkdir -p ~/ansible-infrastructure/{\n  inventories/{production,staging,development},\n  playbooks,\n  roles,\n  group_vars,\n  host_vars,\n  library,\n  filter_plugins,\n  callback_plugins,\n  vault,\n  collections,\n  logs\n}\n\ncd ~/ansible-infrastructure\n\n# Create ansible.cfg with security best practices\ncat \u0026gt; ansible.cfg \u0026lt;\u0026lt;EOF\n[defaults]\ninventory = inventories/production/hosts.yml\nremote_user = ansible\nprivate_key_file = ~/.ssh/ansible_key\nhost_key_checking = True\ntimeout = 30\nretry_files_enabled = False\nstdout_callback = yaml\nbin_ansible_callbacks = True\ngathering = smart\nfact_caching = jsonfile\nfact_caching_connection = ~/.ansible/facts_cache\nfact_caching_timeout = 86400\ninterpreter_python = auto_silent\nvault_password_file = ~/.ansible_vault_pass\n\n# Logging\nlog_path = logs/ansible.log\ndisplay_skipped_hosts = False\ndisplay_ok_hosts = False\n\n# Performance\nforks = 20\npoll_interval = 15\ninternal_poll_interval = 0.001\n\n# Security\ncommand_warnings = True\ndeprecation_warnings = True\naction_warnings = True\nlocalhost_warning = True\n\n[ssh_connection]\nssh_args = -o ControlMaster=auto -o ControlPersist=3600s -o PreferredAuthentications=publickey\npipelining = True\ncontrol_path = ~/.ansible/cp/%%h-%%p-%%r\nretries = 3\n\n[privilege_escalation]\nbecome = False\nbecome_method = sudo\nbecome_user = root\nbecome_ask_pass = False\n\n[inventory]\nenable_plugins = host_list, script, auto, yaml, ini, toml\ncache = True\ncache_plugin = jsonfile\ncache_timeout = 3600\ncache_connection = ~/.ansible/inventory_cache\n\n[galaxy]\nserver_list = automation_hub, galaxy\nEOF\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"advanced-inventory-management\" class=\"mobile-header\"\u003eAdvanced Inventory Management\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Create production inventory with groups and variables\ncat \u0026gt; inventories/production/hosts.yml \u0026lt;\u0026lt;EOF\nall:\n  children:\n    webservers:\n      hosts:\n        web-prod-01:\n          ansible_host: 10.0.1.10\n          ansible_user: ansible\n          server_role: frontend\n          backup_enabled: true\n        web-prod-02:\n          ansible_host: 10.0.1.11\n          ansible_user: ansible\n          server_role: frontend\n          backup_enabled: true\n        web-prod-03:\n          ansible_host: 10.0.1.12\n          ansible_user: ansible\n          server_role: frontend\n          backup_enabled: true\n      vars:\n        http_port: 80\n        https_port: 443\n        max_clients: 200\n        environment: production\n        monitoring_enabled: true\n\n    dbservers:\n      hosts:\n        db-prod-01:\n          ansible_host: 10.0.2.10\n          ansible_user: ansible\n          mysql_server_id: 1\n          mysql_role: master\n        db-prod-02:\n          ansible_host: 10.0.2.11\n          ansible_user: ansible\n          mysql_server_id: 2\n          mysql_role: slave\n      vars:\n        mysql_port: 3306\n        mysql_root_password: \u0026quot;{{ vault_mysql_root_password }}\u0026quot;\n        mysql_replication_user: \u0026quot;{{ vault_mysql_replication_user }}\u0026quot;\n        mysql_replication_password: \u0026quot;{{ vault_mysql_replication_password }}\u0026quot;\n\n    loadbalancers:\n      hosts:\n        lb-prod-01:\n          ansible_host: 10.0.3.10\n          ansible_user: ansible\n          lb_algorithm: roundrobin\n        lb-prod-02:\n          ansible_host: 10.0.3.11\n          ansible_user: ansible\n          lb_algorithm: roundrobin\n      vars:\n        haproxy_stats_enabled: true\n        haproxy_stats_user: admin\n        haproxy_stats_password: \u0026quot;{{ vault_haproxy_stats_password }}\u0026quot;\n\n    monitoring:\n      hosts:\n        monitor-prod-01:\n          ansible_host: 10.0.4.10\n          ansible_user: ansible\n          prometheus_retention: 30d\n          grafana_admin_password: \u0026quot;{{ vault_grafana_admin_password }}\u0026quot;\n\n    bastion:\n      hosts:\n        bastion-prod-01:\n          ansible_host: bastion.example.com\n          ansible_user: ansible\n          ansible_port: 22\n\n# Global variables for all hosts\nwebservers:\n  vars:\n    nginx_worker_processes: auto\n    nginx_worker_connections: 1024\n    ssl_certificate_path: /etc/ssl/certs\n    backup_schedule: \u0026quot;0 2 * * *\u0026quot;\n\ndbservers:\n  vars:\n    mysql_innodb_buffer_pool_size: 2G\n    mysql_max_connections: 200\n    backup_schedule: \u0026quot;0 1 * * *\u0026quot;\n    monitoring_enabled: true\nEOF\n\n# Create dynamic inventory script for cloud environments\ncat \u0026gt; inventories/production/aws_ec2.yml \u0026lt;\u0026lt;EOF\nplugin: amazon.aws.aws_ec2\nregions:\n  - us-west-2\n  - us-east-1\nfilters:\n  tag:Environment: production\n  tag:Ansible: managed\n  instance-state-name: running\n\nhostnames:\n  - tag:Name\n  - dns-name\n  - private-ip-address\n\ncompose:\n  ansible_host: private_ip_address\n  ec2_state: ec2_state_name\n  ec2_arch: ec2_architecture\n\ngroups:\n  # Group by instance type\n  webservers: \u0026quot;\u0026#039;web\u0026#039; in tags.Role\u0026quot;\n  databases: \u0026quot;\u0026#039;db\u0026#039; in tags.Role\u0026quot;\n  loadbalancers: \u0026quot;\u0026#039;lb\u0026#039; in tags.Role\u0026quot;\n  \n  # Group by environment\n  production: \u0026quot;tags.Environment == \u0026#039;production\u0026#039;\u0026quot;\n  staging: \u0026quot;tags.Environment == \u0026#039;staging\u0026#039;\u0026quot;\n  \n  # Group by availability zone\n  us_west_2a: ec2_placement_availability_zone == \u0026quot;us-west-2a\u0026quot;\n  us_west_2b: ec2_placement_availability_zone == \u0026quot;us-west-2b\u0026quot;\n\nkeyed_groups:\n  # Create groups based on tags\n  - key: tags.Environment\n    prefix: env\n  - key: tags.Role  \n    prefix: role\n  - key: ec2_instance_type\n    prefix: type\nEOF\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"ansible-vault-security\" class=\"mobile-header\"\u003eAnsible Vault Security\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Create strong vault password\nopenssl rand -base64 32 \u0026gt; ~/.ansible_vault_pass\nchmod 600 ~/.ansible_vault_pass\n\n# Create encrypted vault file for secrets\nansible-vault create group_vars/all/vault.yml\n# Enter secure passwords and API keys:\n# vault_mysql_root_password: your_secure_mysql_password\n# vault_grafana_admin_password: your_secure_grafana_password  \n# vault_ssl_private_key: |\n#   -----BEGIN PRIVATE KEY-----\n#   your_private_key_content\n#   -----END PRIVATE KEY-----\n\n# Create non-encrypted variables file\ncat \u0026gt; group_vars/all/vars.yml \u0026lt;\u0026lt;EOF\n# Non-sensitive variables\nmysql_port: 3306\nnginx_port: 80\ngrafana_port: 3000\nprometheus_port: 9090\n\n# Reference vault variables\nmysql_root_password: \u0026quot;{{ vault_mysql_root_password }}\u0026quot;\ngrafana_admin_password: \u0026quot;{{ vault_grafana_admin_password }}\u0026quot;\n\n# SSL configuration\nssl_certificate_path: /etc/ssl/certs/server.crt\nssl_private_key_path: /etc/ssl/private/server.key\nssl_private_key_content: \u0026quot;{{ vault_ssl_private_key }}\u0026quot;\n\n# Security settings\nansible_ssh_common_args: \u0026#039;-o StrictHostKeyChecking=yes -o UserKnownHostsFile=~/.ssh/known_hosts\u0026#039;\nansible_become_method: sudo\nansible_become_user: root\nEOF\n\n# Edit vault file\nansible-vault edit group_vars/all/vault.yml\n\n# View vault file (read-only)\nansible-vault view group_vars/all/vault.yml\n\n# Change vault password\nansible-vault rekey group_vars/all/vault.yml\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"comprehensive-playbooks\" class=\"mobile-header\"\u003eComprehensive Playbooks\u003c/h2\u003e\n\u003ch3 id=\"system-hardening-playbook\" class=\"mobile-header\"\u003eSystem Hardening Playbook\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003ecat \u0026gt; playbooks/system-hardening.yml \u0026lt;\u0026lt;EOF\n---\n- name: System Security Hardening\n  hosts: all\n  become: yes\n  gather_facts: yes\n  vars:\n    security_packages:\n      - fail2ban\n      - ufw\n      - aide\n      - chkrootkit\n      - rkhunter\n      - clamav\n      - lynis\n    \n    disabled_services:\n      - telnet\n      - rsh\n      - rlogin\n      - tftp\n      - talk\n      - finger\n\n  pre_tasks:\n    - name: Update package cache\n      package:\n        update_cache: yes\n        cache_valid_time: 3600\n      when: ansible_os_family in [\u0026quot;Debian\u0026quot;, \u0026quot;RedHat\u0026quot;]\n\n  tasks:\n    # System updates\n    - name: Upgrade all packages\n      package:\n        name: \u0026quot;*\u0026quot;\n        state: latest\n      when: ansible_os_family == \u0026quot;RedHat\u0026quot;\n\n    - name: Upgrade all packages (Debian/Ubuntu)\n      apt:\n        upgrade: dist\n        autoremove: yes\n        autoclean: yes\n      when: ansible_os_family == \u0026quot;Debian\u0026quot;\n\n    # Install security packages\n    - name: Install security packages\n      package:\n        name: \u0026quot;{{ security_packages }}\u0026quot;\n        state: present\n\n    # User security\n    - name: Create ansible user with limited privileges\n      user:\n        name: ansible\n        groups: sudo\n        shell: /bin/bash\n        create_home: yes\n        generate_ssh_key: yes\n        ssh_key_bits: 4096\n        ssh_key_type: rsa\n\n    - name: Configure sudo for ansible user\n      lineinfile:\n        path: /etc/sudoers.d/ansible\n        line: \u0026#039;ansible ALL=(ALL) NOPASSWD:ALL\u0026#039;\n        create: yes\n        mode: \u0026#039;0440\u0026#039;\n        validate: \u0026#039;visudo -cf %s\u0026#039;\n\n    # SSH hardening\n    - name: Configure SSH security\n      lineinfile:\n        path: /etc/ssh/sshd_config\n        regexp: \u0026quot;{{ item.regexp }}\u0026quot;\n        line: \u0026quot;{{ item.line }}\u0026quot;\n        backup: yes\n      loop:\n        - { regexp: \u0026#039;^#?PermitRootLogin\u0026#039;, line: \u0026#039;PermitRootLogin no\u0026#039; }\n        - { regexp: \u0026#039;^#?PasswordAuthentication\u0026#039;, line: \u0026#039;PasswordAuthentication no\u0026#039; }\n        - { regexp: \u0026#039;^#?X11Forwarding\u0026#039;, line: \u0026#039;X11Forwarding no\u0026#039; }\n        - { regexp: \u0026#039;^#?MaxAuthTries\u0026#039;, line: \u0026#039;MaxAuthTries 3\u0026#039; }\n        - { regexp: \u0026#039;^#?ClientAliveInterval\u0026#039;, line: \u0026#039;ClientAliveInterval 300\u0026#039; }\n        - { regexp: \u0026#039;^#?ClientAliveCountMax\u0026#039;, line: \u0026#039;ClientAliveCountMax 0\u0026#039; }\n        - { regexp: \u0026#039;^#?Protocol\u0026#039;, line: \u0026#039;Protocol 2\u0026#039; }\n        - { regexp: \u0026#039;^#?LogLevel\u0026#039;, line: \u0026#039;LogLevel VERBOSE\u0026#039; }\n      notify: restart ssh\n\n    # Firewall configuration\n    - name: Configure UFW firewall (Debian/Ubuntu)\n      ufw:\n        state: enabled\n        policy: deny\n        direction: incoming\n      when: ansible_os_family == \u0026quot;Debian\u0026quot;\n\n    - name: Allow SSH through UFW\n      ufw:\n        rule: allow\n        port: 22\n        proto: tcp\n        comment: \u0026#039;SSH access\u0026#039;\n      when: ansible_os_family == \u0026quot;Debian\u0026quot;\n\n    - name: Configure firewalld (RHEL/CentOS/Fedora)\n      firewalld:\n        state: enabled\n        permanent: yes\n        immediate: yes\n      when: ansible_os_family == \u0026quot;RedHat\u0026quot;\n\n    - name: Allow SSH through firewalld\n      firewalld:\n        service: ssh\n        permanent: yes\n        state: enabled\n        immediate: yes\n      when: ansible_os_family == \u0026quot;RedHat\u0026quot;\n\n    # Disable unnecessary services\n    - name: Disable unnecessary services\n      systemd:\n        name: \u0026quot;{{ item }}\u0026quot;\n        enabled: no\n        state: stopped\n      loop: \u0026quot;{{ disabled_services }}\u0026quot;\n      ignore_errors: yes\n\n    # File system security\n    - name: Set proper permissions on sensitive files\n      file:\n        path: \u0026quot;{{ item.path }}\u0026quot;\n        mode: \u0026quot;{{ item.mode }}\u0026quot;\n        owner: root\n        group: root\n      loop:\n        - { path: \u0026#039;/etc/passwd\u0026#039;, mode: \u0026#039;0644\u0026#039; }\n        - { path: \u0026#039;/etc/shadow\u0026#039;, mode: \u0026#039;0640\u0026#039; }\n        - { path: \u0026#039;/etc/group\u0026#039;, mode: \u0026#039;0644\u0026#039; }\n        - { path: \u0026#039;/etc/gshadow\u0026#039;, mode: \u0026#039;0640\u0026#039; }\n        - { path: \u0026#039;/etc/ssh/sshd_config\u0026#039;, mode: \u0026#039;0600\u0026#039; }\n\n    # Kernel security parameters\n    - name: Configure kernel security parameters\n      sysctl:\n        name: \u0026quot;{{ item.key }}\u0026quot;\n        value: \u0026quot;{{ item.value }}\u0026quot;\n        sysctl_set: yes\n        state: present\n        reload: yes\n      loop:\n        - { key: \u0026#039;net.ipv4.ip_forward\u0026#039;, value: \u0026#039;0\u0026#039; }\n        - { key: \u0026#039;net.ipv4.conf.all.send_redirects\u0026#039;, value: \u0026#039;0\u0026#039; }\n        - { key: \u0026#039;net.ipv4.conf.default.send_redirects\u0026#039;, value: \u0026#039;0\u0026#039; }\n        - { key: \u0026#039;net.ipv4.conf.all.accept_source_route\u0026#039;, value: \u0026#039;0\u0026#039; }\n        - { key: \u0026#039;net.ipv4.conf.default.accept_source_route\u0026#039;, value: \u0026#039;0\u0026#039; }\n        - { key: \u0026#039;net.ipv4.conf.all.accept_redirects\u0026#039;, value: \u0026#039;0\u0026#039; }\n        - { key: \u0026#039;net.ipv4.conf.default.accept_redirects\u0026#039;, value: \u0026#039;0\u0026#039; }\n        - { key: \u0026#039;net.ipv4.conf.all.secure_redirects\u0026#039;, value: \u0026#039;0\u0026#039; }\n        - { key: \u0026#039;net.ipv4.conf.default.secure_redirects\u0026#039;, value: \u0026#039;0\u0026#039; }\n        - { key: \u0026#039;net.ipv4.conf.all.log_martians\u0026#039;, value: \u0026#039;1\u0026#039; }\n        - { key: \u0026#039;net.ipv4.conf.default.log_martians\u0026#039;, value: \u0026#039;1\u0026#039; }\n        - { key: \u0026#039;kernel.randomize_va_space\u0026#039;, value: \u0026#039;2\u0026#039; }\n\n    # Configure fail2ban\n    - name: Configure fail2ban for SSH protection\n      template:\n        src: templates/fail2ban-jail.local.j2\n        dest: /etc/fail2ban/jail.local\n        backup: yes\n      notify: restart fail2ban\n\n  handlers:\n    - name: restart ssh\n      service:\n        name: \u0026quot;{{ \u0026#039;ssh\u0026#039; if ansible_os_family == \u0026#039;Debian\u0026#039; else \u0026#039;sshd\u0026#039; }}\u0026quot;\n        state: restarted\n\n    - name: restart fail2ban\n      service:\n        name: fail2ban\n        state: restarted\nEOF\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"application-deployment-playbook\" class=\"mobile-header\"\u003eApplication Deployment Playbook\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003ecat \u0026gt; playbooks/web-application-deployment.yml \u0026lt;\u0026lt;EOF\n---\n- name: Deploy Web Application Stack\n  hosts: webservers\n  become: yes\n  serial: \u0026quot;25%\u0026quot;  # Rolling deployment\n  max_fail_percentage: 10\n  vars:\n    app_name: mywebapp\n    app_version: \u0026quot;{{ app_version | default(\u0026#039;latest\u0026#039;) }}\u0026quot;\n    app_port: 3000\n    nginx_workers: \u0026quot;{{ ansible_processor_cores }}\u0026quot;\n    \n  pre_tasks:\n    - name: Check if maintenance mode file exists\n      stat:\n        path: /var/www/html/maintenance.html\n      register: maintenance_mode\n\n    - name: Fail if in maintenance mode\n      fail:\n        msg: \u0026quot;Server is in maintenance mode\u0026quot;\n      when: maintenance_mode.stat.exists and not force_deployment | default(false)\n\n  tasks:\n    # Application deployment\n    - name: Create application user\n      user:\n        name: \u0026quot;{{ app_name }}\u0026quot;\n        system: yes\n        shell: /bin/false\n        home: \u0026quot;/opt/{{ app_name }}\u0026quot;\n        create_home: yes\n\n    - name: Create application directories\n      file:\n        path: \u0026quot;{{ item }}\u0026quot;\n        state: directory\n        owner: \u0026quot;{{ app_name }}\u0026quot;\n        group: \u0026quot;{{ app_name }}\u0026quot;\n        mode: \u0026#039;0755\u0026#039;\n      loop:\n        - \u0026quot;/opt/{{ app_name }}\u0026quot;\n        - \u0026quot;/opt/{{ app_name }}/releases\u0026quot;\n        - \u0026quot;/opt/{{ app_name }}/shared\u0026quot;\n        - \u0026quot;/var/log/{{ app_name }}\u0026quot;\n\n    - name: Download application release\n      get_url:\n        url: \u0026quot;https://releases.example.com/{{ app_name }}/{{ app_version }}/{{ app_name }}-{{ app_version }}.tar.gz\u0026quot;\n        dest: \u0026quot;/tmp/{{ app_name }}-{{ app_version }}.tar.gz\u0026quot;\n        mode: \u0026#039;0644\u0026#039;\n        timeout: 300\n      register: download_result\n\n    - name: Extract application\n      unarchive:\n        src: \u0026quot;/tmp/{{ app_name }}-{{ app_version }}.tar.gz\u0026quot;\n        dest: \u0026quot;/opt/{{ app_name }}/releases/\u0026quot;\n        owner: \u0026quot;{{ app_name }}\u0026quot;\n        group: \u0026quot;{{ app_name }}\u0026quot;\n        remote_src: yes\n        creates: \u0026quot;/opt/{{ app_name }}/releases/{{ app_version }}\u0026quot;\n\n    - name: Create symlink to current release\n      file:\n        src: \u0026quot;/opt/{{ app_name }}/releases/{{ app_version }}\u0026quot;\n        dest: \u0026quot;/opt/{{ app_name }}/current\u0026quot;\n        state: link\n        owner: \u0026quot;{{ app_name }}\u0026quot;\n        group: \u0026quot;{{ app_name }}\u0026quot;\n      notify:\n        - reload application\n        - reload nginx\n\n    # Configuration management\n    - name: Deploy application configuration\n      template:\n        src: \u0026quot;templates/{{ app_name }}.conf.j2\u0026quot;\n        dest: \u0026quot;/opt/{{ app_name }}/shared/{{ app_name }}.conf\u0026quot;\n        owner: \u0026quot;{{ app_name }}\u0026quot;\n        group: \u0026quot;{{ app_name }}\u0026quot;\n        mode: \u0026#039;0640\u0026#039;\n        backup: yes\n      notify: reload application\n\n    # Service management\n    - name: Deploy systemd service file\n      template:\n        src: \u0026quot;templates/{{ app_name }}.service.j2\u0026quot;\n        dest: \u0026quot;/etc/systemd/system/{{ app_name }}.service\u0026quot;\n        mode: \u0026#039;0644\u0026#039;\n      notify:\n        - daemon reload\n        - restart application\n\n    - name: Enable and start application service\n      systemd:\n        name: \u0026quot;{{ app_name }}\u0026quot;\n        enabled: yes\n        state: started\n        daemon_reload: yes\n\n    # Health check\n    - name: Wait for application to be ready\n      uri:\n        url: \u0026quot;http://localhost:{{ app_port }}/health\u0026quot;\n        method: GET\n        status_code: 200\n      retries: 30\n      delay: 10\n\n    # Cleanup old releases\n    - name: Clean up old releases (keep last 3)\n      shell: |\n        cd /opt/{{ app_name }}/releases\n        ls -t | tail -n +4 | xargs rm -rf\n      args:\n        executable: /bin/bash\n\n  post_tasks:\n    - name: Verify application is running\n      uri:\n        url: \u0026quot;http://{{ ansible_default_ipv4.address }}:{{ app_port }}/health\u0026quot;\n        method: GET\n        status_code: 200\n      delegate_to: localhost\n\n    - name: Log deployment success\n      lineinfile:\n        path: \u0026quot;/var/log/{{ app_name }}/deployments.log\u0026quot;\n        line: \u0026quot;{{ ansible_date_time.iso8601 }} - Successfully deployed {{ app_version }} to {{ inventory_hostname }}\u0026quot;\n        create: yes\n\n  handlers:\n    - name: daemon reload\n      systemd:\n        daemon_reload: yes\n\n    - name: restart application\n      systemd:\n        name: \u0026quot;{{ app_name }}\u0026quot;\n        state: restarted\n\n    - name: reload application\n      systemd:\n        name: \u0026quot;{{ app_name }}\u0026quot;\n        state: reloaded\n\n    - name: reload nginx\n      service:\n        name: nginx\n        state: reloaded\nEOF\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"infrastructure-as-code-playbook\" class=\"mobile-header\"\u003eInfrastructure as Code Playbook\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003ecat \u0026gt; playbooks/infrastructure-provisioning.yml \u0026lt;\u0026lt;EOF\n---\n- name: Infrastructure Provisioning and Configuration\n  hosts: all\n  become: yes\n  strategy: free  # Parallel execution\n  vars:\n    base_packages:\n      Debian:\n        - curl\n        - wget\n        - vim\n        - htop\n        - git\n        - python3\n        - python3-pip\n        - unzip\n        - tree\n      RedHat:\n        - curl\n        - wget\n        - vim\n        - htop\n        - git\n        - python3\n        - python3-pip\n        - unzip\n        - tree\n        - epel-release\n\n  tasks:\n    # System preparation\n    - name: Set hostname\n      hostname:\n        name: \u0026quot;{{ inventory_hostname }}\u0026quot;\n\n    - name: Update /etc/hosts\n      lineinfile:\n        path: /etc/hosts\n        line: \u0026quot;{{ ansible_default_ipv4.address }} {{ inventory_hostname }}\u0026quot;\n        backup: yes\n\n    # Package management\n    - name: Install base packages\n      package:\n        name: \u0026quot;{{ base_packages[ansible_os_family] | default(base_packages[\u0026#039;Debian\u0026#039;]) }}\u0026quot;\n        state: present\n\n    # Time synchronization\n    - name: Install and configure NTP\n      package:\n        name: \u0026quot;{{ \u0026#039;ntp\u0026#039; if ansible_os_family == \u0026#039;Debian\u0026#039; else \u0026#039;chrony\u0026#039; }}\u0026quot;\n        state: present\n\n    - name: Start and enable time synchronization\n      service:\n        name: \u0026quot;{{ \u0026#039;ntp\u0026#039; if ansible_os_family == \u0026#039;Debian\u0026#039; else \u0026#039;chronyd\u0026#039; }}\u0026quot;\n        state: started\n        enabled: yes\n\n    # Log management\n    - name: Configure logrotate for application logs\n      template:\n        src: templates/app-logrotate.j2\n        dest: /etc/logrotate.d/applications\n        mode: \u0026#039;0644\u0026#039;\n\n    # Monitoring agent installation\n    - name: Install Node Exporter for Prometheus monitoring\n      get_url:\n        url: \u0026quot;https://github.com/prometheus/node_exporter/releases/download/v1.6.1/node_exporter-1.6.1.linux-amd64.tar.gz\u0026quot;\n        dest: /tmp/node_exporter.tar.gz\n        mode: \u0026#039;0644\u0026#039;\n\n    - name: Extract Node Exporter\n      unarchive:\n        src: /tmp/node_exporter.tar.gz\n        dest: /tmp\n        remote_src: yes\n\n    - name: Copy Node Exporter binary\n      copy:\n        src: /tmp/node_exporter-1.6.1.linux-amd64/node_exporter\n        dest: /usr/local/bin/node_exporter\n        mode: \u0026#039;0755\u0026#039;\n        owner: root\n        group: root\n        remote_src: yes\n\n    - name: Create node_exporter systemd service\n      template:\n        src: templates/node_exporter.service.j2\n        dest: /etc/systemd/system/node_exporter.service\n        mode: \u0026#039;0644\u0026#039;\n      notify:\n        - daemon reload\n        - restart node_exporter\n\n    # Security configuration\n    - name: Configure kernel parameters for security\n      sysctl:\n        name: \u0026quot;{{ item.key }}\u0026quot;\n        value: \u0026quot;{{ item.value }}\u0026quot;\n        sysctl_set: yes\n        state: present\n        reload: yes\n      loop:\n        - { key: \u0026#039;kernel.dmesg_restrict\u0026#039;, value: \u0026#039;1\u0026#039; }\n        - { key: \u0026#039;kernel.kptr_restrict\u0026#039;, value: \u0026#039;2\u0026#039; }\n        - { key: \u0026#039;kernel.yama.ptrace_scope\u0026#039;, value: \u0026#039;1\u0026#039; }\n        - { key: \u0026#039;net.ipv4.conf.all.log_martians\u0026#039;, value: \u0026#039;1\u0026#039; }\n        - { key: \u0026#039;net.ipv4.conf.default.log_martians\u0026#039;, value: \u0026#039;1\u0026#039; }\n        - { key: \u0026#039;net.ipv4.conf.all.send_redirects\u0026#039;, value: \u0026#039;0\u0026#039; }\n        - { key: \u0026#039;net.ipv4.conf.default.send_redirects\u0026#039;, value: \u0026#039;0\u0026#039; }\n\n    # File integrity monitoring\n    - name: Initialize AIDE database\n      shell: |\n        aide --init\n        mv /var/lib/aide/aide.db.new /var/lib/aide/aide.db\n      args:\n        creates: /var/lib/aide/aide.db\n\n    - name: Schedule AIDE integrity checks\n      cron:\n        name: \u0026quot;AIDE integrity check\u0026quot;\n        minute: \u0026quot;0\u0026quot;\n        hour: \u0026quot;3\u0026quot;\n        job: \u0026quot;/usr/bin/aide --check\u0026quot;\n        user: root\n\n  handlers:\n    - name: daemon reload\n      systemd:\n        daemon_reload: yes\n\n    - name: restart node_exporter\n      service:\n        name: node_exporter\n        state: restarted\n        enabled: yes\nEOF\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"advanced-role-development\" class=\"mobile-header\"\u003eAdvanced Role Development\u003c/h2\u003e\n\u003ch3 id=\"comprehensive-nginx-role\" class=\"mobile-header\"\u003eComprehensive NGINX Role\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Create NGINX role structure\nansible-galaxy init roles/nginx\n\n# Main tasks\ncat \u0026gt; roles/nginx/tasks/main.yml \u0026lt;\u0026lt;EOF\n---\n# NGINX Installation and Configuration Role\n- name: Include OS-specific variables\n  include_vars: \u0026quot;{{ ansible_os_family }}.yml\u0026quot;\n\n- name: Install NGINX\n  include_tasks: \u0026quot;install-{{ ansible_os_family }}.yml\u0026quot;\n\n- name: Create NGINX directories\n  file:\n    path: \u0026quot;{{ item }}\u0026quot;\n    state: directory\n    owner: root\n    group: root\n    mode: \u0026#039;0755\u0026#039;\n  loop:\n    - /etc/nginx/sites-available\n    - /etc/nginx/sites-enabled\n    - /etc/nginx/conf.d\n    - /var/log/nginx\n    - /var/cache/nginx\n\n- name: Generate DH parameters\n  openssl_dhparam:\n    path: /etc/ssl/certs/dhparam.pem\n    size: 2048\n  when: nginx_ssl_enabled | default(false)\n\n- name: Deploy NGINX main configuration\n  template:\n    src: nginx.conf.j2\n    dest: /etc/nginx/nginx.conf\n    backup: yes\n    validate: \u0026#039;nginx -t -c %s\u0026#039;\n  notify: reload nginx\n\n- name: Deploy virtual host configurations\n  template:\n    src: vhost.conf.j2\n    dest: \u0026quot;/etc/nginx/sites-available/{{ item.name }}.conf\u0026quot;\n    backup: yes\n  loop: \u0026quot;{{ nginx_vhosts | default([]) }}\u0026quot;\n  notify: reload nginx\n\n- name: Enable virtual hosts\n  file:\n    src: \u0026quot;/etc/nginx/sites-available/{{ item.name }}.conf\u0026quot;\n    dest: \u0026quot;/etc/nginx/sites-enabled/{{ item.name }}.conf\u0026quot;\n    state: link\n  loop: \u0026quot;{{ nginx_vhosts | default([]) }}\u0026quot;\n  when: item.enabled | default(true)\n  notify: reload nginx\n\n- name: Remove default site\n  file:\n    path: /etc/nginx/sites-enabled/default\n    state: absent\n  notify: reload nginx\n\n- name: Start and enable NGINX\n  service:\n    name: nginx\n    state: started\n    enabled: yes\n\n- name: Configure log rotation\n  template:\n    src: nginx-logrotate.j2\n    dest: /etc/logrotate.d/nginx\n    mode: \u0026#039;0644\u0026#039;\n\n- name: Setup NGINX monitoring\n  include_tasks: monitoring.yml\n  when: nginx_monitoring_enabled | default(false)\n\n- name: Configure SSL certificates\n  include_tasks: ssl.yml\n  when: nginx_ssl_enabled | default(false)\nEOF\n\n# OS-specific installation tasks\ncat \u0026gt; roles/nginx/tasks/install-Debian.yml \u0026lt;\u0026lt;EOF\n---\n- name: Add NGINX signing key (Debian/Ubuntu)\n  apt_key:\n    url: https://nginx.org/keys/nginx_signing.key\n    state: present\n\n- name: Add NGINX repository (Debian/Ubuntu)\n  apt_repository:\n    repo: \u0026quot;deb https://nginx.org/packages/{{ ansible_distribution | lower }}/ {{ ansible_distribution_release }} nginx\u0026quot;\n    state: present\n\n- name: Install NGINX (Debian/Ubuntu)\n  apt:\n    name: nginx\n    state: present\n    update_cache: yes\nEOF\n\ncat \u0026gt; roles/nginx/tasks/install-RedHat.yml \u0026lt;\u0026lt;EOF\n---\n- name: Add NGINX repository (RHEL/CentOS)\n  yum_repository:\n    name: nginx\n    description: NGINX Repository\n    baseurl: \u0026quot;https://nginx.org/packages/centos/{{ ansible_distribution_major_version }}/$basearch/\u0026quot;\n    gpgcheck: yes\n    gpgkey: https://nginx.org/keys/nginx_signing.key\n    enabled: yes\n\n- name: Install NGINX (RHEL/CentOS)\n  yum:\n    name: nginx\n    state: present\nEOF\n\n# Variables\ncat \u0026gt; roles/nginx/vars/main.yml \u0026lt;\u0026lt;EOF\n---\nnginx_user: nginx\nnginx_worker_processes: auto\nnginx_worker_connections: 1024\nnginx_keepalive_timeout: 65\nnginx_ssl_enabled: false\nnginx_monitoring_enabled: true\n\nnginx_security_headers:\n  - \u0026quot;add_header X-Frame-Options SAMEORIGIN always;\u0026quot;\n  - \u0026quot;add_header X-Content-Type-Options nosniff always;\u0026quot;\n  - \u0026quot;add_header X-XSS-Protection \u0026#039;1; mode=block\u0026#039; always;\u0026quot;\n  - \u0026quot;add_header Strict-Transport-Security \u0026#039;max-age=31536000; includeSubDomains\u0026#039; always;\u0026quot;\n\nnginx_default_vhost:\n  name: default\n  listen: 80\n  server_name: \u0026quot;_\u0026quot;\n  root: /var/www/html\n  index: index.html\n  enabled: false\nEOF\n\n# Templates\ncat \u0026gt; roles/nginx/templates/nginx.conf.j2 \u0026lt;\u0026lt;EOF\nuser {{ nginx_user }};\nworker_processes {{ nginx_worker_processes }};\npid /var/run/nginx.pid;\n\nevents {\n    worker_connections {{ nginx_worker_connections }};\n    use epoll;\n    multi_accept on;\n}\n\nhttp {\n    # Basic settings\n    sendfile on;\n    tcp_nopush on;\n    tcp_nodelay on;\n    keepalive_timeout {{ nginx_keepalive_timeout }};\n    types_hash_max_size 2048;\n    server_tokens off;\n\n    include /etc/nginx/mime.types;\n    default_type application/octet-stream;\n\n    # SSL configuration\n{% if nginx_ssl_enabled %}\n    ssl_protocols TLSv1.2 TLSv1.3;\n    ssl_prefer_server_ciphers off;\n    ssl_dhparam /etc/ssl/certs/dhparam.pem;\n{% endif %}\n\n    # Gzip compression\n    gzip on;\n    gzip_vary on;\n    gzip_proxied any;\n    gzip_comp_level 6;\n    gzip_types\n        application/javascript\n        application/json\n        application/xml\n        text/css\n        text/javascript\n        text/xml\n        text/plain;\n\n    # Security headers\n{% for header in nginx_security_headers %}\n    {{ header }}\n{% endfor %}\n\n    # Logging\n    log_format main \u0026#039;\\$remote_addr - \\$remote_user [\\$time_local] \u0026quot;\\$request\u0026quot; \u0026#039;\n                    \u0026#039;\\$status \\$body_bytes_sent \u0026quot;\\$http_referer\u0026quot; \u0026#039;\n                    \u0026#039;\u0026quot;\\$http_user_agent\u0026quot; \u0026quot;\\$http_x_forwarded_for\u0026quot;\u0026#039;;\n\n    access_log /var/log/nginx/access.log main;\n    error_log /var/log/nginx/error.log;\n\n    # Rate limiting\n    limit_req_zone \\$binary_remote_addr zone=login:10m rate=10r/m;\n    limit_conn_zone \\$binary_remote_addr zone=addr:10m;\n\n    # Include configurations\n    include /etc/nginx/conf.d/*.conf;\n    include /etc/nginx/sites-enabled/*;\n}\nEOF\n\n# Handlers\ncat \u0026gt; roles/nginx/handlers/main.yml \u0026lt;\u0026lt;EOF\n---\n- name: restart nginx\n  service:\n    name: nginx\n    state: restarted\n\n- name: reload nginx\n  service:\n    name: nginx\n    state: reloaded\n\n- name: validate nginx config\n  command: nginx -t\n  changed_when: false\nEOF\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"security-and-compliance\" class=\"mobile-header\"\u003eSecurity and Compliance\u003c/h2\u003e\n\u003ch3 id=\"ansible-security-scanner-integration\" class=\"mobile-header\"\u003eAnsible Security Scanner Integration\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Create security scanning playbook\ncat \u0026gt; playbooks/security-scan.yml \u0026lt;\u0026lt;EOF\n---\n- name: Security Compliance Scanning\n  hosts: all\n  become: yes\n  gather_facts: yes\n  vars:\n    scan_results_dir: \u0026quot;/tmp/security-scans\u0026quot;\n    \n  tasks:\n    - name: Create scan results directory\n      file:\n        path: \u0026quot;{{ scan_results_dir }}\u0026quot;\n        state: directory\n        mode: \u0026#039;0755\u0026#039;\n\n    # CIS benchmark scanning\n    - name: Download CIS benchmark script\n      get_url:\n        url: \u0026quot;https://github.com/dev-sec/cis-dil-benchmark/archive/master.zip\u0026quot;\n        dest: \u0026quot;/tmp/cis-benchmark.zip\u0026quot;\n        mode: \u0026#039;0644\u0026#039;\n\n    - name: Run CIS benchmark scan\n      shell: |\n        cd /tmp\n        unzip -o cis-benchmark.zip\n        cd cis-dil-benchmark-master\n        bash cis_ubuntu2204.sh \u0026gt; {{ scan_results_dir }}/cis-scan-{{ inventory_hostname }}.txt\n      args:\n        creates: \u0026quot;{{ scan_results_dir }}/cis-scan-{{ inventory_hostname }}.txt\u0026quot;\n\n    # Lynis security audit\n    - name: Install Lynis\n      package:\n        name: lynis\n        state: present\n\n    - name: Run Lynis security audit\n      command: lynis audit system --quiet --cronjob\n      register: lynis_result\n      changed_when: false\n\n    - name: Save Lynis results\n      copy:\n        content: \u0026quot;{{ lynis_result.stdout }}\u0026quot;\n        dest: \u0026quot;{{ scan_results_dir }}/lynis-scan-{{ inventory_hostname }}.txt\u0026quot;\n        mode: \u0026#039;0644\u0026#039;\n\n    # OpenSCAP compliance scanning\n    - name: Install OpenSCAP (RHEL/CentOS)\n      package:\n        name:\n          - openscap-scanner\n          - scap-security-guide\n        state: present\n      when: ansible_os_family == \u0026quot;RedHat\u0026quot;\n\n    - name: Install OpenSCAP (Debian/Ubuntu)\n      package:\n        name:\n          - libopenscap8\n          - ssg-debian\n        state: present\n      when: ansible_os_family == \u0026quot;Debian\u0026quot;\n\n    - name: Run OpenSCAP scan\n      shell: |\n        oscap xccdf eval --profile xccdf_org.ssgproject.content_profile_standard \\\n          --results {{ scan_results_dir }}/oscap-results-{{ inventory_hostname }}.xml \\\n          --report {{ scan_results_dir }}/oscap-report-{{ inventory_hostname }}.html \\\n          /usr/share/xml/scap/ssg/content/ssg-{{ ansible_distribution | lower }}{{ ansible_distribution_major_version }}-xccdf.xml\n      ignore_errors: yes\n      when: ansible_os_family in [\u0026quot;RedHat\u0026quot;, \u0026quot;Debian\u0026quot;]\n\n    # Vulnerability scanning with Trivy\n    - name: Install Trivy vulnerability scanner\n      shell: |\n        curl -sfL https://raw.githubusercontent.com/aquasecurity/trivy/main/contrib/install.sh | sh -s -- -b /usr/local/bin\n      args:\n        creates: /usr/local/bin/trivy\n\n    - name: Run Trivy filesystem scan\n      shell: |\n        trivy fs --format json --output {{ scan_results_dir }}/trivy-scan-{{ inventory_hostname }}.json /\n      ignore_errors: yes\n\n    # Collect scan results\n    - name: Fetch scan results to control machine\n      fetch:\n        src: \u0026quot;{{ item }}\u0026quot;\n        dest: \u0026quot;./security-reports/{{ inventory_hostname }}/\u0026quot;\n        flat: yes\n      loop:\n        - \u0026quot;{{ scan_results_dir }}/cis-scan-{{ inventory_hostname }}.txt\u0026quot;\n        - \u0026quot;{{ scan_results_dir }}/lynis-scan-{{ inventory_hostname }}.txt\u0026quot;\n        - \u0026quot;{{ scan_results_dir }}/oscap-report-{{ inventory_hostname }}.html\u0026quot;\n        - \u0026quot;{{ scan_results_dir }}/trivy-scan-{{ inventory_hostname }}.json\u0026quot;\n      ignore_errors: yes\n      delegate_to: localhost\n\n  post_tasks:\n    - name: Generate compliance summary\n      template:\n        src: templates/compliance-summary.j2\n        dest: \u0026quot;{{ scan_results_dir }}/compliance-summary-{{ inventory_hostname }}.txt\u0026quot;\n        mode: \u0026#039;0644\u0026#039;\nEOF\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"ansible-awxtower-integration\" class=\"mobile-header\"\u003eAnsible AWX/Tower Integration\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Install Ansible AWX (open source)\ncat \u0026gt; playbooks/install-awx.yml \u0026lt;\u0026lt;EOF\n---\n- name: Install Ansible AWX\n  hosts: localhost\n  connection: local\n  become: yes\n  vars:\n    awx_namespace: awx\n    awx_admin_user: admin\n    awx_admin_password: \u0026quot;{{ vault_awx_admin_password }}\u0026quot;\n\n  tasks:\n    - name: Install prerequisite packages\n      package:\n        name:\n          - git\n          - curl\n          - docker.io\n          - docker-compose\n        state: present\n\n    - name: Clone AWX repository\n      git:\n        repo: https://github.com/ansible/awx.git\n        dest: /opt/awx\n        version: devel\n\n    - name: Create AWX Docker inventory\n      template:\n        src: templates/awx-docker-inventory.j2\n        dest: /opt/awx/installer/inventory\n        mode: \u0026#039;0644\u0026#039;\n\n    - name: Install AWX using Ansible\n      shell: ansible-playbook -i inventory install.yml\n      args:\n        chdir: /opt/awx/installer\n      environment:\n        ANSIBLE_HOST_KEY_CHECKING: False\n\n    - name: Wait for AWX to be ready\n      uri:\n        url: \u0026quot;http://localhost:80/api/v2/ping/\u0026quot;\n        method: GET\n      retries: 30\n      delay: 10\n\n    - name: Configure AWX organizations and projects\n      uri:\n        url: \u0026quot;http://localhost:80/api/v2/organizations/\u0026quot;\n        method: POST\n        user: \u0026quot;{{ awx_admin_user }}\u0026quot;\n        password: \u0026quot;{{ awx_admin_password }}\u0026quot;\n        force_basic_auth: yes\n        body_format: json\n        body:\n          name: \u0026quot;Production\u0026quot;\n          description: \u0026quot;Production environment organization\u0026quot;\n        status_code: [200, 201, 409]\nEOF\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"multi-cloud-automation\" class=\"mobile-header\"\u003eMulti-Cloud Automation\u003c/h2\u003e\n\u003ch3 id=\"aws-infrastructure-automation\" class=\"mobile-header\"\u003eAWS Infrastructure Automation\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003ecat \u0026gt; playbooks/aws-infrastructure.yml \u0026lt;\u0026lt;EOF\n---\n- name: AWS Infrastructure Automation\n  hosts: localhost\n  connection: local\n  gather_facts: no\n  vars:\n    aws_region: \u0026quot;{{ aws_region | default(\u0026#039;us-west-2\u0026#039;) }}\u0026quot;\n    vpc_cidr: \u0026quot;{{ vpc_cidr | default(\u0026#039;10.0.0.0/16\u0026#039;) }}\u0026quot;\n    environment: \u0026quot;{{ environment | default(\u0026#039;production\u0026#039;) }}\u0026quot;\n\n  tasks:\n    # VPC Creation\n    - name: Create VPC\n      amazon.aws.ec2_vpc_info:\n        filters:\n          \u0026quot;tag:Name\u0026quot;: \u0026quot;{{ environment }}-vpc\u0026quot;\n        region: \u0026quot;{{ aws_region }}\u0026quot;\n      register: existing_vpc\n\n    - name: Create new VPC if not exists\n      amazon.aws.ec2_vpc_net:\n        name: \u0026quot;{{ environment }}-vpc\u0026quot;\n        cidr_block: \u0026quot;{{ vpc_cidr }}\u0026quot;\n        region: \u0026quot;{{ aws_region }}\u0026quot;\n        state: present\n        dns_hostnames: yes\n        dns_support: yes\n        tags:\n          Environment: \u0026quot;{{ environment }}\u0026quot;\n          ManagedBy: ansible\n      register: vpc\n      when: existing_vpc.vpcs | length == 0\n\n    # Security Groups\n    - name: Create web security group\n      amazon.aws.ec2_group:\n        name: \u0026quot;{{ environment }}-web-sg\u0026quot;\n        description: \u0026quot;Security group for web servers\u0026quot;\n        vpc_id: \u0026quot;{{ vpc.vpc.id if vpc.vpc is defined else existing_vpc.vpcs[0].vpc_id }}\u0026quot;\n        region: \u0026quot;{{ aws_region }}\u0026quot;\n        rules:\n          - proto: tcp\n            ports:\n              - 80\n              - 443\n            cidr_ip: 0.0.0.0/0\n            rule_desc: \u0026quot;HTTP and HTTPS access\u0026quot;\n          - proto: tcp\n            ports:\n              - 22\n            group_id: \u0026quot;{{ environment }}-bastion-sg\u0026quot;\n            rule_desc: \u0026quot;SSH from bastion\u0026quot;\n        tags:\n          Environment: \u0026quot;{{ environment }}\u0026quot;\n\n    # Launch EC2 instances\n    - name: Launch web servers\n      amazon.aws.ec2_instance:\n        name: \u0026quot;{{ environment }}-web-{{ item }}\u0026quot;\n        instance_type: t3.medium\n        image_id: ami-0c02fb55956c7d316  # Amazon Linux 2\n        key_name: \u0026quot;{{ ec2_key_name }}\u0026quot;\n        vpc_subnet_id: \u0026quot;{{ web_subnet_id }}\u0026quot;\n        security_groups:\n          - \u0026quot;{{ environment }}-web-sg\u0026quot;\n        region: \u0026quot;{{ aws_region }}\u0026quot;\n        state: running\n        wait: yes\n        wait_timeout: 300\n        user_data: |\n          #!/bin/bash\n          yum update -y\n          yum install -y python3\n        tags:\n          Environment: \u0026quot;{{ environment }}\u0026quot;\n          Role: webserver\n          Ansible: managed\n      loop: \u0026quot;{{ range(1, web_server_count + 1) | list }}\u0026quot;\n      register: web_instances\n\n    # Add instances to inventory\n    - name: Add web servers to inventory\n      add_host:\n        name: \u0026quot;{{ item.instances[0].tags.Name }}\u0026quot;\n        hostname: \u0026quot;{{ item.instances[0].public_ip_address }}\u0026quot;\n        groups: webservers\n        ansible_ssh_private_key_file: \u0026quot;~/.ssh/{{ ec2_key_name }}.pem\u0026quot;\n        ansible_user: ec2-user\n      loop: \u0026quot;{{ web_instances.results }}\u0026quot;\n      changed_when: false\nEOF\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"kubernetes-cluster-management\" class=\"mobile-header\"\u003eKubernetes Cluster Management\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003ecat \u0026gt; playbooks/k8s-cluster-management.yml \u0026lt;\u0026lt;EOF\n---\n- name: Kubernetes Cluster Management with Ansible\n  hosts: k8s_masters\n  become: yes\n  serial: 1\n  vars:\n    k8s_version: \u0026quot;1.28.2\u0026quot;\n    containerd_version: \u0026quot;1.6.24\u0026quot;\n    cni_version: \u0026quot;1.3.0\u0026quot;\n\n  tasks:\n    # Pre-flight checks\n    - name: Check system requirements\n      assert:\n        that:\n          - ansible_memtotal_mb \u0026gt;= 1700\n          - ansible_processor_cores \u0026gt;= 2\n        fail_msg: \u0026quot;System doesn\u0026#039;t meet minimum requirements\u0026quot;\n\n    - name: Verify connectivity to all nodes\n      ping:\n      delegate_to: \u0026quot;{{ item }}\u0026quot;\n      loop: \u0026quot;{{ groups[\u0026#039;k8s_all\u0026#039;] }}\u0026quot;\n\n    # Container runtime setup\n    - name: Install containerd\n      include_role:\n        name: containerd\n      vars:\n        containerd_version: \u0026quot;{{ containerd_version }}\u0026quot;\n\n    # Kubernetes installation\n    - name: Install Kubernetes components\n      include_role:\n        name: kubernetes\n      vars:\n        kubernetes_version: \u0026quot;{{ k8s_version }}\u0026quot;\n\n    # Cluster initialization\n    - name: Initialize Kubernetes cluster\n      shell: |\n        kubeadm init \\\n          --pod-network-cidr=10.244.0.0/16 \\\n          --service-cidr=10.96.0.0/12 \\\n          --apiserver-advertise-address={{ ansible_default_ipv4.address }} \\\n          --node-name={{ inventory_hostname }}\n      args:\n        creates: /etc/kubernetes/admin.conf\n      register: kubeadm_init\n\n    - name: Create .kube directory\n      file:\n        path: \u0026quot;{{ ansible_env.HOME }}/.kube\u0026quot;\n        state: directory\n        mode: \u0026#039;0755\u0026#039;\n\n    - name: Copy admin.conf to user\u0026#039;s kube config\n      copy:\n        src: /etc/kubernetes/admin.conf\n        dest: \u0026quot;{{ ansible_env.HOME }}/.kube/config\u0026quot;\n        owner: \u0026quot;{{ ansible_user }}\u0026quot;\n        group: \u0026quot;{{ ansible_user }}\u0026quot;\n        mode: \u0026#039;0644\u0026#039;\n        remote_src: yes\n\n    # Network plugin installation\n    - name: Install Flannel CNI\n      shell: kubectl apply -f https://github.com/flannel-io/flannel/releases/latest/download/kube-flannel.yml\n      environment:\n        KUBECONFIG: \u0026quot;{{ ansible_env.HOME }}/.kube/config\u0026quot;\n\n    # Join worker nodes\n    - name: Get join command\n      shell: kubeadm token create --print-join-command\n      register: join_command\n      when: inventory_hostname in groups[\u0026#039;k8s_masters\u0026#039;][0]\n\n    - name: Join worker nodes to cluster\n      shell: \u0026quot;{{ hostvars[groups[\u0026#039;k8s_masters\u0026#039;][0]][\u0026#039;join_command\u0026#039;].stdout }}\u0026quot;\n      when: inventory_hostname in groups[\u0026#039;k8s_workers\u0026#039;]\n\n  post_tasks:\n    - name: Verify cluster status\n      shell: kubectl get nodes\n      environment:\n        KUBECONFIG: \u0026quot;{{ ansible_env.HOME }}/.kube/config\u0026quot;\n      register: cluster_status\n      when: inventory_hostname in groups[\u0026#039;k8s_masters\u0026#039;][0]\n\n    - name: Display cluster status\n      debug:\n        var: cluster_status.stdout_lines\n      when: inventory_hostname in groups[\u0026#039;k8s_masters\u0026#039;][0]\nEOF\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"performance-optimization-and-scaling\" class=\"mobile-header\"\u003ePerformance Optimization and Scaling\u003c/h2\u003e\n\u003ch3 id=\"parallel-execution-strategies\" class=\"mobile-header\"\u003eParallel Execution Strategies\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Create high-performance playbook configuration\ncat \u0026gt; playbooks/high-performance-deployment.yml \u0026lt;\u0026lt;EOF\n---\n- name: High-Performance Deployment\n  hosts: all\n  become: yes\n  strategy: free  # Parallel execution\n  serial: \u0026quot;30%\u0026quot;   # Process 30% of hosts at a time\n  max_fail_percentage: 10\n  gather_facts: yes\n  fact_caching: smart\n  vars:\n    deployment_batch_size: 10\n    max_concurrent_tasks: 50\n\n  pre_tasks:\n    - name: Check system load\n      shell: uptime | awk \u0026#039;{print $(NF-2)}\u0026#039; | sed \u0026#039;s/,//\u0026#039;\n      register: system_load\n      changed_when: false\n\n    - name: Skip high-load systems\n      meta: end_host\n      when: system_load.stdout | float \u0026gt; 5.0\n\n  tasks:\n    - name: Update packages with retries\n      package:\n        name: \u0026quot;*\u0026quot;\n        state: latest\n      retries: 3\n      delay: 30\n      async: 300\n      poll: 10\n\n    - name: Deploy configuration files in parallel\n      template:\n        src: \u0026quot;{{ item.src }}\u0026quot;\n        dest: \u0026quot;{{ item.dest }}\u0026quot;\n        mode: \u0026quot;{{ item.mode | default(\u0026#039;0644\u0026#039;) }}\u0026quot;\n        backup: yes\n      loop:\n        - { src: \u0026quot;nginx.conf.j2\u0026quot;, dest: \u0026quot;/etc/nginx/nginx.conf\u0026quot; }\n        - { src: \u0026quot;mysql.cnf.j2\u0026quot;, dest: \u0026quot;/etc/mysql/my.cnf\u0026quot; }\n        - { src: \u0026quot;redis.conf.j2\u0026quot;, dest: \u0026quot;/etc/redis/redis.conf\u0026quot; }\n      async: 120\n      poll: 5\n      register: config_deployment\n\n    - name: Wait for all configuration deployments\n      async_status:\n        jid: \u0026quot;{{ item.ansible_job_id }}\u0026quot;\n      loop: \u0026quot;{{ config_deployment.results }}\u0026quot;\n      when: item.ansible_job_id is defined\n\n  handlers:\n    - name: restart services\n      service:\n        name: \u0026quot;{{ item }}\u0026quot;\n        state: restarted\n      loop:\n        - nginx\n        - mysql\n        - redis\n      listen: \u0026quot;restart all services\u0026quot;\nEOF\n\n# Performance monitoring playbook\ncat \u0026gt; playbooks/performance-monitoring.yml \u0026lt;\u0026lt;EOF\n---\n- name: Performance Monitoring Setup\n  hosts: all\n  become: yes\n  vars:\n    monitoring_tools:\n      - htop\n      - iotop\n      - nethogs\n      - dstat\n      - sysstat\n      - perf\n\n  tasks:\n    - name: Install performance monitoring tools\n      package:\n        name: \u0026quot;{{ monitoring_tools }}\u0026quot;\n        state: present\n\n    - name: Configure system monitoring\n      template:\n        src: templates/sysstat.j2\n        dest: /etc/default/sysstat\n        backup: yes\n      when: ansible_os_family == \u0026quot;Debian\u0026quot;\n\n    - name: Enable system statistics collection\n      service:\n        name: \u0026quot;{{ \u0026#039;sysstat\u0026#039; if ansible_os_family == \u0026#039;Debian\u0026#039; else \u0026#039;sysstat\u0026#039; }}\u0026quot;\n        enabled: yes\n        state: started\n\n    - name: Create performance monitoring script\n      template:\n        src: templates/performance-monitor.sh.j2\n        dest: /usr/local/bin/performance-monitor.sh\n        mode: \u0026#039;0755\u0026#039;\n\n    - name: Schedule performance monitoring\n      cron:\n        name: \u0026quot;Performance monitoring\u0026quot;\n        minute: \u0026quot;*/5\u0026quot;\n        job: \u0026quot;/usr/local/bin/performance-monitor.sh\u0026quot;\n        user: root\nEOF\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"testing-and-validation\" class=\"mobile-header\"\u003eTesting and Validation\u003c/h2\u003e\n\u003ch3 id=\"molecule-testing-framework\" class=\"mobile-header\"\u003eMolecule Testing Framework\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Install Molecule for role testing\npip install molecule[docker] molecule[vagrant] molecule[libvirt]\n\n# Initialize Molecule in role directory\ncd roles/nginx\nmolecule init scenario --driver-name docker\n\n# Create molecule configuration\ncat \u0026gt; molecule/default/molecule.yml \u0026lt;\u0026lt;EOF\n---\ndependency:\n  name: galaxy\ndriver:\n  name: docker\nplatforms:\n  - name: nginx-ubuntu\n    image: ubuntu:22.04\n    pre_build_image: true\n    privileged: true\n    volumes:\n      - /sys/fs/cgroup:/sys/fs/cgroup:ro\n    command: /lib/systemd/systemd\n    networks:\n      - name: molecule\n  - name: nginx-centos\n    image: centos:8\n    pre_build_image: true\n    privileged: true\n    volumes:\n      - /sys/fs/cgroup:/sys/fs/cgroup:ro\n    command: /usr/sbin/init\n    networks:\n      - name: molecule\nprovisioner:\n  name: ansible\n  config_options:\n    defaults:\n      callbacks_enabled: profile_tasks,timer,yaml\n  inventory:\n    host_vars:\n      nginx-ubuntu:\n        ansible_python_interpreter: /usr/bin/python3\n      nginx-centos:\n        ansible_python_interpreter: /usr/bin/python3\nverifier:\n  name: ansible\nlint: |\n  set -e\n  yamllint .\n  ansible-lint\n  flake8\nEOF\n\n# Create test playbook\ncat \u0026gt; molecule/default/converge.yml \u0026lt;\u0026lt;EOF\n---\n- name: Converge\n  hosts: all\n  become: true\n  tasks:\n    - name: \u0026quot;Include nginx role\u0026quot;\n      include_role:\n        name: nginx\n      vars:\n        nginx_vhosts:\n          - name: default\n            server_name: localhost\n            listen: 80\n            root: /var/www/html\n            enabled: true\nEOF\n\n# Create test verification\ncat \u0026gt; molecule/default/verify.yml \u0026lt;\u0026lt;EOF\n---\n- name: Verify\n  hosts: all\n  gather_facts: false\n  tasks:\n    - name: Check if NGINX is running\n      uri:\n        url: http://localhost\n        method: GET\n      register: nginx_check\n\n    - name: Verify NGINX is responding\n      assert:\n        that:\n          - nginx_check.status == 200\n        fail_msg: \u0026quot;NGINX is not responding correctly\u0026quot;\n\n    - name: Check NGINX configuration\n      shell: nginx -t\n      changed_when: false\n\n    - name: Verify NGINX process\n      shell: pgrep nginx\n      changed_when: false\nEOF\n\n# Run tests\nmolecule test\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"ansible-lint-and-security-scanning\" class=\"mobile-header\"\u003eAnsible Lint and Security Scanning\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Install Ansible Lint\npip install ansible-lint\n\n# Create .ansible-lint configuration\ncat \u0026gt; .ansible-lint \u0026lt;\u0026lt;EOF\n---\nprofile: production\n\nexclude_paths:\n  - .cache/\n  - .github/\n  - molecule/\n  - .venv/\n\nskip_list:\n  - yaml[line-length]  # Allow longer lines for readability\n\nwarn_list:\n  - experimental  # Warn about experimental features\n\n# Custom rules\nrules:\n  braces:\n    min-spaces-inside: 0\n    max-spaces-inside: 1\n  brackets:\n    min-spaces-inside: 0\n    max-spaces-inside: 0\n  colons:\n    max-spaces-before: 0\n    min-spaces-after: 1\n    max-spaces-after: 1\n  commas:\n    max-spaces-before: 0\n    min-spaces-after: 1\n    max-spaces-after: 1\n  comments:\n    min-spaces-from-content: 1\n  document-start: disable\n  empty-lines:\n    max: 2\n    max-start: 0\n    max-end: 1\n  hyphens:\n    max-spaces-after: 1\n  indentation:\n    spaces: 2\n    indent-sequences: true\n  line-length:\n    max: 120\n  new-line-at-end-of-file: enable\n  trailing-spaces: enable\n  truthy:\n    allowed-values: [\u0026#039;true\u0026#039;, \u0026#039;false\u0026#039;, \u0026#039;yes\u0026#039;, \u0026#039;no\u0026#039;]\nEOF\n\n# Create security-focused playbook linting\ncat \u0026gt; .yamllint \u0026lt;\u0026lt;EOF\n---\nextends: default\n\nrules:\n  braces:\n    min-spaces-inside: 0\n    max-spaces-inside: 1\n  brackets:\n    min-spaces-inside: 0\n    max-spaces-inside: 0\n  colons:\n    max-spaces-before: 0\n    min-spaces-after: 1\n    max-spaces-after: 1\n  commas:\n    max-spaces-before: 0\n    min-spaces-after: 1\n    max-spaces-after: 1\n  comments: disable\n  comments-indentation: disable\n  document-start: disable\n  empty-lines:\n    max: 2\n    max-start: 0\n    max-end: 1\n  hyphens:\n    max-spaces-after: 1\n  indentation:\n    spaces: 2\n    indent-sequences: true\n    check-multi-line-strings: false\n  key-duplicates: enable\n  line-length:\n    max: 120\n  new-line-at-end-of-file: enable\n  octal-values:\n    forbid-implicit-octal: true\n  trailing-spaces: enable\n  truthy: disable\nEOF\n\n# Run linting\nansible-lint playbooks/\nyamllint .\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"backup-and-disaster-recovery\" class=\"mobile-header\"\u003eBackup and Disaster Recovery\u003c/h2\u003e\n\u003ch3 id=\"comprehensive-backup-automation\" class=\"mobile-header\"\u003eComprehensive Backup Automation\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003ecat \u0026gt; playbooks/backup-automation.yml \u0026lt;\u0026lt;EOF\n---\n- name: Automated Backup System\n  hosts: all\n  become: yes\n  vars:\n    backup_root: /backup\n    backup_retention_days: 30\n    backup_schedule:\n      databases: \u0026quot;0 2 * * *\u0026quot;\n      files: \u0026quot;0 3 * * *\u0026quot;\n      configs: \u0026quot;0 4 * * *\u0026quot;\n\n  tasks:\n    - name: Create backup directories\n      file:\n        path: \u0026quot;{{ backup_root }}/{{ item }}\u0026quot;\n        state: directory\n        mode: \u0026#039;0755\u0026#039;\n        owner: root\n        group: root\n      loop:\n        - databases\n        - files\n        - configs\n        - logs\n\n    # Database backups\n    - name: Create database backup script\n      template:\n        src: templates/mysql-backup.sh.j2\n        dest: /usr/local/bin/mysql-backup.sh\n        mode: \u0026#039;0755\u0026#039;\n      when: \u0026quot;\u0026#039;dbservers\u0026#039; in group_names\u0026quot;\n\n    - name: Schedule database backups\n      cron:\n        name: \u0026quot;MySQL backup\u0026quot;\n        minute: \u0026quot;0\u0026quot;\n        hour: \u0026quot;2\u0026quot;\n        job: \u0026quot;/usr/local/bin/mysql-backup.sh\u0026quot;\n        user: root\n      when: \u0026quot;\u0026#039;dbservers\u0026#039; in group_names\u0026quot;\n\n    # File system backups\n    - name: Create file backup script\n      template:\n        src: templates/file-backup.sh.j2\n        dest: /usr/local/bin/file-backup.sh\n        mode: \u0026#039;0755\u0026#039;\n\n    - name: Schedule file backups\n      cron:\n        name: \u0026quot;File system backup\u0026quot;\n        minute: \u0026quot;0\u0026quot;\n        hour: \u0026quot;3\u0026quot;\n        job: \u0026quot;/usr/local/bin/file-backup.sh\u0026quot;\n        user: root\n\n    # Configuration backups\n    - name: Backup system configurations\n      archive:\n        path:\n          - /etc/nginx\n          - /etc/mysql\n          - /etc/systemd/system\n          - /etc/crontab\n          - /etc/hosts\n          - /etc/fstab\n        dest: \u0026quot;{{ backup_root }}/configs/system-config-{{ ansible_date_time.epoch }}.tar.gz\u0026quot;\n        mode: \u0026#039;0600\u0026#039;\n\n    # Remote backup synchronization\n    - name: Synchronize backups to remote storage\n      synchronize:\n        src: \u0026quot;{{ backup_root }}/\u0026quot;\n        dest: \u0026quot;backup-server.example.com:{{ backup_root }}/{{ inventory_hostname }}/\u0026quot;\n        delete: yes\n        rsync_opts:\n          - \u0026quot;--exclude=*.tmp\u0026quot;\n          - \u0026quot;--compress\u0026quot;\n          - \u0026quot;--archive\u0026quot;\n      when: backup_remote_sync | default(true)\n\n    # Cleanup old backups\n    - name: Clean up old backup files\n      find:\n        paths: \u0026quot;{{ backup_root }}\u0026quot;\n        age: \u0026quot;{{ backup_retention_days }}d\u0026quot;\n        file_type: file\n      register: old_backups\n\n    - name: Remove old backup files\n      file:\n        path: \u0026quot;{{ item.path }}\u0026quot;\n        state: absent\n      loop: \u0026quot;{{ old_backups.files }}\u0026quot;\nEOF\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"verification-and-monitoring\" class=\"mobile-header\"\u003eVerification and Monitoring\u003c/h2\u003e\n\u003ch3 id=\"cross-platform-system-verification\" class=\"mobile-header\"\u003eCross-Platform System Verification\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Create comprehensive verification playbook\ncat \u0026gt; playbooks/system-verification.yml \u0026lt;\u0026lt;EOF\n---\n- name: System Verification and Health Check\n  hosts: all\n  become: yes\n  gather_facts: yes\n  vars:\n    health_checks:\n      - service: nginx\n        port: 80\n        process: nginx\n      - service: mysql\n        port: 3306\n        process: mysqld\n      - service: redis\n        port: 6379\n        process: redis-server\n\n  tasks:\n    # System information gathering\n    - name: Gather system information\n      setup:\n        gather_subset:\n          - all\n          - !facter\n          - !ohai\n\n    # Service verification\n    - name: Check critical services status\n      service_facts:\n\n    - name: Verify services are running\n      assert:\n        that:\n          - \u0026quot;ansible_facts.services[item.service + \u0026#039;.service\u0026#039;].state == \u0026#039;running\u0026#039;\u0026quot;\n        fail_msg: \u0026quot;Service {{ item.service }} is not running\u0026quot;\n        success_msg: \u0026quot;Service {{ item.service }} is healthy\u0026quot;\n      loop: \u0026quot;{{ health_checks }}\u0026quot;\n      when: \u0026quot;item.service + \u0026#039;.service\u0026#039; in ansible_facts.services\u0026quot;\n\n    # Network connectivity tests\n    - name: Test network connectivity\n      wait_for:\n        host: \u0026quot;{{ item.host }}\u0026quot;\n        port: \u0026quot;{{ item.port }}\u0026quot;\n        timeout: 5\n      loop:\n        - { host: \u0026quot;8.8.8.8\u0026quot;, port: 53 }\n        - { host: \u0026quot;1.1.1.1\u0026quot;, port: 53 }\n      ignore_errors: yes\n\n    # Disk space monitoring\n    - name: Check disk space usage\n      shell: df -h | awk \u0026#039;$5 \u0026gt; \u0026quot;85%\u0026quot; {print $0}\u0026#039;\n      register: disk_usage\n      changed_when: false\n      failed_when: disk_usage.stdout != \u0026quot;\u0026quot;\n\n    # Memory usage check\n    - name: Check memory usage\n      shell: free | grep Mem | awk \u0026#039;{printf \u0026quot;%.0f\u0026quot;, $3/$2 * 100.0}\u0026#039;\n      register: memory_usage\n      changed_when: false\n\n    - name: Alert on high memory usage\n      debug:\n        msg: \u0026quot;WARNING: Memory usage is {{ memory_usage.stdout }}%\u0026quot;\n      when: memory_usage.stdout | int \u0026gt; 85\n\n    # Security verification\n    - name: Check for failed login attempts\n      shell: grep \u0026quot;Failed password\u0026quot; /var/log/auth.log | tail -10\n      register: failed_logins\n      changed_when: false\n      ignore_errors: yes\n      when: ansible_os_family == \u0026quot;Debian\u0026quot;\n\n    - name: Check firewall status\n      shell: |\n        if command -v ufw \u0026gt;/dev/null 2\u0026gt;\u0026amp;1; then\n          ufw status\n        elif command -v firewall-cmd \u0026gt;/dev/null 2\u0026gt;\u0026amp;1; then\n          firewall-cmd --state\n        else\n          echo \u0026quot;No supported firewall found\u0026quot;\n        fi\n      register: firewall_status\n      changed_when: false\n\n  post_tasks:\n    - name: Generate system health report\n      template:\n        src: templates/health-report.j2\n        dest: \u0026quot;/tmp/health-report-{{ inventory_hostname }}-{{ ansible_date_time.epoch }}.txt\u0026quot;\n        mode: \u0026#039;0644\u0026#039;\n\n    - name: Fetch health reports\n      fetch:\n        src: \u0026quot;/tmp/health-report-{{ inventory_hostname }}-{{ ansible_date_time.epoch }}.txt\u0026quot;\n        dest: \u0026quot;./reports/\u0026quot;\n        flat: yes\nEOF\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"continuous-compliance-monitoring\" class=\"mobile-header\"\u003eContinuous Compliance Monitoring\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003ecat \u0026gt; playbooks/compliance-monitoring.yml \u0026lt;\u0026lt;EOF\n---\n- name: Continuous Compliance Monitoring\n  hosts: all\n  become: yes\n  vars:\n    compliance_standards:\n      - cis\n      - pci_dss\n      - soc2\n      - hipaa\n    \n    audit_log_paths:\n      - /var/log/auth.log\n      - /var/log/syslog\n      - /var/log/audit/audit.log\n\n  tasks:\n    # Install audit tools\n    - name: Install audit daemon\n      package:\n        name: \u0026quot;{{ \u0026#039;auditd\u0026#039; if ansible_os_family == \u0026#039;RedHat\u0026#039; else \u0026#039;auditd\u0026#039; }}\u0026quot;\n        state: present\n\n    - name: Configure audit rules\n      template:\n        src: templates/audit.rules.j2\n        dest: /etc/audit/rules.d/audit.rules\n        backup: yes\n      notify: restart auditd\n\n    # CIS compliance checks\n    - name: Run CIS benchmark checks\n      shell: |\n        if [ -f /opt/cis-cat/CIS-CAT.sh ]; then\n          /opt/cis-cat/CIS-CAT.sh -b /opt/cis-cat/benchmarks/\n        else\n          echo \u0026quot;CIS-CAT not installed, skipping\u0026quot;\n        fi\n      register: cis_results\n      ignore_errors: yes\n\n    # File integrity monitoring\n    - name: Install AIDE\n      package:\n        name: aide\n        state: present\n\n    - name: Initialize AIDE database\n      shell: |\n        aide --init\n        mv /var/lib/aide/aide.db.new /var/lib/aide/aide.db\n      args:\n        creates: /var/lib/aide/aide.db\n\n    - name: Schedule AIDE integrity checks\n      cron:\n        name: \u0026quot;AIDE integrity check\u0026quot;\n        minute: \u0026quot;0\u0026quot;\n        hour: \u0026quot;3\u0026quot;\n        job: \u0026quot;/usr/bin/aide --check | mail -s \u0026#039;AIDE Report\u0026#039; security@example.com\u0026quot;\n        user: root\n\n    # Log monitoring\n    - name: Install log monitoring tools\n      package:\n        name:\n          - logwatch\n          - rsyslog\n        state: present\n\n    - name: Configure centralized logging\n      template:\n        src: templates/rsyslog.conf.j2\n        dest: /etc/rsyslog.conf\n        backup: yes\n      notify: restart rsyslog\n\n  handlers:\n    - name: restart auditd\n      service:\n        name: auditd\n        state: restarted\n\n    - name: restart rsyslog\n      service:\n        name: rsyslog\n        state: restarted\nEOF\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"cicd-integration\" class=\"mobile-header\"\u003eCI/CD Integration\u003c/h2\u003e\n\u003ch3 id=\"jenkins-pipeline-integration\" class=\"mobile-header\"\u003eJenkins Pipeline Integration\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Create Jenkinsfile for Ansible automation\ncat \u0026gt; Jenkinsfile \u0026lt;\u0026lt;EOF\npipeline {\n    agent any\n    \n    environment {\n        ANSIBLE_CONFIG = \u0026#039;ansible.cfg\u0026#039;\n        ANSIBLE_HOST_KEY_CHECKING = \u0026#039;False\u0026#039;\n    }\n    \n    stages {\n        stage(\u0026#039;Lint\u0026#039;) {\n            steps {\n                sh \u0026#039;ansible-lint playbooks/\u0026#039;\n                sh \u0026#039;yamllint .\u0026#039;\n            }\n        }\n        \n        stage(\u0026#039;Syntax Check\u0026#039;) {\n            steps {\n                sh \u0026#039;ansible-playbook playbooks/site.yml --syntax-check\u0026#039;\n            }\n        }\n        \n        stage(\u0026#039;Dry Run\u0026#039;) {\n            steps {\n                sh \u0026#039;ansible-playbook playbooks/site.yml --check --diff\u0026#039;\n            }\n        }\n        \n        stage(\u0026#039;Deploy to Staging\u0026#039;) {\n            when {\n                branch \u0026#039;develop\u0026#039;\n            }\n            steps {\n                sh \u0026#039;ansible-playbook -i inventories/staging playbooks/site.yml\u0026#039;\n            }\n        }\n        \n        stage(\u0026#039;Deploy to Production\u0026#039;) {\n            when {\n                branch \u0026#039;main\u0026#039;\n            }\n            steps {\n                input \u0026#039;Deploy to Production?\u0026#039;\n                sh \u0026#039;ansible-playbook -i inventories/production playbooks/site.yml\u0026#039;\n            }\n        }\n        \n        stage(\u0026#039;Verify Deployment\u0026#039;) {\n            steps {\n                sh \u0026#039;ansible-playbook playbooks/system-verification.yml\u0026#039;\n            }\n        }\n    }\n    \n    post {\n        always {\n            archiveArtifacts artifacts: \u0026#039;logs/*.log\u0026#039;, allowEmptyArchive: true\n            publishHTML([\n                allowMissing: false,\n                alwaysLinkToLastBuild: true,\n                keepAll: true,\n                reportDir: \u0026#039;reports\u0026#039;,\n                reportFiles: \u0026#039;*.html\u0026#039;,\n                reportName: \u0026#039;Ansible Report\u0026#039;\n            ])\n        }\n        failure {\n            emailext (\n                subject: \u0026quot;Failed Pipeline: ${env.JOB_NAME} - ${env.BUILD_NUMBER}\u0026quot;,\n                body: \u0026quot;Something is wrong with ${env.BUILD_URL}\u0026quot;,\n                to: \u0026quot;${env.DEFAULT_RECIPIENTS}\u0026quot;\n            )\n        }\n    }\n}\nEOF\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"gitlab-ci-integration\" class=\"mobile-header\"\u003eGitLab CI Integration\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003ecat \u0026gt; .gitlab-ci.yml \u0026lt;\u0026lt;EOF\nstages:\n  - lint\n  - test\n  - deploy-staging\n  - deploy-production\n\nvariables:\n  ANSIBLE_CONFIG: ansible.cfg\n  ANSIBLE_HOST_KEY_CHECKING: \u0026quot;False\u0026quot;\n\nbefore_script:\n  - pip install ansible ansible-lint yamllint\n  - ansible-galaxy install -r requirements.yml\n\nlint:\n  stage: lint\n  script:\n    - ansible-lint playbooks/\n    - yamllint .\n  rules:\n    - if: \u0026#039;$CI_MERGE_REQUEST_IID\u0026#039;\n    - if: \u0026#039;$CI_COMMIT_BRANCH == $CI_DEFAULT_BRANCH\u0026#039;\n\nsyntax-check:\n  stage: test\n  script:\n    - ansible-playbook playbooks/site.yml --syntax-check\n    - ansible-playbook playbooks/site.yml --check --diff -i inventories/staging\n  rules:\n    - if: \u0026#039;$CI_MERGE_REQUEST_IID\u0026#039;\n    - if: \u0026#039;$CI_COMMIT_BRANCH == $CI_DEFAULT_BRANCH\u0026#039;\n\ndeploy-staging:\n  stage: deploy-staging\n  script:\n    - ansible-playbook -i inventories/staging playbooks/site.yml\n  rules:\n    - if: \u0026#039;$CI_COMMIT_BRANCH == \u0026quot;develop\u0026quot;\u0026#039;\n\ndeploy-production:\n  stage: deploy-production\n  script:\n    - ansible-playbook -i inventories/production playbooks/site.yml\n  rules:\n    - if: \u0026#039;$CI_COMMIT_BRANCH == $CI_DEFAULT_BRANCH\u0026#039;\n      when: manual\n  environment:\n    name: production\n    url: https://production.example.com\nEOF\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"troubleshooting-cross-platform\" class=\"mobile-header\"\u003eTroubleshooting (Cross-Platform)\u003c/h2\u003e\n\u003ch3 id=\"common-issues-and-solutions\" class=\"mobile-header\"\u003eCommon Issues and Solutions\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Debug connection issues\nansible all -m ping -vvv\n\n# Check SSH connectivity\nansible all -m setup --ask-pass --ask-become-pass\n\n# Verify inventory\nansible-inventory --list\nansible-inventory --graph\n\n# Test specific host\nansible target-host -m command -a \u0026quot;uptime\u0026quot;\n\n# Check syntax without execution\nansible-playbook playbooks/site.yml --syntax-check\n\n# Dry run with verbose output\nansible-playbook playbooks/site.yml --check --diff -vvv\n\n# Debug variable resolution\nansible-playbook playbooks/site.yml --extra-vars=\u0026quot;debug=true\u0026quot; --tags debug\n\n# Check facts\nansible all -m setup | grep ansible_os_family\n\n# Connection troubleshooting\nssh -vvv user@target-host\n\n# Permission issues\nansible all -m file -a \u0026quot;path=/tmp/test state=touch\u0026quot; --become\n\n# Vault issues\nansible-vault view group_vars/all/vault.yml\n\n# Performance debugging\nansible-playbook playbooks/site.yml --start-at-task=\u0026quot;specific task name\u0026quot;\nansible-playbook playbooks/site.yml --step\n\n# Module testing\nansible localhost -m debug -a \u0026quot;var=hostvars\u0026quot;\nansible localhost -m setup\n\n# Check for syntax errors in roles\nfind roles/ -name \u0026quot;*.yml\u0026quot; -exec ansible-playbook {} --syntax-check \\;\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"advanced-debugging\" class=\"mobile-header\"\u003eAdvanced Debugging\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Enable comprehensive logging\nexport ANSIBLE_DEBUG=1\nexport ANSIBLE_VERBOSITY=4\nansible-playbook playbooks/site.yml\n\n# Profile playbook execution\nansible-playbook playbooks/site.yml --extra-vars=\u0026quot;profile_tasks_sort_order=none\u0026quot;\n\n# Memory usage analysis\nansible-playbook playbooks/site.yml --extra-vars=\u0026quot;ansible_python_interpreter=/usr/bin/python3\u0026quot;\n\n# Network debugging\nansible all -m command -a \u0026quot;ss -tulpn\u0026quot;\nansible all -m command -a \u0026quot;netstat -rn\u0026quot;\n\n# Process debugging\nansible all -m command -a \u0026quot;ps aux --sort=-%mem | head -10\u0026quot;\n\n# Disk usage analysis\nansible all -m command -a \u0026quot;df -h\u0026quot;\nansible all -m command -a \u0026quot;du -sh /var/log/*\u0026quot;\n\n# Service debugging\nansible all -m systemd -a \u0026quot;name=nginx\u0026quot; --become\nansible all -m command -a \u0026quot;systemctl status nginx\u0026quot; --become\n\n# Variable debugging\nansible-playbook playbooks/site.yml --extra-vars=\u0026quot;debug_vars=true\u0026quot; --tags debug_vars\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"additional-resources\" class=\"mobile-header\"\u003eAdditional Resources\u003c/h2\u003e\n\u003cli class=\"mobile-list-item\"\u003e\u003ca href=\"https://docs.ansible.com/\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\"\u003eOfficial Documentation\u003c/a\u003e\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003e\u003ca href=\"https://galaxy.ansible.com/\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\"\u003eAnsible Galaxy\u003c/a\u003e\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003e\u003ca href=\"https://docs.ansible.com/ansible/latest/user_guide/playbooks_best_practices.html\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\"\u003eBest Practices Guide\u003c/a\u003e\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003e\u003ca href=\"https://docs.ansible.com/ansible/latest/user_guide/become.html#security-best-practices\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\"\u003eSecurity Best Practices\u003c/a\u003e\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003e\u003ca href=\"https://molecule.readthedocs.io/\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\"\u003eAnsible Molecule Testing\u003c/a\u003e\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003e\u003ca href=\"https://docs.ansible.com/ansible/latest/collections/index.html\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\"\u003eCommunity Collections\u003c/a\u003e\u003c/li\u003e\n\u003cp class=\"mobile-paragraph\"\u003e---\u003c/p\u003e\n\u003cp class=\"mobile-paragraph\"\u003e\u003cstrong\u003eNote:\u003c/strong\u003e This guide is part of the \u003ca href=\"https://howtomgr.github.io\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\"\u003eHowToMgr\u003c/a\u003e collection.\u003c/p\u003e","readTime":"31 min","wordCount":6191,"lastBuilt":"2025-09-15T18:14:38.832Z"}]},"__N_SSG":true},"page":"/[category]/[guide]","query":{"category":"infrastructure","guide":"terraform"},"buildId":"FWaJNz_CPEuOjXz3AhtJ8","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>