<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8" data-next-head=""/><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes" data-next-head=""/><meta name="theme-color" content="#bd93f9" data-next-head=""/><link rel="icon" href="/favicon.ico" data-next-head=""/><link rel="preconnect" href="https://fonts.googleapis.com" data-next-head=""/><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="true" data-next-head=""/><title class="jsx-6ca0ba86c5b4bb40" data-next-head="">HAProxy Installation Guide Installation Guide - HowToMgr</title><meta name="description" content="High-performance TCP/HTTP load balancer and reverse proxy for distributing traffic across multiple backend servers. Industry standard for load balancing with enterprise-grade security and reliability." class="jsx-6ca0ba86c5b4bb40" data-next-head=""/><meta name="keywords" content="installation guides, tutorials, linux, docker, kubernetes, mobile-first, responsive" class="jsx-6ca0ba86c5b4bb40" data-next-head=""/><meta property="og:title" content="HAProxy Installation Guide Installation Guide - HowToMgr" class="jsx-6ca0ba86c5b4bb40" data-next-head=""/><meta property="og:description" content="High-performance TCP/HTTP load balancer and reverse proxy for distributing traffic across multiple backend servers. Industry standard for load balancing with enterprise-grade security and reliability." class="jsx-6ca0ba86c5b4bb40" data-next-head=""/><meta property="og:type" content="website" class="jsx-6ca0ba86c5b4bb40" data-next-head=""/><meta property="og:url" content="https://howtomgr.github.io" class="jsx-6ca0ba86c5b4bb40" data-next-head=""/><meta property="og:image" content="https://howtomgr.github.io/social-preview.png" class="jsx-6ca0ba86c5b4bb40" data-next-head=""/><meta property="twitter:card" content="summary_large_image" class="jsx-6ca0ba86c5b4bb40" data-next-head=""/><meta property="twitter:title" content="HAProxy Installation Guide Installation Guide - HowToMgr" class="jsx-6ca0ba86c5b4bb40" data-next-head=""/><meta property="twitter:description" content="High-performance TCP/HTTP load balancer and reverse proxy for distributing traffic across multiple backend servers. Industry standard for load balancing with enterprise-grade security and reliability." class="jsx-6ca0ba86c5b4bb40" data-next-head=""/><link rel="dns-prefetch" href="//api.github.com"/><link rel="dns-prefetch" href="//github.com"/><link rel="preload" href="/favicon.ico" as="image"/><meta name="application-name" content="HowToMgr"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="default"/><meta name="apple-mobile-web-app-title" content="HowToMgr"/><meta name="format-detection" content="telephone=no"/><meta name="mobile-web-app-capable" content="yes"/><noscript><style>
            .requires-js { display: none !important; }
            .no-js-message { display: block !important; }
          </style></noscript><link rel="preload" href="/_next/static/css/8f63910774442189.css" as="style"/><link rel="stylesheet" href="/_next/static/css/8f63910774442189.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-42372ed130431b0a.js"></script><script src="/_next/static/chunks/webpack-8cac0b4b405cede1.js" defer=""></script><script src="/_next/static/chunks/framework-a6e0b7e30f98059a.js" defer=""></script><script src="/_next/static/chunks/main-453f16463ca269d8.js" defer=""></script><script src="/_next/static/chunks/pages/_app-2c7289aecf732a54.js" defer=""></script><script src="/_next/static/chunks/473-0e819be9d34ec59b.js" defer=""></script><script src="/_next/static/chunks/pages/%5Bcategory%5D/%5Bguide%5D-be5cb82ed6bf6435.js" defer=""></script><script src="/_next/static/EBKzFmLABjpv3oMkVU4D8/_buildManifest.js" defer=""></script><script src="/_next/static/EBKzFmLABjpv3oMkVU4D8/_ssgManifest.js" defer=""></script><style id="__jsx-64efd206b36bc2dd">.breadcrumb.jsx-64efd206b36bc2dd{display:flex;align-items:center;gap:var(--space-2);margin-bottom:var(--space-6);font-size:var(--font-sm);color:var(--text-secondary);overflow-x:auto;white-space:nowrap;-webkit-overflow-scrolling:touch}.breadcrumb.jsx-64efd206b36bc2dd a.jsx-64efd206b36bc2dd{color:var(--accent-primary);text-decoration:none;flex-shrink:0}.breadcrumb.jsx-64efd206b36bc2dd a.jsx-64efd206b36bc2dd:hover{text-decoration:underline}.separator.jsx-64efd206b36bc2dd{color:var(--text-muted);flex-shrink:0}.current.jsx-64efd206b36bc2dd{color:var(--text-primary);font-weight:500;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.guide-header.jsx-64efd206b36bc2dd{background:var(--bg-secondary);border-radius:var(--border-radius-lg);padding:var(--space-6);margin-bottom:var(--space-8);border:1px solid var(--bg-surface)}.guide-title.jsx-64efd206b36bc2dd{color:var(--accent-primary);font-size:var(--font-3xl);margin-bottom:var(--space-4);line-height:1.2;word-break:break-word}.guide-description.jsx-64efd206b36bc2dd{color:var(--text-secondary);font-size:var(--font-lg);margin-bottom:var(--space-5);line-height:1.5}.guide-badges.jsx-64efd206b36bc2dd{display:flex;gap:var(--space-3);margin-bottom:var(--space-5);flex-wrap:wrap}.guide-actions.jsx-64efd206b36bc2dd{display:flex;gap:var(--space-3);flex-wrap:wrap}.difficulty-beginner.jsx-64efd206b36bc2dd{background:var(--accent-secondary);color:var(--bg-primary)}.difficulty-intermediate.jsx-64efd206b36bc2dd{background:var(--accent-warning);color:var(--bg-primary)}.difficulty-advanced.jsx-64efd206b36bc2dd{background:var(--accent-error);color:var(--bg-primary)}.guide-content.jsx-64efd206b36bc2dd{background:var(--bg-secondary);border-radius:var(--border-radius-lg);padding:var(--space-6);margin-bottom:var(--space-8);border:1px solid var(--bg-surface);overflow-x:hidden}.related-section.jsx-64efd206b36bc2dd{margin-bottom:var(--space-8)}.section-title.jsx-64efd206b36bc2dd{color:var(--accent-primary);font-size:var(--font-2xl);text-align:center;margin-bottom:var(--space-6)}.guide-navigation.jsx-64efd206b36bc2dd{display:flex;gap:var(--space-4);justify-content:center;flex-wrap:wrap;margin-bottom:var(--space-8)}.loading-container.jsx-64efd206b36bc2dd,.error-container.jsx-64efd206b36bc2dd{text-align:center;padding:var(--space-8)}.error-actions.jsx-64efd206b36bc2dd{display:flex;gap:var(--space-4);justify-content:center;margin-top:var(--space-6);flex-wrap:wrap}.toc-level-1.jsx-64efd206b36bc2dd{font-weight:600}.toc-level-2.jsx-64efd206b36bc2dd{margin-left:var(--space-4)}.toc-level-3.jsx-64efd206b36bc2dd{margin-left:var(--space-8);font-size:var(--font-xs)}@media(max-width:767px){.guide-header.jsx-64efd206b36bc2dd{padding:var(--space-4);margin-bottom:var(--space-6)}.guide-title.jsx-64efd206b36bc2dd{font-size:var(--font-2xl)}.guide-description.jsx-64efd206b36bc2dd{font-size:var(--font-base)}.guide-content.jsx-64efd206b36bc2dd{padding:var(--space-4);margin-bottom:var(--space-6)}.guide-badges.jsx-64efd206b36bc2dd{gap:var(--space-2)}.guide-actions.jsx-64efd206b36bc2dd{flex-direction:column}.guide-navigation.jsx-64efd206b36bc2dd{flex-direction:column}.breadcrumb.jsx-64efd206b36bc2dd{margin-bottom:var(--space-4)}}</style><style id="__jsx-6ca0ba86c5b4bb40">.app-container.jsx-6ca0ba86c5b4bb40{min-height:100vh;display:flex;flex-direction:column;padding-top:56px}.main-content.jsx-6ca0ba86c5b4bb40{flex:1;padding:var(--space-6)0}.mobile-footer.jsx-6ca0ba86c5b4bb40{background:var(--bg-secondary);border-top:1px solid var(--bg-surface);padding:var(--space-6)0;margin-top:auto}.footer-content.jsx-6ca0ba86c5b4bb40{text-align:center}.footer-links.jsx-6ca0ba86c5b4bb40{display:flex;justify-content:center;gap:var(--space-6);margin-bottom:var(--space-4);flex-wrap:wrap}.footer-links.jsx-6ca0ba86c5b4bb40 a.jsx-6ca0ba86c5b4bb40{color:var(--accent-primary);text-decoration:none;font-size:var(--font-sm)}.footer-links.jsx-6ca0ba86c5b4bb40 a.jsx-6ca0ba86c5b4bb40:hover{color:var(--accent-secondary)}.footer-separator.jsx-6ca0ba86c5b4bb40{height:1px;background:var(--bg-surface);margin:var(--space-4)auto;width:200px}.footer-text.jsx-6ca0ba86c5b4bb40,.footer-tech.jsx-6ca0ba86c5b4bb40{color:var(--text-secondary);font-size:var(--font-sm);margin-bottom:var(--space-2)}.footer-disclaimer.jsx-6ca0ba86c5b4bb40{color:var(--text-muted);font-size:var(--font-xs)}.footer-updated.jsx-6ca0ba86c5b4bb40{color:var(--text-muted);font-size:var(--font-xs);margin-top:var(--space-2)}.nav-links.jsx-6ca0ba86c5b4bb40{display:flex;gap:var(--space-4)}.nav-link.jsx-6ca0ba86c5b4bb40{color:var(--text-primary);text-decoration:none;padding:var(--space-2)var(--space-3);border-radius:var(--border-radius);font-size:var(--font-sm);font-weight:500;transition:var(--transition);min-height:36px;display:flex;align-items:center}.nav-link.jsx-6ca0ba86c5b4bb40:hover{background:var(--bg-surface);color:var(--accent-primary);text-decoration:none}[data-theme="light"].jsx-6ca0ba86c5b4bb40 .theme-icon-dark.jsx-6ca0ba86c5b4bb40{display:none}[data-theme="light"].jsx-6ca0ba86c5b4bb40 .theme-icon-light.jsx-6ca0ba86c5b4bb40{display:inline!important}@media(max-width:767px){.main-content.jsx-6ca0ba86c5b4bb40{padding:var(--space-4)0}.footer-links.jsx-6ca0ba86c5b4bb40{gap:var(--space-4)}}</style></head><body><noscript><div class="no-js-message" style="padding:1rem;background:#ff5555;color:#f8f8f2;text-align:center;font-size:0.9rem">This site requires JavaScript to function properly. Please enable JavaScript in your browser.</div></noscript><div id="__next"><div class="jsx-6ca0ba86c5b4bb40 app-container"><a href="#main-content" class="jsx-6ca0ba86c5b4bb40 skip-link">Skip to main content</a><nav class="jsx-6ca0ba86c5b4bb40 mobile-nav"><div class="jsx-6ca0ba86c5b4bb40 mobile-nav-content"><a class="mobile-brand" href="/"><span role="img" aria-label="Books" class="jsx-6ca0ba86c5b4bb40">📚</span>HowToMgr</a><div class="jsx-6ca0ba86c5b4bb40 nav-links"><a class="nav-link" href="/all/">All</a><a class="nav-link" href="/search/">Search</a></div><button aria-label="Toggle theme" title="Switch theme" class="jsx-6ca0ba86c5b4bb40 mobile-theme-toggle touch-target"><span class="jsx-6ca0ba86c5b4bb40 theme-icon-dark">🌙</span><span style="display:none" class="jsx-6ca0ba86c5b4bb40 theme-icon-light">☀️</span></button></div></nav><main id="main-content" tabindex="-1" class="jsx-6ca0ba86c5b4bb40 main-content"><div class="jsx-6ca0ba86c5b4bb40 container"><nav aria-label="Breadcrumb" class="jsx-64efd206b36bc2dd breadcrumb"><a href="/">Home</a><span class="jsx-64efd206b36bc2dd separator">→</span><a href="/load-balancers/">Load balancers</a><span class="jsx-64efd206b36bc2dd separator">→</span><span class="jsx-64efd206b36bc2dd current">HAProxy Installation Guide</span></nav><header class="jsx-64efd206b36bc2dd guide-header"><div class="jsx-64efd206b36bc2dd guide-meta-top"><h1 class="jsx-64efd206b36bc2dd guide-title">HAProxy Installation Guide</h1><p class="jsx-64efd206b36bc2dd guide-description">High-performance TCP/HTTP load balancer and reverse proxy for distributing traffic across multiple backend servers. Industry standard for load balancing with enterprise-grade security and reliability.</p><div class="jsx-64efd206b36bc2dd guide-badges"><span class="jsx-64efd206b36bc2dd mobile-badge mobile-badge-primary">Load balancers</span><span class="jsx-64efd206b36bc2dd mobile-badge difficulty-intermediate">🟡<!-- --> <!-- -->intermediate</span><span class="jsx-64efd206b36bc2dd mobile-badge mobile-badge-info">30 min</span><span class="jsx-64efd206b36bc2dd mobile-badge mobile-badge-secondary">⏱️ <!-- -->15-30 minutes</span></div><div class="jsx-64efd206b36bc2dd guide-actions"><a href="https://github.com/howtomgr/haproxy" target="_blank" rel="noopener" class="jsx-64efd206b36bc2dd btn btn-secondary">View on GitHub</a></div></div></header><article class="jsx-64efd206b36bc2dd guide-content"><nav class="jsx-64efd206b36bc2dd toc"><h4 class="jsx-64efd206b36bc2dd">Table of Contents</h4><ul class="jsx-64efd206b36bc2dd"><li class="jsx-64efd206b36bc2dd toc-level-2"><a href="#1-prerequisites" class="jsx-64efd206b36bc2dd">1. Prerequisites</a></li><li class="jsx-64efd206b36bc2dd toc-level-2"><a href="#2-supported-operating-systems" class="jsx-64efd206b36bc2dd">2. Supported Operating Systems</a></li><li class="jsx-64efd206b36bc2dd toc-level-2"><a href="#3-installation" class="jsx-64efd206b36bc2dd">3. Installation</a></li><li class="jsx-64efd206b36bc2dd toc-level-3"><a href="#using-package-manager-recommended" class="jsx-64efd206b36bc2dd">Using Package Manager (Recommended)</a></li><li class="jsx-64efd206b36bc2dd toc-level-3"><a href="#from-source-latest-features" class="jsx-64efd206b36bc2dd">From Source (Latest Features)</a></li><li class="jsx-64efd206b36bc2dd toc-level-3"><a href="#using-docker" class="jsx-64efd206b36bc2dd">Using Docker</a></li><li class="jsx-64efd206b36bc2dd toc-level-2"><a href="#production-configuration" class="jsx-64efd206b36bc2dd">Production Configuration</a></li><li class="jsx-64efd206b36bc2dd toc-level-3"><a href="#enterprise-production-configuration" class="jsx-64efd206b36bc2dd">Enterprise Production Configuration</a></li><li class="jsx-64efd206b36bc2dd toc-level-2"><a href="#ssltls-configuration-and-security" class="jsx-64efd206b36bc2dd">SSL/TLS Configuration and Security</a></li><li class="jsx-64efd206b36bc2dd toc-level-3"><a href="#advanced-ssl-termination" class="jsx-64efd206b36bc2dd">Advanced SSL Termination</a></li><li class="jsx-64efd206b36bc2dd toc-level-3"><a href="#security-hardening-configuration" class="jsx-64efd206b36bc2dd">Security Hardening Configuration</a></li><li class="jsx-64efd206b36bc2dd toc-level-2"><a href="#advanced-load-balancing-strategies" class="jsx-64efd206b36bc2dd">Advanced Load Balancing Strategies</a></li><li class="jsx-64efd206b36bc2dd toc-level-3"><a href="#multi-tier-application-load-balancing" class="jsx-64efd206b36bc2dd">Multi-Tier Application Load Balancing</a></li><li class="jsx-64efd206b36bc2dd toc-level-3"><a href="#global-load-balancing-with-dns" class="jsx-64efd206b36bc2dd">Global Load Balancing with DNS</a></li><li class="jsx-64efd206b36bc2dd toc-level-2"><a href="#high-availability-and-clustering" class="jsx-64efd206b36bc2dd">High Availability and Clustering</a></li><li class="jsx-64efd206b36bc2dd toc-level-3"><a href="#haproxy-keepalived-setup" class="jsx-64efd206b36bc2dd">HAProxy Keepalived Setup</a></li><li class="jsx-64efd206b36bc2dd toc-level-3"><a href="#multi-site-load-balancing" class="jsx-64efd206b36bc2dd">Multi-Site Load Balancing</a></li><li class="jsx-64efd206b36bc2dd toc-level-2"><a href="#monitoring-and-observability" class="jsx-64efd206b36bc2dd">Monitoring and Observability</a></li><li class="jsx-64efd206b36bc2dd toc-level-3"><a href="#prometheus-integration" class="jsx-64efd206b36bc2dd">Prometheus Integration</a></li><li class="jsx-64efd206b36bc2dd toc-level-3"><a href="#comprehensive-logging" class="jsx-64efd206b36bc2dd">Comprehensive Logging</a></li><li class="jsx-64efd206b36bc2dd toc-level-2"><a href="#performance-optimization" class="jsx-64efd206b36bc2dd">Performance Optimization</a></li><li class="jsx-64efd206b36bc2dd toc-level-3"><a href="#system-level-tuning" class="jsx-64efd206b36bc2dd">System-Level Tuning</a></li><li class="jsx-64efd206b36bc2dd toc-level-3"><a href="#advanced-performance-configuration" class="jsx-64efd206b36bc2dd">Advanced Performance Configuration</a></li><li class="jsx-64efd206b36bc2dd toc-level-2"><a href="#backup-and-disaster-recovery" class="jsx-64efd206b36bc2dd">Backup and Disaster Recovery</a></li><li class="jsx-64efd206b36bc2dd toc-level-3"><a href="#4-configuration-management-and-backup" class="jsx-64efd206b36bc2dd">4. Configuration Management and Backup</a></li><li class="jsx-64efd206b36bc2dd toc-level-3"><a href="#disaster-recovery-automation" class="jsx-64efd206b36bc2dd">Disaster Recovery Automation</a></li><li class="jsx-64efd206b36bc2dd toc-level-2"><a href="#verification-and-health-checks" class="jsx-64efd206b36bc2dd">Verification and Health Checks</a></li><li class="jsx-64efd206b36bc2dd toc-level-3"><a href="#comprehensive-health-monitoring" class="jsx-64efd206b36bc2dd">Comprehensive Health Monitoring</a></li><li class="jsx-64efd206b36bc2dd toc-level-3"><a href="#load-testing-and-performance-validation" class="jsx-64efd206b36bc2dd">Load Testing and Performance Validation</a></li><li class="jsx-64efd206b36bc2dd toc-level-2"><a href="#firewall-configuration-cross-platform" class="jsx-64efd206b36bc2dd">Firewall Configuration (Cross-Platform)</a></li><li class="jsx-64efd206b36bc2dd toc-level-3"><a href="#security-rules" class="jsx-64efd206b36bc2dd">Security Rules</a></li><li class="jsx-64efd206b36bc2dd toc-level-3"><a href="#ddos-protection-configuration" class="jsx-64efd206b36bc2dd">DDoS Protection Configuration</a></li><li class="jsx-64efd206b36bc2dd toc-level-2"><a href="#runtime-management-and-monitoring" class="jsx-64efd206b36bc2dd">Runtime Management and Monitoring</a></li><li class="jsx-64efd206b36bc2dd toc-level-3"><a href="#advanced-runtime-commands" class="jsx-64efd206b36bc2dd">Advanced Runtime Commands</a></li><li class="jsx-64efd206b36bc2dd toc-level-3"><a href="#automated-log-analysis" class="jsx-64efd206b36bc2dd">Automated Log Analysis</a></li><li class="jsx-64efd206b36bc2dd toc-level-2"><a href="#6-troubleshooting-cross-platform" class="jsx-64efd206b36bc2dd">6. Troubleshooting (Cross-Platform)</a></li><li class="jsx-64efd206b36bc2dd toc-level-3"><a href="#common-issues-and-solutions" class="jsx-64efd206b36bc2dd">Common Issues and Solutions</a></li><li class="jsx-64efd206b36bc2dd toc-level-3"><a href="#advanced-debugging" class="jsx-64efd206b36bc2dd">Advanced Debugging</a></li><li class="jsx-64efd206b36bc2dd toc-level-2"><a href="#additional-resources" class="jsx-64efd206b36bc2dd">Additional Resources</a></li></ul></nav><div class="jsx-64efd206b36bc2dd readme-content"><p class="mobile-paragraph">High-performance TCP/HTTP load balancer and reverse proxy for distributing traffic across multiple backend servers. Industry standard for load balancing with enterprise-grade security and reliability.</p>
<h2 id="1-prerequisites" class="mobile-header">1. Prerequisites</h2>
<li class="mobile-list-item">Linux system (any modern distribution)</li>
<li class="mobile-list-item">Root or sudo access</li>
<li class="mobile-list-item">2GB RAM minimum, 4GB+ recommended for high-traffic environments</li>
<li class="mobile-list-item">Multiple backend servers to load balance (optional for testing)</li>
<li class="mobile-list-item">SSL certificates for production HTTPS termination</li>
<h2 id="2-supported-operating-systems" class="mobile-header">2. Supported Operating Systems</h2>
<p class="mobile-paragraph">This guide supports installation on:</p>
<li class="mobile-list-item">RHEL 8/9 and derivatives (CentOS Stream, Rocky Linux, AlmaLinux)</li>
<li class="mobile-list-item">Debian 11/12</li>
<li class="mobile-list-item">Ubuntu 20.04/22.04/24.04 LTS</li>
<li class="mobile-list-item">Arch Linux (rolling release)</li>
<li class="mobile-list-item">Alpine Linux 3.18+</li>
<li class="mobile-list-item">openSUSE Leap 15.5+ / Tumbleweed</li>
<li class="mobile-list-item">SUSE Linux Enterprise Server (SLES) 15+</li>
<li class="mobile-list-item">macOS 12+ (Monterey and later) </li>
<li class="mobile-list-item">FreeBSD 13+</li>
<li class="mobile-list-item">Windows 10/11/Server 2019+ (where applicable)</li>
<h2 id="3-installation" class="mobile-header">3. Installation</h2>
<h3 id="using-package-manager-recommended" class="mobile-header">Using Package Manager (Recommended)</h3>
<p class="mobile-paragraph">#### Ubuntu/Debian</p>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash"># Update package list
sudo apt-get update

# Install HAProxy and utilities
sudo apt-get install -y haproxy haproxy-doc software-properties-common

# For latest version from PPA
sudo add-apt-repository ppa:vbernat/haproxy-2.8
sudo apt-get update
sudo apt-get install -y haproxy=2.8.*

# Enable and start HAProxy
sudo systemctl enable --now haproxy

# Check status
sudo systemctl status haproxy</code></pre>
      </div>
    </div>
<p class="mobile-paragraph">#### RHEL/CentOS/Rocky Linux/AlmaLinux</p>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash"># Install EPEL repository
sudo yum install -y epel-release

# Install HAProxy
sudo yum install -y haproxy

# For newer versions
sudo dnf install -y haproxy

# Enable and start HAProxy
sudo systemctl enable --now haproxy

# Check status
sudo systemctl status haproxy</code></pre>
      </div>
    </div>
<p class="mobile-paragraph">#### Fedora</p>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash"># Install HAProxy
sudo dnf install -y haproxy

# Enable and start HAProxy
sudo systemctl enable --now haproxy

# Configure firewall
sudo firewall-cmd --permanent --add-service=http
sudo firewall-cmd --permanent --add-service=https
sudo firewall-cmd --permanent --add-port=8404/tcp  # Stats interface
sudo firewall-cmd --reload</code></pre>
      </div>
    </div>
<p class="mobile-paragraph">#### Arch Linux</p>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash"># Install HAProxy
sudo pacman -Syu haproxy

# Enable and start HAProxy
sudo systemctl enable --now haproxy

# Check status
sudo systemctl status haproxy</code></pre>
      </div>
    </div>
<p class="mobile-paragraph">#### Alpine Linux</p>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash"># Install HAProxy
sudo apk update
sudo apk add haproxy

# Enable and start HAProxy
sudo rc-update add haproxy default
sudo service haproxy start</code></pre>
      </div>
    </div>
<h3 id="from-source-latest-features" class="mobile-header">From Source (Latest Features)</h3>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash"># Install build dependencies
# Ubuntu/Debian
sudo apt-get install -y build-essential libssl-dev libpcre3-dev zlib1g-dev liblua5.3-dev libsystemd-dev

# RHEL/CentOS
sudo yum groupinstall -y &quot;Development Tools&quot;
sudo yum install -y openssl-devel pcre-devel zlib-devel lua-devel systemd-devel

# Download latest HAProxy LTS
HAPROXY_VERSION=&quot;3.0.5&quot;
cd /tmp
wget &quot;https://www.haproxy.org/download/3.0/src/haproxy-${HAPROXY_VERSION}.tar.gz&quot;
tar xzf haproxy-${HAPROXY_VERSION}.tar.gz
cd haproxy-${HAPROXY_VERSION}

# Compile with full features
make clean
make -j$(nproc) TARGET=linux-glibc \
    USE_OPENSSL=1 \
    USE_ZLIB=1 \
    USE_PCRE=1 \
    USE_SYSTEMD=1 \
    USE_LUA=1 \
    USE_PROMEX=1 \
    USE_THREAD=1 \
    USE_CPU_AFFINITY=1 \
    USE_TFO=1 \
    USE_NS=1 \
    USE_DL=1 \
    USE_RT=1

# Install HAProxy
sudo make install
sudo mkdir -p /etc/haproxy /var/lib/haproxy /var/log/haproxy
sudo useradd --system --home /var/lib/haproxy --shell /bin/false haproxy
sudo chown -R haproxy:haproxy /var/lib/haproxy /var/log/haproxy

# Create systemd service
sudo tee /etc/systemd/system/haproxy.service &gt; /dev/null &lt;&lt;EOF
[Unit]
Description=HAProxy Load Balancer
Documentation=man:haproxy(1)
Documentation=file:/usr/share/doc/haproxy/configuration.txt
After=network.target

[Service]
Type=notify
ExecStart=/usr/local/sbin/haproxy -f /etc/haproxy/haproxy.cfg -p /run/haproxy.pid -S /run/haproxy-master.sock
ExecReload=/bin/kill -USR2 \$MAINPID
ExecStop=/bin/kill -USR1 \$MAINPID
KillMode=mixed
Restart=on-failure
SuccessExitStatus=143
KillSignal=SIGTERM

# Security settings
NoNewPrivileges=true
PrivateTmp=true
ProtectHome=true
ProtectSystem=strict
ReadWritePaths=/var/lib/haproxy
ReadWritePaths=/var/log/haproxy
ReadWritePaths=/run

[Install]
WantedBy=multi-user.target
EOF

sudo systemctl daemon-reload
sudo systemctl enable --now haproxy</code></pre>
      </div>
    </div>
<h3 id="using-docker" class="mobile-header">Using Docker</h3>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash"># Create HAProxy configuration directory
mkdir -p ~/haproxy/{config,ssl,logs}

# Create basic configuration
cat &gt; ~/haproxy/config/haproxy.cfg &lt;&lt;EOF
global
    log stdout local0
    chroot /var/lib/haproxy
    stats socket /run/haproxy/admin.sock mode 660 level admin expose-fd listeners
    stats timeout 30s
    user haproxy
    group haproxy
    daemon
    
    # SSL configuration
    ssl-default-bind-ciphers ECDHE+AESGCM:ECDHE+CHACHA20:DHE+AESGCM:DHE+CHACHA20:!aNULL:!MD5:!DSS
    ssl-default-bind-options ssl-min-ver TLSv1.2 no-tls-tickets
    ssl-default-server-ciphers ECDHE+AESGCM:ECDHE+CHACHA20:DHE+AESGCM:DHE+CHACHA20:!aNULL:!MD5:!DSS
    ssl-default-server-options ssl-min-ver TLSv1.2 no-tls-tickets

defaults
    mode http
    log global
    option httplog
    option dontlognull
    option log-health-checks
    option forwardfor
    option http-server-close
    timeout connect 5000
    timeout client 50000
    timeout server 50000
    timeout http-keep-alive 4000
    timeout check 3000

# Frontend
frontend web_frontend
    bind *:80
    bind *:443 ssl crt /usr/local/etc/haproxy/ssl/ alpn h2,http/1.1
    
    # Redirect HTTP to HTTPS
    redirect scheme https code 301 if !{ ssl_fc }
    
    # Security headers
    http-response set-header Strict-Transport-Security &quot;max-age=31536000; includeSubDomains; preload&quot;
    http-response set-header X-Frame-Options &quot;SAMEORIGIN&quot;
    http-response set-header X-Content-Type-Options &quot;nosniff&quot;
    http-response set-header X-XSS-Protection &quot;1; mode=block&quot;
    
    default_backend web_servers

# Backend
backend web_servers
    balance roundrobin
    option httpchk GET /health
    http-check expect status 200
    server web1 192.168.1.10:8080 check
    server web2 192.168.1.11:8080 check
    server web3 192.168.1.12:8080 check

# Stats interface
listen stats
    bind *:8404
    stats enable
    stats uri /stats
    stats refresh 30s
    stats admin if TRUE
EOF

# Run HAProxy container
docker run -d \
  --name haproxy \
  --restart unless-stopped \
  -p 80:80 \
  -p 443:443 \
  -p 8404:8404 \
  -v ~/haproxy/config:/usr/local/etc/haproxy:ro \
  -v ~/haproxy/ssl:/usr/local/etc/haproxy/ssl:ro \
  -v ~/haproxy/logs:/var/log/haproxy \
  haproxy:latest</code></pre>
      </div>
    </div>
<h2 id="production-configuration" class="mobile-header">Production Configuration</h2>
<h3 id="enterprise-production-configuration" class="mobile-header">Enterprise Production Configuration</h3>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash"># Backup original configuration
sudo cp /etc/haproxy/haproxy.cfg /etc/haproxy/haproxy.cfg.backup

# Create comprehensive production configuration
sudo tee /etc/haproxy/haproxy.cfg &gt; /dev/null &lt;&lt;EOF
#---------------------------------------------------------------------
# HAProxy Enterprise Production Configuration
# Version: 3.0+ LTS
#---------------------------------------------------------------------

global
    log 127.0.0.1:514 local0 info
    chroot /var/lib/haproxy
    stats socket /run/haproxy/admin.sock mode 660 level admin expose-fd listeners
    stats timeout 30s
    user haproxy
    group haproxy
    daemon

    # SSL/TLS configuration (2024 best practices)
    ssl-default-bind-ciphers ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-CHACHA20-POLY1305:ECDHE-RSA-CHACHA20-POLY1305:DHE-RSA-AES128-GCM-SHA256:DHE-RSA-AES256-GCM-SHA384
    ssl-default-bind-ciphersuites TLS_AES_128_GCM_SHA256:TLS_AES_256_GCM_SHA384:TLS_CHACHA20_POLY1305_SHA256
    ssl-default-bind-options ssl-min-ver TLSv1.2 no-tls-tickets prefer-client-ciphers
    
    ssl-default-server-ciphers ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384
    ssl-default-server-ciphersuites TLS_AES_128_GCM_SHA256:TLS_AES_256_GCM_SHA384:TLS_CHACHA20_POLY1305_SHA256
    ssl-default-server-options ssl-min-ver TLSv1.2 no-tls-tickets

    # DH parameters for perfect forward secrecy
    ssl-dh-param-file /etc/haproxy/ssl/dhparam.pem
    
    # Performance tuning
    maxconn 40000
    nbthread 4
    cpu-map auto:1/1-4 0-3
    
    # Logging
    log-tag haproxy-prod
    
    # Security
    insecure-fork-wanted
    insecure-setuid-wanted

defaults
    mode http
    log global
    option httplog
    option dontlognull
    option log-health-checks
    option forwardfor except 127.0.0.0/8
    option http-server-close
    option redispatch
    
    # Timeouts
    timeout connect 10s
    timeout client 1m
    timeout server 1m
    timeout http-keep-alive 10s
    timeout check 10s
    timeout tunnel 2h
    
    # Retries
    retries 3
    
    # Compression
    compression algo gzip
    compression type text/html text/css text/javascript application/javascript application/json application/xml
    
    # Default error pages
    errorfile 400 /etc/haproxy/errors/400.http
    errorfile 403 /etc/haproxy/errors/403.http
    errorfile 408 /etc/haproxy/errors/408.http
    errorfile 500 /etc/haproxy/errors/500.http
    errorfile 502 /etc/haproxy/errors/502.http
    errorfile 503 /etc/haproxy/errors/503.http
    errorfile 504 /etc/haproxy/errors/504.http

#---------------------------------------------------------------------
# Frontend Configuration
#---------------------------------------------------------------------

frontend web_frontend
    bind *:80
    bind *:443 ssl crt /etc/haproxy/ssl/ alpn h2,http/1.1 crt-ignore-err all
    
    # Security headers
    http-response set-header Strict-Transport-Security &quot;max-age=31536000; includeSubDomains; preload&quot;
    http-response set-header X-Frame-Options &quot;SAMEORIGIN&quot;
    http-response set-header X-Content-Type-Options &quot;nosniff&quot;
    http-response set-header X-XSS-Protection &quot;1; mode=block&quot;
    http-response set-header Referrer-Policy &quot;strict-origin-when-cross-origin&quot;
    http-response set-header Content-Security-Policy &quot;default-src &#039;self&#039;; script-src &#039;self&#039; &#039;unsafe-inline&#039;; style-src &#039;self&#039; &#039;unsafe-inline&#039;&quot;
    
    # Rate limiting
    stick-table type ip size 100k expire 30s store http_req_rate(10s)
    http-request track-sc0 src
    http-request deny if { sc_http_req_rate(0) gt 20 }
    
    # Block bad bots and crawlers
    acl is_bot hdr_sub(User-Agent) -i bot crawler spider scraper
    http-request deny if is_bot
    
    # ACLs for routing
    acl is_api path_beg /api/
    acl is_admin path_beg /admin/
    acl is_static path_beg /static/ /css/ /js/ /images/
    acl is_websocket hdr(Upgrade) -i websocket
    
    # Force HTTPS
    redirect scheme https code 301 if !{ ssl_fc }
    
    # Routing rules
    use_backend api_servers if is_api
    use_backend admin_servers if is_admin
    use_backend static_servers if is_static
    use_backend websocket_servers if is_websocket
    default_backend web_servers

#---------------------------------------------------------------------
# Backend Configurations
#---------------------------------------------------------------------

# Main web servers
backend web_servers
    balance leastconn
    option httpchk GET /health HTTP/1.1\r\nHost:\ example.com
    http-check expect status 200
    
    # Health check configuration
    default-server inter 2000 rise 2 fall 3 slowstart 60s maxconn 250 maxqueue 256 weight 100
    
    server web1 192.168.1.10:8080 check cookie web1
    server web2 192.168.1.11:8080 check cookie web2
    server web3 192.168.1.12:8080 check cookie web3
    server web4 192.168.1.13:8080 check cookie web4 backup
    
    # Stick table for session persistence
    stick-table type ip size 200k expire 30m
    stick on src

# API servers backend
backend api_servers
    balance roundrobin
    option httpchk GET /api/health HTTP/1.1\r\nHost:\ api.example.com
    http-check expect rstring ^OK$
    
    # Enable HTTP/2 to backend
    server api1 192.168.1.20:3000 check proto h2 verify none
    server api2 192.168.1.21:3000 check proto h2 verify none
    server api3 192.168.1.22:3000 check proto h2 verify none

# Admin backend (restricted access)
backend admin_servers
    balance source
    option httpchk GET /admin/health
    http-check expect status 200
    
    # IP whitelist for admin access
    http-request deny unless { src 192.168.1.0/24 10.0.0.0/8 }
    
    server admin1 192.168.1.30:9000 check

# Static content servers
backend static_servers
    balance roundrobin
    option httpchk GET /health.txt
    http-check expect string &quot;OK&quot;
    
    # Cache control
    http-response set-header Cache-Control &quot;public, max-age=86400&quot;
    
    server static1 192.168.1.40:8080 check
    server static2 192.168.1.41:8080 check

# WebSocket servers
backend websocket_servers
    balance leastconn
    option httpchk GET /ws/health
    http-check expect status 101
    
    # WebSocket specific settings
    timeout tunnel 3600s
    
    server ws1 192.168.1.50:8080 check
    server ws2 192.168.1.51:8080 check

#---------------------------------------------------------------------
# Database Load Balancing (TCP Mode)
#---------------------------------------------------------------------

# MySQL Master-Slave Load Balancing
frontend mysql_frontend
    bind *:3306
    mode tcp
    default_backend mysql_servers

backend mysql_servers
    mode tcp
    balance leastconn
    option mysql-check user haproxy_check
    
    # MySQL health checks
    server mysql-master 192.168.1.60:3306 check weight 1000
    server mysql-slave1 192.168.1.61:3306 check weight 100 backup
    server mysql-slave2 192.168.1.62:3306 check weight 100 backup

# PostgreSQL Load Balancing
frontend postgresql_frontend
    bind *:5432
    mode tcp
    default_backend postgresql_servers

backend postgresql_servers
    mode tcp
    balance roundrobin
    option pgsql-check user haproxy_check
    
    server postgres1 192.168.1.70:5432 check
    server postgres2 192.168.1.71:5432 check

# Redis Cluster Load Balancing
frontend redis_frontend
    bind *:6379
    mode tcp
    default_backend redis_servers

backend redis_servers
    mode tcp
    balance first
    option redis-check
    
    server redis1 192.168.1.80:6379 check
    server redis2 192.168.1.81:6379 check backup

#---------------------------------------------------------------------
# Statistics and Monitoring
#---------------------------------------------------------------------

listen stats
    bind *:8404
    stats enable
    stats uri /stats
    stats refresh 30s
    stats admin if { src 192.168.1.0/24 }
    stats auth admin:secure_stats_password
    
    # Enhanced statistics
    stats show-legends
    stats show-modules
    stats realm &quot;HAProxy Statistics&quot;
    
    # Prometheus metrics (if compiled with USE_PROMEX)
    http-request use-service prometheus-exporter if { path /metrics }

#---------------------------------------------------------------------
# Advanced Features
#---------------------------------------------------------------------

# Global rate limiting
backend rate_limit_backend
    stick-table type ip size 100k expire 30s store gpc0,http_req_rate(10s)

# DDoS protection
frontend ddos_protection
    bind *:80
    
    # Track client IPs
    stick-table type ip size 100k expire 30s store gpc0,http_req_rate(10s),http_err_rate(10s)
    http-request track-sc0 src table rate_limit_backend
    
    # Block clients exceeding rate limits
    http-request deny if { sc_http_req_rate(0) gt 50 }
    http-request deny if { sc_http_err_rate(0) gt 10 }
    
    default_backend web_servers

# Health check backend for external monitoring
backend health_check
    mode http
    http-request return status 200 content-type text/plain string &quot;HAProxy is healthy&quot;
EOF

# Test configuration
sudo haproxy -c -f ~/haproxy/config/haproxy.cfg</code></pre>
      </div>
    </div>
<h2 id="ssltls-configuration-and-security" class="mobile-header">SSL/TLS Configuration and Security</h2>
<h3 id="advanced-ssl-termination" class="mobile-header">Advanced SSL Termination</h3>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash"># Generate strong DH parameters
sudo openssl dhparam -out /etc/haproxy/ssl/dhparam.pem 4096

# Create SSL certificate bundle
sudo mkdir -p /etc/haproxy/ssl

# Self-signed certificate for testing
sudo openssl req -x509 -nodes -days 365 -newkey rsa:4096 \
  -keyout /etc/haproxy/ssl/example.com.key \
  -out /etc/haproxy/ssl/example.com.crt \
  -subj &quot;/C=US/ST=State/L=City/O=Organization/CN=example.com&quot;

# Combine certificate and key for HAProxy
sudo cat /etc/haproxy/ssl/example.com.crt /etc/haproxy/ssl/example.com.key | sudo tee /etc/haproxy/ssl/example.com.pem

# Production: Let&#039;s Encrypt certificates
sudo certbot certonly --standalone -d example.com -d www.example.com
sudo cat /etc/letsencrypt/live/example.com/fullchain.pem /etc/letsencrypt/live/example.com/privkey.pem | sudo tee /etc/haproxy/ssl/example.com.pem

# Set proper permissions
sudo chmod 600 /etc/haproxy/ssl/*.pem
sudo chown haproxy:haproxy /etc/haproxy/ssl/*.pem

# Create certificate renewal script
sudo tee /usr/local/bin/haproxy-ssl-renewal.sh &gt; /dev/null &lt;&lt;&#039;EOF&#039;
#!/bin/bash
CERT_PATH=&quot;/etc/letsencrypt/live&quot;
HAPROXY_CERT_DIR=&quot;/etc/haproxy/ssl&quot;

# Renew certificates
certbot renew --quiet --pre-hook &quot;systemctl stop haproxy&quot; --post-hook &quot;systemctl start haproxy&quot;

# Update HAProxy certificate bundles
for domain in $(ls ${CERT_PATH}/); do
    if [ -f &quot;${CERT_PATH}/${domain}/fullchain.pem&quot; ]; then
        cat &quot;${CERT_PATH}/${domain}/fullchain.pem&quot; &quot;${CERT_PATH}/${domain}/privkey.pem&quot; &gt; &quot;${HAPROXY_CERT_DIR}/${domain}.pem&quot;
        chmod 600 &quot;${HAPROXY_CERT_DIR}/${domain}.pem&quot;
        chown haproxy:haproxy &quot;${HAPROXY_CERT_DIR}/${domain}.pem&quot;
    fi
done

# Reload HAProxy configuration
systemctl reload haproxy

echo &quot;SSL certificates updated for HAProxy&quot;
EOF

sudo chmod +x /usr/local/bin/haproxy-ssl-renewal.sh

# Schedule certificate renewal
echo &quot;0 3 * * 1 root /usr/local/bin/haproxy-ssl-renewal.sh&quot; | sudo tee -a /etc/crontab</code></pre>
      </div>
    </div>
<h3 id="security-hardening-configuration" class="mobile-header">Security Hardening Configuration</h3>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash"># Create security-focused configuration additions
sudo tee /etc/haproxy/conf.d/security.cfg &gt; /dev/null &lt;&lt;EOF
#---------------------------------------------------------------------
# Security Configuration
#---------------------------------------------------------------------

global
    # Security settings
    tune.ssl.default-dh-param 2048
    tune.ssl.capture-buffer-size 0
    tune.ssl.maxrecord 1460
    
    # Disable SSLv3 and weak ciphers
    ssl-default-bind-options no-sslv3 no-tlsv10 no-tlsv11

defaults
    # Hide server information
    option hide-version
    
    # Security headers for all responses
    http-response del-header Server
    http-response del-header X-Powered-By
    
    # Request size limits
    http-request deny if { req.body_size gt 10000000 }  # 10MB limit
    
    # Block suspicious request methods
    acl blocked_methods method TRACE CONNECT
    http-request deny if blocked_methods
    
    # Block requests with suspicious headers
    acl suspicious_headers hdr_cnt(host) gt 1
    acl suspicious_headers hdr_cnt(content-length) gt 1
    http-request deny if suspicious_headers

# Rate limiting configuration
backend rate_limit_abuse
    stick-table type ip size 100k expire 30s store gpc0,gpc1,http_req_rate(10s),http_err_rate(10s),conn_rate(10s)

frontend rate_limiting
    # Track requests per IP
    http-request track-sc0 src table rate_limit_abuse
    
    # Deny clients that exceed rate limits
    http-request deny if { sc_http_req_rate(0) gt 100 }
    http-request deny if { sc_conn_rate(0) gt 20 }
    http-request deny if { sc_http_err_rate(0) gt 10 }
    
    # Slow down abusive clients
    http-request set-var(req.delay) int(1000) if { sc_http_req_rate(0) gt 50 }
    http-request lua.delay_request if { var(req.delay) -m found }

# WAF-like filtering
frontend security_frontend
    # Block common attacks
    acl is_sql_injection path_reg -i .*(union|select|insert|delete|update|drop|create|alter|exec|script|javascript|vbscript|onload|onerror|onclick).*
    acl is_xss path_reg -i .*(script|iframe|object|embed|form|img|svg|math|details|svg).*
    acl is_path_traversal path_reg -i .*(\.\./|\.\.\\|%2e%2e%2f|%2e%2e\\).*
    
    http-request deny if is_sql_injection
    http-request deny if is_xss
    http-request deny if is_path_traversal
    
    # GeoIP blocking (requires GeoIP data)
    # http-request deny if { src,map_ip(/etc/haproxy/geoip/country.map) -i CN RU }

EOF

# Include security configuration
echo &quot;include /etc/haproxy/conf.d/*.cfg&quot; | sudo tee -a /etc/haproxy/haproxy.cfg</code></pre>
      </div>
    </div>
<h2 id="advanced-load-balancing-strategies" class="mobile-header">Advanced Load Balancing Strategies</h2>
<h3 id="multi-tier-application-load-balancing" class="mobile-header">Multi-Tier Application Load Balancing</h3>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash">sudo tee /etc/haproxy/haproxy.cfg &gt; /dev/null &lt;&lt;EOF
global
    log stdout local0
    stats socket /run/haproxy/admin.sock mode 660 level admin
    user haproxy
    group haproxy
    daemon

defaults
    mode http
    log global
    option httplog
    option dontlognull
    timeout connect 5s
    timeout client 50s
    timeout server 50s

#---------------------------------------------------------------------
# Application Frontend with Advanced Routing
#---------------------------------------------------------------------

frontend app_frontend
    bind *:443 ssl crt /etc/haproxy/ssl/ alpn h2,http/1.1
    
    # ACLs for microservices routing
    acl is_user_service path_beg /api/users/
    acl is_order_service path_beg /api/orders/
    acl is_payment_service path_beg /api/payments/
    acl is_notification_service path_beg /api/notifications/
    acl is_admin_panel path_beg /admin/
    acl is_monitoring path_beg /monitoring/
    
    # Geographic routing
    acl is_us_traffic src 192.168.1.0/24
    acl is_eu_traffic src 192.168.2.0/24
    acl is_asia_traffic src 192.168.3.0/24
    
    # Device detection
    acl is_mobile hdr_reg(User-Agent) -i (mobile|android|iphone|ipad)
    acl is_desktop hdr_reg(User-Agent) -i (windows|macos|linux)
    
    # Routing decisions
    use_backend user_service_us if is_user_service is_us_traffic
    use_backend user_service_eu if is_user_service is_eu_traffic
    use_backend order_service if is_order_service
    use_backend payment_service if is_payment_service
    use_backend notification_service if is_notification_service
    use_backend admin_panel if is_admin_panel
    use_backend monitoring_backend if is_monitoring
    use_backend mobile_servers if is_mobile
    default_backend web_servers

# User Service Backends (Geographic)
backend user_service_us
    balance roundrobin
    option httpchk GET /api/users/health
    http-check expect status 200
    server user-us-1 192.168.1.100:3001 check
    server user-us-2 192.168.1.101:3001 check
    server user-us-3 192.168.1.102:3001 check

backend user_service_eu
    balance roundrobin
    option httpchk GET /api/users/health
    server user-eu-1 192.168.2.100:3001 check
    server user-eu-2 192.168.2.101:3001 check

# Microservices Backends
backend order_service
    balance leastconn
    option httpchk GET /api/orders/health
    server order-1 192.168.1.110:3002 check
    server order-2 192.168.1.111:3002 check
    server order-3 192.168.1.112:3002 check

backend payment_service
    balance roundrobin
    option httpchk GET /api/payments/health
    # Enhanced security for payment service
    http-request set-header X-Forwarded-Proto https
    http-request add-header X-Client-IP %[src]
    server payment-1 192.168.1.120:3003 check ssl verify none
    server payment-2 192.168.1.121:3003 check ssl verify none

backend notification_service
    balance roundrobin
    option httpchk GET /api/notifications/health
    server notification-1 192.168.1.130:3004 check
    server notification-2 192.168.1.131:3004 check

# Admin Panel Backend (Restricted)
backend admin_panel
    balance source
    option httpchk GET /admin/health
    http-check expect status 200
    
    # Additional security
    http-request add-header X-Admin-Access &quot;true&quot;
    timeout server 2m
    
    server admin-1 192.168.1.140:9000 check

# Mobile-Optimized Backend
backend mobile_servers
    balance roundrobin
    option httpchk GET /mobile/health
    # Mobile-specific optimizations
    compression algo gzip
    compression type text/html text/css application/javascript application/json
    server mobile-1 192.168.1.150:8080 check
    server mobile-2 192.168.1.151:8080 check

#---------------------------------------------------------------------
# Monitoring and Statistics
#---------------------------------------------------------------------

listen stats
    bind *:8404 ssl crt /etc/haproxy/ssl/stats.pem
    stats enable
    stats uri /
    stats refresh 5s
    stats admin if { src 192.168.1.0/24 }
    stats auth admin:secure_stats_password
    stats realm &quot;HAProxy Statistics&quot;
    
    # Prometheus metrics endpoint
    http-request use-service prometheus-exporter if { path /metrics }
    
    # JSON stats API
    http-request use-service prometheus-exporter if { path /stats/json }

# Health check endpoint for external monitoring
listen health_check
    bind *:8080
    mode http
    monitor-uri /health
    option httplog
    
    acl site_dead nbsrv(web_servers) lt 1
    acl api_dead nbsrv(api_servers) lt 1
    
    monitor fail if site_dead
    monitor fail if api_dead
EOF</code></pre>
      </div>
    </div>
<h3 id="global-load-balancing-with-dns" class="mobile-header">Global Load Balancing with DNS</h3>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash"># Integration with external DNS load balancing
sudo tee /etc/haproxy/haproxy-dns.cfg &gt; /dev/null &lt;&lt;EOF
global
    # DNS resolution for dynamic backends
    dns-resolver dns1
        nameserver dns1 8.8.8.8:53
        nameserver dns2 8.8.4.4:53
        resolve_retries 3
        timeout retry 1s
        hold nx 30s
        hold other 30s
        hold refused 30s
        hold timeout 30s
        hold valid 10s

defaults
    mode http
    timeout connect 5s
    timeout client 30s
    timeout server 30s

# Dynamic backend resolution
backend dynamic_backend
    balance roundrobin
    option httpchk GET /health
    
    # Servers resolved via DNS
    server-template web- 3 web.example.com:80 check resolvers dns1
    server-template api- 2 api.example.com:80 check resolvers dns1

# Service discovery integration
backend consul_backend
    balance roundrobin
    option httpchk GET /health
    
    # Consul service discovery
    server-template consul- 3 _web._tcp.service.consul:80 check resolvers dns1
EOF</code></pre>
      </div>
    </div>
<h2 id="high-availability-and-clustering" class="mobile-header">High Availability and Clustering</h2>
<h3 id="haproxy-keepalived-setup" class="mobile-header">HAProxy Keepalived Setup</h3>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash"># Install keepalived for HA
sudo apt install -y keepalived  # Ubuntu/Debian
sudo yum install -y keepalived  # RHEL/CentOS

# Configure keepalived on primary HAProxy
sudo tee /etc/keepalived/keepalived.conf &gt; /dev/null &lt;&lt;EOF
! Configuration File for keepalived

global_defs {
    router_id HAProxy_Primary
    vrrp_skip_check_adv_addr
    vrrp_strict
    vrrp_garp_interval 0
    vrrp_gna_interval 0
    script_user root
    enable_script_security
}

# Health check script
vrrp_script chk_haproxy {
    script &quot;/usr/bin/killall -0 haproxy&quot;
    interval 2
    weight 2
    fall 3
    rise 2
}

vrrp_instance VI_1 {
    state MASTER
    interface eth0
    virtual_router_id 51
    priority 110
    advert_int 1
    authentication {
        auth_type PASS
        auth_pass secure_vrrp_password
    }
    virtual_ipaddress {
        192.168.1.100/24
    }
    track_script {
        chk_haproxy
    }
    notify_master /etc/keepalived/master.sh
    notify_backup /etc/keepalived/backup.sh
}
EOF

# Create notification scripts
sudo tee /etc/keepalived/master.sh &gt; /dev/null &lt;&lt;&#039;EOF&#039;
#!/bin/bash
echo &quot;$(date): Became MASTER&quot; &gt;&gt; /var/log/keepalived.log
# Add any additional master setup commands here
EOF

sudo tee /etc/keepalived/backup.sh &gt; /dev/null &lt;&lt;&#039;EOF&#039;
#!/bin/bash
echo &quot;$(date): Became BACKUP&quot; &gt;&gt; /var/log/keepalived.log
# Add any additional backup setup commands here
EOF

sudo chmod +x /etc/keepalived/{master,backup}.sh
sudo systemctl enable --now keepalived

# Configure backup HAProxy with lower priority (100 instead of 110)</code></pre>
      </div>
    </div>
<h3 id="multi-site-load-balancing" class="mobile-header">Multi-Site Load Balancing</h3>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash"># Configure multi-site load balancing
sudo tee /etc/haproxy/haproxy-multisite.cfg &gt; /dev/null &lt;&lt;EOF
global
    log stdout local0
    stats socket /run/haproxy/admin.sock mode 660 level admin
    user haproxy
    group haproxy
    daemon

defaults
    mode http
    log global
    option httplog
    timeout connect 5s
    timeout client 30s
    timeout server 30s

# Frontend for multi-site routing
frontend multisite_frontend
    bind *:443 ssl crt /etc/haproxy/ssl/ alpn h2,http/1.1
    
    # Site detection based on headers
    acl is_site_a hdr(host) -i site-a.example.com
    acl is_site_b hdr(host) -i site-b.example.com
    acl is_site_c hdr(host) -i site-c.example.com
    
    # Geographic routing based on source IP
    acl is_americas src 10.1.0.0/16
    acl is_europe src 10.2.0.0/16
    acl is_asia src 10.3.0.0/16
    
    # Route to appropriate backends
    use_backend site_a_americas if is_site_a is_americas
    use_backend site_a_europe if is_site_a is_europe
    use_backend site_a_asia if is_site_a is_asia
    use_backend site_b_backend if is_site_b
    use_backend site_c_backend if is_site_c
    
    default_backend default_site

# Regional backends
backend site_a_americas
    balance leastconn
    option httpchk GET /health
    server site-a-us-1 us-east-1.example.com:80 check
    server site-a-us-2 us-west-2.example.com:80 check

backend site_a_europe
    balance leastconn
    option httpchk GET /health
    server site-a-eu-1 eu-west-1.example.com:80 check
    server site-a-eu-2 eu-central-1.example.com:80 check

backend site_a_asia
    balance leastconn
    option httpchk GET /health
    server site-a-ap-1 ap-southeast-1.example.com:80 check
    server site-a-ap-2 ap-northeast-1.example.com:80 check
EOF</code></pre>
      </div>
    </div>
<h2 id="monitoring-and-observability" class="mobile-header">Monitoring and Observability</h2>
<h3 id="prometheus-integration" class="mobile-header">Prometheus Integration</h3>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash"># Configure HAProxy for Prometheus scraping
sudo tee -a /etc/haproxy/haproxy.cfg &gt; /dev/null &lt;&lt;EOF

# Prometheus metrics endpoint
frontend prometheus_frontend
    bind *:8405
    http-request use-service prometheus-exporter if { path /metrics }
    http-request deny
EOF

# Create HAProxy exporter configuration
sudo tee /etc/systemd/system/haproxy-exporter.service &gt; /dev/null &lt;&lt;EOF
[Unit]
Description=HAProxy Exporter for Prometheus
After=network.target

[Service]
Type=simple
User=haproxy
ExecStart=/usr/local/bin/haproxy_exporter \
    --haproxy.scrape-uri=&quot;http://admin:secure_stats_password@localhost:8404/stats;csv&quot; \
    --web.listen-address=&quot;0.0.0.0:9101&quot;
Restart=always

[Install]
WantedBy=multi-user.target
EOF

# Download HAProxy exporter
HAPROXY_EXPORTER_VERSION=&quot;0.15.0&quot;
wget https://github.com/prometheus/haproxy_exporter/releases/download/v${HAPROXY_EXPORTER_VERSION}/haproxy_exporter-${HAPROXY_EXPORTER_VERSION}.linux-amd64.tar.gz
tar xzf haproxy_exporter-${HAPROXY_EXPORTER_VERSION}.linux-amd64.tar.gz
sudo cp haproxy_exporter-${HAPROXY_EXPORTER_VERSION}.linux-amd64/haproxy_exporter /usr/local/bin/

sudo systemctl daemon-reload
sudo systemctl enable --now haproxy-exporter</code></pre>
      </div>
    </div>
<h3 id="comprehensive-logging" class="mobile-header">Comprehensive Logging</h3>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash"># Configure rsyslog for HAProxy
sudo tee /etc/rsyslog.d/49-haproxy.conf &gt; /dev/null &lt;&lt;EOF
# HAProxy log configuration
\$ModLoad imudp
\$UDPServerRun 514
\$UDPServerAddress 127.0.0.1

# HAProxy logs
local0.*    /var/log/haproxy/haproxy.log
&amp; stop

# Separate access and error logs
local0.info /var/log/haproxy/access.log
local0.err  /var/log/haproxy/error.log
local0.warning /var/log/haproxy/warning.log
EOF

# Create log directory
sudo mkdir -p /var/log/haproxy
sudo chown syslog:adm /var/log/haproxy

# Configure log rotation
sudo tee /etc/logrotate.d/haproxy &gt; /dev/null &lt;&lt;EOF
/var/log/haproxy/*.log {
    daily
    rotate 30
    missingok
    notifempty
    compress
    delaycompress
    postrotate
        /bin/kill -HUP \`cat /var/run/rsyslogd.pid 2&gt;/dev/null\` 2&gt;/dev/null || true
    endscript
}
EOF

sudo systemctl restart rsyslog
sudo systemctl reload haproxy</code></pre>
      </div>
    </div>
<h2 id="performance-optimization" class="mobile-header">Performance Optimization</h2>
<h3 id="system-level-tuning" class="mobile-header">System-Level Tuning</h3>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash"># Kernel optimization for HAProxy
sudo tee -a /etc/sysctl.conf &gt; /dev/null &lt;&lt;EOF
# HAProxy performance tuning
net.core.somaxconn = 65535
net.core.netdev_max_backlog = 5000
net.ipv4.tcp_max_syn_backlog = 65535
net.ipv4.tcp_max_tw_buckets = 400000
net.ipv4.tcp_tw_reuse = 1
net.ipv4.tcp_fin_timeout = 10
net.ipv4.ip_local_port_range = 15000 65000
net.core.rmem_default = 262144
net.core.rmem_max = 16777216
net.core.wmem_default = 262144
net.core.wmem_max = 16777216
net.ipv4.tcp_rmem = 4096 65536 16777216
net.ipv4.tcp_wmem = 4096 65536 16777216
fs.file-max = 100000
vm.swappiness = 1
EOF

sudo sysctl -p

# Set resource limits
sudo tee -a /etc/security/limits.conf &gt; /dev/null &lt;&lt;EOF
haproxy soft nofile 65535
haproxy hard nofile 65535
haproxy soft nproc 65535
haproxy hard nproc 65535
EOF

# Optimize HAProxy service
sudo tee /etc/systemd/system/haproxy.service.d/performance.conf &gt; /dev/null &lt;&lt;EOF
[Service]
LimitNOFILE=65535
LimitNPROC=65535
ExecStart=
ExecStart=/usr/sbin/haproxy -f /etc/haproxy/haproxy.cfg -p /run/haproxy.pid -S /run/haproxy-master.sock
ExecReload=/usr/sbin/haproxy -f /etc/haproxy/haproxy.cfg -c -q
ExecReload=/bin/kill -USR2 \$MAINPID
EOF

sudo systemctl daemon-reload
sudo systemctl restart haproxy</code></pre>
      </div>
    </div>
<h3 id="advanced-performance-configuration" class="mobile-header">Advanced Performance Configuration</h3>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash">sudo tee /etc/haproxy/performance.cfg &gt; /dev/null &lt;&lt;EOF
global
    # Performance optimization
    maxconn 40000
    nbthread 8
    cpu-map auto:1/1-8 0-7
    
    # Memory optimization
    tune.maxrewrite 1024
    tune.bufsize 32768
    
    # Connection optimization
    tune.maxaccept 500
    tune.recv_enough 10000
    
    # SSL optimization
    tune.ssl.default-dh-param 2048
    tune.ssl.maxrecord 1460
    tune.ssl.capture-buffer-size 0
    
    # Compression
    tune.comp.maxlevel 6

defaults
    # Performance settings
    maxconn 8000
    
    # Timeouts
    timeout connect 3s
    timeout client 25s
    timeout server 25s
    timeout tunnel 3600s
    timeout http-keep-alive 1s
    timeout http-request 15s
    timeout queue 30s
    timeout tarpit 60s
    
    # Keep-alive optimization
    option http-keep-alive
    option prefer-last-server
    
    # Compression
    compression algo gzip
    compression type text/html text/css text/javascript application/javascript application/json application/xml

# High-performance backend configuration
backend high_performance_backend
    balance leastconn
    option httpchk GET /health
    http-check expect status 200
    
    # Connection pooling
    option http-reuse always
    
    # Server configuration with optimal settings
    default-server inter 1000 fastinter 500 downinter 2000 rise 2 fall 3 slowstart 30s maxconn 1000 maxqueue 256 weight 100
    
    server web1 192.168.1.10:8080 check
    server web2 192.168.1.11:8080 check
    server web3 192.168.1.12:8080 check
    server web4 192.168.1.13:8080 check
EOF</code></pre>
      </div>
    </div>
<h2 id="backup-and-disaster-recovery" class="mobile-header">Backup and Disaster Recovery</h2>
<h3 id="4-configuration-management-and-backup" class="mobile-header">4. Configuration Management and Backup</h3>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash">sudo tee /usr/local/bin/haproxy-backup.sh &gt; /dev/null &lt;&lt;&#039;EOF&#039;
#!/bin/bash
BACKUP_DIR=&quot;/backup/haproxy&quot;
DATE=$(date +%Y%m%d_%H%M%S)

mkdir -p ${BACKUP_DIR}/{config,ssl,stats,logs}

# Backup configuration files
tar -czf ${BACKUP_DIR}/config/haproxy-config-${DATE}.tar.gz \
    /etc/haproxy/ \
    /etc/systemd/system/haproxy.service* \
    /etc/keepalived/

# Backup SSL certificates
tar -czf ${BACKUP_DIR}/ssl/haproxy-ssl-${DATE}.tar.gz \
    /etc/haproxy/ssl/ \
    /etc/letsencrypt/

# Backup statistics and runtime state
echo &quot;show stat&quot; | socat stdio /run/haproxy/admin.sock &gt; ${BACKUP_DIR}/stats/haproxy-stats-${DATE}.txt
echo &quot;show info&quot; | socat stdio /run/haproxy/admin.sock &gt; ${BACKUP_DIR}/stats/haproxy-info-${DATE}.txt
echo &quot;show sess&quot; | socat stdio /run/haproxy/admin.sock &gt; ${BACKUP_DIR}/stats/haproxy-sessions-${DATE}.txt

# Backup recent logs
find /var/log/haproxy -name &quot;*.log&quot; -mtime -1 -exec tar -czf ${BACKUP_DIR}/logs/haproxy-logs-${DATE}.tar.gz {} +

# Upload to cloud storage
aws s3 cp ${BACKUP_DIR}/ s3://haproxy-backups/ --recursive
az storage blob upload-batch --source ${BACKUP_DIR} --destination haproxy-backups
gsutil cp -r ${BACKUP_DIR}/* gs://haproxy-backups/

# Keep only last 15 backups
find ${BACKUP_DIR} -name &quot;haproxy-*&quot; -type f -mtime +15 -delete

# Test configuration validity
haproxy -c -f /etc/haproxy/haproxy.cfg

echo &quot;HAProxy backup completed: ${DATE}&quot;
EOF

sudo chmod +x /usr/local/bin/haproxy-backup.sh

# Schedule daily backups
echo &quot;0 2 * * * root /usr/local/bin/haproxy-backup.sh&quot; | sudo tee -a /etc/crontab</code></pre>
      </div>
    </div>
<h3 id="disaster-recovery-automation" class="mobile-header">Disaster Recovery Automation</h3>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash">sudo tee /usr/local/bin/haproxy-dr.sh &gt; /dev/null &lt;&lt;&#039;EOF&#039;
#!/bin/bash
DR_MODE=&quot;${1:-test}&quot;  # test, activate, or deactivate

case &quot;$DR_MODE&quot; in
    &quot;test&quot;)
        echo &quot;Testing DR procedures...&quot;
        
        # Test backup restoration
        LATEST_BACKUP=$(ls -t /backup/haproxy/config/haproxy-config-*.tar.gz | head -1)
        if [ -n &quot;$LATEST_BACKUP&quot; ]; then
            echo &quot;✓ Latest backup found: $LATEST_BACKUP&quot;
        else
            echo &quot;✗ No backup files found&quot;
            exit 1
        fi
        
        # Test configuration
        haproxy -c -f /etc/haproxy/haproxy.cfg
        echo &quot;✓ Configuration is valid&quot;
        
        # Test backend connectivity
        for backend in $(echo &quot;show stat&quot; | socat stdio /run/haproxy/admin.sock | grep &quot;,BACKEND,&quot; | cut -d, -f1); do
            echo &quot;Testing backend: $backend&quot;
            echo &quot;show stat&quot; | socat stdio /run/haproxy/admin.sock | grep &quot;$backend&quot;
        done
        
        echo &quot;DR test completed&quot;
        ;;
        
    &quot;activate&quot;)
        echo &quot;Activating DR procedures...&quot;
        
        # Switch to DR configuration
        cp /etc/haproxy/haproxy-dr.cfg /etc/haproxy/haproxy.cfg
        
        # Reload HAProxy
        systemctl reload haproxy
        
        # Update DNS (example with Route53)
        aws route53 change-resource-record-sets --hosted-zone-id Z123456789 --change-batch file://dr-dns-update.json
        
        echo &quot;DR activated&quot;
        ;;
        
    &quot;deactivate&quot;)
        echo &quot;Deactivating DR procedures...&quot;
        
        # Restore original configuration
        cp /etc/haproxy/haproxy.cfg.backup /etc/haproxy/haproxy.cfg
        
        # Reload HAProxy
        systemctl reload haproxy
        
        # Update DNS back to primary
        aws route53 change-resource-record-sets --hosted-zone-id Z123456789 --change-batch file://primary-dns-update.json
        
        echo &quot;DR deactivated&quot;
        ;;
        
    *)
        echo &quot;Usage: $0 {test|activate|deactivate}&quot;
        exit 1
        ;;
esac
EOF

sudo chmod +x /usr/local/bin/haproxy-dr.sh</code></pre>
      </div>
    </div>
<h2 id="verification-and-health-checks" class="mobile-header">Verification and Health Checks</h2>
<h3 id="comprehensive-health-monitoring" class="mobile-header">Comprehensive Health Monitoring</h3>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash">sudo tee /usr/local/bin/haproxy-health-check.sh &gt; /dev/null &lt;&lt;&#039;EOF&#039;
#!/bin/bash
HEALTH_LOG=&quot;/var/log/haproxy-health.log&quot;

log_message() {
    echo &quot;$(date &#039;+%Y-%m-%d %H:%M:%S&#039;) - $1&quot; | tee -a ${HEALTH_LOG}
}

# Check HAProxy service status
if systemctl is-active haproxy &gt;/dev/null 2&gt;&amp;1; then
    log_message &quot;✓ HAProxy service is running&quot;
else
    log_message &quot;✗ HAProxy service is not running&quot;
    exit 1
fi

# Check configuration validity
if haproxy -c -f /etc/haproxy/haproxy.cfg &gt;/dev/null 2&gt;&amp;1; then
    log_message &quot;✓ HAProxy configuration is valid&quot;
else
    log_message &quot;✗ HAProxy configuration has errors&quot;
    haproxy -c -f /etc/haproxy/haproxy.cfg
fi

# Check listening ports
LISTENING_PORTS=$(netstat -tlnp | grep haproxy | wc -l)
log_message &quot;✓ HAProxy is listening on ${LISTENING_PORTS} ports&quot;

# Check backend server health
BACKEND_STATS=$(echo &quot;show stat&quot; | socat stdio /run/haproxy/admin.sock | grep -c &quot;,UP,&quot;)
TOTAL_SERVERS=$(echo &quot;show stat&quot; | socat stdio /run/haproxy/admin.sock | grep -c &quot;,.*,&quot;)
log_message &quot;✓ ${BACKEND_STATS}/${TOTAL_SERVERS} backend servers are healthy&quot;

# Check SSL certificate expiry
if [ -d /etc/haproxy/ssl ]; then
    for cert in /etc/haproxy/ssl/*.pem; do
        if [ -f &quot;$cert&quot; ]; then
            EXPIRY=$(openssl x509 -in &quot;$cert&quot; -noout -dates | grep notAfter | cut -d= -f2)
            EXPIRY_EPOCH=$(date -d &quot;$EXPIRY&quot; +%s)
            CURRENT_EPOCH=$(date +%s)
            DAYS_TO_EXPIRY=$(( (EXPIRY_EPOCH - CURRENT_EPOCH) / 86400 ))
            
            if [ $DAYS_TO_EXPIRY -lt 30 ]; then
                log_message &quot;⚠ SSL certificate $(basename $cert) expires in ${DAYS_TO_EXPIRY} days&quot;
            else
                log_message &quot;✓ SSL certificate $(basename $cert) expires in ${DAYS_TO_EXPIRY} days&quot;
            fi
        fi
    done
fi

# Check memory usage
MEMORY_USAGE=$(ps -o pid,vsz,rss,comm -C haproxy | tail -1 | awk &#039;{print $3/1024}&#039;)
log_message &quot;ℹ HAProxy memory usage: ${MEMORY_USAGE}MB&quot;

# Check connection statistics
CURRENT_CONNS=$(echo &quot;show info&quot; | socat stdio /run/haproxy/admin.sock | grep &quot;CurrConns&quot; | cut -d: -f2 | tr -d &#039; &#039;)
MAX_CONNS=$(echo &quot;show info&quot; | socat stdio /run/haproxy/admin.sock | grep &quot;MaxConn&quot; | cut -d: -f2 | tr -d &#039; &#039;)
log_message &quot;ℹ Current connections: ${CURRENT_CONNS}/${MAX_CONNS}&quot;

# Check for any backend servers that are down
DOWN_SERVERS=$(echo &quot;show stat&quot; | socat stdio /run/haproxy/admin.sock | grep &quot;,DOWN,&quot; | wc -l)
if [ $DOWN_SERVERS -gt 0 ]; then
    log_message &quot;⚠ ${DOWN_SERVERS} backend servers are down&quot;
    echo &quot;show stat&quot; | socat stdio /run/haproxy/admin.sock | grep &quot;,DOWN,&quot; | while IFS=, read pxname svname; do
        log_message &quot;  - ${pxname}/${svname} is DOWN&quot;
    done
fi

log_message &quot;HAProxy health check completed&quot;
EOF

sudo chmod +x /usr/local/bin/haproxy-health-check.sh

# Schedule health checks every 5 minutes
echo &quot;*/5 * * * * root /usr/local/bin/haproxy-health-check.sh&quot; | sudo tee -a /etc/crontab</code></pre>
      </div>
    </div>
<h3 id="load-testing-and-performance-validation" class="mobile-header">Load Testing and Performance Validation</h3>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash">sudo tee /usr/local/bin/haproxy-load-test.sh &gt; /dev/null &lt;&lt;&#039;EOF&#039;
#!/bin/bash
TEST_RESULTS=&quot;/tmp/haproxy-load-test-$(date +%Y%m%d_%H%M%S).txt&quot;
TEST_URL=&quot;https://example.com&quot;
CONCURRENT_USERS=100
TEST_DURATION=60

echo &quot;HAProxy Load Test Results&quot; &gt; ${TEST_RESULTS}
echo &quot;========================&quot; &gt;&gt; ${TEST_RESULTS}
echo &quot;Date: $(date)&quot; &gt;&gt; ${TEST_RESULTS}
echo &quot;Target URL: ${TEST_URL}&quot; &gt;&gt; ${TEST_RESULTS}
echo &quot;Concurrent Users: ${CONCURRENT_USERS}&quot; &gt;&gt; ${TEST_RESULTS}
echo &quot;Test Duration: ${TEST_DURATION}s&quot; &gt;&gt; ${TEST_RESULTS}
echo &quot;&quot; &gt;&gt; ${TEST_RESULTS}

# Install testing tools if not available
if ! command -v ab &amp;&gt; /dev/null; then
    apt-get update &amp;&amp; apt-get install -y apache2-utils
fi

if ! command -v wrk &amp;&gt; /dev/null; then
    git clone https://github.com/wg/wrk.git /tmp/wrk
    cd /tmp/wrk &amp;&amp; make &amp;&amp; cp wrk /usr/local/bin/
fi

# Run Apache Bench test
echo &quot;Apache Bench Results:&quot; &gt;&gt; ${TEST_RESULTS}
ab -n 10000 -c ${CONCURRENT_USERS} -k ${TEST_URL}/ &gt;&gt; ${TEST_RESULTS} 2&gt;&amp;1

echo &quot;&quot; &gt;&gt; ${TEST_RESULTS}
echo &quot;WRK Results:&quot; &gt;&gt; ${TEST_RESULTS}
wrk -t4 -c${CONCURRENT_USERS} -d${TEST_DURATION}s --latency ${TEST_URL}/ &gt;&gt; ${TEST_RESULTS}

# Capture HAProxy stats during test
echo &quot;&quot; &gt;&gt; ${TEST_RESULTS}
echo &quot;HAProxy Statistics During Test:&quot; &gt;&gt; ${TEST_RESULTS}
echo &quot;show info&quot; | socat stdio /run/haproxy/admin.sock &gt;&gt; ${TEST_RESULTS}
echo &quot;show stat&quot; | socat stdio /run/haproxy/admin.sock &gt;&gt; ${TEST_RESULTS}

echo &quot;&quot; &gt;&gt; ${TEST_RESULTS}
echo &quot;Load test completed at: $(date)&quot; &gt;&gt; ${TEST_RESULTS}

echo &quot;Load test completed. Results: ${TEST_RESULTS}&quot;
EOF

sudo chmod +x /usr/local/bin/haproxy-load-test.sh</code></pre>
      </div>
    </div>
<h2 id="firewall-configuration-cross-platform" class="mobile-header">Firewall Configuration (Cross-Platform)</h2>
<h3 id="security-rules" class="mobile-header">Security Rules</h3>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash"># UFW (Ubuntu/Debian)
sudo ufw allow 80/tcp comment &#039;HTTP&#039;
sudo ufw allow 443/tcp comment &#039;HTTPS&#039; 
sudo ufw allow from 192.168.1.0/24 to any port 8404 comment &#039;Stats interface - internal only&#039;
sudo ufw allow from 192.168.1.0/24 to any port 9101 comment &#039;Prometheus exporter - internal only&#039;
sudo ufw deny 8404 comment &#039;Block stats from public&#039;
sudo ufw enable

# Firewalld (RHEL/CentOS/Fedora)
sudo firewall-cmd --permanent --add-service=http
sudo firewall-cmd --permanent --add-service=https
sudo firewall-cmd --permanent --new-zone=haproxy-mgmt
sudo firewall-cmd --permanent --zone=haproxy-mgmt --add-source=192.168.1.0/24
sudo firewall-cmd --permanent --zone=haproxy-mgmt --add-port=8404/tcp
sudo firewall-cmd --permanent --zone=haproxy-mgmt --add-port=9101/tcp
sudo firewall-cmd --reload

# iptables (Universal)
sudo iptables -A INPUT -p tcp --dport 80 -j ACCEPT
sudo iptables -A INPUT -p tcp --dport 443 -j ACCEPT
sudo iptables -A INPUT -p tcp -s 192.168.1.0/24 --dport 8404 -j ACCEPT
sudo iptables -A INPUT -p tcp -s 192.168.1.0/24 --dport 9101 -j ACCEPT
sudo iptables -A INPUT -p tcp --dport 8404 -j DROP
sudo iptables -A INPUT -p tcp --dport 9101 -j DROP

# Save iptables rules
# Ubuntu/Debian
sudo apt install -y iptables-persistent
sudo netfilter-persistent save

# RHEL/CentOS
sudo service iptables save</code></pre>
      </div>
    </div>
<h3 id="ddos-protection-configuration" class="mobile-header">DDoS Protection Configuration</h3>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash">sudo tee /etc/haproxy/ddos-protection.cfg &gt; /dev/null &lt;&lt;EOF
# DDoS Protection Configuration

global
    # Stick tables for tracking
    tune.stick-table.enable 1

frontend ddos_protection
    bind *:80
    bind *:443 ssl crt /etc/haproxy/ssl/
    
    # Track client behavior
    stick-table type ip size 1m expire 5m store gpc0,gpc1,http_req_rate(10s),http_err_rate(10s),conn_rate(10s),bytes_out_rate(10s)
    
    # Track requests
    http-request track-sc0 src
    
    # Rate limiting rules
    acl abuse_request_rate sc_http_req_rate(0) gt 100
    acl abuse_connection_rate sc_conn_rate(0) gt 20
    acl abuse_error_rate sc_http_err_rate(0) gt 10
    acl abuse_bandwidth sc_bytes_out_rate(0) gt 10000000  # 10MB/s
    
    # Geographic blocking (requires GeoIP)
    # acl blocked_countries src,map_ip(/etc/haproxy/geoip-country.map) -i CN RU
    
    # User-Agent filtering
    acl bad_user_agent hdr_sub(User-Agent) -i &quot;sqlmap&quot; &quot;nikto&quot; &quot;nmap&quot; &quot;masscan&quot; &quot;zmap&quot;
    acl empty_user_agent hdr_cnt(User-Agent) eq 0
    
    # HTTP method filtering
    acl allowed_methods method GET POST PUT DELETE HEAD OPTIONS PATCH
    
    # Deny rules
    http-request deny if abuse_request_rate
    http-request deny if abuse_connection_rate
    http-request deny if abuse_error_rate
    http-request deny if abuse_bandwidth
    http-request deny if bad_user_agent
    http-request deny if empty_user_agent
    http-request deny if !allowed_methods
    # http-request deny if blocked_countries
    
    # Tarpit suspicious clients
    http-request tarpit if { sc_http_req_rate(0) gt 50 }
    
    default_backend web_servers

# Clean backend
backend web_servers
    balance leastconn
    option httpchk GET /health
    
    server web1 192.168.1.10:8080 check
    server web2 192.168.1.11:8080 check
    server web3 192.168.1.12:8080 check
EOF</code></pre>
      </div>
    </div>
<h2 id="runtime-management-and-monitoring" class="mobile-header">Runtime Management and Monitoring</h2>
<h3 id="advanced-runtime-commands" class="mobile-header">Advanced Runtime Commands</h3>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash"># Create HAProxy management script
sudo tee /usr/local/bin/haproxy-manage.sh &gt; /dev/null &lt;&lt;&#039;EOF&#039;
#!/bin/bash
HAPROXY_SOCKET=&quot;/run/haproxy/admin.sock&quot;

case &quot;$1&quot; in
    &quot;status&quot;)
        echo &quot;=== HAProxy Status ===&quot;
        echo &quot;show info&quot; | socat stdio ${HAPROXY_SOCKET}
        echo &quot;&quot;
        echo &quot;=== Server Status ===&quot;
        echo &quot;show stat&quot; | socat stdio ${HAPROXY_SOCKET} | column -t -s &quot;,&quot;
        ;;
    
    &quot;enable&quot;)
        if [ -z &quot;$2&quot; ] || [ -z &quot;$3&quot; ]; then
            echo &quot;Usage: $0 enable &lt;backend&gt; &lt;server&gt;&quot;
            exit 1
        fi
        echo &quot;enable server $2/$3&quot; | socat stdio ${HAPROXY_SOCKET}
        echo &quot;Server $2/$3 enabled&quot;
        ;;
    
    &quot;disable&quot;)
        if [ -z &quot;$2&quot; ] || [ -z &quot;$3&quot; ]; then
            echo &quot;Usage: $0 disable &lt;backend&gt; &lt;server&gt;&quot;
            exit 1
        fi
        echo &quot;disable server $2/$3&quot; | socat stdio ${HAPROXY_SOCKET}
        echo &quot;Server $2/$3 disabled&quot;
        ;;
    
    &quot;weight&quot;)
        if [ -z &quot;$2&quot; ] || [ -z &quot;$3&quot; ] || [ -z &quot;$4&quot; ]; then
            echo &quot;Usage: $0 weight &lt;backend&gt; &lt;server&gt; &lt;weight&gt;&quot;
            exit 1
        fi
        echo &quot;set weight $2/$3 $4&quot; | socat stdio ${HAPROXY_SOCKET}
        echo &quot;Weight for $2/$3 set to $4&quot;
        ;;
    
    &quot;sessions&quot;)
        echo &quot;=== Active Sessions ===&quot;
        echo &quot;show sess&quot; | socat stdio ${HAPROXY_SOCKET}
        ;;
    
    &quot;errors&quot;)
        echo &quot;=== Recent Errors ===&quot;
        echo &quot;show errors&quot; | socat stdio ${HAPROXY_SOCKET}
        ;;
    
    &quot;reload&quot;)
        echo &quot;Reloading HAProxy configuration...&quot;
        if haproxy -c -f /etc/haproxy/haproxy.cfg; then
            systemctl reload haproxy
            echo &quot;Configuration reloaded successfully&quot;
        else
            echo &quot;Configuration has errors, reload aborted&quot;
            exit 1
        fi
        ;;
    
    &quot;drain&quot;)
        if [ -z &quot;$2&quot; ] || [ -z &quot;$3&quot; ]; then
            echo &quot;Usage: $0 drain &lt;backend&gt; &lt;server&gt;&quot;
            exit 1
        fi
        echo &quot;set server $2/$3 state drain&quot; | socat stdio ${HAPROXY_SOCKET}
        echo &quot;Server $2/$3 is being drained&quot;
        
        # Wait for connections to finish
        while [ $(echo &quot;show stat&quot; | socat stdio ${HAPROXY_SOCKET} | grep &quot;$2,$3&quot; | cut -d, -f5) -gt 0 ]; do
            echo &quot;Waiting for connections to finish...&quot;
            sleep 5
        done
        echo &quot;Server $2/$3 has been drained&quot;
        ;;
    
    *)
        echo &quot;Usage: $0 {status|enable|disable|weight|sessions|errors|reload|drain} [options]&quot;
        echo &quot;&quot;
        echo &quot;Examples:&quot;
        echo &quot;  $0 status&quot;
        echo &quot;  $0 enable web_servers web1&quot;
        echo &quot;  $0 disable web_servers web1&quot;
        echo &quot;  $0 weight web_servers web1 50&quot;
        echo &quot;  $0 drain web_servers web1&quot;
        echo &quot;  $0 sessions&quot;
        echo &quot;  $0 errors&quot;
        echo &quot;  $0 reload&quot;
        exit 1
        ;;
esac
EOF

sudo chmod +x /usr/local/bin/haproxy-manage.sh</code></pre>
      </div>
    </div>
<h3 id="automated-log-analysis" class="mobile-header">Automated Log Analysis</h3>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash">sudo tee /usr/local/bin/haproxy-log-analysis.sh &gt; /dev/null &lt;&lt;&#039;EOF&#039;
#!/bin/bash
LOG_FILE=&quot;/var/log/haproxy/haproxy.log&quot;
ANALYSIS_DIR=&quot;/var/log/haproxy-analysis&quot;
DATE=$(date +%Y%m%d_%H%M%S)

mkdir -p ${ANALYSIS_DIR}

# Top client IPs
echo &quot;Top Client IPs - ${DATE}&quot; &gt; ${ANALYSIS_DIR}/top-clients-${DATE}.txt
awk &#039;{print $6}&#039; ${LOG_FILE} | sort | uniq -c | sort -nr | head -20 &gt;&gt; ${ANALYSIS_DIR}/top-clients-${DATE}.txt

# Response time analysis
echo &quot;Response Time Analysis - ${DATE}&quot; &gt; ${ANALYSIS_DIR}/response-times-${DATE}.txt
awk &#039;{print $11}&#039; ${LOG_FILE} | grep -v &#039;^-$&#039; | sort -n | tail -100 &gt;&gt; ${ANALYSIS_DIR}/response-times-${DATE}.txt

# Error analysis
echo &quot;Error Analysis - ${DATE}&quot; &gt; ${ANALYSIS_DIR}/errors-${DATE}.txt
awk &#039;$10 &gt;= 400 {print $0}&#039; ${LOG_FILE} | tail -100 &gt;&gt; ${ANALYSIS_DIR}/errors-${DATE}.txt

# Backend server analysis
echo &quot;Backend Server Performance - ${DATE}&quot; &gt; ${ANALYSIS_DIR}/backend-performance-${DATE}.txt
awk &#039;{print $8}&#039; ${LOG_FILE} | sort | uniq -c | sort -nr &gt;&gt; ${ANALYSIS_DIR}/backend-performance-${DATE}.txt

# SSL/TLS analysis
echo &quot;SSL/TLS Analysis - ${DATE}&quot; &gt; ${ANALYSIS_DIR}/ssl-analysis-${DATE}.txt
grep &quot;SSL&quot; ${LOG_FILE} | tail -50 &gt;&gt; ${ANALYSIS_DIR}/ssl-analysis-${DATE}.txt

# Generate summary report
cat &gt; ${ANALYSIS_DIR}/summary-${DATE}.txt &lt;&lt;EOL
HAProxy Log Analysis Summary - ${DATE}
=====================================

Total Requests: $(wc -l &lt; ${LOG_FILE})
Unique IPs: $(awk &#039;{print $6}&#039; ${LOG_FILE} | sort -u | wc -l)
4xx Errors: $(awk &#039;$10 &gt;= 400 &amp;&amp; $10 &lt; 500 {print $0}&#039; ${LOG_FILE} | wc -l)
5xx Errors: $(awk &#039;$10 &gt;= 500 {print $0}&#039; ${LOG_FILE} | wc -l)

Average Response Time: $(awk &#039;{sum += $11; count++} END {print sum/count}&#039; ${LOG_FILE})ms

Top 5 Requested URLs:
$(awk &#039;{print $12}&#039; ${LOG_FILE} | sort | uniq -c | sort -nr | head -5)

Analysis completed at: $(date)
EOL

echo &quot;Log analysis completed. Reports in: ${ANALYSIS_DIR}/&quot;
EOF

sudo chmod +x /usr/local/bin/haproxy-log-analysis.sh

# Schedule daily log analysis
echo &quot;0 6 * * * root /usr/local/bin/haproxy-log-analysis.sh&quot; | sudo tee -a /etc/crontab</code></pre>
      </div>
    </div>
<h2 id="6-troubleshooting-cross-platform" class="mobile-header">6. Troubleshooting (Cross-Platform)</h2>
<h3 id="common-issues-and-solutions" class="mobile-header">Common Issues and Solutions</h3>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash"># Check HAProxy process status
ps aux | grep haproxy
systemctl status haproxy

# Configuration validation
haproxy -c -f /etc/haproxy/haproxy.cfg
haproxy -c -V -f /etc/haproxy/haproxy.cfg

# Socket connectivity test
socat - /run/haproxy/admin.sock
echo &quot;show info&quot; | socat stdio /run/haproxy/admin.sock

# Backend server connectivity test
for server in 192.168.1.10 192.168.1.11 192.168.1.12; do
    echo &quot;Testing $server...&quot;
    nc -zv $server 8080
    curl -I http://$server:8080/health
done

# SSL certificate issues
openssl x509 -in /etc/haproxy/ssl/example.com.pem -text -noout
openssl verify -CAfile /etc/haproxy/ssl/ca.crt /etc/haproxy/ssl/example.com.pem

# Memory usage debugging
pmap -x $(pgrep haproxy)
cat /proc/$(pgrep haproxy)/status | grep -E &quot;(VmSize|VmRSS|VmData|VmStk)&quot;

# Network debugging
ss -tulpn | grep haproxy
netstat -tulpn | grep haproxy
lsof -i :80,443,8404

# Log debugging
tail -f /var/log/haproxy/haproxy.log
journalctl -u haproxy -f

# Performance debugging
echo &quot;show stat&quot; | socat stdio /run/haproxy/admin.sock | grep -v &quot;^#&quot;
echo &quot;show sess&quot; | socat stdio /run/haproxy/admin.sock
echo &quot;show pools&quot; | socat stdio /run/haproxy/admin.sock

# Configuration debugging
haproxy -vv
haproxy -dM -f /etc/haproxy/haproxy.cfg  # Don&#039;t use in production

# Check for core dumps
find /var/crash -name &quot;haproxy*&quot; 2&gt;/dev/null
find /var/lib/systemd/coredump -name &quot;*haproxy*&quot; 2&gt;/dev/null</code></pre>
      </div>
    </div>
<h3 id="advanced-debugging" class="mobile-header">Advanced Debugging</h3>
<div class="mobile-code-block" data-language="bash">
      <div class="mobile-code-header">
        <span class="mobile-code-language">bash</span>
        <button class="mobile-copy-button" onclick="copyCode(this)" title="Copy code">
          <span class="copy-icon">📋</span>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <div class="mobile-code-content">
        <pre><code class="language-bash"># Enable debug logging
sudo systemctl edit haproxy.service
# Add:
[Service]
ExecStart=
ExecStart=/usr/sbin/haproxy -f /etc/haproxy/haproxy.cfg -p /run/haproxy.pid -S /run/haproxy-master.sock -d

sudo systemctl daemon-reload
sudo systemctl restart haproxy

# Real-time connection monitoring
watch -n 1 &#039;echo &quot;show stat&quot; | socat stdio /run/haproxy/admin.sock | grep -E &quot;FRONTEND|BACKEND&quot; | column -t -s &quot;,&quot;&#039;

# TCP dump for network analysis
tcpdump -i any -w haproxy-traffic.pcap port 80 or port 443
tcpdump -i any -w backend-traffic.pcap host 192.168.1.10

# Strace HAProxy process
strace -p $(pgrep haproxy) -e trace=network

# Monitor file descriptors
lsof -p $(pgrep haproxy) | wc -l
cat /proc/$(pgrep haproxy)/limits | grep &quot;Max open files&quot;

# Check shared memory segments
ipcs -m | grep haproxy

# Monitor syscalls
perf trace -p $(pgrep haproxy)</code></pre>
      </div>
    </div>
<h2 id="additional-resources" class="mobile-header">Additional Resources</h2>
<li class="mobile-list-item"><a href="https://docs.haproxy.org/" target="_blank" rel="noopener" class="mobile-link">Official Documentation</a></li>
<li class="mobile-list-item"><a href="https://cbonte.github.io/haproxy-dconv/" target="_blank" rel="noopener" class="mobile-link">HAProxy Configuration Manual</a></li>
<li class="mobile-list-item"><a href="https://www.haproxy.com/documentation/hapee/latest/configuration/best-practices/" target="_blank" rel="noopener" class="mobile-link">Best Practices Guide</a></li>
<li class="mobile-list-item"><a href="https://www.haproxy.com/blog/haproxy-performance-tuning/" target="_blank" rel="noopener" class="mobile-link">Performance Tuning Guide</a></li>
<li class="mobile-list-item"><a href="https://www.haproxy.com/solutions/security/" target="_blank" rel="noopener" class="mobile-link">Security Guide</a></li>
<li class="mobile-list-item"><a href="https://discourse.haproxy.org/" target="_blank" rel="noopener" class="mobile-link">Community Forum</a></li>
<p class="mobile-paragraph">---</p>
<p class="mobile-paragraph"><strong>Note:</strong> This guide is part of the <a href="https://howtomgr.github.io" target="_blank" rel="noopener" class="mobile-link">HowToMgr</a> collection.</p></div></article><section class="jsx-64efd206b36bc2dd related-section"><h2 class="jsx-64efd206b36bc2dd section-title">Related <!-- -->Load balancers<!-- --> Guides</h2><div class="jsx-64efd206b36bc2dd mobile-grid"><a class="mobile-card" href="/load-balancers/fabio/"><div class="jsx-64efd206b36bc2dd mobile-card-header"><h3 class="jsx-64efd206b36bc2dd mobile-card-title">fabio Installation Guide</h3><p class="jsx-64efd206b36bc2dd mobile-card-description">fabio is a free and open-source load balancer. Fabio provides fast, zero-conf load balancing HTTP/S router</p></div><div class="jsx-64efd206b36bc2dd mobile-card-meta"><span class="jsx-64efd206b36bc2dd mobile-badge mobile-badge-info">7 min</span></div></a><a class="mobile-card" href="/load-balancers/gobetween/"><div class="jsx-64efd206b36bc2dd mobile-card-header"><h3 class="jsx-64efd206b36bc2dd mobile-card-title">gobetween Installation Guide</h3><p class="jsx-64efd206b36bc2dd mobile-card-description">gobetween is a free and open-source load balancer. Gobetween provides modern, minimalistic load balancer</p></div><div class="jsx-64efd206b36bc2dd mobile-card-meta"><span class="jsx-64efd206b36bc2dd mobile-badge mobile-badge-info">7 min</span></div></a></div></section><nav class="jsx-64efd206b36bc2dd guide-navigation"><a class="btn btn-secondary" href="/load-balancers/">← All <!-- -->Load balancers</a><a class="btn btn-secondary" href="/">All Categories</a></nav></div></main><footer class="jsx-6ca0ba86c5b4bb40 mobile-footer"><div class="jsx-6ca0ba86c5b4bb40 container"><div class="jsx-6ca0ba86c5b4bb40 footer-content"><div class="jsx-6ca0ba86c5b4bb40 footer-links"><a href="/">Home</a><a href="https://github.com/howtomgr" target="_blank" rel="noopener" class="jsx-6ca0ba86c5b4bb40">GitHub</a><a href="https://github.com/howtomgr/howtomgr.github.io" target="_blank" rel="noopener" class="jsx-6ca0ba86c5b4bb40">Source</a></div><div class="jsx-6ca0ba86c5b4bb40 footer-separator"></div><p class="jsx-6ca0ba86c5b4bb40 footer-text">© <!-- -->2025<!-- --> HowToMgr Organization. Open source installation guides.</p><p class="jsx-6ca0ba86c5b4bb40 footer-tech">Built with ❤️ using Next.js + GitHub Pages</p><p class="jsx-6ca0ba86c5b4bb40 footer-disclaimer"><small class="jsx-6ca0ba86c5b4bb40">All guides are provided as-is. Please review and test before production use.</small></p></div></div></footer></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"guide":{"name":"haproxy","displayName":"HAProxy Installation Guide","slug":"haproxy","description":"High-performance TCP/HTTP load balancer and reverse proxy for distributing traffic across multiple backend servers. Industry standard for load balancing with enterprise-grade security and reliability.","category":"load-balancers","subcategory":"load-balancers","difficultyLevel":"intermediate","estimatedSetupTime":"15-30 minutes","supportedOS":["rhel","centos","rocky","almalinux","arch","alpine"],"defaultPorts":[1,53,80,443,514,3000,3001,3002,3003,3004,3306,4096,5432,6379,8080,8404,8405,9000,9101],"installationMethods":["native-packages","source-compilation"],"features":["multi-os-support","comprehensive-documentation","security-hardening","performance-optimization","backup-restore-procedures","troubleshooting-guides"],"tags":["load-balancers","containerization","observability","data-storage","web-services","networking","security","data-protection"],"maintenanceStatus":"active","specVersion":"2.0","version":"1.0.0","license":"Open Source","websiteUrl":"https://howtomgr.github.io/load-balancers/haproxy","documentationUrl":"https://howtomgr.github.io/load-balancers/haproxy","language":null,"stars":0,"forks":0,"topics":[],"githubUrl":"https://github.com/howtomgr/haproxy","updatedAt":"2025-09-16T17:18:20Z","createdAt":"2025-09-08T03:08:23Z","readmeRaw":"# HAProxy Installation Guide\n\nHigh-performance TCP/HTTP load balancer and reverse proxy for distributing traffic across multiple backend servers. Industry standard for load balancing with enterprise-grade security and reliability.\n\n## Table of Contents\n1. [Prerequisites](#prerequisites)\n2. [Supported Operating Systems](#supported-operating-systems)\n3. [Installation](#installation)\n4. [Configuration](#configuration)\n5. [Service Management](#service-management)\n6. [Troubleshooting](#troubleshooting)\n7. [Security Considerations](#security-considerations)\n8. [Performance Tuning](#performance-tuning)\n9. [Backup and Restore](#backup-and-restore)\n10. [System Requirements](#system-requirements)\n11. [Support](#support)\n12. [Contributing](#contributing)\n13. [License](#license)\n14. [Acknowledgments](#acknowledgments)\n15. [Version History](#version-history)\n16. [Appendices](#appendices)\n\n## 1. Prerequisites\n\n- Linux system (any modern distribution)\n- Root or sudo access\n- 2GB RAM minimum, 4GB+ recommended for high-traffic environments\n- Multiple backend servers to load balance (optional for testing)\n- SSL certificates for production HTTPS termination\n\n\n## 2. Supported Operating Systems\n\nThis guide supports installation on:\n- RHEL 8/9 and derivatives (CentOS Stream, Rocky Linux, AlmaLinux)\n- Debian 11/12\n- Ubuntu 20.04/22.04/24.04 LTS\n- Arch Linux (rolling release)\n- Alpine Linux 3.18+\n- openSUSE Leap 15.5+ / Tumbleweed\n- SUSE Linux Enterprise Server (SLES) 15+\n- macOS 12+ (Monterey and later) \n- FreeBSD 13+\n- Windows 10/11/Server 2019+ (where applicable)\n\n## 3. Installation\n\n### Using Package Manager (Recommended)\n\n#### Ubuntu/Debian\n```bash\n# Update package list\nsudo apt-get update\n\n# Install HAProxy and utilities\nsudo apt-get install -y haproxy haproxy-doc software-properties-common\n\n# For latest version from PPA\nsudo add-apt-repository ppa:vbernat/haproxy-2.8\nsudo apt-get update\nsudo apt-get install -y haproxy=2.8.*\n\n# Enable and start HAProxy\nsudo systemctl enable --now haproxy\n\n# Check status\nsudo systemctl status haproxy\n```\n\n#### RHEL/CentOS/Rocky Linux/AlmaLinux\n```bash\n# Install EPEL repository\nsudo yum install -y epel-release\n\n# Install HAProxy\nsudo yum install -y haproxy\n\n# For newer versions\nsudo dnf install -y haproxy\n\n# Enable and start HAProxy\nsudo systemctl enable --now haproxy\n\n# Check status\nsudo systemctl status haproxy\n```\n\n#### Fedora\n```bash\n# Install HAProxy\nsudo dnf install -y haproxy\n\n# Enable and start HAProxy\nsudo systemctl enable --now haproxy\n\n# Configure firewall\nsudo firewall-cmd --permanent --add-service=http\nsudo firewall-cmd --permanent --add-service=https\nsudo firewall-cmd --permanent --add-port=8404/tcp  # Stats interface\nsudo firewall-cmd --reload\n```\n\n#### Arch Linux\n```bash\n# Install HAProxy\nsudo pacman -Syu haproxy\n\n# Enable and start HAProxy\nsudo systemctl enable --now haproxy\n\n# Check status\nsudo systemctl status haproxy\n```\n\n#### Alpine Linux\n```bash\n# Install HAProxy\nsudo apk update\nsudo apk add haproxy\n\n# Enable and start HAProxy\nsudo rc-update add haproxy default\nsudo service haproxy start\n```\n\n### From Source (Latest Features)\n```bash\n# Install build dependencies\n# Ubuntu/Debian\nsudo apt-get install -y build-essential libssl-dev libpcre3-dev zlib1g-dev liblua5.3-dev libsystemd-dev\n\n# RHEL/CentOS\nsudo yum groupinstall -y \"Development Tools\"\nsudo yum install -y openssl-devel pcre-devel zlib-devel lua-devel systemd-devel\n\n# Download latest HAProxy LTS\nHAPROXY_VERSION=\"3.0.5\"\ncd /tmp\nwget \"https://www.haproxy.org/download/3.0/src/haproxy-${HAPROXY_VERSION}.tar.gz\"\ntar xzf haproxy-${HAPROXY_VERSION}.tar.gz\ncd haproxy-${HAPROXY_VERSION}\n\n# Compile with full features\nmake clean\nmake -j$(nproc) TARGET=linux-glibc \\\n    USE_OPENSSL=1 \\\n    USE_ZLIB=1 \\\n    USE_PCRE=1 \\\n    USE_SYSTEMD=1 \\\n    USE_LUA=1 \\\n    USE_PROMEX=1 \\\n    USE_THREAD=1 \\\n    USE_CPU_AFFINITY=1 \\\n    USE_TFO=1 \\\n    USE_NS=1 \\\n    USE_DL=1 \\\n    USE_RT=1\n\n# Install HAProxy\nsudo make install\nsudo mkdir -p /etc/haproxy /var/lib/haproxy /var/log/haproxy\nsudo useradd --system --home /var/lib/haproxy --shell /bin/false haproxy\nsudo chown -R haproxy:haproxy /var/lib/haproxy /var/log/haproxy\n\n# Create systemd service\nsudo tee /etc/systemd/system/haproxy.service \u003e /dev/null \u003c\u003cEOF\n[Unit]\nDescription=HAProxy Load Balancer\nDocumentation=man:haproxy(1)\nDocumentation=file:/usr/share/doc/haproxy/configuration.txt\nAfter=network.target\n\n[Service]\nType=notify\nExecStart=/usr/local/sbin/haproxy -f /etc/haproxy/haproxy.cfg -p /run/haproxy.pid -S /run/haproxy-master.sock\nExecReload=/bin/kill -USR2 \\$MAINPID\nExecStop=/bin/kill -USR1 \\$MAINPID\nKillMode=mixed\nRestart=on-failure\nSuccessExitStatus=143\nKillSignal=SIGTERM\n\n# Security settings\nNoNewPrivileges=true\nPrivateTmp=true\nProtectHome=true\nProtectSystem=strict\nReadWritePaths=/var/lib/haproxy\nReadWritePaths=/var/log/haproxy\nReadWritePaths=/run\n\n[Install]\nWantedBy=multi-user.target\nEOF\n\nsudo systemctl daemon-reload\nsudo systemctl enable --now haproxy\n```\n\n### Using Docker\n```bash\n# Create HAProxy configuration directory\nmkdir -p ~/haproxy/{config,ssl,logs}\n\n# Create basic configuration\ncat \u003e ~/haproxy/config/haproxy.cfg \u003c\u003cEOF\nglobal\n    log stdout local0\n    chroot /var/lib/haproxy\n    stats socket /run/haproxy/admin.sock mode 660 level admin expose-fd listeners\n    stats timeout 30s\n    user haproxy\n    group haproxy\n    daemon\n    \n    # SSL configuration\n    ssl-default-bind-ciphers ECDHE+AESGCM:ECDHE+CHACHA20:DHE+AESGCM:DHE+CHACHA20:!aNULL:!MD5:!DSS\n    ssl-default-bind-options ssl-min-ver TLSv1.2 no-tls-tickets\n    ssl-default-server-ciphers ECDHE+AESGCM:ECDHE+CHACHA20:DHE+AESGCM:DHE+CHACHA20:!aNULL:!MD5:!DSS\n    ssl-default-server-options ssl-min-ver TLSv1.2 no-tls-tickets\n\ndefaults\n    mode http\n    log global\n    option httplog\n    option dontlognull\n    option log-health-checks\n    option forwardfor\n    option http-server-close\n    timeout connect 5000\n    timeout client 50000\n    timeout server 50000\n    timeout http-keep-alive 4000\n    timeout check 3000\n\n# Frontend\nfrontend web_frontend\n    bind *:80\n    bind *:443 ssl crt /usr/local/etc/haproxy/ssl/ alpn h2,http/1.1\n    \n    # Redirect HTTP to HTTPS\n    redirect scheme https code 301 if !{ ssl_fc }\n    \n    # Security headers\n    http-response set-header Strict-Transport-Security \"max-age=31536000; includeSubDomains; preload\"\n    http-response set-header X-Frame-Options \"SAMEORIGIN\"\n    http-response set-header X-Content-Type-Options \"nosniff\"\n    http-response set-header X-XSS-Protection \"1; mode=block\"\n    \n    default_backend web_servers\n\n# Backend\nbackend web_servers\n    balance roundrobin\n    option httpchk GET /health\n    http-check expect status 200\n    server web1 192.168.1.10:8080 check\n    server web2 192.168.1.11:8080 check\n    server web3 192.168.1.12:8080 check\n\n# Stats interface\nlisten stats\n    bind *:8404\n    stats enable\n    stats uri /stats\n    stats refresh 30s\n    stats admin if TRUE\nEOF\n\n# Run HAProxy container\ndocker run -d \\\n  --name haproxy \\\n  --restart unless-stopped \\\n  -p 80:80 \\\n  -p 443:443 \\\n  -p 8404:8404 \\\n  -v ~/haproxy/config:/usr/local/etc/haproxy:ro \\\n  -v ~/haproxy/ssl:/usr/local/etc/haproxy/ssl:ro \\\n  -v ~/haproxy/logs:/var/log/haproxy \\\n  haproxy:latest\n```\n\n## Production Configuration\n\n### Enterprise Production Configuration\n```bash\n# Backup original configuration\nsudo cp /etc/haproxy/haproxy.cfg /etc/haproxy/haproxy.cfg.backup\n\n# Create comprehensive production configuration\nsudo tee /etc/haproxy/haproxy.cfg \u003e /dev/null \u003c\u003cEOF\n#---------------------------------------------------------------------\n# HAProxy Enterprise Production Configuration\n# Version: 3.0+ LTS\n#---------------------------------------------------------------------\n\nglobal\n    log 127.0.0.1:514 local0 info\n    chroot /var/lib/haproxy\n    stats socket /run/haproxy/admin.sock mode 660 level admin expose-fd listeners\n    stats timeout 30s\n    user haproxy\n    group haproxy\n    daemon\n\n    # SSL/TLS configuration (2024 best practices)\n    ssl-default-bind-ciphers ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-CHACHA20-POLY1305:ECDHE-RSA-CHACHA20-POLY1305:DHE-RSA-AES128-GCM-SHA256:DHE-RSA-AES256-GCM-SHA384\n    ssl-default-bind-ciphersuites TLS_AES_128_GCM_SHA256:TLS_AES_256_GCM_SHA384:TLS_CHACHA20_POLY1305_SHA256\n    ssl-default-bind-options ssl-min-ver TLSv1.2 no-tls-tickets prefer-client-ciphers\n    \n    ssl-default-server-ciphers ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384\n    ssl-default-server-ciphersuites TLS_AES_128_GCM_SHA256:TLS_AES_256_GCM_SHA384:TLS_CHACHA20_POLY1305_SHA256\n    ssl-default-server-options ssl-min-ver TLSv1.2 no-tls-tickets\n\n    # DH parameters for perfect forward secrecy\n    ssl-dh-param-file /etc/haproxy/ssl/dhparam.pem\n    \n    # Performance tuning\n    maxconn 40000\n    nbthread 4\n    cpu-map auto:1/1-4 0-3\n    \n    # Logging\n    log-tag haproxy-prod\n    \n    # Security\n    insecure-fork-wanted\n    insecure-setuid-wanted\n\ndefaults\n    mode http\n    log global\n    option httplog\n    option dontlognull\n    option log-health-checks\n    option forwardfor except 127.0.0.0/8\n    option http-server-close\n    option redispatch\n    \n    # Timeouts\n    timeout connect 10s\n    timeout client 1m\n    timeout server 1m\n    timeout http-keep-alive 10s\n    timeout check 10s\n    timeout tunnel 2h\n    \n    # Retries\n    retries 3\n    \n    # Compression\n    compression algo gzip\n    compression type text/html text/css text/javascript application/javascript application/json application/xml\n    \n    # Default error pages\n    errorfile 400 /etc/haproxy/errors/400.http\n    errorfile 403 /etc/haproxy/errors/403.http\n    errorfile 408 /etc/haproxy/errors/408.http\n    errorfile 500 /etc/haproxy/errors/500.http\n    errorfile 502 /etc/haproxy/errors/502.http\n    errorfile 503 /etc/haproxy/errors/503.http\n    errorfile 504 /etc/haproxy/errors/504.http\n\n#---------------------------------------------------------------------\n# Frontend Configuration\n#---------------------------------------------------------------------\n\nfrontend web_frontend\n    bind *:80\n    bind *:443 ssl crt /etc/haproxy/ssl/ alpn h2,http/1.1 crt-ignore-err all\n    \n    # Security headers\n    http-response set-header Strict-Transport-Security \"max-age=31536000; includeSubDomains; preload\"\n    http-response set-header X-Frame-Options \"SAMEORIGIN\"\n    http-response set-header X-Content-Type-Options \"nosniff\"\n    http-response set-header X-XSS-Protection \"1; mode=block\"\n    http-response set-header Referrer-Policy \"strict-origin-when-cross-origin\"\n    http-response set-header Content-Security-Policy \"default-src 'self'; script-src 'self' 'unsafe-inline'; style-src 'self' 'unsafe-inline'\"\n    \n    # Rate limiting\n    stick-table type ip size 100k expire 30s store http_req_rate(10s)\n    http-request track-sc0 src\n    http-request deny if { sc_http_req_rate(0) gt 20 }\n    \n    # Block bad bots and crawlers\n    acl is_bot hdr_sub(User-Agent) -i bot crawler spider scraper\n    http-request deny if is_bot\n    \n    # ACLs for routing\n    acl is_api path_beg /api/\n    acl is_admin path_beg /admin/\n    acl is_static path_beg /static/ /css/ /js/ /images/\n    acl is_websocket hdr(Upgrade) -i websocket\n    \n    # Force HTTPS\n    redirect scheme https code 301 if !{ ssl_fc }\n    \n    # Routing rules\n    use_backend api_servers if is_api\n    use_backend admin_servers if is_admin\n    use_backend static_servers if is_static\n    use_backend websocket_servers if is_websocket\n    default_backend web_servers\n\n#---------------------------------------------------------------------\n# Backend Configurations\n#---------------------------------------------------------------------\n\n# Main web servers\nbackend web_servers\n    balance leastconn\n    option httpchk GET /health HTTP/1.1\\r\\nHost:\\ example.com\n    http-check expect status 200\n    \n    # Health check configuration\n    default-server inter 2000 rise 2 fall 3 slowstart 60s maxconn 250 maxqueue 256 weight 100\n    \n    server web1 192.168.1.10:8080 check cookie web1\n    server web2 192.168.1.11:8080 check cookie web2\n    server web3 192.168.1.12:8080 check cookie web3\n    server web4 192.168.1.13:8080 check cookie web4 backup\n    \n    # Stick table for session persistence\n    stick-table type ip size 200k expire 30m\n    stick on src\n\n# API servers backend\nbackend api_servers\n    balance roundrobin\n    option httpchk GET /api/health HTTP/1.1\\r\\nHost:\\ api.example.com\n    http-check expect rstring ^OK$\n    \n    # Enable HTTP/2 to backend\n    server api1 192.168.1.20:3000 check proto h2 verify none\n    server api2 192.168.1.21:3000 check proto h2 verify none\n    server api3 192.168.1.22:3000 check proto h2 verify none\n\n# Admin backend (restricted access)\nbackend admin_servers\n    balance source\n    option httpchk GET /admin/health\n    http-check expect status 200\n    \n    # IP whitelist for admin access\n    http-request deny unless { src 192.168.1.0/24 10.0.0.0/8 }\n    \n    server admin1 192.168.1.30:9000 check\n\n# Static content servers\nbackend static_servers\n    balance roundrobin\n    option httpchk GET /health.txt\n    http-check expect string \"OK\"\n    \n    # Cache control\n    http-response set-header Cache-Control \"public, max-age=86400\"\n    \n    server static1 192.168.1.40:8080 check\n    server static2 192.168.1.41:8080 check\n\n# WebSocket servers\nbackend websocket_servers\n    balance leastconn\n    option httpchk GET /ws/health\n    http-check expect status 101\n    \n    # WebSocket specific settings\n    timeout tunnel 3600s\n    \n    server ws1 192.168.1.50:8080 check\n    server ws2 192.168.1.51:8080 check\n\n#---------------------------------------------------------------------\n# Database Load Balancing (TCP Mode)\n#---------------------------------------------------------------------\n\n# MySQL Master-Slave Load Balancing\nfrontend mysql_frontend\n    bind *:3306\n    mode tcp\n    default_backend mysql_servers\n\nbackend mysql_servers\n    mode tcp\n    balance leastconn\n    option mysql-check user haproxy_check\n    \n    # MySQL health checks\n    server mysql-master 192.168.1.60:3306 check weight 1000\n    server mysql-slave1 192.168.1.61:3306 check weight 100 backup\n    server mysql-slave2 192.168.1.62:3306 check weight 100 backup\n\n# PostgreSQL Load Balancing\nfrontend postgresql_frontend\n    bind *:5432\n    mode tcp\n    default_backend postgresql_servers\n\nbackend postgresql_servers\n    mode tcp\n    balance roundrobin\n    option pgsql-check user haproxy_check\n    \n    server postgres1 192.168.1.70:5432 check\n    server postgres2 192.168.1.71:5432 check\n\n# Redis Cluster Load Balancing\nfrontend redis_frontend\n    bind *:6379\n    mode tcp\n    default_backend redis_servers\n\nbackend redis_servers\n    mode tcp\n    balance first\n    option redis-check\n    \n    server redis1 192.168.1.80:6379 check\n    server redis2 192.168.1.81:6379 check backup\n\n#---------------------------------------------------------------------\n# Statistics and Monitoring\n#---------------------------------------------------------------------\n\nlisten stats\n    bind *:8404\n    stats enable\n    stats uri /stats\n    stats refresh 30s\n    stats admin if { src 192.168.1.0/24 }\n    stats auth admin:secure_stats_password\n    \n    # Enhanced statistics\n    stats show-legends\n    stats show-modules\n    stats realm \"HAProxy Statistics\"\n    \n    # Prometheus metrics (if compiled with USE_PROMEX)\n    http-request use-service prometheus-exporter if { path /metrics }\n\n#---------------------------------------------------------------------\n# Advanced Features\n#---------------------------------------------------------------------\n\n# Global rate limiting\nbackend rate_limit_backend\n    stick-table type ip size 100k expire 30s store gpc0,http_req_rate(10s)\n\n# DDoS protection\nfrontend ddos_protection\n    bind *:80\n    \n    # Track client IPs\n    stick-table type ip size 100k expire 30s store gpc0,http_req_rate(10s),http_err_rate(10s)\n    http-request track-sc0 src table rate_limit_backend\n    \n    # Block clients exceeding rate limits\n    http-request deny if { sc_http_req_rate(0) gt 50 }\n    http-request deny if { sc_http_err_rate(0) gt 10 }\n    \n    default_backend web_servers\n\n# Health check backend for external monitoring\nbackend health_check\n    mode http\n    http-request return status 200 content-type text/plain string \"HAProxy is healthy\"\nEOF\n\n# Test configuration\nsudo haproxy -c -f ~/haproxy/config/haproxy.cfg\n```\n\n## SSL/TLS Configuration and Security\n\n### Advanced SSL Termination\n```bash\n# Generate strong DH parameters\nsudo openssl dhparam -out /etc/haproxy/ssl/dhparam.pem 4096\n\n# Create SSL certificate bundle\nsudo mkdir -p /etc/haproxy/ssl\n\n# Self-signed certificate for testing\nsudo openssl req -x509 -nodes -days 365 -newkey rsa:4096 \\\n  -keyout /etc/haproxy/ssl/example.com.key \\\n  -out /etc/haproxy/ssl/example.com.crt \\\n  -subj \"/C=US/ST=State/L=City/O=Organization/CN=example.com\"\n\n# Combine certificate and key for HAProxy\nsudo cat /etc/haproxy/ssl/example.com.crt /etc/haproxy/ssl/example.com.key | sudo tee /etc/haproxy/ssl/example.com.pem\n\n# Production: Let's Encrypt certificates\nsudo certbot certonly --standalone -d example.com -d www.example.com\nsudo cat /etc/letsencrypt/live/example.com/fullchain.pem /etc/letsencrypt/live/example.com/privkey.pem | sudo tee /etc/haproxy/ssl/example.com.pem\n\n# Set proper permissions\nsudo chmod 600 /etc/haproxy/ssl/*.pem\nsudo chown haproxy:haproxy /etc/haproxy/ssl/*.pem\n\n# Create certificate renewal script\nsudo tee /usr/local/bin/haproxy-ssl-renewal.sh \u003e /dev/null \u003c\u003c'EOF'\n#!/bin/bash\nCERT_PATH=\"/etc/letsencrypt/live\"\nHAPROXY_CERT_DIR=\"/etc/haproxy/ssl\"\n\n# Renew certificates\ncertbot renew --quiet --pre-hook \"systemctl stop haproxy\" --post-hook \"systemctl start haproxy\"\n\n# Update HAProxy certificate bundles\nfor domain in $(ls ${CERT_PATH}/); do\n    if [ -f \"${CERT_PATH}/${domain}/fullchain.pem\" ]; then\n        cat \"${CERT_PATH}/${domain}/fullchain.pem\" \"${CERT_PATH}/${domain}/privkey.pem\" \u003e \"${HAPROXY_CERT_DIR}/${domain}.pem\"\n        chmod 600 \"${HAPROXY_CERT_DIR}/${domain}.pem\"\n        chown haproxy:haproxy \"${HAPROXY_CERT_DIR}/${domain}.pem\"\n    fi\ndone\n\n# Reload HAProxy configuration\nsystemctl reload haproxy\n\necho \"SSL certificates updated for HAProxy\"\nEOF\n\nsudo chmod +x /usr/local/bin/haproxy-ssl-renewal.sh\n\n# Schedule certificate renewal\necho \"0 3 * * 1 root /usr/local/bin/haproxy-ssl-renewal.sh\" | sudo tee -a /etc/crontab\n```\n\n### Security Hardening Configuration\n```bash\n# Create security-focused configuration additions\nsudo tee /etc/haproxy/conf.d/security.cfg \u003e /dev/null \u003c\u003cEOF\n#---------------------------------------------------------------------\n# Security Configuration\n#---------------------------------------------------------------------\n\nglobal\n    # Security settings\n    tune.ssl.default-dh-param 2048\n    tune.ssl.capture-buffer-size 0\n    tune.ssl.maxrecord 1460\n    \n    # Disable SSLv3 and weak ciphers\n    ssl-default-bind-options no-sslv3 no-tlsv10 no-tlsv11\n\ndefaults\n    # Hide server information\n    option hide-version\n    \n    # Security headers for all responses\n    http-response del-header Server\n    http-response del-header X-Powered-By\n    \n    # Request size limits\n    http-request deny if { req.body_size gt 10000000 }  # 10MB limit\n    \n    # Block suspicious request methods\n    acl blocked_methods method TRACE CONNECT\n    http-request deny if blocked_methods\n    \n    # Block requests with suspicious headers\n    acl suspicious_headers hdr_cnt(host) gt 1\n    acl suspicious_headers hdr_cnt(content-length) gt 1\n    http-request deny if suspicious_headers\n\n# Rate limiting configuration\nbackend rate_limit_abuse\n    stick-table type ip size 100k expire 30s store gpc0,gpc1,http_req_rate(10s),http_err_rate(10s),conn_rate(10s)\n\nfrontend rate_limiting\n    # Track requests per IP\n    http-request track-sc0 src table rate_limit_abuse\n    \n    # Deny clients that exceed rate limits\n    http-request deny if { sc_http_req_rate(0) gt 100 }\n    http-request deny if { sc_conn_rate(0) gt 20 }\n    http-request deny if { sc_http_err_rate(0) gt 10 }\n    \n    # Slow down abusive clients\n    http-request set-var(req.delay) int(1000) if { sc_http_req_rate(0) gt 50 }\n    http-request lua.delay_request if { var(req.delay) -m found }\n\n# WAF-like filtering\nfrontend security_frontend\n    # Block common attacks\n    acl is_sql_injection path_reg -i .*(union|select|insert|delete|update|drop|create|alter|exec|script|javascript|vbscript|onload|onerror|onclick).*\n    acl is_xss path_reg -i .*(script|iframe|object|embed|form|img|svg|math|details|svg).*\n    acl is_path_traversal path_reg -i .*(\\.\\./|\\.\\.\\\\|%2e%2e%2f|%2e%2e\\\\).*\n    \n    http-request deny if is_sql_injection\n    http-request deny if is_xss\n    http-request deny if is_path_traversal\n    \n    # GeoIP blocking (requires GeoIP data)\n    # http-request deny if { src,map_ip(/etc/haproxy/geoip/country.map) -i CN RU }\n\nEOF\n\n# Include security configuration\necho \"include /etc/haproxy/conf.d/*.cfg\" | sudo tee -a /etc/haproxy/haproxy.cfg\n```\n\n## Advanced Load Balancing Strategies\n\n### Multi-Tier Application Load Balancing\n```bash\nsudo tee /etc/haproxy/haproxy.cfg \u003e /dev/null \u003c\u003cEOF\nglobal\n    log stdout local0\n    stats socket /run/haproxy/admin.sock mode 660 level admin\n    user haproxy\n    group haproxy\n    daemon\n\ndefaults\n    mode http\n    log global\n    option httplog\n    option dontlognull\n    timeout connect 5s\n    timeout client 50s\n    timeout server 50s\n\n#---------------------------------------------------------------------\n# Application Frontend with Advanced Routing\n#---------------------------------------------------------------------\n\nfrontend app_frontend\n    bind *:443 ssl crt /etc/haproxy/ssl/ alpn h2,http/1.1\n    \n    # ACLs for microservices routing\n    acl is_user_service path_beg /api/users/\n    acl is_order_service path_beg /api/orders/\n    acl is_payment_service path_beg /api/payments/\n    acl is_notification_service path_beg /api/notifications/\n    acl is_admin_panel path_beg /admin/\n    acl is_monitoring path_beg /monitoring/\n    \n    # Geographic routing\n    acl is_us_traffic src 192.168.1.0/24\n    acl is_eu_traffic src 192.168.2.0/24\n    acl is_asia_traffic src 192.168.3.0/24\n    \n    # Device detection\n    acl is_mobile hdr_reg(User-Agent) -i (mobile|android|iphone|ipad)\n    acl is_desktop hdr_reg(User-Agent) -i (windows|macos|linux)\n    \n    # Routing decisions\n    use_backend user_service_us if is_user_service is_us_traffic\n    use_backend user_service_eu if is_user_service is_eu_traffic\n    use_backend order_service if is_order_service\n    use_backend payment_service if is_payment_service\n    use_backend notification_service if is_notification_service\n    use_backend admin_panel if is_admin_panel\n    use_backend monitoring_backend if is_monitoring\n    use_backend mobile_servers if is_mobile\n    default_backend web_servers\n\n# User Service Backends (Geographic)\nbackend user_service_us\n    balance roundrobin\n    option httpchk GET /api/users/health\n    http-check expect status 200\n    server user-us-1 192.168.1.100:3001 check\n    server user-us-2 192.168.1.101:3001 check\n    server user-us-3 192.168.1.102:3001 check\n\nbackend user_service_eu\n    balance roundrobin\n    option httpchk GET /api/users/health\n    server user-eu-1 192.168.2.100:3001 check\n    server user-eu-2 192.168.2.101:3001 check\n\n# Microservices Backends\nbackend order_service\n    balance leastconn\n    option httpchk GET /api/orders/health\n    server order-1 192.168.1.110:3002 check\n    server order-2 192.168.1.111:3002 check\n    server order-3 192.168.1.112:3002 check\n\nbackend payment_service\n    balance roundrobin\n    option httpchk GET /api/payments/health\n    # Enhanced security for payment service\n    http-request set-header X-Forwarded-Proto https\n    http-request add-header X-Client-IP %[src]\n    server payment-1 192.168.1.120:3003 check ssl verify none\n    server payment-2 192.168.1.121:3003 check ssl verify none\n\nbackend notification_service\n    balance roundrobin\n    option httpchk GET /api/notifications/health\n    server notification-1 192.168.1.130:3004 check\n    server notification-2 192.168.1.131:3004 check\n\n# Admin Panel Backend (Restricted)\nbackend admin_panel\n    balance source\n    option httpchk GET /admin/health\n    http-check expect status 200\n    \n    # Additional security\n    http-request add-header X-Admin-Access \"true\"\n    timeout server 2m\n    \n    server admin-1 192.168.1.140:9000 check\n\n# Mobile-Optimized Backend\nbackend mobile_servers\n    balance roundrobin\n    option httpchk GET /mobile/health\n    # Mobile-specific optimizations\n    compression algo gzip\n    compression type text/html text/css application/javascript application/json\n    server mobile-1 192.168.1.150:8080 check\n    server mobile-2 192.168.1.151:8080 check\n\n#---------------------------------------------------------------------\n# Monitoring and Statistics\n#---------------------------------------------------------------------\n\nlisten stats\n    bind *:8404 ssl crt /etc/haproxy/ssl/stats.pem\n    stats enable\n    stats uri /\n    stats refresh 5s\n    stats admin if { src 192.168.1.0/24 }\n    stats auth admin:secure_stats_password\n    stats realm \"HAProxy Statistics\"\n    \n    # Prometheus metrics endpoint\n    http-request use-service prometheus-exporter if { path /metrics }\n    \n    # JSON stats API\n    http-request use-service prometheus-exporter if { path /stats/json }\n\n# Health check endpoint for external monitoring\nlisten health_check\n    bind *:8080\n    mode http\n    monitor-uri /health\n    option httplog\n    \n    acl site_dead nbsrv(web_servers) lt 1\n    acl api_dead nbsrv(api_servers) lt 1\n    \n    monitor fail if site_dead\n    monitor fail if api_dead\nEOF\n```\n\n### Global Load Balancing with DNS\n```bash\n# Integration with external DNS load balancing\nsudo tee /etc/haproxy/haproxy-dns.cfg \u003e /dev/null \u003c\u003cEOF\nglobal\n    # DNS resolution for dynamic backends\n    dns-resolver dns1\n        nameserver dns1 8.8.8.8:53\n        nameserver dns2 8.8.4.4:53\n        resolve_retries 3\n        timeout retry 1s\n        hold nx 30s\n        hold other 30s\n        hold refused 30s\n        hold timeout 30s\n        hold valid 10s\n\ndefaults\n    mode http\n    timeout connect 5s\n    timeout client 30s\n    timeout server 30s\n\n# Dynamic backend resolution\nbackend dynamic_backend\n    balance roundrobin\n    option httpchk GET /health\n    \n    # Servers resolved via DNS\n    server-template web- 3 web.example.com:80 check resolvers dns1\n    server-template api- 2 api.example.com:80 check resolvers dns1\n\n# Service discovery integration\nbackend consul_backend\n    balance roundrobin\n    option httpchk GET /health\n    \n    # Consul service discovery\n    server-template consul- 3 _web._tcp.service.consul:80 check resolvers dns1\nEOF\n```\n\n## High Availability and Clustering\n\n### HAProxy Keepalived Setup\n```bash\n# Install keepalived for HA\nsudo apt install -y keepalived  # Ubuntu/Debian\nsudo yum install -y keepalived  # RHEL/CentOS\n\n# Configure keepalived on primary HAProxy\nsudo tee /etc/keepalived/keepalived.conf \u003e /dev/null \u003c\u003cEOF\n! Configuration File for keepalived\n\nglobal_defs {\n    router_id HAProxy_Primary\n    vrrp_skip_check_adv_addr\n    vrrp_strict\n    vrrp_garp_interval 0\n    vrrp_gna_interval 0\n    script_user root\n    enable_script_security\n}\n\n# Health check script\nvrrp_script chk_haproxy {\n    script \"/usr/bin/killall -0 haproxy\"\n    interval 2\n    weight 2\n    fall 3\n    rise 2\n}\n\nvrrp_instance VI_1 {\n    state MASTER\n    interface eth0\n    virtual_router_id 51\n    priority 110\n    advert_int 1\n    authentication {\n        auth_type PASS\n        auth_pass secure_vrrp_password\n    }\n    virtual_ipaddress {\n        192.168.1.100/24\n    }\n    track_script {\n        chk_haproxy\n    }\n    notify_master /etc/keepalived/master.sh\n    notify_backup /etc/keepalived/backup.sh\n}\nEOF\n\n# Create notification scripts\nsudo tee /etc/keepalived/master.sh \u003e /dev/null \u003c\u003c'EOF'\n#!/bin/bash\necho \"$(date): Became MASTER\" \u003e\u003e /var/log/keepalived.log\n# Add any additional master setup commands here\nEOF\n\nsudo tee /etc/keepalived/backup.sh \u003e /dev/null \u003c\u003c'EOF'\n#!/bin/bash\necho \"$(date): Became BACKUP\" \u003e\u003e /var/log/keepalived.log\n# Add any additional backup setup commands here\nEOF\n\nsudo chmod +x /etc/keepalived/{master,backup}.sh\nsudo systemctl enable --now keepalived\n\n# Configure backup HAProxy with lower priority (100 instead of 110)\n```\n\n### Multi-Site Load Balancing\n```bash\n# Configure multi-site load balancing\nsudo tee /etc/haproxy/haproxy-multisite.cfg \u003e /dev/null \u003c\u003cEOF\nglobal\n    log stdout local0\n    stats socket /run/haproxy/admin.sock mode 660 level admin\n    user haproxy\n    group haproxy\n    daemon\n\ndefaults\n    mode http\n    log global\n    option httplog\n    timeout connect 5s\n    timeout client 30s\n    timeout server 30s\n\n# Frontend for multi-site routing\nfrontend multisite_frontend\n    bind *:443 ssl crt /etc/haproxy/ssl/ alpn h2,http/1.1\n    \n    # Site detection based on headers\n    acl is_site_a hdr(host) -i site-a.example.com\n    acl is_site_b hdr(host) -i site-b.example.com\n    acl is_site_c hdr(host) -i site-c.example.com\n    \n    # Geographic routing based on source IP\n    acl is_americas src 10.1.0.0/16\n    acl is_europe src 10.2.0.0/16\n    acl is_asia src 10.3.0.0/16\n    \n    # Route to appropriate backends\n    use_backend site_a_americas if is_site_a is_americas\n    use_backend site_a_europe if is_site_a is_europe\n    use_backend site_a_asia if is_site_a is_asia\n    use_backend site_b_backend if is_site_b\n    use_backend site_c_backend if is_site_c\n    \n    default_backend default_site\n\n# Regional backends\nbackend site_a_americas\n    balance leastconn\n    option httpchk GET /health\n    server site-a-us-1 us-east-1.example.com:80 check\n    server site-a-us-2 us-west-2.example.com:80 check\n\nbackend site_a_europe\n    balance leastconn\n    option httpchk GET /health\n    server site-a-eu-1 eu-west-1.example.com:80 check\n    server site-a-eu-2 eu-central-1.example.com:80 check\n\nbackend site_a_asia\n    balance leastconn\n    option httpchk GET /health\n    server site-a-ap-1 ap-southeast-1.example.com:80 check\n    server site-a-ap-2 ap-northeast-1.example.com:80 check\nEOF\n```\n\n## Monitoring and Observability\n\n### Prometheus Integration\n```bash\n# Configure HAProxy for Prometheus scraping\nsudo tee -a /etc/haproxy/haproxy.cfg \u003e /dev/null \u003c\u003cEOF\n\n# Prometheus metrics endpoint\nfrontend prometheus_frontend\n    bind *:8405\n    http-request use-service prometheus-exporter if { path /metrics }\n    http-request deny\nEOF\n\n# Create HAProxy exporter configuration\nsudo tee /etc/systemd/system/haproxy-exporter.service \u003e /dev/null \u003c\u003cEOF\n[Unit]\nDescription=HAProxy Exporter for Prometheus\nAfter=network.target\n\n[Service]\nType=simple\nUser=haproxy\nExecStart=/usr/local/bin/haproxy_exporter \\\n    --haproxy.scrape-uri=\"http://admin:secure_stats_password@localhost:8404/stats;csv\" \\\n    --web.listen-address=\"0.0.0.0:9101\"\nRestart=always\n\n[Install]\nWantedBy=multi-user.target\nEOF\n\n# Download HAProxy exporter\nHAPROXY_EXPORTER_VERSION=\"0.15.0\"\nwget https://github.com/prometheus/haproxy_exporter/releases/download/v${HAPROXY_EXPORTER_VERSION}/haproxy_exporter-${HAPROXY_EXPORTER_VERSION}.linux-amd64.tar.gz\ntar xzf haproxy_exporter-${HAPROXY_EXPORTER_VERSION}.linux-amd64.tar.gz\nsudo cp haproxy_exporter-${HAPROXY_EXPORTER_VERSION}.linux-amd64/haproxy_exporter /usr/local/bin/\n\nsudo systemctl daemon-reload\nsudo systemctl enable --now haproxy-exporter\n```\n\n### Comprehensive Logging\n```bash\n# Configure rsyslog for HAProxy\nsudo tee /etc/rsyslog.d/49-haproxy.conf \u003e /dev/null \u003c\u003cEOF\n# HAProxy log configuration\n\\$ModLoad imudp\n\\$UDPServerRun 514\n\\$UDPServerAddress 127.0.0.1\n\n# HAProxy logs\nlocal0.*    /var/log/haproxy/haproxy.log\n\u0026 stop\n\n# Separate access and error logs\nlocal0.info /var/log/haproxy/access.log\nlocal0.err  /var/log/haproxy/error.log\nlocal0.warning /var/log/haproxy/warning.log\nEOF\n\n# Create log directory\nsudo mkdir -p /var/log/haproxy\nsudo chown syslog:adm /var/log/haproxy\n\n# Configure log rotation\nsudo tee /etc/logrotate.d/haproxy \u003e /dev/null \u003c\u003cEOF\n/var/log/haproxy/*.log {\n    daily\n    rotate 30\n    missingok\n    notifempty\n    compress\n    delaycompress\n    postrotate\n        /bin/kill -HUP \\`cat /var/run/rsyslogd.pid 2\u003e/dev/null\\` 2\u003e/dev/null || true\n    endscript\n}\nEOF\n\nsudo systemctl restart rsyslog\nsudo systemctl reload haproxy\n```\n\n## Performance Optimization\n\n### System-Level Tuning\n```bash\n# Kernel optimization for HAProxy\nsudo tee -a /etc/sysctl.conf \u003e /dev/null \u003c\u003cEOF\n# HAProxy performance tuning\nnet.core.somaxconn = 65535\nnet.core.netdev_max_backlog = 5000\nnet.ipv4.tcp_max_syn_backlog = 65535\nnet.ipv4.tcp_max_tw_buckets = 400000\nnet.ipv4.tcp_tw_reuse = 1\nnet.ipv4.tcp_fin_timeout = 10\nnet.ipv4.ip_local_port_range = 15000 65000\nnet.core.rmem_default = 262144\nnet.core.rmem_max = 16777216\nnet.core.wmem_default = 262144\nnet.core.wmem_max = 16777216\nnet.ipv4.tcp_rmem = 4096 65536 16777216\nnet.ipv4.tcp_wmem = 4096 65536 16777216\nfs.file-max = 100000\nvm.swappiness = 1\nEOF\n\nsudo sysctl -p\n\n# Set resource limits\nsudo tee -a /etc/security/limits.conf \u003e /dev/null \u003c\u003cEOF\nhaproxy soft nofile 65535\nhaproxy hard nofile 65535\nhaproxy soft nproc 65535\nhaproxy hard nproc 65535\nEOF\n\n# Optimize HAProxy service\nsudo tee /etc/systemd/system/haproxy.service.d/performance.conf \u003e /dev/null \u003c\u003cEOF\n[Service]\nLimitNOFILE=65535\nLimitNPROC=65535\nExecStart=\nExecStart=/usr/sbin/haproxy -f /etc/haproxy/haproxy.cfg -p /run/haproxy.pid -S /run/haproxy-master.sock\nExecReload=/usr/sbin/haproxy -f /etc/haproxy/haproxy.cfg -c -q\nExecReload=/bin/kill -USR2 \\$MAINPID\nEOF\n\nsudo systemctl daemon-reload\nsudo systemctl restart haproxy\n```\n\n### Advanced Performance Configuration\n```bash\nsudo tee /etc/haproxy/performance.cfg \u003e /dev/null \u003c\u003cEOF\nglobal\n    # Performance optimization\n    maxconn 40000\n    nbthread 8\n    cpu-map auto:1/1-8 0-7\n    \n    # Memory optimization\n    tune.maxrewrite 1024\n    tune.bufsize 32768\n    \n    # Connection optimization\n    tune.maxaccept 500\n    tune.recv_enough 10000\n    \n    # SSL optimization\n    tune.ssl.default-dh-param 2048\n    tune.ssl.maxrecord 1460\n    tune.ssl.capture-buffer-size 0\n    \n    # Compression\n    tune.comp.maxlevel 6\n\ndefaults\n    # Performance settings\n    maxconn 8000\n    \n    # Timeouts\n    timeout connect 3s\n    timeout client 25s\n    timeout server 25s\n    timeout tunnel 3600s\n    timeout http-keep-alive 1s\n    timeout http-request 15s\n    timeout queue 30s\n    timeout tarpit 60s\n    \n    # Keep-alive optimization\n    option http-keep-alive\n    option prefer-last-server\n    \n    # Compression\n    compression algo gzip\n    compression type text/html text/css text/javascript application/javascript application/json application/xml\n\n# High-performance backend configuration\nbackend high_performance_backend\n    balance leastconn\n    option httpchk GET /health\n    http-check expect status 200\n    \n    # Connection pooling\n    option http-reuse always\n    \n    # Server configuration with optimal settings\n    default-server inter 1000 fastinter 500 downinter 2000 rise 2 fall 3 slowstart 30s maxconn 1000 maxqueue 256 weight 100\n    \n    server web1 192.168.1.10:8080 check\n    server web2 192.168.1.11:8080 check\n    server web3 192.168.1.12:8080 check\n    server web4 192.168.1.13:8080 check\nEOF\n```\n\n## Backup and Disaster Recovery\n\n### 4. Configuration Management and Backup\n```bash\nsudo tee /usr/local/bin/haproxy-backup.sh \u003e /dev/null \u003c\u003c'EOF'\n#!/bin/bash\nBACKUP_DIR=\"/backup/haproxy\"\nDATE=$(date +%Y%m%d_%H%M%S)\n\nmkdir -p ${BACKUP_DIR}/{config,ssl,stats,logs}\n\n# Backup configuration files\ntar -czf ${BACKUP_DIR}/config/haproxy-config-${DATE}.tar.gz \\\n    /etc/haproxy/ \\\n    /etc/systemd/system/haproxy.service* \\\n    /etc/keepalived/\n\n# Backup SSL certificates\ntar -czf ${BACKUP_DIR}/ssl/haproxy-ssl-${DATE}.tar.gz \\\n    /etc/haproxy/ssl/ \\\n    /etc/letsencrypt/\n\n# Backup statistics and runtime state\necho \"show stat\" | socat stdio /run/haproxy/admin.sock \u003e ${BACKUP_DIR}/stats/haproxy-stats-${DATE}.txt\necho \"show info\" | socat stdio /run/haproxy/admin.sock \u003e ${BACKUP_DIR}/stats/haproxy-info-${DATE}.txt\necho \"show sess\" | socat stdio /run/haproxy/admin.sock \u003e ${BACKUP_DIR}/stats/haproxy-sessions-${DATE}.txt\n\n# Backup recent logs\nfind /var/log/haproxy -name \"*.log\" -mtime -1 -exec tar -czf ${BACKUP_DIR}/logs/haproxy-logs-${DATE}.tar.gz {} +\n\n# Upload to cloud storage\naws s3 cp ${BACKUP_DIR}/ s3://haproxy-backups/ --recursive\naz storage blob upload-batch --source ${BACKUP_DIR} --destination haproxy-backups\ngsutil cp -r ${BACKUP_DIR}/* gs://haproxy-backups/\n\n# Keep only last 15 backups\nfind ${BACKUP_DIR} -name \"haproxy-*\" -type f -mtime +15 -delete\n\n# Test configuration validity\nhaproxy -c -f /etc/haproxy/haproxy.cfg\n\necho \"HAProxy backup completed: ${DATE}\"\nEOF\n\nsudo chmod +x /usr/local/bin/haproxy-backup.sh\n\n# Schedule daily backups\necho \"0 2 * * * root /usr/local/bin/haproxy-backup.sh\" | sudo tee -a /etc/crontab\n```\n\n### Disaster Recovery Automation\n```bash\nsudo tee /usr/local/bin/haproxy-dr.sh \u003e /dev/null \u003c\u003c'EOF'\n#!/bin/bash\nDR_MODE=\"${1:-test}\"  # test, activate, or deactivate\n\ncase \"$DR_MODE\" in\n    \"test\")\n        echo \"Testing DR procedures...\"\n        \n        # Test backup restoration\n        LATEST_BACKUP=$(ls -t /backup/haproxy/config/haproxy-config-*.tar.gz | head -1)\n        if [ -n \"$LATEST_BACKUP\" ]; then\n            echo \"✓ Latest backup found: $LATEST_BACKUP\"\n        else\n            echo \"✗ No backup files found\"\n            exit 1\n        fi\n        \n        # Test configuration\n        haproxy -c -f /etc/haproxy/haproxy.cfg\n        echo \"✓ Configuration is valid\"\n        \n        # Test backend connectivity\n        for backend in $(echo \"show stat\" | socat stdio /run/haproxy/admin.sock | grep \",BACKEND,\" | cut -d, -f1); do\n            echo \"Testing backend: $backend\"\n            echo \"show stat\" | socat stdio /run/haproxy/admin.sock | grep \"$backend\"\n        done\n        \n        echo \"DR test completed\"\n        ;;\n        \n    \"activate\")\n        echo \"Activating DR procedures...\"\n        \n        # Switch to DR configuration\n        cp /etc/haproxy/haproxy-dr.cfg /etc/haproxy/haproxy.cfg\n        \n        # Reload HAProxy\n        systemctl reload haproxy\n        \n        # Update DNS (example with Route53)\n        aws route53 change-resource-record-sets --hosted-zone-id Z123456789 --change-batch file://dr-dns-update.json\n        \n        echo \"DR activated\"\n        ;;\n        \n    \"deactivate\")\n        echo \"Deactivating DR procedures...\"\n        \n        # Restore original configuration\n        cp /etc/haproxy/haproxy.cfg.backup /etc/haproxy/haproxy.cfg\n        \n        # Reload HAProxy\n        systemctl reload haproxy\n        \n        # Update DNS back to primary\n        aws route53 change-resource-record-sets --hosted-zone-id Z123456789 --change-batch file://primary-dns-update.json\n        \n        echo \"DR deactivated\"\n        ;;\n        \n    *)\n        echo \"Usage: $0 {test|activate|deactivate}\"\n        exit 1\n        ;;\nesac\nEOF\n\nsudo chmod +x /usr/local/bin/haproxy-dr.sh\n```\n\n## Verification and Health Checks\n\n### Comprehensive Health Monitoring\n```bash\nsudo tee /usr/local/bin/haproxy-health-check.sh \u003e /dev/null \u003c\u003c'EOF'\n#!/bin/bash\nHEALTH_LOG=\"/var/log/haproxy-health.log\"\n\nlog_message() {\n    echo \"$(date '+%Y-%m-%d %H:%M:%S') - $1\" | tee -a ${HEALTH_LOG}\n}\n\n# Check HAProxy service status\nif systemctl is-active haproxy \u003e/dev/null 2\u003e\u00261; then\n    log_message \"✓ HAProxy service is running\"\nelse\n    log_message \"✗ HAProxy service is not running\"\n    exit 1\nfi\n\n# Check configuration validity\nif haproxy -c -f /etc/haproxy/haproxy.cfg \u003e/dev/null 2\u003e\u00261; then\n    log_message \"✓ HAProxy configuration is valid\"\nelse\n    log_message \"✗ HAProxy configuration has errors\"\n    haproxy -c -f /etc/haproxy/haproxy.cfg\nfi\n\n# Check listening ports\nLISTENING_PORTS=$(netstat -tlnp | grep haproxy | wc -l)\nlog_message \"✓ HAProxy is listening on ${LISTENING_PORTS} ports\"\n\n# Check backend server health\nBACKEND_STATS=$(echo \"show stat\" | socat stdio /run/haproxy/admin.sock | grep -c \",UP,\")\nTOTAL_SERVERS=$(echo \"show stat\" | socat stdio /run/haproxy/admin.sock | grep -c \",.*,\")\nlog_message \"✓ ${BACKEND_STATS}/${TOTAL_SERVERS} backend servers are healthy\"\n\n# Check SSL certificate expiry\nif [ -d /etc/haproxy/ssl ]; then\n    for cert in /etc/haproxy/ssl/*.pem; do\n        if [ -f \"$cert\" ]; then\n            EXPIRY=$(openssl x509 -in \"$cert\" -noout -dates | grep notAfter | cut -d= -f2)\n            EXPIRY_EPOCH=$(date -d \"$EXPIRY\" +%s)\n            CURRENT_EPOCH=$(date +%s)\n            DAYS_TO_EXPIRY=$(( (EXPIRY_EPOCH - CURRENT_EPOCH) / 86400 ))\n            \n            if [ $DAYS_TO_EXPIRY -lt 30 ]; then\n                log_message \"⚠ SSL certificate $(basename $cert) expires in ${DAYS_TO_EXPIRY} days\"\n            else\n                log_message \"✓ SSL certificate $(basename $cert) expires in ${DAYS_TO_EXPIRY} days\"\n            fi\n        fi\n    done\nfi\n\n# Check memory usage\nMEMORY_USAGE=$(ps -o pid,vsz,rss,comm -C haproxy | tail -1 | awk '{print $3/1024}')\nlog_message \"ℹ HAProxy memory usage: ${MEMORY_USAGE}MB\"\n\n# Check connection statistics\nCURRENT_CONNS=$(echo \"show info\" | socat stdio /run/haproxy/admin.sock | grep \"CurrConns\" | cut -d: -f2 | tr -d ' ')\nMAX_CONNS=$(echo \"show info\" | socat stdio /run/haproxy/admin.sock | grep \"MaxConn\" | cut -d: -f2 | tr -d ' ')\nlog_message \"ℹ Current connections: ${CURRENT_CONNS}/${MAX_CONNS}\"\n\n# Check for any backend servers that are down\nDOWN_SERVERS=$(echo \"show stat\" | socat stdio /run/haproxy/admin.sock | grep \",DOWN,\" | wc -l)\nif [ $DOWN_SERVERS -gt 0 ]; then\n    log_message \"⚠ ${DOWN_SERVERS} backend servers are down\"\n    echo \"show stat\" | socat stdio /run/haproxy/admin.sock | grep \",DOWN,\" | while IFS=, read pxname svname; do\n        log_message \"  - ${pxname}/${svname} is DOWN\"\n    done\nfi\n\nlog_message \"HAProxy health check completed\"\nEOF\n\nsudo chmod +x /usr/local/bin/haproxy-health-check.sh\n\n# Schedule health checks every 5 minutes\necho \"*/5 * * * * root /usr/local/bin/haproxy-health-check.sh\" | sudo tee -a /etc/crontab\n```\n\n### Load Testing and Performance Validation\n```bash\nsudo tee /usr/local/bin/haproxy-load-test.sh \u003e /dev/null \u003c\u003c'EOF'\n#!/bin/bash\nTEST_RESULTS=\"/tmp/haproxy-load-test-$(date +%Y%m%d_%H%M%S).txt\"\nTEST_URL=\"https://example.com\"\nCONCURRENT_USERS=100\nTEST_DURATION=60\n\necho \"HAProxy Load Test Results\" \u003e ${TEST_RESULTS}\necho \"========================\" \u003e\u003e ${TEST_RESULTS}\necho \"Date: $(date)\" \u003e\u003e ${TEST_RESULTS}\necho \"Target URL: ${TEST_URL}\" \u003e\u003e ${TEST_RESULTS}\necho \"Concurrent Users: ${CONCURRENT_USERS}\" \u003e\u003e ${TEST_RESULTS}\necho \"Test Duration: ${TEST_DURATION}s\" \u003e\u003e ${TEST_RESULTS}\necho \"\" \u003e\u003e ${TEST_RESULTS}\n\n# Install testing tools if not available\nif ! command -v ab \u0026\u003e /dev/null; then\n    apt-get update \u0026\u0026 apt-get install -y apache2-utils\nfi\n\nif ! command -v wrk \u0026\u003e /dev/null; then\n    git clone https://github.com/wg/wrk.git /tmp/wrk\n    cd /tmp/wrk \u0026\u0026 make \u0026\u0026 cp wrk /usr/local/bin/\nfi\n\n# Run Apache Bench test\necho \"Apache Bench Results:\" \u003e\u003e ${TEST_RESULTS}\nab -n 10000 -c ${CONCURRENT_USERS} -k ${TEST_URL}/ \u003e\u003e ${TEST_RESULTS} 2\u003e\u00261\n\necho \"\" \u003e\u003e ${TEST_RESULTS}\necho \"WRK Results:\" \u003e\u003e ${TEST_RESULTS}\nwrk -t4 -c${CONCURRENT_USERS} -d${TEST_DURATION}s --latency ${TEST_URL}/ \u003e\u003e ${TEST_RESULTS}\n\n# Capture HAProxy stats during test\necho \"\" \u003e\u003e ${TEST_RESULTS}\necho \"HAProxy Statistics During Test:\" \u003e\u003e ${TEST_RESULTS}\necho \"show info\" | socat stdio /run/haproxy/admin.sock \u003e\u003e ${TEST_RESULTS}\necho \"show stat\" | socat stdio /run/haproxy/admin.sock \u003e\u003e ${TEST_RESULTS}\n\necho \"\" \u003e\u003e ${TEST_RESULTS}\necho \"Load test completed at: $(date)\" \u003e\u003e ${TEST_RESULTS}\n\necho \"Load test completed. Results: ${TEST_RESULTS}\"\nEOF\n\nsudo chmod +x /usr/local/bin/haproxy-load-test.sh\n```\n\n## Firewall Configuration (Cross-Platform)\n\n### Security Rules\n```bash\n# UFW (Ubuntu/Debian)\nsudo ufw allow 80/tcp comment 'HTTP'\nsudo ufw allow 443/tcp comment 'HTTPS' \nsudo ufw allow from 192.168.1.0/24 to any port 8404 comment 'Stats interface - internal only'\nsudo ufw allow from 192.168.1.0/24 to any port 9101 comment 'Prometheus exporter - internal only'\nsudo ufw deny 8404 comment 'Block stats from public'\nsudo ufw enable\n\n# Firewalld (RHEL/CentOS/Fedora)\nsudo firewall-cmd --permanent --add-service=http\nsudo firewall-cmd --permanent --add-service=https\nsudo firewall-cmd --permanent --new-zone=haproxy-mgmt\nsudo firewall-cmd --permanent --zone=haproxy-mgmt --add-source=192.168.1.0/24\nsudo firewall-cmd --permanent --zone=haproxy-mgmt --add-port=8404/tcp\nsudo firewall-cmd --permanent --zone=haproxy-mgmt --add-port=9101/tcp\nsudo firewall-cmd --reload\n\n# iptables (Universal)\nsudo iptables -A INPUT -p tcp --dport 80 -j ACCEPT\nsudo iptables -A INPUT -p tcp --dport 443 -j ACCEPT\nsudo iptables -A INPUT -p tcp -s 192.168.1.0/24 --dport 8404 -j ACCEPT\nsudo iptables -A INPUT -p tcp -s 192.168.1.0/24 --dport 9101 -j ACCEPT\nsudo iptables -A INPUT -p tcp --dport 8404 -j DROP\nsudo iptables -A INPUT -p tcp --dport 9101 -j DROP\n\n# Save iptables rules\n# Ubuntu/Debian\nsudo apt install -y iptables-persistent\nsudo netfilter-persistent save\n\n# RHEL/CentOS\nsudo service iptables save\n```\n\n### DDoS Protection Configuration\n```bash\nsudo tee /etc/haproxy/ddos-protection.cfg \u003e /dev/null \u003c\u003cEOF\n# DDoS Protection Configuration\n\nglobal\n    # Stick tables for tracking\n    tune.stick-table.enable 1\n\nfrontend ddos_protection\n    bind *:80\n    bind *:443 ssl crt /etc/haproxy/ssl/\n    \n    # Track client behavior\n    stick-table type ip size 1m expire 5m store gpc0,gpc1,http_req_rate(10s),http_err_rate(10s),conn_rate(10s),bytes_out_rate(10s)\n    \n    # Track requests\n    http-request track-sc0 src\n    \n    # Rate limiting rules\n    acl abuse_request_rate sc_http_req_rate(0) gt 100\n    acl abuse_connection_rate sc_conn_rate(0) gt 20\n    acl abuse_error_rate sc_http_err_rate(0) gt 10\n    acl abuse_bandwidth sc_bytes_out_rate(0) gt 10000000  # 10MB/s\n    \n    # Geographic blocking (requires GeoIP)\n    # acl blocked_countries src,map_ip(/etc/haproxy/geoip-country.map) -i CN RU\n    \n    # User-Agent filtering\n    acl bad_user_agent hdr_sub(User-Agent) -i \"sqlmap\" \"nikto\" \"nmap\" \"masscan\" \"zmap\"\n    acl empty_user_agent hdr_cnt(User-Agent) eq 0\n    \n    # HTTP method filtering\n    acl allowed_methods method GET POST PUT DELETE HEAD OPTIONS PATCH\n    \n    # Deny rules\n    http-request deny if abuse_request_rate\n    http-request deny if abuse_connection_rate\n    http-request deny if abuse_error_rate\n    http-request deny if abuse_bandwidth\n    http-request deny if bad_user_agent\n    http-request deny if empty_user_agent\n    http-request deny if !allowed_methods\n    # http-request deny if blocked_countries\n    \n    # Tarpit suspicious clients\n    http-request tarpit if { sc_http_req_rate(0) gt 50 }\n    \n    default_backend web_servers\n\n# Clean backend\nbackend web_servers\n    balance leastconn\n    option httpchk GET /health\n    \n    server web1 192.168.1.10:8080 check\n    server web2 192.168.1.11:8080 check\n    server web3 192.168.1.12:8080 check\nEOF\n```\n\n## Runtime Management and Monitoring\n\n### Advanced Runtime Commands\n```bash\n# Create HAProxy management script\nsudo tee /usr/local/bin/haproxy-manage.sh \u003e /dev/null \u003c\u003c'EOF'\n#!/bin/bash\nHAPROXY_SOCKET=\"/run/haproxy/admin.sock\"\n\ncase \"$1\" in\n    \"status\")\n        echo \"=== HAProxy Status ===\"\n        echo \"show info\" | socat stdio ${HAPROXY_SOCKET}\n        echo \"\"\n        echo \"=== Server Status ===\"\n        echo \"show stat\" | socat stdio ${HAPROXY_SOCKET} | column -t -s \",\"\n        ;;\n    \n    \"enable\")\n        if [ -z \"$2\" ] || [ -z \"$3\" ]; then\n            echo \"Usage: $0 enable \u003cbackend\u003e \u003cserver\u003e\"\n            exit 1\n        fi\n        echo \"enable server $2/$3\" | socat stdio ${HAPROXY_SOCKET}\n        echo \"Server $2/$3 enabled\"\n        ;;\n    \n    \"disable\")\n        if [ -z \"$2\" ] || [ -z \"$3\" ]; then\n            echo \"Usage: $0 disable \u003cbackend\u003e \u003cserver\u003e\"\n            exit 1\n        fi\n        echo \"disable server $2/$3\" | socat stdio ${HAPROXY_SOCKET}\n        echo \"Server $2/$3 disabled\"\n        ;;\n    \n    \"weight\")\n        if [ -z \"$2\" ] || [ -z \"$3\" ] || [ -z \"$4\" ]; then\n            echo \"Usage: $0 weight \u003cbackend\u003e \u003cserver\u003e \u003cweight\u003e\"\n            exit 1\n        fi\n        echo \"set weight $2/$3 $4\" | socat stdio ${HAPROXY_SOCKET}\n        echo \"Weight for $2/$3 set to $4\"\n        ;;\n    \n    \"sessions\")\n        echo \"=== Active Sessions ===\"\n        echo \"show sess\" | socat stdio ${HAPROXY_SOCKET}\n        ;;\n    \n    \"errors\")\n        echo \"=== Recent Errors ===\"\n        echo \"show errors\" | socat stdio ${HAPROXY_SOCKET}\n        ;;\n    \n    \"reload\")\n        echo \"Reloading HAProxy configuration...\"\n        if haproxy -c -f /etc/haproxy/haproxy.cfg; then\n            systemctl reload haproxy\n            echo \"Configuration reloaded successfully\"\n        else\n            echo \"Configuration has errors, reload aborted\"\n            exit 1\n        fi\n        ;;\n    \n    \"drain\")\n        if [ -z \"$2\" ] || [ -z \"$3\" ]; then\n            echo \"Usage: $0 drain \u003cbackend\u003e \u003cserver\u003e\"\n            exit 1\n        fi\n        echo \"set server $2/$3 state drain\" | socat stdio ${HAPROXY_SOCKET}\n        echo \"Server $2/$3 is being drained\"\n        \n        # Wait for connections to finish\n        while [ $(echo \"show stat\" | socat stdio ${HAPROXY_SOCKET} | grep \"$2,$3\" | cut -d, -f5) -gt 0 ]; do\n            echo \"Waiting for connections to finish...\"\n            sleep 5\n        done\n        echo \"Server $2/$3 has been drained\"\n        ;;\n    \n    *)\n        echo \"Usage: $0 {status|enable|disable|weight|sessions|errors|reload|drain} [options]\"\n        echo \"\"\n        echo \"Examples:\"\n        echo \"  $0 status\"\n        echo \"  $0 enable web_servers web1\"\n        echo \"  $0 disable web_servers web1\"\n        echo \"  $0 weight web_servers web1 50\"\n        echo \"  $0 drain web_servers web1\"\n        echo \"  $0 sessions\"\n        echo \"  $0 errors\"\n        echo \"  $0 reload\"\n        exit 1\n        ;;\nesac\nEOF\n\nsudo chmod +x /usr/local/bin/haproxy-manage.sh\n```\n\n### Automated Log Analysis\n```bash\nsudo tee /usr/local/bin/haproxy-log-analysis.sh \u003e /dev/null \u003c\u003c'EOF'\n#!/bin/bash\nLOG_FILE=\"/var/log/haproxy/haproxy.log\"\nANALYSIS_DIR=\"/var/log/haproxy-analysis\"\nDATE=$(date +%Y%m%d_%H%M%S)\n\nmkdir -p ${ANALYSIS_DIR}\n\n# Top client IPs\necho \"Top Client IPs - ${DATE}\" \u003e ${ANALYSIS_DIR}/top-clients-${DATE}.txt\nawk '{print $6}' ${LOG_FILE} | sort | uniq -c | sort -nr | head -20 \u003e\u003e ${ANALYSIS_DIR}/top-clients-${DATE}.txt\n\n# Response time analysis\necho \"Response Time Analysis - ${DATE}\" \u003e ${ANALYSIS_DIR}/response-times-${DATE}.txt\nawk '{print $11}' ${LOG_FILE} | grep -v '^-$' | sort -n | tail -100 \u003e\u003e ${ANALYSIS_DIR}/response-times-${DATE}.txt\n\n# Error analysis\necho \"Error Analysis - ${DATE}\" \u003e ${ANALYSIS_DIR}/errors-${DATE}.txt\nawk '$10 \u003e= 400 {print $0}' ${LOG_FILE} | tail -100 \u003e\u003e ${ANALYSIS_DIR}/errors-${DATE}.txt\n\n# Backend server analysis\necho \"Backend Server Performance - ${DATE}\" \u003e ${ANALYSIS_DIR}/backend-performance-${DATE}.txt\nawk '{print $8}' ${LOG_FILE} | sort | uniq -c | sort -nr \u003e\u003e ${ANALYSIS_DIR}/backend-performance-${DATE}.txt\n\n# SSL/TLS analysis\necho \"SSL/TLS Analysis - ${DATE}\" \u003e ${ANALYSIS_DIR}/ssl-analysis-${DATE}.txt\ngrep \"SSL\" ${LOG_FILE} | tail -50 \u003e\u003e ${ANALYSIS_DIR}/ssl-analysis-${DATE}.txt\n\n# Generate summary report\ncat \u003e ${ANALYSIS_DIR}/summary-${DATE}.txt \u003c\u003cEOL\nHAProxy Log Analysis Summary - ${DATE}\n=====================================\n\nTotal Requests: $(wc -l \u003c ${LOG_FILE})\nUnique IPs: $(awk '{print $6}' ${LOG_FILE} | sort -u | wc -l)\n4xx Errors: $(awk '$10 \u003e= 400 \u0026\u0026 $10 \u003c 500 {print $0}' ${LOG_FILE} | wc -l)\n5xx Errors: $(awk '$10 \u003e= 500 {print $0}' ${LOG_FILE} | wc -l)\n\nAverage Response Time: $(awk '{sum += $11; count++} END {print sum/count}' ${LOG_FILE})ms\n\nTop 5 Requested URLs:\n$(awk '{print $12}' ${LOG_FILE} | sort | uniq -c | sort -nr | head -5)\n\nAnalysis completed at: $(date)\nEOL\n\necho \"Log analysis completed. Reports in: ${ANALYSIS_DIR}/\"\nEOF\n\nsudo chmod +x /usr/local/bin/haproxy-log-analysis.sh\n\n# Schedule daily log analysis\necho \"0 6 * * * root /usr/local/bin/haproxy-log-analysis.sh\" | sudo tee -a /etc/crontab\n```\n\n## 6. Troubleshooting (Cross-Platform)\n\n### Common Issues and Solutions\n```bash\n# Check HAProxy process status\nps aux | grep haproxy\nsystemctl status haproxy\n\n# Configuration validation\nhaproxy -c -f /etc/haproxy/haproxy.cfg\nhaproxy -c -V -f /etc/haproxy/haproxy.cfg\n\n# Socket connectivity test\nsocat - /run/haproxy/admin.sock\necho \"show info\" | socat stdio /run/haproxy/admin.sock\n\n# Backend server connectivity test\nfor server in 192.168.1.10 192.168.1.11 192.168.1.12; do\n    echo \"Testing $server...\"\n    nc -zv $server 8080\n    curl -I http://$server:8080/health\ndone\n\n# SSL certificate issues\nopenssl x509 -in /etc/haproxy/ssl/example.com.pem -text -noout\nopenssl verify -CAfile /etc/haproxy/ssl/ca.crt /etc/haproxy/ssl/example.com.pem\n\n# Memory usage debugging\npmap -x $(pgrep haproxy)\ncat /proc/$(pgrep haproxy)/status | grep -E \"(VmSize|VmRSS|VmData|VmStk)\"\n\n# Network debugging\nss -tulpn | grep haproxy\nnetstat -tulpn | grep haproxy\nlsof -i :80,443,8404\n\n# Log debugging\ntail -f /var/log/haproxy/haproxy.log\njournalctl -u haproxy -f\n\n# Performance debugging\necho \"show stat\" | socat stdio /run/haproxy/admin.sock | grep -v \"^#\"\necho \"show sess\" | socat stdio /run/haproxy/admin.sock\necho \"show pools\" | socat stdio /run/haproxy/admin.sock\n\n# Configuration debugging\nhaproxy -vv\nhaproxy -dM -f /etc/haproxy/haproxy.cfg  # Don't use in production\n\n# Check for core dumps\nfind /var/crash -name \"haproxy*\" 2\u003e/dev/null\nfind /var/lib/systemd/coredump -name \"*haproxy*\" 2\u003e/dev/null\n```\n\n### Advanced Debugging\n```bash\n# Enable debug logging\nsudo systemctl edit haproxy.service\n# Add:\n[Service]\nExecStart=\nExecStart=/usr/sbin/haproxy -f /etc/haproxy/haproxy.cfg -p /run/haproxy.pid -S /run/haproxy-master.sock -d\n\nsudo systemctl daemon-reload\nsudo systemctl restart haproxy\n\n# Real-time connection monitoring\nwatch -n 1 'echo \"show stat\" | socat stdio /run/haproxy/admin.sock | grep -E \"FRONTEND|BACKEND\" | column -t -s \",\"'\n\n# TCP dump for network analysis\ntcpdump -i any -w haproxy-traffic.pcap port 80 or port 443\ntcpdump -i any -w backend-traffic.pcap host 192.168.1.10\n\n# Strace HAProxy process\nstrace -p $(pgrep haproxy) -e trace=network\n\n# Monitor file descriptors\nlsof -p $(pgrep haproxy) | wc -l\ncat /proc/$(pgrep haproxy)/limits | grep \"Max open files\"\n\n# Check shared memory segments\nipcs -m | grep haproxy\n\n# Monitor syscalls\nperf trace -p $(pgrep haproxy)\n```\n\n## Additional Resources\n\n- [Official Documentation](https://docs.haproxy.org/)\n- [HAProxy Configuration Manual](https://cbonte.github.io/haproxy-dconv/)\n- [Best Practices Guide](https://www.haproxy.com/documentation/hapee/latest/configuration/best-practices/)\n- [Performance Tuning Guide](https://www.haproxy.com/blog/haproxy-performance-tuning/)\n- [Security Guide](https://www.haproxy.com/solutions/security/)\n- [Community Forum](https://discourse.haproxy.org/)\n\n---\n\n**Note:** This guide is part of the [HowToMgr](https://howtomgr.github.io) collection.","readmeHtml":"\u003cp class=\"mobile-paragraph\"\u003eHigh-performance TCP/HTTP load balancer and reverse proxy for distributing traffic across multiple backend servers. Industry standard for load balancing with enterprise-grade security and reliability.\u003c/p\u003e\n\u003ch2 id=\"1-prerequisites\" class=\"mobile-header\"\u003e1. Prerequisites\u003c/h2\u003e\n\u003cli class=\"mobile-list-item\"\u003eLinux system (any modern distribution)\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eRoot or sudo access\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003e2GB RAM minimum, 4GB+ recommended for high-traffic environments\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eMultiple backend servers to load balance (optional for testing)\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eSSL certificates for production HTTPS termination\u003c/li\u003e\n\u003ch2 id=\"2-supported-operating-systems\" class=\"mobile-header\"\u003e2. Supported Operating Systems\u003c/h2\u003e\n\u003cp class=\"mobile-paragraph\"\u003eThis guide supports installation on:\u003c/p\u003e\n\u003cli class=\"mobile-list-item\"\u003eRHEL 8/9 and derivatives (CentOS Stream, Rocky Linux, AlmaLinux)\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eDebian 11/12\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eUbuntu 20.04/22.04/24.04 LTS\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eArch Linux (rolling release)\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eAlpine Linux 3.18+\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eopenSUSE Leap 15.5+ / Tumbleweed\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eSUSE Linux Enterprise Server (SLES) 15+\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003emacOS 12+ (Monterey and later) \u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eFreeBSD 13+\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eWindows 10/11/Server 2019+ (where applicable)\u003c/li\u003e\n\u003ch2 id=\"3-installation\" class=\"mobile-header\"\u003e3. Installation\u003c/h2\u003e\n\u003ch3 id=\"using-package-manager-recommended\" class=\"mobile-header\"\u003eUsing Package Manager (Recommended)\u003c/h3\u003e\n\u003cp class=\"mobile-paragraph\"\u003e#### Ubuntu/Debian\u003c/p\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Update package list\nsudo apt-get update\n\n# Install HAProxy and utilities\nsudo apt-get install -y haproxy haproxy-doc software-properties-common\n\n# For latest version from PPA\nsudo add-apt-repository ppa:vbernat/haproxy-2.8\nsudo apt-get update\nsudo apt-get install -y haproxy=2.8.*\n\n# Enable and start HAProxy\nsudo systemctl enable --now haproxy\n\n# Check status\nsudo systemctl status haproxy\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003cp class=\"mobile-paragraph\"\u003e#### RHEL/CentOS/Rocky Linux/AlmaLinux\u003c/p\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Install EPEL repository\nsudo yum install -y epel-release\n\n# Install HAProxy\nsudo yum install -y haproxy\n\n# For newer versions\nsudo dnf install -y haproxy\n\n# Enable and start HAProxy\nsudo systemctl enable --now haproxy\n\n# Check status\nsudo systemctl status haproxy\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003cp class=\"mobile-paragraph\"\u003e#### Fedora\u003c/p\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Install HAProxy\nsudo dnf install -y haproxy\n\n# Enable and start HAProxy\nsudo systemctl enable --now haproxy\n\n# Configure firewall\nsudo firewall-cmd --permanent --add-service=http\nsudo firewall-cmd --permanent --add-service=https\nsudo firewall-cmd --permanent --add-port=8404/tcp  # Stats interface\nsudo firewall-cmd --reload\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003cp class=\"mobile-paragraph\"\u003e#### Arch Linux\u003c/p\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Install HAProxy\nsudo pacman -Syu haproxy\n\n# Enable and start HAProxy\nsudo systemctl enable --now haproxy\n\n# Check status\nsudo systemctl status haproxy\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003cp class=\"mobile-paragraph\"\u003e#### Alpine Linux\u003c/p\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Install HAProxy\nsudo apk update\nsudo apk add haproxy\n\n# Enable and start HAProxy\nsudo rc-update add haproxy default\nsudo service haproxy start\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"from-source-latest-features\" class=\"mobile-header\"\u003eFrom Source (Latest Features)\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Install build dependencies\n# Ubuntu/Debian\nsudo apt-get install -y build-essential libssl-dev libpcre3-dev zlib1g-dev liblua5.3-dev libsystemd-dev\n\n# RHEL/CentOS\nsudo yum groupinstall -y \u0026quot;Development Tools\u0026quot;\nsudo yum install -y openssl-devel pcre-devel zlib-devel lua-devel systemd-devel\n\n# Download latest HAProxy LTS\nHAPROXY_VERSION=\u0026quot;3.0.5\u0026quot;\ncd /tmp\nwget \u0026quot;https://www.haproxy.org/download/3.0/src/haproxy-${HAPROXY_VERSION}.tar.gz\u0026quot;\ntar xzf haproxy-${HAPROXY_VERSION}.tar.gz\ncd haproxy-${HAPROXY_VERSION}\n\n# Compile with full features\nmake clean\nmake -j$(nproc) TARGET=linux-glibc \\\n    USE_OPENSSL=1 \\\n    USE_ZLIB=1 \\\n    USE_PCRE=1 \\\n    USE_SYSTEMD=1 \\\n    USE_LUA=1 \\\n    USE_PROMEX=1 \\\n    USE_THREAD=1 \\\n    USE_CPU_AFFINITY=1 \\\n    USE_TFO=1 \\\n    USE_NS=1 \\\n    USE_DL=1 \\\n    USE_RT=1\n\n# Install HAProxy\nsudo make install\nsudo mkdir -p /etc/haproxy /var/lib/haproxy /var/log/haproxy\nsudo useradd --system --home /var/lib/haproxy --shell /bin/false haproxy\nsudo chown -R haproxy:haproxy /var/lib/haproxy /var/log/haproxy\n\n# Create systemd service\nsudo tee /etc/systemd/system/haproxy.service \u0026gt; /dev/null \u0026lt;\u0026lt;EOF\n[Unit]\nDescription=HAProxy Load Balancer\nDocumentation=man:haproxy(1)\nDocumentation=file:/usr/share/doc/haproxy/configuration.txt\nAfter=network.target\n\n[Service]\nType=notify\nExecStart=/usr/local/sbin/haproxy -f /etc/haproxy/haproxy.cfg -p /run/haproxy.pid -S /run/haproxy-master.sock\nExecReload=/bin/kill -USR2 \\$MAINPID\nExecStop=/bin/kill -USR1 \\$MAINPID\nKillMode=mixed\nRestart=on-failure\nSuccessExitStatus=143\nKillSignal=SIGTERM\n\n# Security settings\nNoNewPrivileges=true\nPrivateTmp=true\nProtectHome=true\nProtectSystem=strict\nReadWritePaths=/var/lib/haproxy\nReadWritePaths=/var/log/haproxy\nReadWritePaths=/run\n\n[Install]\nWantedBy=multi-user.target\nEOF\n\nsudo systemctl daemon-reload\nsudo systemctl enable --now haproxy\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"using-docker\" class=\"mobile-header\"\u003eUsing Docker\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Create HAProxy configuration directory\nmkdir -p ~/haproxy/{config,ssl,logs}\n\n# Create basic configuration\ncat \u0026gt; ~/haproxy/config/haproxy.cfg \u0026lt;\u0026lt;EOF\nglobal\n    log stdout local0\n    chroot /var/lib/haproxy\n    stats socket /run/haproxy/admin.sock mode 660 level admin expose-fd listeners\n    stats timeout 30s\n    user haproxy\n    group haproxy\n    daemon\n    \n    # SSL configuration\n    ssl-default-bind-ciphers ECDHE+AESGCM:ECDHE+CHACHA20:DHE+AESGCM:DHE+CHACHA20:!aNULL:!MD5:!DSS\n    ssl-default-bind-options ssl-min-ver TLSv1.2 no-tls-tickets\n    ssl-default-server-ciphers ECDHE+AESGCM:ECDHE+CHACHA20:DHE+AESGCM:DHE+CHACHA20:!aNULL:!MD5:!DSS\n    ssl-default-server-options ssl-min-ver TLSv1.2 no-tls-tickets\n\ndefaults\n    mode http\n    log global\n    option httplog\n    option dontlognull\n    option log-health-checks\n    option forwardfor\n    option http-server-close\n    timeout connect 5000\n    timeout client 50000\n    timeout server 50000\n    timeout http-keep-alive 4000\n    timeout check 3000\n\n# Frontend\nfrontend web_frontend\n    bind *:80\n    bind *:443 ssl crt /usr/local/etc/haproxy/ssl/ alpn h2,http/1.1\n    \n    # Redirect HTTP to HTTPS\n    redirect scheme https code 301 if !{ ssl_fc }\n    \n    # Security headers\n    http-response set-header Strict-Transport-Security \u0026quot;max-age=31536000; includeSubDomains; preload\u0026quot;\n    http-response set-header X-Frame-Options \u0026quot;SAMEORIGIN\u0026quot;\n    http-response set-header X-Content-Type-Options \u0026quot;nosniff\u0026quot;\n    http-response set-header X-XSS-Protection \u0026quot;1; mode=block\u0026quot;\n    \n    default_backend web_servers\n\n# Backend\nbackend web_servers\n    balance roundrobin\n    option httpchk GET /health\n    http-check expect status 200\n    server web1 192.168.1.10:8080 check\n    server web2 192.168.1.11:8080 check\n    server web3 192.168.1.12:8080 check\n\n# Stats interface\nlisten stats\n    bind *:8404\n    stats enable\n    stats uri /stats\n    stats refresh 30s\n    stats admin if TRUE\nEOF\n\n# Run HAProxy container\ndocker run -d \\\n  --name haproxy \\\n  --restart unless-stopped \\\n  -p 80:80 \\\n  -p 443:443 \\\n  -p 8404:8404 \\\n  -v ~/haproxy/config:/usr/local/etc/haproxy:ro \\\n  -v ~/haproxy/ssl:/usr/local/etc/haproxy/ssl:ro \\\n  -v ~/haproxy/logs:/var/log/haproxy \\\n  haproxy:latest\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"production-configuration\" class=\"mobile-header\"\u003eProduction Configuration\u003c/h2\u003e\n\u003ch3 id=\"enterprise-production-configuration\" class=\"mobile-header\"\u003eEnterprise Production Configuration\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Backup original configuration\nsudo cp /etc/haproxy/haproxy.cfg /etc/haproxy/haproxy.cfg.backup\n\n# Create comprehensive production configuration\nsudo tee /etc/haproxy/haproxy.cfg \u0026gt; /dev/null \u0026lt;\u0026lt;EOF\n#---------------------------------------------------------------------\n# HAProxy Enterprise Production Configuration\n# Version: 3.0+ LTS\n#---------------------------------------------------------------------\n\nglobal\n    log 127.0.0.1:514 local0 info\n    chroot /var/lib/haproxy\n    stats socket /run/haproxy/admin.sock mode 660 level admin expose-fd listeners\n    stats timeout 30s\n    user haproxy\n    group haproxy\n    daemon\n\n    # SSL/TLS configuration (2024 best practices)\n    ssl-default-bind-ciphers ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-CHACHA20-POLY1305:ECDHE-RSA-CHACHA20-POLY1305:DHE-RSA-AES128-GCM-SHA256:DHE-RSA-AES256-GCM-SHA384\n    ssl-default-bind-ciphersuites TLS_AES_128_GCM_SHA256:TLS_AES_256_GCM_SHA384:TLS_CHACHA20_POLY1305_SHA256\n    ssl-default-bind-options ssl-min-ver TLSv1.2 no-tls-tickets prefer-client-ciphers\n    \n    ssl-default-server-ciphers ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384\n    ssl-default-server-ciphersuites TLS_AES_128_GCM_SHA256:TLS_AES_256_GCM_SHA384:TLS_CHACHA20_POLY1305_SHA256\n    ssl-default-server-options ssl-min-ver TLSv1.2 no-tls-tickets\n\n    # DH parameters for perfect forward secrecy\n    ssl-dh-param-file /etc/haproxy/ssl/dhparam.pem\n    \n    # Performance tuning\n    maxconn 40000\n    nbthread 4\n    cpu-map auto:1/1-4 0-3\n    \n    # Logging\n    log-tag haproxy-prod\n    \n    # Security\n    insecure-fork-wanted\n    insecure-setuid-wanted\n\ndefaults\n    mode http\n    log global\n    option httplog\n    option dontlognull\n    option log-health-checks\n    option forwardfor except 127.0.0.0/8\n    option http-server-close\n    option redispatch\n    \n    # Timeouts\n    timeout connect 10s\n    timeout client 1m\n    timeout server 1m\n    timeout http-keep-alive 10s\n    timeout check 10s\n    timeout tunnel 2h\n    \n    # Retries\n    retries 3\n    \n    # Compression\n    compression algo gzip\n    compression type text/html text/css text/javascript application/javascript application/json application/xml\n    \n    # Default error pages\n    errorfile 400 /etc/haproxy/errors/400.http\n    errorfile 403 /etc/haproxy/errors/403.http\n    errorfile 408 /etc/haproxy/errors/408.http\n    errorfile 500 /etc/haproxy/errors/500.http\n    errorfile 502 /etc/haproxy/errors/502.http\n    errorfile 503 /etc/haproxy/errors/503.http\n    errorfile 504 /etc/haproxy/errors/504.http\n\n#---------------------------------------------------------------------\n# Frontend Configuration\n#---------------------------------------------------------------------\n\nfrontend web_frontend\n    bind *:80\n    bind *:443 ssl crt /etc/haproxy/ssl/ alpn h2,http/1.1 crt-ignore-err all\n    \n    # Security headers\n    http-response set-header Strict-Transport-Security \u0026quot;max-age=31536000; includeSubDomains; preload\u0026quot;\n    http-response set-header X-Frame-Options \u0026quot;SAMEORIGIN\u0026quot;\n    http-response set-header X-Content-Type-Options \u0026quot;nosniff\u0026quot;\n    http-response set-header X-XSS-Protection \u0026quot;1; mode=block\u0026quot;\n    http-response set-header Referrer-Policy \u0026quot;strict-origin-when-cross-origin\u0026quot;\n    http-response set-header Content-Security-Policy \u0026quot;default-src \u0026#039;self\u0026#039;; script-src \u0026#039;self\u0026#039; \u0026#039;unsafe-inline\u0026#039;; style-src \u0026#039;self\u0026#039; \u0026#039;unsafe-inline\u0026#039;\u0026quot;\n    \n    # Rate limiting\n    stick-table type ip size 100k expire 30s store http_req_rate(10s)\n    http-request track-sc0 src\n    http-request deny if { sc_http_req_rate(0) gt 20 }\n    \n    # Block bad bots and crawlers\n    acl is_bot hdr_sub(User-Agent) -i bot crawler spider scraper\n    http-request deny if is_bot\n    \n    # ACLs for routing\n    acl is_api path_beg /api/\n    acl is_admin path_beg /admin/\n    acl is_static path_beg /static/ /css/ /js/ /images/\n    acl is_websocket hdr(Upgrade) -i websocket\n    \n    # Force HTTPS\n    redirect scheme https code 301 if !{ ssl_fc }\n    \n    # Routing rules\n    use_backend api_servers if is_api\n    use_backend admin_servers if is_admin\n    use_backend static_servers if is_static\n    use_backend websocket_servers if is_websocket\n    default_backend web_servers\n\n#---------------------------------------------------------------------\n# Backend Configurations\n#---------------------------------------------------------------------\n\n# Main web servers\nbackend web_servers\n    balance leastconn\n    option httpchk GET /health HTTP/1.1\\r\\nHost:\\ example.com\n    http-check expect status 200\n    \n    # Health check configuration\n    default-server inter 2000 rise 2 fall 3 slowstart 60s maxconn 250 maxqueue 256 weight 100\n    \n    server web1 192.168.1.10:8080 check cookie web1\n    server web2 192.168.1.11:8080 check cookie web2\n    server web3 192.168.1.12:8080 check cookie web3\n    server web4 192.168.1.13:8080 check cookie web4 backup\n    \n    # Stick table for session persistence\n    stick-table type ip size 200k expire 30m\n    stick on src\n\n# API servers backend\nbackend api_servers\n    balance roundrobin\n    option httpchk GET /api/health HTTP/1.1\\r\\nHost:\\ api.example.com\n    http-check expect rstring ^OK$\n    \n    # Enable HTTP/2 to backend\n    server api1 192.168.1.20:3000 check proto h2 verify none\n    server api2 192.168.1.21:3000 check proto h2 verify none\n    server api3 192.168.1.22:3000 check proto h2 verify none\n\n# Admin backend (restricted access)\nbackend admin_servers\n    balance source\n    option httpchk GET /admin/health\n    http-check expect status 200\n    \n    # IP whitelist for admin access\n    http-request deny unless { src 192.168.1.0/24 10.0.0.0/8 }\n    \n    server admin1 192.168.1.30:9000 check\n\n# Static content servers\nbackend static_servers\n    balance roundrobin\n    option httpchk GET /health.txt\n    http-check expect string \u0026quot;OK\u0026quot;\n    \n    # Cache control\n    http-response set-header Cache-Control \u0026quot;public, max-age=86400\u0026quot;\n    \n    server static1 192.168.1.40:8080 check\n    server static2 192.168.1.41:8080 check\n\n# WebSocket servers\nbackend websocket_servers\n    balance leastconn\n    option httpchk GET /ws/health\n    http-check expect status 101\n    \n    # WebSocket specific settings\n    timeout tunnel 3600s\n    \n    server ws1 192.168.1.50:8080 check\n    server ws2 192.168.1.51:8080 check\n\n#---------------------------------------------------------------------\n# Database Load Balancing (TCP Mode)\n#---------------------------------------------------------------------\n\n# MySQL Master-Slave Load Balancing\nfrontend mysql_frontend\n    bind *:3306\n    mode tcp\n    default_backend mysql_servers\n\nbackend mysql_servers\n    mode tcp\n    balance leastconn\n    option mysql-check user haproxy_check\n    \n    # MySQL health checks\n    server mysql-master 192.168.1.60:3306 check weight 1000\n    server mysql-slave1 192.168.1.61:3306 check weight 100 backup\n    server mysql-slave2 192.168.1.62:3306 check weight 100 backup\n\n# PostgreSQL Load Balancing\nfrontend postgresql_frontend\n    bind *:5432\n    mode tcp\n    default_backend postgresql_servers\n\nbackend postgresql_servers\n    mode tcp\n    balance roundrobin\n    option pgsql-check user haproxy_check\n    \n    server postgres1 192.168.1.70:5432 check\n    server postgres2 192.168.1.71:5432 check\n\n# Redis Cluster Load Balancing\nfrontend redis_frontend\n    bind *:6379\n    mode tcp\n    default_backend redis_servers\n\nbackend redis_servers\n    mode tcp\n    balance first\n    option redis-check\n    \n    server redis1 192.168.1.80:6379 check\n    server redis2 192.168.1.81:6379 check backup\n\n#---------------------------------------------------------------------\n# Statistics and Monitoring\n#---------------------------------------------------------------------\n\nlisten stats\n    bind *:8404\n    stats enable\n    stats uri /stats\n    stats refresh 30s\n    stats admin if { src 192.168.1.0/24 }\n    stats auth admin:secure_stats_password\n    \n    # Enhanced statistics\n    stats show-legends\n    stats show-modules\n    stats realm \u0026quot;HAProxy Statistics\u0026quot;\n    \n    # Prometheus metrics (if compiled with USE_PROMEX)\n    http-request use-service prometheus-exporter if { path /metrics }\n\n#---------------------------------------------------------------------\n# Advanced Features\n#---------------------------------------------------------------------\n\n# Global rate limiting\nbackend rate_limit_backend\n    stick-table type ip size 100k expire 30s store gpc0,http_req_rate(10s)\n\n# DDoS protection\nfrontend ddos_protection\n    bind *:80\n    \n    # Track client IPs\n    stick-table type ip size 100k expire 30s store gpc0,http_req_rate(10s),http_err_rate(10s)\n    http-request track-sc0 src table rate_limit_backend\n    \n    # Block clients exceeding rate limits\n    http-request deny if { sc_http_req_rate(0) gt 50 }\n    http-request deny if { sc_http_err_rate(0) gt 10 }\n    \n    default_backend web_servers\n\n# Health check backend for external monitoring\nbackend health_check\n    mode http\n    http-request return status 200 content-type text/plain string \u0026quot;HAProxy is healthy\u0026quot;\nEOF\n\n# Test configuration\nsudo haproxy -c -f ~/haproxy/config/haproxy.cfg\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"ssltls-configuration-and-security\" class=\"mobile-header\"\u003eSSL/TLS Configuration and Security\u003c/h2\u003e\n\u003ch3 id=\"advanced-ssl-termination\" class=\"mobile-header\"\u003eAdvanced SSL Termination\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Generate strong DH parameters\nsudo openssl dhparam -out /etc/haproxy/ssl/dhparam.pem 4096\n\n# Create SSL certificate bundle\nsudo mkdir -p /etc/haproxy/ssl\n\n# Self-signed certificate for testing\nsudo openssl req -x509 -nodes -days 365 -newkey rsa:4096 \\\n  -keyout /etc/haproxy/ssl/example.com.key \\\n  -out /etc/haproxy/ssl/example.com.crt \\\n  -subj \u0026quot;/C=US/ST=State/L=City/O=Organization/CN=example.com\u0026quot;\n\n# Combine certificate and key for HAProxy\nsudo cat /etc/haproxy/ssl/example.com.crt /etc/haproxy/ssl/example.com.key | sudo tee /etc/haproxy/ssl/example.com.pem\n\n# Production: Let\u0026#039;s Encrypt certificates\nsudo certbot certonly --standalone -d example.com -d www.example.com\nsudo cat /etc/letsencrypt/live/example.com/fullchain.pem /etc/letsencrypt/live/example.com/privkey.pem | sudo tee /etc/haproxy/ssl/example.com.pem\n\n# Set proper permissions\nsudo chmod 600 /etc/haproxy/ssl/*.pem\nsudo chown haproxy:haproxy /etc/haproxy/ssl/*.pem\n\n# Create certificate renewal script\nsudo tee /usr/local/bin/haproxy-ssl-renewal.sh \u0026gt; /dev/null \u0026lt;\u0026lt;\u0026#039;EOF\u0026#039;\n#!/bin/bash\nCERT_PATH=\u0026quot;/etc/letsencrypt/live\u0026quot;\nHAPROXY_CERT_DIR=\u0026quot;/etc/haproxy/ssl\u0026quot;\n\n# Renew certificates\ncertbot renew --quiet --pre-hook \u0026quot;systemctl stop haproxy\u0026quot; --post-hook \u0026quot;systemctl start haproxy\u0026quot;\n\n# Update HAProxy certificate bundles\nfor domain in $(ls ${CERT_PATH}/); do\n    if [ -f \u0026quot;${CERT_PATH}/${domain}/fullchain.pem\u0026quot; ]; then\n        cat \u0026quot;${CERT_PATH}/${domain}/fullchain.pem\u0026quot; \u0026quot;${CERT_PATH}/${domain}/privkey.pem\u0026quot; \u0026gt; \u0026quot;${HAPROXY_CERT_DIR}/${domain}.pem\u0026quot;\n        chmod 600 \u0026quot;${HAPROXY_CERT_DIR}/${domain}.pem\u0026quot;\n        chown haproxy:haproxy \u0026quot;${HAPROXY_CERT_DIR}/${domain}.pem\u0026quot;\n    fi\ndone\n\n# Reload HAProxy configuration\nsystemctl reload haproxy\n\necho \u0026quot;SSL certificates updated for HAProxy\u0026quot;\nEOF\n\nsudo chmod +x /usr/local/bin/haproxy-ssl-renewal.sh\n\n# Schedule certificate renewal\necho \u0026quot;0 3 * * 1 root /usr/local/bin/haproxy-ssl-renewal.sh\u0026quot; | sudo tee -a /etc/crontab\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"security-hardening-configuration\" class=\"mobile-header\"\u003eSecurity Hardening Configuration\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Create security-focused configuration additions\nsudo tee /etc/haproxy/conf.d/security.cfg \u0026gt; /dev/null \u0026lt;\u0026lt;EOF\n#---------------------------------------------------------------------\n# Security Configuration\n#---------------------------------------------------------------------\n\nglobal\n    # Security settings\n    tune.ssl.default-dh-param 2048\n    tune.ssl.capture-buffer-size 0\n    tune.ssl.maxrecord 1460\n    \n    # Disable SSLv3 and weak ciphers\n    ssl-default-bind-options no-sslv3 no-tlsv10 no-tlsv11\n\ndefaults\n    # Hide server information\n    option hide-version\n    \n    # Security headers for all responses\n    http-response del-header Server\n    http-response del-header X-Powered-By\n    \n    # Request size limits\n    http-request deny if { req.body_size gt 10000000 }  # 10MB limit\n    \n    # Block suspicious request methods\n    acl blocked_methods method TRACE CONNECT\n    http-request deny if blocked_methods\n    \n    # Block requests with suspicious headers\n    acl suspicious_headers hdr_cnt(host) gt 1\n    acl suspicious_headers hdr_cnt(content-length) gt 1\n    http-request deny if suspicious_headers\n\n# Rate limiting configuration\nbackend rate_limit_abuse\n    stick-table type ip size 100k expire 30s store gpc0,gpc1,http_req_rate(10s),http_err_rate(10s),conn_rate(10s)\n\nfrontend rate_limiting\n    # Track requests per IP\n    http-request track-sc0 src table rate_limit_abuse\n    \n    # Deny clients that exceed rate limits\n    http-request deny if { sc_http_req_rate(0) gt 100 }\n    http-request deny if { sc_conn_rate(0) gt 20 }\n    http-request deny if { sc_http_err_rate(0) gt 10 }\n    \n    # Slow down abusive clients\n    http-request set-var(req.delay) int(1000) if { sc_http_req_rate(0) gt 50 }\n    http-request lua.delay_request if { var(req.delay) -m found }\n\n# WAF-like filtering\nfrontend security_frontend\n    # Block common attacks\n    acl is_sql_injection path_reg -i .*(union|select|insert|delete|update|drop|create|alter|exec|script|javascript|vbscript|onload|onerror|onclick).*\n    acl is_xss path_reg -i .*(script|iframe|object|embed|form|img|svg|math|details|svg).*\n    acl is_path_traversal path_reg -i .*(\\.\\./|\\.\\.\\\\|%2e%2e%2f|%2e%2e\\\\).*\n    \n    http-request deny if is_sql_injection\n    http-request deny if is_xss\n    http-request deny if is_path_traversal\n    \n    # GeoIP blocking (requires GeoIP data)\n    # http-request deny if { src,map_ip(/etc/haproxy/geoip/country.map) -i CN RU }\n\nEOF\n\n# Include security configuration\necho \u0026quot;include /etc/haproxy/conf.d/*.cfg\u0026quot; | sudo tee -a /etc/haproxy/haproxy.cfg\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"advanced-load-balancing-strategies\" class=\"mobile-header\"\u003eAdvanced Load Balancing Strategies\u003c/h2\u003e\n\u003ch3 id=\"multi-tier-application-load-balancing\" class=\"mobile-header\"\u003eMulti-Tier Application Load Balancing\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003esudo tee /etc/haproxy/haproxy.cfg \u0026gt; /dev/null \u0026lt;\u0026lt;EOF\nglobal\n    log stdout local0\n    stats socket /run/haproxy/admin.sock mode 660 level admin\n    user haproxy\n    group haproxy\n    daemon\n\ndefaults\n    mode http\n    log global\n    option httplog\n    option dontlognull\n    timeout connect 5s\n    timeout client 50s\n    timeout server 50s\n\n#---------------------------------------------------------------------\n# Application Frontend with Advanced Routing\n#---------------------------------------------------------------------\n\nfrontend app_frontend\n    bind *:443 ssl crt /etc/haproxy/ssl/ alpn h2,http/1.1\n    \n    # ACLs for microservices routing\n    acl is_user_service path_beg /api/users/\n    acl is_order_service path_beg /api/orders/\n    acl is_payment_service path_beg /api/payments/\n    acl is_notification_service path_beg /api/notifications/\n    acl is_admin_panel path_beg /admin/\n    acl is_monitoring path_beg /monitoring/\n    \n    # Geographic routing\n    acl is_us_traffic src 192.168.1.0/24\n    acl is_eu_traffic src 192.168.2.0/24\n    acl is_asia_traffic src 192.168.3.0/24\n    \n    # Device detection\n    acl is_mobile hdr_reg(User-Agent) -i (mobile|android|iphone|ipad)\n    acl is_desktop hdr_reg(User-Agent) -i (windows|macos|linux)\n    \n    # Routing decisions\n    use_backend user_service_us if is_user_service is_us_traffic\n    use_backend user_service_eu if is_user_service is_eu_traffic\n    use_backend order_service if is_order_service\n    use_backend payment_service if is_payment_service\n    use_backend notification_service if is_notification_service\n    use_backend admin_panel if is_admin_panel\n    use_backend monitoring_backend if is_monitoring\n    use_backend mobile_servers if is_mobile\n    default_backend web_servers\n\n# User Service Backends (Geographic)\nbackend user_service_us\n    balance roundrobin\n    option httpchk GET /api/users/health\n    http-check expect status 200\n    server user-us-1 192.168.1.100:3001 check\n    server user-us-2 192.168.1.101:3001 check\n    server user-us-3 192.168.1.102:3001 check\n\nbackend user_service_eu\n    balance roundrobin\n    option httpchk GET /api/users/health\n    server user-eu-1 192.168.2.100:3001 check\n    server user-eu-2 192.168.2.101:3001 check\n\n# Microservices Backends\nbackend order_service\n    balance leastconn\n    option httpchk GET /api/orders/health\n    server order-1 192.168.1.110:3002 check\n    server order-2 192.168.1.111:3002 check\n    server order-3 192.168.1.112:3002 check\n\nbackend payment_service\n    balance roundrobin\n    option httpchk GET /api/payments/health\n    # Enhanced security for payment service\n    http-request set-header X-Forwarded-Proto https\n    http-request add-header X-Client-IP %[src]\n    server payment-1 192.168.1.120:3003 check ssl verify none\n    server payment-2 192.168.1.121:3003 check ssl verify none\n\nbackend notification_service\n    balance roundrobin\n    option httpchk GET /api/notifications/health\n    server notification-1 192.168.1.130:3004 check\n    server notification-2 192.168.1.131:3004 check\n\n# Admin Panel Backend (Restricted)\nbackend admin_panel\n    balance source\n    option httpchk GET /admin/health\n    http-check expect status 200\n    \n    # Additional security\n    http-request add-header X-Admin-Access \u0026quot;true\u0026quot;\n    timeout server 2m\n    \n    server admin-1 192.168.1.140:9000 check\n\n# Mobile-Optimized Backend\nbackend mobile_servers\n    balance roundrobin\n    option httpchk GET /mobile/health\n    # Mobile-specific optimizations\n    compression algo gzip\n    compression type text/html text/css application/javascript application/json\n    server mobile-1 192.168.1.150:8080 check\n    server mobile-2 192.168.1.151:8080 check\n\n#---------------------------------------------------------------------\n# Monitoring and Statistics\n#---------------------------------------------------------------------\n\nlisten stats\n    bind *:8404 ssl crt /etc/haproxy/ssl/stats.pem\n    stats enable\n    stats uri /\n    stats refresh 5s\n    stats admin if { src 192.168.1.0/24 }\n    stats auth admin:secure_stats_password\n    stats realm \u0026quot;HAProxy Statistics\u0026quot;\n    \n    # Prometheus metrics endpoint\n    http-request use-service prometheus-exporter if { path /metrics }\n    \n    # JSON stats API\n    http-request use-service prometheus-exporter if { path /stats/json }\n\n# Health check endpoint for external monitoring\nlisten health_check\n    bind *:8080\n    mode http\n    monitor-uri /health\n    option httplog\n    \n    acl site_dead nbsrv(web_servers) lt 1\n    acl api_dead nbsrv(api_servers) lt 1\n    \n    monitor fail if site_dead\n    monitor fail if api_dead\nEOF\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"global-load-balancing-with-dns\" class=\"mobile-header\"\u003eGlobal Load Balancing with DNS\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Integration with external DNS load balancing\nsudo tee /etc/haproxy/haproxy-dns.cfg \u0026gt; /dev/null \u0026lt;\u0026lt;EOF\nglobal\n    # DNS resolution for dynamic backends\n    dns-resolver dns1\n        nameserver dns1 8.8.8.8:53\n        nameserver dns2 8.8.4.4:53\n        resolve_retries 3\n        timeout retry 1s\n        hold nx 30s\n        hold other 30s\n        hold refused 30s\n        hold timeout 30s\n        hold valid 10s\n\ndefaults\n    mode http\n    timeout connect 5s\n    timeout client 30s\n    timeout server 30s\n\n# Dynamic backend resolution\nbackend dynamic_backend\n    balance roundrobin\n    option httpchk GET /health\n    \n    # Servers resolved via DNS\n    server-template web- 3 web.example.com:80 check resolvers dns1\n    server-template api- 2 api.example.com:80 check resolvers dns1\n\n# Service discovery integration\nbackend consul_backend\n    balance roundrobin\n    option httpchk GET /health\n    \n    # Consul service discovery\n    server-template consul- 3 _web._tcp.service.consul:80 check resolvers dns1\nEOF\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"high-availability-and-clustering\" class=\"mobile-header\"\u003eHigh Availability and Clustering\u003c/h2\u003e\n\u003ch3 id=\"haproxy-keepalived-setup\" class=\"mobile-header\"\u003eHAProxy Keepalived Setup\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Install keepalived for HA\nsudo apt install -y keepalived  # Ubuntu/Debian\nsudo yum install -y keepalived  # RHEL/CentOS\n\n# Configure keepalived on primary HAProxy\nsudo tee /etc/keepalived/keepalived.conf \u0026gt; /dev/null \u0026lt;\u0026lt;EOF\n! Configuration File for keepalived\n\nglobal_defs {\n    router_id HAProxy_Primary\n    vrrp_skip_check_adv_addr\n    vrrp_strict\n    vrrp_garp_interval 0\n    vrrp_gna_interval 0\n    script_user root\n    enable_script_security\n}\n\n# Health check script\nvrrp_script chk_haproxy {\n    script \u0026quot;/usr/bin/killall -0 haproxy\u0026quot;\n    interval 2\n    weight 2\n    fall 3\n    rise 2\n}\n\nvrrp_instance VI_1 {\n    state MASTER\n    interface eth0\n    virtual_router_id 51\n    priority 110\n    advert_int 1\n    authentication {\n        auth_type PASS\n        auth_pass secure_vrrp_password\n    }\n    virtual_ipaddress {\n        192.168.1.100/24\n    }\n    track_script {\n        chk_haproxy\n    }\n    notify_master /etc/keepalived/master.sh\n    notify_backup /etc/keepalived/backup.sh\n}\nEOF\n\n# Create notification scripts\nsudo tee /etc/keepalived/master.sh \u0026gt; /dev/null \u0026lt;\u0026lt;\u0026#039;EOF\u0026#039;\n#!/bin/bash\necho \u0026quot;$(date): Became MASTER\u0026quot; \u0026gt;\u0026gt; /var/log/keepalived.log\n# Add any additional master setup commands here\nEOF\n\nsudo tee /etc/keepalived/backup.sh \u0026gt; /dev/null \u0026lt;\u0026lt;\u0026#039;EOF\u0026#039;\n#!/bin/bash\necho \u0026quot;$(date): Became BACKUP\u0026quot; \u0026gt;\u0026gt; /var/log/keepalived.log\n# Add any additional backup setup commands here\nEOF\n\nsudo chmod +x /etc/keepalived/{master,backup}.sh\nsudo systemctl enable --now keepalived\n\n# Configure backup HAProxy with lower priority (100 instead of 110)\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"multi-site-load-balancing\" class=\"mobile-header\"\u003eMulti-Site Load Balancing\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Configure multi-site load balancing\nsudo tee /etc/haproxy/haproxy-multisite.cfg \u0026gt; /dev/null \u0026lt;\u0026lt;EOF\nglobal\n    log stdout local0\n    stats socket /run/haproxy/admin.sock mode 660 level admin\n    user haproxy\n    group haproxy\n    daemon\n\ndefaults\n    mode http\n    log global\n    option httplog\n    timeout connect 5s\n    timeout client 30s\n    timeout server 30s\n\n# Frontend for multi-site routing\nfrontend multisite_frontend\n    bind *:443 ssl crt /etc/haproxy/ssl/ alpn h2,http/1.1\n    \n    # Site detection based on headers\n    acl is_site_a hdr(host) -i site-a.example.com\n    acl is_site_b hdr(host) -i site-b.example.com\n    acl is_site_c hdr(host) -i site-c.example.com\n    \n    # Geographic routing based on source IP\n    acl is_americas src 10.1.0.0/16\n    acl is_europe src 10.2.0.0/16\n    acl is_asia src 10.3.0.0/16\n    \n    # Route to appropriate backends\n    use_backend site_a_americas if is_site_a is_americas\n    use_backend site_a_europe if is_site_a is_europe\n    use_backend site_a_asia if is_site_a is_asia\n    use_backend site_b_backend if is_site_b\n    use_backend site_c_backend if is_site_c\n    \n    default_backend default_site\n\n# Regional backends\nbackend site_a_americas\n    balance leastconn\n    option httpchk GET /health\n    server site-a-us-1 us-east-1.example.com:80 check\n    server site-a-us-2 us-west-2.example.com:80 check\n\nbackend site_a_europe\n    balance leastconn\n    option httpchk GET /health\n    server site-a-eu-1 eu-west-1.example.com:80 check\n    server site-a-eu-2 eu-central-1.example.com:80 check\n\nbackend site_a_asia\n    balance leastconn\n    option httpchk GET /health\n    server site-a-ap-1 ap-southeast-1.example.com:80 check\n    server site-a-ap-2 ap-northeast-1.example.com:80 check\nEOF\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"monitoring-and-observability\" class=\"mobile-header\"\u003eMonitoring and Observability\u003c/h2\u003e\n\u003ch3 id=\"prometheus-integration\" class=\"mobile-header\"\u003ePrometheus Integration\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Configure HAProxy for Prometheus scraping\nsudo tee -a /etc/haproxy/haproxy.cfg \u0026gt; /dev/null \u0026lt;\u0026lt;EOF\n\n# Prometheus metrics endpoint\nfrontend prometheus_frontend\n    bind *:8405\n    http-request use-service prometheus-exporter if { path /metrics }\n    http-request deny\nEOF\n\n# Create HAProxy exporter configuration\nsudo tee /etc/systemd/system/haproxy-exporter.service \u0026gt; /dev/null \u0026lt;\u0026lt;EOF\n[Unit]\nDescription=HAProxy Exporter for Prometheus\nAfter=network.target\n\n[Service]\nType=simple\nUser=haproxy\nExecStart=/usr/local/bin/haproxy_exporter \\\n    --haproxy.scrape-uri=\u0026quot;http://admin:secure_stats_password@localhost:8404/stats;csv\u0026quot; \\\n    --web.listen-address=\u0026quot;0.0.0.0:9101\u0026quot;\nRestart=always\n\n[Install]\nWantedBy=multi-user.target\nEOF\n\n# Download HAProxy exporter\nHAPROXY_EXPORTER_VERSION=\u0026quot;0.15.0\u0026quot;\nwget https://github.com/prometheus/haproxy_exporter/releases/download/v${HAPROXY_EXPORTER_VERSION}/haproxy_exporter-${HAPROXY_EXPORTER_VERSION}.linux-amd64.tar.gz\ntar xzf haproxy_exporter-${HAPROXY_EXPORTER_VERSION}.linux-amd64.tar.gz\nsudo cp haproxy_exporter-${HAPROXY_EXPORTER_VERSION}.linux-amd64/haproxy_exporter /usr/local/bin/\n\nsudo systemctl daemon-reload\nsudo systemctl enable --now haproxy-exporter\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"comprehensive-logging\" class=\"mobile-header\"\u003eComprehensive Logging\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Configure rsyslog for HAProxy\nsudo tee /etc/rsyslog.d/49-haproxy.conf \u0026gt; /dev/null \u0026lt;\u0026lt;EOF\n# HAProxy log configuration\n\\$ModLoad imudp\n\\$UDPServerRun 514\n\\$UDPServerAddress 127.0.0.1\n\n# HAProxy logs\nlocal0.*    /var/log/haproxy/haproxy.log\n\u0026amp; stop\n\n# Separate access and error logs\nlocal0.info /var/log/haproxy/access.log\nlocal0.err  /var/log/haproxy/error.log\nlocal0.warning /var/log/haproxy/warning.log\nEOF\n\n# Create log directory\nsudo mkdir -p /var/log/haproxy\nsudo chown syslog:adm /var/log/haproxy\n\n# Configure log rotation\nsudo tee /etc/logrotate.d/haproxy \u0026gt; /dev/null \u0026lt;\u0026lt;EOF\n/var/log/haproxy/*.log {\n    daily\n    rotate 30\n    missingok\n    notifempty\n    compress\n    delaycompress\n    postrotate\n        /bin/kill -HUP \\`cat /var/run/rsyslogd.pid 2\u0026gt;/dev/null\\` 2\u0026gt;/dev/null || true\n    endscript\n}\nEOF\n\nsudo systemctl restart rsyslog\nsudo systemctl reload haproxy\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"performance-optimization\" class=\"mobile-header\"\u003ePerformance Optimization\u003c/h2\u003e\n\u003ch3 id=\"system-level-tuning\" class=\"mobile-header\"\u003eSystem-Level Tuning\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Kernel optimization for HAProxy\nsudo tee -a /etc/sysctl.conf \u0026gt; /dev/null \u0026lt;\u0026lt;EOF\n# HAProxy performance tuning\nnet.core.somaxconn = 65535\nnet.core.netdev_max_backlog = 5000\nnet.ipv4.tcp_max_syn_backlog = 65535\nnet.ipv4.tcp_max_tw_buckets = 400000\nnet.ipv4.tcp_tw_reuse = 1\nnet.ipv4.tcp_fin_timeout = 10\nnet.ipv4.ip_local_port_range = 15000 65000\nnet.core.rmem_default = 262144\nnet.core.rmem_max = 16777216\nnet.core.wmem_default = 262144\nnet.core.wmem_max = 16777216\nnet.ipv4.tcp_rmem = 4096 65536 16777216\nnet.ipv4.tcp_wmem = 4096 65536 16777216\nfs.file-max = 100000\nvm.swappiness = 1\nEOF\n\nsudo sysctl -p\n\n# Set resource limits\nsudo tee -a /etc/security/limits.conf \u0026gt; /dev/null \u0026lt;\u0026lt;EOF\nhaproxy soft nofile 65535\nhaproxy hard nofile 65535\nhaproxy soft nproc 65535\nhaproxy hard nproc 65535\nEOF\n\n# Optimize HAProxy service\nsudo tee /etc/systemd/system/haproxy.service.d/performance.conf \u0026gt; /dev/null \u0026lt;\u0026lt;EOF\n[Service]\nLimitNOFILE=65535\nLimitNPROC=65535\nExecStart=\nExecStart=/usr/sbin/haproxy -f /etc/haproxy/haproxy.cfg -p /run/haproxy.pid -S /run/haproxy-master.sock\nExecReload=/usr/sbin/haproxy -f /etc/haproxy/haproxy.cfg -c -q\nExecReload=/bin/kill -USR2 \\$MAINPID\nEOF\n\nsudo systemctl daemon-reload\nsudo systemctl restart haproxy\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"advanced-performance-configuration\" class=\"mobile-header\"\u003eAdvanced Performance Configuration\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003esudo tee /etc/haproxy/performance.cfg \u0026gt; /dev/null \u0026lt;\u0026lt;EOF\nglobal\n    # Performance optimization\n    maxconn 40000\n    nbthread 8\n    cpu-map auto:1/1-8 0-7\n    \n    # Memory optimization\n    tune.maxrewrite 1024\n    tune.bufsize 32768\n    \n    # Connection optimization\n    tune.maxaccept 500\n    tune.recv_enough 10000\n    \n    # SSL optimization\n    tune.ssl.default-dh-param 2048\n    tune.ssl.maxrecord 1460\n    tune.ssl.capture-buffer-size 0\n    \n    # Compression\n    tune.comp.maxlevel 6\n\ndefaults\n    # Performance settings\n    maxconn 8000\n    \n    # Timeouts\n    timeout connect 3s\n    timeout client 25s\n    timeout server 25s\n    timeout tunnel 3600s\n    timeout http-keep-alive 1s\n    timeout http-request 15s\n    timeout queue 30s\n    timeout tarpit 60s\n    \n    # Keep-alive optimization\n    option http-keep-alive\n    option prefer-last-server\n    \n    # Compression\n    compression algo gzip\n    compression type text/html text/css text/javascript application/javascript application/json application/xml\n\n# High-performance backend configuration\nbackend high_performance_backend\n    balance leastconn\n    option httpchk GET /health\n    http-check expect status 200\n    \n    # Connection pooling\n    option http-reuse always\n    \n    # Server configuration with optimal settings\n    default-server inter 1000 fastinter 500 downinter 2000 rise 2 fall 3 slowstart 30s maxconn 1000 maxqueue 256 weight 100\n    \n    server web1 192.168.1.10:8080 check\n    server web2 192.168.1.11:8080 check\n    server web3 192.168.1.12:8080 check\n    server web4 192.168.1.13:8080 check\nEOF\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"backup-and-disaster-recovery\" class=\"mobile-header\"\u003eBackup and Disaster Recovery\u003c/h2\u003e\n\u003ch3 id=\"4-configuration-management-and-backup\" class=\"mobile-header\"\u003e4. Configuration Management and Backup\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003esudo tee /usr/local/bin/haproxy-backup.sh \u0026gt; /dev/null \u0026lt;\u0026lt;\u0026#039;EOF\u0026#039;\n#!/bin/bash\nBACKUP_DIR=\u0026quot;/backup/haproxy\u0026quot;\nDATE=$(date +%Y%m%d_%H%M%S)\n\nmkdir -p ${BACKUP_DIR}/{config,ssl,stats,logs}\n\n# Backup configuration files\ntar -czf ${BACKUP_DIR}/config/haproxy-config-${DATE}.tar.gz \\\n    /etc/haproxy/ \\\n    /etc/systemd/system/haproxy.service* \\\n    /etc/keepalived/\n\n# Backup SSL certificates\ntar -czf ${BACKUP_DIR}/ssl/haproxy-ssl-${DATE}.tar.gz \\\n    /etc/haproxy/ssl/ \\\n    /etc/letsencrypt/\n\n# Backup statistics and runtime state\necho \u0026quot;show stat\u0026quot; | socat stdio /run/haproxy/admin.sock \u0026gt; ${BACKUP_DIR}/stats/haproxy-stats-${DATE}.txt\necho \u0026quot;show info\u0026quot; | socat stdio /run/haproxy/admin.sock \u0026gt; ${BACKUP_DIR}/stats/haproxy-info-${DATE}.txt\necho \u0026quot;show sess\u0026quot; | socat stdio /run/haproxy/admin.sock \u0026gt; ${BACKUP_DIR}/stats/haproxy-sessions-${DATE}.txt\n\n# Backup recent logs\nfind /var/log/haproxy -name \u0026quot;*.log\u0026quot; -mtime -1 -exec tar -czf ${BACKUP_DIR}/logs/haproxy-logs-${DATE}.tar.gz {} +\n\n# Upload to cloud storage\naws s3 cp ${BACKUP_DIR}/ s3://haproxy-backups/ --recursive\naz storage blob upload-batch --source ${BACKUP_DIR} --destination haproxy-backups\ngsutil cp -r ${BACKUP_DIR}/* gs://haproxy-backups/\n\n# Keep only last 15 backups\nfind ${BACKUP_DIR} -name \u0026quot;haproxy-*\u0026quot; -type f -mtime +15 -delete\n\n# Test configuration validity\nhaproxy -c -f /etc/haproxy/haproxy.cfg\n\necho \u0026quot;HAProxy backup completed: ${DATE}\u0026quot;\nEOF\n\nsudo chmod +x /usr/local/bin/haproxy-backup.sh\n\n# Schedule daily backups\necho \u0026quot;0 2 * * * root /usr/local/bin/haproxy-backup.sh\u0026quot; | sudo tee -a /etc/crontab\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"disaster-recovery-automation\" class=\"mobile-header\"\u003eDisaster Recovery Automation\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003esudo tee /usr/local/bin/haproxy-dr.sh \u0026gt; /dev/null \u0026lt;\u0026lt;\u0026#039;EOF\u0026#039;\n#!/bin/bash\nDR_MODE=\u0026quot;${1:-test}\u0026quot;  # test, activate, or deactivate\n\ncase \u0026quot;$DR_MODE\u0026quot; in\n    \u0026quot;test\u0026quot;)\n        echo \u0026quot;Testing DR procedures...\u0026quot;\n        \n        # Test backup restoration\n        LATEST_BACKUP=$(ls -t /backup/haproxy/config/haproxy-config-*.tar.gz | head -1)\n        if [ -n \u0026quot;$LATEST_BACKUP\u0026quot; ]; then\n            echo \u0026quot;✓ Latest backup found: $LATEST_BACKUP\u0026quot;\n        else\n            echo \u0026quot;✗ No backup files found\u0026quot;\n            exit 1\n        fi\n        \n        # Test configuration\n        haproxy -c -f /etc/haproxy/haproxy.cfg\n        echo \u0026quot;✓ Configuration is valid\u0026quot;\n        \n        # Test backend connectivity\n        for backend in $(echo \u0026quot;show stat\u0026quot; | socat stdio /run/haproxy/admin.sock | grep \u0026quot;,BACKEND,\u0026quot; | cut -d, -f1); do\n            echo \u0026quot;Testing backend: $backend\u0026quot;\n            echo \u0026quot;show stat\u0026quot; | socat stdio /run/haproxy/admin.sock | grep \u0026quot;$backend\u0026quot;\n        done\n        \n        echo \u0026quot;DR test completed\u0026quot;\n        ;;\n        \n    \u0026quot;activate\u0026quot;)\n        echo \u0026quot;Activating DR procedures...\u0026quot;\n        \n        # Switch to DR configuration\n        cp /etc/haproxy/haproxy-dr.cfg /etc/haproxy/haproxy.cfg\n        \n        # Reload HAProxy\n        systemctl reload haproxy\n        \n        # Update DNS (example with Route53)\n        aws route53 change-resource-record-sets --hosted-zone-id Z123456789 --change-batch file://dr-dns-update.json\n        \n        echo \u0026quot;DR activated\u0026quot;\n        ;;\n        \n    \u0026quot;deactivate\u0026quot;)\n        echo \u0026quot;Deactivating DR procedures...\u0026quot;\n        \n        # Restore original configuration\n        cp /etc/haproxy/haproxy.cfg.backup /etc/haproxy/haproxy.cfg\n        \n        # Reload HAProxy\n        systemctl reload haproxy\n        \n        # Update DNS back to primary\n        aws route53 change-resource-record-sets --hosted-zone-id Z123456789 --change-batch file://primary-dns-update.json\n        \n        echo \u0026quot;DR deactivated\u0026quot;\n        ;;\n        \n    *)\n        echo \u0026quot;Usage: $0 {test|activate|deactivate}\u0026quot;\n        exit 1\n        ;;\nesac\nEOF\n\nsudo chmod +x /usr/local/bin/haproxy-dr.sh\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"verification-and-health-checks\" class=\"mobile-header\"\u003eVerification and Health Checks\u003c/h2\u003e\n\u003ch3 id=\"comprehensive-health-monitoring\" class=\"mobile-header\"\u003eComprehensive Health Monitoring\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003esudo tee /usr/local/bin/haproxy-health-check.sh \u0026gt; /dev/null \u0026lt;\u0026lt;\u0026#039;EOF\u0026#039;\n#!/bin/bash\nHEALTH_LOG=\u0026quot;/var/log/haproxy-health.log\u0026quot;\n\nlog_message() {\n    echo \u0026quot;$(date \u0026#039;+%Y-%m-%d %H:%M:%S\u0026#039;) - $1\u0026quot; | tee -a ${HEALTH_LOG}\n}\n\n# Check HAProxy service status\nif systemctl is-active haproxy \u0026gt;/dev/null 2\u0026gt;\u0026amp;1; then\n    log_message \u0026quot;✓ HAProxy service is running\u0026quot;\nelse\n    log_message \u0026quot;✗ HAProxy service is not running\u0026quot;\n    exit 1\nfi\n\n# Check configuration validity\nif haproxy -c -f /etc/haproxy/haproxy.cfg \u0026gt;/dev/null 2\u0026gt;\u0026amp;1; then\n    log_message \u0026quot;✓ HAProxy configuration is valid\u0026quot;\nelse\n    log_message \u0026quot;✗ HAProxy configuration has errors\u0026quot;\n    haproxy -c -f /etc/haproxy/haproxy.cfg\nfi\n\n# Check listening ports\nLISTENING_PORTS=$(netstat -tlnp | grep haproxy | wc -l)\nlog_message \u0026quot;✓ HAProxy is listening on ${LISTENING_PORTS} ports\u0026quot;\n\n# Check backend server health\nBACKEND_STATS=$(echo \u0026quot;show stat\u0026quot; | socat stdio /run/haproxy/admin.sock | grep -c \u0026quot;,UP,\u0026quot;)\nTOTAL_SERVERS=$(echo \u0026quot;show stat\u0026quot; | socat stdio /run/haproxy/admin.sock | grep -c \u0026quot;,.*,\u0026quot;)\nlog_message \u0026quot;✓ ${BACKEND_STATS}/${TOTAL_SERVERS} backend servers are healthy\u0026quot;\n\n# Check SSL certificate expiry\nif [ -d /etc/haproxy/ssl ]; then\n    for cert in /etc/haproxy/ssl/*.pem; do\n        if [ -f \u0026quot;$cert\u0026quot; ]; then\n            EXPIRY=$(openssl x509 -in \u0026quot;$cert\u0026quot; -noout -dates | grep notAfter | cut -d= -f2)\n            EXPIRY_EPOCH=$(date -d \u0026quot;$EXPIRY\u0026quot; +%s)\n            CURRENT_EPOCH=$(date +%s)\n            DAYS_TO_EXPIRY=$(( (EXPIRY_EPOCH - CURRENT_EPOCH) / 86400 ))\n            \n            if [ $DAYS_TO_EXPIRY -lt 30 ]; then\n                log_message \u0026quot;⚠ SSL certificate $(basename $cert) expires in ${DAYS_TO_EXPIRY} days\u0026quot;\n            else\n                log_message \u0026quot;✓ SSL certificate $(basename $cert) expires in ${DAYS_TO_EXPIRY} days\u0026quot;\n            fi\n        fi\n    done\nfi\n\n# Check memory usage\nMEMORY_USAGE=$(ps -o pid,vsz,rss,comm -C haproxy | tail -1 | awk \u0026#039;{print $3/1024}\u0026#039;)\nlog_message \u0026quot;ℹ HAProxy memory usage: ${MEMORY_USAGE}MB\u0026quot;\n\n# Check connection statistics\nCURRENT_CONNS=$(echo \u0026quot;show info\u0026quot; | socat stdio /run/haproxy/admin.sock | grep \u0026quot;CurrConns\u0026quot; | cut -d: -f2 | tr -d \u0026#039; \u0026#039;)\nMAX_CONNS=$(echo \u0026quot;show info\u0026quot; | socat stdio /run/haproxy/admin.sock | grep \u0026quot;MaxConn\u0026quot; | cut -d: -f2 | tr -d \u0026#039; \u0026#039;)\nlog_message \u0026quot;ℹ Current connections: ${CURRENT_CONNS}/${MAX_CONNS}\u0026quot;\n\n# Check for any backend servers that are down\nDOWN_SERVERS=$(echo \u0026quot;show stat\u0026quot; | socat stdio /run/haproxy/admin.sock | grep \u0026quot;,DOWN,\u0026quot; | wc -l)\nif [ $DOWN_SERVERS -gt 0 ]; then\n    log_message \u0026quot;⚠ ${DOWN_SERVERS} backend servers are down\u0026quot;\n    echo \u0026quot;show stat\u0026quot; | socat stdio /run/haproxy/admin.sock | grep \u0026quot;,DOWN,\u0026quot; | while IFS=, read pxname svname; do\n        log_message \u0026quot;  - ${pxname}/${svname} is DOWN\u0026quot;\n    done\nfi\n\nlog_message \u0026quot;HAProxy health check completed\u0026quot;\nEOF\n\nsudo chmod +x /usr/local/bin/haproxy-health-check.sh\n\n# Schedule health checks every 5 minutes\necho \u0026quot;*/5 * * * * root /usr/local/bin/haproxy-health-check.sh\u0026quot; | sudo tee -a /etc/crontab\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"load-testing-and-performance-validation\" class=\"mobile-header\"\u003eLoad Testing and Performance Validation\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003esudo tee /usr/local/bin/haproxy-load-test.sh \u0026gt; /dev/null \u0026lt;\u0026lt;\u0026#039;EOF\u0026#039;\n#!/bin/bash\nTEST_RESULTS=\u0026quot;/tmp/haproxy-load-test-$(date +%Y%m%d_%H%M%S).txt\u0026quot;\nTEST_URL=\u0026quot;https://example.com\u0026quot;\nCONCURRENT_USERS=100\nTEST_DURATION=60\n\necho \u0026quot;HAProxy Load Test Results\u0026quot; \u0026gt; ${TEST_RESULTS}\necho \u0026quot;========================\u0026quot; \u0026gt;\u0026gt; ${TEST_RESULTS}\necho \u0026quot;Date: $(date)\u0026quot; \u0026gt;\u0026gt; ${TEST_RESULTS}\necho \u0026quot;Target URL: ${TEST_URL}\u0026quot; \u0026gt;\u0026gt; ${TEST_RESULTS}\necho \u0026quot;Concurrent Users: ${CONCURRENT_USERS}\u0026quot; \u0026gt;\u0026gt; ${TEST_RESULTS}\necho \u0026quot;Test Duration: ${TEST_DURATION}s\u0026quot; \u0026gt;\u0026gt; ${TEST_RESULTS}\necho \u0026quot;\u0026quot; \u0026gt;\u0026gt; ${TEST_RESULTS}\n\n# Install testing tools if not available\nif ! command -v ab \u0026amp;\u0026gt; /dev/null; then\n    apt-get update \u0026amp;\u0026amp; apt-get install -y apache2-utils\nfi\n\nif ! command -v wrk \u0026amp;\u0026gt; /dev/null; then\n    git clone https://github.com/wg/wrk.git /tmp/wrk\n    cd /tmp/wrk \u0026amp;\u0026amp; make \u0026amp;\u0026amp; cp wrk /usr/local/bin/\nfi\n\n# Run Apache Bench test\necho \u0026quot;Apache Bench Results:\u0026quot; \u0026gt;\u0026gt; ${TEST_RESULTS}\nab -n 10000 -c ${CONCURRENT_USERS} -k ${TEST_URL}/ \u0026gt;\u0026gt; ${TEST_RESULTS} 2\u0026gt;\u0026amp;1\n\necho \u0026quot;\u0026quot; \u0026gt;\u0026gt; ${TEST_RESULTS}\necho \u0026quot;WRK Results:\u0026quot; \u0026gt;\u0026gt; ${TEST_RESULTS}\nwrk -t4 -c${CONCURRENT_USERS} -d${TEST_DURATION}s --latency ${TEST_URL}/ \u0026gt;\u0026gt; ${TEST_RESULTS}\n\n# Capture HAProxy stats during test\necho \u0026quot;\u0026quot; \u0026gt;\u0026gt; ${TEST_RESULTS}\necho \u0026quot;HAProxy Statistics During Test:\u0026quot; \u0026gt;\u0026gt; ${TEST_RESULTS}\necho \u0026quot;show info\u0026quot; | socat stdio /run/haproxy/admin.sock \u0026gt;\u0026gt; ${TEST_RESULTS}\necho \u0026quot;show stat\u0026quot; | socat stdio /run/haproxy/admin.sock \u0026gt;\u0026gt; ${TEST_RESULTS}\n\necho \u0026quot;\u0026quot; \u0026gt;\u0026gt; ${TEST_RESULTS}\necho \u0026quot;Load test completed at: $(date)\u0026quot; \u0026gt;\u0026gt; ${TEST_RESULTS}\n\necho \u0026quot;Load test completed. Results: ${TEST_RESULTS}\u0026quot;\nEOF\n\nsudo chmod +x /usr/local/bin/haproxy-load-test.sh\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"firewall-configuration-cross-platform\" class=\"mobile-header\"\u003eFirewall Configuration (Cross-Platform)\u003c/h2\u003e\n\u003ch3 id=\"security-rules\" class=\"mobile-header\"\u003eSecurity Rules\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# UFW (Ubuntu/Debian)\nsudo ufw allow 80/tcp comment \u0026#039;HTTP\u0026#039;\nsudo ufw allow 443/tcp comment \u0026#039;HTTPS\u0026#039; \nsudo ufw allow from 192.168.1.0/24 to any port 8404 comment \u0026#039;Stats interface - internal only\u0026#039;\nsudo ufw allow from 192.168.1.0/24 to any port 9101 comment \u0026#039;Prometheus exporter - internal only\u0026#039;\nsudo ufw deny 8404 comment \u0026#039;Block stats from public\u0026#039;\nsudo ufw enable\n\n# Firewalld (RHEL/CentOS/Fedora)\nsudo firewall-cmd --permanent --add-service=http\nsudo firewall-cmd --permanent --add-service=https\nsudo firewall-cmd --permanent --new-zone=haproxy-mgmt\nsudo firewall-cmd --permanent --zone=haproxy-mgmt --add-source=192.168.1.0/24\nsudo firewall-cmd --permanent --zone=haproxy-mgmt --add-port=8404/tcp\nsudo firewall-cmd --permanent --zone=haproxy-mgmt --add-port=9101/tcp\nsudo firewall-cmd --reload\n\n# iptables (Universal)\nsudo iptables -A INPUT -p tcp --dport 80 -j ACCEPT\nsudo iptables -A INPUT -p tcp --dport 443 -j ACCEPT\nsudo iptables -A INPUT -p tcp -s 192.168.1.0/24 --dport 8404 -j ACCEPT\nsudo iptables -A INPUT -p tcp -s 192.168.1.0/24 --dport 9101 -j ACCEPT\nsudo iptables -A INPUT -p tcp --dport 8404 -j DROP\nsudo iptables -A INPUT -p tcp --dport 9101 -j DROP\n\n# Save iptables rules\n# Ubuntu/Debian\nsudo apt install -y iptables-persistent\nsudo netfilter-persistent save\n\n# RHEL/CentOS\nsudo service iptables save\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"ddos-protection-configuration\" class=\"mobile-header\"\u003eDDoS Protection Configuration\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003esudo tee /etc/haproxy/ddos-protection.cfg \u0026gt; /dev/null \u0026lt;\u0026lt;EOF\n# DDoS Protection Configuration\n\nglobal\n    # Stick tables for tracking\n    tune.stick-table.enable 1\n\nfrontend ddos_protection\n    bind *:80\n    bind *:443 ssl crt /etc/haproxy/ssl/\n    \n    # Track client behavior\n    stick-table type ip size 1m expire 5m store gpc0,gpc1,http_req_rate(10s),http_err_rate(10s),conn_rate(10s),bytes_out_rate(10s)\n    \n    # Track requests\n    http-request track-sc0 src\n    \n    # Rate limiting rules\n    acl abuse_request_rate sc_http_req_rate(0) gt 100\n    acl abuse_connection_rate sc_conn_rate(0) gt 20\n    acl abuse_error_rate sc_http_err_rate(0) gt 10\n    acl abuse_bandwidth sc_bytes_out_rate(0) gt 10000000  # 10MB/s\n    \n    # Geographic blocking (requires GeoIP)\n    # acl blocked_countries src,map_ip(/etc/haproxy/geoip-country.map) -i CN RU\n    \n    # User-Agent filtering\n    acl bad_user_agent hdr_sub(User-Agent) -i \u0026quot;sqlmap\u0026quot; \u0026quot;nikto\u0026quot; \u0026quot;nmap\u0026quot; \u0026quot;masscan\u0026quot; \u0026quot;zmap\u0026quot;\n    acl empty_user_agent hdr_cnt(User-Agent) eq 0\n    \n    # HTTP method filtering\n    acl allowed_methods method GET POST PUT DELETE HEAD OPTIONS PATCH\n    \n    # Deny rules\n    http-request deny if abuse_request_rate\n    http-request deny if abuse_connection_rate\n    http-request deny if abuse_error_rate\n    http-request deny if abuse_bandwidth\n    http-request deny if bad_user_agent\n    http-request deny if empty_user_agent\n    http-request deny if !allowed_methods\n    # http-request deny if blocked_countries\n    \n    # Tarpit suspicious clients\n    http-request tarpit if { sc_http_req_rate(0) gt 50 }\n    \n    default_backend web_servers\n\n# Clean backend\nbackend web_servers\n    balance leastconn\n    option httpchk GET /health\n    \n    server web1 192.168.1.10:8080 check\n    server web2 192.168.1.11:8080 check\n    server web3 192.168.1.12:8080 check\nEOF\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"runtime-management-and-monitoring\" class=\"mobile-header\"\u003eRuntime Management and Monitoring\u003c/h2\u003e\n\u003ch3 id=\"advanced-runtime-commands\" class=\"mobile-header\"\u003eAdvanced Runtime Commands\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Create HAProxy management script\nsudo tee /usr/local/bin/haproxy-manage.sh \u0026gt; /dev/null \u0026lt;\u0026lt;\u0026#039;EOF\u0026#039;\n#!/bin/bash\nHAPROXY_SOCKET=\u0026quot;/run/haproxy/admin.sock\u0026quot;\n\ncase \u0026quot;$1\u0026quot; in\n    \u0026quot;status\u0026quot;)\n        echo \u0026quot;=== HAProxy Status ===\u0026quot;\n        echo \u0026quot;show info\u0026quot; | socat stdio ${HAPROXY_SOCKET}\n        echo \u0026quot;\u0026quot;\n        echo \u0026quot;=== Server Status ===\u0026quot;\n        echo \u0026quot;show stat\u0026quot; | socat stdio ${HAPROXY_SOCKET} | column -t -s \u0026quot;,\u0026quot;\n        ;;\n    \n    \u0026quot;enable\u0026quot;)\n        if [ -z \u0026quot;$2\u0026quot; ] || [ -z \u0026quot;$3\u0026quot; ]; then\n            echo \u0026quot;Usage: $0 enable \u0026lt;backend\u0026gt; \u0026lt;server\u0026gt;\u0026quot;\n            exit 1\n        fi\n        echo \u0026quot;enable server $2/$3\u0026quot; | socat stdio ${HAPROXY_SOCKET}\n        echo \u0026quot;Server $2/$3 enabled\u0026quot;\n        ;;\n    \n    \u0026quot;disable\u0026quot;)\n        if [ -z \u0026quot;$2\u0026quot; ] || [ -z \u0026quot;$3\u0026quot; ]; then\n            echo \u0026quot;Usage: $0 disable \u0026lt;backend\u0026gt; \u0026lt;server\u0026gt;\u0026quot;\n            exit 1\n        fi\n        echo \u0026quot;disable server $2/$3\u0026quot; | socat stdio ${HAPROXY_SOCKET}\n        echo \u0026quot;Server $2/$3 disabled\u0026quot;\n        ;;\n    \n    \u0026quot;weight\u0026quot;)\n        if [ -z \u0026quot;$2\u0026quot; ] || [ -z \u0026quot;$3\u0026quot; ] || [ -z \u0026quot;$4\u0026quot; ]; then\n            echo \u0026quot;Usage: $0 weight \u0026lt;backend\u0026gt; \u0026lt;server\u0026gt; \u0026lt;weight\u0026gt;\u0026quot;\n            exit 1\n        fi\n        echo \u0026quot;set weight $2/$3 $4\u0026quot; | socat stdio ${HAPROXY_SOCKET}\n        echo \u0026quot;Weight for $2/$3 set to $4\u0026quot;\n        ;;\n    \n    \u0026quot;sessions\u0026quot;)\n        echo \u0026quot;=== Active Sessions ===\u0026quot;\n        echo \u0026quot;show sess\u0026quot; | socat stdio ${HAPROXY_SOCKET}\n        ;;\n    \n    \u0026quot;errors\u0026quot;)\n        echo \u0026quot;=== Recent Errors ===\u0026quot;\n        echo \u0026quot;show errors\u0026quot; | socat stdio ${HAPROXY_SOCKET}\n        ;;\n    \n    \u0026quot;reload\u0026quot;)\n        echo \u0026quot;Reloading HAProxy configuration...\u0026quot;\n        if haproxy -c -f /etc/haproxy/haproxy.cfg; then\n            systemctl reload haproxy\n            echo \u0026quot;Configuration reloaded successfully\u0026quot;\n        else\n            echo \u0026quot;Configuration has errors, reload aborted\u0026quot;\n            exit 1\n        fi\n        ;;\n    \n    \u0026quot;drain\u0026quot;)\n        if [ -z \u0026quot;$2\u0026quot; ] || [ -z \u0026quot;$3\u0026quot; ]; then\n            echo \u0026quot;Usage: $0 drain \u0026lt;backend\u0026gt; \u0026lt;server\u0026gt;\u0026quot;\n            exit 1\n        fi\n        echo \u0026quot;set server $2/$3 state drain\u0026quot; | socat stdio ${HAPROXY_SOCKET}\n        echo \u0026quot;Server $2/$3 is being drained\u0026quot;\n        \n        # Wait for connections to finish\n        while [ $(echo \u0026quot;show stat\u0026quot; | socat stdio ${HAPROXY_SOCKET} | grep \u0026quot;$2,$3\u0026quot; | cut -d, -f5) -gt 0 ]; do\n            echo \u0026quot;Waiting for connections to finish...\u0026quot;\n            sleep 5\n        done\n        echo \u0026quot;Server $2/$3 has been drained\u0026quot;\n        ;;\n    \n    *)\n        echo \u0026quot;Usage: $0 {status|enable|disable|weight|sessions|errors|reload|drain} [options]\u0026quot;\n        echo \u0026quot;\u0026quot;\n        echo \u0026quot;Examples:\u0026quot;\n        echo \u0026quot;  $0 status\u0026quot;\n        echo \u0026quot;  $0 enable web_servers web1\u0026quot;\n        echo \u0026quot;  $0 disable web_servers web1\u0026quot;\n        echo \u0026quot;  $0 weight web_servers web1 50\u0026quot;\n        echo \u0026quot;  $0 drain web_servers web1\u0026quot;\n        echo \u0026quot;  $0 sessions\u0026quot;\n        echo \u0026quot;  $0 errors\u0026quot;\n        echo \u0026quot;  $0 reload\u0026quot;\n        exit 1\n        ;;\nesac\nEOF\n\nsudo chmod +x /usr/local/bin/haproxy-manage.sh\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"automated-log-analysis\" class=\"mobile-header\"\u003eAutomated Log Analysis\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003esudo tee /usr/local/bin/haproxy-log-analysis.sh \u0026gt; /dev/null \u0026lt;\u0026lt;\u0026#039;EOF\u0026#039;\n#!/bin/bash\nLOG_FILE=\u0026quot;/var/log/haproxy/haproxy.log\u0026quot;\nANALYSIS_DIR=\u0026quot;/var/log/haproxy-analysis\u0026quot;\nDATE=$(date +%Y%m%d_%H%M%S)\n\nmkdir -p ${ANALYSIS_DIR}\n\n# Top client IPs\necho \u0026quot;Top Client IPs - ${DATE}\u0026quot; \u0026gt; ${ANALYSIS_DIR}/top-clients-${DATE}.txt\nawk \u0026#039;{print $6}\u0026#039; ${LOG_FILE} | sort | uniq -c | sort -nr | head -20 \u0026gt;\u0026gt; ${ANALYSIS_DIR}/top-clients-${DATE}.txt\n\n# Response time analysis\necho \u0026quot;Response Time Analysis - ${DATE}\u0026quot; \u0026gt; ${ANALYSIS_DIR}/response-times-${DATE}.txt\nawk \u0026#039;{print $11}\u0026#039; ${LOG_FILE} | grep -v \u0026#039;^-$\u0026#039; | sort -n | tail -100 \u0026gt;\u0026gt; ${ANALYSIS_DIR}/response-times-${DATE}.txt\n\n# Error analysis\necho \u0026quot;Error Analysis - ${DATE}\u0026quot; \u0026gt; ${ANALYSIS_DIR}/errors-${DATE}.txt\nawk \u0026#039;$10 \u0026gt;= 400 {print $0}\u0026#039; ${LOG_FILE} | tail -100 \u0026gt;\u0026gt; ${ANALYSIS_DIR}/errors-${DATE}.txt\n\n# Backend server analysis\necho \u0026quot;Backend Server Performance - ${DATE}\u0026quot; \u0026gt; ${ANALYSIS_DIR}/backend-performance-${DATE}.txt\nawk \u0026#039;{print $8}\u0026#039; ${LOG_FILE} | sort | uniq -c | sort -nr \u0026gt;\u0026gt; ${ANALYSIS_DIR}/backend-performance-${DATE}.txt\n\n# SSL/TLS analysis\necho \u0026quot;SSL/TLS Analysis - ${DATE}\u0026quot; \u0026gt; ${ANALYSIS_DIR}/ssl-analysis-${DATE}.txt\ngrep \u0026quot;SSL\u0026quot; ${LOG_FILE} | tail -50 \u0026gt;\u0026gt; ${ANALYSIS_DIR}/ssl-analysis-${DATE}.txt\n\n# Generate summary report\ncat \u0026gt; ${ANALYSIS_DIR}/summary-${DATE}.txt \u0026lt;\u0026lt;EOL\nHAProxy Log Analysis Summary - ${DATE}\n=====================================\n\nTotal Requests: $(wc -l \u0026lt; ${LOG_FILE})\nUnique IPs: $(awk \u0026#039;{print $6}\u0026#039; ${LOG_FILE} | sort -u | wc -l)\n4xx Errors: $(awk \u0026#039;$10 \u0026gt;= 400 \u0026amp;\u0026amp; $10 \u0026lt; 500 {print $0}\u0026#039; ${LOG_FILE} | wc -l)\n5xx Errors: $(awk \u0026#039;$10 \u0026gt;= 500 {print $0}\u0026#039; ${LOG_FILE} | wc -l)\n\nAverage Response Time: $(awk \u0026#039;{sum += $11; count++} END {print sum/count}\u0026#039; ${LOG_FILE})ms\n\nTop 5 Requested URLs:\n$(awk \u0026#039;{print $12}\u0026#039; ${LOG_FILE} | sort | uniq -c | sort -nr | head -5)\n\nAnalysis completed at: $(date)\nEOL\n\necho \u0026quot;Log analysis completed. Reports in: ${ANALYSIS_DIR}/\u0026quot;\nEOF\n\nsudo chmod +x /usr/local/bin/haproxy-log-analysis.sh\n\n# Schedule daily log analysis\necho \u0026quot;0 6 * * * root /usr/local/bin/haproxy-log-analysis.sh\u0026quot; | sudo tee -a /etc/crontab\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"6-troubleshooting-cross-platform\" class=\"mobile-header\"\u003e6. Troubleshooting (Cross-Platform)\u003c/h2\u003e\n\u003ch3 id=\"common-issues-and-solutions\" class=\"mobile-header\"\u003eCommon Issues and Solutions\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Check HAProxy process status\nps aux | grep haproxy\nsystemctl status haproxy\n\n# Configuration validation\nhaproxy -c -f /etc/haproxy/haproxy.cfg\nhaproxy -c -V -f /etc/haproxy/haproxy.cfg\n\n# Socket connectivity test\nsocat - /run/haproxy/admin.sock\necho \u0026quot;show info\u0026quot; | socat stdio /run/haproxy/admin.sock\n\n# Backend server connectivity test\nfor server in 192.168.1.10 192.168.1.11 192.168.1.12; do\n    echo \u0026quot;Testing $server...\u0026quot;\n    nc -zv $server 8080\n    curl -I http://$server:8080/health\ndone\n\n# SSL certificate issues\nopenssl x509 -in /etc/haproxy/ssl/example.com.pem -text -noout\nopenssl verify -CAfile /etc/haproxy/ssl/ca.crt /etc/haproxy/ssl/example.com.pem\n\n# Memory usage debugging\npmap -x $(pgrep haproxy)\ncat /proc/$(pgrep haproxy)/status | grep -E \u0026quot;(VmSize|VmRSS|VmData|VmStk)\u0026quot;\n\n# Network debugging\nss -tulpn | grep haproxy\nnetstat -tulpn | grep haproxy\nlsof -i :80,443,8404\n\n# Log debugging\ntail -f /var/log/haproxy/haproxy.log\njournalctl -u haproxy -f\n\n# Performance debugging\necho \u0026quot;show stat\u0026quot; | socat stdio /run/haproxy/admin.sock | grep -v \u0026quot;^#\u0026quot;\necho \u0026quot;show sess\u0026quot; | socat stdio /run/haproxy/admin.sock\necho \u0026quot;show pools\u0026quot; | socat stdio /run/haproxy/admin.sock\n\n# Configuration debugging\nhaproxy -vv\nhaproxy -dM -f /etc/haproxy/haproxy.cfg  # Don\u0026#039;t use in production\n\n# Check for core dumps\nfind /var/crash -name \u0026quot;haproxy*\u0026quot; 2\u0026gt;/dev/null\nfind /var/lib/systemd/coredump -name \u0026quot;*haproxy*\u0026quot; 2\u0026gt;/dev/null\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"advanced-debugging\" class=\"mobile-header\"\u003eAdvanced Debugging\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Enable debug logging\nsudo systemctl edit haproxy.service\n# Add:\n[Service]\nExecStart=\nExecStart=/usr/sbin/haproxy -f /etc/haproxy/haproxy.cfg -p /run/haproxy.pid -S /run/haproxy-master.sock -d\n\nsudo systemctl daemon-reload\nsudo systemctl restart haproxy\n\n# Real-time connection monitoring\nwatch -n 1 \u0026#039;echo \u0026quot;show stat\u0026quot; | socat stdio /run/haproxy/admin.sock | grep -E \u0026quot;FRONTEND|BACKEND\u0026quot; | column -t -s \u0026quot;,\u0026quot;\u0026#039;\n\n# TCP dump for network analysis\ntcpdump -i any -w haproxy-traffic.pcap port 80 or port 443\ntcpdump -i any -w backend-traffic.pcap host 192.168.1.10\n\n# Strace HAProxy process\nstrace -p $(pgrep haproxy) -e trace=network\n\n# Monitor file descriptors\nlsof -p $(pgrep haproxy) | wc -l\ncat /proc/$(pgrep haproxy)/limits | grep \u0026quot;Max open files\u0026quot;\n\n# Check shared memory segments\nipcs -m | grep haproxy\n\n# Monitor syscalls\nperf trace -p $(pgrep haproxy)\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"additional-resources\" class=\"mobile-header\"\u003eAdditional Resources\u003c/h2\u003e\n\u003cli class=\"mobile-list-item\"\u003e\u003ca href=\"https://docs.haproxy.org/\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\"\u003eOfficial Documentation\u003c/a\u003e\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003e\u003ca href=\"https://cbonte.github.io/haproxy-dconv/\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\"\u003eHAProxy Configuration Manual\u003c/a\u003e\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003e\u003ca href=\"https://www.haproxy.com/documentation/hapee/latest/configuration/best-practices/\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\"\u003eBest Practices Guide\u003c/a\u003e\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003e\u003ca href=\"https://www.haproxy.com/blog/haproxy-performance-tuning/\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\"\u003ePerformance Tuning Guide\u003c/a\u003e\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003e\u003ca href=\"https://www.haproxy.com/solutions/security/\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\"\u003eSecurity Guide\u003c/a\u003e\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003e\u003ca href=\"https://discourse.haproxy.org/\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\"\u003eCommunity Forum\u003c/a\u003e\u003c/li\u003e\n\u003cp class=\"mobile-paragraph\"\u003e---\u003c/p\u003e\n\u003cp class=\"mobile-paragraph\"\u003e\u003cstrong\u003eNote:\u003c/strong\u003e This guide is part of the \u003ca href=\"https://howtomgr.github.io\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\"\u003eHowToMgr\u003c/a\u003e collection.\u003c/p\u003e","readTime":"30 min","wordCount":5823,"tableOfContents":[{"level":2,"text":"1. Prerequisites","id":"1-prerequisites"},{"level":2,"text":"2. Supported Operating Systems","id":"2-supported-operating-systems"},{"level":2,"text":"3. Installation","id":"3-installation"},{"level":3,"text":"Using Package Manager (Recommended)","id":"using-package-manager-recommended"},{"level":3,"text":"From Source (Latest Features)","id":"from-source-latest-features"},{"level":3,"text":"Using Docker","id":"using-docker"},{"level":2,"text":"Production Configuration","id":"production-configuration"},{"level":3,"text":"Enterprise Production Configuration","id":"enterprise-production-configuration"},{"level":2,"text":"SSL/TLS Configuration and Security","id":"ssltls-configuration-and-security"},{"level":3,"text":"Advanced SSL Termination","id":"advanced-ssl-termination"},{"level":3,"text":"Security Hardening Configuration","id":"security-hardening-configuration"},{"level":2,"text":"Advanced Load Balancing Strategies","id":"advanced-load-balancing-strategies"},{"level":3,"text":"Multi-Tier Application Load Balancing","id":"multi-tier-application-load-balancing"},{"level":3,"text":"Global Load Balancing with DNS","id":"global-load-balancing-with-dns"},{"level":2,"text":"High Availability and Clustering","id":"high-availability-and-clustering"},{"level":3,"text":"HAProxy Keepalived Setup","id":"haproxy-keepalived-setup"},{"level":3,"text":"Multi-Site Load Balancing","id":"multi-site-load-balancing"},{"level":2,"text":"Monitoring and Observability","id":"monitoring-and-observability"},{"level":3,"text":"Prometheus Integration","id":"prometheus-integration"},{"level":3,"text":"Comprehensive Logging","id":"comprehensive-logging"},{"level":2,"text":"Performance Optimization","id":"performance-optimization"},{"level":3,"text":"System-Level Tuning","id":"system-level-tuning"},{"level":3,"text":"Advanced Performance Configuration","id":"advanced-performance-configuration"},{"level":2,"text":"Backup and Disaster Recovery","id":"backup-and-disaster-recovery"},{"level":3,"text":"4. Configuration Management and Backup","id":"4-configuration-management-and-backup"},{"level":3,"text":"Disaster Recovery Automation","id":"disaster-recovery-automation"},{"level":2,"text":"Verification and Health Checks","id":"verification-and-health-checks"},{"level":3,"text":"Comprehensive Health Monitoring","id":"comprehensive-health-monitoring"},{"level":3,"text":"Load Testing and Performance Validation","id":"load-testing-and-performance-validation"},{"level":2,"text":"Firewall Configuration (Cross-Platform)","id":"firewall-configuration-cross-platform"},{"level":3,"text":"Security Rules","id":"security-rules"},{"level":3,"text":"DDoS Protection Configuration","id":"ddos-protection-configuration"},{"level":2,"text":"Runtime Management and Monitoring","id":"runtime-management-and-monitoring"},{"level":3,"text":"Advanced Runtime Commands","id":"advanced-runtime-commands"},{"level":3,"text":"Automated Log Analysis","id":"automated-log-analysis"},{"level":2,"text":"6. Troubleshooting (Cross-Platform)","id":"6-troubleshooting-cross-platform"},{"level":3,"text":"Common Issues and Solutions","id":"common-issues-and-solutions"},{"level":3,"text":"Advanced Debugging","id":"advanced-debugging"},{"level":2,"text":"Additional Resources","id":"additional-resources"}],"lastBuilt":"2025-10-01T06:20:36.283Z","metadataVersion":"2.0"},"category":{"key":"load-balancers","name":"Load balancers","description":"Load balancers tools and applications","icon":"🔧","color":"#6272a4"},"relatedGuides":[{"name":"fabio","displayName":"fabio Installation Guide","slug":"fabio","description":"fabio is a free and open-source load balancer. Fabio provides fast, zero-conf load balancing HTTP/S router","category":"load-balancers","subcategory":"load-balancers","difficultyLevel":"intermediate","estimatedSetupTime":"15-30 minutes","supportedOS":["rhel","centos","rocky","almalinux","debian","ubuntu","arch","alpine","opensuse","sles","macos","freebsd","windows"],"defaultPorts":[80,443,9999],"installationMethods":["native-packages","source-compilation"],"features":["multi-os-support","comprehensive-documentation","security-hardening","performance-optimization","backup-restore-procedures","troubleshooting-guides"],"tags":["load-balancers","containerization","observability","data-storage","networking","security","data-protection"],"maintenanceStatus":"active","specVersion":"2.0","version":"1.0.0","license":"Open Source","websiteUrl":"https://howtomgr.github.io/load-balancers/fabio","documentationUrl":"https://howtomgr.github.io/load-balancers/fabio","language":null,"stars":0,"forks":0,"topics":[],"githubUrl":"https://github.com/howtomgr/fabio","updatedAt":"2025-09-16T17:11:38Z","createdAt":"2025-09-16T02:36:05Z","readmeRaw":"# fabio Installation Guide\n\nfabio is a free and open-source load balancer. Fabio provides fast, zero-conf load balancing HTTP/S router\n\n## Table of Contents\n1. [Prerequisites](#prerequisites)\n2. [Supported Operating Systems](#supported-operating-systems)\n3. [Installation](#installation)\n4. [Configuration](#configuration)\n5. [Service Management](#service-management)\n6. [Troubleshooting](#troubleshooting)\n7. [Security Considerations](#security-considerations)\n8. [Performance Tuning](#performance-tuning)\n9. [Backup and Restore](#backup-and-restore)\n10. [System Requirements](#system-requirements)\n11. [Support](#support)\n12. [Contributing](#contributing)\n13. [License](#license)\n14. [Acknowledgments](#acknowledgments)\n15. [Version History](#version-history)\n16. [Appendices](#appendices)\n\n## 1. Prerequisites\n\n- **Hardware Requirements**:\n  - CPU: 1 core minimum\n  - RAM: 256MB minimum\n  - Storage: 100MB for config\n  - Network: HTTP/HTTPS\n- **Operating System**: \n  - Linux: Any modern distribution (RHEL, Debian, Ubuntu, CentOS, Fedora, Arch, Alpine, openSUSE)\n  - macOS: 10.14+ (Mojave or newer)\n  - Windows: Windows Server 2016+ or Windows 10\n  - FreeBSD: 11.0+\n- **Network Requirements**:\n  - Port 9999 (default fabio port)\n  - UI on 9998\n- **Dependencies**:\n  - See official documentation for specific requirements\n- **System Access**: root or sudo privileges required\n\n\n## 2. Supported Operating Systems\n\nThis guide supports installation on:\n- RHEL 8/9 and derivatives (CentOS Stream, Rocky Linux, AlmaLinux)\n- Debian 11/12\n- Ubuntu 20.04/22.04/24.04 LTS\n- Arch Linux (rolling release)\n- Alpine Linux 3.18+\n- openSUSE Leap 15.5+ / Tumbleweed\n- SUSE Linux Enterprise Server (SLES) 15+\n- macOS 12+ (Monterey and later) \n- FreeBSD 13+\n- Windows 10/11/Server 2019+ (where applicable)\n\n## 3. Installation\n\n### RHEL/CentOS/Rocky Linux/AlmaLinux\n\n```bash\n# Install EPEL repository if needed\nsudo dnf install -y epel-release\n\n# Install fabio\nsudo dnf install -y fabio\n\n# Enable and start service\nsudo systemctl enable --now fabio\n\n# Configure firewall\nsudo firewall-cmd --permanent --add-port=9999/tcp\nsudo firewall-cmd --reload\n\n# Verify installation\nfabio --version\n```\n\n### Debian/Ubuntu\n\n```bash\n# Update package index\nsudo apt update\n\n# Install fabio\nsudo apt install -y fabio\n\n# Enable and start service\nsudo systemctl enable --now fabio\n\n# Configure firewall\nsudo ufw allow 9999\n\n# Verify installation\nfabio --version\n```\n\n### Arch Linux\n\n```bash\n# Install fabio\nsudo pacman -S fabio\n\n# Enable and start service\nsudo systemctl enable --now fabio\n\n# Verify installation\nfabio --version\n```\n\n### Alpine Linux\n\n```bash\n# Install fabio\napk add --no-cache fabio\n\n# Enable and start service\nrc-update add fabio default\nrc-service fabio start\n\n# Verify installation\nfabio --version\n```\n\n### openSUSE/SLES\n\n```bash\n# Install fabio\nsudo zypper install -y fabio\n\n# Enable and start service\nsudo systemctl enable --now fabio\n\n# Configure firewall\nsudo firewall-cmd --permanent --add-port=9999/tcp\nsudo firewall-cmd --reload\n\n# Verify installation\nfabio --version\n```\n\n### macOS\n\n```bash\n# Using Homebrew\nbrew install fabio\n\n# Start service\nbrew services start fabio\n\n# Verify installation\nfabio --version\n```\n\n### FreeBSD\n\n```bash\n# Using pkg\npkg install fabio\n\n# Enable in rc.conf\necho 'fabio_enable=\"YES\"' \u003e\u003e /etc/rc.conf\n\n# Start service\nservice fabio start\n\n# Verify installation\nfabio --version\n```\n\n### Windows\n\n```bash\n# Using Chocolatey\nchoco install fabio\n\n# Or using Scoop\nscoop install fabio\n\n# Verify installation\nfabio --version\n```\n\n## Initial Configuration\n\n### Basic Configuration\n\n```bash\n# Create configuration directory\nsudo mkdir -p /etc/fabio\n\n# Set up basic configuration\n# See official documentation for detailed configuration options\n\n# Test configuration\nfabio --version\n```\n\n## 5. Service Management\n\n### systemd (RHEL, Debian, Ubuntu, Arch, openSUSE)\n\n```bash\n# Enable service\nsudo systemctl enable fabio\n\n# Start service\nsudo systemctl start fabio\n\n# Stop service\nsudo systemctl stop fabio\n\n# Restart service\nsudo systemctl restart fabio\n\n# Check status\nsudo systemctl status fabio\n\n# View logs\nsudo journalctl -u fabio -f\n```\n\n### OpenRC (Alpine Linux)\n\n```bash\n# Enable service\nrc-update add fabio default\n\n# Start service\nrc-service fabio start\n\n# Stop service\nrc-service fabio stop\n\n# Restart service\nrc-service fabio restart\n\n# Check status\nrc-service fabio status\n```\n\n### rc.d (FreeBSD)\n\n```bash\n# Enable in /etc/rc.conf\necho 'fabio_enable=\"YES\"' \u003e\u003e /etc/rc.conf\n\n# Start service\nservice fabio start\n\n# Stop service\nservice fabio stop\n\n# Restart service\nservice fabio restart\n\n# Check status\nservice fabio status\n```\n\n### launchd (macOS)\n\n```bash\n# Using Homebrew services\nbrew services start fabio\nbrew services stop fabio\nbrew services restart fabio\n\n# Check status\nbrew services list | grep fabio\n```\n\n### Windows Service Manager\n\n```powershell\n# Start service\nnet start fabio\n\n# Stop service\nnet stop fabio\n\n# Using PowerShell\nStart-Service fabio\nStop-Service fabio\nRestart-Service fabio\n\n# Check status\nGet-Service fabio\n```\n\n## Advanced Configuration\n\nSee the official documentation for advanced configuration options.\n\n## Reverse Proxy Setup\n\n### nginx Configuration\n\n```nginx\nupstream fabio_backend {\n    server 127.0.0.1:9999;\n}\n\nserver {\n    listen 80;\n    server_name fabio.example.com;\n    return 301 https://$server_name$request_uri;\n}\n\nserver {\n    listen 443 ssl http2;\n    server_name fabio.example.com;\n\n    ssl_certificate /etc/ssl/certs/fabio.example.com.crt;\n    ssl_certificate_key /etc/ssl/private/fabio.example.com.key;\n\n    location / {\n        proxy_pass http://fabio_backend;\n        proxy_set_header Host $host;\n        proxy_set_header X-Real-IP $remote_addr;\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n        proxy_set_header X-Forwarded-Proto $scheme;\n    }\n}\n```\n\n### Apache Configuration\n\n```apache\n\u003cVirtualHost *:80\u003e\n    ServerName fabio.example.com\n    Redirect permanent / https://fabio.example.com/\n\u003c/VirtualHost\u003e\n\n\u003cVirtualHost *:443\u003e\n    ServerName fabio.example.com\n    \n    SSLEngine on\n    SSLCertificateFile /etc/ssl/certs/fabio.example.com.crt\n    SSLCertificateKeyFile /etc/ssl/private/fabio.example.com.key\n    \n    ProxyRequests Off\n    ProxyPreserveHost On\n    \n    ProxyPass / http://127.0.0.1:9999/\n    ProxyPassReverse / http://127.0.0.1:9999/\n\u003c/VirtualHost\u003e\n```\n\n### HAProxy Configuration\n\n```haproxy\nfrontend fabio_frontend\n    bind *:80\n    bind *:443 ssl crt /etc/ssl/certs/fabio.pem\n    redirect scheme https if !{ ssl_fc }\n    default_backend fabio_backend\n\nbackend fabio_backend\n    balance roundrobin\n    server fabio1 127.0.0.1:9999 check\n```\n\n## Security Configuration\n\n### Basic Security Setup\n\n```bash\n# Set appropriate permissions\nsudo chown -R fabio:fabio /etc/fabio\nsudo chmod 750 /etc/fabio\n\n# Configure firewall\nsudo firewall-cmd --permanent --add-port=9999/tcp\nsudo firewall-cmd --reload\n\n# Enable SELinux policies (if applicable)\nsudo setsebool -P httpd_can_network_connect on\n```\n\n## Database Setup\n\nSee official documentation for database configuration requirements.\n\n## Performance Optimization\n\n### System Tuning\n\n```bash\n# Basic system tuning\necho 'net.core.somaxconn = 65535' | sudo tee -a /etc/sysctl.conf\necho 'net.ipv4.tcp_max_syn_backlog = 65535' | sudo tee -a /etc/sysctl.conf\nsudo sysctl -p\n```\n\n## Monitoring\n\n### Basic Monitoring\n\n```bash\n# Check service status\nsudo systemctl status fabio\n\n# View logs\nsudo journalctl -u fabio -f\n\n# Monitor resource usage\ntop -p $(pgrep fabio)\n```\n\n## 9. Backup and Restore\n\n### Backup Script\n\n```bash\n#!/bin/bash\n# Basic backup script\nBACKUP_DIR=\"/backup/fabio\"\nDATE=$(date +%Y%m%d_%H%M%S)\n\nmkdir -p \"$BACKUP_DIR\"\ntar -czf \"$BACKUP_DIR/fabio-backup-$DATE.tar.gz\" /etc/fabio /var/lib/fabio\n\necho \"Backup completed: $BACKUP_DIR/fabio-backup-$DATE.tar.gz\"\n```\n\n### Restore Procedure\n\n```bash\n# Stop service\nsudo systemctl stop fabio\n\n# Restore from backup\ntar -xzf /backup/fabio/fabio-backup-*.tar.gz -C /\n\n# Start service\nsudo systemctl start fabio\n```\n\n## 6. Troubleshooting\n\n### Common Issues\n\n1. **Service won't start**:\n```bash\n# Check logs\nsudo journalctl -u fabio -n 100\nsudo tail -f /var/log/fabio/fabio.log\n\n# Check configuration\nfabio --version\n\n# Check permissions\nls -la /etc/fabio\n```\n\n2. **Connection issues**:\n```bash\n# Check if service is listening\nsudo ss -tlnp | grep 9999\n\n# Test connectivity\ntelnet localhost 9999\n\n# Check firewall\nsudo firewall-cmd --list-all\n```\n\n3. **Performance issues**:\n```bash\n# Check resource usage\ntop -p $(pgrep fabio)\n\n# Check disk I/O\niotop -p $(pgrep fabio)\n\n# Check connections\nss -an | grep 9999\n```\n\n## Integration Examples\n\n### Docker Compose Example\n\n```yaml\nversion: '3.8'\nservices:\n  fabio:\n    image: fabio:latest\n    ports:\n      - \"9999:9999\"\n    volumes:\n      - ./config:/etc/fabio\n      - ./data:/var/lib/fabio\n    restart: unless-stopped\n```\n\n## Maintenance\n\n### Update Procedures\n\n```bash\n# RHEL/CentOS/Rocky/AlmaLinux\nsudo dnf update fabio\n\n# Debian/Ubuntu\nsudo apt update \u0026\u0026 sudo apt upgrade fabio\n\n# Arch Linux\nsudo pacman -Syu fabio\n\n# Alpine Linux\napk update \u0026\u0026 apk upgrade fabio\n\n# openSUSE\nsudo zypper update fabio\n\n# FreeBSD\npkg update \u0026\u0026 pkg upgrade fabio\n\n# Always backup before updates\ntar -czf /backup/fabio-pre-update-$(date +%Y%m%d).tar.gz /etc/fabio\n\n# Restart after updates\nsudo systemctl restart fabio\n```\n\n### Regular Maintenance\n\n```bash\n# Log rotation\nsudo logrotate -f /etc/logrotate.d/fabio\n\n# Clean old logs\nfind /var/log/fabio -name \"*.log\" -mtime +30 -delete\n\n# Check disk usage\ndu -sh /var/lib/fabio\n```\n\n## Additional Resources\n\n- Official Documentation: https://docs.fabio.org/\n- GitHub Repository: https://github.com/fabio/fabio\n- Community Forum: https://forum.fabio.org/\n- Best Practices Guide: https://docs.fabio.org/best-practices\n\n---\n\n**Note:** This guide is part of the [HowToMgr](https://howtomgr.github.io) collection. Always refer to official documentation for the most up-to-date information.\n","readmeHtml":"\u003cp class=\"mobile-paragraph\"\u003efabio is a free and open-source load balancer. Fabio provides fast, zero-conf load balancing HTTP/S router\u003c/p\u003e\n\u003ch2 id=\"1-prerequisites\" class=\"mobile-header\"\u003e1. Prerequisites\u003c/h2\u003e\n\u003cli class=\"mobile-list-item\"\u003e\u003cstrong\u003eHardware Requirements\u003c/strong\u003e:\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eCPU: 1 core minimum\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eRAM: 256MB minimum\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eStorage: 100MB for config\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eNetwork: HTTP/HTTPS\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003e\u003cstrong\u003eOperating System\u003c/strong\u003e: \u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eLinux: Any modern distribution (RHEL, Debian, Ubuntu, CentOS, Fedora, Arch, Alpine, openSUSE)\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003emacOS: 10.14+ (Mojave or newer)\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eWindows: Windows Server 2016+ or Windows 10\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eFreeBSD: 11.0+\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003e\u003cstrong\u003eNetwork Requirements\u003c/strong\u003e:\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003ePort 9999 (default fabio port)\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eUI on 9998\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003e\u003cstrong\u003eDependencies\u003c/strong\u003e:\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eSee official documentation for specific requirements\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003e\u003cstrong\u003eSystem Access\u003c/strong\u003e: root or sudo privileges required\u003c/li\u003e\n\u003ch2 id=\"2-supported-operating-systems\" class=\"mobile-header\"\u003e2. Supported Operating Systems\u003c/h2\u003e\n\u003cp class=\"mobile-paragraph\"\u003eThis guide supports installation on:\u003c/p\u003e\n\u003cli class=\"mobile-list-item\"\u003eRHEL 8/9 and derivatives (CentOS Stream, Rocky Linux, AlmaLinux)\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eDebian 11/12\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eUbuntu 20.04/22.04/24.04 LTS\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eArch Linux (rolling release)\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eAlpine Linux 3.18+\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eopenSUSE Leap 15.5+ / Tumbleweed\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eSUSE Linux Enterprise Server (SLES) 15+\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003emacOS 12+ (Monterey and later) \u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eFreeBSD 13+\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eWindows 10/11/Server 2019+ (where applicable)\u003c/li\u003e\n\u003ch2 id=\"3-installation\" class=\"mobile-header\"\u003e3. Installation\u003c/h2\u003e\n\u003ch3 id=\"rhelcentosrocky-linuxalmalinux\" class=\"mobile-header\"\u003eRHEL/CentOS/Rocky Linux/AlmaLinux\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Install EPEL repository if needed\nsudo dnf install -y epel-release\n\n# Install fabio\nsudo dnf install -y fabio\n\n# Enable and start service\nsudo systemctl enable --now fabio\n\n# Configure firewall\nsudo firewall-cmd --permanent --add-port=9999/tcp\nsudo firewall-cmd --reload\n\n# Verify installation\nfabio --version\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"debianubuntu\" class=\"mobile-header\"\u003eDebian/Ubuntu\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Update package index\nsudo apt update\n\n# Install fabio\nsudo apt install -y fabio\n\n# Enable and start service\nsudo systemctl enable --now fabio\n\n# Configure firewall\nsudo ufw allow 9999\n\n# Verify installation\nfabio --version\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"arch-linux\" class=\"mobile-header\"\u003eArch Linux\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Install fabio\nsudo pacman -S fabio\n\n# Enable and start service\nsudo systemctl enable --now fabio\n\n# Verify installation\nfabio --version\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"alpine-linux\" class=\"mobile-header\"\u003eAlpine Linux\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Install fabio\napk add --no-cache fabio\n\n# Enable and start service\nrc-update add fabio default\nrc-service fabio start\n\n# Verify installation\nfabio --version\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"opensusesles\" class=\"mobile-header\"\u003eopenSUSE/SLES\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Install fabio\nsudo zypper install -y fabio\n\n# Enable and start service\nsudo systemctl enable --now fabio\n\n# Configure firewall\nsudo firewall-cmd --permanent --add-port=9999/tcp\nsudo firewall-cmd --reload\n\n# Verify installation\nfabio --version\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"macos\" class=\"mobile-header\"\u003emacOS\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Using Homebrew\nbrew install fabio\n\n# Start service\nbrew services start fabio\n\n# Verify installation\nfabio --version\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"freebsd\" class=\"mobile-header\"\u003eFreeBSD\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Using pkg\npkg install fabio\n\n# Enable in rc.conf\necho \u0026#039;fabio_enable=\u0026quot;YES\u0026quot;\u0026#039; \u0026gt;\u0026gt; /etc/rc.conf\n\n# Start service\nservice fabio start\n\n# Verify installation\nfabio --version\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"windows\" class=\"mobile-header\"\u003eWindows\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Using Chocolatey\nchoco install fabio\n\n# Or using Scoop\nscoop install fabio\n\n# Verify installation\nfabio --version\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"initial-configuration\" class=\"mobile-header\"\u003eInitial Configuration\u003c/h2\u003e\n\u003ch3 id=\"basic-configuration\" class=\"mobile-header\"\u003eBasic Configuration\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Create configuration directory\nsudo mkdir -p /etc/fabio\n\n# Set up basic configuration\n# See official documentation for detailed configuration options\n\n# Test configuration\nfabio --version\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"5-service-management\" class=\"mobile-header\"\u003e5. Service Management\u003c/h2\u003e\n\u003ch3 id=\"systemd-rhel-debian-ubuntu-arch-opensuse\" class=\"mobile-header\"\u003esystemd (RHEL, Debian, Ubuntu, Arch, openSUSE)\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Enable service\nsudo systemctl enable fabio\n\n# Start service\nsudo systemctl start fabio\n\n# Stop service\nsudo systemctl stop fabio\n\n# Restart service\nsudo systemctl restart fabio\n\n# Check status\nsudo systemctl status fabio\n\n# View logs\nsudo journalctl -u fabio -f\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"openrc-alpine-linux\" class=\"mobile-header\"\u003eOpenRC (Alpine Linux)\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Enable service\nrc-update add fabio default\n\n# Start service\nrc-service fabio start\n\n# Stop service\nrc-service fabio stop\n\n# Restart service\nrc-service fabio restart\n\n# Check status\nrc-service fabio status\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"rcd-freebsd\" class=\"mobile-header\"\u003erc.d (FreeBSD)\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Enable in /etc/rc.conf\necho \u0026#039;fabio_enable=\u0026quot;YES\u0026quot;\u0026#039; \u0026gt;\u0026gt; /etc/rc.conf\n\n# Start service\nservice fabio start\n\n# Stop service\nservice fabio stop\n\n# Restart service\nservice fabio restart\n\n# Check status\nservice fabio status\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"launchd-macos\" class=\"mobile-header\"\u003elaunchd (macOS)\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Using Homebrew services\nbrew services start fabio\nbrew services stop fabio\nbrew services restart fabio\n\n# Check status\nbrew services list | grep fabio\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"windows-service-manager\" class=\"mobile-header\"\u003eWindows Service Manager\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"powershell\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003epowershell\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-powershell\"\u003e# Start service\nnet start fabio\n\n# Stop service\nnet stop fabio\n\n# Using PowerShell\nStart-Service fabio\nStop-Service fabio\nRestart-Service fabio\n\n# Check status\nGet-Service fabio\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"advanced-configuration\" class=\"mobile-header\"\u003eAdvanced Configuration\u003c/h2\u003e\n\u003cp class=\"mobile-paragraph\"\u003eSee the official documentation for advanced configuration options.\u003c/p\u003e\n\u003ch2 id=\"reverse-proxy-setup\" class=\"mobile-header\"\u003eReverse Proxy Setup\u003c/h2\u003e\n\u003ch3 id=\"nginx-configuration\" class=\"mobile-header\"\u003enginx Configuration\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"nginx\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003enginx\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-nginx\"\u003eupstream fabio_backend {\n    server 127.0.0.1:9999;\n}\n\nserver {\n    listen 80;\n    server_name fabio.example.com;\n    return 301 https://$server_name$request_uri;\n}\n\nserver {\n    listen 443 ssl http2;\n    server_name fabio.example.com;\n\n    ssl_certificate /etc/ssl/certs/fabio.example.com.crt;\n    ssl_certificate_key /etc/ssl/private/fabio.example.com.key;\n\n    location / {\n        proxy_pass http://fabio_backend;\n        proxy_set_header Host $host;\n        proxy_set_header X-Real-IP $remote_addr;\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n        proxy_set_header X-Forwarded-Proto $scheme;\n    }\n}\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"apache-configuration\" class=\"mobile-header\"\u003eApache Configuration\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"apache\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003eapache\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-apache\"\u003e\u0026lt;VirtualHost *:80\u0026gt;\n    ServerName fabio.example.com\n    Redirect permanent / https://fabio.example.com/\n\u0026lt;/VirtualHost\u0026gt;\n\n\u0026lt;VirtualHost *:443\u0026gt;\n    ServerName fabio.example.com\n    \n    SSLEngine on\n    SSLCertificateFile /etc/ssl/certs/fabio.example.com.crt\n    SSLCertificateKeyFile /etc/ssl/private/fabio.example.com.key\n    \n    ProxyRequests Off\n    ProxyPreserveHost On\n    \n    ProxyPass / http://127.0.0.1:9999/\n    ProxyPassReverse / http://127.0.0.1:9999/\n\u0026lt;/VirtualHost\u0026gt;\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"haproxy-configuration\" class=\"mobile-header\"\u003eHAProxy Configuration\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"haproxy\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ehaproxy\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-haproxy\"\u003efrontend fabio_frontend\n    bind *:80\n    bind *:443 ssl crt /etc/ssl/certs/fabio.pem\n    redirect scheme https if !{ ssl_fc }\n    default_backend fabio_backend\n\nbackend fabio_backend\n    balance roundrobin\n    server fabio1 127.0.0.1:9999 check\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"security-configuration\" class=\"mobile-header\"\u003eSecurity Configuration\u003c/h2\u003e\n\u003ch3 id=\"basic-security-setup\" class=\"mobile-header\"\u003eBasic Security Setup\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Set appropriate permissions\nsudo chown -R fabio:fabio /etc/fabio\nsudo chmod 750 /etc/fabio\n\n# Configure firewall\nsudo firewall-cmd --permanent --add-port=9999/tcp\nsudo firewall-cmd --reload\n\n# Enable SELinux policies (if applicable)\nsudo setsebool -P httpd_can_network_connect on\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"database-setup\" class=\"mobile-header\"\u003eDatabase Setup\u003c/h2\u003e\n\u003cp class=\"mobile-paragraph\"\u003eSee official documentation for database configuration requirements.\u003c/p\u003e\n\u003ch2 id=\"performance-optimization\" class=\"mobile-header\"\u003ePerformance Optimization\u003c/h2\u003e\n\u003ch3 id=\"system-tuning\" class=\"mobile-header\"\u003eSystem Tuning\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Basic system tuning\necho \u0026#039;net.core.somaxconn = 65535\u0026#039; | sudo tee -a /etc/sysctl.conf\necho \u0026#039;net.ipv4.tcp_max_syn_backlog = 65535\u0026#039; | sudo tee -a /etc/sysctl.conf\nsudo sysctl -p\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"monitoring\" class=\"mobile-header\"\u003eMonitoring\u003c/h2\u003e\n\u003ch3 id=\"basic-monitoring\" class=\"mobile-header\"\u003eBasic Monitoring\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Check service status\nsudo systemctl status fabio\n\n# View logs\nsudo journalctl -u fabio -f\n\n# Monitor resource usage\ntop -p $(pgrep fabio)\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"9-backup-and-restore\" class=\"mobile-header\"\u003e9. Backup and Restore\u003c/h2\u003e\n\u003ch3 id=\"backup-script\" class=\"mobile-header\"\u003eBackup Script\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e#!/bin/bash\n# Basic backup script\nBACKUP_DIR=\u0026quot;/backup/fabio\u0026quot;\nDATE=$(date +%Y%m%d_%H%M%S)\n\nmkdir -p \u0026quot;$BACKUP_DIR\u0026quot;\ntar -czf \u0026quot;$BACKUP_DIR/fabio-backup-$DATE.tar.gz\u0026quot; /etc/fabio /var/lib/fabio\n\necho \u0026quot;Backup completed: $BACKUP_DIR/fabio-backup-$DATE.tar.gz\u0026quot;\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"restore-procedure\" class=\"mobile-header\"\u003eRestore Procedure\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Stop service\nsudo systemctl stop fabio\n\n# Restore from backup\ntar -xzf /backup/fabio/fabio-backup-*.tar.gz -C /\n\n# Start service\nsudo systemctl start fabio\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"6-troubleshooting\" class=\"mobile-header\"\u003e6. Troubleshooting\u003c/h2\u003e\n\u003ch3 id=\"common-issues\" class=\"mobile-header\"\u003eCommon Issues\u003c/h3\u003e\n\u003cp class=\"mobile-paragraph\"\u003e1. \u003cstrong\u003eService won't start\u003c/strong\u003e:\u003c/p\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Check logs\nsudo journalctl -u fabio -n 100\nsudo tail -f /var/log/fabio/fabio.log\n\n# Check configuration\nfabio --version\n\n# Check permissions\nls -la /etc/fabio\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003cp class=\"mobile-paragraph\"\u003e2. \u003cstrong\u003eConnection issues\u003c/strong\u003e:\u003c/p\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Check if service is listening\nsudo ss -tlnp | grep 9999\n\n# Test connectivity\ntelnet localhost 9999\n\n# Check firewall\nsudo firewall-cmd --list-all\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003cp class=\"mobile-paragraph\"\u003e3. \u003cstrong\u003ePerformance issues\u003c/strong\u003e:\u003c/p\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Check resource usage\ntop -p $(pgrep fabio)\n\n# Check disk I/O\niotop -p $(pgrep fabio)\n\n# Check connections\nss -an | grep 9999\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"integration-examples\" class=\"mobile-header\"\u003eIntegration Examples\u003c/h2\u003e\n\u003ch3 id=\"docker-compose-example\" class=\"mobile-header\"\u003eDocker Compose Example\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"yaml\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003eyaml\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-yaml\"\u003eversion: \u0026#039;3.8\u0026#039;\nservices:\n  fabio:\n    image: fabio:latest\n    ports:\n      - \u0026quot;9999:9999\u0026quot;\n    volumes:\n      - ./config:/etc/fabio\n      - ./data:/var/lib/fabio\n    restart: unless-stopped\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"maintenance\" class=\"mobile-header\"\u003eMaintenance\u003c/h2\u003e\n\u003ch3 id=\"update-procedures\" class=\"mobile-header\"\u003eUpdate Procedures\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# RHEL/CentOS/Rocky/AlmaLinux\nsudo dnf update fabio\n\n# Debian/Ubuntu\nsudo apt update \u0026amp;\u0026amp; sudo apt upgrade fabio\n\n# Arch Linux\nsudo pacman -Syu fabio\n\n# Alpine Linux\napk update \u0026amp;\u0026amp; apk upgrade fabio\n\n# openSUSE\nsudo zypper update fabio\n\n# FreeBSD\npkg update \u0026amp;\u0026amp; pkg upgrade fabio\n\n# Always backup before updates\ntar -czf /backup/fabio-pre-update-$(date +%Y%m%d).tar.gz /etc/fabio\n\n# Restart after updates\nsudo systemctl restart fabio\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"regular-maintenance\" class=\"mobile-header\"\u003eRegular Maintenance\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Log rotation\nsudo logrotate -f /etc/logrotate.d/fabio\n\n# Clean old logs\nfind /var/log/fabio -name \u0026quot;*.log\u0026quot; -mtime +30 -delete\n\n# Check disk usage\ndu -sh /var/lib/fabio\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"additional-resources\" class=\"mobile-header\"\u003eAdditional Resources\u003c/h2\u003e\n\u003cli class=\"mobile-list-item\"\u003eOfficial Documentation: https://docs.fabio.org/\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eGitHub Repository: https://github.com/fabio/fabio\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eCommunity Forum: https://forum.fabio.org/\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eBest Practices Guide: https://docs.fabio.org/best-practices\u003c/li\u003e\n\u003cp class=\"mobile-paragraph\"\u003e---\u003c/p\u003e\n\u003cp class=\"mobile-paragraph\"\u003e\u003cstrong\u003eNote:\u003c/strong\u003e This guide is part of the \u003ca href=\"https://howtomgr.github.io\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\"\u003eHowToMgr\u003c/a\u003e collection. Always refer to official documentation for the most up-to-date information.\u003c/p\u003e","readTime":"7 min","wordCount":1269,"tableOfContents":[{"level":2,"text":"1. Prerequisites","id":"1-prerequisites"},{"level":2,"text":"2. Supported Operating Systems","id":"2-supported-operating-systems"},{"level":2,"text":"3. Installation","id":"3-installation"},{"level":3,"text":"RHEL/CentOS/Rocky Linux/AlmaLinux","id":"rhelcentosrocky-linuxalmalinux"},{"level":3,"text":"Debian/Ubuntu","id":"debianubuntu"},{"level":3,"text":"Arch Linux","id":"arch-linux"},{"level":3,"text":"Alpine Linux","id":"alpine-linux"},{"level":3,"text":"openSUSE/SLES","id":"opensusesles"},{"level":3,"text":"macOS","id":"macos"},{"level":3,"text":"FreeBSD","id":"freebsd"},{"level":3,"text":"Windows","id":"windows"},{"level":2,"text":"Initial Configuration","id":"initial-configuration"},{"level":3,"text":"Basic Configuration","id":"basic-configuration"},{"level":2,"text":"5. Service Management","id":"5-service-management"},{"level":3,"text":"systemd (RHEL, Debian, Ubuntu, Arch, openSUSE)","id":"systemd-rhel-debian-ubuntu-arch-opensuse"},{"level":3,"text":"OpenRC (Alpine Linux)","id":"openrc-alpine-linux"},{"level":3,"text":"rc.d (FreeBSD)","id":"rcd-freebsd"},{"level":3,"text":"launchd (macOS)","id":"launchd-macos"},{"level":3,"text":"Windows Service Manager","id":"windows-service-manager"},{"level":2,"text":"Advanced Configuration","id":"advanced-configuration"},{"level":2,"text":"Reverse Proxy Setup","id":"reverse-proxy-setup"},{"level":3,"text":"nginx Configuration","id":"nginx-configuration"},{"level":3,"text":"Apache Configuration","id":"apache-configuration"},{"level":3,"text":"HAProxy Configuration","id":"haproxy-configuration"},{"level":2,"text":"Security Configuration","id":"security-configuration"},{"level":3,"text":"Basic Security Setup","id":"basic-security-setup"},{"level":2,"text":"Database Setup","id":"database-setup"},{"level":2,"text":"Performance Optimization","id":"performance-optimization"},{"level":3,"text":"System Tuning","id":"system-tuning"},{"level":2,"text":"Monitoring","id":"monitoring"},{"level":3,"text":"Basic Monitoring","id":"basic-monitoring"},{"level":2,"text":"9. Backup and Restore","id":"9-backup-and-restore"},{"level":3,"text":"Backup Script","id":"backup-script"},{"level":3,"text":"Restore Procedure","id":"restore-procedure"},{"level":2,"text":"6. Troubleshooting","id":"6-troubleshooting"},{"level":3,"text":"Common Issues","id":"common-issues"},{"level":2,"text":"Integration Examples","id":"integration-examples"},{"level":3,"text":"Docker Compose Example","id":"docker-compose-example"},{"level":2,"text":"Maintenance","id":"maintenance"},{"level":3,"text":"Update Procedures","id":"update-procedures"},{"level":3,"text":"Regular Maintenance","id":"regular-maintenance"},{"level":2,"text":"Additional Resources","id":"additional-resources"}],"lastBuilt":"2025-10-01T06:21:18.735Z","metadataVersion":"2.0"},{"name":"gobetween","displayName":"gobetween Installation Guide","slug":"gobetween","description":"gobetween is a free and open-source load balancer. Gobetween provides modern, minimalistic load balancer","category":"load-balancers","subcategory":"load-balancers","difficultyLevel":"intermediate","estimatedSetupTime":"15-30 minutes","supportedOS":["rhel","centos","rocky","almalinux","debian","ubuntu","arch","alpine","opensuse","sles","macos","freebsd","windows"],"defaultPorts":[80,443,8888],"installationMethods":["native-packages","source-compilation"],"features":["multi-os-support","comprehensive-documentation","security-hardening","performance-optimization","backup-restore-procedures","troubleshooting-guides"],"tags":["load-balancers","containerization","observability","data-storage","networking","security","data-protection"],"maintenanceStatus":"active","specVersion":"2.0","version":"1.0.0","license":"Open Source","websiteUrl":"https://howtomgr.github.io/load-balancers/gobetween","documentationUrl":"https://howtomgr.github.io/load-balancers/gobetween","language":null,"stars":0,"forks":0,"topics":[],"githubUrl":"https://github.com/howtomgr/gobetween","updatedAt":"2025-09-16T17:16:27Z","createdAt":"2025-09-16T03:15:31Z","readmeRaw":"# gobetween Installation Guide\n\ngobetween is a free and open-source load balancer. Gobetween provides modern, minimalistic load balancer\n\n## Table of Contents\n1. [Prerequisites](#prerequisites)\n2. [Supported Operating Systems](#supported-operating-systems)\n3. [Installation](#installation)\n4. [Configuration](#configuration)\n5. [Service Management](#service-management)\n6. [Troubleshooting](#troubleshooting)\n7. [Security Considerations](#security-considerations)\n8. [Performance Tuning](#performance-tuning)\n9. [Backup and Restore](#backup-and-restore)\n10. [System Requirements](#system-requirements)\n11. [Support](#support)\n12. [Contributing](#contributing)\n13. [License](#license)\n14. [Acknowledgments](#acknowledgments)\n15. [Version History](#version-history)\n16. [Appendices](#appendices)\n\n## 1. Prerequisites\n\n- **Hardware Requirements**:\n  - CPU: 1 core minimum\n  - RAM: 256MB minimum\n  - Storage: 100MB for config\n  - Network: Various protocols\n- **Operating System**: \n  - Linux: Any modern distribution (RHEL, Debian, Ubuntu, CentOS, Fedora, Arch, Alpine, openSUSE)\n  - macOS: 10.14+ (Mojave or newer)\n  - Windows: Windows Server 2016+ or Windows 10\n  - FreeBSD: 11.0+\n- **Network Requirements**:\n  - Port 8888 (default gobetween port)\n  - API on 8889\n- **Dependencies**:\n  - See official documentation for specific requirements\n- **System Access**: root or sudo privileges required\n\n\n## 2. Supported Operating Systems\n\nThis guide supports installation on:\n- RHEL 8/9 and derivatives (CentOS Stream, Rocky Linux, AlmaLinux)\n- Debian 11/12\n- Ubuntu 20.04/22.04/24.04 LTS\n- Arch Linux (rolling release)\n- Alpine Linux 3.18+\n- openSUSE Leap 15.5+ / Tumbleweed\n- SUSE Linux Enterprise Server (SLES) 15+\n- macOS 12+ (Monterey and later) \n- FreeBSD 13+\n- Windows 10/11/Server 2019+ (where applicable)\n\n## 3. Installation\n\n### RHEL/CentOS/Rocky Linux/AlmaLinux\n\n```bash\n# Install EPEL repository if needed\nsudo dnf install -y epel-release\n\n# Install gobetween\nsudo dnf install -y gobetween\n\n# Enable and start service\nsudo systemctl enable --now gobetween\n\n# Configure firewall\nsudo firewall-cmd --permanent --add-port=8888/tcp\nsudo firewall-cmd --reload\n\n# Verify installation\ngobetween --version\n```\n\n### Debian/Ubuntu\n\n```bash\n# Update package index\nsudo apt update\n\n# Install gobetween\nsudo apt install -y gobetween\n\n# Enable and start service\nsudo systemctl enable --now gobetween\n\n# Configure firewall\nsudo ufw allow 8888\n\n# Verify installation\ngobetween --version\n```\n\n### Arch Linux\n\n```bash\n# Install gobetween\nsudo pacman -S gobetween\n\n# Enable and start service\nsudo systemctl enable --now gobetween\n\n# Verify installation\ngobetween --version\n```\n\n### Alpine Linux\n\n```bash\n# Install gobetween\napk add --no-cache gobetween\n\n# Enable and start service\nrc-update add gobetween default\nrc-service gobetween start\n\n# Verify installation\ngobetween --version\n```\n\n### openSUSE/SLES\n\n```bash\n# Install gobetween\nsudo zypper install -y gobetween\n\n# Enable and start service\nsudo systemctl enable --now gobetween\n\n# Configure firewall\nsudo firewall-cmd --permanent --add-port=8888/tcp\nsudo firewall-cmd --reload\n\n# Verify installation\ngobetween --version\n```\n\n### macOS\n\n```bash\n# Using Homebrew\nbrew install gobetween\n\n# Start service\nbrew services start gobetween\n\n# Verify installation\ngobetween --version\n```\n\n### FreeBSD\n\n```bash\n# Using pkg\npkg install gobetween\n\n# Enable in rc.conf\necho 'gobetween_enable=\"YES\"' \u003e\u003e /etc/rc.conf\n\n# Start service\nservice gobetween start\n\n# Verify installation\ngobetween --version\n```\n\n### Windows\n\n```bash\n# Using Chocolatey\nchoco install gobetween\n\n# Or using Scoop\nscoop install gobetween\n\n# Verify installation\ngobetween --version\n```\n\n## Initial Configuration\n\n### Basic Configuration\n\n```bash\n# Create configuration directory\nsudo mkdir -p /etc/gobetween\n\n# Set up basic configuration\n# See official documentation for detailed configuration options\n\n# Test configuration\ngobetween --version\n```\n\n## 5. Service Management\n\n### systemd (RHEL, Debian, Ubuntu, Arch, openSUSE)\n\n```bash\n# Enable service\nsudo systemctl enable gobetween\n\n# Start service\nsudo systemctl start gobetween\n\n# Stop service\nsudo systemctl stop gobetween\n\n# Restart service\nsudo systemctl restart gobetween\n\n# Check status\nsudo systemctl status gobetween\n\n# View logs\nsudo journalctl -u gobetween -f\n```\n\n### OpenRC (Alpine Linux)\n\n```bash\n# Enable service\nrc-update add gobetween default\n\n# Start service\nrc-service gobetween start\n\n# Stop service\nrc-service gobetween stop\n\n# Restart service\nrc-service gobetween restart\n\n# Check status\nrc-service gobetween status\n```\n\n### rc.d (FreeBSD)\n\n```bash\n# Enable in /etc/rc.conf\necho 'gobetween_enable=\"YES\"' \u003e\u003e /etc/rc.conf\n\n# Start service\nservice gobetween start\n\n# Stop service\nservice gobetween stop\n\n# Restart service\nservice gobetween restart\n\n# Check status\nservice gobetween status\n```\n\n### launchd (macOS)\n\n```bash\n# Using Homebrew services\nbrew services start gobetween\nbrew services stop gobetween\nbrew services restart gobetween\n\n# Check status\nbrew services list | grep gobetween\n```\n\n### Windows Service Manager\n\n```powershell\n# Start service\nnet start gobetween\n\n# Stop service\nnet stop gobetween\n\n# Using PowerShell\nStart-Service gobetween\nStop-Service gobetween\nRestart-Service gobetween\n\n# Check status\nGet-Service gobetween\n```\n\n## Advanced Configuration\n\nSee the official documentation for advanced configuration options.\n\n## Reverse Proxy Setup\n\n### nginx Configuration\n\n```nginx\nupstream gobetween_backend {\n    server 127.0.0.1:8888;\n}\n\nserver {\n    listen 80;\n    server_name gobetween.example.com;\n    return 301 https://$server_name$request_uri;\n}\n\nserver {\n    listen 443 ssl http2;\n    server_name gobetween.example.com;\n\n    ssl_certificate /etc/ssl/certs/gobetween.example.com.crt;\n    ssl_certificate_key /etc/ssl/private/gobetween.example.com.key;\n\n    location / {\n        proxy_pass http://gobetween_backend;\n        proxy_set_header Host $host;\n        proxy_set_header X-Real-IP $remote_addr;\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n        proxy_set_header X-Forwarded-Proto $scheme;\n    }\n}\n```\n\n### Apache Configuration\n\n```apache\n\u003cVirtualHost *:80\u003e\n    ServerName gobetween.example.com\n    Redirect permanent / https://gobetween.example.com/\n\u003c/VirtualHost\u003e\n\n\u003cVirtualHost *:443\u003e\n    ServerName gobetween.example.com\n    \n    SSLEngine on\n    SSLCertificateFile /etc/ssl/certs/gobetween.example.com.crt\n    SSLCertificateKeyFile /etc/ssl/private/gobetween.example.com.key\n    \n    ProxyRequests Off\n    ProxyPreserveHost On\n    \n    ProxyPass / http://127.0.0.1:8888/\n    ProxyPassReverse / http://127.0.0.1:8888/\n\u003c/VirtualHost\u003e\n```\n\n### HAProxy Configuration\n\n```haproxy\nfrontend gobetween_frontend\n    bind *:80\n    bind *:443 ssl crt /etc/ssl/certs/gobetween.pem\n    redirect scheme https if !{ ssl_fc }\n    default_backend gobetween_backend\n\nbackend gobetween_backend\n    balance roundrobin\n    server gobetween1 127.0.0.1:8888 check\n```\n\n## Security Configuration\n\n### Basic Security Setup\n\n```bash\n# Set appropriate permissions\nsudo chown -R gobetween:gobetween /etc/gobetween\nsudo chmod 750 /etc/gobetween\n\n# Configure firewall\nsudo firewall-cmd --permanent --add-port=8888/tcp\nsudo firewall-cmd --reload\n\n# Enable SELinux policies (if applicable)\nsudo setsebool -P httpd_can_network_connect on\n```\n\n## Database Setup\n\nSee official documentation for database configuration requirements.\n\n## Performance Optimization\n\n### System Tuning\n\n```bash\n# Basic system tuning\necho 'net.core.somaxconn = 65535' | sudo tee -a /etc/sysctl.conf\necho 'net.ipv4.tcp_max_syn_backlog = 65535' | sudo tee -a /etc/sysctl.conf\nsudo sysctl -p\n```\n\n## Monitoring\n\n### Basic Monitoring\n\n```bash\n# Check service status\nsudo systemctl status gobetween\n\n# View logs\nsudo journalctl -u gobetween -f\n\n# Monitor resource usage\ntop -p $(pgrep gobetween)\n```\n\n## 9. Backup and Restore\n\n### Backup Script\n\n```bash\n#!/bin/bash\n# Basic backup script\nBACKUP_DIR=\"/backup/gobetween\"\nDATE=$(date +%Y%m%d_%H%M%S)\n\nmkdir -p \"$BACKUP_DIR\"\ntar -czf \"$BACKUP_DIR/gobetween-backup-$DATE.tar.gz\" /etc/gobetween /var/lib/gobetween\n\necho \"Backup completed: $BACKUP_DIR/gobetween-backup-$DATE.tar.gz\"\n```\n\n### Restore Procedure\n\n```bash\n# Stop service\nsudo systemctl stop gobetween\n\n# Restore from backup\ntar -xzf /backup/gobetween/gobetween-backup-*.tar.gz -C /\n\n# Start service\nsudo systemctl start gobetween\n```\n\n## 6. Troubleshooting\n\n### Common Issues\n\n1. **Service won't start**:\n```bash\n# Check logs\nsudo journalctl -u gobetween -n 100\nsudo tail -f /var/log/gobetween/gobetween.log\n\n# Check configuration\ngobetween --version\n\n# Check permissions\nls -la /etc/gobetween\n```\n\n2. **Connection issues**:\n```bash\n# Check if service is listening\nsudo ss -tlnp | grep 8888\n\n# Test connectivity\ntelnet localhost 8888\n\n# Check firewall\nsudo firewall-cmd --list-all\n```\n\n3. **Performance issues**:\n```bash\n# Check resource usage\ntop -p $(pgrep gobetween)\n\n# Check disk I/O\niotop -p $(pgrep gobetween)\n\n# Check connections\nss -an | grep 8888\n```\n\n## Integration Examples\n\n### Docker Compose Example\n\n```yaml\nversion: '3.8'\nservices:\n  gobetween:\n    image: gobetween:latest\n    ports:\n      - \"8888:8888\"\n    volumes:\n      - ./config:/etc/gobetween\n      - ./data:/var/lib/gobetween\n    restart: unless-stopped\n```\n\n## Maintenance\n\n### Update Procedures\n\n```bash\n# RHEL/CentOS/Rocky/AlmaLinux\nsudo dnf update gobetween\n\n# Debian/Ubuntu\nsudo apt update \u0026\u0026 sudo apt upgrade gobetween\n\n# Arch Linux\nsudo pacman -Syu gobetween\n\n# Alpine Linux\napk update \u0026\u0026 apk upgrade gobetween\n\n# openSUSE\nsudo zypper update gobetween\n\n# FreeBSD\npkg update \u0026\u0026 pkg upgrade gobetween\n\n# Always backup before updates\ntar -czf /backup/gobetween-pre-update-$(date +%Y%m%d).tar.gz /etc/gobetween\n\n# Restart after updates\nsudo systemctl restart gobetween\n```\n\n### Regular Maintenance\n\n```bash\n# Log rotation\nsudo logrotate -f /etc/logrotate.d/gobetween\n\n# Clean old logs\nfind /var/log/gobetween -name \"*.log\" -mtime +30 -delete\n\n# Check disk usage\ndu -sh /var/lib/gobetween\n```\n\n## Additional Resources\n\n- Official Documentation: https://docs.gobetween.org/\n- GitHub Repository: https://github.com/gobetween/gobetween\n- Community Forum: https://forum.gobetween.org/\n- Best Practices Guide: https://docs.gobetween.org/best-practices\n\n---\n\n**Note:** This guide is part of the [HowToMgr](https://howtomgr.github.io) collection. Always refer to official documentation for the most up-to-date information.\n","readmeHtml":"\u003cp class=\"mobile-paragraph\"\u003egobetween is a free and open-source load balancer. Gobetween provides modern, minimalistic load balancer\u003c/p\u003e\n\u003ch2 id=\"1-prerequisites\" class=\"mobile-header\"\u003e1. Prerequisites\u003c/h2\u003e\n\u003cli class=\"mobile-list-item\"\u003e\u003cstrong\u003eHardware Requirements\u003c/strong\u003e:\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eCPU: 1 core minimum\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eRAM: 256MB minimum\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eStorage: 100MB for config\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eNetwork: Various protocols\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003e\u003cstrong\u003eOperating System\u003c/strong\u003e: \u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eLinux: Any modern distribution (RHEL, Debian, Ubuntu, CentOS, Fedora, Arch, Alpine, openSUSE)\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003emacOS: 10.14+ (Mojave or newer)\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eWindows: Windows Server 2016+ or Windows 10\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eFreeBSD: 11.0+\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003e\u003cstrong\u003eNetwork Requirements\u003c/strong\u003e:\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003ePort 8888 (default gobetween port)\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eAPI on 8889\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003e\u003cstrong\u003eDependencies\u003c/strong\u003e:\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eSee official documentation for specific requirements\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003e\u003cstrong\u003eSystem Access\u003c/strong\u003e: root or sudo privileges required\u003c/li\u003e\n\u003ch2 id=\"2-supported-operating-systems\" class=\"mobile-header\"\u003e2. Supported Operating Systems\u003c/h2\u003e\n\u003cp class=\"mobile-paragraph\"\u003eThis guide supports installation on:\u003c/p\u003e\n\u003cli class=\"mobile-list-item\"\u003eRHEL 8/9 and derivatives (CentOS Stream, Rocky Linux, AlmaLinux)\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eDebian 11/12\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eUbuntu 20.04/22.04/24.04 LTS\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eArch Linux (rolling release)\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eAlpine Linux 3.18+\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eopenSUSE Leap 15.5+ / Tumbleweed\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eSUSE Linux Enterprise Server (SLES) 15+\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003emacOS 12+ (Monterey and later) \u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eFreeBSD 13+\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eWindows 10/11/Server 2019+ (where applicable)\u003c/li\u003e\n\u003ch2 id=\"3-installation\" class=\"mobile-header\"\u003e3. Installation\u003c/h2\u003e\n\u003ch3 id=\"rhelcentosrocky-linuxalmalinux\" class=\"mobile-header\"\u003eRHEL/CentOS/Rocky Linux/AlmaLinux\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Install EPEL repository if needed\nsudo dnf install -y epel-release\n\n# Install gobetween\nsudo dnf install -y gobetween\n\n# Enable and start service\nsudo systemctl enable --now gobetween\n\n# Configure firewall\nsudo firewall-cmd --permanent --add-port=8888/tcp\nsudo firewall-cmd --reload\n\n# Verify installation\ngobetween --version\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"debianubuntu\" class=\"mobile-header\"\u003eDebian/Ubuntu\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Update package index\nsudo apt update\n\n# Install gobetween\nsudo apt install -y gobetween\n\n# Enable and start service\nsudo systemctl enable --now gobetween\n\n# Configure firewall\nsudo ufw allow 8888\n\n# Verify installation\ngobetween --version\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"arch-linux\" class=\"mobile-header\"\u003eArch Linux\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Install gobetween\nsudo pacman -S gobetween\n\n# Enable and start service\nsudo systemctl enable --now gobetween\n\n# Verify installation\ngobetween --version\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"alpine-linux\" class=\"mobile-header\"\u003eAlpine Linux\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Install gobetween\napk add --no-cache gobetween\n\n# Enable and start service\nrc-update add gobetween default\nrc-service gobetween start\n\n# Verify installation\ngobetween --version\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"opensusesles\" class=\"mobile-header\"\u003eopenSUSE/SLES\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Install gobetween\nsudo zypper install -y gobetween\n\n# Enable and start service\nsudo systemctl enable --now gobetween\n\n# Configure firewall\nsudo firewall-cmd --permanent --add-port=8888/tcp\nsudo firewall-cmd --reload\n\n# Verify installation\ngobetween --version\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"macos\" class=\"mobile-header\"\u003emacOS\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Using Homebrew\nbrew install gobetween\n\n# Start service\nbrew services start gobetween\n\n# Verify installation\ngobetween --version\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"freebsd\" class=\"mobile-header\"\u003eFreeBSD\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Using pkg\npkg install gobetween\n\n# Enable in rc.conf\necho \u0026#039;gobetween_enable=\u0026quot;YES\u0026quot;\u0026#039; \u0026gt;\u0026gt; /etc/rc.conf\n\n# Start service\nservice gobetween start\n\n# Verify installation\ngobetween --version\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"windows\" class=\"mobile-header\"\u003eWindows\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Using Chocolatey\nchoco install gobetween\n\n# Or using Scoop\nscoop install gobetween\n\n# Verify installation\ngobetween --version\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"initial-configuration\" class=\"mobile-header\"\u003eInitial Configuration\u003c/h2\u003e\n\u003ch3 id=\"basic-configuration\" class=\"mobile-header\"\u003eBasic Configuration\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Create configuration directory\nsudo mkdir -p /etc/gobetween\n\n# Set up basic configuration\n# See official documentation for detailed configuration options\n\n# Test configuration\ngobetween --version\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"5-service-management\" class=\"mobile-header\"\u003e5. Service Management\u003c/h2\u003e\n\u003ch3 id=\"systemd-rhel-debian-ubuntu-arch-opensuse\" class=\"mobile-header\"\u003esystemd (RHEL, Debian, Ubuntu, Arch, openSUSE)\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Enable service\nsudo systemctl enable gobetween\n\n# Start service\nsudo systemctl start gobetween\n\n# Stop service\nsudo systemctl stop gobetween\n\n# Restart service\nsudo systemctl restart gobetween\n\n# Check status\nsudo systemctl status gobetween\n\n# View logs\nsudo journalctl -u gobetween -f\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"openrc-alpine-linux\" class=\"mobile-header\"\u003eOpenRC (Alpine Linux)\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Enable service\nrc-update add gobetween default\n\n# Start service\nrc-service gobetween start\n\n# Stop service\nrc-service gobetween stop\n\n# Restart service\nrc-service gobetween restart\n\n# Check status\nrc-service gobetween status\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"rcd-freebsd\" class=\"mobile-header\"\u003erc.d (FreeBSD)\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Enable in /etc/rc.conf\necho \u0026#039;gobetween_enable=\u0026quot;YES\u0026quot;\u0026#039; \u0026gt;\u0026gt; /etc/rc.conf\n\n# Start service\nservice gobetween start\n\n# Stop service\nservice gobetween stop\n\n# Restart service\nservice gobetween restart\n\n# Check status\nservice gobetween status\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"launchd-macos\" class=\"mobile-header\"\u003elaunchd (macOS)\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Using Homebrew services\nbrew services start gobetween\nbrew services stop gobetween\nbrew services restart gobetween\n\n# Check status\nbrew services list | grep gobetween\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"windows-service-manager\" class=\"mobile-header\"\u003eWindows Service Manager\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"powershell\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003epowershell\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-powershell\"\u003e# Start service\nnet start gobetween\n\n# Stop service\nnet stop gobetween\n\n# Using PowerShell\nStart-Service gobetween\nStop-Service gobetween\nRestart-Service gobetween\n\n# Check status\nGet-Service gobetween\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"advanced-configuration\" class=\"mobile-header\"\u003eAdvanced Configuration\u003c/h2\u003e\n\u003cp class=\"mobile-paragraph\"\u003eSee the official documentation for advanced configuration options.\u003c/p\u003e\n\u003ch2 id=\"reverse-proxy-setup\" class=\"mobile-header\"\u003eReverse Proxy Setup\u003c/h2\u003e\n\u003ch3 id=\"nginx-configuration\" class=\"mobile-header\"\u003enginx Configuration\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"nginx\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003enginx\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-nginx\"\u003eupstream gobetween_backend {\n    server 127.0.0.1:8888;\n}\n\nserver {\n    listen 80;\n    server_name gobetween.example.com;\n    return 301 https://$server_name$request_uri;\n}\n\nserver {\n    listen 443 ssl http2;\n    server_name gobetween.example.com;\n\n    ssl_certificate /etc/ssl/certs/gobetween.example.com.crt;\n    ssl_certificate_key /etc/ssl/private/gobetween.example.com.key;\n\n    location / {\n        proxy_pass http://gobetween_backend;\n        proxy_set_header Host $host;\n        proxy_set_header X-Real-IP $remote_addr;\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n        proxy_set_header X-Forwarded-Proto $scheme;\n    }\n}\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"apache-configuration\" class=\"mobile-header\"\u003eApache Configuration\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"apache\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003eapache\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-apache\"\u003e\u0026lt;VirtualHost *:80\u0026gt;\n    ServerName gobetween.example.com\n    Redirect permanent / https://gobetween.example.com/\n\u0026lt;/VirtualHost\u0026gt;\n\n\u0026lt;VirtualHost *:443\u0026gt;\n    ServerName gobetween.example.com\n    \n    SSLEngine on\n    SSLCertificateFile /etc/ssl/certs/gobetween.example.com.crt\n    SSLCertificateKeyFile /etc/ssl/private/gobetween.example.com.key\n    \n    ProxyRequests Off\n    ProxyPreserveHost On\n    \n    ProxyPass / http://127.0.0.1:8888/\n    ProxyPassReverse / http://127.0.0.1:8888/\n\u0026lt;/VirtualHost\u0026gt;\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"haproxy-configuration\" class=\"mobile-header\"\u003eHAProxy Configuration\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"haproxy\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ehaproxy\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-haproxy\"\u003efrontend gobetween_frontend\n    bind *:80\n    bind *:443 ssl crt /etc/ssl/certs/gobetween.pem\n    redirect scheme https if !{ ssl_fc }\n    default_backend gobetween_backend\n\nbackend gobetween_backend\n    balance roundrobin\n    server gobetween1 127.0.0.1:8888 check\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"security-configuration\" class=\"mobile-header\"\u003eSecurity Configuration\u003c/h2\u003e\n\u003ch3 id=\"basic-security-setup\" class=\"mobile-header\"\u003eBasic Security Setup\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Set appropriate permissions\nsudo chown -R gobetween:gobetween /etc/gobetween\nsudo chmod 750 /etc/gobetween\n\n# Configure firewall\nsudo firewall-cmd --permanent --add-port=8888/tcp\nsudo firewall-cmd --reload\n\n# Enable SELinux policies (if applicable)\nsudo setsebool -P httpd_can_network_connect on\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"database-setup\" class=\"mobile-header\"\u003eDatabase Setup\u003c/h2\u003e\n\u003cp class=\"mobile-paragraph\"\u003eSee official documentation for database configuration requirements.\u003c/p\u003e\n\u003ch2 id=\"performance-optimization\" class=\"mobile-header\"\u003ePerformance Optimization\u003c/h2\u003e\n\u003ch3 id=\"system-tuning\" class=\"mobile-header\"\u003eSystem Tuning\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Basic system tuning\necho \u0026#039;net.core.somaxconn = 65535\u0026#039; | sudo tee -a /etc/sysctl.conf\necho \u0026#039;net.ipv4.tcp_max_syn_backlog = 65535\u0026#039; | sudo tee -a /etc/sysctl.conf\nsudo sysctl -p\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"monitoring\" class=\"mobile-header\"\u003eMonitoring\u003c/h2\u003e\n\u003ch3 id=\"basic-monitoring\" class=\"mobile-header\"\u003eBasic Monitoring\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Check service status\nsudo systemctl status gobetween\n\n# View logs\nsudo journalctl -u gobetween -f\n\n# Monitor resource usage\ntop -p $(pgrep gobetween)\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"9-backup-and-restore\" class=\"mobile-header\"\u003e9. Backup and Restore\u003c/h2\u003e\n\u003ch3 id=\"backup-script\" class=\"mobile-header\"\u003eBackup Script\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e#!/bin/bash\n# Basic backup script\nBACKUP_DIR=\u0026quot;/backup/gobetween\u0026quot;\nDATE=$(date +%Y%m%d_%H%M%S)\n\nmkdir -p \u0026quot;$BACKUP_DIR\u0026quot;\ntar -czf \u0026quot;$BACKUP_DIR/gobetween-backup-$DATE.tar.gz\u0026quot; /etc/gobetween /var/lib/gobetween\n\necho \u0026quot;Backup completed: $BACKUP_DIR/gobetween-backup-$DATE.tar.gz\u0026quot;\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"restore-procedure\" class=\"mobile-header\"\u003eRestore Procedure\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Stop service\nsudo systemctl stop gobetween\n\n# Restore from backup\ntar -xzf /backup/gobetween/gobetween-backup-*.tar.gz -C /\n\n# Start service\nsudo systemctl start gobetween\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"6-troubleshooting\" class=\"mobile-header\"\u003e6. Troubleshooting\u003c/h2\u003e\n\u003ch3 id=\"common-issues\" class=\"mobile-header\"\u003eCommon Issues\u003c/h3\u003e\n\u003cp class=\"mobile-paragraph\"\u003e1. \u003cstrong\u003eService won't start\u003c/strong\u003e:\u003c/p\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Check logs\nsudo journalctl -u gobetween -n 100\nsudo tail -f /var/log/gobetween/gobetween.log\n\n# Check configuration\ngobetween --version\n\n# Check permissions\nls -la /etc/gobetween\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003cp class=\"mobile-paragraph\"\u003e2. \u003cstrong\u003eConnection issues\u003c/strong\u003e:\u003c/p\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Check if service is listening\nsudo ss -tlnp | grep 8888\n\n# Test connectivity\ntelnet localhost 8888\n\n# Check firewall\nsudo firewall-cmd --list-all\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003cp class=\"mobile-paragraph\"\u003e3. \u003cstrong\u003ePerformance issues\u003c/strong\u003e:\u003c/p\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Check resource usage\ntop -p $(pgrep gobetween)\n\n# Check disk I/O\niotop -p $(pgrep gobetween)\n\n# Check connections\nss -an | grep 8888\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"integration-examples\" class=\"mobile-header\"\u003eIntegration Examples\u003c/h2\u003e\n\u003ch3 id=\"docker-compose-example\" class=\"mobile-header\"\u003eDocker Compose Example\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"yaml\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003eyaml\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-yaml\"\u003eversion: \u0026#039;3.8\u0026#039;\nservices:\n  gobetween:\n    image: gobetween:latest\n    ports:\n      - \u0026quot;8888:8888\u0026quot;\n    volumes:\n      - ./config:/etc/gobetween\n      - ./data:/var/lib/gobetween\n    restart: unless-stopped\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"maintenance\" class=\"mobile-header\"\u003eMaintenance\u003c/h2\u003e\n\u003ch3 id=\"update-procedures\" class=\"mobile-header\"\u003eUpdate Procedures\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# RHEL/CentOS/Rocky/AlmaLinux\nsudo dnf update gobetween\n\n# Debian/Ubuntu\nsudo apt update \u0026amp;\u0026amp; sudo apt upgrade gobetween\n\n# Arch Linux\nsudo pacman -Syu gobetween\n\n# Alpine Linux\napk update \u0026amp;\u0026amp; apk upgrade gobetween\n\n# openSUSE\nsudo zypper update gobetween\n\n# FreeBSD\npkg update \u0026amp;\u0026amp; pkg upgrade gobetween\n\n# Always backup before updates\ntar -czf /backup/gobetween-pre-update-$(date +%Y%m%d).tar.gz /etc/gobetween\n\n# Restart after updates\nsudo systemctl restart gobetween\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch3 id=\"regular-maintenance\" class=\"mobile-header\"\u003eRegular Maintenance\u003c/h3\u003e\n\u003cdiv class=\"mobile-code-block\" data-language=\"bash\"\u003e\n      \u003cdiv class=\"mobile-code-header\"\u003e\n        \u003cspan class=\"mobile-code-language\"\u003ebash\u003c/span\u003e\n        \u003cbutton class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\"\u003e\n          \u003cspan class=\"copy-icon\"\u003e📋\u003c/span\u003e\n          \u003cspan class=\"copy-text\"\u003eCopy\u003c/span\u003e\n        \u003c/button\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"mobile-code-content\"\u003e\n        \u003cpre\u003e\u003ccode class=\"language-bash\"\u003e# Log rotation\nsudo logrotate -f /etc/logrotate.d/gobetween\n\n# Clean old logs\nfind /var/log/gobetween -name \u0026quot;*.log\u0026quot; -mtime +30 -delete\n\n# Check disk usage\ndu -sh /var/lib/gobetween\u003c/code\u003e\u003c/pre\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"additional-resources\" class=\"mobile-header\"\u003eAdditional Resources\u003c/h2\u003e\n\u003cli class=\"mobile-list-item\"\u003eOfficial Documentation: https://docs.gobetween.org/\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eGitHub Repository: https://github.com/gobetween/gobetween\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eCommunity Forum: https://forum.gobetween.org/\u003c/li\u003e\n\u003cli class=\"mobile-list-item\"\u003eBest Practices Guide: https://docs.gobetween.org/best-practices\u003c/li\u003e\n\u003cp class=\"mobile-paragraph\"\u003e---\u003c/p\u003e\n\u003cp class=\"mobile-paragraph\"\u003e\u003cstrong\u003eNote:\u003c/strong\u003e This guide is part of the \u003ca href=\"https://howtomgr.github.io\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\"\u003eHowToMgr\u003c/a\u003e collection. Always refer to official documentation for the most up-to-date information.\u003c/p\u003e","readTime":"7 min","wordCount":1268,"tableOfContents":[{"level":2,"text":"1. Prerequisites","id":"1-prerequisites"},{"level":2,"text":"2. Supported Operating Systems","id":"2-supported-operating-systems"},{"level":2,"text":"3. Installation","id":"3-installation"},{"level":3,"text":"RHEL/CentOS/Rocky Linux/AlmaLinux","id":"rhelcentosrocky-linuxalmalinux"},{"level":3,"text":"Debian/Ubuntu","id":"debianubuntu"},{"level":3,"text":"Arch Linux","id":"arch-linux"},{"level":3,"text":"Alpine Linux","id":"alpine-linux"},{"level":3,"text":"openSUSE/SLES","id":"opensusesles"},{"level":3,"text":"macOS","id":"macos"},{"level":3,"text":"FreeBSD","id":"freebsd"},{"level":3,"text":"Windows","id":"windows"},{"level":2,"text":"Initial Configuration","id":"initial-configuration"},{"level":3,"text":"Basic Configuration","id":"basic-configuration"},{"level":2,"text":"5. Service Management","id":"5-service-management"},{"level":3,"text":"systemd (RHEL, Debian, Ubuntu, Arch, openSUSE)","id":"systemd-rhel-debian-ubuntu-arch-opensuse"},{"level":3,"text":"OpenRC (Alpine Linux)","id":"openrc-alpine-linux"},{"level":3,"text":"rc.d (FreeBSD)","id":"rcd-freebsd"},{"level":3,"text":"launchd (macOS)","id":"launchd-macos"},{"level":3,"text":"Windows Service Manager","id":"windows-service-manager"},{"level":2,"text":"Advanced Configuration","id":"advanced-configuration"},{"level":2,"text":"Reverse Proxy Setup","id":"reverse-proxy-setup"},{"level":3,"text":"nginx Configuration","id":"nginx-configuration"},{"level":3,"text":"Apache Configuration","id":"apache-configuration"},{"level":3,"text":"HAProxy Configuration","id":"haproxy-configuration"},{"level":2,"text":"Security Configuration","id":"security-configuration"},{"level":3,"text":"Basic Security Setup","id":"basic-security-setup"},{"level":2,"text":"Database Setup","id":"database-setup"},{"level":2,"text":"Performance Optimization","id":"performance-optimization"},{"level":3,"text":"System Tuning","id":"system-tuning"},{"level":2,"text":"Monitoring","id":"monitoring"},{"level":3,"text":"Basic Monitoring","id":"basic-monitoring"},{"level":2,"text":"9. Backup and Restore","id":"9-backup-and-restore"},{"level":3,"text":"Backup Script","id":"backup-script"},{"level":3,"text":"Restore Procedure","id":"restore-procedure"},{"level":2,"text":"6. Troubleshooting","id":"6-troubleshooting"},{"level":3,"text":"Common Issues","id":"common-issues"},{"level":2,"text":"Integration Examples","id":"integration-examples"},{"level":3,"text":"Docker Compose Example","id":"docker-compose-example"},{"level":2,"text":"Maintenance","id":"maintenance"},{"level":3,"text":"Update Procedures","id":"update-procedures"},{"level":3,"text":"Regular Maintenance","id":"regular-maintenance"},{"level":2,"text":"Additional Resources","id":"additional-resources"}],"lastBuilt":"2025-10-01T06:20:49.367Z","metadataVersion":"2.0"}]},"__N_SSG":true},"page":"/[category]/[guide]","query":{"category":"load-balancers","guide":"haproxy"},"buildId":"EBKzFmLABjpv3oMkVU4D8","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>