{"pageProps":{"guides":[{"name":"adguard-home","displayName":"Adguard Home","slug":"adguard-home","description":"Repo for adguard-home","category":"infrastructure","language":null,"stars":0,"forks":0,"topics":[],"githubUrl":"https://github.com/howtomgr/adguard-home","updatedAt":"2025-09-08T03:04:18Z","createdAt":"2025-09-08T03:04:08Z","readmeRaw":"## ðŸ‘‹ Welcome to adguard-home ðŸš€  \n\nadguard-home README  \n  \n  \n## Author  \n\nðŸ¤– casjay: [Github](https://github.com/casjay) ðŸ¤–  \n","readmeHtml":"<h2 id=\"welcome-to-adguard-home\" class=\"mobile-header\">ðŸ‘‹ Welcome to adguard-home ðŸš€  </h2>\n<p class=\"mobile-paragraph\">adguard-home README  </p>\n<h2 id=\"author\" class=\"mobile-header\">Author  </h2>\n<p class=\"mobile-paragraph\">ðŸ¤– casjay: <a href=\"https://github.com/casjay\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">Github</a> ðŸ¤–  </p>","readTime":"1 min","wordCount":15,"lastBuilt":"2025-09-14T18:12:22.962Z"},{"name":"adminer","displayName":"Adminer","slug":"adminer","description":"Repo for adminer","category":"infrastructure","language":null,"stars":0,"forks":0,"topics":[],"githubUrl":"https://github.com/howtomgr/adminer","updatedAt":"2025-09-08T03:04:32Z","createdAt":"2025-09-08T03:04:22Z","readmeRaw":"## ðŸ‘‹ Welcome to adminer ðŸš€  \n\nadminer README  \n  \n  \n## Author  \n\nðŸ¤– casjay: [Github](https://github.com/casjay) ðŸ¤–  \n","readmeHtml":"<h2 id=\"welcome-to-adminer\" class=\"mobile-header\">ðŸ‘‹ Welcome to adminer ðŸš€  </h2>\n<p class=\"mobile-paragraph\">adminer README  </p>\n<h2 id=\"author\" class=\"mobile-header\">Author  </h2>\n<p class=\"mobile-paragraph\">ðŸ¤– casjay: <a href=\"https://github.com/casjay\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">Github</a> ðŸ¤–  </p>","readTime":"1 min","wordCount":15,"lastBuilt":"2025-09-14T18:12:22.671Z"},{"name":"ansible","displayName":"Ansible","slug":"ansible","description":"Repo for ansible","category":"infrastructure","language":null,"stars":0,"forks":0,"topics":[],"githubUrl":"https://github.com/howtomgr/ansible","updatedAt":"2025-09-14T01:29:39Z","createdAt":"2025-09-08T03:04:35Z","readmeRaw":"# Ansible Installation Guide\n\nAgentless automation platform for configuration management, application deployment, and task automation across multiple systems. Industry standard for infrastructure automation with enterprise-grade security.\n\n## Prerequisites\n\n- Linux control machine (any modern distribution)\n- Python 3.8+ on control machine\n- SSH access to target hosts\n- Python 2.7+ or 3.5+ on target hosts\n- 2GB RAM minimum, 4GB+ recommended for large infrastructures\n\n## Installation\n\n### Using Package Manager (Recommended)\n\n#### Ubuntu/Debian\n```bash\n# Update package list\nsudo apt update\n\n# Install Ansible and dependencies\nsudo apt install -y ansible python3-pip python3-venv sshpass\n\n# Install additional collections\nansible-galaxy collection install community.general\nansible-galaxy collection install ansible.posix\nansible-galaxy collection install kubernetes.core\nansible-galaxy collection install amazon.aws\nansible-galaxy collection install azure.azcollection\nansible-galaxy collection install google.cloud\n\n# Verify installation\nansible --version\nansible-galaxy collection list\n```\n\n#### RHEL/CentOS/Rocky Linux/AlmaLinux\n```bash\n# Install EPEL repository\nsudo yum install -y epel-release\n\n# Install Ansible\nsudo yum install -y ansible python3-pip\n\n# For newer distributions\nsudo dnf install -y ansible python3-pip\n\n# Install collections\nansible-galaxy collection install community.general\nansible-galaxy collection install ansible.posix\nansible-galaxy collection install kubernetes.core\n\n# Verify installation\nansible --version\n```\n\n#### Fedora\n```bash\n# Install Ansible\nsudo dnf install -y ansible python3-pip python3-virtualenv\n\n# Install additional collections\nansible-galaxy collection install community.general\nansible-galaxy collection install ansible.posix\nansible-galaxy collection install kubernetes.core\n\n# Verify installation\nansible --version\n```\n\n#### Arch Linux\n```bash\n# Install Ansible\nsudo pacman -Syu ansible python-pip\n\n# Install collections\nansible-galaxy collection install community.general\nansible-galaxy collection install ansible.posix\n\n# Verify installation\nansible --version\n```\n\n#### Alpine Linux\n```bash\n# Install Ansible\nsudo apk update\nsudo apk add ansible python3 py3-pip openssh\n\n# Install collections\nansible-galaxy collection install community.general\n\n# Verify installation\nansible --version\n```\n\n### Using pip (Latest Version)\n```bash\n# Create virtual environment (recommended)\npython3 -m venv ~/ansible-venv\nsource ~/ansible-venv/bin/activate\n\n# Install Ansible via pip\npip install --upgrade pip\npip install ansible ansible-core\n\n# Install additional packages\npip install paramiko jinja2 PyYAML cryptography\n\n# Install cloud provider SDKs\npip install boto3 botocore azure-cli google-cloud-storage\n\n# Install collections\nansible-galaxy collection install community.general\nansible-galaxy collection install ansible.posix\nansible-galaxy collection install kubernetes.core\nansible-galaxy collection install amazon.aws\nansible-galaxy collection install azure.azcollection\nansible-galaxy collection install google.cloud\n\n# Add to PATH permanently\necho 'source ~/ansible-venv/bin/activate' >> ~/.bashrc\n\n# Verify installation\nansible --version\n```\n\n### Using Docker\n```bash\n# Create Ansible Docker container with mounted volumes\ndocker run --rm -it \\\n  -v $(pwd):/ansible \\\n  -v ~/.ssh:/root/.ssh:ro \\\n  -v ~/.aws:/root/.aws:ro \\\n  -v ~/.azure:/root/.azure:ro \\\n  --workdir /ansible \\\n  ansible/ansible:latest\n\n# Create wrapper script for ease of use\nsudo tee /usr/local/bin/ansible-docker > /dev/null <<'EOF'\n#!/bin/bash\ndocker run --rm -it \\\n  -v $(pwd):/ansible \\\n  -v ~/.ssh:/root/.ssh:ro \\\n  -v ~/.aws:/root/.aws:ro \\\n  -v ~/.azure:/root/.azure:ro \\\n  -v ~/.kube:/root/.kube:ro \\\n  --workdir /ansible \\\n  --network host \\\n  ansible/ansible:latest \"$@\"\nEOF\nsudo chmod +x /usr/local/bin/ansible-docker\n\n# Create aliases\necho 'alias ansible=\"ansible-docker ansible\"' >> ~/.bashrc\necho 'alias ansible-playbook=\"ansible-docker ansible-playbook\"' >> ~/.bashrc\n```\n\n## Project Structure and Configuration\n\n### Professional Project Structure\n```bash\n# Create comprehensive Ansible project structure\nmkdir -p ~/ansible-infrastructure/{\n  inventories/{production,staging,development},\n  playbooks,\n  roles,\n  group_vars,\n  host_vars,\n  library,\n  filter_plugins,\n  callback_plugins,\n  vault,\n  collections,\n  logs\n}\n\ncd ~/ansible-infrastructure\n\n# Create ansible.cfg with security best practices\ncat > ansible.cfg <<EOF\n[defaults]\ninventory = inventories/production/hosts.yml\nremote_user = ansible\nprivate_key_file = ~/.ssh/ansible_key\nhost_key_checking = True\ntimeout = 30\nretry_files_enabled = False\nstdout_callback = yaml\nbin_ansible_callbacks = True\ngathering = smart\nfact_caching = jsonfile\nfact_caching_connection = ~/.ansible/facts_cache\nfact_caching_timeout = 86400\ninterpreter_python = auto_silent\nvault_password_file = ~/.ansible_vault_pass\n\n# Logging\nlog_path = logs/ansible.log\ndisplay_skipped_hosts = False\ndisplay_ok_hosts = False\n\n# Performance\nforks = 20\npoll_interval = 15\ninternal_poll_interval = 0.001\n\n# Security\ncommand_warnings = True\ndeprecation_warnings = True\naction_warnings = True\nlocalhost_warning = True\n\n[ssh_connection]\nssh_args = -o ControlMaster=auto -o ControlPersist=3600s -o PreferredAuthentications=publickey\npipelining = True\ncontrol_path = ~/.ansible/cp/%%h-%%p-%%r\nretries = 3\n\n[privilege_escalation]\nbecome = False\nbecome_method = sudo\nbecome_user = root\nbecome_ask_pass = False\n\n[inventory]\nenable_plugins = host_list, script, auto, yaml, ini, toml\ncache = True\ncache_plugin = jsonfile\ncache_timeout = 3600\ncache_connection = ~/.ansible/inventory_cache\n\n[galaxy]\nserver_list = automation_hub, galaxy\nEOF\n```\n\n### Advanced Inventory Management\n```bash\n# Create production inventory with groups and variables\ncat > inventories/production/hosts.yml <<EOF\nall:\n  children:\n    webservers:\n      hosts:\n        web-prod-01:\n          ansible_host: 10.0.1.10\n          ansible_user: ansible\n          server_role: frontend\n          backup_enabled: true\n        web-prod-02:\n          ansible_host: 10.0.1.11\n          ansible_user: ansible\n          server_role: frontend\n          backup_enabled: true\n        web-prod-03:\n          ansible_host: 10.0.1.12\n          ansible_user: ansible\n          server_role: frontend\n          backup_enabled: true\n      vars:\n        http_port: 80\n        https_port: 443\n        max_clients: 200\n        environment: production\n        monitoring_enabled: true\n\n    dbservers:\n      hosts:\n        db-prod-01:\n          ansible_host: 10.0.2.10\n          ansible_user: ansible\n          mysql_server_id: 1\n          mysql_role: master\n        db-prod-02:\n          ansible_host: 10.0.2.11\n          ansible_user: ansible\n          mysql_server_id: 2\n          mysql_role: slave\n      vars:\n        mysql_port: 3306\n        mysql_root_password: \"{{ vault_mysql_root_password }}\"\n        mysql_replication_user: \"{{ vault_mysql_replication_user }}\"\n        mysql_replication_password: \"{{ vault_mysql_replication_password }}\"\n\n    loadbalancers:\n      hosts:\n        lb-prod-01:\n          ansible_host: 10.0.3.10\n          ansible_user: ansible\n          lb_algorithm: roundrobin\n        lb-prod-02:\n          ansible_host: 10.0.3.11\n          ansible_user: ansible\n          lb_algorithm: roundrobin\n      vars:\n        haproxy_stats_enabled: true\n        haproxy_stats_user: admin\n        haproxy_stats_password: \"{{ vault_haproxy_stats_password }}\"\n\n    monitoring:\n      hosts:\n        monitor-prod-01:\n          ansible_host: 10.0.4.10\n          ansible_user: ansible\n          prometheus_retention: 30d\n          grafana_admin_password: \"{{ vault_grafana_admin_password }}\"\n\n    bastion:\n      hosts:\n        bastion-prod-01:\n          ansible_host: bastion.example.com\n          ansible_user: ansible\n          ansible_port: 22\n\n# Global variables for all hosts\nwebservers:\n  vars:\n    nginx_worker_processes: auto\n    nginx_worker_connections: 1024\n    ssl_certificate_path: /etc/ssl/certs\n    backup_schedule: \"0 2 * * *\"\n\ndbservers:\n  vars:\n    mysql_innodb_buffer_pool_size: 2G\n    mysql_max_connections: 200\n    backup_schedule: \"0 1 * * *\"\n    monitoring_enabled: true\nEOF\n\n# Create dynamic inventory script for cloud environments\ncat > inventories/production/aws_ec2.yml <<EOF\nplugin: amazon.aws.aws_ec2\nregions:\n  - us-west-2\n  - us-east-1\nfilters:\n  tag:Environment: production\n  tag:Ansible: managed\n  instance-state-name: running\n\nhostnames:\n  - tag:Name\n  - dns-name\n  - private-ip-address\n\ncompose:\n  ansible_host: private_ip_address\n  ec2_state: ec2_state_name\n  ec2_arch: ec2_architecture\n\ngroups:\n  # Group by instance type\n  webservers: \"'web' in tags.Role\"\n  databases: \"'db' in tags.Role\"\n  loadbalancers: \"'lb' in tags.Role\"\n  \n  # Group by environment\n  production: \"tags.Environment == 'production'\"\n  staging: \"tags.Environment == 'staging'\"\n  \n  # Group by availability zone\n  us_west_2a: ec2_placement_availability_zone == \"us-west-2a\"\n  us_west_2b: ec2_placement_availability_zone == \"us-west-2b\"\n\nkeyed_groups:\n  # Create groups based on tags\n  - key: tags.Environment\n    prefix: env\n  - key: tags.Role  \n    prefix: role\n  - key: ec2_instance_type\n    prefix: type\nEOF\n```\n\n### Ansible Vault Security\n```bash\n# Create strong vault password\nopenssl rand -base64 32 > ~/.ansible_vault_pass\nchmod 600 ~/.ansible_vault_pass\n\n# Create encrypted vault file for secrets\nansible-vault create group_vars/all/vault.yml\n# Enter secure passwords and API keys:\n# vault_mysql_root_password: your_secure_mysql_password\n# vault_grafana_admin_password: your_secure_grafana_password  \n# vault_ssl_private_key: |\n#   -----BEGIN PRIVATE KEY-----\n#   your_private_key_content\n#   -----END PRIVATE KEY-----\n\n# Create non-encrypted variables file\ncat > group_vars/all/vars.yml <<EOF\n# Non-sensitive variables\nmysql_port: 3306\nnginx_port: 80\ngrafana_port: 3000\nprometheus_port: 9090\n\n# Reference vault variables\nmysql_root_password: \"{{ vault_mysql_root_password }}\"\ngrafana_admin_password: \"{{ vault_grafana_admin_password }}\"\n\n# SSL configuration\nssl_certificate_path: /etc/ssl/certs/server.crt\nssl_private_key_path: /etc/ssl/private/server.key\nssl_private_key_content: \"{{ vault_ssl_private_key }}\"\n\n# Security settings\nansible_ssh_common_args: '-o StrictHostKeyChecking=yes -o UserKnownHostsFile=~/.ssh/known_hosts'\nansible_become_method: sudo\nansible_become_user: root\nEOF\n\n# Edit vault file\nansible-vault edit group_vars/all/vault.yml\n\n# View vault file (read-only)\nansible-vault view group_vars/all/vault.yml\n\n# Change vault password\nansible-vault rekey group_vars/all/vault.yml\n```\n\n## Comprehensive Playbooks\n\n### System Hardening Playbook\n```bash\ncat > playbooks/system-hardening.yml <<EOF\n---\n- name: System Security Hardening\n  hosts: all\n  become: yes\n  gather_facts: yes\n  vars:\n    security_packages:\n      - fail2ban\n      - ufw\n      - aide\n      - chkrootkit\n      - rkhunter\n      - clamav\n      - lynis\n    \n    disabled_services:\n      - telnet\n      - rsh\n      - rlogin\n      - tftp\n      - talk\n      - finger\n\n  pre_tasks:\n    - name: Update package cache\n      package:\n        update_cache: yes\n        cache_valid_time: 3600\n      when: ansible_os_family in [\"Debian\", \"RedHat\"]\n\n  tasks:\n    # System updates\n    - name: Upgrade all packages\n      package:\n        name: \"*\"\n        state: latest\n      when: ansible_os_family == \"RedHat\"\n\n    - name: Upgrade all packages (Debian/Ubuntu)\n      apt:\n        upgrade: dist\n        autoremove: yes\n        autoclean: yes\n      when: ansible_os_family == \"Debian\"\n\n    # Install security packages\n    - name: Install security packages\n      package:\n        name: \"{{ security_packages }}\"\n        state: present\n\n    # User security\n    - name: Create ansible user with limited privileges\n      user:\n        name: ansible\n        groups: sudo\n        shell: /bin/bash\n        create_home: yes\n        generate_ssh_key: yes\n        ssh_key_bits: 4096\n        ssh_key_type: rsa\n\n    - name: Configure sudo for ansible user\n      lineinfile:\n        path: /etc/sudoers.d/ansible\n        line: 'ansible ALL=(ALL) NOPASSWD:ALL'\n        create: yes\n        mode: '0440'\n        validate: 'visudo -cf %s'\n\n    # SSH hardening\n    - name: Configure SSH security\n      lineinfile:\n        path: /etc/ssh/sshd_config\n        regexp: \"{{ item.regexp }}\"\n        line: \"{{ item.line }}\"\n        backup: yes\n      loop:\n        - { regexp: '^#?PermitRootLogin', line: 'PermitRootLogin no' }\n        - { regexp: '^#?PasswordAuthentication', line: 'PasswordAuthentication no' }\n        - { regexp: '^#?X11Forwarding', line: 'X11Forwarding no' }\n        - { regexp: '^#?MaxAuthTries', line: 'MaxAuthTries 3' }\n        - { regexp: '^#?ClientAliveInterval', line: 'ClientAliveInterval 300' }\n        - { regexp: '^#?ClientAliveCountMax', line: 'ClientAliveCountMax 0' }\n        - { regexp: '^#?Protocol', line: 'Protocol 2' }\n        - { regexp: '^#?LogLevel', line: 'LogLevel VERBOSE' }\n      notify: restart ssh\n\n    # Firewall configuration\n    - name: Configure UFW firewall (Debian/Ubuntu)\n      ufw:\n        state: enabled\n        policy: deny\n        direction: incoming\n      when: ansible_os_family == \"Debian\"\n\n    - name: Allow SSH through UFW\n      ufw:\n        rule: allow\n        port: 22\n        proto: tcp\n        comment: 'SSH access'\n      when: ansible_os_family == \"Debian\"\n\n    - name: Configure firewalld (RHEL/CentOS/Fedora)\n      firewalld:\n        state: enabled\n        permanent: yes\n        immediate: yes\n      when: ansible_os_family == \"RedHat\"\n\n    - name: Allow SSH through firewalld\n      firewalld:\n        service: ssh\n        permanent: yes\n        state: enabled\n        immediate: yes\n      when: ansible_os_family == \"RedHat\"\n\n    # Disable unnecessary services\n    - name: Disable unnecessary services\n      systemd:\n        name: \"{{ item }}\"\n        enabled: no\n        state: stopped\n      loop: \"{{ disabled_services }}\"\n      ignore_errors: yes\n\n    # File system security\n    - name: Set proper permissions on sensitive files\n      file:\n        path: \"{{ item.path }}\"\n        mode: \"{{ item.mode }}\"\n        owner: root\n        group: root\n      loop:\n        - { path: '/etc/passwd', mode: '0644' }\n        - { path: '/etc/shadow', mode: '0640' }\n        - { path: '/etc/group', mode: '0644' }\n        - { path: '/etc/gshadow', mode: '0640' }\n        - { path: '/etc/ssh/sshd_config', mode: '0600' }\n\n    # Kernel security parameters\n    - name: Configure kernel security parameters\n      sysctl:\n        name: \"{{ item.key }}\"\n        value: \"{{ item.value }}\"\n        sysctl_set: yes\n        state: present\n        reload: yes\n      loop:\n        - { key: 'net.ipv4.ip_forward', value: '0' }\n        - { key: 'net.ipv4.conf.all.send_redirects', value: '0' }\n        - { key: 'net.ipv4.conf.default.send_redirects', value: '0' }\n        - { key: 'net.ipv4.conf.all.accept_source_route', value: '0' }\n        - { key: 'net.ipv4.conf.default.accept_source_route', value: '0' }\n        - { key: 'net.ipv4.conf.all.accept_redirects', value: '0' }\n        - { key: 'net.ipv4.conf.default.accept_redirects', value: '0' }\n        - { key: 'net.ipv4.conf.all.secure_redirects', value: '0' }\n        - { key: 'net.ipv4.conf.default.secure_redirects', value: '0' }\n        - { key: 'net.ipv4.conf.all.log_martians', value: '1' }\n        - { key: 'net.ipv4.conf.default.log_martians', value: '1' }\n        - { key: 'kernel.randomize_va_space', value: '2' }\n\n    # Configure fail2ban\n    - name: Configure fail2ban for SSH protection\n      template:\n        src: templates/fail2ban-jail.local.j2\n        dest: /etc/fail2ban/jail.local\n        backup: yes\n      notify: restart fail2ban\n\n  handlers:\n    - name: restart ssh\n      service:\n        name: \"{{ 'ssh' if ansible_os_family == 'Debian' else 'sshd' }}\"\n        state: restarted\n\n    - name: restart fail2ban\n      service:\n        name: fail2ban\n        state: restarted\nEOF\n```\n\n### Application Deployment Playbook\n```bash\ncat > playbooks/web-application-deployment.yml <<EOF\n---\n- name: Deploy Web Application Stack\n  hosts: webservers\n  become: yes\n  serial: \"25%\"  # Rolling deployment\n  max_fail_percentage: 10\n  vars:\n    app_name: mywebapp\n    app_version: \"{{ app_version | default('latest') }}\"\n    app_port: 3000\n    nginx_workers: \"{{ ansible_processor_cores }}\"\n    \n  pre_tasks:\n    - name: Check if maintenance mode file exists\n      stat:\n        path: /var/www/html/maintenance.html\n      register: maintenance_mode\n\n    - name: Fail if in maintenance mode\n      fail:\n        msg: \"Server is in maintenance mode\"\n      when: maintenance_mode.stat.exists and not force_deployment | default(false)\n\n  tasks:\n    # Application deployment\n    - name: Create application user\n      user:\n        name: \"{{ app_name }}\"\n        system: yes\n        shell: /bin/false\n        home: \"/opt/{{ app_name }}\"\n        create_home: yes\n\n    - name: Create application directories\n      file:\n        path: \"{{ item }}\"\n        state: directory\n        owner: \"{{ app_name }}\"\n        group: \"{{ app_name }}\"\n        mode: '0755'\n      loop:\n        - \"/opt/{{ app_name }}\"\n        - \"/opt/{{ app_name }}/releases\"\n        - \"/opt/{{ app_name }}/shared\"\n        - \"/var/log/{{ app_name }}\"\n\n    - name: Download application release\n      get_url:\n        url: \"https://releases.example.com/{{ app_name }}/{{ app_version }}/{{ app_name }}-{{ app_version }}.tar.gz\"\n        dest: \"/tmp/{{ app_name }}-{{ app_version }}.tar.gz\"\n        mode: '0644'\n        timeout: 300\n      register: download_result\n\n    - name: Extract application\n      unarchive:\n        src: \"/tmp/{{ app_name }}-{{ app_version }}.tar.gz\"\n        dest: \"/opt/{{ app_name }}/releases/\"\n        owner: \"{{ app_name }}\"\n        group: \"{{ app_name }}\"\n        remote_src: yes\n        creates: \"/opt/{{ app_name }}/releases/{{ app_version }}\"\n\n    - name: Create symlink to current release\n      file:\n        src: \"/opt/{{ app_name }}/releases/{{ app_version }}\"\n        dest: \"/opt/{{ app_name }}/current\"\n        state: link\n        owner: \"{{ app_name }}\"\n        group: \"{{ app_name }}\"\n      notify:\n        - reload application\n        - reload nginx\n\n    # Configuration management\n    - name: Deploy application configuration\n      template:\n        src: \"templates/{{ app_name }}.conf.j2\"\n        dest: \"/opt/{{ app_name }}/shared/{{ app_name }}.conf\"\n        owner: \"{{ app_name }}\"\n        group: \"{{ app_name }}\"\n        mode: '0640'\n        backup: yes\n      notify: reload application\n\n    # Service management\n    - name: Deploy systemd service file\n      template:\n        src: \"templates/{{ app_name }}.service.j2\"\n        dest: \"/etc/systemd/system/{{ app_name }}.service\"\n        mode: '0644'\n      notify:\n        - daemon reload\n        - restart application\n\n    - name: Enable and start application service\n      systemd:\n        name: \"{{ app_name }}\"\n        enabled: yes\n        state: started\n        daemon_reload: yes\n\n    # Health check\n    - name: Wait for application to be ready\n      uri:\n        url: \"http://localhost:{{ app_port }}/health\"\n        method: GET\n        status_code: 200\n      retries: 30\n      delay: 10\n\n    # Cleanup old releases\n    - name: Clean up old releases (keep last 3)\n      shell: |\n        cd /opt/{{ app_name }}/releases\n        ls -t | tail -n +4 | xargs rm -rf\n      args:\n        executable: /bin/bash\n\n  post_tasks:\n    - name: Verify application is running\n      uri:\n        url: \"http://{{ ansible_default_ipv4.address }}:{{ app_port }}/health\"\n        method: GET\n        status_code: 200\n      delegate_to: localhost\n\n    - name: Log deployment success\n      lineinfile:\n        path: \"/var/log/{{ app_name }}/deployments.log\"\n        line: \"{{ ansible_date_time.iso8601 }} - Successfully deployed {{ app_version }} to {{ inventory_hostname }}\"\n        create: yes\n\n  handlers:\n    - name: daemon reload\n      systemd:\n        daemon_reload: yes\n\n    - name: restart application\n      systemd:\n        name: \"{{ app_name }}\"\n        state: restarted\n\n    - name: reload application\n      systemd:\n        name: \"{{ app_name }}\"\n        state: reloaded\n\n    - name: reload nginx\n      service:\n        name: nginx\n        state: reloaded\nEOF\n```\n\n### Infrastructure as Code Playbook\n```bash\ncat > playbooks/infrastructure-provisioning.yml <<EOF\n---\n- name: Infrastructure Provisioning and Configuration\n  hosts: all\n  become: yes\n  strategy: free  # Parallel execution\n  vars:\n    base_packages:\n      Debian:\n        - curl\n        - wget\n        - vim\n        - htop\n        - git\n        - python3\n        - python3-pip\n        - unzip\n        - tree\n      RedHat:\n        - curl\n        - wget\n        - vim\n        - htop\n        - git\n        - python3\n        - python3-pip\n        - unzip\n        - tree\n        - epel-release\n\n  tasks:\n    # System preparation\n    - name: Set hostname\n      hostname:\n        name: \"{{ inventory_hostname }}\"\n\n    - name: Update /etc/hosts\n      lineinfile:\n        path: /etc/hosts\n        line: \"{{ ansible_default_ipv4.address }} {{ inventory_hostname }}\"\n        backup: yes\n\n    # Package management\n    - name: Install base packages\n      package:\n        name: \"{{ base_packages[ansible_os_family] | default(base_packages['Debian']) }}\"\n        state: present\n\n    # Time synchronization\n    - name: Install and configure NTP\n      package:\n        name: \"{{ 'ntp' if ansible_os_family == 'Debian' else 'chrony' }}\"\n        state: present\n\n    - name: Start and enable time synchronization\n      service:\n        name: \"{{ 'ntp' if ansible_os_family == 'Debian' else 'chronyd' }}\"\n        state: started\n        enabled: yes\n\n    # Log management\n    - name: Configure logrotate for application logs\n      template:\n        src: templates/app-logrotate.j2\n        dest: /etc/logrotate.d/applications\n        mode: '0644'\n\n    # Monitoring agent installation\n    - name: Install Node Exporter for Prometheus monitoring\n      get_url:\n        url: \"https://github.com/prometheus/node_exporter/releases/download/v1.6.1/node_exporter-1.6.1.linux-amd64.tar.gz\"\n        dest: /tmp/node_exporter.tar.gz\n        mode: '0644'\n\n    - name: Extract Node Exporter\n      unarchive:\n        src: /tmp/node_exporter.tar.gz\n        dest: /tmp\n        remote_src: yes\n\n    - name: Copy Node Exporter binary\n      copy:\n        src: /tmp/node_exporter-1.6.1.linux-amd64/node_exporter\n        dest: /usr/local/bin/node_exporter\n        mode: '0755'\n        owner: root\n        group: root\n        remote_src: yes\n\n    - name: Create node_exporter systemd service\n      template:\n        src: templates/node_exporter.service.j2\n        dest: /etc/systemd/system/node_exporter.service\n        mode: '0644'\n      notify:\n        - daemon reload\n        - restart node_exporter\n\n    # Security configuration\n    - name: Configure kernel parameters for security\n      sysctl:\n        name: \"{{ item.key }}\"\n        value: \"{{ item.value }}\"\n        sysctl_set: yes\n        state: present\n        reload: yes\n      loop:\n        - { key: 'kernel.dmesg_restrict', value: '1' }\n        - { key: 'kernel.kptr_restrict', value: '2' }\n        - { key: 'kernel.yama.ptrace_scope', value: '1' }\n        - { key: 'net.ipv4.conf.all.log_martians', value: '1' }\n        - { key: 'net.ipv4.conf.default.log_martians', value: '1' }\n        - { key: 'net.ipv4.conf.all.send_redirects', value: '0' }\n        - { key: 'net.ipv4.conf.default.send_redirects', value: '0' }\n\n    # File integrity monitoring\n    - name: Initialize AIDE database\n      shell: |\n        aide --init\n        mv /var/lib/aide/aide.db.new /var/lib/aide/aide.db\n      args:\n        creates: /var/lib/aide/aide.db\n\n    - name: Schedule AIDE integrity checks\n      cron:\n        name: \"AIDE integrity check\"\n        minute: \"0\"\n        hour: \"3\"\n        job: \"/usr/bin/aide --check\"\n        user: root\n\n  handlers:\n    - name: daemon reload\n      systemd:\n        daemon_reload: yes\n\n    - name: restart node_exporter\n      service:\n        name: node_exporter\n        state: restarted\n        enabled: yes\nEOF\n```\n\n## Advanced Role Development\n\n### Comprehensive NGINX Role\n```bash\n# Create NGINX role structure\nansible-galaxy init roles/nginx\n\n# Main tasks\ncat > roles/nginx/tasks/main.yml <<EOF\n---\n# NGINX Installation and Configuration Role\n- name: Include OS-specific variables\n  include_vars: \"{{ ansible_os_family }}.yml\"\n\n- name: Install NGINX\n  include_tasks: \"install-{{ ansible_os_family }}.yml\"\n\n- name: Create NGINX directories\n  file:\n    path: \"{{ item }}\"\n    state: directory\n    owner: root\n    group: root\n    mode: '0755'\n  loop:\n    - /etc/nginx/sites-available\n    - /etc/nginx/sites-enabled\n    - /etc/nginx/conf.d\n    - /var/log/nginx\n    - /var/cache/nginx\n\n- name: Generate DH parameters\n  openssl_dhparam:\n    path: /etc/ssl/certs/dhparam.pem\n    size: 2048\n  when: nginx_ssl_enabled | default(false)\n\n- name: Deploy NGINX main configuration\n  template:\n    src: nginx.conf.j2\n    dest: /etc/nginx/nginx.conf\n    backup: yes\n    validate: 'nginx -t -c %s'\n  notify: reload nginx\n\n- name: Deploy virtual host configurations\n  template:\n    src: vhost.conf.j2\n    dest: \"/etc/nginx/sites-available/{{ item.name }}.conf\"\n    backup: yes\n  loop: \"{{ nginx_vhosts | default([]) }}\"\n  notify: reload nginx\n\n- name: Enable virtual hosts\n  file:\n    src: \"/etc/nginx/sites-available/{{ item.name }}.conf\"\n    dest: \"/etc/nginx/sites-enabled/{{ item.name }}.conf\"\n    state: link\n  loop: \"{{ nginx_vhosts | default([]) }}\"\n  when: item.enabled | default(true)\n  notify: reload nginx\n\n- name: Remove default site\n  file:\n    path: /etc/nginx/sites-enabled/default\n    state: absent\n  notify: reload nginx\n\n- name: Start and enable NGINX\n  service:\n    name: nginx\n    state: started\n    enabled: yes\n\n- name: Configure log rotation\n  template:\n    src: nginx-logrotate.j2\n    dest: /etc/logrotate.d/nginx\n    mode: '0644'\n\n- name: Setup NGINX monitoring\n  include_tasks: monitoring.yml\n  when: nginx_monitoring_enabled | default(false)\n\n- name: Configure SSL certificates\n  include_tasks: ssl.yml\n  when: nginx_ssl_enabled | default(false)\nEOF\n\n# OS-specific installation tasks\ncat > roles/nginx/tasks/install-Debian.yml <<EOF\n---\n- name: Add NGINX signing key (Debian/Ubuntu)\n  apt_key:\n    url: https://nginx.org/keys/nginx_signing.key\n    state: present\n\n- name: Add NGINX repository (Debian/Ubuntu)\n  apt_repository:\n    repo: \"deb https://nginx.org/packages/{{ ansible_distribution | lower }}/ {{ ansible_distribution_release }} nginx\"\n    state: present\n\n- name: Install NGINX (Debian/Ubuntu)\n  apt:\n    name: nginx\n    state: present\n    update_cache: yes\nEOF\n\ncat > roles/nginx/tasks/install-RedHat.yml <<EOF\n---\n- name: Add NGINX repository (RHEL/CentOS)\n  yum_repository:\n    name: nginx\n    description: NGINX Repository\n    baseurl: \"https://nginx.org/packages/centos/{{ ansible_distribution_major_version }}/$basearch/\"\n    gpgcheck: yes\n    gpgkey: https://nginx.org/keys/nginx_signing.key\n    enabled: yes\n\n- name: Install NGINX (RHEL/CentOS)\n  yum:\n    name: nginx\n    state: present\nEOF\n\n# Variables\ncat > roles/nginx/vars/main.yml <<EOF\n---\nnginx_user: nginx\nnginx_worker_processes: auto\nnginx_worker_connections: 1024\nnginx_keepalive_timeout: 65\nnginx_ssl_enabled: false\nnginx_monitoring_enabled: true\n\nnginx_security_headers:\n  - \"add_header X-Frame-Options SAMEORIGIN always;\"\n  - \"add_header X-Content-Type-Options nosniff always;\"\n  - \"add_header X-XSS-Protection '1; mode=block' always;\"\n  - \"add_header Strict-Transport-Security 'max-age=31536000; includeSubDomains' always;\"\n\nnginx_default_vhost:\n  name: default\n  listen: 80\n  server_name: \"_\"\n  root: /var/www/html\n  index: index.html\n  enabled: false\nEOF\n\n# Templates\ncat > roles/nginx/templates/nginx.conf.j2 <<EOF\nuser {{ nginx_user }};\nworker_processes {{ nginx_worker_processes }};\npid /var/run/nginx.pid;\n\nevents {\n    worker_connections {{ nginx_worker_connections }};\n    use epoll;\n    multi_accept on;\n}\n\nhttp {\n    # Basic settings\n    sendfile on;\n    tcp_nopush on;\n    tcp_nodelay on;\n    keepalive_timeout {{ nginx_keepalive_timeout }};\n    types_hash_max_size 2048;\n    server_tokens off;\n\n    include /etc/nginx/mime.types;\n    default_type application/octet-stream;\n\n    # SSL configuration\n{% if nginx_ssl_enabled %}\n    ssl_protocols TLSv1.2 TLSv1.3;\n    ssl_prefer_server_ciphers off;\n    ssl_dhparam /etc/ssl/certs/dhparam.pem;\n{% endif %}\n\n    # Gzip compression\n    gzip on;\n    gzip_vary on;\n    gzip_proxied any;\n    gzip_comp_level 6;\n    gzip_types\n        application/javascript\n        application/json\n        application/xml\n        text/css\n        text/javascript\n        text/xml\n        text/plain;\n\n    # Security headers\n{% for header in nginx_security_headers %}\n    {{ header }}\n{% endfor %}\n\n    # Logging\n    log_format main '\\$remote_addr - \\$remote_user [\\$time_local] \"\\$request\" '\n                    '\\$status \\$body_bytes_sent \"\\$http_referer\" '\n                    '\"\\$http_user_agent\" \"\\$http_x_forwarded_for\"';\n\n    access_log /var/log/nginx/access.log main;\n    error_log /var/log/nginx/error.log;\n\n    # Rate limiting\n    limit_req_zone \\$binary_remote_addr zone=login:10m rate=10r/m;\n    limit_conn_zone \\$binary_remote_addr zone=addr:10m;\n\n    # Include configurations\n    include /etc/nginx/conf.d/*.conf;\n    include /etc/nginx/sites-enabled/*;\n}\nEOF\n\n# Handlers\ncat > roles/nginx/handlers/main.yml <<EOF\n---\n- name: restart nginx\n  service:\n    name: nginx\n    state: restarted\n\n- name: reload nginx\n  service:\n    name: nginx\n    state: reloaded\n\n- name: validate nginx config\n  command: nginx -t\n  changed_when: false\nEOF\n```\n\n## Security and Compliance\n\n### Ansible Security Scanner Integration\n```bash\n# Create security scanning playbook\ncat > playbooks/security-scan.yml <<EOF\n---\n- name: Security Compliance Scanning\n  hosts: all\n  become: yes\n  gather_facts: yes\n  vars:\n    scan_results_dir: \"/tmp/security-scans\"\n    \n  tasks:\n    - name: Create scan results directory\n      file:\n        path: \"{{ scan_results_dir }}\"\n        state: directory\n        mode: '0755'\n\n    # CIS benchmark scanning\n    - name: Download CIS benchmark script\n      get_url:\n        url: \"https://github.com/dev-sec/cis-dil-benchmark/archive/master.zip\"\n        dest: \"/tmp/cis-benchmark.zip\"\n        mode: '0644'\n\n    - name: Run CIS benchmark scan\n      shell: |\n        cd /tmp\n        unzip -o cis-benchmark.zip\n        cd cis-dil-benchmark-master\n        bash cis_ubuntu2204.sh > {{ scan_results_dir }}/cis-scan-{{ inventory_hostname }}.txt\n      args:\n        creates: \"{{ scan_results_dir }}/cis-scan-{{ inventory_hostname }}.txt\"\n\n    # Lynis security audit\n    - name: Install Lynis\n      package:\n        name: lynis\n        state: present\n\n    - name: Run Lynis security audit\n      command: lynis audit system --quiet --cronjob\n      register: lynis_result\n      changed_when: false\n\n    - name: Save Lynis results\n      copy:\n        content: \"{{ lynis_result.stdout }}\"\n        dest: \"{{ scan_results_dir }}/lynis-scan-{{ inventory_hostname }}.txt\"\n        mode: '0644'\n\n    # OpenSCAP compliance scanning\n    - name: Install OpenSCAP (RHEL/CentOS)\n      package:\n        name:\n          - openscap-scanner\n          - scap-security-guide\n        state: present\n      when: ansible_os_family == \"RedHat\"\n\n    - name: Install OpenSCAP (Debian/Ubuntu)\n      package:\n        name:\n          - libopenscap8\n          - ssg-debian\n        state: present\n      when: ansible_os_family == \"Debian\"\n\n    - name: Run OpenSCAP scan\n      shell: |\n        oscap xccdf eval --profile xccdf_org.ssgproject.content_profile_standard \\\n          --results {{ scan_results_dir }}/oscap-results-{{ inventory_hostname }}.xml \\\n          --report {{ scan_results_dir }}/oscap-report-{{ inventory_hostname }}.html \\\n          /usr/share/xml/scap/ssg/content/ssg-{{ ansible_distribution | lower }}{{ ansible_distribution_major_version }}-xccdf.xml\n      ignore_errors: yes\n      when: ansible_os_family in [\"RedHat\", \"Debian\"]\n\n    # Vulnerability scanning with Trivy\n    - name: Install Trivy vulnerability scanner\n      shell: |\n        curl -sfL https://raw.githubusercontent.com/aquasecurity/trivy/main/contrib/install.sh | sh -s -- -b /usr/local/bin\n      args:\n        creates: /usr/local/bin/trivy\n\n    - name: Run Trivy filesystem scan\n      shell: |\n        trivy fs --format json --output {{ scan_results_dir }}/trivy-scan-{{ inventory_hostname }}.json /\n      ignore_errors: yes\n\n    # Collect scan results\n    - name: Fetch scan results to control machine\n      fetch:\n        src: \"{{ item }}\"\n        dest: \"./security-reports/{{ inventory_hostname }}/\"\n        flat: yes\n      loop:\n        - \"{{ scan_results_dir }}/cis-scan-{{ inventory_hostname }}.txt\"\n        - \"{{ scan_results_dir }}/lynis-scan-{{ inventory_hostname }}.txt\"\n        - \"{{ scan_results_dir }}/oscap-report-{{ inventory_hostname }}.html\"\n        - \"{{ scan_results_dir }}/trivy-scan-{{ inventory_hostname }}.json\"\n      ignore_errors: yes\n      delegate_to: localhost\n\n  post_tasks:\n    - name: Generate compliance summary\n      template:\n        src: templates/compliance-summary.j2\n        dest: \"{{ scan_results_dir }}/compliance-summary-{{ inventory_hostname }}.txt\"\n        mode: '0644'\nEOF\n```\n\n### Ansible AWX/Tower Integration\n```bash\n# Install Ansible AWX (open source)\ncat > playbooks/install-awx.yml <<EOF\n---\n- name: Install Ansible AWX\n  hosts: localhost\n  connection: local\n  become: yes\n  vars:\n    awx_namespace: awx\n    awx_admin_user: admin\n    awx_admin_password: \"{{ vault_awx_admin_password }}\"\n\n  tasks:\n    - name: Install prerequisite packages\n      package:\n        name:\n          - git\n          - curl\n          - docker.io\n          - docker-compose\n        state: present\n\n    - name: Clone AWX repository\n      git:\n        repo: https://github.com/ansible/awx.git\n        dest: /opt/awx\n        version: devel\n\n    - name: Create AWX Docker inventory\n      template:\n        src: templates/awx-docker-inventory.j2\n        dest: /opt/awx/installer/inventory\n        mode: '0644'\n\n    - name: Install AWX using Ansible\n      shell: ansible-playbook -i inventory install.yml\n      args:\n        chdir: /opt/awx/installer\n      environment:\n        ANSIBLE_HOST_KEY_CHECKING: False\n\n    - name: Wait for AWX to be ready\n      uri:\n        url: \"http://localhost:80/api/v2/ping/\"\n        method: GET\n      retries: 30\n      delay: 10\n\n    - name: Configure AWX organizations and projects\n      uri:\n        url: \"http://localhost:80/api/v2/organizations/\"\n        method: POST\n        user: \"{{ awx_admin_user }}\"\n        password: \"{{ awx_admin_password }}\"\n        force_basic_auth: yes\n        body_format: json\n        body:\n          name: \"Production\"\n          description: \"Production environment organization\"\n        status_code: [200, 201, 409]\nEOF\n```\n\n## Multi-Cloud Automation\n\n### AWS Infrastructure Automation\n```bash\ncat > playbooks/aws-infrastructure.yml <<EOF\n---\n- name: AWS Infrastructure Automation\n  hosts: localhost\n  connection: local\n  gather_facts: no\n  vars:\n    aws_region: \"{{ aws_region | default('us-west-2') }}\"\n    vpc_cidr: \"{{ vpc_cidr | default('10.0.0.0/16') }}\"\n    environment: \"{{ environment | default('production') }}\"\n\n  tasks:\n    # VPC Creation\n    - name: Create VPC\n      amazon.aws.ec2_vpc_info:\n        filters:\n          \"tag:Name\": \"{{ environment }}-vpc\"\n        region: \"{{ aws_region }}\"\n      register: existing_vpc\n\n    - name: Create new VPC if not exists\n      amazon.aws.ec2_vpc_net:\n        name: \"{{ environment }}-vpc\"\n        cidr_block: \"{{ vpc_cidr }}\"\n        region: \"{{ aws_region }}\"\n        state: present\n        dns_hostnames: yes\n        dns_support: yes\n        tags:\n          Environment: \"{{ environment }}\"\n          ManagedBy: ansible\n      register: vpc\n      when: existing_vpc.vpcs | length == 0\n\n    # Security Groups\n    - name: Create web security group\n      amazon.aws.ec2_group:\n        name: \"{{ environment }}-web-sg\"\n        description: \"Security group for web servers\"\n        vpc_id: \"{{ vpc.vpc.id if vpc.vpc is defined else existing_vpc.vpcs[0].vpc_id }}\"\n        region: \"{{ aws_region }}\"\n        rules:\n          - proto: tcp\n            ports:\n              - 80\n              - 443\n            cidr_ip: 0.0.0.0/0\n            rule_desc: \"HTTP and HTTPS access\"\n          - proto: tcp\n            ports:\n              - 22\n            group_id: \"{{ environment }}-bastion-sg\"\n            rule_desc: \"SSH from bastion\"\n        tags:\n          Environment: \"{{ environment }}\"\n\n    # Launch EC2 instances\n    - name: Launch web servers\n      amazon.aws.ec2_instance:\n        name: \"{{ environment }}-web-{{ item }}\"\n        instance_type: t3.medium\n        image_id: ami-0c02fb55956c7d316  # Amazon Linux 2\n        key_name: \"{{ ec2_key_name }}\"\n        vpc_subnet_id: \"{{ web_subnet_id }}\"\n        security_groups:\n          - \"{{ environment }}-web-sg\"\n        region: \"{{ aws_region }}\"\n        state: running\n        wait: yes\n        wait_timeout: 300\n        user_data: |\n          #!/bin/bash\n          yum update -y\n          yum install -y python3\n        tags:\n          Environment: \"{{ environment }}\"\n          Role: webserver\n          Ansible: managed\n      loop: \"{{ range(1, web_server_count + 1) | list }}\"\n      register: web_instances\n\n    # Add instances to inventory\n    - name: Add web servers to inventory\n      add_host:\n        name: \"{{ item.instances[0].tags.Name }}\"\n        hostname: \"{{ item.instances[0].public_ip_address }}\"\n        groups: webservers\n        ansible_ssh_private_key_file: \"~/.ssh/{{ ec2_key_name }}.pem\"\n        ansible_user: ec2-user\n      loop: \"{{ web_instances.results }}\"\n      changed_when: false\nEOF\n```\n\n### Kubernetes Cluster Management\n```bash\ncat > playbooks/k8s-cluster-management.yml <<EOF\n---\n- name: Kubernetes Cluster Management with Ansible\n  hosts: k8s_masters\n  become: yes\n  serial: 1\n  vars:\n    k8s_version: \"1.28.2\"\n    containerd_version: \"1.6.24\"\n    cni_version: \"1.3.0\"\n\n  tasks:\n    # Pre-flight checks\n    - name: Check system requirements\n      assert:\n        that:\n          - ansible_memtotal_mb >= 1700\n          - ansible_processor_cores >= 2\n        fail_msg: \"System doesn't meet minimum requirements\"\n\n    - name: Verify connectivity to all nodes\n      ping:\n      delegate_to: \"{{ item }}\"\n      loop: \"{{ groups['k8s_all'] }}\"\n\n    # Container runtime setup\n    - name: Install containerd\n      include_role:\n        name: containerd\n      vars:\n        containerd_version: \"{{ containerd_version }}\"\n\n    # Kubernetes installation\n    - name: Install Kubernetes components\n      include_role:\n        name: kubernetes\n      vars:\n        kubernetes_version: \"{{ k8s_version }}\"\n\n    # Cluster initialization\n    - name: Initialize Kubernetes cluster\n      shell: |\n        kubeadm init \\\n          --pod-network-cidr=10.244.0.0/16 \\\n          --service-cidr=10.96.0.0/12 \\\n          --apiserver-advertise-address={{ ansible_default_ipv4.address }} \\\n          --node-name={{ inventory_hostname }}\n      args:\n        creates: /etc/kubernetes/admin.conf\n      register: kubeadm_init\n\n    - name: Create .kube directory\n      file:\n        path: \"{{ ansible_env.HOME }}/.kube\"\n        state: directory\n        mode: '0755'\n\n    - name: Copy admin.conf to user's kube config\n      copy:\n        src: /etc/kubernetes/admin.conf\n        dest: \"{{ ansible_env.HOME }}/.kube/config\"\n        owner: \"{{ ansible_user }}\"\n        group: \"{{ ansible_user }}\"\n        mode: '0644'\n        remote_src: yes\n\n    # Network plugin installation\n    - name: Install Flannel CNI\n      shell: kubectl apply -f https://github.com/flannel-io/flannel/releases/latest/download/kube-flannel.yml\n      environment:\n        KUBECONFIG: \"{{ ansible_env.HOME }}/.kube/config\"\n\n    # Join worker nodes\n    - name: Get join command\n      shell: kubeadm token create --print-join-command\n      register: join_command\n      when: inventory_hostname in groups['k8s_masters'][0]\n\n    - name: Join worker nodes to cluster\n      shell: \"{{ hostvars[groups['k8s_masters'][0]]['join_command'].stdout }}\"\n      when: inventory_hostname in groups['k8s_workers']\n\n  post_tasks:\n    - name: Verify cluster status\n      shell: kubectl get nodes\n      environment:\n        KUBECONFIG: \"{{ ansible_env.HOME }}/.kube/config\"\n      register: cluster_status\n      when: inventory_hostname in groups['k8s_masters'][0]\n\n    - name: Display cluster status\n      debug:\n        var: cluster_status.stdout_lines\n      when: inventory_hostname in groups['k8s_masters'][0]\nEOF\n```\n\n## Performance Optimization and Scaling\n\n### Parallel Execution Strategies\n```bash\n# Create high-performance playbook configuration\ncat > playbooks/high-performance-deployment.yml <<EOF\n---\n- name: High-Performance Deployment\n  hosts: all\n  become: yes\n  strategy: free  # Parallel execution\n  serial: \"30%\"   # Process 30% of hosts at a time\n  max_fail_percentage: 10\n  gather_facts: yes\n  fact_caching: smart\n  vars:\n    deployment_batch_size: 10\n    max_concurrent_tasks: 50\n\n  pre_tasks:\n    - name: Check system load\n      shell: uptime | awk '{print $(NF-2)}' | sed 's/,//'\n      register: system_load\n      changed_when: false\n\n    - name: Skip high-load systems\n      meta: end_host\n      when: system_load.stdout | float > 5.0\n\n  tasks:\n    - name: Update packages with retries\n      package:\n        name: \"*\"\n        state: latest\n      retries: 3\n      delay: 30\n      async: 300\n      poll: 10\n\n    - name: Deploy configuration files in parallel\n      template:\n        src: \"{{ item.src }}\"\n        dest: \"{{ item.dest }}\"\n        mode: \"{{ item.mode | default('0644') }}\"\n        backup: yes\n      loop:\n        - { src: \"nginx.conf.j2\", dest: \"/etc/nginx/nginx.conf\" }\n        - { src: \"mysql.cnf.j2\", dest: \"/etc/mysql/my.cnf\" }\n        - { src: \"redis.conf.j2\", dest: \"/etc/redis/redis.conf\" }\n      async: 120\n      poll: 5\n      register: config_deployment\n\n    - name: Wait for all configuration deployments\n      async_status:\n        jid: \"{{ item.ansible_job_id }}\"\n      loop: \"{{ config_deployment.results }}\"\n      when: item.ansible_job_id is defined\n\n  handlers:\n    - name: restart services\n      service:\n        name: \"{{ item }}\"\n        state: restarted\n      loop:\n        - nginx\n        - mysql\n        - redis\n      listen: \"restart all services\"\nEOF\n\n# Performance monitoring playbook\ncat > playbooks/performance-monitoring.yml <<EOF\n---\n- name: Performance Monitoring Setup\n  hosts: all\n  become: yes\n  vars:\n    monitoring_tools:\n      - htop\n      - iotop\n      - nethogs\n      - dstat\n      - sysstat\n      - perf\n\n  tasks:\n    - name: Install performance monitoring tools\n      package:\n        name: \"{{ monitoring_tools }}\"\n        state: present\n\n    - name: Configure system monitoring\n      template:\n        src: templates/sysstat.j2\n        dest: /etc/default/sysstat\n        backup: yes\n      when: ansible_os_family == \"Debian\"\n\n    - name: Enable system statistics collection\n      service:\n        name: \"{{ 'sysstat' if ansible_os_family == 'Debian' else 'sysstat' }}\"\n        enabled: yes\n        state: started\n\n    - name: Create performance monitoring script\n      template:\n        src: templates/performance-monitor.sh.j2\n        dest: /usr/local/bin/performance-monitor.sh\n        mode: '0755'\n\n    - name: Schedule performance monitoring\n      cron:\n        name: \"Performance monitoring\"\n        minute: \"*/5\"\n        job: \"/usr/local/bin/performance-monitor.sh\"\n        user: root\nEOF\n```\n\n## Testing and Validation\n\n### Molecule Testing Framework\n```bash\n# Install Molecule for role testing\npip install molecule[docker] molecule[vagrant] molecule[libvirt]\n\n# Initialize Molecule in role directory\ncd roles/nginx\nmolecule init scenario --driver-name docker\n\n# Create molecule configuration\ncat > molecule/default/molecule.yml <<EOF\n---\ndependency:\n  name: galaxy\ndriver:\n  name: docker\nplatforms:\n  - name: nginx-ubuntu\n    image: ubuntu:22.04\n    pre_build_image: true\n    privileged: true\n    volumes:\n      - /sys/fs/cgroup:/sys/fs/cgroup:ro\n    command: /lib/systemd/systemd\n    networks:\n      - name: molecule\n  - name: nginx-centos\n    image: centos:8\n    pre_build_image: true\n    privileged: true\n    volumes:\n      - /sys/fs/cgroup:/sys/fs/cgroup:ro\n    command: /usr/sbin/init\n    networks:\n      - name: molecule\nprovisioner:\n  name: ansible\n  config_options:\n    defaults:\n      callbacks_enabled: profile_tasks,timer,yaml\n  inventory:\n    host_vars:\n      nginx-ubuntu:\n        ansible_python_interpreter: /usr/bin/python3\n      nginx-centos:\n        ansible_python_interpreter: /usr/bin/python3\nverifier:\n  name: ansible\nlint: |\n  set -e\n  yamllint .\n  ansible-lint\n  flake8\nEOF\n\n# Create test playbook\ncat > molecule/default/converge.yml <<EOF\n---\n- name: Converge\n  hosts: all\n  become: true\n  tasks:\n    - name: \"Include nginx role\"\n      include_role:\n        name: nginx\n      vars:\n        nginx_vhosts:\n          - name: default\n            server_name: localhost\n            listen: 80\n            root: /var/www/html\n            enabled: true\nEOF\n\n# Create test verification\ncat > molecule/default/verify.yml <<EOF\n---\n- name: Verify\n  hosts: all\n  gather_facts: false\n  tasks:\n    - name: Check if NGINX is running\n      uri:\n        url: http://localhost\n        method: GET\n      register: nginx_check\n\n    - name: Verify NGINX is responding\n      assert:\n        that:\n          - nginx_check.status == 200\n        fail_msg: \"NGINX is not responding correctly\"\n\n    - name: Check NGINX configuration\n      shell: nginx -t\n      changed_when: false\n\n    - name: Verify NGINX process\n      shell: pgrep nginx\n      changed_when: false\nEOF\n\n# Run tests\nmolecule test\n```\n\n### Ansible Lint and Security Scanning\n```bash\n# Install Ansible Lint\npip install ansible-lint\n\n# Create .ansible-lint configuration\ncat > .ansible-lint <<EOF\n---\nprofile: production\n\nexclude_paths:\n  - .cache/\n  - .github/\n  - molecule/\n  - .venv/\n\nskip_list:\n  - yaml[line-length]  # Allow longer lines for readability\n\nwarn_list:\n  - experimental  # Warn about experimental features\n\n# Custom rules\nrules:\n  braces:\n    min-spaces-inside: 0\n    max-spaces-inside: 1\n  brackets:\n    min-spaces-inside: 0\n    max-spaces-inside: 0\n  colons:\n    max-spaces-before: 0\n    min-spaces-after: 1\n    max-spaces-after: 1\n  commas:\n    max-spaces-before: 0\n    min-spaces-after: 1\n    max-spaces-after: 1\n  comments:\n    min-spaces-from-content: 1\n  document-start: disable\n  empty-lines:\n    max: 2\n    max-start: 0\n    max-end: 1\n  hyphens:\n    max-spaces-after: 1\n  indentation:\n    spaces: 2\n    indent-sequences: true\n  line-length:\n    max: 120\n  new-line-at-end-of-file: enable\n  trailing-spaces: enable\n  truthy:\n    allowed-values: ['true', 'false', 'yes', 'no']\nEOF\n\n# Create security-focused playbook linting\ncat > .yamllint <<EOF\n---\nextends: default\n\nrules:\n  braces:\n    min-spaces-inside: 0\n    max-spaces-inside: 1\n  brackets:\n    min-spaces-inside: 0\n    max-spaces-inside: 0\n  colons:\n    max-spaces-before: 0\n    min-spaces-after: 1\n    max-spaces-after: 1\n  commas:\n    max-spaces-before: 0\n    min-spaces-after: 1\n    max-spaces-after: 1\n  comments: disable\n  comments-indentation: disable\n  document-start: disable\n  empty-lines:\n    max: 2\n    max-start: 0\n    max-end: 1\n  hyphens:\n    max-spaces-after: 1\n  indentation:\n    spaces: 2\n    indent-sequences: true\n    check-multi-line-strings: false\n  key-duplicates: enable\n  line-length:\n    max: 120\n  new-line-at-end-of-file: enable\n  octal-values:\n    forbid-implicit-octal: true\n  trailing-spaces: enable\n  truthy: disable\nEOF\n\n# Run linting\nansible-lint playbooks/\nyamllint .\n```\n\n## Backup and Disaster Recovery\n\n### Comprehensive Backup Automation\n```bash\ncat > playbooks/backup-automation.yml <<EOF\n---\n- name: Automated Backup System\n  hosts: all\n  become: yes\n  vars:\n    backup_root: /backup\n    backup_retention_days: 30\n    backup_schedule:\n      databases: \"0 2 * * *\"\n      files: \"0 3 * * *\"\n      configs: \"0 4 * * *\"\n\n  tasks:\n    - name: Create backup directories\n      file:\n        path: \"{{ backup_root }}/{{ item }}\"\n        state: directory\n        mode: '0755'\n        owner: root\n        group: root\n      loop:\n        - databases\n        - files\n        - configs\n        - logs\n\n    # Database backups\n    - name: Create database backup script\n      template:\n        src: templates/mysql-backup.sh.j2\n        dest: /usr/local/bin/mysql-backup.sh\n        mode: '0755'\n      when: \"'dbservers' in group_names\"\n\n    - name: Schedule database backups\n      cron:\n        name: \"MySQL backup\"\n        minute: \"0\"\n        hour: \"2\"\n        job: \"/usr/local/bin/mysql-backup.sh\"\n        user: root\n      when: \"'dbservers' in group_names\"\n\n    # File system backups\n    - name: Create file backup script\n      template:\n        src: templates/file-backup.sh.j2\n        dest: /usr/local/bin/file-backup.sh\n        mode: '0755'\n\n    - name: Schedule file backups\n      cron:\n        name: \"File system backup\"\n        minute: \"0\"\n        hour: \"3\"\n        job: \"/usr/local/bin/file-backup.sh\"\n        user: root\n\n    # Configuration backups\n    - name: Backup system configurations\n      archive:\n        path:\n          - /etc/nginx\n          - /etc/mysql\n          - /etc/systemd/system\n          - /etc/crontab\n          - /etc/hosts\n          - /etc/fstab\n        dest: \"{{ backup_root }}/configs/system-config-{{ ansible_date_time.epoch }}.tar.gz\"\n        mode: '0600'\n\n    # Remote backup synchronization\n    - name: Synchronize backups to remote storage\n      synchronize:\n        src: \"{{ backup_root }}/\"\n        dest: \"backup-server.example.com:{{ backup_root }}/{{ inventory_hostname }}/\"\n        delete: yes\n        rsync_opts:\n          - \"--exclude=*.tmp\"\n          - \"--compress\"\n          - \"--archive\"\n      when: backup_remote_sync | default(true)\n\n    # Cleanup old backups\n    - name: Clean up old backup files\n      find:\n        paths: \"{{ backup_root }}\"\n        age: \"{{ backup_retention_days }}d\"\n        file_type: file\n      register: old_backups\n\n    - name: Remove old backup files\n      file:\n        path: \"{{ item.path }}\"\n        state: absent\n      loop: \"{{ old_backups.files }}\"\nEOF\n```\n\n## Verification and Monitoring\n\n### Cross-Platform System Verification\n```bash\n# Create comprehensive verification playbook\ncat > playbooks/system-verification.yml <<EOF\n---\n- name: System Verification and Health Check\n  hosts: all\n  become: yes\n  gather_facts: yes\n  vars:\n    health_checks:\n      - service: nginx\n        port: 80\n        process: nginx\n      - service: mysql\n        port: 3306\n        process: mysqld\n      - service: redis\n        port: 6379\n        process: redis-server\n\n  tasks:\n    # System information gathering\n    - name: Gather system information\n      setup:\n        gather_subset:\n          - all\n          - !facter\n          - !ohai\n\n    # Service verification\n    - name: Check critical services status\n      service_facts:\n\n    - name: Verify services are running\n      assert:\n        that:\n          - \"ansible_facts.services[item.service + '.service'].state == 'running'\"\n        fail_msg: \"Service {{ item.service }} is not running\"\n        success_msg: \"Service {{ item.service }} is healthy\"\n      loop: \"{{ health_checks }}\"\n      when: \"item.service + '.service' in ansible_facts.services\"\n\n    # Network connectivity tests\n    - name: Test network connectivity\n      wait_for:\n        host: \"{{ item.host }}\"\n        port: \"{{ item.port }}\"\n        timeout: 5\n      loop:\n        - { host: \"8.8.8.8\", port: 53 }\n        - { host: \"1.1.1.1\", port: 53 }\n      ignore_errors: yes\n\n    # Disk space monitoring\n    - name: Check disk space usage\n      shell: df -h | awk '$5 > \"85%\" {print $0}'\n      register: disk_usage\n      changed_when: false\n      failed_when: disk_usage.stdout != \"\"\n\n    # Memory usage check\n    - name: Check memory usage\n      shell: free | grep Mem | awk '{printf \"%.0f\", $3/$2 * 100.0}'\n      register: memory_usage\n      changed_when: false\n\n    - name: Alert on high memory usage\n      debug:\n        msg: \"WARNING: Memory usage is {{ memory_usage.stdout }}%\"\n      when: memory_usage.stdout | int > 85\n\n    # Security verification\n    - name: Check for failed login attempts\n      shell: grep \"Failed password\" /var/log/auth.log | tail -10\n      register: failed_logins\n      changed_when: false\n      ignore_errors: yes\n      when: ansible_os_family == \"Debian\"\n\n    - name: Check firewall status\n      shell: |\n        if command -v ufw >/dev/null 2>&1; then\n          ufw status\n        elif command -v firewall-cmd >/dev/null 2>&1; then\n          firewall-cmd --state\n        else\n          echo \"No supported firewall found\"\n        fi\n      register: firewall_status\n      changed_when: false\n\n  post_tasks:\n    - name: Generate system health report\n      template:\n        src: templates/health-report.j2\n        dest: \"/tmp/health-report-{{ inventory_hostname }}-{{ ansible_date_time.epoch }}.txt\"\n        mode: '0644'\n\n    - name: Fetch health reports\n      fetch:\n        src: \"/tmp/health-report-{{ inventory_hostname }}-{{ ansible_date_time.epoch }}.txt\"\n        dest: \"./reports/\"\n        flat: yes\nEOF\n```\n\n### Continuous Compliance Monitoring\n```bash\ncat > playbooks/compliance-monitoring.yml <<EOF\n---\n- name: Continuous Compliance Monitoring\n  hosts: all\n  become: yes\n  vars:\n    compliance_standards:\n      - cis\n      - pci_dss\n      - soc2\n      - hipaa\n    \n    audit_log_paths:\n      - /var/log/auth.log\n      - /var/log/syslog\n      - /var/log/audit/audit.log\n\n  tasks:\n    # Install audit tools\n    - name: Install audit daemon\n      package:\n        name: \"{{ 'auditd' if ansible_os_family == 'RedHat' else 'auditd' }}\"\n        state: present\n\n    - name: Configure audit rules\n      template:\n        src: templates/audit.rules.j2\n        dest: /etc/audit/rules.d/audit.rules\n        backup: yes\n      notify: restart auditd\n\n    # CIS compliance checks\n    - name: Run CIS benchmark checks\n      shell: |\n        if [ -f /opt/cis-cat/CIS-CAT.sh ]; then\n          /opt/cis-cat/CIS-CAT.sh -b /opt/cis-cat/benchmarks/\n        else\n          echo \"CIS-CAT not installed, skipping\"\n        fi\n      register: cis_results\n      ignore_errors: yes\n\n    # File integrity monitoring\n    - name: Install AIDE\n      package:\n        name: aide\n        state: present\n\n    - name: Initialize AIDE database\n      shell: |\n        aide --init\n        mv /var/lib/aide/aide.db.new /var/lib/aide/aide.db\n      args:\n        creates: /var/lib/aide/aide.db\n\n    - name: Schedule AIDE integrity checks\n      cron:\n        name: \"AIDE integrity check\"\n        minute: \"0\"\n        hour: \"3\"\n        job: \"/usr/bin/aide --check | mail -s 'AIDE Report' security@example.com\"\n        user: root\n\n    # Log monitoring\n    - name: Install log monitoring tools\n      package:\n        name:\n          - logwatch\n          - rsyslog\n        state: present\n\n    - name: Configure centralized logging\n      template:\n        src: templates/rsyslog.conf.j2\n        dest: /etc/rsyslog.conf\n        backup: yes\n      notify: restart rsyslog\n\n  handlers:\n    - name: restart auditd\n      service:\n        name: auditd\n        state: restarted\n\n    - name: restart rsyslog\n      service:\n        name: rsyslog\n        state: restarted\nEOF\n```\n\n## CI/CD Integration\n\n### Jenkins Pipeline Integration\n```bash\n# Create Jenkinsfile for Ansible automation\ncat > Jenkinsfile <<EOF\npipeline {\n    agent any\n    \n    environment {\n        ANSIBLE_CONFIG = 'ansible.cfg'\n        ANSIBLE_HOST_KEY_CHECKING = 'False'\n    }\n    \n    stages {\n        stage('Lint') {\n            steps {\n                sh 'ansible-lint playbooks/'\n                sh 'yamllint .'\n            }\n        }\n        \n        stage('Syntax Check') {\n            steps {\n                sh 'ansible-playbook playbooks/site.yml --syntax-check'\n            }\n        }\n        \n        stage('Dry Run') {\n            steps {\n                sh 'ansible-playbook playbooks/site.yml --check --diff'\n            }\n        }\n        \n        stage('Deploy to Staging') {\n            when {\n                branch 'develop'\n            }\n            steps {\n                sh 'ansible-playbook -i inventories/staging playbooks/site.yml'\n            }\n        }\n        \n        stage('Deploy to Production') {\n            when {\n                branch 'main'\n            }\n            steps {\n                input 'Deploy to Production?'\n                sh 'ansible-playbook -i inventories/production playbooks/site.yml'\n            }\n        }\n        \n        stage('Verify Deployment') {\n            steps {\n                sh 'ansible-playbook playbooks/system-verification.yml'\n            }\n        }\n    }\n    \n    post {\n        always {\n            archiveArtifacts artifacts: 'logs/*.log', allowEmptyArchive: true\n            publishHTML([\n                allowMissing: false,\n                alwaysLinkToLastBuild: true,\n                keepAll: true,\n                reportDir: 'reports',\n                reportFiles: '*.html',\n                reportName: 'Ansible Report'\n            ])\n        }\n        failure {\n            emailext (\n                subject: \"Failed Pipeline: ${env.JOB_NAME} - ${env.BUILD_NUMBER}\",\n                body: \"Something is wrong with ${env.BUILD_URL}\",\n                to: \"${env.DEFAULT_RECIPIENTS}\"\n            )\n        }\n    }\n}\nEOF\n```\n\n### GitLab CI Integration\n```bash\ncat > .gitlab-ci.yml <<EOF\nstages:\n  - lint\n  - test\n  - deploy-staging\n  - deploy-production\n\nvariables:\n  ANSIBLE_CONFIG: ansible.cfg\n  ANSIBLE_HOST_KEY_CHECKING: \"False\"\n\nbefore_script:\n  - pip install ansible ansible-lint yamllint\n  - ansible-galaxy install -r requirements.yml\n\nlint:\n  stage: lint\n  script:\n    - ansible-lint playbooks/\n    - yamllint .\n  rules:\n    - if: '$CI_MERGE_REQUEST_IID'\n    - if: '$CI_COMMIT_BRANCH == $CI_DEFAULT_BRANCH'\n\nsyntax-check:\n  stage: test\n  script:\n    - ansible-playbook playbooks/site.yml --syntax-check\n    - ansible-playbook playbooks/site.yml --check --diff -i inventories/staging\n  rules:\n    - if: '$CI_MERGE_REQUEST_IID'\n    - if: '$CI_COMMIT_BRANCH == $CI_DEFAULT_BRANCH'\n\ndeploy-staging:\n  stage: deploy-staging\n  script:\n    - ansible-playbook -i inventories/staging playbooks/site.yml\n  rules:\n    - if: '$CI_COMMIT_BRANCH == \"develop\"'\n\ndeploy-production:\n  stage: deploy-production\n  script:\n    - ansible-playbook -i inventories/production playbooks/site.yml\n  rules:\n    - if: '$CI_COMMIT_BRANCH == $CI_DEFAULT_BRANCH'\n      when: manual\n  environment:\n    name: production\n    url: https://production.example.com\nEOF\n```\n\n## Troubleshooting (Cross-Platform)\n\n### Common Issues and Solutions\n```bash\n# Debug connection issues\nansible all -m ping -vvv\n\n# Check SSH connectivity\nansible all -m setup --ask-pass --ask-become-pass\n\n# Verify inventory\nansible-inventory --list\nansible-inventory --graph\n\n# Test specific host\nansible target-host -m command -a \"uptime\"\n\n# Check syntax without execution\nansible-playbook playbooks/site.yml --syntax-check\n\n# Dry run with verbose output\nansible-playbook playbooks/site.yml --check --diff -vvv\n\n# Debug variable resolution\nansible-playbook playbooks/site.yml --extra-vars=\"debug=true\" --tags debug\n\n# Check facts\nansible all -m setup | grep ansible_os_family\n\n# Connection troubleshooting\nssh -vvv user@target-host\n\n# Permission issues\nansible all -m file -a \"path=/tmp/test state=touch\" --become\n\n# Vault issues\nansible-vault view group_vars/all/vault.yml\n\n# Performance debugging\nansible-playbook playbooks/site.yml --start-at-task=\"specific task name\"\nansible-playbook playbooks/site.yml --step\n\n# Module testing\nansible localhost -m debug -a \"var=hostvars\"\nansible localhost -m setup\n\n# Check for syntax errors in roles\nfind roles/ -name \"*.yml\" -exec ansible-playbook {} --syntax-check \\;\n```\n\n### Advanced Debugging\n```bash\n# Enable comprehensive logging\nexport ANSIBLE_DEBUG=1\nexport ANSIBLE_VERBOSITY=4\nansible-playbook playbooks/site.yml\n\n# Profile playbook execution\nansible-playbook playbooks/site.yml --extra-vars=\"profile_tasks_sort_order=none\"\n\n# Memory usage analysis\nansible-playbook playbooks/site.yml --extra-vars=\"ansible_python_interpreter=/usr/bin/python3\"\n\n# Network debugging\nansible all -m command -a \"ss -tulpn\"\nansible all -m command -a \"netstat -rn\"\n\n# Process debugging\nansible all -m command -a \"ps aux --sort=-%mem | head -10\"\n\n# Disk usage analysis\nansible all -m command -a \"df -h\"\nansible all -m command -a \"du -sh /var/log/*\"\n\n# Service debugging\nansible all -m systemd -a \"name=nginx\" --become\nansible all -m command -a \"systemctl status nginx\" --become\n\n# Variable debugging\nansible-playbook playbooks/site.yml --extra-vars=\"debug_vars=true\" --tags debug_vars\n```\n\n## Additional Resources\n\n- [Official Documentation](https://docs.ansible.com/)\n- [Ansible Galaxy](https://galaxy.ansible.com/)\n- [Best Practices Guide](https://docs.ansible.com/ansible/latest/user_guide/playbooks_best_practices.html)\n- [Security Best Practices](https://docs.ansible.com/ansible/latest/user_guide/become.html#security-best-practices)\n- [Ansible Molecule Testing](https://molecule.readthedocs.io/)\n- [Community Collections](https://docs.ansible.com/ansible/latest/collections/index.html)\n\n---\n\n**Note:** This guide is part of the [HowToMgr](https://howtomgr.github.io) collection.","readmeHtml":"<h1 id=\"ansible-installation-guide\" class=\"mobile-header\">Ansible Installation Guide</h1>\n<p class=\"mobile-paragraph\">Agentless automation platform for configuration management, application deployment, and task automation across multiple systems. Industry standard for infrastructure automation with enterprise-grade security.</p>\n<h2 id=\"prerequisites\" class=\"mobile-header\">Prerequisites</h2>\n<li class=\"mobile-list-item\">Linux control machine (any modern distribution)</li>\n<li class=\"mobile-list-item\">Python 3.8+ on control machine</li>\n<li class=\"mobile-list-item\">SSH access to target hosts</li>\n<li class=\"mobile-list-item\">Python 2.7+ or 3.5+ on target hosts</li>\n<li class=\"mobile-list-item\">2GB RAM minimum, 4GB+ recommended for large infrastructures</li>\n<h2 id=\"installation\" class=\"mobile-header\">Installation</h2>\n<h3 id=\"using-package-manager-recommended\" class=\"mobile-header\">Using Package Manager (Recommended)</h3>\n<p class=\"mobile-paragraph\">#### Ubuntu/Debian</p>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Update package list\nsudo apt update\n\n# Install Ansible and dependencies\nsudo apt install -y ansible python3-pip python3-venv sshpass\n\n# Install additional collections\nansible-galaxy collection install community.general\nansible-galaxy collection install ansible.posix\nansible-galaxy collection install kubernetes.core\nansible-galaxy collection install amazon.aws\nansible-galaxy collection install azure.azcollection\nansible-galaxy collection install google.cloud\n\n# Verify installation\nansible --version\nansible-galaxy collection list</code></pre>\n      </div>\n    </div>\n<p class=\"mobile-paragraph\">#### RHEL/CentOS/Rocky Linux/AlmaLinux</p>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Install EPEL repository\nsudo yum install -y epel-release\n\n# Install Ansible\nsudo yum install -y ansible python3-pip\n\n# For newer distributions\nsudo dnf install -y ansible python3-pip\n\n# Install collections\nansible-galaxy collection install community.general\nansible-galaxy collection install ansible.posix\nansible-galaxy collection install kubernetes.core\n\n# Verify installation\nansible --version</code></pre>\n      </div>\n    </div>\n<p class=\"mobile-paragraph\">#### Fedora</p>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Install Ansible\nsudo dnf install -y ansible python3-pip python3-virtualenv\n\n# Install additional collections\nansible-galaxy collection install community.general\nansible-galaxy collection install ansible.posix\nansible-galaxy collection install kubernetes.core\n\n# Verify installation\nansible --version</code></pre>\n      </div>\n    </div>\n<p class=\"mobile-paragraph\">#### Arch Linux</p>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Install Ansible\nsudo pacman -Syu ansible python-pip\n\n# Install collections\nansible-galaxy collection install community.general\nansible-galaxy collection install ansible.posix\n\n# Verify installation\nansible --version</code></pre>\n      </div>\n    </div>\n<p class=\"mobile-paragraph\">#### Alpine Linux</p>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Install Ansible\nsudo apk update\nsudo apk add ansible python3 py3-pip openssh\n\n# Install collections\nansible-galaxy collection install community.general\n\n# Verify installation\nansible --version</code></pre>\n      </div>\n    </div>\n<h3 id=\"using-pip-latest-version\" class=\"mobile-header\">Using pip (Latest Version)</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Create virtual environment (recommended)\npython3 -m venv ~/ansible-venv\nsource ~/ansible-venv/bin/activate\n\n# Install Ansible via pip\npip install --upgrade pip\npip install ansible ansible-core\n\n# Install additional packages\npip install paramiko jinja2 PyYAML cryptography\n\n# Install cloud provider SDKs\npip install boto3 botocore azure-cli google-cloud-storage\n\n# Install collections\nansible-galaxy collection install community.general\nansible-galaxy collection install ansible.posix\nansible-galaxy collection install kubernetes.core\nansible-galaxy collection install amazon.aws\nansible-galaxy collection install azure.azcollection\nansible-galaxy collection install google.cloud\n\n# Add to PATH permanently\necho &#039;source ~/ansible-venv/bin/activate&#039; &gt;&gt; ~/.bashrc\n\n# Verify installation\nansible --version</code></pre>\n      </div>\n    </div>\n<h3 id=\"using-docker\" class=\"mobile-header\">Using Docker</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Create Ansible Docker container with mounted volumes\ndocker run --rm -it \\\n  -v $(pwd):/ansible \\\n  -v ~/.ssh:/root/.ssh:ro \\\n  -v ~/.aws:/root/.aws:ro \\\n  -v ~/.azure:/root/.azure:ro \\\n  --workdir /ansible \\\n  ansible/ansible:latest\n\n# Create wrapper script for ease of use\nsudo tee /usr/local/bin/ansible-docker &gt; /dev/null &lt;&lt;&#039;EOF&#039;\n#!/bin/bash\ndocker run --rm -it \\\n  -v $(pwd):/ansible \\\n  -v ~/.ssh:/root/.ssh:ro \\\n  -v ~/.aws:/root/.aws:ro \\\n  -v ~/.azure:/root/.azure:ro \\\n  -v ~/.kube:/root/.kube:ro \\\n  --workdir /ansible \\\n  --network host \\\n  ansible/ansible:latest &quot;$@&quot;\nEOF\nsudo chmod +x /usr/local/bin/ansible-docker\n\n# Create aliases\necho &#039;alias ansible=&quot;ansible-docker ansible&quot;&#039; &gt;&gt; ~/.bashrc\necho &#039;alias ansible-playbook=&quot;ansible-docker ansible-playbook&quot;&#039; &gt;&gt; ~/.bashrc</code></pre>\n      </div>\n    </div>\n<h2 id=\"project-structure-and-configuration\" class=\"mobile-header\">Project Structure and Configuration</h2>\n<h3 id=\"professional-project-structure\" class=\"mobile-header\">Professional Project Structure</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Create comprehensive Ansible project structure\nmkdir -p ~/ansible-infrastructure/{\n  inventories/{production,staging,development},\n  playbooks,\n  roles,\n  group_vars,\n  host_vars,\n  library,\n  filter_plugins,\n  callback_plugins,\n  vault,\n  collections,\n  logs\n}\n\ncd ~/ansible-infrastructure\n\n# Create ansible.cfg with security best practices\ncat &gt; ansible.cfg &lt;&lt;EOF\n[defaults]\ninventory = inventories/production/hosts.yml\nremote_user = ansible\nprivate_key_file = ~/.ssh/ansible_key\nhost_key_checking = True\ntimeout = 30\nretry_files_enabled = False\nstdout_callback = yaml\nbin_ansible_callbacks = True\ngathering = smart\nfact_caching = jsonfile\nfact_caching_connection = ~/.ansible/facts_cache\nfact_caching_timeout = 86400\ninterpreter_python = auto_silent\nvault_password_file = ~/.ansible_vault_pass\n\n# Logging\nlog_path = logs/ansible.log\ndisplay_skipped_hosts = False\ndisplay_ok_hosts = False\n\n# Performance\nforks = 20\npoll_interval = 15\ninternal_poll_interval = 0.001\n\n# Security\ncommand_warnings = True\ndeprecation_warnings = True\naction_warnings = True\nlocalhost_warning = True\n\n[ssh_connection]\nssh_args = -o ControlMaster=auto -o ControlPersist=3600s -o PreferredAuthentications=publickey\npipelining = True\ncontrol_path = ~/.ansible/cp/%%h-%%p-%%r\nretries = 3\n\n[privilege_escalation]\nbecome = False\nbecome_method = sudo\nbecome_user = root\nbecome_ask_pass = False\n\n[inventory]\nenable_plugins = host_list, script, auto, yaml, ini, toml\ncache = True\ncache_plugin = jsonfile\ncache_timeout = 3600\ncache_connection = ~/.ansible/inventory_cache\n\n[galaxy]\nserver_list = automation_hub, galaxy\nEOF</code></pre>\n      </div>\n    </div>\n<h3 id=\"advanced-inventory-management\" class=\"mobile-header\">Advanced Inventory Management</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Create production inventory with groups and variables\ncat &gt; inventories/production/hosts.yml &lt;&lt;EOF\nall:\n  children:\n    webservers:\n      hosts:\n        web-prod-01:\n          ansible_host: 10.0.1.10\n          ansible_user: ansible\n          server_role: frontend\n          backup_enabled: true\n        web-prod-02:\n          ansible_host: 10.0.1.11\n          ansible_user: ansible\n          server_role: frontend\n          backup_enabled: true\n        web-prod-03:\n          ansible_host: 10.0.1.12\n          ansible_user: ansible\n          server_role: frontend\n          backup_enabled: true\n      vars:\n        http_port: 80\n        https_port: 443\n        max_clients: 200\n        environment: production\n        monitoring_enabled: true\n\n    dbservers:\n      hosts:\n        db-prod-01:\n          ansible_host: 10.0.2.10\n          ansible_user: ansible\n          mysql_server_id: 1\n          mysql_role: master\n        db-prod-02:\n          ansible_host: 10.0.2.11\n          ansible_user: ansible\n          mysql_server_id: 2\n          mysql_role: slave\n      vars:\n        mysql_port: 3306\n        mysql_root_password: &quot;{{ vault_mysql_root_password }}&quot;\n        mysql_replication_user: &quot;{{ vault_mysql_replication_user }}&quot;\n        mysql_replication_password: &quot;{{ vault_mysql_replication_password }}&quot;\n\n    loadbalancers:\n      hosts:\n        lb-prod-01:\n          ansible_host: 10.0.3.10\n          ansible_user: ansible\n          lb_algorithm: roundrobin\n        lb-prod-02:\n          ansible_host: 10.0.3.11\n          ansible_user: ansible\n          lb_algorithm: roundrobin\n      vars:\n        haproxy_stats_enabled: true\n        haproxy_stats_user: admin\n        haproxy_stats_password: &quot;{{ vault_haproxy_stats_password }}&quot;\n\n    monitoring:\n      hosts:\n        monitor-prod-01:\n          ansible_host: 10.0.4.10\n          ansible_user: ansible\n          prometheus_retention: 30d\n          grafana_admin_password: &quot;{{ vault_grafana_admin_password }}&quot;\n\n    bastion:\n      hosts:\n        bastion-prod-01:\n          ansible_host: bastion.example.com\n          ansible_user: ansible\n          ansible_port: 22\n\n# Global variables for all hosts\nwebservers:\n  vars:\n    nginx_worker_processes: auto\n    nginx_worker_connections: 1024\n    ssl_certificate_path: /etc/ssl/certs\n    backup_schedule: &quot;0 2 * * *&quot;\n\ndbservers:\n  vars:\n    mysql_innodb_buffer_pool_size: 2G\n    mysql_max_connections: 200\n    backup_schedule: &quot;0 1 * * *&quot;\n    monitoring_enabled: true\nEOF\n\n# Create dynamic inventory script for cloud environments\ncat &gt; inventories/production/aws_ec2.yml &lt;&lt;EOF\nplugin: amazon.aws.aws_ec2\nregions:\n  - us-west-2\n  - us-east-1\nfilters:\n  tag:Environment: production\n  tag:Ansible: managed\n  instance-state-name: running\n\nhostnames:\n  - tag:Name\n  - dns-name\n  - private-ip-address\n\ncompose:\n  ansible_host: private_ip_address\n  ec2_state: ec2_state_name\n  ec2_arch: ec2_architecture\n\ngroups:\n  # Group by instance type\n  webservers: &quot;&#039;web&#039; in tags.Role&quot;\n  databases: &quot;&#039;db&#039; in tags.Role&quot;\n  loadbalancers: &quot;&#039;lb&#039; in tags.Role&quot;\n  \n  # Group by environment\n  production: &quot;tags.Environment == &#039;production&#039;&quot;\n  staging: &quot;tags.Environment == &#039;staging&#039;&quot;\n  \n  # Group by availability zone\n  us_west_2a: ec2_placement_availability_zone == &quot;us-west-2a&quot;\n  us_west_2b: ec2_placement_availability_zone == &quot;us-west-2b&quot;\n\nkeyed_groups:\n  # Create groups based on tags\n  - key: tags.Environment\n    prefix: env\n  - key: tags.Role  \n    prefix: role\n  - key: ec2_instance_type\n    prefix: type\nEOF</code></pre>\n      </div>\n    </div>\n<h3 id=\"ansible-vault-security\" class=\"mobile-header\">Ansible Vault Security</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Create strong vault password\nopenssl rand -base64 32 &gt; ~/.ansible_vault_pass\nchmod 600 ~/.ansible_vault_pass\n\n# Create encrypted vault file for secrets\nansible-vault create group_vars/all/vault.yml\n# Enter secure passwords and API keys:\n# vault_mysql_root_password: your_secure_mysql_password\n# vault_grafana_admin_password: your_secure_grafana_password  \n# vault_ssl_private_key: |\n#   -----BEGIN PRIVATE KEY-----\n#   your_private_key_content\n#   -----END PRIVATE KEY-----\n\n# Create non-encrypted variables file\ncat &gt; group_vars/all/vars.yml &lt;&lt;EOF\n# Non-sensitive variables\nmysql_port: 3306\nnginx_port: 80\ngrafana_port: 3000\nprometheus_port: 9090\n\n# Reference vault variables\nmysql_root_password: &quot;{{ vault_mysql_root_password }}&quot;\ngrafana_admin_password: &quot;{{ vault_grafana_admin_password }}&quot;\n\n# SSL configuration\nssl_certificate_path: /etc/ssl/certs/server.crt\nssl_private_key_path: /etc/ssl/private/server.key\nssl_private_key_content: &quot;{{ vault_ssl_private_key }}&quot;\n\n# Security settings\nansible_ssh_common_args: &#039;-o StrictHostKeyChecking=yes -o UserKnownHostsFile=~/.ssh/known_hosts&#039;\nansible_become_method: sudo\nansible_become_user: root\nEOF\n\n# Edit vault file\nansible-vault edit group_vars/all/vault.yml\n\n# View vault file (read-only)\nansible-vault view group_vars/all/vault.yml\n\n# Change vault password\nansible-vault rekey group_vars/all/vault.yml</code></pre>\n      </div>\n    </div>\n<h2 id=\"comprehensive-playbooks\" class=\"mobile-header\">Comprehensive Playbooks</h2>\n<h3 id=\"system-hardening-playbook\" class=\"mobile-header\">System Hardening Playbook</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\">cat &gt; playbooks/system-hardening.yml &lt;&lt;EOF\n---\n- name: System Security Hardening\n  hosts: all\n  become: yes\n  gather_facts: yes\n  vars:\n    security_packages:\n      - fail2ban\n      - ufw\n      - aide\n      - chkrootkit\n      - rkhunter\n      - clamav\n      - lynis\n    \n    disabled_services:\n      - telnet\n      - rsh\n      - rlogin\n      - tftp\n      - talk\n      - finger\n\n  pre_tasks:\n    - name: Update package cache\n      package:\n        update_cache: yes\n        cache_valid_time: 3600\n      when: ansible_os_family in [&quot;Debian&quot;, &quot;RedHat&quot;]\n\n  tasks:\n    # System updates\n    - name: Upgrade all packages\n      package:\n        name: &quot;*&quot;\n        state: latest\n      when: ansible_os_family == &quot;RedHat&quot;\n\n    - name: Upgrade all packages (Debian/Ubuntu)\n      apt:\n        upgrade: dist\n        autoremove: yes\n        autoclean: yes\n      when: ansible_os_family == &quot;Debian&quot;\n\n    # Install security packages\n    - name: Install security packages\n      package:\n        name: &quot;{{ security_packages }}&quot;\n        state: present\n\n    # User security\n    - name: Create ansible user with limited privileges\n      user:\n        name: ansible\n        groups: sudo\n        shell: /bin/bash\n        create_home: yes\n        generate_ssh_key: yes\n        ssh_key_bits: 4096\n        ssh_key_type: rsa\n\n    - name: Configure sudo for ansible user\n      lineinfile:\n        path: /etc/sudoers.d/ansible\n        line: &#039;ansible ALL=(ALL) NOPASSWD:ALL&#039;\n        create: yes\n        mode: &#039;0440&#039;\n        validate: &#039;visudo -cf %s&#039;\n\n    # SSH hardening\n    - name: Configure SSH security\n      lineinfile:\n        path: /etc/ssh/sshd_config\n        regexp: &quot;{{ item.regexp }}&quot;\n        line: &quot;{{ item.line }}&quot;\n        backup: yes\n      loop:\n        - { regexp: &#039;^#?PermitRootLogin&#039;, line: &#039;PermitRootLogin no&#039; }\n        - { regexp: &#039;^#?PasswordAuthentication&#039;, line: &#039;PasswordAuthentication no&#039; }\n        - { regexp: &#039;^#?X11Forwarding&#039;, line: &#039;X11Forwarding no&#039; }\n        - { regexp: &#039;^#?MaxAuthTries&#039;, line: &#039;MaxAuthTries 3&#039; }\n        - { regexp: &#039;^#?ClientAliveInterval&#039;, line: &#039;ClientAliveInterval 300&#039; }\n        - { regexp: &#039;^#?ClientAliveCountMax&#039;, line: &#039;ClientAliveCountMax 0&#039; }\n        - { regexp: &#039;^#?Protocol&#039;, line: &#039;Protocol 2&#039; }\n        - { regexp: &#039;^#?LogLevel&#039;, line: &#039;LogLevel VERBOSE&#039; }\n      notify: restart ssh\n\n    # Firewall configuration\n    - name: Configure UFW firewall (Debian/Ubuntu)\n      ufw:\n        state: enabled\n        policy: deny\n        direction: incoming\n      when: ansible_os_family == &quot;Debian&quot;\n\n    - name: Allow SSH through UFW\n      ufw:\n        rule: allow\n        port: 22\n        proto: tcp\n        comment: &#039;SSH access&#039;\n      when: ansible_os_family == &quot;Debian&quot;\n\n    - name: Configure firewalld (RHEL/CentOS/Fedora)\n      firewalld:\n        state: enabled\n        permanent: yes\n        immediate: yes\n      when: ansible_os_family == &quot;RedHat&quot;\n\n    - name: Allow SSH through firewalld\n      firewalld:\n        service: ssh\n        permanent: yes\n        state: enabled\n        immediate: yes\n      when: ansible_os_family == &quot;RedHat&quot;\n\n    # Disable unnecessary services\n    - name: Disable unnecessary services\n      systemd:\n        name: &quot;{{ item }}&quot;\n        enabled: no\n        state: stopped\n      loop: &quot;{{ disabled_services }}&quot;\n      ignore_errors: yes\n\n    # File system security\n    - name: Set proper permissions on sensitive files\n      file:\n        path: &quot;{{ item.path }}&quot;\n        mode: &quot;{{ item.mode }}&quot;\n        owner: root\n        group: root\n      loop:\n        - { path: &#039;/etc/passwd&#039;, mode: &#039;0644&#039; }\n        - { path: &#039;/etc/shadow&#039;, mode: &#039;0640&#039; }\n        - { path: &#039;/etc/group&#039;, mode: &#039;0644&#039; }\n        - { path: &#039;/etc/gshadow&#039;, mode: &#039;0640&#039; }\n        - { path: &#039;/etc/ssh/sshd_config&#039;, mode: &#039;0600&#039; }\n\n    # Kernel security parameters\n    - name: Configure kernel security parameters\n      sysctl:\n        name: &quot;{{ item.key }}&quot;\n        value: &quot;{{ item.value }}&quot;\n        sysctl_set: yes\n        state: present\n        reload: yes\n      loop:\n        - { key: &#039;net.ipv4.ip_forward&#039;, value: &#039;0&#039; }\n        - { key: &#039;net.ipv4.conf.all.send_redirects&#039;, value: &#039;0&#039; }\n        - { key: &#039;net.ipv4.conf.default.send_redirects&#039;, value: &#039;0&#039; }\n        - { key: &#039;net.ipv4.conf.all.accept_source_route&#039;, value: &#039;0&#039; }\n        - { key: &#039;net.ipv4.conf.default.accept_source_route&#039;, value: &#039;0&#039; }\n        - { key: &#039;net.ipv4.conf.all.accept_redirects&#039;, value: &#039;0&#039; }\n        - { key: &#039;net.ipv4.conf.default.accept_redirects&#039;, value: &#039;0&#039; }\n        - { key: &#039;net.ipv4.conf.all.secure_redirects&#039;, value: &#039;0&#039; }\n        - { key: &#039;net.ipv4.conf.default.secure_redirects&#039;, value: &#039;0&#039; }\n        - { key: &#039;net.ipv4.conf.all.log_martians&#039;, value: &#039;1&#039; }\n        - { key: &#039;net.ipv4.conf.default.log_martians&#039;, value: &#039;1&#039; }\n        - { key: &#039;kernel.randomize_va_space&#039;, value: &#039;2&#039; }\n\n    # Configure fail2ban\n    - name: Configure fail2ban for SSH protection\n      template:\n        src: templates/fail2ban-jail.local.j2\n        dest: /etc/fail2ban/jail.local\n        backup: yes\n      notify: restart fail2ban\n\n  handlers:\n    - name: restart ssh\n      service:\n        name: &quot;{{ &#039;ssh&#039; if ansible_os_family == &#039;Debian&#039; else &#039;sshd&#039; }}&quot;\n        state: restarted\n\n    - name: restart fail2ban\n      service:\n        name: fail2ban\n        state: restarted\nEOF</code></pre>\n      </div>\n    </div>\n<h3 id=\"application-deployment-playbook\" class=\"mobile-header\">Application Deployment Playbook</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\">cat &gt; playbooks/web-application-deployment.yml &lt;&lt;EOF\n---\n- name: Deploy Web Application Stack\n  hosts: webservers\n  become: yes\n  serial: &quot;25%&quot;  # Rolling deployment\n  max_fail_percentage: 10\n  vars:\n    app_name: mywebapp\n    app_version: &quot;{{ app_version | default(&#039;latest&#039;) }}&quot;\n    app_port: 3000\n    nginx_workers: &quot;{{ ansible_processor_cores }}&quot;\n    \n  pre_tasks:\n    - name: Check if maintenance mode file exists\n      stat:\n        path: /var/www/html/maintenance.html\n      register: maintenance_mode\n\n    - name: Fail if in maintenance mode\n      fail:\n        msg: &quot;Server is in maintenance mode&quot;\n      when: maintenance_mode.stat.exists and not force_deployment | default(false)\n\n  tasks:\n    # Application deployment\n    - name: Create application user\n      user:\n        name: &quot;{{ app_name }}&quot;\n        system: yes\n        shell: /bin/false\n        home: &quot;/opt/{{ app_name }}&quot;\n        create_home: yes\n\n    - name: Create application directories\n      file:\n        path: &quot;{{ item }}&quot;\n        state: directory\n        owner: &quot;{{ app_name }}&quot;\n        group: &quot;{{ app_name }}&quot;\n        mode: &#039;0755&#039;\n      loop:\n        - &quot;/opt/{{ app_name }}&quot;\n        - &quot;/opt/{{ app_name }}/releases&quot;\n        - &quot;/opt/{{ app_name }}/shared&quot;\n        - &quot;/var/log/{{ app_name }}&quot;\n\n    - name: Download application release\n      get_url:\n        url: &quot;https://releases.example.com/{{ app_name }}/{{ app_version }}/{{ app_name }}-{{ app_version }}.tar.gz&quot;\n        dest: &quot;/tmp/{{ app_name }}-{{ app_version }}.tar.gz&quot;\n        mode: &#039;0644&#039;\n        timeout: 300\n      register: download_result\n\n    - name: Extract application\n      unarchive:\n        src: &quot;/tmp/{{ app_name }}-{{ app_version }}.tar.gz&quot;\n        dest: &quot;/opt/{{ app_name }}/releases/&quot;\n        owner: &quot;{{ app_name }}&quot;\n        group: &quot;{{ app_name }}&quot;\n        remote_src: yes\n        creates: &quot;/opt/{{ app_name }}/releases/{{ app_version }}&quot;\n\n    - name: Create symlink to current release\n      file:\n        src: &quot;/opt/{{ app_name }}/releases/{{ app_version }}&quot;\n        dest: &quot;/opt/{{ app_name }}/current&quot;\n        state: link\n        owner: &quot;{{ app_name }}&quot;\n        group: &quot;{{ app_name }}&quot;\n      notify:\n        - reload application\n        - reload nginx\n\n    # Configuration management\n    - name: Deploy application configuration\n      template:\n        src: &quot;templates/{{ app_name }}.conf.j2&quot;\n        dest: &quot;/opt/{{ app_name }}/shared/{{ app_name }}.conf&quot;\n        owner: &quot;{{ app_name }}&quot;\n        group: &quot;{{ app_name }}&quot;\n        mode: &#039;0640&#039;\n        backup: yes\n      notify: reload application\n\n    # Service management\n    - name: Deploy systemd service file\n      template:\n        src: &quot;templates/{{ app_name }}.service.j2&quot;\n        dest: &quot;/etc/systemd/system/{{ app_name }}.service&quot;\n        mode: &#039;0644&#039;\n      notify:\n        - daemon reload\n        - restart application\n\n    - name: Enable and start application service\n      systemd:\n        name: &quot;{{ app_name }}&quot;\n        enabled: yes\n        state: started\n        daemon_reload: yes\n\n    # Health check\n    - name: Wait for application to be ready\n      uri:\n        url: &quot;http://localhost:{{ app_port }}/health&quot;\n        method: GET\n        status_code: 200\n      retries: 30\n      delay: 10\n\n    # Cleanup old releases\n    - name: Clean up old releases (keep last 3)\n      shell: |\n        cd /opt/{{ app_name }}/releases\n        ls -t | tail -n +4 | xargs rm -rf\n      args:\n        executable: /bin/bash\n\n  post_tasks:\n    - name: Verify application is running\n      uri:\n        url: &quot;http://{{ ansible_default_ipv4.address }}:{{ app_port }}/health&quot;\n        method: GET\n        status_code: 200\n      delegate_to: localhost\n\n    - name: Log deployment success\n      lineinfile:\n        path: &quot;/var/log/{{ app_name }}/deployments.log&quot;\n        line: &quot;{{ ansible_date_time.iso8601 }} - Successfully deployed {{ app_version }} to {{ inventory_hostname }}&quot;\n        create: yes\n\n  handlers:\n    - name: daemon reload\n      systemd:\n        daemon_reload: yes\n\n    - name: restart application\n      systemd:\n        name: &quot;{{ app_name }}&quot;\n        state: restarted\n\n    - name: reload application\n      systemd:\n        name: &quot;{{ app_name }}&quot;\n        state: reloaded\n\n    - name: reload nginx\n      service:\n        name: nginx\n        state: reloaded\nEOF</code></pre>\n      </div>\n    </div>\n<h3 id=\"infrastructure-as-code-playbook\" class=\"mobile-header\">Infrastructure as Code Playbook</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\">cat &gt; playbooks/infrastructure-provisioning.yml &lt;&lt;EOF\n---\n- name: Infrastructure Provisioning and Configuration\n  hosts: all\n  become: yes\n  strategy: free  # Parallel execution\n  vars:\n    base_packages:\n      Debian:\n        - curl\n        - wget\n        - vim\n        - htop\n        - git\n        - python3\n        - python3-pip\n        - unzip\n        - tree\n      RedHat:\n        - curl\n        - wget\n        - vim\n        - htop\n        - git\n        - python3\n        - python3-pip\n        - unzip\n        - tree\n        - epel-release\n\n  tasks:\n    # System preparation\n    - name: Set hostname\n      hostname:\n        name: &quot;{{ inventory_hostname }}&quot;\n\n    - name: Update /etc/hosts\n      lineinfile:\n        path: /etc/hosts\n        line: &quot;{{ ansible_default_ipv4.address }} {{ inventory_hostname }}&quot;\n        backup: yes\n\n    # Package management\n    - name: Install base packages\n      package:\n        name: &quot;{{ base_packages[ansible_os_family] | default(base_packages[&#039;Debian&#039;]) }}&quot;\n        state: present\n\n    # Time synchronization\n    - name: Install and configure NTP\n      package:\n        name: &quot;{{ &#039;ntp&#039; if ansible_os_family == &#039;Debian&#039; else &#039;chrony&#039; }}&quot;\n        state: present\n\n    - name: Start and enable time synchronization\n      service:\n        name: &quot;{{ &#039;ntp&#039; if ansible_os_family == &#039;Debian&#039; else &#039;chronyd&#039; }}&quot;\n        state: started\n        enabled: yes\n\n    # Log management\n    - name: Configure logrotate for application logs\n      template:\n        src: templates/app-logrotate.j2\n        dest: /etc/logrotate.d/applications\n        mode: &#039;0644&#039;\n\n    # Monitoring agent installation\n    - name: Install Node Exporter for Prometheus monitoring\n      get_url:\n        url: &quot;https://github.com/prometheus/node_exporter/releases/download/v1.6.1/node_exporter-1.6.1.linux-amd64.tar.gz&quot;\n        dest: /tmp/node_exporter.tar.gz\n        mode: &#039;0644&#039;\n\n    - name: Extract Node Exporter\n      unarchive:\n        src: /tmp/node_exporter.tar.gz\n        dest: /tmp\n        remote_src: yes\n\n    - name: Copy Node Exporter binary\n      copy:\n        src: /tmp/node_exporter-1.6.1.linux-amd64/node_exporter\n        dest: /usr/local/bin/node_exporter\n        mode: &#039;0755&#039;\n        owner: root\n        group: root\n        remote_src: yes\n\n    - name: Create node_exporter systemd service\n      template:\n        src: templates/node_exporter.service.j2\n        dest: /etc/systemd/system/node_exporter.service\n        mode: &#039;0644&#039;\n      notify:\n        - daemon reload\n        - restart node_exporter\n\n    # Security configuration\n    - name: Configure kernel parameters for security\n      sysctl:\n        name: &quot;{{ item.key }}&quot;\n        value: &quot;{{ item.value }}&quot;\n        sysctl_set: yes\n        state: present\n        reload: yes\n      loop:\n        - { key: &#039;kernel.dmesg_restrict&#039;, value: &#039;1&#039; }\n        - { key: &#039;kernel.kptr_restrict&#039;, value: &#039;2&#039; }\n        - { key: &#039;kernel.yama.ptrace_scope&#039;, value: &#039;1&#039; }\n        - { key: &#039;net.ipv4.conf.all.log_martians&#039;, value: &#039;1&#039; }\n        - { key: &#039;net.ipv4.conf.default.log_martians&#039;, value: &#039;1&#039; }\n        - { key: &#039;net.ipv4.conf.all.send_redirects&#039;, value: &#039;0&#039; }\n        - { key: &#039;net.ipv4.conf.default.send_redirects&#039;, value: &#039;0&#039; }\n\n    # File integrity monitoring\n    - name: Initialize AIDE database\n      shell: |\n        aide --init\n        mv /var/lib/aide/aide.db.new /var/lib/aide/aide.db\n      args:\n        creates: /var/lib/aide/aide.db\n\n    - name: Schedule AIDE integrity checks\n      cron:\n        name: &quot;AIDE integrity check&quot;\n        minute: &quot;0&quot;\n        hour: &quot;3&quot;\n        job: &quot;/usr/bin/aide --check&quot;\n        user: root\n\n  handlers:\n    - name: daemon reload\n      systemd:\n        daemon_reload: yes\n\n    - name: restart node_exporter\n      service:\n        name: node_exporter\n        state: restarted\n        enabled: yes\nEOF</code></pre>\n      </div>\n    </div>\n<h2 id=\"advanced-role-development\" class=\"mobile-header\">Advanced Role Development</h2>\n<h3 id=\"comprehensive-nginx-role\" class=\"mobile-header\">Comprehensive NGINX Role</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Create NGINX role structure\nansible-galaxy init roles/nginx\n\n# Main tasks\ncat &gt; roles/nginx/tasks/main.yml &lt;&lt;EOF\n---\n# NGINX Installation and Configuration Role\n- name: Include OS-specific variables\n  include_vars: &quot;{{ ansible_os_family }}.yml&quot;\n\n- name: Install NGINX\n  include_tasks: &quot;install-{{ ansible_os_family }}.yml&quot;\n\n- name: Create NGINX directories\n  file:\n    path: &quot;{{ item }}&quot;\n    state: directory\n    owner: root\n    group: root\n    mode: &#039;0755&#039;\n  loop:\n    - /etc/nginx/sites-available\n    - /etc/nginx/sites-enabled\n    - /etc/nginx/conf.d\n    - /var/log/nginx\n    - /var/cache/nginx\n\n- name: Generate DH parameters\n  openssl_dhparam:\n    path: /etc/ssl/certs/dhparam.pem\n    size: 2048\n  when: nginx_ssl_enabled | default(false)\n\n- name: Deploy NGINX main configuration\n  template:\n    src: nginx.conf.j2\n    dest: /etc/nginx/nginx.conf\n    backup: yes\n    validate: &#039;nginx -t -c %s&#039;\n  notify: reload nginx\n\n- name: Deploy virtual host configurations\n  template:\n    src: vhost.conf.j2\n    dest: &quot;/etc/nginx/sites-available/{{ item.name }}.conf&quot;\n    backup: yes\n  loop: &quot;{{ nginx_vhosts | default([]) }}&quot;\n  notify: reload nginx\n\n- name: Enable virtual hosts\n  file:\n    src: &quot;/etc/nginx/sites-available/{{ item.name }}.conf&quot;\n    dest: &quot;/etc/nginx/sites-enabled/{{ item.name }}.conf&quot;\n    state: link\n  loop: &quot;{{ nginx_vhosts | default([]) }}&quot;\n  when: item.enabled | default(true)\n  notify: reload nginx\n\n- name: Remove default site\n  file:\n    path: /etc/nginx/sites-enabled/default\n    state: absent\n  notify: reload nginx\n\n- name: Start and enable NGINX\n  service:\n    name: nginx\n    state: started\n    enabled: yes\n\n- name: Configure log rotation\n  template:\n    src: nginx-logrotate.j2\n    dest: /etc/logrotate.d/nginx\n    mode: &#039;0644&#039;\n\n- name: Setup NGINX monitoring\n  include_tasks: monitoring.yml\n  when: nginx_monitoring_enabled | default(false)\n\n- name: Configure SSL certificates\n  include_tasks: ssl.yml\n  when: nginx_ssl_enabled | default(false)\nEOF\n\n# OS-specific installation tasks\ncat &gt; roles/nginx/tasks/install-Debian.yml &lt;&lt;EOF\n---\n- name: Add NGINX signing key (Debian/Ubuntu)\n  apt_key:\n    url: https://nginx.org/keys/nginx_signing.key\n    state: present\n\n- name: Add NGINX repository (Debian/Ubuntu)\n  apt_repository:\n    repo: &quot;deb https://nginx.org/packages/{{ ansible_distribution | lower }}/ {{ ansible_distribution_release }} nginx&quot;\n    state: present\n\n- name: Install NGINX (Debian/Ubuntu)\n  apt:\n    name: nginx\n    state: present\n    update_cache: yes\nEOF\n\ncat &gt; roles/nginx/tasks/install-RedHat.yml &lt;&lt;EOF\n---\n- name: Add NGINX repository (RHEL/CentOS)\n  yum_repository:\n    name: nginx\n    description: NGINX Repository\n    baseurl: &quot;https://nginx.org/packages/centos/{{ ansible_distribution_major_version }}/$basearch/&quot;\n    gpgcheck: yes\n    gpgkey: https://nginx.org/keys/nginx_signing.key\n    enabled: yes\n\n- name: Install NGINX (RHEL/CentOS)\n  yum:\n    name: nginx\n    state: present\nEOF\n\n# Variables\ncat &gt; roles/nginx/vars/main.yml &lt;&lt;EOF\n---\nnginx_user: nginx\nnginx_worker_processes: auto\nnginx_worker_connections: 1024\nnginx_keepalive_timeout: 65\nnginx_ssl_enabled: false\nnginx_monitoring_enabled: true\n\nnginx_security_headers:\n  - &quot;add_header X-Frame-Options SAMEORIGIN always;&quot;\n  - &quot;add_header X-Content-Type-Options nosniff always;&quot;\n  - &quot;add_header X-XSS-Protection &#039;1; mode=block&#039; always;&quot;\n  - &quot;add_header Strict-Transport-Security &#039;max-age=31536000; includeSubDomains&#039; always;&quot;\n\nnginx_default_vhost:\n  name: default\n  listen: 80\n  server_name: &quot;_&quot;\n  root: /var/www/html\n  index: index.html\n  enabled: false\nEOF\n\n# Templates\ncat &gt; roles/nginx/templates/nginx.conf.j2 &lt;&lt;EOF\nuser {{ nginx_user }};\nworker_processes {{ nginx_worker_processes }};\npid /var/run/nginx.pid;\n\nevents {\n    worker_connections {{ nginx_worker_connections }};\n    use epoll;\n    multi_accept on;\n}\n\nhttp {\n    # Basic settings\n    sendfile on;\n    tcp_nopush on;\n    tcp_nodelay on;\n    keepalive_timeout {{ nginx_keepalive_timeout }};\n    types_hash_max_size 2048;\n    server_tokens off;\n\n    include /etc/nginx/mime.types;\n    default_type application/octet-stream;\n\n    # SSL configuration\n{% if nginx_ssl_enabled %}\n    ssl_protocols TLSv1.2 TLSv1.3;\n    ssl_prefer_server_ciphers off;\n    ssl_dhparam /etc/ssl/certs/dhparam.pem;\n{% endif %}\n\n    # Gzip compression\n    gzip on;\n    gzip_vary on;\n    gzip_proxied any;\n    gzip_comp_level 6;\n    gzip_types\n        application/javascript\n        application/json\n        application/xml\n        text/css\n        text/javascript\n        text/xml\n        text/plain;\n\n    # Security headers\n{% for header in nginx_security_headers %}\n    {{ header }}\n{% endfor %}\n\n    # Logging\n    log_format main &#039;\\$remote_addr - \\$remote_user [\\$time_local] &quot;\\$request&quot; &#039;\n                    &#039;\\$status \\$body_bytes_sent &quot;\\$http_referer&quot; &#039;\n                    &#039;&quot;\\$http_user_agent&quot; &quot;\\$http_x_forwarded_for&quot;&#039;;\n\n    access_log /var/log/nginx/access.log main;\n    error_log /var/log/nginx/error.log;\n\n    # Rate limiting\n    limit_req_zone \\$binary_remote_addr zone=login:10m rate=10r/m;\n    limit_conn_zone \\$binary_remote_addr zone=addr:10m;\n\n    # Include configurations\n    include /etc/nginx/conf.d/*.conf;\n    include /etc/nginx/sites-enabled/*;\n}\nEOF\n\n# Handlers\ncat &gt; roles/nginx/handlers/main.yml &lt;&lt;EOF\n---\n- name: restart nginx\n  service:\n    name: nginx\n    state: restarted\n\n- name: reload nginx\n  service:\n    name: nginx\n    state: reloaded\n\n- name: validate nginx config\n  command: nginx -t\n  changed_when: false\nEOF</code></pre>\n      </div>\n    </div>\n<h2 id=\"security-and-compliance\" class=\"mobile-header\">Security and Compliance</h2>\n<h3 id=\"ansible-security-scanner-integration\" class=\"mobile-header\">Ansible Security Scanner Integration</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Create security scanning playbook\ncat &gt; playbooks/security-scan.yml &lt;&lt;EOF\n---\n- name: Security Compliance Scanning\n  hosts: all\n  become: yes\n  gather_facts: yes\n  vars:\n    scan_results_dir: &quot;/tmp/security-scans&quot;\n    \n  tasks:\n    - name: Create scan results directory\n      file:\n        path: &quot;{{ scan_results_dir }}&quot;\n        state: directory\n        mode: &#039;0755&#039;\n\n    # CIS benchmark scanning\n    - name: Download CIS benchmark script\n      get_url:\n        url: &quot;https://github.com/dev-sec/cis-dil-benchmark/archive/master.zip&quot;\n        dest: &quot;/tmp/cis-benchmark.zip&quot;\n        mode: &#039;0644&#039;\n\n    - name: Run CIS benchmark scan\n      shell: |\n        cd /tmp\n        unzip -o cis-benchmark.zip\n        cd cis-dil-benchmark-master\n        bash cis_ubuntu2204.sh &gt; {{ scan_results_dir }}/cis-scan-{{ inventory_hostname }}.txt\n      args:\n        creates: &quot;{{ scan_results_dir }}/cis-scan-{{ inventory_hostname }}.txt&quot;\n\n    # Lynis security audit\n    - name: Install Lynis\n      package:\n        name: lynis\n        state: present\n\n    - name: Run Lynis security audit\n      command: lynis audit system --quiet --cronjob\n      register: lynis_result\n      changed_when: false\n\n    - name: Save Lynis results\n      copy:\n        content: &quot;{{ lynis_result.stdout }}&quot;\n        dest: &quot;{{ scan_results_dir }}/lynis-scan-{{ inventory_hostname }}.txt&quot;\n        mode: &#039;0644&#039;\n\n    # OpenSCAP compliance scanning\n    - name: Install OpenSCAP (RHEL/CentOS)\n      package:\n        name:\n          - openscap-scanner\n          - scap-security-guide\n        state: present\n      when: ansible_os_family == &quot;RedHat&quot;\n\n    - name: Install OpenSCAP (Debian/Ubuntu)\n      package:\n        name:\n          - libopenscap8\n          - ssg-debian\n        state: present\n      when: ansible_os_family == &quot;Debian&quot;\n\n    - name: Run OpenSCAP scan\n      shell: |\n        oscap xccdf eval --profile xccdf_org.ssgproject.content_profile_standard \\\n          --results {{ scan_results_dir }}/oscap-results-{{ inventory_hostname }}.xml \\\n          --report {{ scan_results_dir }}/oscap-report-{{ inventory_hostname }}.html \\\n          /usr/share/xml/scap/ssg/content/ssg-{{ ansible_distribution | lower }}{{ ansible_distribution_major_version }}-xccdf.xml\n      ignore_errors: yes\n      when: ansible_os_family in [&quot;RedHat&quot;, &quot;Debian&quot;]\n\n    # Vulnerability scanning with Trivy\n    - name: Install Trivy vulnerability scanner\n      shell: |\n        curl -sfL https://raw.githubusercontent.com/aquasecurity/trivy/main/contrib/install.sh | sh -s -- -b /usr/local/bin\n      args:\n        creates: /usr/local/bin/trivy\n\n    - name: Run Trivy filesystem scan\n      shell: |\n        trivy fs --format json --output {{ scan_results_dir }}/trivy-scan-{{ inventory_hostname }}.json /\n      ignore_errors: yes\n\n    # Collect scan results\n    - name: Fetch scan results to control machine\n      fetch:\n        src: &quot;{{ item }}&quot;\n        dest: &quot;./security-reports/{{ inventory_hostname }}/&quot;\n        flat: yes\n      loop:\n        - &quot;{{ scan_results_dir }}/cis-scan-{{ inventory_hostname }}.txt&quot;\n        - &quot;{{ scan_results_dir }}/lynis-scan-{{ inventory_hostname }}.txt&quot;\n        - &quot;{{ scan_results_dir }}/oscap-report-{{ inventory_hostname }}.html&quot;\n        - &quot;{{ scan_results_dir }}/trivy-scan-{{ inventory_hostname }}.json&quot;\n      ignore_errors: yes\n      delegate_to: localhost\n\n  post_tasks:\n    - name: Generate compliance summary\n      template:\n        src: templates/compliance-summary.j2\n        dest: &quot;{{ scan_results_dir }}/compliance-summary-{{ inventory_hostname }}.txt&quot;\n        mode: &#039;0644&#039;\nEOF</code></pre>\n      </div>\n    </div>\n<h3 id=\"ansible-awxtower-integration\" class=\"mobile-header\">Ansible AWX/Tower Integration</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Install Ansible AWX (open source)\ncat &gt; playbooks/install-awx.yml &lt;&lt;EOF\n---\n- name: Install Ansible AWX\n  hosts: localhost\n  connection: local\n  become: yes\n  vars:\n    awx_namespace: awx\n    awx_admin_user: admin\n    awx_admin_password: &quot;{{ vault_awx_admin_password }}&quot;\n\n  tasks:\n    - name: Install prerequisite packages\n      package:\n        name:\n          - git\n          - curl\n          - docker.io\n          - docker-compose\n        state: present\n\n    - name: Clone AWX repository\n      git:\n        repo: https://github.com/ansible/awx.git\n        dest: /opt/awx\n        version: devel\n\n    - name: Create AWX Docker inventory\n      template:\n        src: templates/awx-docker-inventory.j2\n        dest: /opt/awx/installer/inventory\n        mode: &#039;0644&#039;\n\n    - name: Install AWX using Ansible\n      shell: ansible-playbook -i inventory install.yml\n      args:\n        chdir: /opt/awx/installer\n      environment:\n        ANSIBLE_HOST_KEY_CHECKING: False\n\n    - name: Wait for AWX to be ready\n      uri:\n        url: &quot;http://localhost:80/api/v2/ping/&quot;\n        method: GET\n      retries: 30\n      delay: 10\n\n    - name: Configure AWX organizations and projects\n      uri:\n        url: &quot;http://localhost:80/api/v2/organizations/&quot;\n        method: POST\n        user: &quot;{{ awx_admin_user }}&quot;\n        password: &quot;{{ awx_admin_password }}&quot;\n        force_basic_auth: yes\n        body_format: json\n        body:\n          name: &quot;Production&quot;\n          description: &quot;Production environment organization&quot;\n        status_code: [200, 201, 409]\nEOF</code></pre>\n      </div>\n    </div>\n<h2 id=\"multi-cloud-automation\" class=\"mobile-header\">Multi-Cloud Automation</h2>\n<h3 id=\"aws-infrastructure-automation\" class=\"mobile-header\">AWS Infrastructure Automation</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\">cat &gt; playbooks/aws-infrastructure.yml &lt;&lt;EOF\n---\n- name: AWS Infrastructure Automation\n  hosts: localhost\n  connection: local\n  gather_facts: no\n  vars:\n    aws_region: &quot;{{ aws_region | default(&#039;us-west-2&#039;) }}&quot;\n    vpc_cidr: &quot;{{ vpc_cidr | default(&#039;10.0.0.0/16&#039;) }}&quot;\n    environment: &quot;{{ environment | default(&#039;production&#039;) }}&quot;\n\n  tasks:\n    # VPC Creation\n    - name: Create VPC\n      amazon.aws.ec2_vpc_info:\n        filters:\n          &quot;tag:Name&quot;: &quot;{{ environment }}-vpc&quot;\n        region: &quot;{{ aws_region }}&quot;\n      register: existing_vpc\n\n    - name: Create new VPC if not exists\n      amazon.aws.ec2_vpc_net:\n        name: &quot;{{ environment }}-vpc&quot;\n        cidr_block: &quot;{{ vpc_cidr }}&quot;\n        region: &quot;{{ aws_region }}&quot;\n        state: present\n        dns_hostnames: yes\n        dns_support: yes\n        tags:\n          Environment: &quot;{{ environment }}&quot;\n          ManagedBy: ansible\n      register: vpc\n      when: existing_vpc.vpcs | length == 0\n\n    # Security Groups\n    - name: Create web security group\n      amazon.aws.ec2_group:\n        name: &quot;{{ environment }}-web-sg&quot;\n        description: &quot;Security group for web servers&quot;\n        vpc_id: &quot;{{ vpc.vpc.id if vpc.vpc is defined else existing_vpc.vpcs[0].vpc_id }}&quot;\n        region: &quot;{{ aws_region }}&quot;\n        rules:\n          - proto: tcp\n            ports:\n              - 80\n              - 443\n            cidr_ip: 0.0.0.0/0\n            rule_desc: &quot;HTTP and HTTPS access&quot;\n          - proto: tcp\n            ports:\n              - 22\n            group_id: &quot;{{ environment }}-bastion-sg&quot;\n            rule_desc: &quot;SSH from bastion&quot;\n        tags:\n          Environment: &quot;{{ environment }}&quot;\n\n    # Launch EC2 instances\n    - name: Launch web servers\n      amazon.aws.ec2_instance:\n        name: &quot;{{ environment }}-web-{{ item }}&quot;\n        instance_type: t3.medium\n        image_id: ami-0c02fb55956c7d316  # Amazon Linux 2\n        key_name: &quot;{{ ec2_key_name }}&quot;\n        vpc_subnet_id: &quot;{{ web_subnet_id }}&quot;\n        security_groups:\n          - &quot;{{ environment }}-web-sg&quot;\n        region: &quot;{{ aws_region }}&quot;\n        state: running\n        wait: yes\n        wait_timeout: 300\n        user_data: |\n          #!/bin/bash\n          yum update -y\n          yum install -y python3\n        tags:\n          Environment: &quot;{{ environment }}&quot;\n          Role: webserver\n          Ansible: managed\n      loop: &quot;{{ range(1, web_server_count + 1) | list }}&quot;\n      register: web_instances\n\n    # Add instances to inventory\n    - name: Add web servers to inventory\n      add_host:\n        name: &quot;{{ item.instances[0].tags.Name }}&quot;\n        hostname: &quot;{{ item.instances[0].public_ip_address }}&quot;\n        groups: webservers\n        ansible_ssh_private_key_file: &quot;~/.ssh/{{ ec2_key_name }}.pem&quot;\n        ansible_user: ec2-user\n      loop: &quot;{{ web_instances.results }}&quot;\n      changed_when: false\nEOF</code></pre>\n      </div>\n    </div>\n<h3 id=\"kubernetes-cluster-management\" class=\"mobile-header\">Kubernetes Cluster Management</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\">cat &gt; playbooks/k8s-cluster-management.yml &lt;&lt;EOF\n---\n- name: Kubernetes Cluster Management with Ansible\n  hosts: k8s_masters\n  become: yes\n  serial: 1\n  vars:\n    k8s_version: &quot;1.28.2&quot;\n    containerd_version: &quot;1.6.24&quot;\n    cni_version: &quot;1.3.0&quot;\n\n  tasks:\n    # Pre-flight checks\n    - name: Check system requirements\n      assert:\n        that:\n          - ansible_memtotal_mb &gt;= 1700\n          - ansible_processor_cores &gt;= 2\n        fail_msg: &quot;System doesn&#039;t meet minimum requirements&quot;\n\n    - name: Verify connectivity to all nodes\n      ping:\n      delegate_to: &quot;{{ item }}&quot;\n      loop: &quot;{{ groups[&#039;k8s_all&#039;] }}&quot;\n\n    # Container runtime setup\n    - name: Install containerd\n      include_role:\n        name: containerd\n      vars:\n        containerd_version: &quot;{{ containerd_version }}&quot;\n\n    # Kubernetes installation\n    - name: Install Kubernetes components\n      include_role:\n        name: kubernetes\n      vars:\n        kubernetes_version: &quot;{{ k8s_version }}&quot;\n\n    # Cluster initialization\n    - name: Initialize Kubernetes cluster\n      shell: |\n        kubeadm init \\\n          --pod-network-cidr=10.244.0.0/16 \\\n          --service-cidr=10.96.0.0/12 \\\n          --apiserver-advertise-address={{ ansible_default_ipv4.address }} \\\n          --node-name={{ inventory_hostname }}\n      args:\n        creates: /etc/kubernetes/admin.conf\n      register: kubeadm_init\n\n    - name: Create .kube directory\n      file:\n        path: &quot;{{ ansible_env.HOME }}/.kube&quot;\n        state: directory\n        mode: &#039;0755&#039;\n\n    - name: Copy admin.conf to user&#039;s kube config\n      copy:\n        src: /etc/kubernetes/admin.conf\n        dest: &quot;{{ ansible_env.HOME }}/.kube/config&quot;\n        owner: &quot;{{ ansible_user }}&quot;\n        group: &quot;{{ ansible_user }}&quot;\n        mode: &#039;0644&#039;\n        remote_src: yes\n\n    # Network plugin installation\n    - name: Install Flannel CNI\n      shell: kubectl apply -f https://github.com/flannel-io/flannel/releases/latest/download/kube-flannel.yml\n      environment:\n        KUBECONFIG: &quot;{{ ansible_env.HOME }}/.kube/config&quot;\n\n    # Join worker nodes\n    - name: Get join command\n      shell: kubeadm token create --print-join-command\n      register: join_command\n      when: inventory_hostname in groups[&#039;k8s_masters&#039;][0]\n\n    - name: Join worker nodes to cluster\n      shell: &quot;{{ hostvars[groups[&#039;k8s_masters&#039;][0]][&#039;join_command&#039;].stdout }}&quot;\n      when: inventory_hostname in groups[&#039;k8s_workers&#039;]\n\n  post_tasks:\n    - name: Verify cluster status\n      shell: kubectl get nodes\n      environment:\n        KUBECONFIG: &quot;{{ ansible_env.HOME }}/.kube/config&quot;\n      register: cluster_status\n      when: inventory_hostname in groups[&#039;k8s_masters&#039;][0]\n\n    - name: Display cluster status\n      debug:\n        var: cluster_status.stdout_lines\n      when: inventory_hostname in groups[&#039;k8s_masters&#039;][0]\nEOF</code></pre>\n      </div>\n    </div>\n<h2 id=\"performance-optimization-and-scaling\" class=\"mobile-header\">Performance Optimization and Scaling</h2>\n<h3 id=\"parallel-execution-strategies\" class=\"mobile-header\">Parallel Execution Strategies</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Create high-performance playbook configuration\ncat &gt; playbooks/high-performance-deployment.yml &lt;&lt;EOF\n---\n- name: High-Performance Deployment\n  hosts: all\n  become: yes\n  strategy: free  # Parallel execution\n  serial: &quot;30%&quot;   # Process 30% of hosts at a time\n  max_fail_percentage: 10\n  gather_facts: yes\n  fact_caching: smart\n  vars:\n    deployment_batch_size: 10\n    max_concurrent_tasks: 50\n\n  pre_tasks:\n    - name: Check system load\n      shell: uptime | awk &#039;{print $(NF-2)}&#039; | sed &#039;s/,//&#039;\n      register: system_load\n      changed_when: false\n\n    - name: Skip high-load systems\n      meta: end_host\n      when: system_load.stdout | float &gt; 5.0\n\n  tasks:\n    - name: Update packages with retries\n      package:\n        name: &quot;*&quot;\n        state: latest\n      retries: 3\n      delay: 30\n      async: 300\n      poll: 10\n\n    - name: Deploy configuration files in parallel\n      template:\n        src: &quot;{{ item.src }}&quot;\n        dest: &quot;{{ item.dest }}&quot;\n        mode: &quot;{{ item.mode | default(&#039;0644&#039;) }}&quot;\n        backup: yes\n      loop:\n        - { src: &quot;nginx.conf.j2&quot;, dest: &quot;/etc/nginx/nginx.conf&quot; }\n        - { src: &quot;mysql.cnf.j2&quot;, dest: &quot;/etc/mysql/my.cnf&quot; }\n        - { src: &quot;redis.conf.j2&quot;, dest: &quot;/etc/redis/redis.conf&quot; }\n      async: 120\n      poll: 5\n      register: config_deployment\n\n    - name: Wait for all configuration deployments\n      async_status:\n        jid: &quot;{{ item.ansible_job_id }}&quot;\n      loop: &quot;{{ config_deployment.results }}&quot;\n      when: item.ansible_job_id is defined\n\n  handlers:\n    - name: restart services\n      service:\n        name: &quot;{{ item }}&quot;\n        state: restarted\n      loop:\n        - nginx\n        - mysql\n        - redis\n      listen: &quot;restart all services&quot;\nEOF\n\n# Performance monitoring playbook\ncat &gt; playbooks/performance-monitoring.yml &lt;&lt;EOF\n---\n- name: Performance Monitoring Setup\n  hosts: all\n  become: yes\n  vars:\n    monitoring_tools:\n      - htop\n      - iotop\n      - nethogs\n      - dstat\n      - sysstat\n      - perf\n\n  tasks:\n    - name: Install performance monitoring tools\n      package:\n        name: &quot;{{ monitoring_tools }}&quot;\n        state: present\n\n    - name: Configure system monitoring\n      template:\n        src: templates/sysstat.j2\n        dest: /etc/default/sysstat\n        backup: yes\n      when: ansible_os_family == &quot;Debian&quot;\n\n    - name: Enable system statistics collection\n      service:\n        name: &quot;{{ &#039;sysstat&#039; if ansible_os_family == &#039;Debian&#039; else &#039;sysstat&#039; }}&quot;\n        enabled: yes\n        state: started\n\n    - name: Create performance monitoring script\n      template:\n        src: templates/performance-monitor.sh.j2\n        dest: /usr/local/bin/performance-monitor.sh\n        mode: &#039;0755&#039;\n\n    - name: Schedule performance monitoring\n      cron:\n        name: &quot;Performance monitoring&quot;\n        minute: &quot;*/5&quot;\n        job: &quot;/usr/local/bin/performance-monitor.sh&quot;\n        user: root\nEOF</code></pre>\n      </div>\n    </div>\n<h2 id=\"testing-and-validation\" class=\"mobile-header\">Testing and Validation</h2>\n<h3 id=\"molecule-testing-framework\" class=\"mobile-header\">Molecule Testing Framework</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Install Molecule for role testing\npip install molecule[docker] molecule[vagrant] molecule[libvirt]\n\n# Initialize Molecule in role directory\ncd roles/nginx\nmolecule init scenario --driver-name docker\n\n# Create molecule configuration\ncat &gt; molecule/default/molecule.yml &lt;&lt;EOF\n---\ndependency:\n  name: galaxy\ndriver:\n  name: docker\nplatforms:\n  - name: nginx-ubuntu\n    image: ubuntu:22.04\n    pre_build_image: true\n    privileged: true\n    volumes:\n      - /sys/fs/cgroup:/sys/fs/cgroup:ro\n    command: /lib/systemd/systemd\n    networks:\n      - name: molecule\n  - name: nginx-centos\n    image: centos:8\n    pre_build_image: true\n    privileged: true\n    volumes:\n      - /sys/fs/cgroup:/sys/fs/cgroup:ro\n    command: /usr/sbin/init\n    networks:\n      - name: molecule\nprovisioner:\n  name: ansible\n  config_options:\n    defaults:\n      callbacks_enabled: profile_tasks,timer,yaml\n  inventory:\n    host_vars:\n      nginx-ubuntu:\n        ansible_python_interpreter: /usr/bin/python3\n      nginx-centos:\n        ansible_python_interpreter: /usr/bin/python3\nverifier:\n  name: ansible\nlint: |\n  set -e\n  yamllint .\n  ansible-lint\n  flake8\nEOF\n\n# Create test playbook\ncat &gt; molecule/default/converge.yml &lt;&lt;EOF\n---\n- name: Converge\n  hosts: all\n  become: true\n  tasks:\n    - name: &quot;Include nginx role&quot;\n      include_role:\n        name: nginx\n      vars:\n        nginx_vhosts:\n          - name: default\n            server_name: localhost\n            listen: 80\n            root: /var/www/html\n            enabled: true\nEOF\n\n# Create test verification\ncat &gt; molecule/default/verify.yml &lt;&lt;EOF\n---\n- name: Verify\n  hosts: all\n  gather_facts: false\n  tasks:\n    - name: Check if NGINX is running\n      uri:\n        url: http://localhost\n        method: GET\n      register: nginx_check\n\n    - name: Verify NGINX is responding\n      assert:\n        that:\n          - nginx_check.status == 200\n        fail_msg: &quot;NGINX is not responding correctly&quot;\n\n    - name: Check NGINX configuration\n      shell: nginx -t\n      changed_when: false\n\n    - name: Verify NGINX process\n      shell: pgrep nginx\n      changed_when: false\nEOF\n\n# Run tests\nmolecule test</code></pre>\n      </div>\n    </div>\n<h3 id=\"ansible-lint-and-security-scanning\" class=\"mobile-header\">Ansible Lint and Security Scanning</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Install Ansible Lint\npip install ansible-lint\n\n# Create .ansible-lint configuration\ncat &gt; .ansible-lint &lt;&lt;EOF\n---\nprofile: production\n\nexclude_paths:\n  - .cache/\n  - .github/\n  - molecule/\n  - .venv/\n\nskip_list:\n  - yaml[line-length]  # Allow longer lines for readability\n\nwarn_list:\n  - experimental  # Warn about experimental features\n\n# Custom rules\nrules:\n  braces:\n    min-spaces-inside: 0\n    max-spaces-inside: 1\n  brackets:\n    min-spaces-inside: 0\n    max-spaces-inside: 0\n  colons:\n    max-spaces-before: 0\n    min-spaces-after: 1\n    max-spaces-after: 1\n  commas:\n    max-spaces-before: 0\n    min-spaces-after: 1\n    max-spaces-after: 1\n  comments:\n    min-spaces-from-content: 1\n  document-start: disable\n  empty-lines:\n    max: 2\n    max-start: 0\n    max-end: 1\n  hyphens:\n    max-spaces-after: 1\n  indentation:\n    spaces: 2\n    indent-sequences: true\n  line-length:\n    max: 120\n  new-line-at-end-of-file: enable\n  trailing-spaces: enable\n  truthy:\n    allowed-values: [&#039;true&#039;, &#039;false&#039;, &#039;yes&#039;, &#039;no&#039;]\nEOF\n\n# Create security-focused playbook linting\ncat &gt; .yamllint &lt;&lt;EOF\n---\nextends: default\n\nrules:\n  braces:\n    min-spaces-inside: 0\n    max-spaces-inside: 1\n  brackets:\n    min-spaces-inside: 0\n    max-spaces-inside: 0\n  colons:\n    max-spaces-before: 0\n    min-spaces-after: 1\n    max-spaces-after: 1\n  commas:\n    max-spaces-before: 0\n    min-spaces-after: 1\n    max-spaces-after: 1\n  comments: disable\n  comments-indentation: disable\n  document-start: disable\n  empty-lines:\n    max: 2\n    max-start: 0\n    max-end: 1\n  hyphens:\n    max-spaces-after: 1\n  indentation:\n    spaces: 2\n    indent-sequences: true\n    check-multi-line-strings: false\n  key-duplicates: enable\n  line-length:\n    max: 120\n  new-line-at-end-of-file: enable\n  octal-values:\n    forbid-implicit-octal: true\n  trailing-spaces: enable\n  truthy: disable\nEOF\n\n# Run linting\nansible-lint playbooks/\nyamllint .</code></pre>\n      </div>\n    </div>\n<h2 id=\"backup-and-disaster-recovery\" class=\"mobile-header\">Backup and Disaster Recovery</h2>\n<h3 id=\"comprehensive-backup-automation\" class=\"mobile-header\">Comprehensive Backup Automation</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\">cat &gt; playbooks/backup-automation.yml &lt;&lt;EOF\n---\n- name: Automated Backup System\n  hosts: all\n  become: yes\n  vars:\n    backup_root: /backup\n    backup_retention_days: 30\n    backup_schedule:\n      databases: &quot;0 2 * * *&quot;\n      files: &quot;0 3 * * *&quot;\n      configs: &quot;0 4 * * *&quot;\n\n  tasks:\n    - name: Create backup directories\n      file:\n        path: &quot;{{ backup_root }}/{{ item }}&quot;\n        state: directory\n        mode: &#039;0755&#039;\n        owner: root\n        group: root\n      loop:\n        - databases\n        - files\n        - configs\n        - logs\n\n    # Database backups\n    - name: Create database backup script\n      template:\n        src: templates/mysql-backup.sh.j2\n        dest: /usr/local/bin/mysql-backup.sh\n        mode: &#039;0755&#039;\n      when: &quot;&#039;dbservers&#039; in group_names&quot;\n\n    - name: Schedule database backups\n      cron:\n        name: &quot;MySQL backup&quot;\n        minute: &quot;0&quot;\n        hour: &quot;2&quot;\n        job: &quot;/usr/local/bin/mysql-backup.sh&quot;\n        user: root\n      when: &quot;&#039;dbservers&#039; in group_names&quot;\n\n    # File system backups\n    - name: Create file backup script\n      template:\n        src: templates/file-backup.sh.j2\n        dest: /usr/local/bin/file-backup.sh\n        mode: &#039;0755&#039;\n\n    - name: Schedule file backups\n      cron:\n        name: &quot;File system backup&quot;\n        minute: &quot;0&quot;\n        hour: &quot;3&quot;\n        job: &quot;/usr/local/bin/file-backup.sh&quot;\n        user: root\n\n    # Configuration backups\n    - name: Backup system configurations\n      archive:\n        path:\n          - /etc/nginx\n          - /etc/mysql\n          - /etc/systemd/system\n          - /etc/crontab\n          - /etc/hosts\n          - /etc/fstab\n        dest: &quot;{{ backup_root }}/configs/system-config-{{ ansible_date_time.epoch }}.tar.gz&quot;\n        mode: &#039;0600&#039;\n\n    # Remote backup synchronization\n    - name: Synchronize backups to remote storage\n      synchronize:\n        src: &quot;{{ backup_root }}/&quot;\n        dest: &quot;backup-server.example.com:{{ backup_root }}/{{ inventory_hostname }}/&quot;\n        delete: yes\n        rsync_opts:\n          - &quot;--exclude=*.tmp&quot;\n          - &quot;--compress&quot;\n          - &quot;--archive&quot;\n      when: backup_remote_sync | default(true)\n\n    # Cleanup old backups\n    - name: Clean up old backup files\n      find:\n        paths: &quot;{{ backup_root }}&quot;\n        age: &quot;{{ backup_retention_days }}d&quot;\n        file_type: file\n      register: old_backups\n\n    - name: Remove old backup files\n      file:\n        path: &quot;{{ item.path }}&quot;\n        state: absent\n      loop: &quot;{{ old_backups.files }}&quot;\nEOF</code></pre>\n      </div>\n    </div>\n<h2 id=\"verification-and-monitoring\" class=\"mobile-header\">Verification and Monitoring</h2>\n<h3 id=\"cross-platform-system-verification\" class=\"mobile-header\">Cross-Platform System Verification</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Create comprehensive verification playbook\ncat &gt; playbooks/system-verification.yml &lt;&lt;EOF\n---\n- name: System Verification and Health Check\n  hosts: all\n  become: yes\n  gather_facts: yes\n  vars:\n    health_checks:\n      - service: nginx\n        port: 80\n        process: nginx\n      - service: mysql\n        port: 3306\n        process: mysqld\n      - service: redis\n        port: 6379\n        process: redis-server\n\n  tasks:\n    # System information gathering\n    - name: Gather system information\n      setup:\n        gather_subset:\n          - all\n          - !facter\n          - !ohai\n\n    # Service verification\n    - name: Check critical services status\n      service_facts:\n\n    - name: Verify services are running\n      assert:\n        that:\n          - &quot;ansible_facts.services[item.service + &#039;.service&#039;].state == &#039;running&#039;&quot;\n        fail_msg: &quot;Service {{ item.service }} is not running&quot;\n        success_msg: &quot;Service {{ item.service }} is healthy&quot;\n      loop: &quot;{{ health_checks }}&quot;\n      when: &quot;item.service + &#039;.service&#039; in ansible_facts.services&quot;\n\n    # Network connectivity tests\n    - name: Test network connectivity\n      wait_for:\n        host: &quot;{{ item.host }}&quot;\n        port: &quot;{{ item.port }}&quot;\n        timeout: 5\n      loop:\n        - { host: &quot;8.8.8.8&quot;, port: 53 }\n        - { host: &quot;1.1.1.1&quot;, port: 53 }\n      ignore_errors: yes\n\n    # Disk space monitoring\n    - name: Check disk space usage\n      shell: df -h | awk &#039;$5 &gt; &quot;85%&quot; {print $0}&#039;\n      register: disk_usage\n      changed_when: false\n      failed_when: disk_usage.stdout != &quot;&quot;\n\n    # Memory usage check\n    - name: Check memory usage\n      shell: free | grep Mem | awk &#039;{printf &quot;%.0f&quot;, $3/$2 * 100.0}&#039;\n      register: memory_usage\n      changed_when: false\n\n    - name: Alert on high memory usage\n      debug:\n        msg: &quot;WARNING: Memory usage is {{ memory_usage.stdout }}%&quot;\n      when: memory_usage.stdout | int &gt; 85\n\n    # Security verification\n    - name: Check for failed login attempts\n      shell: grep &quot;Failed password&quot; /var/log/auth.log | tail -10\n      register: failed_logins\n      changed_when: false\n      ignore_errors: yes\n      when: ansible_os_family == &quot;Debian&quot;\n\n    - name: Check firewall status\n      shell: |\n        if command -v ufw &gt;/dev/null 2&gt;&amp;1; then\n          ufw status\n        elif command -v firewall-cmd &gt;/dev/null 2&gt;&amp;1; then\n          firewall-cmd --state\n        else\n          echo &quot;No supported firewall found&quot;\n        fi\n      register: firewall_status\n      changed_when: false\n\n  post_tasks:\n    - name: Generate system health report\n      template:\n        src: templates/health-report.j2\n        dest: &quot;/tmp/health-report-{{ inventory_hostname }}-{{ ansible_date_time.epoch }}.txt&quot;\n        mode: &#039;0644&#039;\n\n    - name: Fetch health reports\n      fetch:\n        src: &quot;/tmp/health-report-{{ inventory_hostname }}-{{ ansible_date_time.epoch }}.txt&quot;\n        dest: &quot;./reports/&quot;\n        flat: yes\nEOF</code></pre>\n      </div>\n    </div>\n<h3 id=\"continuous-compliance-monitoring\" class=\"mobile-header\">Continuous Compliance Monitoring</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\">cat &gt; playbooks/compliance-monitoring.yml &lt;&lt;EOF\n---\n- name: Continuous Compliance Monitoring\n  hosts: all\n  become: yes\n  vars:\n    compliance_standards:\n      - cis\n      - pci_dss\n      - soc2\n      - hipaa\n    \n    audit_log_paths:\n      - /var/log/auth.log\n      - /var/log/syslog\n      - /var/log/audit/audit.log\n\n  tasks:\n    # Install audit tools\n    - name: Install audit daemon\n      package:\n        name: &quot;{{ &#039;auditd&#039; if ansible_os_family == &#039;RedHat&#039; else &#039;auditd&#039; }}&quot;\n        state: present\n\n    - name: Configure audit rules\n      template:\n        src: templates/audit.rules.j2\n        dest: /etc/audit/rules.d/audit.rules\n        backup: yes\n      notify: restart auditd\n\n    # CIS compliance checks\n    - name: Run CIS benchmark checks\n      shell: |\n        if [ -f /opt/cis-cat/CIS-CAT.sh ]; then\n          /opt/cis-cat/CIS-CAT.sh -b /opt/cis-cat/benchmarks/\n        else\n          echo &quot;CIS-CAT not installed, skipping&quot;\n        fi\n      register: cis_results\n      ignore_errors: yes\n\n    # File integrity monitoring\n    - name: Install AIDE\n      package:\n        name: aide\n        state: present\n\n    - name: Initialize AIDE database\n      shell: |\n        aide --init\n        mv /var/lib/aide/aide.db.new /var/lib/aide/aide.db\n      args:\n        creates: /var/lib/aide/aide.db\n\n    - name: Schedule AIDE integrity checks\n      cron:\n        name: &quot;AIDE integrity check&quot;\n        minute: &quot;0&quot;\n        hour: &quot;3&quot;\n        job: &quot;/usr/bin/aide --check | mail -s &#039;AIDE Report&#039; security@example.com&quot;\n        user: root\n\n    # Log monitoring\n    - name: Install log monitoring tools\n      package:\n        name:\n          - logwatch\n          - rsyslog\n        state: present\n\n    - name: Configure centralized logging\n      template:\n        src: templates/rsyslog.conf.j2\n        dest: /etc/rsyslog.conf\n        backup: yes\n      notify: restart rsyslog\n\n  handlers:\n    - name: restart auditd\n      service:\n        name: auditd\n        state: restarted\n\n    - name: restart rsyslog\n      service:\n        name: rsyslog\n        state: restarted\nEOF</code></pre>\n      </div>\n    </div>\n<h2 id=\"cicd-integration\" class=\"mobile-header\">CI/CD Integration</h2>\n<h3 id=\"jenkins-pipeline-integration\" class=\"mobile-header\">Jenkins Pipeline Integration</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Create Jenkinsfile for Ansible automation\ncat &gt; Jenkinsfile &lt;&lt;EOF\npipeline {\n    agent any\n    \n    environment {\n        ANSIBLE_CONFIG = &#039;ansible.cfg&#039;\n        ANSIBLE_HOST_KEY_CHECKING = &#039;False&#039;\n    }\n    \n    stages {\n        stage(&#039;Lint&#039;) {\n            steps {\n                sh &#039;ansible-lint playbooks/&#039;\n                sh &#039;yamllint .&#039;\n            }\n        }\n        \n        stage(&#039;Syntax Check&#039;) {\n            steps {\n                sh &#039;ansible-playbook playbooks/site.yml --syntax-check&#039;\n            }\n        }\n        \n        stage(&#039;Dry Run&#039;) {\n            steps {\n                sh &#039;ansible-playbook playbooks/site.yml --check --diff&#039;\n            }\n        }\n        \n        stage(&#039;Deploy to Staging&#039;) {\n            when {\n                branch &#039;develop&#039;\n            }\n            steps {\n                sh &#039;ansible-playbook -i inventories/staging playbooks/site.yml&#039;\n            }\n        }\n        \n        stage(&#039;Deploy to Production&#039;) {\n            when {\n                branch &#039;main&#039;\n            }\n            steps {\n                input &#039;Deploy to Production?&#039;\n                sh &#039;ansible-playbook -i inventories/production playbooks/site.yml&#039;\n            }\n        }\n        \n        stage(&#039;Verify Deployment&#039;) {\n            steps {\n                sh &#039;ansible-playbook playbooks/system-verification.yml&#039;\n            }\n        }\n    }\n    \n    post {\n        always {\n            archiveArtifacts artifacts: &#039;logs/*.log&#039;, allowEmptyArchive: true\n            publishHTML([\n                allowMissing: false,\n                alwaysLinkToLastBuild: true,\n                keepAll: true,\n                reportDir: &#039;reports&#039;,\n                reportFiles: &#039;*.html&#039;,\n                reportName: &#039;Ansible Report&#039;\n            ])\n        }\n        failure {\n            emailext (\n                subject: &quot;Failed Pipeline: ${env.JOB_NAME} - ${env.BUILD_NUMBER}&quot;,\n                body: &quot;Something is wrong with ${env.BUILD_URL}&quot;,\n                to: &quot;${env.DEFAULT_RECIPIENTS}&quot;\n            )\n        }\n    }\n}\nEOF</code></pre>\n      </div>\n    </div>\n<h3 id=\"gitlab-ci-integration\" class=\"mobile-header\">GitLab CI Integration</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\">cat &gt; .gitlab-ci.yml &lt;&lt;EOF\nstages:\n  - lint\n  - test\n  - deploy-staging\n  - deploy-production\n\nvariables:\n  ANSIBLE_CONFIG: ansible.cfg\n  ANSIBLE_HOST_KEY_CHECKING: &quot;False&quot;\n\nbefore_script:\n  - pip install ansible ansible-lint yamllint\n  - ansible-galaxy install -r requirements.yml\n\nlint:\n  stage: lint\n  script:\n    - ansible-lint playbooks/\n    - yamllint .\n  rules:\n    - if: &#039;$CI_MERGE_REQUEST_IID&#039;\n    - if: &#039;$CI_COMMIT_BRANCH == $CI_DEFAULT_BRANCH&#039;\n\nsyntax-check:\n  stage: test\n  script:\n    - ansible-playbook playbooks/site.yml --syntax-check\n    - ansible-playbook playbooks/site.yml --check --diff -i inventories/staging\n  rules:\n    - if: &#039;$CI_MERGE_REQUEST_IID&#039;\n    - if: &#039;$CI_COMMIT_BRANCH == $CI_DEFAULT_BRANCH&#039;\n\ndeploy-staging:\n  stage: deploy-staging\n  script:\n    - ansible-playbook -i inventories/staging playbooks/site.yml\n  rules:\n    - if: &#039;$CI_COMMIT_BRANCH == &quot;develop&quot;&#039;\n\ndeploy-production:\n  stage: deploy-production\n  script:\n    - ansible-playbook -i inventories/production playbooks/site.yml\n  rules:\n    - if: &#039;$CI_COMMIT_BRANCH == $CI_DEFAULT_BRANCH&#039;\n      when: manual\n  environment:\n    name: production\n    url: https://production.example.com\nEOF</code></pre>\n      </div>\n    </div>\n<h2 id=\"troubleshooting-cross-platform\" class=\"mobile-header\">Troubleshooting (Cross-Platform)</h2>\n<h3 id=\"common-issues-and-solutions\" class=\"mobile-header\">Common Issues and Solutions</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Debug connection issues\nansible all -m ping -vvv\n\n# Check SSH connectivity\nansible all -m setup --ask-pass --ask-become-pass\n\n# Verify inventory\nansible-inventory --list\nansible-inventory --graph\n\n# Test specific host\nansible target-host -m command -a &quot;uptime&quot;\n\n# Check syntax without execution\nansible-playbook playbooks/site.yml --syntax-check\n\n# Dry run with verbose output\nansible-playbook playbooks/site.yml --check --diff -vvv\n\n# Debug variable resolution\nansible-playbook playbooks/site.yml --extra-vars=&quot;debug=true&quot; --tags debug\n\n# Check facts\nansible all -m setup | grep ansible_os_family\n\n# Connection troubleshooting\nssh -vvv user@target-host\n\n# Permission issues\nansible all -m file -a &quot;path=/tmp/test state=touch&quot; --become\n\n# Vault issues\nansible-vault view group_vars/all/vault.yml\n\n# Performance debugging\nansible-playbook playbooks/site.yml --start-at-task=&quot;specific task name&quot;\nansible-playbook playbooks/site.yml --step\n\n# Module testing\nansible localhost -m debug -a &quot;var=hostvars&quot;\nansible localhost -m setup\n\n# Check for syntax errors in roles\nfind roles/ -name &quot;*.yml&quot; -exec ansible-playbook {} --syntax-check \\;</code></pre>\n      </div>\n    </div>\n<h3 id=\"advanced-debugging\" class=\"mobile-header\">Advanced Debugging</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Enable comprehensive logging\nexport ANSIBLE_DEBUG=1\nexport ANSIBLE_VERBOSITY=4\nansible-playbook playbooks/site.yml\n\n# Profile playbook execution\nansible-playbook playbooks/site.yml --extra-vars=&quot;profile_tasks_sort_order=none&quot;\n\n# Memory usage analysis\nansible-playbook playbooks/site.yml --extra-vars=&quot;ansible_python_interpreter=/usr/bin/python3&quot;\n\n# Network debugging\nansible all -m command -a &quot;ss -tulpn&quot;\nansible all -m command -a &quot;netstat -rn&quot;\n\n# Process debugging\nansible all -m command -a &quot;ps aux --sort=-%mem | head -10&quot;\n\n# Disk usage analysis\nansible all -m command -a &quot;df -h&quot;\nansible all -m command -a &quot;du -sh /var/log/*&quot;\n\n# Service debugging\nansible all -m systemd -a &quot;name=nginx&quot; --become\nansible all -m command -a &quot;systemctl status nginx&quot; --become\n\n# Variable debugging\nansible-playbook playbooks/site.yml --extra-vars=&quot;debug_vars=true&quot; --tags debug_vars</code></pre>\n      </div>\n    </div>\n<h2 id=\"additional-resources\" class=\"mobile-header\">Additional Resources</h2>\n<li class=\"mobile-list-item\"><a href=\"https://docs.ansible.com/\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">Official Documentation</a></li>\n<li class=\"mobile-list-item\"><a href=\"https://galaxy.ansible.com/\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">Ansible Galaxy</a></li>\n<li class=\"mobile-list-item\"><a href=\"https://docs.ansible.com/ansible/latest/user_guide/playbooks_best_practices.html\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">Best Practices Guide</a></li>\n<li class=\"mobile-list-item\"><a href=\"https://docs.ansible.com/ansible/latest/user_guide/become.html#security-best-practices\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">Security Best Practices</a></li>\n<li class=\"mobile-list-item\"><a href=\"https://molecule.readthedocs.io/\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">Ansible Molecule Testing</a></li>\n<li class=\"mobile-list-item\"><a href=\"https://docs.ansible.com/ansible/latest/collections/index.html\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">Community Collections</a></li>\n<p class=\"mobile-paragraph\">---</p>\n<p class=\"mobile-paragraph\"><strong>Note:</strong> This guide is part of the <a href=\"https://howtomgr.github.io\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">HowToMgr</a> collection.</p>","readTime":"31 min","wordCount":6191,"lastBuilt":"2025-09-14T18:12:07.706Z"},{"name":"apache","displayName":"Apache","slug":"apache","description":"Repo for apache","category":"web-server","language":null,"stars":0,"forks":0,"topics":[],"githubUrl":"https://github.com/howtomgr/apache","updatedAt":"2025-09-14T01:29:40Z","createdAt":"2025-09-08T03:04:47Z","readmeRaw":"# Apache HTTP Server Installation Guide\n\nApache HTTP Server is a free and open-source cross-platform web server software developed and maintained by the Apache Software Foundation. Originally based on the NCSA HTTPd server, Apache has been the most popular web server on the Internet since April 1996, serving over 40% of active websites. It serves as a FOSS alternative to commercial web servers like Microsoft IIS, NGINX Plus, or F5 BIG-IP, offering enterprise-grade performance, security, and flexibility without licensing costs.\n\n## Prerequisites\n\n- **Hardware Requirements**:\n  - CPU: 1 core minimum (2+ cores recommended for production)\n  - RAM: 512MB minimum (2GB+ recommended for production)\n  - Storage: 500MB for installation (additional space for websites and logs)\n  - Network: Stable connectivity for serving web requests\n- **Operating System**: \n  - Linux: Any modern distribution with kernel 2.6.32+\n  - macOS: 10.12+ (Sierra or newer)\n  - Windows: Windows Server 2016+ or Windows 10\n  - FreeBSD: 11.0+\n- **Network Requirements**:\n  - Port 80 (HTTP)\n  - Port 443 (HTTPS)\n  - Additional ports for virtual hosts if needed\n- **Dependencies**:\n  - OpenSSL for SSL/TLS support\n  - PCRE for regular expressions\n  - APR (Apache Portable Runtime) libraries\n  - Zlib for compression\n- **System Access**: root or sudo privileges for installation\n\n## Installation\n\n### RHEL/CentOS/Rocky Linux/AlmaLinux\n\n```bash\n# Install Apache (httpd) and utilities\nsudo dnf install -y httpd httpd-tools mod_ssl mod_security\n\n# RHEL/CentOS 7 (using yum)\nsudo yum install -y epel-release\nsudo yum install -y httpd httpd-tools mod_ssl mod_security\n\n# Install additional modules\nsudo dnf install -y httpd-devel httpd-manual\n\n# Create necessary directories\nsudo mkdir -p /etc/httpd/conf.d\nsudo mkdir -p /var/log/httpd\nsudo mkdir -p /var/www/html\n\n# Set proper permissions\nsudo chown -R apache:apache /var/www/html\nsudo chown -R apache:apache /var/log/httpd\n\n# Enable and start service\nsudo systemctl enable --now httpd\n\n# Verify installation\nhttpd -v\nsudo systemctl status httpd\n```\n\n### Debian/Ubuntu\n\n```bash\n# Update package list\nsudo apt update\n\n# Install Apache and essential modules\nsudo apt install -y apache2 apache2-utils apache2-dev libapache2-mod-security2\n\n# Install additional tools\nsudo apt install -y apache2-doc ssl-cert\n\n# Enable essential modules\nsudo a2enmod rewrite ssl headers deflate expires security2 http2\n\n# Create necessary directories\nsudo mkdir -p /var/www/html\nsudo mkdir -p /var/log/apache2\n\n# Set proper permissions\nsudo chown -R www-data:www-data /var/www/html\nsudo chown -R www-data:www-data /var/log/apache2\n\n# Enable and start service\nsudo systemctl enable --now apache2\n\n# Verify installation\napache2ctl -v\nsudo systemctl status apache2\n```\n\n### Arch Linux\n\n```bash\n# Install Apache\nsudo pacman -S apache\n\n# Install additional modules\nsudo pacman -S apache-mod-security apache-mod-wsgi\n\n# Create apache user if not exists\nsudo useradd -r -d /srv/http -s /sbin/nologin -c \"Apache HTTP Server\" apache\n\n# Create necessary directories\nsudo mkdir -p /etc/httpd/conf.d\nsudo mkdir -p /var/log/httpd\nsudo mkdir -p /srv/http\n\n# Set proper permissions\nsudo chown -R apache:apache /srv/http\nsudo chown -R apache:apache /var/log/httpd\n\n# Edit main configuration\nsudo sed -i 's/#ServerName www.example.com:80/ServerName localhost:80/' /etc/httpd/conf/httpd.conf\n\n# Enable and start service\nsudo systemctl enable --now httpd\n\n# Verify installation\nhttpd -v\nsudo systemctl status httpd\n```\n\n### Alpine Linux\n\n```bash\n# Install Apache\napk add --no-cache apache2 apache2-ssl apache2-utils\n\n# Install additional modules\napk add --no-cache apache2-mod-wsgi apache2-mod-fcgid\n\n# Create apache user if not exists\nadduser -D -H -s /sbin/nologin -g apache apache\n\n# Create necessary directories\nmkdir -p /var/www/localhost/htdocs\nmkdir -p /var/log/apache2\nmkdir -p /run/apache2\n\n# Set proper permissions\nchown -R apache:apache /var/www/localhost/htdocs\nchown -R apache:apache /var/log/apache2\nchown -R apache:apache /run/apache2\n\n# Configure basic settings\nsed -i 's/#ServerName www.example.com:80/ServerName localhost:80/' /etc/apache2/httpd.conf\n\n# Enable and start service\nrc-update add apache2 default\nrc-service apache2 start\n\n# Verify installation\nhttpd -v\nrc-service apache2 status\n```\n\n### openSUSE/SLES\n\n```bash\n# openSUSE Leap/Tumbleweed\nsudo zypper install -y apache2 apache2-mod_ssl apache2-utils\n\n# Install additional modules\nsudo zypper install -y apache2-mod_security2 apache2-mod_wsgi\n\n# SLES 15\n# Enable web and scripting module\nsudo SUSEConnect -p sle-module-web-scripting/15.5/x86_64\nsudo zypper install -y apache2 apache2-mod_ssl\n\n# Create necessary directories\nsudo mkdir -p /etc/apache2/conf.d\nsudo mkdir -p /var/log/apache2\nsudo mkdir -p /srv/www/htdocs\n\n# Set proper permissions\nsudo chown -R wwwrun:www /srv/www/htdocs\nsudo chown -R wwwrun:www /var/log/apache2\n\n# Enable modules\nsudo a2enmod ssl\nsudo a2enmod rewrite\nsudo a2enmod headers\n\n# Enable and start service\nsudo systemctl enable --now apache2\n\n# Verify installation\napache2ctl -v\nsudo systemctl status apache2\n```\n\n### macOS\n\n```bash\n# Using Homebrew\nbrew install httpd\n\n# Start as service\nbrew services start httpd\n\n# Or run manually\nsudo /usr/local/bin/httpd -D FOREGROUND\n\n# Configuration location: /usr/local/etc/httpd/httpd.conf\n# Alternative: /opt/homebrew/etc/httpd/httpd.conf (Apple Silicon)\n\n# Create necessary directories\nsudo mkdir -p /usr/local/var/log/httpd\nsudo mkdir -p /usr/local/var/www\n\n# Set basic configuration\nsed -i '' 's/#ServerName www.example.com:8080/ServerName localhost:8080/' /usr/local/etc/httpd/httpd.conf\n\n# Verify installation\n/usr/local/bin/httpd -v\nbrew services list | grep httpd\n```\n\n### FreeBSD\n\n```bash\n# Using pkg\npkg install apache24\n\n# Using ports\ncd /usr/ports/www/apache24\nmake install clean\n\n# Enable in rc.conf\necho 'apache24_enable=\"YES\"' >> /etc/rc.conf\n\n# Create necessary directories\nmkdir -p /var/log/httpd\nmkdir -p /usr/local/www/apache24/data\n\n# Set proper permissions\nchown -R www:www /usr/local/www/apache24/data\nchown -R www:www /var/log/httpd\n\n# Start service\nservice apache24 start\n\n# Verify installation\n/usr/local/sbin/httpd -v\nservice apache24 status\n\n# Configuration location: /usr/local/etc/apache24/httpd.conf\n```\n\n### Windows\n\n```powershell\n# Method 1: Using Chocolatey\nchoco install apache-httpd\n\n# Method 2: Using Scoop\nscoop bucket add extras\nscoop install apache\n\n# Method 3: Manual installation from Apache Lounge\n# Download from https://www.apachelounge.com/download/\n# Extract to C:\\Apache24\n\n# Install as Windows service\nC:\\Apache24\\bin\\httpd.exe -k install -n Apache24\n\n# Start service\nStart-Service Apache24\n\n# Or using net command\nnet start Apache24\n\n# Configuration location: C:\\Apache24\\conf\\httpd.conf\n# Document root: C:\\Apache24\\htdocs\n\n# Verify installation\nC:\\Apache24\\bin\\httpd.exe -v\nGet-Service Apache24\n```\n\n## Initial Configuration\n\n### First-Run Setup\n\n1. **Create apache user** (if not created by package):\n```bash\n# Linux systems\nsudo useradd -r -d /var/www -s /sbin/nologin -c \"Apache HTTP Server\" apache\n```\n\n2. **Default configuration locations**:\n- RHEL/CentOS/Rocky/AlmaLinux: `/etc/httpd/conf/httpd.conf`\n- Debian/Ubuntu: `/etc/apache2/apache2.conf`\n- Arch Linux: `/etc/httpd/conf/httpd.conf`\n- Alpine Linux: `/etc/apache2/httpd.conf`\n- openSUSE/SLES: `/etc/apache2/httpd.conf`\n- macOS: `/usr/local/etc/httpd/httpd.conf`\n- FreeBSD: `/usr/local/etc/apache24/httpd.conf`\n- Windows: `C:\\Apache24\\conf\\httpd.conf`\n\n3. **Essential settings to change**:\n\n```apache\n# Basic security settings\nServerTokens Prod\nServerSignature Off\n\n# Set server name\nServerName localhost:80\n\n# Basic security modules\nLoadModule headers_module modules/mod_headers.so\nLoadModule rewrite_module modules/mod_rewrite.so\nLoadModule ssl_module modules/mod_ssl.so\n\n# Security headers\nHeader always set X-Frame-Options \"SAMEORIGIN\"\nHeader always set X-Content-Type-Options \"nosniff\"\nHeader always set X-XSS-Protection \"1; mode=block\"\n\n# Hide .htaccess files\n<FilesMatch \"^\\.ht\">\n    Require all denied\n</FilesMatch>\n\n# Disable directory browsing by default\nOptions -Indexes\n\n# Basic virtual host\n<VirtualHost *:80>\n    ServerName localhost\n    DocumentRoot /var/www/html\n    ErrorLog logs/error_log\n    CustomLog logs/access_log common\n</VirtualHost>\n```\n\n### Testing Initial Setup\n\n```bash\n# Test configuration syntax\nsudo apache2ctl configtest  # Debian/Ubuntu\nsudo httpd -t               # RHEL/CentOS/Arch\n\n# Check loaded modules\napache2ctl -M  # Debian/Ubuntu\nhttpd -M       # RHEL/CentOS/Arch\n\n# Test HTTP response\ncurl -I http://localhost\n\n# Check if Apache is listening\nsudo ss -tlnp | grep :80\nsudo netstat -tlnp | grep :80\n\n# View virtual host configuration\napache2ctl -S  # Debian/Ubuntu\nhttpd -S       # RHEL/CentOS/Arch\n```\n\n**WARNING:** Never expose Apache to the public internet without proper security hardening!\n\n## Service Management\n\n### systemd (RHEL, Debian, Ubuntu, Arch, openSUSE)\n\n```bash\n# Enable Apache to start on boot\nsudo systemctl enable apache2  # Debian/Ubuntu\nsudo systemctl enable httpd    # RHEL/CentOS/Arch\n\n# Start Apache\nsudo systemctl start apache2   # Debian/Ubuntu\nsudo systemctl start httpd     # RHEL/CentOS/Arch\n\n# Stop Apache\nsudo systemctl stop apache2    # Debian/Ubuntu\nsudo systemctl stop httpd      # RHEL/CentOS/Arch\n\n# Restart Apache\nsudo systemctl restart apache2 # Debian/Ubuntu\nsudo systemctl restart httpd   # RHEL/CentOS/Arch\n\n# Graceful reload (reload config without dropping connections)\nsudo systemctl reload apache2  # Debian/Ubuntu\nsudo systemctl reload httpd    # RHEL/CentOS/Arch\n\n# Check status\nsudo systemctl status apache2  # Debian/Ubuntu\nsudo systemctl status httpd    # RHEL/CentOS/Arch\n\n# View logs\nsudo journalctl -u apache2 -f  # Debian/Ubuntu\nsudo journalctl -u httpd -f    # RHEL/CentOS/Arch\n```\n\n### OpenRC (Alpine Linux)\n\n```bash\n# Enable Apache to start on boot\nrc-update add apache2 default\n\n# Start Apache\nrc-service apache2 start\n\n# Stop Apache\nrc-service apache2 stop\n\n# Restart Apache\nrc-service apache2 restart\n\n# Graceful reload\nrc-service apache2 reload\n\n# Check status\nrc-service apache2 status\n\n# View logs\ntail -f /var/log/apache2/error.log\n```\n\n### rc.d (FreeBSD)\n\n```bash\n# Enable in /etc/rc.conf\necho 'apache24_enable=\"YES\"' >> /etc/rc.conf\n\n# Start Apache\nservice apache24 start\n\n# Stop Apache\nservice apache24 stop\n\n# Restart Apache\nservice apache24 restart\n\n# Graceful reload\nservice apache24 graceful\n\n# Check status\nservice apache24 status\n\n# View configuration test\nservice apache24 configtest\n```\n\n### launchd (macOS)\n\n```bash\n# Using Homebrew services\nbrew services start httpd\nbrew services stop httpd\nbrew services restart httpd\n\n# Check status\nbrew services list | grep httpd\n\n# Manual control\nsudo /usr/local/bin/httpd -k start\nsudo /usr/local/bin/httpd -k stop\nsudo /usr/local/bin/httpd -k restart\nsudo /usr/local/bin/httpd -k graceful\n\n# Test configuration\n/usr/local/bin/httpd -t\n```\n\n### Windows Service Manager\n\n```powershell\n# Start Apache service\nStart-Service Apache24\n# Or: net start Apache24\n\n# Stop Apache service\nStop-Service Apache24\n# Or: net stop Apache24\n\n# Restart Apache service\nRestart-Service Apache24\n\n# Check status\nGet-Service Apache24\n\n# Manual control\nC:\\Apache24\\bin\\httpd.exe -k start\nC:\\Apache24\\bin\\httpd.exe -k stop\nC:\\Apache24\\bin\\httpd.exe -k restart\n\n# Test configuration\nC:\\Apache24\\bin\\httpd.exe -t\n\n# View logs\nGet-Content C:\\Apache24\\logs\\error.log -Wait\n```\n\n## Advanced Configuration\n\n### Virtual Hosts\n\n```apache\n# /etc/apache2/sites-available/example.com.conf (Debian/Ubuntu)\n# /etc/httpd/conf.d/example.com.conf (RHEL/CentOS)\n\n<VirtualHost *:80>\n    ServerName example.com\n    ServerAlias www.example.com\n    DocumentRoot /var/www/example.com/public_html\n    \n    # Logging\n    ErrorLog ${APACHE_LOG_DIR}/example.com_error.log\n    CustomLog ${APACHE_LOG_DIR}/example.com_access.log combined\n    \n    # Security\n    <Directory /var/www/example.com/public_html>\n        Options -Indexes +FollowSymLinks\n        AllowOverride All\n        Require all granted\n        \n        # Hide sensitive files\n        <Files ~ \"^\\.(htaccess|htpasswd|env)$\">\n            Require all denied\n        </Files>\n    </Directory>\n</VirtualHost>\n\n# SSL Virtual Host\n<VirtualHost *:443>\n    ServerName example.com\n    ServerAlias www.example.com\n    DocumentRoot /var/www/example.com/public_html\n    \n    # SSL Configuration\n    SSLEngine on\n    SSLCertificateFile /etc/letsencrypt/live/example.com/fullchain.pem\n    SSLCertificateKeyFile /etc/letsencrypt/live/example.com/privkey.pem\n    \n    # Modern SSL configuration\n    SSLProtocol all -SSLv3 -TLSv1 -TLSv1.1\n    SSLCipherSuite ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384\n    SSLHonorCipherOrder off\n    SSLSessionTickets off\n    \n    # Security headers\n    Header always set Strict-Transport-Security \"max-age=63072000; includeSubDomains; preload\"\n    Header always set X-Frame-Options \"SAMEORIGIN\"\n    Header always set X-Content-Type-Options \"nosniff\"\n    Header always set X-XSS-Protection \"1; mode=block\"\n    \n    # Logging\n    ErrorLog ${APACHE_LOG_DIR}/example.com_ssl_error.log\n    CustomLog ${APACHE_LOG_DIR}/example.com_ssl_access.log combined\n</VirtualHost>\n```\n\n### Performance Tuning\n\n```apache\n# MPM Event configuration (modern and efficient)\n<IfModule mpm_event_module>\n    StartServers             3\n    MinSpareThreads         75\n    MaxSpareThreads        250\n    ThreadsPerChild         25\n    MaxRequestWorkers      400\n    MaxConnectionsPerChild   0\n    ThreadLimit             64\n</IfModule>\n\n# Compression\n<IfModule mod_deflate.c>\n    SetOutputFilter DEFLATE\n    AddOutputFilterByType DEFLATE text/html text/css text/javascript text/xml text/plain\n    AddOutputFilterByType DEFLATE application/javascript application/xml+rss application/xml\n    AddOutputFilterByType DEFLATE application/json application/x-javascript\n    \n    # Don't compress images\n    SetEnvIfNoCase Request_URI \\.(?:gif|jpe?g|png|webp)$ no-gzip\n    SetEnvIfNoCase Request_URI \\.(?:exe|t?gz|zip|bz2|sit|rar)$ no-gzip\n</IfModule>\n\n# Caching\n<IfModule mod_expires.c>\n    ExpiresActive On\n    ExpiresByType image/jpg \"access plus 1 year\"\n    ExpiresByType image/jpeg \"access plus 1 year\"\n    ExpiresByType image/gif \"access plus 1 year\"\n    ExpiresByType image/png \"access plus 1 year\"\n    ExpiresByType image/webp \"access plus 1 year\"\n    ExpiresByType text/css \"access plus 1 month\"\n    ExpiresByType application/pdf \"access plus 1 month\"\n    ExpiresByType application/javascript \"access plus 1 month\"\n    ExpiresByType application/x-javascript \"access plus 1 month\"\n    ExpiresByType image/x-icon \"access plus 1 year\"\n    ExpiresDefault \"access plus 2 days\"\n</IfModule>\n```\n\n### Security Hardening\n\n```apache\n# Security configuration\nServerTokens Prod\nServerSignature Off\n\n# Disable unnecessary HTTP methods\n<LimitExcept GET POST HEAD>\n    Require all denied\n</LimitExcept>\n\n# Hide server information\nHeader always unset Server\nHeader unset X-Powered-By\n\n# Security headers\nHeader always set Strict-Transport-Security \"max-age=63072000; includeSubDomains; preload\"\nHeader always set X-Frame-Options \"SAMEORIGIN\"\nHeader always set X-Content-Type-Options \"nosniff\"\nHeader always set X-XSS-Protection \"1; mode=block\"\nHeader always set Referrer-Policy \"strict-origin-when-cross-origin\"\n\n# Disable TRACE method\nTraceEnable off\n\n# Timeout settings\nTimeout 60\nKeepAliveTimeout 15\n\n# Request limits\nLimitRequestBody 10485760  # 10MB\nLimitRequestFields 100\nLimitRequestFieldSize 8190\nLimitRequestLine 4094\n\n# Hide sensitive files\n<FilesMatch \"^\\.\">\n    Require all denied\n</FilesMatch>\n\n<FilesMatch \"\\.(bak|backup|swp|tmp|~)$\">\n    Require all denied\n</FilesMatch>\n\n# Disable server-status and server-info\n<Location \"/server-status\">\n    Require ip 127.0.0.1\n    Require ip ::1\n</Location>\n\n<Location \"/server-info\">\n    Require ip 127.0.0.1\n    Require ip ::1\n</Location>\n```\n\n## Reverse Proxy Setup\n\n### nginx as Frontend Proxy\n\n```nginx\n# /etc/nginx/sites-available/apache-proxy\nupstream apache_backend {\n    server 127.0.0.1:8080;\n    keepalive 32;\n}\n\nserver {\n    listen 80;\n    server_name example.com www.example.com;\n    return 301 https://$server_name$request_uri;\n}\n\nserver {\n    listen 443 ssl http2;\n    server_name example.com www.example.com;\n\n    ssl_certificate /etc/letsencrypt/live/example.com/fullchain.pem;\n    ssl_certificate_key /etc/letsencrypt/live/example.com/privkey.pem;\n\n    location / {\n        proxy_pass http://apache_backend;\n        proxy_set_header Host $host;\n        proxy_set_header X-Real-IP $remote_addr;\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n        proxy_set_header X-Forwarded-Proto $scheme;\n        \n        # Handle Apache redirects\n        proxy_redirect http://apache_backend https://$server_name;\n    }\n    \n    # Serve static files directly with nginx\n    location ~* \\.(css|js|png|jpg|jpeg|gif|ico|svg|woff|woff2|ttf|eot)$ {\n        try_files $uri @apache;\n        expires 1y;\n        add_header Cache-Control \"public, immutable\";\n    }\n    \n    location @apache {\n        proxy_pass http://apache_backend;\n        proxy_set_header Host $host;\n        proxy_set_header X-Real-IP $remote_addr;\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n        proxy_set_header X-Forwarded-Proto $scheme;\n    }\n}\n```\n\n### HAProxy Configuration\n\n```haproxy\n# /etc/haproxy/haproxy.cfg\nglobal\n    maxconn 4096\n    log stdout local0\n    chroot /var/lib/haproxy\n    stats socket /run/haproxy/admin.sock mode 660 level admin\n    stats timeout 30s\n    user haproxy\n    group haproxy\n    daemon\n\ndefaults\n    mode http\n    log global\n    option httplog\n    option dontlognull\n    option log-health-checks\n    timeout connect 5000\n    timeout client 50000\n    timeout server 50000\n    errorfile 400 /etc/haproxy/errors/400.http\n    errorfile 403 /etc/haproxy/errors/403.http\n    errorfile 408 /etc/haproxy/errors/408.http\n    errorfile 500 /etc/haproxy/errors/500.http\n    errorfile 502 /etc/haproxy/errors/502.http\n    errorfile 503 /etc/haproxy/errors/503.http\n    errorfile 504 /etc/haproxy/errors/504.http\n\nfrontend apache_frontend\n    bind *:80\n    bind *:443 ssl crt /etc/ssl/certs/example.com.pem\n    \n    # Redirect HTTP to HTTPS\n    redirect scheme https if !{ ssl_fc }\n    \n    # Security headers\n    http-response set-header Strict-Transport-Security \"max-age=63072000; includeSubDomains; preload\"\n    http-response set-header X-Frame-Options SAMEORIGIN\n    http-response set-header X-Content-Type-Options nosniff\n    \n    default_backend apache_servers\n\nbackend apache_servers\n    balance roundrobin\n    option httpchk GET / HTTP/1.1\\r\\nHost:\\ localhost\n    server apache1 127.0.0.1:8080 check\n    server apache2 127.0.0.1:8081 check backup\n```\n\n### Caddy Configuration\n\n```caddyfile\nexample.com www.example.com {\n    reverse_proxy localhost:8080\n    \n    # Security headers\n    header {\n        Strict-Transport-Security \"max-age=63072000; includeSubDomains; preload\"\n        X-Frame-Options \"SAMEORIGIN\"\n        X-Content-Type-Options \"nosniff\"\n        X-XSS-Protection \"1; mode=block\"\n    }\n    \n    # Compression\n    encode gzip\n    \n    # Logging\n    log {\n        output file /var/log/caddy/example.com.log\n        level INFO\n    }\n}\n```\n\n### Apache as Reverse Proxy\n\n```apache\n# Enable required modules\nLoadModule proxy_module modules/mod_proxy.so\nLoadModule proxy_http_module modules/mod_proxy_http.so\nLoadModule proxy_balancer_module modules/mod_proxy_balancer.so\n\n<VirtualHost *:80>\n    ServerName example.com\n    \n    # Proxy configuration\n    ProxyPreserveHost On\n    ProxyPass / http://backend-server:8080/\n    ProxyPassReverse / http://backend-server:8080/\n    \n    # Load balancing\n    ProxyPass /app/ balancer://mycluster/\n    ProxyPassReverse /app/ balancer://mycluster/\n    \n    <Proxy balancer://mycluster>\n        BalancerMember http://backend1:8080\n        BalancerMember http://backend2:8080\n        ProxySet hcmethod GET\n        ProxySet hcuri /health\n    </Proxy>\n    \n    # Balancer manager\n    <Location \"/balancer-manager\">\n        SetHandler balancer-manager\n        Require ip 127.0.0.1\n        Require ip ::1\n    </Location>\n</VirtualHost>\n```\n\n## Security Configuration\n\n### SSL/TLS Configuration\n\n```apache\n# Load SSL module\nLoadModule ssl_module modules/mod_ssl.so\n\n# Global SSL configuration\nSSLEngine on\nSSLProtocol all -SSLv3 -TLSv1 -TLSv1.1\nSSLCipherSuite ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384\nSSLHonorCipherOrder off\nSSLSessionCache shmcb:/var/run/ssl_scache(512000)\nSSLSessionCacheTimeout 300\nSSLUseStapling On\nSSLStaplingCache shmcb:/var/run/ocsp(128000)\nSSLCompression off\nSSLSessionTickets off\n\n# Generate DH parameters\n# openssl dhparam -out /etc/ssl/certs/dhparam.pem 2048\nSSLOpenSSLConfCmd DHParameters /etc/ssl/certs/dhparam.pem\n```\n\n### ModSecurity WAF\n\n```bash\n# Install ModSecurity\n# Ubuntu/Debian\nsudo apt install libapache2-mod-security2\n\n# RHEL/CentOS\nsudo dnf install mod_security\n\n# Enable module\nsudo a2enmod security2  # Ubuntu/Debian\n\n# Download OWASP Core Rule Set\nsudo mkdir -p /etc/modsecurity\ncd /etc/modsecurity\nsudo wget https://github.com/coreruleset/coreruleset/archive/v3.3.4.tar.gz\nsudo tar xzf v3.3.4.tar.gz\nsudo mv coreruleset-3.3.4 crs\nsudo cp crs/crs-setup.conf.example crs/crs-setup.conf\n```\n\n```apache\n# ModSecurity configuration\n<IfModule mod_security2.c>\n    SecRuleEngine On\n    SecRequestBodyAccess On\n    SecRequestBodyLimit 13107200\n    SecRequestBodyNoFilesLimit 131072\n    SecRequestBodyInMemoryLimit 131072\n    SecRequestBodyLimitAction Reject\n    SecResponseBodyAccess Off\n    SecDebugLog /var/log/apache2/modsec_debug.log\n    SecDebugLogLevel 0\n    SecAuditEngine RelevantOnly\n    SecAuditLogRelevantStatus \"^(?:5|4(?!04))\"\n    SecAuditLogParts ABDEFHIJZ\n    SecAuditLogType Serial\n    SecAuditLog /var/log/apache2/modsec_audit.log\n    \n    # Include OWASP Core Rule Set\n    Include /etc/modsecurity/crs/crs-setup.conf\n    Include /etc/modsecurity/crs/rules/*.conf\n</IfModule>\n```\n\n### Firewall Rules\n\n```bash\n# UFW (Ubuntu/Debian)\nsudo ufw allow 'Apache Full'    # HTTP and HTTPS\nsudo ufw allow 80/tcp\nsudo ufw allow 443/tcp\nsudo ufw enable\n\n# firewalld (RHEL/CentOS/openSUSE)\nsudo firewall-cmd --permanent --add-service=http\nsudo firewall-cmd --permanent --add-service=https\nsudo firewall-cmd --reload\n\n# iptables\nsudo iptables -A INPUT -p tcp --dport 80 -j ACCEPT\nsudo iptables -A INPUT -p tcp --dport 443 -j ACCEPT\nsudo iptables-save > /etc/iptables/rules.v4\n\n# pf (FreeBSD)\n# Add to /etc/pf.conf\npass in on $ext_if proto tcp from any to any port {80, 443}\n\n# Windows Firewall\nNew-NetFirewallRule -DisplayName \"Apache HTTP\" -Direction Inbound -Protocol TCP -LocalPort 80 -Action Allow\nNew-NetFirewallRule -DisplayName \"Apache HTTPS\" -Direction Inbound -Protocol TCP -LocalPort 443 -Action Allow\n```\n\n### Access Control\n\n```apache\n# IP-based access control\n<Directory \"/var/www/admin\">\n    Require ip 192.168.1.0/24\n    Require ip 127.0.0.1\n    Require ip ::1\n</Directory>\n\n# Password protection\n<Directory \"/var/www/private\">\n    AuthType Basic\n    AuthName \"Restricted Area\"\n    AuthUserFile /etc/apache2/.htpasswd\n    Require valid-user\n</Directory>\n\n# Create password file\n# htpasswd -c /etc/apache2/.htpasswd username\n\n# Client certificate authentication\n<Directory \"/var/www/secure\">\n    SSLRequireSSL\n    SSLVerifyClient require\n    SSLVerifyDepth 1\n    SSLCACertificateFile /etc/ssl/certs/ca.crt\n</Directory>\n```\n\n## Database Setup\n\nApache HTTP Server doesn't require a database, but it commonly integrates with databases through various modules and applications:\n\n### PHP Database Integration\n\n```apache\n# PHP module configuration\nLoadModule php_module modules/libphp.so\n\n<IfModule mod_php.c>\n    AddType application/x-httpd-php .php\n    php_admin_flag allow_url_include Off\n    php_admin_flag allow_url_fopen Off\n    php_admin_value upload_max_filesize 64M\n    php_admin_value post_max_size 64M\n    php_admin_value memory_limit 256M\n    php_admin_value max_execution_time 300\n    php_admin_flag expose_php Off\n</IfModule>\n```\n\n### Database Connection Examples\n\n```apache\n# Environment variables for database connections\nSetEnv DB_HOST localhost\nSetEnv DB_NAME myapp\nSetEnv DB_USER webapp\nSetEnv DB_PASS secretpassword\n\n# Secure environment variables from external access\n<Location \"/server-status\">\n    SetHandler server-status\n    Require local\n</Location>\n```\n\n### CGI Database Applications\n\n```apache\n# Enable CGI for database applications\nLoadModule cgi_module modules/mod_cgi.so\n\n<Directory \"/var/www/cgi-bin\">\n    AllowOverride None\n    Options +ExecCGI\n    AddHandler cgi-script .cgi .pl .py\n    Require all granted\n</Directory>\n\n# Python WSGI for database applications\nLoadModule wsgi_module modules/mod_wsgi.so\n\nWSGIDaemonProcess myapp python-home=/path/to/venv python-path=/path/to/app\nWSGIProcessGroup myapp\nWSGIScriptAlias / /path/to/app/app.wsgi\n```\n\n## Performance Optimization\n\n### System-level Tuning\n\n```bash\n# Increase system limits for Apache\nsudo tee -a /etc/security/limits.conf <<EOF\napache soft nofile 65535\napache hard nofile 65535\nwww-data soft nofile 65535\nwww-data hard nofile 65535\nEOF\n\n# Kernel optimization for web servers\nsudo tee -a /etc/sysctl.conf <<EOF\n# Apache optimization\nnet.core.somaxconn = 65535\nnet.core.netdev_max_backlog = 5000\nnet.ipv4.tcp_max_syn_backlog = 65535\nnet.ipv4.tcp_fin_timeout = 10\nnet.ipv4.tcp_tw_reuse = 1\nnet.ipv4.ip_local_port_range = 15000 65000\nfs.file-max = 100000\n\n# Memory management\nvm.swappiness = 10\nvm.dirty_ratio = 15\nvm.dirty_background_ratio = 5\nEOF\n\nsudo sysctl -p\n```\n\n### Apache Performance Settings\n\n```apache\n# Optimized MPM Event configuration\n<IfModule mpm_event_module>\n    StartServers             4\n    MinSpareThreads         25\n    MaxSpareThreads        75 \n    ThreadsPerChild         25\n    MaxRequestWorkers      400\n    MaxConnectionsPerChild   0\n    ThreadLimit             64\n    ServerLimit             16\n    AsyncRequestWorkerFactor 2\n</IfModule>\n\n# Connection settings\nKeepAlive On\nKeepAliveTimeout 15\nMaxKeepAliveRequests 100\n\n# Timeout settings\nTimeout 60\nLimitRequestLine 4094\nLimitRequestFieldSize 8190\nLimitRequestFields 100\nLimitRequestBody 10485760\n\n# Buffer settings\nEnableSendfile On\nEnableMMAP On\n```\n\n### Caching Configuration\n\n```apache\n# Enable caching modules\nLoadModule cache_module modules/mod_cache.so\nLoadModule cache_disk_module modules/mod_cache_disk.so\n\n# Disk cache configuration\n<IfModule mod_cache_disk.c>\n    CacheRoot /var/cache/apache2\n    CacheDirLevels 2\n    CacheDirLength 1\n    CacheEnable disk /\n    CacheIgnoreHeaders Set-Cookie\n    CacheDefaultExpire 3600\n    CacheMaxExpire 86400\n    CacheLastModifiedFactor 0.1\n    CacheHeader on\n</IfModule>\n\n# Memory cache (alternative to disk cache)\nLoadModule cache_socache_module modules/mod_cache_socache.so\n\n<IfModule mod_cache_socache.c>\n    CacheEnable socache /\n    CacheSocache shmcb\n    CacheSocacheMaxSize 102400\n</IfModule>\n```\n\n### Content Optimization\n\n```apache\n# Compression\n<IfModule mod_deflate.c>\n    SetOutputFilter DEFLATE\n    AddOutputFilterByType DEFLATE text/html text/css text/javascript text/xml text/plain\n    AddOutputFilterByType DEFLATE application/javascript application/xml+rss application/xml\n    AddOutputFilterByType DEFLATE application/json application/x-javascript application/xhtml+xml\n    \n    # Don't compress images or binaries\n    SetEnvIfNoCase Request_URI \\.(?:gif|jpe?g|png|webp|pdf|zip|rar|exe)$ no-gzip\n    \n    # Compression level (1-9, 6 is good balance)\n    DeflateCompressionLevel 6\n</IfModule>\n\n# Static file caching\n<IfModule mod_expires.c>\n    ExpiresActive On\n    \n    # Images\n    ExpiresByType image/jpg \"access plus 1 year\"\n    ExpiresByType image/jpeg \"access plus 1 year\"\n    ExpiresByType image/gif \"access plus 1 year\"\n    ExpiresByType image/png \"access plus 1 year\"\n    ExpiresByType image/webp \"access plus 1 year\"\n    ExpiresByType image/svg+xml \"access plus 1 year\"\n    \n    # CSS and JavaScript\n    ExpiresByType text/css \"access plus 1 month\"\n    ExpiresByType application/javascript \"access plus 1 month\"\n    ExpiresByType application/x-javascript \"access plus 1 month\"\n    \n    # Fonts\n    ExpiresByType font/woff \"access plus 1 year\"\n    ExpiresByType font/woff2 \"access plus 1 year\"\n    ExpiresByType application/font-woff \"access plus 1 year\"\n    ExpiresByType application/font-woff2 \"access plus 1 year\"\n    \n    # Icons\n    ExpiresByType image/x-icon \"access plus 1 year\"\n    ExpiresByType image/vnd.microsoft.icon \"access plus 1 year\"\n    \n    # HTML\n    ExpiresByType text/html \"access plus 300 seconds\"\n    \n    # Default\n    ExpiresDefault \"access plus 1 day\"\n</IfModule>\n```\n\n## Monitoring\n\n### Built-in Monitoring\n\n```apache\n# Enable server-status module\nLoadModule status_module modules/mod_status.so\n\n<Location \"/server-status\">\n    SetHandler server-status\n    Require ip 127.0.0.1\n    Require ip ::1\n</Location>\n\n<Location \"/server-info\">\n    SetHandler server-info\n    Require ip 127.0.0.1\n    Require ip ::1\n</Location>\n\n# Extended status\nExtendedStatus On\n```\n\n### Log Analysis\n\n```bash\n# Monitor Apache access logs\ntail -f /var/log/apache2/access.log  # Debian/Ubuntu\ntail -f /var/log/httpd/access_log    # RHEL/CentOS\n\n# Monitor error logs\ntail -f /var/log/apache2/error.log   # Debian/Ubuntu\ntail -f /var/log/httpd/error_log     # RHEL/CentOS\n\n# Analyze top IPs\nawk '{print $1}' /var/log/apache2/access.log | sort | uniq -c | sort -rn | head -10\n\n# Analyze response codes\nawk '{print $9}' /var/log/apache2/access.log | sort | uniq -c | sort -rn\n\n# Analyze most requested files\nawk '{print $7}' /var/log/apache2/access.log | sort | uniq -c | sort -rn | head -10\n\n# Check for errors\ngrep \"error\" /var/log/apache2/error.log | tail -10\n```\n\n### External Monitoring Tools\n\n```bash\n# Install monitoring tools\n# GoAccess for real-time log analysis\nsudo apt install goaccess  # Ubuntu/Debian\nsudo dnf install goaccess  # RHEL/CentOS\n\n# Real-time analysis\ngoaccess /var/log/apache2/access.log -c\n\n# Generate HTML report\ngoaccess /var/log/apache2/access.log -o /var/www/html/stats.html --log-format=COMBINED --real-time-html\n\n# Install htop for process monitoring\nsudo apt install htop\nhtop -p $(pgrep apache2 | head -5 | tr '\\n' ',' | sed 's/,$//')\n```\n\n### Performance Monitoring\n\n```bash\n# Monitor Apache processes\nps aux | grep apache2 | grep -v grep\n\n# Monitor memory usage\nps aux --sort=-%mem | grep apache2 | head -10\n\n# Monitor connection counts\nss -tan | grep :80 | wc -l\nss -tan | grep :443 | wc -l\n\n# Check server-status (if enabled)\ncurl http://localhost/server-status\ncurl http://localhost/server-status?auto  # Machine readable\n\n# Monitor file descriptors\nlsof -u apache2 | wc -l  # Ubuntu/Debian\nlsof -u apache | wc -l   # RHEL/CentOS\n```\n\n## Backup and Restore\n\n### Configuration Backup\n\n```bash\n#!/bin/bash\n# backup-apache-config.sh\n\nBACKUP_DIR=\"/backup/apache/$(date +%Y%m%d_%H%M%S)\"\nmkdir -p \"$BACKUP_DIR\"\n\n# Detect Apache configuration directory\nif [ -d /etc/apache2 ]; then\n    # Debian/Ubuntu\n    CONFIG_DIR=\"/etc/apache2\"\n    LOG_DIR=\"/var/log/apache2\"\n    WEB_DIR=\"/var/www\"\nelif [ -d /etc/httpd ]; then\n    # RHEL/CentOS\n    CONFIG_DIR=\"/etc/httpd\"\n    LOG_DIR=\"/var/log/httpd\"\n    WEB_DIR=\"/var/www\"\nfi\n\n# Backup Apache configuration\ntar czf \"$BACKUP_DIR/apache-config.tar.gz\" -C / \"${CONFIG_DIR#/}\"\n\n# Backup website files\ntar czf \"$BACKUP_DIR/apache-sites.tar.gz\" -C \"$WEB_DIR\" .\n\n# Backup SSL certificates\nif [ -d /etc/letsencrypt ]; then\n    tar czf \"$BACKUP_DIR/ssl-certs.tar.gz\" -C /etc letsencrypt\nfi\n\n# Backup recent logs (last 7 days)\nfind \"$LOG_DIR\" -name \"*.log\" -mtime -7 -exec tar czf \"$BACKUP_DIR/apache-logs.tar.gz\" {} +\n\n# Package version info\nif command -v apache2ctl &> /dev/null; then\n    apache2ctl -v > \"$BACKUP_DIR/version.txt\"\nelif command -v httpd &> /dev/null; then\n    httpd -v > \"$BACKUP_DIR/version.txt\"\nfi\n\necho \"Backup completed: $BACKUP_DIR\"\n```\n\n### Website Backup\n\n```bash\n#!/bin/bash\n# backup-websites.sh\n\nBACKUP_DIR=\"/backup/websites/$(date +%Y%m%d_%H%M%S)\"\nWEB_ROOT=\"/var/www/html\"\n\nmkdir -p \"$BACKUP_DIR\"\n\n# Backup all websites\nfor site in \"$WEB_ROOT\"/*; do\n    if [ -d \"$site\" ]; then\n        site_name=$(basename \"$site\")\n        echo \"Backing up $site_name...\"\n        tar czf \"$BACKUP_DIR/${site_name}.tar.gz\" -C \"$WEB_ROOT\" \"$site_name\"\n    fi\ndone\n\n# Backup databases (if applicable)\nif command -v mysqldump &> /dev/null; then\n    for db in $(mysql -e \"SHOW DATABASES;\" | grep -v -E \"^(Database|information_schema|performance_schema|mysql|sys)$\"); do\n        mysqldump \"$db\" | gzip > \"$BACKUP_DIR/${db}.sql.gz\"\n    done\nfi\n\n# Keep only last 30 days of backups\nfind /backup/websites -type d -mtime +30 -exec rm -rf {} + 2>/dev/null\n\necho \"Website backup completed: $BACKUP_DIR\"\n```\n\n### Restore Procedures\n\n```bash\n#!/bin/bash\n# restore-apache.sh\n\nBACKUP_DIR=\"$1\"\nif [ -z \"$BACKUP_DIR\" ]; then\n    echo \"Usage: $0 <backup-directory>\"\n    exit 1\nfi\n\n# Stop Apache\nif command -v systemctl &> /dev/null; then\n    sudo systemctl stop apache2 || sudo systemctl stop httpd\nelif command -v service &> /dev/null; then\n    sudo service apache2 stop || sudo service httpd stop\nfi\n\n# Restore configuration\nif [ -f \"$BACKUP_DIR/apache-config.tar.gz\" ]; then\n    sudo tar xzf \"$BACKUP_DIR/apache-config.tar.gz\" -C /\n    echo \"Configuration restored\"\nfi\n\n# Restore websites\nif [ -f \"$BACKUP_DIR/apache-sites.tar.gz\" ]; then\n    sudo tar xzf \"$BACKUP_DIR/apache-sites.tar.gz\" -C /var/www\n    echo \"Websites restored\"\nfi\n\n# Restore SSL certificates\nif [ -f \"$BACKUP_DIR/ssl-certs.tar.gz\" ]; then\n    sudo tar xzf \"$BACKUP_DIR/ssl-certs.tar.gz\" -C /etc\n    echo \"SSL certificates restored\"\nfi\n\n# Test configuration\nif command -v apache2ctl &> /dev/null; then\n    sudo apache2ctl configtest\n    if [ $? -eq 0 ]; then\n        sudo systemctl start apache2\n    fi\nelif command -v httpd &> /dev/null; then\n    sudo httpd -t\n    if [ $? -eq 0 ]; then\n        sudo systemctl start httpd\n    fi\nfi\n\necho \"Restore completed\"\n```\n\n### Automated Backup\n\n```bash\n# Create cron job for daily backups\nsudo tee /etc/cron.d/apache-backup <<EOF\n# Apache daily backup\n0 2 * * * root /usr/local/bin/backup-apache-config.sh\n0 3 * * * root /usr/local/bin/backup-websites.sh\nEOF\n\n# Make scripts executable\nsudo chmod +x /usr/local/bin/backup-apache-config.sh\nsudo chmod +x /usr/local/bin/backup-websites.sh\n```\n\n## Troubleshooting\n\n### Common Issues\n\n1. **Apache won't start**:\n```bash\n# Check configuration syntax\nsudo apache2ctl configtest  # Debian/Ubuntu\nsudo httpd -t               # RHEL/CentOS\n\n# Check error logs\nsudo tail -20 /var/log/apache2/error.log  # Debian/Ubuntu\nsudo tail -20 /var/log/httpd/error_log    # RHEL/CentOS\n\n# Check port conflicts\nsudo ss -tlnp | grep :80\nsudo lsof -i :80\n\n# Check permissions\nls -la /var/www/html\nps aux | grep apache2\n```\n\n2. **Permission denied errors**:\n```bash\n# Fix ownership\nsudo chown -R www-data:www-data /var/www/html  # Debian/Ubuntu\nsudo chown -R apache:apache /var/www/html      # RHEL/CentOS\n\n# Fix permissions\nsudo find /var/www/html -type d -exec chmod 755 {} \\;\nsudo find /var/www/html -type f -exec chmod 644 {} \\;\n\n# Check SELinux (RHEL/CentOS)\ngetenforce\nsudo setsebool -P httpd_can_network_connect 1\nsudo restorecon -Rv /var/www/html\n```\n\n3. **Virtual host not working**:\n```bash\n# Check virtual host configuration\napache2ctl -S  # Debian/Ubuntu\nhttpd -S       # RHEL/CentOS\n\n# Enable virtual host (Debian/Ubuntu)\nsudo a2ensite example.com.conf\nsudo systemctl reload apache2\n\n# Test virtual host\ncurl -H \"Host: example.com\" http://localhost/\n```\n\n4. **SSL certificate issues**:\n```bash\n# Check certificate files\nsudo openssl x509 -in /etc/ssl/certs/example.com.crt -text -noout\n\n# Test SSL configuration\necho | openssl s_client -servername example.com -connect example.com:443\n\n# Check SSL module\napache2ctl -M | grep ssl  # Debian/Ubuntu\nhttpd -M | grep ssl       # RHEL/CentOS\n```\n\n### Debug Mode\n\n```apache\n# Enable debug logging\nLogLevel debug\n\n# Module-specific debug\nLogLevel ssl:debug\nLogLevel rewrite:debug\n\n# Custom debug log format\nLogFormat \"%h %l %u %t \\\"%r\\\" %>s %b \\\"%{Referer}i\\\" \\\"%{User-agent}i\\\" %D\" debug\nCustomLog /var/log/apache2/debug.log debug\n```\n\n### Performance Issues\n\n```bash\n# Monitor Apache processes\ntop -p $(pgrep apache2 | head -5 | tr '\\n' ',' | sed 's/,$//')\n\n# Check memory usage\nps aux --sort=-%mem | grep apache2\n\n# Monitor connections\nwatch 'ss -tan | grep :80 | wc -l'\n\n# Check slow queries (if applicable)\ngrep \"taking too long\" /var/log/apache2/error.log\n\n# Analyze configuration\napache2ctl -t -D DUMP_VHOSTS\napache2ctl -t -D DUMP_MODULES\n```\n\n## Maintenance\n\n### Update Procedures\n\n```bash\n# RHEL/CentOS/Rocky/AlmaLinux\nsudo dnf check-update httpd\nsudo dnf update httpd httpd-tools mod_ssl\n\n# Debian/Ubuntu\nsudo apt update\nsudo apt upgrade apache2 apache2-utils libapache2-mod-ssl\n\n# Arch Linux\nsudo pacman -Syu apache\n\n# Alpine Linux\napk update\napk upgrade apache2\n\n# openSUSE\nsudo zypper update apache2\n\n# FreeBSD\npkg update\npkg upgrade apache24\n\n# macOS\nbrew upgrade httpd\n\n# Always test configuration after update\nsudo apache2ctl configtest  # Debian/Ubuntu\nsudo httpd -t               # RHEL/CentOS\n\n# Graceful restart to apply updates\nsudo systemctl reload apache2  # Debian/Ubuntu\nsudo systemctl reload httpd    # RHEL/CentOS\n```\n\n### Log Rotation\n\n```bash\n# Configure log rotation for Apache\nsudo tee /etc/logrotate.d/apache2 <<EOF\n/var/log/apache2/*.log {\n    daily\n    missingok\n    rotate 14\n    compress\n    delaycompress\n    notifempty\n    create 640 root adm\n    sharedscripts\n    postrotate\n        if /bin/pidof apache2 > /dev/null ; then \\\n            /usr/sbin/apache2ctl graceful > /dev/null; \\\n        fi\n    endscript\n}\nEOF\n\n# For RHEL/CentOS\nsudo tee /etc/logrotate.d/httpd <<EOF\n/var/log/httpd/*log {\n    daily\n    missingok\n    rotate 14\n    compress\n    delaycompress\n    notifempty\n    sharedscripts\n    postrotate\n        /bin/systemctl reload httpd.service > /dev/null 2>/dev/null || true\n    endscript\n}\nEOF\n```\n\n### Health Checks\n\n```bash\n#!/bin/bash\n# apache-health-check.sh\n\n# Check if Apache is running\nif ! pgrep apache2 > /dev/null && ! pgrep httpd > /dev/null; then\n    echo \"CRITICAL: Apache is not running\"\n    exit 2\nfi\n\n# Check if Apache responds to HTTP requests\nif ! curl -f -s http://localhost > /dev/null; then\n    echo \"CRITICAL: Apache not responding to HTTP requests\"\n    exit 2\nfi\n\n# Check configuration syntax\nif command -v apache2ctl &> /dev/null; then\n    if ! apache2ctl configtest &> /dev/null; then\n        echo \"WARNING: Apache configuration has syntax errors\"\n        exit 1\n    fi\nelif command -v httpd &> /dev/null; then\n    if ! httpd -t &> /dev/null; then\n        echo \"WARNING: Apache configuration has syntax errors\"\n        exit 1\n    fi\nfi\n\n# Check disk space for logs\nLOG_USAGE=$(df /var/log | awk 'NR==2 {print $5}' | sed 's/%//')\nif [ \"$LOG_USAGE\" -gt 90 ]; then\n    echo \"WARNING: Log directory is ${LOG_USAGE}% full\"\n    exit 1\nfi\n\necho \"OK: Apache is healthy\"\nexit 0\n```\n\n### Cleanup Tasks\n\n```bash\n# Clean old log files\nfind /var/log/apache2 -name \"*.log.*\" -mtime +30 -delete  # Debian/Ubuntu\nfind /var/log/httpd -name \"*log.*\" -mtime +30 -delete     # RHEL/CentOS\n\n# Clean Apache cache\nrm -rf /var/cache/apache2/*\n\n# Clean temporary files\nfind /tmp -name \"apache*\" -mtime +7 -delete\n\n# Optimize log files (remove old entries)\nsudo journalctl --vacuum-time=30d\n```\n\n## Integration Examples\n\n### PHP Integration\n\n```bash\n# Install PHP\nsudo apt install php libapache2-mod-php  # Ubuntu/Debian\nsudo dnf install php php-cli              # RHEL/CentOS\n\n# Enable PHP module\nsudo a2enmod php8.1  # Ubuntu/Debian\n\n# Test PHP\necho \"<?php phpinfo(); ?>\" | sudo tee /var/www/html/info.php\n```\n\n### WordPress Integration\n\n```apache\n<VirtualHost *:443>\n    ServerName blog.example.com\n    DocumentRoot /var/www/wordpress\n    \n    SSLEngine on\n    SSLCertificateFile /etc/letsencrypt/live/blog.example.com/fullchain.pem\n    SSLCertificateKeyFile /etc/letsencrypt/live/blog.example.com/privkey.pem\n    \n    <Directory /var/www/wordpress>\n        AllowOverride All\n        Options -Indexes +FollowSymLinks\n        Require all granted\n    </Directory>\n    \n    # WordPress-specific rules\n    RewriteEngine On\n    RewriteRule ^/wp-admin/install.php$ - [F]\n    RewriteRule ^/wp-config-sample.php$ - [F]\n    \n    # Security for wp-config.php\n    <Files wp-config.php>\n        Require all denied\n    </Files>\n</VirtualHost>\n```\n\n### Python WSGI Integration\n\n```apache\n# Load WSGI module\nLoadModule wsgi_module modules/mod_wsgi.so\n\n<VirtualHost *:443>\n    ServerName app.example.com\n    DocumentRoot /var/www/python-app\n    \n    WSGIDaemonProcess app python-home=/var/www/python-app/venv python-path=/var/www/python-app\n    WSGIProcessGroup app\n    WSGIScriptAlias / /var/www/python-app/app.wsgi\n    \n    <Directory /var/www/python-app>\n        WSGIApplicationGroup %{GLOBAL}\n        Require all granted\n    </Directory>\n</VirtualHost>\n```\n\n### Node.js Proxy Integration\n\n```apache\n<VirtualHost *:443>\n    ServerName node.example.com\n    \n    ProxyPreserveHost On\n    ProxyPass / http://localhost:3000/\n    ProxyPassReverse / http://localhost:3000/\n    \n    # WebSocket support\n    ProxyPass /socket.io/ ws://localhost:3000/socket.io/\n    ProxyPassReverse /socket.io/ ws://localhost:3000/socket.io/\n    \n    # Static files served by Apache\n    Alias /static /var/www/node-app/public\n    <Directory /var/www/node-app/public>\n        Require all granted\n        ExpiresActive On\n        ExpiresDefault \"access plus 1 year\"\n    </Directory>\n</VirtualHost>\n```\n\n## Additional Resources\n\n- [Official Documentation](https://httpd.apache.org/docs/)\n- [GitHub Repository](https://github.com/apache/httpd)\n- [Security Guide](https://httpd.apache.org/docs/2.4/misc/security_tips.html)\n- [Performance Tuning](https://httpd.apache.org/docs/2.4/misc/perf-tuning.html)\n- [Apache Modules](https://httpd.apache.org/docs/2.4/mod/)\n- [Virtual Hosts Guide](https://httpd.apache.org/docs/2.4/vhosts/)\n- [SSL/TLS Guide](https://httpd.apache.org/docs/2.4/ssl/)\n- [Community Mailing Lists](https://httpd.apache.org/lists.html)\n\n---\n\n**Note:** This guide is part of the [HowToMgr](https://howtomgr.github.io) collection. Always refer to official documentation for the most up-to-date information.","readmeHtml":"<h1 id=\"apache-http-server-installation-guide\" class=\"mobile-header\">Apache HTTP Server Installation Guide</h1>\n<p class=\"mobile-paragraph\">Apache HTTP Server is a free and open-source cross-platform web server software developed and maintained by the Apache Software Foundation. Originally based on the NCSA HTTPd server, Apache has been the most popular web server on the Internet since April 1996, serving over 40% of active websites. It serves as a FOSS alternative to commercial web servers like Microsoft IIS, NGINX Plus, or F5 BIG-IP, offering enterprise-grade performance, security, and flexibility without licensing costs.</p>\n<h2 id=\"prerequisites\" class=\"mobile-header\">Prerequisites</h2>\n<li class=\"mobile-list-item\"><strong>Hardware Requirements</strong>:</li>\n<li class=\"mobile-list-item\">CPU: 1 core minimum (2+ cores recommended for production)</li>\n<li class=\"mobile-list-item\">RAM: 512MB minimum (2GB+ recommended for production)</li>\n<li class=\"mobile-list-item\">Storage: 500MB for installation (additional space for websites and logs)</li>\n<li class=\"mobile-list-item\">Network: Stable connectivity for serving web requests</li>\n<li class=\"mobile-list-item\"><strong>Operating System</strong>: </li>\n<li class=\"mobile-list-item\">Linux: Any modern distribution with kernel 2.6.32+</li>\n<li class=\"mobile-list-item\">macOS: 10.12+ (Sierra or newer)</li>\n<li class=\"mobile-list-item\">Windows: Windows Server 2016+ or Windows 10</li>\n<li class=\"mobile-list-item\">FreeBSD: 11.0+</li>\n<li class=\"mobile-list-item\"><strong>Network Requirements</strong>:</li>\n<li class=\"mobile-list-item\">Port 80 (HTTP)</li>\n<li class=\"mobile-list-item\">Port 443 (HTTPS)</li>\n<li class=\"mobile-list-item\">Additional ports for virtual hosts if needed</li>\n<li class=\"mobile-list-item\"><strong>Dependencies</strong>:</li>\n<li class=\"mobile-list-item\">OpenSSL for SSL/TLS support</li>\n<li class=\"mobile-list-item\">PCRE for regular expressions</li>\n<li class=\"mobile-list-item\">APR (Apache Portable Runtime) libraries</li>\n<li class=\"mobile-list-item\">Zlib for compression</li>\n<li class=\"mobile-list-item\"><strong>System Access</strong>: root or sudo privileges for installation</li>\n<h2 id=\"installation\" class=\"mobile-header\">Installation</h2>\n<h3 id=\"rhelcentosrocky-linuxalmalinux\" class=\"mobile-header\">RHEL/CentOS/Rocky Linux/AlmaLinux</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Install Apache (httpd) and utilities\nsudo dnf install -y httpd httpd-tools mod_ssl mod_security\n\n# RHEL/CentOS 7 (using yum)\nsudo yum install -y epel-release\nsudo yum install -y httpd httpd-tools mod_ssl mod_security\n\n# Install additional modules\nsudo dnf install -y httpd-devel httpd-manual\n\n# Create necessary directories\nsudo mkdir -p /etc/httpd/conf.d\nsudo mkdir -p /var/log/httpd\nsudo mkdir -p /var/www/html\n\n# Set proper permissions\nsudo chown -R apache:apache /var/www/html\nsudo chown -R apache:apache /var/log/httpd\n\n# Enable and start service\nsudo systemctl enable --now httpd\n\n# Verify installation\nhttpd -v\nsudo systemctl status httpd</code></pre>\n      </div>\n    </div>\n<h3 id=\"debianubuntu\" class=\"mobile-header\">Debian/Ubuntu</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Update package list\nsudo apt update\n\n# Install Apache and essential modules\nsudo apt install -y apache2 apache2-utils apache2-dev libapache2-mod-security2\n\n# Install additional tools\nsudo apt install -y apache2-doc ssl-cert\n\n# Enable essential modules\nsudo a2enmod rewrite ssl headers deflate expires security2 http2\n\n# Create necessary directories\nsudo mkdir -p /var/www/html\nsudo mkdir -p /var/log/apache2\n\n# Set proper permissions\nsudo chown -R www-data:www-data /var/www/html\nsudo chown -R www-data:www-data /var/log/apache2\n\n# Enable and start service\nsudo systemctl enable --now apache2\n\n# Verify installation\napache2ctl -v\nsudo systemctl status apache2</code></pre>\n      </div>\n    </div>\n<h3 id=\"arch-linux\" class=\"mobile-header\">Arch Linux</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Install Apache\nsudo pacman -S apache\n\n# Install additional modules\nsudo pacman -S apache-mod-security apache-mod-wsgi\n\n# Create apache user if not exists\nsudo useradd -r -d /srv/http -s /sbin/nologin -c &quot;Apache HTTP Server&quot; apache\n\n# Create necessary directories\nsudo mkdir -p /etc/httpd/conf.d\nsudo mkdir -p /var/log/httpd\nsudo mkdir -p /srv/http\n\n# Set proper permissions\nsudo chown -R apache:apache /srv/http\nsudo chown -R apache:apache /var/log/httpd\n\n# Edit main configuration\nsudo sed -i &#039;s/#ServerName www.example.com:80/ServerName localhost:80/&#039; /etc/httpd/conf/httpd.conf\n\n# Enable and start service\nsudo systemctl enable --now httpd\n\n# Verify installation\nhttpd -v\nsudo systemctl status httpd</code></pre>\n      </div>\n    </div>\n<h3 id=\"alpine-linux\" class=\"mobile-header\">Alpine Linux</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Install Apache\napk add --no-cache apache2 apache2-ssl apache2-utils\n\n# Install additional modules\napk add --no-cache apache2-mod-wsgi apache2-mod-fcgid\n\n# Create apache user if not exists\nadduser -D -H -s /sbin/nologin -g apache apache\n\n# Create necessary directories\nmkdir -p /var/www/localhost/htdocs\nmkdir -p /var/log/apache2\nmkdir -p /run/apache2\n\n# Set proper permissions\nchown -R apache:apache /var/www/localhost/htdocs\nchown -R apache:apache /var/log/apache2\nchown -R apache:apache /run/apache2\n\n# Configure basic settings\nsed -i &#039;s/#ServerName www.example.com:80/ServerName localhost:80/&#039; /etc/apache2/httpd.conf\n\n# Enable and start service\nrc-update add apache2 default\nrc-service apache2 start\n\n# Verify installation\nhttpd -v\nrc-service apache2 status</code></pre>\n      </div>\n    </div>\n<h3 id=\"opensusesles\" class=\"mobile-header\">openSUSE/SLES</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># openSUSE Leap/Tumbleweed\nsudo zypper install -y apache2 apache2-mod_ssl apache2-utils\n\n# Install additional modules\nsudo zypper install -y apache2-mod_security2 apache2-mod_wsgi\n\n# SLES 15\n# Enable web and scripting module\nsudo SUSEConnect -p sle-module-web-scripting/15.5/x86_64\nsudo zypper install -y apache2 apache2-mod_ssl\n\n# Create necessary directories\nsudo mkdir -p /etc/apache2/conf.d\nsudo mkdir -p /var/log/apache2\nsudo mkdir -p /srv/www/htdocs\n\n# Set proper permissions\nsudo chown -R wwwrun:www /srv/www/htdocs\nsudo chown -R wwwrun:www /var/log/apache2\n\n# Enable modules\nsudo a2enmod ssl\nsudo a2enmod rewrite\nsudo a2enmod headers\n\n# Enable and start service\nsudo systemctl enable --now apache2\n\n# Verify installation\napache2ctl -v\nsudo systemctl status apache2</code></pre>\n      </div>\n    </div>\n<h3 id=\"macos\" class=\"mobile-header\">macOS</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Using Homebrew\nbrew install httpd\n\n# Start as service\nbrew services start httpd\n\n# Or run manually\nsudo /usr/local/bin/httpd -D FOREGROUND\n\n# Configuration location: /usr/local/etc/httpd/httpd.conf\n# Alternative: /opt/homebrew/etc/httpd/httpd.conf (Apple Silicon)\n\n# Create necessary directories\nsudo mkdir -p /usr/local/var/log/httpd\nsudo mkdir -p /usr/local/var/www\n\n# Set basic configuration\nsed -i &#039;&#039; &#039;s/#ServerName www.example.com:8080/ServerName localhost:8080/&#039; /usr/local/etc/httpd/httpd.conf\n\n# Verify installation\n/usr/local/bin/httpd -v\nbrew services list | grep httpd</code></pre>\n      </div>\n    </div>\n<h3 id=\"freebsd\" class=\"mobile-header\">FreeBSD</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Using pkg\npkg install apache24\n\n# Using ports\ncd /usr/ports/www/apache24\nmake install clean\n\n# Enable in rc.conf\necho &#039;apache24_enable=&quot;YES&quot;&#039; &gt;&gt; /etc/rc.conf\n\n# Create necessary directories\nmkdir -p /var/log/httpd\nmkdir -p /usr/local/www/apache24/data\n\n# Set proper permissions\nchown -R www:www /usr/local/www/apache24/data\nchown -R www:www /var/log/httpd\n\n# Start service\nservice apache24 start\n\n# Verify installation\n/usr/local/sbin/httpd -v\nservice apache24 status\n\n# Configuration location: /usr/local/etc/apache24/httpd.conf</code></pre>\n      </div>\n    </div>\n<h3 id=\"windows\" class=\"mobile-header\">Windows</h3>\n<div class=\"mobile-code-block\" data-language=\"powershell\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">powershell</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-powershell\"># Method 1: Using Chocolatey\nchoco install apache-httpd\n\n# Method 2: Using Scoop\nscoop bucket add extras\nscoop install apache\n\n# Method 3: Manual installation from Apache Lounge\n# Download from https://www.apachelounge.com/download/\n# Extract to C:\\Apache24\n\n# Install as Windows service\nC:\\Apache24\\bin\\httpd.exe -k install -n Apache24\n\n# Start service\nStart-Service Apache24\n\n# Or using net command\nnet start Apache24\n\n# Configuration location: C:\\Apache24\\conf\\httpd.conf\n# Document root: C:\\Apache24\\htdocs\n\n# Verify installation\nC:\\Apache24\\bin\\httpd.exe -v\nGet-Service Apache24</code></pre>\n      </div>\n    </div>\n<h2 id=\"initial-configuration\" class=\"mobile-header\">Initial Configuration</h2>\n<h3 id=\"first-run-setup\" class=\"mobile-header\">First-Run Setup</h3>\n<p class=\"mobile-paragraph\">1. <strong>Create apache user</strong> (if not created by package):</p>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Linux systems\nsudo useradd -r -d /var/www -s /sbin/nologin -c &quot;Apache HTTP Server&quot; apache</code></pre>\n      </div>\n    </div>\n<p class=\"mobile-paragraph\">2. <strong>Default configuration locations</strong>:</p>\n<li class=\"mobile-list-item\">RHEL/CentOS/Rocky/AlmaLinux: <code class=\"mobile-inline-code\">/etc/httpd/conf/httpd.conf</code></li>\n<li class=\"mobile-list-item\">Debian/Ubuntu: <code class=\"mobile-inline-code\">/etc/apache2/apache2.conf</code></li>\n<li class=\"mobile-list-item\">Arch Linux: <code class=\"mobile-inline-code\">/etc/httpd/conf/httpd.conf</code></li>\n<li class=\"mobile-list-item\">Alpine Linux: <code class=\"mobile-inline-code\">/etc/apache2/httpd.conf</code></li>\n<li class=\"mobile-list-item\">openSUSE/SLES: <code class=\"mobile-inline-code\">/etc/apache2/httpd.conf</code></li>\n<li class=\"mobile-list-item\">macOS: <code class=\"mobile-inline-code\">/usr/local/etc/httpd/httpd.conf</code></li>\n<li class=\"mobile-list-item\">FreeBSD: <code class=\"mobile-inline-code\">/usr/local/etc/apache24/httpd.conf</code></li>\n<li class=\"mobile-list-item\">Windows: <code class=\"mobile-inline-code\">C:\\Apache24\\conf\\httpd.conf</code></li>\n<p class=\"mobile-paragraph\">3. <strong>Essential settings to change</strong>:</p>\n<div class=\"mobile-code-block\" data-language=\"apache\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">apache</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-apache\"># Basic security settings\nServerTokens Prod\nServerSignature Off\n\n# Set server name\nServerName localhost:80\n\n# Basic security modules\nLoadModule headers_module modules/mod_headers.so\nLoadModule rewrite_module modules/mod_rewrite.so\nLoadModule ssl_module modules/mod_ssl.so\n\n# Security headers\nHeader always set X-Frame-Options &quot;SAMEORIGIN&quot;\nHeader always set X-Content-Type-Options &quot;nosniff&quot;\nHeader always set X-XSS-Protection &quot;1; mode=block&quot;\n\n# Hide .htaccess files\n&lt;FilesMatch &quot;^\\.ht&quot;&gt;\n    Require all denied\n&lt;/FilesMatch&gt;\n\n# Disable directory browsing by default\nOptions -Indexes\n\n# Basic virtual host\n&lt;VirtualHost *:80&gt;\n    ServerName localhost\n    DocumentRoot /var/www/html\n    ErrorLog logs/error_log\n    CustomLog logs/access_log common\n&lt;/VirtualHost&gt;</code></pre>\n      </div>\n    </div>\n<h3 id=\"testing-initial-setup\" class=\"mobile-header\">Testing Initial Setup</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Test configuration syntax\nsudo apache2ctl configtest  # Debian/Ubuntu\nsudo httpd -t               # RHEL/CentOS/Arch\n\n# Check loaded modules\napache2ctl -M  # Debian/Ubuntu\nhttpd -M       # RHEL/CentOS/Arch\n\n# Test HTTP response\ncurl -I http://localhost\n\n# Check if Apache is listening\nsudo ss -tlnp | grep :80\nsudo netstat -tlnp | grep :80\n\n# View virtual host configuration\napache2ctl -S  # Debian/Ubuntu\nhttpd -S       # RHEL/CentOS/Arch</code></pre>\n      </div>\n    </div>\n<p class=\"mobile-paragraph\"><strong>WARNING:</strong> Never expose Apache to the public internet without proper security hardening!</p>\n<h2 id=\"service-management\" class=\"mobile-header\">Service Management</h2>\n<h3 id=\"systemd-rhel-debian-ubuntu-arch-opensuse\" class=\"mobile-header\">systemd (RHEL, Debian, Ubuntu, Arch, openSUSE)</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Enable Apache to start on boot\nsudo systemctl enable apache2  # Debian/Ubuntu\nsudo systemctl enable httpd    # RHEL/CentOS/Arch\n\n# Start Apache\nsudo systemctl start apache2   # Debian/Ubuntu\nsudo systemctl start httpd     # RHEL/CentOS/Arch\n\n# Stop Apache\nsudo systemctl stop apache2    # Debian/Ubuntu\nsudo systemctl stop httpd      # RHEL/CentOS/Arch\n\n# Restart Apache\nsudo systemctl restart apache2 # Debian/Ubuntu\nsudo systemctl restart httpd   # RHEL/CentOS/Arch\n\n# Graceful reload (reload config without dropping connections)\nsudo systemctl reload apache2  # Debian/Ubuntu\nsudo systemctl reload httpd    # RHEL/CentOS/Arch\n\n# Check status\nsudo systemctl status apache2  # Debian/Ubuntu\nsudo systemctl status httpd    # RHEL/CentOS/Arch\n\n# View logs\nsudo journalctl -u apache2 -f  # Debian/Ubuntu\nsudo journalctl -u httpd -f    # RHEL/CentOS/Arch</code></pre>\n      </div>\n    </div>\n<h3 id=\"openrc-alpine-linux\" class=\"mobile-header\">OpenRC (Alpine Linux)</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Enable Apache to start on boot\nrc-update add apache2 default\n\n# Start Apache\nrc-service apache2 start\n\n# Stop Apache\nrc-service apache2 stop\n\n# Restart Apache\nrc-service apache2 restart\n\n# Graceful reload\nrc-service apache2 reload\n\n# Check status\nrc-service apache2 status\n\n# View logs\ntail -f /var/log/apache2/error.log</code></pre>\n      </div>\n    </div>\n<h3 id=\"rcd-freebsd\" class=\"mobile-header\">rc.d (FreeBSD)</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Enable in /etc/rc.conf\necho &#039;apache24_enable=&quot;YES&quot;&#039; &gt;&gt; /etc/rc.conf\n\n# Start Apache\nservice apache24 start\n\n# Stop Apache\nservice apache24 stop\n\n# Restart Apache\nservice apache24 restart\n\n# Graceful reload\nservice apache24 graceful\n\n# Check status\nservice apache24 status\n\n# View configuration test\nservice apache24 configtest</code></pre>\n      </div>\n    </div>\n<h3 id=\"launchd-macos\" class=\"mobile-header\">launchd (macOS)</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Using Homebrew services\nbrew services start httpd\nbrew services stop httpd\nbrew services restart httpd\n\n# Check status\nbrew services list | grep httpd\n\n# Manual control\nsudo /usr/local/bin/httpd -k start\nsudo /usr/local/bin/httpd -k stop\nsudo /usr/local/bin/httpd -k restart\nsudo /usr/local/bin/httpd -k graceful\n\n# Test configuration\n/usr/local/bin/httpd -t</code></pre>\n      </div>\n    </div>\n<h3 id=\"windows-service-manager\" class=\"mobile-header\">Windows Service Manager</h3>\n<div class=\"mobile-code-block\" data-language=\"powershell\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">powershell</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-powershell\"># Start Apache service\nStart-Service Apache24\n# Or: net start Apache24\n\n# Stop Apache service\nStop-Service Apache24\n# Or: net stop Apache24\n\n# Restart Apache service\nRestart-Service Apache24\n\n# Check status\nGet-Service Apache24\n\n# Manual control\nC:\\Apache24\\bin\\httpd.exe -k start\nC:\\Apache24\\bin\\httpd.exe -k stop\nC:\\Apache24\\bin\\httpd.exe -k restart\n\n# Test configuration\nC:\\Apache24\\bin\\httpd.exe -t\n\n# View logs\nGet-Content C:\\Apache24\\logs\\error.log -Wait</code></pre>\n      </div>\n    </div>\n<h2 id=\"advanced-configuration\" class=\"mobile-header\">Advanced Configuration</h2>\n<h3 id=\"virtual-hosts\" class=\"mobile-header\">Virtual Hosts</h3>\n<div class=\"mobile-code-block\" data-language=\"apache\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">apache</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-apache\"># /etc/apache2/sites-available/example.com.conf (Debian/Ubuntu)\n# /etc/httpd/conf.d/example.com.conf (RHEL/CentOS)\n\n&lt;VirtualHost *:80&gt;\n    ServerName example.com\n    ServerAlias www.example.com\n    DocumentRoot /var/www/example.com/public_html\n    \n    # Logging\n    ErrorLog ${APACHE_LOG_DIR}/example.com_error.log\n    CustomLog ${APACHE_LOG_DIR}/example.com_access.log combined\n    \n    # Security\n    &lt;Directory /var/www/example.com/public_html&gt;\n        Options -Indexes +FollowSymLinks\n        AllowOverride All\n        Require all granted\n        \n        # Hide sensitive files\n        &lt;Files ~ &quot;^\\.(htaccess|htpasswd|env)$&quot;&gt;\n            Require all denied\n        &lt;/Files&gt;\n    &lt;/Directory&gt;\n&lt;/VirtualHost&gt;\n\n# SSL Virtual Host\n&lt;VirtualHost *:443&gt;\n    ServerName example.com\n    ServerAlias www.example.com\n    DocumentRoot /var/www/example.com/public_html\n    \n    # SSL Configuration\n    SSLEngine on\n    SSLCertificateFile /etc/letsencrypt/live/example.com/fullchain.pem\n    SSLCertificateKeyFile /etc/letsencrypt/live/example.com/privkey.pem\n    \n    # Modern SSL configuration\n    SSLProtocol all -SSLv3 -TLSv1 -TLSv1.1\n    SSLCipherSuite ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384\n    SSLHonorCipherOrder off\n    SSLSessionTickets off\n    \n    # Security headers\n    Header always set Strict-Transport-Security &quot;max-age=63072000; includeSubDomains; preload&quot;\n    Header always set X-Frame-Options &quot;SAMEORIGIN&quot;\n    Header always set X-Content-Type-Options &quot;nosniff&quot;\n    Header always set X-XSS-Protection &quot;1; mode=block&quot;\n    \n    # Logging\n    ErrorLog ${APACHE_LOG_DIR}/example.com_ssl_error.log\n    CustomLog ${APACHE_LOG_DIR}/example.com_ssl_access.log combined\n&lt;/VirtualHost&gt;</code></pre>\n      </div>\n    </div>\n<h3 id=\"performance-tuning\" class=\"mobile-header\">Performance Tuning</h3>\n<div class=\"mobile-code-block\" data-language=\"apache\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">apache</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-apache\"># MPM Event configuration (modern and efficient)\n&lt;IfModule mpm_event_module&gt;\n    StartServers             3\n    MinSpareThreads         75\n    MaxSpareThreads        250\n    ThreadsPerChild         25\n    MaxRequestWorkers      400\n    MaxConnectionsPerChild   0\n    ThreadLimit             64\n&lt;/IfModule&gt;\n\n# Compression\n&lt;IfModule mod_deflate.c&gt;\n    SetOutputFilter DEFLATE\n    AddOutputFilterByType DEFLATE text/html text/css text/javascript text/xml text/plain\n    AddOutputFilterByType DEFLATE application/javascript application/xml+rss application/xml\n    AddOutputFilterByType DEFLATE application/json application/x-javascript\n    \n    # Don&#039;t compress images\n    SetEnvIfNoCase Request_URI \\.(?:gif|jpe?g|png|webp)$ no-gzip\n    SetEnvIfNoCase Request_URI \\.(?:exe|t?gz|zip|bz2|sit|rar)$ no-gzip\n&lt;/IfModule&gt;\n\n# Caching\n&lt;IfModule mod_expires.c&gt;\n    ExpiresActive On\n    ExpiresByType image/jpg &quot;access plus 1 year&quot;\n    ExpiresByType image/jpeg &quot;access plus 1 year&quot;\n    ExpiresByType image/gif &quot;access plus 1 year&quot;\n    ExpiresByType image/png &quot;access plus 1 year&quot;\n    ExpiresByType image/webp &quot;access plus 1 year&quot;\n    ExpiresByType text/css &quot;access plus 1 month&quot;\n    ExpiresByType application/pdf &quot;access plus 1 month&quot;\n    ExpiresByType application/javascript &quot;access plus 1 month&quot;\n    ExpiresByType application/x-javascript &quot;access plus 1 month&quot;\n    ExpiresByType image/x-icon &quot;access plus 1 year&quot;\n    ExpiresDefault &quot;access plus 2 days&quot;\n&lt;/IfModule&gt;</code></pre>\n      </div>\n    </div>\n<h3 id=\"security-hardening\" class=\"mobile-header\">Security Hardening</h3>\n<div class=\"mobile-code-block\" data-language=\"apache\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">apache</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-apache\"># Security configuration\nServerTokens Prod\nServerSignature Off\n\n# Disable unnecessary HTTP methods\n&lt;LimitExcept GET POST HEAD&gt;\n    Require all denied\n&lt;/LimitExcept&gt;\n\n# Hide server information\nHeader always unset Server\nHeader unset X-Powered-By\n\n# Security headers\nHeader always set Strict-Transport-Security &quot;max-age=63072000; includeSubDomains; preload&quot;\nHeader always set X-Frame-Options &quot;SAMEORIGIN&quot;\nHeader always set X-Content-Type-Options &quot;nosniff&quot;\nHeader always set X-XSS-Protection &quot;1; mode=block&quot;\nHeader always set Referrer-Policy &quot;strict-origin-when-cross-origin&quot;\n\n# Disable TRACE method\nTraceEnable off\n\n# Timeout settings\nTimeout 60\nKeepAliveTimeout 15\n\n# Request limits\nLimitRequestBody 10485760  # 10MB\nLimitRequestFields 100\nLimitRequestFieldSize 8190\nLimitRequestLine 4094\n\n# Hide sensitive files\n&lt;FilesMatch &quot;^\\.&quot;&gt;\n    Require all denied\n&lt;/FilesMatch&gt;\n\n&lt;FilesMatch &quot;\\.(bak|backup|swp|tmp|~)$&quot;&gt;\n    Require all denied\n&lt;/FilesMatch&gt;\n\n# Disable server-status and server-info\n&lt;Location &quot;/server-status&quot;&gt;\n    Require ip 127.0.0.1\n    Require ip ::1\n&lt;/Location&gt;\n\n&lt;Location &quot;/server-info&quot;&gt;\n    Require ip 127.0.0.1\n    Require ip ::1\n&lt;/Location&gt;</code></pre>\n      </div>\n    </div>\n<h2 id=\"reverse-proxy-setup\" class=\"mobile-header\">Reverse Proxy Setup</h2>\n<h3 id=\"nginx-as-frontend-proxy\" class=\"mobile-header\">nginx as Frontend Proxy</h3>\n<div class=\"mobile-code-block\" data-language=\"nginx\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">nginx</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-nginx\"># /etc/nginx/sites-available/apache-proxy\nupstream apache_backend {\n    server 127.0.0.1:8080;\n    keepalive 32;\n}\n\nserver {\n    listen 80;\n    server_name example.com www.example.com;\n    return 301 https://$server_name$request_uri;\n}\n\nserver {\n    listen 443 ssl http2;\n    server_name example.com www.example.com;\n\n    ssl_certificate /etc/letsencrypt/live/example.com/fullchain.pem;\n    ssl_certificate_key /etc/letsencrypt/live/example.com/privkey.pem;\n\n    location / {\n        proxy_pass http://apache_backend;\n        proxy_set_header Host $host;\n        proxy_set_header X-Real-IP $remote_addr;\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n        proxy_set_header X-Forwarded-Proto $scheme;\n        \n        # Handle Apache redirects\n        proxy_redirect http://apache_backend https://$server_name;\n    }\n    \n    # Serve static files directly with nginx\n    location ~* \\.(css|js|png|jpg|jpeg|gif|ico|svg|woff|woff2|ttf|eot)$ {\n        try_files $uri @apache;\n        expires 1y;\n        add_header Cache-Control &quot;public, immutable&quot;;\n    }\n    \n    location @apache {\n        proxy_pass http://apache_backend;\n        proxy_set_header Host $host;\n        proxy_set_header X-Real-IP $remote_addr;\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n        proxy_set_header X-Forwarded-Proto $scheme;\n    }\n}</code></pre>\n      </div>\n    </div>\n<h3 id=\"haproxy-configuration\" class=\"mobile-header\">HAProxy Configuration</h3>\n<div class=\"mobile-code-block\" data-language=\"haproxy\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">haproxy</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-haproxy\"># /etc/haproxy/haproxy.cfg\nglobal\n    maxconn 4096\n    log stdout local0\n    chroot /var/lib/haproxy\n    stats socket /run/haproxy/admin.sock mode 660 level admin\n    stats timeout 30s\n    user haproxy\n    group haproxy\n    daemon\n\ndefaults\n    mode http\n    log global\n    option httplog\n    option dontlognull\n    option log-health-checks\n    timeout connect 5000\n    timeout client 50000\n    timeout server 50000\n    errorfile 400 /etc/haproxy/errors/400.http\n    errorfile 403 /etc/haproxy/errors/403.http\n    errorfile 408 /etc/haproxy/errors/408.http\n    errorfile 500 /etc/haproxy/errors/500.http\n    errorfile 502 /etc/haproxy/errors/502.http\n    errorfile 503 /etc/haproxy/errors/503.http\n    errorfile 504 /etc/haproxy/errors/504.http\n\nfrontend apache_frontend\n    bind *:80\n    bind *:443 ssl crt /etc/ssl/certs/example.com.pem\n    \n    # Redirect HTTP to HTTPS\n    redirect scheme https if !{ ssl_fc }\n    \n    # Security headers\n    http-response set-header Strict-Transport-Security &quot;max-age=63072000; includeSubDomains; preload&quot;\n    http-response set-header X-Frame-Options SAMEORIGIN\n    http-response set-header X-Content-Type-Options nosniff\n    \n    default_backend apache_servers\n\nbackend apache_servers\n    balance roundrobin\n    option httpchk GET / HTTP/1.1\\r\\nHost:\\ localhost\n    server apache1 127.0.0.1:8080 check\n    server apache2 127.0.0.1:8081 check backup</code></pre>\n      </div>\n    </div>\n<h3 id=\"caddy-configuration\" class=\"mobile-header\">Caddy Configuration</h3>\n<div class=\"mobile-code-block\" data-language=\"caddyfile\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">caddyfile</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-caddyfile\">example.com www.example.com {\n    reverse_proxy localhost:8080\n    \n    # Security headers\n    header {\n        Strict-Transport-Security &quot;max-age=63072000; includeSubDomains; preload&quot;\n        X-Frame-Options &quot;SAMEORIGIN&quot;\n        X-Content-Type-Options &quot;nosniff&quot;\n        X-XSS-Protection &quot;1; mode=block&quot;\n    }\n    \n    # Compression\n    encode gzip\n    \n    # Logging\n    log {\n        output file /var/log/caddy/example.com.log\n        level INFO\n    }\n}</code></pre>\n      </div>\n    </div>\n<h3 id=\"apache-as-reverse-proxy\" class=\"mobile-header\">Apache as Reverse Proxy</h3>\n<div class=\"mobile-code-block\" data-language=\"apache\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">apache</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-apache\"># Enable required modules\nLoadModule proxy_module modules/mod_proxy.so\nLoadModule proxy_http_module modules/mod_proxy_http.so\nLoadModule proxy_balancer_module modules/mod_proxy_balancer.so\n\n&lt;VirtualHost *:80&gt;\n    ServerName example.com\n    \n    # Proxy configuration\n    ProxyPreserveHost On\n    ProxyPass / http://backend-server:8080/\n    ProxyPassReverse / http://backend-server:8080/\n    \n    # Load balancing\n    ProxyPass /app/ balancer://mycluster/\n    ProxyPassReverse /app/ balancer://mycluster/\n    \n    &lt;Proxy balancer://mycluster&gt;\n        BalancerMember http://backend1:8080\n        BalancerMember http://backend2:8080\n        ProxySet hcmethod GET\n        ProxySet hcuri /health\n    &lt;/Proxy&gt;\n    \n    # Balancer manager\n    &lt;Location &quot;/balancer-manager&quot;&gt;\n        SetHandler balancer-manager\n        Require ip 127.0.0.1\n        Require ip ::1\n    &lt;/Location&gt;\n&lt;/VirtualHost&gt;</code></pre>\n      </div>\n    </div>\n<h2 id=\"security-configuration\" class=\"mobile-header\">Security Configuration</h2>\n<h3 id=\"ssltls-configuration\" class=\"mobile-header\">SSL/TLS Configuration</h3>\n<div class=\"mobile-code-block\" data-language=\"apache\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">apache</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-apache\"># Load SSL module\nLoadModule ssl_module modules/mod_ssl.so\n\n# Global SSL configuration\nSSLEngine on\nSSLProtocol all -SSLv3 -TLSv1 -TLSv1.1\nSSLCipherSuite ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384\nSSLHonorCipherOrder off\nSSLSessionCache shmcb:/var/run/ssl_scache(512000)\nSSLSessionCacheTimeout 300\nSSLUseStapling On\nSSLStaplingCache shmcb:/var/run/ocsp(128000)\nSSLCompression off\nSSLSessionTickets off\n\n# Generate DH parameters\n# openssl dhparam -out /etc/ssl/certs/dhparam.pem 2048\nSSLOpenSSLConfCmd DHParameters /etc/ssl/certs/dhparam.pem</code></pre>\n      </div>\n    </div>\n<h3 id=\"modsecurity-waf\" class=\"mobile-header\">ModSecurity WAF</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Install ModSecurity\n# Ubuntu/Debian\nsudo apt install libapache2-mod-security2\n\n# RHEL/CentOS\nsudo dnf install mod_security\n\n# Enable module\nsudo a2enmod security2  # Ubuntu/Debian\n\n# Download OWASP Core Rule Set\nsudo mkdir -p /etc/modsecurity\ncd /etc/modsecurity\nsudo wget https://github.com/coreruleset/coreruleset/archive/v3.3.4.tar.gz\nsudo tar xzf v3.3.4.tar.gz\nsudo mv coreruleset-3.3.4 crs\nsudo cp crs/crs-setup.conf.example crs/crs-setup.conf</code></pre>\n      </div>\n    </div>\n<div class=\"mobile-code-block\" data-language=\"apache\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">apache</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-apache\"># ModSecurity configuration\n&lt;IfModule mod_security2.c&gt;\n    SecRuleEngine On\n    SecRequestBodyAccess On\n    SecRequestBodyLimit 13107200\n    SecRequestBodyNoFilesLimit 131072\n    SecRequestBodyInMemoryLimit 131072\n    SecRequestBodyLimitAction Reject\n    SecResponseBodyAccess Off\n    SecDebugLog /var/log/apache2/modsec_debug.log\n    SecDebugLogLevel 0\n    SecAuditEngine RelevantOnly\n    SecAuditLogRelevantStatus &quot;^(?:5|4(?!04))&quot;\n    SecAuditLogParts ABDEFHIJZ\n    SecAuditLogType Serial\n    SecAuditLog /var/log/apache2/modsec_audit.log\n    \n    # Include OWASP Core Rule Set\n    Include /etc/modsecurity/crs/crs-setup.conf\n    Include /etc/modsecurity/crs/rules/*.conf\n&lt;/IfModule&gt;</code></pre>\n      </div>\n    </div>\n<h3 id=\"firewall-rules\" class=\"mobile-header\">Firewall Rules</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># UFW (Ubuntu/Debian)\nsudo ufw allow &#039;Apache Full&#039;    # HTTP and HTTPS\nsudo ufw allow 80/tcp\nsudo ufw allow 443/tcp\nsudo ufw enable\n\n# firewalld (RHEL/CentOS/openSUSE)\nsudo firewall-cmd --permanent --add-service=http\nsudo firewall-cmd --permanent --add-service=https\nsudo firewall-cmd --reload\n\n# iptables\nsudo iptables -A INPUT -p tcp --dport 80 -j ACCEPT\nsudo iptables -A INPUT -p tcp --dport 443 -j ACCEPT\nsudo iptables-save &gt; /etc/iptables/rules.v4\n\n# pf (FreeBSD)\n# Add to /etc/pf.conf\npass in on $ext_if proto tcp from any to any port {80, 443}\n\n# Windows Firewall\nNew-NetFirewallRule -DisplayName &quot;Apache HTTP&quot; -Direction Inbound -Protocol TCP -LocalPort 80 -Action Allow\nNew-NetFirewallRule -DisplayName &quot;Apache HTTPS&quot; -Direction Inbound -Protocol TCP -LocalPort 443 -Action Allow</code></pre>\n      </div>\n    </div>\n<h3 id=\"access-control\" class=\"mobile-header\">Access Control</h3>\n<div class=\"mobile-code-block\" data-language=\"apache\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">apache</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-apache\"># IP-based access control\n&lt;Directory &quot;/var/www/admin&quot;&gt;\n    Require ip 192.168.1.0/24\n    Require ip 127.0.0.1\n    Require ip ::1\n&lt;/Directory&gt;\n\n# Password protection\n&lt;Directory &quot;/var/www/private&quot;&gt;\n    AuthType Basic\n    AuthName &quot;Restricted Area&quot;\n    AuthUserFile /etc/apache2/.htpasswd\n    Require valid-user\n&lt;/Directory&gt;\n\n# Create password file\n# htpasswd -c /etc/apache2/.htpasswd username\n\n# Client certificate authentication\n&lt;Directory &quot;/var/www/secure&quot;&gt;\n    SSLRequireSSL\n    SSLVerifyClient require\n    SSLVerifyDepth 1\n    SSLCACertificateFile /etc/ssl/certs/ca.crt\n&lt;/Directory&gt;</code></pre>\n      </div>\n    </div>\n<h2 id=\"database-setup\" class=\"mobile-header\">Database Setup</h2>\n<p class=\"mobile-paragraph\">Apache HTTP Server doesn't require a database, but it commonly integrates with databases through various modules and applications:</p>\n<h3 id=\"php-database-integration\" class=\"mobile-header\">PHP Database Integration</h3>\n<div class=\"mobile-code-block\" data-language=\"apache\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">apache</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-apache\"># PHP module configuration\nLoadModule php_module modules/libphp.so\n\n&lt;IfModule mod_php.c&gt;\n    AddType application/x-httpd-php .php\n    php_admin_flag allow_url_include Off\n    php_admin_flag allow_url_fopen Off\n    php_admin_value upload_max_filesize 64M\n    php_admin_value post_max_size 64M\n    php_admin_value memory_limit 256M\n    php_admin_value max_execution_time 300\n    php_admin_flag expose_php Off\n&lt;/IfModule&gt;</code></pre>\n      </div>\n    </div>\n<h3 id=\"database-connection-examples\" class=\"mobile-header\">Database Connection Examples</h3>\n<div class=\"mobile-code-block\" data-language=\"apache\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">apache</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-apache\"># Environment variables for database connections\nSetEnv DB_HOST localhost\nSetEnv DB_NAME myapp\nSetEnv DB_USER webapp\nSetEnv DB_PASS secretpassword\n\n# Secure environment variables from external access\n&lt;Location &quot;/server-status&quot;&gt;\n    SetHandler server-status\n    Require local\n&lt;/Location&gt;</code></pre>\n      </div>\n    </div>\n<h3 id=\"cgi-database-applications\" class=\"mobile-header\">CGI Database Applications</h3>\n<div class=\"mobile-code-block\" data-language=\"apache\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">apache</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-apache\"># Enable CGI for database applications\nLoadModule cgi_module modules/mod_cgi.so\n\n&lt;Directory &quot;/var/www/cgi-bin&quot;&gt;\n    AllowOverride None\n    Options +ExecCGI\n    AddHandler cgi-script .cgi .pl .py\n    Require all granted\n&lt;/Directory&gt;\n\n# Python WSGI for database applications\nLoadModule wsgi_module modules/mod_wsgi.so\n\nWSGIDaemonProcess myapp python-home=/path/to/venv python-path=/path/to/app\nWSGIProcessGroup myapp\nWSGIScriptAlias / /path/to/app/app.wsgi</code></pre>\n      </div>\n    </div>\n<h2 id=\"performance-optimization\" class=\"mobile-header\">Performance Optimization</h2>\n<h3 id=\"system-level-tuning\" class=\"mobile-header\">System-level Tuning</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Increase system limits for Apache\nsudo tee -a /etc/security/limits.conf &lt;&lt;EOF\napache soft nofile 65535\napache hard nofile 65535\nwww-data soft nofile 65535\nwww-data hard nofile 65535\nEOF\n\n# Kernel optimization for web servers\nsudo tee -a /etc/sysctl.conf &lt;&lt;EOF\n# Apache optimization\nnet.core.somaxconn = 65535\nnet.core.netdev_max_backlog = 5000\nnet.ipv4.tcp_max_syn_backlog = 65535\nnet.ipv4.tcp_fin_timeout = 10\nnet.ipv4.tcp_tw_reuse = 1\nnet.ipv4.ip_local_port_range = 15000 65000\nfs.file-max = 100000\n\n# Memory management\nvm.swappiness = 10\nvm.dirty_ratio = 15\nvm.dirty_background_ratio = 5\nEOF\n\nsudo sysctl -p</code></pre>\n      </div>\n    </div>\n<h3 id=\"apache-performance-settings\" class=\"mobile-header\">Apache Performance Settings</h3>\n<div class=\"mobile-code-block\" data-language=\"apache\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">apache</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-apache\"># Optimized MPM Event configuration\n&lt;IfModule mpm_event_module&gt;\n    StartServers             4\n    MinSpareThreads         25\n    MaxSpareThreads        75 \n    ThreadsPerChild         25\n    MaxRequestWorkers      400\n    MaxConnectionsPerChild   0\n    ThreadLimit             64\n    ServerLimit             16\n    AsyncRequestWorkerFactor 2\n&lt;/IfModule&gt;\n\n# Connection settings\nKeepAlive On\nKeepAliveTimeout 15\nMaxKeepAliveRequests 100\n\n# Timeout settings\nTimeout 60\nLimitRequestLine 4094\nLimitRequestFieldSize 8190\nLimitRequestFields 100\nLimitRequestBody 10485760\n\n# Buffer settings\nEnableSendfile On\nEnableMMAP On</code></pre>\n      </div>\n    </div>\n<h3 id=\"caching-configuration\" class=\"mobile-header\">Caching Configuration</h3>\n<div class=\"mobile-code-block\" data-language=\"apache\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">apache</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-apache\"># Enable caching modules\nLoadModule cache_module modules/mod_cache.so\nLoadModule cache_disk_module modules/mod_cache_disk.so\n\n# Disk cache configuration\n&lt;IfModule mod_cache_disk.c&gt;\n    CacheRoot /var/cache/apache2\n    CacheDirLevels 2\n    CacheDirLength 1\n    CacheEnable disk /\n    CacheIgnoreHeaders Set-Cookie\n    CacheDefaultExpire 3600\n    CacheMaxExpire 86400\n    CacheLastModifiedFactor 0.1\n    CacheHeader on\n&lt;/IfModule&gt;\n\n# Memory cache (alternative to disk cache)\nLoadModule cache_socache_module modules/mod_cache_socache.so\n\n&lt;IfModule mod_cache_socache.c&gt;\n    CacheEnable socache /\n    CacheSocache shmcb\n    CacheSocacheMaxSize 102400\n&lt;/IfModule&gt;</code></pre>\n      </div>\n    </div>\n<h3 id=\"content-optimization\" class=\"mobile-header\">Content Optimization</h3>\n<div class=\"mobile-code-block\" data-language=\"apache\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">apache</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-apache\"># Compression\n&lt;IfModule mod_deflate.c&gt;\n    SetOutputFilter DEFLATE\n    AddOutputFilterByType DEFLATE text/html text/css text/javascript text/xml text/plain\n    AddOutputFilterByType DEFLATE application/javascript application/xml+rss application/xml\n    AddOutputFilterByType DEFLATE application/json application/x-javascript application/xhtml+xml\n    \n    # Don&#039;t compress images or binaries\n    SetEnvIfNoCase Request_URI \\.(?:gif|jpe?g|png|webp|pdf|zip|rar|exe)$ no-gzip\n    \n    # Compression level (1-9, 6 is good balance)\n    DeflateCompressionLevel 6\n&lt;/IfModule&gt;\n\n# Static file caching\n&lt;IfModule mod_expires.c&gt;\n    ExpiresActive On\n    \n    # Images\n    ExpiresByType image/jpg &quot;access plus 1 year&quot;\n    ExpiresByType image/jpeg &quot;access plus 1 year&quot;\n    ExpiresByType image/gif &quot;access plus 1 year&quot;\n    ExpiresByType image/png &quot;access plus 1 year&quot;\n    ExpiresByType image/webp &quot;access plus 1 year&quot;\n    ExpiresByType image/svg+xml &quot;access plus 1 year&quot;\n    \n    # CSS and JavaScript\n    ExpiresByType text/css &quot;access plus 1 month&quot;\n    ExpiresByType application/javascript &quot;access plus 1 month&quot;\n    ExpiresByType application/x-javascript &quot;access plus 1 month&quot;\n    \n    # Fonts\n    ExpiresByType font/woff &quot;access plus 1 year&quot;\n    ExpiresByType font/woff2 &quot;access plus 1 year&quot;\n    ExpiresByType application/font-woff &quot;access plus 1 year&quot;\n    ExpiresByType application/font-woff2 &quot;access plus 1 year&quot;\n    \n    # Icons\n    ExpiresByType image/x-icon &quot;access plus 1 year&quot;\n    ExpiresByType image/vnd.microsoft.icon &quot;access plus 1 year&quot;\n    \n    # HTML\n    ExpiresByType text/html &quot;access plus 300 seconds&quot;\n    \n    # Default\n    ExpiresDefault &quot;access plus 1 day&quot;\n&lt;/IfModule&gt;</code></pre>\n      </div>\n    </div>\n<h2 id=\"monitoring\" class=\"mobile-header\">Monitoring</h2>\n<h3 id=\"built-in-monitoring\" class=\"mobile-header\">Built-in Monitoring</h3>\n<div class=\"mobile-code-block\" data-language=\"apache\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">apache</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-apache\"># Enable server-status module\nLoadModule status_module modules/mod_status.so\n\n&lt;Location &quot;/server-status&quot;&gt;\n    SetHandler server-status\n    Require ip 127.0.0.1\n    Require ip ::1\n&lt;/Location&gt;\n\n&lt;Location &quot;/server-info&quot;&gt;\n    SetHandler server-info\n    Require ip 127.0.0.1\n    Require ip ::1\n&lt;/Location&gt;\n\n# Extended status\nExtendedStatus On</code></pre>\n      </div>\n    </div>\n<h3 id=\"log-analysis\" class=\"mobile-header\">Log Analysis</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Monitor Apache access logs\ntail -f /var/log/apache2/access.log  # Debian/Ubuntu\ntail -f /var/log/httpd/access_log    # RHEL/CentOS\n\n# Monitor error logs\ntail -f /var/log/apache2/error.log   # Debian/Ubuntu\ntail -f /var/log/httpd/error_log     # RHEL/CentOS\n\n# Analyze top IPs\nawk &#039;{print $1}&#039; /var/log/apache2/access.log | sort | uniq -c | sort -rn | head -10\n\n# Analyze response codes\nawk &#039;{print $9}&#039; /var/log/apache2/access.log | sort | uniq -c | sort -rn\n\n# Analyze most requested files\nawk &#039;{print $7}&#039; /var/log/apache2/access.log | sort | uniq -c | sort -rn | head -10\n\n# Check for errors\ngrep &quot;error&quot; /var/log/apache2/error.log | tail -10</code></pre>\n      </div>\n    </div>\n<h3 id=\"external-monitoring-tools\" class=\"mobile-header\">External Monitoring Tools</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Install monitoring tools\n# GoAccess for real-time log analysis\nsudo apt install goaccess  # Ubuntu/Debian\nsudo dnf install goaccess  # RHEL/CentOS\n\n# Real-time analysis\ngoaccess /var/log/apache2/access.log -c\n\n# Generate HTML report\ngoaccess /var/log/apache2/access.log -o /var/www/html/stats.html --log-format=COMBINED --real-time-html\n\n# Install htop for process monitoring\nsudo apt install htop\nhtop -p $(pgrep apache2 | head -5 | tr &#039;\\n&#039; &#039;,&#039; | sed &#039;s/,$//&#039;)</code></pre>\n      </div>\n    </div>\n<h3 id=\"performance-monitoring\" class=\"mobile-header\">Performance Monitoring</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Monitor Apache processes\nps aux | grep apache2 | grep -v grep\n\n# Monitor memory usage\nps aux --sort=-%mem | grep apache2 | head -10\n\n# Monitor connection counts\nss -tan | grep :80 | wc -l\nss -tan | grep :443 | wc -l\n\n# Check server-status (if enabled)\ncurl http://localhost/server-status\ncurl http://localhost/server-status?auto  # Machine readable\n\n# Monitor file descriptors\nlsof -u apache2 | wc -l  # Ubuntu/Debian\nlsof -u apache | wc -l   # RHEL/CentOS</code></pre>\n      </div>\n    </div>\n<h2 id=\"backup-and-restore\" class=\"mobile-header\">Backup and Restore</h2>\n<h3 id=\"configuration-backup\" class=\"mobile-header\">Configuration Backup</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\">#!/bin/bash\n# backup-apache-config.sh\n\nBACKUP_DIR=&quot;/backup/apache/$(date +%Y%m%d_%H%M%S)&quot;\nmkdir -p &quot;$BACKUP_DIR&quot;\n\n# Detect Apache configuration directory\nif [ -d /etc/apache2 ]; then\n    # Debian/Ubuntu\n    CONFIG_DIR=&quot;/etc/apache2&quot;\n    LOG_DIR=&quot;/var/log/apache2&quot;\n    WEB_DIR=&quot;/var/www&quot;\nelif [ -d /etc/httpd ]; then\n    # RHEL/CentOS\n    CONFIG_DIR=&quot;/etc/httpd&quot;\n    LOG_DIR=&quot;/var/log/httpd&quot;\n    WEB_DIR=&quot;/var/www&quot;\nfi\n\n# Backup Apache configuration\ntar czf &quot;$BACKUP_DIR/apache-config.tar.gz&quot; -C / &quot;${CONFIG_DIR#/}&quot;\n\n# Backup website files\ntar czf &quot;$BACKUP_DIR/apache-sites.tar.gz&quot; -C &quot;$WEB_DIR&quot; .\n\n# Backup SSL certificates\nif [ -d /etc/letsencrypt ]; then\n    tar czf &quot;$BACKUP_DIR/ssl-certs.tar.gz&quot; -C /etc letsencrypt\nfi\n\n# Backup recent logs (last 7 days)\nfind &quot;$LOG_DIR&quot; -name &quot;*.log&quot; -mtime -7 -exec tar czf &quot;$BACKUP_DIR/apache-logs.tar.gz&quot; {} +\n\n# Package version info\nif command -v apache2ctl &amp;&gt; /dev/null; then\n    apache2ctl -v &gt; &quot;$BACKUP_DIR/version.txt&quot;\nelif command -v httpd &amp;&gt; /dev/null; then\n    httpd -v &gt; &quot;$BACKUP_DIR/version.txt&quot;\nfi\n\necho &quot;Backup completed: $BACKUP_DIR&quot;</code></pre>\n      </div>\n    </div>\n<h3 id=\"website-backup\" class=\"mobile-header\">Website Backup</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\">#!/bin/bash\n# backup-websites.sh\n\nBACKUP_DIR=&quot;/backup/websites/$(date +%Y%m%d_%H%M%S)&quot;\nWEB_ROOT=&quot;/var/www/html&quot;\n\nmkdir -p &quot;$BACKUP_DIR&quot;\n\n# Backup all websites\nfor site in &quot;$WEB_ROOT&quot;/*; do\n    if [ -d &quot;$site&quot; ]; then\n        site_name=$(basename &quot;$site&quot;)\n        echo &quot;Backing up $site_name...&quot;\n        tar czf &quot;$BACKUP_DIR/${site_name}.tar.gz&quot; -C &quot;$WEB_ROOT&quot; &quot;$site_name&quot;\n    fi\ndone\n\n# Backup databases (if applicable)\nif command -v mysqldump &amp;&gt; /dev/null; then\n    for db in $(mysql -e &quot;SHOW DATABASES;&quot; | grep -v -E &quot;^(Database|information_schema|performance_schema|mysql|sys)$&quot;); do\n        mysqldump &quot;$db&quot; | gzip &gt; &quot;$BACKUP_DIR/${db}.sql.gz&quot;\n    done\nfi\n\n# Keep only last 30 days of backups\nfind /backup/websites -type d -mtime +30 -exec rm -rf {} + 2&gt;/dev/null\n\necho &quot;Website backup completed: $BACKUP_DIR&quot;</code></pre>\n      </div>\n    </div>\n<h3 id=\"restore-procedures\" class=\"mobile-header\">Restore Procedures</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\">#!/bin/bash\n# restore-apache.sh\n\nBACKUP_DIR=&quot;$1&quot;\nif [ -z &quot;$BACKUP_DIR&quot; ]; then\n    echo &quot;Usage: $0 &lt;backup-directory&gt;&quot;\n    exit 1\nfi\n\n# Stop Apache\nif command -v systemctl &amp;&gt; /dev/null; then\n    sudo systemctl stop apache2 || sudo systemctl stop httpd\nelif command -v service &amp;&gt; /dev/null; then\n    sudo service apache2 stop || sudo service httpd stop\nfi\n\n# Restore configuration\nif [ -f &quot;$BACKUP_DIR/apache-config.tar.gz&quot; ]; then\n    sudo tar xzf &quot;$BACKUP_DIR/apache-config.tar.gz&quot; -C /\n    echo &quot;Configuration restored&quot;\nfi\n\n# Restore websites\nif [ -f &quot;$BACKUP_DIR/apache-sites.tar.gz&quot; ]; then\n    sudo tar xzf &quot;$BACKUP_DIR/apache-sites.tar.gz&quot; -C /var/www\n    echo &quot;Websites restored&quot;\nfi\n\n# Restore SSL certificates\nif [ -f &quot;$BACKUP_DIR/ssl-certs.tar.gz&quot; ]; then\n    sudo tar xzf &quot;$BACKUP_DIR/ssl-certs.tar.gz&quot; -C /etc\n    echo &quot;SSL certificates restored&quot;\nfi\n\n# Test configuration\nif command -v apache2ctl &amp;&gt; /dev/null; then\n    sudo apache2ctl configtest\n    if [ $? -eq 0 ]; then\n        sudo systemctl start apache2\n    fi\nelif command -v httpd &amp;&gt; /dev/null; then\n    sudo httpd -t\n    if [ $? -eq 0 ]; then\n        sudo systemctl start httpd\n    fi\nfi\n\necho &quot;Restore completed&quot;</code></pre>\n      </div>\n    </div>\n<h3 id=\"automated-backup\" class=\"mobile-header\">Automated Backup</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Create cron job for daily backups\nsudo tee /etc/cron.d/apache-backup &lt;&lt;EOF\n# Apache daily backup\n0 2 * * * root /usr/local/bin/backup-apache-config.sh\n0 3 * * * root /usr/local/bin/backup-websites.sh\nEOF\n\n# Make scripts executable\nsudo chmod +x /usr/local/bin/backup-apache-config.sh\nsudo chmod +x /usr/local/bin/backup-websites.sh</code></pre>\n      </div>\n    </div>\n<h2 id=\"troubleshooting\" class=\"mobile-header\">Troubleshooting</h2>\n<h3 id=\"common-issues\" class=\"mobile-header\">Common Issues</h3>\n<p class=\"mobile-paragraph\">1. <strong>Apache won't start</strong>:</p>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Check configuration syntax\nsudo apache2ctl configtest  # Debian/Ubuntu\nsudo httpd -t               # RHEL/CentOS\n\n# Check error logs\nsudo tail -20 /var/log/apache2/error.log  # Debian/Ubuntu\nsudo tail -20 /var/log/httpd/error_log    # RHEL/CentOS\n\n# Check port conflicts\nsudo ss -tlnp | grep :80\nsudo lsof -i :80\n\n# Check permissions\nls -la /var/www/html\nps aux | grep apache2</code></pre>\n      </div>\n    </div>\n<p class=\"mobile-paragraph\">2. <strong>Permission denied errors</strong>:</p>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Fix ownership\nsudo chown -R www-data:www-data /var/www/html  # Debian/Ubuntu\nsudo chown -R apache:apache /var/www/html      # RHEL/CentOS\n\n# Fix permissions\nsudo find /var/www/html -type d -exec chmod 755 {} \\;\nsudo find /var/www/html -type f -exec chmod 644 {} \\;\n\n# Check SELinux (RHEL/CentOS)\ngetenforce\nsudo setsebool -P httpd_can_network_connect 1\nsudo restorecon -Rv /var/www/html</code></pre>\n      </div>\n    </div>\n<p class=\"mobile-paragraph\">3. <strong>Virtual host not working</strong>:</p>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Check virtual host configuration\napache2ctl -S  # Debian/Ubuntu\nhttpd -S       # RHEL/CentOS\n\n# Enable virtual host (Debian/Ubuntu)\nsudo a2ensite example.com.conf\nsudo systemctl reload apache2\n\n# Test virtual host\ncurl -H &quot;Host: example.com&quot; http://localhost/</code></pre>\n      </div>\n    </div>\n<p class=\"mobile-paragraph\">4. <strong>SSL certificate issues</strong>:</p>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Check certificate files\nsudo openssl x509 -in /etc/ssl/certs/example.com.crt -text -noout\n\n# Test SSL configuration\necho | openssl s_client -servername example.com -connect example.com:443\n\n# Check SSL module\napache2ctl -M | grep ssl  # Debian/Ubuntu\nhttpd -M | grep ssl       # RHEL/CentOS</code></pre>\n      </div>\n    </div>\n<h3 id=\"debug-mode\" class=\"mobile-header\">Debug Mode</h3>\n<div class=\"mobile-code-block\" data-language=\"apache\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">apache</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-apache\"># Enable debug logging\nLogLevel debug\n\n# Module-specific debug\nLogLevel ssl:debug\nLogLevel rewrite:debug\n\n# Custom debug log format\nLogFormat &quot;%h %l %u %t \\&quot;%r\\&quot; %&gt;s %b \\&quot;%{Referer}i\\&quot; \\&quot;%{User-agent}i\\&quot; %D&quot; debug\nCustomLog /var/log/apache2/debug.log debug</code></pre>\n      </div>\n    </div>\n<h3 id=\"performance-issues\" class=\"mobile-header\">Performance Issues</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Monitor Apache processes\ntop -p $(pgrep apache2 | head -5 | tr &#039;\\n&#039; &#039;,&#039; | sed &#039;s/,$//&#039;)\n\n# Check memory usage\nps aux --sort=-%mem | grep apache2\n\n# Monitor connections\nwatch &#039;ss -tan | grep :80 | wc -l&#039;\n\n# Check slow queries (if applicable)\ngrep &quot;taking too long&quot; /var/log/apache2/error.log\n\n# Analyze configuration\napache2ctl -t -D DUMP_VHOSTS\napache2ctl -t -D DUMP_MODULES</code></pre>\n      </div>\n    </div>\n<h2 id=\"maintenance\" class=\"mobile-header\">Maintenance</h2>\n<h3 id=\"update-procedures\" class=\"mobile-header\">Update Procedures</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># RHEL/CentOS/Rocky/AlmaLinux\nsudo dnf check-update httpd\nsudo dnf update httpd httpd-tools mod_ssl\n\n# Debian/Ubuntu\nsudo apt update\nsudo apt upgrade apache2 apache2-utils libapache2-mod-ssl\n\n# Arch Linux\nsudo pacman -Syu apache\n\n# Alpine Linux\napk update\napk upgrade apache2\n\n# openSUSE\nsudo zypper update apache2\n\n# FreeBSD\npkg update\npkg upgrade apache24\n\n# macOS\nbrew upgrade httpd\n\n# Always test configuration after update\nsudo apache2ctl configtest  # Debian/Ubuntu\nsudo httpd -t               # RHEL/CentOS\n\n# Graceful restart to apply updates\nsudo systemctl reload apache2  # Debian/Ubuntu\nsudo systemctl reload httpd    # RHEL/CentOS</code></pre>\n      </div>\n    </div>\n<h3 id=\"log-rotation\" class=\"mobile-header\">Log Rotation</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Configure log rotation for Apache\nsudo tee /etc/logrotate.d/apache2 &lt;&lt;EOF\n/var/log/apache2/*.log {\n    daily\n    missingok\n    rotate 14\n    compress\n    delaycompress\n    notifempty\n    create 640 root adm\n    sharedscripts\n    postrotate\n        if /bin/pidof apache2 &gt; /dev/null ; then \\\n            /usr/sbin/apache2ctl graceful &gt; /dev/null; \\\n        fi\n    endscript\n}\nEOF\n\n# For RHEL/CentOS\nsudo tee /etc/logrotate.d/httpd &lt;&lt;EOF\n/var/log/httpd/*log {\n    daily\n    missingok\n    rotate 14\n    compress\n    delaycompress\n    notifempty\n    sharedscripts\n    postrotate\n        /bin/systemctl reload httpd.service &gt; /dev/null 2&gt;/dev/null || true\n    endscript\n}\nEOF</code></pre>\n      </div>\n    </div>\n<h3 id=\"health-checks\" class=\"mobile-header\">Health Checks</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\">#!/bin/bash\n# apache-health-check.sh\n\n# Check if Apache is running\nif ! pgrep apache2 &gt; /dev/null &amp;&amp; ! pgrep httpd &gt; /dev/null; then\n    echo &quot;CRITICAL: Apache is not running&quot;\n    exit 2\nfi\n\n# Check if Apache responds to HTTP requests\nif ! curl -f -s http://localhost &gt; /dev/null; then\n    echo &quot;CRITICAL: Apache not responding to HTTP requests&quot;\n    exit 2\nfi\n\n# Check configuration syntax\nif command -v apache2ctl &amp;&gt; /dev/null; then\n    if ! apache2ctl configtest &amp;&gt; /dev/null; then\n        echo &quot;WARNING: Apache configuration has syntax errors&quot;\n        exit 1\n    fi\nelif command -v httpd &amp;&gt; /dev/null; then\n    if ! httpd -t &amp;&gt; /dev/null; then\n        echo &quot;WARNING: Apache configuration has syntax errors&quot;\n        exit 1\n    fi\nfi\n\n# Check disk space for logs\nLOG_USAGE=$(df /var/log | awk &#039;NR==2 {print $5}&#039; | sed &#039;s/%//&#039;)\nif [ &quot;$LOG_USAGE&quot; -gt 90 ]; then\n    echo &quot;WARNING: Log directory is ${LOG_USAGE}% full&quot;\n    exit 1\nfi\n\necho &quot;OK: Apache is healthy&quot;\nexit 0</code></pre>\n      </div>\n    </div>\n<h3 id=\"cleanup-tasks\" class=\"mobile-header\">Cleanup Tasks</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Clean old log files\nfind /var/log/apache2 -name &quot;*.log.*&quot; -mtime +30 -delete  # Debian/Ubuntu\nfind /var/log/httpd -name &quot;*log.*&quot; -mtime +30 -delete     # RHEL/CentOS\n\n# Clean Apache cache\nrm -rf /var/cache/apache2/*\n\n# Clean temporary files\nfind /tmp -name &quot;apache*&quot; -mtime +7 -delete\n\n# Optimize log files (remove old entries)\nsudo journalctl --vacuum-time=30d</code></pre>\n      </div>\n    </div>\n<h2 id=\"integration-examples\" class=\"mobile-header\">Integration Examples</h2>\n<h3 id=\"php-integration\" class=\"mobile-header\">PHP Integration</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Install PHP\nsudo apt install php libapache2-mod-php  # Ubuntu/Debian\nsudo dnf install php php-cli              # RHEL/CentOS\n\n# Enable PHP module\nsudo a2enmod php8.1  # Ubuntu/Debian\n\n# Test PHP\necho &quot;&lt;?php phpinfo(); ?&gt;&quot; | sudo tee /var/www/html/info.php</code></pre>\n      </div>\n    </div>\n<h3 id=\"wordpress-integration\" class=\"mobile-header\">WordPress Integration</h3>\n<div class=\"mobile-code-block\" data-language=\"apache\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">apache</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-apache\">&lt;VirtualHost *:443&gt;\n    ServerName blog.example.com\n    DocumentRoot /var/www/wordpress\n    \n    SSLEngine on\n    SSLCertificateFile /etc/letsencrypt/live/blog.example.com/fullchain.pem\n    SSLCertificateKeyFile /etc/letsencrypt/live/blog.example.com/privkey.pem\n    \n    &lt;Directory /var/www/wordpress&gt;\n        AllowOverride All\n        Options -Indexes +FollowSymLinks\n        Require all granted\n    &lt;/Directory&gt;\n    \n    # WordPress-specific rules\n    RewriteEngine On\n    RewriteRule ^/wp-admin/install.php$ - [F]\n    RewriteRule ^/wp-config-sample.php$ - [F]\n    \n    # Security for wp-config.php\n    &lt;Files wp-config.php&gt;\n        Require all denied\n    &lt;/Files&gt;\n&lt;/VirtualHost&gt;</code></pre>\n      </div>\n    </div>\n<h3 id=\"python-wsgi-integration\" class=\"mobile-header\">Python WSGI Integration</h3>\n<div class=\"mobile-code-block\" data-language=\"apache\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">apache</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-apache\"># Load WSGI module\nLoadModule wsgi_module modules/mod_wsgi.so\n\n&lt;VirtualHost *:443&gt;\n    ServerName app.example.com\n    DocumentRoot /var/www/python-app\n    \n    WSGIDaemonProcess app python-home=/var/www/python-app/venv python-path=/var/www/python-app\n    WSGIProcessGroup app\n    WSGIScriptAlias / /var/www/python-app/app.wsgi\n    \n    &lt;Directory /var/www/python-app&gt;\n        WSGIApplicationGroup %{GLOBAL}\n        Require all granted\n    &lt;/Directory&gt;\n&lt;/VirtualHost&gt;</code></pre>\n      </div>\n    </div>\n<h3 id=\"nodejs-proxy-integration\" class=\"mobile-header\">Node.js Proxy Integration</h3>\n<div class=\"mobile-code-block\" data-language=\"apache\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">apache</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-apache\">&lt;VirtualHost *:443&gt;\n    ServerName node.example.com\n    \n    ProxyPreserveHost On\n    ProxyPass / http://localhost:3000/\n    ProxyPassReverse / http://localhost:3000/\n    \n    # WebSocket support\n    ProxyPass /socket.io/ ws://localhost:3000/socket.io/\n    ProxyPassReverse /socket.io/ ws://localhost:3000/socket.io/\n    \n    # Static files served by Apache\n    Alias /static /var/www/node-app/public\n    &lt;Directory /var/www/node-app/public&gt;\n        Require all granted\n        ExpiresActive On\n        ExpiresDefault &quot;access plus 1 year&quot;\n    &lt;/Directory&gt;\n&lt;/VirtualHost&gt;</code></pre>\n      </div>\n    </div>\n<h2 id=\"additional-resources\" class=\"mobile-header\">Additional Resources</h2>\n<li class=\"mobile-list-item\"><a href=\"https://httpd.apache.org/docs/\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">Official Documentation</a></li>\n<li class=\"mobile-list-item\"><a href=\"https://github.com/apache/httpd\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">GitHub Repository</a></li>\n<li class=\"mobile-list-item\"><a href=\"https://httpd.apache.org/docs/2.4/misc/security_tips.html\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">Security Guide</a></li>\n<li class=\"mobile-list-item\"><a href=\"https://httpd.apache.org/docs/2.4/misc/perf-tuning.html\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">Performance Tuning</a></li>\n<li class=\"mobile-list-item\"><a href=\"https://httpd.apache.org/docs/2.4/mod/\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">Apache Modules</a></li>\n<li class=\"mobile-list-item\"><a href=\"https://httpd.apache.org/docs/2.4/vhosts/\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">Virtual Hosts Guide</a></li>\n<li class=\"mobile-list-item\"><a href=\"https://httpd.apache.org/docs/2.4/ssl/\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">SSL/TLS Guide</a></li>\n<li class=\"mobile-list-item\"><a href=\"https://httpd.apache.org/lists.html\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">Community Mailing Lists</a></li>\n<p class=\"mobile-paragraph\">---</p>\n<p class=\"mobile-paragraph\"><strong>Note:</strong> This guide is part of the <a href=\"https://howtomgr.github.io\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">HowToMgr</a> collection. Always refer to official documentation for the most up-to-date information.</p>","readTime":"24 min","wordCount":4766,"lastBuilt":"2025-09-14T18:12:07.324Z"},{"name":"apache-kafka","displayName":"Apache Kafka","slug":"apache-kafka","description":"Repo for apache-kafka","category":"web-server","language":null,"stars":0,"forks":0,"topics":[],"githubUrl":"https://github.com/howtomgr/apache-kafka","updatedAt":"2025-09-08T03:05:12Z","createdAt":"2025-09-08T03:05:01Z","readmeRaw":"## ðŸ‘‹ Welcome to apache-kafka ðŸš€  \n\napache-kafka README  \n  \n  \n## Author  \n\nðŸ¤– casjay: [Github](https://github.com/casjay) ðŸ¤–  \n","readmeHtml":"<h2 id=\"welcome-to-apache-kafka\" class=\"mobile-header\">ðŸ‘‹ Welcome to apache-kafka ðŸš€  </h2>\n<p class=\"mobile-paragraph\">apache-kafka README  </p>\n<h2 id=\"author\" class=\"mobile-header\">Author  </h2>\n<p class=\"mobile-paragraph\">ðŸ¤– casjay: <a href=\"https://github.com/casjay\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">Github</a> ðŸ¤–  </p>","readTime":"1 min","wordCount":15,"lastBuilt":"2025-09-14T18:12:22.393Z"},{"name":"caddy","displayName":"Caddy","slug":"caddy","description":"Repo for caddy","category":"web-server","language":null,"stars":0,"forks":0,"topics":[],"githubUrl":"https://github.com/howtomgr/caddy","updatedAt":"2025-09-08T03:05:30Z","createdAt":"2025-09-08T03:05:19Z","readmeRaw":"## ðŸ‘‹ Welcome to caddy ðŸš€  \n\ncaddy README  \n  \n  \n## Author  \n\nðŸ¤– casjay: [Github](https://github.com/casjay) ðŸ¤–  \n","readmeHtml":"<h2 id=\"welcome-to-caddy\" class=\"mobile-header\">ðŸ‘‹ Welcome to caddy ðŸš€  </h2>\n<p class=\"mobile-paragraph\">caddy README  </p>\n<h2 id=\"author\" class=\"mobile-header\">Author  </h2>\n<p class=\"mobile-paragraph\">ðŸ¤– casjay: <a href=\"https://github.com/casjay\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">Github</a> ðŸ¤–  </p>","readTime":"1 min","wordCount":15,"lastBuilt":"2025-09-14T18:12:22.023Z"},{"name":"certbot","displayName":"Certbot","slug":"certbot","description":"Repo for certbot","category":"infrastructure","language":null,"stars":0,"forks":0,"topics":[],"githubUrl":"https://github.com/howtomgr/certbot","updatedAt":"2025-09-08T03:05:44Z","createdAt":"2025-09-08T03:05:34Z","readmeRaw":"## ðŸ‘‹ Welcome to certbot ðŸš€  \n\nDescription  \n  \n  \n## Author  \n\nðŸ¤– casjay: [Github](https://github.com/casjay) ðŸ¤–  \n","readmeHtml":"<h2 id=\"welcome-to-certbot\" class=\"mobile-header\">ðŸ‘‹ Welcome to certbot ðŸš€  </h2>\n<p class=\"mobile-paragraph\">Description  </p>\n<h2 id=\"author\" class=\"mobile-header\">Author  </h2>\n<p class=\"mobile-paragraph\">ðŸ¤– casjay: <a href=\"https://github.com/casjay\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">Github</a> ðŸ¤–  </p>","readTime":"1 min","wordCount":14,"lastBuilt":"2025-09-14T18:12:21.700Z"},{"name":"code-server","displayName":"Code Server","slug":"code-server","description":"Repo for code-server","category":"infrastructure","language":null,"stars":0,"forks":0,"topics":[],"githubUrl":"https://github.com/howtomgr/code-server","updatedAt":"2025-09-08T03:06:11Z","createdAt":"2025-09-08T03:06:01Z","readmeRaw":"## ðŸ‘‹ Welcome to code-server ðŸš€  \n\ncode-server README  \n  \n  \n## Author  \n\nðŸ¤– casjay: [Github](https://github.com/casjay) ðŸ¤–  \n","readmeHtml":"<h2 id=\"welcome-to-code-server\" class=\"mobile-header\">ðŸ‘‹ Welcome to code-server ðŸš€  </h2>\n<p class=\"mobile-paragraph\">code-server README  </p>\n<h2 id=\"author\" class=\"mobile-header\">Author  </h2>\n<p class=\"mobile-paragraph\">ðŸ¤– casjay: <a href=\"https://github.com/casjay\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">Github</a> ðŸ¤–  </p>","readTime":"1 min","wordCount":15,"lastBuilt":"2025-09-14T18:12:21.399Z"},{"name":"databases","displayName":"Databases","slug":"databases","description":"Repo for databases","category":"database","language":null,"stars":0,"forks":0,"topics":[],"githubUrl":"https://github.com/howtomgr/databases","updatedAt":"2025-09-14T01:29:50Z","createdAt":"2023-08-28T03:47:28Z","readmeRaw":"# Database Installation Guide\n\nComprehensive installation and configuration guide for popular database management systems including MySQL/MariaDB, PostgreSQL, MongoDB, and more. Complete with security hardening and performance optimization for production environments.\n\n## Prerequisites\n\n- Linux system (any modern distribution)\n- Root or sudo access\n- 4GB RAM minimum, 8GB+ recommended for production\n- SSD storage recommended for database files\n- Network connectivity for replication setups (if applicable)\n\n## MySQL/MariaDB Installation\n\n### Ubuntu/Debian\n```bash\n# Update system\nsudo apt update\n\n# Install MariaDB (recommended over MySQL)\nsudo apt install -y mariadb-server mariadb-client\n\n# Or install MySQL\nsudo apt install -y mysql-server mysql-client\n\n# Secure installation\nsudo mysql_secure_installation\n\n# Enable and start service\nsudo systemctl enable --now mariadb  # or mysql\n\n# Verify installation\nmysql --version\nsudo systemctl status mariadb\n```\n\n### RHEL/CentOS/Rocky Linux/AlmaLinux\n```bash\n# Install MariaDB from official repository\nsudo tee /etc/yum.repos.d/MariaDB.repo > /dev/null <<EOF\n[mariadb]\nname = MariaDB\nbaseurl = https://mirror.its.dal.ca/mariadb/yum/10.11/rhel\\$releasever-\\$basearch\nmodule_hotfixes = 1\ngpgkey = https://mirror.its.dal.ca/mariadb/yum/RPM-GPG-KEY-MariaDB\ngpgcheck = 1\nEOF\n\nsudo yum install -y MariaDB-server MariaDB-client MariaDB-backup\n\n# Enable and start service\nsudo systemctl enable --now mariadb\n\n# Secure installation\nsudo mysql_secure_installation\n\n# Configure firewall\nsudo firewall-cmd --permanent --add-service=mysql\nsudo firewall-cmd --reload\n```\n\n### MariaDB Production Configuration\n```bash\n# Create optimized configuration\nsudo tee /etc/mysql/mariadb.conf.d/50-server.cnf > /dev/null <<EOF\n[mysqld]\n# Connection and thread handling\nmax_connections = 500\nthread_cache_size = 100\ntable_open_cache = 4096\ntable_definition_cache = 2048\n\n# InnoDB settings\ninnodb_buffer_pool_size = 4G  # 70-80% of RAM\ninnodb_log_file_size = 1G\ninnodb_log_buffer_size = 64M\ninnodb_file_per_table = 1\ninnodb_flush_log_at_trx_commit = 2\ninnodb_flush_method = O_DIRECT\ninnodb_io_capacity = 2000\ninnodb_io_capacity_max = 4000\ninnodb_read_io_threads = 8\ninnodb_write_io_threads = 8\ninnodb_open_files = 8192\n\n# Query cache (for read-heavy workloads)\nquery_cache_type = 1\nquery_cache_size = 256M\nquery_cache_limit = 2M\n\n# Temporary tables\ntmp_table_size = 64M\nmax_heap_table_size = 64M\n\n# Binary logging (for replication)\nlog_bin = mysql-bin\nbinlog_format = ROW\nsync_binlog = 1\nexpire_logs_days = 7\nbinlog_cache_size = 1M\n\n# Slow query log\nslow_query_log = 1\nslow_query_log_file = /var/log/mysql/slow.log\nlong_query_time = 2\nlog_queries_not_using_indexes = 1\n\n# Security\nbind-address = 127.0.0.1  # Change for network access\nskip_name_resolve = 1\nlocal_infile = 0\n\n# SSL configuration\nssl_cert = /etc/mysql/ssl/server-cert.pem\nssl_key = /etc/mysql/ssl/server-key.pem\nssl_ca = /etc/mysql/ssl/ca-cert.pem\nrequire_secure_transport = ON\n\n# Character set\ncharacter_set_server = utf8mb4\ncollation_server = utf8mb4_unicode_ci\nEOF\n\nsudo systemctl restart mariadb\n```\n\n### MySQL/MariaDB Security Hardening\n```bash\n# Create dedicated database user with limited privileges\nmysql -u root -p <<EOF\n-- Create application database\nCREATE DATABASE myapp CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;\n\n-- Create application user\nCREATE USER 'appuser'@'localhost' IDENTIFIED BY 'secure_app_password_2024';\nCREATE USER 'appuser'@'192.168.1.%' IDENTIFIED BY 'secure_app_password_2024';\n\n-- Grant minimal privileges\nGRANT SELECT, INSERT, UPDATE, DELETE ON myapp.* TO 'appuser'@'localhost';\nGRANT SELECT, INSERT, UPDATE, DELETE ON myapp.* TO 'appuser'@'192.168.1.%';\n\n-- Create read-only user for backups\nCREATE USER 'backup'@'localhost' IDENTIFIED BY 'backup_password_2024';\nGRANT SELECT, LOCK TABLES, SHOW VIEW, EVENT, TRIGGER ON *.* TO 'backup'@'localhost';\n\n-- Create replication user\nCREATE USER 'replication'@'%' IDENTIFIED BY 'replication_password_2024';\nGRANT REPLICATION SLAVE ON *.* TO 'replication'@'%';\n\n-- Remove default users and databases\nDROP DATABASE IF EXISTS test;\nDELETE FROM mysql.user WHERE User='';\nDELETE FROM mysql.user WHERE User='root' AND Host NOT IN ('localhost', '127.0.0.1', '::1');\n\n-- Secure privileges\nFLUSH PRIVILEGES;\nEOF\n\n# Generate SSL certificates for MySQL\nsudo mkdir -p /etc/mysql/ssl\ncd /etc/mysql/ssl\n\n# Create CA certificate\nsudo openssl genrsa -out ca-key.pem 4096\nsudo openssl req -new -x509 -nodes -days 3650 -key ca-key.pem -out ca-cert.pem -subj \"/C=US/ST=State/L=City/O=Organization/CN=MySQL-CA\"\n\n# Create server certificate\nsudo openssl req -newkey rsa:4096 -days 365 -nodes -keyout server-key.pem -out server-req.pem -subj \"/C=US/ST=State/L=City/O=Organization/CN=mysql.example.com\"\nsudo openssl x509 -req -days 365 -set_serial 01 -in server-req.pem -out server-cert.pem -CA ca-cert.pem -CAkey ca-key.pem\n\n# Create client certificate\nsudo openssl req -newkey rsa:4096 -days 365 -nodes -keyout client-key.pem -out client-req.pem -subj \"/C=US/ST=State/L=City/O=Organization/CN=mysql-client\"\nsudo openssl x509 -req -days 365 -set_serial 02 -in client-req.pem -out client-cert.pem -CA ca-cert.pem -CAkey ca-key.pem\n\n# Set permissions\nsudo chown mysql:mysql /etc/mysql/ssl/*\nsudo chmod 600 /etc/mysql/ssl/*key.pem\nsudo chmod 644 /etc/mysql/ssl/*.pem\n\nsudo systemctl restart mariadb\n```\n\n## PostgreSQL Installation\n\n### Ubuntu/Debian PostgreSQL Setup\n```bash\n# Install PostgreSQL official repository\nsudo apt install -y wget ca-certificates\nwget --quiet -O - https://www.postgresql.org/media/keys/ACCC4CF8.asc | sudo apt-key add -\necho \"deb http://apt.postgresql.org/pub/repos/apt/ $(lsb_release -cs)-pgdg main\" | sudo tee /etc/apt/sources.list.d/pgdg.list\n\n# Update and install PostgreSQL 16\nsudo apt update\nsudo apt install -y postgresql-16 postgresql-client-16 postgresql-contrib-16\n\n# Enable and start service\nsudo systemctl enable --now postgresql\n\n# Configure PostgreSQL\nsudo -u postgres psql <<EOF\n-- Create application database\nCREATE DATABASE myapp WITH ENCODING='UTF8' LC_COLLATE='en_US.UTF-8' LC_CTYPE='en_US.UTF-8' TEMPLATE=template0;\n\n-- Create application user\nCREATE USER appuser WITH ENCRYPTED PASSWORD 'secure_app_password_2024';\nGRANT ALL PRIVILEGES ON DATABASE myapp TO appuser;\n\n-- Create read-only user\nCREATE USER readonly WITH ENCRYPTED PASSWORD 'readonly_password_2024';\nGRANT CONNECT ON DATABASE myapp TO readonly;\n\\c myapp\nGRANT USAGE ON SCHEMA public TO readonly;\nGRANT SELECT ON ALL TABLES IN SCHEMA public TO readonly;\nALTER DEFAULT PRIVILEGES IN SCHEMA public GRANT SELECT ON TABLES TO readonly;\n\n-- Security settings\nALTER SYSTEM SET password_encryption = 'scram-sha-256';\nSELECT pg_reload_conf();\nEOF\n```\n\n### RHEL/CentOS/Rocky Linux PostgreSQL\n```bash\n# Install PostgreSQL repository\nsudo yum install -y https://download.postgresql.org/pub/repos/yum/reporpms/EL-9-x86_64/pgdg-redhat-repo-latest.noarch.rpm\n\n# Install PostgreSQL 16\nsudo yum install -y postgresql16-server postgresql16 postgresql16-contrib postgresql16-devel\n\n# Initialize database\nsudo /usr/pgsql-16/bin/postgresql-16-setup initdb\n\n# Enable and start service\nsudo systemctl enable --now postgresql-16\n\n# Configure firewall\nsudo firewall-cmd --permanent --add-port=5432/tcp\nsudo firewall-cmd --reload\n```\n\n### PostgreSQL Production Configuration\n```bash\n# Configure PostgreSQL for production\nsudo tee /var/lib/pgsql/16/data/postgresql.conf > /dev/null <<EOF\n# PostgreSQL 16 Production Configuration\n\n# Connection settings\nlisten_addresses = 'localhost'  # Change to '*' for network access\nport = 5432\nmax_connections = 200\nshared_buffers = 2GB  # 25% of RAM\neffective_cache_size = 8GB  # 75% of RAM\n\n# Memory settings\nwork_mem = 16MB\nmaintenance_work_mem = 512MB\ndynamic_shared_memory_type = posix\n\n# WAL settings\nwal_level = replica\nwal_buffers = 64MB\ncheckpoint_completion_target = 0.9\nmax_wal_size = 4GB\nmin_wal_size = 1GB\ncheckpoint_timeout = 15min\n\n# Query planner\nrandom_page_cost = 1.1  # For SSD\neffective_io_concurrency = 200\nmax_worker_processes = 8\nmax_parallel_workers_per_gather = 4\nmax_parallel_workers = 8\nmax_parallel_maintenance_workers = 4\n\n# Logging\nlog_destination = 'stderr'\nlogging_collector = on\nlog_directory = 'log'\nlog_filename = 'postgresql-%Y-%m-%d_%H%M%S.log'\nlog_rotation_age = 1d\nlog_rotation_size = 100MB\nlog_min_duration_statement = 1000  # Log slow queries\nlog_line_prefix = '%t [%p]: [%l-1] user=%u,db=%d,app=%a,client=%h '\nlog_statement = 'ddl'  # Log DDL statements\nlog_lock_waits = on\n\n# SSL configuration\nssl = on\nssl_cert_file = '/var/lib/pgsql/16/data/ssl/server.crt'\nssl_key_file = '/var/lib/pgsql/16/data/ssl/server.key'\nssl_ca_file = '/var/lib/pgsql/16/data/ssl/ca.crt'\nssl_min_protocol_version = 'TLSv1.2'\nssl_prefer_server_ciphers = on\n\n# Security\npassword_encryption = scram-sha-256\nkrb_server_keyfile = ''\ndb_user_namespace = off\nrow_security = on\n\n# Autovacuum\nautovacuum = on\nautovacuum_max_workers = 4\nautovacuum_naptime = 1min\nautovacuum_vacuum_threshold = 50\nautovacuum_analyze_threshold = 50\nautovacuum_vacuum_scale_factor = 0.1\nautovacuum_analyze_scale_factor = 0.05\n\n# Background writer\nbgwriter_delay = 200ms\nbgwriter_lru_maxpages = 100\nbgwriter_lru_multiplier = 2.0\nbgwriter_flush_after = 512kB\n\n# Checkpointer\ncheckpoint_flush_after = 256kB\n\n# Statistics\ntrack_activities = on\ntrack_counts = on\ntrack_io_timing = on\ntrack_functions = all\nstats_temp_directory = 'pg_stat_tmp'\nEOF\n\n# Configure client authentication\nsudo tee /var/lib/pgsql/16/data/pg_hba.conf > /dev/null <<EOF\n# PostgreSQL Client Authentication Configuration\n\n# TYPE  DATABASE        USER            ADDRESS                 METHOD\n\n# Local connections\nlocal   all             postgres                                peer\nlocal   all             all                                     scram-sha-256\n\n# IPv4 local connections\nhost    all             all             127.0.0.1/32            scram-sha-256\n\n# IPv6 local connections  \nhost    all             all             ::1/128                 scram-sha-256\n\n# Network connections (if needed)\nhostssl myapp           appuser         192.168.1.0/24          scram-sha-256\nhostssl myapp           readonly        192.168.1.0/24          scram-sha-256\n\n# Replication connections\nhostssl replication     replication     192.168.1.0/24          scram-sha-256\n\n# Deny all other connections\nhost    all             all             0.0.0.0/0               reject\nEOF\n\n# Generate SSL certificates\nsudo mkdir -p /var/lib/pgsql/16/data/ssl\ncd /var/lib/pgsql/16/data/ssl\n\nsudo openssl genrsa -out ca.key 4096\nsudo openssl req -new -x509 -days 3650 -key ca.key -out ca.crt -subj \"/C=US/ST=State/L=City/O=Organization/CN=PostgreSQL-CA\"\n\nsudo openssl genrsa -out server.key 4096\nsudo openssl req -new -key server.key -out server.csr -subj \"/C=US/ST=State/L=City/O=Organization/CN=postgres.example.com\"\nsudo openssl x509 -req -days 365 -in server.csr -CA ca.crt -CAkey ca.key -CAcreateserial -out server.crt\n\nsudo chown postgres:postgres /var/lib/pgsql/16/data/ssl/*\nsudo chmod 600 /var/lib/pgsql/16/data/ssl/*.key\nsudo chmod 644 /var/lib/pgsql/16/data/ssl/*.crt\n\nsudo systemctl restart postgresql-16\n```\n\n### PostgreSQL Security Hardening\n```bash\n# Advanced security configuration\nsudo -u postgres psql <<EOF\n-- Enable row-level security\nALTER SYSTEM SET row_security = on;\n\n-- Configure logging for security\nALTER SYSTEM SET log_statement = 'all';\nALTER SYSTEM SET log_connections = on;\nALTER SYSTEM SET log_disconnections = on;\nALTER SYSTEM SET log_lock_waits = on;\nALTER SYSTEM SET log_temp_files = 0;\n\n-- Password policies\nALTER SYSTEM SET password_encryption = 'scram-sha-256';\n\n-- Create roles with specific privileges\nCREATE ROLE app_read;\nGRANT CONNECT ON DATABASE myapp TO app_read;\nGRANT USAGE ON SCHEMA public TO app_read;\nGRANT SELECT ON ALL TABLES IN SCHEMA public TO app_read;\n\nCREATE ROLE app_write;\nGRANT app_read TO app_write;\nGRANT INSERT, UPDATE, DELETE ON ALL TABLES IN SCHEMA public TO app_write;\n\n-- Create application-specific user\nCREATE USER myapp_user WITH PASSWORD 'secure_password_2024';\nGRANT app_write TO myapp_user;\n\n-- Security functions\nCREATE OR REPLACE FUNCTION audit_trigger_function()\nRETURNS TRIGGER AS \\$\\$\nBEGIN\n    INSERT INTO audit_log (table_name, operation, old_values, new_values, user_name, timestamp)\n    VALUES (TG_TABLE_NAME, TG_OP, row_to_json(OLD), row_to_json(NEW), current_user, now());\n    RETURN COALESCE(NEW, OLD);\nEND;\n\\$\\$ LANGUAGE plpgsql;\n\n-- Reload configuration\nSELECT pg_reload_conf();\nEOF\n\n# Configure connection limits\nsudo tee -a /var/lib/pgsql/16/data/postgresql.conf > /dev/null <<EOF\n\n# Connection limiting per user/database\n# ALTER USER myapp_user CONNECTION LIMIT 50;\n# ALTER DATABASE myapp CONNECTION LIMIT 100;\nEOF\n```\n\n## MongoDB Installation\n\n### Ubuntu/Debian MongoDB Setup\n```bash\n# Import MongoDB public GPG key\nwget -qO - https://www.mongodb.org/static/pgp/server-7.0.asc | sudo apt-key add -\n\n# Add MongoDB repository\necho \"deb [ arch=amd64,arm64 ] https://repo.mongodb.org/apt/ubuntu $(lsb_release -cs)/mongodb-org/7.0 multiverse\" | sudo tee /etc/apt/sources.list.d/mongodb-org-7.0.list\n\n# Update and install MongoDB\nsudo apt update\nsudo apt install -y mongodb-org\n\n# Enable and start service\nsudo systemctl enable --now mongod\n\n# Verify installation\nmongosh --eval 'db.runCommand(\"connectionStatus\")'\n```\n\n### RHEL/CentOS/Rocky Linux MongoDB\n```bash\n# Add MongoDB repository\nsudo tee /etc/yum.repos.d/mongodb-org-7.0.repo > /dev/null <<EOF\n[mongodb-org-7.0]\nname=MongoDB Repository\nbaseurl=https://repo.mongodb.org/yum/redhat/\\$releasever/mongodb-org/7.0/\\$basearch/\ngpgcheck=1\nenabled=1\ngpgkey=https://www.mongodb.org/static/pgp/server-7.0.asc\nEOF\n\n# Install MongoDB\nsudo yum install -y mongodb-org\n\n# Enable and start service\nsudo systemctl enable --now mongod\n\n# Configure firewall\nsudo firewall-cmd --permanent --add-port=27017/tcp\nsudo firewall-cmd --reload\n```\n\n### MongoDB Production Configuration\n```bash\n# Create secure MongoDB configuration\nsudo tee /etc/mongod.conf > /dev/null <<EOF\n# MongoDB Production Configuration\n\nstorage:\n  dbPath: /var/lib/mongo\n  journal:\n    enabled: true\n  wiredTiger:\n    engineConfig:\n      cacheSizeGB: 4  # 50% of RAM\n      journalCompressor: snappy\n      directoryForIndexes: false\n    collectionConfig:\n      blockCompressor: snappy\n    indexConfig:\n      prefixCompression: true\n\nsystemLog:\n  destination: file\n  logAppend: true\n  path: /var/log/mongodb/mongod.log\n  quiet: false\n  logRotate: reopen\n  component:\n    accessControl:\n      verbosity: 1\n    command:\n      verbosity: 1\n\nnet:\n  port: 27017\n  bindIp: 127.0.0.1  # Change for network access\n  maxIncomingConnections: 1000\n  compression:\n    compressors: snappy,zstd\n  ssl:\n    mode: requireSSL\n    PEMKeyFile: /etc/ssl/mongodb/mongodb.pem\n    CAFile: /etc/ssl/mongodb/ca.pem\n    allowInvalidHostnames: false\n    allowInvalidCertificates: false\n\nsecurity:\n  authorization: enabled\n  keyFile: /etc/mongodb/mongodb-keyfile\n  clusterAuthMode: x509\n  javascriptEnabled: false\n\noperationProfiling:\n  mode: slowOp\n  slowOpThresholdMs: 100\n  slowOpSampleRate: 0.02\n\nreplication:\n  replSetName: rs0\n  enableMajorityReadConcern: true\n\nsharding:\n  clusterRole: shardsvr  # or configsvr for config servers\n\nprocessManagement:\n  fork: true\n  pidFilePath: /var/run/mongodb/mongod.pid\n  timeZoneInfo: /usr/share/zoneinfo\n\nsetParameter:\n  authenticationMechanisms: SCRAM-SHA-1,SCRAM-SHA-256\n  scramIterationCount: 15000\n  failIndexKeyTooLong: false\n  notablescan: 1  # Disable table scans in production\nEOF\n\n# Create MongoDB keyfile for replica set authentication\nsudo openssl rand -base64 756 | sudo tee /etc/mongodb/mongodb-keyfile\nsudo chmod 600 /etc/mongodb/mongodb-keyfile\nsudo chown mongod:mongod /etc/mongodb/mongodb-keyfile\n\n# Generate SSL certificates for MongoDB\nsudo mkdir -p /etc/ssl/mongodb\ncd /etc/ssl/mongodb\n\nsudo openssl genrsa -out ca.key 4096\nsudo openssl req -new -x509 -days 3650 -key ca.key -out ca.pem -subj \"/C=US/ST=State/L=City/O=Organization/CN=MongoDB-CA\"\n\nsudo openssl genrsa -out mongodb.key 4096\nsudo openssl req -new -key mongodb.key -out mongodb.csr -subj \"/C=US/ST=State/L=City/O=Organization/CN=mongodb.example.com\"\nsudo openssl x509 -req -days 365 -in mongodb.csr -CA ca.pem -CAkey ca.key -CAcreateserial -out mongodb.crt\n\n# Combine certificate and key for MongoDB\nsudo cat mongodb.crt mongodb.key | sudo tee mongodb.pem\nsudo chmod 600 /etc/ssl/mongodb/*.key /etc/ssl/mongodb/*.pem\nsudo chown mongod:mongod /etc/ssl/mongodb/*\n\nsudo systemctl restart mongod\n```\n\n### MongoDB Security Setup\n```bash\n# Initialize MongoDB security\nmongosh --ssl --sslPEMKeyFile /etc/ssl/mongodb/mongodb.pem --sslCAFile /etc/ssl/mongodb/ca.pem <<EOF\n// Create admin user\nuse admin\ndb.createUser({\n  user: \"admin\",\n  pwd: \"secure_admin_password_2024\",\n  roles: [\n    { role: \"userAdminAnyDatabase\", db: \"admin\" },\n    { role: \"readWriteAnyDatabase\", db: \"admin\" },\n    { role: \"dbAdminAnyDatabase\", db: \"admin\" },\n    { role: \"clusterAdmin\", db: \"admin\" }\n  ]\n})\n\n// Create application user\nuse myapp\ndb.createUser({\n  user: \"appuser\",\n  pwd: \"secure_app_password_2024\",\n  roles: [\n    { role: \"readWrite\", db: \"myapp\" }\n  ]\n})\n\n// Create read-only user\ndb.createUser({\n  user: \"readonly\",\n  pwd: \"readonly_password_2024\",\n  roles: [\n    { role: \"read\", db: \"myapp\" }\n  ]\n})\n\n// Create backup user\nuse admin\ndb.createUser({\n  user: \"backup\",\n  pwd: \"backup_password_2024\",\n  roles: [\n    { role: \"backup\", db: \"admin\" },\n    { role: \"restore\", db: \"admin\" }\n  ]\n})\n\n// Initialize replica set (if using replication)\nrs.initiate({\n  _id: \"rs0\",\n  members: [\n    { _id: 0, host: \"mongodb1.example.com:27017\", priority: 2 },\n    { _id: 1, host: \"mongodb2.example.com:27017\", priority: 1 },\n    { _id: 2, host: \"mongodb3.example.com:27017\", priority: 1, arbiterOnly: true }\n  ]\n})\nEOF\n```\n\n## Redis Installation and Configuration\n\n### Redis Setup (All Distributions)\n```bash\n# Ubuntu/Debian\nsudo apt install -y redis-server redis-tools\n\n# RHEL/CentOS\nsudo yum install -y redis\n\n# Fedora\nsudo dnf install -y redis\n\n# Arch Linux\nsudo pacman -S redis\n\n# Configure Redis for production\nsudo tee /etc/redis/redis.conf > /dev/null <<EOF\n# Redis Production Configuration\n\n# Network\nbind 127.0.0.1 ::1  # Change for network access\nport 6379\ntcp-backlog 511\ntimeout 300\ntcp-keepalive 300\n\n# Security\nrequirepass redis_secure_password_2024\nrename-command FLUSHDB \"FLUSHDB_9a8b7c6d5e4f3g2h1\"\nrename-command FLUSHALL \"FLUSHALL_h1g2f3e4d5c6b7a8\"\nrename-command DEBUG \"DEBUG_8a7b6c5d4e3f2g1h\"\nrename-command CONFIG \"CONFIG_1h2g3f4e5d6c7b8a\"\n\n# SSL/TLS (Redis 6.0+)\ntls-port 6380\nport 0  # Disable non-TLS port\ntls-cert-file /etc/redis/tls/redis.crt\ntls-key-file /etc/redis/tls/redis.key\ntls-ca-cert-file /etc/redis/tls/ca.crt\ntls-protocols \"TLSv1.2 TLSv1.3\"\ntls-prefer-server-ciphers yes\n\n# Memory management\nmaxmemory 2gb\nmaxmemory-policy allkeys-lru\nmaxmemory-samples 5\n\n# Persistence\nsave 900 1\nsave 300 10\nsave 60 10000\nrdbcompression yes\nrdbchecksum yes\ndbfilename redis.rdb\ndir /var/lib/redis/\n\n# AOF (Append Only File)\nappendonly yes\nappendfilename \"appendonly.aof\"\nappendfsync everysec\nno-appendfsync-on-rewrite no\nauto-aof-rewrite-percentage 100\nauto-aof-rewrite-min-size 64mb\n\n# Logging\nloglevel notice\nlogfile /var/log/redis/redis-server.log\nsyslog-enabled yes\nsyslog-ident redis\n\n# Slow log\nslowlog-log-slower-than 10000\nslowlog-max-len 128\n\n# Latency monitoring\nlatency-monitor-threshold 100\n\n# Client output buffer limits\nclient-output-buffer-limit normal 0 0 0\nclient-output-buffer-limit replica 256mb 64mb 60\nclient-output-buffer-limit pubsub 32mb 8mb 60\n\n# Advanced configuration\nhz 10\ndynamic-hz yes\naof-rewrite-incremental-fsync yes\nrdb-save-incremental-fsync yes\n\n# Lua scripting\nlua-time-limit 5000\nEOF\n\n# Generate Redis TLS certificates\nsudo mkdir -p /etc/redis/tls\ncd /etc/redis/tls\n\nsudo openssl genrsa -out ca.key 4096\nsudo openssl req -new -x509 -days 3650 -key ca.key -out ca.crt -subj \"/C=US/ST=State/L=City/O=Organization/CN=Redis-CA\"\n\nsudo openssl genrsa -out redis.key 4096\nsudo openssl req -new -key redis.key -out redis.csr -subj \"/C=US/ST=State/L=City/O=Organization/CN=redis.example.com\"\nsudo openssl x509 -req -days 365 -in redis.csr -CA ca.crt -CAkey ca.key -CAcreateserial -out redis.crt\n\nsudo chown redis:redis /etc/redis/tls/*\nsudo chmod 600 /etc/redis/tls/*.key\nsudo chmod 644 /etc/redis/tls/*.crt\n\nsudo systemctl restart redis-server\n```\n\n## Database Monitoring and Maintenance\n\n### Comprehensive Database Monitoring\n```bash\nsudo tee /usr/local/bin/database-monitor.sh > /dev/null <<'EOF'\n#!/bin/bash\nMONITOR_LOG=\"/var/log/database-monitor.log\"\n\nlog_message() {\n    echo \"$(date '+%Y-%m-%d %H:%M:%S') - $1\" | tee -a ${MONITOR_LOG}\n}\n\n# MySQL/MariaDB monitoring\nif command -v mysql >/dev/null 2>&1 && systemctl is-active mariadb >/dev/null 2>&1; then\n    log_message \"=== MySQL/MariaDB Monitoring ===\"\n    \n    # Connection count\n    MYSQL_CONNECTIONS=$(mysql -e \"SHOW STATUS LIKE 'Threads_connected';\" | tail -1 | awk '{print $2}')\n    MYSQL_MAX_CONNECTIONS=$(mysql -e \"SHOW VARIABLES LIKE 'max_connections';\" | tail -1 | awk '{print $2}')\n    log_message \"MySQL connections: ${MYSQL_CONNECTIONS}/${MYSQL_MAX_CONNECTIONS}\"\n    \n    # Query performance\n    SLOW_QUERIES=$(mysql -e \"SHOW STATUS LIKE 'Slow_queries';\" | tail -1 | awk '{print $2}')\n    log_message \"MySQL slow queries: ${SLOW_QUERIES}\"\n    \n    # Buffer pool hit ratio\n    BUFFER_HIT_RATIO=$(mysql -e \"\n      SELECT ROUND((1 - (Innodb_buffer_pool_reads / Innodb_buffer_pool_read_requests)) * 100, 2) as hit_ratio\n      FROM INFORMATION_SCHEMA.GLOBAL_STATUS \n      WHERE VARIABLE_NAME IN ('Innodb_buffer_pool_reads', 'Innodb_buffer_pool_read_requests');\" | tail -1)\n    log_message \"InnoDB buffer pool hit ratio: ${BUFFER_HIT_RATIO}%\"\nfi\n\n# PostgreSQL monitoring\nif command -v psql >/dev/null 2>&1 && systemctl is-active postgresql-16 >/dev/null 2>&1; then\n    log_message \"=== PostgreSQL Monitoring ===\"\n    \n    # Connection count\n    PG_CONNECTIONS=$(sudo -u postgres psql -t -c \"SELECT count(*) FROM pg_stat_activity;\")\n    PG_MAX_CONNECTIONS=$(sudo -u postgres psql -t -c \"SHOW max_connections;\")\n    log_message \"PostgreSQL connections: ${PG_CONNECTIONS}/${PG_MAX_CONNECTIONS}\"\n    \n    # Database size\n    PG_DB_SIZE=$(sudo -u postgres psql -t -c \"SELECT pg_size_pretty(pg_database_size('myapp'));\")\n    log_message \"PostgreSQL database size: ${PG_DB_SIZE}\"\n    \n    # Cache hit ratio\n    PG_CACHE_HIT=$(sudo -u postgres psql -t -c \"\n      SELECT round(sum(blks_hit)*100.0/sum(blks_hit+blks_read), 2) \n      FROM pg_stat_database WHERE datname='myapp';\")\n    log_message \"PostgreSQL cache hit ratio: ${PG_CACHE_HIT}%\"\n    \n    # Long running queries\n    LONG_QUERIES=$(sudo -u postgres psql -t -c \"\n      SELECT count(*) FROM pg_stat_activity \n      WHERE state = 'active' AND now() - query_start > interval '5 minutes';\")\n    log_message \"PostgreSQL long-running queries: ${LONG_QUERIES}\"\nfi\n\n# MongoDB monitoring\nif command -v mongosh >/dev/null 2>&1 && systemctl is-active mongod >/dev/null 2>&1; then\n    log_message \"=== MongoDB Monitoring ===\"\n    \n    # Connection count\n    MONGO_CONNECTIONS=$(mongosh --quiet --eval \"db.serverStatus().connections.current\")\n    MONGO_MAX_CONNECTIONS=$(mongosh --quiet --eval \"db.serverStatus().connections.available\")\n    log_message \"MongoDB connections: ${MONGO_CONNECTIONS}/${MONGO_MAX_CONNECTIONS}\"\n    \n    # Database statistics\n    MONGO_DB_SIZE=$(mongosh myapp --quiet --eval \"Math.round(db.stats().dataSize / 1024 / 1024) + ' MB'\")\n    log_message \"MongoDB database size: ${MONGO_DB_SIZE}\"\n    \n    # OpLog status (for replica sets)\n    if mongosh admin --quiet --eval \"rs.status().ok\" 2>/dev/null | grep -q \"1\"; then\n        OPLOG_SIZE=$(mongosh local --quiet --eval \"Math.round(db.oplog.rs.stats().maxSize / 1024 / 1024) + ' MB'\")\n        log_message \"MongoDB OpLog size: ${OPLOG_SIZE}\"\n    fi\nfi\n\n# Redis monitoring\nif command -v redis-cli >/dev/null 2>&1 && systemctl is-active redis >/dev/null 2>&1; then\n    log_message \"=== Redis Monitoring ===\"\n    \n    # Memory usage\n    REDIS_MEMORY=$(redis-cli info memory | grep used_memory_human: | cut -d: -f2)\n    REDIS_MAX_MEMORY=$(redis-cli config get maxmemory | tail -1)\n    log_message \"Redis memory usage: ${REDIS_MEMORY} / ${REDIS_MAX_MEMORY}\"\n    \n    # Connected clients\n    REDIS_CLIENTS=$(redis-cli info clients | grep connected_clients: | cut -d: -f2)\n    log_message \"Redis connected clients: ${REDIS_CLIENTS}\"\n    \n    # Hit ratio\n    REDIS_HITS=$(redis-cli info stats | grep keyspace_hits: | cut -d: -f2)\n    REDIS_MISSES=$(redis-cli info stats | grep keyspace_misses: | cut -d: -f2)\n    if [ ${REDIS_MISSES} -gt 0 ]; then\n        REDIS_HIT_RATIO=$(echo \"scale=2; ${REDIS_HITS} / (${REDIS_HITS} + ${REDIS_MISSES}) * 100\" | bc)\n        log_message \"Redis hit ratio: ${REDIS_HIT_RATIO}%\"\n    fi\nfi\n\nlog_message \"Database monitoring completed\"\nEOF\n\nsudo chmod +x /usr/local/bin/database-monitor.sh\n\n# Schedule monitoring every 5 minutes\necho \"*/5 * * * * root /usr/local/bin/database-monitor.sh\" | sudo tee -a /etc/crontab\n```\n\n### Database Backup Automation\n```bash\nsudo tee /usr/local/bin/database-backup.sh > /dev/null <<'EOF'\n#!/bin/bash\nBACKUP_DIR=\"/backup/databases\"\nDATE=$(date +%Y%m%d_%H%M%S)\n\nmkdir -p ${BACKUP_DIR}/{mysql,postgresql,mongodb,redis}\n\n# MySQL/MariaDB backup\nif command -v mysql >/dev/null 2>&1 && systemctl is-active mariadb >/dev/null 2>&1; then\n    echo \"Backing up MySQL/MariaDB...\"\n    \n    # Full backup with all databases\n    mysqldump --all-databases --single-transaction --routines --triggers --events \\\n      --master-data=2 --flush-logs --delete-master-logs \\\n      > ${BACKUP_DIR}/mysql/full-backup-${DATE}.sql\n    \n    # Compress backup\n    gzip ${BACKUP_DIR}/mysql/full-backup-${DATE}.sql\n    \n    # Individual database backup\n    mysqldump --single-transaction --routines --triggers myapp \\\n      > ${BACKUP_DIR}/mysql/myapp-backup-${DATE}.sql\n    gzip ${BACKUP_DIR}/mysql/myapp-backup-${DATE}.sql\nfi\n\n# PostgreSQL backup\nif command -v pg_dump >/dev/null 2>&1 && systemctl is-active postgresql-16 >/dev/null 2>&1; then\n    echo \"Backing up PostgreSQL...\"\n    \n    # Full cluster backup\n    sudo -u postgres pg_dumpall > ${BACKUP_DIR}/postgresql/cluster-backup-${DATE}.sql\n    \n    # Individual database backup\n    sudo -u postgres pg_dump -Fc myapp > ${BACKUP_DIR}/postgresql/myapp-backup-${DATE}.dump\n    \n    # Compress SQL backup\n    gzip ${BACKUP_DIR}/postgresql/cluster-backup-${DATE}.sql\nfi\n\n# MongoDB backup\nif command -v mongodump >/dev/null 2>&1 && systemctl is-active mongod >/dev/null 2>&1; then\n    echo \"Backing up MongoDB...\"\n    \n    # Full backup\n    mongodump --host localhost:27017 --ssl \\\n      --sslPEMKeyFile /etc/ssl/mongodb/mongodb.pem \\\n      --sslCAFile /etc/ssl/mongodb/ca.pem \\\n      --out ${BACKUP_DIR}/mongodb/full-backup-${DATE}\n    \n    # Individual database backup\n    mongodump --host localhost:27017 --ssl \\\n      --sslPEMKeyFile /etc/ssl/mongodb/mongodb.pem \\\n      --sslCAFile /etc/ssl/mongodb/ca.pem \\\n      --db myapp --out ${BACKUP_DIR}/mongodb/myapp-backup-${DATE}\n    \n    # Compress backups\n    tar -czf ${BACKUP_DIR}/mongodb/full-backup-${DATE}.tar.gz -C ${BACKUP_DIR}/mongodb full-backup-${DATE}\n    tar -czf ${BACKUP_DIR}/mongodb/myapp-backup-${DATE}.tar.gz -C ${BACKUP_DIR}/mongodb myapp-backup-${DATE}\n    \n    # Remove uncompressed directories\n    rm -rf ${BACKUP_DIR}/mongodb/full-backup-${DATE} ${BACKUP_DIR}/mongodb/myapp-backup-${DATE}\nfi\n\n# Redis backup\nif command -v redis-cli >/dev/null 2>&1 && systemctl is-active redis >/dev/null 2>&1; then\n    echo \"Backing up Redis...\"\n    \n    # Trigger background save\n    redis-cli BGSAVE\n    \n    # Wait for save to complete\n    while [ \"$(redis-cli LASTSAVE)\" = \"$(redis-cli LASTSAVE)\" ]; do\n        sleep 1\n    done\n    \n    # Copy RDB file\n    cp /var/lib/redis/dump.rdb ${BACKUP_DIR}/redis/redis-backup-${DATE}.rdb\n    gzip ${BACKUP_DIR}/redis/redis-backup-${DATE}.rdb\nfi\n\n# Upload to cloud storage\naws s3 cp ${BACKUP_DIR}/ s3://database-backups/ --recursive\naz storage blob upload-batch --source ${BACKUP_DIR} --destination database-backups\ngsutil cp -r ${BACKUP_DIR}/* gs://database-backups/\n\n# Keep only last 14 days of backups\nfind ${BACKUP_DIR} -name \"*backup*\" -type f -mtime +14 -delete\n\n# Verify backup integrity\necho \"Verifying backup integrity...\"\nfor backup in ${BACKUP_DIR}/*/*.gz; do\n    if gzip -t \"$backup\" 2>/dev/null; then\n        echo \"âœ“ $(basename $backup) - OK\"\n    else\n        echo \"âœ— $(basename $backup) - CORRUPTED\"\n    fi\ndone\n\necho \"Database backup completed: ${DATE}\"\nEOF\n\nsudo chmod +x /usr/local/bin/database-backup.sh\n\n# Schedule daily backups\necho \"0 1 * * * root /usr/local/bin/database-backup.sh\" | sudo tee -a /etc/crontab\n```\n\n## High Availability and Replication\n\n### MySQL/MariaDB Master-Slave Replication\n```bash\n# Configure master server\nsudo tee -a /etc/mysql/mariadb.conf.d/replication.cnf > /dev/null <<EOF\n[mysqld]\n# Replication settings\nserver-id = 1\nlog_bin = mysql-bin\nbinlog_format = ROW\nbinlog_do_db = myapp\nsync_binlog = 1\nrelay-log = mysql-relay-bin\nrelay-log-recovery = 1\n\n# GTID replication (recommended)\ngtid_mode = ON\nenforce_gtid_consistency = ON\nlog_slave_updates = ON\nEOF\n\nmysql -u root -p <<EOF\n-- Create replication user\nCREATE USER 'replication'@'%' IDENTIFIED BY 'replication_password_2024';\nGRANT REPLICATION SLAVE ON *.* TO 'replication'@'%';\nFLUSH PRIVILEGES;\n\n-- Get master status\nSHOW MASTER STATUS;\nEOF\n\n# Configure slave server (server-id = 2)\n# On slave server:\nmysql -u root -p <<EOF\nCHANGE MASTER TO\n  MASTER_HOST='mysql-master.example.com',\n  MASTER_USER='replication',\n  MASTER_PASSWORD='replication_password_2024',\n  MASTER_AUTO_POSITION=1;\n\nSTART SLAVE;\nSHOW SLAVE STATUS\\G\nEOF\n```\n\n### PostgreSQL Streaming Replication\n```bash\n# Configure master server\nsudo tee -a /var/lib/pgsql/16/data/postgresql.conf > /dev/null <<EOF\n# Replication settings\nwal_level = replica\nmax_wal_senders = 10\nmax_replication_slots = 10\nwal_keep_size = 1GB\nhot_standby = on\narchive_mode = on\narchive_command = 'cp %p /var/lib/pgsql/16/archive/%f'\nEOF\n\n# Configure replication access\nsudo tee -a /var/lib/pgsql/16/data/pg_hba.conf > /dev/null <<EOF\n# Replication connections\nhostssl replication replication 192.168.1.0/24 scram-sha-256\nEOF\n\n# Create replication user\nsudo -u postgres psql <<EOF\nCREATE USER replication WITH REPLICATION ENCRYPTED PASSWORD 'replication_password_2024';\nEOF\n\n# Create archive directory\nsudo mkdir -p /var/lib/pgsql/16/archive\nsudo chown postgres:postgres /var/lib/pgsql/16/archive\n\nsudo systemctl restart postgresql-16\n\n# Setup slave server\n# On slave server, create base backup:\nsudo -u postgres pg_basebackup -h master.example.com -D /var/lib/pgsql/16/data -U replication -W -v -P -R\n```\n\n### MongoDB Replica Set Configuration\n```bash\n# Initialize replica set (run on primary node)\nmongosh admin <<EOF\nrs.initiate({\n  _id: \"rs0\",\n  version: 1,\n  protocolVersion: 1,\n  members: [\n    { \n      _id: 0, \n      host: \"mongodb1.example.com:27017\",\n      priority: 2,\n      votes: 1\n    },\n    { \n      _id: 1, \n      host: \"mongodb2.example.com:27017\",\n      priority: 1,\n      votes: 1\n    },\n    { \n      _id: 2, \n      host: \"mongodb3.example.com:27017\",\n      priority: 1,\n      votes: 1,\n      arbiterOnly: true\n    }\n  ],\n  settings: {\n    chainingAllowed: false,\n    heartbeatIntervalMillis: 2000,\n    heartbeatTimeoutSecs: 10,\n    electionTimeoutMillis: 10000,\n    catchUpTimeoutMillis: -1,\n    getLastErrorModes: {\n      majority: { \n        tags: { \n          dc: 1 \n        } \n      }\n    }\n  }\n})\n\n// Check replica set status\nrs.status()\n\n// Configure read preferences\nrs.conf()\nEOF\n\n# Configure MongoDB sharding (for large deployments)\n# Config server initialization:\nmongosh admin <<EOF\nrs.initiate({\n  _id: \"configReplSet\",\n  configsvr: true,\n  members: [\n    { _id: 0, host: \"config1.example.com:27019\" },\n    { _id: 1, host: \"config2.example.com:27019\" },\n    { _id: 2, host: \"config3.example.com:27019\" }\n  ]\n})\nEOF\n```\n\n### Redis Sentinel High Availability\n```bash\n# Configure Redis Sentinel for HA\nsudo tee /etc/redis/sentinel.conf > /dev/null <<EOF\n# Redis Sentinel Configuration\nport 26379\nsentinel deny-scripts-reconfig yes\n\n# Monitor Redis master\nsentinel monitor mymaster redis-master.example.com 6379 2\nsentinel auth-pass mymaster redis_secure_password_2024\nsentinel down-after-milliseconds mymaster 5000\nsentinel parallel-syncs mymaster 1\nsentinel failover-timeout mymaster 10000\n\n# Notification scripts\nsentinel notification-script mymaster /etc/redis/notify.sh\nsentinel client-reconfig-script mymaster /etc/redis/reconfig.sh\n\n# Security\nrequirepass sentinel_password_2024\nEOF\n\n# Create notification script\nsudo tee /etc/redis/notify.sh > /dev/null <<'EOF'\n#!/bin/bash\necho \"$(date): Redis failover event: $*\" >> /var/log/redis/sentinel.log\n# Add alerting logic here (email, Slack, etc.)\nEOF\n\n# Create reconfiguration script\nsudo tee /etc/redis/reconfig.sh > /dev/null <<'EOF'\n#!/bin/bash\necho \"$(date): Redis master changed to: $6:$7\" >> /var/log/redis/sentinel.log\n# Update application configuration, restart services, etc.\nEOF\n\nsudo chmod +x /etc/redis/{notify,reconfig}.sh\nsudo systemctl enable --now redis-sentinel\n```\n\n## Performance Optimization\n\n### Database Performance Tuning\n```bash\nsudo tee /usr/local/bin/database-performance-tune.sh > /dev/null <<'EOF'\n#!/bin/bash\n\ntune_mysql() {\n    echo \"Tuning MySQL/MariaDB performance...\"\n    \n    # Calculate optimal buffer pool size (70% of RAM)\n    TOTAL_RAM=$(free -b | awk 'NR==2{print $2}')\n    BUFFER_POOL_SIZE=$((TOTAL_RAM * 70 / 100))\n    \n    mysql -u root -p <<EOF\n-- Performance tuning\nSET GLOBAL innodb_buffer_pool_size = ${BUFFER_POOL_SIZE};\nSET GLOBAL query_cache_size = $((TOTAL_RAM * 5 / 100));\nSET GLOBAL thread_cache_size = 100;\nSET GLOBAL table_open_cache = 4096;\nSET GLOBAL innodb_io_capacity = 2000;\n\n-- Show current configuration\nSHOW VARIABLES LIKE 'innodb_buffer_pool_size';\nSHOW VARIABLES LIKE 'query_cache_size';\nEOF\n}\n\ntune_postgresql() {\n    echo \"Tuning PostgreSQL performance...\"\n    \n    # Use pg_tune recommendations\n    TOTAL_RAM_MB=$(($(free -m | awk 'NR==2{print $2}')))\n    SHARED_BUFFERS=$((TOTAL_RAM_MB / 4))\n    EFFECTIVE_CACHE=$((TOTAL_RAM_MB * 3 / 4))\n    \n    sudo -u postgres psql <<EOF\n-- Performance tuning\nALTER SYSTEM SET shared_buffers = '${SHARED_BUFFERS}MB';\nALTER SYSTEM SET effective_cache_size = '${EFFECTIVE_CACHE}MB';\nALTER SYSTEM SET work_mem = '16MB';\nALTER SYSTEM SET maintenance_work_mem = '256MB';\nALTER SYSTEM SET random_page_cost = 1.1;\nALTER SYSTEM SET effective_io_concurrency = 200;\n\n-- Reload configuration\nSELECT pg_reload_conf();\n\n-- Show current settings\nSHOW shared_buffers;\nSHOW effective_cache_size;\nEOF\n}\n\ntune_mongodb() {\n    echo \"Tuning MongoDB performance...\"\n    \n    # Calculate WiredTiger cache size (50% of RAM)\n    TOTAL_RAM_GB=$(($(free -g | awk 'NR==2{print $2}')))\n    CACHE_SIZE_GB=$((TOTAL_RAM_GB / 2))\n    \n    mongosh admin <<EOF\n// Performance tuning\ndb.adminCommand({\n  \"setParameter\": 1,\n  \"wiredTigerEngineRuntimeConfig\": \"cache_size=${CACHE_SIZE_GB}GB\"\n})\n\n// Show current cache usage\ndb.serverStatus().wiredTiger.cache\nEOF\n}\n\ntune_redis() {\n    echo \"Tuning Redis performance...\"\n    \n    # Calculate maxmemory (50% of RAM for dedicated Redis server)\n    TOTAL_RAM_BYTES=$(free -b | awk 'NR==2{print $2}')\n    MAX_MEMORY_BYTES=$((TOTAL_RAM_BYTES / 2))\n    \n    redis-cli CONFIG SET maxmemory ${MAX_MEMORY_BYTES}\n    redis-cli CONFIG SET maxmemory-policy allkeys-lru\n    redis-cli CONFIG REWRITE\n    \n    echo \"Redis maxmemory set to $(redis-cli CONFIG GET maxmemory | tail -1) bytes\"\n}\n\n# Check which databases are running and tune them\nif systemctl is-active mariadb >/dev/null 2>&1; then\n    tune_mysql\nfi\n\nif systemctl is-active postgresql-16 >/dev/null 2>&1; then\n    tune_postgresql\nfi\n\nif systemctl is-active mongod >/dev/null 2>&1; then\n    tune_mongodb\nfi\n\nif systemctl is-active redis >/dev/null 2>&1; then\n    tune_redis\nfi\n\necho \"Database performance tuning completed\"\nEOF\n\nsudo chmod +x /usr/local/bin/database-performance-tune.sh\n```\n\n## Verification and Testing\n\n### Database Health Checks\n```bash\nsudo tee /usr/local/bin/database-health-check.sh > /dev/null <<'EOF'\n#!/bin/bash\nHEALTH_LOG=\"/var/log/database-health.log\"\n\nlog_message() {\n    echo \"$(date '+%Y-%m-%d %H:%M:%S') - $1\" | tee -a ${HEALTH_LOG}\n}\n\n# MySQL/MariaDB health check\nif command -v mysql >/dev/null 2>&1; then\n    if systemctl is-active mariadb >/dev/null 2>&1; then\n        log_message \"âœ“ MariaDB service is running\"\n        \n        # Test connectivity\n        if mysql -e \"SELECT 1;\" >/dev/null 2>&1; then\n            log_message \"âœ“ MariaDB connectivity test passed\"\n        else\n            log_message \"âœ— MariaDB connectivity test failed\"\n        fi\n        \n        # Check for errors in log\n        ERROR_COUNT=$(tail -100 /var/log/mysql/error.log | grep -i error | wc -l)\n        log_message \"â„¹ MariaDB errors in last 100 log lines: ${ERROR_COUNT}\"\n    else\n        log_message \"âœ— MariaDB service is not running\"\n    fi\nfi\n\n# PostgreSQL health check\nif command -v psql >/dev/null 2>&1; then\n    if systemctl is-active postgresql-16 >/dev/null 2>&1; then\n        log_message \"âœ“ PostgreSQL service is running\"\n        \n        # Test connectivity\n        if sudo -u postgres psql -c \"SELECT version();\" >/dev/null 2>&1; then\n            log_message \"âœ“ PostgreSQL connectivity test passed\"\n        else\n            log_message \"âœ— PostgreSQL connectivity test failed\"\n        fi\n        \n        # Check replication lag (if slave)\n        if sudo -u postgres psql -t -c \"SELECT pg_is_in_recovery();\" | grep -q \"t\"; then\n            LAG=$(sudo -u postgres psql -t -c \"SELECT EXTRACT(EPOCH FROM (now() - pg_last_xact_replay_timestamp()))::int;\")\n            log_message \"â„¹ PostgreSQL replication lag: ${LAG} seconds\"\n        fi\n    else\n        log_message \"âœ— PostgreSQL service is not running\"\n    fi\nfi\n\n# MongoDB health check\nif command -v mongosh >/dev/null 2>&1; then\n    if systemctl is-active mongod >/dev/null 2>&1; then\n        log_message \"âœ“ MongoDB service is running\"\n        \n        # Test connectivity\n        if mongosh --quiet --eval \"db.adminCommand('ping').ok\" 2>/dev/null | grep -q \"1\"; then\n            log_message \"âœ“ MongoDB connectivity test passed\"\n        else\n            log_message \"âœ— MongoDB connectivity test failed\"\n        fi\n        \n        # Check replica set status\n        if mongosh admin --quiet --eval \"rs.status().ok\" 2>/dev/null | grep -q \"1\"; then\n            PRIMARY_COUNT=$(mongosh admin --quiet --eval \"rs.status().members.filter(m => m.stateStr === 'PRIMARY').length\")\n            log_message \"â„¹ MongoDB replica set has ${PRIMARY_COUNT} primary node(s)\"\n        fi\n    else\n        log_message \"âœ— MongoDB service is not running\"\n    fi\nfi\n\n# Redis health check\nif command -v redis-cli >/dev/null 2>&1; then\n    if systemctl is-active redis >/dev/null 2>&1; then\n        log_message \"âœ“ Redis service is running\"\n        \n        # Test connectivity\n        if redis-cli ping | grep -q \"PONG\"; then\n            log_message \"âœ“ Redis connectivity test passed\"\n        else\n            log_message \"âœ— Redis connectivity test failed\"\n        fi\n        \n        # Check memory usage\n        REDIS_MEMORY_PERCENT=$(redis-cli info memory | grep used_memory_rss_human: | cut -d: -f2)\n        log_message \"â„¹ Redis memory usage: ${REDIS_MEMORY_PERCENT}\"\n    else\n        log_message \"âœ— Redis service is not running\"\n    fi\nfi\n\nlog_message \"Database health check completed\"\nEOF\n\nsudo chmod +x /usr/local/bin/database-health-check.sh\n\n# Schedule health checks every 10 minutes\necho \"*/10 * * * * root /usr/local/bin/database-health-check.sh\" | sudo tee -a /etc/crontab\n```\n\n## Troubleshooting (Cross-Platform)\n\n### Common Database Issues\n```bash\n# MySQL/MariaDB troubleshooting\n# Check service status\nsudo systemctl status mariadb\n\n# Check error logs\nsudo tail -f /var/log/mysql/error.log\n\n# Test connectivity\nmysql -u root -p -e \"SELECT version();\"\n\n# Check process list\nmysql -u root -p -e \"SHOW FULL PROCESSLIST;\"\n\n# Check locks\nmysql -u root -p -e \"SHOW ENGINE INNODB STATUS\\G\" | grep -A 20 \"LATEST DETECTED DEADLOCK\"\n\n# Repair tables\nmysqlcheck --all-databases --repair -u root -p\n\n# PostgreSQL troubleshooting\n# Check service status\nsudo systemctl status postgresql-16\n\n# Check logs\nsudo tail -f /var/lib/pgsql/16/data/log/postgresql-*.log\n\n# Test connectivity\nsudo -u postgres psql -c \"SELECT version();\"\n\n# Check active connections\nsudo -u postgres psql -c \"SELECT count(*) FROM pg_stat_activity WHERE state = 'active';\"\n\n# Check locks\nsudo -u postgres psql -c \"SELECT * FROM pg_locks WHERE NOT granted;\"\n\n# Vacuum and analyze\nsudo -u postgres vacuumdb --all --analyze --verbose\n\n# MongoDB troubleshooting\n# Check service status\nsudo systemctl status mongod\n\n# Check logs\nsudo tail -f /var/log/mongodb/mongod.log\n\n# Test connectivity\nmongosh --eval \"db.adminCommand('ping')\"\n\n# Check replica set status\nmongosh admin --eval \"rs.status()\"\n\n# Check database profiler\nmongosh myapp --eval \"db.getProfilingStatus()\"\n\n# Repair database\nmongosh myapp --eval \"db.repairDatabase()\"\n\n# Redis troubleshooting\n# Check service status\nsudo systemctl status redis\n\n# Check logs\nsudo tail -f /var/log/redis/redis-server.log\n\n# Test connectivity\nredis-cli ping\n\n# Check memory stats\nredis-cli info memory\n\n# Check slow log\nredis-cli slowlog get 10\n\n# Monitor commands\nredis-cli monitor\n```\n\n### Advanced Database Debugging\n```bash\n# MySQL/MariaDB debugging\n# Enable general log\nmysql -u root -p -e \"SET GLOBAL general_log = 'ON';\"\nmysql -u root -p -e \"SET GLOBAL log_output = 'FILE';\"\n\n# Performance schema\nmysql -u root -p -e \"SELECT * FROM performance_schema.file_summary_by_event_name WHERE event_name LIKE 'wait/io/file%' ORDER BY sum_timer_wait DESC LIMIT 10;\"\n\n# PostgreSQL debugging\n# Enable query logging\nsudo -u postgres psql -c \"ALTER SYSTEM SET log_statement = 'all';\"\nsudo -u postgres psql -c \"SELECT pg_reload_conf();\"\n\n# Check query performance\nsudo -u postgres psql -c \"SELECT query, calls, total_time, mean_time FROM pg_stat_statements ORDER BY total_time DESC LIMIT 10;\"\n\n# MongoDB debugging\n# Enable profiler\nmongosh myapp --eval \"db.setProfilingLevel(2, { slowms: 100 })\"\n\n# Check slow operations\nmongosh myapp --eval \"db.system.profile.find().sort({ts:-1}).limit(5).pretty()\"\n\n# Redis debugging\n# Enable slow log\nredis-cli CONFIG SET slowlog-log-slower-than 10000\n\n# Check slow operations\nredis-cli SLOWLOG GET 10\n\n# Monitor memory usage\nredis-cli --latency-history -i 1\n```\n\n## Additional Resources\n\n- [MySQL Documentation](https://dev.mysql.com/doc/)\n- [MariaDB Documentation](https://mariadb.com/docs/)\n- [PostgreSQL Documentation](https://www.postgresql.org/docs/)\n- [MongoDB Documentation](https://docs.mongodb.com/)\n- [Redis Documentation](https://redis.io/documentation)\n- [Database Security Cheat Sheet](https://cheatsheetseries.owasp.org/cheatsheets/Database_Security_Cheat_Sheet.html)\n\n---\n\n**Note:** This guide is part of the [HowToMgr](https://howtomgr.github.io) collection.","readmeHtml":"<h1 id=\"database-installation-guide\" class=\"mobile-header\">Database Installation Guide</h1>\n<p class=\"mobile-paragraph\">Comprehensive installation and configuration guide for popular database management systems including MySQL/MariaDB, PostgreSQL, MongoDB, and more. Complete with security hardening and performance optimization for production environments.</p>\n<h2 id=\"prerequisites\" class=\"mobile-header\">Prerequisites</h2>\n<li class=\"mobile-list-item\">Linux system (any modern distribution)</li>\n<li class=\"mobile-list-item\">Root or sudo access</li>\n<li class=\"mobile-list-item\">4GB RAM minimum, 8GB+ recommended for production</li>\n<li class=\"mobile-list-item\">SSD storage recommended for database files</li>\n<li class=\"mobile-list-item\">Network connectivity for replication setups (if applicable)</li>\n<h2 id=\"mysqlmariadb-installation\" class=\"mobile-header\">MySQL/MariaDB Installation</h2>\n<h3 id=\"ubuntudebian\" class=\"mobile-header\">Ubuntu/Debian</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Update system\nsudo apt update\n\n# Install MariaDB (recommended over MySQL)\nsudo apt install -y mariadb-server mariadb-client\n\n# Or install MySQL\nsudo apt install -y mysql-server mysql-client\n\n# Secure installation\nsudo mysql_secure_installation\n\n# Enable and start service\nsudo systemctl enable --now mariadb  # or mysql\n\n# Verify installation\nmysql --version\nsudo systemctl status mariadb</code></pre>\n      </div>\n    </div>\n<h3 id=\"rhelcentosrocky-linuxalmalinux\" class=\"mobile-header\">RHEL/CentOS/Rocky Linux/AlmaLinux</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Install MariaDB from official repository\nsudo tee /etc/yum.repos.d/MariaDB.repo &gt; /dev/null &lt;&lt;EOF\n[mariadb]\nname = MariaDB\nbaseurl = https://mirror.its.dal.ca/mariadb/yum/10.11/rhel\\$releasever-\\$basearch\nmodule_hotfixes = 1\ngpgkey = https://mirror.its.dal.ca/mariadb/yum/RPM-GPG-KEY-MariaDB\ngpgcheck = 1\nEOF\n\nsudo yum install -y MariaDB-server MariaDB-client MariaDB-backup\n\n# Enable and start service\nsudo systemctl enable --now mariadb\n\n# Secure installation\nsudo mysql_secure_installation\n\n# Configure firewall\nsudo firewall-cmd --permanent --add-service=mysql\nsudo firewall-cmd --reload</code></pre>\n      </div>\n    </div>\n<h3 id=\"mariadb-production-configuration\" class=\"mobile-header\">MariaDB Production Configuration</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Create optimized configuration\nsudo tee /etc/mysql/mariadb.conf.d/50-server.cnf &gt; /dev/null &lt;&lt;EOF\n[mysqld]\n# Connection and thread handling\nmax_connections = 500\nthread_cache_size = 100\ntable_open_cache = 4096\ntable_definition_cache = 2048\n\n# InnoDB settings\ninnodb_buffer_pool_size = 4G  # 70-80% of RAM\ninnodb_log_file_size = 1G\ninnodb_log_buffer_size = 64M\ninnodb_file_per_table = 1\ninnodb_flush_log_at_trx_commit = 2\ninnodb_flush_method = O_DIRECT\ninnodb_io_capacity = 2000\ninnodb_io_capacity_max = 4000\ninnodb_read_io_threads = 8\ninnodb_write_io_threads = 8\ninnodb_open_files = 8192\n\n# Query cache (for read-heavy workloads)\nquery_cache_type = 1\nquery_cache_size = 256M\nquery_cache_limit = 2M\n\n# Temporary tables\ntmp_table_size = 64M\nmax_heap_table_size = 64M\n\n# Binary logging (for replication)\nlog_bin = mysql-bin\nbinlog_format = ROW\nsync_binlog = 1\nexpire_logs_days = 7\nbinlog_cache_size = 1M\n\n# Slow query log\nslow_query_log = 1\nslow_query_log_file = /var/log/mysql/slow.log\nlong_query_time = 2\nlog_queries_not_using_indexes = 1\n\n# Security\nbind-address = 127.0.0.1  # Change for network access\nskip_name_resolve = 1\nlocal_infile = 0\n\n# SSL configuration\nssl_cert = /etc/mysql/ssl/server-cert.pem\nssl_key = /etc/mysql/ssl/server-key.pem\nssl_ca = /etc/mysql/ssl/ca-cert.pem\nrequire_secure_transport = ON\n\n# Character set\ncharacter_set_server = utf8mb4\ncollation_server = utf8mb4_unicode_ci\nEOF\n\nsudo systemctl restart mariadb</code></pre>\n      </div>\n    </div>\n<h3 id=\"mysqlmariadb-security-hardening\" class=\"mobile-header\">MySQL/MariaDB Security Hardening</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Create dedicated database user with limited privileges\nmysql -u root -p &lt;&lt;EOF\n-- Create application database\nCREATE DATABASE myapp CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;\n\n-- Create application user\nCREATE USER &#039;appuser&#039;@&#039;localhost&#039; IDENTIFIED BY &#039;secure_app_password_2024&#039;;\nCREATE USER &#039;appuser&#039;@&#039;192.168.1.%&#039; IDENTIFIED BY &#039;secure_app_password_2024&#039;;\n\n-- Grant minimal privileges\nGRANT SELECT, INSERT, UPDATE, DELETE ON myapp.* TO &#039;appuser&#039;@&#039;localhost&#039;;\nGRANT SELECT, INSERT, UPDATE, DELETE ON myapp.* TO &#039;appuser&#039;@&#039;192.168.1.%&#039;;\n\n-- Create read-only user for backups\nCREATE USER &#039;backup&#039;@&#039;localhost&#039; IDENTIFIED BY &#039;backup_password_2024&#039;;\nGRANT SELECT, LOCK TABLES, SHOW VIEW, EVENT, TRIGGER ON *.* TO &#039;backup&#039;@&#039;localhost&#039;;\n\n-- Create replication user\nCREATE USER &#039;replication&#039;@&#039;%&#039; IDENTIFIED BY &#039;replication_password_2024&#039;;\nGRANT REPLICATION SLAVE ON *.* TO &#039;replication&#039;@&#039;%&#039;;\n\n-- Remove default users and databases\nDROP DATABASE IF EXISTS test;\nDELETE FROM mysql.user WHERE User=&#039;&#039;;\nDELETE FROM mysql.user WHERE User=&#039;root&#039; AND Host NOT IN (&#039;localhost&#039;, &#039;127.0.0.1&#039;, &#039;::1&#039;);\n\n-- Secure privileges\nFLUSH PRIVILEGES;\nEOF\n\n# Generate SSL certificates for MySQL\nsudo mkdir -p /etc/mysql/ssl\ncd /etc/mysql/ssl\n\n# Create CA certificate\nsudo openssl genrsa -out ca-key.pem 4096\nsudo openssl req -new -x509 -nodes -days 3650 -key ca-key.pem -out ca-cert.pem -subj &quot;/C=US/ST=State/L=City/O=Organization/CN=MySQL-CA&quot;\n\n# Create server certificate\nsudo openssl req -newkey rsa:4096 -days 365 -nodes -keyout server-key.pem -out server-req.pem -subj &quot;/C=US/ST=State/L=City/O=Organization/CN=mysql.example.com&quot;\nsudo openssl x509 -req -days 365 -set_serial 01 -in server-req.pem -out server-cert.pem -CA ca-cert.pem -CAkey ca-key.pem\n\n# Create client certificate\nsudo openssl req -newkey rsa:4096 -days 365 -nodes -keyout client-key.pem -out client-req.pem -subj &quot;/C=US/ST=State/L=City/O=Organization/CN=mysql-client&quot;\nsudo openssl x509 -req -days 365 -set_serial 02 -in client-req.pem -out client-cert.pem -CA ca-cert.pem -CAkey ca-key.pem\n\n# Set permissions\nsudo chown mysql:mysql /etc/mysql/ssl/*\nsudo chmod 600 /etc/mysql/ssl/*key.pem\nsudo chmod 644 /etc/mysql/ssl/*.pem\n\nsudo systemctl restart mariadb</code></pre>\n      </div>\n    </div>\n<h2 id=\"postgresql-installation\" class=\"mobile-header\">PostgreSQL Installation</h2>\n<h3 id=\"ubuntudebian-postgresql-setup\" class=\"mobile-header\">Ubuntu/Debian PostgreSQL Setup</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Install PostgreSQL official repository\nsudo apt install -y wget ca-certificates\nwget --quiet -O - https://www.postgresql.org/media/keys/ACCC4CF8.asc | sudo apt-key add -\necho &quot;deb http://apt.postgresql.org/pub/repos/apt/ $(lsb_release -cs)-pgdg main&quot; | sudo tee /etc/apt/sources.list.d/pgdg.list\n\n# Update and install PostgreSQL 16\nsudo apt update\nsudo apt install -y postgresql-16 postgresql-client-16 postgresql-contrib-16\n\n# Enable and start service\nsudo systemctl enable --now postgresql\n\n# Configure PostgreSQL\nsudo -u postgres psql &lt;&lt;EOF\n-- Create application database\nCREATE DATABASE myapp WITH ENCODING=&#039;UTF8&#039; LC_COLLATE=&#039;en_US.UTF-8&#039; LC_CTYPE=&#039;en_US.UTF-8&#039; TEMPLATE=template0;\n\n-- Create application user\nCREATE USER appuser WITH ENCRYPTED PASSWORD &#039;secure_app_password_2024&#039;;\nGRANT ALL PRIVILEGES ON DATABASE myapp TO appuser;\n\n-- Create read-only user\nCREATE USER readonly WITH ENCRYPTED PASSWORD &#039;readonly_password_2024&#039;;\nGRANT CONNECT ON DATABASE myapp TO readonly;\n\\c myapp\nGRANT USAGE ON SCHEMA public TO readonly;\nGRANT SELECT ON ALL TABLES IN SCHEMA public TO readonly;\nALTER DEFAULT PRIVILEGES IN SCHEMA public GRANT SELECT ON TABLES TO readonly;\n\n-- Security settings\nALTER SYSTEM SET password_encryption = &#039;scram-sha-256&#039;;\nSELECT pg_reload_conf();\nEOF</code></pre>\n      </div>\n    </div>\n<h3 id=\"rhelcentosrocky-linux-postgresql\" class=\"mobile-header\">RHEL/CentOS/Rocky Linux PostgreSQL</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Install PostgreSQL repository\nsudo yum install -y https://download.postgresql.org/pub/repos/yum/reporpms/EL-9-x86_64/pgdg-redhat-repo-latest.noarch.rpm\n\n# Install PostgreSQL 16\nsudo yum install -y postgresql16-server postgresql16 postgresql16-contrib postgresql16-devel\n\n# Initialize database\nsudo /usr/pgsql-16/bin/postgresql-16-setup initdb\n\n# Enable and start service\nsudo systemctl enable --now postgresql-16\n\n# Configure firewall\nsudo firewall-cmd --permanent --add-port=5432/tcp\nsudo firewall-cmd --reload</code></pre>\n      </div>\n    </div>\n<h3 id=\"postgresql-production-configuration\" class=\"mobile-header\">PostgreSQL Production Configuration</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Configure PostgreSQL for production\nsudo tee /var/lib/pgsql/16/data/postgresql.conf &gt; /dev/null &lt;&lt;EOF\n# PostgreSQL 16 Production Configuration\n\n# Connection settings\nlisten_addresses = &#039;localhost&#039;  # Change to &#039;*&#039; for network access\nport = 5432\nmax_connections = 200\nshared_buffers = 2GB  # 25% of RAM\neffective_cache_size = 8GB  # 75% of RAM\n\n# Memory settings\nwork_mem = 16MB\nmaintenance_work_mem = 512MB\ndynamic_shared_memory_type = posix\n\n# WAL settings\nwal_level = replica\nwal_buffers = 64MB\ncheckpoint_completion_target = 0.9\nmax_wal_size = 4GB\nmin_wal_size = 1GB\ncheckpoint_timeout = 15min\n\n# Query planner\nrandom_page_cost = 1.1  # For SSD\neffective_io_concurrency = 200\nmax_worker_processes = 8\nmax_parallel_workers_per_gather = 4\nmax_parallel_workers = 8\nmax_parallel_maintenance_workers = 4\n\n# Logging\nlog_destination = &#039;stderr&#039;\nlogging_collector = on\nlog_directory = &#039;log&#039;\nlog_filename = &#039;postgresql-%Y-%m-%d_%H%M%S.log&#039;\nlog_rotation_age = 1d\nlog_rotation_size = 100MB\nlog_min_duration_statement = 1000  # Log slow queries\nlog_line_prefix = &#039;%t [%p]: [%l-1] user=%u,db=%d,app=%a,client=%h &#039;\nlog_statement = &#039;ddl&#039;  # Log DDL statements\nlog_lock_waits = on\n\n# SSL configuration\nssl = on\nssl_cert_file = &#039;/var/lib/pgsql/16/data/ssl/server.crt&#039;\nssl_key_file = &#039;/var/lib/pgsql/16/data/ssl/server.key&#039;\nssl_ca_file = &#039;/var/lib/pgsql/16/data/ssl/ca.crt&#039;\nssl_min_protocol_version = &#039;TLSv1.2&#039;\nssl_prefer_server_ciphers = on\n\n# Security\npassword_encryption = scram-sha-256\nkrb_server_keyfile = &#039;&#039;\ndb_user_namespace = off\nrow_security = on\n\n# Autovacuum\nautovacuum = on\nautovacuum_max_workers = 4\nautovacuum_naptime = 1min\nautovacuum_vacuum_threshold = 50\nautovacuum_analyze_threshold = 50\nautovacuum_vacuum_scale_factor = 0.1\nautovacuum_analyze_scale_factor = 0.05\n\n# Background writer\nbgwriter_delay = 200ms\nbgwriter_lru_maxpages = 100\nbgwriter_lru_multiplier = 2.0\nbgwriter_flush_after = 512kB\n\n# Checkpointer\ncheckpoint_flush_after = 256kB\n\n# Statistics\ntrack_activities = on\ntrack_counts = on\ntrack_io_timing = on\ntrack_functions = all\nstats_temp_directory = &#039;pg_stat_tmp&#039;\nEOF\n\n# Configure client authentication\nsudo tee /var/lib/pgsql/16/data/pg_hba.conf &gt; /dev/null &lt;&lt;EOF\n# PostgreSQL Client Authentication Configuration\n\n# TYPE  DATABASE        USER            ADDRESS                 METHOD\n\n# Local connections\nlocal   all             postgres                                peer\nlocal   all             all                                     scram-sha-256\n\n# IPv4 local connections\nhost    all             all             127.0.0.1/32            scram-sha-256\n\n# IPv6 local connections  \nhost    all             all             ::1/128                 scram-sha-256\n\n# Network connections (if needed)\nhostssl myapp           appuser         192.168.1.0/24          scram-sha-256\nhostssl myapp           readonly        192.168.1.0/24          scram-sha-256\n\n# Replication connections\nhostssl replication     replication     192.168.1.0/24          scram-sha-256\n\n# Deny all other connections\nhost    all             all             0.0.0.0/0               reject\nEOF\n\n# Generate SSL certificates\nsudo mkdir -p /var/lib/pgsql/16/data/ssl\ncd /var/lib/pgsql/16/data/ssl\n\nsudo openssl genrsa -out ca.key 4096\nsudo openssl req -new -x509 -days 3650 -key ca.key -out ca.crt -subj &quot;/C=US/ST=State/L=City/O=Organization/CN=PostgreSQL-CA&quot;\n\nsudo openssl genrsa -out server.key 4096\nsudo openssl req -new -key server.key -out server.csr -subj &quot;/C=US/ST=State/L=City/O=Organization/CN=postgres.example.com&quot;\nsudo openssl x509 -req -days 365 -in server.csr -CA ca.crt -CAkey ca.key -CAcreateserial -out server.crt\n\nsudo chown postgres:postgres /var/lib/pgsql/16/data/ssl/*\nsudo chmod 600 /var/lib/pgsql/16/data/ssl/*.key\nsudo chmod 644 /var/lib/pgsql/16/data/ssl/*.crt\n\nsudo systemctl restart postgresql-16</code></pre>\n      </div>\n    </div>\n<h3 id=\"postgresql-security-hardening\" class=\"mobile-header\">PostgreSQL Security Hardening</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Advanced security configuration\nsudo -u postgres psql &lt;&lt;EOF\n-- Enable row-level security\nALTER SYSTEM SET row_security = on;\n\n-- Configure logging for security\nALTER SYSTEM SET log_statement = &#039;all&#039;;\nALTER SYSTEM SET log_connections = on;\nALTER SYSTEM SET log_disconnections = on;\nALTER SYSTEM SET log_lock_waits = on;\nALTER SYSTEM SET log_temp_files = 0;\n\n-- Password policies\nALTER SYSTEM SET password_encryption = &#039;scram-sha-256&#039;;\n\n-- Create roles with specific privileges\nCREATE ROLE app_read;\nGRANT CONNECT ON DATABASE myapp TO app_read;\nGRANT USAGE ON SCHEMA public TO app_read;\nGRANT SELECT ON ALL TABLES IN SCHEMA public TO app_read;\n\nCREATE ROLE app_write;\nGRANT app_read TO app_write;\nGRANT INSERT, UPDATE, DELETE ON ALL TABLES IN SCHEMA public TO app_write;\n\n-- Create application-specific user\nCREATE USER myapp_user WITH PASSWORD &#039;secure_password_2024&#039;;\nGRANT app_write TO myapp_user;\n\n-- Security functions\nCREATE OR REPLACE FUNCTION audit_trigger_function()\nRETURNS TRIGGER AS \\$\\$\nBEGIN\n    INSERT INTO audit_log (table_name, operation, old_values, new_values, user_name, timestamp)\n    VALUES (TG_TABLE_NAME, TG_OP, row_to_json(OLD), row_to_json(NEW), current_user, now());\n    RETURN COALESCE(NEW, OLD);\nEND;\n\\$\\$ LANGUAGE plpgsql;\n\n-- Reload configuration\nSELECT pg_reload_conf();\nEOF\n\n# Configure connection limits\nsudo tee -a /var/lib/pgsql/16/data/postgresql.conf &gt; /dev/null &lt;&lt;EOF\n\n# Connection limiting per user/database\n# ALTER USER myapp_user CONNECTION LIMIT 50;\n# ALTER DATABASE myapp CONNECTION LIMIT 100;\nEOF</code></pre>\n      </div>\n    </div>\n<h2 id=\"mongodb-installation\" class=\"mobile-header\">MongoDB Installation</h2>\n<h3 id=\"ubuntudebian-mongodb-setup\" class=\"mobile-header\">Ubuntu/Debian MongoDB Setup</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Import MongoDB public GPG key\nwget -qO - https://www.mongodb.org/static/pgp/server-7.0.asc | sudo apt-key add -\n\n# Add MongoDB repository\necho &quot;deb [ arch=amd64,arm64 ] https://repo.mongodb.org/apt/ubuntu $(lsb_release -cs)/mongodb-org/7.0 multiverse&quot; | sudo tee /etc/apt/sources.list.d/mongodb-org-7.0.list\n\n# Update and install MongoDB\nsudo apt update\nsudo apt install -y mongodb-org\n\n# Enable and start service\nsudo systemctl enable --now mongod\n\n# Verify installation\nmongosh --eval &#039;db.runCommand(&quot;connectionStatus&quot;)&#039;</code></pre>\n      </div>\n    </div>\n<h3 id=\"rhelcentosrocky-linux-mongodb\" class=\"mobile-header\">RHEL/CentOS/Rocky Linux MongoDB</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Add MongoDB repository\nsudo tee /etc/yum.repos.d/mongodb-org-7.0.repo &gt; /dev/null &lt;&lt;EOF\n[mongodb-org-7.0]\nname=MongoDB Repository\nbaseurl=https://repo.mongodb.org/yum/redhat/\\$releasever/mongodb-org/7.0/\\$basearch/\ngpgcheck=1\nenabled=1\ngpgkey=https://www.mongodb.org/static/pgp/server-7.0.asc\nEOF\n\n# Install MongoDB\nsudo yum install -y mongodb-org\n\n# Enable and start service\nsudo systemctl enable --now mongod\n\n# Configure firewall\nsudo firewall-cmd --permanent --add-port=27017/tcp\nsudo firewall-cmd --reload</code></pre>\n      </div>\n    </div>\n<h3 id=\"mongodb-production-configuration\" class=\"mobile-header\">MongoDB Production Configuration</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Create secure MongoDB configuration\nsudo tee /etc/mongod.conf &gt; /dev/null &lt;&lt;EOF\n# MongoDB Production Configuration\n\nstorage:\n  dbPath: /var/lib/mongo\n  journal:\n    enabled: true\n  wiredTiger:\n    engineConfig:\n      cacheSizeGB: 4  # 50% of RAM\n      journalCompressor: snappy\n      directoryForIndexes: false\n    collectionConfig:\n      blockCompressor: snappy\n    indexConfig:\n      prefixCompression: true\n\nsystemLog:\n  destination: file\n  logAppend: true\n  path: /var/log/mongodb/mongod.log\n  quiet: false\n  logRotate: reopen\n  component:\n    accessControl:\n      verbosity: 1\n    command:\n      verbosity: 1\n\nnet:\n  port: 27017\n  bindIp: 127.0.0.1  # Change for network access\n  maxIncomingConnections: 1000\n  compression:\n    compressors: snappy,zstd\n  ssl:\n    mode: requireSSL\n    PEMKeyFile: /etc/ssl/mongodb/mongodb.pem\n    CAFile: /etc/ssl/mongodb/ca.pem\n    allowInvalidHostnames: false\n    allowInvalidCertificates: false\n\nsecurity:\n  authorization: enabled\n  keyFile: /etc/mongodb/mongodb-keyfile\n  clusterAuthMode: x509\n  javascriptEnabled: false\n\noperationProfiling:\n  mode: slowOp\n  slowOpThresholdMs: 100\n  slowOpSampleRate: 0.02\n\nreplication:\n  replSetName: rs0\n  enableMajorityReadConcern: true\n\nsharding:\n  clusterRole: shardsvr  # or configsvr for config servers\n\nprocessManagement:\n  fork: true\n  pidFilePath: /var/run/mongodb/mongod.pid\n  timeZoneInfo: /usr/share/zoneinfo\n\nsetParameter:\n  authenticationMechanisms: SCRAM-SHA-1,SCRAM-SHA-256\n  scramIterationCount: 15000\n  failIndexKeyTooLong: false\n  notablescan: 1  # Disable table scans in production\nEOF\n\n# Create MongoDB keyfile for replica set authentication\nsudo openssl rand -base64 756 | sudo tee /etc/mongodb/mongodb-keyfile\nsudo chmod 600 /etc/mongodb/mongodb-keyfile\nsudo chown mongod:mongod /etc/mongodb/mongodb-keyfile\n\n# Generate SSL certificates for MongoDB\nsudo mkdir -p /etc/ssl/mongodb\ncd /etc/ssl/mongodb\n\nsudo openssl genrsa -out ca.key 4096\nsudo openssl req -new -x509 -days 3650 -key ca.key -out ca.pem -subj &quot;/C=US/ST=State/L=City/O=Organization/CN=MongoDB-CA&quot;\n\nsudo openssl genrsa -out mongodb.key 4096\nsudo openssl req -new -key mongodb.key -out mongodb.csr -subj &quot;/C=US/ST=State/L=City/O=Organization/CN=mongodb.example.com&quot;\nsudo openssl x509 -req -days 365 -in mongodb.csr -CA ca.pem -CAkey ca.key -CAcreateserial -out mongodb.crt\n\n# Combine certificate and key for MongoDB\nsudo cat mongodb.crt mongodb.key | sudo tee mongodb.pem\nsudo chmod 600 /etc/ssl/mongodb/*.key /etc/ssl/mongodb/*.pem\nsudo chown mongod:mongod /etc/ssl/mongodb/*\n\nsudo systemctl restart mongod</code></pre>\n      </div>\n    </div>\n<h3 id=\"mongodb-security-setup\" class=\"mobile-header\">MongoDB Security Setup</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Initialize MongoDB security\nmongosh --ssl --sslPEMKeyFile /etc/ssl/mongodb/mongodb.pem --sslCAFile /etc/ssl/mongodb/ca.pem &lt;&lt;EOF\n// Create admin user\nuse admin\ndb.createUser({\n  user: &quot;admin&quot;,\n  pwd: &quot;secure_admin_password_2024&quot;,\n  roles: [\n    { role: &quot;userAdminAnyDatabase&quot;, db: &quot;admin&quot; },\n    { role: &quot;readWriteAnyDatabase&quot;, db: &quot;admin&quot; },\n    { role: &quot;dbAdminAnyDatabase&quot;, db: &quot;admin&quot; },\n    { role: &quot;clusterAdmin&quot;, db: &quot;admin&quot; }\n  ]\n})\n\n// Create application user\nuse myapp\ndb.createUser({\n  user: &quot;appuser&quot;,\n  pwd: &quot;secure_app_password_2024&quot;,\n  roles: [\n    { role: &quot;readWrite&quot;, db: &quot;myapp&quot; }\n  ]\n})\n\n// Create read-only user\ndb.createUser({\n  user: &quot;readonly&quot;,\n  pwd: &quot;readonly_password_2024&quot;,\n  roles: [\n    { role: &quot;read&quot;, db: &quot;myapp&quot; }\n  ]\n})\n\n// Create backup user\nuse admin\ndb.createUser({\n  user: &quot;backup&quot;,\n  pwd: &quot;backup_password_2024&quot;,\n  roles: [\n    { role: &quot;backup&quot;, db: &quot;admin&quot; },\n    { role: &quot;restore&quot;, db: &quot;admin&quot; }\n  ]\n})\n\n// Initialize replica set (if using replication)\nrs.initiate({\n  _id: &quot;rs0&quot;,\n  members: [\n    { _id: 0, host: &quot;mongodb1.example.com:27017&quot;, priority: 2 },\n    { _id: 1, host: &quot;mongodb2.example.com:27017&quot;, priority: 1 },\n    { _id: 2, host: &quot;mongodb3.example.com:27017&quot;, priority: 1, arbiterOnly: true }\n  ]\n})\nEOF</code></pre>\n      </div>\n    </div>\n<h2 id=\"redis-installation-and-configuration\" class=\"mobile-header\">Redis Installation and Configuration</h2>\n<h3 id=\"redis-setup-all-distributions\" class=\"mobile-header\">Redis Setup (All Distributions)</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Ubuntu/Debian\nsudo apt install -y redis-server redis-tools\n\n# RHEL/CentOS\nsudo yum install -y redis\n\n# Fedora\nsudo dnf install -y redis\n\n# Arch Linux\nsudo pacman -S redis\n\n# Configure Redis for production\nsudo tee /etc/redis/redis.conf &gt; /dev/null &lt;&lt;EOF\n# Redis Production Configuration\n\n# Network\nbind 127.0.0.1 ::1  # Change for network access\nport 6379\ntcp-backlog 511\ntimeout 300\ntcp-keepalive 300\n\n# Security\nrequirepass redis_secure_password_2024\nrename-command FLUSHDB &quot;FLUSHDB_9a8b7c6d5e4f3g2h1&quot;\nrename-command FLUSHALL &quot;FLUSHALL_h1g2f3e4d5c6b7a8&quot;\nrename-command DEBUG &quot;DEBUG_8a7b6c5d4e3f2g1h&quot;\nrename-command CONFIG &quot;CONFIG_1h2g3f4e5d6c7b8a&quot;\n\n# SSL/TLS (Redis 6.0+)\ntls-port 6380\nport 0  # Disable non-TLS port\ntls-cert-file /etc/redis/tls/redis.crt\ntls-key-file /etc/redis/tls/redis.key\ntls-ca-cert-file /etc/redis/tls/ca.crt\ntls-protocols &quot;TLSv1.2 TLSv1.3&quot;\ntls-prefer-server-ciphers yes\n\n# Memory management\nmaxmemory 2gb\nmaxmemory-policy allkeys-lru\nmaxmemory-samples 5\n\n# Persistence\nsave 900 1\nsave 300 10\nsave 60 10000\nrdbcompression yes\nrdbchecksum yes\ndbfilename redis.rdb\ndir /var/lib/redis/\n\n# AOF (Append Only File)\nappendonly yes\nappendfilename &quot;appendonly.aof&quot;\nappendfsync everysec\nno-appendfsync-on-rewrite no\nauto-aof-rewrite-percentage 100\nauto-aof-rewrite-min-size 64mb\n\n# Logging\nloglevel notice\nlogfile /var/log/redis/redis-server.log\nsyslog-enabled yes\nsyslog-ident redis\n\n# Slow log\nslowlog-log-slower-than 10000\nslowlog-max-len 128\n\n# Latency monitoring\nlatency-monitor-threshold 100\n\n# Client output buffer limits\nclient-output-buffer-limit normal 0 0 0\nclient-output-buffer-limit replica 256mb 64mb 60\nclient-output-buffer-limit pubsub 32mb 8mb 60\n\n# Advanced configuration\nhz 10\ndynamic-hz yes\naof-rewrite-incremental-fsync yes\nrdb-save-incremental-fsync yes\n\n# Lua scripting\nlua-time-limit 5000\nEOF\n\n# Generate Redis TLS certificates\nsudo mkdir -p /etc/redis/tls\ncd /etc/redis/tls\n\nsudo openssl genrsa -out ca.key 4096\nsudo openssl req -new -x509 -days 3650 -key ca.key -out ca.crt -subj &quot;/C=US/ST=State/L=City/O=Organization/CN=Redis-CA&quot;\n\nsudo openssl genrsa -out redis.key 4096\nsudo openssl req -new -key redis.key -out redis.csr -subj &quot;/C=US/ST=State/L=City/O=Organization/CN=redis.example.com&quot;\nsudo openssl x509 -req -days 365 -in redis.csr -CA ca.crt -CAkey ca.key -CAcreateserial -out redis.crt\n\nsudo chown redis:redis /etc/redis/tls/*\nsudo chmod 600 /etc/redis/tls/*.key\nsudo chmod 644 /etc/redis/tls/*.crt\n\nsudo systemctl restart redis-server</code></pre>\n      </div>\n    </div>\n<h2 id=\"database-monitoring-and-maintenance\" class=\"mobile-header\">Database Monitoring and Maintenance</h2>\n<h3 id=\"comprehensive-database-monitoring\" class=\"mobile-header\">Comprehensive Database Monitoring</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\">sudo tee /usr/local/bin/database-monitor.sh &gt; /dev/null &lt;&lt;&#039;EOF&#039;\n#!/bin/bash\nMONITOR_LOG=&quot;/var/log/database-monitor.log&quot;\n\nlog_message() {\n    echo &quot;$(date &#039;+%Y-%m-%d %H:%M:%S&#039;) - $1&quot; | tee -a ${MONITOR_LOG}\n}\n\n# MySQL/MariaDB monitoring\nif command -v mysql &gt;/dev/null 2&gt;&amp;1 &amp;&amp; systemctl is-active mariadb &gt;/dev/null 2&gt;&amp;1; then\n    log_message &quot;=== MySQL/MariaDB Monitoring ===&quot;\n    \n    # Connection count\n    MYSQL_CONNECTIONS=$(mysql -e &quot;SHOW STATUS LIKE &#039;Threads_connected&#039;;&quot; | tail -1 | awk &#039;{print $2}&#039;)\n    MYSQL_MAX_CONNECTIONS=$(mysql -e &quot;SHOW VARIABLES LIKE &#039;max_connections&#039;;&quot; | tail -1 | awk &#039;{print $2}&#039;)\n    log_message &quot;MySQL connections: ${MYSQL_CONNECTIONS}/${MYSQL_MAX_CONNECTIONS}&quot;\n    \n    # Query performance\n    SLOW_QUERIES=$(mysql -e &quot;SHOW STATUS LIKE &#039;Slow_queries&#039;;&quot; | tail -1 | awk &#039;{print $2}&#039;)\n    log_message &quot;MySQL slow queries: ${SLOW_QUERIES}&quot;\n    \n    # Buffer pool hit ratio\n    BUFFER_HIT_RATIO=$(mysql -e &quot;\n      SELECT ROUND((1 - (Innodb_buffer_pool_reads / Innodb_buffer_pool_read_requests)) * 100, 2) as hit_ratio\n      FROM INFORMATION_SCHEMA.GLOBAL_STATUS \n      WHERE VARIABLE_NAME IN (&#039;Innodb_buffer_pool_reads&#039;, &#039;Innodb_buffer_pool_read_requests&#039;);&quot; | tail -1)\n    log_message &quot;InnoDB buffer pool hit ratio: ${BUFFER_HIT_RATIO}%&quot;\nfi\n\n# PostgreSQL monitoring\nif command -v psql &gt;/dev/null 2&gt;&amp;1 &amp;&amp; systemctl is-active postgresql-16 &gt;/dev/null 2&gt;&amp;1; then\n    log_message &quot;=== PostgreSQL Monitoring ===&quot;\n    \n    # Connection count\n    PG_CONNECTIONS=$(sudo -u postgres psql -t -c &quot;SELECT count(*) FROM pg_stat_activity;&quot;)\n    PG_MAX_CONNECTIONS=$(sudo -u postgres psql -t -c &quot;SHOW max_connections;&quot;)\n    log_message &quot;PostgreSQL connections: ${PG_CONNECTIONS}/${PG_MAX_CONNECTIONS}&quot;\n    \n    # Database size\n    PG_DB_SIZE=$(sudo -u postgres psql -t -c &quot;SELECT pg_size_pretty(pg_database_size(&#039;myapp&#039;));&quot;)\n    log_message &quot;PostgreSQL database size: ${PG_DB_SIZE}&quot;\n    \n    # Cache hit ratio\n    PG_CACHE_HIT=$(sudo -u postgres psql -t -c &quot;\n      SELECT round(sum(blks_hit)*100.0/sum(blks_hit+blks_read), 2) \n      FROM pg_stat_database WHERE datname=&#039;myapp&#039;;&quot;)\n    log_message &quot;PostgreSQL cache hit ratio: ${PG_CACHE_HIT}%&quot;\n    \n    # Long running queries\n    LONG_QUERIES=$(sudo -u postgres psql -t -c &quot;\n      SELECT count(*) FROM pg_stat_activity \n      WHERE state = &#039;active&#039; AND now() - query_start &gt; interval &#039;5 minutes&#039;;&quot;)\n    log_message &quot;PostgreSQL long-running queries: ${LONG_QUERIES}&quot;\nfi\n\n# MongoDB monitoring\nif command -v mongosh &gt;/dev/null 2&gt;&amp;1 &amp;&amp; systemctl is-active mongod &gt;/dev/null 2&gt;&amp;1; then\n    log_message &quot;=== MongoDB Monitoring ===&quot;\n    \n    # Connection count\n    MONGO_CONNECTIONS=$(mongosh --quiet --eval &quot;db.serverStatus().connections.current&quot;)\n    MONGO_MAX_CONNECTIONS=$(mongosh --quiet --eval &quot;db.serverStatus().connections.available&quot;)\n    log_message &quot;MongoDB connections: ${MONGO_CONNECTIONS}/${MONGO_MAX_CONNECTIONS}&quot;\n    \n    # Database statistics\n    MONGO_DB_SIZE=$(mongosh myapp --quiet --eval &quot;Math.round(db.stats().dataSize / 1024 / 1024) + &#039; MB&#039;&quot;)\n    log_message &quot;MongoDB database size: ${MONGO_DB_SIZE}&quot;\n    \n    # OpLog status (for replica sets)\n    if mongosh admin --quiet --eval &quot;rs.status().ok&quot; 2&gt;/dev/null | grep -q &quot;1&quot;; then\n        OPLOG_SIZE=$(mongosh local --quiet --eval &quot;Math.round(db.oplog.rs.stats().maxSize / 1024 / 1024) + &#039; MB&#039;&quot;)\n        log_message &quot;MongoDB OpLog size: ${OPLOG_SIZE}&quot;\n    fi\nfi\n\n# Redis monitoring\nif command -v redis-cli &gt;/dev/null 2&gt;&amp;1 &amp;&amp; systemctl is-active redis &gt;/dev/null 2&gt;&amp;1; then\n    log_message &quot;=== Redis Monitoring ===&quot;\n    \n    # Memory usage\n    REDIS_MEMORY=$(redis-cli info memory | grep used_memory_human: | cut -d: -f2)\n    REDIS_MAX_MEMORY=$(redis-cli config get maxmemory | tail -1)\n    log_message &quot;Redis memory usage: ${REDIS_MEMORY} / ${REDIS_MAX_MEMORY}&quot;\n    \n    # Connected clients\n    REDIS_CLIENTS=$(redis-cli info clients | grep connected_clients: | cut -d: -f2)\n    log_message &quot;Redis connected clients: ${REDIS_CLIENTS}&quot;\n    \n    # Hit ratio\n    REDIS_HITS=$(redis-cli info stats | grep keyspace_hits: | cut -d: -f2)\n    REDIS_MISSES=$(redis-cli info stats | grep keyspace_misses: | cut -d: -f2)\n    if [ ${REDIS_MISSES} -gt 0 ]; then\n        REDIS_HIT_RATIO=$(echo &quot;scale=2; ${REDIS_HITS} / (${REDIS_HITS} + ${REDIS_MISSES}) * 100&quot; | bc)\n        log_message &quot;Redis hit ratio: ${REDIS_HIT_RATIO}%&quot;\n    fi\nfi\n\nlog_message &quot;Database monitoring completed&quot;\nEOF\n\nsudo chmod +x /usr/local/bin/database-monitor.sh\n\n# Schedule monitoring every 5 minutes\necho &quot;*/5 * * * * root /usr/local/bin/database-monitor.sh&quot; | sudo tee -a /etc/crontab</code></pre>\n      </div>\n    </div>\n<h3 id=\"database-backup-automation\" class=\"mobile-header\">Database Backup Automation</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\">sudo tee /usr/local/bin/database-backup.sh &gt; /dev/null &lt;&lt;&#039;EOF&#039;\n#!/bin/bash\nBACKUP_DIR=&quot;/backup/databases&quot;\nDATE=$(date +%Y%m%d_%H%M%S)\n\nmkdir -p ${BACKUP_DIR}/{mysql,postgresql,mongodb,redis}\n\n# MySQL/MariaDB backup\nif command -v mysql &gt;/dev/null 2&gt;&amp;1 &amp;&amp; systemctl is-active mariadb &gt;/dev/null 2&gt;&amp;1; then\n    echo &quot;Backing up MySQL/MariaDB...&quot;\n    \n    # Full backup with all databases\n    mysqldump --all-databases --single-transaction --routines --triggers --events \\\n      --master-data=2 --flush-logs --delete-master-logs \\\n      &gt; ${BACKUP_DIR}/mysql/full-backup-${DATE}.sql\n    \n    # Compress backup\n    gzip ${BACKUP_DIR}/mysql/full-backup-${DATE}.sql\n    \n    # Individual database backup\n    mysqldump --single-transaction --routines --triggers myapp \\\n      &gt; ${BACKUP_DIR}/mysql/myapp-backup-${DATE}.sql\n    gzip ${BACKUP_DIR}/mysql/myapp-backup-${DATE}.sql\nfi\n\n# PostgreSQL backup\nif command -v pg_dump &gt;/dev/null 2&gt;&amp;1 &amp;&amp; systemctl is-active postgresql-16 &gt;/dev/null 2&gt;&amp;1; then\n    echo &quot;Backing up PostgreSQL...&quot;\n    \n    # Full cluster backup\n    sudo -u postgres pg_dumpall &gt; ${BACKUP_DIR}/postgresql/cluster-backup-${DATE}.sql\n    \n    # Individual database backup\n    sudo -u postgres pg_dump -Fc myapp &gt; ${BACKUP_DIR}/postgresql/myapp-backup-${DATE}.dump\n    \n    # Compress SQL backup\n    gzip ${BACKUP_DIR}/postgresql/cluster-backup-${DATE}.sql\nfi\n\n# MongoDB backup\nif command -v mongodump &gt;/dev/null 2&gt;&amp;1 &amp;&amp; systemctl is-active mongod &gt;/dev/null 2&gt;&amp;1; then\n    echo &quot;Backing up MongoDB...&quot;\n    \n    # Full backup\n    mongodump --host localhost:27017 --ssl \\\n      --sslPEMKeyFile /etc/ssl/mongodb/mongodb.pem \\\n      --sslCAFile /etc/ssl/mongodb/ca.pem \\\n      --out ${BACKUP_DIR}/mongodb/full-backup-${DATE}\n    \n    # Individual database backup\n    mongodump --host localhost:27017 --ssl \\\n      --sslPEMKeyFile /etc/ssl/mongodb/mongodb.pem \\\n      --sslCAFile /etc/ssl/mongodb/ca.pem \\\n      --db myapp --out ${BACKUP_DIR}/mongodb/myapp-backup-${DATE}\n    \n    # Compress backups\n    tar -czf ${BACKUP_DIR}/mongodb/full-backup-${DATE}.tar.gz -C ${BACKUP_DIR}/mongodb full-backup-${DATE}\n    tar -czf ${BACKUP_DIR}/mongodb/myapp-backup-${DATE}.tar.gz -C ${BACKUP_DIR}/mongodb myapp-backup-${DATE}\n    \n    # Remove uncompressed directories\n    rm -rf ${BACKUP_DIR}/mongodb/full-backup-${DATE} ${BACKUP_DIR}/mongodb/myapp-backup-${DATE}\nfi\n\n# Redis backup\nif command -v redis-cli &gt;/dev/null 2&gt;&amp;1 &amp;&amp; systemctl is-active redis &gt;/dev/null 2&gt;&amp;1; then\n    echo &quot;Backing up Redis...&quot;\n    \n    # Trigger background save\n    redis-cli BGSAVE\n    \n    # Wait for save to complete\n    while [ &quot;$(redis-cli LASTSAVE)&quot; = &quot;$(redis-cli LASTSAVE)&quot; ]; do\n        sleep 1\n    done\n    \n    # Copy RDB file\n    cp /var/lib/redis/dump.rdb ${BACKUP_DIR}/redis/redis-backup-${DATE}.rdb\n    gzip ${BACKUP_DIR}/redis/redis-backup-${DATE}.rdb\nfi\n\n# Upload to cloud storage\naws s3 cp ${BACKUP_DIR}/ s3://database-backups/ --recursive\naz storage blob upload-batch --source ${BACKUP_DIR} --destination database-backups\ngsutil cp -r ${BACKUP_DIR}/* gs://database-backups/\n\n# Keep only last 14 days of backups\nfind ${BACKUP_DIR} -name &quot;*backup*&quot; -type f -mtime +14 -delete\n\n# Verify backup integrity\necho &quot;Verifying backup integrity...&quot;\nfor backup in ${BACKUP_DIR}/*/*.gz; do\n    if gzip -t &quot;$backup&quot; 2&gt;/dev/null; then\n        echo &quot;âœ“ $(basename $backup) - OK&quot;\n    else\n        echo &quot;âœ— $(basename $backup) - CORRUPTED&quot;\n    fi\ndone\n\necho &quot;Database backup completed: ${DATE}&quot;\nEOF\n\nsudo chmod +x /usr/local/bin/database-backup.sh\n\n# Schedule daily backups\necho &quot;0 1 * * * root /usr/local/bin/database-backup.sh&quot; | sudo tee -a /etc/crontab</code></pre>\n      </div>\n    </div>\n<h2 id=\"high-availability-and-replication\" class=\"mobile-header\">High Availability and Replication</h2>\n<h3 id=\"mysqlmariadb-master-slave-replication\" class=\"mobile-header\">MySQL/MariaDB Master-Slave Replication</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Configure master server\nsudo tee -a /etc/mysql/mariadb.conf.d/replication.cnf &gt; /dev/null &lt;&lt;EOF\n[mysqld]\n# Replication settings\nserver-id = 1\nlog_bin = mysql-bin\nbinlog_format = ROW\nbinlog_do_db = myapp\nsync_binlog = 1\nrelay-log = mysql-relay-bin\nrelay-log-recovery = 1\n\n# GTID replication (recommended)\ngtid_mode = ON\nenforce_gtid_consistency = ON\nlog_slave_updates = ON\nEOF\n\nmysql -u root -p &lt;&lt;EOF\n-- Create replication user\nCREATE USER &#039;replication&#039;@&#039;%&#039; IDENTIFIED BY &#039;replication_password_2024&#039;;\nGRANT REPLICATION SLAVE ON *.* TO &#039;replication&#039;@&#039;%&#039;;\nFLUSH PRIVILEGES;\n\n-- Get master status\nSHOW MASTER STATUS;\nEOF\n\n# Configure slave server (server-id = 2)\n# On slave server:\nmysql -u root -p &lt;&lt;EOF\nCHANGE MASTER TO\n  MASTER_HOST=&#039;mysql-master.example.com&#039;,\n  MASTER_USER=&#039;replication&#039;,\n  MASTER_PASSWORD=&#039;replication_password_2024&#039;,\n  MASTER_AUTO_POSITION=1;\n\nSTART SLAVE;\nSHOW SLAVE STATUS\\G\nEOF</code></pre>\n      </div>\n    </div>\n<h3 id=\"postgresql-streaming-replication\" class=\"mobile-header\">PostgreSQL Streaming Replication</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Configure master server\nsudo tee -a /var/lib/pgsql/16/data/postgresql.conf &gt; /dev/null &lt;&lt;EOF\n# Replication settings\nwal_level = replica\nmax_wal_senders = 10\nmax_replication_slots = 10\nwal_keep_size = 1GB\nhot_standby = on\narchive_mode = on\narchive_command = &#039;cp %p /var/lib/pgsql/16/archive/%f&#039;\nEOF\n\n# Configure replication access\nsudo tee -a /var/lib/pgsql/16/data/pg_hba.conf &gt; /dev/null &lt;&lt;EOF\n# Replication connections\nhostssl replication replication 192.168.1.0/24 scram-sha-256\nEOF\n\n# Create replication user\nsudo -u postgres psql &lt;&lt;EOF\nCREATE USER replication WITH REPLICATION ENCRYPTED PASSWORD &#039;replication_password_2024&#039;;\nEOF\n\n# Create archive directory\nsudo mkdir -p /var/lib/pgsql/16/archive\nsudo chown postgres:postgres /var/lib/pgsql/16/archive\n\nsudo systemctl restart postgresql-16\n\n# Setup slave server\n# On slave server, create base backup:\nsudo -u postgres pg_basebackup -h master.example.com -D /var/lib/pgsql/16/data -U replication -W -v -P -R</code></pre>\n      </div>\n    </div>\n<h3 id=\"mongodb-replica-set-configuration\" class=\"mobile-header\">MongoDB Replica Set Configuration</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Initialize replica set (run on primary node)\nmongosh admin &lt;&lt;EOF\nrs.initiate({\n  _id: &quot;rs0&quot;,\n  version: 1,\n  protocolVersion: 1,\n  members: [\n    { \n      _id: 0, \n      host: &quot;mongodb1.example.com:27017&quot;,\n      priority: 2,\n      votes: 1\n    },\n    { \n      _id: 1, \n      host: &quot;mongodb2.example.com:27017&quot;,\n      priority: 1,\n      votes: 1\n    },\n    { \n      _id: 2, \n      host: &quot;mongodb3.example.com:27017&quot;,\n      priority: 1,\n      votes: 1,\n      arbiterOnly: true\n    }\n  ],\n  settings: {\n    chainingAllowed: false,\n    heartbeatIntervalMillis: 2000,\n    heartbeatTimeoutSecs: 10,\n    electionTimeoutMillis: 10000,\n    catchUpTimeoutMillis: -1,\n    getLastErrorModes: {\n      majority: { \n        tags: { \n          dc: 1 \n        } \n      }\n    }\n  }\n})\n\n// Check replica set status\nrs.status()\n\n// Configure read preferences\nrs.conf()\nEOF\n\n# Configure MongoDB sharding (for large deployments)\n# Config server initialization:\nmongosh admin &lt;&lt;EOF\nrs.initiate({\n  _id: &quot;configReplSet&quot;,\n  configsvr: true,\n  members: [\n    { _id: 0, host: &quot;config1.example.com:27019&quot; },\n    { _id: 1, host: &quot;config2.example.com:27019&quot; },\n    { _id: 2, host: &quot;config3.example.com:27019&quot; }\n  ]\n})\nEOF</code></pre>\n      </div>\n    </div>\n<h3 id=\"redis-sentinel-high-availability\" class=\"mobile-header\">Redis Sentinel High Availability</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Configure Redis Sentinel for HA\nsudo tee /etc/redis/sentinel.conf &gt; /dev/null &lt;&lt;EOF\n# Redis Sentinel Configuration\nport 26379\nsentinel deny-scripts-reconfig yes\n\n# Monitor Redis master\nsentinel monitor mymaster redis-master.example.com 6379 2\nsentinel auth-pass mymaster redis_secure_password_2024\nsentinel down-after-milliseconds mymaster 5000\nsentinel parallel-syncs mymaster 1\nsentinel failover-timeout mymaster 10000\n\n# Notification scripts\nsentinel notification-script mymaster /etc/redis/notify.sh\nsentinel client-reconfig-script mymaster /etc/redis/reconfig.sh\n\n# Security\nrequirepass sentinel_password_2024\nEOF\n\n# Create notification script\nsudo tee /etc/redis/notify.sh &gt; /dev/null &lt;&lt;&#039;EOF&#039;\n#!/bin/bash\necho &quot;$(date): Redis failover event: $*&quot; &gt;&gt; /var/log/redis/sentinel.log\n# Add alerting logic here (email, Slack, etc.)\nEOF\n\n# Create reconfiguration script\nsudo tee /etc/redis/reconfig.sh &gt; /dev/null &lt;&lt;&#039;EOF&#039;\n#!/bin/bash\necho &quot;$(date): Redis master changed to: $6:$7&quot; &gt;&gt; /var/log/redis/sentinel.log\n# Update application configuration, restart services, etc.\nEOF\n\nsudo chmod +x /etc/redis/{notify,reconfig}.sh\nsudo systemctl enable --now redis-sentinel</code></pre>\n      </div>\n    </div>\n<h2 id=\"performance-optimization\" class=\"mobile-header\">Performance Optimization</h2>\n<h3 id=\"database-performance-tuning\" class=\"mobile-header\">Database Performance Tuning</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\">sudo tee /usr/local/bin/database-performance-tune.sh &gt; /dev/null &lt;&lt;&#039;EOF&#039;\n#!/bin/bash\n\ntune_mysql() {\n    echo &quot;Tuning MySQL/MariaDB performance...&quot;\n    \n    # Calculate optimal buffer pool size (70% of RAM)\n    TOTAL_RAM=$(free -b | awk &#039;NR==2{print $2}&#039;)\n    BUFFER_POOL_SIZE=$((TOTAL_RAM * 70 / 100))\n    \n    mysql -u root -p &lt;&lt;EOF\n-- Performance tuning\nSET GLOBAL innodb_buffer_pool_size = ${BUFFER_POOL_SIZE};\nSET GLOBAL query_cache_size = $((TOTAL_RAM * 5 / 100));\nSET GLOBAL thread_cache_size = 100;\nSET GLOBAL table_open_cache = 4096;\nSET GLOBAL innodb_io_capacity = 2000;\n\n-- Show current configuration\nSHOW VARIABLES LIKE &#039;innodb_buffer_pool_size&#039;;\nSHOW VARIABLES LIKE &#039;query_cache_size&#039;;\nEOF\n}\n\ntune_postgresql() {\n    echo &quot;Tuning PostgreSQL performance...&quot;\n    \n    # Use pg_tune recommendations\n    TOTAL_RAM_MB=$(($(free -m | awk &#039;NR==2{print $2}&#039;)))\n    SHARED_BUFFERS=$((TOTAL_RAM_MB / 4))\n    EFFECTIVE_CACHE=$((TOTAL_RAM_MB * 3 / 4))\n    \n    sudo -u postgres psql &lt;&lt;EOF\n-- Performance tuning\nALTER SYSTEM SET shared_buffers = &#039;${SHARED_BUFFERS}MB&#039;;\nALTER SYSTEM SET effective_cache_size = &#039;${EFFECTIVE_CACHE}MB&#039;;\nALTER SYSTEM SET work_mem = &#039;16MB&#039;;\nALTER SYSTEM SET maintenance_work_mem = &#039;256MB&#039;;\nALTER SYSTEM SET random_page_cost = 1.1;\nALTER SYSTEM SET effective_io_concurrency = 200;\n\n-- Reload configuration\nSELECT pg_reload_conf();\n\n-- Show current settings\nSHOW shared_buffers;\nSHOW effective_cache_size;\nEOF\n}\n\ntune_mongodb() {\n    echo &quot;Tuning MongoDB performance...&quot;\n    \n    # Calculate WiredTiger cache size (50% of RAM)\n    TOTAL_RAM_GB=$(($(free -g | awk &#039;NR==2{print $2}&#039;)))\n    CACHE_SIZE_GB=$((TOTAL_RAM_GB / 2))\n    \n    mongosh admin &lt;&lt;EOF\n// Performance tuning\ndb.adminCommand({\n  &quot;setParameter&quot;: 1,\n  &quot;wiredTigerEngineRuntimeConfig&quot;: &quot;cache_size=${CACHE_SIZE_GB}GB&quot;\n})\n\n// Show current cache usage\ndb.serverStatus().wiredTiger.cache\nEOF\n}\n\ntune_redis() {\n    echo &quot;Tuning Redis performance...&quot;\n    \n    # Calculate maxmemory (50% of RAM for dedicated Redis server)\n    TOTAL_RAM_BYTES=$(free -b | awk &#039;NR==2{print $2}&#039;)\n    MAX_MEMORY_BYTES=$((TOTAL_RAM_BYTES / 2))\n    \n    redis-cli CONFIG SET maxmemory ${MAX_MEMORY_BYTES}\n    redis-cli CONFIG SET maxmemory-policy allkeys-lru\n    redis-cli CONFIG REWRITE\n    \n    echo &quot;Redis maxmemory set to $(redis-cli CONFIG GET maxmemory | tail -1) bytes&quot;\n}\n\n# Check which databases are running and tune them\nif systemctl is-active mariadb &gt;/dev/null 2&gt;&amp;1; then\n    tune_mysql\nfi\n\nif systemctl is-active postgresql-16 &gt;/dev/null 2&gt;&amp;1; then\n    tune_postgresql\nfi\n\nif systemctl is-active mongod &gt;/dev/null 2&gt;&amp;1; then\n    tune_mongodb\nfi\n\nif systemctl is-active redis &gt;/dev/null 2&gt;&amp;1; then\n    tune_redis\nfi\n\necho &quot;Database performance tuning completed&quot;\nEOF\n\nsudo chmod +x /usr/local/bin/database-performance-tune.sh</code></pre>\n      </div>\n    </div>\n<h2 id=\"verification-and-testing\" class=\"mobile-header\">Verification and Testing</h2>\n<h3 id=\"database-health-checks\" class=\"mobile-header\">Database Health Checks</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\">sudo tee /usr/local/bin/database-health-check.sh &gt; /dev/null &lt;&lt;&#039;EOF&#039;\n#!/bin/bash\nHEALTH_LOG=&quot;/var/log/database-health.log&quot;\n\nlog_message() {\n    echo &quot;$(date &#039;+%Y-%m-%d %H:%M:%S&#039;) - $1&quot; | tee -a ${HEALTH_LOG}\n}\n\n# MySQL/MariaDB health check\nif command -v mysql &gt;/dev/null 2&gt;&amp;1; then\n    if systemctl is-active mariadb &gt;/dev/null 2&gt;&amp;1; then\n        log_message &quot;âœ“ MariaDB service is running&quot;\n        \n        # Test connectivity\n        if mysql -e &quot;SELECT 1;&quot; &gt;/dev/null 2&gt;&amp;1; then\n            log_message &quot;âœ“ MariaDB connectivity test passed&quot;\n        else\n            log_message &quot;âœ— MariaDB connectivity test failed&quot;\n        fi\n        \n        # Check for errors in log\n        ERROR_COUNT=$(tail -100 /var/log/mysql/error.log | grep -i error | wc -l)\n        log_message &quot;â„¹ MariaDB errors in last 100 log lines: ${ERROR_COUNT}&quot;\n    else\n        log_message &quot;âœ— MariaDB service is not running&quot;\n    fi\nfi\n\n# PostgreSQL health check\nif command -v psql &gt;/dev/null 2&gt;&amp;1; then\n    if systemctl is-active postgresql-16 &gt;/dev/null 2&gt;&amp;1; then\n        log_message &quot;âœ“ PostgreSQL service is running&quot;\n        \n        # Test connectivity\n        if sudo -u postgres psql -c &quot;SELECT version();&quot; &gt;/dev/null 2&gt;&amp;1; then\n            log_message &quot;âœ“ PostgreSQL connectivity test passed&quot;\n        else\n            log_message &quot;âœ— PostgreSQL connectivity test failed&quot;\n        fi\n        \n        # Check replication lag (if slave)\n        if sudo -u postgres psql -t -c &quot;SELECT pg_is_in_recovery();&quot; | grep -q &quot;t&quot;; then\n            LAG=$(sudo -u postgres psql -t -c &quot;SELECT EXTRACT(EPOCH FROM (now() - pg_last_xact_replay_timestamp()))::int;&quot;)\n            log_message &quot;â„¹ PostgreSQL replication lag: ${LAG} seconds&quot;\n        fi\n    else\n        log_message &quot;âœ— PostgreSQL service is not running&quot;\n    fi\nfi\n\n# MongoDB health check\nif command -v mongosh &gt;/dev/null 2&gt;&amp;1; then\n    if systemctl is-active mongod &gt;/dev/null 2&gt;&amp;1; then\n        log_message &quot;âœ“ MongoDB service is running&quot;\n        \n        # Test connectivity\n        if mongosh --quiet --eval &quot;db.adminCommand(&#039;ping&#039;).ok&quot; 2&gt;/dev/null | grep -q &quot;1&quot;; then\n            log_message &quot;âœ“ MongoDB connectivity test passed&quot;\n        else\n            log_message &quot;âœ— MongoDB connectivity test failed&quot;\n        fi\n        \n        # Check replica set status\n        if mongosh admin --quiet --eval &quot;rs.status().ok&quot; 2&gt;/dev/null | grep -q &quot;1&quot;; then\n            PRIMARY_COUNT=$(mongosh admin --quiet --eval &quot;rs.status().members.filter(m =&gt; m.stateStr === &#039;PRIMARY&#039;).length&quot;)\n            log_message &quot;â„¹ MongoDB replica set has ${PRIMARY_COUNT} primary node(s)&quot;\n        fi\n    else\n        log_message &quot;âœ— MongoDB service is not running&quot;\n    fi\nfi\n\n# Redis health check\nif command -v redis-cli &gt;/dev/null 2&gt;&amp;1; then\n    if systemctl is-active redis &gt;/dev/null 2&gt;&amp;1; then\n        log_message &quot;âœ“ Redis service is running&quot;\n        \n        # Test connectivity\n        if redis-cli ping | grep -q &quot;PONG&quot;; then\n            log_message &quot;âœ“ Redis connectivity test passed&quot;\n        else\n            log_message &quot;âœ— Redis connectivity test failed&quot;\n        fi\n        \n        # Check memory usage\n        REDIS_MEMORY_PERCENT=$(redis-cli info memory | grep used_memory_rss_human: | cut -d: -f2)\n        log_message &quot;â„¹ Redis memory usage: ${REDIS_MEMORY_PERCENT}&quot;\n    else\n        log_message &quot;âœ— Redis service is not running&quot;\n    fi\nfi\n\nlog_message &quot;Database health check completed&quot;\nEOF\n\nsudo chmod +x /usr/local/bin/database-health-check.sh\n\n# Schedule health checks every 10 minutes\necho &quot;*/10 * * * * root /usr/local/bin/database-health-check.sh&quot; | sudo tee -a /etc/crontab</code></pre>\n      </div>\n    </div>\n<h2 id=\"troubleshooting-cross-platform\" class=\"mobile-header\">Troubleshooting (Cross-Platform)</h2>\n<h3 id=\"common-database-issues\" class=\"mobile-header\">Common Database Issues</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># MySQL/MariaDB troubleshooting\n# Check service status\nsudo systemctl status mariadb\n\n# Check error logs\nsudo tail -f /var/log/mysql/error.log\n\n# Test connectivity\nmysql -u root -p -e &quot;SELECT version();&quot;\n\n# Check process list\nmysql -u root -p -e &quot;SHOW FULL PROCESSLIST;&quot;\n\n# Check locks\nmysql -u root -p -e &quot;SHOW ENGINE INNODB STATUS\\G&quot; | grep -A 20 &quot;LATEST DETECTED DEADLOCK&quot;\n\n# Repair tables\nmysqlcheck --all-databases --repair -u root -p\n\n# PostgreSQL troubleshooting\n# Check service status\nsudo systemctl status postgresql-16\n\n# Check logs\nsudo tail -f /var/lib/pgsql/16/data/log/postgresql-*.log\n\n# Test connectivity\nsudo -u postgres psql -c &quot;SELECT version();&quot;\n\n# Check active connections\nsudo -u postgres psql -c &quot;SELECT count(*) FROM pg_stat_activity WHERE state = &#039;active&#039;;&quot;\n\n# Check locks\nsudo -u postgres psql -c &quot;SELECT * FROM pg_locks WHERE NOT granted;&quot;\n\n# Vacuum and analyze\nsudo -u postgres vacuumdb --all --analyze --verbose\n\n# MongoDB troubleshooting\n# Check service status\nsudo systemctl status mongod\n\n# Check logs\nsudo tail -f /var/log/mongodb/mongod.log\n\n# Test connectivity\nmongosh --eval &quot;db.adminCommand(&#039;ping&#039;)&quot;\n\n# Check replica set status\nmongosh admin --eval &quot;rs.status()&quot;\n\n# Check database profiler\nmongosh myapp --eval &quot;db.getProfilingStatus()&quot;\n\n# Repair database\nmongosh myapp --eval &quot;db.repairDatabase()&quot;\n\n# Redis troubleshooting\n# Check service status\nsudo systemctl status redis\n\n# Check logs\nsudo tail -f /var/log/redis/redis-server.log\n\n# Test connectivity\nredis-cli ping\n\n# Check memory stats\nredis-cli info memory\n\n# Check slow log\nredis-cli slowlog get 10\n\n# Monitor commands\nredis-cli monitor</code></pre>\n      </div>\n    </div>\n<h3 id=\"advanced-database-debugging\" class=\"mobile-header\">Advanced Database Debugging</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># MySQL/MariaDB debugging\n# Enable general log\nmysql -u root -p -e &quot;SET GLOBAL general_log = &#039;ON&#039;;&quot;\nmysql -u root -p -e &quot;SET GLOBAL log_output = &#039;FILE&#039;;&quot;\n\n# Performance schema\nmysql -u root -p -e &quot;SELECT * FROM performance_schema.file_summary_by_event_name WHERE event_name LIKE &#039;wait/io/file%&#039; ORDER BY sum_timer_wait DESC LIMIT 10;&quot;\n\n# PostgreSQL debugging\n# Enable query logging\nsudo -u postgres psql -c &quot;ALTER SYSTEM SET log_statement = &#039;all&#039;;&quot;\nsudo -u postgres psql -c &quot;SELECT pg_reload_conf();&quot;\n\n# Check query performance\nsudo -u postgres psql -c &quot;SELECT query, calls, total_time, mean_time FROM pg_stat_statements ORDER BY total_time DESC LIMIT 10;&quot;\n\n# MongoDB debugging\n# Enable profiler\nmongosh myapp --eval &quot;db.setProfilingLevel(2, { slowms: 100 })&quot;\n\n# Check slow operations\nmongosh myapp --eval &quot;db.system.profile.find().sort({ts:-1}).limit(5).pretty()&quot;\n\n# Redis debugging\n# Enable slow log\nredis-cli CONFIG SET slowlog-log-slower-than 10000\n\n# Check slow operations\nredis-cli SLOWLOG GET 10\n\n# Monitor memory usage\nredis-cli --latency-history -i 1</code></pre>\n      </div>\n    </div>\n<h2 id=\"additional-resources\" class=\"mobile-header\">Additional Resources</h2>\n<li class=\"mobile-list-item\"><a href=\"https://dev.mysql.com/doc/\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">MySQL Documentation</a></li>\n<li class=\"mobile-list-item\"><a href=\"https://mariadb.com/docs/\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">MariaDB Documentation</a></li>\n<li class=\"mobile-list-item\"><a href=\"https://www.postgresql.org/docs/\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">PostgreSQL Documentation</a></li>\n<li class=\"mobile-list-item\"><a href=\"https://docs.mongodb.com/\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">MongoDB Documentation</a></li>\n<li class=\"mobile-list-item\"><a href=\"https://redis.io/documentation\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">Redis Documentation</a></li>\n<li class=\"mobile-list-item\"><a href=\"https://cheatsheetseries.owasp.org/cheatsheets/Database_Security_Cheat_Sheet.html\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">Database Security Cheat Sheet</a></li>\n<p class=\"mobile-paragraph\">---</p>\n<p class=\"mobile-paragraph\"><strong>Note:</strong> This guide is part of the <a href=\"https://howtomgr.github.io\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">HowToMgr</a> collection.</p>","readTime":"25 min","wordCount":4871,"lastBuilt":"2025-09-14T18:12:07.027Z"},{"name":"discourse","displayName":"Discourse","slug":"discourse","description":"Repo for discourse","category":"infrastructure","language":null,"stars":0,"forks":0,"topics":[],"githubUrl":"https://github.com/howtomgr/discourse","updatedAt":"2025-09-08T03:06:31Z","createdAt":"2025-09-08T03:06:20Z","readmeRaw":"## ðŸ‘‹ Welcome to discourse ðŸš€  \n\ndiscourse README  \n  \n  \n## Author  \n\nðŸ¤– casjay: [Github](https://github.com/casjay) ðŸ¤–  \n","readmeHtml":"<h2 id=\"welcome-to-discourse\" class=\"mobile-header\">ðŸ‘‹ Welcome to discourse ðŸš€  </h2>\n<p class=\"mobile-paragraph\">discourse README  </p>\n<h2 id=\"author\" class=\"mobile-header\">Author  </h2>\n<p class=\"mobile-paragraph\">ðŸ¤– casjay: <a href=\"https://github.com/casjay\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">Github</a> ðŸ¤–  </p>","readTime":"1 min","wordCount":15,"lastBuilt":"2025-09-14T18:12:21.125Z"},{"name":"docker","displayName":"Docker","slug":"docker","description":"Repo for docker","category":"container","language":null,"stars":0,"forks":0,"topics":[],"githubUrl":"https://github.com/howtomgr/docker","updatedAt":"2025-09-14T01:29:53Z","createdAt":"2023-08-28T03:47:37Z","readmeRaw":"# Docker Installation Guide\n\nDocker is a free and open-source containerization platform that enables developers to package applications and their dependencies into portable containers. Originally developed by Solomon Hykes at dotCloud, Docker revolutionized application deployment by providing OS-level virtualization. It serves as a FOSS alternative to proprietary virtualization solutions like VMware vSphere, Microsoft Hyper-V containers, or commercial container platforms, offering comparable functionality with features like image layering, container orchestration, and resource isolation.\n\n## Prerequisites\n\n- **Hardware Requirements**:\n  - CPU: 64-bit processor with virtualization support (Intel VT-x/AMD-V)\n  - RAM: 2GB minimum (4GB+ recommended for production)\n  - Storage: 20GB minimum (50GB+ recommended, SSD preferred)\n  - BIOS: Virtualization must be enabled\n- **Operating System**: \n  - Linux: Kernel 3.10+ with cgroups and namespaces support\n  - macOS: 10.15+ (Catalina or newer)\n  - Windows: Windows 10 64-bit Pro/Enterprise/Education (Build 19041+)\n- **Network Requirements**:\n  - Internet connection for pulling images\n  - Port 2375 (unencrypted) or 2376 (TLS) for Docker API\n  - Port 2377 for Swarm mode cluster management\n  - Port 7946 TCP/UDP for container network discovery\n  - Port 4789 UDP for overlay network traffic\n- **Dependencies**:\n  - iptables 1.4+ (Linux)\n  - Git (for building images)\n  - systemd or compatible init system (Linux)\n- **System Access**: root or sudo privileges required\n\n## Installation\n\n### RHEL/CentOS/Rocky Linux/AlmaLinux\n\n```bash\n# Remove old versions\nsudo yum remove docker \\\n                docker-client \\\n                docker-client-latest \\\n                docker-common \\\n                docker-latest \\\n                docker-latest-logrotate \\\n                docker-logrotate \\\n                docker-engine\n\n# Install required packages\nsudo yum install -y yum-utils\n\n# Add Docker repository\nsudo yum-config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo\n\n# Install Docker Engine\nsudo yum install -y docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin\n\n# Enable and start Docker\nsudo systemctl enable --now docker\n\n# Verify installation\nsudo docker run hello-world\n```\n\n### Debian/Ubuntu\n\n```bash\n# Update package index\nsudo apt-get update\n\n# Install prerequisites\nsudo apt-get install -y \\\n    ca-certificates \\\n    curl \\\n    gnupg \\\n    lsb-release\n\n# Add Docker's official GPG key\nsudo mkdir -m 0755 -p /etc/apt/keyrings\nwget -O docker.gpg https://download.docker.com/linux/ubuntu/gpg\nsudo gpg --dearmor -o /etc/apt/keyrings/docker.gpg < docker.gpg\nrm docker.gpg\n\n# Add repository\necho \\\n  \"deb [arch=$(dpkg --print-architecture) signed-by=/etc/apt/keyrings/docker.gpg] https://download.docker.com/linux/ubuntu \\\n  $(lsb_release -cs) stable\" | sudo tee /etc/apt/sources.list.d/docker.list > /dev/null\n\n# Install Docker Engine\nsudo apt-get update\nsudo apt-get install -y docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin\n\n# Enable and start Docker\nsudo systemctl enable --now docker\n```\n\n### Arch Linux\n\n```bash\n# Install Docker from official repositories\nsudo pacman -S docker docker-compose docker-buildx\n\n# Optional: Install Docker documentation\nsudo pacman -S docker-docs\n\n# Enable and start Docker service\nsudo systemctl enable --now docker\n\n# For rootless Docker\nsudo pacman -S fuse-overlayfs slirp4netns\n\n# Add user to docker group\nsudo usermod -aG docker $USER\n```\n\n### Alpine Linux\n\n```bash\n# Add community repository if not enabled\necho \"http://dl-cdn.alpinelinux.org/alpine/v$(cat /etc/alpine-release | cut -d'.' -f1,2)/community\" >> /etc/apk/repositories\n\n# Update package index\napk update\n\n# Install Docker\napk add docker docker-cli docker-compose\n\n# Add Docker to boot services\nrc-update add docker boot\n\n# Start Docker service\nservice docker start\n\n# Install docker-compose (Python version)\napk add py3-pip\npip3 install docker-compose\n```\n\n### openSUSE/SLES\n\n```bash\n# openSUSE Leap/Tumbleweed\nsudo zypper install -y docker docker-compose docker-buildx\n\n# For latest version from official Docker repository\nsudo zypper addrepo https://download.docker.com/linux/suse/docker-ce.repo\nsudo zypper refresh\nsudo zypper install -y docker-ce docker-ce-cli containerd.io\n\n# Enable and start Docker\nsudo systemctl enable --now docker\n\n# Add user to docker group\nsudo usermod -aG docker $USER\n\n# SLES specific\nsudo SUSEConnect -p sle-module-containers/15.5/x86_64\nsudo zypper install -y docker\n```\n\n### macOS\n\n```bash\n# Using Homebrew\nbrew install --cask docker\n\n# Start Docker Desktop\nopen /Applications/Docker.app\n\n# Wait for Docker to start, then verify\ndocker --version\ndocker compose version\n\n# Alternative: Install Docker CLI only (without Desktop)\nbrew install docker docker-compose\n\n# For docker-machine (managing remote Docker hosts)\nbrew install docker-machine\n```\n\n### FreeBSD\n\n```bash\n# Install Docker from packages\npkg install docker docker-compose\n\n# Or from ports\ncd /usr/ports/sysutils/docker\nmake install clean\n\n# Enable Docker\necho 'docker_enable=\"YES\"' >> /etc/rc.conf\n\n# Load required kernel modules\nkldload linux64\nkldload fdescfs\n\n# Start Docker\nservice docker start\n\n# Add user to docker group\npw groupmod docker -m $USER\n```\n\n### Windows\n\n```powershell\n# Enable WSL2 (required for Docker Desktop)\nwsl --install\n\n# Enable required Windows features\ndism.exe /online /enable-feature /featurename:Microsoft-Windows-Subsystem-Linux /all /norestart\ndism.exe /online /enable-feature /featurename:VirtualMachinePlatform /all /norestart\n\n# Download and install Docker Desktop\n# Visit: https://desktop.docker.com/win/main/amd64/Docker%20Desktop%20Installer.exe\n\n# Or use Chocolatey\nchoco install docker-desktop\n\n# Or use winget\nwinget install Docker.DockerDesktop\n\n# Start Docker Desktop from Start Menu\n# Verify installation in PowerShell\ndocker --version\ndocker compose version\n```\n\n## Initial Configuration\n\n### First-Run Setup\n\n1. **Configure Docker daemon**:\n```bash\n# Create daemon configuration directory\nsudo mkdir -p /etc/docker\n\n# Create daemon.json with optimized settings\nsudo tee /etc/docker/daemon.json <<EOF\n{\n  \"log-driver\": \"json-file\",\n  \"log-opts\": {\n    \"max-size\": \"10m\",\n    \"max-file\": \"3\"\n  },\n  \"storage-driver\": \"overlay2\",\n  \"live-restore\": true,\n  \"default-ulimits\": {\n    \"nofile\": {\n      \"Name\": \"nofile\",\n      \"Hard\": 64000,\n      \"Soft\": 64000\n    }\n  }\n}\nEOF\n\n# Restart Docker to apply changes\nsudo systemctl restart docker\n```\n\n2. **Configure user permissions**:\n```bash\n# Add current user to docker group (Linux)\nsudo usermod -aG docker $USER\n\n# Apply group changes (logout/login or use newgrp)\nnewgrp docker\n\n# Verify docker works without sudo\ndocker run hello-world\n```\n\n3. **Essential security settings**:\n```bash\n# Enable user namespace remapping for better isolation\nsudo tee -a /etc/docker/daemon.json <<EOF\n{\n  \"userns-remap\": \"default\"\n}\nEOF\n\n# Create subuid/subgid entries\necho \"dockremap:100000:65536\" | sudo tee -a /etc/subuid\necho \"dockremap:100000:65536\" | sudo tee -a /etc/subgid\n\n# Restart Docker\nsudo systemctl restart docker\n```\n\n### Testing Initial Setup\n\n```bash\n# Check Docker version\ndocker version\n\n# View system information\ndocker info\n\n# Test container creation\ndocker run --rm alpine echo \"Docker is working!\"\n\n# Test networking\ndocker run --rm alpine ping -c 3 google.com\n\n# Test volume mounting\ndocker run --rm -v /tmp:/host alpine ls /host\n```\n\n**WARNING:** Never expose Docker daemon socket (2375/2376) to the internet without proper TLS authentication!\n\n## Service Management\n\n### systemd (RHEL, Debian, Ubuntu, Arch, openSUSE)\n\n```bash\n# Enable Docker to start on boot\nsudo systemctl enable docker\n\n# Start Docker service\nsudo systemctl start docker\n\n# Stop Docker service\nsudo systemctl stop docker\n\n# Restart Docker service\nsudo systemctl restart docker\n\n# Reload Docker configuration\nsudo systemctl reload docker\n\n# Check Docker status\nsudo systemctl status docker\n\n# View Docker logs\nsudo journalctl -u docker.service -f\n```\n\n### OpenRC (Alpine Linux)\n\n```bash\n# Enable Docker to start on boot\nrc-update add docker boot\n\n# Start Docker service\nrc-service docker start\n\n# Stop Docker service\nrc-service docker stop\n\n# Restart Docker service\nrc-service docker restart\n\n# Check Docker status\nrc-service docker status\n```\n\n### rc.d (FreeBSD)\n\n```bash\n# Enable in /etc/rc.conf\necho 'docker_enable=\"YES\"' >> /etc/rc.conf\n\n# Start Docker\nservice docker start\n\n# Stop Docker\nservice docker stop\n\n# Restart Docker\nservice docker restart\n\n# Check status\nservice docker status\n```\n\n### launchd (macOS)\n\n```bash\n# Docker Desktop manages its own services\n# Control through the UI or command line\n\n# Stop Docker Desktop\nosascript -e 'quit app \"Docker\"'\n\n# Start Docker Desktop\nopen -a Docker\n\n# Check if Docker is running\ndocker system info >/dev/null 2>&1 && echo \"Docker is running\" || echo \"Docker is not running\"\n```\n\n### Windows Service Manager\n\n```powershell\n# Docker Desktop manages services automatically\n# For manual control:\n\n# Restart Docker Desktop\nStop-Process -Name \"Docker Desktop\" -Force\nStart-Process \"C:\\Program Files\\Docker\\Docker\\Docker Desktop.exe\"\n\n# Check Docker service status\nGet-Service -Name docker\n\n# Restart Docker service\nRestart-Service docker\n```\n\n## Advanced Configuration\n\n### Storage Driver Configuration\n\n```bash\n# Configure storage driver options\nsudo tee /etc/docker/daemon.json <<EOF\n{\n  \"storage-driver\": \"overlay2\",\n  \"storage-opts\": [\n    \"overlay2.override_kernel_check=true\",\n    \"overlay2.size=20G\"\n  ],\n  \"data-root\": \"/var/lib/docker\"\n}\nEOF\n\n# For devicemapper (older systems)\n{\n  \"storage-driver\": \"devicemapper\",\n  \"storage-opts\": [\n    \"dm.thinpooldev=/dev/mapper/docker-thinpool\",\n    \"dm.use_deferred_removal=true\",\n    \"dm.use_deferred_deletion=true\"\n  ]\n}\n```\n\n### Network Configuration\n\n```bash\n# Configure default network settings\nsudo tee -a /etc/docker/daemon.json <<EOF\n{\n  \"bip\": \"172.17.0.1/16\",\n  \"fixed-cidr\": \"172.17.0.0/16\",\n  \"default-address-pools\": [\n    {\n      \"base\": \"172.80.0.0/16\",\n      \"size\": 24\n    }\n  ],\n  \"dns\": [\"8.8.8.8\", \"8.8.4.4\"],\n  \"dns-search\": [\"example.com\"]\n}\nEOF\n\n# Enable IPv6 support\n{\n  \"ipv6\": true,\n  \"fixed-cidr-v6\": \"2001:db8::/64\"\n}\n```\n\n### Resource Limits\n\n```bash\n# Configure default container limits\nsudo tee -a /etc/docker/daemon.json <<EOF\n{\n  \"default-ulimits\": {\n    \"nofile\": {\n      \"Name\": \"nofile\",\n      \"Hard\": 64000,\n      \"Soft\": 64000\n    },\n    \"nproc\": {\n      \"Name\": \"nproc\",\n      \"Hard\": 32000,\n      \"Soft\": 32000\n    }\n  },\n  \"default-runtime\": \"runc\",\n  \"runtimes\": {\n    \"nvidia\": {\n      \"path\": \"nvidia-container-runtime\",\n      \"runtimeArgs\": []\n    }\n  }\n}\nEOF\n```\n\n## Reverse Proxy Setup\n\n### nginx as Docker Registry Proxy\n\n```nginx\n# /etc/nginx/sites-available/docker-registry\nserver {\n    listen 443 ssl http2;\n    server_name registry.example.com;\n\n    ssl_certificate /etc/ssl/certs/registry.crt;\n    ssl_certificate_key /etc/ssl/private/registry.key;\n\n    # Docker Registry API\n    location /v2/ {\n        proxy_pass http://localhost:5000;\n        proxy_set_header Host $http_host;\n        proxy_set_header X-Real-IP $remote_addr;\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n        proxy_set_header X-Forwarded-Proto $scheme;\n        proxy_read_timeout 900;\n        \n        # Required for docker client\n        chunked_transfer_encoding on;\n        client_max_body_size 0;\n    }\n}\n```\n\n### Apache as Docker Registry Proxy\n\n```apache\n# /etc/apache2/sites-available/docker-registry.conf\n<VirtualHost *:443>\n    ServerName registry.example.com\n    \n    SSLEngine on\n    SSLCertificateFile /etc/ssl/certs/registry.crt\n    SSLCertificateKeyFile /etc/ssl/private/registry.key\n    \n    ProxyPreserveHost On\n    ProxyPass /v2 http://localhost:5000/v2\n    ProxyPassReverse /v2 http://localhost:5000/v2\n    \n    <Location /v2>\n        Order deny,allow\n        Allow from all\n        \n        # Authentication\n        AuthType Basic\n        AuthName \"Docker Registry\"\n        AuthUserFile /etc/apache2/.htpasswd\n        Require valid-user\n    </Location>\n</VirtualHost>\n```\n\n### Caddy as Docker Registry Proxy\n\n```caddyfile\nregistry.example.com {\n    reverse_proxy localhost:5000 {\n        header_up Host {host}\n        header_up X-Real-IP {remote}\n        header_up X-Forwarded-For {remote}\n        header_up X-Forwarded-Proto {scheme}\n    }\n    \n    basicauth /v2/* {\n        admin $2a$14$xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\n    }\n    \n    encode gzip\n}\n```\n\n### Traefik Configuration\n\n```yaml\n# docker-compose.yml for Traefik\nversion: '3.8'\n\nservices:\n  traefik:\n    image: traefik:v2.9\n    command:\n      - \"--api.insecure=true\"\n      - \"--providers.docker=true\"\n      - \"--entrypoints.websecure.address=:443\"\n    ports:\n      - \"443:443\"\n      - \"8080:8080\"\n    volumes:\n      - /var/run/docker.sock:/var/run/docker.sock:ro\n      - ./certs:/certs\n\n  registry:\n    image: registry:2\n    labels:\n      - \"traefik.enable=true\"\n      - \"traefik.http.routers.registry.rule=Host(`registry.example.com`)\"\n      - \"traefik.http.routers.registry.entrypoints=websecure\"\n      - \"traefik.http.routers.registry.tls=true\"\n```\n\n## Security Configuration\n\n### Docker Daemon Security\n\n```bash\n# Enable TLS for Docker daemon\n# Generate CA private key\nopenssl genrsa -aes256 -out ca-key.pem 4096\n\n# Generate CA certificate\nopenssl req -new -x509 -days 3650 -key ca-key.pem -sha256 -out ca.pem\n\n# Generate server key\nopenssl genrsa -out server-key.pem 4096\n\n# Generate certificate signing request\nopenssl req -subj \"/CN=$HOST\" -sha256 -new -key server-key.pem -out server.csr\n\n# Generate server certificate\necho subjectAltName = DNS:$HOST,IP:127.0.0.1 >> extfile.cnf\necho extendedKeyUsage = serverAuth >> extfile.cnf\nopenssl x509 -req -days 365 -sha256 -in server.csr -CA ca.pem -CAkey ca-key.pem -out server-cert.pem -extfile extfile.cnf\n\n# Configure Docker to use TLS\nsudo tee /etc/docker/daemon.json <<EOF\n{\n  \"hosts\": [\"tcp://0.0.0.0:2376\"],\n  \"tls\": true,\n  \"tlsverify\": true,\n  \"tlscert\": \"/etc/docker/certs/server-cert.pem\",\n  \"tlskey\": \"/etc/docker/certs/server-key.pem\",\n  \"tlscacert\": \"/etc/docker/certs/ca.pem\"\n}\nEOF\n```\n\n### AppArmor/SELinux Configuration\n\n```bash\n# AppArmor (Debian/Ubuntu)\n# Check if AppArmor is enabled\nsudo aa-status\n\n# Docker containers use docker-default profile by default\n# Create custom profile\nsudo tee /etc/apparmor.d/docker-custom <<EOF\n#include <tunables/global>\n\nprofile docker-custom flags=(attach_disconnected,mediate_deleted) {\n  #include <abstractions/base>\n  \n  network,\n  capability,\n  \n  # Deny dangerous capabilities\n  deny capability dac_override,\n  deny capability setuid,\n  deny capability setgid,\n  \n  # File access\n  deny /proc/sys/** w,\n  deny /sys/** w,\n  \n  # Allow necessary access\n  /usr/bin/** ix,\n  /bin/** ix,\n  /lib/** r,\n}\nEOF\n\n# Load profile\nsudo apparmor_parser -r /etc/apparmor.d/docker-custom\n\n# SELinux (RHEL/CentOS)\n# Enable SELinux for containers\nsudo setsebool -P container_manage_cgroup true\n\n# Check Docker SELinux context\nps -eZ | grep dockerd\n```\n\n### Firewall Rules\n\n```bash\n# UFW (Ubuntu/Debian)\n# Docker manages its own iptables rules\n# To integrate with UFW:\nsudo tee -a /etc/ufw/after.rules <<EOF\n*filter\n:ufw-user-forward - [0:0]\n:DOCKER-USER - [0:0]\n-A DOCKER-USER -j ufw-user-forward\n-A DOCKER-USER -j RETURN -s 10.0.0.0/8\n-A DOCKER-USER -j RETURN -s 172.16.0.0/12\n-A DOCKER-USER -j RETURN -s 192.168.0.0/16\n-A DOCKER-USER -j DROP\nCOMMIT\nEOF\n\nsudo ufw reload\n\n# firewalld (RHEL/CentOS/openSUSE)\n# Add Docker zone\nsudo firewall-cmd --permanent --new-zone=docker\nsudo firewall-cmd --permanent --zone=docker --add-interface=docker0\nsudo firewall-cmd --permanent --zone=docker --add-port=2377/tcp\nsudo firewall-cmd --permanent --zone=docker --add-port=7946/tcp\nsudo firewall-cmd --permanent --zone=docker --add-port=7946/udp\nsudo firewall-cmd --permanent --zone=docker --add-port=4789/udp\nsudo firewall-cmd --reload\n\n# iptables (manual)\n# Allow Docker subnet\nsudo iptables -A INPUT -s 172.17.0.0/16 -j ACCEPT\nsudo iptables-save > /etc/iptables/rules.v4\n\n# pf (FreeBSD)\n# Add to /etc/pf.conf\npass in on docker0 all\npass out on docker0 all\n```\n\n## Database Setup\n\nDocker doesn't require a database, but here's how to run databases in Docker:\n\n### PostgreSQL in Docker\n\n```bash\n# Create volume for persistent data\ndocker volume create postgres_data\n\n# Run PostgreSQL container\ndocker run -d \\\n  --name postgres \\\n  --restart unless-stopped \\\n  -e POSTGRES_PASSWORD=securepassword \\\n  -e POSTGRES_USER=myuser \\\n  -e POSTGRES_DB=mydb \\\n  -v postgres_data:/var/lib/postgresql/data \\\n  -p 5432:5432 \\\n  postgres:15-alpine\n\n# Connect to PostgreSQL\ndocker exec -it postgres psql -U myuser -d mydb\n```\n\n### MySQL in Docker\n\n```bash\n# Create volume for persistent data\ndocker volume create mysql_data\n\n# Run MySQL container\ndocker run -d \\\n  --name mysql \\\n  --restart unless-stopped \\\n  -e MYSQL_ROOT_PASSWORD=rootpassword \\\n  -e MYSQL_DATABASE=mydb \\\n  -e MYSQL_USER=myuser \\\n  -e MYSQL_PASSWORD=securepassword \\\n  -v mysql_data:/var/lib/mysql \\\n  -p 3306:3306 \\\n  mysql:8.0\n\n# Connect to MySQL\ndocker exec -it mysql mysql -u myuser -p\n```\n\n## Performance Optimization\n\n### Kernel Parameters\n\n```bash\n# Optimize kernel parameters for Docker\nsudo tee -a /etc/sysctl.conf <<EOF\n# Docker optimization\nvm.max_map_count=262144\nfs.file-max=2097152\nfs.inotify.max_user_watches=524288\nfs.inotify.max_user_instances=512\n\n# Network optimization\nnet.core.somaxconn=32768\nnet.ipv4.tcp_max_syn_backlog=8192\nnet.core.netdev_max_backlog=5000\nnet.ipv4.ip_local_port_range=1024 65535\n\n# Bridge settings\nnet.bridge.bridge-nf-call-iptables=1\nnet.bridge.bridge-nf-call-ip6tables=1\nnet.ipv4.ip_forward=1\nEOF\n\n# Apply settings\nsudo sysctl -p\n```\n\n### Storage Optimization\n\n```bash\n# Use dedicated disk for Docker\n# Format with XFS for better performance\nsudo mkfs.xfs /dev/sdb1\nsudo mkdir -p /var/lib/docker\nsudo mount /dev/sdb1 /var/lib/docker\n\n# Add to /etc/fstab\necho \"/dev/sdb1 /var/lib/docker xfs defaults,noatime 0 2\" | sudo tee -a /etc/fstab\n\n# Configure storage driver options\nsudo tee /etc/docker/daemon.json <<EOF\n{\n  \"storage-driver\": \"overlay2\",\n  \"storage-opts\": [\n    \"overlay2.override_kernel_check=true\"\n  ],\n  \"log-driver\": \"json-file\",\n  \"log-opts\": {\n    \"max-size\": \"10m\",\n    \"max-file\": \"3\"\n  }\n}\nEOF\n```\n\n### Build Optimization\n\n```bash\n# Enable BuildKit for faster builds\nexport DOCKER_BUILDKIT=1\n\n# Configure BuildKit in daemon\nsudo tee -a /etc/docker/daemon.json <<EOF\n{\n  \"features\": {\n    \"buildkit\": true\n  }\n}\nEOF\n\n# Use build cache mount\n# In Dockerfile:\n# syntax=docker/dockerfile:1\nFROM alpine\nRUN --mount=type=cache,target=/var/cache/apk \\\n    apk add --no-cache git\n```\n\n## Monitoring\n\n### Docker Stats and Events\n\n```bash\n# Monitor container resource usage\ndocker stats\n\n# Stream Docker events\ndocker events\n\n# Monitor specific container\ndocker stats container_name\n\n# Export metrics in JSON\ndocker stats --no-stream --format json > stats.json\n\n# Monitor Docker daemon\nsudo journalctl -u docker.service -f\n```\n\n### cAdvisor Setup\n\n```bash\n# Run cAdvisor for container metrics\ndocker run -d \\\n  --name=cadvisor \\\n  --restart unless-stopped \\\n  -p 8080:8080 \\\n  -v /:/rootfs:ro \\\n  -v /var/run:/var/run:ro \\\n  -v /sys:/sys:ro \\\n  -v /var/lib/docker/:/var/lib/docker:ro \\\n  -v /dev/disk/:/dev/disk:ro \\\n  --privileged \\\n  gcr.io/cadvisor/cadvisor:latest\n\n# Access metrics at http://localhost:8080\n```\n\n### Prometheus Integration\n\n```yaml\n# docker-compose.yml for monitoring stack\nversion: '3.8'\n\nservices:\n  prometheus:\n    image: prom/prometheus\n    volumes:\n      - ./prometheus.yml:/etc/prometheus/prometheus.yml\n      - prometheus_data:/prometheus\n    ports:\n      - \"9090:9090\"\n    command:\n      - '--config.file=/etc/prometheus/prometheus.yml'\n      - '--storage.tsdb.path=/prometheus'\n\n  node-exporter:\n    image: prom/node-exporter\n    ports:\n      - \"9100:9100\"\n    volumes:\n      - /proc:/host/proc:ro\n      - /sys:/host/sys:ro\n      - /:/rootfs:ro\n\nvolumes:\n  prometheus_data:\n```\n\n## Backup and Restore\n\n### Container Backup\n\n```bash\n#!/bin/bash\n# backup-docker.sh\n\nBACKUP_DIR=\"/backup/docker\"\nDATE=$(date +%Y%m%d_%H%M%S)\n\n# Create backup directory\nmkdir -p $BACKUP_DIR/{images,volumes,configs}\n\n# Backup running containers\ndocker ps -q | while read container; do\n    name=$(docker inspect -f '{{.Name}}' $container | sed 's/\\///')\n    docker commit $container backup_$name:$DATE\n    docker save backup_$name:$DATE | gzip > $BACKUP_DIR/images/${name}_${DATE}.tar.gz\n    docker inspect $container > $BACKUP_DIR/configs/${name}_${DATE}.json\ndone\n\n# Backup volumes\ndocker volume ls -q | while read volume; do\n    docker run --rm \\\n        -v $volume:/data \\\n        -v $BACKUP_DIR/volumes:/backup \\\n        alpine tar czf /backup/${volume}_${DATE}.tar.gz -C /data .\ndone\n\n# Backup Docker daemon config\ncp /etc/docker/daemon.json $BACKUP_DIR/configs/daemon_${DATE}.json\n\necho \"Backup completed: $DATE\"\n```\n\n### Volume Backup\n\n```bash\n# Backup named volume\ndocker run --rm \\\n    -v myvolume:/source:ro \\\n    -v $(pwd):/backup \\\n    alpine tar czf /backup/myvolume.tar.gz -C /source .\n\n# Restore volume\ndocker run --rm \\\n    -v myvolume:/target \\\n    -v $(pwd):/backup \\\n    alpine tar xzf /backup/myvolume.tar.gz -C /target\n```\n\n### Registry Backup\n\n```bash\n# Backup Docker registry data\ndocker exec registry tar czf - /var/lib/registry | gzip > registry_backup_$(date +%Y%m%d).tar.gz\n\n# Backup registry config\ndocker exec registry cat /etc/docker/registry/config.yml > registry_config_backup.yml\n```\n\n## Troubleshooting\n\n### Common Issues\n\n1. **Cannot connect to Docker daemon**:\n```bash\n# Check if Docker is running\nsudo systemctl status docker\n\n# Check Docker socket permissions\nls -la /var/run/docker.sock\n\n# Check if user is in docker group\ngroups $USER\n\n# Start Docker if not running\nsudo systemctl start docker\n```\n\n2. **Container networking issues**:\n```bash\n# Check Docker networks\ndocker network ls\n\n# Inspect bridge network\ndocker network inspect bridge\n\n# Check iptables rules\nsudo iptables -L -n -v\n\n# Reset Docker networking\nsudo systemctl stop docker\nsudo ip link delete docker0\nsudo systemctl start docker\n```\n\n3. **Storage space issues**:\n```bash\n# Check disk usage\ndocker system df\n\n# Clean up unused resources\ndocker system prune -a --volumes\n\n# Check Docker root directory\ndf -h /var/lib/docker\n\n# Find large containers/images\ndocker ps -s\ndocker images --format \"table {{.Repository}}\\t{{.Tag}}\\t{{.Size}}\"\n```\n\n4. **Permission denied errors**:\n```bash\n# Fix socket permissions\nsudo chmod 666 /var/run/docker.sock\n\n# Fix user namespace issues\nsudo usermod -aG docker $USER\nnewgrp docker\n\n# Check SELinux/AppArmor\ngetenforce  # SELinux\nsudo aa-status  # AppArmor\n```\n\n### Debug Mode\n\n```bash\n# Run Docker in debug mode\nsudo dockerd --debug\n\n# Enable debug logging\nsudo tee /etc/docker/daemon.json <<EOF\n{\n  \"debug\": true,\n  \"log-level\": \"debug\"\n}\nEOF\n\nsudo systemctl restart docker\n\n# Check debug logs\nsudo journalctl -u docker.service --no-pager\n```\n\n## Maintenance\n\n### Update Procedures\n\n```bash\n# RHEL/CentOS/Rocky/AlmaLinux\nsudo yum update docker-ce docker-ce-cli containerd.io\n\n# Debian/Ubuntu\nsudo apt-get update\nsudo apt-get upgrade docker-ce docker-ce-cli containerd.io\n\n# Arch Linux\nsudo pacman -Syu docker\n\n# Alpine Linux\napk update\napk upgrade docker\n\n# openSUSE\nsudo zypper update docker\n\n# FreeBSD\npkg update\npkg upgrade docker\n\n# Always restart after updates\nsudo systemctl restart docker\n```\n\n### Cleanup Tasks\n\n```bash\n#!/bin/bash\n# docker-cleanup.sh\n\necho \"Starting Docker cleanup...\"\n\n# Remove stopped containers\ndocker container prune -f\n\n# Remove unused images\ndocker image prune -a -f\n\n# Remove unused volumes\ndocker volume prune -f\n\n# Remove unused networks\ndocker network prune -f\n\n# Remove build cache\ndocker builder prune -f\n\n# Show disk usage after cleanup\ndocker system df\n\necho \"Cleanup completed\"\n```\n\n### Log Rotation\n\n```bash\n# Configure log rotation for containers\nsudo tee /etc/docker/daemon.json <<EOF\n{\n  \"log-driver\": \"json-file\",\n  \"log-opts\": {\n    \"max-size\": \"10m\",\n    \"max-file\": \"3\",\n    \"compress\": \"true\"\n  }\n}\nEOF\n\n# System-wide Docker logs rotation\nsudo tee /etc/logrotate.d/docker <<EOF\n/var/lib/docker/containers/*/*.log {\n    rotate 7\n    daily\n    compress\n    missingok\n    delaycompress\n    copytruncate\n}\nEOF\n```\n\n## Integration Examples\n\n### CI/CD Pipeline Integration\n\n```yaml\n# GitLab CI example\nstages:\n  - build\n  - test\n  - deploy\n\nvariables:\n  DOCKER_DRIVER: overlay2\n  DOCKER_TLS_CERTDIR: \"/certs\"\n\nbuild:\n  stage: build\n  image: docker:latest\n  services:\n    - docker:dind\n  script:\n    - docker build -t myapp:$CI_COMMIT_SHA .\n    - docker push myapp:$CI_COMMIT_SHA\n\n# Jenkins Pipeline example\npipeline {\n    agent any\n    stages {\n        stage('Build') {\n            steps {\n                script {\n                    docker.build(\"myapp:${env.BUILD_ID}\")\n                }\n            }\n        }\n    }\n}\n```\n\n### Kubernetes Integration\n\n```bash\n# Install CRI-Docker for Kubernetes\nCRI_VERSION=\"0.3.1\"\nwget https://github.com/Mirantis/cri-dockerd/releases/download/v${CRI_VERSION}/cri-dockerd-${CRI_VERSION}.amd64.tgz\ntar xzf cri-dockerd-${CRI_VERSION}.amd64.tgz\nsudo install -o root -g root -m 0755 cri-dockerd /usr/local/bin/cri-dockerd\nrm cri-dockerd-${CRI_VERSION}.amd64.tgz cri-dockerd\n\n# Create systemd service\nsudo tee /etc/systemd/system/cri-docker.service <<EOF\n[Unit]\nDescription=CRI Docker Interface\nAfter=network.target docker.service\nRequires=docker.service\n\n[Service]\nType=notify\nExecStart=/usr/local/bin/cri-dockerd --container-runtime-endpoint unix:///var/run/cri-dockerd.sock\nRestart=always\nRestartSec=5s\n\n[Install]\nWantedBy=multi-user.target\nEOF\n\nsudo systemctl enable --now cri-docker\n```\n\n### Docker Compose Examples\n\n```yaml\n# Multi-tier application stack\nversion: '3.8'\n\nservices:\n  web:\n    build: ./web\n    ports:\n      - \"80:80\"\n    environment:\n      - DATABASE_URL=postgresql://user:pass@db:5432/mydb\n    depends_on:\n      - db\n    networks:\n      - frontend\n      - backend\n\n  db:\n    image: postgres:15\n    environment:\n      - POSTGRES_USER=user\n      - POSTGRES_PASSWORD=pass\n      - POSTGRES_DB=mydb\n    volumes:\n      - db_data:/var/lib/postgresql/data\n    networks:\n      - backend\n\n  redis:\n    image: redis:alpine\n    networks:\n      - backend\n\nnetworks:\n  frontend:\n  backend:\n\nvolumes:\n  db_data:\n```\n\n### SDK Integration\n\n```python\n# Python Docker SDK\nimport docker\n\nclient = docker.from_env()\n\n# Run container\ncontainer = client.containers.run(\n    \"alpine\",\n    \"echo hello world\",\n    detach=True\n)\n\n# List containers\nfor container in client.containers.list():\n    print(container.name)\n\n# Build image\nimage, logs = client.images.build(\n    path=\".\",\n    tag=\"myapp:latest\"\n)\n```\n\n```javascript\n// Node.js Docker SDK\nconst Docker = require('dockerode');\nconst docker = new Docker();\n\n// Run container\ndocker.createContainer({\n  Image: 'alpine',\n  Cmd: ['echo', 'hello world'],\n  name: 'mycontainer'\n}, (err, container) => {\n  if (!err) {\n    container.start();\n  }\n});\n\n// List containers\ndocker.listContainers((err, containers) => {\n  containers.forEach(containerInfo => {\n    console.log(containerInfo.Names);\n  });\n});\n```\n\n## Additional Resources\n\n- [Official Documentation](https://docs.docker.com/)\n- [Docker Hub](https://hub.docker.com/)\n- [Docker GitHub Repository](https://github.com/docker)\n- [Docker Best Practices](https://docs.docker.com/develop/dev-best-practices/)\n- [Docker Security Documentation](https://docs.docker.com/engine/security/)\n- [Docker Compose Documentation](https://docs.docker.com/compose/)\n- [Docker Community Forums](https://forums.docker.com/)\n- [Play with Docker](https://labs.play-with-docker.com/)\n\n---\n\n**Note:** This guide is part of the [HowToMgr](https://howtomgr.github.io) collection. Always refer to official documentation for the most up-to-date information.","readmeHtml":"<h1 id=\"docker-installation-guide\" class=\"mobile-header\">Docker Installation Guide</h1>\n<p class=\"mobile-paragraph\">Docker is a free and open-source containerization platform that enables developers to package applications and their dependencies into portable containers. Originally developed by Solomon Hykes at dotCloud, Docker revolutionized application deployment by providing OS-level virtualization. It serves as a FOSS alternative to proprietary virtualization solutions like VMware vSphere, Microsoft Hyper-V containers, or commercial container platforms, offering comparable functionality with features like image layering, container orchestration, and resource isolation.</p>\n<h2 id=\"prerequisites\" class=\"mobile-header\">Prerequisites</h2>\n<li class=\"mobile-list-item\"><strong>Hardware Requirements</strong>:</li>\n<li class=\"mobile-list-item\">CPU: 64-bit processor with virtualization support (Intel VT-x/AMD-V)</li>\n<li class=\"mobile-list-item\">RAM: 2GB minimum (4GB+ recommended for production)</li>\n<li class=\"mobile-list-item\">Storage: 20GB minimum (50GB+ recommended, SSD preferred)</li>\n<li class=\"mobile-list-item\">BIOS: Virtualization must be enabled</li>\n<li class=\"mobile-list-item\"><strong>Operating System</strong>: </li>\n<li class=\"mobile-list-item\">Linux: Kernel 3.10+ with cgroups and namespaces support</li>\n<li class=\"mobile-list-item\">macOS: 10.15+ (Catalina or newer)</li>\n<li class=\"mobile-list-item\">Windows: Windows 10 64-bit Pro/Enterprise/Education (Build 19041+)</li>\n<li class=\"mobile-list-item\"><strong>Network Requirements</strong>:</li>\n<li class=\"mobile-list-item\">Internet connection for pulling images</li>\n<li class=\"mobile-list-item\">Port 2375 (unencrypted) or 2376 (TLS) for Docker API</li>\n<li class=\"mobile-list-item\">Port 2377 for Swarm mode cluster management</li>\n<li class=\"mobile-list-item\">Port 7946 TCP/UDP for container network discovery</li>\n<li class=\"mobile-list-item\">Port 4789 UDP for overlay network traffic</li>\n<li class=\"mobile-list-item\"><strong>Dependencies</strong>:</li>\n<li class=\"mobile-list-item\">iptables 1.4+ (Linux)</li>\n<li class=\"mobile-list-item\">Git (for building images)</li>\n<li class=\"mobile-list-item\">systemd or compatible init system (Linux)</li>\n<li class=\"mobile-list-item\"><strong>System Access</strong>: root or sudo privileges required</li>\n<h2 id=\"installation\" class=\"mobile-header\">Installation</h2>\n<h3 id=\"rhelcentosrocky-linuxalmalinux\" class=\"mobile-header\">RHEL/CentOS/Rocky Linux/AlmaLinux</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Remove old versions\nsudo yum remove docker \\\n                docker-client \\\n                docker-client-latest \\\n                docker-common \\\n                docker-latest \\\n                docker-latest-logrotate \\\n                docker-logrotate \\\n                docker-engine\n\n# Install required packages\nsudo yum install -y yum-utils\n\n# Add Docker repository\nsudo yum-config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo\n\n# Install Docker Engine\nsudo yum install -y docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin\n\n# Enable and start Docker\nsudo systemctl enable --now docker\n\n# Verify installation\nsudo docker run hello-world</code></pre>\n      </div>\n    </div>\n<h3 id=\"debianubuntu\" class=\"mobile-header\">Debian/Ubuntu</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Update package index\nsudo apt-get update\n\n# Install prerequisites\nsudo apt-get install -y \\\n    ca-certificates \\\n    curl \\\n    gnupg \\\n    lsb-release\n\n# Add Docker&#039;s official GPG key\nsudo mkdir -m 0755 -p /etc/apt/keyrings\nwget -O docker.gpg https://download.docker.com/linux/ubuntu/gpg\nsudo gpg --dearmor -o /etc/apt/keyrings/docker.gpg &lt; docker.gpg\nrm docker.gpg\n\n# Add repository\necho \\\n  &quot;deb [arch=$(dpkg --print-architecture) signed-by=/etc/apt/keyrings/docker.gpg] https://download.docker.com/linux/ubuntu \\\n  $(lsb_release -cs) stable&quot; | sudo tee /etc/apt/sources.list.d/docker.list &gt; /dev/null\n\n# Install Docker Engine\nsudo apt-get update\nsudo apt-get install -y docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin\n\n# Enable and start Docker\nsudo systemctl enable --now docker</code></pre>\n      </div>\n    </div>\n<h3 id=\"arch-linux\" class=\"mobile-header\">Arch Linux</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Install Docker from official repositories\nsudo pacman -S docker docker-compose docker-buildx\n\n# Optional: Install Docker documentation\nsudo pacman -S docker-docs\n\n# Enable and start Docker service\nsudo systemctl enable --now docker\n\n# For rootless Docker\nsudo pacman -S fuse-overlayfs slirp4netns\n\n# Add user to docker group\nsudo usermod -aG docker $USER</code></pre>\n      </div>\n    </div>\n<h3 id=\"alpine-linux\" class=\"mobile-header\">Alpine Linux</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Add community repository if not enabled\necho &quot;http://dl-cdn.alpinelinux.org/alpine/v$(cat /etc/alpine-release | cut -d&#039;.&#039; -f1,2)/community&quot; &gt;&gt; /etc/apk/repositories\n\n# Update package index\napk update\n\n# Install Docker\napk add docker docker-cli docker-compose\n\n# Add Docker to boot services\nrc-update add docker boot\n\n# Start Docker service\nservice docker start\n\n# Install docker-compose (Python version)\napk add py3-pip\npip3 install docker-compose</code></pre>\n      </div>\n    </div>\n<h3 id=\"opensusesles\" class=\"mobile-header\">openSUSE/SLES</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># openSUSE Leap/Tumbleweed\nsudo zypper install -y docker docker-compose docker-buildx\n\n# For latest version from official Docker repository\nsudo zypper addrepo https://download.docker.com/linux/suse/docker-ce.repo\nsudo zypper refresh\nsudo zypper install -y docker-ce docker-ce-cli containerd.io\n\n# Enable and start Docker\nsudo systemctl enable --now docker\n\n# Add user to docker group\nsudo usermod -aG docker $USER\n\n# SLES specific\nsudo SUSEConnect -p sle-module-containers/15.5/x86_64\nsudo zypper install -y docker</code></pre>\n      </div>\n    </div>\n<h3 id=\"macos\" class=\"mobile-header\">macOS</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Using Homebrew\nbrew install --cask docker\n\n# Start Docker Desktop\nopen /Applications/Docker.app\n\n# Wait for Docker to start, then verify\ndocker --version\ndocker compose version\n\n# Alternative: Install Docker CLI only (without Desktop)\nbrew install docker docker-compose\n\n# For docker-machine (managing remote Docker hosts)\nbrew install docker-machine</code></pre>\n      </div>\n    </div>\n<h3 id=\"freebsd\" class=\"mobile-header\">FreeBSD</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Install Docker from packages\npkg install docker docker-compose\n\n# Or from ports\ncd /usr/ports/sysutils/docker\nmake install clean\n\n# Enable Docker\necho &#039;docker_enable=&quot;YES&quot;&#039; &gt;&gt; /etc/rc.conf\n\n# Load required kernel modules\nkldload linux64\nkldload fdescfs\n\n# Start Docker\nservice docker start\n\n# Add user to docker group\npw groupmod docker -m $USER</code></pre>\n      </div>\n    </div>\n<h3 id=\"windows\" class=\"mobile-header\">Windows</h3>\n<div class=\"mobile-code-block\" data-language=\"powershell\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">powershell</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-powershell\"># Enable WSL2 (required for Docker Desktop)\nwsl --install\n\n# Enable required Windows features\ndism.exe /online /enable-feature /featurename:Microsoft-Windows-Subsystem-Linux /all /norestart\ndism.exe /online /enable-feature /featurename:VirtualMachinePlatform /all /norestart\n\n# Download and install Docker Desktop\n# Visit: https://desktop.docker.com/win/main/amd64/Docker%20Desktop%20Installer.exe\n\n# Or use Chocolatey\nchoco install docker-desktop\n\n# Or use winget\nwinget install Docker.DockerDesktop\n\n# Start Docker Desktop from Start Menu\n# Verify installation in PowerShell\ndocker --version\ndocker compose version</code></pre>\n      </div>\n    </div>\n<h2 id=\"initial-configuration\" class=\"mobile-header\">Initial Configuration</h2>\n<h3 id=\"first-run-setup\" class=\"mobile-header\">First-Run Setup</h3>\n<p class=\"mobile-paragraph\">1. <strong>Configure Docker daemon</strong>:</p>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Create daemon configuration directory\nsudo mkdir -p /etc/docker\n\n# Create daemon.json with optimized settings\nsudo tee /etc/docker/daemon.json &lt;&lt;EOF\n{\n  &quot;log-driver&quot;: &quot;json-file&quot;,\n  &quot;log-opts&quot;: {\n    &quot;max-size&quot;: &quot;10m&quot;,\n    &quot;max-file&quot;: &quot;3&quot;\n  },\n  &quot;storage-driver&quot;: &quot;overlay2&quot;,\n  &quot;live-restore&quot;: true,\n  &quot;default-ulimits&quot;: {\n    &quot;nofile&quot;: {\n      &quot;Name&quot;: &quot;nofile&quot;,\n      &quot;Hard&quot;: 64000,\n      &quot;Soft&quot;: 64000\n    }\n  }\n}\nEOF\n\n# Restart Docker to apply changes\nsudo systemctl restart docker</code></pre>\n      </div>\n    </div>\n<p class=\"mobile-paragraph\">2. <strong>Configure user permissions</strong>:</p>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Add current user to docker group (Linux)\nsudo usermod -aG docker $USER\n\n# Apply group changes (logout/login or use newgrp)\nnewgrp docker\n\n# Verify docker works without sudo\ndocker run hello-world</code></pre>\n      </div>\n    </div>\n<p class=\"mobile-paragraph\">3. <strong>Essential security settings</strong>:</p>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Enable user namespace remapping for better isolation\nsudo tee -a /etc/docker/daemon.json &lt;&lt;EOF\n{\n  &quot;userns-remap&quot;: &quot;default&quot;\n}\nEOF\n\n# Create subuid/subgid entries\necho &quot;dockremap:100000:65536&quot; | sudo tee -a /etc/subuid\necho &quot;dockremap:100000:65536&quot; | sudo tee -a /etc/subgid\n\n# Restart Docker\nsudo systemctl restart docker</code></pre>\n      </div>\n    </div>\n<h3 id=\"testing-initial-setup\" class=\"mobile-header\">Testing Initial Setup</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Check Docker version\ndocker version\n\n# View system information\ndocker info\n\n# Test container creation\ndocker run --rm alpine echo &quot;Docker is working!&quot;\n\n# Test networking\ndocker run --rm alpine ping -c 3 google.com\n\n# Test volume mounting\ndocker run --rm -v /tmp:/host alpine ls /host</code></pre>\n      </div>\n    </div>\n<p class=\"mobile-paragraph\"><strong>WARNING:</strong> Never expose Docker daemon socket (2375/2376) to the internet without proper TLS authentication!</p>\n<h2 id=\"service-management\" class=\"mobile-header\">Service Management</h2>\n<h3 id=\"systemd-rhel-debian-ubuntu-arch-opensuse\" class=\"mobile-header\">systemd (RHEL, Debian, Ubuntu, Arch, openSUSE)</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Enable Docker to start on boot\nsudo systemctl enable docker\n\n# Start Docker service\nsudo systemctl start docker\n\n# Stop Docker service\nsudo systemctl stop docker\n\n# Restart Docker service\nsudo systemctl restart docker\n\n# Reload Docker configuration\nsudo systemctl reload docker\n\n# Check Docker status\nsudo systemctl status docker\n\n# View Docker logs\nsudo journalctl -u docker.service -f</code></pre>\n      </div>\n    </div>\n<h3 id=\"openrc-alpine-linux\" class=\"mobile-header\">OpenRC (Alpine Linux)</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Enable Docker to start on boot\nrc-update add docker boot\n\n# Start Docker service\nrc-service docker start\n\n# Stop Docker service\nrc-service docker stop\n\n# Restart Docker service\nrc-service docker restart\n\n# Check Docker status\nrc-service docker status</code></pre>\n      </div>\n    </div>\n<h3 id=\"rcd-freebsd\" class=\"mobile-header\">rc.d (FreeBSD)</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Enable in /etc/rc.conf\necho &#039;docker_enable=&quot;YES&quot;&#039; &gt;&gt; /etc/rc.conf\n\n# Start Docker\nservice docker start\n\n# Stop Docker\nservice docker stop\n\n# Restart Docker\nservice docker restart\n\n# Check status\nservice docker status</code></pre>\n      </div>\n    </div>\n<h3 id=\"launchd-macos\" class=\"mobile-header\">launchd (macOS)</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Docker Desktop manages its own services\n# Control through the UI or command line\n\n# Stop Docker Desktop\nosascript -e &#039;quit app &quot;Docker&quot;&#039;\n\n# Start Docker Desktop\nopen -a Docker\n\n# Check if Docker is running\ndocker system info &gt;/dev/null 2&gt;&amp;1 &amp;&amp; echo &quot;Docker is running&quot; || echo &quot;Docker is not running&quot;</code></pre>\n      </div>\n    </div>\n<h3 id=\"windows-service-manager\" class=\"mobile-header\">Windows Service Manager</h3>\n<div class=\"mobile-code-block\" data-language=\"powershell\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">powershell</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-powershell\"># Docker Desktop manages services automatically\n# For manual control:\n\n# Restart Docker Desktop\nStop-Process -Name &quot;Docker Desktop&quot; -Force\nStart-Process &quot;C:\\Program Files\\Docker\\Docker\\Docker Desktop.exe&quot;\n\n# Check Docker service status\nGet-Service -Name docker\n\n# Restart Docker service\nRestart-Service docker</code></pre>\n      </div>\n    </div>\n<h2 id=\"advanced-configuration\" class=\"mobile-header\">Advanced Configuration</h2>\n<h3 id=\"storage-driver-configuration\" class=\"mobile-header\">Storage Driver Configuration</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Configure storage driver options\nsudo tee /etc/docker/daemon.json &lt;&lt;EOF\n{\n  &quot;storage-driver&quot;: &quot;overlay2&quot;,\n  &quot;storage-opts&quot;: [\n    &quot;overlay2.override_kernel_check=true&quot;,\n    &quot;overlay2.size=20G&quot;\n  ],\n  &quot;data-root&quot;: &quot;/var/lib/docker&quot;\n}\nEOF\n\n# For devicemapper (older systems)\n{\n  &quot;storage-driver&quot;: &quot;devicemapper&quot;,\n  &quot;storage-opts&quot;: [\n    &quot;dm.thinpooldev=/dev/mapper/docker-thinpool&quot;,\n    &quot;dm.use_deferred_removal=true&quot;,\n    &quot;dm.use_deferred_deletion=true&quot;\n  ]\n}</code></pre>\n      </div>\n    </div>\n<h3 id=\"network-configuration\" class=\"mobile-header\">Network Configuration</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Configure default network settings\nsudo tee -a /etc/docker/daemon.json &lt;&lt;EOF\n{\n  &quot;bip&quot;: &quot;172.17.0.1/16&quot;,\n  &quot;fixed-cidr&quot;: &quot;172.17.0.0/16&quot;,\n  &quot;default-address-pools&quot;: [\n    {\n      &quot;base&quot;: &quot;172.80.0.0/16&quot;,\n      &quot;size&quot;: 24\n    }\n  ],\n  &quot;dns&quot;: [&quot;8.8.8.8&quot;, &quot;8.8.4.4&quot;],\n  &quot;dns-search&quot;: [&quot;example.com&quot;]\n}\nEOF\n\n# Enable IPv6 support\n{\n  &quot;ipv6&quot;: true,\n  &quot;fixed-cidr-v6&quot;: &quot;2001:db8::/64&quot;\n}</code></pre>\n      </div>\n    </div>\n<h3 id=\"resource-limits\" class=\"mobile-header\">Resource Limits</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Configure default container limits\nsudo tee -a /etc/docker/daemon.json &lt;&lt;EOF\n{\n  &quot;default-ulimits&quot;: {\n    &quot;nofile&quot;: {\n      &quot;Name&quot;: &quot;nofile&quot;,\n      &quot;Hard&quot;: 64000,\n      &quot;Soft&quot;: 64000\n    },\n    &quot;nproc&quot;: {\n      &quot;Name&quot;: &quot;nproc&quot;,\n      &quot;Hard&quot;: 32000,\n      &quot;Soft&quot;: 32000\n    }\n  },\n  &quot;default-runtime&quot;: &quot;runc&quot;,\n  &quot;runtimes&quot;: {\n    &quot;nvidia&quot;: {\n      &quot;path&quot;: &quot;nvidia-container-runtime&quot;,\n      &quot;runtimeArgs&quot;: []\n    }\n  }\n}\nEOF</code></pre>\n      </div>\n    </div>\n<h2 id=\"reverse-proxy-setup\" class=\"mobile-header\">Reverse Proxy Setup</h2>\n<h3 id=\"nginx-as-docker-registry-proxy\" class=\"mobile-header\">nginx as Docker Registry Proxy</h3>\n<div class=\"mobile-code-block\" data-language=\"nginx\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">nginx</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-nginx\"># /etc/nginx/sites-available/docker-registry\nserver {\n    listen 443 ssl http2;\n    server_name registry.example.com;\n\n    ssl_certificate /etc/ssl/certs/registry.crt;\n    ssl_certificate_key /etc/ssl/private/registry.key;\n\n    # Docker Registry API\n    location /v2/ {\n        proxy_pass http://localhost:5000;\n        proxy_set_header Host $http_host;\n        proxy_set_header X-Real-IP $remote_addr;\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n        proxy_set_header X-Forwarded-Proto $scheme;\n        proxy_read_timeout 900;\n        \n        # Required for docker client\n        chunked_transfer_encoding on;\n        client_max_body_size 0;\n    }\n}</code></pre>\n      </div>\n    </div>\n<h3 id=\"apache-as-docker-registry-proxy\" class=\"mobile-header\">Apache as Docker Registry Proxy</h3>\n<div class=\"mobile-code-block\" data-language=\"apache\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">apache</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-apache\"># /etc/apache2/sites-available/docker-registry.conf\n&lt;VirtualHost *:443&gt;\n    ServerName registry.example.com\n    \n    SSLEngine on\n    SSLCertificateFile /etc/ssl/certs/registry.crt\n    SSLCertificateKeyFile /etc/ssl/private/registry.key\n    \n    ProxyPreserveHost On\n    ProxyPass /v2 http://localhost:5000/v2\n    ProxyPassReverse /v2 http://localhost:5000/v2\n    \n    &lt;Location /v2&gt;\n        Order deny,allow\n        Allow from all\n        \n        # Authentication\n        AuthType Basic\n        AuthName &quot;Docker Registry&quot;\n        AuthUserFile /etc/apache2/.htpasswd\n        Require valid-user\n    &lt;/Location&gt;\n&lt;/VirtualHost&gt;</code></pre>\n      </div>\n    </div>\n<h3 id=\"caddy-as-docker-registry-proxy\" class=\"mobile-header\">Caddy as Docker Registry Proxy</h3>\n<div class=\"mobile-code-block\" data-language=\"caddyfile\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">caddyfile</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-caddyfile\">registry.example.com {\n    reverse_proxy localhost:5000 {\n        header_up Host {host}\n        header_up X-Real-IP {remote}\n        header_up X-Forwarded-For {remote}\n        header_up X-Forwarded-Proto {scheme}\n    }\n    \n    basicauth /v2/* {\n        admin $2a$14$xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\n    }\n    \n    encode gzip\n}</code></pre>\n      </div>\n    </div>\n<h3 id=\"traefik-configuration\" class=\"mobile-header\">Traefik Configuration</h3>\n<div class=\"mobile-code-block\" data-language=\"yaml\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">yaml</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-yaml\"># docker-compose.yml for Traefik\nversion: &#039;3.8&#039;\n\nservices:\n  traefik:\n    image: traefik:v2.9\n    command:\n      - &quot;--api.insecure=true&quot;\n      - &quot;--providers.docker=true&quot;\n      - &quot;--entrypoints.websecure.address=:443&quot;\n    ports:\n      - &quot;443:443&quot;\n      - &quot;8080:8080&quot;\n    volumes:\n      - /var/run/docker.sock:/var/run/docker.sock:ro\n      - ./certs:/certs\n\n  registry:\n    image: registry:2\n    labels:\n      - &quot;traefik.enable=true&quot;\n      - &quot;traefik.http.routers.registry.rule=Host(`registry.example.com`)&quot;\n      - &quot;traefik.http.routers.registry.entrypoints=websecure&quot;\n      - &quot;traefik.http.routers.registry.tls=true&quot;</code></pre>\n      </div>\n    </div>\n<h2 id=\"security-configuration\" class=\"mobile-header\">Security Configuration</h2>\n<h3 id=\"docker-daemon-security\" class=\"mobile-header\">Docker Daemon Security</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Enable TLS for Docker daemon\n# Generate CA private key\nopenssl genrsa -aes256 -out ca-key.pem 4096\n\n# Generate CA certificate\nopenssl req -new -x509 -days 3650 -key ca-key.pem -sha256 -out ca.pem\n\n# Generate server key\nopenssl genrsa -out server-key.pem 4096\n\n# Generate certificate signing request\nopenssl req -subj &quot;/CN=$HOST&quot; -sha256 -new -key server-key.pem -out server.csr\n\n# Generate server certificate\necho subjectAltName = DNS:$HOST,IP:127.0.0.1 &gt;&gt; extfile.cnf\necho extendedKeyUsage = serverAuth &gt;&gt; extfile.cnf\nopenssl x509 -req -days 365 -sha256 -in server.csr -CA ca.pem -CAkey ca-key.pem -out server-cert.pem -extfile extfile.cnf\n\n# Configure Docker to use TLS\nsudo tee /etc/docker/daemon.json &lt;&lt;EOF\n{\n  &quot;hosts&quot;: [&quot;tcp://0.0.0.0:2376&quot;],\n  &quot;tls&quot;: true,\n  &quot;tlsverify&quot;: true,\n  &quot;tlscert&quot;: &quot;/etc/docker/certs/server-cert.pem&quot;,\n  &quot;tlskey&quot;: &quot;/etc/docker/certs/server-key.pem&quot;,\n  &quot;tlscacert&quot;: &quot;/etc/docker/certs/ca.pem&quot;\n}\nEOF</code></pre>\n      </div>\n    </div>\n<h3 id=\"apparmorselinux-configuration\" class=\"mobile-header\">AppArmor/SELinux Configuration</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># AppArmor (Debian/Ubuntu)\n# Check if AppArmor is enabled\nsudo aa-status\n\n# Docker containers use docker-default profile by default\n# Create custom profile\nsudo tee /etc/apparmor.d/docker-custom &lt;&lt;EOF\n#include &lt;tunables/global&gt;\n\nprofile docker-custom flags=(attach_disconnected,mediate_deleted) {\n  #include &lt;abstractions/base&gt;\n  \n  network,\n  capability,\n  \n  # Deny dangerous capabilities\n  deny capability dac_override,\n  deny capability setuid,\n  deny capability setgid,\n  \n  # File access\n  deny /proc/sys/** w,\n  deny /sys/** w,\n  \n  # Allow necessary access\n  /usr/bin/** ix,\n  /bin/** ix,\n  /lib/** r,\n}\nEOF\n\n# Load profile\nsudo apparmor_parser -r /etc/apparmor.d/docker-custom\n\n# SELinux (RHEL/CentOS)\n# Enable SELinux for containers\nsudo setsebool -P container_manage_cgroup true\n\n# Check Docker SELinux context\nps -eZ | grep dockerd</code></pre>\n      </div>\n    </div>\n<h3 id=\"firewall-rules\" class=\"mobile-header\">Firewall Rules</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># UFW (Ubuntu/Debian)\n# Docker manages its own iptables rules\n# To integrate with UFW:\nsudo tee -a /etc/ufw/after.rules &lt;&lt;EOF\n*filter\n:ufw-user-forward - [0:0]\n:DOCKER-USER - [0:0]\n-A DOCKER-USER -j ufw-user-forward\n-A DOCKER-USER -j RETURN -s 10.0.0.0/8\n-A DOCKER-USER -j RETURN -s 172.16.0.0/12\n-A DOCKER-USER -j RETURN -s 192.168.0.0/16\n-A DOCKER-USER -j DROP\nCOMMIT\nEOF\n\nsudo ufw reload\n\n# firewalld (RHEL/CentOS/openSUSE)\n# Add Docker zone\nsudo firewall-cmd --permanent --new-zone=docker\nsudo firewall-cmd --permanent --zone=docker --add-interface=docker0\nsudo firewall-cmd --permanent --zone=docker --add-port=2377/tcp\nsudo firewall-cmd --permanent --zone=docker --add-port=7946/tcp\nsudo firewall-cmd --permanent --zone=docker --add-port=7946/udp\nsudo firewall-cmd --permanent --zone=docker --add-port=4789/udp\nsudo firewall-cmd --reload\n\n# iptables (manual)\n# Allow Docker subnet\nsudo iptables -A INPUT -s 172.17.0.0/16 -j ACCEPT\nsudo iptables-save &gt; /etc/iptables/rules.v4\n\n# pf (FreeBSD)\n# Add to /etc/pf.conf\npass in on docker0 all\npass out on docker0 all</code></pre>\n      </div>\n    </div>\n<h2 id=\"database-setup\" class=\"mobile-header\">Database Setup</h2>\n<p class=\"mobile-paragraph\">Docker doesn't require a database, but here's how to run databases in Docker:</p>\n<h3 id=\"postgresql-in-docker\" class=\"mobile-header\">PostgreSQL in Docker</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Create volume for persistent data\ndocker volume create postgres_data\n\n# Run PostgreSQL container\ndocker run -d \\\n  --name postgres \\\n  --restart unless-stopped \\\n  -e POSTGRES_PASSWORD=securepassword \\\n  -e POSTGRES_USER=myuser \\\n  -e POSTGRES_DB=mydb \\\n  -v postgres_data:/var/lib/postgresql/data \\\n  -p 5432:5432 \\\n  postgres:15-alpine\n\n# Connect to PostgreSQL\ndocker exec -it postgres psql -U myuser -d mydb</code></pre>\n      </div>\n    </div>\n<h3 id=\"mysql-in-docker\" class=\"mobile-header\">MySQL in Docker</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Create volume for persistent data\ndocker volume create mysql_data\n\n# Run MySQL container\ndocker run -d \\\n  --name mysql \\\n  --restart unless-stopped \\\n  -e MYSQL_ROOT_PASSWORD=rootpassword \\\n  -e MYSQL_DATABASE=mydb \\\n  -e MYSQL_USER=myuser \\\n  -e MYSQL_PASSWORD=securepassword \\\n  -v mysql_data:/var/lib/mysql \\\n  -p 3306:3306 \\\n  mysql:8.0\n\n# Connect to MySQL\ndocker exec -it mysql mysql -u myuser -p</code></pre>\n      </div>\n    </div>\n<h2 id=\"performance-optimization\" class=\"mobile-header\">Performance Optimization</h2>\n<h3 id=\"kernel-parameters\" class=\"mobile-header\">Kernel Parameters</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Optimize kernel parameters for Docker\nsudo tee -a /etc/sysctl.conf &lt;&lt;EOF\n# Docker optimization\nvm.max_map_count=262144\nfs.file-max=2097152\nfs.inotify.max_user_watches=524288\nfs.inotify.max_user_instances=512\n\n# Network optimization\nnet.core.somaxconn=32768\nnet.ipv4.tcp_max_syn_backlog=8192\nnet.core.netdev_max_backlog=5000\nnet.ipv4.ip_local_port_range=1024 65535\n\n# Bridge settings\nnet.bridge.bridge-nf-call-iptables=1\nnet.bridge.bridge-nf-call-ip6tables=1\nnet.ipv4.ip_forward=1\nEOF\n\n# Apply settings\nsudo sysctl -p</code></pre>\n      </div>\n    </div>\n<h3 id=\"storage-optimization\" class=\"mobile-header\">Storage Optimization</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Use dedicated disk for Docker\n# Format with XFS for better performance\nsudo mkfs.xfs /dev/sdb1\nsudo mkdir -p /var/lib/docker\nsudo mount /dev/sdb1 /var/lib/docker\n\n# Add to /etc/fstab\necho &quot;/dev/sdb1 /var/lib/docker xfs defaults,noatime 0 2&quot; | sudo tee -a /etc/fstab\n\n# Configure storage driver options\nsudo tee /etc/docker/daemon.json &lt;&lt;EOF\n{\n  &quot;storage-driver&quot;: &quot;overlay2&quot;,\n  &quot;storage-opts&quot;: [\n    &quot;overlay2.override_kernel_check=true&quot;\n  ],\n  &quot;log-driver&quot;: &quot;json-file&quot;,\n  &quot;log-opts&quot;: {\n    &quot;max-size&quot;: &quot;10m&quot;,\n    &quot;max-file&quot;: &quot;3&quot;\n  }\n}\nEOF</code></pre>\n      </div>\n    </div>\n<h3 id=\"build-optimization\" class=\"mobile-header\">Build Optimization</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Enable BuildKit for faster builds\nexport DOCKER_BUILDKIT=1\n\n# Configure BuildKit in daemon\nsudo tee -a /etc/docker/daemon.json &lt;&lt;EOF\n{\n  &quot;features&quot;: {\n    &quot;buildkit&quot;: true\n  }\n}\nEOF\n\n# Use build cache mount\n# In Dockerfile:\n# syntax=docker/dockerfile:1\nFROM alpine\nRUN --mount=type=cache,target=/var/cache/apk \\\n    apk add --no-cache git</code></pre>\n      </div>\n    </div>\n<h2 id=\"monitoring\" class=\"mobile-header\">Monitoring</h2>\n<h3 id=\"docker-stats-and-events\" class=\"mobile-header\">Docker Stats and Events</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Monitor container resource usage\ndocker stats\n\n# Stream Docker events\ndocker events\n\n# Monitor specific container\ndocker stats container_name\n\n# Export metrics in JSON\ndocker stats --no-stream --format json &gt; stats.json\n\n# Monitor Docker daemon\nsudo journalctl -u docker.service -f</code></pre>\n      </div>\n    </div>\n<h3 id=\"cadvisor-setup\" class=\"mobile-header\">cAdvisor Setup</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Run cAdvisor for container metrics\ndocker run -d \\\n  --name=cadvisor \\\n  --restart unless-stopped \\\n  -p 8080:8080 \\\n  -v /:/rootfs:ro \\\n  -v /var/run:/var/run:ro \\\n  -v /sys:/sys:ro \\\n  -v /var/lib/docker/:/var/lib/docker:ro \\\n  -v /dev/disk/:/dev/disk:ro \\\n  --privileged \\\n  gcr.io/cadvisor/cadvisor:latest\n\n# Access metrics at http://localhost:8080</code></pre>\n      </div>\n    </div>\n<h3 id=\"prometheus-integration\" class=\"mobile-header\">Prometheus Integration</h3>\n<div class=\"mobile-code-block\" data-language=\"yaml\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">yaml</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-yaml\"># docker-compose.yml for monitoring stack\nversion: &#039;3.8&#039;\n\nservices:\n  prometheus:\n    image: prom/prometheus\n    volumes:\n      - ./prometheus.yml:/etc/prometheus/prometheus.yml\n      - prometheus_data:/prometheus\n    ports:\n      - &quot;9090:9090&quot;\n    command:\n      - &#039;--config.file=/etc/prometheus/prometheus.yml&#039;\n      - &#039;--storage.tsdb.path=/prometheus&#039;\n\n  node-exporter:\n    image: prom/node-exporter\n    ports:\n      - &quot;9100:9100&quot;\n    volumes:\n      - /proc:/host/proc:ro\n      - /sys:/host/sys:ro\n      - /:/rootfs:ro\n\nvolumes:\n  prometheus_data:</code></pre>\n      </div>\n    </div>\n<h2 id=\"backup-and-restore\" class=\"mobile-header\">Backup and Restore</h2>\n<h3 id=\"container-backup\" class=\"mobile-header\">Container Backup</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\">#!/bin/bash\n# backup-docker.sh\n\nBACKUP_DIR=&quot;/backup/docker&quot;\nDATE=$(date +%Y%m%d_%H%M%S)\n\n# Create backup directory\nmkdir -p $BACKUP_DIR/{images,volumes,configs}\n\n# Backup running containers\ndocker ps -q | while read container; do\n    name=$(docker inspect -f &#039;{{.Name}}&#039; $container | sed &#039;s/\\///&#039;)\n    docker commit $container backup_$name:$DATE\n    docker save backup_$name:$DATE | gzip &gt; $BACKUP_DIR/images/${name}_${DATE}.tar.gz\n    docker inspect $container &gt; $BACKUP_DIR/configs/${name}_${DATE}.json\ndone\n\n# Backup volumes\ndocker volume ls -q | while read volume; do\n    docker run --rm \\\n        -v $volume:/data \\\n        -v $BACKUP_DIR/volumes:/backup \\\n        alpine tar czf /backup/${volume}_${DATE}.tar.gz -C /data .\ndone\n\n# Backup Docker daemon config\ncp /etc/docker/daemon.json $BACKUP_DIR/configs/daemon_${DATE}.json\n\necho &quot;Backup completed: $DATE&quot;</code></pre>\n      </div>\n    </div>\n<h3 id=\"volume-backup\" class=\"mobile-header\">Volume Backup</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Backup named volume\ndocker run --rm \\\n    -v myvolume:/source:ro \\\n    -v $(pwd):/backup \\\n    alpine tar czf /backup/myvolume.tar.gz -C /source .\n\n# Restore volume\ndocker run --rm \\\n    -v myvolume:/target \\\n    -v $(pwd):/backup \\\n    alpine tar xzf /backup/myvolume.tar.gz -C /target</code></pre>\n      </div>\n    </div>\n<h3 id=\"registry-backup\" class=\"mobile-header\">Registry Backup</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Backup Docker registry data\ndocker exec registry tar czf - /var/lib/registry | gzip &gt; registry_backup_$(date +%Y%m%d).tar.gz\n\n# Backup registry config\ndocker exec registry cat /etc/docker/registry/config.yml &gt; registry_config_backup.yml</code></pre>\n      </div>\n    </div>\n<h2 id=\"troubleshooting\" class=\"mobile-header\">Troubleshooting</h2>\n<h3 id=\"common-issues\" class=\"mobile-header\">Common Issues</h3>\n<p class=\"mobile-paragraph\">1. <strong>Cannot connect to Docker daemon</strong>:</p>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Check if Docker is running\nsudo systemctl status docker\n\n# Check Docker socket permissions\nls -la /var/run/docker.sock\n\n# Check if user is in docker group\ngroups $USER\n\n# Start Docker if not running\nsudo systemctl start docker</code></pre>\n      </div>\n    </div>\n<p class=\"mobile-paragraph\">2. <strong>Container networking issues</strong>:</p>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Check Docker networks\ndocker network ls\n\n# Inspect bridge network\ndocker network inspect bridge\n\n# Check iptables rules\nsudo iptables -L -n -v\n\n# Reset Docker networking\nsudo systemctl stop docker\nsudo ip link delete docker0\nsudo systemctl start docker</code></pre>\n      </div>\n    </div>\n<p class=\"mobile-paragraph\">3. <strong>Storage space issues</strong>:</p>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Check disk usage\ndocker system df\n\n# Clean up unused resources\ndocker system prune -a --volumes\n\n# Check Docker root directory\ndf -h /var/lib/docker\n\n# Find large containers/images\ndocker ps -s\ndocker images --format &quot;table {{.Repository}}\\t{{.Tag}}\\t{{.Size}}&quot;</code></pre>\n      </div>\n    </div>\n<p class=\"mobile-paragraph\">4. <strong>Permission denied errors</strong>:</p>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Fix socket permissions\nsudo chmod 666 /var/run/docker.sock\n\n# Fix user namespace issues\nsudo usermod -aG docker $USER\nnewgrp docker\n\n# Check SELinux/AppArmor\ngetenforce  # SELinux\nsudo aa-status  # AppArmor</code></pre>\n      </div>\n    </div>\n<h3 id=\"debug-mode\" class=\"mobile-header\">Debug Mode</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Run Docker in debug mode\nsudo dockerd --debug\n\n# Enable debug logging\nsudo tee /etc/docker/daemon.json &lt;&lt;EOF\n{\n  &quot;debug&quot;: true,\n  &quot;log-level&quot;: &quot;debug&quot;\n}\nEOF\n\nsudo systemctl restart docker\n\n# Check debug logs\nsudo journalctl -u docker.service --no-pager</code></pre>\n      </div>\n    </div>\n<h2 id=\"maintenance\" class=\"mobile-header\">Maintenance</h2>\n<h3 id=\"update-procedures\" class=\"mobile-header\">Update Procedures</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># RHEL/CentOS/Rocky/AlmaLinux\nsudo yum update docker-ce docker-ce-cli containerd.io\n\n# Debian/Ubuntu\nsudo apt-get update\nsudo apt-get upgrade docker-ce docker-ce-cli containerd.io\n\n# Arch Linux\nsudo pacman -Syu docker\n\n# Alpine Linux\napk update\napk upgrade docker\n\n# openSUSE\nsudo zypper update docker\n\n# FreeBSD\npkg update\npkg upgrade docker\n\n# Always restart after updates\nsudo systemctl restart docker</code></pre>\n      </div>\n    </div>\n<h3 id=\"cleanup-tasks\" class=\"mobile-header\">Cleanup Tasks</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\">#!/bin/bash\n# docker-cleanup.sh\n\necho &quot;Starting Docker cleanup...&quot;\n\n# Remove stopped containers\ndocker container prune -f\n\n# Remove unused images\ndocker image prune -a -f\n\n# Remove unused volumes\ndocker volume prune -f\n\n# Remove unused networks\ndocker network prune -f\n\n# Remove build cache\ndocker builder prune -f\n\n# Show disk usage after cleanup\ndocker system df\n\necho &quot;Cleanup completed&quot;</code></pre>\n      </div>\n    </div>\n<h3 id=\"log-rotation\" class=\"mobile-header\">Log Rotation</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Configure log rotation for containers\nsudo tee /etc/docker/daemon.json &lt;&lt;EOF\n{\n  &quot;log-driver&quot;: &quot;json-file&quot;,\n  &quot;log-opts&quot;: {\n    &quot;max-size&quot;: &quot;10m&quot;,\n    &quot;max-file&quot;: &quot;3&quot;,\n    &quot;compress&quot;: &quot;true&quot;\n  }\n}\nEOF\n\n# System-wide Docker logs rotation\nsudo tee /etc/logrotate.d/docker &lt;&lt;EOF\n/var/lib/docker/containers/*/*.log {\n    rotate 7\n    daily\n    compress\n    missingok\n    delaycompress\n    copytruncate\n}\nEOF</code></pre>\n      </div>\n    </div>\n<h2 id=\"integration-examples\" class=\"mobile-header\">Integration Examples</h2>\n<h3 id=\"cicd-pipeline-integration\" class=\"mobile-header\">CI/CD Pipeline Integration</h3>\n<div class=\"mobile-code-block\" data-language=\"yaml\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">yaml</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-yaml\"># GitLab CI example\nstages:\n  - build\n  - test\n  - deploy\n\nvariables:\n  DOCKER_DRIVER: overlay2\n  DOCKER_TLS_CERTDIR: &quot;/certs&quot;\n\nbuild:\n  stage: build\n  image: docker:latest\n  services:\n    - docker:dind\n  script:\n    - docker build -t myapp:$CI_COMMIT_SHA .\n    - docker push myapp:$CI_COMMIT_SHA\n\n# Jenkins Pipeline example\npipeline {\n    agent any\n    stages {\n        stage(&#039;Build&#039;) {\n            steps {\n                script {\n                    docker.build(&quot;myapp:${env.BUILD_ID}&quot;)\n                }\n            }\n        }\n    }\n}</code></pre>\n      </div>\n    </div>\n<h3 id=\"kubernetes-integration\" class=\"mobile-header\">Kubernetes Integration</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Install CRI-Docker for Kubernetes\nCRI_VERSION=&quot;0.3.1&quot;\nwget https://github.com/Mirantis/cri-dockerd/releases/download/v${CRI_VERSION}/cri-dockerd-${CRI_VERSION}.amd64.tgz\ntar xzf cri-dockerd-${CRI_VERSION}.amd64.tgz\nsudo install -o root -g root -m 0755 cri-dockerd /usr/local/bin/cri-dockerd\nrm cri-dockerd-${CRI_VERSION}.amd64.tgz cri-dockerd\n\n# Create systemd service\nsudo tee /etc/systemd/system/cri-docker.service &lt;&lt;EOF\n[Unit]\nDescription=CRI Docker Interface\nAfter=network.target docker.service\nRequires=docker.service\n\n[Service]\nType=notify\nExecStart=/usr/local/bin/cri-dockerd --container-runtime-endpoint unix:///var/run/cri-dockerd.sock\nRestart=always\nRestartSec=5s\n\n[Install]\nWantedBy=multi-user.target\nEOF\n\nsudo systemctl enable --now cri-docker</code></pre>\n      </div>\n    </div>\n<h3 id=\"docker-compose-examples\" class=\"mobile-header\">Docker Compose Examples</h3>\n<div class=\"mobile-code-block\" data-language=\"yaml\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">yaml</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-yaml\"># Multi-tier application stack\nversion: &#039;3.8&#039;\n\nservices:\n  web:\n    build: ./web\n    ports:\n      - &quot;80:80&quot;\n    environment:\n      - DATABASE_URL=postgresql://user:pass@db:5432/mydb\n    depends_on:\n      - db\n    networks:\n      - frontend\n      - backend\n\n  db:\n    image: postgres:15\n    environment:\n      - POSTGRES_USER=user\n      - POSTGRES_PASSWORD=pass\n      - POSTGRES_DB=mydb\n    volumes:\n      - db_data:/var/lib/postgresql/data\n    networks:\n      - backend\n\n  redis:\n    image: redis:alpine\n    networks:\n      - backend\n\nnetworks:\n  frontend:\n  backend:\n\nvolumes:\n  db_data:</code></pre>\n      </div>\n    </div>\n<h3 id=\"sdk-integration\" class=\"mobile-header\">SDK Integration</h3>\n<div class=\"mobile-code-block\" data-language=\"python\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">python</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-python\"># Python Docker SDK\nimport docker\n\nclient = docker.from_env()\n\n# Run container\ncontainer = client.containers.run(\n    &quot;alpine&quot;,\n    &quot;echo hello world&quot;,\n    detach=True\n)\n\n# List containers\nfor container in client.containers.list():\n    print(container.name)\n\n# Build image\nimage, logs = client.images.build(\n    path=&quot;.&quot;,\n    tag=&quot;myapp:latest&quot;\n)</code></pre>\n      </div>\n    </div>\n<div class=\"mobile-code-block\" data-language=\"javascript\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">javascript</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-javascript\">// Node.js Docker SDK\nconst Docker = require(&#039;dockerode&#039;);\nconst docker = new Docker();\n\n// Run container\ndocker.createContainer({\n  Image: &#039;alpine&#039;,\n  Cmd: [&#039;echo&#039;, &#039;hello world&#039;],\n  name: &#039;mycontainer&#039;\n}, (err, container) =&gt; {\n  if (!err) {\n    container.start();\n  }\n});\n\n// List containers\ndocker.listContainers((err, containers) =&gt; {\n  containers.forEach(containerInfo =&gt; {\n    console.log(containerInfo.Names);\n  });\n});</code></pre>\n      </div>\n    </div>\n<h2 id=\"additional-resources\" class=\"mobile-header\">Additional Resources</h2>\n<li class=\"mobile-list-item\"><a href=\"https://docs.docker.com/\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">Official Documentation</a></li>\n<li class=\"mobile-list-item\"><a href=\"https://hub.docker.com/\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">Docker Hub</a></li>\n<li class=\"mobile-list-item\"><a href=\"https://github.com/docker\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">Docker GitHub Repository</a></li>\n<li class=\"mobile-list-item\"><a href=\"https://docs.docker.com/develop/dev-best-practices/\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">Docker Best Practices</a></li>\n<li class=\"mobile-list-item\"><a href=\"https://docs.docker.com/engine/security/\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">Docker Security Documentation</a></li>\n<li class=\"mobile-list-item\"><a href=\"https://docs.docker.com/compose/\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">Docker Compose Documentation</a></li>\n<li class=\"mobile-list-item\"><a href=\"https://forums.docker.com/\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">Docker Community Forums</a></li>\n<li class=\"mobile-list-item\"><a href=\"https://labs.play-with-docker.com/\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">Play with Docker</a></li>\n<p class=\"mobile-paragraph\">---</p>\n<p class=\"mobile-paragraph\"><strong>Note:</strong> This guide is part of the <a href=\"https://howtomgr.github.io\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">HowToMgr</a> collection. Always refer to official documentation for the most up-to-date information.</p>","readTime":"17 min","wordCount":3265,"lastBuilt":"2025-09-14T18:12:06.624Z"},{"name":"drupal","displayName":"Drupal","slug":"drupal","description":"Repo for drupal","category":"infrastructure","language":null,"stars":0,"forks":0,"topics":[],"githubUrl":"https://github.com/howtomgr/drupal","updatedAt":"2025-09-08T03:06:48Z","createdAt":"2025-09-08T03:06:38Z","readmeRaw":"## ðŸ‘‹ Welcome to drupal ðŸš€  \n\ndrupal README  \n  \n  \n## Author  \n\nðŸ¤– casjay: [Github](https://github.com/casjay) ðŸ¤–  \n","readmeHtml":"<h2 id=\"welcome-to-drupal\" class=\"mobile-header\">ðŸ‘‹ Welcome to drupal ðŸš€  </h2>\n<p class=\"mobile-paragraph\">drupal README  </p>\n<h2 id=\"author\" class=\"mobile-header\">Author  </h2>\n<p class=\"mobile-paragraph\">ðŸ¤– casjay: <a href=\"https://github.com/casjay\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">Github</a> ðŸ¤–  </p>","readTime":"1 min","wordCount":15,"lastBuilt":"2025-09-14T18:12:20.823Z"},{"name":"elasticsearch","displayName":"Elasticsearch","slug":"elasticsearch","description":"Repo for elasticsearch","category":"infrastructure","language":null,"stars":0,"forks":0,"topics":[],"githubUrl":"https://github.com/howtomgr/elasticsearch","updatedAt":"2025-09-14T03:45:07Z","createdAt":"2025-09-08T03:06:51Z","readmeRaw":"# Elasticsearch Installation Guide\n\nElasticsearch is a free and open-source distributed, RESTful search and analytics engine. Originally developed by Shay Banon and now maintained by Elastic N.V., Elasticsearch is built on Apache Lucene and designed for horizontal scalability, reliability, and real-time search. It serves as a FOSS alternative to commercial search solutions like Amazon CloudSearch, Azure Cognitive Search, or Splunk Enterprise, offering enterprise-grade features including full-text search, aggregations, and analytics without licensing costs, with features like distributed architecture, RESTful API, and multi-tenancy.\n\n## Prerequisites\n\n- **Hardware Requirements**:\n  - CPU: 2 cores minimum (4+ cores recommended for production)\n  - RAM: 4GB minimum (16GB+ recommended for production)\n  - Storage: 20GB minimum (SSD strongly recommended for performance)\n  - Network: Stable connectivity for cluster communication\n- **Operating System**: \n  - Linux: Any modern distribution with kernel 3.2+\n  - macOS: 10.13+ (High Sierra or newer)\n  - Windows: Windows Server 2016+ or Windows 10\n  - FreeBSD: 11.0+\n- **Network Requirements**:\n  - Port 9200 (HTTP/REST API)\n  - Port 9300 (Node communication)\n  - Additional ports for cluster discovery\n- **Dependencies**:\n  - Java 11 or Java 17 (OpenJDK recommended)\n  - systemd or compatible init system (Linux)\n  - Root or administrative access for installation\n- **System Access**: root or sudo privileges required\n\n## Installation\n\n### RHEL/CentOS/Rocky Linux/AlmaLinux\n\n```bash\n# Install Java (OpenJDK)\nsudo yum install -y java-11-openjdk java-11-openjdk-devel\n\n# Import Elasticsearch GPG key\nsudo rpm --import https://artifacts.elastic.co/GPG-KEY-elasticsearch\n\n# Create Elasticsearch repository\nsudo tee /etc/yum.repos.d/elasticsearch.repo <<EOF\n[elasticsearch]\nname=Elasticsearch repository for 8.x packages\nbaseurl=https://artifacts.elastic.co/packages/8.x/yum\ngpgcheck=1\ngpgkey=https://artifacts.elastic.co/GPG-KEY-elasticsearch\nenabled=0\nautorefresh=1\ntype=rpm-md\nEOF\n\n# Install Elasticsearch\nsudo yum install -y --enablerepo=elasticsearch elasticsearch\n\n# Enable and start service\nsudo systemctl enable --now elasticsearch\n\n# Configure firewall\nsudo firewall-cmd --permanent --add-port=9200/tcp\nsudo firewall-cmd --permanent --add-port=9300/tcp\nsudo firewall-cmd --reload\n\n# Verify installation\ncurl -X GET \"localhost:9200/\"\n```\n\n### Debian/Ubuntu\n\n```bash\n# Update package index\nsudo apt update\n\n# Install Java (OpenJDK)\nsudo apt install -y openjdk-11-jdk\n\n# Install prerequisite packages\nsudo apt install -y wget gnupg apt-transport-https\n\n# Import Elasticsearch GPG key\nwget -qO - https://artifacts.elastic.co/GPG-KEY-elasticsearch | sudo gpg --dearmor -o /etc/apt/trusted.gpg.d/elasticsearch.gpg\n\n# Add Elasticsearch repository\necho \"deb https://artifacts.elastic.co/packages/8.x/apt stable main\" | sudo tee /etc/apt/sources.list.d/elastic-8.x.list\n\n# Update package index\nsudo apt update\n\n# Install Elasticsearch\nsudo apt install -y elasticsearch\n\n# Enable and start service\nsudo systemctl enable --now elasticsearch\n\n# Configure firewall\nsudo ufw allow 9200\nsudo ufw allow 9300\n```\n\n### Arch Linux\n\n```bash\n# Install Java\nsudo pacman -S jdk11-openjdk\n\n# Elasticsearch is available in AUR\nyay -S elasticsearch\n\n# Alternative: Install from AUR with makepkg\ngit clone https://aur.archlinux.org/elasticsearch.git\ncd elasticsearch\nmakepkg -si\n\n# Create elasticsearch user and group\nsudo useradd -r -s /sbin/nologin elasticsearch\n\n# Create necessary directories\nsudo mkdir -p /var/lib/elasticsearch /var/log/elasticsearch\nsudo chown elasticsearch:elasticsearch /var/lib/elasticsearch /var/log/elasticsearch\n\n# Enable and start service\nsudo systemctl enable --now elasticsearch\n\n# Configuration location: /etc/elasticsearch/\n```\n\n### Alpine Linux\n\n```bash\n# Install Java\napk add --no-cache openjdk11\n\n# Elasticsearch is not officially packaged for Alpine\n# Use Docker for Elasticsearch on Alpine:\n\n# Install Docker\napk add --no-cache docker docker-compose\n\n# Enable and start Docker\nrc-update add docker default\nrc-service docker start\n\n# Run Elasticsearch container\ndocker run -d \\\n  --name elasticsearch \\\n  --restart unless-stopped \\\n  -p 9200:9200 -p 9300:9300 \\\n  -e \"discovery.type=single-node\" \\\n  -e \"xpack.security.enabled=false\" \\\n  -v /var/lib/elasticsearch:/usr/share/elasticsearch/data \\\n  elasticsearch:8.11.3\n\n# Verify installation\ncurl -X GET \"localhost:9200/\"\n```\n\n### openSUSE/SLES\n\n```bash\n# Install Java\nsudo zypper install -y java-11-openjdk java-11-openjdk-devel\n\n# Elasticsearch is not officially packaged for openSUSE/SLES\n# Use Docker or manual installation:\n\n# Method 1: Docker installation\nsudo zypper install -y docker docker-compose\nsudo systemctl enable --now docker\n\ndocker run -d \\\n  --name elasticsearch \\\n  --restart unless-stopped \\\n  -p 9200:9200 -p 9300:9300 \\\n  -e \"discovery.type=single-node\" \\\n  -e \"xpack.security.enabled=false\" \\\n  -v /var/lib/elasticsearch:/usr/share/elasticsearch/data \\\n  elasticsearch:8.11.3\n\n# Method 2: Manual installation from tarball\nwget https://artifacts.elastic.co/downloads/elasticsearch/elasticsearch-8.11.3-linux-x86_64.tar.gz\ntar -xzf elasticsearch-8.11.3-linux-x86_64.tar.gz\nsudo mv elasticsearch-8.11.3 /usr/local/elasticsearch\n\n# Create elasticsearch user and directories\nsudo useradd -r elasticsearch\nsudo mkdir -p /var/lib/elasticsearch /var/log/elasticsearch\nsudo chown elasticsearch:elasticsearch /var/lib/elasticsearch /var/log/elasticsearch\n```\n\n### macOS\n\n```bash\n# Using Homebrew\nbrew tap elastic/tap\nbrew install elastic/tap/elasticsearch-full\n\n# Start Elasticsearch service\nbrew services start elastic/tap/elasticsearch-full\n\n# Or run manually\nelasticsearch\n\n# Configuration location: /usr/local/etc/elasticsearch/\n# Alternative: /opt/homebrew/etc/elasticsearch/ (Apple Silicon)\n```\n\n### FreeBSD\n\n```bash\n# Install Java\npkg install openjdk11\n\n# Install Elasticsearch from ports\ncd /usr/ports/textproc/elasticsearch8\nmake install clean\n\n# Enable Elasticsearch\necho 'elasticsearch_enable=\"YES\"' >> /etc/rc.conf\n\n# Start service\nservice elasticsearch start\n\n# Configuration location: /usr/local/etc/elasticsearch/\n```\n\n### Windows\n\n```powershell\n# Method 1: Using Chocolatey\nchoco install elasticsearch\n\n# Method 2: Using Scoop\nscoop bucket add java\nscoop install openjdk11\nscoop bucket add extras\nscoop install elasticsearch\n\n# Method 3: Manual installation\n# Download from https://www.elastic.co/downloads/elasticsearch\n# Extract to C:\\elasticsearch\n\n# Install as Windows service\n\"C:\\elasticsearch\\bin\\elasticsearch-service.bat\" install\n\n# Start service\nnet start Elasticsearch\n\n# Configuration location: C:\\elasticsearch\\config\\elasticsearch.yml\n```\n\n## Initial Configuration\n\n### First-Run Setup\n\n1. **Create elasticsearch user** (if not created by package):\n```bash\n# Linux systems\nsudo useradd -r -d /var/lib/elasticsearch -s /sbin/nologin -c \"Elasticsearch\" elasticsearch\n```\n\n2. **Default configuration locations**:\n- RHEL/CentOS/Rocky/AlmaLinux: `/etc/elasticsearch/elasticsearch.yml`\n- Debian/Ubuntu: `/etc/elasticsearch/elasticsearch.yml`\n- Arch Linux: `/etc/elasticsearch/elasticsearch.yml`\n- Alpine Linux: Docker container configuration\n- openSUSE/SLES: `/etc/elasticsearch/elasticsearch.yml` (manual installation)\n- macOS: `/usr/local/etc/elasticsearch/elasticsearch.yml`\n- FreeBSD: `/usr/local/etc/elasticsearch/elasticsearch.yml`\n- Windows: `C:\\elasticsearch\\config\\elasticsearch.yml`\n\n3. **Essential settings to change**:\n\n```yaml\n# /etc/elasticsearch/elasticsearch.yml\ncluster.name: my-application\nnode.name: node-1\n\npath.data: /var/lib/elasticsearch\npath.logs: /var/log/elasticsearch\n\nnetwork.host: 127.0.0.1\nhttp.port: 9200\n\ndiscovery.type: single-node\n\n# Security (disable for initial setup, enable for production)\nxpack.security.enabled: true\nxpack.security.enrollment.enabled: true\n\n# Memory settings\nbootstrap.memory_lock: true\n\n# Index settings\naction.auto_create_index: .monitoring*,.watches,.triggered_watches,.watcher-history*,.ml*\n```\n\n### Testing Initial Setup\n\n```bash\n# Check if Elasticsearch is running\nsudo systemctl status elasticsearch\n\n# Test REST API\ncurl -X GET \"localhost:9200/\"\n\n# Check cluster health\ncurl -X GET \"localhost:9200/_cluster/health?pretty\"\n\n# Check nodes\ncurl -X GET \"localhost:9200/_cat/nodes?v\"\n\n# Test indexing and searching\ncurl -X PUT \"localhost:9200/test_index/_doc/1\" -H 'Content-Type: application/json' -d '{\"message\": \"Hello Elasticsearch\"}'\ncurl -X GET \"localhost:9200/test_index/_search?pretty\"\n```\n\n**WARNING:** Enable X-Pack security for production deployments!\n\n## Service Management\n\n### systemd (RHEL, Debian, Ubuntu, Arch, openSUSE)\n\n```bash\n# Enable Elasticsearch to start on boot\nsudo systemctl enable elasticsearch\n\n# Start Elasticsearch\nsudo systemctl start elasticsearch\n\n# Stop Elasticsearch\nsudo systemctl stop elasticsearch\n\n# Restart Elasticsearch\nsudo systemctl restart elasticsearch\n\n# Reload configuration (not supported, requires restart)\nsudo systemctl restart elasticsearch\n\n# Check status\nsudo systemctl status elasticsearch\n\n# View logs\nsudo journalctl -u elasticsearch -f\n```\n\n### OpenRC (Alpine Linux)\n\n```bash\n# Elasticsearch runs in Docker container on Alpine\ndocker start elasticsearch\ndocker stop elasticsearch\ndocker restart elasticsearch\n\n# Check status\ndocker ps | grep elasticsearch\n\n# View logs\ndocker logs -f elasticsearch\n```\n\n### rc.d (FreeBSD)\n\n```bash\n# Enable in /etc/rc.conf\necho 'elasticsearch_enable=\"YES\"' >> /etc/rc.conf\n\n# Start Elasticsearch\nservice elasticsearch start\n\n# Stop Elasticsearch\nservice elasticsearch stop\n\n# Restart Elasticsearch\nservice elasticsearch restart\n\n# Check status\nservice elasticsearch status\n```\n\n### launchd (macOS)\n\n```bash\n# Using Homebrew services\nbrew services start elastic/tap/elasticsearch-full\nbrew services stop elastic/tap/elasticsearch-full\nbrew services restart elastic/tap/elasticsearch-full\n\n# Check status\nbrew services list | grep elasticsearch\n\n# Manual control\nelasticsearch\n```\n\n### Windows Service Manager\n\n```powershell\n# Start Elasticsearch service\nnet start Elasticsearch\n\n# Stop Elasticsearch service\nnet stop Elasticsearch\n\n# Using PowerShell\nStart-Service Elasticsearch\nStop-Service Elasticsearch\nRestart-Service Elasticsearch\n\n# Check status\nGet-Service Elasticsearch\n\n# View logs\nGet-EventLog -LogName Application -Source Elasticsearch\n```\n\n## Advanced Configuration\n\n### Cluster Configuration\n\n```yaml\n# Multi-node cluster configuration\ncluster.name: production-cluster\nnode.name: node-1\nnode.roles: [master, data, ingest]\n\nnetwork.host: 0.0.0.0\nhttp.port: 9200\ntransport.port: 9300\n\ndiscovery.seed_hosts: [\"node1.example.com\", \"node2.example.com\", \"node3.example.com\"]\ncluster.initial_master_nodes: [\"node-1\", \"node-2\", \"node-3\"]\n\n# Node-specific roles\n# Master-eligible node\nnode.roles: [master]\n\n# Data node\nnode.roles: [data]\n\n# Ingest node\nnode.roles: [ingest]\n\n# Coordinating only node\nnode.roles: []\n```\n\n### Memory and Performance Configuration\n\n```yaml\n# JVM heap settings (in elasticsearch.yml or jvm.options)\n# Set via environment variables:\nES_JAVA_OPTS: \"-Xms4g -Xmx4g\"\n\n# Thread pool settings\nthread_pool:\n  write:\n    size: 8\n    queue_size: 200\n  search:\n    size: 13\n    queue_size: 1000\n\n# Index settings\nindices.memory.index_buffer_size: 20%\nindices.breaker.total.use_real_memory: true\n```\n\n### Advanced Security Settings\n\n```yaml\n# X-Pack Security configuration\nxpack.security.enabled: true\nxpack.security.enrollment.enabled: true\n\n# SSL/TLS configuration\nxpack.security.http.ssl.enabled: true\nxpack.security.http.ssl.keystore.path: certs/http.p12\nxpack.security.transport.ssl.enabled: true\nxpack.security.transport.ssl.verification_mode: certificate\nxpack.security.transport.ssl.keystore.path: certs/transport.p12\nxpack.security.transport.ssl.truststore.path: certs/transport.p12\n\n# Authentication realms\nxpack.security.authc.realms:\n  native:\n    native1:\n      order: 0\n```\n\n## Reverse Proxy Setup\n\n### nginx Configuration\n\n```nginx\n# /etc/nginx/sites-available/elasticsearch\nupstream elasticsearch_backend {\n    server 127.0.0.1:9200 max_fails=3 fail_timeout=30s;\n    server 127.0.0.1:9201 max_fails=3 fail_timeout=30s backup;\n}\n\nserver {\n    listen 80;\n    server_name elasticsearch.example.com;\n    return 301 https://$server_name$request_uri;\n}\n\nserver {\n    listen 443 ssl http2;\n    server_name elasticsearch.example.com;\n\n    ssl_certificate /etc/letsencrypt/live/elasticsearch.example.com/fullchain.pem;\n    ssl_certificate_key /etc/letsencrypt/live/elasticsearch.example.com/privkey.pem;\n\n    # Security headers\n    add_header Strict-Transport-Security \"max-age=63072000\" always;\n\n    location / {\n        proxy_pass http://elasticsearch_backend;\n        proxy_http_version 1.1;\n        proxy_set_header Host $http_host;\n        proxy_set_header X-Real-IP $remote_addr;\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n        proxy_set_header X-Forwarded-Proto $scheme;\n        proxy_connect_timeout 60s;\n        proxy_send_timeout 60s;\n        proxy_read_timeout 60s;\n    }\n}\n```\n\n### Apache Configuration\n\n```apache\n# /etc/apache2/sites-available/elasticsearch.conf\n<VirtualHost *:443>\n    ServerName elasticsearch.example.com\n    \n    SSLEngine on\n    SSLCertificateFile /etc/letsencrypt/live/elasticsearch.example.com/fullchain.pem\n    SSLCertificateKeyFile /etc/letsencrypt/live/elasticsearch.example.com/privkey.pem\n    \n    ProxyPreserveHost On\n    ProxyPass / http://localhost:9200/\n    ProxyPassReverse / http://localhost:9200/\n    \n    Header always set Strict-Transport-Security \"max-age=63072000\"\n</VirtualHost>\n```\n\n### HAProxy Configuration\n\n```haproxy\n# /etc/haproxy/haproxy.cfg\nfrontend elasticsearch_frontend\n    bind *:9200 ssl crt /etc/haproxy/certs/elasticsearch.pem\n    mode http\n    option httplog\n    default_backend elasticsearch_backend\n\nbackend elasticsearch_backend\n    mode http\n    balance roundrobin\n    option httpchk GET /_cluster/health\n    server elasticsearch1 127.0.0.1:9200 check\n    server elasticsearch2 127.0.0.1:9201 check backup\n```\n\n## Security Configuration\n\n### SSL/TLS Setup\n\n```bash\n# Generate certificates using Elasticsearch's certificate tool\ncd /usr/share/elasticsearch\nsudo bin/elasticsearch-certutil ca --pem --out /tmp/ca.zip\nsudo unzip /tmp/ca.zip -d /tmp/ca\nsudo bin/elasticsearch-certutil cert --ca-cert /tmp/ca/ca.crt --ca-key /tmp/ca/ca.key --pem --out /tmp/certs.zip\nsudo unzip /tmp/certs.zip -d /tmp/certs\n\n# Create certificates directory\nsudo mkdir -p /etc/elasticsearch/certs\nsudo cp /tmp/ca/ca.crt /etc/elasticsearch/certs/\nsudo cp /tmp/certs/instance/instance.crt /etc/elasticsearch/certs/\nsudo cp /tmp/certs/instance/instance.key /etc/elasticsearch/certs/\n\n# Create keystore\nsudo bin/elasticsearch-keystore create\nsudo bin/elasticsearch-keystore add xpack.security.http.ssl.keystore.secure_password\nsudo bin/elasticsearch-keystore add xpack.security.transport.ssl.keystore.secure_password\n\n# Set permissions\nsudo chown -R elasticsearch:elasticsearch /etc/elasticsearch/certs\nsudo chmod 600 /etc/elasticsearch/certs/*\n```\n\n### User Management and Authentication\n\n```bash\n# Set passwords for built-in users (run after enabling security)\nsudo /usr/share/elasticsearch/bin/elasticsearch-setup-passwords auto\n\n# Create custom users\ncurl -X POST \"localhost:9200/_security/user/appuser\" -H 'Content-Type: application/json' -u elastic:password -d'\n{\n  \"password\" : \"SecurePassword123!\",\n  \"roles\" : [ \"kibana_admin\", \"monitoring_user\" ],\n  \"full_name\" : \"Application User\",\n  \"email\" : \"appuser@example.com\"\n}'\n\n# Create custom roles\ncurl -X POST \"localhost:9200/_security/role/log_reader\" -H 'Content-Type: application/json' -u elastic:password -d'\n{\n  \"cluster\": [\"monitor\"],\n  \"indices\": [\n    {\n      \"names\": [\"logs-*\"],\n      \"privileges\": [\"read\", \"view_index_metadata\"]\n    }\n  ]\n}'\n```\n\n### Firewall Rules\n\n```bash\n# UFW (Ubuntu/Debian)\nsudo ufw allow from 192.168.1.0/24 to any port 9200\nsudo ufw allow from 192.168.1.0/24 to any port 9300\nsudo ufw reload\n\n# firewalld (RHEL/CentOS/openSUSE)\nsudo firewall-cmd --permanent --new-zone=elasticsearch\nsudo firewall-cmd --permanent --zone=elasticsearch --add-source=192.168.1.0/24\nsudo firewall-cmd --permanent --zone=elasticsearch --add-port=9200/tcp\nsudo firewall-cmd --permanent --zone=elasticsearch --add-port=9300/tcp\nsudo firewall-cmd --reload\n\n# iptables\nsudo iptables -A INPUT -s 192.168.1.0/24 -p tcp --dport 9200 -j ACCEPT\nsudo iptables -A INPUT -s 192.168.1.0/24 -p tcp --dport 9300 -j ACCEPT\nsudo iptables-save > /etc/iptables/rules.v4\n\n# pf (FreeBSD)\n# Add to /etc/pf.conf\npass in on $ext_if proto tcp from 192.168.1.0/24 to any port { 9200, 9300 }\n\n# Windows Firewall\nNew-NetFirewallRule -DisplayName \"Elasticsearch HTTP\" -Direction Inbound -Protocol TCP -LocalPort 9200 -RemoteAddress 192.168.1.0/24 -Action Allow\nNew-NetFirewallRule -DisplayName \"Elasticsearch Transport\" -Direction Inbound -Protocol TCP -LocalPort 9300 -RemoteAddress 192.168.1.0/24 -Action Allow\n```\n\n## Database Setup\n\n### Index Templates and Mappings\n\n```bash\n# Create index template\ncurl -X PUT \"localhost:9200/_index_template/logs_template\" -H 'Content-Type: application/json' -d'\n{\n  \"index_patterns\": [\"logs-*\"],\n  \"template\": {\n    \"settings\": {\n      \"number_of_shards\": 1,\n      \"number_of_replicas\": 1,\n      \"index.refresh_interval\": \"30s\"\n    },\n    \"mappings\": {\n      \"properties\": {\n        \"timestamp\": {\n          \"type\": \"date\"\n        },\n        \"level\": {\n          \"type\": \"keyword\"\n        },\n        \"message\": {\n          \"type\": \"text\",\n          \"analyzer\": \"standard\"\n        },\n        \"host\": {\n          \"type\": \"keyword\"\n        }\n      }\n    }\n  }\n}'\n\n# Create index with custom settings\ncurl -X PUT \"localhost:9200/my_index\" -H 'Content-Type: application/json' -d'\n{\n  \"settings\": {\n    \"number_of_shards\": 3,\n    \"number_of_replicas\": 2,\n    \"analysis\": {\n      \"analyzer\": {\n        \"custom_analyzer\": {\n          \"type\": \"custom\",\n          \"tokenizer\": \"standard\",\n          \"filter\": [\"lowercase\", \"asciifolding\"]\n        }\n      }\n    }\n  },\n  \"mappings\": {\n    \"properties\": {\n      \"title\": {\n        \"type\": \"text\",\n        \"analyzer\": \"custom_analyzer\"\n      },\n      \"content\": {\n        \"type\": \"text\"\n      },\n      \"tags\": {\n        \"type\": \"keyword\"\n      },\n      \"created_at\": {\n        \"type\": \"date\"\n      }\n    }\n  }\n}'\n```\n\n### Index Lifecycle Management\n\n```bash\n# Create ILM policy\ncurl -X PUT \"localhost:9200/_ilm/policy/logs_policy\" -H 'Content-Type: application/json' -d'\n{\n  \"policy\": {\n    \"phases\": {\n      \"hot\": {\n        \"actions\": {\n          \"rollover\": {\n            \"max_size\": \"10gb\",\n            \"max_age\": \"7d\"\n          }\n        }\n      },\n      \"warm\": {\n        \"min_age\": \"7d\",\n        \"actions\": {\n          \"allocate\": {\n            \"number_of_replicas\": 0\n          }\n        }\n      },\n      \"cold\": {\n        \"min_age\": \"30d\",\n        \"actions\": {\n          \"allocate\": {\n            \"number_of_replicas\": 0\n          }\n        }\n      },\n      \"delete\": {\n        \"min_age\": \"90d\"\n      }\n    }\n  }\n}'\n```\n\n## Performance Optimization\n\n### System Tuning\n\n```bash\n# Elasticsearch-specific system optimizations\nsudo tee -a /etc/sysctl.conf <<EOF\n# Elasticsearch optimizations\nvm.max_map_count = 262144\nvm.swappiness = 1\nfs.file-max = 65535\nnet.core.somaxconn = 32768\nnet.ipv4.tcp_max_syn_backlog = 8192\nEOF\n\nsudo sysctl -p\n\n# Disable swap\nsudo swapoff -a\necho 'vm.swappiness=1' | sudo tee -a /etc/sysctl.conf\n\n# Set file descriptor limits\nsudo tee -a /etc/security/limits.conf <<EOF\nelasticsearch soft nofile 65535\nelasticsearch hard nofile 65535\nelasticsearch soft memlock unlimited\nelasticsearch hard memlock unlimited\nEOF\n```\n\n### JVM and Memory Tuning\n\n```bash\n# JVM options (/etc/elasticsearch/jvm.options)\n# Set heap size (50% of available RAM, max 32GB)\n-Xms8g\n-Xmx8g\n\n# GC settings\n-XX:+UseG1GC\n-XX:G1HeapRegionSize=16m\n-XX:+UnlockExperimentalVMOptions\n-XX:+UnlockDiagnosticVMOptions\n-XX:+G1PrintRegionRememberedSetInfo\n\n# Memory lock\n-XX:+AlwaysPreTouch\n```\n\n### Index and Query Optimization\n\n```bash\n# Index optimization settings\ncurl -X PUT \"localhost:9200/my_index/_settings\" -H 'Content-Type: application/json' -d'\n{\n  \"index\": {\n    \"refresh_interval\": \"30s\",\n    \"number_of_replicas\": 1,\n    \"routing.allocation.total_shards_per_node\": 3,\n    \"translog.flush_threshold_size\": \"1gb\",\n    \"translog.sync_interval\": \"30s\"\n  }\n}'\n\n# Force merge indices\ncurl -X POST \"localhost:9200/my_index/_forcemerge?max_num_segments=1\"\n\n# Clear cache\ncurl -X POST \"localhost:9200/_cache/clear\"\n```\n\n## Monitoring\n\n### Built-in Monitoring\n\n```bash\n# Cluster health\ncurl -X GET \"localhost:9200/_cluster/health?pretty\"\n\n# Node statistics\ncurl -X GET \"localhost:9200/_nodes/stats?pretty\"\n\n# Index statistics\ncurl -X GET \"localhost:9200/_stats?pretty\"\n\n# Hot threads\ncurl -X GET \"localhost:9200/_nodes/hot_threads\"\n\n# Task management\ncurl -X GET \"localhost:9200/_tasks?detailed=true&actions=*search\"\n\n# Pending cluster tasks\ncurl -X GET \"localhost:9200/_cluster/pending_tasks\"\n```\n\n### External Monitoring Setup\n\n```bash\n# Install Metricbeat for monitoring\ncurl -L -O https://artifacts.elastic.co/downloads/beats/metricbeat/metricbeat-8.11.3-linux-x86_64.tar.gz\ntar xzvf metricbeat-8.11.3-linux-x86_64.tar.gz\nsudo mv metricbeat-8.11.3-linux-x86_64 /usr/local/metricbeat\n\n# Configure Metricbeat for Elasticsearch monitoring\nsudo tee /usr/local/metricbeat/metricbeat.yml <<EOF\nmetricbeat.modules:\n- module: elasticsearch\n  metricsets:\n    - node\n    - node_stats\n    - cluster_stats\n  period: 10s\n  hosts: [\"localhost:9200\"]\n\noutput.elasticsearch:\n  hosts: [\"localhost:9200\"]\n\nsetup.kibana:\n  host: \"localhost:5601\"\nEOF\n\n# Create systemd service for Metricbeat\nsudo tee /etc/systemd/system/metricbeat.service <<EOF\n[Unit]\nDescription=Metricbeat\nAfter=network.target\n\n[Service]\nType=simple\nUser=elasticsearch\nWorkingDirectory=/usr/local/metricbeat\nExecStart=/usr/local/metricbeat/metricbeat -c /usr/local/metricbeat/metricbeat.yml\nRestart=always\n\n[Install]\nWantedBy=multi-user.target\nEOF\n\nsudo systemctl enable --now metricbeat\n```\n\n### Health Check Scripts\n\n```bash\n#!/bin/bash\n# elasticsearch-health-check.sh\n\n# Check Elasticsearch service\nif ! systemctl is-active elasticsearch >/dev/null 2>&1; then\n    echo \"CRITICAL: Elasticsearch service is not running\"\n    exit 2\nfi\n\n# Check HTTP API\nif ! curl -s http://localhost:9200/ >/dev/null; then\n    echo \"CRITICAL: Cannot connect to Elasticsearch HTTP API\"\n    exit 2\nfi\n\n# Check cluster health\nCLUSTER_STATUS=$(curl -s http://localhost:9200/_cluster/health | jq -r '.status')\ncase $CLUSTER_STATUS in\n    \"green\")\n        echo \"OK: Cluster health is green\"\n        exit 0\n        ;;\n    \"yellow\")\n        echo \"WARNING: Cluster health is yellow\"\n        exit 1\n        ;;\n    \"red\")\n        echo \"CRITICAL: Cluster health is red\"\n        exit 2\n        ;;\n    *)\n        echo \"UNKNOWN: Cannot determine cluster health\"\n        exit 3\n        ;;\nesac\n```\n\n## Backup and Restore\n\n### Snapshot Repository Setup\n\n```bash\n# Create snapshot repository\ncurl -X PUT \"localhost:9200/_snapshot/backup_repo\" -H 'Content-Type: application/json' -d'\n{\n  \"type\": \"fs\",\n  \"settings\": {\n    \"location\": \"/backup/elasticsearch\",\n    \"compress\": true,\n    \"max_snapshot_bytes_per_sec\": \"50mb\",\n    \"max_restore_bytes_per_sec\": \"50mb\"\n  }\n}'\n\n# Create backup directory\nsudo mkdir -p /backup/elasticsearch\nsudo chown elasticsearch:elasticsearch /backup/elasticsearch\n\n# Add repository path to elasticsearch.yml\necho 'path.repo: [\"/backup/elasticsearch\"]' | sudo tee -a /etc/elasticsearch/elasticsearch.yml\nsudo systemctl restart elasticsearch\n```\n\n### Backup Procedures\n\n```bash\n#!/bin/bash\n# elasticsearch-backup.sh\n\nSNAPSHOT_NAME=\"snapshot-$(date +%Y%m%d_%H%M%S)\"\n\n# Create snapshot\ncurl -X PUT \"localhost:9200/_snapshot/backup_repo/$SNAPSHOT_NAME?wait_for_completion=true\" -H 'Content-Type: application/json' -d'\n{\n  \"indices\": \"*\",\n  \"ignore_unavailable\": true,\n  \"include_global_state\": true,\n  \"metadata\": {\n    \"taken_by\": \"elasticsearch-backup-script\",\n    \"taken_because\": \"scheduled backup\"\n  }\n}'\n\n# Verify snapshot\nSNAPSHOT_STATUS=$(curl -s \"localhost:9200/_snapshot/backup_repo/$SNAPSHOT_NAME\" | jq -r '.snapshots[0].state')\n\nif [ \"$SNAPSHOT_STATUS\" = \"SUCCESS\" ]; then\n    echo \"Backup completed successfully: $SNAPSHOT_NAME\"\nelse\n    echo \"Backup failed: $SNAPSHOT_NAME\"\n    exit 1\nfi\n\n# Clean up old snapshots (keep last 7 days)\ncurl -s \"localhost:9200/_snapshot/backup_repo/_all\" | jq -r '.snapshots[] | select(.end_time_in_millis < '$(date -d '7 days ago' +%s000)') | .snapshot' | while read snapshot; do\n    curl -X DELETE \"localhost:9200/_snapshot/backup_repo/$snapshot\"\n    echo \"Deleted old snapshot: $snapshot\"\ndone\n\necho \"Elasticsearch backup completed: $SNAPSHOT_NAME\"\n```\n\n### Restore Procedures\n\n```bash\n#!/bin/bash\n# elasticsearch-restore.sh\n\nSNAPSHOT_NAME=\"$1\"\nif [ -z \"$SNAPSHOT_NAME\" ]; then\n    echo \"Usage: $0 <snapshot-name>\"\n    echo \"Available snapshots:\"\n    curl -s \"localhost:9200/_snapshot/backup_repo/_all\" | jq -r '.snapshots[].snapshot'\n    exit 1\nfi\n\n# Close indices before restore\ncurl -X POST \"localhost:9200/_all/_close\"\n\n# Restore snapshot\ncurl -X POST \"localhost:9200/_snapshot/backup_repo/$SNAPSHOT_NAME/_restore?wait_for_completion=true\" -H 'Content-Type: application/json' -d'\n{\n  \"indices\": \"*\",\n  \"ignore_unavailable\": true,\n  \"include_global_state\": true\n}'\n\necho \"Restore completed from snapshot: $SNAPSHOT_NAME\"\n```\n\n### Automated Backup\n\n```bash\n# Create cron job for daily backups\necho \"0 2 * * * /usr/local/bin/elasticsearch-backup.sh\" | sudo crontab -\n```\n\n## Troubleshooting\n\n### Common Issues\n\n1. **Elasticsearch won't start**:\n```bash\n# Check logs\nsudo journalctl -u elasticsearch -f\nsudo tail -f /var/log/elasticsearch/elasticsearch.log\n\n# Check Java version\njava -version\n\n# Check memory settings\ngrep -E \"Xms|Xmx\" /etc/elasticsearch/jvm.options\n\n# Check disk space\ndf -h /var/lib/elasticsearch\n```\n\n2. **Out of memory errors**:\n```bash\n# Check heap usage\ncurl -X GET \"localhost:9200/_nodes/stats/jvm?pretty\"\n\n# Check field data cache\ncurl -X GET \"localhost:9200/_nodes/stats/indices/fielddata?pretty\"\n\n# Clear field data cache\ncurl -X POST \"localhost:9200/_cache/clear?fielddata=true\"\n```\n\n3. **Slow queries**:\n```bash\n# Enable slow log\ncurl -X PUT \"localhost:9200/_all/_settings\" -H 'Content-Type: application/json' -d'\n{\n  \"index.search.slowlog.threshold.query.warn\": \"10s\",\n  \"index.search.slowlog.threshold.query.info\": \"5s\",\n  \"index.search.slowlog.threshold.query.debug\": \"2s\",\n  \"index.search.slowlog.threshold.query.trace\": \"500ms\"\n}'\n\n# Check slow queries\nsudo tail -f /var/log/elasticsearch/*_index_search_slowlog.log\n```\n\n### Debug Mode\n\n```bash\n# Enable debug logging\ncurl -X PUT \"localhost:9200/_cluster/settings\" -H 'Content-Type: application/json' -d'\n{\n  \"transient\": {\n    \"logger.org.elasticsearch\": \"DEBUG\"\n  }\n}'\n\n# Check cluster state\ncurl -X GET \"localhost:9200/_cluster/state?pretty\"\n\n# Explain API for query analysis\ncurl -X GET \"localhost:9200/my_index/_search\" -H 'Content-Type: application/json' -d'\n{\n  \"explain\": true,\n  \"query\": {\n    \"match\": {\n      \"title\": \"search term\"\n    }\n  }\n}'\n```\n\n## Maintenance\n\n### Update Procedures\n\n```bash\n# RHEL/CentOS/Rocky/AlmaLinux\nsudo yum check-update elasticsearch\nsudo yum update elasticsearch\n\n# Debian/Ubuntu\nsudo apt update\nsudo apt upgrade elasticsearch\n\n# Arch Linux\nyay -Syu elasticsearch\n\n# macOS\nbrew upgrade elastic/tap/elasticsearch-full\n\n# Docker (Alpine/openSUSE)\ndocker pull elasticsearch:8.11.3\ndocker stop elasticsearch\ndocker rm elasticsearch\n# Re-run docker run command with new image\n\n# Always backup before updates\n./elasticsearch-backup.sh\n\n# Restart after updates\nsudo systemctl restart elasticsearch\n```\n\n### Maintenance Tasks\n\n```bash\n# Weekly maintenance script\n#!/bin/bash\n# elasticsearch-maintenance.sh\n\n# Force merge old indices\ncurl -X POST \"localhost:9200/logs-$(date -d '1 week ago' +%Y.%m.%d)/_forcemerge?max_num_segments=1\"\n\n# Clear caches\ncurl -X POST \"localhost:9200/_cache/clear\"\n\n# Optimize indices\ncurl -X POST \"localhost:9200/_optimize\"\n\n# Update index settings for better performance\ncurl -X PUT \"localhost:9200/_all/_settings\" -H 'Content-Type: application/json' -d'\n{\n  \"index\": {\n    \"refresh_interval\": \"30s\"\n  }\n}'\n\necho \"Elasticsearch maintenance completed\"\n```\n\n### Health Monitoring\n\n```bash\n# Create monitoring cron job\necho \"*/5 * * * * /usr/local/bin/elasticsearch-health-check.sh\" | sudo crontab -\n\n# Log rotation\nsudo tee /etc/logrotate.d/elasticsearch <<EOF\n/var/log/elasticsearch/*.log {\n    daily\n    rotate 7\n    compress\n    delaycompress\n    missingok\n    notifempty\n    create 640 elasticsearch elasticsearch\n    postrotate\n        systemctl restart elasticsearch > /dev/null 2>&1 || true\n    endscript\n}\nEOF\n```\n\n## Integration Examples\n\n### Python Integration\n\n```python\n# Using elasticsearch-py\nfrom elasticsearch import Elasticsearch\n\n# Connect to Elasticsearch\nes = Elasticsearch(\n    hosts=[{'host': 'localhost', 'port': 9200}],\n    http_auth=('elastic', 'password'),\n    use_ssl=True,\n    verify_certs=True,\n    ca_certs='/etc/elasticsearch/certs/ca.crt',\n)\n\n# Index a document\ndoc = {\n    'title': 'Sample Document',\n    'content': 'This is a sample document for testing',\n    'timestamp': '2024-01-15T10:30:00'\n}\nes.index(index='my_index', id=1, body=doc)\n\n# Search documents\nresponse = es.search(\n    index='my_index',\n    body={\n        'query': {\n            'match': {\n                'content': 'sample'\n            }\n        }\n    }\n)\nprint(response['hits'])\n```\n\n### Node.js Integration\n\n```javascript\n// Using @elastic/elasticsearch\nconst { Client } = require('@elastic/elasticsearch');\n\nconst client = new Client({\n  node: 'https://localhost:9200',\n  auth: {\n    username: 'elastic',\n    password: 'password'\n  },\n  tls: {\n    ca: fs.readFileSync('/etc/elasticsearch/certs/ca.crt'),\n    rejectUnauthorized: true\n  }\n});\n\n// Index a document\nasync function indexDocument() {\n  const response = await client.index({\n    index: 'my_index',\n    id: 1,\n    body: {\n      title: 'Sample Document',\n      content: 'This is a sample document for testing',\n      timestamp: new Date()\n    }\n  });\n  console.log(response);\n}\n\n// Search documents\nasync function searchDocuments() {\n  const response = await client.search({\n    index: 'my_index',\n    body: {\n      query: {\n        match: {\n          content: 'sample'\n        }\n      }\n    }\n  });\n  console.log(response.body.hits);\n}\n```\n\n### Java Integration\n\n```java\n// Using Elasticsearch Java client\nimport org.elasticsearch.client.RestClient;\nimport org.elasticsearch.client.RestHighLevelClient;\nimport org.elasticsearch.action.index.IndexRequest;\nimport org.elasticsearch.action.search.SearchRequest;\nimport org.elasticsearch.common.xcontent.XContentType;\n\nRestHighLevelClient client = new RestHighLevelClient(\n    RestClient.builder(new HttpHost(\"localhost\", 9200, \"https\"))\n        .setHttpClientConfigCallback(httpClientBuilder -> \n            httpClientBuilder.setDefaultCredentialsProvider(credentialsProvider)\n                .setSSLContext(sslContext))\n);\n\n// Index a document\nIndexRequest indexRequest = new IndexRequest(\"my_index\")\n    .id(\"1\")\n    .source(\"{\\n\" +\n        \"\\\"title\\\":\\\"Sample Document\\\",\\n\" +\n        \"\\\"content\\\":\\\"This is a sample document for testing\\\",\\n\" +\n        \"\\\"timestamp\\\":\\\"2024-01-15T10:30:00\\\"\\n\" +\n        \"}\", XContentType.JSON);\n\nclient.index(indexRequest, RequestOptions.DEFAULT);\n```\n\n### Logstash Integration\n\n```ruby\n# logstash.conf\ninput {\n  beats {\n    port => 5044\n  }\n}\n\nfilter {\n  if [fields][log_type] == \"apache\" {\n    grok {\n      match => { \"message\" => \"%{COMBINEDAPACHELOG}\" }\n    }\n    date {\n      match => [ \"timestamp\", \"dd/MMM/yyyy:HH:mm:ss Z\" ]\n    }\n  }\n}\n\noutput {\n  elasticsearch {\n    hosts => [\"localhost:9200\"]\n    user => \"logstash_user\"\n    password => \"logstash_password\"\n    index => \"logs-%{+YYYY.MM.dd}\"\n  }\n}\n```\n\n## Additional Resources\n\n- [Official Elasticsearch Documentation](https://www.elastic.co/guide/en/elasticsearch/reference/current/index.html)\n- [Elasticsearch Security Guide](https://www.elastic.co/guide/en/elasticsearch/reference/current/security-minimal-setup.html)\n- [Performance Tuning Guide](https://www.elastic.co/guide/en/elasticsearch/reference/current/tune-for-search-speed.html)\n- [Index Lifecycle Management](https://www.elastic.co/guide/en/elasticsearch/reference/current/index-lifecycle-management.html)\n- [Elasticsearch Cluster Setup](https://www.elastic.co/guide/en/elasticsearch/reference/current/modules-discovery-bootstrap-cluster.html)\n- [Elastic Stack Community](https://discuss.elastic.co/)\n- [Elasticsearch Blog](https://www.elastic.co/blog/category/elasticsearch)\n- [Best Practices Guide](https://www.elastic.co/guide/en/elasticsearch/guide/current/index.html)\n\n---\n\n**Note:** This guide is part of the [HowToMgr](https://howtomgr.github.io) collection. Always refer to official documentation for the most up-to-date information.","readmeHtml":"<h1 id=\"elasticsearch-installation-guide\" class=\"mobile-header\">Elasticsearch Installation Guide</h1>\n<p class=\"mobile-paragraph\">Elasticsearch is a free and open-source distributed, RESTful search and analytics engine. Originally developed by Shay Banon and now maintained by Elastic N.V., Elasticsearch is built on Apache Lucene and designed for horizontal scalability, reliability, and real-time search. It serves as a FOSS alternative to commercial search solutions like Amazon CloudSearch, Azure Cognitive Search, or Splunk Enterprise, offering enterprise-grade features including full-text search, aggregations, and analytics without licensing costs, with features like distributed architecture, RESTful API, and multi-tenancy.</p>\n<h2 id=\"prerequisites\" class=\"mobile-header\">Prerequisites</h2>\n<li class=\"mobile-list-item\"><strong>Hardware Requirements</strong>:</li>\n<li class=\"mobile-list-item\">CPU: 2 cores minimum (4+ cores recommended for production)</li>\n<li class=\"mobile-list-item\">RAM: 4GB minimum (16GB+ recommended for production)</li>\n<li class=\"mobile-list-item\">Storage: 20GB minimum (SSD strongly recommended for performance)</li>\n<li class=\"mobile-list-item\">Network: Stable connectivity for cluster communication</li>\n<li class=\"mobile-list-item\"><strong>Operating System</strong>: </li>\n<li class=\"mobile-list-item\">Linux: Any modern distribution with kernel 3.2+</li>\n<li class=\"mobile-list-item\">macOS: 10.13+ (High Sierra or newer)</li>\n<li class=\"mobile-list-item\">Windows: Windows Server 2016+ or Windows 10</li>\n<li class=\"mobile-list-item\">FreeBSD: 11.0+</li>\n<li class=\"mobile-list-item\"><strong>Network Requirements</strong>:</li>\n<li class=\"mobile-list-item\">Port 9200 (HTTP/REST API)</li>\n<li class=\"mobile-list-item\">Port 9300 (Node communication)</li>\n<li class=\"mobile-list-item\">Additional ports for cluster discovery</li>\n<li class=\"mobile-list-item\"><strong>Dependencies</strong>:</li>\n<li class=\"mobile-list-item\">Java 11 or Java 17 (OpenJDK recommended)</li>\n<li class=\"mobile-list-item\">systemd or compatible init system (Linux)</li>\n<li class=\"mobile-list-item\">Root or administrative access for installation</li>\n<li class=\"mobile-list-item\"><strong>System Access</strong>: root or sudo privileges required</li>\n<h2 id=\"installation\" class=\"mobile-header\">Installation</h2>\n<h3 id=\"rhelcentosrocky-linuxalmalinux\" class=\"mobile-header\">RHEL/CentOS/Rocky Linux/AlmaLinux</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Install Java (OpenJDK)\nsudo yum install -y java-11-openjdk java-11-openjdk-devel\n\n# Import Elasticsearch GPG key\nsudo rpm --import https://artifacts.elastic.co/GPG-KEY-elasticsearch\n\n# Create Elasticsearch repository\nsudo tee /etc/yum.repos.d/elasticsearch.repo &lt;&lt;EOF\n[elasticsearch]\nname=Elasticsearch repository for 8.x packages\nbaseurl=https://artifacts.elastic.co/packages/8.x/yum\ngpgcheck=1\ngpgkey=https://artifacts.elastic.co/GPG-KEY-elasticsearch\nenabled=0\nautorefresh=1\ntype=rpm-md\nEOF\n\n# Install Elasticsearch\nsudo yum install -y --enablerepo=elasticsearch elasticsearch\n\n# Enable and start service\nsudo systemctl enable --now elasticsearch\n\n# Configure firewall\nsudo firewall-cmd --permanent --add-port=9200/tcp\nsudo firewall-cmd --permanent --add-port=9300/tcp\nsudo firewall-cmd --reload\n\n# Verify installation\ncurl -X GET &quot;localhost:9200/&quot;</code></pre>\n      </div>\n    </div>\n<h3 id=\"debianubuntu\" class=\"mobile-header\">Debian/Ubuntu</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Update package index\nsudo apt update\n\n# Install Java (OpenJDK)\nsudo apt install -y openjdk-11-jdk\n\n# Install prerequisite packages\nsudo apt install -y wget gnupg apt-transport-https\n\n# Import Elasticsearch GPG key\nwget -qO - https://artifacts.elastic.co/GPG-KEY-elasticsearch | sudo gpg --dearmor -o /etc/apt/trusted.gpg.d/elasticsearch.gpg\n\n# Add Elasticsearch repository\necho &quot;deb https://artifacts.elastic.co/packages/8.x/apt stable main&quot; | sudo tee /etc/apt/sources.list.d/elastic-8.x.list\n\n# Update package index\nsudo apt update\n\n# Install Elasticsearch\nsudo apt install -y elasticsearch\n\n# Enable and start service\nsudo systemctl enable --now elasticsearch\n\n# Configure firewall\nsudo ufw allow 9200\nsudo ufw allow 9300</code></pre>\n      </div>\n    </div>\n<h3 id=\"arch-linux\" class=\"mobile-header\">Arch Linux</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Install Java\nsudo pacman -S jdk11-openjdk\n\n# Elasticsearch is available in AUR\nyay -S elasticsearch\n\n# Alternative: Install from AUR with makepkg\ngit clone https://aur.archlinux.org/elasticsearch.git\ncd elasticsearch\nmakepkg -si\n\n# Create elasticsearch user and group\nsudo useradd -r -s /sbin/nologin elasticsearch\n\n# Create necessary directories\nsudo mkdir -p /var/lib/elasticsearch /var/log/elasticsearch\nsudo chown elasticsearch:elasticsearch /var/lib/elasticsearch /var/log/elasticsearch\n\n# Enable and start service\nsudo systemctl enable --now elasticsearch\n\n# Configuration location: /etc/elasticsearch/</code></pre>\n      </div>\n    </div>\n<h3 id=\"alpine-linux\" class=\"mobile-header\">Alpine Linux</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Install Java\napk add --no-cache openjdk11\n\n# Elasticsearch is not officially packaged for Alpine\n# Use Docker for Elasticsearch on Alpine:\n\n# Install Docker\napk add --no-cache docker docker-compose\n\n# Enable and start Docker\nrc-update add docker default\nrc-service docker start\n\n# Run Elasticsearch container\ndocker run -d \\\n  --name elasticsearch \\\n  --restart unless-stopped \\\n  -p 9200:9200 -p 9300:9300 \\\n  -e &quot;discovery.type=single-node&quot; \\\n  -e &quot;xpack.security.enabled=false&quot; \\\n  -v /var/lib/elasticsearch:/usr/share/elasticsearch/data \\\n  elasticsearch:8.11.3\n\n# Verify installation\ncurl -X GET &quot;localhost:9200/&quot;</code></pre>\n      </div>\n    </div>\n<h3 id=\"opensusesles\" class=\"mobile-header\">openSUSE/SLES</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Install Java\nsudo zypper install -y java-11-openjdk java-11-openjdk-devel\n\n# Elasticsearch is not officially packaged for openSUSE/SLES\n# Use Docker or manual installation:\n\n# Method 1: Docker installation\nsudo zypper install -y docker docker-compose\nsudo systemctl enable --now docker\n\ndocker run -d \\\n  --name elasticsearch \\\n  --restart unless-stopped \\\n  -p 9200:9200 -p 9300:9300 \\\n  -e &quot;discovery.type=single-node&quot; \\\n  -e &quot;xpack.security.enabled=false&quot; \\\n  -v /var/lib/elasticsearch:/usr/share/elasticsearch/data \\\n  elasticsearch:8.11.3\n\n# Method 2: Manual installation from tarball\nwget https://artifacts.elastic.co/downloads/elasticsearch/elasticsearch-8.11.3-linux-x86_64.tar.gz\ntar -xzf elasticsearch-8.11.3-linux-x86_64.tar.gz\nsudo mv elasticsearch-8.11.3 /usr/local/elasticsearch\n\n# Create elasticsearch user and directories\nsudo useradd -r elasticsearch\nsudo mkdir -p /var/lib/elasticsearch /var/log/elasticsearch\nsudo chown elasticsearch:elasticsearch /var/lib/elasticsearch /var/log/elasticsearch</code></pre>\n      </div>\n    </div>\n<h3 id=\"macos\" class=\"mobile-header\">macOS</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Using Homebrew\nbrew tap elastic/tap\nbrew install elastic/tap/elasticsearch-full\n\n# Start Elasticsearch service\nbrew services start elastic/tap/elasticsearch-full\n\n# Or run manually\nelasticsearch\n\n# Configuration location: /usr/local/etc/elasticsearch/\n# Alternative: /opt/homebrew/etc/elasticsearch/ (Apple Silicon)</code></pre>\n      </div>\n    </div>\n<h3 id=\"freebsd\" class=\"mobile-header\">FreeBSD</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Install Java\npkg install openjdk11\n\n# Install Elasticsearch from ports\ncd /usr/ports/textproc/elasticsearch8\nmake install clean\n\n# Enable Elasticsearch\necho &#039;elasticsearch_enable=&quot;YES&quot;&#039; &gt;&gt; /etc/rc.conf\n\n# Start service\nservice elasticsearch start\n\n# Configuration location: /usr/local/etc/elasticsearch/</code></pre>\n      </div>\n    </div>\n<h3 id=\"windows\" class=\"mobile-header\">Windows</h3>\n<div class=\"mobile-code-block\" data-language=\"powershell\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">powershell</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-powershell\"># Method 1: Using Chocolatey\nchoco install elasticsearch\n\n# Method 2: Using Scoop\nscoop bucket add java\nscoop install openjdk11\nscoop bucket add extras\nscoop install elasticsearch\n\n# Method 3: Manual installation\n# Download from https://www.elastic.co/downloads/elasticsearch\n# Extract to C:\\elasticsearch\n\n# Install as Windows service\n&quot;C:\\elasticsearch\\bin\\elasticsearch-service.bat&quot; install\n\n# Start service\nnet start Elasticsearch\n\n# Configuration location: C:\\elasticsearch\\config\\elasticsearch.yml</code></pre>\n      </div>\n    </div>\n<h2 id=\"initial-configuration\" class=\"mobile-header\">Initial Configuration</h2>\n<h3 id=\"first-run-setup\" class=\"mobile-header\">First-Run Setup</h3>\n<p class=\"mobile-paragraph\">1. <strong>Create elasticsearch user</strong> (if not created by package):</p>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Linux systems\nsudo useradd -r -d /var/lib/elasticsearch -s /sbin/nologin -c &quot;Elasticsearch&quot; elasticsearch</code></pre>\n      </div>\n    </div>\n<p class=\"mobile-paragraph\">2. <strong>Default configuration locations</strong>:</p>\n<li class=\"mobile-list-item\">RHEL/CentOS/Rocky/AlmaLinux: <code class=\"mobile-inline-code\">/etc/elasticsearch/elasticsearch.yml</code></li>\n<li class=\"mobile-list-item\">Debian/Ubuntu: <code class=\"mobile-inline-code\">/etc/elasticsearch/elasticsearch.yml</code></li>\n<li class=\"mobile-list-item\">Arch Linux: <code class=\"mobile-inline-code\">/etc/elasticsearch/elasticsearch.yml</code></li>\n<li class=\"mobile-list-item\">Alpine Linux: Docker container configuration</li>\n<li class=\"mobile-list-item\">openSUSE/SLES: <code class=\"mobile-inline-code\">/etc/elasticsearch/elasticsearch.yml</code> (manual installation)</li>\n<li class=\"mobile-list-item\">macOS: <code class=\"mobile-inline-code\">/usr/local/etc/elasticsearch/elasticsearch.yml</code></li>\n<li class=\"mobile-list-item\">FreeBSD: <code class=\"mobile-inline-code\">/usr/local/etc/elasticsearch/elasticsearch.yml</code></li>\n<li class=\"mobile-list-item\">Windows: <code class=\"mobile-inline-code\">C:\\elasticsearch\\config\\elasticsearch.yml</code></li>\n<p class=\"mobile-paragraph\">3. <strong>Essential settings to change</strong>:</p>\n<div class=\"mobile-code-block\" data-language=\"yaml\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">yaml</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-yaml\"># /etc/elasticsearch/elasticsearch.yml\ncluster.name: my-application\nnode.name: node-1\n\npath.data: /var/lib/elasticsearch\npath.logs: /var/log/elasticsearch\n\nnetwork.host: 127.0.0.1\nhttp.port: 9200\n\ndiscovery.type: single-node\n\n# Security (disable for initial setup, enable for production)\nxpack.security.enabled: true\nxpack.security.enrollment.enabled: true\n\n# Memory settings\nbootstrap.memory_lock: true\n\n# Index settings\naction.auto_create_index: .monitoring*,.watches,.triggered_watches,.watcher-history*,.ml*</code></pre>\n      </div>\n    </div>\n<h3 id=\"testing-initial-setup\" class=\"mobile-header\">Testing Initial Setup</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Check if Elasticsearch is running\nsudo systemctl status elasticsearch\n\n# Test REST API\ncurl -X GET &quot;localhost:9200/&quot;\n\n# Check cluster health\ncurl -X GET &quot;localhost:9200/_cluster/health?pretty&quot;\n\n# Check nodes\ncurl -X GET &quot;localhost:9200/_cat/nodes?v&quot;\n\n# Test indexing and searching\ncurl -X PUT &quot;localhost:9200/test_index/_doc/1&quot; -H &#039;Content-Type: application/json&#039; -d &#039;{&quot;message&quot;: &quot;Hello Elasticsearch&quot;}&#039;\ncurl -X GET &quot;localhost:9200/test_index/_search?pretty&quot;</code></pre>\n      </div>\n    </div>\n<p class=\"mobile-paragraph\"><strong>WARNING:</strong> Enable X-Pack security for production deployments!</p>\n<h2 id=\"service-management\" class=\"mobile-header\">Service Management</h2>\n<h3 id=\"systemd-rhel-debian-ubuntu-arch-opensuse\" class=\"mobile-header\">systemd (RHEL, Debian, Ubuntu, Arch, openSUSE)</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Enable Elasticsearch to start on boot\nsudo systemctl enable elasticsearch\n\n# Start Elasticsearch\nsudo systemctl start elasticsearch\n\n# Stop Elasticsearch\nsudo systemctl stop elasticsearch\n\n# Restart Elasticsearch\nsudo systemctl restart elasticsearch\n\n# Reload configuration (not supported, requires restart)\nsudo systemctl restart elasticsearch\n\n# Check status\nsudo systemctl status elasticsearch\n\n# View logs\nsudo journalctl -u elasticsearch -f</code></pre>\n      </div>\n    </div>\n<h3 id=\"openrc-alpine-linux\" class=\"mobile-header\">OpenRC (Alpine Linux)</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Elasticsearch runs in Docker container on Alpine\ndocker start elasticsearch\ndocker stop elasticsearch\ndocker restart elasticsearch\n\n# Check status\ndocker ps | grep elasticsearch\n\n# View logs\ndocker logs -f elasticsearch</code></pre>\n      </div>\n    </div>\n<h3 id=\"rcd-freebsd\" class=\"mobile-header\">rc.d (FreeBSD)</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Enable in /etc/rc.conf\necho &#039;elasticsearch_enable=&quot;YES&quot;&#039; &gt;&gt; /etc/rc.conf\n\n# Start Elasticsearch\nservice elasticsearch start\n\n# Stop Elasticsearch\nservice elasticsearch stop\n\n# Restart Elasticsearch\nservice elasticsearch restart\n\n# Check status\nservice elasticsearch status</code></pre>\n      </div>\n    </div>\n<h3 id=\"launchd-macos\" class=\"mobile-header\">launchd (macOS)</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Using Homebrew services\nbrew services start elastic/tap/elasticsearch-full\nbrew services stop elastic/tap/elasticsearch-full\nbrew services restart elastic/tap/elasticsearch-full\n\n# Check status\nbrew services list | grep elasticsearch\n\n# Manual control\nelasticsearch</code></pre>\n      </div>\n    </div>\n<h3 id=\"windows-service-manager\" class=\"mobile-header\">Windows Service Manager</h3>\n<div class=\"mobile-code-block\" data-language=\"powershell\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">powershell</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-powershell\"># Start Elasticsearch service\nnet start Elasticsearch\n\n# Stop Elasticsearch service\nnet stop Elasticsearch\n\n# Using PowerShell\nStart-Service Elasticsearch\nStop-Service Elasticsearch\nRestart-Service Elasticsearch\n\n# Check status\nGet-Service Elasticsearch\n\n# View logs\nGet-EventLog -LogName Application -Source Elasticsearch</code></pre>\n      </div>\n    </div>\n<h2 id=\"advanced-configuration\" class=\"mobile-header\">Advanced Configuration</h2>\n<h3 id=\"cluster-configuration\" class=\"mobile-header\">Cluster Configuration</h3>\n<div class=\"mobile-code-block\" data-language=\"yaml\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">yaml</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-yaml\"># Multi-node cluster configuration\ncluster.name: production-cluster\nnode.name: node-1\nnode.roles: [master, data, ingest]\n\nnetwork.host: 0.0.0.0\nhttp.port: 9200\ntransport.port: 9300\n\ndiscovery.seed_hosts: [&quot;node1.example.com&quot;, &quot;node2.example.com&quot;, &quot;node3.example.com&quot;]\ncluster.initial_master_nodes: [&quot;node-1&quot;, &quot;node-2&quot;, &quot;node-3&quot;]\n\n# Node-specific roles\n# Master-eligible node\nnode.roles: [master]\n\n# Data node\nnode.roles: [data]\n\n# Ingest node\nnode.roles: [ingest]\n\n# Coordinating only node\nnode.roles: []</code></pre>\n      </div>\n    </div>\n<h3 id=\"memory-and-performance-configuration\" class=\"mobile-header\">Memory and Performance Configuration</h3>\n<div class=\"mobile-code-block\" data-language=\"yaml\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">yaml</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-yaml\"># JVM heap settings (in elasticsearch.yml or jvm.options)\n# Set via environment variables:\nES_JAVA_OPTS: &quot;-Xms4g -Xmx4g&quot;\n\n# Thread pool settings\nthread_pool:\n  write:\n    size: 8\n    queue_size: 200\n  search:\n    size: 13\n    queue_size: 1000\n\n# Index settings\nindices.memory.index_buffer_size: 20%\nindices.breaker.total.use_real_memory: true</code></pre>\n      </div>\n    </div>\n<h3 id=\"advanced-security-settings\" class=\"mobile-header\">Advanced Security Settings</h3>\n<div class=\"mobile-code-block\" data-language=\"yaml\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">yaml</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-yaml\"># X-Pack Security configuration\nxpack.security.enabled: true\nxpack.security.enrollment.enabled: true\n\n# SSL/TLS configuration\nxpack.security.http.ssl.enabled: true\nxpack.security.http.ssl.keystore.path: certs/http.p12\nxpack.security.transport.ssl.enabled: true\nxpack.security.transport.ssl.verification_mode: certificate\nxpack.security.transport.ssl.keystore.path: certs/transport.p12\nxpack.security.transport.ssl.truststore.path: certs/transport.p12\n\n# Authentication realms\nxpack.security.authc.realms:\n  native:\n    native1:\n      order: 0</code></pre>\n      </div>\n    </div>\n<h2 id=\"reverse-proxy-setup\" class=\"mobile-header\">Reverse Proxy Setup</h2>\n<h3 id=\"nginx-configuration\" class=\"mobile-header\">nginx Configuration</h3>\n<div class=\"mobile-code-block\" data-language=\"nginx\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">nginx</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-nginx\"># /etc/nginx/sites-available/elasticsearch\nupstream elasticsearch_backend {\n    server 127.0.0.1:9200 max_fails=3 fail_timeout=30s;\n    server 127.0.0.1:9201 max_fails=3 fail_timeout=30s backup;\n}\n\nserver {\n    listen 80;\n    server_name elasticsearch.example.com;\n    return 301 https://$server_name$request_uri;\n}\n\nserver {\n    listen 443 ssl http2;\n    server_name elasticsearch.example.com;\n\n    ssl_certificate /etc/letsencrypt/live/elasticsearch.example.com/fullchain.pem;\n    ssl_certificate_key /etc/letsencrypt/live/elasticsearch.example.com/privkey.pem;\n\n    # Security headers\n    add_header Strict-Transport-Security &quot;max-age=63072000&quot; always;\n\n    location / {\n        proxy_pass http://elasticsearch_backend;\n        proxy_http_version 1.1;\n        proxy_set_header Host $http_host;\n        proxy_set_header X-Real-IP $remote_addr;\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n        proxy_set_header X-Forwarded-Proto $scheme;\n        proxy_connect_timeout 60s;\n        proxy_send_timeout 60s;\n        proxy_read_timeout 60s;\n    }\n}</code></pre>\n      </div>\n    </div>\n<h3 id=\"apache-configuration\" class=\"mobile-header\">Apache Configuration</h3>\n<div class=\"mobile-code-block\" data-language=\"apache\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">apache</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-apache\"># /etc/apache2/sites-available/elasticsearch.conf\n&lt;VirtualHost *:443&gt;\n    ServerName elasticsearch.example.com\n    \n    SSLEngine on\n    SSLCertificateFile /etc/letsencrypt/live/elasticsearch.example.com/fullchain.pem\n    SSLCertificateKeyFile /etc/letsencrypt/live/elasticsearch.example.com/privkey.pem\n    \n    ProxyPreserveHost On\n    ProxyPass / http://localhost:9200/\n    ProxyPassReverse / http://localhost:9200/\n    \n    Header always set Strict-Transport-Security &quot;max-age=63072000&quot;\n&lt;/VirtualHost&gt;</code></pre>\n      </div>\n    </div>\n<h3 id=\"haproxy-configuration\" class=\"mobile-header\">HAProxy Configuration</h3>\n<div class=\"mobile-code-block\" data-language=\"haproxy\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">haproxy</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-haproxy\"># /etc/haproxy/haproxy.cfg\nfrontend elasticsearch_frontend\n    bind *:9200 ssl crt /etc/haproxy/certs/elasticsearch.pem\n    mode http\n    option httplog\n    default_backend elasticsearch_backend\n\nbackend elasticsearch_backend\n    mode http\n    balance roundrobin\n    option httpchk GET /_cluster/health\n    server elasticsearch1 127.0.0.1:9200 check\n    server elasticsearch2 127.0.0.1:9201 check backup</code></pre>\n      </div>\n    </div>\n<h2 id=\"security-configuration\" class=\"mobile-header\">Security Configuration</h2>\n<h3 id=\"ssltls-setup\" class=\"mobile-header\">SSL/TLS Setup</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Generate certificates using Elasticsearch&#039;s certificate tool\ncd /usr/share/elasticsearch\nsudo bin/elasticsearch-certutil ca --pem --out /tmp/ca.zip\nsudo unzip /tmp/ca.zip -d /tmp/ca\nsudo bin/elasticsearch-certutil cert --ca-cert /tmp/ca/ca.crt --ca-key /tmp/ca/ca.key --pem --out /tmp/certs.zip\nsudo unzip /tmp/certs.zip -d /tmp/certs\n\n# Create certificates directory\nsudo mkdir -p /etc/elasticsearch/certs\nsudo cp /tmp/ca/ca.crt /etc/elasticsearch/certs/\nsudo cp /tmp/certs/instance/instance.crt /etc/elasticsearch/certs/\nsudo cp /tmp/certs/instance/instance.key /etc/elasticsearch/certs/\n\n# Create keystore\nsudo bin/elasticsearch-keystore create\nsudo bin/elasticsearch-keystore add xpack.security.http.ssl.keystore.secure_password\nsudo bin/elasticsearch-keystore add xpack.security.transport.ssl.keystore.secure_password\n\n# Set permissions\nsudo chown -R elasticsearch:elasticsearch /etc/elasticsearch/certs\nsudo chmod 600 /etc/elasticsearch/certs/*</code></pre>\n      </div>\n    </div>\n<h3 id=\"user-management-and-authentication\" class=\"mobile-header\">User Management and Authentication</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Set passwords for built-in users (run after enabling security)\nsudo /usr/share/elasticsearch/bin/elasticsearch-setup-passwords auto\n\n# Create custom users\ncurl -X POST &quot;localhost:9200/_security/user/appuser&quot; -H &#039;Content-Type: application/json&#039; -u elastic:password -d&#039;\n{\n  &quot;password&quot; : &quot;SecurePassword123!&quot;,\n  &quot;roles&quot; : [ &quot;kibana_admin&quot;, &quot;monitoring_user&quot; ],\n  &quot;full_name&quot; : &quot;Application User&quot;,\n  &quot;email&quot; : &quot;appuser@example.com&quot;\n}&#039;\n\n# Create custom roles\ncurl -X POST &quot;localhost:9200/_security/role/log_reader&quot; -H &#039;Content-Type: application/json&#039; -u elastic:password -d&#039;\n{\n  &quot;cluster&quot;: [&quot;monitor&quot;],\n  &quot;indices&quot;: [\n    {\n      &quot;names&quot;: [&quot;logs-*&quot;],\n      &quot;privileges&quot;: [&quot;read&quot;, &quot;view_index_metadata&quot;]\n    }\n  ]\n}&#039;</code></pre>\n      </div>\n    </div>\n<h3 id=\"firewall-rules\" class=\"mobile-header\">Firewall Rules</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># UFW (Ubuntu/Debian)\nsudo ufw allow from 192.168.1.0/24 to any port 9200\nsudo ufw allow from 192.168.1.0/24 to any port 9300\nsudo ufw reload\n\n# firewalld (RHEL/CentOS/openSUSE)\nsudo firewall-cmd --permanent --new-zone=elasticsearch\nsudo firewall-cmd --permanent --zone=elasticsearch --add-source=192.168.1.0/24\nsudo firewall-cmd --permanent --zone=elasticsearch --add-port=9200/tcp\nsudo firewall-cmd --permanent --zone=elasticsearch --add-port=9300/tcp\nsudo firewall-cmd --reload\n\n# iptables\nsudo iptables -A INPUT -s 192.168.1.0/24 -p tcp --dport 9200 -j ACCEPT\nsudo iptables -A INPUT -s 192.168.1.0/24 -p tcp --dport 9300 -j ACCEPT\nsudo iptables-save &gt; /etc/iptables/rules.v4\n\n# pf (FreeBSD)\n# Add to /etc/pf.conf\npass in on $ext_if proto tcp from 192.168.1.0/24 to any port { 9200, 9300 }\n\n# Windows Firewall\nNew-NetFirewallRule -DisplayName &quot;Elasticsearch HTTP&quot; -Direction Inbound -Protocol TCP -LocalPort 9200 -RemoteAddress 192.168.1.0/24 -Action Allow\nNew-NetFirewallRule -DisplayName &quot;Elasticsearch Transport&quot; -Direction Inbound -Protocol TCP -LocalPort 9300 -RemoteAddress 192.168.1.0/24 -Action Allow</code></pre>\n      </div>\n    </div>\n<h2 id=\"database-setup\" class=\"mobile-header\">Database Setup</h2>\n<h3 id=\"index-templates-and-mappings\" class=\"mobile-header\">Index Templates and Mappings</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Create index template\ncurl -X PUT &quot;localhost:9200/_index_template/logs_template&quot; -H &#039;Content-Type: application/json&#039; -d&#039;\n{\n  &quot;index_patterns&quot;: [&quot;logs-*&quot;],\n  &quot;template&quot;: {\n    &quot;settings&quot;: {\n      &quot;number_of_shards&quot;: 1,\n      &quot;number_of_replicas&quot;: 1,\n      &quot;index.refresh_interval&quot;: &quot;30s&quot;\n    },\n    &quot;mappings&quot;: {\n      &quot;properties&quot;: {\n        &quot;timestamp&quot;: {\n          &quot;type&quot;: &quot;date&quot;\n        },\n        &quot;level&quot;: {\n          &quot;type&quot;: &quot;keyword&quot;\n        },\n        &quot;message&quot;: {\n          &quot;type&quot;: &quot;text&quot;,\n          &quot;analyzer&quot;: &quot;standard&quot;\n        },\n        &quot;host&quot;: {\n          &quot;type&quot;: &quot;keyword&quot;\n        }\n      }\n    }\n  }\n}&#039;\n\n# Create index with custom settings\ncurl -X PUT &quot;localhost:9200/my_index&quot; -H &#039;Content-Type: application/json&#039; -d&#039;\n{\n  &quot;settings&quot;: {\n    &quot;number_of_shards&quot;: 3,\n    &quot;number_of_replicas&quot;: 2,\n    &quot;analysis&quot;: {\n      &quot;analyzer&quot;: {\n        &quot;custom_analyzer&quot;: {\n          &quot;type&quot;: &quot;custom&quot;,\n          &quot;tokenizer&quot;: &quot;standard&quot;,\n          &quot;filter&quot;: [&quot;lowercase&quot;, &quot;asciifolding&quot;]\n        }\n      }\n    }\n  },\n  &quot;mappings&quot;: {\n    &quot;properties&quot;: {\n      &quot;title&quot;: {\n        &quot;type&quot;: &quot;text&quot;,\n        &quot;analyzer&quot;: &quot;custom_analyzer&quot;\n      },\n      &quot;content&quot;: {\n        &quot;type&quot;: &quot;text&quot;\n      },\n      &quot;tags&quot;: {\n        &quot;type&quot;: &quot;keyword&quot;\n      },\n      &quot;created_at&quot;: {\n        &quot;type&quot;: &quot;date&quot;\n      }\n    }\n  }\n}&#039;</code></pre>\n      </div>\n    </div>\n<h3 id=\"index-lifecycle-management\" class=\"mobile-header\">Index Lifecycle Management</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Create ILM policy\ncurl -X PUT &quot;localhost:9200/_ilm/policy/logs_policy&quot; -H &#039;Content-Type: application/json&#039; -d&#039;\n{\n  &quot;policy&quot;: {\n    &quot;phases&quot;: {\n      &quot;hot&quot;: {\n        &quot;actions&quot;: {\n          &quot;rollover&quot;: {\n            &quot;max_size&quot;: &quot;10gb&quot;,\n            &quot;max_age&quot;: &quot;7d&quot;\n          }\n        }\n      },\n      &quot;warm&quot;: {\n        &quot;min_age&quot;: &quot;7d&quot;,\n        &quot;actions&quot;: {\n          &quot;allocate&quot;: {\n            &quot;number_of_replicas&quot;: 0\n          }\n        }\n      },\n      &quot;cold&quot;: {\n        &quot;min_age&quot;: &quot;30d&quot;,\n        &quot;actions&quot;: {\n          &quot;allocate&quot;: {\n            &quot;number_of_replicas&quot;: 0\n          }\n        }\n      },\n      &quot;delete&quot;: {\n        &quot;min_age&quot;: &quot;90d&quot;\n      }\n    }\n  }\n}&#039;</code></pre>\n      </div>\n    </div>\n<h2 id=\"performance-optimization\" class=\"mobile-header\">Performance Optimization</h2>\n<h3 id=\"system-tuning\" class=\"mobile-header\">System Tuning</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Elasticsearch-specific system optimizations\nsudo tee -a /etc/sysctl.conf &lt;&lt;EOF\n# Elasticsearch optimizations\nvm.max_map_count = 262144\nvm.swappiness = 1\nfs.file-max = 65535\nnet.core.somaxconn = 32768\nnet.ipv4.tcp_max_syn_backlog = 8192\nEOF\n\nsudo sysctl -p\n\n# Disable swap\nsudo swapoff -a\necho &#039;vm.swappiness=1&#039; | sudo tee -a /etc/sysctl.conf\n\n# Set file descriptor limits\nsudo tee -a /etc/security/limits.conf &lt;&lt;EOF\nelasticsearch soft nofile 65535\nelasticsearch hard nofile 65535\nelasticsearch soft memlock unlimited\nelasticsearch hard memlock unlimited\nEOF</code></pre>\n      </div>\n    </div>\n<h3 id=\"jvm-and-memory-tuning\" class=\"mobile-header\">JVM and Memory Tuning</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># JVM options (/etc/elasticsearch/jvm.options)\n# Set heap size (50% of available RAM, max 32GB)\n-Xms8g\n-Xmx8g\n\n# GC settings\n-XX:+UseG1GC\n-XX:G1HeapRegionSize=16m\n-XX:+UnlockExperimentalVMOptions\n-XX:+UnlockDiagnosticVMOptions\n-XX:+G1PrintRegionRememberedSetInfo\n\n# Memory lock\n-XX:+AlwaysPreTouch</code></pre>\n      </div>\n    </div>\n<h3 id=\"index-and-query-optimization\" class=\"mobile-header\">Index and Query Optimization</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Index optimization settings\ncurl -X PUT &quot;localhost:9200/my_index/_settings&quot; -H &#039;Content-Type: application/json&#039; -d&#039;\n{\n  &quot;index&quot;: {\n    &quot;refresh_interval&quot;: &quot;30s&quot;,\n    &quot;number_of_replicas&quot;: 1,\n    &quot;routing.allocation.total_shards_per_node&quot;: 3,\n    &quot;translog.flush_threshold_size&quot;: &quot;1gb&quot;,\n    &quot;translog.sync_interval&quot;: &quot;30s&quot;\n  }\n}&#039;\n\n# Force merge indices\ncurl -X POST &quot;localhost:9200/my_index/_forcemerge?max_num_segments=1&quot;\n\n# Clear cache\ncurl -X POST &quot;localhost:9200/_cache/clear&quot;</code></pre>\n      </div>\n    </div>\n<h2 id=\"monitoring\" class=\"mobile-header\">Monitoring</h2>\n<h3 id=\"built-in-monitoring\" class=\"mobile-header\">Built-in Monitoring</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Cluster health\ncurl -X GET &quot;localhost:9200/_cluster/health?pretty&quot;\n\n# Node statistics\ncurl -X GET &quot;localhost:9200/_nodes/stats?pretty&quot;\n\n# Index statistics\ncurl -X GET &quot;localhost:9200/_stats?pretty&quot;\n\n# Hot threads\ncurl -X GET &quot;localhost:9200/_nodes/hot_threads&quot;\n\n# Task management\ncurl -X GET &quot;localhost:9200/_tasks?detailed=true&amp;actions=*search&quot;\n\n# Pending cluster tasks\ncurl -X GET &quot;localhost:9200/_cluster/pending_tasks&quot;</code></pre>\n      </div>\n    </div>\n<h3 id=\"external-monitoring-setup\" class=\"mobile-header\">External Monitoring Setup</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Install Metricbeat for monitoring\ncurl -L -O https://artifacts.elastic.co/downloads/beats/metricbeat/metricbeat-8.11.3-linux-x86_64.tar.gz\ntar xzvf metricbeat-8.11.3-linux-x86_64.tar.gz\nsudo mv metricbeat-8.11.3-linux-x86_64 /usr/local/metricbeat\n\n# Configure Metricbeat for Elasticsearch monitoring\nsudo tee /usr/local/metricbeat/metricbeat.yml &lt;&lt;EOF\nmetricbeat.modules:\n- module: elasticsearch\n  metricsets:\n    - node\n    - node_stats\n    - cluster_stats\n  period: 10s\n  hosts: [&quot;localhost:9200&quot;]\n\noutput.elasticsearch:\n  hosts: [&quot;localhost:9200&quot;]\n\nsetup.kibana:\n  host: &quot;localhost:5601&quot;\nEOF\n\n# Create systemd service for Metricbeat\nsudo tee /etc/systemd/system/metricbeat.service &lt;&lt;EOF\n[Unit]\nDescription=Metricbeat\nAfter=network.target\n\n[Service]\nType=simple\nUser=elasticsearch\nWorkingDirectory=/usr/local/metricbeat\nExecStart=/usr/local/metricbeat/metricbeat -c /usr/local/metricbeat/metricbeat.yml\nRestart=always\n\n[Install]\nWantedBy=multi-user.target\nEOF\n\nsudo systemctl enable --now metricbeat</code></pre>\n      </div>\n    </div>\n<h3 id=\"health-check-scripts\" class=\"mobile-header\">Health Check Scripts</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\">#!/bin/bash\n# elasticsearch-health-check.sh\n\n# Check Elasticsearch service\nif ! systemctl is-active elasticsearch &gt;/dev/null 2&gt;&amp;1; then\n    echo &quot;CRITICAL: Elasticsearch service is not running&quot;\n    exit 2\nfi\n\n# Check HTTP API\nif ! curl -s http://localhost:9200/ &gt;/dev/null; then\n    echo &quot;CRITICAL: Cannot connect to Elasticsearch HTTP API&quot;\n    exit 2\nfi\n\n# Check cluster health\nCLUSTER_STATUS=$(curl -s http://localhost:9200/_cluster/health | jq -r &#039;.status&#039;)\ncase $CLUSTER_STATUS in\n    &quot;green&quot;)\n        echo &quot;OK: Cluster health is green&quot;\n        exit 0\n        ;;\n    &quot;yellow&quot;)\n        echo &quot;WARNING: Cluster health is yellow&quot;\n        exit 1\n        ;;\n    &quot;red&quot;)\n        echo &quot;CRITICAL: Cluster health is red&quot;\n        exit 2\n        ;;\n    *)\n        echo &quot;UNKNOWN: Cannot determine cluster health&quot;\n        exit 3\n        ;;\nesac</code></pre>\n      </div>\n    </div>\n<h2 id=\"backup-and-restore\" class=\"mobile-header\">Backup and Restore</h2>\n<h3 id=\"snapshot-repository-setup\" class=\"mobile-header\">Snapshot Repository Setup</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Create snapshot repository\ncurl -X PUT &quot;localhost:9200/_snapshot/backup_repo&quot; -H &#039;Content-Type: application/json&#039; -d&#039;\n{\n  &quot;type&quot;: &quot;fs&quot;,\n  &quot;settings&quot;: {\n    &quot;location&quot;: &quot;/backup/elasticsearch&quot;,\n    &quot;compress&quot;: true,\n    &quot;max_snapshot_bytes_per_sec&quot;: &quot;50mb&quot;,\n    &quot;max_restore_bytes_per_sec&quot;: &quot;50mb&quot;\n  }\n}&#039;\n\n# Create backup directory\nsudo mkdir -p /backup/elasticsearch\nsudo chown elasticsearch:elasticsearch /backup/elasticsearch\n\n# Add repository path to elasticsearch.yml\necho &#039;path.repo: [&quot;/backup/elasticsearch&quot;]&#039; | sudo tee -a /etc/elasticsearch/elasticsearch.yml\nsudo systemctl restart elasticsearch</code></pre>\n      </div>\n    </div>\n<h3 id=\"backup-procedures\" class=\"mobile-header\">Backup Procedures</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\">#!/bin/bash\n# elasticsearch-backup.sh\n\nSNAPSHOT_NAME=&quot;snapshot-$(date +%Y%m%d_%H%M%S)&quot;\n\n# Create snapshot\ncurl -X PUT &quot;localhost:9200/_snapshot/backup_repo/$SNAPSHOT_NAME?wait_for_completion=true&quot; -H &#039;Content-Type: application/json&#039; -d&#039;\n{\n  &quot;indices&quot;: &quot;*&quot;,\n  &quot;ignore_unavailable&quot;: true,\n  &quot;include_global_state&quot;: true,\n  &quot;metadata&quot;: {\n    &quot;taken_by&quot;: &quot;elasticsearch-backup-script&quot;,\n    &quot;taken_because&quot;: &quot;scheduled backup&quot;\n  }\n}&#039;\n\n# Verify snapshot\nSNAPSHOT_STATUS=$(curl -s &quot;localhost:9200/_snapshot/backup_repo/$SNAPSHOT_NAME&quot; | jq -r &#039;.snapshots[0].state&#039;)\n\nif [ &quot;$SNAPSHOT_STATUS&quot; = &quot;SUCCESS&quot; ]; then\n    echo &quot;Backup completed successfully: $SNAPSHOT_NAME&quot;\nelse\n    echo &quot;Backup failed: $SNAPSHOT_NAME&quot;\n    exit 1\nfi\n\n# Clean up old snapshots (keep last 7 days)\ncurl -s &quot;localhost:9200/_snapshot/backup_repo/_all&quot; | jq -r &#039;.snapshots[] | select(.end_time_in_millis &lt; &#039;$(date -d &#039;7 days ago&#039; +%s000)&#039;) | .snapshot&#039; | while read snapshot; do\n    curl -X DELETE &quot;localhost:9200/_snapshot/backup_repo/$snapshot&quot;\n    echo &quot;Deleted old snapshot: $snapshot&quot;\ndone\n\necho &quot;Elasticsearch backup completed: $SNAPSHOT_NAME&quot;</code></pre>\n      </div>\n    </div>\n<h3 id=\"restore-procedures\" class=\"mobile-header\">Restore Procedures</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\">#!/bin/bash\n# elasticsearch-restore.sh\n\nSNAPSHOT_NAME=&quot;$1&quot;\nif [ -z &quot;$SNAPSHOT_NAME&quot; ]; then\n    echo &quot;Usage: $0 &lt;snapshot-name&gt;&quot;\n    echo &quot;Available snapshots:&quot;\n    curl -s &quot;localhost:9200/_snapshot/backup_repo/_all&quot; | jq -r &#039;.snapshots[].snapshot&#039;\n    exit 1\nfi\n\n# Close indices before restore\ncurl -X POST &quot;localhost:9200/_all/_close&quot;\n\n# Restore snapshot\ncurl -X POST &quot;localhost:9200/_snapshot/backup_repo/$SNAPSHOT_NAME/_restore?wait_for_completion=true&quot; -H &#039;Content-Type: application/json&#039; -d&#039;\n{\n  &quot;indices&quot;: &quot;*&quot;,\n  &quot;ignore_unavailable&quot;: true,\n  &quot;include_global_state&quot;: true\n}&#039;\n\necho &quot;Restore completed from snapshot: $SNAPSHOT_NAME&quot;</code></pre>\n      </div>\n    </div>\n<h3 id=\"automated-backup\" class=\"mobile-header\">Automated Backup</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Create cron job for daily backups\necho &quot;0 2 * * * /usr/local/bin/elasticsearch-backup.sh&quot; | sudo crontab -</code></pre>\n      </div>\n    </div>\n<h2 id=\"troubleshooting\" class=\"mobile-header\">Troubleshooting</h2>\n<h3 id=\"common-issues\" class=\"mobile-header\">Common Issues</h3>\n<p class=\"mobile-paragraph\">1. <strong>Elasticsearch won't start</strong>:</p>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Check logs\nsudo journalctl -u elasticsearch -f\nsudo tail -f /var/log/elasticsearch/elasticsearch.log\n\n# Check Java version\njava -version\n\n# Check memory settings\ngrep -E &quot;Xms|Xmx&quot; /etc/elasticsearch/jvm.options\n\n# Check disk space\ndf -h /var/lib/elasticsearch</code></pre>\n      </div>\n    </div>\n<p class=\"mobile-paragraph\">2. <strong>Out of memory errors</strong>:</p>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Check heap usage\ncurl -X GET &quot;localhost:9200/_nodes/stats/jvm?pretty&quot;\n\n# Check field data cache\ncurl -X GET &quot;localhost:9200/_nodes/stats/indices/fielddata?pretty&quot;\n\n# Clear field data cache\ncurl -X POST &quot;localhost:9200/_cache/clear?fielddata=true&quot;</code></pre>\n      </div>\n    </div>\n<p class=\"mobile-paragraph\">3. <strong>Slow queries</strong>:</p>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Enable slow log\ncurl -X PUT &quot;localhost:9200/_all/_settings&quot; -H &#039;Content-Type: application/json&#039; -d&#039;\n{\n  &quot;index.search.slowlog.threshold.query.warn&quot;: &quot;10s&quot;,\n  &quot;index.search.slowlog.threshold.query.info&quot;: &quot;5s&quot;,\n  &quot;index.search.slowlog.threshold.query.debug&quot;: &quot;2s&quot;,\n  &quot;index.search.slowlog.threshold.query.trace&quot;: &quot;500ms&quot;\n}&#039;\n\n# Check slow queries\nsudo tail -f /var/log/elasticsearch/*_index_search_slowlog.log</code></pre>\n      </div>\n    </div>\n<h3 id=\"debug-mode\" class=\"mobile-header\">Debug Mode</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Enable debug logging\ncurl -X PUT &quot;localhost:9200/_cluster/settings&quot; -H &#039;Content-Type: application/json&#039; -d&#039;\n{\n  &quot;transient&quot;: {\n    &quot;logger.org.elasticsearch&quot;: &quot;DEBUG&quot;\n  }\n}&#039;\n\n# Check cluster state\ncurl -X GET &quot;localhost:9200/_cluster/state?pretty&quot;\n\n# Explain API for query analysis\ncurl -X GET &quot;localhost:9200/my_index/_search&quot; -H &#039;Content-Type: application/json&#039; -d&#039;\n{\n  &quot;explain&quot;: true,\n  &quot;query&quot;: {\n    &quot;match&quot;: {\n      &quot;title&quot;: &quot;search term&quot;\n    }\n  }\n}&#039;</code></pre>\n      </div>\n    </div>\n<h2 id=\"maintenance\" class=\"mobile-header\">Maintenance</h2>\n<h3 id=\"update-procedures\" class=\"mobile-header\">Update Procedures</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># RHEL/CentOS/Rocky/AlmaLinux\nsudo yum check-update elasticsearch\nsudo yum update elasticsearch\n\n# Debian/Ubuntu\nsudo apt update\nsudo apt upgrade elasticsearch\n\n# Arch Linux\nyay -Syu elasticsearch\n\n# macOS\nbrew upgrade elastic/tap/elasticsearch-full\n\n# Docker (Alpine/openSUSE)\ndocker pull elasticsearch:8.11.3\ndocker stop elasticsearch\ndocker rm elasticsearch\n# Re-run docker run command with new image\n\n# Always backup before updates\n./elasticsearch-backup.sh\n\n# Restart after updates\nsudo systemctl restart elasticsearch</code></pre>\n      </div>\n    </div>\n<h3 id=\"maintenance-tasks\" class=\"mobile-header\">Maintenance Tasks</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Weekly maintenance script\n#!/bin/bash\n# elasticsearch-maintenance.sh\n\n# Force merge old indices\ncurl -X POST &quot;localhost:9200/logs-$(date -d &#039;1 week ago&#039; +%Y.%m.%d)/_forcemerge?max_num_segments=1&quot;\n\n# Clear caches\ncurl -X POST &quot;localhost:9200/_cache/clear&quot;\n\n# Optimize indices\ncurl -X POST &quot;localhost:9200/_optimize&quot;\n\n# Update index settings for better performance\ncurl -X PUT &quot;localhost:9200/_all/_settings&quot; -H &#039;Content-Type: application/json&#039; -d&#039;\n{\n  &quot;index&quot;: {\n    &quot;refresh_interval&quot;: &quot;30s&quot;\n  }\n}&#039;\n\necho &quot;Elasticsearch maintenance completed&quot;</code></pre>\n      </div>\n    </div>\n<h3 id=\"health-monitoring\" class=\"mobile-header\">Health Monitoring</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Create monitoring cron job\necho &quot;*/5 * * * * /usr/local/bin/elasticsearch-health-check.sh&quot; | sudo crontab -\n\n# Log rotation\nsudo tee /etc/logrotate.d/elasticsearch &lt;&lt;EOF\n/var/log/elasticsearch/*.log {\n    daily\n    rotate 7\n    compress\n    delaycompress\n    missingok\n    notifempty\n    create 640 elasticsearch elasticsearch\n    postrotate\n        systemctl restart elasticsearch &gt; /dev/null 2&gt;&amp;1 || true\n    endscript\n}\nEOF</code></pre>\n      </div>\n    </div>\n<h2 id=\"integration-examples\" class=\"mobile-header\">Integration Examples</h2>\n<h3 id=\"python-integration\" class=\"mobile-header\">Python Integration</h3>\n<div class=\"mobile-code-block\" data-language=\"python\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">python</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-python\"># Using elasticsearch-py\nfrom elasticsearch import Elasticsearch\n\n# Connect to Elasticsearch\nes = Elasticsearch(\n    hosts=[{&#039;host&#039;: &#039;localhost&#039;, &#039;port&#039;: 9200}],\n    http_auth=(&#039;elastic&#039;, &#039;password&#039;),\n    use_ssl=True,\n    verify_certs=True,\n    ca_certs=&#039;/etc/elasticsearch/certs/ca.crt&#039;,\n)\n\n# Index a document\ndoc = {\n    &#039;title&#039;: &#039;Sample Document&#039;,\n    &#039;content&#039;: &#039;This is a sample document for testing&#039;,\n    &#039;timestamp&#039;: &#039;2024-01-15T10:30:00&#039;\n}\nes.index(index=&#039;my_index&#039;, id=1, body=doc)\n\n# Search documents\nresponse = es.search(\n    index=&#039;my_index&#039;,\n    body={\n        &#039;query&#039;: {\n            &#039;match&#039;: {\n                &#039;content&#039;: &#039;sample&#039;\n            }\n        }\n    }\n)\nprint(response[&#039;hits&#039;])</code></pre>\n      </div>\n    </div>\n<h3 id=\"nodejs-integration\" class=\"mobile-header\">Node.js Integration</h3>\n<div class=\"mobile-code-block\" data-language=\"javascript\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">javascript</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-javascript\">// Using @elastic/elasticsearch\nconst { Client } = require(&#039;@elastic/elasticsearch&#039;);\n\nconst client = new Client({\n  node: &#039;https://localhost:9200&#039;,\n  auth: {\n    username: &#039;elastic&#039;,\n    password: &#039;password&#039;\n  },\n  tls: {\n    ca: fs.readFileSync(&#039;/etc/elasticsearch/certs/ca.crt&#039;),\n    rejectUnauthorized: true\n  }\n});\n\n// Index a document\nasync function indexDocument() {\n  const response = await client.index({\n    index: &#039;my_index&#039;,\n    id: 1,\n    body: {\n      title: &#039;Sample Document&#039;,\n      content: &#039;This is a sample document for testing&#039;,\n      timestamp: new Date()\n    }\n  });\n  console.log(response);\n}\n\n// Search documents\nasync function searchDocuments() {\n  const response = await client.search({\n    index: &#039;my_index&#039;,\n    body: {\n      query: {\n        match: {\n          content: &#039;sample&#039;\n        }\n      }\n    }\n  });\n  console.log(response.body.hits);\n}</code></pre>\n      </div>\n    </div>\n<h3 id=\"java-integration\" class=\"mobile-header\">Java Integration</h3>\n<div class=\"mobile-code-block\" data-language=\"java\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">java</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-java\">// Using Elasticsearch Java client\nimport org.elasticsearch.client.RestClient;\nimport org.elasticsearch.client.RestHighLevelClient;\nimport org.elasticsearch.action.index.IndexRequest;\nimport org.elasticsearch.action.search.SearchRequest;\nimport org.elasticsearch.common.xcontent.XContentType;\n\nRestHighLevelClient client = new RestHighLevelClient(\n    RestClient.builder(new HttpHost(&quot;localhost&quot;, 9200, &quot;https&quot;))\n        .setHttpClientConfigCallback(httpClientBuilder -&gt; \n            httpClientBuilder.setDefaultCredentialsProvider(credentialsProvider)\n                .setSSLContext(sslContext))\n);\n\n// Index a document\nIndexRequest indexRequest = new IndexRequest(&quot;my_index&quot;)\n    .id(&quot;1&quot;)\n    .source(&quot;{\\n&quot; +\n        &quot;\\&quot;title\\&quot;:\\&quot;Sample Document\\&quot;,\\n&quot; +\n        &quot;\\&quot;content\\&quot;:\\&quot;This is a sample document for testing\\&quot;,\\n&quot; +\n        &quot;\\&quot;timestamp\\&quot;:\\&quot;2024-01-15T10:30:00\\&quot;\\n&quot; +\n        &quot;}&quot;, XContentType.JSON);\n\nclient.index(indexRequest, RequestOptions.DEFAULT);</code></pre>\n      </div>\n    </div>\n<h3 id=\"logstash-integration\" class=\"mobile-header\">Logstash Integration</h3>\n<div class=\"mobile-code-block\" data-language=\"ruby\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">ruby</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-ruby\"># logstash.conf\ninput {\n  beats {\n    port =&gt; 5044\n  }\n}\n\nfilter {\n  if [fields][log_type] == &quot;apache&quot; {\n    grok {\n      match =&gt; { &quot;message&quot; =&gt; &quot;%{COMBINEDAPACHELOG}&quot; }\n    }\n    date {\n      match =&gt; [ &quot;timestamp&quot;, &quot;dd/MMM/yyyy:HH:mm:ss Z&quot; ]\n    }\n  }\n}\n\noutput {\n  elasticsearch {\n    hosts =&gt; [&quot;localhost:9200&quot;]\n    user =&gt; &quot;logstash_user&quot;\n    password =&gt; &quot;logstash_password&quot;\n    index =&gt; &quot;logs-%{+YYYY.MM.dd}&quot;\n  }\n}</code></pre>\n      </div>\n    </div>\n<h2 id=\"additional-resources\" class=\"mobile-header\">Additional Resources</h2>\n<li class=\"mobile-list-item\"><a href=\"https://www.elastic.co/guide/en/elasticsearch/reference/current/index.html\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">Official Elasticsearch Documentation</a></li>\n<li class=\"mobile-list-item\"><a href=\"https://www.elastic.co/guide/en/elasticsearch/reference/current/security-minimal-setup.html\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">Elasticsearch Security Guide</a></li>\n<li class=\"mobile-list-item\"><a href=\"https://www.elastic.co/guide/en/elasticsearch/reference/current/tune-for-search-speed.html\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">Performance Tuning Guide</a></li>\n<li class=\"mobile-list-item\"><a href=\"https://www.elastic.co/guide/en/elasticsearch/reference/current/index-lifecycle-management.html\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">Index Lifecycle Management</a></li>\n<li class=\"mobile-list-item\"><a href=\"https://www.elastic.co/guide/en/elasticsearch/reference/current/modules-discovery-bootstrap-cluster.html\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">Elasticsearch Cluster Setup</a></li>\n<li class=\"mobile-list-item\"><a href=\"https://discuss.elastic.co/\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">Elastic Stack Community</a></li>\n<li class=\"mobile-list-item\"><a href=\"https://www.elastic.co/blog/category/elasticsearch\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">Elasticsearch Blog</a></li>\n<li class=\"mobile-list-item\"><a href=\"https://www.elastic.co/guide/en/elasticsearch/guide/current/index.html\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">Best Practices Guide</a></li>\n<p class=\"mobile-paragraph\">---</p>\n<p class=\"mobile-paragraph\"><strong>Note:</strong> This guide is part of the <a href=\"https://howtomgr.github.io\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">HowToMgr</a> collection. Always refer to official documentation for the most up-to-date information.</p>","readTime":"17 min","wordCount":3365,"lastBuilt":"2025-09-14T18:12:00.168Z"},{"name":"element","displayName":"Element","slug":"element","description":"Repo for element","category":"communication","language":null,"stars":0,"forks":0,"topics":[],"githubUrl":"https://github.com/howtomgr/element","updatedAt":"2025-09-08T03:07:16Z","createdAt":"2025-09-08T03:07:06Z","readmeRaw":"## ðŸ‘‹ Welcome to element ðŸš€  \n\nelement README  \n  \n  \n## Author  \n\nðŸ¤– casjay: [Github](https://github.com/casjay) ðŸ¤–  \n","readmeHtml":"<h2 id=\"welcome-to-element\" class=\"mobile-header\">ðŸ‘‹ Welcome to element ðŸš€  </h2>\n<p class=\"mobile-paragraph\">element README  </p>\n<h2 id=\"author\" class=\"mobile-header\">Author  </h2>\n<p class=\"mobile-paragraph\">ðŸ¤– casjay: <a href=\"https://github.com/casjay\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">Github</a> ðŸ¤–  </p>","readTime":"1 min","wordCount":15,"lastBuilt":"2025-09-14T18:12:20.551Z"},{"name":"exchange","displayName":"Exchange","slug":"exchange","description":"Repo for exchange","category":"infrastructure","language":null,"stars":0,"forks":0,"topics":[],"githubUrl":"https://github.com/howtomgr/exchange","updatedAt":"2025-09-08T03:07:21Z","createdAt":"2023-08-28T03:47:46Z","readmeRaw":"# Exchange 2016 on Server 2016\n\n```text\n\nInstall-WindowsFeature NET-Framework-45-Features, RPC-over-HTTP-proxy, RSAT-Clustering, RSAT-Clustering-CmdInterface, RSAT-Clustering-Mgmt, RSAT-Clustering-PowerShell, Web-Mgmt-Console, WAS-Process-Model, Web-Asp-Net45, Web-Basic-Auth, Web-Client-Auth, Web-Digest-Auth, Web-Dir-Browsing, Web-Dyn-Compression, Web-Http-Errors, Web-Http-Logging, Web-Http-Redirect, Web-Http-Tracing, Web-ISAPI-Ext, Web-ISAPI-Filter, Web-Lgcy-Mgmt-Console, Web-Metabase, Web-Mgmt-Console, Web-Mgmt-Service, Web-Net-Ext45, Web-Request-Monitor, Web-Server, Web-Stat-Compression, Web-Static-Content, Web-Windows-Auth, Web-WMI, Windows-Identity-Foundation, RSAT-ADDS, ADLDS, Server-Media-Foundation\n\nhttps://download.microsoft.com/download/2/C/4/2C47A5C1-A1F3-4843-B9FE-84C0032C61EC/UcmaRuntimeSetup.exe\nhttps://download.microsoft.com/download/2/E/6/2E61CFA4-993B-4DD4-91DA-3737CD5CD6E3/vcredist_x64.exe\n\nEnable-WindowsOptionalFeature -Online -FeatureName IIS-ManagementScriptingTools,IIS-ManagementScriptingTools,IIS-IIS6ManagementCompatibility,IIS-LegacySnapIn,IIS-ManagementConsole,IIS-Metabase,IIS-WebServerManagementTools,IIS-WebServerRole\n\n```\n","readmeHtml":"<h1 id=\"exchange-2016-on-server-2016\" class=\"mobile-header\">Exchange 2016 on Server 2016</h1>\n<div class=\"mobile-code-block\" data-language=\"text\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">text</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-text\">\nInstall-WindowsFeature NET-Framework-45-Features, RPC-over-HTTP-proxy, RSAT-Clustering, RSAT-Clustering-CmdInterface, RSAT-Clustering-Mgmt, RSAT-Clustering-PowerShell, Web-Mgmt-Console, WAS-Process-Model, Web-Asp-Net45, Web-Basic-Auth, Web-Client-Auth, Web-Digest-Auth, Web-Dir-Browsing, Web-Dyn-Compression, Web-Http-Errors, Web-Http-Logging, Web-Http-Redirect, Web-Http-Tracing, Web-ISAPI-Ext, Web-ISAPI-Filter, Web-Lgcy-Mgmt-Console, Web-Metabase, Web-Mgmt-Console, Web-Mgmt-Service, Web-Net-Ext45, Web-Request-Monitor, Web-Server, Web-Stat-Compression, Web-Static-Content, Web-Windows-Auth, Web-WMI, Windows-Identity-Foundation, RSAT-ADDS, ADLDS, Server-Media-Foundation\n\nhttps://download.microsoft.com/download/2/C/4/2C47A5C1-A1F3-4843-B9FE-84C0032C61EC/UcmaRuntimeSetup.exe\nhttps://download.microsoft.com/download/2/E/6/2E61CFA4-993B-4DD4-91DA-3737CD5CD6E3/vcredist_x64.exe\n\nEnable-WindowsOptionalFeature -Online -FeatureName IIS-ManagementScriptingTools,IIS-ManagementScriptingTools,IIS-IIS6ManagementCompatibility,IIS-LegacySnapIn,IIS-ManagementConsole,IIS-Metabase,IIS-WebServerManagementTools,IIS-WebServerRole\n</code></pre>\n      </div>\n    </div>","readTime":"1 min","wordCount":51,"lastBuilt":"2025-09-14T18:12:20.256Z"},{"name":"fail2ban","displayName":"Fail2ban","slug":"fail2ban","description":"Repo for fail2ban","category":"security","language":null,"stars":0,"forks":0,"topics":[],"githubUrl":"https://github.com/howtomgr/fail2ban","updatedAt":"2025-09-14T01:29:56Z","createdAt":"2025-09-08T03:07:24Z","readmeRaw":"# Fail2Ban Installation Guide\n\nIntrusion prevention software that protects servers from brute-force attacks by monitoring log files and automatically banning malicious IP addresses. Essential security tool for any public-facing server.\n\n## Prerequisites\n\n- Linux system (any modern distribution)\n- Root or sudo access\n- iptables or firewalld\n- Log files to monitor (SSH, web server, etc.)\n- Python 3.6+ (usually pre-installed)\n\n## Installation\n\n### Ubuntu/Debian\n```bash\n# Update system packages\nsudo apt update && sudo apt upgrade -y\n\n# Install Fail2Ban\nsudo apt install -y fail2ban whois\n\n# Enable and start service\nsudo systemctl enable --now fail2ban\n\n# Verify installation\nsudo systemctl status fail2ban\nfail2ban-client version\n```\n\n### RHEL/CentOS/Rocky Linux/AlmaLinux\n```bash\n# Install EPEL repository\nsudo yum install -y epel-release\n\n# Install Fail2Ban\nsudo yum install -y fail2ban fail2ban-systemd whois\n\n# Enable and start service\nsudo systemctl enable --now fail2ban\n\n# Verify installation\nsudo systemctl status fail2ban\n```\n\n### Fedora\n```bash\n# Install Fail2Ban\nsudo dnf install -y fail2ban whois\n\n# Enable and start service\nsudo systemctl enable --now fail2ban\n\n# Verify installation\nsudo systemctl status fail2ban\n```\n\n## Configuration\n\n### Basic Configuration\n```bash\n# Create local jail configuration (never edit jail.conf directly)\nsudo tee /etc/fail2ban/jail.local > /dev/null <<EOF\n# Fail2Ban Local Configuration\n\n[DEFAULT]\n# Ban settings\nbantime = 3600\nfindtime = 600\nmaxretry = 3\nbackend = auto\n\n# Notification settings\ndestemail = admin@example.com\nsender = fail2ban@example.com\nmta = sendmail\n\n# Actions\naction = %(action_mwl)s\n\n# Ignore IP addresses (whitelist)\nignoreip = 127.0.0.1/8 ::1 192.168.1.0/24 10.0.0.0/8\n\n# SSH protection\n[sshd]\nenabled = true\nport = ssh,2222\nfilter = sshd\nlogpath = /var/log/auth.log\nmaxretry = 3\nbantime = 3600\n\n# HTTP/HTTPS brute force protection\n[nginx-http-auth]\nenabled = true\nfilter = nginx-http-auth\nlogpath = /var/log/nginx/error.log\nmaxretry = 3\n\n[nginx-noscript]\nenabled = true\nfilter = nginx-noscript\nlogpath = /var/log/nginx/access.log\nmaxretry = 6\n\n[nginx-badbots]\nenabled = true\nfilter = nginx-badbots\nlogpath = /var/log/nginx/access.log\nmaxretry = 2\n\n# Apache protection\n[apache-auth]\nenabled = false\nfilter = apache-auth\nlogpath = /var/log/apache2/error.log\nmaxretry = 3\n\n[apache-badbots]\nenabled = false\nfilter = apache-badbots\nlogpath = /var/log/apache2/access.log\nmaxretry = 2\n\n# Database protection\n[mysql]\nenabled = false\nfilter = mysql-auth\nlogpath = /var/log/mysql/error.log\nmaxretry = 3\nbantime = 7200\n\n[postgresql]\nenabled = false\nfilter = postgresql\nlogpath = /var/log/postgresql/postgresql-*-main.log\nmaxretry = 3\n\n# Mail server protection\n[postfix]\nenabled = false\nfilter = postfix\nlogpath = /var/log/mail.log\nmaxretry = 3\n\n[dovecot]\nenabled = false\nfilter = dovecot\nlogpath = /var/log/mail.log\nmaxretry = 3\n\n# FTP protection\n[vsftpd]\nenabled = false\nfilter = vsftpd\nlogpath = /var/log/vsftpd.log\nmaxretry = 3\n\n# Custom application protection\n[custom-app]\nenabled = false\nfilter = custom-app\nlogpath = /var/log/myapp/error.log\nmaxretry = 5\nbantime = 1800\nEOF\n```\n\n### Custom Filters\n```bash\n# Create custom filter for web applications\nsudo tee /etc/fail2ban/filter.d/nginx-custom.conf > /dev/null <<EOF\n# Custom NGINX filter for advanced protection\n\n[Definition]\nfailregex = \n    # Failed login attempts\n    ^<HOST> -.*POST.*(wp-login\\.php|login|signin|admin).*HTTP/[0-9\\.]+\\\" 200\n    # Directory traversal attempts\n    ^<HOST> -.*GET.*(\\.\\./|\\.\\.\\%2F).*HTTP/[0-9\\.]+\\\" 404\n    # SQL injection attempts  \n    ^<HOST> -.*GET.*(union|select|insert|cast|set|declare|drop|create|alter|delete|update|replace|truncate).*HTTP/[0-9\\.]+\\\" 200\n    # XSS attempts\n    ^<HOST> -.*GET.*(script|javascript|vbscript|onload|onerror|onclick).*HTTP/[0-9\\.]+\\\" 200\n    # Suspicious user agents\n    ^<HOST> -.*\\\"(.*sqlmap.*|.*nikto.*|.*nessus.*|.*openvas.*|.*python-requests.*|.*curl.*|.*wget.*)\\\"$\n    # Too many 404 errors\n    ^<HOST> -.*\\\" 404 \n\nignoreregex =\n    # Ignore legitimate requests\n    ^<HOST> -.*GET.*/favicon\\.ico.*HTTP/[0-9\\.]+\\\" 404\n    ^<HOST> -.*GET.*/robots\\.txt.*HTTP/[0-9\\.]+\\\" 404\nEOF\n\n# Create WordPress-specific filter\nsudo tee /etc/fail2ban/filter.d/wordpress.conf > /dev/null <<EOF\n[Definition]\nfailregex = \n    # WordPress login failures\n    ^<HOST> -.*POST.*/wp-login\\.php.*HTTP/[0-9\\.]+\\\" 200\n    # WordPress admin access attempts\n    ^<HOST> -.*GET.*/wp-admin.*HTTP/[0-9\\.]+\\\" 403\n    # XML-RPC attacks\n    ^<HOST> -.*POST.*/xmlrpc\\.php.*HTTP/[0-9\\.]+\\\" 200\n\nignoreregex =\n    # Ignore successful admin logins (adjust pattern as needed)\n    ^<HOST> -.*POST.*/wp-login\\.php.*HTTP/[0-9\\.]+\\\" 302\nEOF\n\n# Add WordPress jail to jail.local\nsudo tee -a /etc/fail2ban/jail.local > /dev/null <<EOF\n\n[wordpress]\nenabled = true\nfilter = wordpress\nlogpath = /var/log/nginx/access.log\nport = http,https\nmaxretry = 3\nbantime = 1800\nfindtime = 600\nEOF\n\nsudo systemctl restart fail2ban\n```\n\n### Advanced Configuration\n```bash\n# Create advanced fail2ban configuration with multiple actions\nsudo tee /etc/fail2ban/action.d/telegram.conf > /dev/null <<EOF\n# Telegram notification action\n\n[Definition]\nactionstart = \nactionstop = \nactioncheck = \nactionban = curl -s \"https://api.telegram.org/bot<bot_token>/sendMessage\" -d \"chat_id=<chat_id>&text=ðŸš« Fail2Ban: <name> banned <ip> for <failures> failures\"\nactionunban = curl -s \"https://api.telegram.org/bot<bot_token>/sendMessage\" -d \"chat_id=<chat_id>&text=âœ… Fail2Ban: <name> unbanned <ip>\"\n\n[Init]\nbot_token = your_telegram_bot_token\nchat_id = your_telegram_chat_id\nEOF\n\n# Create comprehensive protection configuration\nsudo tee /etc/fail2ban/jail.d/comprehensive.conf > /dev/null <<EOF\n# Comprehensive Security Configuration\n\n[DEFAULT]\n# Enhanced ban settings\nbantime.increment = true\nbantime.rndtime = 60\nbantime.maxtime = 86400\nbantime.factor = 2\nbantime.formula = ban.Time * (1<<(ban.Count if ban.Count<20 else 20)) * banFactor\n\n# Multiple actions (ban + notify)\naction = %(action_mwl)s[dest=security@example.com]\n         telegram[bot_token=your_bot_token, chat_id=your_chat_id]\n\n[sshd-aggressive]\nenabled = true\nport = ssh\nfilter = sshd[mode=aggressive]\nlogpath = /var/log/auth.log\nmaxretry = 2\nbantime = 7200\nfindtime = 300\n\n[nginx-limit-req]\nenabled = true\nfilter = nginx-limit-req\nlogpath = /var/log/nginx/error.log\nmaxretry = 10\nbantime = 3600\n\n[nginx-noproxy]\nenabled = true\nfilter = nginx-noproxy\nlogpath = /var/log/nginx/access.log\nmaxretry = 2\nbantime = 86400\n\n# Protect against port scans\n[port-scan]\nenabled = true\nfilter = port-scan\nlogpath = /var/log/messages\nmaxretry = 1\nbantime = 86400\n\n# DNS amplification protection\n[named-refused]\nenabled = false\nfilter = named-refused\nlogpath = /var/log/messages\nmaxretry = 5\nbantime = 3600\nEOF\n```\n\n### Custom Filters for Applications\n```bash\n# Create filter for Node.js applications\nsudo tee /etc/fail2ban/filter.d/nodejs-auth.conf > /dev/null <<EOF\n[Definition]\nfailregex = ^.*Authentication failed for.*from <HOST>.*$\n            ^.*Invalid login attempt.*IP: <HOST>.*$\n            ^.*Failed login.*remote_addr: <HOST>.*$\nignoreregex =\nEOF\n\n# Create filter for Grafana\nsudo tee /etc/fail2ban/filter.d/grafana.conf > /dev/null <<EOF\n[Definition]\nfailregex = ^.*logger=context.*error=\"invalid username or password\".*remote_addr=<HOST>\n            ^.*logger=context.*error=\"user not found\".*remote_addr=<HOST>\nignoreregex =\nEOF\n\n# Create filter for GitLab\nsudo tee /etc/fail2ban/filter.d/gitlab.conf > /dev/null <<EOF\n[Definition]\nfailregex = ^.*Failed Login:.*IP: <HOST>.*$\n            ^.*Rack_Attack.*Throttle.*IP: <HOST>.*$\nignoreregex =\nEOF\n\n# Add application-specific jails\nsudo tee /etc/fail2ban/jail.d/applications.conf > /dev/null <<EOF\n[nodejs-auth]\nenabled = false\nfilter = nodejs-auth\nlogpath = /var/log/nodejs/app.log\nmaxretry = 5\nbantime = 1800\n\n[grafana]\nenabled = false\nfilter = grafana\nlogpath = /var/log/grafana/grafana.log\nmaxretry = 5\nbantime = 3600\n\n[gitlab]\nenabled = false\nfilter = gitlab\nlogpath = /var/log/gitlab/gitlab-rails/production.log\nmaxretry = 5\nbantime = 3600\nEOF\n```\n\n## Monitoring and Management\n\n### Fail2Ban Management Script\n```bash\nsudo tee /usr/local/bin/fail2ban-manager.sh > /dev/null <<'EOF'\n#!/bin/bash\n\ncase \"${1}\" in\n    \"status\")\n        echo \"=== Fail2Ban Status ===\"\n        sudo fail2ban-client status\n        echo \"\"\n        echo \"=== Active Jails ===\"\n        for jail in $(sudo fail2ban-client status | grep \"Jail list:\" | sed -e 's/.*Jail list://' -e 's/,/ /g'); do\n            echo \"Jail: $jail\"\n            sudo fail2ban-client status $jail\n            echo \"\"\n        done\n        ;;\n        \n    \"unban\")\n        IP=\"${2}\"\n        if [ -z \"$IP\" ]; then\n            echo \"Usage: $0 unban <ip_address>\"\n            exit 1\n        fi\n        \n        echo \"Unbanning IP: $IP from all jails\"\n        for jail in $(sudo fail2ban-client status | grep \"Jail list:\" | sed -e 's/.*Jail list://' -e 's/,/ /g'); do\n            sudo fail2ban-client set $jail unbanip $IP 2>/dev/null && echo \"  - Unbanned from $jail\"\n        done\n        ;;\n        \n    \"ban\")\n        IP=\"${2}\"\n        JAIL=\"${3:-sshd}\"\n        if [ -z \"$IP\" ]; then\n            echo \"Usage: $0 ban <ip_address> [jail_name]\"\n            exit 1\n        fi\n        \n        echo \"Banning IP: $IP in jail: $JAIL\"\n        sudo fail2ban-client set $JAIL banip $IP\n        ;;\n        \n    \"whitelist\")\n        IP=\"${2}\"\n        if [ -z \"$IP\" ]; then\n            echo \"Usage: $0 whitelist <ip_address>\"\n            exit 1\n        fi\n        \n        echo \"Adding $IP to whitelist\"\n        sudo sed -i \"s/ignoreip = .*/& $IP/\" /etc/fail2ban/jail.local\n        sudo systemctl restart fail2ban\n        ;;\n        \n    \"logs\")\n        JAIL=\"${2:-sshd}\"\n        echo \"Recent bans for jail: $JAIL\"\n        sudo grep \"Ban\\|Unban\" /var/log/fail2ban.log | grep \"$JAIL\" | tail -20\n        ;;\n        \n    \"stats\")\n        echo \"=== Fail2Ban Statistics ===\"\n        echo \"Total bans today: $(sudo grep \"$(date +'%Y-%m-%d')\" /var/log/fail2ban.log | grep -c \"Ban \")\"\n        echo \"Total unbans today: $(sudo grep \"$(date +'%Y-%m-%d')\" /var/log/fail2ban.log | grep -c \"Unban \")\"\n        echo \"\"\n        echo \"Top banned IPs (last 1000 entries):\"\n        sudo tail -1000 /var/log/fail2ban.log | grep \"Ban \" | awk '{print $(NF-1)}' | sort | uniq -c | sort -nr | head -10\n        ;;\n        \n    \"test\")\n        JAIL=\"${2:-sshd}\"\n        LOG_FILE=\"${3:-/var/log/auth.log}\"\n        echo \"Testing filter for jail: $JAIL\"\n        echo \"Log file: $LOG_FILE\"\n        sudo fail2ban-regex $LOG_FILE /etc/fail2ban/filter.d/${JAIL}.conf\n        ;;\n        \n    \"reload\")\n        echo \"Reloading Fail2Ban configuration...\"\n        sudo fail2ban-client reload\n        echo \"Configuration reloaded\"\n        ;;\n        \n    *)\n        echo \"Fail2Ban Management Script\"\n        echo \"Usage: $0 {status|unban|ban|whitelist|logs|stats|test|reload}\"\n        echo \"\"\n        echo \"Examples:\"\n        echo \"  $0 status                    # Show status of all jails\"\n        echo \"  $0 unban 192.168.1.100      # Unban IP from all jails\"\n        echo \"  $0 ban 10.0.0.1 sshd        # Ban IP in specific jail\"\n        echo \"  $0 whitelist 192.168.1.50   # Add IP to whitelist\"\n        echo \"  $0 logs sshd                # Show recent logs for jail\"\n        echo \"  $0 stats                    # Show ban statistics\"\n        echo \"  $0 test sshd                # Test jail filter\"\n        echo \"  $0 reload                   # Reload configuration\"\n        exit 1\n        ;;\nesac\nEOF\n\nsudo chmod +x /usr/local/bin/fail2ban-manager.sh\n```\n\n### Security Monitoring\n```bash\n# Create comprehensive monitoring script\nsudo tee /usr/local/bin/fail2ban-monitor.sh > /dev/null <<'EOF'\n#!/bin/bash\nMONITOR_LOG=\"/var/log/fail2ban-monitor.log\"\n\nlog_message() {\n    echo \"$(date '+%Y-%m-%d %H:%M:%S') - $1\" | tee -a ${MONITOR_LOG}\n}\n\n# Check Fail2Ban service\nif systemctl is-active fail2ban >/dev/null 2>&1; then\n    log_message \"âœ“ Fail2Ban service is running\"\nelse\n    log_message \"âœ— Fail2Ban service is not running\"\n    exit 1\nfi\n\n# Check jail status\nACTIVE_JAILS=$(sudo fail2ban-client status | grep \"Jail list:\" | sed -e 's/.*Jail list://' -e 's/,/ /g' | wc -w)\nlog_message \"â„¹ Active jails: ${ACTIVE_JAILS}\"\n\n# Check today's bans\nBANS_TODAY=$(sudo grep \"$(date +'%Y-%m-%d')\" /var/log/fail2ban.log | grep -c \"Ban \" 2>/dev/null || echo \"0\")\nUNBANS_TODAY=$(sudo grep \"$(date +'%Y-%m-%d')\" /var/log/fail2ban.log | grep -c \"Unban \" 2>/dev/null || echo \"0\")\nlog_message \"â„¹ Today's activity: ${BANS_TODAY} bans, ${UNBANS_TODAY} unbans\"\n\n# Check currently banned IPs\nTOTAL_BANNED=0\nfor jail in $(sudo fail2ban-client status | grep \"Jail list:\" | sed -e 's/.*Jail list://' -e 's/,/ /g'); do\n    JAIL_BANNED=$(sudo fail2ban-client status $jail | grep \"Currently banned:\" | awk '{print $3}')\n    TOTAL_BANNED=$((TOTAL_BANNED + JAIL_BANNED))\ndone\n\nlog_message \"â„¹ Currently banned IPs: ${TOTAL_BANNED}\"\n\n# Check for configuration errors\nif ! sudo fail2ban-client status >/dev/null 2>&1; then\n    log_message \"âš  Fail2Ban configuration errors detected\"\n    sudo fail2ban-client status 2>&1 | head -5 >> ${MONITOR_LOG}\nfi\n\n# Check log file accessibility\nfor jail in $(sudo fail2ban-client status | grep \"Jail list:\" | sed -e 's/.*Jail list://' -e 's/,/ /g'); do\n    LOG_PATH=$(sudo fail2ban-client get $jail logpath 2>/dev/null)\n    if [ -n \"$LOG_PATH\" ] && [ ! -r \"$LOG_PATH\" ]; then\n        log_message \"âš  Cannot read log file for $jail: $LOG_PATH\"\n    fi\ndone\n\nlog_message \"Fail2Ban monitoring completed\"\nEOF\n\nsudo chmod +x /usr/local/bin/fail2ban-monitor.sh\n\n# Schedule monitoring every 15 minutes\necho \"*/15 * * * * root /usr/local/bin/fail2ban-monitor.sh\" | sudo tee -a /etc/crontab\n```\n\n### Geographic Blocking Integration\n```bash\n# Install GeoIP for country-based blocking\nsudo apt install -y geoip-database geoip-bin  # Ubuntu/Debian\nsudo yum install -y GeoIP GeoIP-data          # RHEL/CentOS\n\n# Create geographic blocking filter\nsudo tee /etc/fail2ban/filter.d/geoip-block.conf > /dev/null <<EOF\n[Definition]\n# Block connections from specific countries\nfailregex = ^<HOST> -\nignoreregex =\n\n[Init]\n# Countries to block (ISO country codes)\ncountries = CN,RU,KP,IR\nEOF\n\n# Create action for geographic blocking\nsudo tee /etc/fail2ban/action.d/geoip-block.conf > /dev/null <<EOF\n[Definition]\nactioncheck = \nactionstart = \nactionstop = \nactionban = COUNTRY=$(geoiplookup <ip> | awk -F: '{print $2}' | awk '{print $1}'); if echo \"CN RU KP IR\" | grep -q \"$COUNTRY\"; then iptables -A f2b-<name> -s <ip> -j DROP; fi\nactionunban = iptables -D f2b-<name> -s <ip> -j DROP 2>/dev/null || true\n\n[Init]\nname = geoip-block\nEOF\n\n# Add geographic blocking jail\nsudo tee /etc/fail2ban/jail.d/geoip.conf > /dev/null <<EOF\n[geoip-block]\nenabled = false  # Enable if needed\nfilter = geoip-block\naction = geoip-block\nlogpath = /var/log/nginx/access.log\nmaxretry = 1\nbantime = 86400\nfindtime = 60\nEOF\n```\n\n## Integration Examples\n\n### Web Server Integration\n```bash\n# NGINX: Enable logging for Fail2Ban\nsudo tee -a /etc/nginx/nginx.conf > /dev/null <<EOF\n\nhttp {\n    # Log format for Fail2Ban\n    log_format fail2ban '\\$remote_addr - \\$remote_user [\\$time_local] '\n                       '\"\\$request\" \\$status \\$body_bytes_sent '\n                       '\"\\$http_referer\" \"\\$http_user_agent\"';\n    \n    # Enable access and error logging\n    access_log /var/log/nginx/access.log fail2ban;\n    error_log /var/log/nginx/error.log warn;\n}\nEOF\n\nsudo nginx -t && sudo systemctl reload nginx\n\n# Apache: Enable logging\nsudo tee -a /etc/apache2/apache2.conf > /dev/null <<EOF\n\n# Enhanced logging for Fail2Ban\nLogFormat \"%h %l %u %t \\\"%r\\\" %>s %O \\\"%{Referer}i\\\" \\\"%{User-Agent}i\\\"\" fail2ban\nCustomLog \\${APACHE_LOG_DIR}/access.log fail2ban\nErrorLog \\${APACHE_LOG_DIR}/error.log\nLogLevel warn\nEOF\n\nsudo systemctl reload apache2\n```\n\n## Backup and Disaster Recovery\n\n### Configuration Backup\n```bash\nsudo tee /usr/local/bin/fail2ban-backup.sh > /dev/null <<'EOF'\n#!/bin/bash\nBACKUP_DIR=\"/backup/fail2ban\"\nDATE=$(date +%Y%m%d_%H%M%S)\n\nmkdir -p ${BACKUP_DIR}\n\necho \"Starting Fail2Ban backup...\"\n\n# Backup configuration files\ntar -czf ${BACKUP_DIR}/fail2ban-config-${DATE}.tar.gz \\\n    /etc/fail2ban/ \\\n    /var/lib/fail2ban/\n\n# Export current ban list\nsudo fail2ban-client status | grep \"Jail list:\" | sed -e 's/.*Jail list://' -e 's/,/ /g' > /tmp/jails.txt\nwhile read jail; do\n    sudo fail2ban-client status $jail | grep \"Banned IP list:\" > ${BACKUP_DIR}/banned-ips-${jail}-${DATE}.txt\ndone < /tmp/jails.txt\n\n# Keep last 30 backups\nfind ${BACKUP_DIR} -name \"fail2ban-*\" -type f -mtime +30 -delete\n\necho \"Fail2Ban backup completed: ${DATE}\"\nEOF\n\nsudo chmod +x /usr/local/bin/fail2ban-backup.sh\n\n# Schedule weekly backups\necho \"0 4 * * 0 root /usr/local/bin/fail2ban-backup.sh\" | sudo tee -a /etc/crontab\n```\n\n## Troubleshooting\n\n### Common Issues and Solutions\n```bash\n# Check Fail2Ban service status\nsudo systemctl status fail2ban\nsudo journalctl -u fail2ban -f\n\n# Check jail status\nsudo fail2ban-client status\nsudo fail2ban-client status sshd\n\n# Test filter patterns\nsudo fail2ban-regex /var/log/auth.log /etc/fail2ban/filter.d/sshd.conf\n\n# Check banned IPs\nsudo fail2ban-client status sshd\nsudo iptables -L -n | grep f2b\n\n# View Fail2Ban logs\nsudo tail -f /var/log/fail2ban.log\n\n# Unban IP address\nsudo fail2ban-client set sshd unbanip 192.168.1.100\n\n# Ban IP manually\nsudo fail2ban-client set sshd banip 10.0.0.1\n\n# Reload configuration\nsudo fail2ban-client reload\n\n# Test SSH jail\nsudo grep \"Failed password\" /var/log/auth.log | head -5\nsudo fail2ban-regex /var/log/auth.log /etc/fail2ban/filter.d/sshd.conf\n\n# Check iptables rules\nsudo iptables -L f2b-sshd -n\nsudo iptables -L INPUT -n | grep f2b\n\n# Debug mode\nsudo fail2ban-server -f -v\n\n# Configuration validation\nsudo fail2ban-client -t\n\n# Check log file permissions\nls -la /var/log/auth.log\nls -la /var/log/nginx/access.log\n\n# Monitor real-time bans\nsudo tail -f /var/log/fail2ban.log | grep \"Ban\\|Unban\"\n\n# Check jail configuration\nsudo fail2ban-client get sshd maxretry\nsudo fail2ban-client get sshd bantime\nsudo fail2ban-client get sshd findtime\n```\n\n## Additional Resources\n\n- [Fail2Ban Documentation](https://fail2ban.readthedocs.io/)\n- [Fail2Ban GitHub](https://github.com/fail2ban/fail2ban)\n- [Filter Configuration Guide](https://fail2ban.readthedocs.io/en/stable/filters.html)\n\n---\n\n**Note:** This guide is part of the [HowToMgr](https://howtomgr.github.io) collection.","readmeHtml":"<h1 id=\"fail2ban-installation-guide\" class=\"mobile-header\">Fail2Ban Installation Guide</h1>\n<p class=\"mobile-paragraph\">Intrusion prevention software that protects servers from brute-force attacks by monitoring log files and automatically banning malicious IP addresses. Essential security tool for any public-facing server.</p>\n<h2 id=\"prerequisites\" class=\"mobile-header\">Prerequisites</h2>\n<li class=\"mobile-list-item\">Linux system (any modern distribution)</li>\n<li class=\"mobile-list-item\">Root or sudo access</li>\n<li class=\"mobile-list-item\">iptables or firewalld</li>\n<li class=\"mobile-list-item\">Log files to monitor (SSH, web server, etc.)</li>\n<li class=\"mobile-list-item\">Python 3.6+ (usually pre-installed)</li>\n<h2 id=\"installation\" class=\"mobile-header\">Installation</h2>\n<h3 id=\"ubuntudebian\" class=\"mobile-header\">Ubuntu/Debian</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Update system packages\nsudo apt update &amp;&amp; sudo apt upgrade -y\n\n# Install Fail2Ban\nsudo apt install -y fail2ban whois\n\n# Enable and start service\nsudo systemctl enable --now fail2ban\n\n# Verify installation\nsudo systemctl status fail2ban\nfail2ban-client version</code></pre>\n      </div>\n    </div>\n<h3 id=\"rhelcentosrocky-linuxalmalinux\" class=\"mobile-header\">RHEL/CentOS/Rocky Linux/AlmaLinux</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Install EPEL repository\nsudo yum install -y epel-release\n\n# Install Fail2Ban\nsudo yum install -y fail2ban fail2ban-systemd whois\n\n# Enable and start service\nsudo systemctl enable --now fail2ban\n\n# Verify installation\nsudo systemctl status fail2ban</code></pre>\n      </div>\n    </div>\n<h3 id=\"fedora\" class=\"mobile-header\">Fedora</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Install Fail2Ban\nsudo dnf install -y fail2ban whois\n\n# Enable and start service\nsudo systemctl enable --now fail2ban\n\n# Verify installation\nsudo systemctl status fail2ban</code></pre>\n      </div>\n    </div>\n<h2 id=\"configuration\" class=\"mobile-header\">Configuration</h2>\n<h3 id=\"basic-configuration\" class=\"mobile-header\">Basic Configuration</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Create local jail configuration (never edit jail.conf directly)\nsudo tee /etc/fail2ban/jail.local &gt; /dev/null &lt;&lt;EOF\n# Fail2Ban Local Configuration\n\n[DEFAULT]\n# Ban settings\nbantime = 3600\nfindtime = 600\nmaxretry = 3\nbackend = auto\n\n# Notification settings\ndestemail = admin@example.com\nsender = fail2ban@example.com\nmta = sendmail\n\n# Actions\naction = %(action_mwl)s\n\n# Ignore IP addresses (whitelist)\nignoreip = 127.0.0.1/8 ::1 192.168.1.0/24 10.0.0.0/8\n\n# SSH protection\n[sshd]\nenabled = true\nport = ssh,2222\nfilter = sshd\nlogpath = /var/log/auth.log\nmaxretry = 3\nbantime = 3600\n\n# HTTP/HTTPS brute force protection\n[nginx-http-auth]\nenabled = true\nfilter = nginx-http-auth\nlogpath = /var/log/nginx/error.log\nmaxretry = 3\n\n[nginx-noscript]\nenabled = true\nfilter = nginx-noscript\nlogpath = /var/log/nginx/access.log\nmaxretry = 6\n\n[nginx-badbots]\nenabled = true\nfilter = nginx-badbots\nlogpath = /var/log/nginx/access.log\nmaxretry = 2\n\n# Apache protection\n[apache-auth]\nenabled = false\nfilter = apache-auth\nlogpath = /var/log/apache2/error.log\nmaxretry = 3\n\n[apache-badbots]\nenabled = false\nfilter = apache-badbots\nlogpath = /var/log/apache2/access.log\nmaxretry = 2\n\n# Database protection\n[mysql]\nenabled = false\nfilter = mysql-auth\nlogpath = /var/log/mysql/error.log\nmaxretry = 3\nbantime = 7200\n\n[postgresql]\nenabled = false\nfilter = postgresql\nlogpath = /var/log/postgresql/postgresql-*-main.log\nmaxretry = 3\n\n# Mail server protection\n[postfix]\nenabled = false\nfilter = postfix\nlogpath = /var/log/mail.log\nmaxretry = 3\n\n[dovecot]\nenabled = false\nfilter = dovecot\nlogpath = /var/log/mail.log\nmaxretry = 3\n\n# FTP protection\n[vsftpd]\nenabled = false\nfilter = vsftpd\nlogpath = /var/log/vsftpd.log\nmaxretry = 3\n\n# Custom application protection\n[custom-app]\nenabled = false\nfilter = custom-app\nlogpath = /var/log/myapp/error.log\nmaxretry = 5\nbantime = 1800\nEOF</code></pre>\n      </div>\n    </div>\n<h3 id=\"custom-filters\" class=\"mobile-header\">Custom Filters</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Create custom filter for web applications\nsudo tee /etc/fail2ban/filter.d/nginx-custom.conf &gt; /dev/null &lt;&lt;EOF\n# Custom NGINX filter for advanced protection\n\n[Definition]\nfailregex = \n    # Failed login attempts\n    ^&lt;HOST&gt; -.*POST.*(wp-login\\.php|login|signin|admin).*HTTP/[0-9\\.]+\\&quot; 200\n    # Directory traversal attempts\n    ^&lt;HOST&gt; -.*GET.*(\\.\\./|\\.\\.\\%2F).*HTTP/[0-9\\.]+\\&quot; 404\n    # SQL injection attempts  \n    ^&lt;HOST&gt; -.*GET.*(union|select|insert|cast|set|declare|drop|create|alter|delete|update|replace|truncate).*HTTP/[0-9\\.]+\\&quot; 200\n    # XSS attempts\n    ^&lt;HOST&gt; -.*GET.*(script|javascript|vbscript|onload|onerror|onclick).*HTTP/[0-9\\.]+\\&quot; 200\n    # Suspicious user agents\n    ^&lt;HOST&gt; -.*\\&quot;(.*sqlmap.*|.*nikto.*|.*nessus.*|.*openvas.*|.*python-requests.*|.*curl.*|.*wget.*)\\&quot;$\n    # Too many 404 errors\n    ^&lt;HOST&gt; -.*\\&quot; 404 \n\nignoreregex =\n    # Ignore legitimate requests\n    ^&lt;HOST&gt; -.*GET.*/favicon\\.ico.*HTTP/[0-9\\.]+\\&quot; 404\n    ^&lt;HOST&gt; -.*GET.*/robots\\.txt.*HTTP/[0-9\\.]+\\&quot; 404\nEOF\n\n# Create WordPress-specific filter\nsudo tee /etc/fail2ban/filter.d/wordpress.conf &gt; /dev/null &lt;&lt;EOF\n[Definition]\nfailregex = \n    # WordPress login failures\n    ^&lt;HOST&gt; -.*POST.*/wp-login\\.php.*HTTP/[0-9\\.]+\\&quot; 200\n    # WordPress admin access attempts\n    ^&lt;HOST&gt; -.*GET.*/wp-admin.*HTTP/[0-9\\.]+\\&quot; 403\n    # XML-RPC attacks\n    ^&lt;HOST&gt; -.*POST.*/xmlrpc\\.php.*HTTP/[0-9\\.]+\\&quot; 200\n\nignoreregex =\n    # Ignore successful admin logins (adjust pattern as needed)\n    ^&lt;HOST&gt; -.*POST.*/wp-login\\.php.*HTTP/[0-9\\.]+\\&quot; 302\nEOF\n\n# Add WordPress jail to jail.local\nsudo tee -a /etc/fail2ban/jail.local &gt; /dev/null &lt;&lt;EOF\n\n[wordpress]\nenabled = true\nfilter = wordpress\nlogpath = /var/log/nginx/access.log\nport = http,https\nmaxretry = 3\nbantime = 1800\nfindtime = 600\nEOF\n\nsudo systemctl restart fail2ban</code></pre>\n      </div>\n    </div>\n<h3 id=\"advanced-configuration\" class=\"mobile-header\">Advanced Configuration</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Create advanced fail2ban configuration with multiple actions\nsudo tee /etc/fail2ban/action.d/telegram.conf &gt; /dev/null &lt;&lt;EOF\n# Telegram notification action\n\n[Definition]\nactionstart = \nactionstop = \nactioncheck = \nactionban = curl -s &quot;https://api.telegram.org/bot&lt;bot_token&gt;/sendMessage&quot; -d &quot;chat_id=&lt;chat_id&gt;&amp;text=ðŸš« Fail2Ban: &lt;name&gt; banned &lt;ip&gt; for &lt;failures&gt; failures&quot;\nactionunban = curl -s &quot;https://api.telegram.org/bot&lt;bot_token&gt;/sendMessage&quot; -d &quot;chat_id=&lt;chat_id&gt;&amp;text=âœ… Fail2Ban: &lt;name&gt; unbanned &lt;ip&gt;&quot;\n\n[Init]\nbot_token = your_telegram_bot_token\nchat_id = your_telegram_chat_id\nEOF\n\n# Create comprehensive protection configuration\nsudo tee /etc/fail2ban/jail.d/comprehensive.conf &gt; /dev/null &lt;&lt;EOF\n# Comprehensive Security Configuration\n\n[DEFAULT]\n# Enhanced ban settings\nbantime.increment = true\nbantime.rndtime = 60\nbantime.maxtime = 86400\nbantime.factor = 2\nbantime.formula = ban.Time * (1&lt;&lt;(ban.Count if ban.Count&lt;20 else 20)) * banFactor\n\n# Multiple actions (ban + notify)\naction = %(action_mwl)s[dest=security@example.com]\n         telegram[bot_token=your_bot_token, chat_id=your_chat_id]\n\n[sshd-aggressive]\nenabled = true\nport = ssh\nfilter = sshd[mode=aggressive]\nlogpath = /var/log/auth.log\nmaxretry = 2\nbantime = 7200\nfindtime = 300\n\n[nginx-limit-req]\nenabled = true\nfilter = nginx-limit-req\nlogpath = /var/log/nginx/error.log\nmaxretry = 10\nbantime = 3600\n\n[nginx-noproxy]\nenabled = true\nfilter = nginx-noproxy\nlogpath = /var/log/nginx/access.log\nmaxretry = 2\nbantime = 86400\n\n# Protect against port scans\n[port-scan]\nenabled = true\nfilter = port-scan\nlogpath = /var/log/messages\nmaxretry = 1\nbantime = 86400\n\n# DNS amplification protection\n[named-refused]\nenabled = false\nfilter = named-refused\nlogpath = /var/log/messages\nmaxretry = 5\nbantime = 3600\nEOF</code></pre>\n      </div>\n    </div>\n<h3 id=\"custom-filters-for-applications\" class=\"mobile-header\">Custom Filters for Applications</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Create filter for Node.js applications\nsudo tee /etc/fail2ban/filter.d/nodejs-auth.conf &gt; /dev/null &lt;&lt;EOF\n[Definition]\nfailregex = ^.*Authentication failed for.*from &lt;HOST&gt;.*$\n            ^.*Invalid login attempt.*IP: &lt;HOST&gt;.*$\n            ^.*Failed login.*remote_addr: &lt;HOST&gt;.*$\nignoreregex =\nEOF\n\n# Create filter for Grafana\nsudo tee /etc/fail2ban/filter.d/grafana.conf &gt; /dev/null &lt;&lt;EOF\n[Definition]\nfailregex = ^.*logger=context.*error=&quot;invalid username or password&quot;.*remote_addr=&lt;HOST&gt;\n            ^.*logger=context.*error=&quot;user not found&quot;.*remote_addr=&lt;HOST&gt;\nignoreregex =\nEOF\n\n# Create filter for GitLab\nsudo tee /etc/fail2ban/filter.d/gitlab.conf &gt; /dev/null &lt;&lt;EOF\n[Definition]\nfailregex = ^.*Failed Login:.*IP: &lt;HOST&gt;.*$\n            ^.*Rack_Attack.*Throttle.*IP: &lt;HOST&gt;.*$\nignoreregex =\nEOF\n\n# Add application-specific jails\nsudo tee /etc/fail2ban/jail.d/applications.conf &gt; /dev/null &lt;&lt;EOF\n[nodejs-auth]\nenabled = false\nfilter = nodejs-auth\nlogpath = /var/log/nodejs/app.log\nmaxretry = 5\nbantime = 1800\n\n[grafana]\nenabled = false\nfilter = grafana\nlogpath = /var/log/grafana/grafana.log\nmaxretry = 5\nbantime = 3600\n\n[gitlab]\nenabled = false\nfilter = gitlab\nlogpath = /var/log/gitlab/gitlab-rails/production.log\nmaxretry = 5\nbantime = 3600\nEOF</code></pre>\n      </div>\n    </div>\n<h2 id=\"monitoring-and-management\" class=\"mobile-header\">Monitoring and Management</h2>\n<h3 id=\"fail2ban-management-script\" class=\"mobile-header\">Fail2Ban Management Script</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\">sudo tee /usr/local/bin/fail2ban-manager.sh &gt; /dev/null &lt;&lt;&#039;EOF&#039;\n#!/bin/bash\n\ncase &quot;${1}&quot; in\n    &quot;status&quot;)\n        echo &quot;=== Fail2Ban Status ===&quot;\n        sudo fail2ban-client status\n        echo &quot;&quot;\n        echo &quot;=== Active Jails ===&quot;\n        for jail in $(sudo fail2ban-client status | grep &quot;Jail list:&quot; | sed -e &#039;s/.*Jail list://&#039; -e &#039;s/,/ /g&#039;); do\n            echo &quot;Jail: $jail&quot;\n            sudo fail2ban-client status $jail\n            echo &quot;&quot;\n        done\n        ;;\n        \n    &quot;unban&quot;)\n        IP=&quot;${2}&quot;\n        if [ -z &quot;$IP&quot; ]; then\n            echo &quot;Usage: $0 unban &lt;ip_address&gt;&quot;\n            exit 1\n        fi\n        \n        echo &quot;Unbanning IP: $IP from all jails&quot;\n        for jail in $(sudo fail2ban-client status | grep &quot;Jail list:&quot; | sed -e &#039;s/.*Jail list://&#039; -e &#039;s/,/ /g&#039;); do\n            sudo fail2ban-client set $jail unbanip $IP 2&gt;/dev/null &amp;&amp; echo &quot;  - Unbanned from $jail&quot;\n        done\n        ;;\n        \n    &quot;ban&quot;)\n        IP=&quot;${2}&quot;\n        JAIL=&quot;${3:-sshd}&quot;\n        if [ -z &quot;$IP&quot; ]; then\n            echo &quot;Usage: $0 ban &lt;ip_address&gt; [jail_name]&quot;\n            exit 1\n        fi\n        \n        echo &quot;Banning IP: $IP in jail: $JAIL&quot;\n        sudo fail2ban-client set $JAIL banip $IP\n        ;;\n        \n    &quot;whitelist&quot;)\n        IP=&quot;${2}&quot;\n        if [ -z &quot;$IP&quot; ]; then\n            echo &quot;Usage: $0 whitelist &lt;ip_address&gt;&quot;\n            exit 1\n        fi\n        \n        echo &quot;Adding $IP to whitelist&quot;\n        sudo sed -i &quot;s/ignoreip = .*/&amp; $IP/&quot; /etc/fail2ban/jail.local\n        sudo systemctl restart fail2ban\n        ;;\n        \n    &quot;logs&quot;)\n        JAIL=&quot;${2:-sshd}&quot;\n        echo &quot;Recent bans for jail: $JAIL&quot;\n        sudo grep &quot;Ban\\|Unban&quot; /var/log/fail2ban.log | grep &quot;$JAIL&quot; | tail -20\n        ;;\n        \n    &quot;stats&quot;)\n        echo &quot;=== Fail2Ban Statistics ===&quot;\n        echo &quot;Total bans today: $(sudo grep &quot;$(date +&#039;%Y-%m-%d&#039;)&quot; /var/log/fail2ban.log | grep -c &quot;Ban &quot;)&quot;\n        echo &quot;Total unbans today: $(sudo grep &quot;$(date +&#039;%Y-%m-%d&#039;)&quot; /var/log/fail2ban.log | grep -c &quot;Unban &quot;)&quot;\n        echo &quot;&quot;\n        echo &quot;Top banned IPs (last 1000 entries):&quot;\n        sudo tail -1000 /var/log/fail2ban.log | grep &quot;Ban &quot; | awk &#039;{print $(NF-1)}&#039; | sort | uniq -c | sort -nr | head -10\n        ;;\n        \n    &quot;test&quot;)\n        JAIL=&quot;${2:-sshd}&quot;\n        LOG_FILE=&quot;${3:-/var/log/auth.log}&quot;\n        echo &quot;Testing filter for jail: $JAIL&quot;\n        echo &quot;Log file: $LOG_FILE&quot;\n        sudo fail2ban-regex $LOG_FILE /etc/fail2ban/filter.d/${JAIL}.conf\n        ;;\n        \n    &quot;reload&quot;)\n        echo &quot;Reloading Fail2Ban configuration...&quot;\n        sudo fail2ban-client reload\n        echo &quot;Configuration reloaded&quot;\n        ;;\n        \n    *)\n        echo &quot;Fail2Ban Management Script&quot;\n        echo &quot;Usage: $0 {status|unban|ban|whitelist|logs|stats|test|reload}&quot;\n        echo &quot;&quot;\n        echo &quot;Examples:&quot;\n        echo &quot;  $0 status                    # Show status of all jails&quot;\n        echo &quot;  $0 unban 192.168.1.100      # Unban IP from all jails&quot;\n        echo &quot;  $0 ban 10.0.0.1 sshd        # Ban IP in specific jail&quot;\n        echo &quot;  $0 whitelist 192.168.1.50   # Add IP to whitelist&quot;\n        echo &quot;  $0 logs sshd                # Show recent logs for jail&quot;\n        echo &quot;  $0 stats                    # Show ban statistics&quot;\n        echo &quot;  $0 test sshd                # Test jail filter&quot;\n        echo &quot;  $0 reload                   # Reload configuration&quot;\n        exit 1\n        ;;\nesac\nEOF\n\nsudo chmod +x /usr/local/bin/fail2ban-manager.sh</code></pre>\n      </div>\n    </div>\n<h3 id=\"security-monitoring\" class=\"mobile-header\">Security Monitoring</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Create comprehensive monitoring script\nsudo tee /usr/local/bin/fail2ban-monitor.sh &gt; /dev/null &lt;&lt;&#039;EOF&#039;\n#!/bin/bash\nMONITOR_LOG=&quot;/var/log/fail2ban-monitor.log&quot;\n\nlog_message() {\n    echo &quot;$(date &#039;+%Y-%m-%d %H:%M:%S&#039;) - $1&quot; | tee -a ${MONITOR_LOG}\n}\n\n# Check Fail2Ban service\nif systemctl is-active fail2ban &gt;/dev/null 2&gt;&amp;1; then\n    log_message &quot;âœ“ Fail2Ban service is running&quot;\nelse\n    log_message &quot;âœ— Fail2Ban service is not running&quot;\n    exit 1\nfi\n\n# Check jail status\nACTIVE_JAILS=$(sudo fail2ban-client status | grep &quot;Jail list:&quot; | sed -e &#039;s/.*Jail list://&#039; -e &#039;s/,/ /g&#039; | wc -w)\nlog_message &quot;â„¹ Active jails: ${ACTIVE_JAILS}&quot;\n\n# Check today&#039;s bans\nBANS_TODAY=$(sudo grep &quot;$(date +&#039;%Y-%m-%d&#039;)&quot; /var/log/fail2ban.log | grep -c &quot;Ban &quot; 2&gt;/dev/null || echo &quot;0&quot;)\nUNBANS_TODAY=$(sudo grep &quot;$(date +&#039;%Y-%m-%d&#039;)&quot; /var/log/fail2ban.log | grep -c &quot;Unban &quot; 2&gt;/dev/null || echo &quot;0&quot;)\nlog_message &quot;â„¹ Today&#039;s activity: ${BANS_TODAY} bans, ${UNBANS_TODAY} unbans&quot;\n\n# Check currently banned IPs\nTOTAL_BANNED=0\nfor jail in $(sudo fail2ban-client status | grep &quot;Jail list:&quot; | sed -e &#039;s/.*Jail list://&#039; -e &#039;s/,/ /g&#039;); do\n    JAIL_BANNED=$(sudo fail2ban-client status $jail | grep &quot;Currently banned:&quot; | awk &#039;{print $3}&#039;)\n    TOTAL_BANNED=$((TOTAL_BANNED + JAIL_BANNED))\ndone\n\nlog_message &quot;â„¹ Currently banned IPs: ${TOTAL_BANNED}&quot;\n\n# Check for configuration errors\nif ! sudo fail2ban-client status &gt;/dev/null 2&gt;&amp;1; then\n    log_message &quot;âš  Fail2Ban configuration errors detected&quot;\n    sudo fail2ban-client status 2&gt;&amp;1 | head -5 &gt;&gt; ${MONITOR_LOG}\nfi\n\n# Check log file accessibility\nfor jail in $(sudo fail2ban-client status | grep &quot;Jail list:&quot; | sed -e &#039;s/.*Jail list://&#039; -e &#039;s/,/ /g&#039;); do\n    LOG_PATH=$(sudo fail2ban-client get $jail logpath 2&gt;/dev/null)\n    if [ -n &quot;$LOG_PATH&quot; ] &amp;&amp; [ ! -r &quot;$LOG_PATH&quot; ]; then\n        log_message &quot;âš  Cannot read log file for $jail: $LOG_PATH&quot;\n    fi\ndone\n\nlog_message &quot;Fail2Ban monitoring completed&quot;\nEOF\n\nsudo chmod +x /usr/local/bin/fail2ban-monitor.sh\n\n# Schedule monitoring every 15 minutes\necho &quot;*/15 * * * * root /usr/local/bin/fail2ban-monitor.sh&quot; | sudo tee -a /etc/crontab</code></pre>\n      </div>\n    </div>\n<h3 id=\"geographic-blocking-integration\" class=\"mobile-header\">Geographic Blocking Integration</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Install GeoIP for country-based blocking\nsudo apt install -y geoip-database geoip-bin  # Ubuntu/Debian\nsudo yum install -y GeoIP GeoIP-data          # RHEL/CentOS\n\n# Create geographic blocking filter\nsudo tee /etc/fail2ban/filter.d/geoip-block.conf &gt; /dev/null &lt;&lt;EOF\n[Definition]\n# Block connections from specific countries\nfailregex = ^&lt;HOST&gt; -\nignoreregex =\n\n[Init]\n# Countries to block (ISO country codes)\ncountries = CN,RU,KP,IR\nEOF\n\n# Create action for geographic blocking\nsudo tee /etc/fail2ban/action.d/geoip-block.conf &gt; /dev/null &lt;&lt;EOF\n[Definition]\nactioncheck = \nactionstart = \nactionstop = \nactionban = COUNTRY=$(geoiplookup &lt;ip&gt; | awk -F: &#039;{print $2}&#039; | awk &#039;{print $1}&#039;); if echo &quot;CN RU KP IR&quot; | grep -q &quot;$COUNTRY&quot;; then iptables -A f2b-&lt;name&gt; -s &lt;ip&gt; -j DROP; fi\nactionunban = iptables -D f2b-&lt;name&gt; -s &lt;ip&gt; -j DROP 2&gt;/dev/null || true\n\n[Init]\nname = geoip-block\nEOF\n\n# Add geographic blocking jail\nsudo tee /etc/fail2ban/jail.d/geoip.conf &gt; /dev/null &lt;&lt;EOF\n[geoip-block]\nenabled = false  # Enable if needed\nfilter = geoip-block\naction = geoip-block\nlogpath = /var/log/nginx/access.log\nmaxretry = 1\nbantime = 86400\nfindtime = 60\nEOF</code></pre>\n      </div>\n    </div>\n<h2 id=\"integration-examples\" class=\"mobile-header\">Integration Examples</h2>\n<h3 id=\"web-server-integration\" class=\"mobile-header\">Web Server Integration</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># NGINX: Enable logging for Fail2Ban\nsudo tee -a /etc/nginx/nginx.conf &gt; /dev/null &lt;&lt;EOF\n\nhttp {\n    # Log format for Fail2Ban\n    log_format fail2ban &#039;\\$remote_addr - \\$remote_user [\\$time_local] &#039;\n                       &#039;&quot;\\$request&quot; \\$status \\$body_bytes_sent &#039;\n                       &#039;&quot;\\$http_referer&quot; &quot;\\$http_user_agent&quot;&#039;;\n    \n    # Enable access and error logging\n    access_log /var/log/nginx/access.log fail2ban;\n    error_log /var/log/nginx/error.log warn;\n}\nEOF\n\nsudo nginx -t &amp;&amp; sudo systemctl reload nginx\n\n# Apache: Enable logging\nsudo tee -a /etc/apache2/apache2.conf &gt; /dev/null &lt;&lt;EOF\n\n# Enhanced logging for Fail2Ban\nLogFormat &quot;%h %l %u %t \\&quot;%r\\&quot; %&gt;s %O \\&quot;%{Referer}i\\&quot; \\&quot;%{User-Agent}i\\&quot;&quot; fail2ban\nCustomLog \\${APACHE_LOG_DIR}/access.log fail2ban\nErrorLog \\${APACHE_LOG_DIR}/error.log\nLogLevel warn\nEOF\n\nsudo systemctl reload apache2</code></pre>\n      </div>\n    </div>\n<h2 id=\"backup-and-disaster-recovery\" class=\"mobile-header\">Backup and Disaster Recovery</h2>\n<h3 id=\"configuration-backup\" class=\"mobile-header\">Configuration Backup</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\">sudo tee /usr/local/bin/fail2ban-backup.sh &gt; /dev/null &lt;&lt;&#039;EOF&#039;\n#!/bin/bash\nBACKUP_DIR=&quot;/backup/fail2ban&quot;\nDATE=$(date +%Y%m%d_%H%M%S)\n\nmkdir -p ${BACKUP_DIR}\n\necho &quot;Starting Fail2Ban backup...&quot;\n\n# Backup configuration files\ntar -czf ${BACKUP_DIR}/fail2ban-config-${DATE}.tar.gz \\\n    /etc/fail2ban/ \\\n    /var/lib/fail2ban/\n\n# Export current ban list\nsudo fail2ban-client status | grep &quot;Jail list:&quot; | sed -e &#039;s/.*Jail list://&#039; -e &#039;s/,/ /g&#039; &gt; /tmp/jails.txt\nwhile read jail; do\n    sudo fail2ban-client status $jail | grep &quot;Banned IP list:&quot; &gt; ${BACKUP_DIR}/banned-ips-${jail}-${DATE}.txt\ndone &lt; /tmp/jails.txt\n\n# Keep last 30 backups\nfind ${BACKUP_DIR} -name &quot;fail2ban-*&quot; -type f -mtime +30 -delete\n\necho &quot;Fail2Ban backup completed: ${DATE}&quot;\nEOF\n\nsudo chmod +x /usr/local/bin/fail2ban-backup.sh\n\n# Schedule weekly backups\necho &quot;0 4 * * 0 root /usr/local/bin/fail2ban-backup.sh&quot; | sudo tee -a /etc/crontab</code></pre>\n      </div>\n    </div>\n<h2 id=\"troubleshooting\" class=\"mobile-header\">Troubleshooting</h2>\n<h3 id=\"common-issues-and-solutions\" class=\"mobile-header\">Common Issues and Solutions</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Check Fail2Ban service status\nsudo systemctl status fail2ban\nsudo journalctl -u fail2ban -f\n\n# Check jail status\nsudo fail2ban-client status\nsudo fail2ban-client status sshd\n\n# Test filter patterns\nsudo fail2ban-regex /var/log/auth.log /etc/fail2ban/filter.d/sshd.conf\n\n# Check banned IPs\nsudo fail2ban-client status sshd\nsudo iptables -L -n | grep f2b\n\n# View Fail2Ban logs\nsudo tail -f /var/log/fail2ban.log\n\n# Unban IP address\nsudo fail2ban-client set sshd unbanip 192.168.1.100\n\n# Ban IP manually\nsudo fail2ban-client set sshd banip 10.0.0.1\n\n# Reload configuration\nsudo fail2ban-client reload\n\n# Test SSH jail\nsudo grep &quot;Failed password&quot; /var/log/auth.log | head -5\nsudo fail2ban-regex /var/log/auth.log /etc/fail2ban/filter.d/sshd.conf\n\n# Check iptables rules\nsudo iptables -L f2b-sshd -n\nsudo iptables -L INPUT -n | grep f2b\n\n# Debug mode\nsudo fail2ban-server -f -v\n\n# Configuration validation\nsudo fail2ban-client -t\n\n# Check log file permissions\nls -la /var/log/auth.log\nls -la /var/log/nginx/access.log\n\n# Monitor real-time bans\nsudo tail -f /var/log/fail2ban.log | grep &quot;Ban\\|Unban&quot;\n\n# Check jail configuration\nsudo fail2ban-client get sshd maxretry\nsudo fail2ban-client get sshd bantime\nsudo fail2ban-client get sshd findtime</code></pre>\n      </div>\n    </div>\n<h2 id=\"additional-resources\" class=\"mobile-header\">Additional Resources</h2>\n<li class=\"mobile-list-item\"><a href=\"https://fail2ban.readthedocs.io/\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">Fail2Ban Documentation</a></li>\n<li class=\"mobile-list-item\"><a href=\"https://github.com/fail2ban/fail2ban\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">Fail2Ban GitHub</a></li>\n<li class=\"mobile-list-item\"><a href=\"https://fail2ban.readthedocs.io/en/stable/filters.html\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">Filter Configuration Guide</a></li>\n<p class=\"mobile-paragraph\">---</p>\n<p class=\"mobile-paragraph\"><strong>Note:</strong> This guide is part of the <a href=\"https://howtomgr.github.io\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">HowToMgr</a> collection.</p>","readTime":"12 min","wordCount":2249,"lastBuilt":"2025-09-14T18:12:06.210Z"},{"name":"ghost","displayName":"Ghost","slug":"ghost","description":"Repo for ghost","category":"productivity","language":null,"stars":0,"forks":0,"topics":[],"githubUrl":"https://github.com/howtomgr/ghost","updatedAt":"2025-09-08T03:07:48Z","createdAt":"2025-09-08T03:07:38Z","readmeRaw":"## ðŸ‘‹ Welcome to ghost ðŸš€  \n\nghost README  \n  \n  \n## Author  \n\nðŸ¤– casjay: [Github](https://github.com/casjay) ðŸ¤–  \n","readmeHtml":"<h2 id=\"welcome-to-ghost\" class=\"mobile-header\">ðŸ‘‹ Welcome to ghost ðŸš€  </h2>\n<p class=\"mobile-paragraph\">ghost README  </p>\n<h2 id=\"author\" class=\"mobile-header\">Author  </h2>\n<p class=\"mobile-paragraph\">ðŸ¤– casjay: <a href=\"https://github.com/casjay\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">Github</a> ðŸ¤–  </p>","readTime":"1 min","wordCount":15,"lastBuilt":"2025-09-14T18:12:19.993Z"},{"name":"gitea","displayName":"Gitea","slug":"gitea","description":"Repo for gitea","category":"infrastructure","language":null,"stars":0,"forks":0,"topics":[],"githubUrl":"https://github.com/howtomgr/gitea","updatedAt":"2025-09-08T03:07:55Z","createdAt":"2023-08-28T03:47:56Z","readmeRaw":"# Gitea Install\n\n```bash\necho \"\n###### Debian Main Repos\ndeb http://ftp.us.debian.org/debian/ stable main contrib non-free\ndeb http://ftp.us.debian.org/debian/ stable-updates main contrib non-free\ndeb http://security.debian.org/ stable/updates main contrib non-free\n\" > /etc/apt/sources.list\n\napt update && apt upgrade -y\napt install -y curl wget apt-transport-https psmisc net-tools postfix dirmngr neovim git-core build-essential nginx-full nfs-common htop open-vm-tools\ndpkg-reconfigure postfix\ndpkg-reconfigure dash\n\nmkdir -p /mnt/backups /var/www/html/.well-known /etc/letsencrypt\necho \"\n10.0.254.1:/mnt/Volume_1/backups         /mnt/backups                 nfs defaults,rw 0 0\n10.0.254.1:/var/www/html/.well-known     /var/www/html/.well-known    nfs defaults,rw 0 0\n10.0.254.1:/etc/letsencrypt              /etc/letsencrypt             nfs defaults,rw 0 0\n\" >> /etc/fstab\nmount -a\n\nuseradd --system --shell /bin/bash --comment 'Git Version Control' --create-home --home-dir /home/git git\n\nmkdir -p /var/lib/gitea/{custom,data,indexers,public,log}\nchown git:git /var/lib/gitea/{data,indexers,log}\nchmod 750 /var/lib/gitea/{data,indexers,log}\nmkdir /etc/gitea\nchown root:git /etc/gitea\nchmod 770 /etc/gitea\nchmod 750 /etc/gitea\nchmod 644 /etc/gitea/app.ini\n```\n","readmeHtml":"<h1 id=\"gitea-install\" class=\"mobile-header\">Gitea Install</h1>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\">echo &quot;\n###### Debian Main Repos\ndeb http://ftp.us.debian.org/debian/ stable main contrib non-free\ndeb http://ftp.us.debian.org/debian/ stable-updates main contrib non-free\ndeb http://security.debian.org/ stable/updates main contrib non-free\n&quot; &gt; /etc/apt/sources.list\n\napt update &amp;&amp; apt upgrade -y\napt install -y curl wget apt-transport-https psmisc net-tools postfix dirmngr neovim git-core build-essential nginx-full nfs-common htop open-vm-tools\ndpkg-reconfigure postfix\ndpkg-reconfigure dash\n\nmkdir -p /mnt/backups /var/www/html/.well-known /etc/letsencrypt\necho &quot;\n10.0.254.1:/mnt/Volume_1/backups         /mnt/backups                 nfs defaults,rw 0 0\n10.0.254.1:/var/www/html/.well-known     /var/www/html/.well-known    nfs defaults,rw 0 0\n10.0.254.1:/etc/letsencrypt              /etc/letsencrypt             nfs defaults,rw 0 0\n&quot; &gt;&gt; /etc/fstab\nmount -a\n\nuseradd --system --shell /bin/bash --comment &#039;Git Version Control&#039; --create-home --home-dir /home/git git\n\nmkdir -p /var/lib/gitea/{custom,data,indexers,public,log}\nchown git:git /var/lib/gitea/{data,indexers,log}\nchmod 750 /var/lib/gitea/{data,indexers,log}\nmkdir /etc/gitea\nchown root:git /etc/gitea\nchmod 770 /etc/gitea\nchmod 750 /etc/gitea\nchmod 644 /etc/gitea/app.ini</code></pre>\n      </div>\n    </div>","readTime":"1 min","wordCount":125,"lastBuilt":"2025-09-14T18:12:19.714Z"},{"name":"gitlab","displayName":"Gitlab","slug":"gitlab","description":"Repo for gitlab","category":"infrastructure","language":null,"stars":0,"forks":0,"topics":[],"githubUrl":"https://github.com/howtomgr/gitlab","updatedAt":"2025-09-14T01:30:01Z","createdAt":"2025-09-08T03:07:56Z","readmeRaw":"# GitLab Installation Guide\n\nComplete DevOps platform with Git repository management, CI/CD pipelines, issue tracking, and container registry. Enterprise-grade solution for modern software development lifecycle with advanced security features.\n\n## Prerequisites\n\n- Linux system (any modern distribution)\n- 8GB RAM minimum, 16GB+ recommended for production\n- 4 CPU cores minimum, 8+ recommended\n- 50GB+ available disk space, SSD recommended\n- Domain name for external access\n- SSL certificates for production deployment\n- SMTP server for email notifications\n\n## Installation\n\n### Using Omnibus Package (Recommended)\n\n#### Ubuntu/Debian\n```bash\n# Install dependencies\nsudo apt-get update\nsudo apt-get install -y curl openssh-server ca-certificates tzdata perl postfix\n\n# Configure Postfix for email\nsudo dpkg-reconfigure postfix\n\n# Add GitLab repository\ncurl -fsSL https://packages.gitlab.com/install/repositories/gitlab/gitlab-ee/script.deb.sh | sudo bash\n\n# Install GitLab Enterprise Edition\nsudo EXTERNAL_URL=\"https://gitlab.example.com\" apt-get install -y gitlab-ee\n\n# For GitLab Community Edition\nsudo EXTERNAL_URL=\"https://gitlab.example.com\" apt-get install -y gitlab-ce\n\n# Initial configuration\nsudo gitlab-ctl reconfigure\n\n# Check status\nsudo gitlab-ctl status\n```\n\n#### RHEL/CentOS/Rocky Linux/AlmaLinux\n```bash\n# Install dependencies\nsudo yum install -y curl policycoreutils-python-utils openssh-server perl postfix\n\n# For newer versions\nsudo dnf install -y curl policycoreutils-python-utils openssh-server perl postfix\n\n# Enable and start services\nsudo systemctl enable --now sshd postfix\n\n# Configure SELinux and firewall\nsudo setsebool -P httpd_can_network_connect 1\nsudo firewall-cmd --permanent --add-service=http\nsudo firewall-cmd --permanent --add-service=https\nsudo firewall-cmd --permanent --add-service=ssh\nsudo firewall-cmd --reload\n\n# Add GitLab repository\ncurl -fsSL https://packages.gitlab.com/install/repositories/gitlab/gitlab-ee/script.rpm.sh | sudo bash\n\n# Install GitLab\nsudo EXTERNAL_URL=\"https://gitlab.example.com\" yum install -y gitlab-ee\n\n# Configure and start\nsudo gitlab-ctl reconfigure\n```\n\n#### Fedora\n```bash\n# Install dependencies\nsudo dnf install -y curl policycoreutils-python-utils openssh-server perl postfix\n\n# Enable services\nsudo systemctl enable --now sshd postfix\n\n# Configure firewall\nsudo firewall-cmd --permanent --add-service=http\nsudo firewall-cmd --permanent --add-service=https\nsudo firewall-cmd --reload\n\n# Add GitLab repository\ncurl -fsSL https://packages.gitlab.com/install/repositories/gitlab/gitlab-ee/script.rpm.sh | sudo bash\n\n# Install GitLab\nsudo EXTERNAL_URL=\"https://gitlab.example.com\" dnf install -y gitlab-ee\n\nsudo gitlab-ctl reconfigure\n```\n\n### Docker Installation (Single Container)\n```bash\n# Create GitLab directories\nsudo mkdir -p /srv/gitlab/{config,logs,data}\n\n# Set environment variables\nexport GITLAB_HOME=/srv/gitlab\n\n# Run GitLab container with comprehensive configuration\nsudo docker run --detach \\\n  --hostname gitlab.example.com \\\n  --env GITLAB_OMNIBUS_CONFIG=\"\n    external_url 'https://gitlab.example.com';\n    gitlab_rails['gitlab_shell_ssh_port'] = 2222;\n    \n    # SSL configuration\n    nginx['ssl_certificate'] = '/etc/gitlab/ssl/gitlab.crt';\n    nginx['ssl_certificate_key'] = '/etc/gitlab/ssl/gitlab.key';\n    nginx['ssl_protocols'] = 'TLSv1.2 TLSv1.3';\n    nginx['ssl_prefer_server_ciphers'] = 'off';\n    \n    # Security settings\n    gitlab_rails['rack_attack_git_basic_auth'] = {\n      'enabled' => true,\n      'ip_whitelist' => ['127.0.0.1', '192.168.1.0/24'],\n      'maxretry' => 10,\n      'findtime' => 60,\n      'bantime' => 3600\n    };\n    \n    # Performance settings\n    postgresql['shared_preload_libraries'] = 'pg_stat_statements';\n    postgresql['max_connections'] = 200;\n    postgresql['shared_buffers'] = '1GB';\n    postgresql['effective_cache_size'] = '4GB';\n    \n    # Container Registry\n    registry_external_url 'https://registry.example.com';\n    gitlab_rails['registry_enabled'] = true;\n    \n    # Monitoring\n    prometheus_monitoring['enable'] = true;\n    grafana['enable'] = true;\n    grafana['admin_password'] = 'secure_grafana_password';\n    \n    # Email configuration\n    gitlab_rails['smtp_enable'] = true;\n    gitlab_rails['smtp_address'] = 'smtp.example.com';\n    gitlab_rails['smtp_port'] = 587;\n    gitlab_rails['smtp_user_name'] = 'gitlab@example.com';\n    gitlab_rails['smtp_password'] = 'smtp_secure_password';\n    gitlab_rails['smtp_domain'] = 'example.com';\n    gitlab_rails['smtp_authentication'] = 'login';\n    gitlab_rails['smtp_enable_starttls_auto'] = true;\n    gitlab_rails['smtp_tls'] = false;\n    gitlab_rails['smtp_openssl_verify_mode'] = 'peer';\n    \n    # Email settings\n    gitlab_rails['gitlab_email_from'] = 'gitlab@example.com';\n    gitlab_rails['gitlab_email_display_name'] = 'GitLab';\n    \n    # Backup configuration\n    gitlab_rails['backup_keep_time'] = 604800;\n    gitlab_rails['backup_upload_connection'] = {\n      'provider' => 'AWS',\n      'region' => 'us-west-2',\n      'aws_access_key_id' => 'backup_access_key',\n      'aws_secret_access_key' => 'backup_secret_key'\n    };\n    gitlab_rails['backup_upload_remote_directory'] = 'gitlab-backups';\n    \" \\\n  --publish 443:443 --publish 80:80 --publish 2222:22 \\\n  --name gitlab \\\n  --restart unless-stopped \\\n  --volume $GITLAB_HOME/config:/etc/gitlab \\\n  --volume $GITLAB_HOME/logs:/var/log/gitlab \\\n  --volume $GITLAB_HOME/data:/var/opt/gitlab \\\n  --shm-size 256m \\\n  gitlab/gitlab-ee:latest\n```\n\n### Docker Compose (Production Setup)\n```bash\nmkdir -p ~/gitlab-stack\ncd ~/gitlab-stack\n\ncat > docker-compose.yml <<EOF\nversion: '3.8'\n\nservices:\n  gitlab:\n    image: gitlab/gitlab-ee:latest\n    container_name: gitlab\n    restart: unless-stopped\n    hostname: gitlab.example.com\n    environment:\n      GITLAB_OMNIBUS_CONFIG: |\n        external_url 'https://gitlab.example.com'\n        \n        # Performance settings\n        postgresql['shared_buffers'] = \"2GB\"\n        postgresql['effective_cache_size'] = \"8GB\"\n        postgresql['max_connections'] = 300\n        \n        # Security settings\n        gitlab_rails['rack_attack_git_basic_auth'] = {\n          'enabled' => true,\n          'ip_whitelist' => ['127.0.0.1', '10.0.0.0/8', '172.16.0.0/12', '192.168.0.0/16'],\n          'maxretry' => 10,\n          'findtime' => 60,\n          'bantime' => 3600\n        }\n        \n        # Container Registry\n        registry_external_url 'https://registry.example.com'\n        gitlab_rails['registry_enabled'] = true\n        \n        # Monitoring\n        prometheus_monitoring['enable'] = true\n        grafana['enable'] = true\n        \n        # Let's Encrypt (disable for reverse proxy setup)\n        letsencrypt['enable'] = false\n        nginx['listen_port'] = 80\n        nginx['listen_https'] = false\n        \n        # GitLab Pages\n        pages_external_url \"https://pages.example.com\"\n        gitlab_pages['enable'] = true\n    ports:\n      - '80:80'\n      - '443:443'\n      - '2222:22'\n    volumes:\n      - './config:/etc/gitlab'\n      - './logs:/var/log/gitlab'\n      - './data:/var/opt/gitlab'\n    networks:\n      - gitlab\n    shm_size: '256m'\n    healthcheck:\n      test: [\"CMD-SHELL\", \"gitlab-healthcheck --fail --max-time 10\"]\n      interval: 60s\n      timeout: 30s\n      retries: 5\n      start_period: 200s\n\n  gitlab-runner:\n    image: gitlab/gitlab-runner:latest\n    container_name: gitlab-runner\n    restart: unless-stopped\n    volumes:\n      - './runner-config:/etc/gitlab-runner'\n      - '/var/run/docker.sock:/var/run/docker.sock'\n    networks:\n      - gitlab\n    depends_on:\n      - gitlab\n\n  redis:\n    image: redis:7-alpine\n    container_name: gitlab-redis\n    restart: unless-stopped\n    command: redis-server --appendonly yes --requirepass redis_secure_password\n    volumes:\n      - redis-data:/data\n    networks:\n      - gitlab\n\n  nginx:\n    image: nginx:alpine\n    container_name: gitlab-nginx\n    restart: unless-stopped\n    ports:\n      - '443:443'\n    volumes:\n      - './nginx/nginx.conf:/etc/nginx/nginx.conf:ro'\n      - './nginx/ssl:/etc/nginx/ssl:ro'\n    depends_on:\n      - gitlab\n    networks:\n      - gitlab\n\nnetworks:\n  gitlab:\n    driver: bridge\n\nvolumes:\n  redis-data:\nEOF\n\n# Create NGINX reverse proxy configuration\nmkdir -p nginx\ncat > nginx/nginx.conf <<EOF\nevents {\n    worker_connections 1024;\n}\n\nhttp {\n    upstream gitlab {\n        server gitlab:80;\n    }\n    \n    upstream registry {\n        server gitlab:5000;\n    }\n\n    server {\n        listen 443 ssl http2;\n        server_name gitlab.example.com;\n\n        ssl_certificate /etc/nginx/ssl/gitlab.crt;\n        ssl_certificate_key /etc/nginx/ssl/gitlab.key;\n        ssl_protocols TLSv1.2 TLSv1.3;\n        ssl_ciphers ECDHE-RSA-AES256-GCM-SHA512:DHE-RSA-AES256-GCM-SHA512;\n\n        client_max_body_size 0;\n        gzip off;\n\n        location / {\n            proxy_pass http://gitlab;\n            proxy_set_header Host \\$host;\n            proxy_set_header X-Real-IP \\$remote_addr;\n            proxy_set_header X-Forwarded-For \\$proxy_add_x_forwarded_for;\n            proxy_set_header X-Forwarded-Proto \\$scheme;\n        }\n    }\n\n    server {\n        listen 443 ssl http2;\n        server_name registry.example.com;\n\n        ssl_certificate /etc/nginx/ssl/registry.crt;\n        ssl_certificate_key /etc/nginx/ssl/registry.key;\n\n        client_max_body_size 0;\n\n        location /v2/ {\n            proxy_pass http://registry;\n            proxy_set_header Host \\$host;\n            proxy_set_header X-Real-IP \\$remote_addr;\n            proxy_set_header X-Forwarded-For \\$proxy_add_x_forwarded_for;\n            proxy_set_header X-Forwarded-Proto \\$scheme;\n        }\n    }\n}\nEOF\n\ndocker-compose up -d\n```\n\n## Enterprise Configuration\n\n### Production Configuration (/etc/gitlab/gitlab.rb)\n```bash\nsudo tee /etc/gitlab/gitlab.rb > /dev/null <<EOF\n# GitLab Enterprise Production Configuration\n\nexternal_url 'https://gitlab.example.com'\n\n# Performance and Resource Settings\nunicorn['worker_timeout'] = 60\nunicorn['worker_processes'] = 8\nsidekiq['max_concurrency'] = 25\nsidekiq['min_concurrency'] = 10\n\n# PostgreSQL configuration\npostgresql['enable'] = true\npostgresql['max_connections'] = 300\npostgresql['shared_buffers'] = \"2GB\"\npostgresql['effective_cache_size'] = \"8GB\"\npostgresql['work_mem'] = \"16MB\"\npostgresql['maintenance_work_mem'] = \"256MB\"\npostgresql['checkpoint_completion_target'] = 0.9\npostgresql['wal_buffers'] = \"16MB\"\npostgresql['default_statistics_target'] = 100\npostgresql['random_page_cost'] = 1.1\npostgresql['effective_io_concurrency'] = 200\n\n# Redis configuration\nredis['enable'] = true\nredis['maxmemory'] = \"1gb\"\nredis['maxmemory_policy'] = \"allkeys-lru\"\nredis['save'] = '900 1 300 10 60 10000'\nredis['password'] = 'redis_secure_password'\n\n# Gitaly configuration (Git RPC service)\ngitaly['enable'] = true\ngitaly['auth_token'] = 'secure_gitaly_token'\ngitaly['ruby_max_rss'] = 300000000  # 300MB\ngitaly['concurrency'] = [\n  {\n    'rpc' => \"/gitaly.SmartHTTPService/PostReceivePack\",\n    'max_per_repo' => 3\n  },\n  {\n    'rpc' => \"/gitaly.SSHService/SSHUploadPack\", \n    'max_per_repo' => 3\n  }\n]\n\n# NGINX configuration\nnginx['enable'] = true\nnginx['listen_port'] = 80\nnginx['listen_https'] = false\nnginx['redirect_http_to_https'] = false\nnginx['ssl_certificate'] = \"/etc/gitlab/ssl/gitlab.crt\"\nnginx['ssl_certificate_key'] = \"/etc/gitlab/ssl/gitlab.key\"\nnginx['ssl_protocols'] = \"TLSv1.2 TLSv1.3\"\nnginx['ssl_prefer_server_ciphers'] = \"off\"\nnginx['ssl_ciphers'] = \"ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384\"\n\n# Container Registry\nregistry_external_url 'https://registry.example.com'\ngitlab_rails['registry_enabled'] = true\nregistry['enable'] = true\nregistry['username'] = \"registry\"\nregistry['uid'] = 996\nregistry['gid'] = 996\nregistry['dir'] = \"/var/opt/gitlab/registry\"\nregistry['log_directory'] = \"/var/log/gitlab/registry\"\nregistry['log_level'] = \"info\"\nregistry['rootcertbundle'] = \"/opt/gitlab/embedded/ssl/certs/cacert.pem\"\n\n# GitLab Pages\npages_external_url \"https://pages.example.com\"\ngitlab_pages['enable'] = true\ngitlab_pages['dir'] = \"/var/opt/gitlab/gitlab-pages\"\ngitlab_pages['log_directory'] = \"/var/log/gitlab/gitlab-pages\"\ngitlab_pages['access_control'] = true\ngitlab_pages['use_legacy_storage'] = false\n\n# Email configuration\ngitlab_rails['smtp_enable'] = true\ngitlab_rails['smtp_address'] = \"smtp.example.com\"\ngitlab_rails['smtp_port'] = 587\ngitlab_rails['smtp_user_name'] = \"gitlab@example.com\"\ngitlab_rails['smtp_password'] = \"smtp_secure_password\"\ngitlab_rails['smtp_domain'] = \"example.com\"\ngitlab_rails['smtp_authentication'] = \"login\"\ngitlab_rails['smtp_enable_starttls_auto'] = true\ngitlab_rails['smtp_tls'] = false\ngitlab_rails['smtp_openssl_verify_mode'] = 'peer'\n\ngitlab_rails['gitlab_email_enabled'] = true\ngitlab_rails['gitlab_email_from'] = 'gitlab@example.com'\ngitlab_rails['gitlab_email_display_name'] = 'GitLab'\ngitlab_rails['gitlab_email_reply_to'] = 'noreply@example.com'\n\n# Security settings\ngitlab_rails['rack_attack_git_basic_auth'] = {\n  'enabled' => true,\n  'ip_whitelist' => %w{127.0.0.1 192.168.1.0/24 10.0.0.0/8},\n  'maxretry' => 10,\n  'findtime' => 60,\n  'bantime' => 3600\n}\n\n# Two-factor authentication\ngitlab_rails['require_two_factor_authentication'] = false\ngitlab_rails['two_factor_grace_period'] = 8  # 8 hours instead of default 48\n\n# Session settings\ngitlab_rails['session_expire_delay'] = 10080  # 1 week\ngitlab_rails['session_store_enabled'] = true\n\n# Backup configuration\ngitlab_rails['backup_keep_time'] = 604800  # 7 days\ngitlab_rails['backup_upload_connection'] = {\n  'provider' => 'AWS',\n  'region' => 'us-west-2',\n  'aws_access_key_id' => 'backup_access_key',\n  'aws_secret_access_key' => 'backup_secret_key'\n}\ngitlab_rails['backup_upload_remote_directory'] = 'gitlab-backups'\ngitlab_rails['backup_multipart_chunk_size'] = 104857600  # 100MB\n\n# Monitoring\nprometheus_monitoring['enable'] = true\nprometheus['enable'] = true\nprometheus['listen_address'] = 'localhost:9090'\nprometheus['scrape_configs'] = [\n  {\n    'job_name' => 'gitlab-workhorse',\n    'static_configs' => [\n      { 'targets' => ['localhost:9229'] }\n    ]\n  },\n  {\n    'job_name' => 'gitlab-unicorn',\n    'static_configs' => [\n      { 'targets' => ['localhost:8080'] }\n    ]\n  },\n  {\n    'job_name' => 'gitlab-sidekiq',\n    'static_configs' => [\n      { 'targets' => ['localhost:8082'] }\n    ]\n  }\n]\n\ngrafana['enable'] = true\ngrafana['admin_password'] = 'secure_grafana_password'\ngrafana['disable_login_form'] = false\n\n# Logging\nlogging['svlogd_size'] = 200 * 1024 * 1024  # 200MB\nlogging['svlogd_num'] = 30\nlogging['svlogd_timeout'] = 24 * 60 * 60    # rotate after 24 hours\nlogging['logrotate_frequency'] = \"daily\"\nlogging['logrotate_rotate'] = 30\nlogging['logrotate_compress'] = \"compress\"\n\n# Git settings\ngitlab_rails['gitlab_default_branch'] = 'main'\ngitlab_rails['max_request_duration_seconds'] = 60\n\n# Rate limiting\ngitlab_rails['rate_limit_requests_per_period'] = 300\ngitlab_rails['rate_limit_period'] = 60\n\n# Enterprise features (if using GitLab EE)\n# gitlab_rails['ee_license'] = File.read('/etc/gitlab/GitLab.gitlab-license')\n\n# Security scanning\ngitlab_rails['dependency_scanning_enabled'] = true\ngitlab_rails['container_scanning_enabled'] = true\ngitlab_rails['sast_enabled'] = true\ngitlab_rails['secret_detection_enabled'] = true\n\n# LDAP configuration (Enterprise)\ngitlab_rails['ldap_enabled'] = false\ngitlab_rails['prevent_ldap_sign_in'] = false\ngitlab_rails['ldap_servers'] = {\n  'main' => {\n    'label' => 'LDAP',\n    'host' => 'ldap.example.com',\n    'port' => 636,\n    'uid' => 'sAMAccountName',\n    'bind_dn' => 'CN=gitlab,OU=Service Accounts,DC=example,DC=com',\n    'password' => 'ldap_service_password',\n    'encryption' => 'ssl',\n    'verify_certificates' => true,\n    'ca_file' => '/etc/gitlab/ssl/ldap-ca.crt',\n    'base' => 'DC=example,DC=com',\n    'user_filter' => '',\n    'attributes' => {\n      'username' => ['uid', 'userid', 'sAMAccountName'],\n      'email' => ['mail', 'email', 'userPrincipalName'],\n      'name' => 'cn',\n      'first_name' => 'givenName',\n      'last_name' => 'sn'\n    },\n    'group_base' => 'OU=Groups,DC=example,DC=com',\n    'admin_group' => 'GitLab Administrators'\n  }\n}\nEOF\n\nsudo gitlab-ctl reconfigure\n```\n\n## Security Hardening (2024 Best Practices)\n\n### SSL/TLS Configuration\n```bash\n# Generate SSL certificates\nsudo mkdir -p /etc/gitlab/ssl\n\n# Self-signed certificate for testing\nsudo openssl req -x509 -nodes -days 365 -newkey rsa:4096 \\\n  -keyout /etc/gitlab/ssl/gitlab.key \\\n  -out /etc/gitlab/ssl/gitlab.crt \\\n  -subj \"/C=US/ST=State/L=City/O=Organization/CN=gitlab.example.com\"\n\n# Production: Let's Encrypt integration\nsudo tee -a /etc/gitlab/gitlab.rb > /dev/null <<EOF\n\n# Let's Encrypt configuration\nletsencrypt['enable'] = true\nletsencrypt['contact_emails'] = ['admin@example.com']\nletsencrypt['auto_renew'] = true\nletsencrypt['auto_renew_hour'] = 0\nletsencrypt['auto_renew_minute'] = 0\nletsencrypt['auto_renew_day_of_month'] = \"*/4\"\n\n# Force HTTPS\nnginx['redirect_http_to_https'] = true\nnginx['ssl_protocols'] = \"TLSv1.2 TLSv1.3\"\nnginx['ssl_prefer_server_ciphers'] = \"off\"\nnginx['ssl_ciphers'] = \"ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384\"\n\n# HSTS\nnginx['hsts_max_age'] = 31536000\nnginx['hsts_include_subdomains'] = true\nEOF\n\nsudo gitlab-ctl reconfigure\n```\n\n### Advanced Security Configuration\n```bash\n# Configure security settings\nsudo tee -a /etc/gitlab/gitlab.rb > /dev/null <<EOF\n\n# Security hardening\ngitlab_rails['webhook_timeout'] = 10\ngitlab_rails['webhook_max_redirects'] = 3\n\n# Disable password authentication (use SSO/LDAP)\ngitlab_rails['omniauth_allow_single_sign_on'] = ['saml', 'ldapmain']\ngitlab_rails['omniauth_block_auto_created_users'] = false\ngitlab_rails['omniauth_auto_sign_in_with_provider'] = 'saml'\n\n# API rate limiting\ngitlab_rails['rate_limit_requests_per_period'] = 1000\ngitlab_rails['rate_limit_period'] = 60\n\n# Git over HTTP rate limiting\ngitlab_rails['rack_attack_git_basic_auth'] = {\n  'enabled' => true,\n  'ip_whitelist' => %w{127.0.0.1 192.168.1.0/24},\n  'maxretry' => 20,\n  'findtime' => 60,\n  'bantime' => 3600\n}\n\n# Protected paths\ngitlab_rails['rack_attack_protected_paths'] = [\n  '/users/password',\n  '/users/sign_in',\n  '/api/v4/session.json',\n  '/api/v4/session',\n  '/users/confirmation',\n  '/unsubscribes/',\n  '/import/github/personal_access_token',\n  '/admin/session'\n]\n\n# SSH security\ngitlab_rails['gitlab_shell_ssh_port'] = 2222\ngitlab_shell['auth_file'] = \"/var/opt/gitlab/.ssh/authorized_keys\"\n\n# Container Registry security\nregistry['notifications'] = [\n  {\n    'name' => 'security_scan',\n    'url' => 'https://security-scanner.example.com/webhook',\n    'timeout' => '2000ms',\n    'threshold' => 3,\n    'backoff' => '1000ms'\n  }\n]\n\n# Secrets management\ngitlab_rails['db_password'] = File.read('/etc/gitlab/secrets/db_password').strip\ngitlab_rails['secret_key_base'] = File.read('/etc/gitlab/secrets/secret_key_base').strip\ngitlab_rails['otp_key_base'] = File.read('/etc/gitlab/secrets/otp_key_base').strip\ngitlab_rails['encrypted_settings_key_base'] = File.read('/etc/gitlab/secrets/encrypted_settings_key_base').strip\n\n# Audit logging\ngitlab_rails['audit_events_enabled'] = true\n\n# Disable features that increase attack surface\ngitlab_rails['usage_ping_enabled'] = false\ngitlab_rails['sentry_enabled'] = false\nEOF\n\n# Create secrets directory and files\nsudo mkdir -p /etc/gitlab/secrets\nsudo openssl rand -base64 64 | sudo tee /etc/gitlab/secrets/db_password\nsudo openssl rand -base64 64 | sudo tee /etc/gitlab/secrets/secret_key_base\nsudo openssl rand -base64 64 | sudo tee /etc/gitlab/secrets/otp_key_base\nsudo openssl rand -base64 64 | sudo tee /etc/gitlab/secrets/encrypted_settings_key_base\n\n# Secure permissions\nsudo chmod 600 /etc/gitlab/secrets/*\nsudo chown git:git /etc/gitlab/secrets/*\n\nsudo gitlab-ctl reconfigure\n```\n\n### GitLab Runner Security Configuration\n```bash\n# Create secure runner configuration\nsudo mkdir -p /etc/gitlab-runner\n\nsudo tee /etc/gitlab-runner/config.toml > /dev/null <<EOF\nconcurrent = 4\ncheck_interval = 0\nshutdown_timeout = 0\n\n[session_server]\n  session_timeout = 1800\n\n[[runners]]\n  name = \"docker-runner-secure\"\n  url = \"https://gitlab.example.com/\"\n  token = \"runner_registration_token\"\n  executor = \"docker\"\n  \n  # Security settings\n  pre_clone_script = \"echo 'Starting secure build'\"\n  pre_build_script = \"echo 'Preparing secure environment'\"\n  post_build_script = \"echo 'Cleaning up secure environment'\"\n  \n  [runners.docker]\n    tls_verify = false\n    image = \"alpine:latest\"\n    privileged = false  # Critical: Never use privileged mode\n    disable_entrypoint_overwrite = false\n    oom_kill_disable = false\n    disable_cache = false\n    volumes = [\"/cache\", \"/certs/client\"]\n    shm_size = 0\n    network_mode = \"bridge\"\n    \n    # Security restrictions\n    cap_drop = [\"ALL\"]\n    cap_add = [\"CHOWN\", \"SETGID\", \"SETUID\"]\n    security_opt = [\"no-new-privileges:true\"]\n    \n    # Resource limits\n    memory = \"2g\"\n    memory_swap = \"2g\"\n    memory_reservation = \"1g\"\n    cpus = \"1.5\"\n    \n    # Network security\n    dns = [\"8.8.8.8\", \"8.8.4.4\"]\n    extra_hosts = [\"gitlab.example.com:192.168.1.100\"]\n    \n    # Image scanning\n    pull_policy = [\"if-not-present\"]\n    \n  [runners.docker.tmpfs]\n    \"/tmp\" = \"rw,noexec,nosuid,size=100m\"\n    \"/var/tmp\" = \"rw,noexec,nosuid,size=100m\"\n\n# Kubernetes executor (more secure)\n[[runners]]\n  name = \"k8s-runner-secure\"\n  url = \"https://gitlab.example.com/\"\n  token = \"k8s_runner_token\"\n  executor = \"kubernetes\"\n  \n  [runners.kubernetes]\n    host = \"https://k8s.example.com:6443\"\n    namespace = \"gitlab-runner\"\n    privileged = false  # Never use privileged\n    image = \"alpine:latest\"\n    \n    # Security context\n    run_as_user = 1000\n    run_as_group = 1000\n    fs_group = 1000\n    \n    # Resource limits\n    memory_limit = \"2Gi\"\n    memory_request = \"1Gi\"\n    cpu_limit = \"1000m\"\n    cpu_request = \"500m\"\n    \n    # Security policies\n    [runners.kubernetes.pod_security_context]\n      run_as_non_root = true\n      run_as_user = 1000\n      run_as_group = 1000\n      fs_group = 1000\n      \n    [[runners.kubernetes.volumes.empty_dir]]\n      name = \"tmp\"\n      mount_path = \"/tmp\"\n      medium = \"Memory\"\nEOF\n\n# Register runner with security tags\nsudo gitlab-runner register \\\n  --url \"https://gitlab.example.com/\" \\\n  --registration-token \"RUNNER_TOKEN\" \\\n  --description \"secure-docker-runner\" \\\n  --tag-list \"docker,secure,production\" \\\n  --run-untagged=\"false\" \\\n  --locked=\"true\" \\\n  --access-level=\"ref_protected\" \\\n  --executor \"docker\" \\\n  --docker-image alpine:latest \\\n  --docker-privileged=\"false\" \\\n  --docker-volumes \"/certs/client\"\n\nsudo systemctl enable --now gitlab-runner\n```\n\n## CI/CD Pipeline Security\n\n### Secure Pipeline Configuration\n```bash\n# Create .gitlab-ci.yml with security best practices\ncat > .gitlab-ci.yml <<EOF\n# GitLab CI/CD Security Best Practices - 2024\n\nstages:\n  - security-scan\n  - test\n  - build\n  - security-test\n  - deploy\n\nvariables:\n  # Security variables\n  DOCKER_DRIVER: overlay2\n  DOCKER_TLS_CERTDIR: \"/certs\"\n  SECURE_LOG_LEVEL: info\n  \n  # Use protected variables for sensitive data\n  # DEPLOY_TOKEN: (set in GitLab UI as protected variable)\n  # AWS_ACCESS_KEY: (set in GitLab UI as protected variable)\n\n# Security scanning stage\nsecret-detection:\n  stage: security-scan\n  image: registry.gitlab.com/gitlab-org/security-products/analyzers/secrets:latest\n  script:\n    - echo \"Scanning for secrets in code...\"\n    - /analyzer run\n  artifacts:\n    reports:\n      secret_detection: gl-secret-detection-report.json\n  rules:\n    - if: '\\$CI_COMMIT_BRANCH'\n  tags:\n    - secure\n\ndependency-scanning:\n  stage: security-scan  \n  image: registry.gitlab.com/gitlab-org/security-products/analyzers/gemnasium:latest\n  script:\n    - echo \"Scanning dependencies for vulnerabilities...\"\n    - /analyzer run\n  artifacts:\n    reports:\n      dependency_scanning: gl-dependency-scanning-report.json\n  rules:\n    - if: '\\$CI_COMMIT_BRANCH'\n  tags:\n    - secure\n\nsast:\n  stage: security-scan\n  image: registry.gitlab.com/gitlab-org/security-products/analyzers/sobelow:latest\n  script:\n    - echo \"Static application security testing...\"\n    - /analyzer run\n  artifacts:\n    reports:\n      sast: gl-sast-report.json\n  rules:\n    - if: '\\$CI_COMMIT_BRANCH'\n  tags:\n    - secure\n\n# Container scanning\ncontainer-scanning:\n  stage: security-test\n  image: registry.gitlab.com/gitlab-org/security-products/analyzers/klar:latest\n  script:\n    - echo \"Scanning container image for vulnerabilities...\"\n    - /analyzer run\n  artifacts:\n    reports:\n      container_scanning: gl-container-scanning-report.json\n  dependencies:\n    - build\n  rules:\n    - if: '\\$CI_COMMIT_BRANCH'\n  tags:\n    - secure\n\n# Secure build stage\nbuild:\n  stage: build\n  image: docker:latest\n  services:\n    - docker:dind\n  before_script:\n    # Verify image signatures\n    - echo \"Verifying base image integrity...\"\n    - docker trust inspect alpine:latest\n  script:\n    - echo \"Building application with security scanning...\"\n    - docker build -t \\$CI_REGISTRY_IMAGE:\\$CI_COMMIT_SHA .\n    - docker run --rm -v /var/run/docker.sock:/var/run/docker.sock aquasec/trivy image \\$CI_REGISTRY_IMAGE:\\$CI_COMMIT_SHA\n    - docker login -u \\$CI_REGISTRY_USER -p \\$CI_REGISTRY_PASSWORD \\$CI_REGISTRY\n    - docker push \\$CI_REGISTRY_IMAGE:\\$CI_COMMIT_SHA\n  rules:\n    - if: '\\$CI_COMMIT_BRANCH == \"main\"'\n  tags:\n    - secure\n\n# Secure deployment\ndeploy-production:\n  stage: deploy\n  image: alpine:latest\n  before_script:\n    # Install kubectl and verify cluster connectivity\n    - apk add --no-cache curl\n    - curl -LO \"https://dl.k8s.io/release/v1.28.0/bin/linux/amd64/kubectl\"\n    - chmod +x kubectl && mv kubectl /usr/local/bin/\n    - kubectl config use-context production-cluster\n    - kubectl auth can-i create deployments --namespace=production\n  script:\n    - echo \"Deploying to production with security validations...\"\n    - kubectl apply -f k8s/production/ --namespace=production\n    - kubectl rollout status deployment/app --namespace=production --timeout=300s\n  environment:\n    name: production\n    url: https://app.example.com\n  rules:\n    - if: '\\$CI_COMMIT_BRANCH == \"main\"'\n      when: manual\n  only:\n    variables:\n      - \\$CI_COMMIT_REF_PROTECTED == \"true\"\n  tags:\n    - secure\n    - production\n\n# Security compliance check\ncompliance-check:\n  stage: security-test\n  image: alpine:latest\n  script:\n    - echo \"Running compliance checks...\"\n    - apk add --no-cache curl jq\n    - |\n      # Check for required security labels in Docker images\n      if ! docker inspect \\$CI_REGISTRY_IMAGE:\\$CI_COMMIT_SHA | jq -r '.[].Config.Labels[\"security.scan\"]' | grep -q \"passed\"; then\n        echo \"ERROR: Image failed security scan\"\n        exit 1\n      fi\n    - echo \"Compliance check passed\"\n  dependencies:\n    - container-scanning\n  rules:\n    - if: '\\$CI_COMMIT_BRANCH == \"main\"'\n  tags:\n    - secure\n\n# Infrastructure as Code scanning\niac-scanning:\n  stage: security-scan\n  image: bridgecrew/checkov:latest\n  script:\n    - checkov --framework terraform --framework kubernetes --framework dockerfile\n  artifacts:\n    reports:\n      junit: checkov-report.xml\n  rules:\n    - if: '\\$CI_COMMIT_BRANCH'\n      changes:\n        - \"**/*.tf\"\n        - \"**/*.yml\"\n        - \"**/*.yaml\"\n        - \"**/Dockerfile*\"\n  tags:\n    - secure\nEOF\n```\n\n### RBAC and Access Control\n```bash\n# Configure GitLab RBAC via API\nGITLAB_URL=\"https://gitlab.example.com\"\nADMIN_TOKEN=\"your_admin_token\"\n\n# Create groups with specific permissions\ncurl --request POST --header \"PRIVATE-TOKEN: ${ADMIN_TOKEN}\" \\\n  --data \"name=developers&path=developers&description=Development team&visibility=private\" \\\n  \"${GITLAB_URL}/api/v4/groups\"\n\ncurl --request POST --header \"PRIVATE-TOKEN: ${ADMIN_TOKEN}\" \\\n  --data \"name=security-team&path=security-team&description=Security team&visibility=private\" \\\n  \"${GITLAB_URL}/api/v4/groups\"\n\n# Create projects with security templates\ncurl --request POST --header \"PRIVATE-TOKEN: ${ADMIN_TOKEN}\" \\\n  --data \"name=secure-app&description=Secure application&visibility=private&issues_enabled=true&merge_requests_enabled=true&wiki_enabled=false&builds_enabled=true&snippets_enabled=false&container_registry_enabled=true&shared_runners_enabled=false\" \\\n  \"${GITLAB_URL}/api/v4/projects\"\n\n# Configure branch protection\nPROJECT_ID=\"1\"  # Replace with actual project ID\ncurl --request POST --header \"PRIVATE-TOKEN: ${ADMIN_TOKEN}\" \\\n  --data \"name=main&code_owner_approval_required=true&push_access_level=40&merge_access_level=40&unprotect_access_level=40\" \\\n  \"${GITLAB_URL}/api/v4/projects/${PROJECT_ID}/protected_branches\"\n\n# Configure push rules (Premium/Ultimate)\ncurl --request POST --header \"PRIVATE-TOKEN: ${ADMIN_TOKEN}\" \\\n  --data \"deny_delete_tag=true&member_check=true&prevent_secrets=true&author_email_regex=.*@example.com&file_extension_restriction=jar,exe&max_file_size=100\" \\\n  \"${GITLAB_URL}/api/v4/projects/${PROJECT_ID}/push_rule\"\n```\n\n### Vulnerability Scanning Integration\n```bash\n# Configure dependency proxy for secure image caching\nsudo tee -a /etc/gitlab/gitlab.rb > /dev/null <<EOF\n\n# Dependency Proxy for secure image caching\ngitlab_rails['dependency_proxy_enabled'] = true\ngitlab_rails['dependency_proxy_storage_path'] = \"/var/opt/gitlab/gitlab-rails/shared/dependency_proxy\"\n\n# Security scanning\ngitlab_rails['sast_enabled'] = true\ngitlab_rails['dependency_scanning_enabled'] = true\ngitlab_rails['container_scanning_enabled'] = true\ngitlab_rails['secret_detection_enabled'] = true\ngitlab_rails['license_scanning_enabled'] = true\n\n# Secure package registry\ngitlab_rails['packages_enabled'] = true\ngitlab_rails['packages_storage_path'] = \"/var/opt/gitlab/gitlab-rails/shared/packages\"\nEOF\n\n# Create custom security scanning templates\nmkdir -p .gitlab/ci-templates\n\ncat > .gitlab/ci-templates/Security-Scanning.gitlab-ci.yml <<EOF\n# Custom Security Scanning Template\n\n.security-scan-template:\n  stage: security-scan\n  variables:\n    SECURE_LOG_LEVEL: info\n  before_script:\n    - echo \"Preparing security scan environment...\"\n    - apk add --no-cache curl jq\n  tags:\n    - secure\n\ncustom-sast:\n  extends: .security-scan-template\n  image: registry.gitlab.com/gitlab-org/security-products/analyzers/semgrep:latest\n  script:\n    - echo \"Running custom SAST analysis...\"\n    - /analyzer run\n  artifacts:\n    reports:\n      sast: gl-sast-report.json\n    expire_in: 1 week\n\ncustom-secrets-scan:\n  extends: .security-scan-template\n  image: trufflesecurity/trufflehog:latest\n  script:\n    - echo \"Scanning for secrets with TruffleHog...\"\n    - trufflehog git file://. --json > trufflehog-report.json\n    - |\n      if [ -s trufflehog-report.json ]; then\n        echo \"Secrets detected!\"\n        cat trufflehog-report.json\n        exit 1\n      fi\n  artifacts:\n    reports:\n      secret_detection: trufflehog-report.json\n    expire_in: 1 week\n\nimage-vulnerability-scan:\n  extends: .security-scan-template\n  image: aquasec/trivy:latest\n  script:\n    - echo \"Scanning Docker images for vulnerabilities...\"\n    - trivy image --format template --template \"@contrib/gitlab.tpl\" \\$CI_REGISTRY_IMAGE:\\$CI_COMMIT_SHA\n  artifacts:\n    reports:\n      container_scanning: gl-container-scanning-report.json\n    expire_in: 1 week\nEOF\n\nsudo gitlab-ctl reconfigure\n```\n\n## Backup and Disaster Recovery\n\n### Enterprise Backup Strategy\n```bash\nsudo tee /usr/local/bin/gitlab-backup.sh > /dev/null <<'EOF'\n#!/bin/bash\nBACKUP_DIR=\"/backup/gitlab\"\nDATE=$(date +%Y%m%d_%H%M%S)\n\nmkdir -p ${BACKUP_DIR}/{omnibus,secrets,ssl,logs}\n\n# Create GitLab backup\ngitlab-backup create STRATEGY=copy SKIP=uploads,builds,artifacts,lfs,registry,pages\n\n# Backup configuration files\ntar -czf ${BACKUP_DIR}/omnibus/gitlab-config-${DATE}.tar.gz \\\n    /etc/gitlab/gitlab.rb \\\n    /etc/gitlab/gitlab-secrets.json\n\n# Backup SSL certificates\ntar -czf ${BACKUP_DIR}/ssl/gitlab-ssl-${DATE}.tar.gz \\\n    /etc/gitlab/ssl/ \\\n    /etc/letsencrypt/\n\n# Backup secrets\ntar -czf ${BACKUP_DIR}/secrets/gitlab-secrets-${DATE}.tar.gz \\\n    /etc/gitlab/secrets/\n\n# Upload to multiple cloud storage backends\naws s3 cp ${BACKUP_DIR}/ s3://gitlab-backups/ --recursive\naz storage blob upload-batch --source ${BACKUP_DIR} --destination gitlab-backups\ngsutil cp -r ${BACKUP_DIR}/* gs://gitlab-backups/\n\n# Geo-replication backup (Enterprise)\nif command -v gitlab-rake >/dev/null 2>&1; then\n    gitlab-rake gitlab:geo:check\n    gitlab-rake geo:status\nfi\n\n# Test backup integrity\nLATEST_BACKUP=$(ls -t /var/opt/gitlab/backups/*_gitlab_backup.tar | head -1)\nif [ -n \"$LATEST_BACKUP\" ]; then\n    echo \"Latest backup: $LATEST_BACKUP\"\n    tar -tf \"$LATEST_BACKUP\" > /tmp/backup-contents.txt\n    if [ $? -eq 0 ]; then\n        echo \"âœ“ Backup integrity verified\"\n    else\n        echo \"âœ— Backup integrity check failed\"\n    fi\nfi\n\n# Keep only last 7 backups locally\nfind /var/opt/gitlab/backups/ -name \"*_gitlab_backup.tar\" -mtime +7 -delete\nfind ${BACKUP_DIR} -name \"gitlab-*\" -type f -mtime +7 -delete\n\necho \"GitLab backup completed: ${DATE}\"\nEOF\n\nsudo chmod +x /usr/local/bin/gitlab-backup.sh\n\n# Schedule daily backups\necho \"0 2 * * * root /usr/local/bin/gitlab-backup.sh\" | sudo tee -a /etc/crontab\n\n# Create disaster recovery script\nsudo tee /usr/local/bin/gitlab-restore.sh > /dev/null <<'EOF'\n#!/bin/bash\nBACKUP_FILE=\"${1}\"\n\nif [ -z \"$BACKUP_FILE\" ]; then\n    echo \"Usage: $0 <backup_file>\"\n    echo \"Available backups:\"\n    ls -la /var/opt/gitlab/backups/*_gitlab_backup.tar\n    exit 1\nfi\n\n# Stop GitLab services\ngitlab-ctl stop unicorn\ngitlab-ctl stop puma\ngitlab-ctl stop sidekiq\n\n# Restore from backup\ngitlab-backup restore BACKUP=$(basename $BACKUP_FILE _gitlab_backup.tar) force=yes\n\n# Restore configuration\nif [ -f \"/backup/gitlab/omnibus/gitlab-config-latest.tar.gz\" ]; then\n    cd /\n    tar -xzf /backup/gitlab/omnibus/gitlab-config-latest.tar.gz\nfi\n\n# Reconfigure and restart\ngitlab-ctl reconfigure\ngitlab-ctl restart\n\n# Verify installation\ngitlab-rake gitlab:check SANITIZE=true\n\necho \"GitLab restore completed\"\nEOF\n\nsudo chmod +x /usr/local/bin/gitlab-restore.sh\n```\n\n### High Availability Setup\n```bash\n# Configure GitLab for HA with external services\nsudo tee /etc/gitlab/gitlab.rb > /dev/null <<EOF\n# GitLab High Availability Configuration\n\nexternal_url 'https://gitlab.example.com'\n\n# Disable built-in services (use external)\npostgresql['enable'] = false\nredis['enable'] = false\nnginx['enable'] = true\nunicorn['enable'] = true\nsidekiq['enable'] = true\ngitlab_workhorse['enable'] = true\ngitaly['enable'] = true\n\n# External PostgreSQL\ngitlab_rails['db_adapter'] = 'postgresql'\ngitlab_rails['db_encoding'] = 'unicode'\ngitlab_rails['db_host'] = 'postgres-master.example.com'\ngitlab_rails['db_port'] = 5432\ngitlab_rails['db_database'] = 'gitlabhq_production'\ngitlab_rails['db_username'] = 'gitlab'\ngitlab_rails['db_password'] = 'secure_db_password'\ngitlab_rails['db_load_balancing'] = {\n  'hosts' => ['postgres-slave1.example.com', 'postgres-slave2.example.com']\n}\n\n# External Redis\ngitlab_rails['redis_host'] = 'redis-master.example.com'\ngitlab_rails['redis_port'] = 6379\ngitlab_rails['redis_password'] = 'redis_secure_password'\ngitlab_rails['redis_sentinels'] = [\n  {'host' => 'redis-sentinel1.example.com', 'port' => 26379},\n  {'host' => 'redis-sentinel2.example.com', 'port' => 26379},\n  {'host' => 'redis-sentinel3.example.com', 'port' => 26379}\n]\n\n# Load balancing\nnginx['listen_addresses'] = ['0.0.0.0']\nnginx['real_ip_header'] = 'X-Forwarded-For'\nnginx['real_ip_recursive'] = 'on'\nnginx['real_ip_trusted_addresses'] = ['10.0.0.0/8', '172.16.0.0/12', '192.168.0.0/16']\n\n# Gitaly cluster (Enterprise)\ngit_data_dirs({\n  'default' => {\n    'gitaly_address' => 'tcp://gitaly1.example.com:8075',\n    'gitaly_token' => 'gitaly_secure_token'\n  },\n  'storage1' => {\n    'gitaly_address' => 'tcp://gitaly2.example.com:8075',\n    'gitaly_token' => 'gitaly_secure_token'\n  }\n})\n\n# Object storage (S3-compatible)\ngitlab_rails['object_store']['enabled'] = true\ngitlab_rails['object_store']['proxy_download'] = true\ngitlab_rails['object_store']['connection'] = {\n  'provider' => 'AWS',\n  'region' => 'us-west-2',\n  'aws_access_key_id' => 'object_store_access_key',\n  'aws_secret_access_key' => 'object_store_secret_key'\n}\ngitlab_rails['object_store']['objects']['artifacts']['bucket'] = 'gitlab-artifacts'\ngitlab_rails['object_store']['objects']['lfs']['bucket'] = 'gitlab-lfs'\ngitlab_rails['object_store']['objects']['uploads']['bucket'] = 'gitlab-uploads'\ngitlab_rails['object_store']['objects']['packages']['bucket'] = 'gitlab-packages'\n\n# Geo replication (Enterprise Premium)\ngitlab_rails['geo_primary_role'] = true  # Set to false for secondary\ngitlab_rails['geo_node_name'] = 'primary-site'\ngitlab_rails['geo_registry_replication_enabled'] = true\nEOF\n\nsudo gitlab-ctl reconfigure\n```\n\n## Container Registry and Package Management\n\n### Secure Container Registry Setup\n```bash\n# Configure container registry with security scanning\nsudo tee -a /etc/gitlab/gitlab.rb > /dev/null <<EOF\n\n# Container Registry configuration\nregistry_external_url 'https://registry.example.com'\ngitlab_rails['registry_enabled'] = true\nregistry['enable'] = true\n\n# Registry storage\nregistry['storage'] = {\n  's3' => {\n    'accesskey' => 'registry_s3_access_key',\n    'secretkey' => 'registry_s3_secret_key',\n    'bucket' => 'gitlab-registry',\n    'region' => 'us-west-2',\n    'encrypt' => true\n  }\n}\n\n# Registry security\nregistry['auth_token_realm'] = \"https://gitlab.example.com/jwt/auth\"\nregistry['auth_token_service'] = \"container_registry\"\nregistry['auth_token_issuer'] = \"gitlab-issuer\"\nregistry['auth_token_autoredirect'] = false\n\n# Health checks\nregistry['health_storagedriver_enabled'] = true\nregistry['health_storagedriver_interval'] = '10s'\nregistry['health_storagedriver_threshold'] = 3\n\n# Container scanning\ngitlab_rails['container_registry_token_expire_delay'] = 300\ngitlab_rails['container_registry_cleanup_enabled'] = true\n\n# Image retention policies\nregistry['middleware'] = {\n  'repository' => [\n    {\n      'name' => 'cloudfront',\n      'disabled' => false,\n      'options' => {\n        'baseurl' => 'https://registry-cdn.example.com',\n        'privatekey' => '/etc/gitlab/registry-cdn-private-key.pem',\n        'keypairid' => 'CLOUDFRONT_KEY_PAIR_ID',\n        'duration' => '3600s'\n      }\n    }\n  ]\n}\n\n# Package registry\ngitlab_rails['packages_enabled'] = true\ngitlab_rails['packages_storage_path'] = \"/var/opt/gitlab/gitlab-rails/shared/packages\"\nEOF\n\n# Create container registry cleanup policy\ncat > registry-cleanup-policy.json <<EOF\n{\n  \"name_regex\": \".*\",\n  \"name_regex_keep\": \"v\\\\d+\\\\.\\\\d+\\\\.\\\\d+\",\n  \"cadence\": \"7d\",\n  \"older_than\": \"30d\",\n  \"keep_n\": 10\n}\nEOF\n\n# Apply cleanup policy via API\ncurl --request PUT --header \"PRIVATE-TOKEN: ${ADMIN_TOKEN}\" \\\n  --header \"Content-Type: application/json\" \\\n  --data @registry-cleanup-policy.json \\\n  \"${GITLAB_URL}/api/v4/projects/${PROJECT_ID}/registry/repositories/1\"\n\nsudo gitlab-ctl reconfigure\n```\n\n## Monitoring and Observability\n\n### Comprehensive Monitoring Setup\n```bash\n# Enable built-in monitoring stack\nsudo tee -a /etc/gitlab/gitlab.rb > /dev/null <<EOF\n\n# Prometheus monitoring\nprometheus_monitoring['enable'] = true\nprometheus['enable'] = true\nprometheus['monitor_kubernetes'] = true\nprometheus['scrape_configs'] = [\n  {\n    'job_name' => 'gitlab-workhorse',\n    'static_configs' => [\n      { 'targets' => ['localhost:9229'] }\n    ]\n  },\n  {\n    'job_name' => 'gitlab-unicorn',  \n    'static_configs' => [\n      { 'targets' => ['localhost:8080'] }\n    ]\n  },\n  {\n    'job_name' => 'gitlab-sidekiq',\n    'static_configs' => [\n      { 'targets' => ['localhost:8082'] }\n    ]\n  },\n  {\n    'job_name' => 'gitlab-pages',\n    'static_configs' => [\n      { 'targets' => ['localhost:8090'] }\n    ]\n  },\n  {\n    'job_name' => 'docker-registry',\n    'static_configs' => [\n      { 'targets' => ['localhost:5001'] }\n    ]\n  }\n]\n\n# Grafana configuration\ngrafana['enable'] = true\ngrafana['admin_password'] = 'secure_grafana_password'\ngrafana['disable_login_form'] = false\ngrafana['allow_user_sign_up'] = false\n\n# Grafana LDAP integration\ngrafana['ldap_enabled'] = true\ngrafana['ldap_allow_sign_up'] = false\ngrafana['ldap_servers'] = [{\n  'host' => 'ldap.example.com',\n  'port' => 636,\n  'uid' => 'sAMAccountName',\n  'bind_dn' => 'CN=grafana,OU=Service Accounts,DC=example,DC=com',\n  'password' => 'ldap_service_password',\n  'encryption' => 'ssl',\n  'base' => 'DC=example,DC=com',\n  'user_filter' => '',\n  'group_base' => 'OU=Groups,DC=example,DC=com',\n  'admin_group' => 'GitLab Administrators'\n}]\n\n# Node Exporter\nnode_exporter['enable'] = true\nnode_exporter['listen_address'] = 'localhost:9100'\n\n# Alert Manager\nalertmanager['enable'] = true\nalertmanager['admin_email'] = 'alerts@example.com'\nalertmanager['flags'] = {\n  'storage.path' => '/var/opt/gitlab/alertmanager/data',\n  'config.file' => '/var/opt/gitlab/alertmanager/alertmanager.yml'\n}\n\n# Log forwarding\nlogging['logrotate_frequency'] = \"daily\"\nlogging['logrotate_rotate'] = 30\nlogging['logrotate_compress'] = \"compress\"\nlogging['svlogd_size'] = 200 * 1024 * 1024  # 200MB\nlogging['svlogd_num'] = 30\nEOF\n\n# Create custom alerting rules\nsudo mkdir -p /var/opt/gitlab/alertmanager\n\nsudo tee /var/opt/gitlab/alertmanager/alertmanager.yml > /dev/null <<EOF\nglobal:\n  smtp_smarthost: 'smtp.example.com:587'\n  smtp_from: 'gitlab-alerts@example.com'\n  smtp_auth_username: 'gitlab-alerts@example.com'\n  smtp_auth_password: 'smtp_password'\n\nroute:\n  group_by: ['alertname', 'cluster', 'service']\n  group_wait: 30s\n  group_interval: 5m\n  repeat_interval: 12h\n  receiver: 'gitlab-alerts'\n  routes:\n  - match:\n      severity: critical\n    receiver: 'critical-alerts'\n    group_wait: 10s\n    repeat_interval: 5m\n\nreceivers:\n- name: 'gitlab-alerts'\n  email_configs:\n  - to: 'gitlab-admin@example.com'\n    subject: 'GitLab Alert: {{ .GroupLabels.alertname }}'\n    body: |\n      {{ range .Alerts }}\n      Alert: {{ .Annotations.summary }}\n      Description: {{ .Annotations.description }}\n      Instance: {{ .Labels.instance }}\n      {{ end }}\n\n- name: 'critical-alerts'\n  email_configs:\n  - to: 'oncall@example.com'\n    subject: 'CRITICAL GitLab Alert: {{ .GroupLabels.alertname }}'\n  slack_configs:\n  - api_url: 'https://hooks.slack.com/services/YOUR/SLACK/WEBHOOK'\n    channel: '#critical-alerts'\n    title: 'Critical GitLab Alert'\nEOF\n\nsudo gitlab-ctl reconfigure\n```\n\n### Performance Monitoring\n```bash\n# Create GitLab performance monitoring script\nsudo tee /usr/local/bin/gitlab-performance-monitor.sh > /dev/null <<'EOF'\n#!/bin/bash\nMONITOR_LOG=\"/var/log/gitlab-performance.log\"\n\nlog_message() {\n    echo \"$(date '+%Y-%m-%d %H:%M:%S') - $1\" | tee -a ${MONITOR_LOG}\n}\n\n# Check GitLab service health\nfor service in unicorn sidekiq workhorse gitaly; do\n    if gitlab-ctl status $service | grep -q \"run:\"; then\n        log_message \"âœ“ $service is running\"\n    else\n        log_message \"âœ— $service is not running\"\n    fi\ndone\n\n# Check database performance\nDB_CONNECTIONS=$(gitlab-psql -c \"SELECT count(*) FROM pg_stat_activity;\" -t)\nlog_message \"â„¹ Database connections: ${DB_CONNECTIONS}\"\n\n# Check Redis performance  \nREDIS_MEMORY=$(redis-cli info memory | grep used_memory_human: | cut -d: -f2)\nlog_message \"â„¹ Redis memory usage: ${REDIS_MEMORY}\"\n\n# Check Git repository storage\nREPO_SIZE=$(du -sh /var/opt/gitlab/git-data/repositories | cut -f1)\nlog_message \"â„¹ Repository storage usage: ${REPO_SIZE}\"\n\n# Check background job queue\nSIDEKIQ_QUEUE=$(gitlab-rails runner \"puts Sidekiq::Queue.new.size\")\nlog_message \"â„¹ Sidekiq queue size: ${SIDEKIQ_QUEUE}\"\n\n# Check GitLab metrics\nGITLAB_VERSION=$(gitlab-rake gitlab:env:info | grep \"GitLab information\" -A 10 | grep \"Version:\" | awk '{print $2}')\nlog_message \"â„¹ GitLab version: ${GITLAB_VERSION}\"\n\n# Performance metrics via API\nAPI_RESPONSE_TIME=$(curl -w \"%{time_total}\" -s -o /dev/null https://gitlab.example.com/api/v4/projects)\nlog_message \"â„¹ API response time: ${API_RESPONSE_TIME}s\"\n\n# Check disk I/O\nDISK_USAGE=$(df /var/opt/gitlab | awk 'NR==2 {print $5}' | sed 's/%//')\nlog_message \"â„¹ Disk usage: ${DISK_USAGE}%\"\n\nif [ ${DISK_USAGE} -gt 85 ]; then\n    log_message \"âš  High disk usage detected\"\nfi\n\nlog_message \"Performance monitoring completed\"\nEOF\n\nsudo chmod +x /usr/local/bin/gitlab-performance-monitor.sh\n\n# Schedule performance monitoring\necho \"*/15 * * * * root /usr/local/bin/gitlab-performance-monitor.sh\" | sudo tee -a /etc/crontab\n```\n\n## GitLab Runner Advanced Configuration\n\n### Secure Multi-Platform Runner Setup\n```bash\n# Create advanced runner configuration with security\nsudo tee /etc/gitlab-runner/config.toml > /dev/null <<EOF\nconcurrent = 10\ncheck_interval = 0\nlog_level = \"info\"\nlog_format = \"runner\"\nshutdown_timeout = 30\n\n[session_server]\n  session_timeout = 1800\n\n# Docker executor with security hardening\n[[runners]]\n  name = \"docker-secure-runner\"\n  url = \"https://gitlab.example.com/\"\n  token = \"secure_runner_token\"\n  executor = \"docker\"\n  output_limit = 4096\n  \n  # Security scripts\n  pre_clone_script = \"\"\"\n    echo 'Security scan initiated'\n    id\n    pwd\n    env | grep -E '^(CI_|GITLAB_)' | sort\n  \"\"\"\n  \n  pre_build_script = \"\"\"\n    echo 'Preparing secure build environment'\n    # Verify no sensitive data in environment\n    if env | grep -i -E '(password|secret|key|token)' | grep -v -E '^(CI_JOB_TOKEN|GITLAB_CI|CI_SERVER)'; then\n      echo 'ERROR: Sensitive data detected in environment'\n      exit 1\n    fi\n  \"\"\"\n  \n  post_build_script = \"\"\"\n    echo 'Cleaning up build artifacts'\n    rm -rf /tmp/* 2>/dev/null || true\n  \"\"\"\n  \n  [runners.docker]\n    tls_verify = false\n    image = \"alpine:latest\"\n    privileged = false\n    disable_entrypoint_overwrite = false\n    oom_kill_disable = false\n    disable_cache = false\n    volumes = [\"/cache\", \"/certs/client\"]\n    shm_size = 268435456  # 256MB\n    \n    # Security restrictions\n    cap_drop = [\"ALL\"]\n    cap_add = [\"CHOWN\", \"SETGID\", \"SETUID\"]\n    security_opt = [\"no-new-privileges:true\", \"apparmor:unconfined\"]\n    \n    # Resource limits\n    memory = \"2g\"\n    memory_swap = \"2g\"\n    memory_reservation = \"1g\"\n    cpus = \"2\"\n    \n    # Network security\n    network_mode = \"bridge\"\n    dns = [\"8.8.8.8\", \"8.8.4.4\"]\n    \n    # Disable dangerous features\n    disable_entrypoint_overwrite = true\n    \n    # Image pull policy\n    pull_policy = [\"if-not-present\"]\n    \n  [runners.docker.tmpfs]\n    \"/tmp\" = \"rw,noexec,nosuid,size=100m\"\n    \"/var/tmp\" = \"rw,noexec,nosuid,size=100m\"\n\n# Kubernetes executor (Enterprise recommended)\n[[runners]]\n  name = \"k8s-secure-runner\"\n  url = \"https://gitlab.example.com/\"\n  token = \"k8s_runner_token\"\n  executor = \"kubernetes\"\n  \n  [runners.kubernetes]\n    host = \"https://k8s.example.com:6443\"\n    namespace = \"gitlab-runner\"\n    privileged = false\n    image = \"alpine:latest\"\n    \n    # Security context\n    run_as_user = 1000\n    run_as_group = 1000\n    fs_group = 1000\n    \n    # Resource limits\n    memory_limit = \"4Gi\"\n    memory_request = \"2Gi\"\n    cpu_limit = \"2000m\"\n    cpu_request = \"1000m\"\n    \n    # Security policies\n    [runners.kubernetes.pod_security_context]\n      run_as_non_root = true\n      run_as_user = 1000\n      run_as_group = 1000\n      fs_group = 1000\n      seccomp_profile_type = \"RuntimeDefault\"\n      \n    [runners.kubernetes.container_security_context]\n      allow_privilege_escalation = false\n      read_only_root_filesystem = true\n      capabilities = { drop = [\"ALL\"] }\n      \n    # Volume mounts for security\n    [[runners.kubernetes.volumes.empty_dir]]\n      name = \"tmp\"\n      mount_path = \"/tmp\"\n      medium = \"Memory\"\n      \n    [[runners.kubernetes.volumes.empty_dir]]\n      name = \"var-tmp\"\n      mount_path = \"/var/tmp\"\n      medium = \"Memory\"\n\n# Shell executor for specific tasks (limited use)\n[[runners]]\n  name = \"shell-restricted-runner\"\n  url = \"https://gitlab.example.com/\"\n  token = \"shell_runner_token\"\n  executor = \"shell\"\n  shell = \"bash\"\n  \n  # Restricted tags only\n  tag_list = [\"shell\", \"restricted\"]\n  run_untagged = false\n  locked = true\n  \n  # Security environment\n  environment = [\n    \"PATH=/usr/local/bin:/usr/bin:/bin\",\n    \"HOME=/home/gitlab-runner\",\n    \"SHELL=/bin/bash\"\n  ]\n  \n  # Cleanup\n  builds_dir = \"/home/gitlab-runner/builds\"\n  cache_dir = \"/home/gitlab-runner/cache\"\n  \n  [runners.cache]\n    Type = \"s3\"\n    [runners.cache.s3]\n      ServerAddress = \"s3.amazonaws.com\"\n      BucketName = \"gitlab-runner-cache\"\n      BucketLocation = \"us-west-2\"\n      Insecure = false\nEOF\n\nsudo systemctl restart gitlab-runner\n```\n\n### GitLab Runner Auto-scaling (Cloud)\n```bash\n# Configure GitLab Runner with Docker Machine for auto-scaling\nsudo tee /etc/gitlab-runner/autoscale-config.toml > /dev/null <<EOF\nconcurrent = 50\ncheck_interval = 0\n\n[[runners]]\n  name = \"autoscale-runner\"\n  url = \"https://gitlab.example.com/\"\n  token = \"autoscale_runner_token\"\n  executor = \"docker+machine\"\n  \n  [runners.docker]\n    image = \"alpine:latest\"\n    privileged = false\n    disable_cache = false\n    volumes = [\"/cache\"]\n    \n    # Security\n    cap_drop = [\"ALL\"]\n    security_opt = [\"no-new-privileges:true\"]\n    \n  [runners.machine]\n    IdleCount = 2\n    IdleTime = 1800\n    MaxBuilds = 20\n    MachineName = \"gitlab-runner-%s\"\n    MachineDriver = \"amazonec2\"\n    \n    # AWS EC2 configuration\n    [runners.machine.autoscaling]\n      Periods = [\"* * 9-17 * * mon-fri *\", \"* * 18-8 * * * *\"]\n      IdleCount = [5, 1]\n      IdleTime = [1800, 3600]\n      Timezone = \"UTC\"\n    \n    # Machine options for security\n    [runners.machine.machineoptions]\n      amazonec2-access-key = \"aws_access_key\"\n      amazonec2-secret-key = \"aws_secret_key\"\n      amazonec2-region = \"us-west-2\"\n      amazonec2-vpc-id = \"vpc-12345678\"\n      amazonec2-subnet-id = \"subnet-87654321\"\n      amazonec2-security-group = \"gitlab-runner-sg\"\n      amazonec2-instance-type = \"t3.medium\"\n      amazonec2-ami = \"ami-0c02fb55956c7d316\"  # Amazon Linux 2\n      amazonec2-iam-instance-profile = \"GitLabRunnerInstanceProfile\"\n      amazonec2-use-private-address = \"true\"\n      amazonec2-tags = \"Name,gitlab-runner,Environment,production\"\n      amazonec2-root-size = \"20\"\n      amazonec2-volume-type = \"gp3\"\n      amazonec2-use-ebs-optimized = \"true\"\n      \n  [runners.cache]\n    Type = \"s3\"\n    Shared = true\n    [runners.cache.s3]\n      ServerAddress = \"s3.amazonaws.com\"\n      AccessKey = \"cache_access_key\"\n      SecretKey = \"cache_secret_key\"  \n      BucketName = \"gitlab-runner-cache\"\n      BucketLocation = \"us-west-2\"\n      Insecure = false\nEOF\n```\n\n## Verification and Health Checks\n\n### Comprehensive Health Monitoring\n```bash\nsudo tee /usr/local/bin/gitlab-health-check.sh > /dev/null <<'EOF'\n#!/bin/bash\nHEALTH_LOG=\"/var/log/gitlab-health.log\"\n\nlog_message() {\n    echo \"$(date '+%Y-%m-%d %H:%M:%S') - $1\" | tee -a ${HEALTH_LOG}\n}\n\n# Check GitLab service status\nif gitlab-ctl status | grep -q \"down:\"; then\n    log_message \"âš  Some GitLab services are down:\"\n    gitlab-ctl status | grep \"down:\" | while read line; do\n        log_message \"  - $line\"\n    done\nelse\n    log_message \"âœ“ All GitLab services are running\"\nfi\n\n# Check GitLab application health\nif gitlab-rake gitlab:check >/dev/null 2>&1; then\n    log_message \"âœ“ GitLab application health check passed\"\nelse\n    log_message \"âœ— GitLab application health check failed\"\n    gitlab-rake gitlab:check | tail -10 >> ${HEALTH_LOG}\nfi\n\n# Check GitLab Runner connectivity\nRUNNERS_ONLINE=$(curl -s --header \"PRIVATE-TOKEN: admin_token\" https://gitlab.example.com/api/v4/runners | jq '[.[] | select(.status==\"online\")] | length')\nTOTAL_RUNNERS=$(curl -s --header \"PRIVATE-TOKEN: admin_token\" https://gitlab.example.com/api/v4/runners | jq '. | length')\nlog_message \"â„¹ GitLab Runners: ${RUNNERS_ONLINE}/${TOTAL_RUNNERS} online\"\n\n# Check database connectivity\nif gitlab-psql -c \"SELECT version();\" >/dev/null 2>&1; then\n    log_message \"âœ“ Database connection is healthy\"\nelse\n    log_message \"âœ— Database connection issues\"\nfi\n\n# Check Redis connectivity\nif redis-cli ping | grep -q \"PONG\"; then\n    log_message \"âœ“ Redis connection is healthy\"\nelse\n    log_message \"âœ— Redis connection issues\"\nfi\n\n# Check container registry\nREGISTRY_STATUS=$(curl -s https://registry.example.com/v2/ | jq -r .message 2>/dev/null)\nif [ \"$REGISTRY_STATUS\" = \"authentication required\" ] || [ \"$REGISTRY_STATUS\" = \"null\" ]; then\n    log_message \"âœ“ Container registry is responding\"\nelse\n    log_message \"âš  Container registry issues\"\nfi\n\n# Check backup status\nLAST_BACKUP=$(ls -t /var/opt/gitlab/backups/*_gitlab_backup.tar 2>/dev/null | head -1)\nif [ -n \"$LAST_BACKUP\" ]; then\n    BACKUP_AGE=$(stat -c %Y \"$LAST_BACKUP\")\n    CURRENT_TIME=$(date +%s)\n    HOURS_SINCE_BACKUP=$(( (CURRENT_TIME - BACKUP_AGE) / 3600 ))\n    \n    if [ $HOURS_SINCE_BACKUP -lt 48 ]; then\n        log_message \"âœ“ Recent backup available (${HOURS_SINCE_BACKUP} hours old)\"\n    else\n        log_message \"âš  Last backup is ${HOURS_SINCE_BACKUP} hours old\"\n    fi\nelse\n    log_message \"âœ— No backup files found\"\nfi\n\n# Check SSL certificate expiry\nSSL_EXPIRY=$(echo | openssl s_client -servername gitlab.example.com -connect gitlab.example.com:443 2>/dev/null | openssl x509 -noout -dates | grep notAfter | cut -d= -f2)\nSSL_EXPIRY_EPOCH=$(date -d \"$SSL_EXPIRY\" +%s)\nCURRENT_EPOCH=$(date +%s)\nDAYS_TO_EXPIRY=$(( (SSL_EXPIRY_EPOCH - CURRENT_EPOCH) / 86400 ))\n\nif [ $DAYS_TO_EXPIRY -lt 30 ]; then\n    log_message \"âš  SSL certificate expires in ${DAYS_TO_EXPIRY} days\"\nelse\n    log_message \"âœ“ SSL certificate expires in ${DAYS_TO_EXPIRY} days\"\nfi\n\n# Check system resources\nCPU_USAGE=$(top -bn1 | grep \"Cpu(s)\" | awk '{print $2}' | cut -d'%' -f1)\nMEMORY_USAGE=$(free | grep Mem | awk '{printf \"%.0f\", $3/$2 * 100.0}')\nlog_message \"â„¹ System usage - CPU: ${CPU_USAGE}%, Memory: ${MEMORY_USAGE}%\"\n\nlog_message \"GitLab health check completed\"\nEOF\n\nsudo chmod +x /usr/local/bin/gitlab-health-check.sh\n\n# Schedule health checks every 15 minutes\necho \"*/15 * * * * root /usr/local/bin/gitlab-health-check.sh\" | sudo tee -a /etc/crontab\n```\n\n### Security Audit and Compliance\n```bash\nsudo tee /usr/local/bin/gitlab-security-audit.sh > /dev/null <<'EOF'\n#!/bin/bash\nAUDIT_LOG=\"/var/log/gitlab-security-audit.log\"\nDATE=$(date +%Y%m%d_%H%M%S)\n\nlog_message() {\n    echo \"$(date '+%Y-%m-%d %H:%M:%S') - $1\" | tee -a ${AUDIT_LOG}\n}\n\nlog_message \"Starting GitLab security audit...\"\n\n# Check user accounts with admin privileges\nADMIN_USERS=$(gitlab-rails runner \"puts User.admins.count\")\nlog_message \"â„¹ ${ADMIN_USERS} users with admin privileges\"\n\n# Check for users without 2FA\nUSERS_WITHOUT_2FA=$(gitlab-rails runner \"puts User.where(two_factor_enabled: false).count\")\nlog_message \"â„¹ ${USERS_WITHOUT_2FA} users without 2FA enabled\"\n\n# Check SSH key security\nWEAK_SSH_KEYS=$(gitlab-rails runner \"puts Key.where('LENGTH(key) < ?', 2048).count\")\nlog_message \"â„¹ ${WEAK_SSH_KEYS} SSH keys shorter than 2048 bits\"\n\n# Check project visibility\nPUBLIC_PROJECTS=$(gitlab-rails runner \"puts Project.where(visibility_level: 20).count\")\nINTERNAL_PROJECTS=$(gitlab-rails runner \"puts Project.where(visibility_level: 10).count\")\nPRIVATE_PROJECTS=$(gitlab-rails runner \"puts Project.where(visibility_level: 0).count\")\nlog_message \"â„¹ Projects - Public: ${PUBLIC_PROJECTS}, Internal: ${INTERNAL_PROJECTS}, Private: ${PRIVATE_PROJECTS}\"\n\n# Check for projects without security scanning\nPROJECTS_WITHOUT_SAST=$(gitlab-rails runner \"\nputs Project.joins(:ci_pipelines)\n  .where('ci_pipelines.created_at > ?', 30.days.ago)\n  .where.not(id: Ci::Build.joins(:pipeline).where('ci_builds.name ILIKE ?', '%sast%').select(:project_id))\n  .distinct.count\n\")\nlog_message \"â„¹ ${PROJECTS_WITHOUT_SAST} active projects without SAST scanning\"\n\n# Check external integrations\nWEBHOOK_COUNT=$(gitlab-rails runner \"puts ProjectHook.count + SystemHook.count\")\nlog_message \"â„¹ ${WEBHOOK_COUNT} webhooks configured\"\n\n# Check audit events (Enterprise)\nif gitlab-rails runner \"puts defined?(AuditEvent)\" | grep -q \"constant\"; then\n    RECENT_AUDIT_EVENTS=$(gitlab-rails runner \"puts AuditEvent.where('created_at > ?', 24.hours.ago).count\")\n    log_message \"â„¹ ${RECENT_AUDIT_EVENTS} audit events in last 24 hours\"\nfi\n\n# Check for suspicious activity\nFAILED_LOGINS=$(grep \"Failed Login\" /var/log/gitlab/gitlab-rails/production.log | grep \"$(date +'%Y-%m-%d')\" | wc -l)\nif [ ${FAILED_LOGINS} -gt 20 ]; then\n    log_message \"âš  ${FAILED_LOGINS} failed login attempts today\"\nelse\n    log_message \"âœ“ ${FAILED_LOGINS} failed login attempts today (normal)\"\nfi\n\n# Check for large file uploads\nLARGE_UPLOADS=$(find /var/opt/gitlab/git-data/repositories -type f -size +100M -mtime -7 | wc -l)\nif [ ${LARGE_UPLOADS} -gt 0 ]; then\n    log_message \"â„¹ ${LARGE_UPLOADS} large files (>100MB) uploaded in last week\"\nfi\n\nlog_message \"Security audit completed\"\nEOF\n\nsudo chmod +x /usr/local/bin/gitlab-security-audit.sh\n\n# Schedule daily security audits\necho \"0 8 * * * root /usr/local/bin/gitlab-security-audit.sh\" | sudo tee -a /etc/crontab\n```\n\n## Troubleshooting (Cross-Platform)\n\n### Common Issues and Solutions\n```bash\n# Check GitLab status\nsudo gitlab-ctl status\nsudo gitlab-ctl tail\n\n# Check configuration\nsudo gitlab-ctl show-config\nsudo gitlab-rake gitlab:check SANITIZE=true\n\n# Reconfigure GitLab\nsudo gitlab-ctl reconfigure\nsudo gitlab-ctl restart\n\n# Database issues\nsudo gitlab-psql -d gitlabhq_production\nsudo gitlab-rake db:migrate:status\n\n# Redis issues\nredis-cli ping\nredis-cli info\n\n# Check logs for errors\nsudo gitlab-ctl tail gitlab-workhorse\nsudo gitlab-ctl tail unicorn\nsudo gitlab-ctl tail sidekiq\n\n# Performance issues\nsudo gitlab-rake gitlab:env:info\nsudo gitlab-ctl status | grep memory\n\n# SSL/TLS issues\nsudo gitlab-rake gitlab:check\nopenssl s_client -connect gitlab.example.com:443\n\n# Container registry issues\nsudo gitlab-ctl registry-garbage-collect\ndocker login registry.example.com\n\n# Runner connectivity issues\nsudo gitlab-runner verify\nsudo gitlab-runner list\n\n# Backup issues\ngitlab-backup create STRATEGY=copy\ngitlab-backup restore BACKUP=timestamp\n\n# Reset admin password\nsudo gitlab-rake \"gitlab:password:reset[root]\"\n\n# Check disk usage\ndf -h /var/opt/gitlab/\nsudo du -sh /var/opt/gitlab/git-data/\n\n# Memory usage analysis\nps aux --sort=-%mem | grep gitlab\ngitlab-ctl status | grep memory\n\n# Network connectivity\ncurl -I https://gitlab.example.com\ntelnet gitlab.example.com 443\n\n# Service restart order (if needed)\nsudo gitlab-ctl stop\nsudo gitlab-ctl start postgresql\nsudo gitlab-ctl start redis\nsudo gitlab-ctl start\n```\n\n### Advanced Debugging\n```bash\n# Enable debug logging\nsudo gitlab-ctl edit-config\n# Add: gitlab_rails['log_level'] = 'DEBUG'\n\nsudo gitlab-ctl reconfigure\n\n# Debug specific services\nsudo gitlab-ctl tail gitlab-workhorse\nsudo gitlab-ctl tail unicorn\nsudo gitlab-ctl tail sidekiq\nsudo gitlab-ctl tail gitaly\n\n# Database debugging\nsudo gitlab-psql -d gitlabhq_production -c \"\\l\"\nsudo gitlab-rake db:migrate:status\n\n# Git debugging\nsudo -u git gitaly-debug\nsudo gitlab-rake gitlab:gitaly:check\n\n# Performance profiling\nsudo gitlab-rake gitlab:setup\nsudo gitlab-rake gitlab:check:repos\nsudo gitlab-rake gitlab:cleanup:sessions\n\n# Container registry debugging\nsudo gitlab-ctl registry-garbage-collect -m\ndocker system df\n\n# Runner debugging\nsudo gitlab-runner --debug run\nsudo gitlab-runner exec docker test-job\n\n# Network debugging for distributed setup\nping -c 4 postgres-master.example.com\nping -c 4 redis-master.example.com\ntelnet postgres-master.example.com 5432\ntelnet redis-master.example.com 6379\n\n# Memory leak detection\npmap -x $(pgrep gitlab-workhorse)\nvalgrind --tool=memcheck --leak-check=full gitlab-workhorse\n\n# Strace for syscall analysis\nstrace -p $(pgrep gitlab-workhorse) -e trace=network,file\n```\n\n## Additional Resources\n\n- [Official Documentation](https://docs.gitlab.com/)\n- [GitLab Admin Documentation](https://docs.gitlab.com/ee/administration/)\n- [Security Hardening Guide](https://docs.gitlab.com/security/hardening/)\n- [GitLab Runner Documentation](https://docs.gitlab.com/runner/)\n- [Container Registry Guide](https://docs.gitlab.com/ee/administration/packages/container_registry.html)\n- [GitLab API Documentation](https://docs.gitlab.com/ee/api/)\n\n---\n\n**Note:** This guide is part of the [HowToMgr](https://howtomgr.github.io) collection.","readmeHtml":"<h1 id=\"gitlab-installation-guide\" class=\"mobile-header\">GitLab Installation Guide</h1>\n<p class=\"mobile-paragraph\">Complete DevOps platform with Git repository management, CI/CD pipelines, issue tracking, and container registry. Enterprise-grade solution for modern software development lifecycle with advanced security features.</p>\n<h2 id=\"prerequisites\" class=\"mobile-header\">Prerequisites</h2>\n<li class=\"mobile-list-item\">Linux system (any modern distribution)</li>\n<li class=\"mobile-list-item\">8GB RAM minimum, 16GB+ recommended for production</li>\n<li class=\"mobile-list-item\">4 CPU cores minimum, 8+ recommended</li>\n<li class=\"mobile-list-item\">50GB+ available disk space, SSD recommended</li>\n<li class=\"mobile-list-item\">Domain name for external access</li>\n<li class=\"mobile-list-item\">SSL certificates for production deployment</li>\n<li class=\"mobile-list-item\">SMTP server for email notifications</li>\n<h2 id=\"installation\" class=\"mobile-header\">Installation</h2>\n<h3 id=\"using-omnibus-package-recommended\" class=\"mobile-header\">Using Omnibus Package (Recommended)</h3>\n<p class=\"mobile-paragraph\">#### Ubuntu/Debian</p>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Install dependencies\nsudo apt-get update\nsudo apt-get install -y curl openssh-server ca-certificates tzdata perl postfix\n\n# Configure Postfix for email\nsudo dpkg-reconfigure postfix\n\n# Add GitLab repository\ncurl -fsSL https://packages.gitlab.com/install/repositories/gitlab/gitlab-ee/script.deb.sh | sudo bash\n\n# Install GitLab Enterprise Edition\nsudo EXTERNAL_URL=&quot;https://gitlab.example.com&quot; apt-get install -y gitlab-ee\n\n# For GitLab Community Edition\nsudo EXTERNAL_URL=&quot;https://gitlab.example.com&quot; apt-get install -y gitlab-ce\n\n# Initial configuration\nsudo gitlab-ctl reconfigure\n\n# Check status\nsudo gitlab-ctl status</code></pre>\n      </div>\n    </div>\n<p class=\"mobile-paragraph\">#### RHEL/CentOS/Rocky Linux/AlmaLinux</p>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Install dependencies\nsudo yum install -y curl policycoreutils-python-utils openssh-server perl postfix\n\n# For newer versions\nsudo dnf install -y curl policycoreutils-python-utils openssh-server perl postfix\n\n# Enable and start services\nsudo systemctl enable --now sshd postfix\n\n# Configure SELinux and firewall\nsudo setsebool -P httpd_can_network_connect 1\nsudo firewall-cmd --permanent --add-service=http\nsudo firewall-cmd --permanent --add-service=https\nsudo firewall-cmd --permanent --add-service=ssh\nsudo firewall-cmd --reload\n\n# Add GitLab repository\ncurl -fsSL https://packages.gitlab.com/install/repositories/gitlab/gitlab-ee/script.rpm.sh | sudo bash\n\n# Install GitLab\nsudo EXTERNAL_URL=&quot;https://gitlab.example.com&quot; yum install -y gitlab-ee\n\n# Configure and start\nsudo gitlab-ctl reconfigure</code></pre>\n      </div>\n    </div>\n<p class=\"mobile-paragraph\">#### Fedora</p>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Install dependencies\nsudo dnf install -y curl policycoreutils-python-utils openssh-server perl postfix\n\n# Enable services\nsudo systemctl enable --now sshd postfix\n\n# Configure firewall\nsudo firewall-cmd --permanent --add-service=http\nsudo firewall-cmd --permanent --add-service=https\nsudo firewall-cmd --reload\n\n# Add GitLab repository\ncurl -fsSL https://packages.gitlab.com/install/repositories/gitlab/gitlab-ee/script.rpm.sh | sudo bash\n\n# Install GitLab\nsudo EXTERNAL_URL=&quot;https://gitlab.example.com&quot; dnf install -y gitlab-ee\n\nsudo gitlab-ctl reconfigure</code></pre>\n      </div>\n    </div>\n<h3 id=\"docker-installation-single-container\" class=\"mobile-header\">Docker Installation (Single Container)</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Create GitLab directories\nsudo mkdir -p /srv/gitlab/{config,logs,data}\n\n# Set environment variables\nexport GITLAB_HOME=/srv/gitlab\n\n# Run GitLab container with comprehensive configuration\nsudo docker run --detach \\\n  --hostname gitlab.example.com \\\n  --env GITLAB_OMNIBUS_CONFIG=&quot;\n    external_url &#039;https://gitlab.example.com&#039;;\n    gitlab_rails[&#039;gitlab_shell_ssh_port&#039;] = 2222;\n    \n    # SSL configuration\n    nginx[&#039;ssl_certificate&#039;] = &#039;/etc/gitlab/ssl/gitlab.crt&#039;;\n    nginx[&#039;ssl_certificate_key&#039;] = &#039;/etc/gitlab/ssl/gitlab.key&#039;;\n    nginx[&#039;ssl_protocols&#039;] = &#039;TLSv1.2 TLSv1.3&#039;;\n    nginx[&#039;ssl_prefer_server_ciphers&#039;] = &#039;off&#039;;\n    \n    # Security settings\n    gitlab_rails[&#039;rack_attack_git_basic_auth&#039;] = {\n      &#039;enabled&#039; =&gt; true,\n      &#039;ip_whitelist&#039; =&gt; [&#039;127.0.0.1&#039;, &#039;192.168.1.0/24&#039;],\n      &#039;maxretry&#039; =&gt; 10,\n      &#039;findtime&#039; =&gt; 60,\n      &#039;bantime&#039; =&gt; 3600\n    };\n    \n    # Performance settings\n    postgresql[&#039;shared_preload_libraries&#039;] = &#039;pg_stat_statements&#039;;\n    postgresql[&#039;max_connections&#039;] = 200;\n    postgresql[&#039;shared_buffers&#039;] = &#039;1GB&#039;;\n    postgresql[&#039;effective_cache_size&#039;] = &#039;4GB&#039;;\n    \n    # Container Registry\n    registry_external_url &#039;https://registry.example.com&#039;;\n    gitlab_rails[&#039;registry_enabled&#039;] = true;\n    \n    # Monitoring\n    prometheus_monitoring[&#039;enable&#039;] = true;\n    grafana[&#039;enable&#039;] = true;\n    grafana[&#039;admin_password&#039;] = &#039;secure_grafana_password&#039;;\n    \n    # Email configuration\n    gitlab_rails[&#039;smtp_enable&#039;] = true;\n    gitlab_rails[&#039;smtp_address&#039;] = &#039;smtp.example.com&#039;;\n    gitlab_rails[&#039;smtp_port&#039;] = 587;\n    gitlab_rails[&#039;smtp_user_name&#039;] = &#039;gitlab@example.com&#039;;\n    gitlab_rails[&#039;smtp_password&#039;] = &#039;smtp_secure_password&#039;;\n    gitlab_rails[&#039;smtp_domain&#039;] = &#039;example.com&#039;;\n    gitlab_rails[&#039;smtp_authentication&#039;] = &#039;login&#039;;\n    gitlab_rails[&#039;smtp_enable_starttls_auto&#039;] = true;\n    gitlab_rails[&#039;smtp_tls&#039;] = false;\n    gitlab_rails[&#039;smtp_openssl_verify_mode&#039;] = &#039;peer&#039;;\n    \n    # Email settings\n    gitlab_rails[&#039;gitlab_email_from&#039;] = &#039;gitlab@example.com&#039;;\n    gitlab_rails[&#039;gitlab_email_display_name&#039;] = &#039;GitLab&#039;;\n    \n    # Backup configuration\n    gitlab_rails[&#039;backup_keep_time&#039;] = 604800;\n    gitlab_rails[&#039;backup_upload_connection&#039;] = {\n      &#039;provider&#039; =&gt; &#039;AWS&#039;,\n      &#039;region&#039; =&gt; &#039;us-west-2&#039;,\n      &#039;aws_access_key_id&#039; =&gt; &#039;backup_access_key&#039;,\n      &#039;aws_secret_access_key&#039; =&gt; &#039;backup_secret_key&#039;\n    };\n    gitlab_rails[&#039;backup_upload_remote_directory&#039;] = &#039;gitlab-backups&#039;;\n    &quot; \\\n  --publish 443:443 --publish 80:80 --publish 2222:22 \\\n  --name gitlab \\\n  --restart unless-stopped \\\n  --volume $GITLAB_HOME/config:/etc/gitlab \\\n  --volume $GITLAB_HOME/logs:/var/log/gitlab \\\n  --volume $GITLAB_HOME/data:/var/opt/gitlab \\\n  --shm-size 256m \\\n  gitlab/gitlab-ee:latest</code></pre>\n      </div>\n    </div>\n<h3 id=\"docker-compose-production-setup\" class=\"mobile-header\">Docker Compose (Production Setup)</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\">mkdir -p ~/gitlab-stack\ncd ~/gitlab-stack\n\ncat &gt; docker-compose.yml &lt;&lt;EOF\nversion: &#039;3.8&#039;\n\nservices:\n  gitlab:\n    image: gitlab/gitlab-ee:latest\n    container_name: gitlab\n    restart: unless-stopped\n    hostname: gitlab.example.com\n    environment:\n      GITLAB_OMNIBUS_CONFIG: |\n        external_url &#039;https://gitlab.example.com&#039;\n        \n        # Performance settings\n        postgresql[&#039;shared_buffers&#039;] = &quot;2GB&quot;\n        postgresql[&#039;effective_cache_size&#039;] = &quot;8GB&quot;\n        postgresql[&#039;max_connections&#039;] = 300\n        \n        # Security settings\n        gitlab_rails[&#039;rack_attack_git_basic_auth&#039;] = {\n          &#039;enabled&#039; =&gt; true,\n          &#039;ip_whitelist&#039; =&gt; [&#039;127.0.0.1&#039;, &#039;10.0.0.0/8&#039;, &#039;172.16.0.0/12&#039;, &#039;192.168.0.0/16&#039;],\n          &#039;maxretry&#039; =&gt; 10,\n          &#039;findtime&#039; =&gt; 60,\n          &#039;bantime&#039; =&gt; 3600\n        }\n        \n        # Container Registry\n        registry_external_url &#039;https://registry.example.com&#039;\n        gitlab_rails[&#039;registry_enabled&#039;] = true\n        \n        # Monitoring\n        prometheus_monitoring[&#039;enable&#039;] = true\n        grafana[&#039;enable&#039;] = true\n        \n        # Let&#039;s Encrypt (disable for reverse proxy setup)\n        letsencrypt[&#039;enable&#039;] = false\n        nginx[&#039;listen_port&#039;] = 80\n        nginx[&#039;listen_https&#039;] = false\n        \n        # GitLab Pages\n        pages_external_url &quot;https://pages.example.com&quot;\n        gitlab_pages[&#039;enable&#039;] = true\n    ports:\n      - &#039;80:80&#039;\n      - &#039;443:443&#039;\n      - &#039;2222:22&#039;\n    volumes:\n      - &#039;./config:/etc/gitlab&#039;\n      - &#039;./logs:/var/log/gitlab&#039;\n      - &#039;./data:/var/opt/gitlab&#039;\n    networks:\n      - gitlab\n    shm_size: &#039;256m&#039;\n    healthcheck:\n      test: [&quot;CMD-SHELL&quot;, &quot;gitlab-healthcheck --fail --max-time 10&quot;]\n      interval: 60s\n      timeout: 30s\n      retries: 5\n      start_period: 200s\n\n  gitlab-runner:\n    image: gitlab/gitlab-runner:latest\n    container_name: gitlab-runner\n    restart: unless-stopped\n    volumes:\n      - &#039;./runner-config:/etc/gitlab-runner&#039;\n      - &#039;/var/run/docker.sock:/var/run/docker.sock&#039;\n    networks:\n      - gitlab\n    depends_on:\n      - gitlab\n\n  redis:\n    image: redis:7-alpine\n    container_name: gitlab-redis\n    restart: unless-stopped\n    command: redis-server --appendonly yes --requirepass redis_secure_password\n    volumes:\n      - redis-data:/data\n    networks:\n      - gitlab\n\n  nginx:\n    image: nginx:alpine\n    container_name: gitlab-nginx\n    restart: unless-stopped\n    ports:\n      - &#039;443:443&#039;\n    volumes:\n      - &#039;./nginx/nginx.conf:/etc/nginx/nginx.conf:ro&#039;\n      - &#039;./nginx/ssl:/etc/nginx/ssl:ro&#039;\n    depends_on:\n      - gitlab\n    networks:\n      - gitlab\n\nnetworks:\n  gitlab:\n    driver: bridge\n\nvolumes:\n  redis-data:\nEOF\n\n# Create NGINX reverse proxy configuration\nmkdir -p nginx\ncat &gt; nginx/nginx.conf &lt;&lt;EOF\nevents {\n    worker_connections 1024;\n}\n\nhttp {\n    upstream gitlab {\n        server gitlab:80;\n    }\n    \n    upstream registry {\n        server gitlab:5000;\n    }\n\n    server {\n        listen 443 ssl http2;\n        server_name gitlab.example.com;\n\n        ssl_certificate /etc/nginx/ssl/gitlab.crt;\n        ssl_certificate_key /etc/nginx/ssl/gitlab.key;\n        ssl_protocols TLSv1.2 TLSv1.3;\n        ssl_ciphers ECDHE-RSA-AES256-GCM-SHA512:DHE-RSA-AES256-GCM-SHA512;\n\n        client_max_body_size 0;\n        gzip off;\n\n        location / {\n            proxy_pass http://gitlab;\n            proxy_set_header Host \\$host;\n            proxy_set_header X-Real-IP \\$remote_addr;\n            proxy_set_header X-Forwarded-For \\$proxy_add_x_forwarded_for;\n            proxy_set_header X-Forwarded-Proto \\$scheme;\n        }\n    }\n\n    server {\n        listen 443 ssl http2;\n        server_name registry.example.com;\n\n        ssl_certificate /etc/nginx/ssl/registry.crt;\n        ssl_certificate_key /etc/nginx/ssl/registry.key;\n\n        client_max_body_size 0;\n\n        location /v2/ {\n            proxy_pass http://registry;\n            proxy_set_header Host \\$host;\n            proxy_set_header X-Real-IP \\$remote_addr;\n            proxy_set_header X-Forwarded-For \\$proxy_add_x_forwarded_for;\n            proxy_set_header X-Forwarded-Proto \\$scheme;\n        }\n    }\n}\nEOF\n\ndocker-compose up -d</code></pre>\n      </div>\n    </div>\n<h2 id=\"enterprise-configuration\" class=\"mobile-header\">Enterprise Configuration</h2>\n<h3 id=\"production-configuration-etcgitlabgitlabrb\" class=\"mobile-header\">Production Configuration (/etc/gitlab/gitlab.rb)</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\">sudo tee /etc/gitlab/gitlab.rb &gt; /dev/null &lt;&lt;EOF\n# GitLab Enterprise Production Configuration\n\nexternal_url &#039;https://gitlab.example.com&#039;\n\n# Performance and Resource Settings\nunicorn[&#039;worker_timeout&#039;] = 60\nunicorn[&#039;worker_processes&#039;] = 8\nsidekiq[&#039;max_concurrency&#039;] = 25\nsidekiq[&#039;min_concurrency&#039;] = 10\n\n# PostgreSQL configuration\npostgresql[&#039;enable&#039;] = true\npostgresql[&#039;max_connections&#039;] = 300\npostgresql[&#039;shared_buffers&#039;] = &quot;2GB&quot;\npostgresql[&#039;effective_cache_size&#039;] = &quot;8GB&quot;\npostgresql[&#039;work_mem&#039;] = &quot;16MB&quot;\npostgresql[&#039;maintenance_work_mem&#039;] = &quot;256MB&quot;\npostgresql[&#039;checkpoint_completion_target&#039;] = 0.9\npostgresql[&#039;wal_buffers&#039;] = &quot;16MB&quot;\npostgresql[&#039;default_statistics_target&#039;] = 100\npostgresql[&#039;random_page_cost&#039;] = 1.1\npostgresql[&#039;effective_io_concurrency&#039;] = 200\n\n# Redis configuration\nredis[&#039;enable&#039;] = true\nredis[&#039;maxmemory&#039;] = &quot;1gb&quot;\nredis[&#039;maxmemory_policy&#039;] = &quot;allkeys-lru&quot;\nredis[&#039;save&#039;] = &#039;900 1 300 10 60 10000&#039;\nredis[&#039;password&#039;] = &#039;redis_secure_password&#039;\n\n# Gitaly configuration (Git RPC service)\ngitaly[&#039;enable&#039;] = true\ngitaly[&#039;auth_token&#039;] = &#039;secure_gitaly_token&#039;\ngitaly[&#039;ruby_max_rss&#039;] = 300000000  # 300MB\ngitaly[&#039;concurrency&#039;] = [\n  {\n    &#039;rpc&#039; =&gt; &quot;/gitaly.SmartHTTPService/PostReceivePack&quot;,\n    &#039;max_per_repo&#039; =&gt; 3\n  },\n  {\n    &#039;rpc&#039; =&gt; &quot;/gitaly.SSHService/SSHUploadPack&quot;, \n    &#039;max_per_repo&#039; =&gt; 3\n  }\n]\n\n# NGINX configuration\nnginx[&#039;enable&#039;] = true\nnginx[&#039;listen_port&#039;] = 80\nnginx[&#039;listen_https&#039;] = false\nnginx[&#039;redirect_http_to_https&#039;] = false\nnginx[&#039;ssl_certificate&#039;] = &quot;/etc/gitlab/ssl/gitlab.crt&quot;\nnginx[&#039;ssl_certificate_key&#039;] = &quot;/etc/gitlab/ssl/gitlab.key&quot;\nnginx[&#039;ssl_protocols&#039;] = &quot;TLSv1.2 TLSv1.3&quot;\nnginx[&#039;ssl_prefer_server_ciphers&#039;] = &quot;off&quot;\nnginx[&#039;ssl_ciphers&#039;] = &quot;ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384&quot;\n\n# Container Registry\nregistry_external_url &#039;https://registry.example.com&#039;\ngitlab_rails[&#039;registry_enabled&#039;] = true\nregistry[&#039;enable&#039;] = true\nregistry[&#039;username&#039;] = &quot;registry&quot;\nregistry[&#039;uid&#039;] = 996\nregistry[&#039;gid&#039;] = 996\nregistry[&#039;dir&#039;] = &quot;/var/opt/gitlab/registry&quot;\nregistry[&#039;log_directory&#039;] = &quot;/var/log/gitlab/registry&quot;\nregistry[&#039;log_level&#039;] = &quot;info&quot;\nregistry[&#039;rootcertbundle&#039;] = &quot;/opt/gitlab/embedded/ssl/certs/cacert.pem&quot;\n\n# GitLab Pages\npages_external_url &quot;https://pages.example.com&quot;\ngitlab_pages[&#039;enable&#039;] = true\ngitlab_pages[&#039;dir&#039;] = &quot;/var/opt/gitlab/gitlab-pages&quot;\ngitlab_pages[&#039;log_directory&#039;] = &quot;/var/log/gitlab/gitlab-pages&quot;\ngitlab_pages[&#039;access_control&#039;] = true\ngitlab_pages[&#039;use_legacy_storage&#039;] = false\n\n# Email configuration\ngitlab_rails[&#039;smtp_enable&#039;] = true\ngitlab_rails[&#039;smtp_address&#039;] = &quot;smtp.example.com&quot;\ngitlab_rails[&#039;smtp_port&#039;] = 587\ngitlab_rails[&#039;smtp_user_name&#039;] = &quot;gitlab@example.com&quot;\ngitlab_rails[&#039;smtp_password&#039;] = &quot;smtp_secure_password&quot;\ngitlab_rails[&#039;smtp_domain&#039;] = &quot;example.com&quot;\ngitlab_rails[&#039;smtp_authentication&#039;] = &quot;login&quot;\ngitlab_rails[&#039;smtp_enable_starttls_auto&#039;] = true\ngitlab_rails[&#039;smtp_tls&#039;] = false\ngitlab_rails[&#039;smtp_openssl_verify_mode&#039;] = &#039;peer&#039;\n\ngitlab_rails[&#039;gitlab_email_enabled&#039;] = true\ngitlab_rails[&#039;gitlab_email_from&#039;] = &#039;gitlab@example.com&#039;\ngitlab_rails[&#039;gitlab_email_display_name&#039;] = &#039;GitLab&#039;\ngitlab_rails[&#039;gitlab_email_reply_to&#039;] = &#039;noreply@example.com&#039;\n\n# Security settings\ngitlab_rails[&#039;rack_attack_git_basic_auth&#039;] = {\n  &#039;enabled&#039; =&gt; true,\n  &#039;ip_whitelist&#039; =&gt; %w{127.0.0.1 192.168.1.0/24 10.0.0.0/8},\n  &#039;maxretry&#039; =&gt; 10,\n  &#039;findtime&#039; =&gt; 60,\n  &#039;bantime&#039; =&gt; 3600\n}\n\n# Two-factor authentication\ngitlab_rails[&#039;require_two_factor_authentication&#039;] = false\ngitlab_rails[&#039;two_factor_grace_period&#039;] = 8  # 8 hours instead of default 48\n\n# Session settings\ngitlab_rails[&#039;session_expire_delay&#039;] = 10080  # 1 week\ngitlab_rails[&#039;session_store_enabled&#039;] = true\n\n# Backup configuration\ngitlab_rails[&#039;backup_keep_time&#039;] = 604800  # 7 days\ngitlab_rails[&#039;backup_upload_connection&#039;] = {\n  &#039;provider&#039; =&gt; &#039;AWS&#039;,\n  &#039;region&#039; =&gt; &#039;us-west-2&#039;,\n  &#039;aws_access_key_id&#039; =&gt; &#039;backup_access_key&#039;,\n  &#039;aws_secret_access_key&#039; =&gt; &#039;backup_secret_key&#039;\n}\ngitlab_rails[&#039;backup_upload_remote_directory&#039;] = &#039;gitlab-backups&#039;\ngitlab_rails[&#039;backup_multipart_chunk_size&#039;] = 104857600  # 100MB\n\n# Monitoring\nprometheus_monitoring[&#039;enable&#039;] = true\nprometheus[&#039;enable&#039;] = true\nprometheus[&#039;listen_address&#039;] = &#039;localhost:9090&#039;\nprometheus[&#039;scrape_configs&#039;] = [\n  {\n    &#039;job_name&#039; =&gt; &#039;gitlab-workhorse&#039;,\n    &#039;static_configs&#039; =&gt; [\n      { &#039;targets&#039; =&gt; [&#039;localhost:9229&#039;] }\n    ]\n  },\n  {\n    &#039;job_name&#039; =&gt; &#039;gitlab-unicorn&#039;,\n    &#039;static_configs&#039; =&gt; [\n      { &#039;targets&#039; =&gt; [&#039;localhost:8080&#039;] }\n    ]\n  },\n  {\n    &#039;job_name&#039; =&gt; &#039;gitlab-sidekiq&#039;,\n    &#039;static_configs&#039; =&gt; [\n      { &#039;targets&#039; =&gt; [&#039;localhost:8082&#039;] }\n    ]\n  }\n]\n\ngrafana[&#039;enable&#039;] = true\ngrafana[&#039;admin_password&#039;] = &#039;secure_grafana_password&#039;\ngrafana[&#039;disable_login_form&#039;] = false\n\n# Logging\nlogging[&#039;svlogd_size&#039;] = 200 * 1024 * 1024  # 200MB\nlogging[&#039;svlogd_num&#039;] = 30\nlogging[&#039;svlogd_timeout&#039;] = 24 * 60 * 60    # rotate after 24 hours\nlogging[&#039;logrotate_frequency&#039;] = &quot;daily&quot;\nlogging[&#039;logrotate_rotate&#039;] = 30\nlogging[&#039;logrotate_compress&#039;] = &quot;compress&quot;\n\n# Git settings\ngitlab_rails[&#039;gitlab_default_branch&#039;] = &#039;main&#039;\ngitlab_rails[&#039;max_request_duration_seconds&#039;] = 60\n\n# Rate limiting\ngitlab_rails[&#039;rate_limit_requests_per_period&#039;] = 300\ngitlab_rails[&#039;rate_limit_period&#039;] = 60\n\n# Enterprise features (if using GitLab EE)\n# gitlab_rails[&#039;ee_license&#039;] = File.read(&#039;/etc/gitlab/GitLab.gitlab-license&#039;)\n\n# Security scanning\ngitlab_rails[&#039;dependency_scanning_enabled&#039;] = true\ngitlab_rails[&#039;container_scanning_enabled&#039;] = true\ngitlab_rails[&#039;sast_enabled&#039;] = true\ngitlab_rails[&#039;secret_detection_enabled&#039;] = true\n\n# LDAP configuration (Enterprise)\ngitlab_rails[&#039;ldap_enabled&#039;] = false\ngitlab_rails[&#039;prevent_ldap_sign_in&#039;] = false\ngitlab_rails[&#039;ldap_servers&#039;] = {\n  &#039;main&#039; =&gt; {\n    &#039;label&#039; =&gt; &#039;LDAP&#039;,\n    &#039;host&#039; =&gt; &#039;ldap.example.com&#039;,\n    &#039;port&#039; =&gt; 636,\n    &#039;uid&#039; =&gt; &#039;sAMAccountName&#039;,\n    &#039;bind_dn&#039; =&gt; &#039;CN=gitlab,OU=Service Accounts,DC=example,DC=com&#039;,\n    &#039;password&#039; =&gt; &#039;ldap_service_password&#039;,\n    &#039;encryption&#039; =&gt; &#039;ssl&#039;,\n    &#039;verify_certificates&#039; =&gt; true,\n    &#039;ca_file&#039; =&gt; &#039;/etc/gitlab/ssl/ldap-ca.crt&#039;,\n    &#039;base&#039; =&gt; &#039;DC=example,DC=com&#039;,\n    &#039;user_filter&#039; =&gt; &#039;&#039;,\n    &#039;attributes&#039; =&gt; {\n      &#039;username&#039; =&gt; [&#039;uid&#039;, &#039;userid&#039;, &#039;sAMAccountName&#039;],\n      &#039;email&#039; =&gt; [&#039;mail&#039;, &#039;email&#039;, &#039;userPrincipalName&#039;],\n      &#039;name&#039; =&gt; &#039;cn&#039;,\n      &#039;first_name&#039; =&gt; &#039;givenName&#039;,\n      &#039;last_name&#039; =&gt; &#039;sn&#039;\n    },\n    &#039;group_base&#039; =&gt; &#039;OU=Groups,DC=example,DC=com&#039;,\n    &#039;admin_group&#039; =&gt; &#039;GitLab Administrators&#039;\n  }\n}\nEOF\n\nsudo gitlab-ctl reconfigure</code></pre>\n      </div>\n    </div>\n<h2 id=\"security-hardening-2024-best-practices\" class=\"mobile-header\">Security Hardening (2024 Best Practices)</h2>\n<h3 id=\"ssltls-configuration\" class=\"mobile-header\">SSL/TLS Configuration</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Generate SSL certificates\nsudo mkdir -p /etc/gitlab/ssl\n\n# Self-signed certificate for testing\nsudo openssl req -x509 -nodes -days 365 -newkey rsa:4096 \\\n  -keyout /etc/gitlab/ssl/gitlab.key \\\n  -out /etc/gitlab/ssl/gitlab.crt \\\n  -subj &quot;/C=US/ST=State/L=City/O=Organization/CN=gitlab.example.com&quot;\n\n# Production: Let&#039;s Encrypt integration\nsudo tee -a /etc/gitlab/gitlab.rb &gt; /dev/null &lt;&lt;EOF\n\n# Let&#039;s Encrypt configuration\nletsencrypt[&#039;enable&#039;] = true\nletsencrypt[&#039;contact_emails&#039;] = [&#039;admin@example.com&#039;]\nletsencrypt[&#039;auto_renew&#039;] = true\nletsencrypt[&#039;auto_renew_hour&#039;] = 0\nletsencrypt[&#039;auto_renew_minute&#039;] = 0\nletsencrypt[&#039;auto_renew_day_of_month&#039;] = &quot;*/4&quot;\n\n# Force HTTPS\nnginx[&#039;redirect_http_to_https&#039;] = true\nnginx[&#039;ssl_protocols&#039;] = &quot;TLSv1.2 TLSv1.3&quot;\nnginx[&#039;ssl_prefer_server_ciphers&#039;] = &quot;off&quot;\nnginx[&#039;ssl_ciphers&#039;] = &quot;ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384&quot;\n\n# HSTS\nnginx[&#039;hsts_max_age&#039;] = 31536000\nnginx[&#039;hsts_include_subdomains&#039;] = true\nEOF\n\nsudo gitlab-ctl reconfigure</code></pre>\n      </div>\n    </div>\n<h3 id=\"advanced-security-configuration\" class=\"mobile-header\">Advanced Security Configuration</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Configure security settings\nsudo tee -a /etc/gitlab/gitlab.rb &gt; /dev/null &lt;&lt;EOF\n\n# Security hardening\ngitlab_rails[&#039;webhook_timeout&#039;] = 10\ngitlab_rails[&#039;webhook_max_redirects&#039;] = 3\n\n# Disable password authentication (use SSO/LDAP)\ngitlab_rails[&#039;omniauth_allow_single_sign_on&#039;] = [&#039;saml&#039;, &#039;ldapmain&#039;]\ngitlab_rails[&#039;omniauth_block_auto_created_users&#039;] = false\ngitlab_rails[&#039;omniauth_auto_sign_in_with_provider&#039;] = &#039;saml&#039;\n\n# API rate limiting\ngitlab_rails[&#039;rate_limit_requests_per_period&#039;] = 1000\ngitlab_rails[&#039;rate_limit_period&#039;] = 60\n\n# Git over HTTP rate limiting\ngitlab_rails[&#039;rack_attack_git_basic_auth&#039;] = {\n  &#039;enabled&#039; =&gt; true,\n  &#039;ip_whitelist&#039; =&gt; %w{127.0.0.1 192.168.1.0/24},\n  &#039;maxretry&#039; =&gt; 20,\n  &#039;findtime&#039; =&gt; 60,\n  &#039;bantime&#039; =&gt; 3600\n}\n\n# Protected paths\ngitlab_rails[&#039;rack_attack_protected_paths&#039;] = [\n  &#039;/users/password&#039;,\n  &#039;/users/sign_in&#039;,\n  &#039;/api/v4/session.json&#039;,\n  &#039;/api/v4/session&#039;,\n  &#039;/users/confirmation&#039;,\n  &#039;/unsubscribes/&#039;,\n  &#039;/import/github/personal_access_token&#039;,\n  &#039;/admin/session&#039;\n]\n\n# SSH security\ngitlab_rails[&#039;gitlab_shell_ssh_port&#039;] = 2222\ngitlab_shell[&#039;auth_file&#039;] = &quot;/var/opt/gitlab/.ssh/authorized_keys&quot;\n\n# Container Registry security\nregistry[&#039;notifications&#039;] = [\n  {\n    &#039;name&#039; =&gt; &#039;security_scan&#039;,\n    &#039;url&#039; =&gt; &#039;https://security-scanner.example.com/webhook&#039;,\n    &#039;timeout&#039; =&gt; &#039;2000ms&#039;,\n    &#039;threshold&#039; =&gt; 3,\n    &#039;backoff&#039; =&gt; &#039;1000ms&#039;\n  }\n]\n\n# Secrets management\ngitlab_rails[&#039;db_password&#039;] = File.read(&#039;/etc/gitlab/secrets/db_password&#039;).strip\ngitlab_rails[&#039;secret_key_base&#039;] = File.read(&#039;/etc/gitlab/secrets/secret_key_base&#039;).strip\ngitlab_rails[&#039;otp_key_base&#039;] = File.read(&#039;/etc/gitlab/secrets/otp_key_base&#039;).strip\ngitlab_rails[&#039;encrypted_settings_key_base&#039;] = File.read(&#039;/etc/gitlab/secrets/encrypted_settings_key_base&#039;).strip\n\n# Audit logging\ngitlab_rails[&#039;audit_events_enabled&#039;] = true\n\n# Disable features that increase attack surface\ngitlab_rails[&#039;usage_ping_enabled&#039;] = false\ngitlab_rails[&#039;sentry_enabled&#039;] = false\nEOF\n\n# Create secrets directory and files\nsudo mkdir -p /etc/gitlab/secrets\nsudo openssl rand -base64 64 | sudo tee /etc/gitlab/secrets/db_password\nsudo openssl rand -base64 64 | sudo tee /etc/gitlab/secrets/secret_key_base\nsudo openssl rand -base64 64 | sudo tee /etc/gitlab/secrets/otp_key_base\nsudo openssl rand -base64 64 | sudo tee /etc/gitlab/secrets/encrypted_settings_key_base\n\n# Secure permissions\nsudo chmod 600 /etc/gitlab/secrets/*\nsudo chown git:git /etc/gitlab/secrets/*\n\nsudo gitlab-ctl reconfigure</code></pre>\n      </div>\n    </div>\n<h3 id=\"gitlab-runner-security-configuration\" class=\"mobile-header\">GitLab Runner Security Configuration</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Create secure runner configuration\nsudo mkdir -p /etc/gitlab-runner\n\nsudo tee /etc/gitlab-runner/config.toml &gt; /dev/null &lt;&lt;EOF\nconcurrent = 4\ncheck_interval = 0\nshutdown_timeout = 0\n\n[session_server]\n  session_timeout = 1800\n\n[[runners]]\n  name = &quot;docker-runner-secure&quot;\n  url = &quot;https://gitlab.example.com/&quot;\n  token = &quot;runner_registration_token&quot;\n  executor = &quot;docker&quot;\n  \n  # Security settings\n  pre_clone_script = &quot;echo &#039;Starting secure build&#039;&quot;\n  pre_build_script = &quot;echo &#039;Preparing secure environment&#039;&quot;\n  post_build_script = &quot;echo &#039;Cleaning up secure environment&#039;&quot;\n  \n  [runners.docker]\n    tls_verify = false\n    image = &quot;alpine:latest&quot;\n    privileged = false  # Critical: Never use privileged mode\n    disable_entrypoint_overwrite = false\n    oom_kill_disable = false\n    disable_cache = false\n    volumes = [&quot;/cache&quot;, &quot;/certs/client&quot;]\n    shm_size = 0\n    network_mode = &quot;bridge&quot;\n    \n    # Security restrictions\n    cap_drop = [&quot;ALL&quot;]\n    cap_add = [&quot;CHOWN&quot;, &quot;SETGID&quot;, &quot;SETUID&quot;]\n    security_opt = [&quot;no-new-privileges:true&quot;]\n    \n    # Resource limits\n    memory = &quot;2g&quot;\n    memory_swap = &quot;2g&quot;\n    memory_reservation = &quot;1g&quot;\n    cpus = &quot;1.5&quot;\n    \n    # Network security\n    dns = [&quot;8.8.8.8&quot;, &quot;8.8.4.4&quot;]\n    extra_hosts = [&quot;gitlab.example.com:192.168.1.100&quot;]\n    \n    # Image scanning\n    pull_policy = [&quot;if-not-present&quot;]\n    \n  [runners.docker.tmpfs]\n    &quot;/tmp&quot; = &quot;rw,noexec,nosuid,size=100m&quot;\n    &quot;/var/tmp&quot; = &quot;rw,noexec,nosuid,size=100m&quot;\n\n# Kubernetes executor (more secure)\n[[runners]]\n  name = &quot;k8s-runner-secure&quot;\n  url = &quot;https://gitlab.example.com/&quot;\n  token = &quot;k8s_runner_token&quot;\n  executor = &quot;kubernetes&quot;\n  \n  [runners.kubernetes]\n    host = &quot;https://k8s.example.com:6443&quot;\n    namespace = &quot;gitlab-runner&quot;\n    privileged = false  # Never use privileged\n    image = &quot;alpine:latest&quot;\n    \n    # Security context\n    run_as_user = 1000\n    run_as_group = 1000\n    fs_group = 1000\n    \n    # Resource limits\n    memory_limit = &quot;2Gi&quot;\n    memory_request = &quot;1Gi&quot;\n    cpu_limit = &quot;1000m&quot;\n    cpu_request = &quot;500m&quot;\n    \n    # Security policies\n    [runners.kubernetes.pod_security_context]\n      run_as_non_root = true\n      run_as_user = 1000\n      run_as_group = 1000\n      fs_group = 1000\n      \n    [[runners.kubernetes.volumes.empty_dir]]\n      name = &quot;tmp&quot;\n      mount_path = &quot;/tmp&quot;\n      medium = &quot;Memory&quot;\nEOF\n\n# Register runner with security tags\nsudo gitlab-runner register \\\n  --url &quot;https://gitlab.example.com/&quot; \\\n  --registration-token &quot;RUNNER_TOKEN&quot; \\\n  --description &quot;secure-docker-runner&quot; \\\n  --tag-list &quot;docker,secure,production&quot; \\\n  --run-untagged=&quot;false&quot; \\\n  --locked=&quot;true&quot; \\\n  --access-level=&quot;ref_protected&quot; \\\n  --executor &quot;docker&quot; \\\n  --docker-image alpine:latest \\\n  --docker-privileged=&quot;false&quot; \\\n  --docker-volumes &quot;/certs/client&quot;\n\nsudo systemctl enable --now gitlab-runner</code></pre>\n      </div>\n    </div>\n<h2 id=\"cicd-pipeline-security\" class=\"mobile-header\">CI/CD Pipeline Security</h2>\n<h3 id=\"secure-pipeline-configuration\" class=\"mobile-header\">Secure Pipeline Configuration</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Create .gitlab-ci.yml with security best practices\ncat &gt; .gitlab-ci.yml &lt;&lt;EOF\n# GitLab CI/CD Security Best Practices - 2024\n\nstages:\n  - security-scan\n  - test\n  - build\n  - security-test\n  - deploy\n\nvariables:\n  # Security variables\n  DOCKER_DRIVER: overlay2\n  DOCKER_TLS_CERTDIR: &quot;/certs&quot;\n  SECURE_LOG_LEVEL: info\n  \n  # Use protected variables for sensitive data\n  # DEPLOY_TOKEN: (set in GitLab UI as protected variable)\n  # AWS_ACCESS_KEY: (set in GitLab UI as protected variable)\n\n# Security scanning stage\nsecret-detection:\n  stage: security-scan\n  image: registry.gitlab.com/gitlab-org/security-products/analyzers/secrets:latest\n  script:\n    - echo &quot;Scanning for secrets in code...&quot;\n    - /analyzer run\n  artifacts:\n    reports:\n      secret_detection: gl-secret-detection-report.json\n  rules:\n    - if: &#039;\\$CI_COMMIT_BRANCH&#039;\n  tags:\n    - secure\n\ndependency-scanning:\n  stage: security-scan  \n  image: registry.gitlab.com/gitlab-org/security-products/analyzers/gemnasium:latest\n  script:\n    - echo &quot;Scanning dependencies for vulnerabilities...&quot;\n    - /analyzer run\n  artifacts:\n    reports:\n      dependency_scanning: gl-dependency-scanning-report.json\n  rules:\n    - if: &#039;\\$CI_COMMIT_BRANCH&#039;\n  tags:\n    - secure\n\nsast:\n  stage: security-scan\n  image: registry.gitlab.com/gitlab-org/security-products/analyzers/sobelow:latest\n  script:\n    - echo &quot;Static application security testing...&quot;\n    - /analyzer run\n  artifacts:\n    reports:\n      sast: gl-sast-report.json\n  rules:\n    - if: &#039;\\$CI_COMMIT_BRANCH&#039;\n  tags:\n    - secure\n\n# Container scanning\ncontainer-scanning:\n  stage: security-test\n  image: registry.gitlab.com/gitlab-org/security-products/analyzers/klar:latest\n  script:\n    - echo &quot;Scanning container image for vulnerabilities...&quot;\n    - /analyzer run\n  artifacts:\n    reports:\n      container_scanning: gl-container-scanning-report.json\n  dependencies:\n    - build\n  rules:\n    - if: &#039;\\$CI_COMMIT_BRANCH&#039;\n  tags:\n    - secure\n\n# Secure build stage\nbuild:\n  stage: build\n  image: docker:latest\n  services:\n    - docker:dind\n  before_script:\n    # Verify image signatures\n    - echo &quot;Verifying base image integrity...&quot;\n    - docker trust inspect alpine:latest\n  script:\n    - echo &quot;Building application with security scanning...&quot;\n    - docker build -t \\$CI_REGISTRY_IMAGE:\\$CI_COMMIT_SHA .\n    - docker run --rm -v /var/run/docker.sock:/var/run/docker.sock aquasec/trivy image \\$CI_REGISTRY_IMAGE:\\$CI_COMMIT_SHA\n    - docker login -u \\$CI_REGISTRY_USER -p \\$CI_REGISTRY_PASSWORD \\$CI_REGISTRY\n    - docker push \\$CI_REGISTRY_IMAGE:\\$CI_COMMIT_SHA\n  rules:\n    - if: &#039;\\$CI_COMMIT_BRANCH == &quot;main&quot;&#039;\n  tags:\n    - secure\n\n# Secure deployment\ndeploy-production:\n  stage: deploy\n  image: alpine:latest\n  before_script:\n    # Install kubectl and verify cluster connectivity\n    - apk add --no-cache curl\n    - curl -LO &quot;https://dl.k8s.io/release/v1.28.0/bin/linux/amd64/kubectl&quot;\n    - chmod +x kubectl &amp;&amp; mv kubectl /usr/local/bin/\n    - kubectl config use-context production-cluster\n    - kubectl auth can-i create deployments --namespace=production\n  script:\n    - echo &quot;Deploying to production with security validations...&quot;\n    - kubectl apply -f k8s/production/ --namespace=production\n    - kubectl rollout status deployment/app --namespace=production --timeout=300s\n  environment:\n    name: production\n    url: https://app.example.com\n  rules:\n    - if: &#039;\\$CI_COMMIT_BRANCH == &quot;main&quot;&#039;\n      when: manual\n  only:\n    variables:\n      - \\$CI_COMMIT_REF_PROTECTED == &quot;true&quot;\n  tags:\n    - secure\n    - production\n\n# Security compliance check\ncompliance-check:\n  stage: security-test\n  image: alpine:latest\n  script:\n    - echo &quot;Running compliance checks...&quot;\n    - apk add --no-cache curl jq\n    - |\n      # Check for required security labels in Docker images\n      if ! docker inspect \\$CI_REGISTRY_IMAGE:\\$CI_COMMIT_SHA | jq -r &#039;.[].Config.Labels[&quot;security.scan&quot;]&#039; | grep -q &quot;passed&quot;; then\n        echo &quot;ERROR: Image failed security scan&quot;\n        exit 1\n      fi\n    - echo &quot;Compliance check passed&quot;\n  dependencies:\n    - container-scanning\n  rules:\n    - if: &#039;\\$CI_COMMIT_BRANCH == &quot;main&quot;&#039;\n  tags:\n    - secure\n\n# Infrastructure as Code scanning\niac-scanning:\n  stage: security-scan\n  image: bridgecrew/checkov:latest\n  script:\n    - checkov --framework terraform --framework kubernetes --framework dockerfile\n  artifacts:\n    reports:\n      junit: checkov-report.xml\n  rules:\n    - if: &#039;\\$CI_COMMIT_BRANCH&#039;\n      changes:\n        - &quot;**/*.tf&quot;\n        - &quot;**/*.yml&quot;\n        - &quot;**/*.yaml&quot;\n        - &quot;**/Dockerfile*&quot;\n  tags:\n    - secure\nEOF</code></pre>\n      </div>\n    </div>\n<h3 id=\"rbac-and-access-control\" class=\"mobile-header\">RBAC and Access Control</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Configure GitLab RBAC via API\nGITLAB_URL=&quot;https://gitlab.example.com&quot;\nADMIN_TOKEN=&quot;your_admin_token&quot;\n\n# Create groups with specific permissions\ncurl --request POST --header &quot;PRIVATE-TOKEN: ${ADMIN_TOKEN}&quot; \\\n  --data &quot;name=developers&amp;path=developers&amp;description=Development team&amp;visibility=private&quot; \\\n  &quot;${GITLAB_URL}/api/v4/groups&quot;\n\ncurl --request POST --header &quot;PRIVATE-TOKEN: ${ADMIN_TOKEN}&quot; \\\n  --data &quot;name=security-team&amp;path=security-team&amp;description=Security team&amp;visibility=private&quot; \\\n  &quot;${GITLAB_URL}/api/v4/groups&quot;\n\n# Create projects with security templates\ncurl --request POST --header &quot;PRIVATE-TOKEN: ${ADMIN_TOKEN}&quot; \\\n  --data &quot;name=secure-app&amp;description=Secure application&amp;visibility=private&amp;issues_enabled=true&amp;merge_requests_enabled=true&amp;wiki_enabled=false&amp;builds_enabled=true&amp;snippets_enabled=false&amp;container_registry_enabled=true&amp;shared_runners_enabled=false&quot; \\\n  &quot;${GITLAB_URL}/api/v4/projects&quot;\n\n# Configure branch protection\nPROJECT_ID=&quot;1&quot;  # Replace with actual project ID\ncurl --request POST --header &quot;PRIVATE-TOKEN: ${ADMIN_TOKEN}&quot; \\\n  --data &quot;name=main&amp;code_owner_approval_required=true&amp;push_access_level=40&amp;merge_access_level=40&amp;unprotect_access_level=40&quot; \\\n  &quot;${GITLAB_URL}/api/v4/projects/${PROJECT_ID}/protected_branches&quot;\n\n# Configure push rules (Premium/Ultimate)\ncurl --request POST --header &quot;PRIVATE-TOKEN: ${ADMIN_TOKEN}&quot; \\\n  --data &quot;deny_delete_tag=true&amp;member_check=true&amp;prevent_secrets=true&amp;author_email_regex=.*@example.com&amp;file_extension_restriction=jar,exe&amp;max_file_size=100&quot; \\\n  &quot;${GITLAB_URL}/api/v4/projects/${PROJECT_ID}/push_rule&quot;</code></pre>\n      </div>\n    </div>\n<h3 id=\"vulnerability-scanning-integration\" class=\"mobile-header\">Vulnerability Scanning Integration</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Configure dependency proxy for secure image caching\nsudo tee -a /etc/gitlab/gitlab.rb &gt; /dev/null &lt;&lt;EOF\n\n# Dependency Proxy for secure image caching\ngitlab_rails[&#039;dependency_proxy_enabled&#039;] = true\ngitlab_rails[&#039;dependency_proxy_storage_path&#039;] = &quot;/var/opt/gitlab/gitlab-rails/shared/dependency_proxy&quot;\n\n# Security scanning\ngitlab_rails[&#039;sast_enabled&#039;] = true\ngitlab_rails[&#039;dependency_scanning_enabled&#039;] = true\ngitlab_rails[&#039;container_scanning_enabled&#039;] = true\ngitlab_rails[&#039;secret_detection_enabled&#039;] = true\ngitlab_rails[&#039;license_scanning_enabled&#039;] = true\n\n# Secure package registry\ngitlab_rails[&#039;packages_enabled&#039;] = true\ngitlab_rails[&#039;packages_storage_path&#039;] = &quot;/var/opt/gitlab/gitlab-rails/shared/packages&quot;\nEOF\n\n# Create custom security scanning templates\nmkdir -p .gitlab/ci-templates\n\ncat &gt; .gitlab/ci-templates/Security-Scanning.gitlab-ci.yml &lt;&lt;EOF\n# Custom Security Scanning Template\n\n.security-scan-template:\n  stage: security-scan\n  variables:\n    SECURE_LOG_LEVEL: info\n  before_script:\n    - echo &quot;Preparing security scan environment...&quot;\n    - apk add --no-cache curl jq\n  tags:\n    - secure\n\ncustom-sast:\n  extends: .security-scan-template\n  image: registry.gitlab.com/gitlab-org/security-products/analyzers/semgrep:latest\n  script:\n    - echo &quot;Running custom SAST analysis...&quot;\n    - /analyzer run\n  artifacts:\n    reports:\n      sast: gl-sast-report.json\n    expire_in: 1 week\n\ncustom-secrets-scan:\n  extends: .security-scan-template\n  image: trufflesecurity/trufflehog:latest\n  script:\n    - echo &quot;Scanning for secrets with TruffleHog...&quot;\n    - trufflehog git file://. --json &gt; trufflehog-report.json\n    - |\n      if [ -s trufflehog-report.json ]; then\n        echo &quot;Secrets detected!&quot;\n        cat trufflehog-report.json\n        exit 1\n      fi\n  artifacts:\n    reports:\n      secret_detection: trufflehog-report.json\n    expire_in: 1 week\n\nimage-vulnerability-scan:\n  extends: .security-scan-template\n  image: aquasec/trivy:latest\n  script:\n    - echo &quot;Scanning Docker images for vulnerabilities...&quot;\n    - trivy image --format template --template &quot;@contrib/gitlab.tpl&quot; \\$CI_REGISTRY_IMAGE:\\$CI_COMMIT_SHA\n  artifacts:\n    reports:\n      container_scanning: gl-container-scanning-report.json\n    expire_in: 1 week\nEOF\n\nsudo gitlab-ctl reconfigure</code></pre>\n      </div>\n    </div>\n<h2 id=\"backup-and-disaster-recovery\" class=\"mobile-header\">Backup and Disaster Recovery</h2>\n<h3 id=\"enterprise-backup-strategy\" class=\"mobile-header\">Enterprise Backup Strategy</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\">sudo tee /usr/local/bin/gitlab-backup.sh &gt; /dev/null &lt;&lt;&#039;EOF&#039;\n#!/bin/bash\nBACKUP_DIR=&quot;/backup/gitlab&quot;\nDATE=$(date +%Y%m%d_%H%M%S)\n\nmkdir -p ${BACKUP_DIR}/{omnibus,secrets,ssl,logs}\n\n# Create GitLab backup\ngitlab-backup create STRATEGY=copy SKIP=uploads,builds,artifacts,lfs,registry,pages\n\n# Backup configuration files\ntar -czf ${BACKUP_DIR}/omnibus/gitlab-config-${DATE}.tar.gz \\\n    /etc/gitlab/gitlab.rb \\\n    /etc/gitlab/gitlab-secrets.json\n\n# Backup SSL certificates\ntar -czf ${BACKUP_DIR}/ssl/gitlab-ssl-${DATE}.tar.gz \\\n    /etc/gitlab/ssl/ \\\n    /etc/letsencrypt/\n\n# Backup secrets\ntar -czf ${BACKUP_DIR}/secrets/gitlab-secrets-${DATE}.tar.gz \\\n    /etc/gitlab/secrets/\n\n# Upload to multiple cloud storage backends\naws s3 cp ${BACKUP_DIR}/ s3://gitlab-backups/ --recursive\naz storage blob upload-batch --source ${BACKUP_DIR} --destination gitlab-backups\ngsutil cp -r ${BACKUP_DIR}/* gs://gitlab-backups/\n\n# Geo-replication backup (Enterprise)\nif command -v gitlab-rake &gt;/dev/null 2&gt;&amp;1; then\n    gitlab-rake gitlab:geo:check\n    gitlab-rake geo:status\nfi\n\n# Test backup integrity\nLATEST_BACKUP=$(ls -t /var/opt/gitlab/backups/*_gitlab_backup.tar | head -1)\nif [ -n &quot;$LATEST_BACKUP&quot; ]; then\n    echo &quot;Latest backup: $LATEST_BACKUP&quot;\n    tar -tf &quot;$LATEST_BACKUP&quot; &gt; /tmp/backup-contents.txt\n    if [ $? -eq 0 ]; then\n        echo &quot;âœ“ Backup integrity verified&quot;\n    else\n        echo &quot;âœ— Backup integrity check failed&quot;\n    fi\nfi\n\n# Keep only last 7 backups locally\nfind /var/opt/gitlab/backups/ -name &quot;*_gitlab_backup.tar&quot; -mtime +7 -delete\nfind ${BACKUP_DIR} -name &quot;gitlab-*&quot; -type f -mtime +7 -delete\n\necho &quot;GitLab backup completed: ${DATE}&quot;\nEOF\n\nsudo chmod +x /usr/local/bin/gitlab-backup.sh\n\n# Schedule daily backups\necho &quot;0 2 * * * root /usr/local/bin/gitlab-backup.sh&quot; | sudo tee -a /etc/crontab\n\n# Create disaster recovery script\nsudo tee /usr/local/bin/gitlab-restore.sh &gt; /dev/null &lt;&lt;&#039;EOF&#039;\n#!/bin/bash\nBACKUP_FILE=&quot;${1}&quot;\n\nif [ -z &quot;$BACKUP_FILE&quot; ]; then\n    echo &quot;Usage: $0 &lt;backup_file&gt;&quot;\n    echo &quot;Available backups:&quot;\n    ls -la /var/opt/gitlab/backups/*_gitlab_backup.tar\n    exit 1\nfi\n\n# Stop GitLab services\ngitlab-ctl stop unicorn\ngitlab-ctl stop puma\ngitlab-ctl stop sidekiq\n\n# Restore from backup\ngitlab-backup restore BACKUP=$(basename $BACKUP_FILE _gitlab_backup.tar) force=yes\n\n# Restore configuration\nif [ -f &quot;/backup/gitlab/omnibus/gitlab-config-latest.tar.gz&quot; ]; then\n    cd /\n    tar -xzf /backup/gitlab/omnibus/gitlab-config-latest.tar.gz\nfi\n\n# Reconfigure and restart\ngitlab-ctl reconfigure\ngitlab-ctl restart\n\n# Verify installation\ngitlab-rake gitlab:check SANITIZE=true\n\necho &quot;GitLab restore completed&quot;\nEOF\n\nsudo chmod +x /usr/local/bin/gitlab-restore.sh</code></pre>\n      </div>\n    </div>\n<h3 id=\"high-availability-setup\" class=\"mobile-header\">High Availability Setup</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Configure GitLab for HA with external services\nsudo tee /etc/gitlab/gitlab.rb &gt; /dev/null &lt;&lt;EOF\n# GitLab High Availability Configuration\n\nexternal_url &#039;https://gitlab.example.com&#039;\n\n# Disable built-in services (use external)\npostgresql[&#039;enable&#039;] = false\nredis[&#039;enable&#039;] = false\nnginx[&#039;enable&#039;] = true\nunicorn[&#039;enable&#039;] = true\nsidekiq[&#039;enable&#039;] = true\ngitlab_workhorse[&#039;enable&#039;] = true\ngitaly[&#039;enable&#039;] = true\n\n# External PostgreSQL\ngitlab_rails[&#039;db_adapter&#039;] = &#039;postgresql&#039;\ngitlab_rails[&#039;db_encoding&#039;] = &#039;unicode&#039;\ngitlab_rails[&#039;db_host&#039;] = &#039;postgres-master.example.com&#039;\ngitlab_rails[&#039;db_port&#039;] = 5432\ngitlab_rails[&#039;db_database&#039;] = &#039;gitlabhq_production&#039;\ngitlab_rails[&#039;db_username&#039;] = &#039;gitlab&#039;\ngitlab_rails[&#039;db_password&#039;] = &#039;secure_db_password&#039;\ngitlab_rails[&#039;db_load_balancing&#039;] = {\n  &#039;hosts&#039; =&gt; [&#039;postgres-slave1.example.com&#039;, &#039;postgres-slave2.example.com&#039;]\n}\n\n# External Redis\ngitlab_rails[&#039;redis_host&#039;] = &#039;redis-master.example.com&#039;\ngitlab_rails[&#039;redis_port&#039;] = 6379\ngitlab_rails[&#039;redis_password&#039;] = &#039;redis_secure_password&#039;\ngitlab_rails[&#039;redis_sentinels&#039;] = [\n  {&#039;host&#039; =&gt; &#039;redis-sentinel1.example.com&#039;, &#039;port&#039; =&gt; 26379},\n  {&#039;host&#039; =&gt; &#039;redis-sentinel2.example.com&#039;, &#039;port&#039; =&gt; 26379},\n  {&#039;host&#039; =&gt; &#039;redis-sentinel3.example.com&#039;, &#039;port&#039; =&gt; 26379}\n]\n\n# Load balancing\nnginx[&#039;listen_addresses&#039;] = [&#039;0.0.0.0&#039;]\nnginx[&#039;real_ip_header&#039;] = &#039;X-Forwarded-For&#039;\nnginx[&#039;real_ip_recursive&#039;] = &#039;on&#039;\nnginx[&#039;real_ip_trusted_addresses&#039;] = [&#039;10.0.0.0/8&#039;, &#039;172.16.0.0/12&#039;, &#039;192.168.0.0/16&#039;]\n\n# Gitaly cluster (Enterprise)\ngit_data_dirs({\n  &#039;default&#039; =&gt; {\n    &#039;gitaly_address&#039; =&gt; &#039;tcp://gitaly1.example.com:8075&#039;,\n    &#039;gitaly_token&#039; =&gt; &#039;gitaly_secure_token&#039;\n  },\n  &#039;storage1&#039; =&gt; {\n    &#039;gitaly_address&#039; =&gt; &#039;tcp://gitaly2.example.com:8075&#039;,\n    &#039;gitaly_token&#039; =&gt; &#039;gitaly_secure_token&#039;\n  }\n})\n\n# Object storage (S3-compatible)\ngitlab_rails[&#039;object_store&#039;][&#039;enabled&#039;] = true\ngitlab_rails[&#039;object_store&#039;][&#039;proxy_download&#039;] = true\ngitlab_rails[&#039;object_store&#039;][&#039;connection&#039;] = {\n  &#039;provider&#039; =&gt; &#039;AWS&#039;,\n  &#039;region&#039; =&gt; &#039;us-west-2&#039;,\n  &#039;aws_access_key_id&#039; =&gt; &#039;object_store_access_key&#039;,\n  &#039;aws_secret_access_key&#039; =&gt; &#039;object_store_secret_key&#039;\n}\ngitlab_rails[&#039;object_store&#039;][&#039;objects&#039;][&#039;artifacts&#039;][&#039;bucket&#039;] = &#039;gitlab-artifacts&#039;\ngitlab_rails[&#039;object_store&#039;][&#039;objects&#039;][&#039;lfs&#039;][&#039;bucket&#039;] = &#039;gitlab-lfs&#039;\ngitlab_rails[&#039;object_store&#039;][&#039;objects&#039;][&#039;uploads&#039;][&#039;bucket&#039;] = &#039;gitlab-uploads&#039;\ngitlab_rails[&#039;object_store&#039;][&#039;objects&#039;][&#039;packages&#039;][&#039;bucket&#039;] = &#039;gitlab-packages&#039;\n\n# Geo replication (Enterprise Premium)\ngitlab_rails[&#039;geo_primary_role&#039;] = true  # Set to false for secondary\ngitlab_rails[&#039;geo_node_name&#039;] = &#039;primary-site&#039;\ngitlab_rails[&#039;geo_registry_replication_enabled&#039;] = true\nEOF\n\nsudo gitlab-ctl reconfigure</code></pre>\n      </div>\n    </div>\n<h2 id=\"container-registry-and-package-management\" class=\"mobile-header\">Container Registry and Package Management</h2>\n<h3 id=\"secure-container-registry-setup\" class=\"mobile-header\">Secure Container Registry Setup</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Configure container registry with security scanning\nsudo tee -a /etc/gitlab/gitlab.rb &gt; /dev/null &lt;&lt;EOF\n\n# Container Registry configuration\nregistry_external_url &#039;https://registry.example.com&#039;\ngitlab_rails[&#039;registry_enabled&#039;] = true\nregistry[&#039;enable&#039;] = true\n\n# Registry storage\nregistry[&#039;storage&#039;] = {\n  &#039;s3&#039; =&gt; {\n    &#039;accesskey&#039; =&gt; &#039;registry_s3_access_key&#039;,\n    &#039;secretkey&#039; =&gt; &#039;registry_s3_secret_key&#039;,\n    &#039;bucket&#039; =&gt; &#039;gitlab-registry&#039;,\n    &#039;region&#039; =&gt; &#039;us-west-2&#039;,\n    &#039;encrypt&#039; =&gt; true\n  }\n}\n\n# Registry security\nregistry[&#039;auth_token_realm&#039;] = &quot;https://gitlab.example.com/jwt/auth&quot;\nregistry[&#039;auth_token_service&#039;] = &quot;container_registry&quot;\nregistry[&#039;auth_token_issuer&#039;] = &quot;gitlab-issuer&quot;\nregistry[&#039;auth_token_autoredirect&#039;] = false\n\n# Health checks\nregistry[&#039;health_storagedriver_enabled&#039;] = true\nregistry[&#039;health_storagedriver_interval&#039;] = &#039;10s&#039;\nregistry[&#039;health_storagedriver_threshold&#039;] = 3\n\n# Container scanning\ngitlab_rails[&#039;container_registry_token_expire_delay&#039;] = 300\ngitlab_rails[&#039;container_registry_cleanup_enabled&#039;] = true\n\n# Image retention policies\nregistry[&#039;middleware&#039;] = {\n  &#039;repository&#039; =&gt; [\n    {\n      &#039;name&#039; =&gt; &#039;cloudfront&#039;,\n      &#039;disabled&#039; =&gt; false,\n      &#039;options&#039; =&gt; {\n        &#039;baseurl&#039; =&gt; &#039;https://registry-cdn.example.com&#039;,\n        &#039;privatekey&#039; =&gt; &#039;/etc/gitlab/registry-cdn-private-key.pem&#039;,\n        &#039;keypairid&#039; =&gt; &#039;CLOUDFRONT_KEY_PAIR_ID&#039;,\n        &#039;duration&#039; =&gt; &#039;3600s&#039;\n      }\n    }\n  ]\n}\n\n# Package registry\ngitlab_rails[&#039;packages_enabled&#039;] = true\ngitlab_rails[&#039;packages_storage_path&#039;] = &quot;/var/opt/gitlab/gitlab-rails/shared/packages&quot;\nEOF\n\n# Create container registry cleanup policy\ncat &gt; registry-cleanup-policy.json &lt;&lt;EOF\n{\n  &quot;name_regex&quot;: &quot;.*&quot;,\n  &quot;name_regex_keep&quot;: &quot;v\\\\d+\\\\.\\\\d+\\\\.\\\\d+&quot;,\n  &quot;cadence&quot;: &quot;7d&quot;,\n  &quot;older_than&quot;: &quot;30d&quot;,\n  &quot;keep_n&quot;: 10\n}\nEOF\n\n# Apply cleanup policy via API\ncurl --request PUT --header &quot;PRIVATE-TOKEN: ${ADMIN_TOKEN}&quot; \\\n  --header &quot;Content-Type: application/json&quot; \\\n  --data @registry-cleanup-policy.json \\\n  &quot;${GITLAB_URL}/api/v4/projects/${PROJECT_ID}/registry/repositories/1&quot;\n\nsudo gitlab-ctl reconfigure</code></pre>\n      </div>\n    </div>\n<h2 id=\"monitoring-and-observability\" class=\"mobile-header\">Monitoring and Observability</h2>\n<h3 id=\"comprehensive-monitoring-setup\" class=\"mobile-header\">Comprehensive Monitoring Setup</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Enable built-in monitoring stack\nsudo tee -a /etc/gitlab/gitlab.rb &gt; /dev/null &lt;&lt;EOF\n\n# Prometheus monitoring\nprometheus_monitoring[&#039;enable&#039;] = true\nprometheus[&#039;enable&#039;] = true\nprometheus[&#039;monitor_kubernetes&#039;] = true\nprometheus[&#039;scrape_configs&#039;] = [\n  {\n    &#039;job_name&#039; =&gt; &#039;gitlab-workhorse&#039;,\n    &#039;static_configs&#039; =&gt; [\n      { &#039;targets&#039; =&gt; [&#039;localhost:9229&#039;] }\n    ]\n  },\n  {\n    &#039;job_name&#039; =&gt; &#039;gitlab-unicorn&#039;,  \n    &#039;static_configs&#039; =&gt; [\n      { &#039;targets&#039; =&gt; [&#039;localhost:8080&#039;] }\n    ]\n  },\n  {\n    &#039;job_name&#039; =&gt; &#039;gitlab-sidekiq&#039;,\n    &#039;static_configs&#039; =&gt; [\n      { &#039;targets&#039; =&gt; [&#039;localhost:8082&#039;] }\n    ]\n  },\n  {\n    &#039;job_name&#039; =&gt; &#039;gitlab-pages&#039;,\n    &#039;static_configs&#039; =&gt; [\n      { &#039;targets&#039; =&gt; [&#039;localhost:8090&#039;] }\n    ]\n  },\n  {\n    &#039;job_name&#039; =&gt; &#039;docker-registry&#039;,\n    &#039;static_configs&#039; =&gt; [\n      { &#039;targets&#039; =&gt; [&#039;localhost:5001&#039;] }\n    ]\n  }\n]\n\n# Grafana configuration\ngrafana[&#039;enable&#039;] = true\ngrafana[&#039;admin_password&#039;] = &#039;secure_grafana_password&#039;\ngrafana[&#039;disable_login_form&#039;] = false\ngrafana[&#039;allow_user_sign_up&#039;] = false\n\n# Grafana LDAP integration\ngrafana[&#039;ldap_enabled&#039;] = true\ngrafana[&#039;ldap_allow_sign_up&#039;] = false\ngrafana[&#039;ldap_servers&#039;] = [{\n  &#039;host&#039; =&gt; &#039;ldap.example.com&#039;,\n  &#039;port&#039; =&gt; 636,\n  &#039;uid&#039; =&gt; &#039;sAMAccountName&#039;,\n  &#039;bind_dn&#039; =&gt; &#039;CN=grafana,OU=Service Accounts,DC=example,DC=com&#039;,\n  &#039;password&#039; =&gt; &#039;ldap_service_password&#039;,\n  &#039;encryption&#039; =&gt; &#039;ssl&#039;,\n  &#039;base&#039; =&gt; &#039;DC=example,DC=com&#039;,\n  &#039;user_filter&#039; =&gt; &#039;&#039;,\n  &#039;group_base&#039; =&gt; &#039;OU=Groups,DC=example,DC=com&#039;,\n  &#039;admin_group&#039; =&gt; &#039;GitLab Administrators&#039;\n}]\n\n# Node Exporter\nnode_exporter[&#039;enable&#039;] = true\nnode_exporter[&#039;listen_address&#039;] = &#039;localhost:9100&#039;\n\n# Alert Manager\nalertmanager[&#039;enable&#039;] = true\nalertmanager[&#039;admin_email&#039;] = &#039;alerts@example.com&#039;\nalertmanager[&#039;flags&#039;] = {\n  &#039;storage.path&#039; =&gt; &#039;/var/opt/gitlab/alertmanager/data&#039;,\n  &#039;config.file&#039; =&gt; &#039;/var/opt/gitlab/alertmanager/alertmanager.yml&#039;\n}\n\n# Log forwarding\nlogging[&#039;logrotate_frequency&#039;] = &quot;daily&quot;\nlogging[&#039;logrotate_rotate&#039;] = 30\nlogging[&#039;logrotate_compress&#039;] = &quot;compress&quot;\nlogging[&#039;svlogd_size&#039;] = 200 * 1024 * 1024  # 200MB\nlogging[&#039;svlogd_num&#039;] = 30\nEOF\n\n# Create custom alerting rules\nsudo mkdir -p /var/opt/gitlab/alertmanager\n\nsudo tee /var/opt/gitlab/alertmanager/alertmanager.yml &gt; /dev/null &lt;&lt;EOF\nglobal:\n  smtp_smarthost: &#039;smtp.example.com:587&#039;\n  smtp_from: &#039;gitlab-alerts@example.com&#039;\n  smtp_auth_username: &#039;gitlab-alerts@example.com&#039;\n  smtp_auth_password: &#039;smtp_password&#039;\n\nroute:\n  group_by: [&#039;alertname&#039;, &#039;cluster&#039;, &#039;service&#039;]\n  group_wait: 30s\n  group_interval: 5m\n  repeat_interval: 12h\n  receiver: &#039;gitlab-alerts&#039;\n  routes:\n  - match:\n      severity: critical\n    receiver: &#039;critical-alerts&#039;\n    group_wait: 10s\n    repeat_interval: 5m\n\nreceivers:\n- name: &#039;gitlab-alerts&#039;\n  email_configs:\n  - to: &#039;gitlab-admin@example.com&#039;\n    subject: &#039;GitLab Alert: {{ .GroupLabels.alertname }}&#039;\n    body: |\n      {{ range .Alerts }}\n      Alert: {{ .Annotations.summary }}\n      Description: {{ .Annotations.description }}\n      Instance: {{ .Labels.instance }}\n      {{ end }}\n\n- name: &#039;critical-alerts&#039;\n  email_configs:\n  - to: &#039;oncall@example.com&#039;\n    subject: &#039;CRITICAL GitLab Alert: {{ .GroupLabels.alertname }}&#039;\n  slack_configs:\n  - api_url: &#039;https://hooks.slack.com/services/YOUR/SLACK/WEBHOOK&#039;\n    channel: &#039;#critical-alerts&#039;\n    title: &#039;Critical GitLab Alert&#039;\nEOF\n\nsudo gitlab-ctl reconfigure</code></pre>\n      </div>\n    </div>\n<h3 id=\"performance-monitoring\" class=\"mobile-header\">Performance Monitoring</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Create GitLab performance monitoring script\nsudo tee /usr/local/bin/gitlab-performance-monitor.sh &gt; /dev/null &lt;&lt;&#039;EOF&#039;\n#!/bin/bash\nMONITOR_LOG=&quot;/var/log/gitlab-performance.log&quot;\n\nlog_message() {\n    echo &quot;$(date &#039;+%Y-%m-%d %H:%M:%S&#039;) - $1&quot; | tee -a ${MONITOR_LOG}\n}\n\n# Check GitLab service health\nfor service in unicorn sidekiq workhorse gitaly; do\n    if gitlab-ctl status $service | grep -q &quot;run:&quot;; then\n        log_message &quot;âœ“ $service is running&quot;\n    else\n        log_message &quot;âœ— $service is not running&quot;\n    fi\ndone\n\n# Check database performance\nDB_CONNECTIONS=$(gitlab-psql -c &quot;SELECT count(*) FROM pg_stat_activity;&quot; -t)\nlog_message &quot;â„¹ Database connections: ${DB_CONNECTIONS}&quot;\n\n# Check Redis performance  \nREDIS_MEMORY=$(redis-cli info memory | grep used_memory_human: | cut -d: -f2)\nlog_message &quot;â„¹ Redis memory usage: ${REDIS_MEMORY}&quot;\n\n# Check Git repository storage\nREPO_SIZE=$(du -sh /var/opt/gitlab/git-data/repositories | cut -f1)\nlog_message &quot;â„¹ Repository storage usage: ${REPO_SIZE}&quot;\n\n# Check background job queue\nSIDEKIQ_QUEUE=$(gitlab-rails runner &quot;puts Sidekiq::Queue.new.size&quot;)\nlog_message &quot;â„¹ Sidekiq queue size: ${SIDEKIQ_QUEUE}&quot;\n\n# Check GitLab metrics\nGITLAB_VERSION=$(gitlab-rake gitlab:env:info | grep &quot;GitLab information&quot; -A 10 | grep &quot;Version:&quot; | awk &#039;{print $2}&#039;)\nlog_message &quot;â„¹ GitLab version: ${GITLAB_VERSION}&quot;\n\n# Performance metrics via API\nAPI_RESPONSE_TIME=$(curl -w &quot;%{time_total}&quot; -s -o /dev/null https://gitlab.example.com/api/v4/projects)\nlog_message &quot;â„¹ API response time: ${API_RESPONSE_TIME}s&quot;\n\n# Check disk I/O\nDISK_USAGE=$(df /var/opt/gitlab | awk &#039;NR==2 {print $5}&#039; | sed &#039;s/%//&#039;)\nlog_message &quot;â„¹ Disk usage: ${DISK_USAGE}%&quot;\n\nif [ ${DISK_USAGE} -gt 85 ]; then\n    log_message &quot;âš  High disk usage detected&quot;\nfi\n\nlog_message &quot;Performance monitoring completed&quot;\nEOF\n\nsudo chmod +x /usr/local/bin/gitlab-performance-monitor.sh\n\n# Schedule performance monitoring\necho &quot;*/15 * * * * root /usr/local/bin/gitlab-performance-monitor.sh&quot; | sudo tee -a /etc/crontab</code></pre>\n      </div>\n    </div>\n<h2 id=\"gitlab-runner-advanced-configuration\" class=\"mobile-header\">GitLab Runner Advanced Configuration</h2>\n<h3 id=\"secure-multi-platform-runner-setup\" class=\"mobile-header\">Secure Multi-Platform Runner Setup</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Create advanced runner configuration with security\nsudo tee /etc/gitlab-runner/config.toml &gt; /dev/null &lt;&lt;EOF\nconcurrent = 10\ncheck_interval = 0\nlog_level = &quot;info&quot;\nlog_format = &quot;runner&quot;\nshutdown_timeout = 30\n\n[session_server]\n  session_timeout = 1800\n\n# Docker executor with security hardening\n[[runners]]\n  name = &quot;docker-secure-runner&quot;\n  url = &quot;https://gitlab.example.com/&quot;\n  token = &quot;secure_runner_token&quot;\n  executor = &quot;docker&quot;\n  output_limit = 4096\n  \n  # Security scripts\n  pre_clone_script = &quot;&quot;&quot;\n    echo &#039;Security scan initiated&#039;\n    id\n    pwd\n    env | grep -E &#039;^(CI_|GITLAB_)&#039; | sort\n  &quot;&quot;&quot;\n  \n  pre_build_script = &quot;&quot;&quot;\n    echo &#039;Preparing secure build environment&#039;\n    # Verify no sensitive data in environment\n    if env | grep -i -E &#039;(password|secret|key|token)&#039; | grep -v -E &#039;^(CI_JOB_TOKEN|GITLAB_CI|CI_SERVER)&#039;; then\n      echo &#039;ERROR: Sensitive data detected in environment&#039;\n      exit 1\n    fi\n  &quot;&quot;&quot;\n  \n  post_build_script = &quot;&quot;&quot;\n    echo &#039;Cleaning up build artifacts&#039;\n    rm -rf /tmp/* 2&gt;/dev/null || true\n  &quot;&quot;&quot;\n  \n  [runners.docker]\n    tls_verify = false\n    image = &quot;alpine:latest&quot;\n    privileged = false\n    disable_entrypoint_overwrite = false\n    oom_kill_disable = false\n    disable_cache = false\n    volumes = [&quot;/cache&quot;, &quot;/certs/client&quot;]\n    shm_size = 268435456  # 256MB\n    \n    # Security restrictions\n    cap_drop = [&quot;ALL&quot;]\n    cap_add = [&quot;CHOWN&quot;, &quot;SETGID&quot;, &quot;SETUID&quot;]\n    security_opt = [&quot;no-new-privileges:true&quot;, &quot;apparmor:unconfined&quot;]\n    \n    # Resource limits\n    memory = &quot;2g&quot;\n    memory_swap = &quot;2g&quot;\n    memory_reservation = &quot;1g&quot;\n    cpus = &quot;2&quot;\n    \n    # Network security\n    network_mode = &quot;bridge&quot;\n    dns = [&quot;8.8.8.8&quot;, &quot;8.8.4.4&quot;]\n    \n    # Disable dangerous features\n    disable_entrypoint_overwrite = true\n    \n    # Image pull policy\n    pull_policy = [&quot;if-not-present&quot;]\n    \n  [runners.docker.tmpfs]\n    &quot;/tmp&quot; = &quot;rw,noexec,nosuid,size=100m&quot;\n    &quot;/var/tmp&quot; = &quot;rw,noexec,nosuid,size=100m&quot;\n\n# Kubernetes executor (Enterprise recommended)\n[[runners]]\n  name = &quot;k8s-secure-runner&quot;\n  url = &quot;https://gitlab.example.com/&quot;\n  token = &quot;k8s_runner_token&quot;\n  executor = &quot;kubernetes&quot;\n  \n  [runners.kubernetes]\n    host = &quot;https://k8s.example.com:6443&quot;\n    namespace = &quot;gitlab-runner&quot;\n    privileged = false\n    image = &quot;alpine:latest&quot;\n    \n    # Security context\n    run_as_user = 1000\n    run_as_group = 1000\n    fs_group = 1000\n    \n    # Resource limits\n    memory_limit = &quot;4Gi&quot;\n    memory_request = &quot;2Gi&quot;\n    cpu_limit = &quot;2000m&quot;\n    cpu_request = &quot;1000m&quot;\n    \n    # Security policies\n    [runners.kubernetes.pod_security_context]\n      run_as_non_root = true\n      run_as_user = 1000\n      run_as_group = 1000\n      fs_group = 1000\n      seccomp_profile_type = &quot;RuntimeDefault&quot;\n      \n    [runners.kubernetes.container_security_context]\n      allow_privilege_escalation = false\n      read_only_root_filesystem = true\n      capabilities = { drop = [&quot;ALL&quot;] }\n      \n    # Volume mounts for security\n    [[runners.kubernetes.volumes.empty_dir]]\n      name = &quot;tmp&quot;\n      mount_path = &quot;/tmp&quot;\n      medium = &quot;Memory&quot;\n      \n    [[runners.kubernetes.volumes.empty_dir]]\n      name = &quot;var-tmp&quot;\n      mount_path = &quot;/var/tmp&quot;\n      medium = &quot;Memory&quot;\n\n# Shell executor for specific tasks (limited use)\n[[runners]]\n  name = &quot;shell-restricted-runner&quot;\n  url = &quot;https://gitlab.example.com/&quot;\n  token = &quot;shell_runner_token&quot;\n  executor = &quot;shell&quot;\n  shell = &quot;bash&quot;\n  \n  # Restricted tags only\n  tag_list = [&quot;shell&quot;, &quot;restricted&quot;]\n  run_untagged = false\n  locked = true\n  \n  # Security environment\n  environment = [\n    &quot;PATH=/usr/local/bin:/usr/bin:/bin&quot;,\n    &quot;HOME=/home/gitlab-runner&quot;,\n    &quot;SHELL=/bin/bash&quot;\n  ]\n  \n  # Cleanup\n  builds_dir = &quot;/home/gitlab-runner/builds&quot;\n  cache_dir = &quot;/home/gitlab-runner/cache&quot;\n  \n  [runners.cache]\n    Type = &quot;s3&quot;\n    [runners.cache.s3]\n      ServerAddress = &quot;s3.amazonaws.com&quot;\n      BucketName = &quot;gitlab-runner-cache&quot;\n      BucketLocation = &quot;us-west-2&quot;\n      Insecure = false\nEOF\n\nsudo systemctl restart gitlab-runner</code></pre>\n      </div>\n    </div>\n<h3 id=\"gitlab-runner-auto-scaling-cloud\" class=\"mobile-header\">GitLab Runner Auto-scaling (Cloud)</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Configure GitLab Runner with Docker Machine for auto-scaling\nsudo tee /etc/gitlab-runner/autoscale-config.toml &gt; /dev/null &lt;&lt;EOF\nconcurrent = 50\ncheck_interval = 0\n\n[[runners]]\n  name = &quot;autoscale-runner&quot;\n  url = &quot;https://gitlab.example.com/&quot;\n  token = &quot;autoscale_runner_token&quot;\n  executor = &quot;docker+machine&quot;\n  \n  [runners.docker]\n    image = &quot;alpine:latest&quot;\n    privileged = false\n    disable_cache = false\n    volumes = [&quot;/cache&quot;]\n    \n    # Security\n    cap_drop = [&quot;ALL&quot;]\n    security_opt = [&quot;no-new-privileges:true&quot;]\n    \n  [runners.machine]\n    IdleCount = 2\n    IdleTime = 1800\n    MaxBuilds = 20\n    MachineName = &quot;gitlab-runner-%s&quot;\n    MachineDriver = &quot;amazonec2&quot;\n    \n    # AWS EC2 configuration\n    [runners.machine.autoscaling]\n      Periods = [&quot;* * 9-17 * * mon-fri *&quot;, &quot;* * 18-8 * * * *&quot;]\n      IdleCount = [5, 1]\n      IdleTime = [1800, 3600]\n      Timezone = &quot;UTC&quot;\n    \n    # Machine options for security\n    [runners.machine.machineoptions]\n      amazonec2-access-key = &quot;aws_access_key&quot;\n      amazonec2-secret-key = &quot;aws_secret_key&quot;\n      amazonec2-region = &quot;us-west-2&quot;\n      amazonec2-vpc-id = &quot;vpc-12345678&quot;\n      amazonec2-subnet-id = &quot;subnet-87654321&quot;\n      amazonec2-security-group = &quot;gitlab-runner-sg&quot;\n      amazonec2-instance-type = &quot;t3.medium&quot;\n      amazonec2-ami = &quot;ami-0c02fb55956c7d316&quot;  # Amazon Linux 2\n      amazonec2-iam-instance-profile = &quot;GitLabRunnerInstanceProfile&quot;\n      amazonec2-use-private-address = &quot;true&quot;\n      amazonec2-tags = &quot;Name,gitlab-runner,Environment,production&quot;\n      amazonec2-root-size = &quot;20&quot;\n      amazonec2-volume-type = &quot;gp3&quot;\n      amazonec2-use-ebs-optimized = &quot;true&quot;\n      \n  [runners.cache]\n    Type = &quot;s3&quot;\n    Shared = true\n    [runners.cache.s3]\n      ServerAddress = &quot;s3.amazonaws.com&quot;\n      AccessKey = &quot;cache_access_key&quot;\n      SecretKey = &quot;cache_secret_key&quot;  \n      BucketName = &quot;gitlab-runner-cache&quot;\n      BucketLocation = &quot;us-west-2&quot;\n      Insecure = false\nEOF</code></pre>\n      </div>\n    </div>\n<h2 id=\"verification-and-health-checks\" class=\"mobile-header\">Verification and Health Checks</h2>\n<h3 id=\"comprehensive-health-monitoring\" class=\"mobile-header\">Comprehensive Health Monitoring</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\">sudo tee /usr/local/bin/gitlab-health-check.sh &gt; /dev/null &lt;&lt;&#039;EOF&#039;\n#!/bin/bash\nHEALTH_LOG=&quot;/var/log/gitlab-health.log&quot;\n\nlog_message() {\n    echo &quot;$(date &#039;+%Y-%m-%d %H:%M:%S&#039;) - $1&quot; | tee -a ${HEALTH_LOG}\n}\n\n# Check GitLab service status\nif gitlab-ctl status | grep -q &quot;down:&quot;; then\n    log_message &quot;âš  Some GitLab services are down:&quot;\n    gitlab-ctl status | grep &quot;down:&quot; | while read line; do\n        log_message &quot;  - $line&quot;\n    done\nelse\n    log_message &quot;âœ“ All GitLab services are running&quot;\nfi\n\n# Check GitLab application health\nif gitlab-rake gitlab:check &gt;/dev/null 2&gt;&amp;1; then\n    log_message &quot;âœ“ GitLab application health check passed&quot;\nelse\n    log_message &quot;âœ— GitLab application health check failed&quot;\n    gitlab-rake gitlab:check | tail -10 &gt;&gt; ${HEALTH_LOG}\nfi\n\n# Check GitLab Runner connectivity\nRUNNERS_ONLINE=$(curl -s --header &quot;PRIVATE-TOKEN: admin_token&quot; https://gitlab.example.com/api/v4/runners | jq &#039;[.[] | select(.status==&quot;online&quot;)] | length&#039;)\nTOTAL_RUNNERS=$(curl -s --header &quot;PRIVATE-TOKEN: admin_token&quot; https://gitlab.example.com/api/v4/runners | jq &#039;. | length&#039;)\nlog_message &quot;â„¹ GitLab Runners: ${RUNNERS_ONLINE}/${TOTAL_RUNNERS} online&quot;\n\n# Check database connectivity\nif gitlab-psql -c &quot;SELECT version();&quot; &gt;/dev/null 2&gt;&amp;1; then\n    log_message &quot;âœ“ Database connection is healthy&quot;\nelse\n    log_message &quot;âœ— Database connection issues&quot;\nfi\n\n# Check Redis connectivity\nif redis-cli ping | grep -q &quot;PONG&quot;; then\n    log_message &quot;âœ“ Redis connection is healthy&quot;\nelse\n    log_message &quot;âœ— Redis connection issues&quot;\nfi\n\n# Check container registry\nREGISTRY_STATUS=$(curl -s https://registry.example.com/v2/ | jq -r .message 2&gt;/dev/null)\nif [ &quot;$REGISTRY_STATUS&quot; = &quot;authentication required&quot; ] || [ &quot;$REGISTRY_STATUS&quot; = &quot;null&quot; ]; then\n    log_message &quot;âœ“ Container registry is responding&quot;\nelse\n    log_message &quot;âš  Container registry issues&quot;\nfi\n\n# Check backup status\nLAST_BACKUP=$(ls -t /var/opt/gitlab/backups/*_gitlab_backup.tar 2&gt;/dev/null | head -1)\nif [ -n &quot;$LAST_BACKUP&quot; ]; then\n    BACKUP_AGE=$(stat -c %Y &quot;$LAST_BACKUP&quot;)\n    CURRENT_TIME=$(date +%s)\n    HOURS_SINCE_BACKUP=$(( (CURRENT_TIME - BACKUP_AGE) / 3600 ))\n    \n    if [ $HOURS_SINCE_BACKUP -lt 48 ]; then\n        log_message &quot;âœ“ Recent backup available (${HOURS_SINCE_BACKUP} hours old)&quot;\n    else\n        log_message &quot;âš  Last backup is ${HOURS_SINCE_BACKUP} hours old&quot;\n    fi\nelse\n    log_message &quot;âœ— No backup files found&quot;\nfi\n\n# Check SSL certificate expiry\nSSL_EXPIRY=$(echo | openssl s_client -servername gitlab.example.com -connect gitlab.example.com:443 2&gt;/dev/null | openssl x509 -noout -dates | grep notAfter | cut -d= -f2)\nSSL_EXPIRY_EPOCH=$(date -d &quot;$SSL_EXPIRY&quot; +%s)\nCURRENT_EPOCH=$(date +%s)\nDAYS_TO_EXPIRY=$(( (SSL_EXPIRY_EPOCH - CURRENT_EPOCH) / 86400 ))\n\nif [ $DAYS_TO_EXPIRY -lt 30 ]; then\n    log_message &quot;âš  SSL certificate expires in ${DAYS_TO_EXPIRY} days&quot;\nelse\n    log_message &quot;âœ“ SSL certificate expires in ${DAYS_TO_EXPIRY} days&quot;\nfi\n\n# Check system resources\nCPU_USAGE=$(top -bn1 | grep &quot;Cpu(s)&quot; | awk &#039;{print $2}&#039; | cut -d&#039;%&#039; -f1)\nMEMORY_USAGE=$(free | grep Mem | awk &#039;{printf &quot;%.0f&quot;, $3/$2 * 100.0}&#039;)\nlog_message &quot;â„¹ System usage - CPU: ${CPU_USAGE}%, Memory: ${MEMORY_USAGE}%&quot;\n\nlog_message &quot;GitLab health check completed&quot;\nEOF\n\nsudo chmod +x /usr/local/bin/gitlab-health-check.sh\n\n# Schedule health checks every 15 minutes\necho &quot;*/15 * * * * root /usr/local/bin/gitlab-health-check.sh&quot; | sudo tee -a /etc/crontab</code></pre>\n      </div>\n    </div>\n<h3 id=\"security-audit-and-compliance\" class=\"mobile-header\">Security Audit and Compliance</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\">sudo tee /usr/local/bin/gitlab-security-audit.sh &gt; /dev/null &lt;&lt;&#039;EOF&#039;\n#!/bin/bash\nAUDIT_LOG=&quot;/var/log/gitlab-security-audit.log&quot;\nDATE=$(date +%Y%m%d_%H%M%S)\n\nlog_message() {\n    echo &quot;$(date &#039;+%Y-%m-%d %H:%M:%S&#039;) - $1&quot; | tee -a ${AUDIT_LOG}\n}\n\nlog_message &quot;Starting GitLab security audit...&quot;\n\n# Check user accounts with admin privileges\nADMIN_USERS=$(gitlab-rails runner &quot;puts User.admins.count&quot;)\nlog_message &quot;â„¹ ${ADMIN_USERS} users with admin privileges&quot;\n\n# Check for users without 2FA\nUSERS_WITHOUT_2FA=$(gitlab-rails runner &quot;puts User.where(two_factor_enabled: false).count&quot;)\nlog_message &quot;â„¹ ${USERS_WITHOUT_2FA} users without 2FA enabled&quot;\n\n# Check SSH key security\nWEAK_SSH_KEYS=$(gitlab-rails runner &quot;puts Key.where(&#039;LENGTH(key) &lt; ?&#039;, 2048).count&quot;)\nlog_message &quot;â„¹ ${WEAK_SSH_KEYS} SSH keys shorter than 2048 bits&quot;\n\n# Check project visibility\nPUBLIC_PROJECTS=$(gitlab-rails runner &quot;puts Project.where(visibility_level: 20).count&quot;)\nINTERNAL_PROJECTS=$(gitlab-rails runner &quot;puts Project.where(visibility_level: 10).count&quot;)\nPRIVATE_PROJECTS=$(gitlab-rails runner &quot;puts Project.where(visibility_level: 0).count&quot;)\nlog_message &quot;â„¹ Projects - Public: ${PUBLIC_PROJECTS}, Internal: ${INTERNAL_PROJECTS}, Private: ${PRIVATE_PROJECTS}&quot;\n\n# Check for projects without security scanning\nPROJECTS_WITHOUT_SAST=$(gitlab-rails runner &quot;\nputs Project.joins(:ci_pipelines)\n  .where(&#039;ci_pipelines.created_at &gt; ?&#039;, 30.days.ago)\n  .where.not(id: Ci::Build.joins(:pipeline).where(&#039;ci_builds.name ILIKE ?&#039;, &#039;%sast%&#039;).select(:project_id))\n  .distinct.count\n&quot;)\nlog_message &quot;â„¹ ${PROJECTS_WITHOUT_SAST} active projects without SAST scanning&quot;\n\n# Check external integrations\nWEBHOOK_COUNT=$(gitlab-rails runner &quot;puts ProjectHook.count + SystemHook.count&quot;)\nlog_message &quot;â„¹ ${WEBHOOK_COUNT} webhooks configured&quot;\n\n# Check audit events (Enterprise)\nif gitlab-rails runner &quot;puts defined?(AuditEvent)&quot; | grep -q &quot;constant&quot;; then\n    RECENT_AUDIT_EVENTS=$(gitlab-rails runner &quot;puts AuditEvent.where(&#039;created_at &gt; ?&#039;, 24.hours.ago).count&quot;)\n    log_message &quot;â„¹ ${RECENT_AUDIT_EVENTS} audit events in last 24 hours&quot;\nfi\n\n# Check for suspicious activity\nFAILED_LOGINS=$(grep &quot;Failed Login&quot; /var/log/gitlab/gitlab-rails/production.log | grep &quot;$(date +&#039;%Y-%m-%d&#039;)&quot; | wc -l)\nif [ ${FAILED_LOGINS} -gt 20 ]; then\n    log_message &quot;âš  ${FAILED_LOGINS} failed login attempts today&quot;\nelse\n    log_message &quot;âœ“ ${FAILED_LOGINS} failed login attempts today (normal)&quot;\nfi\n\n# Check for large file uploads\nLARGE_UPLOADS=$(find /var/opt/gitlab/git-data/repositories -type f -size +100M -mtime -7 | wc -l)\nif [ ${LARGE_UPLOADS} -gt 0 ]; then\n    log_message &quot;â„¹ ${LARGE_UPLOADS} large files (&gt;100MB) uploaded in last week&quot;\nfi\n\nlog_message &quot;Security audit completed&quot;\nEOF\n\nsudo chmod +x /usr/local/bin/gitlab-security-audit.sh\n\n# Schedule daily security audits\necho &quot;0 8 * * * root /usr/local/bin/gitlab-security-audit.sh&quot; | sudo tee -a /etc/crontab</code></pre>\n      </div>\n    </div>\n<h2 id=\"troubleshooting-cross-platform\" class=\"mobile-header\">Troubleshooting (Cross-Platform)</h2>\n<h3 id=\"common-issues-and-solutions\" class=\"mobile-header\">Common Issues and Solutions</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Check GitLab status\nsudo gitlab-ctl status\nsudo gitlab-ctl tail\n\n# Check configuration\nsudo gitlab-ctl show-config\nsudo gitlab-rake gitlab:check SANITIZE=true\n\n# Reconfigure GitLab\nsudo gitlab-ctl reconfigure\nsudo gitlab-ctl restart\n\n# Database issues\nsudo gitlab-psql -d gitlabhq_production\nsudo gitlab-rake db:migrate:status\n\n# Redis issues\nredis-cli ping\nredis-cli info\n\n# Check logs for errors\nsudo gitlab-ctl tail gitlab-workhorse\nsudo gitlab-ctl tail unicorn\nsudo gitlab-ctl tail sidekiq\n\n# Performance issues\nsudo gitlab-rake gitlab:env:info\nsudo gitlab-ctl status | grep memory\n\n# SSL/TLS issues\nsudo gitlab-rake gitlab:check\nopenssl s_client -connect gitlab.example.com:443\n\n# Container registry issues\nsudo gitlab-ctl registry-garbage-collect\ndocker login registry.example.com\n\n# Runner connectivity issues\nsudo gitlab-runner verify\nsudo gitlab-runner list\n\n# Backup issues\ngitlab-backup create STRATEGY=copy\ngitlab-backup restore BACKUP=timestamp\n\n# Reset admin password\nsudo gitlab-rake &quot;gitlab:password:reset[root]&quot;\n\n# Check disk usage\ndf -h /var/opt/gitlab/\nsudo du -sh /var/opt/gitlab/git-data/\n\n# Memory usage analysis\nps aux --sort=-%mem | grep gitlab\ngitlab-ctl status | grep memory\n\n# Network connectivity\ncurl -I https://gitlab.example.com\ntelnet gitlab.example.com 443\n\n# Service restart order (if needed)\nsudo gitlab-ctl stop\nsudo gitlab-ctl start postgresql\nsudo gitlab-ctl start redis\nsudo gitlab-ctl start</code></pre>\n      </div>\n    </div>\n<h3 id=\"advanced-debugging\" class=\"mobile-header\">Advanced Debugging</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Enable debug logging\nsudo gitlab-ctl edit-config\n# Add: gitlab_rails[&#039;log_level&#039;] = &#039;DEBUG&#039;\n\nsudo gitlab-ctl reconfigure\n\n# Debug specific services\nsudo gitlab-ctl tail gitlab-workhorse\nsudo gitlab-ctl tail unicorn\nsudo gitlab-ctl tail sidekiq\nsudo gitlab-ctl tail gitaly\n\n# Database debugging\nsudo gitlab-psql -d gitlabhq_production -c &quot;\\l&quot;\nsudo gitlab-rake db:migrate:status\n\n# Git debugging\nsudo -u git gitaly-debug\nsudo gitlab-rake gitlab:gitaly:check\n\n# Performance profiling\nsudo gitlab-rake gitlab:setup\nsudo gitlab-rake gitlab:check:repos\nsudo gitlab-rake gitlab:cleanup:sessions\n\n# Container registry debugging\nsudo gitlab-ctl registry-garbage-collect -m\ndocker system df\n\n# Runner debugging\nsudo gitlab-runner --debug run\nsudo gitlab-runner exec docker test-job\n\n# Network debugging for distributed setup\nping -c 4 postgres-master.example.com\nping -c 4 redis-master.example.com\ntelnet postgres-master.example.com 5432\ntelnet redis-master.example.com 6379\n\n# Memory leak detection\npmap -x $(pgrep gitlab-workhorse)\nvalgrind --tool=memcheck --leak-check=full gitlab-workhorse\n\n# Strace for syscall analysis\nstrace -p $(pgrep gitlab-workhorse) -e trace=network,file</code></pre>\n      </div>\n    </div>\n<h2 id=\"additional-resources\" class=\"mobile-header\">Additional Resources</h2>\n<li class=\"mobile-list-item\"><a href=\"https://docs.gitlab.com/\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">Official Documentation</a></li>\n<li class=\"mobile-list-item\"><a href=\"https://docs.gitlab.com/ee/administration/\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">GitLab Admin Documentation</a></li>\n<li class=\"mobile-list-item\"><a href=\"https://docs.gitlab.com/security/hardening/\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">Security Hardening Guide</a></li>\n<li class=\"mobile-list-item\"><a href=\"https://docs.gitlab.com/runner/\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">GitLab Runner Documentation</a></li>\n<li class=\"mobile-list-item\"><a href=\"https://docs.gitlab.com/ee/administration/packages/container_registry.html\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">Container Registry Guide</a></li>\n<li class=\"mobile-list-item\"><a href=\"https://docs.gitlab.com/ee/api/\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">GitLab API Documentation</a></li>\n<p class=\"mobile-paragraph\">---</p>\n<p class=\"mobile-paragraph\"><strong>Note:</strong> This guide is part of the <a href=\"https://howtomgr.github.io\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">HowToMgr</a> collection.</p>","readTime":"29 min","wordCount":5786,"lastBuilt":"2025-09-14T18:12:05.884Z"},{"name":"grafana","displayName":"Grafana","slug":"grafana","description":"Repo for grafana","category":"monitoring","language":null,"stars":0,"forks":0,"topics":[],"githubUrl":"https://github.com/howtomgr/grafana","updatedAt":"2025-09-14T01:30:03Z","createdAt":"2025-09-08T03:08:10Z","readmeRaw":"# Grafana Installation Guide\n\nGrafana is a free and open-source multi-platform analytics and interactive visualization web application. Originally developed by Torkel Ã–degaard, Grafana provides charts, graphs, and alerts for the web when connected to supported data sources. It serves as a FOSS alternative to commercial solutions like Datadog, New Relic, or Splunk dashboards, offering enterprise-grade visualization and monitoring without licensing costs, with features like alerting, authentication integration, and extensive plugin ecosystem.\n\n## Prerequisites\n\n- **Hardware Requirements**:\n  - CPU: 1 core minimum (2+ cores recommended for production)\n  - RAM: 512MB minimum (2GB+ recommended for production)\n  - Storage: 1GB minimum (10GB+ recommended for dashboard storage and logs)\n  - Network: Stable internet connection for plugins and updates\n- **Operating System**: \n  - Linux: Any modern distribution with systemd support\n  - macOS: 10.15+ (Catalina or newer)\n  - Windows: Windows Server 2016+ or Windows 10\n  - FreeBSD: 12.0+\n- **Network Requirements**:\n  - Port 3000 (default Grafana web interface)\n  - Port 443/80 (HTTPS/HTTP if using reverse proxy)\n  - Outbound HTTPS for plugin downloads and updates\n- **Dependencies**:\n  - Database (SQLite, MySQL, PostgreSQL) - SQLite included by default\n  - Data sources (Prometheus, InfluxDB, etc.) for meaningful dashboards\n  - Web browser with JavaScript support\n- **System Access**: root or sudo privileges required\n\n## Installation\n\n### RHEL/CentOS/Rocky Linux/AlmaLinux\n\n```bash\n# Add Grafana repository\nsudo tee /etc/yum.repos.d/grafana.repo <<EOF\n[grafana]\nname=grafana\nbaseurl=https://packages.grafana.com/oss/rpm\nrepo_gpgcheck=1\nenabled=1\ngpgcheck=1\ngpgkey=https://packages.grafana.com/gpg.key\nsslverify=1\nsslcacert=/etc/pki/tls/certs/ca-bundle.crt\nEOF\n\n# Install Grafana\nsudo yum install -y grafana\n\n# Enable and start service\nsudo systemctl enable --now grafana-server\n\n# Configure firewall\nsudo firewall-cmd --permanent --add-port=3000/tcp\nsudo firewall-cmd --reload\n```\n\n### Debian/Ubuntu\n\n```bash\n# Update package index and install prerequisites\nsudo apt update\nsudo apt install -y software-properties-common wget\n\n# Add Grafana GPG key\nwget -q -O - https://packages.grafana.com/gpg.key | sudo apt-key add -\n\n# Add repository\necho \"deb https://packages.grafana.com/oss/deb stable main\" | sudo tee /etc/apt/sources.list.d/grafana.list\n\n# Install Grafana\nsudo apt update\nsudo apt install -y grafana\n\n# Enable and start service\nsudo systemctl enable --now grafana-server\n\n# Configure firewall\nsudo ufw allow 3000\n```\n\n### Arch Linux\n\n```bash\n# Install Grafana from official repositories\nsudo pacman -S grafana\n\n# Optional: Install additional plugins\nsudo pacman -S grafana-zabbix\n\n# Enable and start service\nsudo systemctl enable --now grafana-server\n\n# Configure firewall\nsudo ufw allow 3000\n```\n\n### Alpine Linux\n\n```bash\n# Install Grafana\napk add --no-cache grafana\n\n# Create grafana user if not exists\nadduser -D -H -s /sbin/nologin grafana\n\n# Create necessary directories\nmkdir -p /var/lib/grafana /var/log/grafana\nchown -R grafana:grafana /var/lib/grafana /var/log/grafana\n\n# Enable and start service\nrc-update add grafana default\nrc-service grafana start\n\n# Configure firewall\nufw allow 3000\n```\n\n### openSUSE/SLES\n\n```bash\n# openSUSE Leap/Tumbleweed\nsudo zypper install -y grafana\n\n# For latest version, add official repository\nsudo zypper addrepo https://packages.grafana.com/oss/rpm grafana\nsudo zypper refresh\nsudo zypper install -y grafana\n\n# SLES 15 - may need additional repositories\nsudo SUSEConnect -p sle-module-web-scripting/15.5/x86_64\nsudo zypper install -y grafana\n\n# Enable and start service\nsudo systemctl enable --now grafana-server\n\n# Configure firewall\nsudo firewall-cmd --permanent --add-port=3000/tcp\nsudo firewall-cmd --reload\n```\n\n### macOS\n\n```bash\n# Using Homebrew\nbrew install grafana\n\n# Start as service\nbrew services start grafana\n\n# Or run manually\ngrafana-server --config=/usr/local/etc/grafana/grafana.ini --homepath /usr/local/share/grafana\n\n# Configuration location: /usr/local/etc/grafana/\n# Alternative: /opt/homebrew/etc/grafana/ (Apple Silicon)\n```\n\n### FreeBSD\n\n```bash\n# Using pkg\npkg install grafana8\n\n# Using ports\ncd /usr/ports/www/grafana8\nmake install clean\n\n# Enable in rc.conf\necho 'grafana_enable=\"YES\"' >> /etc/rc.conf\n\n# Start service\nservice grafana start\n\n# Configuration location: /usr/local/etc/grafana.conf\n```\n\n### Windows\n\n```powershell\n# Method 1: Using Chocolatey\nchoco install grafana\n\n# Method 2: Using Scoop\nscoop bucket add extras\nscoop install grafana\n\n# Method 3: Manual installation\n# Download from https://grafana.com/grafana/download\n# Extract to C:\\grafana\n# Run grafana-server.exe\n\n# Install as Windows service using NSSM\nnssm install grafana C:\\grafana\\bin\\grafana-server.exe\nnssm set grafana AppDirectory C:\\grafana\nnssm start grafana\n\n# Configuration location: C:\\grafana\\conf\\defaults.ini\n```\n\n## Initial Configuration\n\n### First-Run Setup\n\n1. **Create grafana user** (if not created by package):\n```bash\n# Linux systems\nsudo useradd -r -d /var/lib/grafana -s /sbin/nologin -c \"Grafana Dashboard\" grafana\n```\n\n2. **Default configuration locations**:\n- RHEL/CentOS/Rocky/AlmaLinux: `/etc/grafana/grafana.ini`\n- Debian/Ubuntu: `/etc/grafana/grafana.ini`\n- Arch Linux: `/etc/grafana/grafana.ini`\n- Alpine Linux: `/etc/grafana/grafana.ini`\n- openSUSE/SLES: `/etc/grafana/grafana.ini`\n- macOS: `/usr/local/etc/grafana/grafana.ini`\n- FreeBSD: `/usr/local/etc/grafana.conf`\n- Windows: `C:\\grafana\\conf\\custom.ini`\n\n3. **Essential settings to change**:\n\n```ini\n# /etc/grafana/grafana.ini\n[server]\n# Change from default port if needed\nhttp_port = 3000\n\n# Set domain for proper URL generation\ndomain = grafana.example.com\nroot_url = https://grafana.example.com\n\n# Protocol for serving (http or https)\nprotocol = https\ncert_file = /etc/grafana/grafana.crt\ncert_key = /etc/grafana/grafana.key\n\n[security]\n# IMPORTANT: Change default admin password\nadmin_user = admin\nadmin_password = secure_admin_password\n\n# Disable user signup\ndisable_initial_admin_creation = false\n\n[auth.anonymous]\n# Disable anonymous access\nenabled = false\n\n[database]\n# Use external database for production\ntype = mysql\nhost = localhost:3306\nname = grafana\nuser = grafana\npassword = secure_grafana_password\n\n[smtp]\n# Configure email for alerts\nenabled = true\nhost = smtp.example.com:587\nuser = grafana@example.com\npassword = smtp_password\nfrom_address = grafana@example.com\nfrom_name = Grafana\n```\n\n### Testing Initial Setup\n\n```bash\n# Check if Grafana is running\nsudo systemctl status grafana-server\n\n# Test web interface\ncurl -I http://localhost:3000\n\n# Check logs\nsudo journalctl -u grafana-server -f\n\n# Verify configuration\ngrafana-server -config /etc/grafana/grafana.ini -test\n\n# Test login\ncurl -X POST http://localhost:3000/login \\\n  -H 'Content-Type: application/json' \\\n  -d '{\"user\":\"admin\",\"password\":\"secure_admin_password\"}'\n```\n\n**WARNING:** Change the default admin password immediately after installation!\n\n## Service Management\n\n### systemd (RHEL, Debian, Ubuntu, Arch, openSUSE)\n\n```bash\n# Enable Grafana to start on boot\nsudo systemctl enable grafana-server\n\n# Start Grafana\nsudo systemctl start grafana-server\n\n# Stop Grafana\nsudo systemctl stop grafana-server\n\n# Restart Grafana\nsudo systemctl restart grafana-server\n\n# Reload configuration\nsudo systemctl reload grafana-server\n\n# Check status\nsudo systemctl status grafana-server\n\n# View logs\nsudo journalctl -u grafana-server -f\n```\n\n### OpenRC (Alpine Linux)\n\n```bash\n# Enable Grafana to start on boot\nrc-update add grafana default\n\n# Start Grafana\nrc-service grafana start\n\n# Stop Grafana\nrc-service grafana stop\n\n# Restart Grafana\nrc-service grafana restart\n\n# Check status\nrc-service grafana status\n\n# View logs\ntail -f /var/log/grafana/grafana.log\n```\n\n### rc.d (FreeBSD)\n\n```bash\n# Enable in /etc/rc.conf\necho 'grafana_enable=\"YES\"' >> /etc/rc.conf\n\n# Start Grafana\nservice grafana start\n\n# Stop Grafana\nservice grafana stop\n\n# Restart Grafana\nservice grafana restart\n\n# Check status\nservice grafana status\n```\n\n### launchd (macOS)\n\n```bash\n# Using Homebrew services\nbrew services start grafana\nbrew services stop grafana\nbrew services restart grafana\n\n# Check status\nbrew services list | grep grafana\n\n# Manual control\ngrafana-server --config=/usr/local/etc/grafana/grafana.ini\n```\n\n### Windows Service Manager\n\n```powershell\n# Using NSSM\nnssm start grafana\nnssm stop grafana\nnssm restart grafana\n\n# Using native Windows commands\nStart-Service grafana\nStop-Service grafana\nRestart-Service grafana\n\n# Check status\nGet-Service grafana\n\n# View logs (if configured to use Windows Event Log)\nGet-EventLog -LogName Application -Source Grafana\n```\n\n## Advanced Configuration\n\n### Database Backend Configuration\n\n```ini\n# MySQL/MariaDB (Recommended for production)\n[database]\ntype = mysql\nhost = mysql.example.com:3306\nname = grafana\nuser = grafana\npassword = secure_grafana_password\nssl_mode = require\nca_cert_path = /etc/ssl/certs/mysql-ca.pem\ncert_path = /etc/ssl/certs/mysql-cert.pem\nkey_path = /etc/ssl/private/mysql-key.pem\nmax_idle_conn = 2\nmax_open_conn = 0\nconn_max_lifetime = 14400\nlog_queries = false\n\n# PostgreSQL\n[database]\ntype = postgres\nhost = postgres.example.com:5432\nname = grafana\nuser = grafana\npassword = secure_grafana_password\nssl_mode = require\nca_cert_path = /etc/ssl/certs/postgres-ca.pem\ncert_path = /etc/ssl/certs/postgres-cert.pem\nkey_path = /etc/ssl/private/postgres-key.pem\nmax_idle_conn = 2\nmax_open_conn = 0\nconn_max_lifetime = 14400\n```\n\n### Authentication Configuration\n\n```ini\n# LDAP Authentication\n[auth.ldap]\nenabled = true\nconfig_file = /etc/grafana/ldap.toml\nallow_sign_up = false\nsync_cron = \"0 0 1 * * *\"\nactive_sync_enabled = true\n\n# OAuth Configuration (GitHub example)\n[auth.github]\nenabled = true\nallow_sign_up = false\nclient_id = your_github_client_id\nclient_secret = your_github_client_secret\nscopes = user:email,read:org\nauth_url = https://github.com/login/oauth/authorize\ntoken_url = https://github.com/login/oauth/access_token\napi_url = https://api.github.com/user\nallowed_domains = example.com\nallowed_organizations = your-organization\n\n# SAML Configuration (Enterprise feature)\n[auth.saml]\nenabled = true\ncertificate_path = /etc/grafana/saml.crt\nprivate_key_path = /etc/grafana/saml.key\nidp_metadata_url = https://idp.example.com/metadata\n```\n\n### High Availability Setup\n\n```ini\n# Multiple Grafana instances with shared database\n[database]\ntype = mysql\nhost = mysql-cluster.example.com:3306\nname = grafana\nuser = grafana\npassword = secure_password\n\n# Session storage in Redis\n[session]\nprovider = redis\nprovider_config = addr=redis.example.com:6379,pool_size=100,db=0\n\n# Alerting HA\n[unified_alerting]\nenabled = true\nha_peers = grafana-2.example.com:9094,grafana-3.example.com:9094\nha_listen_address = 0.0.0.0:9094\nha_advertise_address = grafana-1.example.com:9094\n```\n\n## Reverse Proxy Setup\n\n### nginx Configuration\n\n```nginx\n# /etc/nginx/sites-available/grafana\nupstream grafana {\n    server 127.0.0.1:3000;\n    keepalive 32;\n}\n\nserver {\n    listen 80;\n    server_name grafana.example.com;\n    return 301 https://$server_name$request_uri;\n}\n\nserver {\n    listen 443 ssl http2;\n    server_name grafana.example.com;\n\n    ssl_certificate /etc/letsencrypt/live/grafana.example.com/fullchain.pem;\n    ssl_certificate_key /etc/letsencrypt/live/grafana.example.com/privkey.pem;\n\n    # Security headers\n    add_header Strict-Transport-Security \"max-age=63072000\" always;\n    add_header X-Frame-Options \"SAMEORIGIN\" always;\n    add_header X-Content-Type-Options \"nosniff\" always;\n\n    location / {\n        proxy_pass http://grafana;\n        proxy_http_version 1.1;\n        proxy_set_header Upgrade $http_upgrade;\n        proxy_set_header Connection \"upgrade\";\n        proxy_set_header Host $http_host;\n        proxy_set_header X-Real-IP $remote_addr;\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n        proxy_set_header X-Forwarded-Proto $scheme;\n        proxy_cache_bypass $http_upgrade;\n    }\n}\n```\n\n### Apache Configuration\n\n```apache\n# /etc/apache2/sites-available/grafana.conf\n<VirtualHost *:443>\n    ServerName grafana.example.com\n    \n    SSLEngine on\n    SSLCertificateFile /etc/letsencrypt/live/grafana.example.com/fullchain.pem\n    SSLCertificateKeyFile /etc/letsencrypt/live/grafana.example.com/privkey.pem\n    \n    ProxyPreserveHost On\n    ProxyPass / http://localhost:3000/\n    ProxyPassReverse / http://localhost:3000/\n    \n    # WebSocket support\n    RewriteEngine On\n    RewriteCond %{HTTP:Upgrade} websocket [NC]\n    RewriteCond %{HTTP:Connection} upgrade [NC]\n    RewriteRule ^/?(.*) \"ws://localhost:3000/$1\" [P,L]\n    \n    Header always set Strict-Transport-Security \"max-age=63072000\"\n</VirtualHost>\n```\n\n### Caddy Configuration\n\n```caddyfile\ngrafana.example.com {\n    reverse_proxy localhost:3000\n    \n    header {\n        Strict-Transport-Security \"max-age=63072000\"\n        X-Frame-Options \"SAMEORIGIN\"\n        X-Content-Type-Options \"nosniff\"\n    }\n}\n```\n\n### HAProxy Configuration\n\n```haproxy\nfrontend grafana_frontend\n    bind *:443 ssl crt /etc/haproxy/certs/grafana.pem\n    mode http\n    option httplog\n    \n    default_backend grafana_backend\n\nbackend grafana_backend\n    mode http\n    balance roundrobin\n    option httpchk GET /api/health\n    server grafana1 127.0.0.1:3000 check\n    server grafana2 127.0.0.2:3000 check backup\n```\n\n## Security Configuration\n\n### SSL/TLS Configuration\n\n```bash\n# Generate SSL certificate for Grafana\nsudo mkdir -p /etc/grafana/ssl\n\n# Self-signed certificate (development)\nsudo openssl req -x509 -nodes -days 365 -newkey rsa:4096 \\\n  -keyout /etc/grafana/ssl/grafana.key \\\n  -out /etc/grafana/ssl/grafana.crt \\\n  -subj \"/C=US/ST=State/L=City/O=Organization/CN=grafana.example.com\"\n\n# Production: Use Let's Encrypt\nsudo certbot certonly --standalone -d grafana.example.com\nsudo cp /etc/letsencrypt/live/grafana.example.com/fullchain.pem /etc/grafana/ssl/grafana.crt\nsudo cp /etc/letsencrypt/live/grafana.example.com/privkey.pem /etc/grafana/ssl/grafana.key\n\n# Set permissions\nsudo chown grafana:grafana /etc/grafana/ssl/*\nsudo chmod 600 /etc/grafana/ssl/grafana.key\nsudo chmod 644 /etc/grafana/ssl/grafana.crt\n```\n\n### Security Hardening\n\n```ini\n# Security configuration in grafana.ini\n[security]\n# Strong admin password\nadmin_password = $2b$10$very_secure_bcrypt_hash\n\n# Security keys\nsecret_key = your_32_character_secret_key_here\nencryption_provider = secretKey.v1\navailable_encryption_providers = secretKey.v1\n\n# Security policies\ndisable_gravatar = true\ncookie_secure = true\ncookie_samesite = strict\nstrict_transport_security = true\nstrict_transport_security_max_age_seconds = 86400\nx_content_type_options = true\nx_xss_protection = true\ncontent_security_policy = true\n\n# Login protection\ndisable_brute_force_login_protection = false\nlogin_maximum_inactive_lifetime_duration = 7d\nlogin_maximum_lifetime_duration = 30d\n\n# Data source proxy whitelist\ndata_source_proxy_whitelist = 127.0.0.1:9090,prometheus.example.com:9090\n\n[users]\n# Disable user registration\nallow_sign_up = false\nallow_org_create = false\nauto_assign_org = true\nauto_assign_org_role = Viewer\n```\n\n### Firewall Rules\n\n```bash\n# UFW (Ubuntu/Debian)\nsudo ufw allow from 192.168.1.0/24 to any port 3000\nsudo ufw allow 443\nsudo ufw reload\n\n# firewalld (RHEL/CentOS/openSUSE)\nsudo firewall-cmd --permanent --new-zone=grafana\nsudo firewall-cmd --permanent --zone=grafana --add-source=192.168.1.0/24\nsudo firewall-cmd --permanent --zone=grafana --add-port=3000/tcp\nsudo firewall-cmd --permanent --add-service=https\nsudo firewall-cmd --reload\n\n# iptables\nsudo iptables -A INPUT -s 192.168.1.0/24 -p tcp --dport 3000 -j ACCEPT\nsudo iptables -A INPUT -p tcp --dport 443 -j ACCEPT\nsudo iptables-save > /etc/iptables/rules.v4\n\n# pf (FreeBSD)\n# Add to /etc/pf.conf\npass in on $ext_if proto tcp from 192.168.1.0/24 to any port 3000\npass in on $ext_if proto tcp to any port 443\n\n# Windows Firewall\nNew-NetFirewallRule -DisplayName \"Grafana\" -Direction Inbound -Protocol TCP -LocalPort 3000 -RemoteAddress 192.168.1.0/24 -Action Allow\n```\n\n## Database Setup\n\n### MySQL/MariaDB Setup\n\n```bash\n# Create Grafana database\nmysql -u root -p <<EOF\nCREATE DATABASE grafana CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;\nCREATE USER 'grafana'@'%' IDENTIFIED BY 'secure_grafana_password';\nGRANT ALL PRIVILEGES ON grafana.* TO 'grafana'@'%';\nFLUSH PRIVILEGES;\nEOF\n\n# Optimize MySQL for Grafana\nsudo tee /etc/mysql/conf.d/grafana.cnf <<EOF\n[mysqld]\n# Grafana optimizations\ninnodb_buffer_pool_size = 1G\ninnodb_log_file_size = 256M\ninnodb_log_buffer_size = 8M\ninnodb_file_per_table = 1\ninnodb_open_files = 400\nmax_connections = 200\nthread_cache_size = 50\nquery_cache_type = 1\nquery_cache_size = 16M\nEOF\n\nsudo systemctl restart mysql\n```\n\n### PostgreSQL Setup\n\n```bash\n# Create Grafana database\nsudo -u postgres createdb grafana\nsudo -u postgres createuser grafana\n\nsudo -u postgres psql <<EOF\nALTER USER grafana WITH PASSWORD 'secure_grafana_password';\nGRANT ALL PRIVILEGES ON DATABASE grafana TO grafana;\n\\q\nEOF\n\n# Optimize PostgreSQL for Grafana\nsudo tee -a /etc/postgresql/13/main/postgresql.conf <<EOF\n# Grafana optimizations\nshared_buffers = 256MB\neffective_cache_size = 1GB\nmaintenance_work_mem = 64MB\ncheckpoint_completion_target = 0.9\nwal_buffers = 16MB\ndefault_statistics_target = 100\nrandom_page_cost = 1.1\neffective_io_concurrency = 200\nwork_mem = 4MB\nmin_wal_size = 1GB\nmax_wal_size = 4GB\nEOF\n\nsudo systemctl restart postgresql\n```\n\n## Performance Optimization\n\n### System Tuning\n\n```bash\n# Increase file descriptor limits\nsudo tee -a /etc/security/limits.conf <<EOF\ngrafana soft nofile 65535\ngrafana hard nofile 65535\nEOF\n\n# Kernel parameters for better performance\nsudo tee -a /etc/sysctl.conf <<EOF\n# Grafana optimizations\nvm.max_map_count = 262144\nfs.file-max = 65535\nnet.core.somaxconn = 32768\nnet.ipv4.tcp_max_syn_backlog = 8192\nEOF\n\nsudo sysctl -p\n```\n\n### Grafana Performance Tuning\n\n```ini\n# Performance settings in grafana.ini\n[server]\n# Increase read timeout\nread_timeout = 0\n\n[database]\n# Database connection pool optimization\nmax_idle_conn = 2\nmax_open_conn = 0\nconn_max_lifetime = 14400\n\n[dataproxy]\n# Data source proxy timeouts\ntimeout = 30\ndial_timeout = 10\nkeep_alive_seconds = 30\n\n[rendering]\n# Server-side rendering settings\nserver_url = http://localhost:8081/render\ncallback_url = http://localhost:3000/\nconcurrent_render_request_limit = 30\n\n[alerting]\n# Alerting performance\nconcurrent_render_limit = 5\n```\n\n### Caching Configuration\n\n```ini\n# Remote cache configuration\n[remote_cache]\ntype = redis\nconnstr = addr=redis.example.com:6379,pool_size=100,db=0,ssl=false\n\n# Or use memcached\n[remote_cache]\ntype = memcached\nconnstr = memcached.example.com:11211\n```\n\n## Monitoring\n\n### Built-in Metrics\n\n```bash\n# Grafana exposes metrics on /metrics endpoint\ncurl http://localhost:3000/metrics\n\n# Key metrics to monitor:\n# grafana_database_conn_*: Database connections\n# grafana_http_request_*: HTTP request metrics  \n# grafana_page_response_*: Page response times\n# grafana_proxy_*: Data source proxy metrics\n# go_memstats_*: Go runtime memory statistics\n```\n\n### Health Check Endpoint\n\n```bash\n# Health check endpoint\ncurl http://localhost:3000/api/health\n\n# Response format:\n# {\n#   \"commit\": \"abc123\",\n#   \"database\": \"ok\",\n#   \"version\": \"9.3.0\"\n# }\n```\n\n### Alerting Configuration\n\n```yaml\n# /etc/grafana/provisioning/alerting/rules.yml\napiVersion: 1\n\ngroups:\n  - name: grafana-health\n    folder: Infrastructure\n    interval: 1m\n    rules:\n      - uid: grafana_high_memory\n        title: Grafana High Memory Usage\n        condition: A\n        data:\n          - refId: A\n            queryType: ''\n            relativeTimeRange:\n              from: 300\n              to: 0\n            datasourceUid: prometheus\n            model:\n              expr: go_memstats_alloc_bytes{job=\"grafana\"} > 500000000\n              refId: A\n        noDataState: NoData\n        execErrState: Alerting\n        for: 5m\n        annotations:\n          description: \"Grafana memory usage is above 500MB\"\n          summary: \"High memory usage on Grafana instance\"\n```\n\n### Log Analysis\n\n```bash\n# Monitor Grafana logs\nsudo tail -f /var/log/grafana/grafana.log\n\n# Log rotation configuration\nsudo tee /etc/logrotate.d/grafana <<EOF\n/var/log/grafana/*.log {\n    daily\n    rotate 7\n    compress\n    delaycompress\n    missingok\n    notifempty\n    create 640 grafana grafana\n    postrotate\n        systemctl reload grafana-server > /dev/null 2>&1 || true\n    endscript\n}\nEOF\n```\n\n## Backup and Restore\n\n### Backup Procedures\n\n```bash\n#!/bin/bash\n# backup-grafana.sh\n\nBACKUP_DIR=\"/backup/grafana/$(date +%Y%m%d_%H%M%S)\"\nmkdir -p \"$BACKUP_DIR\"\n\n# Stop Grafana for consistent backup\nsudo systemctl stop grafana-server\n\n# Backup SQLite database (if using SQLite)\nif [ -f /var/lib/grafana/grafana.db ]; then\n    cp /var/lib/grafana/grafana.db \"$BACKUP_DIR/grafana.db\"\nfi\n\n# Backup MySQL database (if using MySQL)\nif grep -q \"type = mysql\" /etc/grafana/grafana.ini; then\n    mysqldump -u grafana -p grafana > \"$BACKUP_DIR/grafana-mysql.sql\"\nfi\n\n# Backup PostgreSQL database (if using PostgreSQL)\nif grep -q \"type = postgres\" /etc/grafana/grafana.ini; then\n    pg_dump -U grafana grafana > \"$BACKUP_DIR/grafana-postgres.sql\"\nfi\n\n# Backup configuration\ntar czf \"$BACKUP_DIR/grafana-config.tar.gz\" /etc/grafana/\n\n# Backup plugins\ntar czf \"$BACKUP_DIR/grafana-plugins.tar.gz\" /var/lib/grafana/plugins/\n\n# Backup dashboards via API\nmkdir -p \"$BACKUP_DIR/dashboards\"\ncurl -s \"http://admin:password@localhost:3000/api/search?type=dash-db\" | \\\n    jq -r '.[] | .uid' | while read uid; do\n        curl -s \"http://admin:password@localhost:3000/api/dashboards/uid/$uid\" > \\\n            \"$BACKUP_DIR/dashboards/$uid.json\"\n    done\n\n# Start Grafana\nsudo systemctl start grafana-server\n\necho \"Backup completed: $BACKUP_DIR\"\n```\n\n### Restore Procedures\n\n```bash\n#!/bin/bash\n# restore-grafana.sh\n\nBACKUP_DIR=\"$1\"\nif [ -z \"$BACKUP_DIR\" ]; then\n    echo \"Usage: $0 <backup-directory>\"\n    exit 1\nfi\n\n# Stop Grafana\nsudo systemctl stop grafana-server\n\n# Restore database\nif [ -f \"$BACKUP_DIR/grafana.db\" ]; then\n    cp \"$BACKUP_DIR/grafana.db\" /var/lib/grafana/grafana.db\n    chown grafana:grafana /var/lib/grafana/grafana.db\nfi\n\n# Restore MySQL database\nif [ -f \"$BACKUP_DIR/grafana-mysql.sql\" ]; then\n    mysql -u grafana -p grafana < \"$BACKUP_DIR/grafana-mysql.sql\"\nfi\n\n# Restore PostgreSQL database\nif [ -f \"$BACKUP_DIR/grafana-postgres.sql\" ]; then\n    dropdb grafana && createdb grafana\n    psql -U grafana grafana < \"$BACKUP_DIR/grafana-postgres.sql\"\nfi\n\n# Restore configuration\ntar xzf \"$BACKUP_DIR/grafana-config.tar.gz\" -C /\n\n# Restore plugins\ntar xzf \"$BACKUP_DIR/grafana-plugins.tar.gz\" -C /\n\n# Fix ownership\nsudo chown -R grafana:grafana /var/lib/grafana /etc/grafana\n\n# Start Grafana\nsudo systemctl start grafana-server\n\necho \"Restore completed from: $BACKUP_DIR\"\n```\n\n### Automated Backup\n\n```bash\n# Create cron job for daily backups\necho \"0 2 * * * /usr/local/bin/backup-grafana.sh\" | sudo crontab -\n\n# Backup retention script\nfind /backup/grafana -type d -mtime +30 -exec rm -rf {} \\; 2>/dev/null\n```\n\n## Troubleshooting\n\n### Common Issues\n\n1. **Cannot connect to Grafana web interface**:\n```bash\n# Check service status\nsudo systemctl status grafana-server\n\n# Check logs\nsudo journalctl -u grafana-server -f\n\n# Check port binding\nsudo ss -tlnp | grep :3000\n\n# Test local connection\ncurl -I http://localhost:3000\n```\n\n2. **Database connection issues**:\n```bash\n# Test database connectivity\n# MySQL\nmysql -h localhost -u grafana -p grafana -e \"SELECT 1;\"\n\n# PostgreSQL\npsql -h localhost -U grafana -d grafana -c \"SELECT 1;\"\n\n# Check database logs\nsudo tail -f /var/log/mysql/error.log\nsudo tail -f /var/log/postgresql/postgresql-*.log\n```\n\n3. **Plugin installation failures**:\n```bash\n# Check plugin directory permissions\nls -la /var/lib/grafana/plugins/\n\n# Install plugin manually\nsudo grafana-cli --pluginUrl https://example.com/plugin.zip plugins install custom-plugin\n\n# Check plugin logs\nsudo journalctl -u grafana-server | grep -i plugin\n```\n\n4. **High memory usage**:\n```bash\n# Check Grafana memory usage\nps aux | grep grafana-server\n\n# Monitor memory growth\ntop -p $(pgrep grafana-server)\n\n# Check for memory leaks in logs\nsudo grep -i \"out of memory\" /var/log/grafana/grafana.log\n\n# Restart if needed\nsudo systemctl restart grafana-server\n```\n\n### Debug Mode\n\n```bash\n# Enable debug logging\nsudo systemctl edit grafana-server\n# Add:\n[Service]\nEnvironment=\"GF_LOG_LEVEL=debug\"\n\nsudo systemctl daemon-reload\nsudo systemctl restart grafana-server\n\n# View debug logs\nsudo journalctl -u grafana-server -f\n```\n\n### Performance Troubleshooting\n\n```bash\n# Check dashboard performance\ncurl -w \"@curl-format.txt\" -s -o /dev/null http://localhost:3000/d/dashboard-uid\n\n# Monitor database queries (if MySQL)\nmysql -e \"SHOW PROCESSLIST;\" | grep grafana\n\n# Check data source response times\ncurl -w \"Time: %{time_total}s\\n\" http://prometheus:9090/api/v1/query?query=up\n```\n\n## Maintenance\n\n### Update Procedures\n\n```bash\n# RHEL/CentOS/Rocky/AlmaLinux\nsudo yum check-update grafana\nsudo yum update grafana\n\n# Debian/Ubuntu\nsudo apt update\nsudo apt upgrade grafana\n\n# Arch Linux\nsudo pacman -Syu grafana\n\n# Alpine Linux\napk update\napk upgrade grafana\n\n# openSUSE\nsudo zypper update grafana\n\n# FreeBSD\npkg update\npkg upgrade grafana8\n\n# macOS\nbrew upgrade grafana\n\n# Always restart after updates\nsudo systemctl restart grafana-server\n```\n\n### Plugin Management\n\n```bash\n# List installed plugins\ngrafana-cli plugins ls\n\n# Update all plugins\nsudo grafana-cli plugins update-all\n\n# Install specific plugin\nsudo grafana-cli plugins install grafana-clock-panel\n\n# Remove plugin\nsudo grafana-cli plugins remove grafana-clock-panel\n\n# Install from URL\nsudo grafana-cli --pluginUrl https://example.com/plugin.zip plugins install custom-plugin\n```\n\n### Health Checks\n\n```bash\n#!/bin/bash\n# grafana-health-check.sh\n\n# Check service status\nif ! systemctl is-active grafana-server >/dev/null 2>&1; then\n    echo \"CRITICAL: Grafana service is not running\"\n    exit 2\nfi\n\n# Check web interface\nif ! curl -f -s http://localhost:3000/api/health >/dev/null; then\n    echo \"CRITICAL: Grafana web interface is not responding\"\n    exit 2\nfi\n\n# Check database connectivity\nif ! curl -s http://localhost:3000/api/health | grep -q '\"database\":\"ok\"'; then\n    echo \"WARNING: Database connectivity issues\"\n    exit 1\nfi\n\n# Check disk space\nDISK_USAGE=$(df /var/lib/grafana | awk 'NR==2 {print $5}' | sed 's/%//')\nif [ \"$DISK_USAGE\" -gt 85 ]; then\n    echo \"WARNING: Disk usage is ${DISK_USAGE}%\"\n    exit 1\nfi\n\necho \"OK: Grafana is healthy\"\nexit 0\n```\n\n### Cleanup Tasks\n\n```bash\n# Clean old dashboard versions\nmysql -u grafana -p grafana -e \"DELETE FROM dashboard_version WHERE created < DATE_SUB(NOW(), INTERVAL 90 DAY);\"\n\n# Clean old annotations\nmysql -u grafana -p grafana -e \"DELETE FROM annotation WHERE created < DATE_SUB(NOW(), INTERVAL 30 DAY);\"\n\n# Clean old sessions\nmysql -u grafana -p grafana -e \"DELETE FROM session WHERE expiry < NOW();\"\n\n# Clean old alert notifications\nmysql -u grafana -p grafana -e \"DELETE FROM alert_notification WHERE created < DATE_SUB(NOW(), INTERVAL 30 DAY);\"\n\n# Optimize database tables\nmysql -u grafana -p grafana -e \"OPTIMIZE TABLE dashboard, dashboard_version, annotation, session;\"\n```\n\n## Integration Examples\n\n### Prometheus Data Source\n\n```yaml\n# /etc/grafana/provisioning/datasources/prometheus.yml\napiVersion: 1\n\ndatasources:\n  - name: Prometheus\n    type: prometheus\n    access: proxy\n    url: http://prometheus:9090\n    isDefault: true\n    editable: false\n    jsonData:\n      httpMethod: POST\n      queryTimeout: 60s\n      timeInterval: 15s\n```\n\n### Dashboard Provisioning\n\n```yaml\n# /etc/grafana/provisioning/dashboards/default.yml\napiVersion: 1\n\nproviders:\n  - name: 'default'\n    orgId: 1\n    folder: ''\n    type: file\n    disableDeletion: false\n    editable: true\n    options:\n      path: /var/lib/grafana/dashboards\n```\n\n### Alert Manager Integration\n\n```yaml\n# /etc/grafana/provisioning/alerting/contactpoints.yml\napiVersion: 1\n\ncontactPoints:\n  - name: email-alerts\n    orgId: 1\n    receivers:\n      - uid: email_uid\n        type: email\n        settings:\n          addresses: \"admin@example.com\"\n          subject: \"Grafana Alert\"\n```\n\n### LDAP Configuration\n\n```toml\n# /etc/grafana/ldap.toml\n[[servers]]\nhost = \"ldap.example.com\"\nport = 636\nuse_ssl = true\nstart_tls = false\nssl_skip_verify = false\n\nsearch_filter = \"(sAMAccountName=%s)\"\nsearch_base_dns = [\"ou=Users,dc=example,dc=com\"]\n\nbind_dn = \"cn=grafana,ou=Service Accounts,dc=example,dc=com\"\nbind_password = 'ldap_service_password'\n\n[servers.attributes]\nusername = \"sAMAccountName\"\nname = \"givenName\"\nsurname = \"sn\"\nemail = \"mail\"\nmember_of = \"memberOf\"\n\n[[servers.group_mappings]]\ngroup_dn = \"cn=Grafana Admins,ou=Groups,dc=example,dc=com\"\norg_role = \"Admin\"\ngrafana_admin = true\n```\n\n## Additional Resources\n\n- [Official Documentation](https://grafana.com/docs/grafana/latest/)\n- [GitHub Repository](https://github.com/grafana/grafana)\n- [Plugin Directory](https://grafana.com/grafana/plugins/)\n- [Dashboard Gallery](https://grafana.com/grafana/dashboards/)\n- [Community Forum](https://community.grafana.com/)\n- [Grafana Academy](https://grafana.com/tutorials/)\n- [Best Practices Guide](https://grafana.com/docs/grafana/latest/best-practices/)\n- [Security Documentation](https://grafana.com/docs/grafana/latest/administration/security/)\n\n---\n\n**Note:** This guide is part of the [HowToMgr](https://howtomgr.github.io) collection. Always refer to official documentation for the most up-to-date information.","readmeHtml":"<h1 id=\"grafana-installation-guide\" class=\"mobile-header\">Grafana Installation Guide</h1>\n<p class=\"mobile-paragraph\">Grafana is a free and open-source multi-platform analytics and interactive visualization web application. Originally developed by Torkel Ã–degaard, Grafana provides charts, graphs, and alerts for the web when connected to supported data sources. It serves as a FOSS alternative to commercial solutions like Datadog, New Relic, or Splunk dashboards, offering enterprise-grade visualization and monitoring without licensing costs, with features like alerting, authentication integration, and extensive plugin ecosystem.</p>\n<h2 id=\"prerequisites\" class=\"mobile-header\">Prerequisites</h2>\n<li class=\"mobile-list-item\"><strong>Hardware Requirements</strong>:</li>\n<li class=\"mobile-list-item\">CPU: 1 core minimum (2+ cores recommended for production)</li>\n<li class=\"mobile-list-item\">RAM: 512MB minimum (2GB+ recommended for production)</li>\n<li class=\"mobile-list-item\">Storage: 1GB minimum (10GB+ recommended for dashboard storage and logs)</li>\n<li class=\"mobile-list-item\">Network: Stable internet connection for plugins and updates</li>\n<li class=\"mobile-list-item\"><strong>Operating System</strong>: </li>\n<li class=\"mobile-list-item\">Linux: Any modern distribution with systemd support</li>\n<li class=\"mobile-list-item\">macOS: 10.15+ (Catalina or newer)</li>\n<li class=\"mobile-list-item\">Windows: Windows Server 2016+ or Windows 10</li>\n<li class=\"mobile-list-item\">FreeBSD: 12.0+</li>\n<li class=\"mobile-list-item\"><strong>Network Requirements</strong>:</li>\n<li class=\"mobile-list-item\">Port 3000 (default Grafana web interface)</li>\n<li class=\"mobile-list-item\">Port 443/80 (HTTPS/HTTP if using reverse proxy)</li>\n<li class=\"mobile-list-item\">Outbound HTTPS for plugin downloads and updates</li>\n<li class=\"mobile-list-item\"><strong>Dependencies</strong>:</li>\n<li class=\"mobile-list-item\">Database (SQLite, MySQL, PostgreSQL) - SQLite included by default</li>\n<li class=\"mobile-list-item\">Data sources (Prometheus, InfluxDB, etc.) for meaningful dashboards</li>\n<li class=\"mobile-list-item\">Web browser with JavaScript support</li>\n<li class=\"mobile-list-item\"><strong>System Access</strong>: root or sudo privileges required</li>\n<h2 id=\"installation\" class=\"mobile-header\">Installation</h2>\n<h3 id=\"rhelcentosrocky-linuxalmalinux\" class=\"mobile-header\">RHEL/CentOS/Rocky Linux/AlmaLinux</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Add Grafana repository\nsudo tee /etc/yum.repos.d/grafana.repo &lt;&lt;EOF\n[grafana]\nname=grafana\nbaseurl=https://packages.grafana.com/oss/rpm\nrepo_gpgcheck=1\nenabled=1\ngpgcheck=1\ngpgkey=https://packages.grafana.com/gpg.key\nsslverify=1\nsslcacert=/etc/pki/tls/certs/ca-bundle.crt\nEOF\n\n# Install Grafana\nsudo yum install -y grafana\n\n# Enable and start service\nsudo systemctl enable --now grafana-server\n\n# Configure firewall\nsudo firewall-cmd --permanent --add-port=3000/tcp\nsudo firewall-cmd --reload</code></pre>\n      </div>\n    </div>\n<h3 id=\"debianubuntu\" class=\"mobile-header\">Debian/Ubuntu</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Update package index and install prerequisites\nsudo apt update\nsudo apt install -y software-properties-common wget\n\n# Add Grafana GPG key\nwget -q -O - https://packages.grafana.com/gpg.key | sudo apt-key add -\n\n# Add repository\necho &quot;deb https://packages.grafana.com/oss/deb stable main&quot; | sudo tee /etc/apt/sources.list.d/grafana.list\n\n# Install Grafana\nsudo apt update\nsudo apt install -y grafana\n\n# Enable and start service\nsudo systemctl enable --now grafana-server\n\n# Configure firewall\nsudo ufw allow 3000</code></pre>\n      </div>\n    </div>\n<h3 id=\"arch-linux\" class=\"mobile-header\">Arch Linux</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Install Grafana from official repositories\nsudo pacman -S grafana\n\n# Optional: Install additional plugins\nsudo pacman -S grafana-zabbix\n\n# Enable and start service\nsudo systemctl enable --now grafana-server\n\n# Configure firewall\nsudo ufw allow 3000</code></pre>\n      </div>\n    </div>\n<h3 id=\"alpine-linux\" class=\"mobile-header\">Alpine Linux</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Install Grafana\napk add --no-cache grafana\n\n# Create grafana user if not exists\nadduser -D -H -s /sbin/nologin grafana\n\n# Create necessary directories\nmkdir -p /var/lib/grafana /var/log/grafana\nchown -R grafana:grafana /var/lib/grafana /var/log/grafana\n\n# Enable and start service\nrc-update add grafana default\nrc-service grafana start\n\n# Configure firewall\nufw allow 3000</code></pre>\n      </div>\n    </div>\n<h3 id=\"opensusesles\" class=\"mobile-header\">openSUSE/SLES</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># openSUSE Leap/Tumbleweed\nsudo zypper install -y grafana\n\n# For latest version, add official repository\nsudo zypper addrepo https://packages.grafana.com/oss/rpm grafana\nsudo zypper refresh\nsudo zypper install -y grafana\n\n# SLES 15 - may need additional repositories\nsudo SUSEConnect -p sle-module-web-scripting/15.5/x86_64\nsudo zypper install -y grafana\n\n# Enable and start service\nsudo systemctl enable --now grafana-server\n\n# Configure firewall\nsudo firewall-cmd --permanent --add-port=3000/tcp\nsudo firewall-cmd --reload</code></pre>\n      </div>\n    </div>\n<h3 id=\"macos\" class=\"mobile-header\">macOS</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Using Homebrew\nbrew install grafana\n\n# Start as service\nbrew services start grafana\n\n# Or run manually\ngrafana-server --config=/usr/local/etc/grafana/grafana.ini --homepath /usr/local/share/grafana\n\n# Configuration location: /usr/local/etc/grafana/\n# Alternative: /opt/homebrew/etc/grafana/ (Apple Silicon)</code></pre>\n      </div>\n    </div>\n<h3 id=\"freebsd\" class=\"mobile-header\">FreeBSD</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Using pkg\npkg install grafana8\n\n# Using ports\ncd /usr/ports/www/grafana8\nmake install clean\n\n# Enable in rc.conf\necho &#039;grafana_enable=&quot;YES&quot;&#039; &gt;&gt; /etc/rc.conf\n\n# Start service\nservice grafana start\n\n# Configuration location: /usr/local/etc/grafana.conf</code></pre>\n      </div>\n    </div>\n<h3 id=\"windows\" class=\"mobile-header\">Windows</h3>\n<div class=\"mobile-code-block\" data-language=\"powershell\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">powershell</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-powershell\"># Method 1: Using Chocolatey\nchoco install grafana\n\n# Method 2: Using Scoop\nscoop bucket add extras\nscoop install grafana\n\n# Method 3: Manual installation\n# Download from https://grafana.com/grafana/download\n# Extract to C:\\grafana\n# Run grafana-server.exe\n\n# Install as Windows service using NSSM\nnssm install grafana C:\\grafana\\bin\\grafana-server.exe\nnssm set grafana AppDirectory C:\\grafana\nnssm start grafana\n\n# Configuration location: C:\\grafana\\conf\\defaults.ini</code></pre>\n      </div>\n    </div>\n<h2 id=\"initial-configuration\" class=\"mobile-header\">Initial Configuration</h2>\n<h3 id=\"first-run-setup\" class=\"mobile-header\">First-Run Setup</h3>\n<p class=\"mobile-paragraph\">1. <strong>Create grafana user</strong> (if not created by package):</p>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Linux systems\nsudo useradd -r -d /var/lib/grafana -s /sbin/nologin -c &quot;Grafana Dashboard&quot; grafana</code></pre>\n      </div>\n    </div>\n<p class=\"mobile-paragraph\">2. <strong>Default configuration locations</strong>:</p>\n<li class=\"mobile-list-item\">RHEL/CentOS/Rocky/AlmaLinux: <code class=\"mobile-inline-code\">/etc/grafana/grafana.ini</code></li>\n<li class=\"mobile-list-item\">Debian/Ubuntu: <code class=\"mobile-inline-code\">/etc/grafana/grafana.ini</code></li>\n<li class=\"mobile-list-item\">Arch Linux: <code class=\"mobile-inline-code\">/etc/grafana/grafana.ini</code></li>\n<li class=\"mobile-list-item\">Alpine Linux: <code class=\"mobile-inline-code\">/etc/grafana/grafana.ini</code></li>\n<li class=\"mobile-list-item\">openSUSE/SLES: <code class=\"mobile-inline-code\">/etc/grafana/grafana.ini</code></li>\n<li class=\"mobile-list-item\">macOS: <code class=\"mobile-inline-code\">/usr/local/etc/grafana/grafana.ini</code></li>\n<li class=\"mobile-list-item\">FreeBSD: <code class=\"mobile-inline-code\">/usr/local/etc/grafana.conf</code></li>\n<li class=\"mobile-list-item\">Windows: <code class=\"mobile-inline-code\">C:\\grafana\\conf\\custom.ini</code></li>\n<p class=\"mobile-paragraph\">3. <strong>Essential settings to change</strong>:</p>\n<div class=\"mobile-code-block\" data-language=\"ini\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">ini</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-ini\"># /etc/grafana/grafana.ini\n[server]\n# Change from default port if needed\nhttp_port = 3000\n\n# Set domain for proper URL generation\ndomain = grafana.example.com\nroot_url = https://grafana.example.com\n\n# Protocol for serving (http or https)\nprotocol = https\ncert_file = /etc/grafana/grafana.crt\ncert_key = /etc/grafana/grafana.key\n\n[security]\n# IMPORTANT: Change default admin password\nadmin_user = admin\nadmin_password = secure_admin_password\n\n# Disable user signup\ndisable_initial_admin_creation = false\n\n[auth.anonymous]\n# Disable anonymous access\nenabled = false\n\n[database]\n# Use external database for production\ntype = mysql\nhost = localhost:3306\nname = grafana\nuser = grafana\npassword = secure_grafana_password\n\n[smtp]\n# Configure email for alerts\nenabled = true\nhost = smtp.example.com:587\nuser = grafana@example.com\npassword = smtp_password\nfrom_address = grafana@example.com\nfrom_name = Grafana</code></pre>\n      </div>\n    </div>\n<h3 id=\"testing-initial-setup\" class=\"mobile-header\">Testing Initial Setup</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Check if Grafana is running\nsudo systemctl status grafana-server\n\n# Test web interface\ncurl -I http://localhost:3000\n\n# Check logs\nsudo journalctl -u grafana-server -f\n\n# Verify configuration\ngrafana-server -config /etc/grafana/grafana.ini -test\n\n# Test login\ncurl -X POST http://localhost:3000/login \\\n  -H &#039;Content-Type: application/json&#039; \\\n  -d &#039;{&quot;user&quot;:&quot;admin&quot;,&quot;password&quot;:&quot;secure_admin_password&quot;}&#039;</code></pre>\n      </div>\n    </div>\n<p class=\"mobile-paragraph\"><strong>WARNING:</strong> Change the default admin password immediately after installation!</p>\n<h2 id=\"service-management\" class=\"mobile-header\">Service Management</h2>\n<h3 id=\"systemd-rhel-debian-ubuntu-arch-opensuse\" class=\"mobile-header\">systemd (RHEL, Debian, Ubuntu, Arch, openSUSE)</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Enable Grafana to start on boot\nsudo systemctl enable grafana-server\n\n# Start Grafana\nsudo systemctl start grafana-server\n\n# Stop Grafana\nsudo systemctl stop grafana-server\n\n# Restart Grafana\nsudo systemctl restart grafana-server\n\n# Reload configuration\nsudo systemctl reload grafana-server\n\n# Check status\nsudo systemctl status grafana-server\n\n# View logs\nsudo journalctl -u grafana-server -f</code></pre>\n      </div>\n    </div>\n<h3 id=\"openrc-alpine-linux\" class=\"mobile-header\">OpenRC (Alpine Linux)</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Enable Grafana to start on boot\nrc-update add grafana default\n\n# Start Grafana\nrc-service grafana start\n\n# Stop Grafana\nrc-service grafana stop\n\n# Restart Grafana\nrc-service grafana restart\n\n# Check status\nrc-service grafana status\n\n# View logs\ntail -f /var/log/grafana/grafana.log</code></pre>\n      </div>\n    </div>\n<h3 id=\"rcd-freebsd\" class=\"mobile-header\">rc.d (FreeBSD)</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Enable in /etc/rc.conf\necho &#039;grafana_enable=&quot;YES&quot;&#039; &gt;&gt; /etc/rc.conf\n\n# Start Grafana\nservice grafana start\n\n# Stop Grafana\nservice grafana stop\n\n# Restart Grafana\nservice grafana restart\n\n# Check status\nservice grafana status</code></pre>\n      </div>\n    </div>\n<h3 id=\"launchd-macos\" class=\"mobile-header\">launchd (macOS)</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Using Homebrew services\nbrew services start grafana\nbrew services stop grafana\nbrew services restart grafana\n\n# Check status\nbrew services list | grep grafana\n\n# Manual control\ngrafana-server --config=/usr/local/etc/grafana/grafana.ini</code></pre>\n      </div>\n    </div>\n<h3 id=\"windows-service-manager\" class=\"mobile-header\">Windows Service Manager</h3>\n<div class=\"mobile-code-block\" data-language=\"powershell\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">powershell</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-powershell\"># Using NSSM\nnssm start grafana\nnssm stop grafana\nnssm restart grafana\n\n# Using native Windows commands\nStart-Service grafana\nStop-Service grafana\nRestart-Service grafana\n\n# Check status\nGet-Service grafana\n\n# View logs (if configured to use Windows Event Log)\nGet-EventLog -LogName Application -Source Grafana</code></pre>\n      </div>\n    </div>\n<h2 id=\"advanced-configuration\" class=\"mobile-header\">Advanced Configuration</h2>\n<h3 id=\"database-backend-configuration\" class=\"mobile-header\">Database Backend Configuration</h3>\n<div class=\"mobile-code-block\" data-language=\"ini\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">ini</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-ini\"># MySQL/MariaDB (Recommended for production)\n[database]\ntype = mysql\nhost = mysql.example.com:3306\nname = grafana\nuser = grafana\npassword = secure_grafana_password\nssl_mode = require\nca_cert_path = /etc/ssl/certs/mysql-ca.pem\ncert_path = /etc/ssl/certs/mysql-cert.pem\nkey_path = /etc/ssl/private/mysql-key.pem\nmax_idle_conn = 2\nmax_open_conn = 0\nconn_max_lifetime = 14400\nlog_queries = false\n\n# PostgreSQL\n[database]\ntype = postgres\nhost = postgres.example.com:5432\nname = grafana\nuser = grafana\npassword = secure_grafana_password\nssl_mode = require\nca_cert_path = /etc/ssl/certs/postgres-ca.pem\ncert_path = /etc/ssl/certs/postgres-cert.pem\nkey_path = /etc/ssl/private/postgres-key.pem\nmax_idle_conn = 2\nmax_open_conn = 0\nconn_max_lifetime = 14400</code></pre>\n      </div>\n    </div>\n<h3 id=\"authentication-configuration\" class=\"mobile-header\">Authentication Configuration</h3>\n<div class=\"mobile-code-block\" data-language=\"ini\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">ini</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-ini\"># LDAP Authentication\n[auth.ldap]\nenabled = true\nconfig_file = /etc/grafana/ldap.toml\nallow_sign_up = false\nsync_cron = &quot;0 0 1 * * *&quot;\nactive_sync_enabled = true\n\n# OAuth Configuration (GitHub example)\n[auth.github]\nenabled = true\nallow_sign_up = false\nclient_id = your_github_client_id\nclient_secret = your_github_client_secret\nscopes = user:email,read:org\nauth_url = https://github.com/login/oauth/authorize\ntoken_url = https://github.com/login/oauth/access_token\napi_url = https://api.github.com/user\nallowed_domains = example.com\nallowed_organizations = your-organization\n\n# SAML Configuration (Enterprise feature)\n[auth.saml]\nenabled = true\ncertificate_path = /etc/grafana/saml.crt\nprivate_key_path = /etc/grafana/saml.key\nidp_metadata_url = https://idp.example.com/metadata</code></pre>\n      </div>\n    </div>\n<h3 id=\"high-availability-setup\" class=\"mobile-header\">High Availability Setup</h3>\n<div class=\"mobile-code-block\" data-language=\"ini\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">ini</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-ini\"># Multiple Grafana instances with shared database\n[database]\ntype = mysql\nhost = mysql-cluster.example.com:3306\nname = grafana\nuser = grafana\npassword = secure_password\n\n# Session storage in Redis\n[session]\nprovider = redis\nprovider_config = addr=redis.example.com:6379,pool_size=100,db=0\n\n# Alerting HA\n[unified_alerting]\nenabled = true\nha_peers = grafana-2.example.com:9094,grafana-3.example.com:9094\nha_listen_address = 0.0.0.0:9094\nha_advertise_address = grafana-1.example.com:9094</code></pre>\n      </div>\n    </div>\n<h2 id=\"reverse-proxy-setup\" class=\"mobile-header\">Reverse Proxy Setup</h2>\n<h3 id=\"nginx-configuration\" class=\"mobile-header\">nginx Configuration</h3>\n<div class=\"mobile-code-block\" data-language=\"nginx\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">nginx</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-nginx\"># /etc/nginx/sites-available/grafana\nupstream grafana {\n    server 127.0.0.1:3000;\n    keepalive 32;\n}\n\nserver {\n    listen 80;\n    server_name grafana.example.com;\n    return 301 https://$server_name$request_uri;\n}\n\nserver {\n    listen 443 ssl http2;\n    server_name grafana.example.com;\n\n    ssl_certificate /etc/letsencrypt/live/grafana.example.com/fullchain.pem;\n    ssl_certificate_key /etc/letsencrypt/live/grafana.example.com/privkey.pem;\n\n    # Security headers\n    add_header Strict-Transport-Security &quot;max-age=63072000&quot; always;\n    add_header X-Frame-Options &quot;SAMEORIGIN&quot; always;\n    add_header X-Content-Type-Options &quot;nosniff&quot; always;\n\n    location / {\n        proxy_pass http://grafana;\n        proxy_http_version 1.1;\n        proxy_set_header Upgrade $http_upgrade;\n        proxy_set_header Connection &quot;upgrade&quot;;\n        proxy_set_header Host $http_host;\n        proxy_set_header X-Real-IP $remote_addr;\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n        proxy_set_header X-Forwarded-Proto $scheme;\n        proxy_cache_bypass $http_upgrade;\n    }\n}</code></pre>\n      </div>\n    </div>\n<h3 id=\"apache-configuration\" class=\"mobile-header\">Apache Configuration</h3>\n<div class=\"mobile-code-block\" data-language=\"apache\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">apache</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-apache\"># /etc/apache2/sites-available/grafana.conf\n&lt;VirtualHost *:443&gt;\n    ServerName grafana.example.com\n    \n    SSLEngine on\n    SSLCertificateFile /etc/letsencrypt/live/grafana.example.com/fullchain.pem\n    SSLCertificateKeyFile /etc/letsencrypt/live/grafana.example.com/privkey.pem\n    \n    ProxyPreserveHost On\n    ProxyPass / http://localhost:3000/\n    ProxyPassReverse / http://localhost:3000/\n    \n    # WebSocket support\n    RewriteEngine On\n    RewriteCond %{HTTP:Upgrade} websocket [NC]\n    RewriteCond %{HTTP:Connection} upgrade [NC]\n    RewriteRule ^/?(.*) &quot;ws://localhost:3000/$1&quot; [P,L]\n    \n    Header always set Strict-Transport-Security &quot;max-age=63072000&quot;\n&lt;/VirtualHost&gt;</code></pre>\n      </div>\n    </div>\n<h3 id=\"caddy-configuration\" class=\"mobile-header\">Caddy Configuration</h3>\n<div class=\"mobile-code-block\" data-language=\"caddyfile\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">caddyfile</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-caddyfile\">grafana.example.com {\n    reverse_proxy localhost:3000\n    \n    header {\n        Strict-Transport-Security &quot;max-age=63072000&quot;\n        X-Frame-Options &quot;SAMEORIGIN&quot;\n        X-Content-Type-Options &quot;nosniff&quot;\n    }\n}</code></pre>\n      </div>\n    </div>\n<h3 id=\"haproxy-configuration\" class=\"mobile-header\">HAProxy Configuration</h3>\n<div class=\"mobile-code-block\" data-language=\"haproxy\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">haproxy</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-haproxy\">frontend grafana_frontend\n    bind *:443 ssl crt /etc/haproxy/certs/grafana.pem\n    mode http\n    option httplog\n    \n    default_backend grafana_backend\n\nbackend grafana_backend\n    mode http\n    balance roundrobin\n    option httpchk GET /api/health\n    server grafana1 127.0.0.1:3000 check\n    server grafana2 127.0.0.2:3000 check backup</code></pre>\n      </div>\n    </div>\n<h2 id=\"security-configuration\" class=\"mobile-header\">Security Configuration</h2>\n<h3 id=\"ssltls-configuration\" class=\"mobile-header\">SSL/TLS Configuration</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Generate SSL certificate for Grafana\nsudo mkdir -p /etc/grafana/ssl\n\n# Self-signed certificate (development)\nsudo openssl req -x509 -nodes -days 365 -newkey rsa:4096 \\\n  -keyout /etc/grafana/ssl/grafana.key \\\n  -out /etc/grafana/ssl/grafana.crt \\\n  -subj &quot;/C=US/ST=State/L=City/O=Organization/CN=grafana.example.com&quot;\n\n# Production: Use Let&#039;s Encrypt\nsudo certbot certonly --standalone -d grafana.example.com\nsudo cp /etc/letsencrypt/live/grafana.example.com/fullchain.pem /etc/grafana/ssl/grafana.crt\nsudo cp /etc/letsencrypt/live/grafana.example.com/privkey.pem /etc/grafana/ssl/grafana.key\n\n# Set permissions\nsudo chown grafana:grafana /etc/grafana/ssl/*\nsudo chmod 600 /etc/grafana/ssl/grafana.key\nsudo chmod 644 /etc/grafana/ssl/grafana.crt</code></pre>\n      </div>\n    </div>\n<h3 id=\"security-hardening\" class=\"mobile-header\">Security Hardening</h3>\n<div class=\"mobile-code-block\" data-language=\"ini\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">ini</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-ini\"># Security configuration in grafana.ini\n[security]\n# Strong admin password\nadmin_password = $2b$10$very_secure_bcrypt_hash\n\n# Security keys\nsecret_key = your_32_character_secret_key_here\nencryption_provider = secretKey.v1\navailable_encryption_providers = secretKey.v1\n\n# Security policies\ndisable_gravatar = true\ncookie_secure = true\ncookie_samesite = strict\nstrict_transport_security = true\nstrict_transport_security_max_age_seconds = 86400\nx_content_type_options = true\nx_xss_protection = true\ncontent_security_policy = true\n\n# Login protection\ndisable_brute_force_login_protection = false\nlogin_maximum_inactive_lifetime_duration = 7d\nlogin_maximum_lifetime_duration = 30d\n\n# Data source proxy whitelist\ndata_source_proxy_whitelist = 127.0.0.1:9090,prometheus.example.com:9090\n\n[users]\n# Disable user registration\nallow_sign_up = false\nallow_org_create = false\nauto_assign_org = true\nauto_assign_org_role = Viewer</code></pre>\n      </div>\n    </div>\n<h3 id=\"firewall-rules\" class=\"mobile-header\">Firewall Rules</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># UFW (Ubuntu/Debian)\nsudo ufw allow from 192.168.1.0/24 to any port 3000\nsudo ufw allow 443\nsudo ufw reload\n\n# firewalld (RHEL/CentOS/openSUSE)\nsudo firewall-cmd --permanent --new-zone=grafana\nsudo firewall-cmd --permanent --zone=grafana --add-source=192.168.1.0/24\nsudo firewall-cmd --permanent --zone=grafana --add-port=3000/tcp\nsudo firewall-cmd --permanent --add-service=https\nsudo firewall-cmd --reload\n\n# iptables\nsudo iptables -A INPUT -s 192.168.1.0/24 -p tcp --dport 3000 -j ACCEPT\nsudo iptables -A INPUT -p tcp --dport 443 -j ACCEPT\nsudo iptables-save &gt; /etc/iptables/rules.v4\n\n# pf (FreeBSD)\n# Add to /etc/pf.conf\npass in on $ext_if proto tcp from 192.168.1.0/24 to any port 3000\npass in on $ext_if proto tcp to any port 443\n\n# Windows Firewall\nNew-NetFirewallRule -DisplayName &quot;Grafana&quot; -Direction Inbound -Protocol TCP -LocalPort 3000 -RemoteAddress 192.168.1.0/24 -Action Allow</code></pre>\n      </div>\n    </div>\n<h2 id=\"database-setup\" class=\"mobile-header\">Database Setup</h2>\n<h3 id=\"mysqlmariadb-setup\" class=\"mobile-header\">MySQL/MariaDB Setup</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Create Grafana database\nmysql -u root -p &lt;&lt;EOF\nCREATE DATABASE grafana CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;\nCREATE USER &#039;grafana&#039;@&#039;%&#039; IDENTIFIED BY &#039;secure_grafana_password&#039;;\nGRANT ALL PRIVILEGES ON grafana.* TO &#039;grafana&#039;@&#039;%&#039;;\nFLUSH PRIVILEGES;\nEOF\n\n# Optimize MySQL for Grafana\nsudo tee /etc/mysql/conf.d/grafana.cnf &lt;&lt;EOF\n[mysqld]\n# Grafana optimizations\ninnodb_buffer_pool_size = 1G\ninnodb_log_file_size = 256M\ninnodb_log_buffer_size = 8M\ninnodb_file_per_table = 1\ninnodb_open_files = 400\nmax_connections = 200\nthread_cache_size = 50\nquery_cache_type = 1\nquery_cache_size = 16M\nEOF\n\nsudo systemctl restart mysql</code></pre>\n      </div>\n    </div>\n<h3 id=\"postgresql-setup\" class=\"mobile-header\">PostgreSQL Setup</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Create Grafana database\nsudo -u postgres createdb grafana\nsudo -u postgres createuser grafana\n\nsudo -u postgres psql &lt;&lt;EOF\nALTER USER grafana WITH PASSWORD &#039;secure_grafana_password&#039;;\nGRANT ALL PRIVILEGES ON DATABASE grafana TO grafana;\n\\q\nEOF\n\n# Optimize PostgreSQL for Grafana\nsudo tee -a /etc/postgresql/13/main/postgresql.conf &lt;&lt;EOF\n# Grafana optimizations\nshared_buffers = 256MB\neffective_cache_size = 1GB\nmaintenance_work_mem = 64MB\ncheckpoint_completion_target = 0.9\nwal_buffers = 16MB\ndefault_statistics_target = 100\nrandom_page_cost = 1.1\neffective_io_concurrency = 200\nwork_mem = 4MB\nmin_wal_size = 1GB\nmax_wal_size = 4GB\nEOF\n\nsudo systemctl restart postgresql</code></pre>\n      </div>\n    </div>\n<h2 id=\"performance-optimization\" class=\"mobile-header\">Performance Optimization</h2>\n<h3 id=\"system-tuning\" class=\"mobile-header\">System Tuning</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Increase file descriptor limits\nsudo tee -a /etc/security/limits.conf &lt;&lt;EOF\ngrafana soft nofile 65535\ngrafana hard nofile 65535\nEOF\n\n# Kernel parameters for better performance\nsudo tee -a /etc/sysctl.conf &lt;&lt;EOF\n# Grafana optimizations\nvm.max_map_count = 262144\nfs.file-max = 65535\nnet.core.somaxconn = 32768\nnet.ipv4.tcp_max_syn_backlog = 8192\nEOF\n\nsudo sysctl -p</code></pre>\n      </div>\n    </div>\n<h3 id=\"grafana-performance-tuning\" class=\"mobile-header\">Grafana Performance Tuning</h3>\n<div class=\"mobile-code-block\" data-language=\"ini\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">ini</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-ini\"># Performance settings in grafana.ini\n[server]\n# Increase read timeout\nread_timeout = 0\n\n[database]\n# Database connection pool optimization\nmax_idle_conn = 2\nmax_open_conn = 0\nconn_max_lifetime = 14400\n\n[dataproxy]\n# Data source proxy timeouts\ntimeout = 30\ndial_timeout = 10\nkeep_alive_seconds = 30\n\n[rendering]\n# Server-side rendering settings\nserver_url = http://localhost:8081/render\ncallback_url = http://localhost:3000/\nconcurrent_render_request_limit = 30\n\n[alerting]\n# Alerting performance\nconcurrent_render_limit = 5</code></pre>\n      </div>\n    </div>\n<h3 id=\"caching-configuration\" class=\"mobile-header\">Caching Configuration</h3>\n<div class=\"mobile-code-block\" data-language=\"ini\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">ini</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-ini\"># Remote cache configuration\n[remote_cache]\ntype = redis\nconnstr = addr=redis.example.com:6379,pool_size=100,db=0,ssl=false\n\n# Or use memcached\n[remote_cache]\ntype = memcached\nconnstr = memcached.example.com:11211</code></pre>\n      </div>\n    </div>\n<h2 id=\"monitoring\" class=\"mobile-header\">Monitoring</h2>\n<h3 id=\"built-in-metrics\" class=\"mobile-header\">Built-in Metrics</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Grafana exposes metrics on /metrics endpoint\ncurl http://localhost:3000/metrics\n\n# Key metrics to monitor:\n# grafana_database_conn_*: Database connections\n# grafana_http_request_*: HTTP request metrics  \n# grafana_page_response_*: Page response times\n# grafana_proxy_*: Data source proxy metrics\n# go_memstats_*: Go runtime memory statistics</code></pre>\n      </div>\n    </div>\n<h3 id=\"health-check-endpoint\" class=\"mobile-header\">Health Check Endpoint</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Health check endpoint\ncurl http://localhost:3000/api/health\n\n# Response format:\n# {\n#   &quot;commit&quot;: &quot;abc123&quot;,\n#   &quot;database&quot;: &quot;ok&quot;,\n#   &quot;version&quot;: &quot;9.3.0&quot;\n# }</code></pre>\n      </div>\n    </div>\n<h3 id=\"alerting-configuration\" class=\"mobile-header\">Alerting Configuration</h3>\n<div class=\"mobile-code-block\" data-language=\"yaml\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">yaml</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-yaml\"># /etc/grafana/provisioning/alerting/rules.yml\napiVersion: 1\n\ngroups:\n  - name: grafana-health\n    folder: Infrastructure\n    interval: 1m\n    rules:\n      - uid: grafana_high_memory\n        title: Grafana High Memory Usage\n        condition: A\n        data:\n          - refId: A\n            queryType: &#039;&#039;\n            relativeTimeRange:\n              from: 300\n              to: 0\n            datasourceUid: prometheus\n            model:\n              expr: go_memstats_alloc_bytes{job=&quot;grafana&quot;} &gt; 500000000\n              refId: A\n        noDataState: NoData\n        execErrState: Alerting\n        for: 5m\n        annotations:\n          description: &quot;Grafana memory usage is above 500MB&quot;\n          summary: &quot;High memory usage on Grafana instance&quot;</code></pre>\n      </div>\n    </div>\n<h3 id=\"log-analysis\" class=\"mobile-header\">Log Analysis</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Monitor Grafana logs\nsudo tail -f /var/log/grafana/grafana.log\n\n# Log rotation configuration\nsudo tee /etc/logrotate.d/grafana &lt;&lt;EOF\n/var/log/grafana/*.log {\n    daily\n    rotate 7\n    compress\n    delaycompress\n    missingok\n    notifempty\n    create 640 grafana grafana\n    postrotate\n        systemctl reload grafana-server &gt; /dev/null 2&gt;&amp;1 || true\n    endscript\n}\nEOF</code></pre>\n      </div>\n    </div>\n<h2 id=\"backup-and-restore\" class=\"mobile-header\">Backup and Restore</h2>\n<h3 id=\"backup-procedures\" class=\"mobile-header\">Backup Procedures</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\">#!/bin/bash\n# backup-grafana.sh\n\nBACKUP_DIR=&quot;/backup/grafana/$(date +%Y%m%d_%H%M%S)&quot;\nmkdir -p &quot;$BACKUP_DIR&quot;\n\n# Stop Grafana for consistent backup\nsudo systemctl stop grafana-server\n\n# Backup SQLite database (if using SQLite)\nif [ -f /var/lib/grafana/grafana.db ]; then\n    cp /var/lib/grafana/grafana.db &quot;$BACKUP_DIR/grafana.db&quot;\nfi\n\n# Backup MySQL database (if using MySQL)\nif grep -q &quot;type = mysql&quot; /etc/grafana/grafana.ini; then\n    mysqldump -u grafana -p grafana &gt; &quot;$BACKUP_DIR/grafana-mysql.sql&quot;\nfi\n\n# Backup PostgreSQL database (if using PostgreSQL)\nif grep -q &quot;type = postgres&quot; /etc/grafana/grafana.ini; then\n    pg_dump -U grafana grafana &gt; &quot;$BACKUP_DIR/grafana-postgres.sql&quot;\nfi\n\n# Backup configuration\ntar czf &quot;$BACKUP_DIR/grafana-config.tar.gz&quot; /etc/grafana/\n\n# Backup plugins\ntar czf &quot;$BACKUP_DIR/grafana-plugins.tar.gz&quot; /var/lib/grafana/plugins/\n\n# Backup dashboards via API\nmkdir -p &quot;$BACKUP_DIR/dashboards&quot;\ncurl -s &quot;http://admin:password@localhost:3000/api/search?type=dash-db&quot; | \\\n    jq -r &#039;.[] | .uid&#039; | while read uid; do\n        curl -s &quot;http://admin:password@localhost:3000/api/dashboards/uid/$uid&quot; &gt; \\\n            &quot;$BACKUP_DIR/dashboards/$uid.json&quot;\n    done\n\n# Start Grafana\nsudo systemctl start grafana-server\n\necho &quot;Backup completed: $BACKUP_DIR&quot;</code></pre>\n      </div>\n    </div>\n<h3 id=\"restore-procedures\" class=\"mobile-header\">Restore Procedures</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\">#!/bin/bash\n# restore-grafana.sh\n\nBACKUP_DIR=&quot;$1&quot;\nif [ -z &quot;$BACKUP_DIR&quot; ]; then\n    echo &quot;Usage: $0 &lt;backup-directory&gt;&quot;\n    exit 1\nfi\n\n# Stop Grafana\nsudo systemctl stop grafana-server\n\n# Restore database\nif [ -f &quot;$BACKUP_DIR/grafana.db&quot; ]; then\n    cp &quot;$BACKUP_DIR/grafana.db&quot; /var/lib/grafana/grafana.db\n    chown grafana:grafana /var/lib/grafana/grafana.db\nfi\n\n# Restore MySQL database\nif [ -f &quot;$BACKUP_DIR/grafana-mysql.sql&quot; ]; then\n    mysql -u grafana -p grafana &lt; &quot;$BACKUP_DIR/grafana-mysql.sql&quot;\nfi\n\n# Restore PostgreSQL database\nif [ -f &quot;$BACKUP_DIR/grafana-postgres.sql&quot; ]; then\n    dropdb grafana &amp;&amp; createdb grafana\n    psql -U grafana grafana &lt; &quot;$BACKUP_DIR/grafana-postgres.sql&quot;\nfi\n\n# Restore configuration\ntar xzf &quot;$BACKUP_DIR/grafana-config.tar.gz&quot; -C /\n\n# Restore plugins\ntar xzf &quot;$BACKUP_DIR/grafana-plugins.tar.gz&quot; -C /\n\n# Fix ownership\nsudo chown -R grafana:grafana /var/lib/grafana /etc/grafana\n\n# Start Grafana\nsudo systemctl start grafana-server\n\necho &quot;Restore completed from: $BACKUP_DIR&quot;</code></pre>\n      </div>\n    </div>\n<h3 id=\"automated-backup\" class=\"mobile-header\">Automated Backup</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Create cron job for daily backups\necho &quot;0 2 * * * /usr/local/bin/backup-grafana.sh&quot; | sudo crontab -\n\n# Backup retention script\nfind /backup/grafana -type d -mtime +30 -exec rm -rf {} \\; 2&gt;/dev/null</code></pre>\n      </div>\n    </div>\n<h2 id=\"troubleshooting\" class=\"mobile-header\">Troubleshooting</h2>\n<h3 id=\"common-issues\" class=\"mobile-header\">Common Issues</h3>\n<p class=\"mobile-paragraph\">1. <strong>Cannot connect to Grafana web interface</strong>:</p>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Check service status\nsudo systemctl status grafana-server\n\n# Check logs\nsudo journalctl -u grafana-server -f\n\n# Check port binding\nsudo ss -tlnp | grep :3000\n\n# Test local connection\ncurl -I http://localhost:3000</code></pre>\n      </div>\n    </div>\n<p class=\"mobile-paragraph\">2. <strong>Database connection issues</strong>:</p>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Test database connectivity\n# MySQL\nmysql -h localhost -u grafana -p grafana -e &quot;SELECT 1;&quot;\n\n# PostgreSQL\npsql -h localhost -U grafana -d grafana -c &quot;SELECT 1;&quot;\n\n# Check database logs\nsudo tail -f /var/log/mysql/error.log\nsudo tail -f /var/log/postgresql/postgresql-*.log</code></pre>\n      </div>\n    </div>\n<p class=\"mobile-paragraph\">3. <strong>Plugin installation failures</strong>:</p>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Check plugin directory permissions\nls -la /var/lib/grafana/plugins/\n\n# Install plugin manually\nsudo grafana-cli --pluginUrl https://example.com/plugin.zip plugins install custom-plugin\n\n# Check plugin logs\nsudo journalctl -u grafana-server | grep -i plugin</code></pre>\n      </div>\n    </div>\n<p class=\"mobile-paragraph\">4. <strong>High memory usage</strong>:</p>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Check Grafana memory usage\nps aux | grep grafana-server\n\n# Monitor memory growth\ntop -p $(pgrep grafana-server)\n\n# Check for memory leaks in logs\nsudo grep -i &quot;out of memory&quot; /var/log/grafana/grafana.log\n\n# Restart if needed\nsudo systemctl restart grafana-server</code></pre>\n      </div>\n    </div>\n<h3 id=\"debug-mode\" class=\"mobile-header\">Debug Mode</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Enable debug logging\nsudo systemctl edit grafana-server\n# Add:\n[Service]\nEnvironment=&quot;GF_LOG_LEVEL=debug&quot;\n\nsudo systemctl daemon-reload\nsudo systemctl restart grafana-server\n\n# View debug logs\nsudo journalctl -u grafana-server -f</code></pre>\n      </div>\n    </div>\n<h3 id=\"performance-troubleshooting\" class=\"mobile-header\">Performance Troubleshooting</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Check dashboard performance\ncurl -w &quot;@curl-format.txt&quot; -s -o /dev/null http://localhost:3000/d/dashboard-uid\n\n# Monitor database queries (if MySQL)\nmysql -e &quot;SHOW PROCESSLIST;&quot; | grep grafana\n\n# Check data source response times\ncurl -w &quot;Time: %{time_total}s\\n&quot; http://prometheus:9090/api/v1/query?query=up</code></pre>\n      </div>\n    </div>\n<h2 id=\"maintenance\" class=\"mobile-header\">Maintenance</h2>\n<h3 id=\"update-procedures\" class=\"mobile-header\">Update Procedures</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># RHEL/CentOS/Rocky/AlmaLinux\nsudo yum check-update grafana\nsudo yum update grafana\n\n# Debian/Ubuntu\nsudo apt update\nsudo apt upgrade grafana\n\n# Arch Linux\nsudo pacman -Syu grafana\n\n# Alpine Linux\napk update\napk upgrade grafana\n\n# openSUSE\nsudo zypper update grafana\n\n# FreeBSD\npkg update\npkg upgrade grafana8\n\n# macOS\nbrew upgrade grafana\n\n# Always restart after updates\nsudo systemctl restart grafana-server</code></pre>\n      </div>\n    </div>\n<h3 id=\"plugin-management\" class=\"mobile-header\">Plugin Management</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># List installed plugins\ngrafana-cli plugins ls\n\n# Update all plugins\nsudo grafana-cli plugins update-all\n\n# Install specific plugin\nsudo grafana-cli plugins install grafana-clock-panel\n\n# Remove plugin\nsudo grafana-cli plugins remove grafana-clock-panel\n\n# Install from URL\nsudo grafana-cli --pluginUrl https://example.com/plugin.zip plugins install custom-plugin</code></pre>\n      </div>\n    </div>\n<h3 id=\"health-checks\" class=\"mobile-header\">Health Checks</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\">#!/bin/bash\n# grafana-health-check.sh\n\n# Check service status\nif ! systemctl is-active grafana-server &gt;/dev/null 2&gt;&amp;1; then\n    echo &quot;CRITICAL: Grafana service is not running&quot;\n    exit 2\nfi\n\n# Check web interface\nif ! curl -f -s http://localhost:3000/api/health &gt;/dev/null; then\n    echo &quot;CRITICAL: Grafana web interface is not responding&quot;\n    exit 2\nfi\n\n# Check database connectivity\nif ! curl -s http://localhost:3000/api/health | grep -q &#039;&quot;database&quot;:&quot;ok&quot;&#039;; then\n    echo &quot;WARNING: Database connectivity issues&quot;\n    exit 1\nfi\n\n# Check disk space\nDISK_USAGE=$(df /var/lib/grafana | awk &#039;NR==2 {print $5}&#039; | sed &#039;s/%//&#039;)\nif [ &quot;$DISK_USAGE&quot; -gt 85 ]; then\n    echo &quot;WARNING: Disk usage is ${DISK_USAGE}%&quot;\n    exit 1\nfi\n\necho &quot;OK: Grafana is healthy&quot;\nexit 0</code></pre>\n      </div>\n    </div>\n<h3 id=\"cleanup-tasks\" class=\"mobile-header\">Cleanup Tasks</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Clean old dashboard versions\nmysql -u grafana -p grafana -e &quot;DELETE FROM dashboard_version WHERE created &lt; DATE_SUB(NOW(), INTERVAL 90 DAY);&quot;\n\n# Clean old annotations\nmysql -u grafana -p grafana -e &quot;DELETE FROM annotation WHERE created &lt; DATE_SUB(NOW(), INTERVAL 30 DAY);&quot;\n\n# Clean old sessions\nmysql -u grafana -p grafana -e &quot;DELETE FROM session WHERE expiry &lt; NOW();&quot;\n\n# Clean old alert notifications\nmysql -u grafana -p grafana -e &quot;DELETE FROM alert_notification WHERE created &lt; DATE_SUB(NOW(), INTERVAL 30 DAY);&quot;\n\n# Optimize database tables\nmysql -u grafana -p grafana -e &quot;OPTIMIZE TABLE dashboard, dashboard_version, annotation, session;&quot;</code></pre>\n      </div>\n    </div>\n<h2 id=\"integration-examples\" class=\"mobile-header\">Integration Examples</h2>\n<h3 id=\"prometheus-data-source\" class=\"mobile-header\">Prometheus Data Source</h3>\n<div class=\"mobile-code-block\" data-language=\"yaml\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">yaml</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-yaml\"># /etc/grafana/provisioning/datasources/prometheus.yml\napiVersion: 1\n\ndatasources:\n  - name: Prometheus\n    type: prometheus\n    access: proxy\n    url: http://prometheus:9090\n    isDefault: true\n    editable: false\n    jsonData:\n      httpMethod: POST\n      queryTimeout: 60s\n      timeInterval: 15s</code></pre>\n      </div>\n    </div>\n<h3 id=\"dashboard-provisioning\" class=\"mobile-header\">Dashboard Provisioning</h3>\n<div class=\"mobile-code-block\" data-language=\"yaml\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">yaml</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-yaml\"># /etc/grafana/provisioning/dashboards/default.yml\napiVersion: 1\n\nproviders:\n  - name: &#039;default&#039;\n    orgId: 1\n    folder: &#039;&#039;\n    type: file\n    disableDeletion: false\n    editable: true\n    options:\n      path: /var/lib/grafana/dashboards</code></pre>\n      </div>\n    </div>\n<h3 id=\"alert-manager-integration\" class=\"mobile-header\">Alert Manager Integration</h3>\n<div class=\"mobile-code-block\" data-language=\"yaml\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">yaml</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-yaml\"># /etc/grafana/provisioning/alerting/contactpoints.yml\napiVersion: 1\n\ncontactPoints:\n  - name: email-alerts\n    orgId: 1\n    receivers:\n      - uid: email_uid\n        type: email\n        settings:\n          addresses: &quot;admin@example.com&quot;\n          subject: &quot;Grafana Alert&quot;</code></pre>\n      </div>\n    </div>\n<h3 id=\"ldap-configuration\" class=\"mobile-header\">LDAP Configuration</h3>\n<div class=\"mobile-code-block\" data-language=\"toml\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">toml</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-toml\"># /etc/grafana/ldap.toml\n[[servers]]\nhost = &quot;ldap.example.com&quot;\nport = 636\nuse_ssl = true\nstart_tls = false\nssl_skip_verify = false\n\nsearch_filter = &quot;(sAMAccountName=%s)&quot;\nsearch_base_dns = [&quot;ou=Users,dc=example,dc=com&quot;]\n\nbind_dn = &quot;cn=grafana,ou=Service Accounts,dc=example,dc=com&quot;\nbind_password = &#039;ldap_service_password&#039;\n\n[servers.attributes]\nusername = &quot;sAMAccountName&quot;\nname = &quot;givenName&quot;\nsurname = &quot;sn&quot;\nemail = &quot;mail&quot;\nmember_of = &quot;memberOf&quot;\n\n[[servers.group_mappings]]\ngroup_dn = &quot;cn=Grafana Admins,ou=Groups,dc=example,dc=com&quot;\norg_role = &quot;Admin&quot;\ngrafana_admin = true</code></pre>\n      </div>\n    </div>\n<h2 id=\"additional-resources\" class=\"mobile-header\">Additional Resources</h2>\n<li class=\"mobile-list-item\"><a href=\"https://grafana.com/docs/grafana/latest/\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">Official Documentation</a></li>\n<li class=\"mobile-list-item\"><a href=\"https://github.com/grafana/grafana\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">GitHub Repository</a></li>\n<li class=\"mobile-list-item\"><a href=\"https://grafana.com/grafana/plugins/\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">Plugin Directory</a></li>\n<li class=\"mobile-list-item\"><a href=\"https://grafana.com/grafana/dashboards/\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">Dashboard Gallery</a></li>\n<li class=\"mobile-list-item\"><a href=\"https://community.grafana.com/\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">Community Forum</a></li>\n<li class=\"mobile-list-item\"><a href=\"https://grafana.com/tutorials/\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">Grafana Academy</a></li>\n<li class=\"mobile-list-item\"><a href=\"https://grafana.com/docs/grafana/latest/best-practices/\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">Best Practices Guide</a></li>\n<li class=\"mobile-list-item\"><a href=\"https://grafana.com/docs/grafana/latest/administration/security/\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">Security Documentation</a></li>\n<p class=\"mobile-paragraph\">---</p>\n<p class=\"mobile-paragraph\"><strong>Note:</strong> This guide is part of the <a href=\"https://howtomgr.github.io\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">HowToMgr</a> collection. Always refer to official documentation for the most up-to-date information.</p>","readTime":"18 min","wordCount":3423,"lastBuilt":"2025-09-14T18:12:05.459Z"},{"name":"haproxy","displayName":"Haproxy","slug":"haproxy","description":"Repo for haproxy","category":"web-server","language":null,"stars":0,"forks":0,"topics":[],"githubUrl":"https://github.com/howtomgr/haproxy","updatedAt":"2025-09-14T01:30:06Z","createdAt":"2025-09-08T03:08:23Z","readmeRaw":"# HAProxy Installation Guide\n\nHigh-performance TCP/HTTP load balancer and reverse proxy for distributing traffic across multiple backend servers. Industry standard for load balancing with enterprise-grade security and reliability.\n\n## Prerequisites\n\n- Linux system (any modern distribution)\n- Root or sudo access\n- 2GB RAM minimum, 4GB+ recommended for high-traffic environments\n- Multiple backend servers to load balance (optional for testing)\n- SSL certificates for production HTTPS termination\n\n## Installation\n\n### Using Package Manager (Recommended)\n\n#### Ubuntu/Debian\n```bash\n# Update package list\nsudo apt-get update\n\n# Install HAProxy and utilities\nsudo apt-get install -y haproxy haproxy-doc software-properties-common\n\n# For latest version from PPA\nsudo add-apt-repository ppa:vbernat/haproxy-2.8\nsudo apt-get update\nsudo apt-get install -y haproxy=2.8.*\n\n# Enable and start HAProxy\nsudo systemctl enable --now haproxy\n\n# Check status\nsudo systemctl status haproxy\n```\n\n#### RHEL/CentOS/Rocky Linux/AlmaLinux\n```bash\n# Install EPEL repository\nsudo yum install -y epel-release\n\n# Install HAProxy\nsudo yum install -y haproxy\n\n# For newer versions\nsudo dnf install -y haproxy\n\n# Enable and start HAProxy\nsudo systemctl enable --now haproxy\n\n# Check status\nsudo systemctl status haproxy\n```\n\n#### Fedora\n```bash\n# Install HAProxy\nsudo dnf install -y haproxy\n\n# Enable and start HAProxy\nsudo systemctl enable --now haproxy\n\n# Configure firewall\nsudo firewall-cmd --permanent --add-service=http\nsudo firewall-cmd --permanent --add-service=https\nsudo firewall-cmd --permanent --add-port=8404/tcp  # Stats interface\nsudo firewall-cmd --reload\n```\n\n#### Arch Linux\n```bash\n# Install HAProxy\nsudo pacman -Syu haproxy\n\n# Enable and start HAProxy\nsudo systemctl enable --now haproxy\n\n# Check status\nsudo systemctl status haproxy\n```\n\n#### Alpine Linux\n```bash\n# Install HAProxy\nsudo apk update\nsudo apk add haproxy\n\n# Enable and start HAProxy\nsudo rc-update add haproxy default\nsudo service haproxy start\n```\n\n### From Source (Latest Features)\n```bash\n# Install build dependencies\n# Ubuntu/Debian\nsudo apt-get install -y build-essential libssl-dev libpcre3-dev zlib1g-dev liblua5.3-dev libsystemd-dev\n\n# RHEL/CentOS\nsudo yum groupinstall -y \"Development Tools\"\nsudo yum install -y openssl-devel pcre-devel zlib-devel lua-devel systemd-devel\n\n# Download latest HAProxy LTS\nHAPROXY_VERSION=\"3.0.5\"\ncd /tmp\nwget \"https://www.haproxy.org/download/3.0/src/haproxy-${HAPROXY_VERSION}.tar.gz\"\ntar xzf haproxy-${HAPROXY_VERSION}.tar.gz\ncd haproxy-${HAPROXY_VERSION}\n\n# Compile with full features\nmake clean\nmake -j$(nproc) TARGET=linux-glibc \\\n    USE_OPENSSL=1 \\\n    USE_ZLIB=1 \\\n    USE_PCRE=1 \\\n    USE_SYSTEMD=1 \\\n    USE_LUA=1 \\\n    USE_PROMEX=1 \\\n    USE_THREAD=1 \\\n    USE_CPU_AFFINITY=1 \\\n    USE_TFO=1 \\\n    USE_NS=1 \\\n    USE_DL=1 \\\n    USE_RT=1\n\n# Install HAProxy\nsudo make install\nsudo mkdir -p /etc/haproxy /var/lib/haproxy /var/log/haproxy\nsudo useradd --system --home /var/lib/haproxy --shell /bin/false haproxy\nsudo chown -R haproxy:haproxy /var/lib/haproxy /var/log/haproxy\n\n# Create systemd service\nsudo tee /etc/systemd/system/haproxy.service > /dev/null <<EOF\n[Unit]\nDescription=HAProxy Load Balancer\nDocumentation=man:haproxy(1)\nDocumentation=file:/usr/share/doc/haproxy/configuration.txt\nAfter=network.target\n\n[Service]\nType=notify\nExecStart=/usr/local/sbin/haproxy -f /etc/haproxy/haproxy.cfg -p /run/haproxy.pid -S /run/haproxy-master.sock\nExecReload=/bin/kill -USR2 \\$MAINPID\nExecStop=/bin/kill -USR1 \\$MAINPID\nKillMode=mixed\nRestart=on-failure\nSuccessExitStatus=143\nKillSignal=SIGTERM\n\n# Security settings\nNoNewPrivileges=true\nPrivateTmp=true\nProtectHome=true\nProtectSystem=strict\nReadWritePaths=/var/lib/haproxy\nReadWritePaths=/var/log/haproxy\nReadWritePaths=/run\n\n[Install]\nWantedBy=multi-user.target\nEOF\n\nsudo systemctl daemon-reload\nsudo systemctl enable --now haproxy\n```\n\n### Using Docker\n```bash\n# Create HAProxy configuration directory\nmkdir -p ~/haproxy/{config,ssl,logs}\n\n# Create basic configuration\ncat > ~/haproxy/config/haproxy.cfg <<EOF\nglobal\n    log stdout local0\n    chroot /var/lib/haproxy\n    stats socket /run/haproxy/admin.sock mode 660 level admin expose-fd listeners\n    stats timeout 30s\n    user haproxy\n    group haproxy\n    daemon\n    \n    # SSL configuration\n    ssl-default-bind-ciphers ECDHE+AESGCM:ECDHE+CHACHA20:DHE+AESGCM:DHE+CHACHA20:!aNULL:!MD5:!DSS\n    ssl-default-bind-options ssl-min-ver TLSv1.2 no-tls-tickets\n    ssl-default-server-ciphers ECDHE+AESGCM:ECDHE+CHACHA20:DHE+AESGCM:DHE+CHACHA20:!aNULL:!MD5:!DSS\n    ssl-default-server-options ssl-min-ver TLSv1.2 no-tls-tickets\n\ndefaults\n    mode http\n    log global\n    option httplog\n    option dontlognull\n    option log-health-checks\n    option forwardfor\n    option http-server-close\n    timeout connect 5000\n    timeout client 50000\n    timeout server 50000\n    timeout http-keep-alive 4000\n    timeout check 3000\n\n# Frontend\nfrontend web_frontend\n    bind *:80\n    bind *:443 ssl crt /usr/local/etc/haproxy/ssl/ alpn h2,http/1.1\n    \n    # Redirect HTTP to HTTPS\n    redirect scheme https code 301 if !{ ssl_fc }\n    \n    # Security headers\n    http-response set-header Strict-Transport-Security \"max-age=31536000; includeSubDomains; preload\"\n    http-response set-header X-Frame-Options \"SAMEORIGIN\"\n    http-response set-header X-Content-Type-Options \"nosniff\"\n    http-response set-header X-XSS-Protection \"1; mode=block\"\n    \n    default_backend web_servers\n\n# Backend\nbackend web_servers\n    balance roundrobin\n    option httpchk GET /health\n    http-check expect status 200\n    server web1 192.168.1.10:8080 check\n    server web2 192.168.1.11:8080 check\n    server web3 192.168.1.12:8080 check\n\n# Stats interface\nlisten stats\n    bind *:8404\n    stats enable\n    stats uri /stats\n    stats refresh 30s\n    stats admin if TRUE\nEOF\n\n# Run HAProxy container\ndocker run -d \\\n  --name haproxy \\\n  --restart unless-stopped \\\n  -p 80:80 \\\n  -p 443:443 \\\n  -p 8404:8404 \\\n  -v ~/haproxy/config:/usr/local/etc/haproxy:ro \\\n  -v ~/haproxy/ssl:/usr/local/etc/haproxy/ssl:ro \\\n  -v ~/haproxy/logs:/var/log/haproxy \\\n  haproxy:latest\n```\n\n## Production Configuration\n\n### Enterprise Production Configuration\n```bash\n# Backup original configuration\nsudo cp /etc/haproxy/haproxy.cfg /etc/haproxy/haproxy.cfg.backup\n\n# Create comprehensive production configuration\nsudo tee /etc/haproxy/haproxy.cfg > /dev/null <<EOF\n#---------------------------------------------------------------------\n# HAProxy Enterprise Production Configuration\n# Version: 3.0+ LTS\n#---------------------------------------------------------------------\n\nglobal\n    log 127.0.0.1:514 local0 info\n    chroot /var/lib/haproxy\n    stats socket /run/haproxy/admin.sock mode 660 level admin expose-fd listeners\n    stats timeout 30s\n    user haproxy\n    group haproxy\n    daemon\n\n    # SSL/TLS configuration (2024 best practices)\n    ssl-default-bind-ciphers ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-CHACHA20-POLY1305:ECDHE-RSA-CHACHA20-POLY1305:DHE-RSA-AES128-GCM-SHA256:DHE-RSA-AES256-GCM-SHA384\n    ssl-default-bind-ciphersuites TLS_AES_128_GCM_SHA256:TLS_AES_256_GCM_SHA384:TLS_CHACHA20_POLY1305_SHA256\n    ssl-default-bind-options ssl-min-ver TLSv1.2 no-tls-tickets prefer-client-ciphers\n    \n    ssl-default-server-ciphers ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384\n    ssl-default-server-ciphersuites TLS_AES_128_GCM_SHA256:TLS_AES_256_GCM_SHA384:TLS_CHACHA20_POLY1305_SHA256\n    ssl-default-server-options ssl-min-ver TLSv1.2 no-tls-tickets\n\n    # DH parameters for perfect forward secrecy\n    ssl-dh-param-file /etc/haproxy/ssl/dhparam.pem\n    \n    # Performance tuning\n    maxconn 40000\n    nbthread 4\n    cpu-map auto:1/1-4 0-3\n    \n    # Logging\n    log-tag haproxy-prod\n    \n    # Security\n    insecure-fork-wanted\n    insecure-setuid-wanted\n\ndefaults\n    mode http\n    log global\n    option httplog\n    option dontlognull\n    option log-health-checks\n    option forwardfor except 127.0.0.0/8\n    option http-server-close\n    option redispatch\n    \n    # Timeouts\n    timeout connect 10s\n    timeout client 1m\n    timeout server 1m\n    timeout http-keep-alive 10s\n    timeout check 10s\n    timeout tunnel 2h\n    \n    # Retries\n    retries 3\n    \n    # Compression\n    compression algo gzip\n    compression type text/html text/css text/javascript application/javascript application/json application/xml\n    \n    # Default error pages\n    errorfile 400 /etc/haproxy/errors/400.http\n    errorfile 403 /etc/haproxy/errors/403.http\n    errorfile 408 /etc/haproxy/errors/408.http\n    errorfile 500 /etc/haproxy/errors/500.http\n    errorfile 502 /etc/haproxy/errors/502.http\n    errorfile 503 /etc/haproxy/errors/503.http\n    errorfile 504 /etc/haproxy/errors/504.http\n\n#---------------------------------------------------------------------\n# Frontend Configuration\n#---------------------------------------------------------------------\n\nfrontend web_frontend\n    bind *:80\n    bind *:443 ssl crt /etc/haproxy/ssl/ alpn h2,http/1.1 crt-ignore-err all\n    \n    # Security headers\n    http-response set-header Strict-Transport-Security \"max-age=31536000; includeSubDomains; preload\"\n    http-response set-header X-Frame-Options \"SAMEORIGIN\"\n    http-response set-header X-Content-Type-Options \"nosniff\"\n    http-response set-header X-XSS-Protection \"1; mode=block\"\n    http-response set-header Referrer-Policy \"strict-origin-when-cross-origin\"\n    http-response set-header Content-Security-Policy \"default-src 'self'; script-src 'self' 'unsafe-inline'; style-src 'self' 'unsafe-inline'\"\n    \n    # Rate limiting\n    stick-table type ip size 100k expire 30s store http_req_rate(10s)\n    http-request track-sc0 src\n    http-request deny if { sc_http_req_rate(0) gt 20 }\n    \n    # Block bad bots and crawlers\n    acl is_bot hdr_sub(User-Agent) -i bot crawler spider scraper\n    http-request deny if is_bot\n    \n    # ACLs for routing\n    acl is_api path_beg /api/\n    acl is_admin path_beg /admin/\n    acl is_static path_beg /static/ /css/ /js/ /images/\n    acl is_websocket hdr(Upgrade) -i websocket\n    \n    # Force HTTPS\n    redirect scheme https code 301 if !{ ssl_fc }\n    \n    # Routing rules\n    use_backend api_servers if is_api\n    use_backend admin_servers if is_admin\n    use_backend static_servers if is_static\n    use_backend websocket_servers if is_websocket\n    default_backend web_servers\n\n#---------------------------------------------------------------------\n# Backend Configurations\n#---------------------------------------------------------------------\n\n# Main web servers\nbackend web_servers\n    balance leastconn\n    option httpchk GET /health HTTP/1.1\\r\\nHost:\\ example.com\n    http-check expect status 200\n    \n    # Health check configuration\n    default-server inter 2000 rise 2 fall 3 slowstart 60s maxconn 250 maxqueue 256 weight 100\n    \n    server web1 192.168.1.10:8080 check cookie web1\n    server web2 192.168.1.11:8080 check cookie web2\n    server web3 192.168.1.12:8080 check cookie web3\n    server web4 192.168.1.13:8080 check cookie web4 backup\n    \n    # Stick table for session persistence\n    stick-table type ip size 200k expire 30m\n    stick on src\n\n# API servers backend\nbackend api_servers\n    balance roundrobin\n    option httpchk GET /api/health HTTP/1.1\\r\\nHost:\\ api.example.com\n    http-check expect rstring ^OK$\n    \n    # Enable HTTP/2 to backend\n    server api1 192.168.1.20:3000 check proto h2 verify none\n    server api2 192.168.1.21:3000 check proto h2 verify none\n    server api3 192.168.1.22:3000 check proto h2 verify none\n\n# Admin backend (restricted access)\nbackend admin_servers\n    balance source\n    option httpchk GET /admin/health\n    http-check expect status 200\n    \n    # IP whitelist for admin access\n    http-request deny unless { src 192.168.1.0/24 10.0.0.0/8 }\n    \n    server admin1 192.168.1.30:9000 check\n\n# Static content servers\nbackend static_servers\n    balance roundrobin\n    option httpchk GET /health.txt\n    http-check expect string \"OK\"\n    \n    # Cache control\n    http-response set-header Cache-Control \"public, max-age=86400\"\n    \n    server static1 192.168.1.40:8080 check\n    server static2 192.168.1.41:8080 check\n\n# WebSocket servers\nbackend websocket_servers\n    balance leastconn\n    option httpchk GET /ws/health\n    http-check expect status 101\n    \n    # WebSocket specific settings\n    timeout tunnel 3600s\n    \n    server ws1 192.168.1.50:8080 check\n    server ws2 192.168.1.51:8080 check\n\n#---------------------------------------------------------------------\n# Database Load Balancing (TCP Mode)\n#---------------------------------------------------------------------\n\n# MySQL Master-Slave Load Balancing\nfrontend mysql_frontend\n    bind *:3306\n    mode tcp\n    default_backend mysql_servers\n\nbackend mysql_servers\n    mode tcp\n    balance leastconn\n    option mysql-check user haproxy_check\n    \n    # MySQL health checks\n    server mysql-master 192.168.1.60:3306 check weight 1000\n    server mysql-slave1 192.168.1.61:3306 check weight 100 backup\n    server mysql-slave2 192.168.1.62:3306 check weight 100 backup\n\n# PostgreSQL Load Balancing\nfrontend postgresql_frontend\n    bind *:5432\n    mode tcp\n    default_backend postgresql_servers\n\nbackend postgresql_servers\n    mode tcp\n    balance roundrobin\n    option pgsql-check user haproxy_check\n    \n    server postgres1 192.168.1.70:5432 check\n    server postgres2 192.168.1.71:5432 check\n\n# Redis Cluster Load Balancing\nfrontend redis_frontend\n    bind *:6379\n    mode tcp\n    default_backend redis_servers\n\nbackend redis_servers\n    mode tcp\n    balance first\n    option redis-check\n    \n    server redis1 192.168.1.80:6379 check\n    server redis2 192.168.1.81:6379 check backup\n\n#---------------------------------------------------------------------\n# Statistics and Monitoring\n#---------------------------------------------------------------------\n\nlisten stats\n    bind *:8404\n    stats enable\n    stats uri /stats\n    stats refresh 30s\n    stats admin if { src 192.168.1.0/24 }\n    stats auth admin:secure_stats_password\n    \n    # Enhanced statistics\n    stats show-legends\n    stats show-modules\n    stats realm \"HAProxy Statistics\"\n    \n    # Prometheus metrics (if compiled with USE_PROMEX)\n    http-request use-service prometheus-exporter if { path /metrics }\n\n#---------------------------------------------------------------------\n# Advanced Features\n#---------------------------------------------------------------------\n\n# Global rate limiting\nbackend rate_limit_backend\n    stick-table type ip size 100k expire 30s store gpc0,http_req_rate(10s)\n\n# DDoS protection\nfrontend ddos_protection\n    bind *:80\n    \n    # Track client IPs\n    stick-table type ip size 100k expire 30s store gpc0,http_req_rate(10s),http_err_rate(10s)\n    http-request track-sc0 src table rate_limit_backend\n    \n    # Block clients exceeding rate limits\n    http-request deny if { sc_http_req_rate(0) gt 50 }\n    http-request deny if { sc_http_err_rate(0) gt 10 }\n    \n    default_backend web_servers\n\n# Health check backend for external monitoring\nbackend health_check\n    mode http\n    http-request return status 200 content-type text/plain string \"HAProxy is healthy\"\nEOF\n\n# Test configuration\nsudo haproxy -c -f ~/haproxy/config/haproxy.cfg\n```\n\n## SSL/TLS Configuration and Security\n\n### Advanced SSL Termination\n```bash\n# Generate strong DH parameters\nsudo openssl dhparam -out /etc/haproxy/ssl/dhparam.pem 4096\n\n# Create SSL certificate bundle\nsudo mkdir -p /etc/haproxy/ssl\n\n# Self-signed certificate for testing\nsudo openssl req -x509 -nodes -days 365 -newkey rsa:4096 \\\n  -keyout /etc/haproxy/ssl/example.com.key \\\n  -out /etc/haproxy/ssl/example.com.crt \\\n  -subj \"/C=US/ST=State/L=City/O=Organization/CN=example.com\"\n\n# Combine certificate and key for HAProxy\nsudo cat /etc/haproxy/ssl/example.com.crt /etc/haproxy/ssl/example.com.key | sudo tee /etc/haproxy/ssl/example.com.pem\n\n# Production: Let's Encrypt certificates\nsudo certbot certonly --standalone -d example.com -d www.example.com\nsudo cat /etc/letsencrypt/live/example.com/fullchain.pem /etc/letsencrypt/live/example.com/privkey.pem | sudo tee /etc/haproxy/ssl/example.com.pem\n\n# Set proper permissions\nsudo chmod 600 /etc/haproxy/ssl/*.pem\nsudo chown haproxy:haproxy /etc/haproxy/ssl/*.pem\n\n# Create certificate renewal script\nsudo tee /usr/local/bin/haproxy-ssl-renewal.sh > /dev/null <<'EOF'\n#!/bin/bash\nCERT_PATH=\"/etc/letsencrypt/live\"\nHAPROXY_CERT_DIR=\"/etc/haproxy/ssl\"\n\n# Renew certificates\ncertbot renew --quiet --pre-hook \"systemctl stop haproxy\" --post-hook \"systemctl start haproxy\"\n\n# Update HAProxy certificate bundles\nfor domain in $(ls ${CERT_PATH}/); do\n    if [ -f \"${CERT_PATH}/${domain}/fullchain.pem\" ]; then\n        cat \"${CERT_PATH}/${domain}/fullchain.pem\" \"${CERT_PATH}/${domain}/privkey.pem\" > \"${HAPROXY_CERT_DIR}/${domain}.pem\"\n        chmod 600 \"${HAPROXY_CERT_DIR}/${domain}.pem\"\n        chown haproxy:haproxy \"${HAPROXY_CERT_DIR}/${domain}.pem\"\n    fi\ndone\n\n# Reload HAProxy configuration\nsystemctl reload haproxy\n\necho \"SSL certificates updated for HAProxy\"\nEOF\n\nsudo chmod +x /usr/local/bin/haproxy-ssl-renewal.sh\n\n# Schedule certificate renewal\necho \"0 3 * * 1 root /usr/local/bin/haproxy-ssl-renewal.sh\" | sudo tee -a /etc/crontab\n```\n\n### Security Hardening Configuration\n```bash\n# Create security-focused configuration additions\nsudo tee /etc/haproxy/conf.d/security.cfg > /dev/null <<EOF\n#---------------------------------------------------------------------\n# Security Configuration\n#---------------------------------------------------------------------\n\nglobal\n    # Security settings\n    tune.ssl.default-dh-param 2048\n    tune.ssl.capture-buffer-size 0\n    tune.ssl.maxrecord 1460\n    \n    # Disable SSLv3 and weak ciphers\n    ssl-default-bind-options no-sslv3 no-tlsv10 no-tlsv11\n\ndefaults\n    # Hide server information\n    option hide-version\n    \n    # Security headers for all responses\n    http-response del-header Server\n    http-response del-header X-Powered-By\n    \n    # Request size limits\n    http-request deny if { req.body_size gt 10000000 }  # 10MB limit\n    \n    # Block suspicious request methods\n    acl blocked_methods method TRACE CONNECT\n    http-request deny if blocked_methods\n    \n    # Block requests with suspicious headers\n    acl suspicious_headers hdr_cnt(host) gt 1\n    acl suspicious_headers hdr_cnt(content-length) gt 1\n    http-request deny if suspicious_headers\n\n# Rate limiting configuration\nbackend rate_limit_abuse\n    stick-table type ip size 100k expire 30s store gpc0,gpc1,http_req_rate(10s),http_err_rate(10s),conn_rate(10s)\n\nfrontend rate_limiting\n    # Track requests per IP\n    http-request track-sc0 src table rate_limit_abuse\n    \n    # Deny clients that exceed rate limits\n    http-request deny if { sc_http_req_rate(0) gt 100 }\n    http-request deny if { sc_conn_rate(0) gt 20 }\n    http-request deny if { sc_http_err_rate(0) gt 10 }\n    \n    # Slow down abusive clients\n    http-request set-var(req.delay) int(1000) if { sc_http_req_rate(0) gt 50 }\n    http-request lua.delay_request if { var(req.delay) -m found }\n\n# WAF-like filtering\nfrontend security_frontend\n    # Block common attacks\n    acl is_sql_injection path_reg -i .*(union|select|insert|delete|update|drop|create|alter|exec|script|javascript|vbscript|onload|onerror|onclick).*\n    acl is_xss path_reg -i .*(script|iframe|object|embed|form|img|svg|math|details|svg).*\n    acl is_path_traversal path_reg -i .*(\\.\\./|\\.\\.\\\\|%2e%2e%2f|%2e%2e\\\\).*\n    \n    http-request deny if is_sql_injection\n    http-request deny if is_xss\n    http-request deny if is_path_traversal\n    \n    # GeoIP blocking (requires GeoIP data)\n    # http-request deny if { src,map_ip(/etc/haproxy/geoip/country.map) -i CN RU }\n\nEOF\n\n# Include security configuration\necho \"include /etc/haproxy/conf.d/*.cfg\" | sudo tee -a /etc/haproxy/haproxy.cfg\n```\n\n## Advanced Load Balancing Strategies\n\n### Multi-Tier Application Load Balancing\n```bash\nsudo tee /etc/haproxy/haproxy.cfg > /dev/null <<EOF\nglobal\n    log stdout local0\n    stats socket /run/haproxy/admin.sock mode 660 level admin\n    user haproxy\n    group haproxy\n    daemon\n\ndefaults\n    mode http\n    log global\n    option httplog\n    option dontlognull\n    timeout connect 5s\n    timeout client 50s\n    timeout server 50s\n\n#---------------------------------------------------------------------\n# Application Frontend with Advanced Routing\n#---------------------------------------------------------------------\n\nfrontend app_frontend\n    bind *:443 ssl crt /etc/haproxy/ssl/ alpn h2,http/1.1\n    \n    # ACLs for microservices routing\n    acl is_user_service path_beg /api/users/\n    acl is_order_service path_beg /api/orders/\n    acl is_payment_service path_beg /api/payments/\n    acl is_notification_service path_beg /api/notifications/\n    acl is_admin_panel path_beg /admin/\n    acl is_monitoring path_beg /monitoring/\n    \n    # Geographic routing\n    acl is_us_traffic src 192.168.1.0/24\n    acl is_eu_traffic src 192.168.2.0/24\n    acl is_asia_traffic src 192.168.3.0/24\n    \n    # Device detection\n    acl is_mobile hdr_reg(User-Agent) -i (mobile|android|iphone|ipad)\n    acl is_desktop hdr_reg(User-Agent) -i (windows|macos|linux)\n    \n    # Routing decisions\n    use_backend user_service_us if is_user_service is_us_traffic\n    use_backend user_service_eu if is_user_service is_eu_traffic\n    use_backend order_service if is_order_service\n    use_backend payment_service if is_payment_service\n    use_backend notification_service if is_notification_service\n    use_backend admin_panel if is_admin_panel\n    use_backend monitoring_backend if is_monitoring\n    use_backend mobile_servers if is_mobile\n    default_backend web_servers\n\n# User Service Backends (Geographic)\nbackend user_service_us\n    balance roundrobin\n    option httpchk GET /api/users/health\n    http-check expect status 200\n    server user-us-1 192.168.1.100:3001 check\n    server user-us-2 192.168.1.101:3001 check\n    server user-us-3 192.168.1.102:3001 check\n\nbackend user_service_eu\n    balance roundrobin\n    option httpchk GET /api/users/health\n    server user-eu-1 192.168.2.100:3001 check\n    server user-eu-2 192.168.2.101:3001 check\n\n# Microservices Backends\nbackend order_service\n    balance leastconn\n    option httpchk GET /api/orders/health\n    server order-1 192.168.1.110:3002 check\n    server order-2 192.168.1.111:3002 check\n    server order-3 192.168.1.112:3002 check\n\nbackend payment_service\n    balance roundrobin\n    option httpchk GET /api/payments/health\n    # Enhanced security for payment service\n    http-request set-header X-Forwarded-Proto https\n    http-request add-header X-Client-IP %[src]\n    server payment-1 192.168.1.120:3003 check ssl verify none\n    server payment-2 192.168.1.121:3003 check ssl verify none\n\nbackend notification_service\n    balance roundrobin\n    option httpchk GET /api/notifications/health\n    server notification-1 192.168.1.130:3004 check\n    server notification-2 192.168.1.131:3004 check\n\n# Admin Panel Backend (Restricted)\nbackend admin_panel\n    balance source\n    option httpchk GET /admin/health\n    http-check expect status 200\n    \n    # Additional security\n    http-request add-header X-Admin-Access \"true\"\n    timeout server 2m\n    \n    server admin-1 192.168.1.140:9000 check\n\n# Mobile-Optimized Backend\nbackend mobile_servers\n    balance roundrobin\n    option httpchk GET /mobile/health\n    # Mobile-specific optimizations\n    compression algo gzip\n    compression type text/html text/css application/javascript application/json\n    server mobile-1 192.168.1.150:8080 check\n    server mobile-2 192.168.1.151:8080 check\n\n#---------------------------------------------------------------------\n# Monitoring and Statistics\n#---------------------------------------------------------------------\n\nlisten stats\n    bind *:8404 ssl crt /etc/haproxy/ssl/stats.pem\n    stats enable\n    stats uri /\n    stats refresh 5s\n    stats admin if { src 192.168.1.0/24 }\n    stats auth admin:secure_stats_password\n    stats realm \"HAProxy Statistics\"\n    \n    # Prometheus metrics endpoint\n    http-request use-service prometheus-exporter if { path /metrics }\n    \n    # JSON stats API\n    http-request use-service prometheus-exporter if { path /stats/json }\n\n# Health check endpoint for external monitoring\nlisten health_check\n    bind *:8080\n    mode http\n    monitor-uri /health\n    option httplog\n    \n    acl site_dead nbsrv(web_servers) lt 1\n    acl api_dead nbsrv(api_servers) lt 1\n    \n    monitor fail if site_dead\n    monitor fail if api_dead\nEOF\n```\n\n### Global Load Balancing with DNS\n```bash\n# Integration with external DNS load balancing\nsudo tee /etc/haproxy/haproxy-dns.cfg > /dev/null <<EOF\nglobal\n    # DNS resolution for dynamic backends\n    dns-resolver dns1\n        nameserver dns1 8.8.8.8:53\n        nameserver dns2 8.8.4.4:53\n        resolve_retries 3\n        timeout retry 1s\n        hold nx 30s\n        hold other 30s\n        hold refused 30s\n        hold timeout 30s\n        hold valid 10s\n\ndefaults\n    mode http\n    timeout connect 5s\n    timeout client 30s\n    timeout server 30s\n\n# Dynamic backend resolution\nbackend dynamic_backend\n    balance roundrobin\n    option httpchk GET /health\n    \n    # Servers resolved via DNS\n    server-template web- 3 web.example.com:80 check resolvers dns1\n    server-template api- 2 api.example.com:80 check resolvers dns1\n\n# Service discovery integration\nbackend consul_backend\n    balance roundrobin\n    option httpchk GET /health\n    \n    # Consul service discovery\n    server-template consul- 3 _web._tcp.service.consul:80 check resolvers dns1\nEOF\n```\n\n## High Availability and Clustering\n\n### HAProxy Keepalived Setup\n```bash\n# Install keepalived for HA\nsudo apt install -y keepalived  # Ubuntu/Debian\nsudo yum install -y keepalived  # RHEL/CentOS\n\n# Configure keepalived on primary HAProxy\nsudo tee /etc/keepalived/keepalived.conf > /dev/null <<EOF\n! Configuration File for keepalived\n\nglobal_defs {\n    router_id HAProxy_Primary\n    vrrp_skip_check_adv_addr\n    vrrp_strict\n    vrrp_garp_interval 0\n    vrrp_gna_interval 0\n    script_user root\n    enable_script_security\n}\n\n# Health check script\nvrrp_script chk_haproxy {\n    script \"/usr/bin/killall -0 haproxy\"\n    interval 2\n    weight 2\n    fall 3\n    rise 2\n}\n\nvrrp_instance VI_1 {\n    state MASTER\n    interface eth0\n    virtual_router_id 51\n    priority 110\n    advert_int 1\n    authentication {\n        auth_type PASS\n        auth_pass secure_vrrp_password\n    }\n    virtual_ipaddress {\n        192.168.1.100/24\n    }\n    track_script {\n        chk_haproxy\n    }\n    notify_master /etc/keepalived/master.sh\n    notify_backup /etc/keepalived/backup.sh\n}\nEOF\n\n# Create notification scripts\nsudo tee /etc/keepalived/master.sh > /dev/null <<'EOF'\n#!/bin/bash\necho \"$(date): Became MASTER\" >> /var/log/keepalived.log\n# Add any additional master setup commands here\nEOF\n\nsudo tee /etc/keepalived/backup.sh > /dev/null <<'EOF'\n#!/bin/bash\necho \"$(date): Became BACKUP\" >> /var/log/keepalived.log\n# Add any additional backup setup commands here\nEOF\n\nsudo chmod +x /etc/keepalived/{master,backup}.sh\nsudo systemctl enable --now keepalived\n\n# Configure backup HAProxy with lower priority (100 instead of 110)\n```\n\n### Multi-Site Load Balancing\n```bash\n# Configure multi-site load balancing\nsudo tee /etc/haproxy/haproxy-multisite.cfg > /dev/null <<EOF\nglobal\n    log stdout local0\n    stats socket /run/haproxy/admin.sock mode 660 level admin\n    user haproxy\n    group haproxy\n    daemon\n\ndefaults\n    mode http\n    log global\n    option httplog\n    timeout connect 5s\n    timeout client 30s\n    timeout server 30s\n\n# Frontend for multi-site routing\nfrontend multisite_frontend\n    bind *:443 ssl crt /etc/haproxy/ssl/ alpn h2,http/1.1\n    \n    # Site detection based on headers\n    acl is_site_a hdr(host) -i site-a.example.com\n    acl is_site_b hdr(host) -i site-b.example.com\n    acl is_site_c hdr(host) -i site-c.example.com\n    \n    # Geographic routing based on source IP\n    acl is_americas src 10.1.0.0/16\n    acl is_europe src 10.2.0.0/16\n    acl is_asia src 10.3.0.0/16\n    \n    # Route to appropriate backends\n    use_backend site_a_americas if is_site_a is_americas\n    use_backend site_a_europe if is_site_a is_europe\n    use_backend site_a_asia if is_site_a is_asia\n    use_backend site_b_backend if is_site_b\n    use_backend site_c_backend if is_site_c\n    \n    default_backend default_site\n\n# Regional backends\nbackend site_a_americas\n    balance leastconn\n    option httpchk GET /health\n    server site-a-us-1 us-east-1.example.com:80 check\n    server site-a-us-2 us-west-2.example.com:80 check\n\nbackend site_a_europe\n    balance leastconn\n    option httpchk GET /health\n    server site-a-eu-1 eu-west-1.example.com:80 check\n    server site-a-eu-2 eu-central-1.example.com:80 check\n\nbackend site_a_asia\n    balance leastconn\n    option httpchk GET /health\n    server site-a-ap-1 ap-southeast-1.example.com:80 check\n    server site-a-ap-2 ap-northeast-1.example.com:80 check\nEOF\n```\n\n## Monitoring and Observability\n\n### Prometheus Integration\n```bash\n# Configure HAProxy for Prometheus scraping\nsudo tee -a /etc/haproxy/haproxy.cfg > /dev/null <<EOF\n\n# Prometheus metrics endpoint\nfrontend prometheus_frontend\n    bind *:8405\n    http-request use-service prometheus-exporter if { path /metrics }\n    http-request deny\nEOF\n\n# Create HAProxy exporter configuration\nsudo tee /etc/systemd/system/haproxy-exporter.service > /dev/null <<EOF\n[Unit]\nDescription=HAProxy Exporter for Prometheus\nAfter=network.target\n\n[Service]\nType=simple\nUser=haproxy\nExecStart=/usr/local/bin/haproxy_exporter \\\n    --haproxy.scrape-uri=\"http://admin:secure_stats_password@localhost:8404/stats;csv\" \\\n    --web.listen-address=\"0.0.0.0:9101\"\nRestart=always\n\n[Install]\nWantedBy=multi-user.target\nEOF\n\n# Download HAProxy exporter\nHAPROXY_EXPORTER_VERSION=\"0.15.0\"\nwget https://github.com/prometheus/haproxy_exporter/releases/download/v${HAPROXY_EXPORTER_VERSION}/haproxy_exporter-${HAPROXY_EXPORTER_VERSION}.linux-amd64.tar.gz\ntar xzf haproxy_exporter-${HAPROXY_EXPORTER_VERSION}.linux-amd64.tar.gz\nsudo cp haproxy_exporter-${HAPROXY_EXPORTER_VERSION}.linux-amd64/haproxy_exporter /usr/local/bin/\n\nsudo systemctl daemon-reload\nsudo systemctl enable --now haproxy-exporter\n```\n\n### Comprehensive Logging\n```bash\n# Configure rsyslog for HAProxy\nsudo tee /etc/rsyslog.d/49-haproxy.conf > /dev/null <<EOF\n# HAProxy log configuration\n\\$ModLoad imudp\n\\$UDPServerRun 514\n\\$UDPServerAddress 127.0.0.1\n\n# HAProxy logs\nlocal0.*    /var/log/haproxy/haproxy.log\n& stop\n\n# Separate access and error logs\nlocal0.info /var/log/haproxy/access.log\nlocal0.err  /var/log/haproxy/error.log\nlocal0.warning /var/log/haproxy/warning.log\nEOF\n\n# Create log directory\nsudo mkdir -p /var/log/haproxy\nsudo chown syslog:adm /var/log/haproxy\n\n# Configure log rotation\nsudo tee /etc/logrotate.d/haproxy > /dev/null <<EOF\n/var/log/haproxy/*.log {\n    daily\n    rotate 30\n    missingok\n    notifempty\n    compress\n    delaycompress\n    postrotate\n        /bin/kill -HUP \\`cat /var/run/rsyslogd.pid 2>/dev/null\\` 2>/dev/null || true\n    endscript\n}\nEOF\n\nsudo systemctl restart rsyslog\nsudo systemctl reload haproxy\n```\n\n## Performance Optimization\n\n### System-Level Tuning\n```bash\n# Kernel optimization for HAProxy\nsudo tee -a /etc/sysctl.conf > /dev/null <<EOF\n# HAProxy performance tuning\nnet.core.somaxconn = 65535\nnet.core.netdev_max_backlog = 5000\nnet.ipv4.tcp_max_syn_backlog = 65535\nnet.ipv4.tcp_max_tw_buckets = 400000\nnet.ipv4.tcp_tw_reuse = 1\nnet.ipv4.tcp_fin_timeout = 10\nnet.ipv4.ip_local_port_range = 15000 65000\nnet.core.rmem_default = 262144\nnet.core.rmem_max = 16777216\nnet.core.wmem_default = 262144\nnet.core.wmem_max = 16777216\nnet.ipv4.tcp_rmem = 4096 65536 16777216\nnet.ipv4.tcp_wmem = 4096 65536 16777216\nfs.file-max = 100000\nvm.swappiness = 1\nEOF\n\nsudo sysctl -p\n\n# Set resource limits\nsudo tee -a /etc/security/limits.conf > /dev/null <<EOF\nhaproxy soft nofile 65535\nhaproxy hard nofile 65535\nhaproxy soft nproc 65535\nhaproxy hard nproc 65535\nEOF\n\n# Optimize HAProxy service\nsudo tee /etc/systemd/system/haproxy.service.d/performance.conf > /dev/null <<EOF\n[Service]\nLimitNOFILE=65535\nLimitNPROC=65535\nExecStart=\nExecStart=/usr/sbin/haproxy -f /etc/haproxy/haproxy.cfg -p /run/haproxy.pid -S /run/haproxy-master.sock\nExecReload=/usr/sbin/haproxy -f /etc/haproxy/haproxy.cfg -c -q\nExecReload=/bin/kill -USR2 \\$MAINPID\nEOF\n\nsudo systemctl daemon-reload\nsudo systemctl restart haproxy\n```\n\n### Advanced Performance Configuration\n```bash\nsudo tee /etc/haproxy/performance.cfg > /dev/null <<EOF\nglobal\n    # Performance optimization\n    maxconn 40000\n    nbthread 8\n    cpu-map auto:1/1-8 0-7\n    \n    # Memory optimization\n    tune.maxrewrite 1024\n    tune.bufsize 32768\n    \n    # Connection optimization\n    tune.maxaccept 500\n    tune.recv_enough 10000\n    \n    # SSL optimization\n    tune.ssl.default-dh-param 2048\n    tune.ssl.maxrecord 1460\n    tune.ssl.capture-buffer-size 0\n    \n    # Compression\n    tune.comp.maxlevel 6\n\ndefaults\n    # Performance settings\n    maxconn 8000\n    \n    # Timeouts\n    timeout connect 3s\n    timeout client 25s\n    timeout server 25s\n    timeout tunnel 3600s\n    timeout http-keep-alive 1s\n    timeout http-request 15s\n    timeout queue 30s\n    timeout tarpit 60s\n    \n    # Keep-alive optimization\n    option http-keep-alive\n    option prefer-last-server\n    \n    # Compression\n    compression algo gzip\n    compression type text/html text/css text/javascript application/javascript application/json application/xml\n\n# High-performance backend configuration\nbackend high_performance_backend\n    balance leastconn\n    option httpchk GET /health\n    http-check expect status 200\n    \n    # Connection pooling\n    option http-reuse always\n    \n    # Server configuration with optimal settings\n    default-server inter 1000 fastinter 500 downinter 2000 rise 2 fall 3 slowstart 30s maxconn 1000 maxqueue 256 weight 100\n    \n    server web1 192.168.1.10:8080 check\n    server web2 192.168.1.11:8080 check\n    server web3 192.168.1.12:8080 check\n    server web4 192.168.1.13:8080 check\nEOF\n```\n\n## Backup and Disaster Recovery\n\n### Configuration Management and Backup\n```bash\nsudo tee /usr/local/bin/haproxy-backup.sh > /dev/null <<'EOF'\n#!/bin/bash\nBACKUP_DIR=\"/backup/haproxy\"\nDATE=$(date +%Y%m%d_%H%M%S)\n\nmkdir -p ${BACKUP_DIR}/{config,ssl,stats,logs}\n\n# Backup configuration files\ntar -czf ${BACKUP_DIR}/config/haproxy-config-${DATE}.tar.gz \\\n    /etc/haproxy/ \\\n    /etc/systemd/system/haproxy.service* \\\n    /etc/keepalived/\n\n# Backup SSL certificates\ntar -czf ${BACKUP_DIR}/ssl/haproxy-ssl-${DATE}.tar.gz \\\n    /etc/haproxy/ssl/ \\\n    /etc/letsencrypt/\n\n# Backup statistics and runtime state\necho \"show stat\" | socat stdio /run/haproxy/admin.sock > ${BACKUP_DIR}/stats/haproxy-stats-${DATE}.txt\necho \"show info\" | socat stdio /run/haproxy/admin.sock > ${BACKUP_DIR}/stats/haproxy-info-${DATE}.txt\necho \"show sess\" | socat stdio /run/haproxy/admin.sock > ${BACKUP_DIR}/stats/haproxy-sessions-${DATE}.txt\n\n# Backup recent logs\nfind /var/log/haproxy -name \"*.log\" -mtime -1 -exec tar -czf ${BACKUP_DIR}/logs/haproxy-logs-${DATE}.tar.gz {} +\n\n# Upload to cloud storage\naws s3 cp ${BACKUP_DIR}/ s3://haproxy-backups/ --recursive\naz storage blob upload-batch --source ${BACKUP_DIR} --destination haproxy-backups\ngsutil cp -r ${BACKUP_DIR}/* gs://haproxy-backups/\n\n# Keep only last 15 backups\nfind ${BACKUP_DIR} -name \"haproxy-*\" -type f -mtime +15 -delete\n\n# Test configuration validity\nhaproxy -c -f /etc/haproxy/haproxy.cfg\n\necho \"HAProxy backup completed: ${DATE}\"\nEOF\n\nsudo chmod +x /usr/local/bin/haproxy-backup.sh\n\n# Schedule daily backups\necho \"0 2 * * * root /usr/local/bin/haproxy-backup.sh\" | sudo tee -a /etc/crontab\n```\n\n### Disaster Recovery Automation\n```bash\nsudo tee /usr/local/bin/haproxy-dr.sh > /dev/null <<'EOF'\n#!/bin/bash\nDR_MODE=\"${1:-test}\"  # test, activate, or deactivate\n\ncase \"$DR_MODE\" in\n    \"test\")\n        echo \"Testing DR procedures...\"\n        \n        # Test backup restoration\n        LATEST_BACKUP=$(ls -t /backup/haproxy/config/haproxy-config-*.tar.gz | head -1)\n        if [ -n \"$LATEST_BACKUP\" ]; then\n            echo \"âœ“ Latest backup found: $LATEST_BACKUP\"\n        else\n            echo \"âœ— No backup files found\"\n            exit 1\n        fi\n        \n        # Test configuration\n        haproxy -c -f /etc/haproxy/haproxy.cfg\n        echo \"âœ“ Configuration is valid\"\n        \n        # Test backend connectivity\n        for backend in $(echo \"show stat\" | socat stdio /run/haproxy/admin.sock | grep \",BACKEND,\" | cut -d, -f1); do\n            echo \"Testing backend: $backend\"\n            echo \"show stat\" | socat stdio /run/haproxy/admin.sock | grep \"$backend\"\n        done\n        \n        echo \"DR test completed\"\n        ;;\n        \n    \"activate\")\n        echo \"Activating DR procedures...\"\n        \n        # Switch to DR configuration\n        cp /etc/haproxy/haproxy-dr.cfg /etc/haproxy/haproxy.cfg\n        \n        # Reload HAProxy\n        systemctl reload haproxy\n        \n        # Update DNS (example with Route53)\n        aws route53 change-resource-record-sets --hosted-zone-id Z123456789 --change-batch file://dr-dns-update.json\n        \n        echo \"DR activated\"\n        ;;\n        \n    \"deactivate\")\n        echo \"Deactivating DR procedures...\"\n        \n        # Restore original configuration\n        cp /etc/haproxy/haproxy.cfg.backup /etc/haproxy/haproxy.cfg\n        \n        # Reload HAProxy\n        systemctl reload haproxy\n        \n        # Update DNS back to primary\n        aws route53 change-resource-record-sets --hosted-zone-id Z123456789 --change-batch file://primary-dns-update.json\n        \n        echo \"DR deactivated\"\n        ;;\n        \n    *)\n        echo \"Usage: $0 {test|activate|deactivate}\"\n        exit 1\n        ;;\nesac\nEOF\n\nsudo chmod +x /usr/local/bin/haproxy-dr.sh\n```\n\n## Verification and Health Checks\n\n### Comprehensive Health Monitoring\n```bash\nsudo tee /usr/local/bin/haproxy-health-check.sh > /dev/null <<'EOF'\n#!/bin/bash\nHEALTH_LOG=\"/var/log/haproxy-health.log\"\n\nlog_message() {\n    echo \"$(date '+%Y-%m-%d %H:%M:%S') - $1\" | tee -a ${HEALTH_LOG}\n}\n\n# Check HAProxy service status\nif systemctl is-active haproxy >/dev/null 2>&1; then\n    log_message \"âœ“ HAProxy service is running\"\nelse\n    log_message \"âœ— HAProxy service is not running\"\n    exit 1\nfi\n\n# Check configuration validity\nif haproxy -c -f /etc/haproxy/haproxy.cfg >/dev/null 2>&1; then\n    log_message \"âœ“ HAProxy configuration is valid\"\nelse\n    log_message \"âœ— HAProxy configuration has errors\"\n    haproxy -c -f /etc/haproxy/haproxy.cfg\nfi\n\n# Check listening ports\nLISTENING_PORTS=$(netstat -tlnp | grep haproxy | wc -l)\nlog_message \"âœ“ HAProxy is listening on ${LISTENING_PORTS} ports\"\n\n# Check backend server health\nBACKEND_STATS=$(echo \"show stat\" | socat stdio /run/haproxy/admin.sock | grep -c \",UP,\")\nTOTAL_SERVERS=$(echo \"show stat\" | socat stdio /run/haproxy/admin.sock | grep -c \",.*,\")\nlog_message \"âœ“ ${BACKEND_STATS}/${TOTAL_SERVERS} backend servers are healthy\"\n\n# Check SSL certificate expiry\nif [ -d /etc/haproxy/ssl ]; then\n    for cert in /etc/haproxy/ssl/*.pem; do\n        if [ -f \"$cert\" ]; then\n            EXPIRY=$(openssl x509 -in \"$cert\" -noout -dates | grep notAfter | cut -d= -f2)\n            EXPIRY_EPOCH=$(date -d \"$EXPIRY\" +%s)\n            CURRENT_EPOCH=$(date +%s)\n            DAYS_TO_EXPIRY=$(( (EXPIRY_EPOCH - CURRENT_EPOCH) / 86400 ))\n            \n            if [ $DAYS_TO_EXPIRY -lt 30 ]; then\n                log_message \"âš  SSL certificate $(basename $cert) expires in ${DAYS_TO_EXPIRY} days\"\n            else\n                log_message \"âœ“ SSL certificate $(basename $cert) expires in ${DAYS_TO_EXPIRY} days\"\n            fi\n        fi\n    done\nfi\n\n# Check memory usage\nMEMORY_USAGE=$(ps -o pid,vsz,rss,comm -C haproxy | tail -1 | awk '{print $3/1024}')\nlog_message \"â„¹ HAProxy memory usage: ${MEMORY_USAGE}MB\"\n\n# Check connection statistics\nCURRENT_CONNS=$(echo \"show info\" | socat stdio /run/haproxy/admin.sock | grep \"CurrConns\" | cut -d: -f2 | tr -d ' ')\nMAX_CONNS=$(echo \"show info\" | socat stdio /run/haproxy/admin.sock | grep \"MaxConn\" | cut -d: -f2 | tr -d ' ')\nlog_message \"â„¹ Current connections: ${CURRENT_CONNS}/${MAX_CONNS}\"\n\n# Check for any backend servers that are down\nDOWN_SERVERS=$(echo \"show stat\" | socat stdio /run/haproxy/admin.sock | grep \",DOWN,\" | wc -l)\nif [ $DOWN_SERVERS -gt 0 ]; then\n    log_message \"âš  ${DOWN_SERVERS} backend servers are down\"\n    echo \"show stat\" | socat stdio /run/haproxy/admin.sock | grep \",DOWN,\" | while IFS=, read pxname svname; do\n        log_message \"  - ${pxname}/${svname} is DOWN\"\n    done\nfi\n\nlog_message \"HAProxy health check completed\"\nEOF\n\nsudo chmod +x /usr/local/bin/haproxy-health-check.sh\n\n# Schedule health checks every 5 minutes\necho \"*/5 * * * * root /usr/local/bin/haproxy-health-check.sh\" | sudo tee -a /etc/crontab\n```\n\n### Load Testing and Performance Validation\n```bash\nsudo tee /usr/local/bin/haproxy-load-test.sh > /dev/null <<'EOF'\n#!/bin/bash\nTEST_RESULTS=\"/tmp/haproxy-load-test-$(date +%Y%m%d_%H%M%S).txt\"\nTEST_URL=\"https://example.com\"\nCONCURRENT_USERS=100\nTEST_DURATION=60\n\necho \"HAProxy Load Test Results\" > ${TEST_RESULTS}\necho \"========================\" >> ${TEST_RESULTS}\necho \"Date: $(date)\" >> ${TEST_RESULTS}\necho \"Target URL: ${TEST_URL}\" >> ${TEST_RESULTS}\necho \"Concurrent Users: ${CONCURRENT_USERS}\" >> ${TEST_RESULTS}\necho \"Test Duration: ${TEST_DURATION}s\" >> ${TEST_RESULTS}\necho \"\" >> ${TEST_RESULTS}\n\n# Install testing tools if not available\nif ! command -v ab &> /dev/null; then\n    apt-get update && apt-get install -y apache2-utils\nfi\n\nif ! command -v wrk &> /dev/null; then\n    git clone https://github.com/wg/wrk.git /tmp/wrk\n    cd /tmp/wrk && make && cp wrk /usr/local/bin/\nfi\n\n# Run Apache Bench test\necho \"Apache Bench Results:\" >> ${TEST_RESULTS}\nab -n 10000 -c ${CONCURRENT_USERS} -k ${TEST_URL}/ >> ${TEST_RESULTS} 2>&1\n\necho \"\" >> ${TEST_RESULTS}\necho \"WRK Results:\" >> ${TEST_RESULTS}\nwrk -t4 -c${CONCURRENT_USERS} -d${TEST_DURATION}s --latency ${TEST_URL}/ >> ${TEST_RESULTS}\n\n# Capture HAProxy stats during test\necho \"\" >> ${TEST_RESULTS}\necho \"HAProxy Statistics During Test:\" >> ${TEST_RESULTS}\necho \"show info\" | socat stdio /run/haproxy/admin.sock >> ${TEST_RESULTS}\necho \"show stat\" | socat stdio /run/haproxy/admin.sock >> ${TEST_RESULTS}\n\necho \"\" >> ${TEST_RESULTS}\necho \"Load test completed at: $(date)\" >> ${TEST_RESULTS}\n\necho \"Load test completed. Results: ${TEST_RESULTS}\"\nEOF\n\nsudo chmod +x /usr/local/bin/haproxy-load-test.sh\n```\n\n## Firewall Configuration (Cross-Platform)\n\n### Security Rules\n```bash\n# UFW (Ubuntu/Debian)\nsudo ufw allow 80/tcp comment 'HTTP'\nsudo ufw allow 443/tcp comment 'HTTPS' \nsudo ufw allow from 192.168.1.0/24 to any port 8404 comment 'Stats interface - internal only'\nsudo ufw allow from 192.168.1.0/24 to any port 9101 comment 'Prometheus exporter - internal only'\nsudo ufw deny 8404 comment 'Block stats from public'\nsudo ufw enable\n\n# Firewalld (RHEL/CentOS/Fedora)\nsudo firewall-cmd --permanent --add-service=http\nsudo firewall-cmd --permanent --add-service=https\nsudo firewall-cmd --permanent --new-zone=haproxy-mgmt\nsudo firewall-cmd --permanent --zone=haproxy-mgmt --add-source=192.168.1.0/24\nsudo firewall-cmd --permanent --zone=haproxy-mgmt --add-port=8404/tcp\nsudo firewall-cmd --permanent --zone=haproxy-mgmt --add-port=9101/tcp\nsudo firewall-cmd --reload\n\n# iptables (Universal)\nsudo iptables -A INPUT -p tcp --dport 80 -j ACCEPT\nsudo iptables -A INPUT -p tcp --dport 443 -j ACCEPT\nsudo iptables -A INPUT -p tcp -s 192.168.1.0/24 --dport 8404 -j ACCEPT\nsudo iptables -A INPUT -p tcp -s 192.168.1.0/24 --dport 9101 -j ACCEPT\nsudo iptables -A INPUT -p tcp --dport 8404 -j DROP\nsudo iptables -A INPUT -p tcp --dport 9101 -j DROP\n\n# Save iptables rules\n# Ubuntu/Debian\nsudo apt install -y iptables-persistent\nsudo netfilter-persistent save\n\n# RHEL/CentOS\nsudo service iptables save\n```\n\n### DDoS Protection Configuration\n```bash\nsudo tee /etc/haproxy/ddos-protection.cfg > /dev/null <<EOF\n# DDoS Protection Configuration\n\nglobal\n    # Stick tables for tracking\n    tune.stick-table.enable 1\n\nfrontend ddos_protection\n    bind *:80\n    bind *:443 ssl crt /etc/haproxy/ssl/\n    \n    # Track client behavior\n    stick-table type ip size 1m expire 5m store gpc0,gpc1,http_req_rate(10s),http_err_rate(10s),conn_rate(10s),bytes_out_rate(10s)\n    \n    # Track requests\n    http-request track-sc0 src\n    \n    # Rate limiting rules\n    acl abuse_request_rate sc_http_req_rate(0) gt 100\n    acl abuse_connection_rate sc_conn_rate(0) gt 20\n    acl abuse_error_rate sc_http_err_rate(0) gt 10\n    acl abuse_bandwidth sc_bytes_out_rate(0) gt 10000000  # 10MB/s\n    \n    # Geographic blocking (requires GeoIP)\n    # acl blocked_countries src,map_ip(/etc/haproxy/geoip-country.map) -i CN RU\n    \n    # User-Agent filtering\n    acl bad_user_agent hdr_sub(User-Agent) -i \"sqlmap\" \"nikto\" \"nmap\" \"masscan\" \"zmap\"\n    acl empty_user_agent hdr_cnt(User-Agent) eq 0\n    \n    # HTTP method filtering\n    acl allowed_methods method GET POST PUT DELETE HEAD OPTIONS PATCH\n    \n    # Deny rules\n    http-request deny if abuse_request_rate\n    http-request deny if abuse_connection_rate\n    http-request deny if abuse_error_rate\n    http-request deny if abuse_bandwidth\n    http-request deny if bad_user_agent\n    http-request deny if empty_user_agent\n    http-request deny if !allowed_methods\n    # http-request deny if blocked_countries\n    \n    # Tarpit suspicious clients\n    http-request tarpit if { sc_http_req_rate(0) gt 50 }\n    \n    default_backend web_servers\n\n# Clean backend\nbackend web_servers\n    balance leastconn\n    option httpchk GET /health\n    \n    server web1 192.168.1.10:8080 check\n    server web2 192.168.1.11:8080 check\n    server web3 192.168.1.12:8080 check\nEOF\n```\n\n## Runtime Management and Monitoring\n\n### Advanced Runtime Commands\n```bash\n# Create HAProxy management script\nsudo tee /usr/local/bin/haproxy-manage.sh > /dev/null <<'EOF'\n#!/bin/bash\nHAPROXY_SOCKET=\"/run/haproxy/admin.sock\"\n\ncase \"$1\" in\n    \"status\")\n        echo \"=== HAProxy Status ===\"\n        echo \"show info\" | socat stdio ${HAPROXY_SOCKET}\n        echo \"\"\n        echo \"=== Server Status ===\"\n        echo \"show stat\" | socat stdio ${HAPROXY_SOCKET} | column -t -s \",\"\n        ;;\n    \n    \"enable\")\n        if [ -z \"$2\" ] || [ -z \"$3\" ]; then\n            echo \"Usage: $0 enable <backend> <server>\"\n            exit 1\n        fi\n        echo \"enable server $2/$3\" | socat stdio ${HAPROXY_SOCKET}\n        echo \"Server $2/$3 enabled\"\n        ;;\n    \n    \"disable\")\n        if [ -z \"$2\" ] || [ -z \"$3\" ]; then\n            echo \"Usage: $0 disable <backend> <server>\"\n            exit 1\n        fi\n        echo \"disable server $2/$3\" | socat stdio ${HAPROXY_SOCKET}\n        echo \"Server $2/$3 disabled\"\n        ;;\n    \n    \"weight\")\n        if [ -z \"$2\" ] || [ -z \"$3\" ] || [ -z \"$4\" ]; then\n            echo \"Usage: $0 weight <backend> <server> <weight>\"\n            exit 1\n        fi\n        echo \"set weight $2/$3 $4\" | socat stdio ${HAPROXY_SOCKET}\n        echo \"Weight for $2/$3 set to $4\"\n        ;;\n    \n    \"sessions\")\n        echo \"=== Active Sessions ===\"\n        echo \"show sess\" | socat stdio ${HAPROXY_SOCKET}\n        ;;\n    \n    \"errors\")\n        echo \"=== Recent Errors ===\"\n        echo \"show errors\" | socat stdio ${HAPROXY_SOCKET}\n        ;;\n    \n    \"reload\")\n        echo \"Reloading HAProxy configuration...\"\n        if haproxy -c -f /etc/haproxy/haproxy.cfg; then\n            systemctl reload haproxy\n            echo \"Configuration reloaded successfully\"\n        else\n            echo \"Configuration has errors, reload aborted\"\n            exit 1\n        fi\n        ;;\n    \n    \"drain\")\n        if [ -z \"$2\" ] || [ -z \"$3\" ]; then\n            echo \"Usage: $0 drain <backend> <server>\"\n            exit 1\n        fi\n        echo \"set server $2/$3 state drain\" | socat stdio ${HAPROXY_SOCKET}\n        echo \"Server $2/$3 is being drained\"\n        \n        # Wait for connections to finish\n        while [ $(echo \"show stat\" | socat stdio ${HAPROXY_SOCKET} | grep \"$2,$3\" | cut -d, -f5) -gt 0 ]; do\n            echo \"Waiting for connections to finish...\"\n            sleep 5\n        done\n        echo \"Server $2/$3 has been drained\"\n        ;;\n    \n    *)\n        echo \"Usage: $0 {status|enable|disable|weight|sessions|errors|reload|drain} [options]\"\n        echo \"\"\n        echo \"Examples:\"\n        echo \"  $0 status\"\n        echo \"  $0 enable web_servers web1\"\n        echo \"  $0 disable web_servers web1\"\n        echo \"  $0 weight web_servers web1 50\"\n        echo \"  $0 drain web_servers web1\"\n        echo \"  $0 sessions\"\n        echo \"  $0 errors\"\n        echo \"  $0 reload\"\n        exit 1\n        ;;\nesac\nEOF\n\nsudo chmod +x /usr/local/bin/haproxy-manage.sh\n```\n\n### Automated Log Analysis\n```bash\nsudo tee /usr/local/bin/haproxy-log-analysis.sh > /dev/null <<'EOF'\n#!/bin/bash\nLOG_FILE=\"/var/log/haproxy/haproxy.log\"\nANALYSIS_DIR=\"/var/log/haproxy-analysis\"\nDATE=$(date +%Y%m%d_%H%M%S)\n\nmkdir -p ${ANALYSIS_DIR}\n\n# Top client IPs\necho \"Top Client IPs - ${DATE}\" > ${ANALYSIS_DIR}/top-clients-${DATE}.txt\nawk '{print $6}' ${LOG_FILE} | sort | uniq -c | sort -nr | head -20 >> ${ANALYSIS_DIR}/top-clients-${DATE}.txt\n\n# Response time analysis\necho \"Response Time Analysis - ${DATE}\" > ${ANALYSIS_DIR}/response-times-${DATE}.txt\nawk '{print $11}' ${LOG_FILE} | grep -v '^-$' | sort -n | tail -100 >> ${ANALYSIS_DIR}/response-times-${DATE}.txt\n\n# Error analysis\necho \"Error Analysis - ${DATE}\" > ${ANALYSIS_DIR}/errors-${DATE}.txt\nawk '$10 >= 400 {print $0}' ${LOG_FILE} | tail -100 >> ${ANALYSIS_DIR}/errors-${DATE}.txt\n\n# Backend server analysis\necho \"Backend Server Performance - ${DATE}\" > ${ANALYSIS_DIR}/backend-performance-${DATE}.txt\nawk '{print $8}' ${LOG_FILE} | sort | uniq -c | sort -nr >> ${ANALYSIS_DIR}/backend-performance-${DATE}.txt\n\n# SSL/TLS analysis\necho \"SSL/TLS Analysis - ${DATE}\" > ${ANALYSIS_DIR}/ssl-analysis-${DATE}.txt\ngrep \"SSL\" ${LOG_FILE} | tail -50 >> ${ANALYSIS_DIR}/ssl-analysis-${DATE}.txt\n\n# Generate summary report\ncat > ${ANALYSIS_DIR}/summary-${DATE}.txt <<EOL\nHAProxy Log Analysis Summary - ${DATE}\n=====================================\n\nTotal Requests: $(wc -l < ${LOG_FILE})\nUnique IPs: $(awk '{print $6}' ${LOG_FILE} | sort -u | wc -l)\n4xx Errors: $(awk '$10 >= 400 && $10 < 500 {print $0}' ${LOG_FILE} | wc -l)\n5xx Errors: $(awk '$10 >= 500 {print $0}' ${LOG_FILE} | wc -l)\n\nAverage Response Time: $(awk '{sum += $11; count++} END {print sum/count}' ${LOG_FILE})ms\n\nTop 5 Requested URLs:\n$(awk '{print $12}' ${LOG_FILE} | sort | uniq -c | sort -nr | head -5)\n\nAnalysis completed at: $(date)\nEOL\n\necho \"Log analysis completed. Reports in: ${ANALYSIS_DIR}/\"\nEOF\n\nsudo chmod +x /usr/local/bin/haproxy-log-analysis.sh\n\n# Schedule daily log analysis\necho \"0 6 * * * root /usr/local/bin/haproxy-log-analysis.sh\" | sudo tee -a /etc/crontab\n```\n\n## Troubleshooting (Cross-Platform)\n\n### Common Issues and Solutions\n```bash\n# Check HAProxy process status\nps aux | grep haproxy\nsystemctl status haproxy\n\n# Configuration validation\nhaproxy -c -f /etc/haproxy/haproxy.cfg\nhaproxy -c -V -f /etc/haproxy/haproxy.cfg\n\n# Socket connectivity test\nsocat - /run/haproxy/admin.sock\necho \"show info\" | socat stdio /run/haproxy/admin.sock\n\n# Backend server connectivity test\nfor server in 192.168.1.10 192.168.1.11 192.168.1.12; do\n    echo \"Testing $server...\"\n    nc -zv $server 8080\n    curl -I http://$server:8080/health\ndone\n\n# SSL certificate issues\nopenssl x509 -in /etc/haproxy/ssl/example.com.pem -text -noout\nopenssl verify -CAfile /etc/haproxy/ssl/ca.crt /etc/haproxy/ssl/example.com.pem\n\n# Memory usage debugging\npmap -x $(pgrep haproxy)\ncat /proc/$(pgrep haproxy)/status | grep -E \"(VmSize|VmRSS|VmData|VmStk)\"\n\n# Network debugging\nss -tulpn | grep haproxy\nnetstat -tulpn | grep haproxy\nlsof -i :80,443,8404\n\n# Log debugging\ntail -f /var/log/haproxy/haproxy.log\njournalctl -u haproxy -f\n\n# Performance debugging\necho \"show stat\" | socat stdio /run/haproxy/admin.sock | grep -v \"^#\"\necho \"show sess\" | socat stdio /run/haproxy/admin.sock\necho \"show pools\" | socat stdio /run/haproxy/admin.sock\n\n# Configuration debugging\nhaproxy -vv\nhaproxy -dM -f /etc/haproxy/haproxy.cfg  # Don't use in production\n\n# Check for core dumps\nfind /var/crash -name \"haproxy*\" 2>/dev/null\nfind /var/lib/systemd/coredump -name \"*haproxy*\" 2>/dev/null\n```\n\n### Advanced Debugging\n```bash\n# Enable debug logging\nsudo systemctl edit haproxy.service\n# Add:\n[Service]\nExecStart=\nExecStart=/usr/sbin/haproxy -f /etc/haproxy/haproxy.cfg -p /run/haproxy.pid -S /run/haproxy-master.sock -d\n\nsudo systemctl daemon-reload\nsudo systemctl restart haproxy\n\n# Real-time connection monitoring\nwatch -n 1 'echo \"show stat\" | socat stdio /run/haproxy/admin.sock | grep -E \"FRONTEND|BACKEND\" | column -t -s \",\"'\n\n# TCP dump for network analysis\ntcpdump -i any -w haproxy-traffic.pcap port 80 or port 443\ntcpdump -i any -w backend-traffic.pcap host 192.168.1.10\n\n# Strace HAProxy process\nstrace -p $(pgrep haproxy) -e trace=network\n\n# Monitor file descriptors\nlsof -p $(pgrep haproxy) | wc -l\ncat /proc/$(pgrep haproxy)/limits | grep \"Max open files\"\n\n# Check shared memory segments\nipcs -m | grep haproxy\n\n# Monitor syscalls\nperf trace -p $(pgrep haproxy)\n```\n\n## Additional Resources\n\n- [Official Documentation](https://docs.haproxy.org/)\n- [HAProxy Configuration Manual](https://cbonte.github.io/haproxy-dconv/)\n- [Best Practices Guide](https://www.haproxy.com/documentation/hapee/latest/configuration/best-practices/)\n- [Performance Tuning Guide](https://www.haproxy.com/blog/haproxy-performance-tuning/)\n- [Security Guide](https://www.haproxy.com/solutions/security/)\n- [Community Forum](https://discourse.haproxy.org/)\n\n---\n\n**Note:** This guide is part of the [HowToMgr](https://howtomgr.github.io) collection.","readmeHtml":"<h1 id=\"haproxy-installation-guide\" class=\"mobile-header\">HAProxy Installation Guide</h1>\n<p class=\"mobile-paragraph\">High-performance TCP/HTTP load balancer and reverse proxy for distributing traffic across multiple backend servers. Industry standard for load balancing with enterprise-grade security and reliability.</p>\n<h2 id=\"prerequisites\" class=\"mobile-header\">Prerequisites</h2>\n<li class=\"mobile-list-item\">Linux system (any modern distribution)</li>\n<li class=\"mobile-list-item\">Root or sudo access</li>\n<li class=\"mobile-list-item\">2GB RAM minimum, 4GB+ recommended for high-traffic environments</li>\n<li class=\"mobile-list-item\">Multiple backend servers to load balance (optional for testing)</li>\n<li class=\"mobile-list-item\">SSL certificates for production HTTPS termination</li>\n<h2 id=\"installation\" class=\"mobile-header\">Installation</h2>\n<h3 id=\"using-package-manager-recommended\" class=\"mobile-header\">Using Package Manager (Recommended)</h3>\n<p class=\"mobile-paragraph\">#### Ubuntu/Debian</p>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Update package list\nsudo apt-get update\n\n# Install HAProxy and utilities\nsudo apt-get install -y haproxy haproxy-doc software-properties-common\n\n# For latest version from PPA\nsudo add-apt-repository ppa:vbernat/haproxy-2.8\nsudo apt-get update\nsudo apt-get install -y haproxy=2.8.*\n\n# Enable and start HAProxy\nsudo systemctl enable --now haproxy\n\n# Check status\nsudo systemctl status haproxy</code></pre>\n      </div>\n    </div>\n<p class=\"mobile-paragraph\">#### RHEL/CentOS/Rocky Linux/AlmaLinux</p>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Install EPEL repository\nsudo yum install -y epel-release\n\n# Install HAProxy\nsudo yum install -y haproxy\n\n# For newer versions\nsudo dnf install -y haproxy\n\n# Enable and start HAProxy\nsudo systemctl enable --now haproxy\n\n# Check status\nsudo systemctl status haproxy</code></pre>\n      </div>\n    </div>\n<p class=\"mobile-paragraph\">#### Fedora</p>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Install HAProxy\nsudo dnf install -y haproxy\n\n# Enable and start HAProxy\nsudo systemctl enable --now haproxy\n\n# Configure firewall\nsudo firewall-cmd --permanent --add-service=http\nsudo firewall-cmd --permanent --add-service=https\nsudo firewall-cmd --permanent --add-port=8404/tcp  # Stats interface\nsudo firewall-cmd --reload</code></pre>\n      </div>\n    </div>\n<p class=\"mobile-paragraph\">#### Arch Linux</p>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Install HAProxy\nsudo pacman -Syu haproxy\n\n# Enable and start HAProxy\nsudo systemctl enable --now haproxy\n\n# Check status\nsudo systemctl status haproxy</code></pre>\n      </div>\n    </div>\n<p class=\"mobile-paragraph\">#### Alpine Linux</p>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Install HAProxy\nsudo apk update\nsudo apk add haproxy\n\n# Enable and start HAProxy\nsudo rc-update add haproxy default\nsudo service haproxy start</code></pre>\n      </div>\n    </div>\n<h3 id=\"from-source-latest-features\" class=\"mobile-header\">From Source (Latest Features)</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Install build dependencies\n# Ubuntu/Debian\nsudo apt-get install -y build-essential libssl-dev libpcre3-dev zlib1g-dev liblua5.3-dev libsystemd-dev\n\n# RHEL/CentOS\nsudo yum groupinstall -y &quot;Development Tools&quot;\nsudo yum install -y openssl-devel pcre-devel zlib-devel lua-devel systemd-devel\n\n# Download latest HAProxy LTS\nHAPROXY_VERSION=&quot;3.0.5&quot;\ncd /tmp\nwget &quot;https://www.haproxy.org/download/3.0/src/haproxy-${HAPROXY_VERSION}.tar.gz&quot;\ntar xzf haproxy-${HAPROXY_VERSION}.tar.gz\ncd haproxy-${HAPROXY_VERSION}\n\n# Compile with full features\nmake clean\nmake -j$(nproc) TARGET=linux-glibc \\\n    USE_OPENSSL=1 \\\n    USE_ZLIB=1 \\\n    USE_PCRE=1 \\\n    USE_SYSTEMD=1 \\\n    USE_LUA=1 \\\n    USE_PROMEX=1 \\\n    USE_THREAD=1 \\\n    USE_CPU_AFFINITY=1 \\\n    USE_TFO=1 \\\n    USE_NS=1 \\\n    USE_DL=1 \\\n    USE_RT=1\n\n# Install HAProxy\nsudo make install\nsudo mkdir -p /etc/haproxy /var/lib/haproxy /var/log/haproxy\nsudo useradd --system --home /var/lib/haproxy --shell /bin/false haproxy\nsudo chown -R haproxy:haproxy /var/lib/haproxy /var/log/haproxy\n\n# Create systemd service\nsudo tee /etc/systemd/system/haproxy.service &gt; /dev/null &lt;&lt;EOF\n[Unit]\nDescription=HAProxy Load Balancer\nDocumentation=man:haproxy(1)\nDocumentation=file:/usr/share/doc/haproxy/configuration.txt\nAfter=network.target\n\n[Service]\nType=notify\nExecStart=/usr/local/sbin/haproxy -f /etc/haproxy/haproxy.cfg -p /run/haproxy.pid -S /run/haproxy-master.sock\nExecReload=/bin/kill -USR2 \\$MAINPID\nExecStop=/bin/kill -USR1 \\$MAINPID\nKillMode=mixed\nRestart=on-failure\nSuccessExitStatus=143\nKillSignal=SIGTERM\n\n# Security settings\nNoNewPrivileges=true\nPrivateTmp=true\nProtectHome=true\nProtectSystem=strict\nReadWritePaths=/var/lib/haproxy\nReadWritePaths=/var/log/haproxy\nReadWritePaths=/run\n\n[Install]\nWantedBy=multi-user.target\nEOF\n\nsudo systemctl daemon-reload\nsudo systemctl enable --now haproxy</code></pre>\n      </div>\n    </div>\n<h3 id=\"using-docker\" class=\"mobile-header\">Using Docker</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Create HAProxy configuration directory\nmkdir -p ~/haproxy/{config,ssl,logs}\n\n# Create basic configuration\ncat &gt; ~/haproxy/config/haproxy.cfg &lt;&lt;EOF\nglobal\n    log stdout local0\n    chroot /var/lib/haproxy\n    stats socket /run/haproxy/admin.sock mode 660 level admin expose-fd listeners\n    stats timeout 30s\n    user haproxy\n    group haproxy\n    daemon\n    \n    # SSL configuration\n    ssl-default-bind-ciphers ECDHE+AESGCM:ECDHE+CHACHA20:DHE+AESGCM:DHE+CHACHA20:!aNULL:!MD5:!DSS\n    ssl-default-bind-options ssl-min-ver TLSv1.2 no-tls-tickets\n    ssl-default-server-ciphers ECDHE+AESGCM:ECDHE+CHACHA20:DHE+AESGCM:DHE+CHACHA20:!aNULL:!MD5:!DSS\n    ssl-default-server-options ssl-min-ver TLSv1.2 no-tls-tickets\n\ndefaults\n    mode http\n    log global\n    option httplog\n    option dontlognull\n    option log-health-checks\n    option forwardfor\n    option http-server-close\n    timeout connect 5000\n    timeout client 50000\n    timeout server 50000\n    timeout http-keep-alive 4000\n    timeout check 3000\n\n# Frontend\nfrontend web_frontend\n    bind *:80\n    bind *:443 ssl crt /usr/local/etc/haproxy/ssl/ alpn h2,http/1.1\n    \n    # Redirect HTTP to HTTPS\n    redirect scheme https code 301 if !{ ssl_fc }\n    \n    # Security headers\n    http-response set-header Strict-Transport-Security &quot;max-age=31536000; includeSubDomains; preload&quot;\n    http-response set-header X-Frame-Options &quot;SAMEORIGIN&quot;\n    http-response set-header X-Content-Type-Options &quot;nosniff&quot;\n    http-response set-header X-XSS-Protection &quot;1; mode=block&quot;\n    \n    default_backend web_servers\n\n# Backend\nbackend web_servers\n    balance roundrobin\n    option httpchk GET /health\n    http-check expect status 200\n    server web1 192.168.1.10:8080 check\n    server web2 192.168.1.11:8080 check\n    server web3 192.168.1.12:8080 check\n\n# Stats interface\nlisten stats\n    bind *:8404\n    stats enable\n    stats uri /stats\n    stats refresh 30s\n    stats admin if TRUE\nEOF\n\n# Run HAProxy container\ndocker run -d \\\n  --name haproxy \\\n  --restart unless-stopped \\\n  -p 80:80 \\\n  -p 443:443 \\\n  -p 8404:8404 \\\n  -v ~/haproxy/config:/usr/local/etc/haproxy:ro \\\n  -v ~/haproxy/ssl:/usr/local/etc/haproxy/ssl:ro \\\n  -v ~/haproxy/logs:/var/log/haproxy \\\n  haproxy:latest</code></pre>\n      </div>\n    </div>\n<h2 id=\"production-configuration\" class=\"mobile-header\">Production Configuration</h2>\n<h3 id=\"enterprise-production-configuration\" class=\"mobile-header\">Enterprise Production Configuration</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Backup original configuration\nsudo cp /etc/haproxy/haproxy.cfg /etc/haproxy/haproxy.cfg.backup\n\n# Create comprehensive production configuration\nsudo tee /etc/haproxy/haproxy.cfg &gt; /dev/null &lt;&lt;EOF\n#---------------------------------------------------------------------\n# HAProxy Enterprise Production Configuration\n# Version: 3.0+ LTS\n#---------------------------------------------------------------------\n\nglobal\n    log 127.0.0.1:514 local0 info\n    chroot /var/lib/haproxy\n    stats socket /run/haproxy/admin.sock mode 660 level admin expose-fd listeners\n    stats timeout 30s\n    user haproxy\n    group haproxy\n    daemon\n\n    # SSL/TLS configuration (2024 best practices)\n    ssl-default-bind-ciphers ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-CHACHA20-POLY1305:ECDHE-RSA-CHACHA20-POLY1305:DHE-RSA-AES128-GCM-SHA256:DHE-RSA-AES256-GCM-SHA384\n    ssl-default-bind-ciphersuites TLS_AES_128_GCM_SHA256:TLS_AES_256_GCM_SHA384:TLS_CHACHA20_POLY1305_SHA256\n    ssl-default-bind-options ssl-min-ver TLSv1.2 no-tls-tickets prefer-client-ciphers\n    \n    ssl-default-server-ciphers ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384\n    ssl-default-server-ciphersuites TLS_AES_128_GCM_SHA256:TLS_AES_256_GCM_SHA384:TLS_CHACHA20_POLY1305_SHA256\n    ssl-default-server-options ssl-min-ver TLSv1.2 no-tls-tickets\n\n    # DH parameters for perfect forward secrecy\n    ssl-dh-param-file /etc/haproxy/ssl/dhparam.pem\n    \n    # Performance tuning\n    maxconn 40000\n    nbthread 4\n    cpu-map auto:1/1-4 0-3\n    \n    # Logging\n    log-tag haproxy-prod\n    \n    # Security\n    insecure-fork-wanted\n    insecure-setuid-wanted\n\ndefaults\n    mode http\n    log global\n    option httplog\n    option dontlognull\n    option log-health-checks\n    option forwardfor except 127.0.0.0/8\n    option http-server-close\n    option redispatch\n    \n    # Timeouts\n    timeout connect 10s\n    timeout client 1m\n    timeout server 1m\n    timeout http-keep-alive 10s\n    timeout check 10s\n    timeout tunnel 2h\n    \n    # Retries\n    retries 3\n    \n    # Compression\n    compression algo gzip\n    compression type text/html text/css text/javascript application/javascript application/json application/xml\n    \n    # Default error pages\n    errorfile 400 /etc/haproxy/errors/400.http\n    errorfile 403 /etc/haproxy/errors/403.http\n    errorfile 408 /etc/haproxy/errors/408.http\n    errorfile 500 /etc/haproxy/errors/500.http\n    errorfile 502 /etc/haproxy/errors/502.http\n    errorfile 503 /etc/haproxy/errors/503.http\n    errorfile 504 /etc/haproxy/errors/504.http\n\n#---------------------------------------------------------------------\n# Frontend Configuration\n#---------------------------------------------------------------------\n\nfrontend web_frontend\n    bind *:80\n    bind *:443 ssl crt /etc/haproxy/ssl/ alpn h2,http/1.1 crt-ignore-err all\n    \n    # Security headers\n    http-response set-header Strict-Transport-Security &quot;max-age=31536000; includeSubDomains; preload&quot;\n    http-response set-header X-Frame-Options &quot;SAMEORIGIN&quot;\n    http-response set-header X-Content-Type-Options &quot;nosniff&quot;\n    http-response set-header X-XSS-Protection &quot;1; mode=block&quot;\n    http-response set-header Referrer-Policy &quot;strict-origin-when-cross-origin&quot;\n    http-response set-header Content-Security-Policy &quot;default-src &#039;self&#039;; script-src &#039;self&#039; &#039;unsafe-inline&#039;; style-src &#039;self&#039; &#039;unsafe-inline&#039;&quot;\n    \n    # Rate limiting\n    stick-table type ip size 100k expire 30s store http_req_rate(10s)\n    http-request track-sc0 src\n    http-request deny if { sc_http_req_rate(0) gt 20 }\n    \n    # Block bad bots and crawlers\n    acl is_bot hdr_sub(User-Agent) -i bot crawler spider scraper\n    http-request deny if is_bot\n    \n    # ACLs for routing\n    acl is_api path_beg /api/\n    acl is_admin path_beg /admin/\n    acl is_static path_beg /static/ /css/ /js/ /images/\n    acl is_websocket hdr(Upgrade) -i websocket\n    \n    # Force HTTPS\n    redirect scheme https code 301 if !{ ssl_fc }\n    \n    # Routing rules\n    use_backend api_servers if is_api\n    use_backend admin_servers if is_admin\n    use_backend static_servers if is_static\n    use_backend websocket_servers if is_websocket\n    default_backend web_servers\n\n#---------------------------------------------------------------------\n# Backend Configurations\n#---------------------------------------------------------------------\n\n# Main web servers\nbackend web_servers\n    balance leastconn\n    option httpchk GET /health HTTP/1.1\\r\\nHost:\\ example.com\n    http-check expect status 200\n    \n    # Health check configuration\n    default-server inter 2000 rise 2 fall 3 slowstart 60s maxconn 250 maxqueue 256 weight 100\n    \n    server web1 192.168.1.10:8080 check cookie web1\n    server web2 192.168.1.11:8080 check cookie web2\n    server web3 192.168.1.12:8080 check cookie web3\n    server web4 192.168.1.13:8080 check cookie web4 backup\n    \n    # Stick table for session persistence\n    stick-table type ip size 200k expire 30m\n    stick on src\n\n# API servers backend\nbackend api_servers\n    balance roundrobin\n    option httpchk GET /api/health HTTP/1.1\\r\\nHost:\\ api.example.com\n    http-check expect rstring ^OK$\n    \n    # Enable HTTP/2 to backend\n    server api1 192.168.1.20:3000 check proto h2 verify none\n    server api2 192.168.1.21:3000 check proto h2 verify none\n    server api3 192.168.1.22:3000 check proto h2 verify none\n\n# Admin backend (restricted access)\nbackend admin_servers\n    balance source\n    option httpchk GET /admin/health\n    http-check expect status 200\n    \n    # IP whitelist for admin access\n    http-request deny unless { src 192.168.1.0/24 10.0.0.0/8 }\n    \n    server admin1 192.168.1.30:9000 check\n\n# Static content servers\nbackend static_servers\n    balance roundrobin\n    option httpchk GET /health.txt\n    http-check expect string &quot;OK&quot;\n    \n    # Cache control\n    http-response set-header Cache-Control &quot;public, max-age=86400&quot;\n    \n    server static1 192.168.1.40:8080 check\n    server static2 192.168.1.41:8080 check\n\n# WebSocket servers\nbackend websocket_servers\n    balance leastconn\n    option httpchk GET /ws/health\n    http-check expect status 101\n    \n    # WebSocket specific settings\n    timeout tunnel 3600s\n    \n    server ws1 192.168.1.50:8080 check\n    server ws2 192.168.1.51:8080 check\n\n#---------------------------------------------------------------------\n# Database Load Balancing (TCP Mode)\n#---------------------------------------------------------------------\n\n# MySQL Master-Slave Load Balancing\nfrontend mysql_frontend\n    bind *:3306\n    mode tcp\n    default_backend mysql_servers\n\nbackend mysql_servers\n    mode tcp\n    balance leastconn\n    option mysql-check user haproxy_check\n    \n    # MySQL health checks\n    server mysql-master 192.168.1.60:3306 check weight 1000\n    server mysql-slave1 192.168.1.61:3306 check weight 100 backup\n    server mysql-slave2 192.168.1.62:3306 check weight 100 backup\n\n# PostgreSQL Load Balancing\nfrontend postgresql_frontend\n    bind *:5432\n    mode tcp\n    default_backend postgresql_servers\n\nbackend postgresql_servers\n    mode tcp\n    balance roundrobin\n    option pgsql-check user haproxy_check\n    \n    server postgres1 192.168.1.70:5432 check\n    server postgres2 192.168.1.71:5432 check\n\n# Redis Cluster Load Balancing\nfrontend redis_frontend\n    bind *:6379\n    mode tcp\n    default_backend redis_servers\n\nbackend redis_servers\n    mode tcp\n    balance first\n    option redis-check\n    \n    server redis1 192.168.1.80:6379 check\n    server redis2 192.168.1.81:6379 check backup\n\n#---------------------------------------------------------------------\n# Statistics and Monitoring\n#---------------------------------------------------------------------\n\nlisten stats\n    bind *:8404\n    stats enable\n    stats uri /stats\n    stats refresh 30s\n    stats admin if { src 192.168.1.0/24 }\n    stats auth admin:secure_stats_password\n    \n    # Enhanced statistics\n    stats show-legends\n    stats show-modules\n    stats realm &quot;HAProxy Statistics&quot;\n    \n    # Prometheus metrics (if compiled with USE_PROMEX)\n    http-request use-service prometheus-exporter if { path /metrics }\n\n#---------------------------------------------------------------------\n# Advanced Features\n#---------------------------------------------------------------------\n\n# Global rate limiting\nbackend rate_limit_backend\n    stick-table type ip size 100k expire 30s store gpc0,http_req_rate(10s)\n\n# DDoS protection\nfrontend ddos_protection\n    bind *:80\n    \n    # Track client IPs\n    stick-table type ip size 100k expire 30s store gpc0,http_req_rate(10s),http_err_rate(10s)\n    http-request track-sc0 src table rate_limit_backend\n    \n    # Block clients exceeding rate limits\n    http-request deny if { sc_http_req_rate(0) gt 50 }\n    http-request deny if { sc_http_err_rate(0) gt 10 }\n    \n    default_backend web_servers\n\n# Health check backend for external monitoring\nbackend health_check\n    mode http\n    http-request return status 200 content-type text/plain string &quot;HAProxy is healthy&quot;\nEOF\n\n# Test configuration\nsudo haproxy -c -f ~/haproxy/config/haproxy.cfg</code></pre>\n      </div>\n    </div>\n<h2 id=\"ssltls-configuration-and-security\" class=\"mobile-header\">SSL/TLS Configuration and Security</h2>\n<h3 id=\"advanced-ssl-termination\" class=\"mobile-header\">Advanced SSL Termination</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Generate strong DH parameters\nsudo openssl dhparam -out /etc/haproxy/ssl/dhparam.pem 4096\n\n# Create SSL certificate bundle\nsudo mkdir -p /etc/haproxy/ssl\n\n# Self-signed certificate for testing\nsudo openssl req -x509 -nodes -days 365 -newkey rsa:4096 \\\n  -keyout /etc/haproxy/ssl/example.com.key \\\n  -out /etc/haproxy/ssl/example.com.crt \\\n  -subj &quot;/C=US/ST=State/L=City/O=Organization/CN=example.com&quot;\n\n# Combine certificate and key for HAProxy\nsudo cat /etc/haproxy/ssl/example.com.crt /etc/haproxy/ssl/example.com.key | sudo tee /etc/haproxy/ssl/example.com.pem\n\n# Production: Let&#039;s Encrypt certificates\nsudo certbot certonly --standalone -d example.com -d www.example.com\nsudo cat /etc/letsencrypt/live/example.com/fullchain.pem /etc/letsencrypt/live/example.com/privkey.pem | sudo tee /etc/haproxy/ssl/example.com.pem\n\n# Set proper permissions\nsudo chmod 600 /etc/haproxy/ssl/*.pem\nsudo chown haproxy:haproxy /etc/haproxy/ssl/*.pem\n\n# Create certificate renewal script\nsudo tee /usr/local/bin/haproxy-ssl-renewal.sh &gt; /dev/null &lt;&lt;&#039;EOF&#039;\n#!/bin/bash\nCERT_PATH=&quot;/etc/letsencrypt/live&quot;\nHAPROXY_CERT_DIR=&quot;/etc/haproxy/ssl&quot;\n\n# Renew certificates\ncertbot renew --quiet --pre-hook &quot;systemctl stop haproxy&quot; --post-hook &quot;systemctl start haproxy&quot;\n\n# Update HAProxy certificate bundles\nfor domain in $(ls ${CERT_PATH}/); do\n    if [ -f &quot;${CERT_PATH}/${domain}/fullchain.pem&quot; ]; then\n        cat &quot;${CERT_PATH}/${domain}/fullchain.pem&quot; &quot;${CERT_PATH}/${domain}/privkey.pem&quot; &gt; &quot;${HAPROXY_CERT_DIR}/${domain}.pem&quot;\n        chmod 600 &quot;${HAPROXY_CERT_DIR}/${domain}.pem&quot;\n        chown haproxy:haproxy &quot;${HAPROXY_CERT_DIR}/${domain}.pem&quot;\n    fi\ndone\n\n# Reload HAProxy configuration\nsystemctl reload haproxy\n\necho &quot;SSL certificates updated for HAProxy&quot;\nEOF\n\nsudo chmod +x /usr/local/bin/haproxy-ssl-renewal.sh\n\n# Schedule certificate renewal\necho &quot;0 3 * * 1 root /usr/local/bin/haproxy-ssl-renewal.sh&quot; | sudo tee -a /etc/crontab</code></pre>\n      </div>\n    </div>\n<h3 id=\"security-hardening-configuration\" class=\"mobile-header\">Security Hardening Configuration</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Create security-focused configuration additions\nsudo tee /etc/haproxy/conf.d/security.cfg &gt; /dev/null &lt;&lt;EOF\n#---------------------------------------------------------------------\n# Security Configuration\n#---------------------------------------------------------------------\n\nglobal\n    # Security settings\n    tune.ssl.default-dh-param 2048\n    tune.ssl.capture-buffer-size 0\n    tune.ssl.maxrecord 1460\n    \n    # Disable SSLv3 and weak ciphers\n    ssl-default-bind-options no-sslv3 no-tlsv10 no-tlsv11\n\ndefaults\n    # Hide server information\n    option hide-version\n    \n    # Security headers for all responses\n    http-response del-header Server\n    http-response del-header X-Powered-By\n    \n    # Request size limits\n    http-request deny if { req.body_size gt 10000000 }  # 10MB limit\n    \n    # Block suspicious request methods\n    acl blocked_methods method TRACE CONNECT\n    http-request deny if blocked_methods\n    \n    # Block requests with suspicious headers\n    acl suspicious_headers hdr_cnt(host) gt 1\n    acl suspicious_headers hdr_cnt(content-length) gt 1\n    http-request deny if suspicious_headers\n\n# Rate limiting configuration\nbackend rate_limit_abuse\n    stick-table type ip size 100k expire 30s store gpc0,gpc1,http_req_rate(10s),http_err_rate(10s),conn_rate(10s)\n\nfrontend rate_limiting\n    # Track requests per IP\n    http-request track-sc0 src table rate_limit_abuse\n    \n    # Deny clients that exceed rate limits\n    http-request deny if { sc_http_req_rate(0) gt 100 }\n    http-request deny if { sc_conn_rate(0) gt 20 }\n    http-request deny if { sc_http_err_rate(0) gt 10 }\n    \n    # Slow down abusive clients\n    http-request set-var(req.delay) int(1000) if { sc_http_req_rate(0) gt 50 }\n    http-request lua.delay_request if { var(req.delay) -m found }\n\n# WAF-like filtering\nfrontend security_frontend\n    # Block common attacks\n    acl is_sql_injection path_reg -i .*(union|select|insert|delete|update|drop|create|alter|exec|script|javascript|vbscript|onload|onerror|onclick).*\n    acl is_xss path_reg -i .*(script|iframe|object|embed|form|img|svg|math|details|svg).*\n    acl is_path_traversal path_reg -i .*(\\.\\./|\\.\\.\\\\|%2e%2e%2f|%2e%2e\\\\).*\n    \n    http-request deny if is_sql_injection\n    http-request deny if is_xss\n    http-request deny if is_path_traversal\n    \n    # GeoIP blocking (requires GeoIP data)\n    # http-request deny if { src,map_ip(/etc/haproxy/geoip/country.map) -i CN RU }\n\nEOF\n\n# Include security configuration\necho &quot;include /etc/haproxy/conf.d/*.cfg&quot; | sudo tee -a /etc/haproxy/haproxy.cfg</code></pre>\n      </div>\n    </div>\n<h2 id=\"advanced-load-balancing-strategies\" class=\"mobile-header\">Advanced Load Balancing Strategies</h2>\n<h3 id=\"multi-tier-application-load-balancing\" class=\"mobile-header\">Multi-Tier Application Load Balancing</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\">sudo tee /etc/haproxy/haproxy.cfg &gt; /dev/null &lt;&lt;EOF\nglobal\n    log stdout local0\n    stats socket /run/haproxy/admin.sock mode 660 level admin\n    user haproxy\n    group haproxy\n    daemon\n\ndefaults\n    mode http\n    log global\n    option httplog\n    option dontlognull\n    timeout connect 5s\n    timeout client 50s\n    timeout server 50s\n\n#---------------------------------------------------------------------\n# Application Frontend with Advanced Routing\n#---------------------------------------------------------------------\n\nfrontend app_frontend\n    bind *:443 ssl crt /etc/haproxy/ssl/ alpn h2,http/1.1\n    \n    # ACLs for microservices routing\n    acl is_user_service path_beg /api/users/\n    acl is_order_service path_beg /api/orders/\n    acl is_payment_service path_beg /api/payments/\n    acl is_notification_service path_beg /api/notifications/\n    acl is_admin_panel path_beg /admin/\n    acl is_monitoring path_beg /monitoring/\n    \n    # Geographic routing\n    acl is_us_traffic src 192.168.1.0/24\n    acl is_eu_traffic src 192.168.2.0/24\n    acl is_asia_traffic src 192.168.3.0/24\n    \n    # Device detection\n    acl is_mobile hdr_reg(User-Agent) -i (mobile|android|iphone|ipad)\n    acl is_desktop hdr_reg(User-Agent) -i (windows|macos|linux)\n    \n    # Routing decisions\n    use_backend user_service_us if is_user_service is_us_traffic\n    use_backend user_service_eu if is_user_service is_eu_traffic\n    use_backend order_service if is_order_service\n    use_backend payment_service if is_payment_service\n    use_backend notification_service if is_notification_service\n    use_backend admin_panel if is_admin_panel\n    use_backend monitoring_backend if is_monitoring\n    use_backend mobile_servers if is_mobile\n    default_backend web_servers\n\n# User Service Backends (Geographic)\nbackend user_service_us\n    balance roundrobin\n    option httpchk GET /api/users/health\n    http-check expect status 200\n    server user-us-1 192.168.1.100:3001 check\n    server user-us-2 192.168.1.101:3001 check\n    server user-us-3 192.168.1.102:3001 check\n\nbackend user_service_eu\n    balance roundrobin\n    option httpchk GET /api/users/health\n    server user-eu-1 192.168.2.100:3001 check\n    server user-eu-2 192.168.2.101:3001 check\n\n# Microservices Backends\nbackend order_service\n    balance leastconn\n    option httpchk GET /api/orders/health\n    server order-1 192.168.1.110:3002 check\n    server order-2 192.168.1.111:3002 check\n    server order-3 192.168.1.112:3002 check\n\nbackend payment_service\n    balance roundrobin\n    option httpchk GET /api/payments/health\n    # Enhanced security for payment service\n    http-request set-header X-Forwarded-Proto https\n    http-request add-header X-Client-IP %[src]\n    server payment-1 192.168.1.120:3003 check ssl verify none\n    server payment-2 192.168.1.121:3003 check ssl verify none\n\nbackend notification_service\n    balance roundrobin\n    option httpchk GET /api/notifications/health\n    server notification-1 192.168.1.130:3004 check\n    server notification-2 192.168.1.131:3004 check\n\n# Admin Panel Backend (Restricted)\nbackend admin_panel\n    balance source\n    option httpchk GET /admin/health\n    http-check expect status 200\n    \n    # Additional security\n    http-request add-header X-Admin-Access &quot;true&quot;\n    timeout server 2m\n    \n    server admin-1 192.168.1.140:9000 check\n\n# Mobile-Optimized Backend\nbackend mobile_servers\n    balance roundrobin\n    option httpchk GET /mobile/health\n    # Mobile-specific optimizations\n    compression algo gzip\n    compression type text/html text/css application/javascript application/json\n    server mobile-1 192.168.1.150:8080 check\n    server mobile-2 192.168.1.151:8080 check\n\n#---------------------------------------------------------------------\n# Monitoring and Statistics\n#---------------------------------------------------------------------\n\nlisten stats\n    bind *:8404 ssl crt /etc/haproxy/ssl/stats.pem\n    stats enable\n    stats uri /\n    stats refresh 5s\n    stats admin if { src 192.168.1.0/24 }\n    stats auth admin:secure_stats_password\n    stats realm &quot;HAProxy Statistics&quot;\n    \n    # Prometheus metrics endpoint\n    http-request use-service prometheus-exporter if { path /metrics }\n    \n    # JSON stats API\n    http-request use-service prometheus-exporter if { path /stats/json }\n\n# Health check endpoint for external monitoring\nlisten health_check\n    bind *:8080\n    mode http\n    monitor-uri /health\n    option httplog\n    \n    acl site_dead nbsrv(web_servers) lt 1\n    acl api_dead nbsrv(api_servers) lt 1\n    \n    monitor fail if site_dead\n    monitor fail if api_dead\nEOF</code></pre>\n      </div>\n    </div>\n<h3 id=\"global-load-balancing-with-dns\" class=\"mobile-header\">Global Load Balancing with DNS</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Integration with external DNS load balancing\nsudo tee /etc/haproxy/haproxy-dns.cfg &gt; /dev/null &lt;&lt;EOF\nglobal\n    # DNS resolution for dynamic backends\n    dns-resolver dns1\n        nameserver dns1 8.8.8.8:53\n        nameserver dns2 8.8.4.4:53\n        resolve_retries 3\n        timeout retry 1s\n        hold nx 30s\n        hold other 30s\n        hold refused 30s\n        hold timeout 30s\n        hold valid 10s\n\ndefaults\n    mode http\n    timeout connect 5s\n    timeout client 30s\n    timeout server 30s\n\n# Dynamic backend resolution\nbackend dynamic_backend\n    balance roundrobin\n    option httpchk GET /health\n    \n    # Servers resolved via DNS\n    server-template web- 3 web.example.com:80 check resolvers dns1\n    server-template api- 2 api.example.com:80 check resolvers dns1\n\n# Service discovery integration\nbackend consul_backend\n    balance roundrobin\n    option httpchk GET /health\n    \n    # Consul service discovery\n    server-template consul- 3 _web._tcp.service.consul:80 check resolvers dns1\nEOF</code></pre>\n      </div>\n    </div>\n<h2 id=\"high-availability-and-clustering\" class=\"mobile-header\">High Availability and Clustering</h2>\n<h3 id=\"haproxy-keepalived-setup\" class=\"mobile-header\">HAProxy Keepalived Setup</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Install keepalived for HA\nsudo apt install -y keepalived  # Ubuntu/Debian\nsudo yum install -y keepalived  # RHEL/CentOS\n\n# Configure keepalived on primary HAProxy\nsudo tee /etc/keepalived/keepalived.conf &gt; /dev/null &lt;&lt;EOF\n! Configuration File for keepalived\n\nglobal_defs {\n    router_id HAProxy_Primary\n    vrrp_skip_check_adv_addr\n    vrrp_strict\n    vrrp_garp_interval 0\n    vrrp_gna_interval 0\n    script_user root\n    enable_script_security\n}\n\n# Health check script\nvrrp_script chk_haproxy {\n    script &quot;/usr/bin/killall -0 haproxy&quot;\n    interval 2\n    weight 2\n    fall 3\n    rise 2\n}\n\nvrrp_instance VI_1 {\n    state MASTER\n    interface eth0\n    virtual_router_id 51\n    priority 110\n    advert_int 1\n    authentication {\n        auth_type PASS\n        auth_pass secure_vrrp_password\n    }\n    virtual_ipaddress {\n        192.168.1.100/24\n    }\n    track_script {\n        chk_haproxy\n    }\n    notify_master /etc/keepalived/master.sh\n    notify_backup /etc/keepalived/backup.sh\n}\nEOF\n\n# Create notification scripts\nsudo tee /etc/keepalived/master.sh &gt; /dev/null &lt;&lt;&#039;EOF&#039;\n#!/bin/bash\necho &quot;$(date): Became MASTER&quot; &gt;&gt; /var/log/keepalived.log\n# Add any additional master setup commands here\nEOF\n\nsudo tee /etc/keepalived/backup.sh &gt; /dev/null &lt;&lt;&#039;EOF&#039;\n#!/bin/bash\necho &quot;$(date): Became BACKUP&quot; &gt;&gt; /var/log/keepalived.log\n# Add any additional backup setup commands here\nEOF\n\nsudo chmod +x /etc/keepalived/{master,backup}.sh\nsudo systemctl enable --now keepalived\n\n# Configure backup HAProxy with lower priority (100 instead of 110)</code></pre>\n      </div>\n    </div>\n<h3 id=\"multi-site-load-balancing\" class=\"mobile-header\">Multi-Site Load Balancing</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Configure multi-site load balancing\nsudo tee /etc/haproxy/haproxy-multisite.cfg &gt; /dev/null &lt;&lt;EOF\nglobal\n    log stdout local0\n    stats socket /run/haproxy/admin.sock mode 660 level admin\n    user haproxy\n    group haproxy\n    daemon\n\ndefaults\n    mode http\n    log global\n    option httplog\n    timeout connect 5s\n    timeout client 30s\n    timeout server 30s\n\n# Frontend for multi-site routing\nfrontend multisite_frontend\n    bind *:443 ssl crt /etc/haproxy/ssl/ alpn h2,http/1.1\n    \n    # Site detection based on headers\n    acl is_site_a hdr(host) -i site-a.example.com\n    acl is_site_b hdr(host) -i site-b.example.com\n    acl is_site_c hdr(host) -i site-c.example.com\n    \n    # Geographic routing based on source IP\n    acl is_americas src 10.1.0.0/16\n    acl is_europe src 10.2.0.0/16\n    acl is_asia src 10.3.0.0/16\n    \n    # Route to appropriate backends\n    use_backend site_a_americas if is_site_a is_americas\n    use_backend site_a_europe if is_site_a is_europe\n    use_backend site_a_asia if is_site_a is_asia\n    use_backend site_b_backend if is_site_b\n    use_backend site_c_backend if is_site_c\n    \n    default_backend default_site\n\n# Regional backends\nbackend site_a_americas\n    balance leastconn\n    option httpchk GET /health\n    server site-a-us-1 us-east-1.example.com:80 check\n    server site-a-us-2 us-west-2.example.com:80 check\n\nbackend site_a_europe\n    balance leastconn\n    option httpchk GET /health\n    server site-a-eu-1 eu-west-1.example.com:80 check\n    server site-a-eu-2 eu-central-1.example.com:80 check\n\nbackend site_a_asia\n    balance leastconn\n    option httpchk GET /health\n    server site-a-ap-1 ap-southeast-1.example.com:80 check\n    server site-a-ap-2 ap-northeast-1.example.com:80 check\nEOF</code></pre>\n      </div>\n    </div>\n<h2 id=\"monitoring-and-observability\" class=\"mobile-header\">Monitoring and Observability</h2>\n<h3 id=\"prometheus-integration\" class=\"mobile-header\">Prometheus Integration</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Configure HAProxy for Prometheus scraping\nsudo tee -a /etc/haproxy/haproxy.cfg &gt; /dev/null &lt;&lt;EOF\n\n# Prometheus metrics endpoint\nfrontend prometheus_frontend\n    bind *:8405\n    http-request use-service prometheus-exporter if { path /metrics }\n    http-request deny\nEOF\n\n# Create HAProxy exporter configuration\nsudo tee /etc/systemd/system/haproxy-exporter.service &gt; /dev/null &lt;&lt;EOF\n[Unit]\nDescription=HAProxy Exporter for Prometheus\nAfter=network.target\n\n[Service]\nType=simple\nUser=haproxy\nExecStart=/usr/local/bin/haproxy_exporter \\\n    --haproxy.scrape-uri=&quot;http://admin:secure_stats_password@localhost:8404/stats;csv&quot; \\\n    --web.listen-address=&quot;0.0.0.0:9101&quot;\nRestart=always\n\n[Install]\nWantedBy=multi-user.target\nEOF\n\n# Download HAProxy exporter\nHAPROXY_EXPORTER_VERSION=&quot;0.15.0&quot;\nwget https://github.com/prometheus/haproxy_exporter/releases/download/v${HAPROXY_EXPORTER_VERSION}/haproxy_exporter-${HAPROXY_EXPORTER_VERSION}.linux-amd64.tar.gz\ntar xzf haproxy_exporter-${HAPROXY_EXPORTER_VERSION}.linux-amd64.tar.gz\nsudo cp haproxy_exporter-${HAPROXY_EXPORTER_VERSION}.linux-amd64/haproxy_exporter /usr/local/bin/\n\nsudo systemctl daemon-reload\nsudo systemctl enable --now haproxy-exporter</code></pre>\n      </div>\n    </div>\n<h3 id=\"comprehensive-logging\" class=\"mobile-header\">Comprehensive Logging</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Configure rsyslog for HAProxy\nsudo tee /etc/rsyslog.d/49-haproxy.conf &gt; /dev/null &lt;&lt;EOF\n# HAProxy log configuration\n\\$ModLoad imudp\n\\$UDPServerRun 514\n\\$UDPServerAddress 127.0.0.1\n\n# HAProxy logs\nlocal0.*    /var/log/haproxy/haproxy.log\n&amp; stop\n\n# Separate access and error logs\nlocal0.info /var/log/haproxy/access.log\nlocal0.err  /var/log/haproxy/error.log\nlocal0.warning /var/log/haproxy/warning.log\nEOF\n\n# Create log directory\nsudo mkdir -p /var/log/haproxy\nsudo chown syslog:adm /var/log/haproxy\n\n# Configure log rotation\nsudo tee /etc/logrotate.d/haproxy &gt; /dev/null &lt;&lt;EOF\n/var/log/haproxy/*.log {\n    daily\n    rotate 30\n    missingok\n    notifempty\n    compress\n    delaycompress\n    postrotate\n        /bin/kill -HUP \\`cat /var/run/rsyslogd.pid 2&gt;/dev/null\\` 2&gt;/dev/null || true\n    endscript\n}\nEOF\n\nsudo systemctl restart rsyslog\nsudo systemctl reload haproxy</code></pre>\n      </div>\n    </div>\n<h2 id=\"performance-optimization\" class=\"mobile-header\">Performance Optimization</h2>\n<h3 id=\"system-level-tuning\" class=\"mobile-header\">System-Level Tuning</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Kernel optimization for HAProxy\nsudo tee -a /etc/sysctl.conf &gt; /dev/null &lt;&lt;EOF\n# HAProxy performance tuning\nnet.core.somaxconn = 65535\nnet.core.netdev_max_backlog = 5000\nnet.ipv4.tcp_max_syn_backlog = 65535\nnet.ipv4.tcp_max_tw_buckets = 400000\nnet.ipv4.tcp_tw_reuse = 1\nnet.ipv4.tcp_fin_timeout = 10\nnet.ipv4.ip_local_port_range = 15000 65000\nnet.core.rmem_default = 262144\nnet.core.rmem_max = 16777216\nnet.core.wmem_default = 262144\nnet.core.wmem_max = 16777216\nnet.ipv4.tcp_rmem = 4096 65536 16777216\nnet.ipv4.tcp_wmem = 4096 65536 16777216\nfs.file-max = 100000\nvm.swappiness = 1\nEOF\n\nsudo sysctl -p\n\n# Set resource limits\nsudo tee -a /etc/security/limits.conf &gt; /dev/null &lt;&lt;EOF\nhaproxy soft nofile 65535\nhaproxy hard nofile 65535\nhaproxy soft nproc 65535\nhaproxy hard nproc 65535\nEOF\n\n# Optimize HAProxy service\nsudo tee /etc/systemd/system/haproxy.service.d/performance.conf &gt; /dev/null &lt;&lt;EOF\n[Service]\nLimitNOFILE=65535\nLimitNPROC=65535\nExecStart=\nExecStart=/usr/sbin/haproxy -f /etc/haproxy/haproxy.cfg -p /run/haproxy.pid -S /run/haproxy-master.sock\nExecReload=/usr/sbin/haproxy -f /etc/haproxy/haproxy.cfg -c -q\nExecReload=/bin/kill -USR2 \\$MAINPID\nEOF\n\nsudo systemctl daemon-reload\nsudo systemctl restart haproxy</code></pre>\n      </div>\n    </div>\n<h3 id=\"advanced-performance-configuration\" class=\"mobile-header\">Advanced Performance Configuration</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\">sudo tee /etc/haproxy/performance.cfg &gt; /dev/null &lt;&lt;EOF\nglobal\n    # Performance optimization\n    maxconn 40000\n    nbthread 8\n    cpu-map auto:1/1-8 0-7\n    \n    # Memory optimization\n    tune.maxrewrite 1024\n    tune.bufsize 32768\n    \n    # Connection optimization\n    tune.maxaccept 500\n    tune.recv_enough 10000\n    \n    # SSL optimization\n    tune.ssl.default-dh-param 2048\n    tune.ssl.maxrecord 1460\n    tune.ssl.capture-buffer-size 0\n    \n    # Compression\n    tune.comp.maxlevel 6\n\ndefaults\n    # Performance settings\n    maxconn 8000\n    \n    # Timeouts\n    timeout connect 3s\n    timeout client 25s\n    timeout server 25s\n    timeout tunnel 3600s\n    timeout http-keep-alive 1s\n    timeout http-request 15s\n    timeout queue 30s\n    timeout tarpit 60s\n    \n    # Keep-alive optimization\n    option http-keep-alive\n    option prefer-last-server\n    \n    # Compression\n    compression algo gzip\n    compression type text/html text/css text/javascript application/javascript application/json application/xml\n\n# High-performance backend configuration\nbackend high_performance_backend\n    balance leastconn\n    option httpchk GET /health\n    http-check expect status 200\n    \n    # Connection pooling\n    option http-reuse always\n    \n    # Server configuration with optimal settings\n    default-server inter 1000 fastinter 500 downinter 2000 rise 2 fall 3 slowstart 30s maxconn 1000 maxqueue 256 weight 100\n    \n    server web1 192.168.1.10:8080 check\n    server web2 192.168.1.11:8080 check\n    server web3 192.168.1.12:8080 check\n    server web4 192.168.1.13:8080 check\nEOF</code></pre>\n      </div>\n    </div>\n<h2 id=\"backup-and-disaster-recovery\" class=\"mobile-header\">Backup and Disaster Recovery</h2>\n<h3 id=\"configuration-management-and-backup\" class=\"mobile-header\">Configuration Management and Backup</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\">sudo tee /usr/local/bin/haproxy-backup.sh &gt; /dev/null &lt;&lt;&#039;EOF&#039;\n#!/bin/bash\nBACKUP_DIR=&quot;/backup/haproxy&quot;\nDATE=$(date +%Y%m%d_%H%M%S)\n\nmkdir -p ${BACKUP_DIR}/{config,ssl,stats,logs}\n\n# Backup configuration files\ntar -czf ${BACKUP_DIR}/config/haproxy-config-${DATE}.tar.gz \\\n    /etc/haproxy/ \\\n    /etc/systemd/system/haproxy.service* \\\n    /etc/keepalived/\n\n# Backup SSL certificates\ntar -czf ${BACKUP_DIR}/ssl/haproxy-ssl-${DATE}.tar.gz \\\n    /etc/haproxy/ssl/ \\\n    /etc/letsencrypt/\n\n# Backup statistics and runtime state\necho &quot;show stat&quot; | socat stdio /run/haproxy/admin.sock &gt; ${BACKUP_DIR}/stats/haproxy-stats-${DATE}.txt\necho &quot;show info&quot; | socat stdio /run/haproxy/admin.sock &gt; ${BACKUP_DIR}/stats/haproxy-info-${DATE}.txt\necho &quot;show sess&quot; | socat stdio /run/haproxy/admin.sock &gt; ${BACKUP_DIR}/stats/haproxy-sessions-${DATE}.txt\n\n# Backup recent logs\nfind /var/log/haproxy -name &quot;*.log&quot; -mtime -1 -exec tar -czf ${BACKUP_DIR}/logs/haproxy-logs-${DATE}.tar.gz {} +\n\n# Upload to cloud storage\naws s3 cp ${BACKUP_DIR}/ s3://haproxy-backups/ --recursive\naz storage blob upload-batch --source ${BACKUP_DIR} --destination haproxy-backups\ngsutil cp -r ${BACKUP_DIR}/* gs://haproxy-backups/\n\n# Keep only last 15 backups\nfind ${BACKUP_DIR} -name &quot;haproxy-*&quot; -type f -mtime +15 -delete\n\n# Test configuration validity\nhaproxy -c -f /etc/haproxy/haproxy.cfg\n\necho &quot;HAProxy backup completed: ${DATE}&quot;\nEOF\n\nsudo chmod +x /usr/local/bin/haproxy-backup.sh\n\n# Schedule daily backups\necho &quot;0 2 * * * root /usr/local/bin/haproxy-backup.sh&quot; | sudo tee -a /etc/crontab</code></pre>\n      </div>\n    </div>\n<h3 id=\"disaster-recovery-automation\" class=\"mobile-header\">Disaster Recovery Automation</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\">sudo tee /usr/local/bin/haproxy-dr.sh &gt; /dev/null &lt;&lt;&#039;EOF&#039;\n#!/bin/bash\nDR_MODE=&quot;${1:-test}&quot;  # test, activate, or deactivate\n\ncase &quot;$DR_MODE&quot; in\n    &quot;test&quot;)\n        echo &quot;Testing DR procedures...&quot;\n        \n        # Test backup restoration\n        LATEST_BACKUP=$(ls -t /backup/haproxy/config/haproxy-config-*.tar.gz | head -1)\n        if [ -n &quot;$LATEST_BACKUP&quot; ]; then\n            echo &quot;âœ“ Latest backup found: $LATEST_BACKUP&quot;\n        else\n            echo &quot;âœ— No backup files found&quot;\n            exit 1\n        fi\n        \n        # Test configuration\n        haproxy -c -f /etc/haproxy/haproxy.cfg\n        echo &quot;âœ“ Configuration is valid&quot;\n        \n        # Test backend connectivity\n        for backend in $(echo &quot;show stat&quot; | socat stdio /run/haproxy/admin.sock | grep &quot;,BACKEND,&quot; | cut -d, -f1); do\n            echo &quot;Testing backend: $backend&quot;\n            echo &quot;show stat&quot; | socat stdio /run/haproxy/admin.sock | grep &quot;$backend&quot;\n        done\n        \n        echo &quot;DR test completed&quot;\n        ;;\n        \n    &quot;activate&quot;)\n        echo &quot;Activating DR procedures...&quot;\n        \n        # Switch to DR configuration\n        cp /etc/haproxy/haproxy-dr.cfg /etc/haproxy/haproxy.cfg\n        \n        # Reload HAProxy\n        systemctl reload haproxy\n        \n        # Update DNS (example with Route53)\n        aws route53 change-resource-record-sets --hosted-zone-id Z123456789 --change-batch file://dr-dns-update.json\n        \n        echo &quot;DR activated&quot;\n        ;;\n        \n    &quot;deactivate&quot;)\n        echo &quot;Deactivating DR procedures...&quot;\n        \n        # Restore original configuration\n        cp /etc/haproxy/haproxy.cfg.backup /etc/haproxy/haproxy.cfg\n        \n        # Reload HAProxy\n        systemctl reload haproxy\n        \n        # Update DNS back to primary\n        aws route53 change-resource-record-sets --hosted-zone-id Z123456789 --change-batch file://primary-dns-update.json\n        \n        echo &quot;DR deactivated&quot;\n        ;;\n        \n    *)\n        echo &quot;Usage: $0 {test|activate|deactivate}&quot;\n        exit 1\n        ;;\nesac\nEOF\n\nsudo chmod +x /usr/local/bin/haproxy-dr.sh</code></pre>\n      </div>\n    </div>\n<h2 id=\"verification-and-health-checks\" class=\"mobile-header\">Verification and Health Checks</h2>\n<h3 id=\"comprehensive-health-monitoring\" class=\"mobile-header\">Comprehensive Health Monitoring</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\">sudo tee /usr/local/bin/haproxy-health-check.sh &gt; /dev/null &lt;&lt;&#039;EOF&#039;\n#!/bin/bash\nHEALTH_LOG=&quot;/var/log/haproxy-health.log&quot;\n\nlog_message() {\n    echo &quot;$(date &#039;+%Y-%m-%d %H:%M:%S&#039;) - $1&quot; | tee -a ${HEALTH_LOG}\n}\n\n# Check HAProxy service status\nif systemctl is-active haproxy &gt;/dev/null 2&gt;&amp;1; then\n    log_message &quot;âœ“ HAProxy service is running&quot;\nelse\n    log_message &quot;âœ— HAProxy service is not running&quot;\n    exit 1\nfi\n\n# Check configuration validity\nif haproxy -c -f /etc/haproxy/haproxy.cfg &gt;/dev/null 2&gt;&amp;1; then\n    log_message &quot;âœ“ HAProxy configuration is valid&quot;\nelse\n    log_message &quot;âœ— HAProxy configuration has errors&quot;\n    haproxy -c -f /etc/haproxy/haproxy.cfg\nfi\n\n# Check listening ports\nLISTENING_PORTS=$(netstat -tlnp | grep haproxy | wc -l)\nlog_message &quot;âœ“ HAProxy is listening on ${LISTENING_PORTS} ports&quot;\n\n# Check backend server health\nBACKEND_STATS=$(echo &quot;show stat&quot; | socat stdio /run/haproxy/admin.sock | grep -c &quot;,UP,&quot;)\nTOTAL_SERVERS=$(echo &quot;show stat&quot; | socat stdio /run/haproxy/admin.sock | grep -c &quot;,.*,&quot;)\nlog_message &quot;âœ“ ${BACKEND_STATS}/${TOTAL_SERVERS} backend servers are healthy&quot;\n\n# Check SSL certificate expiry\nif [ -d /etc/haproxy/ssl ]; then\n    for cert in /etc/haproxy/ssl/*.pem; do\n        if [ -f &quot;$cert&quot; ]; then\n            EXPIRY=$(openssl x509 -in &quot;$cert&quot; -noout -dates | grep notAfter | cut -d= -f2)\n            EXPIRY_EPOCH=$(date -d &quot;$EXPIRY&quot; +%s)\n            CURRENT_EPOCH=$(date +%s)\n            DAYS_TO_EXPIRY=$(( (EXPIRY_EPOCH - CURRENT_EPOCH) / 86400 ))\n            \n            if [ $DAYS_TO_EXPIRY -lt 30 ]; then\n                log_message &quot;âš  SSL certificate $(basename $cert) expires in ${DAYS_TO_EXPIRY} days&quot;\n            else\n                log_message &quot;âœ“ SSL certificate $(basename $cert) expires in ${DAYS_TO_EXPIRY} days&quot;\n            fi\n        fi\n    done\nfi\n\n# Check memory usage\nMEMORY_USAGE=$(ps -o pid,vsz,rss,comm -C haproxy | tail -1 | awk &#039;{print $3/1024}&#039;)\nlog_message &quot;â„¹ HAProxy memory usage: ${MEMORY_USAGE}MB&quot;\n\n# Check connection statistics\nCURRENT_CONNS=$(echo &quot;show info&quot; | socat stdio /run/haproxy/admin.sock | grep &quot;CurrConns&quot; | cut -d: -f2 | tr -d &#039; &#039;)\nMAX_CONNS=$(echo &quot;show info&quot; | socat stdio /run/haproxy/admin.sock | grep &quot;MaxConn&quot; | cut -d: -f2 | tr -d &#039; &#039;)\nlog_message &quot;â„¹ Current connections: ${CURRENT_CONNS}/${MAX_CONNS}&quot;\n\n# Check for any backend servers that are down\nDOWN_SERVERS=$(echo &quot;show stat&quot; | socat stdio /run/haproxy/admin.sock | grep &quot;,DOWN,&quot; | wc -l)\nif [ $DOWN_SERVERS -gt 0 ]; then\n    log_message &quot;âš  ${DOWN_SERVERS} backend servers are down&quot;\n    echo &quot;show stat&quot; | socat stdio /run/haproxy/admin.sock | grep &quot;,DOWN,&quot; | while IFS=, read pxname svname; do\n        log_message &quot;  - ${pxname}/${svname} is DOWN&quot;\n    done\nfi\n\nlog_message &quot;HAProxy health check completed&quot;\nEOF\n\nsudo chmod +x /usr/local/bin/haproxy-health-check.sh\n\n# Schedule health checks every 5 minutes\necho &quot;*/5 * * * * root /usr/local/bin/haproxy-health-check.sh&quot; | sudo tee -a /etc/crontab</code></pre>\n      </div>\n    </div>\n<h3 id=\"load-testing-and-performance-validation\" class=\"mobile-header\">Load Testing and Performance Validation</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\">sudo tee /usr/local/bin/haproxy-load-test.sh &gt; /dev/null &lt;&lt;&#039;EOF&#039;\n#!/bin/bash\nTEST_RESULTS=&quot;/tmp/haproxy-load-test-$(date +%Y%m%d_%H%M%S).txt&quot;\nTEST_URL=&quot;https://example.com&quot;\nCONCURRENT_USERS=100\nTEST_DURATION=60\n\necho &quot;HAProxy Load Test Results&quot; &gt; ${TEST_RESULTS}\necho &quot;========================&quot; &gt;&gt; ${TEST_RESULTS}\necho &quot;Date: $(date)&quot; &gt;&gt; ${TEST_RESULTS}\necho &quot;Target URL: ${TEST_URL}&quot; &gt;&gt; ${TEST_RESULTS}\necho &quot;Concurrent Users: ${CONCURRENT_USERS}&quot; &gt;&gt; ${TEST_RESULTS}\necho &quot;Test Duration: ${TEST_DURATION}s&quot; &gt;&gt; ${TEST_RESULTS}\necho &quot;&quot; &gt;&gt; ${TEST_RESULTS}\n\n# Install testing tools if not available\nif ! command -v ab &amp;&gt; /dev/null; then\n    apt-get update &amp;&amp; apt-get install -y apache2-utils\nfi\n\nif ! command -v wrk &amp;&gt; /dev/null; then\n    git clone https://github.com/wg/wrk.git /tmp/wrk\n    cd /tmp/wrk &amp;&amp; make &amp;&amp; cp wrk /usr/local/bin/\nfi\n\n# Run Apache Bench test\necho &quot;Apache Bench Results:&quot; &gt;&gt; ${TEST_RESULTS}\nab -n 10000 -c ${CONCURRENT_USERS} -k ${TEST_URL}/ &gt;&gt; ${TEST_RESULTS} 2&gt;&amp;1\n\necho &quot;&quot; &gt;&gt; ${TEST_RESULTS}\necho &quot;WRK Results:&quot; &gt;&gt; ${TEST_RESULTS}\nwrk -t4 -c${CONCURRENT_USERS} -d${TEST_DURATION}s --latency ${TEST_URL}/ &gt;&gt; ${TEST_RESULTS}\n\n# Capture HAProxy stats during test\necho &quot;&quot; &gt;&gt; ${TEST_RESULTS}\necho &quot;HAProxy Statistics During Test:&quot; &gt;&gt; ${TEST_RESULTS}\necho &quot;show info&quot; | socat stdio /run/haproxy/admin.sock &gt;&gt; ${TEST_RESULTS}\necho &quot;show stat&quot; | socat stdio /run/haproxy/admin.sock &gt;&gt; ${TEST_RESULTS}\n\necho &quot;&quot; &gt;&gt; ${TEST_RESULTS}\necho &quot;Load test completed at: $(date)&quot; &gt;&gt; ${TEST_RESULTS}\n\necho &quot;Load test completed. Results: ${TEST_RESULTS}&quot;\nEOF\n\nsudo chmod +x /usr/local/bin/haproxy-load-test.sh</code></pre>\n      </div>\n    </div>\n<h2 id=\"firewall-configuration-cross-platform\" class=\"mobile-header\">Firewall Configuration (Cross-Platform)</h2>\n<h3 id=\"security-rules\" class=\"mobile-header\">Security Rules</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># UFW (Ubuntu/Debian)\nsudo ufw allow 80/tcp comment &#039;HTTP&#039;\nsudo ufw allow 443/tcp comment &#039;HTTPS&#039; \nsudo ufw allow from 192.168.1.0/24 to any port 8404 comment &#039;Stats interface - internal only&#039;\nsudo ufw allow from 192.168.1.0/24 to any port 9101 comment &#039;Prometheus exporter - internal only&#039;\nsudo ufw deny 8404 comment &#039;Block stats from public&#039;\nsudo ufw enable\n\n# Firewalld (RHEL/CentOS/Fedora)\nsudo firewall-cmd --permanent --add-service=http\nsudo firewall-cmd --permanent --add-service=https\nsudo firewall-cmd --permanent --new-zone=haproxy-mgmt\nsudo firewall-cmd --permanent --zone=haproxy-mgmt --add-source=192.168.1.0/24\nsudo firewall-cmd --permanent --zone=haproxy-mgmt --add-port=8404/tcp\nsudo firewall-cmd --permanent --zone=haproxy-mgmt --add-port=9101/tcp\nsudo firewall-cmd --reload\n\n# iptables (Universal)\nsudo iptables -A INPUT -p tcp --dport 80 -j ACCEPT\nsudo iptables -A INPUT -p tcp --dport 443 -j ACCEPT\nsudo iptables -A INPUT -p tcp -s 192.168.1.0/24 --dport 8404 -j ACCEPT\nsudo iptables -A INPUT -p tcp -s 192.168.1.0/24 --dport 9101 -j ACCEPT\nsudo iptables -A INPUT -p tcp --dport 8404 -j DROP\nsudo iptables -A INPUT -p tcp --dport 9101 -j DROP\n\n# Save iptables rules\n# Ubuntu/Debian\nsudo apt install -y iptables-persistent\nsudo netfilter-persistent save\n\n# RHEL/CentOS\nsudo service iptables save</code></pre>\n      </div>\n    </div>\n<h3 id=\"ddos-protection-configuration\" class=\"mobile-header\">DDoS Protection Configuration</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\">sudo tee /etc/haproxy/ddos-protection.cfg &gt; /dev/null &lt;&lt;EOF\n# DDoS Protection Configuration\n\nglobal\n    # Stick tables for tracking\n    tune.stick-table.enable 1\n\nfrontend ddos_protection\n    bind *:80\n    bind *:443 ssl crt /etc/haproxy/ssl/\n    \n    # Track client behavior\n    stick-table type ip size 1m expire 5m store gpc0,gpc1,http_req_rate(10s),http_err_rate(10s),conn_rate(10s),bytes_out_rate(10s)\n    \n    # Track requests\n    http-request track-sc0 src\n    \n    # Rate limiting rules\n    acl abuse_request_rate sc_http_req_rate(0) gt 100\n    acl abuse_connection_rate sc_conn_rate(0) gt 20\n    acl abuse_error_rate sc_http_err_rate(0) gt 10\n    acl abuse_bandwidth sc_bytes_out_rate(0) gt 10000000  # 10MB/s\n    \n    # Geographic blocking (requires GeoIP)\n    # acl blocked_countries src,map_ip(/etc/haproxy/geoip-country.map) -i CN RU\n    \n    # User-Agent filtering\n    acl bad_user_agent hdr_sub(User-Agent) -i &quot;sqlmap&quot; &quot;nikto&quot; &quot;nmap&quot; &quot;masscan&quot; &quot;zmap&quot;\n    acl empty_user_agent hdr_cnt(User-Agent) eq 0\n    \n    # HTTP method filtering\n    acl allowed_methods method GET POST PUT DELETE HEAD OPTIONS PATCH\n    \n    # Deny rules\n    http-request deny if abuse_request_rate\n    http-request deny if abuse_connection_rate\n    http-request deny if abuse_error_rate\n    http-request deny if abuse_bandwidth\n    http-request deny if bad_user_agent\n    http-request deny if empty_user_agent\n    http-request deny if !allowed_methods\n    # http-request deny if blocked_countries\n    \n    # Tarpit suspicious clients\n    http-request tarpit if { sc_http_req_rate(0) gt 50 }\n    \n    default_backend web_servers\n\n# Clean backend\nbackend web_servers\n    balance leastconn\n    option httpchk GET /health\n    \n    server web1 192.168.1.10:8080 check\n    server web2 192.168.1.11:8080 check\n    server web3 192.168.1.12:8080 check\nEOF</code></pre>\n      </div>\n    </div>\n<h2 id=\"runtime-management-and-monitoring\" class=\"mobile-header\">Runtime Management and Monitoring</h2>\n<h3 id=\"advanced-runtime-commands\" class=\"mobile-header\">Advanced Runtime Commands</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Create HAProxy management script\nsudo tee /usr/local/bin/haproxy-manage.sh &gt; /dev/null &lt;&lt;&#039;EOF&#039;\n#!/bin/bash\nHAPROXY_SOCKET=&quot;/run/haproxy/admin.sock&quot;\n\ncase &quot;$1&quot; in\n    &quot;status&quot;)\n        echo &quot;=== HAProxy Status ===&quot;\n        echo &quot;show info&quot; | socat stdio ${HAPROXY_SOCKET}\n        echo &quot;&quot;\n        echo &quot;=== Server Status ===&quot;\n        echo &quot;show stat&quot; | socat stdio ${HAPROXY_SOCKET} | column -t -s &quot;,&quot;\n        ;;\n    \n    &quot;enable&quot;)\n        if [ -z &quot;$2&quot; ] || [ -z &quot;$3&quot; ]; then\n            echo &quot;Usage: $0 enable &lt;backend&gt; &lt;server&gt;&quot;\n            exit 1\n        fi\n        echo &quot;enable server $2/$3&quot; | socat stdio ${HAPROXY_SOCKET}\n        echo &quot;Server $2/$3 enabled&quot;\n        ;;\n    \n    &quot;disable&quot;)\n        if [ -z &quot;$2&quot; ] || [ -z &quot;$3&quot; ]; then\n            echo &quot;Usage: $0 disable &lt;backend&gt; &lt;server&gt;&quot;\n            exit 1\n        fi\n        echo &quot;disable server $2/$3&quot; | socat stdio ${HAPROXY_SOCKET}\n        echo &quot;Server $2/$3 disabled&quot;\n        ;;\n    \n    &quot;weight&quot;)\n        if [ -z &quot;$2&quot; ] || [ -z &quot;$3&quot; ] || [ -z &quot;$4&quot; ]; then\n            echo &quot;Usage: $0 weight &lt;backend&gt; &lt;server&gt; &lt;weight&gt;&quot;\n            exit 1\n        fi\n        echo &quot;set weight $2/$3 $4&quot; | socat stdio ${HAPROXY_SOCKET}\n        echo &quot;Weight for $2/$3 set to $4&quot;\n        ;;\n    \n    &quot;sessions&quot;)\n        echo &quot;=== Active Sessions ===&quot;\n        echo &quot;show sess&quot; | socat stdio ${HAPROXY_SOCKET}\n        ;;\n    \n    &quot;errors&quot;)\n        echo &quot;=== Recent Errors ===&quot;\n        echo &quot;show errors&quot; | socat stdio ${HAPROXY_SOCKET}\n        ;;\n    \n    &quot;reload&quot;)\n        echo &quot;Reloading HAProxy configuration...&quot;\n        if haproxy -c -f /etc/haproxy/haproxy.cfg; then\n            systemctl reload haproxy\n            echo &quot;Configuration reloaded successfully&quot;\n        else\n            echo &quot;Configuration has errors, reload aborted&quot;\n            exit 1\n        fi\n        ;;\n    \n    &quot;drain&quot;)\n        if [ -z &quot;$2&quot; ] || [ -z &quot;$3&quot; ]; then\n            echo &quot;Usage: $0 drain &lt;backend&gt; &lt;server&gt;&quot;\n            exit 1\n        fi\n        echo &quot;set server $2/$3 state drain&quot; | socat stdio ${HAPROXY_SOCKET}\n        echo &quot;Server $2/$3 is being drained&quot;\n        \n        # Wait for connections to finish\n        while [ $(echo &quot;show stat&quot; | socat stdio ${HAPROXY_SOCKET} | grep &quot;$2,$3&quot; | cut -d, -f5) -gt 0 ]; do\n            echo &quot;Waiting for connections to finish...&quot;\n            sleep 5\n        done\n        echo &quot;Server $2/$3 has been drained&quot;\n        ;;\n    \n    *)\n        echo &quot;Usage: $0 {status|enable|disable|weight|sessions|errors|reload|drain} [options]&quot;\n        echo &quot;&quot;\n        echo &quot;Examples:&quot;\n        echo &quot;  $0 status&quot;\n        echo &quot;  $0 enable web_servers web1&quot;\n        echo &quot;  $0 disable web_servers web1&quot;\n        echo &quot;  $0 weight web_servers web1 50&quot;\n        echo &quot;  $0 drain web_servers web1&quot;\n        echo &quot;  $0 sessions&quot;\n        echo &quot;  $0 errors&quot;\n        echo &quot;  $0 reload&quot;\n        exit 1\n        ;;\nesac\nEOF\n\nsudo chmod +x /usr/local/bin/haproxy-manage.sh</code></pre>\n      </div>\n    </div>\n<h3 id=\"automated-log-analysis\" class=\"mobile-header\">Automated Log Analysis</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\">sudo tee /usr/local/bin/haproxy-log-analysis.sh &gt; /dev/null &lt;&lt;&#039;EOF&#039;\n#!/bin/bash\nLOG_FILE=&quot;/var/log/haproxy/haproxy.log&quot;\nANALYSIS_DIR=&quot;/var/log/haproxy-analysis&quot;\nDATE=$(date +%Y%m%d_%H%M%S)\n\nmkdir -p ${ANALYSIS_DIR}\n\n# Top client IPs\necho &quot;Top Client IPs - ${DATE}&quot; &gt; ${ANALYSIS_DIR}/top-clients-${DATE}.txt\nawk &#039;{print $6}&#039; ${LOG_FILE} | sort | uniq -c | sort -nr | head -20 &gt;&gt; ${ANALYSIS_DIR}/top-clients-${DATE}.txt\n\n# Response time analysis\necho &quot;Response Time Analysis - ${DATE}&quot; &gt; ${ANALYSIS_DIR}/response-times-${DATE}.txt\nawk &#039;{print $11}&#039; ${LOG_FILE} | grep -v &#039;^-$&#039; | sort -n | tail -100 &gt;&gt; ${ANALYSIS_DIR}/response-times-${DATE}.txt\n\n# Error analysis\necho &quot;Error Analysis - ${DATE}&quot; &gt; ${ANALYSIS_DIR}/errors-${DATE}.txt\nawk &#039;$10 &gt;= 400 {print $0}&#039; ${LOG_FILE} | tail -100 &gt;&gt; ${ANALYSIS_DIR}/errors-${DATE}.txt\n\n# Backend server analysis\necho &quot;Backend Server Performance - ${DATE}&quot; &gt; ${ANALYSIS_DIR}/backend-performance-${DATE}.txt\nawk &#039;{print $8}&#039; ${LOG_FILE} | sort | uniq -c | sort -nr &gt;&gt; ${ANALYSIS_DIR}/backend-performance-${DATE}.txt\n\n# SSL/TLS analysis\necho &quot;SSL/TLS Analysis - ${DATE}&quot; &gt; ${ANALYSIS_DIR}/ssl-analysis-${DATE}.txt\ngrep &quot;SSL&quot; ${LOG_FILE} | tail -50 &gt;&gt; ${ANALYSIS_DIR}/ssl-analysis-${DATE}.txt\n\n# Generate summary report\ncat &gt; ${ANALYSIS_DIR}/summary-${DATE}.txt &lt;&lt;EOL\nHAProxy Log Analysis Summary - ${DATE}\n=====================================\n\nTotal Requests: $(wc -l &lt; ${LOG_FILE})\nUnique IPs: $(awk &#039;{print $6}&#039; ${LOG_FILE} | sort -u | wc -l)\n4xx Errors: $(awk &#039;$10 &gt;= 400 &amp;&amp; $10 &lt; 500 {print $0}&#039; ${LOG_FILE} | wc -l)\n5xx Errors: $(awk &#039;$10 &gt;= 500 {print $0}&#039; ${LOG_FILE} | wc -l)\n\nAverage Response Time: $(awk &#039;{sum += $11; count++} END {print sum/count}&#039; ${LOG_FILE})ms\n\nTop 5 Requested URLs:\n$(awk &#039;{print $12}&#039; ${LOG_FILE} | sort | uniq -c | sort -nr | head -5)\n\nAnalysis completed at: $(date)\nEOL\n\necho &quot;Log analysis completed. Reports in: ${ANALYSIS_DIR}/&quot;\nEOF\n\nsudo chmod +x /usr/local/bin/haproxy-log-analysis.sh\n\n# Schedule daily log analysis\necho &quot;0 6 * * * root /usr/local/bin/haproxy-log-analysis.sh&quot; | sudo tee -a /etc/crontab</code></pre>\n      </div>\n    </div>\n<h2 id=\"troubleshooting-cross-platform\" class=\"mobile-header\">Troubleshooting (Cross-Platform)</h2>\n<h3 id=\"common-issues-and-solutions\" class=\"mobile-header\">Common Issues and Solutions</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Check HAProxy process status\nps aux | grep haproxy\nsystemctl status haproxy\n\n# Configuration validation\nhaproxy -c -f /etc/haproxy/haproxy.cfg\nhaproxy -c -V -f /etc/haproxy/haproxy.cfg\n\n# Socket connectivity test\nsocat - /run/haproxy/admin.sock\necho &quot;show info&quot; | socat stdio /run/haproxy/admin.sock\n\n# Backend server connectivity test\nfor server in 192.168.1.10 192.168.1.11 192.168.1.12; do\n    echo &quot;Testing $server...&quot;\n    nc -zv $server 8080\n    curl -I http://$server:8080/health\ndone\n\n# SSL certificate issues\nopenssl x509 -in /etc/haproxy/ssl/example.com.pem -text -noout\nopenssl verify -CAfile /etc/haproxy/ssl/ca.crt /etc/haproxy/ssl/example.com.pem\n\n# Memory usage debugging\npmap -x $(pgrep haproxy)\ncat /proc/$(pgrep haproxy)/status | grep -E &quot;(VmSize|VmRSS|VmData|VmStk)&quot;\n\n# Network debugging\nss -tulpn | grep haproxy\nnetstat -tulpn | grep haproxy\nlsof -i :80,443,8404\n\n# Log debugging\ntail -f /var/log/haproxy/haproxy.log\njournalctl -u haproxy -f\n\n# Performance debugging\necho &quot;show stat&quot; | socat stdio /run/haproxy/admin.sock | grep -v &quot;^#&quot;\necho &quot;show sess&quot; | socat stdio /run/haproxy/admin.sock\necho &quot;show pools&quot; | socat stdio /run/haproxy/admin.sock\n\n# Configuration debugging\nhaproxy -vv\nhaproxy -dM -f /etc/haproxy/haproxy.cfg  # Don&#039;t use in production\n\n# Check for core dumps\nfind /var/crash -name &quot;haproxy*&quot; 2&gt;/dev/null\nfind /var/lib/systemd/coredump -name &quot;*haproxy*&quot; 2&gt;/dev/null</code></pre>\n      </div>\n    </div>\n<h3 id=\"advanced-debugging\" class=\"mobile-header\">Advanced Debugging</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Enable debug logging\nsudo systemctl edit haproxy.service\n# Add:\n[Service]\nExecStart=\nExecStart=/usr/sbin/haproxy -f /etc/haproxy/haproxy.cfg -p /run/haproxy.pid -S /run/haproxy-master.sock -d\n\nsudo systemctl daemon-reload\nsudo systemctl restart haproxy\n\n# Real-time connection monitoring\nwatch -n 1 &#039;echo &quot;show stat&quot; | socat stdio /run/haproxy/admin.sock | grep -E &quot;FRONTEND|BACKEND&quot; | column -t -s &quot;,&quot;&#039;\n\n# TCP dump for network analysis\ntcpdump -i any -w haproxy-traffic.pcap port 80 or port 443\ntcpdump -i any -w backend-traffic.pcap host 192.168.1.10\n\n# Strace HAProxy process\nstrace -p $(pgrep haproxy) -e trace=network\n\n# Monitor file descriptors\nlsof -p $(pgrep haproxy) | wc -l\ncat /proc/$(pgrep haproxy)/limits | grep &quot;Max open files&quot;\n\n# Check shared memory segments\nipcs -m | grep haproxy\n\n# Monitor syscalls\nperf trace -p $(pgrep haproxy)</code></pre>\n      </div>\n    </div>\n<h2 id=\"additional-resources\" class=\"mobile-header\">Additional Resources</h2>\n<li class=\"mobile-list-item\"><a href=\"https://docs.haproxy.org/\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">Official Documentation</a></li>\n<li class=\"mobile-list-item\"><a href=\"https://cbonte.github.io/haproxy-dconv/\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">HAProxy Configuration Manual</a></li>\n<li class=\"mobile-list-item\"><a href=\"https://www.haproxy.com/documentation/hapee/latest/configuration/best-practices/\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">Best Practices Guide</a></li>\n<li class=\"mobile-list-item\"><a href=\"https://www.haproxy.com/blog/haproxy-performance-tuning/\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">Performance Tuning Guide</a></li>\n<li class=\"mobile-list-item\"><a href=\"https://www.haproxy.com/solutions/security/\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">Security Guide</a></li>\n<li class=\"mobile-list-item\"><a href=\"https://discourse.haproxy.org/\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">Community Forum</a></li>\n<p class=\"mobile-paragraph\">---</p>\n<p class=\"mobile-paragraph\"><strong>Note:</strong> This guide is part of the <a href=\"https://howtomgr.github.io\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">HowToMgr</a> collection.</p>","readTime":"29 min","wordCount":5710,"lastBuilt":"2025-09-14T18:12:05.087Z"},{"name":"home-assistant","displayName":"Home Assistant","slug":"home-assistant","description":"Repo for home-assistant","category":"infrastructure","language":null,"stars":0,"forks":0,"topics":[],"githubUrl":"https://github.com/howtomgr/home-assistant","updatedAt":"2025-09-08T03:08:39Z","createdAt":"2023-08-28T03:48:06Z","readmeRaw":"# Home-Assistant on CentOS 7\n\n```bash\n# Optionally add user\n#adduser --system --shell=/bin/bash --home=/var/lib/homeassistant  homeassistant\n\nwget https://github.com/casjay-base/howtos/raw/main/home-assistant/rpm-packages.txt -O /tmp/hass-rpms.txt\nwget https://github.com/casjay-base/howtos/raw/main/home-assistant/requirements-el7.txt -O /tmp/hass-pips.txt\n\nyum install -y $(cat /tmp/hass-rpms.txt)\n\n#Optional switch to user and clone repo\n#su - homeassistant\n#git clone https://github.com/casjay-devices/home-assistant /var/lib/homeassistant/.homeassistant\n\ncd /var/lib/homeassistant && python3 -m venv . && source ./bin/activate\n\n/var/lib/homeassistant/bin/python3 -m pip install --upgrade pip\n/var/lib/homeassistant/bin/python3 -m pip install wheel\n/var/lib/homeassistant/bin/python3 -m pip install python-openzwave\n/var/lib/homeassistant/bin/python3 -m pip install homeassistant \n/var/lib/homeassistant/bin/python3 -m pip install -r /tmp/hass-pips.txt\nsystemctl daemon-reload && systemctl enable hass.service\n\necho 'SUBSYSTEM==\"tty\", ATTRS{idVendor}==\"0658\", ATTRS{idProduct}==\"0200\", SYMLINK+=\"zwave\"' >> /etc/udev/rules.d/99-usb-serial.rules\necho 'SUBSYSTEM==\"tty\", ATTRS{idVendor}==\"067b\", ATTRS{idProduct}==\"2303\", SYMLINK+=\"gps\"' >> /etc/udev/rules.d/99-usb-serial.rules\n\ndeactivate\n```\n","readmeHtml":"<h1 id=\"home-assistant-on-centos-7\" class=\"mobile-header\">Home-Assistant on CentOS 7</h1>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Optionally add user\n#adduser --system --shell=/bin/bash --home=/var/lib/homeassistant  homeassistant\n\nwget https://github.com/casjay-base/howtos/raw/main/home-assistant/rpm-packages.txt -O /tmp/hass-rpms.txt\nwget https://github.com/casjay-base/howtos/raw/main/home-assistant/requirements-el7.txt -O /tmp/hass-pips.txt\n\nyum install -y $(cat /tmp/hass-rpms.txt)\n\n#Optional switch to user and clone repo\n#su - homeassistant\n#git clone https://github.com/casjay-devices/home-assistant /var/lib/homeassistant/.homeassistant\n\ncd /var/lib/homeassistant &amp;&amp; python3 -m venv . &amp;&amp; source ./bin/activate\n\n/var/lib/homeassistant/bin/python3 -m pip install --upgrade pip\n/var/lib/homeassistant/bin/python3 -m pip install wheel\n/var/lib/homeassistant/bin/python3 -m pip install python-openzwave\n/var/lib/homeassistant/bin/python3 -m pip install homeassistant \n/var/lib/homeassistant/bin/python3 -m pip install -r /tmp/hass-pips.txt\nsystemctl daemon-reload &amp;&amp; systemctl enable hass.service\n\necho &#039;SUBSYSTEM==&quot;tty&quot;, ATTRS{idVendor}==&quot;0658&quot;, ATTRS{idProduct}==&quot;0200&quot;, SYMLINK+=&quot;zwave&quot;&#039; &gt;&gt; /etc/udev/rules.d/99-usb-serial.rules\necho &#039;SUBSYSTEM==&quot;tty&quot;, ATTRS{idVendor}==&quot;067b&quot;, ATTRS{idProduct}==&quot;2303&quot;, SYMLINK+=&quot;gps&quot;&#039; &gt;&gt; /etc/udev/rules.d/99-usb-serial.rules\n\ndeactivate</code></pre>\n      </div>\n    </div>","readTime":"1 min","wordCount":102,"lastBuilt":"2025-09-14T18:12:19.406Z"},{"name":"influxdb","displayName":"Influxdb","slug":"influxdb","description":"Repo for influxdb","category":"infrastructure","language":null,"stars":0,"forks":0,"topics":[],"githubUrl":"https://github.com/howtomgr/influxdb","updatedAt":"2025-09-08T03:08:55Z","createdAt":"2025-09-08T03:08:45Z","readmeRaw":"## ðŸ‘‹ Welcome to influxdb ðŸš€  \n\ninfluxdb README  \n  \n  \n## Author  \n\nðŸ¤– casjay: [Github](https://github.com/casjay) ðŸ¤–  \n","readmeHtml":"<h2 id=\"welcome-to-influxdb\" class=\"mobile-header\">ðŸ‘‹ Welcome to influxdb ðŸš€  </h2>\n<p class=\"mobile-paragraph\">influxdb README  </p>\n<h2 id=\"author\" class=\"mobile-header\">Author  </h2>\n<p class=\"mobile-paragraph\">ðŸ¤– casjay: <a href=\"https://github.com/casjay\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">Github</a> ðŸ¤–  </p>","readTime":"1 min","wordCount":15,"lastBuilt":"2025-09-14T18:12:19.192Z"},{"name":"jellyfin","displayName":"Jellyfin","slug":"jellyfin","description":"Repo for jellyfin","category":"media","language":null,"stars":0,"forks":0,"topics":[],"githubUrl":"https://github.com/howtomgr/jellyfin","updatedAt":"2025-09-14T01:30:13Z","createdAt":"2025-09-08T03:08:57Z","readmeRaw":"# Jellyfin Installation Guide\n\nOpen-source media server for managing and streaming your personal media collection. Modern alternative to Plex with no licensing restrictions and complete control over your media library.\n\n## Prerequisites\n\n- Linux system (any modern distribution)\n- Root or sudo access\n- 4GB RAM minimum, 8GB+ recommended for transcoding\n- GPU recommended for hardware transcoding (Intel Quick Sync, NVIDIA, AMD)\n- Storage space for media library\n- Network connectivity for remote access\n\n## Installation\n\n### Ubuntu/Debian\n```bash\n# Update system packages\nsudo apt update && sudo apt upgrade -y\n\n# Install prerequisite packages\nsudo apt install -y curl gnupg\n\n# Add Jellyfin repository\ncurl -fsSL https://repo.jellyfin.org/install-debuntu.sh | sudo bash\n\n# Install Jellyfin\nsudo apt install -y jellyfin\n\n# Enable and start service\nsudo systemctl enable --now jellyfin\n\n# Configure firewall\nsudo ufw allow 8096/tcp comment 'Jellyfin HTTP'\nsudo ufw allow 8920/tcp comment 'Jellyfin HTTPS'\n\n# Verify installation\nsudo systemctl status jellyfin\ncurl -I http://localhost:8096\n```\n\n### RHEL/CentOS/Rocky Linux/AlmaLinux\n```bash\n# Add Jellyfin repository\nsudo rpm --import https://repo.jellyfin.org/jellyfin_team.gpg.key\n\nsudo tee /etc/yum.repos.d/jellyfin.repo > /dev/null <<EOF\n[jellyfin]\nname=Jellyfin Repository\nbaseurl=https://repo.jellyfin.org/releases/server/centos/versions/stable/server/\\$basearch/\nenabled=1\ngpgcheck=1\ngpgkey=https://repo.jellyfin.org/jellyfin_team.gpg.key\nEOF\n\n# Install Jellyfin\nsudo yum install -y jellyfin-server jellyfin-web\n\n# Enable and start service\nsudo systemctl enable --now jellyfin\n\n# Configure firewall\nsudo firewall-cmd --permanent --add-port=8096/tcp\nsudo firewall-cmd --reload\n```\n\n## Configuration\n\n### Hardware Transcoding Setup\n```bash\n# Install hardware transcoding drivers\n# Intel Quick Sync\nsudo apt install -y intel-media-va-driver-non-free\n\n# Add jellyfin user to video group\nsudo usermod -aG video,render jellyfin\n\n# Verify hardware access\nls -la /dev/dri/\n```\n\n### NGINX Reverse Proxy\n```bash\nsudo tee /etc/nginx/sites-available/jellyfin > /dev/null <<EOF\nserver {\n    listen 80;\n    server_name jellyfin.example.com;\n    return 301 https://\\$server_name\\$request_uri;\n}\n\nserver {\n    listen 443 ssl http2;\n    server_name jellyfin.example.com;\n\n    ssl_certificate /etc/letsencrypt/live/jellyfin.example.com/fullchain.pem;\n    ssl_certificate_key /etc/letsencrypt/live/jellyfin.example.com/privkey.pem;\n\n    location / {\n        proxy_pass http://127.0.0.1:8096;\n        proxy_set_header Host \\$host;\n        proxy_set_header X-Real-IP \\$remote_addr;\n        proxy_set_header X-Forwarded-For \\$proxy_add_x_forwarded_for;\n        proxy_set_header X-Forwarded-Proto \\$scheme;\n        proxy_set_header Upgrade \\$http_upgrade;\n        proxy_set_header Connection \"upgrade\";\n    }\n}\nEOF\n\nsudo ln -s /etc/nginx/sites-available/jellyfin /etc/nginx/sites-enabled/\nsudo nginx -t && sudo systemctl reload nginx\n```\n\n## Backup and Monitoring\n\n### Backup Strategy\n```bash\nsudo tee /usr/local/bin/jellyfin-backup.sh > /dev/null <<'EOF'\n#!/bin/bash\nBACKUP_DIR=\"/backup/jellyfin\"\nDATE=$(date +%Y%m%d_%H%M%S)\n\nmkdir -p ${BACKUP_DIR}\n\n# Backup Jellyfin configuration and database\nsystemctl stop jellyfin\ntar -czf ${BACKUP_DIR}/jellyfin-${DATE}.tar.gz -C /var/lib/jellyfin .\nsystemctl start jellyfin\n\necho \"Jellyfin backup completed: ${DATE}\"\nEOF\n\nsudo chmod +x /usr/local/bin/jellyfin-backup.sh\necho \"0 2 * * * root /usr/local/bin/jellyfin-backup.sh\" | sudo tee -a /etc/crontab\n```\n\n### Health Monitoring\n```bash\nsudo tee /usr/local/bin/jellyfin-health.sh > /dev/null <<'EOF'\n#!/bin/bash\nLOG=\"/var/log/jellyfin-health.log\"\n\nlog_message() {\n    echo \"$(date '+%Y-%m-%d %H:%M:%S') - $1\" | tee -a ${LOG}\n}\n\n# Check service\nif systemctl is-active jellyfin >/dev/null; then\n    log_message \"âœ“ Jellyfin service running\"\nelse\n    log_message \"âœ— Jellyfin service not running\"\nfi\n\n# Check web interface\nif curl -f http://localhost:8096/health >/dev/null 2>&1; then\n    log_message \"âœ“ Web interface responding\"\nelse\n    log_message \"âœ— Web interface not responding\"\nfi\n\nlog_message \"Health check completed\"\nEOF\n\nsudo chmod +x /usr/local/bin/jellyfin-health.sh\necho \"*/15 * * * * root /usr/local/bin/jellyfin-health.sh\" | sudo tee -a /etc/crontab\n```\n\n## Additional Resources\n\n- [Jellyfin Documentation](https://jellyfin.org/docs/)\n- [Hardware Acceleration Guide](https://jellyfin.org/docs/general/administration/hardware-acceleration/)\n- [Jellyfin Community](https://forum.jellyfin.org/)\n\n---\n\n**Note:** This guide is part of the [HowToMgr](https://howtomgr.github.io) collection.","readmeHtml":"<h1 id=\"jellyfin-installation-guide\" class=\"mobile-header\">Jellyfin Installation Guide</h1>\n<p class=\"mobile-paragraph\">Open-source media server for managing and streaming your personal media collection. Modern alternative to Plex with no licensing restrictions and complete control over your media library.</p>\n<h2 id=\"prerequisites\" class=\"mobile-header\">Prerequisites</h2>\n<li class=\"mobile-list-item\">Linux system (any modern distribution)</li>\n<li class=\"mobile-list-item\">Root or sudo access</li>\n<li class=\"mobile-list-item\">4GB RAM minimum, 8GB+ recommended for transcoding</li>\n<li class=\"mobile-list-item\">GPU recommended for hardware transcoding (Intel Quick Sync, NVIDIA, AMD)</li>\n<li class=\"mobile-list-item\">Storage space for media library</li>\n<li class=\"mobile-list-item\">Network connectivity for remote access</li>\n<h2 id=\"installation\" class=\"mobile-header\">Installation</h2>\n<h3 id=\"ubuntudebian\" class=\"mobile-header\">Ubuntu/Debian</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Update system packages\nsudo apt update &amp;&amp; sudo apt upgrade -y\n\n# Install prerequisite packages\nsudo apt install -y curl gnupg\n\n# Add Jellyfin repository\ncurl -fsSL https://repo.jellyfin.org/install-debuntu.sh | sudo bash\n\n# Install Jellyfin\nsudo apt install -y jellyfin\n\n# Enable and start service\nsudo systemctl enable --now jellyfin\n\n# Configure firewall\nsudo ufw allow 8096/tcp comment &#039;Jellyfin HTTP&#039;\nsudo ufw allow 8920/tcp comment &#039;Jellyfin HTTPS&#039;\n\n# Verify installation\nsudo systemctl status jellyfin\ncurl -I http://localhost:8096</code></pre>\n      </div>\n    </div>\n<h3 id=\"rhelcentosrocky-linuxalmalinux\" class=\"mobile-header\">RHEL/CentOS/Rocky Linux/AlmaLinux</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Add Jellyfin repository\nsudo rpm --import https://repo.jellyfin.org/jellyfin_team.gpg.key\n\nsudo tee /etc/yum.repos.d/jellyfin.repo &gt; /dev/null &lt;&lt;EOF\n[jellyfin]\nname=Jellyfin Repository\nbaseurl=https://repo.jellyfin.org/releases/server/centos/versions/stable/server/\\$basearch/\nenabled=1\ngpgcheck=1\ngpgkey=https://repo.jellyfin.org/jellyfin_team.gpg.key\nEOF\n\n# Install Jellyfin\nsudo yum install -y jellyfin-server jellyfin-web\n\n# Enable and start service\nsudo systemctl enable --now jellyfin\n\n# Configure firewall\nsudo firewall-cmd --permanent --add-port=8096/tcp\nsudo firewall-cmd --reload</code></pre>\n      </div>\n    </div>\n<h2 id=\"configuration\" class=\"mobile-header\">Configuration</h2>\n<h3 id=\"hardware-transcoding-setup\" class=\"mobile-header\">Hardware Transcoding Setup</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Install hardware transcoding drivers\n# Intel Quick Sync\nsudo apt install -y intel-media-va-driver-non-free\n\n# Add jellyfin user to video group\nsudo usermod -aG video,render jellyfin\n\n# Verify hardware access\nls -la /dev/dri/</code></pre>\n      </div>\n    </div>\n<h3 id=\"nginx-reverse-proxy\" class=\"mobile-header\">NGINX Reverse Proxy</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\">sudo tee /etc/nginx/sites-available/jellyfin &gt; /dev/null &lt;&lt;EOF\nserver {\n    listen 80;\n    server_name jellyfin.example.com;\n    return 301 https://\\$server_name\\$request_uri;\n}\n\nserver {\n    listen 443 ssl http2;\n    server_name jellyfin.example.com;\n\n    ssl_certificate /etc/letsencrypt/live/jellyfin.example.com/fullchain.pem;\n    ssl_certificate_key /etc/letsencrypt/live/jellyfin.example.com/privkey.pem;\n\n    location / {\n        proxy_pass http://127.0.0.1:8096;\n        proxy_set_header Host \\$host;\n        proxy_set_header X-Real-IP \\$remote_addr;\n        proxy_set_header X-Forwarded-For \\$proxy_add_x_forwarded_for;\n        proxy_set_header X-Forwarded-Proto \\$scheme;\n        proxy_set_header Upgrade \\$http_upgrade;\n        proxy_set_header Connection &quot;upgrade&quot;;\n    }\n}\nEOF\n\nsudo ln -s /etc/nginx/sites-available/jellyfin /etc/nginx/sites-enabled/\nsudo nginx -t &amp;&amp; sudo systemctl reload nginx</code></pre>\n      </div>\n    </div>\n<h2 id=\"backup-and-monitoring\" class=\"mobile-header\">Backup and Monitoring</h2>\n<h3 id=\"backup-strategy\" class=\"mobile-header\">Backup Strategy</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\">sudo tee /usr/local/bin/jellyfin-backup.sh &gt; /dev/null &lt;&lt;&#039;EOF&#039;\n#!/bin/bash\nBACKUP_DIR=&quot;/backup/jellyfin&quot;\nDATE=$(date +%Y%m%d_%H%M%S)\n\nmkdir -p ${BACKUP_DIR}\n\n# Backup Jellyfin configuration and database\nsystemctl stop jellyfin\ntar -czf ${BACKUP_DIR}/jellyfin-${DATE}.tar.gz -C /var/lib/jellyfin .\nsystemctl start jellyfin\n\necho &quot;Jellyfin backup completed: ${DATE}&quot;\nEOF\n\nsudo chmod +x /usr/local/bin/jellyfin-backup.sh\necho &quot;0 2 * * * root /usr/local/bin/jellyfin-backup.sh&quot; | sudo tee -a /etc/crontab</code></pre>\n      </div>\n    </div>\n<h3 id=\"health-monitoring\" class=\"mobile-header\">Health Monitoring</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\">sudo tee /usr/local/bin/jellyfin-health.sh &gt; /dev/null &lt;&lt;&#039;EOF&#039;\n#!/bin/bash\nLOG=&quot;/var/log/jellyfin-health.log&quot;\n\nlog_message() {\n    echo &quot;$(date &#039;+%Y-%m-%d %H:%M:%S&#039;) - $1&quot; | tee -a ${LOG}\n}\n\n# Check service\nif systemctl is-active jellyfin &gt;/dev/null; then\n    log_message &quot;âœ“ Jellyfin service running&quot;\nelse\n    log_message &quot;âœ— Jellyfin service not running&quot;\nfi\n\n# Check web interface\nif curl -f http://localhost:8096/health &gt;/dev/null 2&gt;&amp;1; then\n    log_message &quot;âœ“ Web interface responding&quot;\nelse\n    log_message &quot;âœ— Web interface not responding&quot;\nfi\n\nlog_message &quot;Health check completed&quot;\nEOF\n\nsudo chmod +x /usr/local/bin/jellyfin-health.sh\necho &quot;*/15 * * * * root /usr/local/bin/jellyfin-health.sh&quot; | sudo tee -a /etc/crontab</code></pre>\n      </div>\n    </div>\n<h2 id=\"additional-resources\" class=\"mobile-header\">Additional Resources</h2>\n<li class=\"mobile-list-item\"><a href=\"https://jellyfin.org/docs/\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">Jellyfin Documentation</a></li>\n<li class=\"mobile-list-item\"><a href=\"https://jellyfin.org/docs/general/administration/hardware-acceleration/\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">Hardware Acceleration Guide</a></li>\n<li class=\"mobile-list-item\"><a href=\"https://forum.jellyfin.org/\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">Jellyfin Community</a></li>\n<p class=\"mobile-paragraph\">---</p>\n<p class=\"mobile-paragraph\"><strong>Note:</strong> This guide is part of the <a href=\"https://howtomgr.github.io\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">HowToMgr</a> collection.</p>","readTime":"3 min","wordCount":507,"lastBuilt":"2025-09-14T18:12:04.762Z"},{"name":"jenkins","displayName":"Jenkins","slug":"jenkins","description":"Repo for jenkins","category":"infrastructure","language":null,"stars":0,"forks":0,"topics":[],"githubUrl":"https://github.com/howtomgr/jenkins","updatedAt":"2025-09-14T03:45:21Z","createdAt":"2023-08-28T03:48:15Z","readmeRaw":"# Jenkins Installation Guide\n\nJenkins is a free and open-source automation server for building, testing, and deploying applications. Originally developed by Kohsuke Kawaguchi and now maintained by the Jenkins community, Jenkins is the industry-leading CI/CD platform with extensive plugin ecosystem and enterprise-grade features. It serves as a FOSS alternative to commercial CI/CD solutions like TeamCity, GitLab CI Premium, or Azure DevOps Server, offering unlimited build minutes, unlimited private repositories, and advanced pipeline capabilities without licensing costs, with features like distributed builds, Pipeline as Code, and extensive plugin ecosystem.\n\n## Prerequisites\n\n- **Hardware Requirements**:\n  - CPU: 2 cores minimum (4+ cores recommended for production)\n  - RAM: 2GB minimum (8GB+ recommended for production)\n  - Storage: 50GB minimum (SSD recommended for build performance)\n  - Network: Stable connectivity for agent communication and external integrations\n- **Operating System**: \n  - Linux: Any modern distribution with kernel 3.2+\n  - macOS: 10.13+ (High Sierra or newer)\n  - Windows: Windows Server 2016+ or Windows 10\n  - FreeBSD: 11.0+\n- **Network Requirements**:\n  - Port 8080 (default Jenkins HTTP)\n  - Port 50000 (default Jenkins agent communication)\n  - Additional ports for external integrations (webhooks, etc.)\n- **Dependencies**:\n  - Java 11 or 17 LTS (OpenJDK recommended)\n  - systemd or compatible init system (Linux)\n  - Root or administrative access for installation\n- **System Access**: root or sudo privileges required\n\n## Installation\n\n### RHEL/CentOS/Rocky Linux/AlmaLinux\n\n```bash\n# Install Java 17 LTS\nsudo dnf install -y java-17-openjdk java-17-openjdk-devel\n\n# Add Jenkins repository\ncurl -fsSL https://pkg.jenkins.io/redhat-stable/jenkins.io-2023.key | sudo tee /etc/yum.repos.d/jenkins.io.key\n\nsudo tee /etc/yum.repos.d/jenkins.repo <<EOF\n[jenkins]\nname=Jenkins-stable\nbaseurl=http://pkg.jenkins.io/redhat-stable\ngpgcheck=1\ngpgkey=file:///etc/yum.repos.d/jenkins.io.key\nenabled=1\nEOF\n\n# Install Jenkins\nsudo dnf install -y jenkins\n\n# Enable and start service\nsudo systemctl enable --now jenkins\n\n# Configure firewall\nsudo firewall-cmd --permanent --add-port=8080/tcp\nsudo firewall-cmd --permanent --add-port=50000/tcp\nsudo firewall-cmd --reload\n\n# Get initial admin password\nsudo cat /var/lib/jenkins/secrets/initialAdminPassword\n```\n\n### Debian/Ubuntu\n\n```bash\n# Update system packages\nsudo apt update\n\n# Install Java 17 LTS\nsudo apt install -y openjdk-17-jdk openjdk-17-jre\n\n# Add Jenkins repository\nwget -O /tmp/jenkins-key.asc https://pkg.jenkins.io/debian-stable/jenkins.io-2023.key\nsudo mv /tmp/jenkins-key.asc /etc/apt/trusted.gpg.d/jenkins.asc\n\necho \"deb https://pkg.jenkins.io/debian-stable binary/\" | sudo tee /etc/apt/sources.list.d/jenkins.list\n\n# Update package index\nsudo apt update\n\n# Install Jenkins\nsudo apt install -y jenkins\n\n# Enable and start service\nsudo systemctl enable --now jenkins\n\n# Configure firewall\nsudo ufw allow 8080/tcp\nsudo ufw allow 50000/tcp\n\n# Get initial admin password\nsudo cat /var/lib/jenkins/secrets/initialAdminPassword\n```\n\n### Arch Linux\n\n```bash\n# Install Java 17 LTS\nsudo pacman -S jdk17-openjdk\n\n# Install Jenkins from AUR\nyay -S jenkins\n\n# Alternative: Install manually from AUR\ngit clone https://aur.archlinux.org/jenkins.git\ncd jenkins\nmakepkg -si\n\n# Create jenkins user if not created\nsudo useradd -r -d /var/lib/jenkins -s /sbin/nologin jenkins\n\n# Enable and start service\nsudo systemctl enable --now jenkins\n\n# Get initial admin password\nsudo cat /var/lib/jenkins/secrets/initialAdminPassword\n\n# Configuration location: /etc/jenkins/\n```\n\n### Alpine Linux\n\n```bash\n# Jenkins is not officially packaged for Alpine Linux\n# Use Docker or manual installation\n\n# Method 1: Docker installation\napk add --no-cache docker docker-compose\nrc-update add docker default\nrc-service docker start\n\n# Create Jenkins data directory\nmkdir -p /var/lib/jenkins\n\n# Run Jenkins container\ndocker run -d \\\n  --name jenkins \\\n  --restart unless-stopped \\\n  -p 8080:8080 \\\n  -p 50000:50000 \\\n  -v /var/lib/jenkins:/var/jenkins_home \\\n  -v /var/run/docker.sock:/var/run/docker.sock \\\n  --group-add $(getent group docker | cut -d: -f3) \\\n  jenkins/jenkins:lts-jdk17\n\n# Get initial admin password\ndocker exec jenkins cat /var/jenkins_home/secrets/initialAdminPassword\n\n# Method 2: Manual installation with OpenJDK\napk add --no-cache openjdk17-jre-headless\nwget https://get.jenkins.io/war-stable/latest/jenkins.war -O /opt/jenkins.war\n\n# Create jenkins user and directories\nadduser -D -s /sbin/nologin jenkins\nmkdir -p /var/lib/jenkins /var/log/jenkins\nchown -R jenkins:jenkins /var/lib/jenkins /var/log/jenkins\n\n# Create init script\ntee /etc/init.d/jenkins <<'EOF'\n#!/sbin/openrc-run\nname=\"Jenkins\"\ncommand=\"java\"\ncommand_args=\"-jar /opt/jenkins.war --httpPort=8080 --ajp13Port=-1\"\ncommand_user=\"jenkins\"\npidfile=\"/run/jenkins.pid\"\ncommand_background=\"yes\"\ndepend() {\n    need net\n}\nEOF\n\nchmod +x /etc/init.d/jenkins\nrc-update add jenkins default\nrc-service jenkins start\n```\n\n### openSUSE/SLES\n\n```bash\n# openSUSE Leap/Tumbleweed\nsudo zypper install -y java-17-openjdk java-17-openjdk-devel\n\n# Add Jenkins repository\nsudo zypper addrepo -G https://pkg.jenkins.io/opensuse-stable/ jenkins\nsudo zypper refresh\n\n# Install Jenkins\nsudo zypper install -y jenkins\n\n# SLES 15\nsudo SUSEConnect -p sle-module-development-tools/15.5/x86_64\nsudo zypper install -y java-17-openjdk jenkins\n\n# Enable and start service\nsudo systemctl enable --now jenkins\n\n# Configure firewall\nsudo firewall-cmd --permanent --add-port=8080/tcp\nsudo firewall-cmd --permanent --add-port=50000/tcp\nsudo firewall-cmd --reload\n\n# Get initial admin password\nsudo cat /var/lib/jenkins/secrets/initialAdminPassword\n```\n\n### macOS\n\n```bash\n# Using Homebrew\nbrew install jenkins-lts\n\n# Start Jenkins service\nbrew services start jenkins-lts\n\n# Or run manually\njenkins-lts\n\n# Alternative: Install specific version\nbrew install jenkins-lts@2.414\n\n# Get initial admin password\ncat ~/.jenkins/secrets/initialAdminPassword\n\n# Configuration location: ~/.jenkins/\n# Alternative: /usr/local/var/jenkins_home/ (Intel Macs)\n# Alternative: /opt/homebrew/var/jenkins_home/ (Apple Silicon)\n```\n\n### FreeBSD\n\n```bash\n# Using pkg\npkg install jenkins openjdk17\n\n# Using ports\ncd /usr/ports/devel/jenkins\nmake install clean\n\n# Enable Jenkins\necho 'jenkins_enable=\"YES\"' >> /etc/rc.conf\necho 'jenkins_java_home=\"/usr/local/openjdk17\"' >> /etc/rc.conf\n\n# Create jenkins user and directories\npw useradd jenkins -d /usr/local/jenkins -s /sbin/nologin\nmkdir -p /usr/local/jenkins\nchown jenkins:jenkins /usr/local/jenkins\n\n# Start service\nservice jenkins start\n\n# Get initial admin password\ncat /usr/local/jenkins/secrets/initialAdminPassword\n\n# Configuration location: /usr/local/jenkins/\n```\n\n### Windows\n\n```powershell\n# Method 1: Using Chocolatey\nchoco install jenkins\n\n# Method 2: Using Scoop\nscoop install jenkins\n\n# Method 3: Manual installation\n# Download from https://www.jenkins.io/download/\n# Run jenkins.msi installer\n\n# Method 4: Windows service installation\n# Download jenkins.war\n# Install as Windows service\njava -jar jenkins.war --httpPort=8080 --install\n\n# Start service\nnet start Jenkins\n\n# Get initial admin password\nGet-Content \"C:\\Program Files\\Jenkins\\secrets\\initialAdminPassword\"\n\n# Configuration location: C:\\Program Files\\Jenkins\\\n# Or: %JENKINS_HOME% (if custom location)\n```\n\n## Initial Configuration\n\n### First-Run Setup\n\n1. **Java Environment Setup**:\n```bash\n# Set JAVA_HOME (Linux/macOS)\nexport JAVA_HOME=/usr/lib/jvm/java-17-openjdk\necho 'export JAVA_HOME=/usr/lib/jvm/java-17-openjdk' >> ~/.bashrc\n\n# Verify Java installation\njava -version\n```\n\n2. **Default configuration locations**:\n- RHEL/CentOS/Rocky/AlmaLinux: `/var/lib/jenkins/`, `/etc/sysconfig/jenkins`\n- Debian/Ubuntu: `/var/lib/jenkins/`, `/etc/default/jenkins`\n- Arch Linux: `/var/lib/jenkins/`, `/etc/jenkins/`\n- Alpine Linux: `/var/lib/jenkins/` (Docker) or `/var/lib/jenkins/` (manual)\n- openSUSE/SLES: `/var/lib/jenkins/`, `/etc/sysconfig/jenkins`\n- macOS: `~/.jenkins/` or `/usr/local/var/jenkins_home/`\n- FreeBSD: `/usr/local/jenkins/`\n- Windows: `C:\\Program Files\\Jenkins\\` or `%JENKINS_HOME%`\n\n3. **Essential initial configuration**:\n\n```bash\n# Initial web setup (after accessing http://your-server:8080)\n# 1. Enter admin password from: /var/lib/jenkins/secrets/initialAdminPassword\n# 2. Install suggested plugins or select specific plugins\n# 3. Create first admin user\n# 4. Configure Jenkins URL\n\n# Essential plugins to install:\n# - Pipeline plugins (Pipeline Suite)\n# - Git plugin\n# - Credentials Binding Plugin\n# - Build Timeout Plugin\n# - Timestamper Plugin\n# - Workspace Cleanup Plugin\n# - Blue Ocean (modern UI)\n# - Matrix Authorization Strategy Plugin\n```\n\n### Testing Initial Setup\n\n```bash\n# Check service status\nsudo systemctl status jenkins\n\n# Check web interface\ncurl -I http://localhost:8080\n\n# Test Java version\njava -version\n\n# Check Jenkins process\nps aux | grep jenkins\n\n# Verify Jenkins CLI\nwget http://localhost:8080/jnlpJars/jenkins-cli.jar\njava -jar jenkins-cli.jar -s http://localhost:8080 version\n\n# Check available plugins\njava -jar jenkins-cli.jar -s http://localhost:8080 list-plugins\n```\n\n**WARNING:** Change the default admin password immediately and configure proper authentication!\n\n## Service Management\n\n### systemd (RHEL, Debian, Ubuntu, Arch, openSUSE)\n\n```bash\n# Enable Jenkins to start on boot\nsudo systemctl enable jenkins\n\n# Start Jenkins\nsudo systemctl start jenkins\n\n# Stop Jenkins\nsudo systemctl stop jenkins\n\n# Restart Jenkins\nsudo systemctl restart jenkins\n\n# Graceful restart (wait for running builds)\nsudo systemctl reload jenkins\n\n# Check status\nsudo systemctl status jenkins\n\n# View logs\nsudo journalctl -u jenkins -f\n\n# Edit service configuration\nsudo systemctl edit jenkins\n# Add custom environment variables or JVM options\n```\n\n### OpenRC (Alpine Linux)\n\n```bash\n# Docker-based installation\ndocker start jenkins\ndocker stop jenkins\ndocker restart jenkins\n\n# Check container status\ndocker ps | grep jenkins\n\n# View logs\ndocker logs -f jenkins\n\n# Manual installation\nrc-update add jenkins default\nrc-service jenkins start\nrc-service jenkins stop\nrc-service jenkins restart\nrc-service jenkins status\n```\n\n### rc.d (FreeBSD)\n\n```bash\n# Enable in /etc/rc.conf\necho 'jenkins_enable=\"YES\"' >> /etc/rc.conf\n\n# Start Jenkins\nservice jenkins start\n\n# Stop Jenkins\nservice jenkins stop\n\n# Restart Jenkins\nservice jenkins restart\n\n# Check status\nservice jenkins status\n\n# View logs\ntail -f /var/log/jenkins/jenkins.log\n```\n\n### launchd (macOS)\n\n```bash\n# Using Homebrew services\nbrew services start jenkins-lts\nbrew services stop jenkins-lts\nbrew services restart jenkins-lts\n\n# Check status\nbrew services list | grep jenkins\n\n# Manual control\njenkins-lts --httpPort=8080\n\n# View logs\ntail -f /usr/local/var/log/jenkins/jenkins.log\n```\n\n### Windows Service Manager\n\n```powershell\n# Start Jenkins service\nnet start Jenkins\n\n# Stop Jenkins service\nnet stop Jenkins\n\n# Using PowerShell\nStart-Service Jenkins\nStop-Service Jenkins\nRestart-Service Jenkins\n\n# Check status\nGet-Service Jenkins\n\n# View logs (Windows Event Log)\nGet-EventLog -LogName Application -Source Jenkins\n\n# Or check Jenkins logs\nGet-Content \"C:\\Program Files\\Jenkins\\logs\\jenkins.log\" -Tail 50 -Wait\n```\n\n## Advanced Configuration\n\n### High Availability Configuration\n\n```bash\n# Multi-master setup with shared storage\n# Method 1: Shared filesystem (NFS, GlusterFS)\nsudo mkdir -p /shared/jenkins\nsudo mount -t nfs nfs-server:/jenkins /shared/jenkins\n\n# Update Jenkins home\nsudo systemctl edit jenkins\n# Add:\n[Service]\nEnvironment=\"JENKINS_HOME=/shared/jenkins\"\n\n# Method 2: Database-backed configuration\n# Install CloudBees Jenkins Enterprise plugins for HA\n# Configure external database (PostgreSQL recommended)\n\n# Agent configuration for load distribution\nsudo tee /var/lib/jenkins/casc_configs/agents.yaml <<EOF\njenkins:\n  nodes:\n    - permanent:\n        name: \"linux-agent-1\"\n        remoteFS: \"/var/lib/jenkins\"\n        numExecutors: 4\n        launcher:\n          ssh:\n            host: \"agent1.example.com\"\n            credentialsId: \"ssh-agent-key\"\n    - permanent:\n        name: \"windows-agent-1\"\n        remoteFS: \"C:\\\\Jenkins\"\n        numExecutors: 2\n        launcher:\n          command:\n            command: \"java -jar agent.jar\"\nEOF\n```\n\n### Advanced Security Settings\n\n```bash\n# Configure Jenkins Configuration as Code (JCasC) for security\nsudo tee /var/lib/jenkins/casc_configs/security.yaml <<EOF\njenkins:\n  securityRealm:\n    ldap:\n      configurations:\n        - server: \"ldaps://ldap.example.com:636\"\n          rootDN: \"DC=example,DC=com\"\n          userSearchBase: \"OU=Users\"\n          userSearch: \"(&(objectCategory=Person)(objectClass=user)(sAMAccountName={0}))\"\n          groupSearchBase: \"OU=Groups\"\n          managerDN: \"CN=jenkins,OU=Service Accounts,DC=example,DC=com\"\n          managerPasswordSecret: \"ldap-password\"\n          \n  authorizationStrategy:\n    roleBased:\n      roles:\n        global:\n          - name: \"admin\"\n            permissions:\n              - \"Overall/Administer\"\n            assignments:\n              - \"jenkins-admins\"\n          - name: \"developer\"\n            permissions:\n              - \"Overall/Read\"\n              - \"Job/Build\"\n              - \"Job/Read\"\n            assignments:\n              - \"developers\"\n\nsecurity:\n  globalJobDslSecurityConfiguration:\n    useScriptSecurity: true\n  scriptApproval:\n    approvedSignatures:\n      - \"method java.lang.String trim\"\n      - \"staticMethod java.lang.System getProperty java.lang.String\"\n\nunclassified:\n  location:\n    adminAddress: \"jenkins@example.com\"\n    url: \"https://jenkins.example.com/\"\n    \n  mailer:\n    smtpHost: \"smtp.example.com\"\n    smtpPort: 587\n    charset: \"UTF-8\"\n    authentication:\n      username: \"jenkins@example.com\"\n      password: \"{AQAAABAAAAAQhudQr8JjwNNI9pj8oI3L2gE=}\"\n    useSsl: false\n    useTls: true\nEOF\n```\n\n## Reverse Proxy Setup\n\n### nginx Configuration\n\n```nginx\n# /etc/nginx/sites-available/jenkins\nupstream jenkins {\n    server 127.0.0.1:8080 fail_timeout=0;\n    keepalive 32;\n}\n\nserver {\n    listen 80;\n    server_name jenkins.example.com;\n    return 301 https://$server_name$request_uri;\n}\n\nserver {\n    listen 443 ssl http2;\n    server_name jenkins.example.com;\n\n    ssl_certificate /etc/letsencrypt/live/jenkins.example.com/fullchain.pem;\n    ssl_certificate_key /etc/letsencrypt/live/jenkins.example.com/privkey.pem;\n    \n    # Security headers\n    add_header Strict-Transport-Security \"max-age=31536000; includeSubDomains\" always;\n    add_header X-Content-Type-Options nosniff always;\n    add_header X-Frame-Options DENY always;\n    add_header X-XSS-Protection \"1; mode=block\" always;\n    add_header Referrer-Policy \"strict-origin-when-cross-origin\" always;\n\n    client_max_body_size 100M;\n    \n    location / {\n        proxy_pass http://jenkins;\n        proxy_redirect default;\n        proxy_http_version 1.1;\n        \n        # Required headers for Jenkins\n        proxy_set_header Host $host;\n        proxy_set_header X-Real-IP $remote_addr;\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n        proxy_set_header X-Forwarded-Proto $scheme;\n        proxy_set_header X-Forwarded-Port $server_port;\n        \n        # WebSocket support for Jenkins\n        proxy_set_header Upgrade $http_upgrade;\n        proxy_set_header Connection \"upgrade\";\n        \n        # Timeout settings\n        proxy_connect_timeout 90;\n        proxy_send_timeout 90;\n        proxy_read_timeout 90;\n        \n        proxy_buffering off;\n        proxy_request_buffering off;\n        proxy_max_temp_file_size 0;\n    }\n}\n```\n\n### HAProxy Configuration\n\n```haproxy\n# /etc/haproxy/haproxy.cfg\nfrontend jenkins_frontend\n    bind *:80\n    bind *:443 ssl crt /etc/ssl/certs/jenkins.pem\n    redirect scheme https if !{ ssl_fc }\n    default_backend jenkins_servers\n\nbackend jenkins_servers\n    mode http\n    balance roundrobin\n    option httpchk GET /login\n    http-check expect status 200\n    server jenkins1 127.0.0.1:8080 check inter 30s rise 2 fall 3\n    server jenkins2 127.0.0.1:8081 check inter 30s rise 2 fall 3 backup\n\n    # Headers for Jenkins\n    http-request set-header X-Forwarded-Proto https\n    http-request set-header X-Forwarded-Port %[dst_port]\n    http-response set-header Strict-Transport-Security \"max-age=31536000; includeSubDomains\"\n```\n\n### Apache HTTP Server Configuration\n\n```apache\n# /etc/apache2/sites-available/jenkins.conf\n<VirtualHost *:80>\n    ServerName jenkins.example.com\n    Redirect permanent / https://jenkins.example.com/\n</VirtualHost>\n\n<VirtualHost *:443>\n    ServerName jenkins.example.com\n    \n    SSLEngine on\n    SSLCertificateFile /etc/letsencrypt/live/jenkins.example.com/fullchain.pem\n    SSLCertificateKeyFile /etc/letsencrypt/live/jenkins.example.com/privkey.pem\n    \n    # Security headers\n    Header always set Strict-Transport-Security \"max-age=31536000; includeSubDomains\"\n    Header always set X-Content-Type-Options nosniff\n    Header always set X-Frame-Options DENY\n    Header always set X-XSS-Protection \"1; mode=block\"\n    \n    ProxyPreserveHost On\n    ProxyRequests Off\n    \n    ProxyPass / http://127.0.0.1:8080/ nocanon\n    ProxyPassReverse / http://127.0.0.1:8080/\n    ProxyPassReverse  /  http://jenkins.example.com/\n    \n    # WebSocket support\n    RewriteEngine on\n    RewriteCond %{HTTP:Upgrade} websocket [NC]\n    RewriteCond %{HTTP:Connection} upgrade [NC]\n    RewriteRule ^/?(.*) \"ws://127.0.0.1:8080/$1\" [P,L]\n    \n    AllowEncodedSlashes NoDecode\n</VirtualHost>\n```\n\n## Security Configuration\n\n### SSL/TLS Setup\n\n```bash\n# Generate self-signed certificate (development only)\nsudo mkdir -p /etc/jenkins/ssl\nsudo openssl req -x509 -newkey rsa:4096 -keyout /etc/jenkins/ssl/jenkins.key -out /etc/jenkins/ssl/jenkins.crt -days 365 -nodes -subj \"/C=US/ST=State/L=City/O=Organization/CN=jenkins.example.com\"\n\n# Create Java keystore\nsudo keytool -genkey -alias jenkins -keyalg RSA -keystore /etc/jenkins/ssl/jenkins.jks -keysize 2048 -dname \"CN=jenkins.example.com,OU=IT,O=Organization,L=City,ST=State,C=US\" -storepass changeit -keypass changeit\n\n# Configure Jenkins to use HTTPS\nsudo systemctl edit jenkins\n# Add:\n[Service]\nEnvironment=\"JENKINS_OPTS=--httpPort=-1 --httpsPort=8443 --httpsKeyStore=/etc/jenkins/ssl/jenkins.jks --httpsKeyStorePassword=changeit\"\n\nsudo systemctl restart jenkins\n\n# Or use Let's Encrypt with reverse proxy (recommended)\nsudo certbot --nginx -d jenkins.example.com\n```\n\n### Authentication and Authorization\n\n```bash\n# Configure LDAP authentication via JCasC\nsudo tee /var/lib/jenkins/casc_configs/auth.yaml <<EOF\njenkins:\n  securityRealm:\n    ldap:\n      configurations:\n        - server: \"ldaps://ldap.example.com:636\"\n          rootDN: \"DC=example,DC=com\"\n          inhibitInferRootDN: false\n          userSearchBase: \"OU=Users\"\n          userSearch: \"(&(objectCategory=Person)(objectClass=user)(sAMAccountName={0}))\"\n          groupSearchBase: \"OU=Groups\"\n          groupSearchFilter: \"(&(objectClass=group)(cn={0}))\"\n          managerDN: \"CN=jenkins,OU=Service Accounts,DC=example,DC=com\"\n          managerPasswordSecret: \"ldap-password\"\n          displayNameAttributeName: \"displayName\"\n          mailAddressAttributeName: \"mail\"\n\n  authorizationStrategy:\n    roleBased:\n      roles:\n        global:\n          - name: \"jenkins-admins\"\n            permissions:\n              - \"Overall/Administer\"\n            assignments:\n              - \"Domain Admins\"\n              - \"jenkins-admins\"\n          - name: \"developers\"\n            permissions:\n              - \"Overall/Read\"\n              - \"Job/Build\"\n              - \"Job/Cancel\"\n              - \"Job/Read\"\n              - \"Job/Workspace\"\n              - \"Run/Replay\"\n              - \"Run/Update\"\n            assignments:\n              - \"developers\"\n              - \"authenticated\"\n          - name: \"viewers\"\n            permissions:\n              - \"Overall/Read\"\n              - \"Job/Read\"\n            assignments:\n              - \"viewers\"\n              \ncredentials:\n  system:\n    domainCredentials:\n      - credentials:\n          - usernamePassword:\n              scope: GLOBAL\n              id: \"ldap-password\"\n              username: \"CN=jenkins,OU=Service Accounts,DC=example,DC=com\"\n              password: \"{AQAAABAAAAAQSecureEncryptedPassword=}\"\n              description: \"LDAP Service Account\"\n          - basicSSHUserPrivateKey:\n              scope: GLOBAL\n              id: \"ssh-agent-key\"\n              username: \"jenkins\"\n              description: \"SSH key for Jenkins agents\"\n              privateKeySource:\n                directEntry:\n                  privateKey: |\n                    -----BEGIN OPENSSH PRIVATE KEY-----\n                    EncryptedPrivateKeyContentHere\n                    -----END OPENSSH PRIVATE KEY-----\nEOF\n```\n\n### Firewall Rules\n\n```bash\n# UFW (Ubuntu/Debian)\nsudo ufw allow from 192.168.1.0/24 to any port 8080\nsudo ufw allow from 192.168.1.0/24 to any port 50000\nsudo ufw reload\n\n# firewalld (RHEL/CentOS/openSUSE)\nsudo firewall-cmd --permanent --new-zone=jenkins\nsudo firewall-cmd --permanent --zone=jenkins --add-source=192.168.1.0/24\nsudo firewall-cmd --permanent --zone=jenkins --add-port=8080/tcp\nsudo firewall-cmd --permanent --zone=jenkins --add-port=50000/tcp\nsudo firewall-cmd --reload\n\n# iptables\nsudo iptables -A INPUT -s 192.168.1.0/24 -p tcp --dport 8080 -j ACCEPT\nsudo iptables -A INPUT -s 192.168.1.0/24 -p tcp --dport 50000 -j ACCEPT\nsudo iptables-save > /etc/iptables/rules.v4\n\n# pf (FreeBSD)\n# Add to /etc/pf.conf\npass in on $ext_if proto tcp from 192.168.1.0/24 to any port {8080, 50000}\n\n# Windows Firewall\nNew-NetFirewallRule -DisplayName \"Jenkins HTTP\" -Direction Inbound -Protocol TCP -LocalPort 8080 -RemoteAddress 192.168.1.0/24 -Action Allow\nNew-NetFirewallRule -DisplayName \"Jenkins Agent\" -Direction Inbound -Protocol TCP -LocalPort 50000 -RemoteAddress 192.168.1.0/24 -Action Allow\n```\n\n## Database Setup\n\n### External Database Configuration (PostgreSQL)\n\n```bash\n# Install PostgreSQL\nsudo apt install -y postgresql postgresql-contrib\n\n# Create Jenkins database\nsudo -u postgres createdb jenkinsdb\nsudo -u postgres createuser jenkinsuser\nsudo -u postgres psql -c \"ALTER USER jenkinsuser WITH PASSWORD 'SecureJenkinsPassword123!';\"\nsudo -u postgres psql -c \"GRANT ALL PRIVILEGES ON DATABASE jenkinsdb TO jenkinsuser;\"\n\n# Download PostgreSQL driver\nwget https://jdbc.postgresql.org/download/postgresql-42.6.0.jar -O /var/lib/jenkins/postgresql-connector.jar\n\n# Configure Jenkins to use PostgreSQL\nsudo tee -a /etc/default/jenkins <<EOF\n# PostgreSQL database configuration\nJENKINS_JAVA_OPTIONS=\"-Djenkins.install.runSetupWizard=false -Dhudson.model.DirectoryBrowserSupport.CSP=\\\"sandbox allow-scripts; default-src 'self'; script-src 'self' 'unsafe-inline'; style-src 'self' 'unsafe-inline';\\\"\"\nEOF\n\n# Create database configuration\nsudo tee /var/lib/jenkins/database-config.xml <<EOF\n<databaseConfiguration>\n  <database class=\"org.jenkinsci.plugins.database.postgresql.PostgreSQLDatabase\">\n    <hostname>localhost</hostname>\n    <port>5432</port>\n    <database>jenkinsdb</database>\n    <username>jenkinsuser</username>\n    <password>{AQAAABAAAAAQEncryptedPasswordHere=}</password>\n    <properties>sslmode=require</properties>\n  </database>\n</databaseConfiguration>\nEOF\n```\n\n### Backup Database Schema\n\n```bash\n# Create database schema backup\nsudo -u postgres pg_dump jenkinsdb > /backup/jenkins/jenkinsdb-schema-$(date +%Y%m%d).sql\n\n# Create Jenkins jobs and configuration backup\nsudo tee /usr/local/bin/jenkins-db-backup.sh <<'EOF'\n#!/bin/bash\nBACKUP_DIR=\"/backup/jenkins/$(date +%Y%m%d_%H%M%S)\"\nmkdir -p \"$BACKUP_DIR\"\n\n# PostgreSQL backup\nsudo -u postgres pg_dump jenkinsdb | gzip > \"$BACKUP_DIR/jenkinsdb.sql.gz\"\n\n# Jenkins configuration backup\ntar -czf \"$BACKUP_DIR/jenkins-config.tar.gz\" \\\n  --exclude=\"/var/lib/jenkins/workspace/*\" \\\n  --exclude=\"/var/lib/jenkins/builds/*/archive\" \\\n  --exclude=\"/var/lib/jenkins/logs/*\" \\\n  /var/lib/jenkins/\n\necho \"Database backup completed: $BACKUP_DIR\"\nEOF\n\nchmod +x /usr/local/bin/jenkins-db-backup.sh\n```\n\n## Performance Optimization\n\n### System Tuning\n\n```bash\n# Jenkins-specific system optimizations\nsudo tee -a /etc/sysctl.conf <<EOF\n# Jenkins optimizations\nvm.swappiness = 1\nfs.file-max = 65535\nnet.core.somaxconn = 32768\nnet.ipv4.tcp_max_syn_backlog = 8192\nnet.ipv4.ip_local_port_range = 1024 65535\nEOF\n\nsudo sysctl -p\n\n# Increase file descriptor limits\nsudo tee -a /etc/security/limits.conf <<EOF\njenkins soft nofile 65535\njenkins hard nofile 65535\njenkins soft nproc 32768\njenkins hard nproc 32768\nEOF\n\n# Optimize Jenkins JVM settings\nsudo systemctl edit jenkins\n# Add:\n[Service]\nEnvironment=\"JAVA_OPTS=-Xmx8g -Xms4g -XX:+UseG1GC -XX:+UseStringDeduplication -XX:+DisableExplicitGC -XX:+UnlockExperimentalVMOptions -XX:+UseCGroupMemoryLimitForHeap\"\nEnvironment=\"JENKINS_OPTS=--sessionTimeout=1440 --sessionEviction=86400\"\n\nsudo systemctl daemon-reload\nsudo systemctl restart jenkins\n```\n\n### Jenkins Performance Configuration\n\n```bash\n# Configure Jenkins for high performance\nsudo tee /var/lib/jenkins/casc_configs/performance.yaml <<EOF\njenkins:\n  systemMessage: \"High-Performance Jenkins Instance\"\n  numExecutors: 0  # Don't run builds on controller\n  mode: EXCLUSIVE\n  quietPeriod: 5\n  scmCheckoutRetryCount: 3\n  \n  # Global pipeline libraries for shared code\n  globalLibraries:\n    libraries:\n      - name: \"shared-pipeline-library\"\n        defaultVersion: \"main\"\n        implicit: true\n        retriever:\n          modernSCM:\n            scm:\n              git:\n                remote: \"https://github.com/example/jenkins-shared-library.git\"\n                credentialsId: \"github-token\"\n\n  # Configure build discarders globally\n  buildDiscarders:\n    configuredBuildDiscarders:\n      - \"logRotator\":\n          artifactDaysToKeepStr: \"30\"\n          artifactNumToKeepStr: \"10\"\n          daysToKeepStr: \"30\"\n          numToKeepStr: \"100\"\n\nunclassified:\n  # Configure global timeout\n  buildTimeout:\n    operations:\n      - timeoutMinutes: 60\n      - failBuild: true\n      - writingDescription: true\n      \n  # Workspace cleanup configuration  \n  wsCleanup:\n    deleteDirs: true\n    cleanupMatrixParent: true\n    skipWhenFailed: false\n    \ntool:\n  # Configure tools for performance\n  git:\n    installations:\n      - name: \"Default\"\n        home: \"/usr/bin/git\"\n        \n  maven:\n    installations:\n      - name: \"Maven 3.9\"\n        properties:\n          - installSource:\n              installers:\n                - maven:\n                    id: \"3.9.6\"\n                    \n  gradle:\n    installations:\n      - name: \"Gradle 8\"\n        properties:\n          - installSource:\n              installers:\n                - gradleInstaller:\n                    id: \"8.4\"\n\n  nodejs:\n    installations:\n      - name: \"NodeJS 18\"\n        properties:\n          - installSource:\n              installers:\n                - nodeJSInstaller:\n                    id: \"18.18.2\"\n                    \n  dockerTool:\n    installations:\n      - name: \"Docker\"\n        properties:\n          - installSource:\n              installers:\n                - dockerInstaller:\n                    version: \"latest\"\nEOF\n\n# Configure agent templates for auto-scaling\nsudo tee /var/lib/jenkins/casc_configs/agents.yaml <<EOF\njenkins:\n  clouds:\n    - kubernetes:\n        name: \"kubernetes\"\n        serverUrl: \"https://kubernetes.default.svc.cluster.local\"\n        namespace: \"jenkins\"\n        credentialsId: \"kubernetes-token\"\n        jenkinsUrl: \"http://jenkins.jenkins.svc.cluster.local:8080\"\n        jenkinsTunnel: \"jenkins-agent.jenkins.svc.cluster.local:50000\"\n        connectTimeout: 300\n        readTimeout: 300\n        containerCapStr: 100\n        templates:\n          - name: \"jenkins-agent\"\n            namespace: \"jenkins\"\n            label: \"kubernetes docker\"\n            nodeUsageMode: EXCLUSIVE\n            containers:\n              - name: \"jnlp\"\n                image: \"jenkins/inbound-agent:latest\"\n                alwaysPullImage: true\n                workingDir: \"/home/jenkins/agent\"\n                command: \"\"\n                args: \"\"\n                resourceRequestCpu: \"500m\"\n                resourceRequestMemory: \"1Gi\"\n                resourceLimitCpu: \"2\"\n                resourceLimitMemory: \"4Gi\"\n            volumes:\n              - hostPathVolume:\n                  hostPath: \"/var/run/docker.sock\"\n                  mountPath: \"/var/run/docker.sock\"\nEOF\n```\n\n### Pipeline Optimization\n\n```groovy\n// Optimized Jenkins Pipeline Template\n// /var/lib/jenkins/pipeline-templates/optimized-pipeline.groovy\n@Library('shared-pipeline-library') _\n\npipeline {\n    agent {\n        label 'docker && linux'\n    }\n    \n    options {\n        buildDiscarder(logRotator(numToKeepStr: '50', artifactNumToKeepStr: '10'))\n        timeout(time: 120, unit: 'MINUTES')\n        timestamps()\n        skipDefaultCheckout(true)\n        disableConcurrentBuilds()\n        ansiColor('xterm')\n        parallelsAlwaysFailFast()\n        copyArtifactPermission('*')\n    }\n    \n    environment {\n        DOCKER_REGISTRY = credentials('docker-registry-url')\n        MAVEN_OPTS = '-Xmx2g -XX:+UseG1GC'\n        GRADLE_OPTS = '-Xmx2g -Dorg.gradle.daemon=false'\n        CI = 'true'\n    }\n    \n    stages {\n        stage('Checkout') {\n            steps {\n                checkout scm\n                script {\n                    env.GIT_COMMIT_SHORT = env.GIT_COMMIT.take(8)\n                    env.BUILD_VERSION = \"${env.BUILD_NUMBER}-${env.GIT_COMMIT_SHORT}\"\n                }\n            }\n        }\n        \n        stage('Parallel Analysis') {\n            parallel {\n                stage('Code Quality') {\n                    steps {\n                        script {\n                            // SonarQube analysis\n                            withSonarQubeEnv('SonarQube') {\n                                sh '''\n                                    mvn sonar:sonar \\\n                                        -Dsonar.projectKey=${JOB_NAME} \\\n                                        -Dsonar.projectVersion=${BUILD_VERSION} \\\n                                        -Dsonar.sources=src/main \\\n                                        -Dsonar.tests=src/test \\\n                                        -Dsonar.coverage.jacoco.xmlReportPaths=target/site/jacoco/jacoco.xml\n                                '''\n                            }\n                            \n                            timeout(time: 10, unit: 'MINUTES') {\n                                waitForQualityGate abortPipeline: true\n                            }\n                        }\n                    }\n                }\n                \n                stage('Security Scan') {\n                    steps {\n                        // OWASP Dependency Check\n                        dependencyCheck additionalArguments: '''\n                            --enableRetired\n                            --enableExperimental  \n                            --scan ./\n                            --format JSON\n                            --format HTML\n                            --suppression dependency-check-suppressions.xml\n                        ''', odcInstallation: 'dependency-check-8.4.0'\n                        \n                        dependencyCheckPublisher pattern: '**/dependency-check-report.xml'\n                        \n                        // Secret scanning\n                        sh '''\n                            docker run --rm -v $(pwd):/repo \\\n                                trufflesecurity/trufflehog:latest \\\n                                git file:///repo \\\n                                --json \\\n                                --fail > trufflehog-results.json || true\n                        '''\n                    }\n                }\n                \n                stage('Test') {\n                    steps {\n                        sh '''\n                            # Parallel test execution\n                            mvn clean test \\\n                                -Dmaven.test.failure.ignore=true \\\n                                -Dspring.profiles.active=test \\\n                                -Djunit.jupiter.execution.parallel.enabled=true \\\n                                -Djunit.jupiter.execution.parallel.mode.default=concurrent\n                        '''\n                        \n                        publishTestResults testResultsPattern: 'target/surefire-reports/*.xml'\n                        publishCoverage adapters: [jacocoAdapter('target/site/jacoco/jacoco.xml')], \n                                       sourceFileResolver: sourceFiles('STORE_LAST_BUILD')\n                    }\n                    post {\n                        always {\n                            archiveArtifacts artifacts: 'target/surefire-reports/**', allowEmptyArchive: true\n                        }\n                    }\n                }\n            }\n        }\n        \n        stage('Build & Package') {\n            steps {\n                sh '''\n                    # Optimized build with parallel processing\n                    mvn clean package \\\n                        -DskipTests \\\n                        -T 2C \\\n                        -Dspring.profiles.active=production \\\n                        -Dmaven.javadoc.skip=true\n                '''\n                \n                // Docker build with BuildKit\n                script {\n                    def image = docker.build(\"${env.DOCKER_REGISTRY}/${env.JOB_NAME}:${env.BUILD_VERSION}\", \n                                           \"--build-arg BUILD_VERSION=${env.BUILD_VERSION} .\")\n                    \n                    // Security scanning with Trivy\n                    sh \"\"\"\n                        docker run --rm -v /var/run/docker.sock:/var/run/docker.sock \\\n                            aquasec/trivy:latest image \\\n                            --format table \\\n                            --severity HIGH,CRITICAL \\\n                            --exit-code 1 \\\n                            ${env.DOCKER_REGISTRY}/${env.JOB_NAME}:${env.BUILD_VERSION}\n                    \"\"\"\n                    \n                    image.push()\n                    image.push(\"latest\")\n                }\n            }\n        }\n        \n        stage('Deploy') {\n            when {\n                anyOf {\n                    branch 'main'\n                    branch 'develop'\n                    branch 'release/*'\n                }\n            }\n            parallel {\n                stage('Staging') {\n                    when { branch 'develop' }\n                    steps {\n                        script {\n                            // Deploy to staging environment\n                            sh '''\n                                kubectl set image deployment/myapp-staging \\\n                                    myapp=${DOCKER_REGISTRY}/${JOB_NAME}:${BUILD_VERSION} \\\n                                    --namespace=staging\n                                \n                                kubectl rollout status deployment/myapp-staging \\\n                                    --namespace=staging --timeout=300s\n                            '''\n                            \n                            // Run smoke tests\n                            sh '''\n                                curl -f http://myapp-staging.example.com/health || exit 1\n                                npm run test:e2e -- --base-url http://myapp-staging.example.com\n                            '''\n                        }\n                    }\n                }\n                \n                stage('Production') {\n                    when { \n                        anyOf {\n                            branch 'main'\n                            branch 'release/*'\n                        }\n                    }\n                    steps {\n                        // Manual approval for production\n                        timeout(time: 60, unit: 'MINUTES') {\n                            input message: 'Deploy to production?', \n                                  ok: 'Deploy',\n                                  submitterParameter: 'APPROVER'\n                        }\n                        \n                        script {\n                            sh '''\n                                # Blue-green deployment\n                                kubectl set image deployment/myapp-production \\\n                                    myapp=${DOCKER_REGISTRY}/${JOB_NAME}:${BUILD_VERSION} \\\n                                    --namespace=production\n                                \n                                kubectl rollout status deployment/myapp-production \\\n                                    --namespace=production --timeout=600s\n                            '''\n                        }\n                    }\n                }\n            }\n        }\n    }\n    \n    post {\n        always {\n            // Cleanup workspace\n            cleanWs()\n            \n            // Archive artifacts\n            archiveArtifacts artifacts: 'target/*.jar,docker-compose.yml', \n                           allowEmptyArchive: true, \n                           fingerprint: true\n                           \n            // Collect build metrics\n            script {\n                def buildDuration = currentBuild.duration / 1000\n                echo \"Build completed in ${buildDuration} seconds\"\n                \n                // Custom metrics collection\n                sh \"\"\"\n                    echo \"build_duration_seconds{job=\\\"${env.JOB_NAME}\\\",build=\\\"${env.BUILD_NUMBER}\\\"} ${buildDuration}\" > build-metrics.txt\n                \"\"\"\n                \n                archiveArtifacts artifacts: 'build-metrics.txt', allowEmptyArchive: true\n            }\n        }\n        \n        success {\n            // Success notifications\n            emailext(\n                subject: \"âœ… Build Success: ${env.JOB_NAME} - ${env.BUILD_NUMBER}\",\n                body: \"\"\"Build successful for ${env.JOB_NAME} build ${env.BUILD_NUMBER}\n                         \n                Build URL: ${env.BUILD_URL}\n                Git Commit: ${env.GIT_COMMIT}\n                Duration: ${currentBuild.durationString}\n                Approver: ${env.APPROVER ?: 'Automatic'}\"\"\",\n                to: \"${env.CHANGE_AUTHOR_EMAIL ?: 'jenkins@example.com'}\"\n            )\n            \n            slackSend(\n                channel: '#deployments',\n                color: 'good',\n                message: \"âœ… Deployment Success: ${env.JOB_NAME} - ${env.BUILD_NUMBER} by ${env.APPROVER ?: 'System'}\"\n            )\n        }\n        \n        failure {\n            emailext(\n                subject: \"âŒ Build Failed: ${env.JOB_NAME} - ${env.BUILD_NUMBER}\",\n                body: \"Build failed for ${env.JOB_NAME} build ${env.BUILD_NUMBER}\\n\\nBuild URL: ${env.BUILD_URL}\",\n                to: \"${env.CHANGE_AUTHOR_EMAIL ?: 'jenkins@example.com'}\"\n            )\n            \n            slackSend(\n                channel: '#ci-cd-alerts',\n                color: 'danger',\n                message: \"âŒ Build Failed: ${env.JOB_NAME} - ${env.BUILD_NUMBER} (<${env.BUILD_URL}|View Details>)\"\n            )\n        }\n        \n        unstable {\n            emailext(\n                subject: \"âš ï¸  Build Unstable: ${env.JOB_NAME} - ${env.BUILD_NUMBER}\",\n                body: \"Build unstable for ${env.JOB_NAME} build ${env.BUILD_NUMBER}\\n\\nBuild URL: ${env.BUILD_URL}\",\n                to: \"${env.CHANGE_AUTHOR_EMAIL ?: 'jenkins@example.com'}\"\n            )\n        }\n    }\n}\n```\n\n## Monitoring\n\n### Built-in Monitoring\n\n```bash\n# Jenkins CLI monitoring commands\njava -jar jenkins-cli.jar -s http://localhost:8080 -auth admin:password version\njava -jar jenkins-cli.jar -s http://localhost:8080 -auth admin:password list-jobs\njava -jar jenkins-cli.jar -s http://localhost:8080 -auth admin:password list-builds job-name\njava -jar jenkins-cli.jar -s http://localhost:8080 -auth admin:password get-build job-name 1\n\n# System information\ncurl -u admin:password http://localhost:8080/systemInfo\n\n# Build queue status\ncurl -u admin:password http://localhost:8080/queue/api/json\n\n# Node status\ncurl -u admin:password http://localhost:8080/computer/api/json\n\n# Plugin information\ncurl -u admin:password http://localhost:8080/pluginManager/api/json?depth=1\n```\n\n### External Monitoring Setup\n\n```bash\n# Install Jenkins Prometheus Plugin and configure metrics\n# Via Jenkins UI: Manage Jenkins > Manage Plugins > Available > Prometheus metrics plugin\n\n# Configure Prometheus to scrape Jenkins metrics\nsudo tee /etc/prometheus/jenkins.yml <<EOF\nglobal:\n  scrape_interval: 15s\n\nscrape_configs:\n  - job_name: 'jenkins'\n    static_configs:\n      - targets: ['localhost:8080']\n    metrics_path: /prometheus/\n    scrape_interval: 30s\n    scrape_timeout: 10s\nEOF\n\n# Install Jenkins Exporter (alternative)\nwget https://github.com/lovoo/jenkins_exporter/releases/download/v1.0.0/jenkins_exporter-1.0.0.linux-amd64.tar.gz\ntar xzf jenkins_exporter-*.tar.gz\nsudo cp jenkins_exporter /usr/local/bin/\n\n# Create systemd service\nsudo tee /etc/systemd/system/jenkins_exporter.service <<EOF\n[Unit]\nDescription=Jenkins Exporter\nAfter=network.target\n\n[Service]\nType=simple\nUser=jenkins\nExecStart=/usr/local/bin/jenkins_exporter \\\n    --jenkins.address=http://localhost:8080 \\\n    --jenkins.username=monitoring \\\n    --jenkins.password=MonitoringPassword123! \\\n    --web.listen-address=:9118\nRestart=always\n\n[Install]\nWantedBy=multi-user.target\nEOF\n\nsudo systemctl enable --now jenkins_exporter\n```\n\n### Health Check Scripts\n\n```bash\n#!/bin/bash\n# jenkins-health-check.sh\n\nJENKINS_URL=\"http://localhost:8080\"\nHEALTH_LOG=\"/var/log/jenkins-health.log\"\n\nlog_message() {\n    echo \"$(date '+%Y-%m-%d %H:%M:%S') - $1\" | tee -a ${HEALTH_LOG}\n}\n\n# Check service status\nif systemctl is-active jenkins >/dev/null 2>&1; then\n    log_message \"âœ… Jenkins service is running\"\nelse\n    log_message \"âŒ Jenkins service is not running\"\n    exit 2\nfi\n\n# Check web interface\nHTTP_STATUS=$(curl -s -o /dev/null -w \"%{http_code}\" ${JENKINS_URL}/login)\nif [ \"${HTTP_STATUS}\" = \"200\" ]; then\n    log_message \"âœ… Jenkins web interface responding (HTTP ${HTTP_STATUS})\"\nelse\n    log_message \"âŒ Jenkins web interface issues (HTTP ${HTTP_STATUS})\"\n    exit 2\nfi\n\n# Check disk space\nJENKINS_HOME_USAGE=$(df /var/lib/jenkins | awk 'NR==2 {print $5}' | sed 's/%//')\nif [ ${JENKINS_HOME_USAGE} -gt 85 ]; then\n    log_message \"âš ï¸  High disk usage: ${JENKINS_HOME_USAGE}%\"\n    exit 1\nelse\n    log_message \"âœ… Jenkins home disk usage: ${JENKINS_HOME_USAGE}%\"\nfi\n\n# Check memory usage\nJAVA_MEMORY=$(ps -o pid,vsz,rss,comm -C java | grep jenkins | awk '{rss+=$3} END {print rss/1024}')\nif (( $(echo \"${JAVA_MEMORY} > 6144\" | bc -l) )); then\n    log_message \"âš ï¸  High memory usage: ${JAVA_MEMORY}MB\"\n    exit 1\nelse\n    log_message \"âœ… Jenkins memory usage: ${JAVA_MEMORY}MB\"\nfi\n\n# Check running builds (if Jenkins CLI is available)\nif [ -f /var/lib/jenkins/jenkins-cli.jar ]; then\n    RUNNING_BUILDS=$(java -jar /var/lib/jenkins/jenkins-cli.jar -s ${JENKINS_URL} -auth monitoring:MonitoringPassword123! list-builds 2>/dev/null | grep -c \"RUNNING\" || echo \"0\")\n    log_message \"â„¹ï¸  Running builds: ${RUNNING_BUILDS}\"\n    \n    # Check for failed builds in last 24 hours\n    FAILED_BUILDS=$(java -jar /var/lib/jenkins/jenkins-cli.jar -s ${JENKINS_URL} -auth monitoring:MonitoringPassword123! list-builds 2>/dev/null | grep -c \"FAILURE\" || echo \"0\")\n    if [ ${FAILED_BUILDS} -gt 5 ]; then\n        log_message \"âš ï¸  High number of failed builds: ${FAILED_BUILDS}\"\n        exit 1\n    fi\nfi\n\n# Check plugin health\nPLUGIN_ERRORS=$(curl -s ${JENKINS_URL}/pluginManager/api/json?depth=1 | jq '.plugins[] | select(.hasUpdate==true or .enabled==false) | .shortName' | wc -l)\nif [ ${PLUGIN_ERRORS} -gt 0 ]; then\n    log_message \"âš ï¸  Plugins need attention: ${PLUGIN_ERRORS}\"\nfi\n\nlog_message \"âœ… Jenkins health check completed\"\nexit 0\n```\n\n## Backup and Restore\n\n### Comprehensive Backup Strategy\n\n```bash\n#!/bin/bash\n# jenkins-backup.sh\n\nBACKUP_DIR=\"/backup/jenkins\"\nDATE=$(date +%Y%m%d_%H%M%S)\nJENKINS_HOME=\"/var/lib/jenkins\"\nRETENTION_DAYS=14\n\nmkdir -p ${BACKUP_DIR}/{config,jobs,plugins,secrets,workspace}\n\necho \"Starting Jenkins comprehensive backup...\"\n\n# Function to gracefully shutdown Jenkins\ngraceful_shutdown() {\n    echo \"Putting Jenkins in quiet mode...\"\n    java -jar ${JENKINS_HOME}/jenkins-cli.jar -s http://localhost:8080 -auth admin:SecureAdminPassword123! quiet-down\n    \n    # Wait for running builds to complete (max 20 minutes)\n    for i in {1..120}; do\n        RUNNING_BUILDS=$(java -jar ${JENKINS_HOME}/jenkins-cli.jar -s http://localhost:8080 -auth admin:SecureAdminPassword123! list-builds | grep -c \"RUNNING\" || echo \"0\")\n        if [ \"$RUNNING_BUILDS\" -eq 0 ]; then\n            echo \"All builds completed, stopping Jenkins...\"\n            systemctl stop jenkins\n            break\n        fi\n        echo \"Waiting for $RUNNING_BUILDS running builds to complete... (${i}/120)\"\n        sleep 10\n    done\n    \n    if [ \"$RUNNING_BUILDS\" -gt 0 ]; then\n        echo \"Warning: Stopping Jenkins with $RUNNING_BUILDS builds still running\"\n        systemctl stop jenkins\n    fi\n}\n\n# Function to start Jenkins\nstart_jenkins() {\n    echo \"Starting Jenkins...\"\n    systemctl start jenkins\n    \n    # Wait for Jenkins to be ready\n    for i in {1..60}; do\n        if curl -f http://localhost:8080/login >/dev/null 2>&1; then\n            echo \"Jenkins is ready, canceling quiet mode...\"\n            java -jar ${JENKINS_HOME}/jenkins-cli.jar -s http://localhost:8080 -auth admin:SecureAdminPassword123! cancel-quiet-down\n            break\n        fi\n        echo \"Waiting for Jenkins to start... (${i}/60)\"\n        sleep 10\n    done\n}\n\n# Gracefully shutdown Jenkins\ngraceful_shutdown\n\n# Full Jenkins home backup (excluding large/temporary directories)\necho \"Creating full Jenkins home backup...\"\ntar --exclude=\"${JENKINS_HOME}/workspace/*\" \\\n    --exclude=\"${JENKINS_HOME}/builds/*/archive\" \\\n    --exclude=\"${JENKINS_HOME}/logs/*\" \\\n    --exclude=\"${JENKINS_HOME}/.m2/repository\" \\\n    --exclude=\"${JENKINS_HOME}/caches\" \\\n    --exclude=\"${JENKINS_HOME}/war\" \\\n    -czf ${BACKUP_DIR}/config/jenkins-home-${DATE}.tar.gz \\\n    -C ${JENKINS_HOME} .\n\n# Job configurations backup\necho \"Backing up job configurations...\"\nmkdir -p ${BACKUP_DIR}/jobs\nfind ${JENKINS_HOME}/jobs -name \"config.xml\" -exec cp {} ${BACKUP_DIR}/jobs/ \\;\ntar -czf ${BACKUP_DIR}/jobs/job-configs-${DATE}.tar.gz -C ${BACKUP_DIR}/jobs .\nrm ${BACKUP_DIR}/jobs/config.xml 2>/dev/null\n\n# Plugins backup\necho \"Backing up installed plugins...\"\njava -jar ${JENKINS_HOME}/jenkins-cli.jar -s http://localhost:8080 -auth admin:SecureAdminPassword123! list-plugins > ${BACKUP_DIR}/plugins/plugin-list-${DATE}.txt\ncp -r ${JENKINS_HOME}/plugins ${BACKUP_DIR}/plugins/plugins-${DATE}/ 2>/dev/null\n\n# Secrets and credentials backup\necho \"Backing up secrets and credentials...\"\nif [ -d \"${JENKINS_HOME}/secrets\" ]; then\n    tar -czf ${BACKUP_DIR}/secrets/jenkins-secrets-${DATE}.tar.gz -C ${JENKINS_HOME} secrets/\nfi\n\n# System configuration backup\necho \"Backing up system configuration...\"\ntar -czf ${BACKUP_DIR}/config/system-config-${DATE}.tar.gz \\\n    /etc/default/jenkins \\\n    /etc/sysconfig/jenkins \\\n    /etc/systemd/system/jenkins.service.d/ 2>/dev/null\n\n# Database backup (if using external database)\nif [ -f \"${JENKINS_HOME}/database-config.xml\" ]; then\n    echo \"Backing up external database...\"\n    sudo -u postgres pg_dump jenkinsdb | gzip > ${BACKUP_DIR}/config/jenkinsdb-${DATE}.sql.gz\nfi\n\n# Start Jenkins\nstart_jenkins\n\n# Cloud backup (uncomment and configure as needed)\n# aws s3 cp ${BACKUP_DIR}/ s3://jenkins-backups/${DATE}/ --recursive --sse AES256\n# az storage blob upload-batch --source ${BACKUP_DIR} --destination jenkins-backups --destination-path ${DATE}\n# gsutil cp -r ${BACKUP_DIR}/* gs://jenkins-backups/${DATE}/\n\n# Verify backup integrity\necho \"Verifying backup integrity...\"\nLATEST_BACKUP=$(ls -t ${BACKUP_DIR}/config/jenkins-home-*.tar.gz | head -1)\nif tar -tzf \"$LATEST_BACKUP\" >/dev/null 2>&1; then\n    echo \"âœ… Backup integrity verified\"\n    BACKUP_SIZE=$(du -h \"$LATEST_BACKUP\" | cut -f1)\n    echo \"Backup size: $BACKUP_SIZE\"\nelse\n    echo \"âŒ Backup integrity check failed\"\n    exit 1\nfi\n\n# Cleanup old backups\necho \"Cleaning up old backups (keeping last $RETENTION_DAYS days)...\"\nfind ${BACKUP_DIR} -name \"jenkins-*\" -type f -mtime +${RETENTION_DAYS} -delete\nfind ${BACKUP_DIR} -name \"plugin-list-*\" -type f -mtime +${RETENTION_DAYS} -delete\nfind ${BACKUP_DIR} -name \"*-${DATE}*\" -type d -mtime +${RETENTION_DAYS} -exec rm -rf {} \\;\n\n# Generate backup report\necho \"Generating backup report...\"\ncat > ${BACKUP_DIR}/backup-report-${DATE}.txt <<EOF\nJenkins Backup Report - ${DATE}\n================================\n\nBackup Location: ${BACKUP_DIR}\nJenkins Home: ${JENKINS_HOME}\nBackup Date: $(date)\nServer: $(hostname)\n\nFiles backed up:\n- Jenkins Home: $(ls -lh ${BACKUP_DIR}/config/jenkins-home-${DATE}.tar.gz)\n- Job Configs: $(ls -lh ${BACKUP_DIR}/jobs/job-configs-${DATE}.tar.gz)\n- Plugins: $(ls -lh ${BACKUP_DIR}/plugins/plugin-list-${DATE}.txt)\n- Secrets: $(ls -lh ${BACKUP_DIR}/secrets/jenkins-secrets-${DATE}.tar.gz 2>/dev/null || echo \"No secrets backup\")\n- System Config: $(ls -lh ${BACKUP_DIR}/config/system-config-${DATE}.tar.gz 2>/dev/null || echo \"No system config backup\")\n\nTotal Backup Size: $(du -h ${BACKUP_DIR} | tail -1 | cut -f1)\n\nVerification: âœ… Passed\nEOF\n\necho \"âœ… Jenkins backup completed: ${DATE}\"\necho \"ðŸ“Š Backup report: ${BACKUP_DIR}/backup-report-${DATE}.txt\"\n```\n\n### Restore Procedures\n\n```bash\n#!/bin/bash\n# jenkins-restore.sh\n\nBACKUP_FILE=\"${1}\"\nRESTORE_TYPE=\"${2:-full}\"  # full, config-only, jobs-only\n\nusage() {\n    echo \"Usage: $0 <backup_file> [restore_type]\"\n    echo \"Restore types: full (default), config-only, jobs-only\"\n    echo \"\"\n    echo \"Available backups:\"\n    ls -la /backup/jenkins/config/jenkins-home-*.tar.gz | head -10\n    exit 1\n}\n\nif [ -z \"$BACKUP_FILE\" ]; then\n    usage\nfi\n\nif [ ! -f \"$BACKUP_FILE\" ]; then\n    echo \"âŒ Backup file not found: $BACKUP_FILE\"\n    exit 1\nfi\n\necho \"ðŸ”„ Starting Jenkins restore from: $BACKUP_FILE\"\necho \"Restore type: $RESTORE_TYPE\"\n\n# Pre-restore backup of current state\nif [ -d \"/var/lib/jenkins\" ]; then\n    echo \"ðŸ“¦ Creating backup of current installation...\"\n    CURRENT_BACKUP=\"/backup/jenkins/pre-restore-$(date +%s)\"\n    mkdir -p \"$CURRENT_BACKUP\"\n    mv /var/lib/jenkins \"$CURRENT_BACKUP/jenkins-$(date +%Y%m%d_%H%M%S)\"\n    echo \"Current installation backed up to: $CURRENT_BACKUP\"\nfi\n\n# Stop Jenkins\necho \"â¹ï¸  Stopping Jenkins...\"\nsystemctl stop jenkins\n\ncase \"$RESTORE_TYPE\" in\n    \"full\")\n        echo \"ðŸ”„ Performing full restore...\"\n        \n        # Create new Jenkins directory\n        mkdir -p /var/lib/jenkins\n        \n        # Restore from backup\n        echo \"ðŸ“‚ Extracting backup archive...\"\n        tar -xzf \"$BACKUP_FILE\" -C /var/lib/jenkins\n        \n        # Set proper ownership\n        chown -R jenkins:jenkins /var/lib/jenkins\n        chmod -R 755 /var/lib/jenkins\n        \n        # Special permissions for secrets\n        if [ -d \"/var/lib/jenkins/secrets\" ]; then\n            chmod 700 /var/lib/jenkins/secrets\n            chmod 600 /var/lib/jenkins/secrets/*\n        fi\n        ;;\n        \n    \"config-only\")\n        echo \"ðŸ”„ Performing configuration-only restore...\"\n        \n        # Create minimal Jenkins directory\n        mkdir -p /var/lib/jenkins\n        \n        # Extract only configuration files\n        tar -xzf \"$BACKUP_FILE\" -C /var/lib/jenkins \\\n            --include=\"*/config.xml\" \\\n            --include=\"*/secrets/*\" \\\n            --include=\"*/users/*\" \\\n            --include=\"*/plugins/*\" \\\n            --exclude=\"*/workspace/*\" \\\n            --exclude=\"*/builds/*\"\n            \n        chown -R jenkins:jenkins /var/lib/jenkins\n        ;;\n        \n    \"jobs-only\")\n        echo \"ðŸ”„ Performing jobs-only restore...\"\n        \n        if [ ! -d \"/var/lib/jenkins\" ]; then\n            echo \"âŒ Jenkins directory not found. Cannot restore jobs only.\"\n            exit 1\n        fi\n        \n        # Backup current jobs\n        if [ -d \"/var/lib/jenkins/jobs\" ]; then\n            mv /var/lib/jenkins/jobs \"/var/lib/jenkins/jobs.backup.$(date +%s)\"\n        fi\n        \n        # Extract only jobs\n        tar -xzf \"$BACKUP_FILE\" -C /var/lib/jenkins jobs/\n        chown -R jenkins:jenkins /var/lib/jenkins/jobs\n        ;;\n        \n    *)\n        echo \"âŒ Unknown restore type: $RESTORE_TYPE\"\n        usage\n        ;;\nesac\n\n# Restore system configuration if available\nBACKUP_DIR=$(dirname \"$BACKUP_FILE\")\nBACKUP_DATE=$(basename \"$BACKUP_FILE\" .tar.gz | sed 's/jenkins-home-//')\nSYSTEM_CONFIG=\"${BACKUP_DIR}/../config/system-config-${BACKUP_DATE}.tar.gz\"\n\nif [ -f \"$SYSTEM_CONFIG\" ]; then\n    echo \"ðŸ”§ Restoring system configuration...\"\n    tar -xzf \"$SYSTEM_CONFIG\" -C / 2>/dev/null\n    systemctl daemon-reload\nfi\n\n# Restore database if available\nDB_BACKUP=\"${BACKUP_DIR}/jenkinsdb-${BACKUP_DATE}.sql.gz\"\nif [ -f \"$DB_BACKUP\" ]; then\n    echo \"ðŸ—„ï¸  Restoring database...\"\n    zcat \"$DB_BACKUP\" | sudo -u postgres psql jenkinsdb\nfi\n\n# Start Jenkins\necho \"â–¶ï¸  Starting Jenkins...\"\nsystemctl start jenkins\n\n# Wait for Jenkins to start and verify\necho \"â³ Waiting for Jenkins to start...\"\nfor i in {1..120}; do\n    if curl -f http://localhost:8080/login >/dev/null 2>&1; then\n        echo \"âœ… Jenkins started successfully\"\n        break\n    fi\n    echo \"Waiting for Jenkins to start... (${i}/120)\"\n    sleep 10\ndone\n\n# Verify restoration\necho \"ðŸ” Verifying restoration...\"\nif curl -f http://localhost:8080/login >/dev/null 2>&1; then\n    echo \"âœ… Jenkins is responding\"\n    \n    # Check if jobs were restored\n    if [ -d \"/var/lib/jenkins/jobs\" ]; then\n        JOB_COUNT=$(ls -1 /var/lib/jenkins/jobs | wc -l)\n        echo \"ðŸ“‹ Jobs restored: $JOB_COUNT\"\n    fi\n    \n    # Check if plugins were restored\n    if [ -d \"/var/lib/jenkins/plugins\" ]; then\n        PLUGIN_COUNT=$(ls -1 /var/lib/jenkins/plugins | wc -l)\n        echo \"ðŸ”Œ Plugins restored: $PLUGIN_COUNT\"\n    fi\n    \n    echo \"âœ… Jenkins restoration completed successfully\"\n    echo \"\"\n    echo \"ðŸ“ Next steps:\"\n    echo \"1. Verify Jenkins configuration via web interface\"\n    echo \"2. Check plugin compatibility and update if needed\"\n    echo \"3. Verify job configurations and test builds\"\n    echo \"4. Update any environment-specific settings\"\n    \nelse\n    echo \"âŒ Jenkins restoration failed - service not responding\"\n    echo \"Check logs: journalctl -u jenkins -n 50\"\n    exit 1\nfi\n```\n\n### Disaster Recovery\n\n```bash\n#!/bin/bash\n# jenkins-disaster-recovery.sh\n\necho \"ðŸš¨ Jenkins Disaster Recovery Procedure\"\necho \"======================================\"\n\n# Check if Jenkins is running\nif systemctl is-active jenkins >/dev/null 2>&1; then\n    echo \"âš ï¸  Jenkins is running. This procedure should be run on a failed system.\"\n    read -p \"Continue anyway? (y/N): \" -n 1 -r\n    echo\n    if [[ ! $REPLY =~ ^[Yy]$ ]]; then\n        exit 1\n    fi\nfi\n\n# Find latest backup\nBACKUP_DIR=\"/backup/jenkins\"\nLATEST_BACKUP=$(ls -t ${BACKUP_DIR}/config/jenkins-home-*.tar.gz 2>/dev/null | head -1)\n\nif [ -z \"$LATEST_BACKUP\" ]; then\n    echo \"âŒ No backups found in ${BACKUP_DIR}\"\n    echo \"Please restore from cloud backup or external storage\"\n    exit 1\nfi\n\necho \"ðŸ“¦ Latest backup found: $LATEST_BACKUP\"\necho \"ðŸ“… Backup date: $(basename \"$LATEST_BACKUP\" .tar.gz | sed 's/jenkins-home-//')\"\n\n# Verify backup integrity\necho \"ðŸ” Verifying backup integrity...\"\nif tar -tzf \"$LATEST_BACKUP\" >/dev/null 2>&1; then\n    echo \"âœ… Backup integrity verified\"\nelse\n    echo \"âŒ Backup is corrupted. Cannot proceed with recovery.\"\n    exit 1\nfi\n\n# Create disaster recovery log\nDR_LOG=\"/var/log/jenkins-disaster-recovery-$(date +%Y%m%d_%H%M%S).log\"\nexec > >(tee -a \"$DR_LOG\")\nexec 2>&1\n\necho \"ðŸ“ Disaster recovery log: $DR_LOG\"\n\n# System preparation\necho \"ðŸ”§ Preparing system for recovery...\"\n\n# Install Jenkins if not present\nif ! command -v jenkins >/dev/null 2>&1; then\n    echo \"ðŸ“¦ Installing Jenkins...\"\n    # Add Jenkins repository and install (distribution-specific commands)\n    if [ -f /etc/debian_version ]; then\n        wget -q -O - https://pkg.jenkins.io/debian-stable/jenkins.io.key | apt-key add -\n        echo \"deb https://pkg.jenkins.io/debian-stable binary/\" > /etc/apt/sources.list.d/jenkins.list\n        apt-get update\n        apt-get install -y openjdk-17-jdk jenkins\n    elif [ -f /etc/redhat-release ]; then\n        yum install -y java-17-openjdk jenkins\n    fi\nfi\n\n# Stop Jenkins service\nsystemctl stop jenkins\n\n# Clear existing Jenkins data\nif [ -d \"/var/lib/jenkins\" ]; then\n    echo \"ðŸ—‘ï¸  Removing existing Jenkins data...\"\n    rm -rf /var/lib/jenkins.disaster-backup-$(date +%s)\n    mv /var/lib/jenkins /var/lib/jenkins.disaster-backup-$(date +%s)\nfi\n\n# Create new Jenkins directory\nmkdir -p /var/lib/jenkins\n\n# Restore from backup\necho \"ðŸ”„ Restoring Jenkins from backup...\"\ntar -xzf \"$LATEST_BACKUP\" -C /var/lib/jenkins\n\n# Set proper permissions\nchown -R jenkins:jenkins /var/lib/jenkins\nchmod -R 755 /var/lib/jenkins\n\n# Special permissions for sensitive files\nif [ -d \"/var/lib/jenkins/secrets\" ]; then\n    chmod 700 /var/lib/jenkins/secrets\n    chmod 600 /var/lib/jenkins/secrets/*\nfi\n\nif [ -d \"/var/lib/jenkins/users\" ]; then\n    chmod 700 /var/lib/jenkins/users\nfi\n\n# Restore system configuration\nBACKUP_DATE=$(basename \"$LATEST_BACKUP\" .tar.gz | sed 's/jenkins-home-//')\nSYSTEM_CONFIG=\"${BACKUP_DIR}/config/system-config-${BACKUP_DATE}.tar.gz\"\n\nif [ -f \"$SYSTEM_CONFIG\" ]; then\n    echo \"ðŸ”§ Restoring system configuration...\"\n    tar -xzf \"$SYSTEM_CONFIG\" -C / 2>/dev/null\n    systemctl daemon-reload\nfi\n\n# Restore database if available\nDB_BACKUP=\"${BACKUP_DIR}/config/jenkinsdb-${BACKUP_DATE}.sql.gz\"\nif [ -f \"$DB_BACKUP\" ]; then\n    echo \"ðŸ—„ï¸  Restoring database...\"\n    # Ensure PostgreSQL is running\n    systemctl start postgresql\n    \n    # Drop and recreate database\n    sudo -u postgres psql -c \"DROP DATABASE IF EXISTS jenkinsdb;\"\n    sudo -u postgres psql -c \"CREATE DATABASE jenkinsdb;\"\n    sudo -u postgres psql -c \"GRANT ALL PRIVILEGES ON DATABASE jenkinsdb TO jenkinsuser;\"\n    \n    # Restore database\n    zcat \"$DB_BACKUP\" | sudo -u postgres psql jenkinsdb\nfi\n\n# Configure firewall\necho \"ðŸ”¥ Configuring firewall...\"\nif command -v ufw >/dev/null 2>&1; then\n    ufw allow 8080/tcp\n    ufw allow 50000/tcp\nelif command -v firewall-cmd >/dev/null 2>&1; then\n    firewall-cmd --permanent --add-port=8080/tcp\n    firewall-cmd --permanent --add-port=50000/tcp\n    firewall-cmd --reload\nfi\n\n# Start Jenkins\necho \"â–¶ï¸  Starting Jenkins...\"\nsystemctl enable jenkins\nsystemctl start jenkins\n\n# Wait for Jenkins to start\necho \"â³ Waiting for Jenkins to initialize...\"\nfor i in {1..300}; do\n    if curl -f http://localhost:8080/login >/dev/null 2>&1; then\n        echo \"âœ… Jenkins is responding\"\n        break\n    fi\n    echo \"Waiting for Jenkins... (${i}/300)\"\n    sleep 10\ndone\n\n# Verify recovery\necho \"ðŸ” Verifying disaster recovery...\"\n\n# Check Jenkins status\nif systemctl is-active jenkins >/dev/null 2>&1; then\n    echo \"âœ… Jenkins service is running\"\nelse\n    echo \"âŒ Jenkins service failed to start\"\n    echo \"Check logs: journalctl -u jenkins -n 50\"\n    exit 1\nfi\n\n# Check web interface\nif curl -f http://localhost:8080/login >/dev/null 2>&1; then\n    echo \"âœ… Jenkins web interface is accessible\"\nelse\n    echo \"âŒ Jenkins web interface is not responding\"\n    exit 1\nfi\n\n# Check jobs restoration\nif [ -d \"/var/lib/jenkins/jobs\" ]; then\n    JOB_COUNT=$(ls -1 /var/lib/jenkins/jobs 2>/dev/null | wc -l)\n    echo \"ðŸ“‹ Jobs recovered: $JOB_COUNT\"\nelse\n    echo \"âš ï¸  No jobs directory found\"\nfi\n\n# Check plugins restoration\nif [ -d \"/var/lib/jenkins/plugins\" ]; then\n    PLUGIN_COUNT=$(ls -1 /var/lib/jenkins/plugins 2>/dev/null | wc -l)\n    echo \"ðŸ”Œ Plugins recovered: $PLUGIN_COUNT\"\nelse\n    echo \"âš ï¸  No plugins directory found\"\nfi\n\n# Generate recovery report\necho \"ðŸ“Š Generating disaster recovery report...\"\ncat > \"/var/log/jenkins-recovery-report-$(date +%Y%m%d_%H%M%S).txt\" <<EOF\nJenkins Disaster Recovery Report\n===============================\nRecovery Date: $(date)\nServer: $(hostname)\nBackup Used: $LATEST_BACKUP\nRecovery Log: $DR_LOG\n\nRecovery Summary:\n- Jenkins Service: $(systemctl is-active jenkins)\n- Web Interface: $(curl -s -o /dev/null -w \"%{http_code}\" http://localhost:8080/login)\n- Jobs Recovered: $JOB_COUNT\n- Plugins Recovered: $PLUGIN_COUNT\n- Database Restored: $([ -f \"$DB_BACKUP\" ] && echo \"Yes\" || echo \"No\")\n\nNext Steps:\n1. Verify Jenkins configuration via web interface: http://$(hostname):8080\n2. Test critical job configurations\n3. Update any environment-specific settings\n4. Verify agent connections\n5. Test integrations (SCM, notifications, etc.)\n6. Update DNS/load balancer configurations if needed\n7. Notify team of recovery completion\n\nRecovery Status: âœ… COMPLETED\nEOF\n\necho \"\"\necho \"ðŸŽ‰ Jenkins disaster recovery completed successfully!\"\necho \"ðŸ“ Recovery report saved to: /var/log/jenkins-recovery-report-$(date +%Y%m%d_%H%M%S).txt\"\necho \"\"\necho \"ðŸ”— Access Jenkins: http://$(hostname):8080\"\necho \"\"\necho \"âš ï¸  Important post-recovery tasks:\"\necho \"1. Verify all job configurations\"\necho \"2. Test agent connections\"\necho \"3. Verify integrations (GitHub, LDAP, etc.)\"\necho \"4. Update any environment-specific configurations\"\necho \"5. Perform a backup of the recovered system\"\n```\n\n## Troubleshooting\n\n### Common Issues\n\n1. **Jenkins won't start**:\n```bash\n# Check service status and logs\nsudo systemctl status jenkins\nsudo journalctl -u jenkins -f\n\n# Check Java version and JAVA_HOME\njava -version\necho $JAVA_HOME\n\n# Check disk space\ndf -h /var/lib/jenkins\n\n# Check permissions\nls -la /var/lib/jenkins\nsudo chown -R jenkins:jenkins /var/lib/jenkins\n\n# Check memory allocation\nfree -h\nps aux | grep jenkins\n\n# Clear Jenkins cache\nsudo systemctl stop jenkins\nsudo rm -rf /var/lib/jenkins/war\nsudo systemctl start jenkins\n```\n\n2. **Memory issues**:\n```bash\n# Increase JVM memory\nsudo systemctl edit jenkins\n# Add:\n[Service]\nEnvironment=\"JAVA_OPTS=-Xmx8g -Xms4g -XX:+UseG1GC\"\n\nsudo systemctl daemon-reload\nsudo systemctl restart jenkins\n\n# Monitor memory usage\ntop -p $(pgrep java)\njstat -gc $(pgrep java) 5s\n```\n\n3. **Plugin issues**:\n```bash\n# Safe start (disable all plugins)\nsudo systemctl stop jenkins\necho 'jenkins.install.runSetupWizard=false' > /var/lib/jenkins/jenkins.install.runSetupWizard\nsudo systemctl start jenkins\n\n# Clear plugin cache\nsudo rm -rf /var/lib/jenkins/plugins/*.bak\nsudo rm -rf /var/lib/jenkins/plugins/*.hpi.pinned\n\n# Update plugins via CLI\njava -jar jenkins-cli.jar -s http://localhost:8080 -auth admin:password list-plugins | grep -E \"\\)$\" | awk '{print $1}' | xargs java -jar jenkins-cli.jar -s http://localhost:8080 -auth admin:password install-plugin\n\n# Check plugin dependencies\njava -jar jenkins-cli.jar -s http://localhost:8080 -auth admin:password list-plugins | grep -v \"^$\"\n```\n\n4. **Build failures**:\n```bash\n# Check workspace permissions\nsudo chown -R jenkins:jenkins /var/lib/jenkins/workspace\n\n# Clear old builds\njava -jar jenkins-cli.jar -s http://localhost:8080 -auth admin:password delete-builds job-name 1-100\n\n# Check agent connectivity\njava -jar jenkins-cli.jar -s http://localhost:8080 -auth admin:password list-computers\njava -jar jenkins-cli.jar -s http://localhost:8080 -auth admin:password connect-node agent-name\n\n# Monitor build resources\nhtop\niostat -x 1\n```\n\n### Debug Mode\n\n```bash\n# Enable debug logging for Jenkins\nsudo systemctl edit jenkins\n# Add:\n[Service]\nEnvironment=\"JAVA_OPTS=-Xmx4g -Djava.util.logging.config.file=/var/lib/jenkins/logging.properties\"\n\n# Create detailed logging configuration\nsudo tee /var/lib/jenkins/logging.properties <<EOF\n.level = INFO\n\n# Root logger\nhandlers = java.util.logging.ConsoleHandler, java.util.logging.FileHandler\n\n# Console logging\njava.util.logging.ConsoleHandler.level = INFO\njava.util.logging.ConsoleHandler.formatter = java.util.logging.SimpleFormatter\n\n# File logging\njava.util.logging.FileHandler.pattern = /var/log/jenkins/jenkins-debug.log\njava.util.logging.FileHandler.limit = 50000000\njava.util.logging.FileHandler.count = 5\njava.util.logging.FileHandler.formatter = java.util.logging.SimpleFormatter\n\n# Component-specific logging\nhudson.level = FINE\njenkins.level = FINE\nhudson.security.level = FINE\nhudson.plugins.level = FINE\nhudson.model.level = FINE\n\n# Plugin debugging\nhudson.plugins.git.level = FINE\norg.jenkinsci.plugins.workflow.level = FINE\nEOF\n\nsudo systemctl restart jenkins\n\n# View debug logs\nsudo tail -f /var/log/jenkins/jenkins-debug.log\n\n# Enable specific plugin debugging via Jenkins CLI\njava -jar jenkins-cli.jar -s http://localhost:8080 -auth admin:password groovy = <<EOF\nimport java.util.logging.Logger\nimport java.util.logging.Level\n\n// Enable debug logging for specific components\nLogger.getLogger(\"hudson.security\").setLevel(Level.FINE)\nLogger.getLogger(\"hudson.plugins.git\").setLevel(Level.FINE)\nLogger.getLogger(\"org.jenkinsci.plugins.workflow\").setLevel(Level.FINE)\n\nprintln \"Debug logging enabled\"\nEOF\n```\n\n## Maintenance\n\n### Update Procedures\n\n```bash\n# RHEL/CentOS/Rocky/AlmaLinux\nsudo dnf check-update jenkins\nsudo dnf update jenkins\n\n# Debian/Ubuntu\nsudo apt update\nsudo apt upgrade jenkins\n\n# Arch Linux\nyay -Syu jenkins\n\n# Alpine Linux (Docker)\ndocker pull jenkins/jenkins:lts-jdk17\ndocker stop jenkins\ndocker rm jenkins\n# Re-run docker run command with new image\n\n# openSUSE\nsudo zypper update jenkins\n\n# FreeBSD\npkg update\npkg upgrade jenkins\n\n# macOS\nbrew upgrade jenkins-lts\n\n# Always backup before updates\nsudo /usr/local/bin/jenkins-backup.sh\n\n# Update plugins after Jenkins update\njava -jar jenkins-cli.jar -s http://localhost:8080 -auth admin:password list-plugins | grep -E \"\\)$\" | awk '{print $1}' | xargs java -jar jenkins-cli.jar -s http://localhost:8080 -auth admin:password install-plugin\n\n# Restart after updates\nsudo systemctl restart jenkins\n```\n\n### Maintenance Tasks\n\n```bash\n#!/bin/bash\n# jenkins-maintenance.sh\n\nJENKINS_HOME=\"/var/lib/jenkins\"\nJENKINS_URL=\"http://localhost:8080\"\nADMIN_CREDENTIALS=\"admin:SecureAdminPassword123!\"\n\necho \"ðŸ”§ Starting Jenkins maintenance tasks...\"\n\n# Clean up old builds\necho \"ðŸ—‘ï¸  Cleaning up old builds...\"\njava -jar ${JENKINS_HOME}/jenkins-cli.jar -s ${JENKINS_URL} -auth ${ADMIN_CREDENTIALS} groovy = <<EOF\nimport jenkins.model.Jenkins\nimport hudson.model.*\n\nJenkins.instance.getAllItems(Job.class).each { job ->\n    if (job.getBuilds().size() > 50) {\n        def buildsToDelete = job.getBuilds().drop(50)\n        println \"Deleting \\${buildsToDelete.size()} old builds for job: \\${job.name}\"\n        buildsToDelete.each { build ->\n            build.delete()\n        }\n    }\n}\nEOF\n\n# Clean up workspace\necho \"ðŸ§¹ Cleaning up workspaces...\"\njava -jar ${JENKINS_HOME}/jenkins-cli.jar -s ${JENKINS_URL} -auth ${ADMIN_CREDENTIALS} groovy = <<EOF\nimport hudson.model.*\nimport hudson.FilePath\nimport jenkins.model.Jenkins\n\nJenkins.instance.getAllItems(AbstractProject.class).each { job ->\n    def workspace = job.getWorkspace()\n    if (workspace != null && workspace.exists()) {\n        def size = workspace.length()\n        if (size > 1024 * 1024 * 100) { // > 100MB\n            println \"Workspace for \\${job.name} is \\${size / (1024*1024)} MB\"\n            workspace.deleteRecursive()\n            println \"Cleaned workspace for job: \\${job.name}\"\n        }\n    }\n}\nEOF\n\n# Update plugins\necho \"ðŸ”Œ Checking for plugin updates...\"\njava -jar ${JENKINS_HOME}/jenkins-cli.jar -s ${JENKINS_URL} -auth ${ADMIN_CREDENTIALS} list-plugins | grep -E \"\\)$\" > /tmp/outdated-plugins.txt\n\nif [ -s /tmp/outdated-plugins.txt ]; then\n    echo \"ðŸ“¦ Updating outdated plugins:\"\n    cat /tmp/outdated-plugins.txt\n    \n    # Update plugins\n    awk '{print $1}' /tmp/outdated-plugins.txt | xargs java -jar ${JENKINS_HOME}/jenkins-cli.jar -s ${JENKINS_URL} -auth ${ADMIN_CREDENTIALS} install-plugin\n    \n    echo \"ðŸ”„ Restarting Jenkins to apply plugin updates...\"\n    java -jar ${JENKINS_HOME}/jenkins-cli.jar -s ${JENKINS_URL} -auth ${ADMIN_CREDENTIALS} safe-restart\nfi\n\n# Clean up logs\necho \"ðŸ“‹ Rotating and cleaning logs...\"\nfind ${JENKINS_HOME}/logs -name \"*.log\" -mtime +7 -delete\nfind /var/log/jenkins -name \"*.log.*\" -mtime +7 -delete\n\n# Disk usage check\necho \"ðŸ’¾ Checking disk usage...\"\nDISK_USAGE=$(df ${JENKINS_HOME} | awk 'NR==2 {print $5}' | sed 's/%//')\nif [ ${DISK_USAGE} -gt 80 ]; then\n    echo \"âš ï¸  High disk usage: ${DISK_USAGE}%\"\n    \n    # Clean up large files\n    find ${JENKINS_HOME}/jobs -name \"*.log\" -size +100M -mtime +3 -delete\n    find ${JENKINS_HOME}/workspace -name \"*\" -size +500M -mtime +1 -delete\nfi\n\n# Backup verification\necho \"ðŸ” Verifying recent backups...\"\nLATEST_BACKUP=$(ls -t /backup/jenkins/config/jenkins-home-*.tar.gz 2>/dev/null | head -1)\nif [ -n \"$LATEST_BACKUP\" ]; then\n    BACKUP_AGE=$(($(date +%s) - $(stat -c %Y \"$LATEST_BACKUP\")))\n    if [ $BACKUP_AGE -gt 172800 ]; then  # 2 days\n        echo \"âš ï¸  Latest backup is older than 2 days: $LATEST_BACKUP\"\n        echo \"ðŸ’¾ Running backup now...\"\n        /usr/local/bin/jenkins-backup.sh\n    else\n        echo \"âœ… Recent backup found: $LATEST_BACKUP\"\n    fi\nelse\n    echo \"âŒ No backups found. Running backup...\"\n    /usr/local/bin/jenkins-backup.sh\nfi\n\n# Security check\necho \"ðŸ”’ Running security checks...\"\njava -jar ${JENKINS_HOME}/jenkins-cli.jar -s ${JENKINS_URL} -auth ${ADMIN_CREDENTIALS} groovy = <<EOF\nimport jenkins.security.ApiTokenProperty\nimport hudson.security.SecurityRealm\nimport jenkins.model.Jenkins\n\ndef instance = Jenkins.getInstance()\n\n// Check for default passwords\ndef realm = instance.getSecurityRealm()\nif (realm instanceof hudson.security.HudsonPrivateSecurityRealm) {\n    def users = realm.getAllUsers()\n    users.each { user ->\n        if (user.getId() == \"admin\") {\n            println \"âš ï¸  Default admin user found. Consider renaming or removing.\"\n        }\n    }\n}\n\n// Check for anonymous access\ndef authStrategy = instance.getAuthorizationStrategy()\nif (authStrategy.hasPermission(org.acegisecurity.Authentication.ANONYMOUS_USER, Jenkins.READ)) {\n    println \"âš ï¸  Anonymous read access is enabled\"\n}\n\nprintln \"Security check completed\"\nEOF\n\n# Performance check\necho \"ðŸ“Š Checking performance metrics...\"\nJAVA_PID=$(pgrep java)\nif [ -n \"$JAVA_PID\" ]; then\n    MEMORY_USAGE=$(ps -o pid,vsz,rss,comm -p $JAVA_PID | awk 'NR==2 {print $3/1024}')\n    CPU_USAGE=$(ps -o pid,pcpu,comm -p $JAVA_PID | awk 'NR==2 {print $2}')\n    \n    echo \"Memory usage: ${MEMORY_USAGE}MB\"\n    echo \"CPU usage: ${CPU_USAGE}%\"\n    \n    if (( $(echo \"${MEMORY_USAGE} > 6144\" | bc -l) )); then\n        echo \"âš ï¸  High memory usage detected\"\n    fi\nfi\n\necho \"âœ… Jenkins maintenance completed\"\n\n# Generate maintenance report\ncat > /var/log/jenkins-maintenance-$(date +%Y%m%d).log <<EOF\nJenkins Maintenance Report - $(date)\n===================================\n\nTasks Completed:\n- Old builds cleanup: âœ…\n- Workspace cleanup: âœ…\n- Plugin updates: $([ -s /tmp/outdated-plugins.txt ] && echo \"âœ… Updated\" || echo \"âœ… Up to date\")\n- Log rotation: âœ…\n- Disk usage check: âœ… (${DISK_USAGE}%)\n- Backup verification: âœ…\n- Security check: âœ…\n- Performance check: âœ…\n\nSystem Status:\n- Memory usage: ${MEMORY_USAGE}MB\n- CPU usage: ${CPU_USAGE}%\n- Disk usage: ${DISK_USAGE}%\n\nNext maintenance: $(date -d \"next week\" +%Y-%m-%d)\nEOF\n\necho \"ðŸ“Š Maintenance report: /var/log/jenkins-maintenance-$(date +%Y%m%d).log\"\n```\n\n### Health Monitoring\n\n```bash\n# Create monitoring cron job\necho \"0 2 * * * root /usr/local/bin/jenkins-maintenance.sh\" | sudo tee -a /etc/crontab\necho \"*/15 * * * * root /usr/local/bin/jenkins-health-check.sh\" | sudo tee -a /etc/crontab\n\n# Log rotation configuration\nsudo tee /etc/logrotate.d/jenkins <<EOF\n/var/log/jenkins/*.log {\n    daily\n    rotate 30\n    compress\n    delaycompress\n    missingok\n    notifempty\n    create 640 jenkins adm\n    postrotate\n        systemctl reload jenkins > /dev/null 2>&1 || true\n    endscript\n}\n\n/var/lib/jenkins/logs/*.log {\n    daily\n    rotate 7\n    compress\n    delaycompress\n    missingok\n    notifempty\n    create 640 jenkins jenkins\n}\nEOF\n```\n\n## Integration Examples\n\n### Git Integration with Webhooks\n\n```bash\n# Configure Git webhook for automatic builds\nsudo tee /var/lib/jenkins/casc_configs/git-integration.yaml <<EOF\nunclassified:\n  gitHubPluginConfig:\n    hookUrl: \"https://jenkins.example.com/github-webhook/\"\n    \n  gitLabConnectionConfig:\n    connections:\n      - name: \"GitLab\"\n        url: \"https://gitlab.example.com\"\n        apiTokenId: \"gitlab-api-token\"\n        clientBuilderId: \"autodetect\"\n        connectionTimeout: 10\n        readTimeout: 10\n\njobs:\n  - script: |\n      multibranchPipelineJob('example-app') {\n        branchSources {\n          git {\n            id('github-example')\n            remote('https://github.com/example/app.git')\n            credentialsId('github-credentials')\n            includes('main develop feature/* release/*')\n          }\n        }\n        \n        factory {\n          workflowBranchProjectFactory {\n            scriptPath('Jenkinsfile')\n          }\n        }\n        \n        triggers {\n          periodicFolderTrigger {\n            interval('1d')\n          }\n        }\n        \n        orphanedItemStrategy {\n          discardOldItems {\n            daysToKeep(7)\n            numToKeep(10)\n          }\n        }\n      }\nEOF\n```\n\n### Docker Integration\n\n```groovy\n// Docker pipeline example\npipeline {\n    agent any\n    \n    environment {\n        DOCKER_REGISTRY = credentials('docker-registry')\n        DOCKER_IMAGE = \"${env.JOB_NAME}:${env.BUILD_NUMBER}\"\n    }\n    \n    stages {\n        stage('Build Docker Image') {\n            steps {\n                script {\n                    def image = docker.build(\"${DOCKER_REGISTRY}/${DOCKER_IMAGE}\")\n                    \n                    // Security scan\n                    sh \"\"\"\n                        docker run --rm -v /var/run/docker.sock:/var/run/docker.sock \\\n                            aquasec/trivy:latest image \\\n                            --severity HIGH,CRITICAL \\\n                            --exit-code 1 \\\n                            ${DOCKER_REGISTRY}/${DOCKER_IMAGE}\n                    \"\"\"\n                    \n                    // Push to registry\n                    docker.withRegistry(\"https://${DOCKER_REGISTRY}\", 'docker-registry-credentials') {\n                        image.push()\n                        image.push(\"latest\")\n                    }\n                }\n            }\n        }\n        \n        stage('Deploy') {\n            steps {\n                script {\n                    // Deploy to Kubernetes\n                    sh \"\"\"\n                        kubectl set image deployment/myapp \\\n                            myapp=${DOCKER_REGISTRY}/${DOCKER_IMAGE} \\\n                            --namespace=production\n                        \n                        kubectl rollout status deployment/myapp \\\n                            --namespace=production --timeout=300s\n                    \"\"\"\n                }\n            }\n        }\n    }\n}\n```\n\n### Kubernetes Integration\n\n```yaml\n# Jenkins agent in Kubernetes\napiVersion: v1\nkind: ServiceAccount\nmetadata:\n  name: jenkins\n  namespace: jenkins\n---\napiVersion: rbac.authorization.k8s.io/v1\nkind: ClusterRole\nmetadata:\n  name: jenkins\nrules:\n- apiGroups: [\"\"]\n  resources: [\"pods\",\"pods/exec\"]\n  verbs: [\"create\",\"delete\",\"get\",\"list\",\"patch\",\"update\",\"watch\"]\n- apiGroups: [\"\"]\n  resources: [\"pods/log\"]\n  verbs: [\"get\",\"list\",\"watch\"]\n---\napiVersion: rbac.authorization.k8s.io/v1\nkind: ClusterRoleBinding\nmetadata:\n  name: jenkins\nroleRef:\n  apiGroup: rbac.authorization.k8s.io\n  kind: ClusterRole\n  name: jenkins\nsubjects:\n- kind: ServiceAccount\n  name: jenkins\n  namespace: jenkins\n---\n# Jenkins Configuration as Code for Kubernetes\njenkins:\n  clouds:\n    - kubernetes:\n        name: \"kubernetes\"\n        serverUrl: \"https://kubernetes.default\"\n        namespace: \"jenkins\"\n        credentialsId: \"kubernetes-token\"\n        jenkinsUrl: \"http://jenkins.jenkins.svc.cluster.local:8080\"\n        containerCapStr: \"10\"\n        templates:\n          - name: \"jenkins-agent\"\n            namespace: \"jenkins\"\n            label: \"kubernetes\"\n            containers:\n              - name: \"jnlp\"\n                image: \"jenkins/inbound-agent:latest\"\n                workingDir: \"/home/jenkins/agent\"\n                resourceRequestCpu: \"100m\"\n                resourceRequestMemory: \"256Mi\"\n                resourceLimitCpu: \"500m\"\n                resourceLimitMemory: \"1Gi\"\n```\n\n### LDAP/Active Directory Integration\n\n```yaml\njenkins:\n  securityRealm:\n    ldap:\n      configurations:\n        - server: \"ldaps://ad.example.com:636\"\n          rootDN: \"DC=example,DC=com\"\n          inhibitInferRootDN: false\n          userSearchBase: \"OU=Users,OU=Company\"\n          userSearch: \"(&(objectCategory=Person)(objectClass=user)(sAMAccountName={0}))\"\n          groupSearchBase: \"OU=Groups,OU=Company\"\n          groupSearchFilter: \"(&(objectClass=group)(cn={0}))\"\n          managerDN: \"CN=jenkins,OU=Service Accounts,DC=example,DC=com\"\n          managerPasswordSecret: \"ldap-service-password\"\n          displayNameAttributeName: \"displayName\"\n          mailAddressAttributeName: \"mail\"\n          \n  authorizationStrategy:\n    roleBased:\n      roles:\n        global:\n          - name: \"administrators\"\n            permissions:\n              - \"Overall/Administer\"\n            assignments:\n              - \"Domain Admins\"\n              - \"Jenkins Admins\"\n        items:\n          - name: \"developers\"\n            pattern: \".*\"\n            permissions:\n              - \"Job/Build\"\n              - \"Job/Cancel\"\n              - \"Job/Read\"\n            assignments:\n              - \"Development Team\"\n```\n\n## Additional Resources\n\n- [Official Jenkins Documentation](https://www.jenkins.io/doc/)\n- [Jenkins Configuration as Code](https://jenkins.io/projects/jcasc/)\n- [Jenkins Pipeline Documentation](https://www.jenkins.io/doc/book/pipeline/)\n- [Jenkins Security Guide](https://www.jenkins.io/doc/book/security/)\n- [Jenkins Plugin Index](https://plugins.jenkins.io/)\n- [Jenkins Community](https://www.jenkins.io/community/)\n- [Jenkins Best Practices](https://www.jenkins.io/doc/book/pipeline/pipeline-best-practices/)\n- [Jenkins GitHub Repository](https://github.com/jenkinsci/jenkins)\n\n---\n\n**Note:** This guide is part of the [HowToMgr](https://howtomgr.github.io) collection. Always refer to official documentation for the most up-to-date information.","readmeHtml":"<h1 id=\"jenkins-installation-guide\" class=\"mobile-header\">Jenkins Installation Guide</h1>\n<p class=\"mobile-paragraph\">Jenkins is a free and open-source automation server for building, testing, and deploying applications. Originally developed by Kohsuke Kawaguchi and now maintained by the Jenkins community, Jenkins is the industry-leading CI/CD platform with extensive plugin ecosystem and enterprise-grade features. It serves as a FOSS alternative to commercial CI/CD solutions like TeamCity, GitLab CI Premium, or Azure DevOps Server, offering unlimited build minutes, unlimited private repositories, and advanced pipeline capabilities without licensing costs, with features like distributed builds, Pipeline as Code, and extensive plugin ecosystem.</p>\n<h2 id=\"prerequisites\" class=\"mobile-header\">Prerequisites</h2>\n<li class=\"mobile-list-item\"><strong>Hardware Requirements</strong>:</li>\n<li class=\"mobile-list-item\">CPU: 2 cores minimum (4+ cores recommended for production)</li>\n<li class=\"mobile-list-item\">RAM: 2GB minimum (8GB+ recommended for production)</li>\n<li class=\"mobile-list-item\">Storage: 50GB minimum (SSD recommended for build performance)</li>\n<li class=\"mobile-list-item\">Network: Stable connectivity for agent communication and external integrations</li>\n<li class=\"mobile-list-item\"><strong>Operating System</strong>: </li>\n<li class=\"mobile-list-item\">Linux: Any modern distribution with kernel 3.2+</li>\n<li class=\"mobile-list-item\">macOS: 10.13+ (High Sierra or newer)</li>\n<li class=\"mobile-list-item\">Windows: Windows Server 2016+ or Windows 10</li>\n<li class=\"mobile-list-item\">FreeBSD: 11.0+</li>\n<li class=\"mobile-list-item\"><strong>Network Requirements</strong>:</li>\n<li class=\"mobile-list-item\">Port 8080 (default Jenkins HTTP)</li>\n<li class=\"mobile-list-item\">Port 50000 (default Jenkins agent communication)</li>\n<li class=\"mobile-list-item\">Additional ports for external integrations (webhooks, etc.)</li>\n<li class=\"mobile-list-item\"><strong>Dependencies</strong>:</li>\n<li class=\"mobile-list-item\">Java 11 or 17 LTS (OpenJDK recommended)</li>\n<li class=\"mobile-list-item\">systemd or compatible init system (Linux)</li>\n<li class=\"mobile-list-item\">Root or administrative access for installation</li>\n<li class=\"mobile-list-item\"><strong>System Access</strong>: root or sudo privileges required</li>\n<h2 id=\"installation\" class=\"mobile-header\">Installation</h2>\n<h3 id=\"rhelcentosrocky-linuxalmalinux\" class=\"mobile-header\">RHEL/CentOS/Rocky Linux/AlmaLinux</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Install Java 17 LTS\nsudo dnf install -y java-17-openjdk java-17-openjdk-devel\n\n# Add Jenkins repository\ncurl -fsSL https://pkg.jenkins.io/redhat-stable/jenkins.io-2023.key | sudo tee /etc/yum.repos.d/jenkins.io.key\n\nsudo tee /etc/yum.repos.d/jenkins.repo &lt;&lt;EOF\n[jenkins]\nname=Jenkins-stable\nbaseurl=http://pkg.jenkins.io/redhat-stable\ngpgcheck=1\ngpgkey=file:///etc/yum.repos.d/jenkins.io.key\nenabled=1\nEOF\n\n# Install Jenkins\nsudo dnf install -y jenkins\n\n# Enable and start service\nsudo systemctl enable --now jenkins\n\n# Configure firewall\nsudo firewall-cmd --permanent --add-port=8080/tcp\nsudo firewall-cmd --permanent --add-port=50000/tcp\nsudo firewall-cmd --reload\n\n# Get initial admin password\nsudo cat /var/lib/jenkins/secrets/initialAdminPassword</code></pre>\n      </div>\n    </div>\n<h3 id=\"debianubuntu\" class=\"mobile-header\">Debian/Ubuntu</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Update system packages\nsudo apt update\n\n# Install Java 17 LTS\nsudo apt install -y openjdk-17-jdk openjdk-17-jre\n\n# Add Jenkins repository\nwget -O /tmp/jenkins-key.asc https://pkg.jenkins.io/debian-stable/jenkins.io-2023.key\nsudo mv /tmp/jenkins-key.asc /etc/apt/trusted.gpg.d/jenkins.asc\n\necho &quot;deb https://pkg.jenkins.io/debian-stable binary/&quot; | sudo tee /etc/apt/sources.list.d/jenkins.list\n\n# Update package index\nsudo apt update\n\n# Install Jenkins\nsudo apt install -y jenkins\n\n# Enable and start service\nsudo systemctl enable --now jenkins\n\n# Configure firewall\nsudo ufw allow 8080/tcp\nsudo ufw allow 50000/tcp\n\n# Get initial admin password\nsudo cat /var/lib/jenkins/secrets/initialAdminPassword</code></pre>\n      </div>\n    </div>\n<h3 id=\"arch-linux\" class=\"mobile-header\">Arch Linux</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Install Java 17 LTS\nsudo pacman -S jdk17-openjdk\n\n# Install Jenkins from AUR\nyay -S jenkins\n\n# Alternative: Install manually from AUR\ngit clone https://aur.archlinux.org/jenkins.git\ncd jenkins\nmakepkg -si\n\n# Create jenkins user if not created\nsudo useradd -r -d /var/lib/jenkins -s /sbin/nologin jenkins\n\n# Enable and start service\nsudo systemctl enable --now jenkins\n\n# Get initial admin password\nsudo cat /var/lib/jenkins/secrets/initialAdminPassword\n\n# Configuration location: /etc/jenkins/</code></pre>\n      </div>\n    </div>\n<h3 id=\"alpine-linux\" class=\"mobile-header\">Alpine Linux</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Jenkins is not officially packaged for Alpine Linux\n# Use Docker or manual installation\n\n# Method 1: Docker installation\napk add --no-cache docker docker-compose\nrc-update add docker default\nrc-service docker start\n\n# Create Jenkins data directory\nmkdir -p /var/lib/jenkins\n\n# Run Jenkins container\ndocker run -d \\\n  --name jenkins \\\n  --restart unless-stopped \\\n  -p 8080:8080 \\\n  -p 50000:50000 \\\n  -v /var/lib/jenkins:/var/jenkins_home \\\n  -v /var/run/docker.sock:/var/run/docker.sock \\\n  --group-add $(getent group docker | cut -d: -f3) \\\n  jenkins/jenkins:lts-jdk17\n\n# Get initial admin password\ndocker exec jenkins cat /var/jenkins_home/secrets/initialAdminPassword\n\n# Method 2: Manual installation with OpenJDK\napk add --no-cache openjdk17-jre-headless\nwget https://get.jenkins.io/war-stable/latest/jenkins.war -O /opt/jenkins.war\n\n# Create jenkins user and directories\nadduser -D -s /sbin/nologin jenkins\nmkdir -p /var/lib/jenkins /var/log/jenkins\nchown -R jenkins:jenkins /var/lib/jenkins /var/log/jenkins\n\n# Create init script\ntee /etc/init.d/jenkins &lt;&lt;&#039;EOF&#039;\n#!/sbin/openrc-run\nname=&quot;Jenkins&quot;\ncommand=&quot;java&quot;\ncommand_args=&quot;-jar /opt/jenkins.war --httpPort=8080 --ajp13Port=-1&quot;\ncommand_user=&quot;jenkins&quot;\npidfile=&quot;/run/jenkins.pid&quot;\ncommand_background=&quot;yes&quot;\ndepend() {\n    need net\n}\nEOF\n\nchmod +x /etc/init.d/jenkins\nrc-update add jenkins default\nrc-service jenkins start</code></pre>\n      </div>\n    </div>\n<h3 id=\"opensusesles\" class=\"mobile-header\">openSUSE/SLES</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># openSUSE Leap/Tumbleweed\nsudo zypper install -y java-17-openjdk java-17-openjdk-devel\n\n# Add Jenkins repository\nsudo zypper addrepo -G https://pkg.jenkins.io/opensuse-stable/ jenkins\nsudo zypper refresh\n\n# Install Jenkins\nsudo zypper install -y jenkins\n\n# SLES 15\nsudo SUSEConnect -p sle-module-development-tools/15.5/x86_64\nsudo zypper install -y java-17-openjdk jenkins\n\n# Enable and start service\nsudo systemctl enable --now jenkins\n\n# Configure firewall\nsudo firewall-cmd --permanent --add-port=8080/tcp\nsudo firewall-cmd --permanent --add-port=50000/tcp\nsudo firewall-cmd --reload\n\n# Get initial admin password\nsudo cat /var/lib/jenkins/secrets/initialAdminPassword</code></pre>\n      </div>\n    </div>\n<h3 id=\"macos\" class=\"mobile-header\">macOS</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Using Homebrew\nbrew install jenkins-lts\n\n# Start Jenkins service\nbrew services start jenkins-lts\n\n# Or run manually\njenkins-lts\n\n# Alternative: Install specific version\nbrew install jenkins-lts@2.414\n\n# Get initial admin password\ncat ~/.jenkins/secrets/initialAdminPassword\n\n# Configuration location: ~/.jenkins/\n# Alternative: /usr/local/var/jenkins_home/ (Intel Macs)\n# Alternative: /opt/homebrew/var/jenkins_home/ (Apple Silicon)</code></pre>\n      </div>\n    </div>\n<h3 id=\"freebsd\" class=\"mobile-header\">FreeBSD</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Using pkg\npkg install jenkins openjdk17\n\n# Using ports\ncd /usr/ports/devel/jenkins\nmake install clean\n\n# Enable Jenkins\necho &#039;jenkins_enable=&quot;YES&quot;&#039; &gt;&gt; /etc/rc.conf\necho &#039;jenkins_java_home=&quot;/usr/local/openjdk17&quot;&#039; &gt;&gt; /etc/rc.conf\n\n# Create jenkins user and directories\npw useradd jenkins -d /usr/local/jenkins -s /sbin/nologin\nmkdir -p /usr/local/jenkins\nchown jenkins:jenkins /usr/local/jenkins\n\n# Start service\nservice jenkins start\n\n# Get initial admin password\ncat /usr/local/jenkins/secrets/initialAdminPassword\n\n# Configuration location: /usr/local/jenkins/</code></pre>\n      </div>\n    </div>\n<h3 id=\"windows\" class=\"mobile-header\">Windows</h3>\n<div class=\"mobile-code-block\" data-language=\"powershell\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">powershell</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-powershell\"># Method 1: Using Chocolatey\nchoco install jenkins\n\n# Method 2: Using Scoop\nscoop install jenkins\n\n# Method 3: Manual installation\n# Download from https://www.jenkins.io/download/\n# Run jenkins.msi installer\n\n# Method 4: Windows service installation\n# Download jenkins.war\n# Install as Windows service\njava -jar jenkins.war --httpPort=8080 --install\n\n# Start service\nnet start Jenkins\n\n# Get initial admin password\nGet-Content &quot;C:\\Program Files\\Jenkins\\secrets\\initialAdminPassword&quot;\n\n# Configuration location: C:\\Program Files\\Jenkins\\\n# Or: %JENKINS_HOME% (if custom location)</code></pre>\n      </div>\n    </div>\n<h2 id=\"initial-configuration\" class=\"mobile-header\">Initial Configuration</h2>\n<h3 id=\"first-run-setup\" class=\"mobile-header\">First-Run Setup</h3>\n<p class=\"mobile-paragraph\">1. <strong>Java Environment Setup</strong>:</p>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Set JAVA_HOME (Linux/macOS)\nexport JAVA_HOME=/usr/lib/jvm/java-17-openjdk\necho &#039;export JAVA_HOME=/usr/lib/jvm/java-17-openjdk&#039; &gt;&gt; ~/.bashrc\n\n# Verify Java installation\njava -version</code></pre>\n      </div>\n    </div>\n<p class=\"mobile-paragraph\">2. <strong>Default configuration locations</strong>:</p>\n<li class=\"mobile-list-item\">RHEL/CentOS/Rocky/AlmaLinux: <code class=\"mobile-inline-code\">/var/lib/jenkins/</code>, <code class=\"mobile-inline-code\">/etc/sysconfig/jenkins</code></li>\n<li class=\"mobile-list-item\">Debian/Ubuntu: <code class=\"mobile-inline-code\">/var/lib/jenkins/</code>, <code class=\"mobile-inline-code\">/etc/default/jenkins</code></li>\n<li class=\"mobile-list-item\">Arch Linux: <code class=\"mobile-inline-code\">/var/lib/jenkins/</code>, <code class=\"mobile-inline-code\">/etc/jenkins/</code></li>\n<li class=\"mobile-list-item\">Alpine Linux: <code class=\"mobile-inline-code\">/var/lib/jenkins/</code> (Docker) or <code class=\"mobile-inline-code\">/var/lib/jenkins/</code> (manual)</li>\n<li class=\"mobile-list-item\">openSUSE/SLES: <code class=\"mobile-inline-code\">/var/lib/jenkins/</code>, <code class=\"mobile-inline-code\">/etc/sysconfig/jenkins</code></li>\n<li class=\"mobile-list-item\">macOS: <code class=\"mobile-inline-code\">~/.jenkins/</code> or <code class=\"mobile-inline-code\">/usr/local/var/jenkins_home/</code></li>\n<li class=\"mobile-list-item\">FreeBSD: <code class=\"mobile-inline-code\">/usr/local/jenkins/</code></li>\n<li class=\"mobile-list-item\">Windows: <code class=\"mobile-inline-code\">C:\\Program Files\\Jenkins\\</code> or <code class=\"mobile-inline-code\">%JENKINS_HOME%</code></li>\n<p class=\"mobile-paragraph\">3. <strong>Essential initial configuration</strong>:</p>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Initial web setup (after accessing http://your-server:8080)\n# 1. Enter admin password from: /var/lib/jenkins/secrets/initialAdminPassword\n# 2. Install suggested plugins or select specific plugins\n# 3. Create first admin user\n# 4. Configure Jenkins URL\n\n# Essential plugins to install:\n# - Pipeline plugins (Pipeline Suite)\n# - Git plugin\n# - Credentials Binding Plugin\n# - Build Timeout Plugin\n# - Timestamper Plugin\n# - Workspace Cleanup Plugin\n# - Blue Ocean (modern UI)\n# - Matrix Authorization Strategy Plugin</code></pre>\n      </div>\n    </div>\n<h3 id=\"testing-initial-setup\" class=\"mobile-header\">Testing Initial Setup</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Check service status\nsudo systemctl status jenkins\n\n# Check web interface\ncurl -I http://localhost:8080\n\n# Test Java version\njava -version\n\n# Check Jenkins process\nps aux | grep jenkins\n\n# Verify Jenkins CLI\nwget http://localhost:8080/jnlpJars/jenkins-cli.jar\njava -jar jenkins-cli.jar -s http://localhost:8080 version\n\n# Check available plugins\njava -jar jenkins-cli.jar -s http://localhost:8080 list-plugins</code></pre>\n      </div>\n    </div>\n<p class=\"mobile-paragraph\"><strong>WARNING:</strong> Change the default admin password immediately and configure proper authentication!</p>\n<h2 id=\"service-management\" class=\"mobile-header\">Service Management</h2>\n<h3 id=\"systemd-rhel-debian-ubuntu-arch-opensuse\" class=\"mobile-header\">systemd (RHEL, Debian, Ubuntu, Arch, openSUSE)</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Enable Jenkins to start on boot\nsudo systemctl enable jenkins\n\n# Start Jenkins\nsudo systemctl start jenkins\n\n# Stop Jenkins\nsudo systemctl stop jenkins\n\n# Restart Jenkins\nsudo systemctl restart jenkins\n\n# Graceful restart (wait for running builds)\nsudo systemctl reload jenkins\n\n# Check status\nsudo systemctl status jenkins\n\n# View logs\nsudo journalctl -u jenkins -f\n\n# Edit service configuration\nsudo systemctl edit jenkins\n# Add custom environment variables or JVM options</code></pre>\n      </div>\n    </div>\n<h3 id=\"openrc-alpine-linux\" class=\"mobile-header\">OpenRC (Alpine Linux)</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Docker-based installation\ndocker start jenkins\ndocker stop jenkins\ndocker restart jenkins\n\n# Check container status\ndocker ps | grep jenkins\n\n# View logs\ndocker logs -f jenkins\n\n# Manual installation\nrc-update add jenkins default\nrc-service jenkins start\nrc-service jenkins stop\nrc-service jenkins restart\nrc-service jenkins status</code></pre>\n      </div>\n    </div>\n<h3 id=\"rcd-freebsd\" class=\"mobile-header\">rc.d (FreeBSD)</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Enable in /etc/rc.conf\necho &#039;jenkins_enable=&quot;YES&quot;&#039; &gt;&gt; /etc/rc.conf\n\n# Start Jenkins\nservice jenkins start\n\n# Stop Jenkins\nservice jenkins stop\n\n# Restart Jenkins\nservice jenkins restart\n\n# Check status\nservice jenkins status\n\n# View logs\ntail -f /var/log/jenkins/jenkins.log</code></pre>\n      </div>\n    </div>\n<h3 id=\"launchd-macos\" class=\"mobile-header\">launchd (macOS)</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Using Homebrew services\nbrew services start jenkins-lts\nbrew services stop jenkins-lts\nbrew services restart jenkins-lts\n\n# Check status\nbrew services list | grep jenkins\n\n# Manual control\njenkins-lts --httpPort=8080\n\n# View logs\ntail -f /usr/local/var/log/jenkins/jenkins.log</code></pre>\n      </div>\n    </div>\n<h3 id=\"windows-service-manager\" class=\"mobile-header\">Windows Service Manager</h3>\n<div class=\"mobile-code-block\" data-language=\"powershell\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">powershell</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-powershell\"># Start Jenkins service\nnet start Jenkins\n\n# Stop Jenkins service\nnet stop Jenkins\n\n# Using PowerShell\nStart-Service Jenkins\nStop-Service Jenkins\nRestart-Service Jenkins\n\n# Check status\nGet-Service Jenkins\n\n# View logs (Windows Event Log)\nGet-EventLog -LogName Application -Source Jenkins\n\n# Or check Jenkins logs\nGet-Content &quot;C:\\Program Files\\Jenkins\\logs\\jenkins.log&quot; -Tail 50 -Wait</code></pre>\n      </div>\n    </div>\n<h2 id=\"advanced-configuration\" class=\"mobile-header\">Advanced Configuration</h2>\n<h3 id=\"high-availability-configuration\" class=\"mobile-header\">High Availability Configuration</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Multi-master setup with shared storage\n# Method 1: Shared filesystem (NFS, GlusterFS)\nsudo mkdir -p /shared/jenkins\nsudo mount -t nfs nfs-server:/jenkins /shared/jenkins\n\n# Update Jenkins home\nsudo systemctl edit jenkins\n# Add:\n[Service]\nEnvironment=&quot;JENKINS_HOME=/shared/jenkins&quot;\n\n# Method 2: Database-backed configuration\n# Install CloudBees Jenkins Enterprise plugins for HA\n# Configure external database (PostgreSQL recommended)\n\n# Agent configuration for load distribution\nsudo tee /var/lib/jenkins/casc_configs/agents.yaml &lt;&lt;EOF\njenkins:\n  nodes:\n    - permanent:\n        name: &quot;linux-agent-1&quot;\n        remoteFS: &quot;/var/lib/jenkins&quot;\n        numExecutors: 4\n        launcher:\n          ssh:\n            host: &quot;agent1.example.com&quot;\n            credentialsId: &quot;ssh-agent-key&quot;\n    - permanent:\n        name: &quot;windows-agent-1&quot;\n        remoteFS: &quot;C:\\\\Jenkins&quot;\n        numExecutors: 2\n        launcher:\n          command:\n            command: &quot;java -jar agent.jar&quot;\nEOF</code></pre>\n      </div>\n    </div>\n<h3 id=\"advanced-security-settings\" class=\"mobile-header\">Advanced Security Settings</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Configure Jenkins Configuration as Code (JCasC) for security\nsudo tee /var/lib/jenkins/casc_configs/security.yaml &lt;&lt;EOF\njenkins:\n  securityRealm:\n    ldap:\n      configurations:\n        - server: &quot;ldaps://ldap.example.com:636&quot;\n          rootDN: &quot;DC=example,DC=com&quot;\n          userSearchBase: &quot;OU=Users&quot;\n          userSearch: &quot;(&amp;(objectCategory=Person)(objectClass=user)(sAMAccountName={0}))&quot;\n          groupSearchBase: &quot;OU=Groups&quot;\n          managerDN: &quot;CN=jenkins,OU=Service Accounts,DC=example,DC=com&quot;\n          managerPasswordSecret: &quot;ldap-password&quot;\n          \n  authorizationStrategy:\n    roleBased:\n      roles:\n        global:\n          - name: &quot;admin&quot;\n            permissions:\n              - &quot;Overall/Administer&quot;\n            assignments:\n              - &quot;jenkins-admins&quot;\n          - name: &quot;developer&quot;\n            permissions:\n              - &quot;Overall/Read&quot;\n              - &quot;Job/Build&quot;\n              - &quot;Job/Read&quot;\n            assignments:\n              - &quot;developers&quot;\n\nsecurity:\n  globalJobDslSecurityConfiguration:\n    useScriptSecurity: true\n  scriptApproval:\n    approvedSignatures:\n      - &quot;method java.lang.String trim&quot;\n      - &quot;staticMethod java.lang.System getProperty java.lang.String&quot;\n\nunclassified:\n  location:\n    adminAddress: &quot;jenkins@example.com&quot;\n    url: &quot;https://jenkins.example.com/&quot;\n    \n  mailer:\n    smtpHost: &quot;smtp.example.com&quot;\n    smtpPort: 587\n    charset: &quot;UTF-8&quot;\n    authentication:\n      username: &quot;jenkins@example.com&quot;\n      password: &quot;{AQAAABAAAAAQhudQr8JjwNNI9pj8oI3L2gE=}&quot;\n    useSsl: false\n    useTls: true\nEOF</code></pre>\n      </div>\n    </div>\n<h2 id=\"reverse-proxy-setup\" class=\"mobile-header\">Reverse Proxy Setup</h2>\n<h3 id=\"nginx-configuration\" class=\"mobile-header\">nginx Configuration</h3>\n<div class=\"mobile-code-block\" data-language=\"nginx\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">nginx</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-nginx\"># /etc/nginx/sites-available/jenkins\nupstream jenkins {\n    server 127.0.0.1:8080 fail_timeout=0;\n    keepalive 32;\n}\n\nserver {\n    listen 80;\n    server_name jenkins.example.com;\n    return 301 https://$server_name$request_uri;\n}\n\nserver {\n    listen 443 ssl http2;\n    server_name jenkins.example.com;\n\n    ssl_certificate /etc/letsencrypt/live/jenkins.example.com/fullchain.pem;\n    ssl_certificate_key /etc/letsencrypt/live/jenkins.example.com/privkey.pem;\n    \n    # Security headers\n    add_header Strict-Transport-Security &quot;max-age=31536000; includeSubDomains&quot; always;\n    add_header X-Content-Type-Options nosniff always;\n    add_header X-Frame-Options DENY always;\n    add_header X-XSS-Protection &quot;1; mode=block&quot; always;\n    add_header Referrer-Policy &quot;strict-origin-when-cross-origin&quot; always;\n\n    client_max_body_size 100M;\n    \n    location / {\n        proxy_pass http://jenkins;\n        proxy_redirect default;\n        proxy_http_version 1.1;\n        \n        # Required headers for Jenkins\n        proxy_set_header Host $host;\n        proxy_set_header X-Real-IP $remote_addr;\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n        proxy_set_header X-Forwarded-Proto $scheme;\n        proxy_set_header X-Forwarded-Port $server_port;\n        \n        # WebSocket support for Jenkins\n        proxy_set_header Upgrade $http_upgrade;\n        proxy_set_header Connection &quot;upgrade&quot;;\n        \n        # Timeout settings\n        proxy_connect_timeout 90;\n        proxy_send_timeout 90;\n        proxy_read_timeout 90;\n        \n        proxy_buffering off;\n        proxy_request_buffering off;\n        proxy_max_temp_file_size 0;\n    }\n}</code></pre>\n      </div>\n    </div>\n<h3 id=\"haproxy-configuration\" class=\"mobile-header\">HAProxy Configuration</h3>\n<div class=\"mobile-code-block\" data-language=\"haproxy\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">haproxy</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-haproxy\"># /etc/haproxy/haproxy.cfg\nfrontend jenkins_frontend\n    bind *:80\n    bind *:443 ssl crt /etc/ssl/certs/jenkins.pem\n    redirect scheme https if !{ ssl_fc }\n    default_backend jenkins_servers\n\nbackend jenkins_servers\n    mode http\n    balance roundrobin\n    option httpchk GET /login\n    http-check expect status 200\n    server jenkins1 127.0.0.1:8080 check inter 30s rise 2 fall 3\n    server jenkins2 127.0.0.1:8081 check inter 30s rise 2 fall 3 backup\n\n    # Headers for Jenkins\n    http-request set-header X-Forwarded-Proto https\n    http-request set-header X-Forwarded-Port %[dst_port]\n    http-response set-header Strict-Transport-Security &quot;max-age=31536000; includeSubDomains&quot;</code></pre>\n      </div>\n    </div>\n<h3 id=\"apache-http-server-configuration\" class=\"mobile-header\">Apache HTTP Server Configuration</h3>\n<div class=\"mobile-code-block\" data-language=\"apache\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">apache</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-apache\"># /etc/apache2/sites-available/jenkins.conf\n&lt;VirtualHost *:80&gt;\n    ServerName jenkins.example.com\n    Redirect permanent / https://jenkins.example.com/\n&lt;/VirtualHost&gt;\n\n&lt;VirtualHost *:443&gt;\n    ServerName jenkins.example.com\n    \n    SSLEngine on\n    SSLCertificateFile /etc/letsencrypt/live/jenkins.example.com/fullchain.pem\n    SSLCertificateKeyFile /etc/letsencrypt/live/jenkins.example.com/privkey.pem\n    \n    # Security headers\n    Header always set Strict-Transport-Security &quot;max-age=31536000; includeSubDomains&quot;\n    Header always set X-Content-Type-Options nosniff\n    Header always set X-Frame-Options DENY\n    Header always set X-XSS-Protection &quot;1; mode=block&quot;\n    \n    ProxyPreserveHost On\n    ProxyRequests Off\n    \n    ProxyPass / http://127.0.0.1:8080/ nocanon\n    ProxyPassReverse / http://127.0.0.1:8080/\n    ProxyPassReverse  /  http://jenkins.example.com/\n    \n    # WebSocket support\n    RewriteEngine on\n    RewriteCond %{HTTP:Upgrade} websocket [NC]\n    RewriteCond %{HTTP:Connection} upgrade [NC]\n    RewriteRule ^/?(.*) &quot;ws://127.0.0.1:8080/$1&quot; [P,L]\n    \n    AllowEncodedSlashes NoDecode\n&lt;/VirtualHost&gt;</code></pre>\n      </div>\n    </div>\n<h2 id=\"security-configuration\" class=\"mobile-header\">Security Configuration</h2>\n<h3 id=\"ssltls-setup\" class=\"mobile-header\">SSL/TLS Setup</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Generate self-signed certificate (development only)\nsudo mkdir -p /etc/jenkins/ssl\nsudo openssl req -x509 -newkey rsa:4096 -keyout /etc/jenkins/ssl/jenkins.key -out /etc/jenkins/ssl/jenkins.crt -days 365 -nodes -subj &quot;/C=US/ST=State/L=City/O=Organization/CN=jenkins.example.com&quot;\n\n# Create Java keystore\nsudo keytool -genkey -alias jenkins -keyalg RSA -keystore /etc/jenkins/ssl/jenkins.jks -keysize 2048 -dname &quot;CN=jenkins.example.com,OU=IT,O=Organization,L=City,ST=State,C=US&quot; -storepass changeit -keypass changeit\n\n# Configure Jenkins to use HTTPS\nsudo systemctl edit jenkins\n# Add:\n[Service]\nEnvironment=&quot;JENKINS_OPTS=--httpPort=-1 --httpsPort=8443 --httpsKeyStore=/etc/jenkins/ssl/jenkins.jks --httpsKeyStorePassword=changeit&quot;\n\nsudo systemctl restart jenkins\n\n# Or use Let&#039;s Encrypt with reverse proxy (recommended)\nsudo certbot --nginx -d jenkins.example.com</code></pre>\n      </div>\n    </div>\n<h3 id=\"authentication-and-authorization\" class=\"mobile-header\">Authentication and Authorization</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Configure LDAP authentication via JCasC\nsudo tee /var/lib/jenkins/casc_configs/auth.yaml &lt;&lt;EOF\njenkins:\n  securityRealm:\n    ldap:\n      configurations:\n        - server: &quot;ldaps://ldap.example.com:636&quot;\n          rootDN: &quot;DC=example,DC=com&quot;\n          inhibitInferRootDN: false\n          userSearchBase: &quot;OU=Users&quot;\n          userSearch: &quot;(&amp;(objectCategory=Person)(objectClass=user)(sAMAccountName={0}))&quot;\n          groupSearchBase: &quot;OU=Groups&quot;\n          groupSearchFilter: &quot;(&amp;(objectClass=group)(cn={0}))&quot;\n          managerDN: &quot;CN=jenkins,OU=Service Accounts,DC=example,DC=com&quot;\n          managerPasswordSecret: &quot;ldap-password&quot;\n          displayNameAttributeName: &quot;displayName&quot;\n          mailAddressAttributeName: &quot;mail&quot;\n\n  authorizationStrategy:\n    roleBased:\n      roles:\n        global:\n          - name: &quot;jenkins-admins&quot;\n            permissions:\n              - &quot;Overall/Administer&quot;\n            assignments:\n              - &quot;Domain Admins&quot;\n              - &quot;jenkins-admins&quot;\n          - name: &quot;developers&quot;\n            permissions:\n              - &quot;Overall/Read&quot;\n              - &quot;Job/Build&quot;\n              - &quot;Job/Cancel&quot;\n              - &quot;Job/Read&quot;\n              - &quot;Job/Workspace&quot;\n              - &quot;Run/Replay&quot;\n              - &quot;Run/Update&quot;\n            assignments:\n              - &quot;developers&quot;\n              - &quot;authenticated&quot;\n          - name: &quot;viewers&quot;\n            permissions:\n              - &quot;Overall/Read&quot;\n              - &quot;Job/Read&quot;\n            assignments:\n              - &quot;viewers&quot;\n              \ncredentials:\n  system:\n    domainCredentials:\n      - credentials:\n          - usernamePassword:\n              scope: GLOBAL\n              id: &quot;ldap-password&quot;\n              username: &quot;CN=jenkins,OU=Service Accounts,DC=example,DC=com&quot;\n              password: &quot;{AQAAABAAAAAQSecureEncryptedPassword=}&quot;\n              description: &quot;LDAP Service Account&quot;\n          - basicSSHUserPrivateKey:\n              scope: GLOBAL\n              id: &quot;ssh-agent-key&quot;\n              username: &quot;jenkins&quot;\n              description: &quot;SSH key for Jenkins agents&quot;\n              privateKeySource:\n                directEntry:\n                  privateKey: |\n                    -----BEGIN OPENSSH PRIVATE KEY-----\n                    EncryptedPrivateKeyContentHere\n                    -----END OPENSSH PRIVATE KEY-----\nEOF</code></pre>\n      </div>\n    </div>\n<h3 id=\"firewall-rules\" class=\"mobile-header\">Firewall Rules</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># UFW (Ubuntu/Debian)\nsudo ufw allow from 192.168.1.0/24 to any port 8080\nsudo ufw allow from 192.168.1.0/24 to any port 50000\nsudo ufw reload\n\n# firewalld (RHEL/CentOS/openSUSE)\nsudo firewall-cmd --permanent --new-zone=jenkins\nsudo firewall-cmd --permanent --zone=jenkins --add-source=192.168.1.0/24\nsudo firewall-cmd --permanent --zone=jenkins --add-port=8080/tcp\nsudo firewall-cmd --permanent --zone=jenkins --add-port=50000/tcp\nsudo firewall-cmd --reload\n\n# iptables\nsudo iptables -A INPUT -s 192.168.1.0/24 -p tcp --dport 8080 -j ACCEPT\nsudo iptables -A INPUT -s 192.168.1.0/24 -p tcp --dport 50000 -j ACCEPT\nsudo iptables-save &gt; /etc/iptables/rules.v4\n\n# pf (FreeBSD)\n# Add to /etc/pf.conf\npass in on $ext_if proto tcp from 192.168.1.0/24 to any port {8080, 50000}\n\n# Windows Firewall\nNew-NetFirewallRule -DisplayName &quot;Jenkins HTTP&quot; -Direction Inbound -Protocol TCP -LocalPort 8080 -RemoteAddress 192.168.1.0/24 -Action Allow\nNew-NetFirewallRule -DisplayName &quot;Jenkins Agent&quot; -Direction Inbound -Protocol TCP -LocalPort 50000 -RemoteAddress 192.168.1.0/24 -Action Allow</code></pre>\n      </div>\n    </div>\n<h2 id=\"database-setup\" class=\"mobile-header\">Database Setup</h2>\n<h3 id=\"external-database-configuration-postgresql\" class=\"mobile-header\">External Database Configuration (PostgreSQL)</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Install PostgreSQL\nsudo apt install -y postgresql postgresql-contrib\n\n# Create Jenkins database\nsudo -u postgres createdb jenkinsdb\nsudo -u postgres createuser jenkinsuser\nsudo -u postgres psql -c &quot;ALTER USER jenkinsuser WITH PASSWORD &#039;SecureJenkinsPassword123!&#039;;&quot;\nsudo -u postgres psql -c &quot;GRANT ALL PRIVILEGES ON DATABASE jenkinsdb TO jenkinsuser;&quot;\n\n# Download PostgreSQL driver\nwget https://jdbc.postgresql.org/download/postgresql-42.6.0.jar -O /var/lib/jenkins/postgresql-connector.jar\n\n# Configure Jenkins to use PostgreSQL\nsudo tee -a /etc/default/jenkins &lt;&lt;EOF\n# PostgreSQL database configuration\nJENKINS_JAVA_OPTIONS=&quot;-Djenkins.install.runSetupWizard=false -Dhudson.model.DirectoryBrowserSupport.CSP=\\&quot;sandbox allow-scripts; default-src &#039;self&#039;; script-src &#039;self&#039; &#039;unsafe-inline&#039;; style-src &#039;self&#039; &#039;unsafe-inline&#039;;\\&quot;&quot;\nEOF\n\n# Create database configuration\nsudo tee /var/lib/jenkins/database-config.xml &lt;&lt;EOF\n&lt;databaseConfiguration&gt;\n  &lt;database class=&quot;org.jenkinsci.plugins.database.postgresql.PostgreSQLDatabase&quot;&gt;\n    &lt;hostname&gt;localhost&lt;/hostname&gt;\n    &lt;port&gt;5432&lt;/port&gt;\n    &lt;database&gt;jenkinsdb&lt;/database&gt;\n    &lt;username&gt;jenkinsuser&lt;/username&gt;\n    &lt;password&gt;{AQAAABAAAAAQEncryptedPasswordHere=}&lt;/password&gt;\n    &lt;properties&gt;sslmode=require&lt;/properties&gt;\n  &lt;/database&gt;\n&lt;/databaseConfiguration&gt;\nEOF</code></pre>\n      </div>\n    </div>\n<h3 id=\"backup-database-schema\" class=\"mobile-header\">Backup Database Schema</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Create database schema backup\nsudo -u postgres pg_dump jenkinsdb &gt; /backup/jenkins/jenkinsdb-schema-$(date +%Y%m%d).sql\n\n# Create Jenkins jobs and configuration backup\nsudo tee /usr/local/bin/jenkins-db-backup.sh &lt;&lt;&#039;EOF&#039;\n#!/bin/bash\nBACKUP_DIR=&quot;/backup/jenkins/$(date +%Y%m%d_%H%M%S)&quot;\nmkdir -p &quot;$BACKUP_DIR&quot;\n\n# PostgreSQL backup\nsudo -u postgres pg_dump jenkinsdb | gzip &gt; &quot;$BACKUP_DIR/jenkinsdb.sql.gz&quot;\n\n# Jenkins configuration backup\ntar -czf &quot;$BACKUP_DIR/jenkins-config.tar.gz&quot; \\\n  --exclude=&quot;/var/lib/jenkins/workspace/*&quot; \\\n  --exclude=&quot;/var/lib/jenkins/builds/*/archive&quot; \\\n  --exclude=&quot;/var/lib/jenkins/logs/*&quot; \\\n  /var/lib/jenkins/\n\necho &quot;Database backup completed: $BACKUP_DIR&quot;\nEOF\n\nchmod +x /usr/local/bin/jenkins-db-backup.sh</code></pre>\n      </div>\n    </div>\n<h2 id=\"performance-optimization\" class=\"mobile-header\">Performance Optimization</h2>\n<h3 id=\"system-tuning\" class=\"mobile-header\">System Tuning</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Jenkins-specific system optimizations\nsudo tee -a /etc/sysctl.conf &lt;&lt;EOF\n# Jenkins optimizations\nvm.swappiness = 1\nfs.file-max = 65535\nnet.core.somaxconn = 32768\nnet.ipv4.tcp_max_syn_backlog = 8192\nnet.ipv4.ip_local_port_range = 1024 65535\nEOF\n\nsudo sysctl -p\n\n# Increase file descriptor limits\nsudo tee -a /etc/security/limits.conf &lt;&lt;EOF\njenkins soft nofile 65535\njenkins hard nofile 65535\njenkins soft nproc 32768\njenkins hard nproc 32768\nEOF\n\n# Optimize Jenkins JVM settings\nsudo systemctl edit jenkins\n# Add:\n[Service]\nEnvironment=&quot;JAVA_OPTS=-Xmx8g -Xms4g -XX:+UseG1GC -XX:+UseStringDeduplication -XX:+DisableExplicitGC -XX:+UnlockExperimentalVMOptions -XX:+UseCGroupMemoryLimitForHeap&quot;\nEnvironment=&quot;JENKINS_OPTS=--sessionTimeout=1440 --sessionEviction=86400&quot;\n\nsudo systemctl daemon-reload\nsudo systemctl restart jenkins</code></pre>\n      </div>\n    </div>\n<h3 id=\"jenkins-performance-configuration\" class=\"mobile-header\">Jenkins Performance Configuration</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Configure Jenkins for high performance\nsudo tee /var/lib/jenkins/casc_configs/performance.yaml &lt;&lt;EOF\njenkins:\n  systemMessage: &quot;High-Performance Jenkins Instance&quot;\n  numExecutors: 0  # Don&#039;t run builds on controller\n  mode: EXCLUSIVE\n  quietPeriod: 5\n  scmCheckoutRetryCount: 3\n  \n  # Global pipeline libraries for shared code\n  globalLibraries:\n    libraries:\n      - name: &quot;shared-pipeline-library&quot;\n        defaultVersion: &quot;main&quot;\n        implicit: true\n        retriever:\n          modernSCM:\n            scm:\n              git:\n                remote: &quot;https://github.com/example/jenkins-shared-library.git&quot;\n                credentialsId: &quot;github-token&quot;\n\n  # Configure build discarders globally\n  buildDiscarders:\n    configuredBuildDiscarders:\n      - &quot;logRotator&quot;:\n          artifactDaysToKeepStr: &quot;30&quot;\n          artifactNumToKeepStr: &quot;10&quot;\n          daysToKeepStr: &quot;30&quot;\n          numToKeepStr: &quot;100&quot;\n\nunclassified:\n  # Configure global timeout\n  buildTimeout:\n    operations:\n      - timeoutMinutes: 60\n      - failBuild: true\n      - writingDescription: true\n      \n  # Workspace cleanup configuration  \n  wsCleanup:\n    deleteDirs: true\n    cleanupMatrixParent: true\n    skipWhenFailed: false\n    \ntool:\n  # Configure tools for performance\n  git:\n    installations:\n      - name: &quot;Default&quot;\n        home: &quot;/usr/bin/git&quot;\n        \n  maven:\n    installations:\n      - name: &quot;Maven 3.9&quot;\n        properties:\n          - installSource:\n              installers:\n                - maven:\n                    id: &quot;3.9.6&quot;\n                    \n  gradle:\n    installations:\n      - name: &quot;Gradle 8&quot;\n        properties:\n          - installSource:\n              installers:\n                - gradleInstaller:\n                    id: &quot;8.4&quot;\n\n  nodejs:\n    installations:\n      - name: &quot;NodeJS 18&quot;\n        properties:\n          - installSource:\n              installers:\n                - nodeJSInstaller:\n                    id: &quot;18.18.2&quot;\n                    \n  dockerTool:\n    installations:\n      - name: &quot;Docker&quot;\n        properties:\n          - installSource:\n              installers:\n                - dockerInstaller:\n                    version: &quot;latest&quot;\nEOF\n\n# Configure agent templates for auto-scaling\nsudo tee /var/lib/jenkins/casc_configs/agents.yaml &lt;&lt;EOF\njenkins:\n  clouds:\n    - kubernetes:\n        name: &quot;kubernetes&quot;\n        serverUrl: &quot;https://kubernetes.default.svc.cluster.local&quot;\n        namespace: &quot;jenkins&quot;\n        credentialsId: &quot;kubernetes-token&quot;\n        jenkinsUrl: &quot;http://jenkins.jenkins.svc.cluster.local:8080&quot;\n        jenkinsTunnel: &quot;jenkins-agent.jenkins.svc.cluster.local:50000&quot;\n        connectTimeout: 300\n        readTimeout: 300\n        containerCapStr: 100\n        templates:\n          - name: &quot;jenkins-agent&quot;\n            namespace: &quot;jenkins&quot;\n            label: &quot;kubernetes docker&quot;\n            nodeUsageMode: EXCLUSIVE\n            containers:\n              - name: &quot;jnlp&quot;\n                image: &quot;jenkins/inbound-agent:latest&quot;\n                alwaysPullImage: true\n                workingDir: &quot;/home/jenkins/agent&quot;\n                command: &quot;&quot;\n                args: &quot;&quot;\n                resourceRequestCpu: &quot;500m&quot;\n                resourceRequestMemory: &quot;1Gi&quot;\n                resourceLimitCpu: &quot;2&quot;\n                resourceLimitMemory: &quot;4Gi&quot;\n            volumes:\n              - hostPathVolume:\n                  hostPath: &quot;/var/run/docker.sock&quot;\n                  mountPath: &quot;/var/run/docker.sock&quot;\nEOF</code></pre>\n      </div>\n    </div>\n<h3 id=\"pipeline-optimization\" class=\"mobile-header\">Pipeline Optimization</h3>\n<div class=\"mobile-code-block\" data-language=\"groovy\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">groovy</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-groovy\">// Optimized Jenkins Pipeline Template\n// /var/lib/jenkins/pipeline-templates/optimized-pipeline.groovy\n@Library(&#039;shared-pipeline-library&#039;) _\n\npipeline {\n    agent {\n        label &#039;docker &amp;&amp; linux&#039;\n    }\n    \n    options {\n        buildDiscarder(logRotator(numToKeepStr: &#039;50&#039;, artifactNumToKeepStr: &#039;10&#039;))\n        timeout(time: 120, unit: &#039;MINUTES&#039;)\n        timestamps()\n        skipDefaultCheckout(true)\n        disableConcurrentBuilds()\n        ansiColor(&#039;xterm&#039;)\n        parallelsAlwaysFailFast()\n        copyArtifactPermission(&#039;*&#039;)\n    }\n    \n    environment {\n        DOCKER_REGISTRY = credentials(&#039;docker-registry-url&#039;)\n        MAVEN_OPTS = &#039;-Xmx2g -XX:+UseG1GC&#039;\n        GRADLE_OPTS = &#039;-Xmx2g -Dorg.gradle.daemon=false&#039;\n        CI = &#039;true&#039;\n    }\n    \n    stages {\n        stage(&#039;Checkout&#039;) {\n            steps {\n                checkout scm\n                script {\n                    env.GIT_COMMIT_SHORT = env.GIT_COMMIT.take(8)\n                    env.BUILD_VERSION = &quot;${env.BUILD_NUMBER}-${env.GIT_COMMIT_SHORT}&quot;\n                }\n            }\n        }\n        \n        stage(&#039;Parallel Analysis&#039;) {\n            parallel {\n                stage(&#039;Code Quality&#039;) {\n                    steps {\n                        script {\n                            // SonarQube analysis\n                            withSonarQubeEnv(&#039;SonarQube&#039;) {\n                                sh &#039;&#039;&#039;\n                                    mvn sonar:sonar \\\n                                        -Dsonar.projectKey=${JOB_NAME} \\\n                                        -Dsonar.projectVersion=${BUILD_VERSION} \\\n                                        -Dsonar.sources=src/main \\\n                                        -Dsonar.tests=src/test \\\n                                        -Dsonar.coverage.jacoco.xmlReportPaths=target/site/jacoco/jacoco.xml\n                                &#039;&#039;&#039;\n                            }\n                            \n                            timeout(time: 10, unit: &#039;MINUTES&#039;) {\n                                waitForQualityGate abortPipeline: true\n                            }\n                        }\n                    }\n                }\n                \n                stage(&#039;Security Scan&#039;) {\n                    steps {\n                        // OWASP Dependency Check\n                        dependencyCheck additionalArguments: &#039;&#039;&#039;\n                            --enableRetired\n                            --enableExperimental  \n                            --scan ./\n                            --format JSON\n                            --format HTML\n                            --suppression dependency-check-suppressions.xml\n                        &#039;&#039;&#039;, odcInstallation: &#039;dependency-check-8.4.0&#039;\n                        \n                        dependencyCheckPublisher pattern: &#039;**/dependency-check-report.xml&#039;\n                        \n                        // Secret scanning\n                        sh &#039;&#039;&#039;\n                            docker run --rm -v $(pwd):/repo \\\n                                trufflesecurity/trufflehog:latest \\\n                                git file:///repo \\\n                                --json \\\n                                --fail &gt; trufflehog-results.json || true\n                        &#039;&#039;&#039;\n                    }\n                }\n                \n                stage(&#039;Test&#039;) {\n                    steps {\n                        sh &#039;&#039;&#039;\n                            # Parallel test execution\n                            mvn clean test \\\n                                -Dmaven.test.failure.ignore=true \\\n                                -Dspring.profiles.active=test \\\n                                -Djunit.jupiter.execution.parallel.enabled=true \\\n                                -Djunit.jupiter.execution.parallel.mode.default=concurrent\n                        &#039;&#039;&#039;\n                        \n                        publishTestResults testResultsPattern: &#039;target/surefire-reports/*.xml&#039;\n                        publishCoverage adapters: [jacocoAdapter(&#039;target/site/jacoco/jacoco.xml&#039;)], \n                                       sourceFileResolver: sourceFiles(&#039;STORE_LAST_BUILD&#039;)\n                    }\n                    post {\n                        always {\n                            archiveArtifacts artifacts: &#039;target/surefire-reports/**&#039;, allowEmptyArchive: true\n                        }\n                    }\n                }\n            }\n        }\n        \n        stage(&#039;Build &amp; Package&#039;) {\n            steps {\n                sh &#039;&#039;&#039;\n                    # Optimized build with parallel processing\n                    mvn clean package \\\n                        -DskipTests \\\n                        -T 2C \\\n                        -Dspring.profiles.active=production \\\n                        -Dmaven.javadoc.skip=true\n                &#039;&#039;&#039;\n                \n                // Docker build with BuildKit\n                script {\n                    def image = docker.build(&quot;${env.DOCKER_REGISTRY}/${env.JOB_NAME}:${env.BUILD_VERSION}&quot;, \n                                           &quot;--build-arg BUILD_VERSION=${env.BUILD_VERSION} .&quot;)\n                    \n                    // Security scanning with Trivy\n                    sh &quot;&quot;&quot;\n                        docker run --rm -v /var/run/docker.sock:/var/run/docker.sock \\\n                            aquasec/trivy:latest image \\\n                            --format table \\\n                            --severity HIGH,CRITICAL \\\n                            --exit-code 1 \\\n                            ${env.DOCKER_REGISTRY}/${env.JOB_NAME}:${env.BUILD_VERSION}\n                    &quot;&quot;&quot;\n                    \n                    image.push()\n                    image.push(&quot;latest&quot;)\n                }\n            }\n        }\n        \n        stage(&#039;Deploy&#039;) {\n            when {\n                anyOf {\n                    branch &#039;main&#039;\n                    branch &#039;develop&#039;\n                    branch &#039;release/*&#039;\n                }\n            }\n            parallel {\n                stage(&#039;Staging&#039;) {\n                    when { branch &#039;develop&#039; }\n                    steps {\n                        script {\n                            // Deploy to staging environment\n                            sh &#039;&#039;&#039;\n                                kubectl set image deployment/myapp-staging \\\n                                    myapp=${DOCKER_REGISTRY}/${JOB_NAME}:${BUILD_VERSION} \\\n                                    --namespace=staging\n                                \n                                kubectl rollout status deployment/myapp-staging \\\n                                    --namespace=staging --timeout=300s\n                            &#039;&#039;&#039;\n                            \n                            // Run smoke tests\n                            sh &#039;&#039;&#039;\n                                curl -f http://myapp-staging.example.com/health || exit 1\n                                npm run test:e2e -- --base-url http://myapp-staging.example.com\n                            &#039;&#039;&#039;\n                        }\n                    }\n                }\n                \n                stage(&#039;Production&#039;) {\n                    when { \n                        anyOf {\n                            branch &#039;main&#039;\n                            branch &#039;release/*&#039;\n                        }\n                    }\n                    steps {\n                        // Manual approval for production\n                        timeout(time: 60, unit: &#039;MINUTES&#039;) {\n                            input message: &#039;Deploy to production?&#039;, \n                                  ok: &#039;Deploy&#039;,\n                                  submitterParameter: &#039;APPROVER&#039;\n                        }\n                        \n                        script {\n                            sh &#039;&#039;&#039;\n                                # Blue-green deployment\n                                kubectl set image deployment/myapp-production \\\n                                    myapp=${DOCKER_REGISTRY}/${JOB_NAME}:${BUILD_VERSION} \\\n                                    --namespace=production\n                                \n                                kubectl rollout status deployment/myapp-production \\\n                                    --namespace=production --timeout=600s\n                            &#039;&#039;&#039;\n                        }\n                    }\n                }\n            }\n        }\n    }\n    \n    post {\n        always {\n            // Cleanup workspace\n            cleanWs()\n            \n            // Archive artifacts\n            archiveArtifacts artifacts: &#039;target/*.jar,docker-compose.yml&#039;, \n                           allowEmptyArchive: true, \n                           fingerprint: true\n                           \n            // Collect build metrics\n            script {\n                def buildDuration = currentBuild.duration / 1000\n                echo &quot;Build completed in ${buildDuration} seconds&quot;\n                \n                // Custom metrics collection\n                sh &quot;&quot;&quot;\n                    echo &quot;build_duration_seconds{job=\\&quot;${env.JOB_NAME}\\&quot;,build=\\&quot;${env.BUILD_NUMBER}\\&quot;} ${buildDuration}&quot; &gt; build-metrics.txt\n                &quot;&quot;&quot;\n                \n                archiveArtifacts artifacts: &#039;build-metrics.txt&#039;, allowEmptyArchive: true\n            }\n        }\n        \n        success {\n            // Success notifications\n            emailext(\n                subject: &quot;âœ… Build Success: ${env.JOB_NAME} - ${env.BUILD_NUMBER}&quot;,\n                body: &quot;&quot;&quot;Build successful for ${env.JOB_NAME} build ${env.BUILD_NUMBER}\n                         \n                Build URL: ${env.BUILD_URL}\n                Git Commit: ${env.GIT_COMMIT}\n                Duration: ${currentBuild.durationString}\n                Approver: ${env.APPROVER ?: &#039;Automatic&#039;}&quot;&quot;&quot;,\n                to: &quot;${env.CHANGE_AUTHOR_EMAIL ?: &#039;jenkins@example.com&#039;}&quot;\n            )\n            \n            slackSend(\n                channel: &#039;#deployments&#039;,\n                color: &#039;good&#039;,\n                message: &quot;âœ… Deployment Success: ${env.JOB_NAME} - ${env.BUILD_NUMBER} by ${env.APPROVER ?: &#039;System&#039;}&quot;\n            )\n        }\n        \n        failure {\n            emailext(\n                subject: &quot;âŒ Build Failed: ${env.JOB_NAME} - ${env.BUILD_NUMBER}&quot;,\n                body: &quot;Build failed for ${env.JOB_NAME} build ${env.BUILD_NUMBER}\\n\\nBuild URL: ${env.BUILD_URL}&quot;,\n                to: &quot;${env.CHANGE_AUTHOR_EMAIL ?: &#039;jenkins@example.com&#039;}&quot;\n            )\n            \n            slackSend(\n                channel: &#039;#ci-cd-alerts&#039;,\n                color: &#039;danger&#039;,\n                message: &quot;âŒ Build Failed: ${env.JOB_NAME} - ${env.BUILD_NUMBER} (&lt;${env.BUILD_URL}|View Details&gt;)&quot;\n            )\n        }\n        \n        unstable {\n            emailext(\n                subject: &quot;âš ï¸  Build Unstable: ${env.JOB_NAME} - ${env.BUILD_NUMBER}&quot;,\n                body: &quot;Build unstable for ${env.JOB_NAME} build ${env.BUILD_NUMBER}\\n\\nBuild URL: ${env.BUILD_URL}&quot;,\n                to: &quot;${env.CHANGE_AUTHOR_EMAIL ?: &#039;jenkins@example.com&#039;}&quot;\n            )\n        }\n    }\n}</code></pre>\n      </div>\n    </div>\n<h2 id=\"monitoring\" class=\"mobile-header\">Monitoring</h2>\n<h3 id=\"built-in-monitoring\" class=\"mobile-header\">Built-in Monitoring</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Jenkins CLI monitoring commands\njava -jar jenkins-cli.jar -s http://localhost:8080 -auth admin:password version\njava -jar jenkins-cli.jar -s http://localhost:8080 -auth admin:password list-jobs\njava -jar jenkins-cli.jar -s http://localhost:8080 -auth admin:password list-builds job-name\njava -jar jenkins-cli.jar -s http://localhost:8080 -auth admin:password get-build job-name 1\n\n# System information\ncurl -u admin:password http://localhost:8080/systemInfo\n\n# Build queue status\ncurl -u admin:password http://localhost:8080/queue/api/json\n\n# Node status\ncurl -u admin:password http://localhost:8080/computer/api/json\n\n# Plugin information\ncurl -u admin:password http://localhost:8080/pluginManager/api/json?depth=1</code></pre>\n      </div>\n    </div>\n<h3 id=\"external-monitoring-setup\" class=\"mobile-header\">External Monitoring Setup</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Install Jenkins Prometheus Plugin and configure metrics\n# Via Jenkins UI: Manage Jenkins &gt; Manage Plugins &gt; Available &gt; Prometheus metrics plugin\n\n# Configure Prometheus to scrape Jenkins metrics\nsudo tee /etc/prometheus/jenkins.yml &lt;&lt;EOF\nglobal:\n  scrape_interval: 15s\n\nscrape_configs:\n  - job_name: &#039;jenkins&#039;\n    static_configs:\n      - targets: [&#039;localhost:8080&#039;]\n    metrics_path: /prometheus/\n    scrape_interval: 30s\n    scrape_timeout: 10s\nEOF\n\n# Install Jenkins Exporter (alternative)\nwget https://github.com/lovoo/jenkins_exporter/releases/download/v1.0.0/jenkins_exporter-1.0.0.linux-amd64.tar.gz\ntar xzf jenkins_exporter-*.tar.gz\nsudo cp jenkins_exporter /usr/local/bin/\n\n# Create systemd service\nsudo tee /etc/systemd/system/jenkins_exporter.service &lt;&lt;EOF\n[Unit]\nDescription=Jenkins Exporter\nAfter=network.target\n\n[Service]\nType=simple\nUser=jenkins\nExecStart=/usr/local/bin/jenkins_exporter \\\n    --jenkins.address=http://localhost:8080 \\\n    --jenkins.username=monitoring \\\n    --jenkins.password=MonitoringPassword123! \\\n    --web.listen-address=:9118\nRestart=always\n\n[Install]\nWantedBy=multi-user.target\nEOF\n\nsudo systemctl enable --now jenkins_exporter</code></pre>\n      </div>\n    </div>\n<h3 id=\"health-check-scripts\" class=\"mobile-header\">Health Check Scripts</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\">#!/bin/bash\n# jenkins-health-check.sh\n\nJENKINS_URL=&quot;http://localhost:8080&quot;\nHEALTH_LOG=&quot;/var/log/jenkins-health.log&quot;\n\nlog_message() {\n    echo &quot;$(date &#039;+%Y-%m-%d %H:%M:%S&#039;) - $1&quot; | tee -a ${HEALTH_LOG}\n}\n\n# Check service status\nif systemctl is-active jenkins &gt;/dev/null 2&gt;&amp;1; then\n    log_message &quot;âœ… Jenkins service is running&quot;\nelse\n    log_message &quot;âŒ Jenkins service is not running&quot;\n    exit 2\nfi\n\n# Check web interface\nHTTP_STATUS=$(curl -s -o /dev/null -w &quot;%{http_code}&quot; ${JENKINS_URL}/login)\nif [ &quot;${HTTP_STATUS}&quot; = &quot;200&quot; ]; then\n    log_message &quot;âœ… Jenkins web interface responding (HTTP ${HTTP_STATUS})&quot;\nelse\n    log_message &quot;âŒ Jenkins web interface issues (HTTP ${HTTP_STATUS})&quot;\n    exit 2\nfi\n\n# Check disk space\nJENKINS_HOME_USAGE=$(df /var/lib/jenkins | awk &#039;NR==2 {print $5}&#039; | sed &#039;s/%//&#039;)\nif [ ${JENKINS_HOME_USAGE} -gt 85 ]; then\n    log_message &quot;âš ï¸  High disk usage: ${JENKINS_HOME_USAGE}%&quot;\n    exit 1\nelse\n    log_message &quot;âœ… Jenkins home disk usage: ${JENKINS_HOME_USAGE}%&quot;\nfi\n\n# Check memory usage\nJAVA_MEMORY=$(ps -o pid,vsz,rss,comm -C java | grep jenkins | awk &#039;{rss+=$3} END {print rss/1024}&#039;)\nif (( $(echo &quot;${JAVA_MEMORY} &gt; 6144&quot; | bc -l) )); then\n    log_message &quot;âš ï¸  High memory usage: ${JAVA_MEMORY}MB&quot;\n    exit 1\nelse\n    log_message &quot;âœ… Jenkins memory usage: ${JAVA_MEMORY}MB&quot;\nfi\n\n# Check running builds (if Jenkins CLI is available)\nif [ -f /var/lib/jenkins/jenkins-cli.jar ]; then\n    RUNNING_BUILDS=$(java -jar /var/lib/jenkins/jenkins-cli.jar -s ${JENKINS_URL} -auth monitoring:MonitoringPassword123! list-builds 2&gt;/dev/null | grep -c &quot;RUNNING&quot; || echo &quot;0&quot;)\n    log_message &quot;â„¹ï¸  Running builds: ${RUNNING_BUILDS}&quot;\n    \n    # Check for failed builds in last 24 hours\n    FAILED_BUILDS=$(java -jar /var/lib/jenkins/jenkins-cli.jar -s ${JENKINS_URL} -auth monitoring:MonitoringPassword123! list-builds 2&gt;/dev/null | grep -c &quot;FAILURE&quot; || echo &quot;0&quot;)\n    if [ ${FAILED_BUILDS} -gt 5 ]; then\n        log_message &quot;âš ï¸  High number of failed builds: ${FAILED_BUILDS}&quot;\n        exit 1\n    fi\nfi\n\n# Check plugin health\nPLUGIN_ERRORS=$(curl -s ${JENKINS_URL}/pluginManager/api/json?depth=1 | jq &#039;.plugins[] | select(.hasUpdate==true or .enabled==false) | .shortName&#039; | wc -l)\nif [ ${PLUGIN_ERRORS} -gt 0 ]; then\n    log_message &quot;âš ï¸  Plugins need attention: ${PLUGIN_ERRORS}&quot;\nfi\n\nlog_message &quot;âœ… Jenkins health check completed&quot;\nexit 0</code></pre>\n      </div>\n    </div>\n<h2 id=\"backup-and-restore\" class=\"mobile-header\">Backup and Restore</h2>\n<h3 id=\"comprehensive-backup-strategy\" class=\"mobile-header\">Comprehensive Backup Strategy</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\">#!/bin/bash\n# jenkins-backup.sh\n\nBACKUP_DIR=&quot;/backup/jenkins&quot;\nDATE=$(date +%Y%m%d_%H%M%S)\nJENKINS_HOME=&quot;/var/lib/jenkins&quot;\nRETENTION_DAYS=14\n\nmkdir -p ${BACKUP_DIR}/{config,jobs,plugins,secrets,workspace}\n\necho &quot;Starting Jenkins comprehensive backup...&quot;\n\n# Function to gracefully shutdown Jenkins\ngraceful_shutdown() {\n    echo &quot;Putting Jenkins in quiet mode...&quot;\n    java -jar ${JENKINS_HOME}/jenkins-cli.jar -s http://localhost:8080 -auth admin:SecureAdminPassword123! quiet-down\n    \n    # Wait for running builds to complete (max 20 minutes)\n    for i in {1..120}; do\n        RUNNING_BUILDS=$(java -jar ${JENKINS_HOME}/jenkins-cli.jar -s http://localhost:8080 -auth admin:SecureAdminPassword123! list-builds | grep -c &quot;RUNNING&quot; || echo &quot;0&quot;)\n        if [ &quot;$RUNNING_BUILDS&quot; -eq 0 ]; then\n            echo &quot;All builds completed, stopping Jenkins...&quot;\n            systemctl stop jenkins\n            break\n        fi\n        echo &quot;Waiting for $RUNNING_BUILDS running builds to complete... (${i}/120)&quot;\n        sleep 10\n    done\n    \n    if [ &quot;$RUNNING_BUILDS&quot; -gt 0 ]; then\n        echo &quot;Warning: Stopping Jenkins with $RUNNING_BUILDS builds still running&quot;\n        systemctl stop jenkins\n    fi\n}\n\n# Function to start Jenkins\nstart_jenkins() {\n    echo &quot;Starting Jenkins...&quot;\n    systemctl start jenkins\n    \n    # Wait for Jenkins to be ready\n    for i in {1..60}; do\n        if curl -f http://localhost:8080/login &gt;/dev/null 2&gt;&amp;1; then\n            echo &quot;Jenkins is ready, canceling quiet mode...&quot;\n            java -jar ${JENKINS_HOME}/jenkins-cli.jar -s http://localhost:8080 -auth admin:SecureAdminPassword123! cancel-quiet-down\n            break\n        fi\n        echo &quot;Waiting for Jenkins to start... (${i}/60)&quot;\n        sleep 10\n    done\n}\n\n# Gracefully shutdown Jenkins\ngraceful_shutdown\n\n# Full Jenkins home backup (excluding large/temporary directories)\necho &quot;Creating full Jenkins home backup...&quot;\ntar --exclude=&quot;${JENKINS_HOME}/workspace/*&quot; \\\n    --exclude=&quot;${JENKINS_HOME}/builds/*/archive&quot; \\\n    --exclude=&quot;${JENKINS_HOME}/logs/*&quot; \\\n    --exclude=&quot;${JENKINS_HOME}/.m2/repository&quot; \\\n    --exclude=&quot;${JENKINS_HOME}/caches&quot; \\\n    --exclude=&quot;${JENKINS_HOME}/war&quot; \\\n    -czf ${BACKUP_DIR}/config/jenkins-home-${DATE}.tar.gz \\\n    -C ${JENKINS_HOME} .\n\n# Job configurations backup\necho &quot;Backing up job configurations...&quot;\nmkdir -p ${BACKUP_DIR}/jobs\nfind ${JENKINS_HOME}/jobs -name &quot;config.xml&quot; -exec cp {} ${BACKUP_DIR}/jobs/ \\;\ntar -czf ${BACKUP_DIR}/jobs/job-configs-${DATE}.tar.gz -C ${BACKUP_DIR}/jobs .\nrm ${BACKUP_DIR}/jobs/config.xml 2&gt;/dev/null\n\n# Plugins backup\necho &quot;Backing up installed plugins...&quot;\njava -jar ${JENKINS_HOME}/jenkins-cli.jar -s http://localhost:8080 -auth admin:SecureAdminPassword123! list-plugins &gt; ${BACKUP_DIR}/plugins/plugin-list-${DATE}.txt\ncp -r ${JENKINS_HOME}/plugins ${BACKUP_DIR}/plugins/plugins-${DATE}/ 2&gt;/dev/null\n\n# Secrets and credentials backup\necho &quot;Backing up secrets and credentials...&quot;\nif [ -d &quot;${JENKINS_HOME}/secrets&quot; ]; then\n    tar -czf ${BACKUP_DIR}/secrets/jenkins-secrets-${DATE}.tar.gz -C ${JENKINS_HOME} secrets/\nfi\n\n# System configuration backup\necho &quot;Backing up system configuration...&quot;\ntar -czf ${BACKUP_DIR}/config/system-config-${DATE}.tar.gz \\\n    /etc/default/jenkins \\\n    /etc/sysconfig/jenkins \\\n    /etc/systemd/system/jenkins.service.d/ 2&gt;/dev/null\n\n# Database backup (if using external database)\nif [ -f &quot;${JENKINS_HOME}/database-config.xml&quot; ]; then\n    echo &quot;Backing up external database...&quot;\n    sudo -u postgres pg_dump jenkinsdb | gzip &gt; ${BACKUP_DIR}/config/jenkinsdb-${DATE}.sql.gz\nfi\n\n# Start Jenkins\nstart_jenkins\n\n# Cloud backup (uncomment and configure as needed)\n# aws s3 cp ${BACKUP_DIR}/ s3://jenkins-backups/${DATE}/ --recursive --sse AES256\n# az storage blob upload-batch --source ${BACKUP_DIR} --destination jenkins-backups --destination-path ${DATE}\n# gsutil cp -r ${BACKUP_DIR}/* gs://jenkins-backups/${DATE}/\n\n# Verify backup integrity\necho &quot;Verifying backup integrity...&quot;\nLATEST_BACKUP=$(ls -t ${BACKUP_DIR}/config/jenkins-home-*.tar.gz | head -1)\nif tar -tzf &quot;$LATEST_BACKUP&quot; &gt;/dev/null 2&gt;&amp;1; then\n    echo &quot;âœ… Backup integrity verified&quot;\n    BACKUP_SIZE=$(du -h &quot;$LATEST_BACKUP&quot; | cut -f1)\n    echo &quot;Backup size: $BACKUP_SIZE&quot;\nelse\n    echo &quot;âŒ Backup integrity check failed&quot;\n    exit 1\nfi\n\n# Cleanup old backups\necho &quot;Cleaning up old backups (keeping last $RETENTION_DAYS days)...&quot;\nfind ${BACKUP_DIR} -name &quot;jenkins-*&quot; -type f -mtime +${RETENTION_DAYS} -delete\nfind ${BACKUP_DIR} -name &quot;plugin-list-*&quot; -type f -mtime +${RETENTION_DAYS} -delete\nfind ${BACKUP_DIR} -name &quot;*-${DATE}*&quot; -type d -mtime +${RETENTION_DAYS} -exec rm -rf {} \\;\n\n# Generate backup report\necho &quot;Generating backup report...&quot;\ncat &gt; ${BACKUP_DIR}/backup-report-${DATE}.txt &lt;&lt;EOF\nJenkins Backup Report - ${DATE}\n================================\n\nBackup Location: ${BACKUP_DIR}\nJenkins Home: ${JENKINS_HOME}\nBackup Date: $(date)\nServer: $(hostname)\n\nFiles backed up:\n- Jenkins Home: $(ls -lh ${BACKUP_DIR}/config/jenkins-home-${DATE}.tar.gz)\n- Job Configs: $(ls -lh ${BACKUP_DIR}/jobs/job-configs-${DATE}.tar.gz)\n- Plugins: $(ls -lh ${BACKUP_DIR}/plugins/plugin-list-${DATE}.txt)\n- Secrets: $(ls -lh ${BACKUP_DIR}/secrets/jenkins-secrets-${DATE}.tar.gz 2&gt;/dev/null || echo &quot;No secrets backup&quot;)\n- System Config: $(ls -lh ${BACKUP_DIR}/config/system-config-${DATE}.tar.gz 2&gt;/dev/null || echo &quot;No system config backup&quot;)\n\nTotal Backup Size: $(du -h ${BACKUP_DIR} | tail -1 | cut -f1)\n\nVerification: âœ… Passed\nEOF\n\necho &quot;âœ… Jenkins backup completed: ${DATE}&quot;\necho &quot;ðŸ“Š Backup report: ${BACKUP_DIR}/backup-report-${DATE}.txt&quot;</code></pre>\n      </div>\n    </div>\n<h3 id=\"restore-procedures\" class=\"mobile-header\">Restore Procedures</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\">#!/bin/bash\n# jenkins-restore.sh\n\nBACKUP_FILE=&quot;${1}&quot;\nRESTORE_TYPE=&quot;${2:-full}&quot;  # full, config-only, jobs-only\n\nusage() {\n    echo &quot;Usage: $0 &lt;backup_file&gt; [restore_type]&quot;\n    echo &quot;Restore types: full (default), config-only, jobs-only&quot;\n    echo &quot;&quot;\n    echo &quot;Available backups:&quot;\n    ls -la /backup/jenkins/config/jenkins-home-*.tar.gz | head -10\n    exit 1\n}\n\nif [ -z &quot;$BACKUP_FILE&quot; ]; then\n    usage\nfi\n\nif [ ! -f &quot;$BACKUP_FILE&quot; ]; then\n    echo &quot;âŒ Backup file not found: $BACKUP_FILE&quot;\n    exit 1\nfi\n\necho &quot;ðŸ”„ Starting Jenkins restore from: $BACKUP_FILE&quot;\necho &quot;Restore type: $RESTORE_TYPE&quot;\n\n# Pre-restore backup of current state\nif [ -d &quot;/var/lib/jenkins&quot; ]; then\n    echo &quot;ðŸ“¦ Creating backup of current installation...&quot;\n    CURRENT_BACKUP=&quot;/backup/jenkins/pre-restore-$(date +%s)&quot;\n    mkdir -p &quot;$CURRENT_BACKUP&quot;\n    mv /var/lib/jenkins &quot;$CURRENT_BACKUP/jenkins-$(date +%Y%m%d_%H%M%S)&quot;\n    echo &quot;Current installation backed up to: $CURRENT_BACKUP&quot;\nfi\n\n# Stop Jenkins\necho &quot;â¹ï¸  Stopping Jenkins...&quot;\nsystemctl stop jenkins\n\ncase &quot;$RESTORE_TYPE&quot; in\n    &quot;full&quot;)\n        echo &quot;ðŸ”„ Performing full restore...&quot;\n        \n        # Create new Jenkins directory\n        mkdir -p /var/lib/jenkins\n        \n        # Restore from backup\n        echo &quot;ðŸ“‚ Extracting backup archive...&quot;\n        tar -xzf &quot;$BACKUP_FILE&quot; -C /var/lib/jenkins\n        \n        # Set proper ownership\n        chown -R jenkins:jenkins /var/lib/jenkins\n        chmod -R 755 /var/lib/jenkins\n        \n        # Special permissions for secrets\n        if [ -d &quot;/var/lib/jenkins/secrets&quot; ]; then\n            chmod 700 /var/lib/jenkins/secrets\n            chmod 600 /var/lib/jenkins/secrets/*\n        fi\n        ;;\n        \n    &quot;config-only&quot;)\n        echo &quot;ðŸ”„ Performing configuration-only restore...&quot;\n        \n        # Create minimal Jenkins directory\n        mkdir -p /var/lib/jenkins\n        \n        # Extract only configuration files\n        tar -xzf &quot;$BACKUP_FILE&quot; -C /var/lib/jenkins \\\n            --include=&quot;*/config.xml&quot; \\\n            --include=&quot;*/secrets/*&quot; \\\n            --include=&quot;*/users/*&quot; \\\n            --include=&quot;*/plugins/*&quot; \\\n            --exclude=&quot;*/workspace/*&quot; \\\n            --exclude=&quot;*/builds/*&quot;\n            \n        chown -R jenkins:jenkins /var/lib/jenkins\n        ;;\n        \n    &quot;jobs-only&quot;)\n        echo &quot;ðŸ”„ Performing jobs-only restore...&quot;\n        \n        if [ ! -d &quot;/var/lib/jenkins&quot; ]; then\n            echo &quot;âŒ Jenkins directory not found. Cannot restore jobs only.&quot;\n            exit 1\n        fi\n        \n        # Backup current jobs\n        if [ -d &quot;/var/lib/jenkins/jobs&quot; ]; then\n            mv /var/lib/jenkins/jobs &quot;/var/lib/jenkins/jobs.backup.$(date +%s)&quot;\n        fi\n        \n        # Extract only jobs\n        tar -xzf &quot;$BACKUP_FILE&quot; -C /var/lib/jenkins jobs/\n        chown -R jenkins:jenkins /var/lib/jenkins/jobs\n        ;;\n        \n    *)\n        echo &quot;âŒ Unknown restore type: $RESTORE_TYPE&quot;\n        usage\n        ;;\nesac\n\n# Restore system configuration if available\nBACKUP_DIR=$(dirname &quot;$BACKUP_FILE&quot;)\nBACKUP_DATE=$(basename &quot;$BACKUP_FILE&quot; .tar.gz | sed &#039;s/jenkins-home-//&#039;)\nSYSTEM_CONFIG=&quot;${BACKUP_DIR}/../config/system-config-${BACKUP_DATE}.tar.gz&quot;\n\nif [ -f &quot;$SYSTEM_CONFIG&quot; ]; then\n    echo &quot;ðŸ”§ Restoring system configuration...&quot;\n    tar -xzf &quot;$SYSTEM_CONFIG&quot; -C / 2&gt;/dev/null\n    systemctl daemon-reload\nfi\n\n# Restore database if available\nDB_BACKUP=&quot;${BACKUP_DIR}/jenkinsdb-${BACKUP_DATE}.sql.gz&quot;\nif [ -f &quot;$DB_BACKUP&quot; ]; then\n    echo &quot;ðŸ—„ï¸  Restoring database...&quot;\n    zcat &quot;$DB_BACKUP&quot; | sudo -u postgres psql jenkinsdb\nfi\n\n# Start Jenkins\necho &quot;â–¶ï¸  Starting Jenkins...&quot;\nsystemctl start jenkins\n\n# Wait for Jenkins to start and verify\necho &quot;â³ Waiting for Jenkins to start...&quot;\nfor i in {1..120}; do\n    if curl -f http://localhost:8080/login &gt;/dev/null 2&gt;&amp;1; then\n        echo &quot;âœ… Jenkins started successfully&quot;\n        break\n    fi\n    echo &quot;Waiting for Jenkins to start... (${i}/120)&quot;\n    sleep 10\ndone\n\n# Verify restoration\necho &quot;ðŸ” Verifying restoration...&quot;\nif curl -f http://localhost:8080/login &gt;/dev/null 2&gt;&amp;1; then\n    echo &quot;âœ… Jenkins is responding&quot;\n    \n    # Check if jobs were restored\n    if [ -d &quot;/var/lib/jenkins/jobs&quot; ]; then\n        JOB_COUNT=$(ls -1 /var/lib/jenkins/jobs | wc -l)\n        echo &quot;ðŸ“‹ Jobs restored: $JOB_COUNT&quot;\n    fi\n    \n    # Check if plugins were restored\n    if [ -d &quot;/var/lib/jenkins/plugins&quot; ]; then\n        PLUGIN_COUNT=$(ls -1 /var/lib/jenkins/plugins | wc -l)\n        echo &quot;ðŸ”Œ Plugins restored: $PLUGIN_COUNT&quot;\n    fi\n    \n    echo &quot;âœ… Jenkins restoration completed successfully&quot;\n    echo &quot;&quot;\n    echo &quot;ðŸ“ Next steps:&quot;\n    echo &quot;1. Verify Jenkins configuration via web interface&quot;\n    echo &quot;2. Check plugin compatibility and update if needed&quot;\n    echo &quot;3. Verify job configurations and test builds&quot;\n    echo &quot;4. Update any environment-specific settings&quot;\n    \nelse\n    echo &quot;âŒ Jenkins restoration failed - service not responding&quot;\n    echo &quot;Check logs: journalctl -u jenkins -n 50&quot;\n    exit 1\nfi</code></pre>\n      </div>\n    </div>\n<h3 id=\"disaster-recovery\" class=\"mobile-header\">Disaster Recovery</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\">#!/bin/bash\n# jenkins-disaster-recovery.sh\n\necho &quot;ðŸš¨ Jenkins Disaster Recovery Procedure&quot;\necho &quot;======================================&quot;\n\n# Check if Jenkins is running\nif systemctl is-active jenkins &gt;/dev/null 2&gt;&amp;1; then\n    echo &quot;âš ï¸  Jenkins is running. This procedure should be run on a failed system.&quot;\n    read -p &quot;Continue anyway? (y/N): &quot; -n 1 -r\n    echo\n    if [[ ! $REPLY =~ ^[Yy]$ ]]; then\n        exit 1\n    fi\nfi\n\n# Find latest backup\nBACKUP_DIR=&quot;/backup/jenkins&quot;\nLATEST_BACKUP=$(ls -t ${BACKUP_DIR}/config/jenkins-home-*.tar.gz 2&gt;/dev/null | head -1)\n\nif [ -z &quot;$LATEST_BACKUP&quot; ]; then\n    echo &quot;âŒ No backups found in ${BACKUP_DIR}&quot;\n    echo &quot;Please restore from cloud backup or external storage&quot;\n    exit 1\nfi\n\necho &quot;ðŸ“¦ Latest backup found: $LATEST_BACKUP&quot;\necho &quot;ðŸ“… Backup date: $(basename &quot;$LATEST_BACKUP&quot; .tar.gz | sed &#039;s/jenkins-home-//&#039;)&quot;\n\n# Verify backup integrity\necho &quot;ðŸ” Verifying backup integrity...&quot;\nif tar -tzf &quot;$LATEST_BACKUP&quot; &gt;/dev/null 2&gt;&amp;1; then\n    echo &quot;âœ… Backup integrity verified&quot;\nelse\n    echo &quot;âŒ Backup is corrupted. Cannot proceed with recovery.&quot;\n    exit 1\nfi\n\n# Create disaster recovery log\nDR_LOG=&quot;/var/log/jenkins-disaster-recovery-$(date +%Y%m%d_%H%M%S).log&quot;\nexec &gt; &gt;(tee -a &quot;$DR_LOG&quot;)\nexec 2&gt;&amp;1\n\necho &quot;ðŸ“ Disaster recovery log: $DR_LOG&quot;\n\n# System preparation\necho &quot;ðŸ”§ Preparing system for recovery...&quot;\n\n# Install Jenkins if not present\nif ! command -v jenkins &gt;/dev/null 2&gt;&amp;1; then\n    echo &quot;ðŸ“¦ Installing Jenkins...&quot;\n    # Add Jenkins repository and install (distribution-specific commands)\n    if [ -f /etc/debian_version ]; then\n        wget -q -O - https://pkg.jenkins.io/debian-stable/jenkins.io.key | apt-key add -\n        echo &quot;deb https://pkg.jenkins.io/debian-stable binary/&quot; &gt; /etc/apt/sources.list.d/jenkins.list\n        apt-get update\n        apt-get install -y openjdk-17-jdk jenkins\n    elif [ -f /etc/redhat-release ]; then\n        yum install -y java-17-openjdk jenkins\n    fi\nfi\n\n# Stop Jenkins service\nsystemctl stop jenkins\n\n# Clear existing Jenkins data\nif [ -d &quot;/var/lib/jenkins&quot; ]; then\n    echo &quot;ðŸ—‘ï¸  Removing existing Jenkins data...&quot;\n    rm -rf /var/lib/jenkins.disaster-backup-$(date +%s)\n    mv /var/lib/jenkins /var/lib/jenkins.disaster-backup-$(date +%s)\nfi\n\n# Create new Jenkins directory\nmkdir -p /var/lib/jenkins\n\n# Restore from backup\necho &quot;ðŸ”„ Restoring Jenkins from backup...&quot;\ntar -xzf &quot;$LATEST_BACKUP&quot; -C /var/lib/jenkins\n\n# Set proper permissions\nchown -R jenkins:jenkins /var/lib/jenkins\nchmod -R 755 /var/lib/jenkins\n\n# Special permissions for sensitive files\nif [ -d &quot;/var/lib/jenkins/secrets&quot; ]; then\n    chmod 700 /var/lib/jenkins/secrets\n    chmod 600 /var/lib/jenkins/secrets/*\nfi\n\nif [ -d &quot;/var/lib/jenkins/users&quot; ]; then\n    chmod 700 /var/lib/jenkins/users\nfi\n\n# Restore system configuration\nBACKUP_DATE=$(basename &quot;$LATEST_BACKUP&quot; .tar.gz | sed &#039;s/jenkins-home-//&#039;)\nSYSTEM_CONFIG=&quot;${BACKUP_DIR}/config/system-config-${BACKUP_DATE}.tar.gz&quot;\n\nif [ -f &quot;$SYSTEM_CONFIG&quot; ]; then\n    echo &quot;ðŸ”§ Restoring system configuration...&quot;\n    tar -xzf &quot;$SYSTEM_CONFIG&quot; -C / 2&gt;/dev/null\n    systemctl daemon-reload\nfi\n\n# Restore database if available\nDB_BACKUP=&quot;${BACKUP_DIR}/config/jenkinsdb-${BACKUP_DATE}.sql.gz&quot;\nif [ -f &quot;$DB_BACKUP&quot; ]; then\n    echo &quot;ðŸ—„ï¸  Restoring database...&quot;\n    # Ensure PostgreSQL is running\n    systemctl start postgresql\n    \n    # Drop and recreate database\n    sudo -u postgres psql -c &quot;DROP DATABASE IF EXISTS jenkinsdb;&quot;\n    sudo -u postgres psql -c &quot;CREATE DATABASE jenkinsdb;&quot;\n    sudo -u postgres psql -c &quot;GRANT ALL PRIVILEGES ON DATABASE jenkinsdb TO jenkinsuser;&quot;\n    \n    # Restore database\n    zcat &quot;$DB_BACKUP&quot; | sudo -u postgres psql jenkinsdb\nfi\n\n# Configure firewall\necho &quot;ðŸ”¥ Configuring firewall...&quot;\nif command -v ufw &gt;/dev/null 2&gt;&amp;1; then\n    ufw allow 8080/tcp\n    ufw allow 50000/tcp\nelif command -v firewall-cmd &gt;/dev/null 2&gt;&amp;1; then\n    firewall-cmd --permanent --add-port=8080/tcp\n    firewall-cmd --permanent --add-port=50000/tcp\n    firewall-cmd --reload\nfi\n\n# Start Jenkins\necho &quot;â–¶ï¸  Starting Jenkins...&quot;\nsystemctl enable jenkins\nsystemctl start jenkins\n\n# Wait for Jenkins to start\necho &quot;â³ Waiting for Jenkins to initialize...&quot;\nfor i in {1..300}; do\n    if curl -f http://localhost:8080/login &gt;/dev/null 2&gt;&amp;1; then\n        echo &quot;âœ… Jenkins is responding&quot;\n        break\n    fi\n    echo &quot;Waiting for Jenkins... (${i}/300)&quot;\n    sleep 10\ndone\n\n# Verify recovery\necho &quot;ðŸ” Verifying disaster recovery...&quot;\n\n# Check Jenkins status\nif systemctl is-active jenkins &gt;/dev/null 2&gt;&amp;1; then\n    echo &quot;âœ… Jenkins service is running&quot;\nelse\n    echo &quot;âŒ Jenkins service failed to start&quot;\n    echo &quot;Check logs: journalctl -u jenkins -n 50&quot;\n    exit 1\nfi\n\n# Check web interface\nif curl -f http://localhost:8080/login &gt;/dev/null 2&gt;&amp;1; then\n    echo &quot;âœ… Jenkins web interface is accessible&quot;\nelse\n    echo &quot;âŒ Jenkins web interface is not responding&quot;\n    exit 1\nfi\n\n# Check jobs restoration\nif [ -d &quot;/var/lib/jenkins/jobs&quot; ]; then\n    JOB_COUNT=$(ls -1 /var/lib/jenkins/jobs 2&gt;/dev/null | wc -l)\n    echo &quot;ðŸ“‹ Jobs recovered: $JOB_COUNT&quot;\nelse\n    echo &quot;âš ï¸  No jobs directory found&quot;\nfi\n\n# Check plugins restoration\nif [ -d &quot;/var/lib/jenkins/plugins&quot; ]; then\n    PLUGIN_COUNT=$(ls -1 /var/lib/jenkins/plugins 2&gt;/dev/null | wc -l)\n    echo &quot;ðŸ”Œ Plugins recovered: $PLUGIN_COUNT&quot;\nelse\n    echo &quot;âš ï¸  No plugins directory found&quot;\nfi\n\n# Generate recovery report\necho &quot;ðŸ“Š Generating disaster recovery report...&quot;\ncat &gt; &quot;/var/log/jenkins-recovery-report-$(date +%Y%m%d_%H%M%S).txt&quot; &lt;&lt;EOF\nJenkins Disaster Recovery Report\n===============================\nRecovery Date: $(date)\nServer: $(hostname)\nBackup Used: $LATEST_BACKUP\nRecovery Log: $DR_LOG\n\nRecovery Summary:\n- Jenkins Service: $(systemctl is-active jenkins)\n- Web Interface: $(curl -s -o /dev/null -w &quot;%{http_code}&quot; http://localhost:8080/login)\n- Jobs Recovered: $JOB_COUNT\n- Plugins Recovered: $PLUGIN_COUNT\n- Database Restored: $([ -f &quot;$DB_BACKUP&quot; ] &amp;&amp; echo &quot;Yes&quot; || echo &quot;No&quot;)\n\nNext Steps:\n1. Verify Jenkins configuration via web interface: http://$(hostname):8080\n2. Test critical job configurations\n3. Update any environment-specific settings\n4. Verify agent connections\n5. Test integrations (SCM, notifications, etc.)\n6. Update DNS/load balancer configurations if needed\n7. Notify team of recovery completion\n\nRecovery Status: âœ… COMPLETED\nEOF\n\necho &quot;&quot;\necho &quot;ðŸŽ‰ Jenkins disaster recovery completed successfully!&quot;\necho &quot;ðŸ“ Recovery report saved to: /var/log/jenkins-recovery-report-$(date +%Y%m%d_%H%M%S).txt&quot;\necho &quot;&quot;\necho &quot;ðŸ”— Access Jenkins: http://$(hostname):8080&quot;\necho &quot;&quot;\necho &quot;âš ï¸  Important post-recovery tasks:&quot;\necho &quot;1. Verify all job configurations&quot;\necho &quot;2. Test agent connections&quot;\necho &quot;3. Verify integrations (GitHub, LDAP, etc.)&quot;\necho &quot;4. Update any environment-specific configurations&quot;\necho &quot;5. Perform a backup of the recovered system&quot;</code></pre>\n      </div>\n    </div>\n<h2 id=\"troubleshooting\" class=\"mobile-header\">Troubleshooting</h2>\n<h3 id=\"common-issues\" class=\"mobile-header\">Common Issues</h3>\n<p class=\"mobile-paragraph\">1. <strong>Jenkins won't start</strong>:</p>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Check service status and logs\nsudo systemctl status jenkins\nsudo journalctl -u jenkins -f\n\n# Check Java version and JAVA_HOME\njava -version\necho $JAVA_HOME\n\n# Check disk space\ndf -h /var/lib/jenkins\n\n# Check permissions\nls -la /var/lib/jenkins\nsudo chown -R jenkins:jenkins /var/lib/jenkins\n\n# Check memory allocation\nfree -h\nps aux | grep jenkins\n\n# Clear Jenkins cache\nsudo systemctl stop jenkins\nsudo rm -rf /var/lib/jenkins/war\nsudo systemctl start jenkins</code></pre>\n      </div>\n    </div>\n<p class=\"mobile-paragraph\">2. <strong>Memory issues</strong>:</p>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Increase JVM memory\nsudo systemctl edit jenkins\n# Add:\n[Service]\nEnvironment=&quot;JAVA_OPTS=-Xmx8g -Xms4g -XX:+UseG1GC&quot;\n\nsudo systemctl daemon-reload\nsudo systemctl restart jenkins\n\n# Monitor memory usage\ntop -p $(pgrep java)\njstat -gc $(pgrep java) 5s</code></pre>\n      </div>\n    </div>\n<p class=\"mobile-paragraph\">3. <strong>Plugin issues</strong>:</p>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Safe start (disable all plugins)\nsudo systemctl stop jenkins\necho &#039;jenkins.install.runSetupWizard=false&#039; &gt; /var/lib/jenkins/jenkins.install.runSetupWizard\nsudo systemctl start jenkins\n\n# Clear plugin cache\nsudo rm -rf /var/lib/jenkins/plugins/*.bak\nsudo rm -rf /var/lib/jenkins/plugins/*.hpi.pinned\n\n# Update plugins via CLI\njava -jar jenkins-cli.jar -s http://localhost:8080 -auth admin:password list-plugins | grep -E &quot;\\)$&quot; | awk &#039;{print $1}&#039; | xargs java -jar jenkins-cli.jar -s http://localhost:8080 -auth admin:password install-plugin\n\n# Check plugin dependencies\njava -jar jenkins-cli.jar -s http://localhost:8080 -auth admin:password list-plugins | grep -v &quot;^$&quot;</code></pre>\n      </div>\n    </div>\n<p class=\"mobile-paragraph\">4. <strong>Build failures</strong>:</p>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Check workspace permissions\nsudo chown -R jenkins:jenkins /var/lib/jenkins/workspace\n\n# Clear old builds\njava -jar jenkins-cli.jar -s http://localhost:8080 -auth admin:password delete-builds job-name 1-100\n\n# Check agent connectivity\njava -jar jenkins-cli.jar -s http://localhost:8080 -auth admin:password list-computers\njava -jar jenkins-cli.jar -s http://localhost:8080 -auth admin:password connect-node agent-name\n\n# Monitor build resources\nhtop\niostat -x 1</code></pre>\n      </div>\n    </div>\n<h3 id=\"debug-mode\" class=\"mobile-header\">Debug Mode</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Enable debug logging for Jenkins\nsudo systemctl edit jenkins\n# Add:\n[Service]\nEnvironment=&quot;JAVA_OPTS=-Xmx4g -Djava.util.logging.config.file=/var/lib/jenkins/logging.properties&quot;\n\n# Create detailed logging configuration\nsudo tee /var/lib/jenkins/logging.properties &lt;&lt;EOF\n.level = INFO\n\n# Root logger\nhandlers = java.util.logging.ConsoleHandler, java.util.logging.FileHandler\n\n# Console logging\njava.util.logging.ConsoleHandler.level = INFO\njava.util.logging.ConsoleHandler.formatter = java.util.logging.SimpleFormatter\n\n# File logging\njava.util.logging.FileHandler.pattern = /var/log/jenkins/jenkins-debug.log\njava.util.logging.FileHandler.limit = 50000000\njava.util.logging.FileHandler.count = 5\njava.util.logging.FileHandler.formatter = java.util.logging.SimpleFormatter\n\n# Component-specific logging\nhudson.level = FINE\njenkins.level = FINE\nhudson.security.level = FINE\nhudson.plugins.level = FINE\nhudson.model.level = FINE\n\n# Plugin debugging\nhudson.plugins.git.level = FINE\norg.jenkinsci.plugins.workflow.level = FINE\nEOF\n\nsudo systemctl restart jenkins\n\n# View debug logs\nsudo tail -f /var/log/jenkins/jenkins-debug.log\n\n# Enable specific plugin debugging via Jenkins CLI\njava -jar jenkins-cli.jar -s http://localhost:8080 -auth admin:password groovy = &lt;&lt;EOF\nimport java.util.logging.Logger\nimport java.util.logging.Level\n\n// Enable debug logging for specific components\nLogger.getLogger(&quot;hudson.security&quot;).setLevel(Level.FINE)\nLogger.getLogger(&quot;hudson.plugins.git&quot;).setLevel(Level.FINE)\nLogger.getLogger(&quot;org.jenkinsci.plugins.workflow&quot;).setLevel(Level.FINE)\n\nprintln &quot;Debug logging enabled&quot;\nEOF</code></pre>\n      </div>\n    </div>\n<h2 id=\"maintenance\" class=\"mobile-header\">Maintenance</h2>\n<h3 id=\"update-procedures\" class=\"mobile-header\">Update Procedures</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># RHEL/CentOS/Rocky/AlmaLinux\nsudo dnf check-update jenkins\nsudo dnf update jenkins\n\n# Debian/Ubuntu\nsudo apt update\nsudo apt upgrade jenkins\n\n# Arch Linux\nyay -Syu jenkins\n\n# Alpine Linux (Docker)\ndocker pull jenkins/jenkins:lts-jdk17\ndocker stop jenkins\ndocker rm jenkins\n# Re-run docker run command with new image\n\n# openSUSE\nsudo zypper update jenkins\n\n# FreeBSD\npkg update\npkg upgrade jenkins\n\n# macOS\nbrew upgrade jenkins-lts\n\n# Always backup before updates\nsudo /usr/local/bin/jenkins-backup.sh\n\n# Update plugins after Jenkins update\njava -jar jenkins-cli.jar -s http://localhost:8080 -auth admin:password list-plugins | grep -E &quot;\\)$&quot; | awk &#039;{print $1}&#039; | xargs java -jar jenkins-cli.jar -s http://localhost:8080 -auth admin:password install-plugin\n\n# Restart after updates\nsudo systemctl restart jenkins</code></pre>\n      </div>\n    </div>\n<h3 id=\"maintenance-tasks\" class=\"mobile-header\">Maintenance Tasks</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\">#!/bin/bash\n# jenkins-maintenance.sh\n\nJENKINS_HOME=&quot;/var/lib/jenkins&quot;\nJENKINS_URL=&quot;http://localhost:8080&quot;\nADMIN_CREDENTIALS=&quot;admin:SecureAdminPassword123!&quot;\n\necho &quot;ðŸ”§ Starting Jenkins maintenance tasks...&quot;\n\n# Clean up old builds\necho &quot;ðŸ—‘ï¸  Cleaning up old builds...&quot;\njava -jar ${JENKINS_HOME}/jenkins-cli.jar -s ${JENKINS_URL} -auth ${ADMIN_CREDENTIALS} groovy = &lt;&lt;EOF\nimport jenkins.model.Jenkins\nimport hudson.model.*\n\nJenkins.instance.getAllItems(Job.class).each { job -&gt;\n    if (job.getBuilds().size() &gt; 50) {\n        def buildsToDelete = job.getBuilds().drop(50)\n        println &quot;Deleting \\${buildsToDelete.size()} old builds for job: \\${job.name}&quot;\n        buildsToDelete.each { build -&gt;\n            build.delete()\n        }\n    }\n}\nEOF\n\n# Clean up workspace\necho &quot;ðŸ§¹ Cleaning up workspaces...&quot;\njava -jar ${JENKINS_HOME}/jenkins-cli.jar -s ${JENKINS_URL} -auth ${ADMIN_CREDENTIALS} groovy = &lt;&lt;EOF\nimport hudson.model.*\nimport hudson.FilePath\nimport jenkins.model.Jenkins\n\nJenkins.instance.getAllItems(AbstractProject.class).each { job -&gt;\n    def workspace = job.getWorkspace()\n    if (workspace != null &amp;&amp; workspace.exists()) {\n        def size = workspace.length()\n        if (size &gt; 1024 * 1024 * 100) { // &gt; 100MB\n            println &quot;Workspace for \\${job.name} is \\${size / (1024*1024)} MB&quot;\n            workspace.deleteRecursive()\n            println &quot;Cleaned workspace for job: \\${job.name}&quot;\n        }\n    }\n}\nEOF\n\n# Update plugins\necho &quot;ðŸ”Œ Checking for plugin updates...&quot;\njava -jar ${JENKINS_HOME}/jenkins-cli.jar -s ${JENKINS_URL} -auth ${ADMIN_CREDENTIALS} list-plugins | grep -E &quot;\\)$&quot; &gt; /tmp/outdated-plugins.txt\n\nif [ -s /tmp/outdated-plugins.txt ]; then\n    echo &quot;ðŸ“¦ Updating outdated plugins:&quot;\n    cat /tmp/outdated-plugins.txt\n    \n    # Update plugins\n    awk &#039;{print $1}&#039; /tmp/outdated-plugins.txt | xargs java -jar ${JENKINS_HOME}/jenkins-cli.jar -s ${JENKINS_URL} -auth ${ADMIN_CREDENTIALS} install-plugin\n    \n    echo &quot;ðŸ”„ Restarting Jenkins to apply plugin updates...&quot;\n    java -jar ${JENKINS_HOME}/jenkins-cli.jar -s ${JENKINS_URL} -auth ${ADMIN_CREDENTIALS} safe-restart\nfi\n\n# Clean up logs\necho &quot;ðŸ“‹ Rotating and cleaning logs...&quot;\nfind ${JENKINS_HOME}/logs -name &quot;*.log&quot; -mtime +7 -delete\nfind /var/log/jenkins -name &quot;*.log.*&quot; -mtime +7 -delete\n\n# Disk usage check\necho &quot;ðŸ’¾ Checking disk usage...&quot;\nDISK_USAGE=$(df ${JENKINS_HOME} | awk &#039;NR==2 {print $5}&#039; | sed &#039;s/%//&#039;)\nif [ ${DISK_USAGE} -gt 80 ]; then\n    echo &quot;âš ï¸  High disk usage: ${DISK_USAGE}%&quot;\n    \n    # Clean up large files\n    find ${JENKINS_HOME}/jobs -name &quot;*.log&quot; -size +100M -mtime +3 -delete\n    find ${JENKINS_HOME}/workspace -name &quot;*&quot; -size +500M -mtime +1 -delete\nfi\n\n# Backup verification\necho &quot;ðŸ” Verifying recent backups...&quot;\nLATEST_BACKUP=$(ls -t /backup/jenkins/config/jenkins-home-*.tar.gz 2&gt;/dev/null | head -1)\nif [ -n &quot;$LATEST_BACKUP&quot; ]; then\n    BACKUP_AGE=$(($(date +%s) - $(stat -c %Y &quot;$LATEST_BACKUP&quot;)))\n    if [ $BACKUP_AGE -gt 172800 ]; then  # 2 days\n        echo &quot;âš ï¸  Latest backup is older than 2 days: $LATEST_BACKUP&quot;\n        echo &quot;ðŸ’¾ Running backup now...&quot;\n        /usr/local/bin/jenkins-backup.sh\n    else\n        echo &quot;âœ… Recent backup found: $LATEST_BACKUP&quot;\n    fi\nelse\n    echo &quot;âŒ No backups found. Running backup...&quot;\n    /usr/local/bin/jenkins-backup.sh\nfi\n\n# Security check\necho &quot;ðŸ”’ Running security checks...&quot;\njava -jar ${JENKINS_HOME}/jenkins-cli.jar -s ${JENKINS_URL} -auth ${ADMIN_CREDENTIALS} groovy = &lt;&lt;EOF\nimport jenkins.security.ApiTokenProperty\nimport hudson.security.SecurityRealm\nimport jenkins.model.Jenkins\n\ndef instance = Jenkins.getInstance()\n\n// Check for default passwords\ndef realm = instance.getSecurityRealm()\nif (realm instanceof hudson.security.HudsonPrivateSecurityRealm) {\n    def users = realm.getAllUsers()\n    users.each { user -&gt;\n        if (user.getId() == &quot;admin&quot;) {\n            println &quot;âš ï¸  Default admin user found. Consider renaming or removing.&quot;\n        }\n    }\n}\n\n// Check for anonymous access\ndef authStrategy = instance.getAuthorizationStrategy()\nif (authStrategy.hasPermission(org.acegisecurity.Authentication.ANONYMOUS_USER, Jenkins.READ)) {\n    println &quot;âš ï¸  Anonymous read access is enabled&quot;\n}\n\nprintln &quot;Security check completed&quot;\nEOF\n\n# Performance check\necho &quot;ðŸ“Š Checking performance metrics...&quot;\nJAVA_PID=$(pgrep java)\nif [ -n &quot;$JAVA_PID&quot; ]; then\n    MEMORY_USAGE=$(ps -o pid,vsz,rss,comm -p $JAVA_PID | awk &#039;NR==2 {print $3/1024}&#039;)\n    CPU_USAGE=$(ps -o pid,pcpu,comm -p $JAVA_PID | awk &#039;NR==2 {print $2}&#039;)\n    \n    echo &quot;Memory usage: ${MEMORY_USAGE}MB&quot;\n    echo &quot;CPU usage: ${CPU_USAGE}%&quot;\n    \n    if (( $(echo &quot;${MEMORY_USAGE} &gt; 6144&quot; | bc -l) )); then\n        echo &quot;âš ï¸  High memory usage detected&quot;\n    fi\nfi\n\necho &quot;âœ… Jenkins maintenance completed&quot;\n\n# Generate maintenance report\ncat &gt; /var/log/jenkins-maintenance-$(date +%Y%m%d).log &lt;&lt;EOF\nJenkins Maintenance Report - $(date)\n===================================\n\nTasks Completed:\n- Old builds cleanup: âœ…\n- Workspace cleanup: âœ…\n- Plugin updates: $([ -s /tmp/outdated-plugins.txt ] &amp;&amp; echo &quot;âœ… Updated&quot; || echo &quot;âœ… Up to date&quot;)\n- Log rotation: âœ…\n- Disk usage check: âœ… (${DISK_USAGE}%)\n- Backup verification: âœ…\n- Security check: âœ…\n- Performance check: âœ…\n\nSystem Status:\n- Memory usage: ${MEMORY_USAGE}MB\n- CPU usage: ${CPU_USAGE}%\n- Disk usage: ${DISK_USAGE}%\n\nNext maintenance: $(date -d &quot;next week&quot; +%Y-%m-%d)\nEOF\n\necho &quot;ðŸ“Š Maintenance report: /var/log/jenkins-maintenance-$(date +%Y%m%d).log&quot;</code></pre>\n      </div>\n    </div>\n<h3 id=\"health-monitoring\" class=\"mobile-header\">Health Monitoring</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Create monitoring cron job\necho &quot;0 2 * * * root /usr/local/bin/jenkins-maintenance.sh&quot; | sudo tee -a /etc/crontab\necho &quot;*/15 * * * * root /usr/local/bin/jenkins-health-check.sh&quot; | sudo tee -a /etc/crontab\n\n# Log rotation configuration\nsudo tee /etc/logrotate.d/jenkins &lt;&lt;EOF\n/var/log/jenkins/*.log {\n    daily\n    rotate 30\n    compress\n    delaycompress\n    missingok\n    notifempty\n    create 640 jenkins adm\n    postrotate\n        systemctl reload jenkins &gt; /dev/null 2&gt;&amp;1 || true\n    endscript\n}\n\n/var/lib/jenkins/logs/*.log {\n    daily\n    rotate 7\n    compress\n    delaycompress\n    missingok\n    notifempty\n    create 640 jenkins jenkins\n}\nEOF</code></pre>\n      </div>\n    </div>\n<h2 id=\"integration-examples\" class=\"mobile-header\">Integration Examples</h2>\n<h3 id=\"git-integration-with-webhooks\" class=\"mobile-header\">Git Integration with Webhooks</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Configure Git webhook for automatic builds\nsudo tee /var/lib/jenkins/casc_configs/git-integration.yaml &lt;&lt;EOF\nunclassified:\n  gitHubPluginConfig:\n    hookUrl: &quot;https://jenkins.example.com/github-webhook/&quot;\n    \n  gitLabConnectionConfig:\n    connections:\n      - name: &quot;GitLab&quot;\n        url: &quot;https://gitlab.example.com&quot;\n        apiTokenId: &quot;gitlab-api-token&quot;\n        clientBuilderId: &quot;autodetect&quot;\n        connectionTimeout: 10\n        readTimeout: 10\n\njobs:\n  - script: |\n      multibranchPipelineJob(&#039;example-app&#039;) {\n        branchSources {\n          git {\n            id(&#039;github-example&#039;)\n            remote(&#039;https://github.com/example/app.git&#039;)\n            credentialsId(&#039;github-credentials&#039;)\n            includes(&#039;main develop feature/* release/*&#039;)\n          }\n        }\n        \n        factory {\n          workflowBranchProjectFactory {\n            scriptPath(&#039;Jenkinsfile&#039;)\n          }\n        }\n        \n        triggers {\n          periodicFolderTrigger {\n            interval(&#039;1d&#039;)\n          }\n        }\n        \n        orphanedItemStrategy {\n          discardOldItems {\n            daysToKeep(7)\n            numToKeep(10)\n          }\n        }\n      }\nEOF</code></pre>\n      </div>\n    </div>\n<h3 id=\"docker-integration\" class=\"mobile-header\">Docker Integration</h3>\n<div class=\"mobile-code-block\" data-language=\"groovy\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">groovy</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-groovy\">// Docker pipeline example\npipeline {\n    agent any\n    \n    environment {\n        DOCKER_REGISTRY = credentials(&#039;docker-registry&#039;)\n        DOCKER_IMAGE = &quot;${env.JOB_NAME}:${env.BUILD_NUMBER}&quot;\n    }\n    \n    stages {\n        stage(&#039;Build Docker Image&#039;) {\n            steps {\n                script {\n                    def image = docker.build(&quot;${DOCKER_REGISTRY}/${DOCKER_IMAGE}&quot;)\n                    \n                    // Security scan\n                    sh &quot;&quot;&quot;\n                        docker run --rm -v /var/run/docker.sock:/var/run/docker.sock \\\n                            aquasec/trivy:latest image \\\n                            --severity HIGH,CRITICAL \\\n                            --exit-code 1 \\\n                            ${DOCKER_REGISTRY}/${DOCKER_IMAGE}\n                    &quot;&quot;&quot;\n                    \n                    // Push to registry\n                    docker.withRegistry(&quot;https://${DOCKER_REGISTRY}&quot;, &#039;docker-registry-credentials&#039;) {\n                        image.push()\n                        image.push(&quot;latest&quot;)\n                    }\n                }\n            }\n        }\n        \n        stage(&#039;Deploy&#039;) {\n            steps {\n                script {\n                    // Deploy to Kubernetes\n                    sh &quot;&quot;&quot;\n                        kubectl set image deployment/myapp \\\n                            myapp=${DOCKER_REGISTRY}/${DOCKER_IMAGE} \\\n                            --namespace=production\n                        \n                        kubectl rollout status deployment/myapp \\\n                            --namespace=production --timeout=300s\n                    &quot;&quot;&quot;\n                }\n            }\n        }\n    }\n}</code></pre>\n      </div>\n    </div>\n<h3 id=\"kubernetes-integration\" class=\"mobile-header\">Kubernetes Integration</h3>\n<div class=\"mobile-code-block\" data-language=\"yaml\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">yaml</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-yaml\"># Jenkins agent in Kubernetes\napiVersion: v1\nkind: ServiceAccount\nmetadata:\n  name: jenkins\n  namespace: jenkins\n---\napiVersion: rbac.authorization.k8s.io/v1\nkind: ClusterRole\nmetadata:\n  name: jenkins\nrules:\n- apiGroups: [&quot;&quot;]\n  resources: [&quot;pods&quot;,&quot;pods/exec&quot;]\n  verbs: [&quot;create&quot;,&quot;delete&quot;,&quot;get&quot;,&quot;list&quot;,&quot;patch&quot;,&quot;update&quot;,&quot;watch&quot;]\n- apiGroups: [&quot;&quot;]\n  resources: [&quot;pods/log&quot;]\n  verbs: [&quot;get&quot;,&quot;list&quot;,&quot;watch&quot;]\n---\napiVersion: rbac.authorization.k8s.io/v1\nkind: ClusterRoleBinding\nmetadata:\n  name: jenkins\nroleRef:\n  apiGroup: rbac.authorization.k8s.io\n  kind: ClusterRole\n  name: jenkins\nsubjects:\n- kind: ServiceAccount\n  name: jenkins\n  namespace: jenkins\n---\n# Jenkins Configuration as Code for Kubernetes\njenkins:\n  clouds:\n    - kubernetes:\n        name: &quot;kubernetes&quot;\n        serverUrl: &quot;https://kubernetes.default&quot;\n        namespace: &quot;jenkins&quot;\n        credentialsId: &quot;kubernetes-token&quot;\n        jenkinsUrl: &quot;http://jenkins.jenkins.svc.cluster.local:8080&quot;\n        containerCapStr: &quot;10&quot;\n        templates:\n          - name: &quot;jenkins-agent&quot;\n            namespace: &quot;jenkins&quot;\n            label: &quot;kubernetes&quot;\n            containers:\n              - name: &quot;jnlp&quot;\n                image: &quot;jenkins/inbound-agent:latest&quot;\n                workingDir: &quot;/home/jenkins/agent&quot;\n                resourceRequestCpu: &quot;100m&quot;\n                resourceRequestMemory: &quot;256Mi&quot;\n                resourceLimitCpu: &quot;500m&quot;\n                resourceLimitMemory: &quot;1Gi&quot;</code></pre>\n      </div>\n    </div>\n<h3 id=\"ldapactive-directory-integration\" class=\"mobile-header\">LDAP/Active Directory Integration</h3>\n<div class=\"mobile-code-block\" data-language=\"yaml\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">yaml</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-yaml\">jenkins:\n  securityRealm:\n    ldap:\n      configurations:\n        - server: &quot;ldaps://ad.example.com:636&quot;\n          rootDN: &quot;DC=example,DC=com&quot;\n          inhibitInferRootDN: false\n          userSearchBase: &quot;OU=Users,OU=Company&quot;\n          userSearch: &quot;(&amp;(objectCategory=Person)(objectClass=user)(sAMAccountName={0}))&quot;\n          groupSearchBase: &quot;OU=Groups,OU=Company&quot;\n          groupSearchFilter: &quot;(&amp;(objectClass=group)(cn={0}))&quot;\n          managerDN: &quot;CN=jenkins,OU=Service Accounts,DC=example,DC=com&quot;\n          managerPasswordSecret: &quot;ldap-service-password&quot;\n          displayNameAttributeName: &quot;displayName&quot;\n          mailAddressAttributeName: &quot;mail&quot;\n          \n  authorizationStrategy:\n    roleBased:\n      roles:\n        global:\n          - name: &quot;administrators&quot;\n            permissions:\n              - &quot;Overall/Administer&quot;\n            assignments:\n              - &quot;Domain Admins&quot;\n              - &quot;Jenkins Admins&quot;\n        items:\n          - name: &quot;developers&quot;\n            pattern: &quot;.*&quot;\n            permissions:\n              - &quot;Job/Build&quot;\n              - &quot;Job/Cancel&quot;\n              - &quot;Job/Read&quot;\n            assignments:\n              - &quot;Development Team&quot;</code></pre>\n      </div>\n    </div>\n<h2 id=\"additional-resources\" class=\"mobile-header\">Additional Resources</h2>\n<li class=\"mobile-list-item\"><a href=\"https://www.jenkins.io/doc/\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">Official Jenkins Documentation</a></li>\n<li class=\"mobile-list-item\"><a href=\"https://jenkins.io/projects/jcasc/\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">Jenkins Configuration as Code</a></li>\n<li class=\"mobile-list-item\"><a href=\"https://www.jenkins.io/doc/book/pipeline/\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">Jenkins Pipeline Documentation</a></li>\n<li class=\"mobile-list-item\"><a href=\"https://www.jenkins.io/doc/book/security/\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">Jenkins Security Guide</a></li>\n<li class=\"mobile-list-item\"><a href=\"https://plugins.jenkins.io/\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">Jenkins Plugin Index</a></li>\n<li class=\"mobile-list-item\"><a href=\"https://www.jenkins.io/community/\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">Jenkins Community</a></li>\n<li class=\"mobile-list-item\"><a href=\"https://www.jenkins.io/doc/book/pipeline/pipeline-best-practices/\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">Jenkins Best Practices</a></li>\n<li class=\"mobile-list-item\"><a href=\"https://github.com/jenkinsci/jenkins\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">Jenkins GitHub Repository</a></li>\n<p class=\"mobile-paragraph\">---</p>\n<p class=\"mobile-paragraph\"><strong>Note:</strong> This guide is part of the <a href=\"https://howtomgr.github.io\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">HowToMgr</a> collection. Always refer to official documentation for the most up-to-date information.</p>","readTime":"38 min","wordCount":7477,"lastBuilt":"2025-09-14T18:11:59.847Z"},{"name":"jitsi","displayName":"Jitsi","slug":"jitsi","description":"Repo for jitsi","category":"communication","language":null,"stars":0,"forks":0,"topics":[],"githubUrl":"https://github.com/howtomgr/jitsi","updatedAt":"2025-09-08T03:09:26Z","createdAt":"2025-09-08T03:09:16Z","readmeRaw":"## ðŸ‘‹ Welcome to jitsi ðŸš€  \n\njitsi README  \n  \n  \n## Author  \n\nðŸ¤– casjay: [Github](https://github.com/casjay) ðŸ¤–  \n","readmeHtml":"<h2 id=\"welcome-to-jitsi\" class=\"mobile-header\">ðŸ‘‹ Welcome to jitsi ðŸš€  </h2>\n<p class=\"mobile-paragraph\">jitsi README  </p>\n<h2 id=\"author\" class=\"mobile-header\">Author  </h2>\n<p class=\"mobile-paragraph\">ðŸ¤– casjay: <a href=\"https://github.com/casjay\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">Github</a> ðŸ¤–  </p>","readTime":"1 min","wordCount":15,"lastBuilt":"2025-09-14T18:12:18.931Z"},{"name":"jupyter","displayName":"Jupyter","slug":"jupyter","description":"Repo for jupyter","category":"infrastructure","language":null,"stars":0,"forks":0,"topics":[],"githubUrl":"https://github.com/howtomgr/jupyter","updatedAt":"2025-09-08T03:09:39Z","createdAt":"2025-09-08T03:09:29Z","readmeRaw":"## ðŸ‘‹ Welcome to jupyter ðŸš€  \n\njupyter README  \n  \n  \n## Author  \n\nðŸ¤– casjay: [Github](https://github.com/casjay) ðŸ¤–  \n","readmeHtml":"<h2 id=\"welcome-to-jupyter\" class=\"mobile-header\">ðŸ‘‹ Welcome to jupyter ðŸš€  </h2>\n<p class=\"mobile-paragraph\">jupyter README  </p>\n<h2 id=\"author\" class=\"mobile-header\">Author  </h2>\n<p class=\"mobile-paragraph\">ðŸ¤– casjay: <a href=\"https://github.com/casjay\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">Github</a> ðŸ¤–  </p>","readTime":"1 min","wordCount":15,"lastBuilt":"2025-09-14T18:12:18.668Z"},{"name":"k3s","displayName":"K3s","slug":"k3s","description":"Repo for k3s","category":"container","language":null,"stars":0,"forks":0,"topics":[],"githubUrl":"https://github.com/howtomgr/k3s","updatedAt":"2025-09-08T03:09:53Z","createdAt":"2025-09-08T03:09:43Z","readmeRaw":"## ðŸ‘‹ Welcome to k3s ðŸš€  \n\nk3s README  \n  \n  \n## Author  \n\nðŸ¤– casjay: [Github](https://github.com/casjay) ðŸ¤–  \n","readmeHtml":"<h2 id=\"welcome-to-k3s\" class=\"mobile-header\">ðŸ‘‹ Welcome to k3s ðŸš€  </h2>\n<p class=\"mobile-paragraph\">k3s README  </p>\n<h2 id=\"author\" class=\"mobile-header\">Author  </h2>\n<p class=\"mobile-paragraph\">ðŸ¤– casjay: <a href=\"https://github.com/casjay\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">Github</a> ðŸ¤–  </p>","readTime":"1 min","wordCount":15,"lastBuilt":"2025-09-14T18:12:18.293Z"},{"name":"keycloak","displayName":"Keycloak","slug":"keycloak","description":"Repo for keycloak","category":"security","language":null,"stars":0,"forks":0,"topics":[],"githubUrl":"https://github.com/howtomgr/keycloak","updatedAt":"2025-09-08T03:10:05Z","createdAt":"2025-09-08T03:09:55Z","readmeRaw":"## ðŸ‘‹ Welcome to keycloak ðŸš€  \n\nkeycloak README  \n  \n  \n## Author  \n\nðŸ¤– casjay: [Github](https://github.com/casjay) ðŸ¤–  \n","readmeHtml":"<h2 id=\"welcome-to-keycloak\" class=\"mobile-header\">ðŸ‘‹ Welcome to keycloak ðŸš€  </h2>\n<p class=\"mobile-paragraph\">keycloak README  </p>\n<h2 id=\"author\" class=\"mobile-header\">Author  </h2>\n<p class=\"mobile-paragraph\">ðŸ¤– casjay: <a href=\"https://github.com/casjay\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">Github</a> ðŸ¤–  </p>","readTime":"1 min","wordCount":15,"lastBuilt":"2025-09-14T18:12:17.971Z"},{"name":"kubernetes","displayName":"Kubernetes","slug":"kubernetes","description":"Repo for kubernetes","category":"container","language":null,"stars":0,"forks":0,"topics":[],"githubUrl":"https://github.com/howtomgr/kubernetes","updatedAt":"2025-09-14T03:45:25Z","createdAt":"2025-09-08T03:10:10Z","readmeRaw":"# Kubernetes Installation Guide\n\nKubernetes is a free and open-source container orchestration platform for automating deployment, scaling, and management of containerized applications. Originally developed by Google and now maintained by the Cloud Native Computing Foundation (CNCF), Kubernetes serves as the industry standard for container orchestration. It provides enterprise-grade security, scalability, and reliability for cloud-native applications, offering a robust alternative to proprietary solutions like AWS ECS, Azure Container Instances, or Google Cloud Run without vendor lock-in.\n\n## Prerequisites\n\n- **Hardware Requirements**:\n  - CPU: 2+ cores for control plane, 1+ core for worker nodes\n  - RAM: 2GB+ per control plane node, 1GB+ per worker node\n  - Storage: 20GB+ available disk space per node (SSD recommended)\n  - Network: Stable connectivity between all nodes (1Gbps+ recommended)\n- **Operating System**: \n  - Linux: Any modern distribution with kernel 3.10+ (4.x+ recommended)\n  - Container runtime support (containerd, Docker, CRI-O)\n  - macOS: Docker Desktop with Kubernetes enabled (development only)\n  - Windows: Docker Desktop with Kubernetes enabled (development only)\n- **Network Requirements**:\n  - Unique hostname, MAC address, and product_uuid for every node\n  - Port 6443 (Kubernetes API server)\n  - Port 2379-2380 (etcd server client API)\n  - Port 10250 (kubelet API)\n  - Port 10259 (kube-scheduler)\n  - Port 10257 (kube-controller-manager)\n  - Port 30000-32767 (NodePort Services)\n- **Dependencies**:\n  - Container runtime (containerd recommended)\n  - systemd or compatible init system\n  - iptables (for network rules)\n  - ebtables and ethtool (for networking)\n- **System Access**: root or sudo privileges required\n- **Special Requirements**:\n  - Swap must be disabled on all nodes\n  - SELinux in permissive mode (for RHEL/CentOS)\n  - Firewall configured to allow cluster communication\n\n## System Preparation (All Distributions)\n\n### Disable Swap (Required)\n```bash\n# Disable swap immediately\nsudo swapoff -a\n\n# Disable swap permanently\nsudo sed -i '/ swap / s/^\\(.*\\)$/#\\1/g' /etc/fstab\n\n# Verify swap is disabled\nfree -h\nswapon --show\n```\n\n### Configure Kernel Modules\n```bash\n# Load required kernel modules\ncat <<EOF | sudo tee /etc/modules-load.d/k8s.conf\noverlay\nbr_netfilter\nEOF\n\nsudo modprobe overlay\nsudo modprobe br_netfilter\n\n# Configure sysctl parameters\ncat <<EOF | sudo tee /etc/sysctl.d/k8s.conf\nnet.bridge.bridge-nf-call-iptables  = 1\nnet.bridge.bridge-nf-call-ip6tables = 1\nnet.ipv4.ip_forward                 = 1\nEOF\n\nsudo sysctl --system\n```\n\n## Container Runtime Installation\n\n### containerd (Recommended)\n\n#### Ubuntu/Debian\n```bash\n# Update package list\nsudo apt-get update\n\n# Install dependencies\nsudo apt-get install -y ca-certificates curl gnupg lsb-release\n\n# Add Docker repository for containerd\nsudo mkdir -m 0755 -p /etc/apt/keyrings\ncurl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmor -o /etc/apt/keyrings/docker.gpg\n\necho \"deb [arch=$(dpkg --print-architecture) signed-by=/etc/apt/keyrings/docker.gpg] https://download.docker.com/linux/ubuntu $(lsb_release -cs) stable\" | sudo tee /etc/apt/sources.list.d/docker.list > /dev/null\n\n# Install containerd\nsudo apt-get update\nsudo apt-get install -y containerd.io\n\n# Configure containerd\nsudo mkdir -p /etc/containerd\ncontainerd config default | sudo tee /etc/containerd/config.toml\n\n# Enable SystemdCgroup driver\nsudo sed -i 's/SystemdCgroup = false/SystemdCgroup = true/' /etc/containerd/config.toml\n\n# Restart and enable containerd\nsudo systemctl restart containerd\nsudo systemctl enable containerd\n```\n\n#### RHEL/CentOS/Rocky Linux/AlmaLinux\n```bash\n# Install prerequisites\nsudo yum install -y yum-utils device-mapper-persistent-data lvm2\n\n# Add Docker repository\nsudo yum-config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo\n\n# Install containerd\nsudo yum install -y containerd.io\n\n# Configure containerd\nsudo mkdir -p /etc/containerd\ncontainerd config default | sudo tee /etc/containerd/config.toml\n\n# Enable SystemdCgroup driver\nsudo sed -i 's/SystemdCgroup = false/SystemdCgroup = true/' /etc/containerd/config.toml\n\n# Restart and enable containerd\nsudo systemctl restart containerd\nsudo systemctl enable containerd\n```\n\n#### Fedora\n```bash\n# Install containerd\nsudo dnf install -y containerd\n\n# Configure containerd\nsudo mkdir -p /etc/containerd\ncontainerd config default | sudo tee /etc/containerd/config.toml\nsudo sed -i 's/SystemdCgroup = false/SystemdCgroup = true/' /etc/containerd/config.toml\n\n# Restart and enable containerd\nsudo systemctl restart containerd\nsudo systemctl enable containerd\n```\n\n#### Arch Linux\n```bash\n# Install containerd\nsudo pacman -Syu containerd\n\n# Configure containerd\nsudo mkdir -p /etc/containerd\ncontainerd config default | sudo tee /etc/containerd/config.toml\nsudo sed -i 's/SystemdCgroup = false/SystemdCgroup = true/' /etc/containerd/config.toml\n\n# Enable and start containerd\nsudo systemctl enable --now containerd\n```\n\n## Kubernetes Installation\n\n### kubeadm, kubelet, kubectl Installation\n\n#### Ubuntu/Debian\n```bash\n# Update package index and install packages needed for apt to use HTTPS\nsudo apt-get update\nsudo apt-get install -y apt-transport-https ca-certificates curl gpg\n\n# Download and add the Kubernetes signing key\ncurl -fsSL https://pkgs.k8s.io/core:/stable:/v1.29/deb/Release.key | sudo gpg --dearmor -o /etc/apt/keyrings/kubernetes-apt-keyring.gpg\n\n# Add Kubernetes repository\necho 'deb [signed-by=/etc/apt/keyrings/kubernetes-apt-keyring.gpg] https://pkgs.k8s.io/core:/stable:/v1.29/deb/ /' | sudo tee /etc/apt/sources.list.d/kubernetes.list\n\n# Update package index and install Kubernetes components\nsudo apt-get update\nsudo apt-get install -y kubelet kubeadm kubectl\n\n# Hold packages to prevent automatic updates\nsudo apt-mark hold kubelet kubeadm kubectl\n\n# Enable kubelet\nsudo systemctl enable --now kubelet\n```\n\n#### RHEL/CentOS/Rocky Linux/AlmaLinux/Fedora\n```bash\n# Create Kubernetes repository\ncat <<EOF | sudo tee /etc/yum.repos.d/kubernetes.repo\n[kubernetes]\nname=Kubernetes\nbaseurl=https://pkgs.k8s.io/core:/stable:/v1.29/rpm/\nenabled=1\ngpgcheck=1\ngpgkey=https://pkgs.k8s.io/core:/stable:/v1.29/rpm/repodata/repomd.xml.key\nexclude=kubelet kubeadm kubectl cri-tools kubernetes-cni\nEOF\n\n# Set SELinux to permissive mode (required for cluster communication)\nsudo setenforce 0\nsudo sed -i 's/^SELINUX=enforcing$/SELINUX=permissive/' /etc/selinux/config\n\n# Install Kubernetes components\nsudo yum install -y kubelet kubeadm kubectl --disableexcludes=kubernetes\n\n# Enable kubelet\nsudo systemctl enable --now kubelet\n```\n\n#### Arch Linux\n```bash\n# Install from AUR (using yay)\nyay -S kubeadm-bin kubelet-bin kubectl-bin\n\n# Or build from source\ngit clone https://aur.archlinux.org/kubectl-bin.git\ncd kubectl-bin && makepkg -si\n\n# Enable kubelet\nsudo systemctl enable --now kubelet\n```\n\n#### openSUSE/SLES\n```bash\n# openSUSE Leap/Tumbleweed\nsudo zypper refresh\n\n# Add Kubernetes repository\nsudo rpm --import https://pkgs.k8s.io/core:/stable:/v1.29/rpm/repodata/repomd.xml.key\necho 'baseurl=https://pkgs.k8s.io/core:/stable:/v1.29/rpm/' | sudo tee /etc/zypp/repos.d/kubernetes.repo\n\n# Install Kubernetes components\nsudo zypper install -y kubelet kubeadm kubectl\n\n# SLES 15 (requires additional modules)\nsudo SUSEConnect -p sle-module-containers/15.5/x86_64\nsudo zypper install -y kubelet kubeadm kubectl\n\n# Enable kubelet\nsudo systemctl enable --now kubelet\n```\n\n#### Alpine Linux\n```bash\n# Install containerd first\napk add --no-cache containerd\n\n# Add community repository for Kubernetes\necho \"http://dl-cdn.alpinelinux.org/alpine/edge/community\" >> /etc/apk/repositories\napk update\n\n# Install Kubernetes components (if available)\napk add --no-cache kubectl\n\n# Or install from binary\nKUBE_VERSION=\"v1.29.0\"\ncurl -LO \"https://dl.k8s.io/release/${KUBE_VERSION}/bin/linux/amd64/kubectl\"\ncurl -LO \"https://dl.k8s.io/release/${KUBE_VERSION}/bin/linux/amd64/kubeadm\"\ncurl -LO \"https://dl.k8s.io/release/${KUBE_VERSION}/bin/linux/amd64/kubelet\"\n\nchmod +x kubectl kubeadm kubelet\nsudo mv kubectl kubeadm kubelet /usr/local/bin/\n\n# Configure OpenRC service\nsudo tee /etc/init.d/kubelet > /dev/null <<'EOF'\n#!/sbin/openrc-run\nname=\"kubelet\"\ncommand=\"/usr/local/bin/kubelet\"\ncommand_args=\"--config=/var/lib/kubelet/config.yaml --kubeconfig=/etc/kubernetes/kubelet.conf\"\npidfile=\"/var/run/kubelet.pid\"\ncommand_background=\"yes\"\ndepend() {\n    need net\n    after containerd\n}\nEOF\n\nsudo chmod +x /etc/init.d/kubelet\nsudo rc-update add kubelet default\n```\n\n#### macOS (Development Only)\n```bash\n# Install Docker Desktop\n# Download from: https://www.docker.com/products/docker-desktop\n\n# Enable Kubernetes in Docker Desktop\n# Docker Desktop â†’ Preferences â†’ Kubernetes â†’ Enable Kubernetes\n\n# Install kubectl via Homebrew\nbrew install kubectl\n\n# Alternative: Install kubectl directly\ncurl -LO \"https://dl.k8s.io/release/$(curl -L -s https://dl.k8s.io/release/stable.txt)/bin/darwin/amd64/kubectl\"\nchmod +x kubectl\nsudo mv kubectl /usr/local/bin/\n\n# Verify installation\nkubectl version --client\nkubectl cluster-info\n\n# Configure kubectl context\nkubectl config use-context docker-desktop\n```\n\n#### FreeBSD\n```bash\n# Install from ports\ncd /usr/ports/sysutils/kubectl && make install clean\n\n# Or install from packages\npkg install kubectl\n\n# Note: Full Kubernetes cluster on FreeBSD requires manual compilation\n# For development, use kubectl to connect to remote clusters\n\n# Install container runtime (if needed)\npkg install containerd\n\n# Configure kubectl for remote cluster access\nmkdir -p ~/.kube\n# Copy kubeconfig from Linux cluster to ~/.kube/config\n```\n\n#### Windows (Development Only)\n```powershell\n# Method 1: Install Docker Desktop\n# Download from: https://www.docker.com/products/docker-desktop\n# Enable Kubernetes in Docker Desktop settings\n\n# Method 2: Install using Chocolatey\nchoco install kubernetes-cli\n\n# Method 3: Install using Scoop\nscoop install kubectl\n\n# Method 4: Manual installation\n# Download from https://dl.k8s.io/release/v1.29.0/bin/windows/amd64/kubectl.exe\n# Add to PATH environment variable\n\n# Enable Kubernetes in Docker Desktop\n# Docker Desktop â†’ Settings â†’ Kubernetes â†’ Enable Kubernetes\n\n# Verify installation\nkubectl version --client\nkubectl cluster-info\n\n# Configure PowerShell completion (optional)\nkubectl completion powershell | Out-String | Invoke-Expression\n```\n\n## Initial Configuration\n\n### First-Run Setup\n\n1. **Verify system requirements**:\n```bash\n# Check if swap is disabled\nfree -h\nswapon --show\n\n# Verify required ports are available\nsudo ss -tlnp | grep -E ':(6443|2379|2380|10250|10259|10257)'\n\n# Check container runtime\nsudo systemctl status containerd\n```\n\n2. **Configure container runtime**:\n```bash\n# Default containerd configuration directory\nsudo mkdir -p /etc/containerd\n\n# Generate default configuration\ncontainerd config default | sudo tee /etc/containerd/config.toml\n\n# Enable SystemdCgroup for better resource management\nsudo sed -i 's/SystemdCgroup = false/SystemdCgroup = true/' /etc/containerd/config.toml\n\n# Restart containerd with new configuration\nsudo systemctl restart containerd\n```\n\n3. **Initialize cluster networking**:\n```bash\n# Load required kernel modules\nsudo modprobe overlay\nsudo modprobe br_netfilter\n\n# Configure sysctl for networking\necho 'net.bridge.bridge-nf-call-iptables=1' | sudo tee -a /etc/sysctl.conf\necho 'net.ipv4.ip_forward=1' | sudo tee -a /etc/sysctl.conf\nsudo sysctl -p\n```\n\n4. **Set up kubelet configuration**:\n```bash\n# Create kubelet configuration directory\nsudo mkdir -p /var/lib/kubelet\n\n# Set kubelet to automatically restart\nsudo systemctl enable kubelet\n```\n\n### Testing Initial Setup\n\n```bash\n# Verify container runtime is working\nsudo crictl version\nsudo crictl info\n\n# Check if kubelet is ready\nsudo systemctl status kubelet\n\n# Verify kernel modules are loaded\nlsmod | grep -E 'overlay|br_netfilter'\n\n# Test container runtime with a simple container\nsudo crictl pull k8s.gcr.io/pause:3.9\nsudo crictl images\n```\n\n**WARNING:** Ensure all prerequisite steps are completed before proceeding to cluster initialization!\n\n## Service Management\n\n### systemd (RHEL, Debian, Ubuntu, Arch, openSUSE)\n\n```bash\n# Enable Kubernetes services to start on boot\nsudo systemctl enable kubelet\nsudo systemctl enable containerd\n\n# Start services\nsudo systemctl start containerd\nsudo systemctl start kubelet\n\n# Stop services\nsudo systemctl stop kubelet\nsudo systemctl stop containerd\n\n# Restart services\nsudo systemctl restart containerd\nsudo systemctl restart kubelet\n\n# Check service status\nsudo systemctl status kubelet\nsudo systemctl status containerd\n\n# View service logs\nsudo journalctl -u kubelet -f\nsudo journalctl -u containerd -f\n\n# Reload systemd daemon after config changes\nsudo systemctl daemon-reload\n```\n\n### OpenRC (Alpine Linux)\n\n```bash\n# Enable services to start on boot\nsudo rc-update add containerd default\nsudo rc-update add kubelet default\n\n# Start services\nsudo rc-service containerd start\nsudo rc-service kubelet start\n\n# Stop services\nsudo rc-service kubelet stop\nsudo rc-service containerd stop\n\n# Restart services\nsudo rc-service containerd restart\nsudo rc-service kubelet restart\n\n# Check service status\nsudo rc-service kubelet status\nsudo rc-service containerd status\n\n# View logs\nsudo tail -f /var/log/kubelet.log\n```\n\n### launchd (macOS with Docker Desktop)\n\n```bash\n# Docker Desktop manages Kubernetes services automatically\n# Use Docker Desktop interface to start/stop Kubernetes\n\n# Check Kubernetes status\nkubectl cluster-info\n\n# Restart Kubernetes through Docker Desktop\n# Docker Desktop â†’ Preferences â†’ Kubernetes â†’ Reset Kubernetes Cluster\n\n# View logs through Docker Desktop\n# Docker Desktop â†’ Troubleshoot â†’ Clean / Purge data\n```\n\n### Windows Service Manager\n\n```powershell\n# Docker Desktop manages Kubernetes services on Windows\n# Use Docker Desktop interface for management\n\n# Check Kubernetes status\nkubectl cluster-info\n\n# Restart Docker Desktop service\nRestart-Service com.docker.service\n\n# View Docker Desktop logs\nGet-EventLog -LogName Application -Source \"Docker Desktop\"\n```\n\n## Cluster Initialization\n\n### Control Plane Setup (Master Node)\n```bash\n# Initialize cluster with security best practices\nsudo kubeadm init \\\n  --pod-network-cidr=10.244.0.0/16 \\\n  --service-cidr=10.96.0.0/12 \\\n  --apiserver-advertise-address=$(hostname -I | awk '{print $1}') \\\n  --node-name=$(hostname) \\\n  --ignore-preflight-errors=NumCPU\n\n# Configure kubectl for regular user\nmkdir -p $HOME/.kube\nsudo cp -i /etc/kubernetes/admin.conf $HOME/.kube/config\nsudo chown $(id -u):$(id -g) $HOME/.kube/config\n\n# Alternative: Root user configuration\nexport KUBECONFIG=/etc/kubernetes/admin.conf\necho 'export KUBECONFIG=/etc/kubernetes/admin.conf' >> ~/.bashrc\n\n# Verify control plane is running\nkubectl cluster-info\nkubectl get nodes\nkubectl get pods --all-namespaces\n```\n\n### Network Plugin Installation\n\n#### Flannel (Simple, recommended for beginners)\n```bash\n# Install Flannel CNI\nkubectl apply -f https://github.com/flannel-io/flannel/releases/latest/download/kube-flannel.yml\n\n# Verify Flannel pods are running\nkubectl get pods -n kube-flannel\n```\n\n#### Calico (Advanced networking and network policies)\n```bash\n# Install Calico CNI\nkubectl create -f https://raw.githubusercontent.com/projectcalico/calico/v3.26.1/manifests/tigera-operator.yaml\n\n# Download and apply Calico custom resources\ncurl https://raw.githubusercontent.com/projectcalico/calico/v3.26.1/manifests/custom-resources.yaml -O\nkubectl create -f custom-resources.yaml\n\n# Verify Calico is running\nkubectl get pods -n calico-system\n```\n\n#### Cilium (eBPF-based networking)\n```bash\n# Install Cilium CLI\nCILIUM_CLI_VERSION=$(curl -s https://raw.githubusercontent.com/cilium/cilium-cli/main/stable.txt)\nCLI_ARCH=amd64\nif [ \"$(uname -m)\" = \"aarch64\" ]; then CLI_ARCH=arm64; fi\ncurl -L --fail --remote-name-all https://github.com/cilium/cilium-cli/releases/download/${CILIUM_CLI_VERSION}/cilium-linux-${CLI_ARCH}.tar.gz{,.sha256sum}\nsha256sum --check cilium-linux-${CLI_ARCH}.tar.gz.sha256sum\nsudo tar xzvfC cilium-linux-${CLI_ARCH}.tar.gz /usr/local/bin\nrm cilium-linux-${CLI_ARCH}.tar.gz{,.sha256sum}\n\n# Install Cilium\ncilium install\n\n# Verify installation\ncilium status --wait\n```\n\n### Worker Node Setup\n```bash\n# On worker nodes, use the join command from control plane initialization\n# Example (replace with your actual token and hash):\nsudo kubeadm join 192.168.1.100:6443 \\\n  --token abcdef.0123456789abcdef \\\n  --discovery-token-ca-cert-hash sha256:1234567890abcdef...\n\n# If you need to get the join command again:\n# On control plane:\nkubeadm token create --print-join-command\n\n# Verify nodes joined successfully\nkubectl get nodes -o wide\n```\n\n## Security Hardening (2024 Best Practices)\n\n### RBAC Configuration\n```bash\n# Create service account with limited permissions\nkubectl create serviceaccount developer-sa -n default\n\n# Create role with specific permissions\ncat <<EOF | kubectl apply -f -\napiVersion: rbac.authorization.k8s.io/v1\nkind: Role\nmetadata:\n  namespace: default\n  name: developer-role\nrules:\n- apiGroups: [\"\"]\n  resources: [\"pods\", \"services\", \"configmaps\"]\n  verbs: [\"get\", \"list\", \"watch\", \"create\", \"update\", \"patch\", \"delete\"]\n- apiGroups: [\"apps\"]\n  resources: [\"deployments\", \"replicasets\"]\n  verbs: [\"get\", \"list\", \"watch\", \"create\", \"update\", \"patch\", \"delete\"]\n- apiGroups: [\"\"]\n  resources: [\"pods/log\"]\n  verbs: [\"get\", \"list\"]\nEOF\n\n# Create role binding\ncat <<EOF | kubectl apply -f -\napiVersion: rbac.authorization.k8s.io/v1\nkind: RoleBinding\nmetadata:\n  name: developer-binding\n  namespace: default\nsubjects:\n- kind: ServiceAccount\n  name: developer-sa\n  namespace: default\nroleRef:\n  kind: Role\n  name: developer-role\n  apiGroup: rbac.authorization.k8s.io\nEOF\n\n# Test RBAC configuration\nkubectl auth can-i create deployments --as=system:serviceaccount:default:developer-sa\n```\n\n### Pod Security Standards\n```bash\n# Enable Pod Security Standards (baseline level)\ncat <<EOF | kubectl apply -f -\napiVersion: v1\nkind: Namespace\nmetadata:\n  name: secure-namespace\n  labels:\n    pod-security.kubernetes.io/enforce: baseline\n    pod-security.kubernetes.io/audit: baseline\n    pod-security.kubernetes.io/warn: baseline\nEOF\n\n# For restricted security (recommended for production)\ncat <<EOF | kubectl apply -f -\napiVersion: v1\nkind: Namespace\nmetadata:\n  name: restricted-namespace\n  labels:\n    pod-security.kubernetes.io/enforce: restricted\n    pod-security.kubernetes.io/audit: restricted\n    pod-security.kubernetes.io/warn: restricted\nEOF\n\n# Example secure pod configuration\ncat <<EOF | kubectl apply -f -\napiVersion: v1\nkind: Pod\nmetadata:\n  name: secure-pod\n  namespace: restricted-namespace\nspec:\n  securityContext:\n    runAsNonRoot: true\n    runAsUser: 1000\n    runAsGroup: 3000\n    fsGroup: 2000\n    seccompProfile:\n      type: RuntimeDefault\n  containers:\n  - name: app\n    image: nginx:latest\n    securityContext:\n      allowPrivilegeEscalation: false\n      readOnlyRootFilesystem: true\n      capabilities:\n        drop:\n        - ALL\n    ports:\n    - containerPort: 80\n    volumeMounts:\n    - name: tmp-volume\n      mountPath: /tmp\n    - name: cache-volume\n      mountPath: /var/cache/nginx\n  volumes:\n  - name: tmp-volume\n    emptyDir: {}\n  - name: cache-volume\n    emptyDir: {}\nEOF\n```\n\n### Network Policies\n```bash\n# Default deny all network policy\ncat <<EOF | kubectl apply -f -\napiVersion: networking.k8s.io/v1\nkind: NetworkPolicy\nmetadata:\n  name: default-deny-all\n  namespace: default\nspec:\n  podSelector: {}\n  policyTypes:\n  - Ingress\n  - Egress\nEOF\n\n# Allow specific communication\ncat <<EOF | kubectl apply -f -\napiVersion: networking.k8s.io/v1\nkind: NetworkPolicy\nmetadata:\n  name: allow-nginx-ingress\n  namespace: default\nspec:\n  podSelector:\n    matchLabels:\n      app: nginx\n  policyTypes:\n  - Ingress\n  ingress:\n  - from:\n    - namespaceSelector:\n        matchLabels:\n          name: ingress-nginx\n    ports:\n    - protocol: TCP\n      port: 80\nEOF\n\n# Allow egress for DNS\ncat <<EOF | kubectl apply -f -\napiVersion: networking.k8s.io/v1\nkind: NetworkPolicy\nmetadata:\n  name: allow-dns-egress\n  namespace: default\nspec:\n  podSelector: {}\n  policyTypes:\n  - Egress\n  egress:\n  - to: []\n    ports:\n    - protocol: UDP\n      port: 53\nEOF\n```\n\n### etcd Security\n```bash\n# Check etcd encryption at rest\nkubectl get secrets --all-namespaces -o json | kubectl replace -f-\n\n# Create encryption configuration\ncat <<EOF | sudo tee /etc/kubernetes/enc.yaml\napiVersion: apiserver.config.k8s.io/v1\nkind: EncryptionConfiguration\nresources:\n- resources:\n  - secrets\n  - configmaps\n  - pandas.awesome.bears.example\n  providers:\n  - aescbc:\n      keys:\n      - name: key1\n        secret: $(head -c 32 /dev/urandom | base64)\n  - identity: {}\nEOF\n\n# Update kube-apiserver configuration\nsudo sed -i '/--encryption-provider-config=/d' /etc/kubernetes/manifests/kube-apiserver.yaml\nsudo sed -i '/- kube-apiserver/a\\    - --encryption-provider-config=/etc/kubernetes/enc.yaml' /etc/kubernetes/manifests/kube-apiserver.yaml\n\n# Mount encryption config in kube-apiserver\nsudo sed -i '/volumeMounts:/a\\    - mountPath: /etc/kubernetes/enc.yaml\\n      name: encryption-config\\n      readOnly: true' /etc/kubernetes/manifests/kube-apiserver.yaml\nsudo sed -i '/volumes:/a\\  - hostPath:\\n      path: /etc/kubernetes/enc.yaml\\n      type: FileOrCreate\\n    name: encryption-config' /etc/kubernetes/manifests/kube-apiserver.yaml\n```\n\n## Alternative Installation Methods\n\n### k3s (Lightweight Kubernetes)\n```bash\n# Install k3s on control plane\ncurl -sfL https://get.k3s.io | sh -s - --write-kubeconfig-mode 644\n\n# Get node token for workers\nsudo cat /var/lib/rancher/k3s/server/node-token\n\n# Install on worker nodes\ncurl -sfL https://get.k3s.io | K3S_URL=https://myserver:6443 K3S_TOKEN=mynodetoken sh -\n\n# Configure kubectl\nmkdir -p ~/.kube\nsudo cp /etc/rancher/k3s/k3s.yaml ~/.kube/config\nsudo chown $(id -u):$(id -g) ~/.kube/config\nexport KUBECONFIG=~/.kube/config\n\n# Verify cluster\nkubectl get nodes\n```\n\n### k0s (Zero-deps Kubernetes)\n```bash\n# Download k0s\ncurl -sSLf https://get.k0s.sh | sudo sh\n\n# Initialize controller\nsudo k0s install controller --single\n\n# Start k0s\nsudo systemctl start k0scontroller\n\n# Generate worker join token\nsudo k0s token create --role=worker\n\n# On worker nodes:\nsudo k0s install worker --token-file /path/to/token/file\nsudo systemctl start k0sworker\n\n# Configure kubectl\nmkdir -p ~/.kube\nsudo k0s kubeconfig admin > ~/.kube/config\n```\n\n### MicroK8s (Ubuntu/Snap)\n```bash\n# Install MicroK8s\nsudo snap install microk8s --classic\n\n# Add user to microk8s group\nsudo usermod -a -G microk8s $USER\nsudo chown -f -R $USER ~/.kube\nnewgrp microk8s\n\n# Enable essential addons\nmicrok8s enable dns dashboard storage\n\n# Configure kubectl alias\necho 'alias kubectl=\"microk8s kubectl\"' >> ~/.bashrc\nsource ~/.bashrc\n\n# Get cluster info\nmicrok8s kubectl cluster-info\n```\n\n### Minikube (Development)\n```bash\n# Install minikube\ncurl -LO https://storage.googleapis.com/minikube/releases/latest/minikube-linux-amd64\nsudo install minikube-linux-amd64 /usr/local/bin/minikube\n\n# Start cluster with specific configuration\nminikube start \\\n  --driver=containerd \\\n  --cpus=4 \\\n  --memory=8g \\\n  --disk-size=50g \\\n  --kubernetes-version=v1.29.0\n\n# Enable addons\nminikube addons enable dashboard\nminikube addons enable metrics-server\nminikube addons enable ingress\nminikube addons enable registry\n\n# Configure kubectl context\nkubectl config use-context minikube\n\n# Access dashboard\nminikube dashboard\n```\n\n## Essential Add-ons Installation\n\n### Metrics Server\n```bash\n# Install metrics-server for resource monitoring\nkubectl apply -f https://github.com/kubernetes-sigs/metrics-server/releases/latest/download/components.yaml\n\n# For development clusters, may need to add --kubelet-insecure-tls\nkubectl patch deployment metrics-server -n kube-system --type='json' -p='[{\"op\": \"add\", \"path\": \"/spec/template/spec/containers/0/args/-\", \"value\": \"--kubelet-insecure-tls\"}]'\n\n# Verify metrics server\nkubectl top nodes\nkubectl top pods --all-namespaces\n```\n\n### Kubernetes Dashboard\n```bash\n# Install dashboard\nkubectl apply -f https://raw.githubusercontent.com/kubernetes/dashboard/v2.7.0/aio/deploy/recommended.yaml\n\n# Create admin service account\ncat <<EOF | kubectl apply -f -\napiVersion: v1\nkind: ServiceAccount\nmetadata:\n  name: admin-user\n  namespace: kubernetes-dashboard\n---\napiVersion: rbac.authorization.k8s.io/v1\nkind: ClusterRoleBinding\nmetadata:\n  name: admin-user\nroleRef:\n  apiGroup: rbac.authorization.k8s.io\n  kind: ClusterRole\n  name: cluster-admin\nsubjects:\n- kind: ServiceAccount\n  name: admin-user\n  namespace: kubernetes-dashboard\nEOF\n\n# Get access token\nkubectl -n kubernetes-dashboard create token admin-user\n\n# Access dashboard\nkubectl proxy &\n# Visit: http://localhost:8001/api/v1/namespaces/kubernetes-dashboard/services/https:kubernetes-dashboard:/proxy/\n```\n\n### Ingress Controller (NGINX)\n```bash\n# Install NGINX Ingress Controller\nkubectl apply -f https://raw.githubusercontent.com/kubernetes/ingress-nginx/controller-v1.8.2/deploy/static/provider/cloud/deploy.yaml\n\n# For bare metal installations\nkubectl apply -f https://raw.githubusercontent.com/kubernetes/ingress-nginx/controller-v1.8.2/deploy/static/provider/baremetal/deploy.yaml\n\n# Verify installation\nkubectl get pods -n ingress-nginx\nkubectl get svc -n ingress-nginx\n\n# Create sample ingress\ncat <<EOF | kubectl apply -f -\napiVersion: networking.k8s.io/v1\nkind: Ingress\nmetadata:\n  name: example-ingress\n  annotations:\n    nginx.ingress.kubernetes.io/rewrite-target: /\n    nginx.ingress.kubernetes.io/ssl-redirect: \"true\"\nspec:\n  ingressClassName: nginx\n  tls:\n  - hosts:\n    - example.com\n    secretName: example-tls\n  rules:\n  - host: example.com\n    http:\n      paths:\n      - path: /\n        pathType: Prefix\n        backend:\n          service:\n            name: web-service\n            port:\n              number: 80\nEOF\n```\n\n## Reverse Proxy Setup\n\n### NGINX Ingress Controller Configuration\n\n```bash\n# Install NGINX Ingress Controller with custom configuration\ncat <<EOF | kubectl apply -f -\napiVersion: v1\nkind: Namespace\nmetadata:\n  name: ingress-nginx\n---\napiVersion: helm.cattle.io/v1\nkind: HelmChart\nmetadata:\n  name: ingress-nginx\n  namespace: ingress-nginx\nspec:\n  chart: ingress-nginx\n  repo: https://kubernetes.github.io/ingress-nginx\n  targetNamespace: ingress-nginx\n  valuesContent: |-\n    controller:\n      replicaCount: 2\n      service:\n        type: LoadBalancer\n        externalTrafficPolicy: Local\n      config:\n        ssl-redirect: \"true\"\n        force-ssl-redirect: \"true\"\n        ssl-protocols: \"TLSv1.2 TLSv1.3\"\n        ssl-ciphers: \"ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384\"\n        client-body-buffer-size: \"64k\"\n        client-body-timeout: \"60\"\n        client-header-timeout: \"60\"\n        large-client-header-buffers: \"4 64k\"\n        proxy-body-size: \"50m\"\n        server-name-hash-bucket-size: \"128\"\n      metrics:\n        enabled: true\n        serviceMonitor:\n          enabled: true\nEOF\n```\n\n### Traefik Ingress Controller\n\n```bash\n# Install Traefik with custom configuration\ncat <<EOF | kubectl apply -f -\napiVersion: v1\nkind: Namespace\nmetadata:\n  name: traefik-system\n---\napiVersion: argoproj.io/v1alpha1\nkind: Application\nmetadata:\n  name: traefik\n  namespace: argocd\nspec:\n  project: default\n  source:\n    chart: traefik\n    repoURL: https://traefik.github.io/charts\n    targetRevision: 21.1.0\n    helm:\n      values: |\n        deployment:\n          replicas: 2\n        service:\n          type: LoadBalancer\n        ingressRoute:\n          dashboard:\n            enabled: true\n        logs:\n          general:\n            level: INFO\n          access:\n            enabled: true\n        metrics:\n          prometheus:\n            enabled: true\n        certificatesResolvers:\n          letsencrypt:\n            acme:\n              email: admin@example.com\n              storage: /data/acme.json\n              httpChallenge:\n                entryPoint: web\n  destination:\n    server: https://kubernetes.default.svc\n    namespace: traefik-system\nEOF\n```\n\n### HAProxy Load Balancer for API Server\n\n```bash\n# Install HAProxy for external load balancing\ncat <<EOF | kubectl apply -f -\napiVersion: v1\nkind: ConfigMap\nmetadata:\n  name: haproxy-config\n  namespace: kube-system\ndata:\n  haproxy.cfg: |\n    global\n        log stdout local0\n        daemon\n        \n    defaults\n        mode tcp\n        log global\n        option tcplog\n        timeout connect 5000ms\n        timeout client 50000ms\n        timeout server 50000ms\n        \n    frontend k8s-api-frontend\n        bind *:6443\n        mode tcp\n        default_backend k8s-api-backend\n        \n    backend k8s-api-backend\n        mode tcp\n        balance roundrobin\n        option tcp-check\n        server master1 10.0.1.10:6443 check\n        server master2 10.0.1.11:6443 check\n        server master3 10.0.1.12:6443 check\n---\napiVersion: apps/v1\nkind: DaemonSet\nmetadata:\n  name: haproxy-lb\n  namespace: kube-system\nspec:\n  selector:\n    matchLabels:\n      app: haproxy-lb\n  template:\n    metadata:\n      labels:\n        app: haproxy-lb\n    spec:\n      hostNetwork: true\n      containers:\n      - name: haproxy\n        image: haproxy:2.8-alpine\n        ports:\n        - containerPort: 6443\n          hostPort: 6443\n        volumeMounts:\n        - name: haproxy-config\n          mountPath: /usr/local/etc/haproxy\n      volumes:\n      - name: haproxy-config\n        configMap:\n          name: haproxy-config\nEOF\n```\n\n## Database Setup\n\n### PostgreSQL StatefulSet with HA\n\n```bash\n# Deploy PostgreSQL cluster with replication\ncat <<EOF | kubectl apply -f -\napiVersion: v1\nkind: Namespace\nmetadata:\n  name: postgresql\n---\napiVersion: postgresql.cnpg.io/v1\nkind: Cluster\nmetadata:\n  name: postgresql-cluster\n  namespace: postgresql\nspec:\n  instances: 3\n  primaryUpdateStrategy: unsupervised\n  \n  postgresql:\n    parameters:\n      max_connections: \"200\"\n      shared_buffers: \"256MB\"\n      effective_cache_size: \"1GB\"\n      maintenance_work_mem: \"64MB\"\n      checkpoint_completion_target: \"0.9\"\n      wal_buffers: \"16MB\"\n      default_statistics_target: \"100\"\n      random_page_cost: \"1.1\"\n      effective_io_concurrency: \"200\"\n      \n  bootstrap:\n    initdb:\n      database: app_database\n      owner: app_user\n      secret:\n        name: postgresql-credentials\n        \n  storage:\n    storageClass: \"fast-ssd\"\n    size: \"100Gi\"\n    \n  monitoring:\n    enabled: true\n    \n  backup:\n    retentionPolicy: \"30d\"\n    barmanObjectStore:\n      destinationPath: s3://postgresql-backups/cluster1\n      s3Credentials:\n        accessKeyId:\n          name: backup-credentials\n          key: ACCESS_KEY_ID\n        secretAccessKey:\n          name: backup-credentials\n          key: SECRET_ACCESS_KEY\n      wal:\n        retention: \"5d\"\n      data:\n        retention: \"30d\"\n---\napiVersion: v1\nkind: Secret\nmetadata:\n  name: postgresql-credentials\n  namespace: postgresql\ntype: kubernetes.io/basic-auth\ndata:\n  username: $(echo -n 'app_user' | base64)\n  password: $(echo -n 'secure_database_password_123!' | base64)\nEOF\n```\n\n### MySQL Cluster with Percona Operator\n\n```bash\n# Deploy MySQL cluster using Percona Operator\ncat <<EOF | kubectl apply -f -\napiVersion: v1\nkind: Namespace\nmetadata:\n  name: mysql\n---\napiVersion: pxc.percona.com/v1-12-0\nkind: PerconaXtraDBCluster\nmetadata:\n  name: mysql-cluster\n  namespace: mysql\nspec:\n  crVersion: 1.12.0\n  allowUnsafeConfigurations: false\n  secretsName: mysql-secrets\n  vaultSecretName: \"\"\n  sslSecretName: \"\"\n  sslInternalSecretName: \"\"\n  logCollectorSecretName: \"\"\n  \n  pxc:\n    size: 3\n    image: percona/percona-xtradb-cluster:8.0.32-24.2\n    autoRecovery: true\n    configuration: |\n      [mysqld]\n      wsrep_provider_options=\"debug=1;gcache.size=1G;gcache.page_size=1G\"\n      wsrep_debug=1\n      wsrep_cluster_address=gcomm://\n      binlog_format=ROW\n      default_storage_engine=InnoDB\n      innodb_autoinc_lock_mode=2\n      innodb_locks_unsafe_for_binlog=1\n      max_connections=350\n      innodb_buffer_pool_size=512M\n      \n    resources:\n      requests:\n        memory: 1G\n        cpu: 600m\n      limits:\n        memory: 1G\n        cpu: \"1\"\n        \n    volumeSpec:\n      persistentVolumeClaim:\n        storageClassName: fast-ssd\n        accessModes: [ \"ReadWriteOnce\" ]\n        resources:\n          requests:\n            storage: 80Gi\n            \n    affinity:\n      antiAffinityTopologyKey: \"kubernetes.io/hostname\"\n      \n  haproxy:\n    enabled: true\n    size: 2\n    image: percona/percona-xtradb-cluster-operator:1.12.0-haproxy\n    \n    resources:\n      requests:\n        memory: 256M\n        cpu: 250m\n      limits:\n        memory: 256M\n        cpu: 500m\n        \n  proxysql:\n    enabled: false\n    \n  backup:\n    image: percona/percona-xtradb-cluster-operator:1.12.0-pxc8.0-backup\n    schedule:\n      - name: \"daily-backup\"\n        schedule: \"0 2 * * *\"\n        keep: 7\n        storageName: s3-backup-storage\n        \n---\napiVersion: v1\nkind: Secret\nmetadata:\n  name: mysql-secrets\n  namespace: mysql\ntype: Opaque\ndata:\n  root: $(echo -n 'secure_mysql_root_password!' | base64)\n  xtrabackup: $(echo -n 'backup_password_123!' | base64)\n  monitor: $(echo -n 'monitor_user_password!' | base64)\n  clustercheck: $(echo -n 'cluster_check_password!' | base64)\n  proxysql: $(echo -n 'proxysql_admin_password!' | base64)\n  operator: $(echo -n 'operator_user_password!' | base64)\nEOF\n```\n\n### Redis Cluster Deployment\n\n```bash\n# Deploy Redis cluster with Redis Operator\ncat <<EOF | kubectl apply -f -\napiVersion: v1\nkind: Namespace\nmetadata:\n  name: redis\n---\napiVersion: redis.redis.opstreelabs.in/v1beta1\nkind: RedisCluster\nmetadata:\n  name: redis-cluster\n  namespace: redis\nspec:\n  clusterSize: 6\n  clusterVersion: v7\n  persistenceEnabled: true\n  redisSecret:\n    name: redis-secret\n    key: password\n  redisConfig:\n    redis-config: |\n      maxmemory 512mb\n      maxmemory-policy allkeys-lru\n      save 900 1\n      save 300 10\n      save 60 10000\n      tcp-keepalive 60\n      tcp-backlog 8192\n      timeout 300\n      \n  storage:\n    volumeClaimTemplate:\n      spec:\n        accessModes: [\"ReadWriteOnce\"]\n        storageClassName: fast-ssd\n        resources:\n          requests:\n            storage: 50Gi\n            \n  resources:\n    requests:\n      memory: 512Mi\n      cpu: 250m\n    limits:\n      memory: 512Mi\n      cpu: 500m\n      \n  nodeSelector:\n    node-type: \"redis-optimized\"\n    \n  podSecurityContext:\n    runAsUser: 1000\n    runAsGroup: 1000\n    fsGroup: 1000\n    \n  securityContext:\n    allowPrivilegeEscalation: false\n    readOnlyRootFilesystem: true\n    runAsNonRoot: true\n    capabilities:\n      drop:\n      - ALL\n---\napiVersion: v1\nkind: Secret\nmetadata:\n  name: redis-secret\n  namespace: redis\ntype: Opaque\ndata:\n  password: $(echo -n 'secure_redis_password_123!' | base64)\nEOF\n```\n\n## Storage Configuration\n\n### Persistent Volumes and Storage Classes\n```bash\n# Create local storage class\ncat <<EOF | kubectl apply -f -\napiVersion: storage.k8s.io/v1\nkind: StorageClass\nmetadata:\n  name: local-storage\nprovisioner: kubernetes.io/no-provisioner\nvolumeBindingMode: WaitForFirstConsumer\nallowVolumeExpansion: true\nreclaimPolicy: Delete\nEOF\n\n# Create persistent volume\ncat <<EOF | kubectl apply -f -\napiVersion: v1\nkind: PersistentVolume\nmetadata:\n  name: local-pv-1\nspec:\n  capacity:\n    storage: 10Gi\n  volumeMode: Filesystem\n  accessModes:\n  - ReadWriteOnce\n  persistentVolumeReclaimPolicy: Delete\n  storageClassName: local-storage\n  local:\n    path: /mnt/disk1\n  nodeAffinity:\n    required:\n      nodeSelectorTerms:\n      - matchExpressions:\n        - key: kubernetes.io/hostname\n          operator: In\n          values:\n          - node-1\nEOF\n\n# Create persistent volume claim\ncat <<EOF | kubectl apply -f -\napiVersion: v1\nkind: PersistentVolumeClaim\nmetadata:\n  name: app-data-pvc\nspec:\n  accessModes:\n  - ReadWriteOnce\n  storageClassName: local-storage\n  resources:\n    requests:\n      storage: 5Gi\nEOF\n```\n\n### NFS Storage (Shared volumes)\n```bash\n# Install NFS client utilities (all nodes)\n# Ubuntu/Debian\nsudo apt install -y nfs-common\n\n# RHEL/CentOS\nsudo yum install -y nfs-utils\n\n# Create NFS storage class\ncat <<EOF | kubectl apply -f -\napiVersion: storage.k8s.io/v1\nkind: StorageClass\nmetadata:\n  name: nfs-storage\nprovisioner: example.com/nfs\nparameters:\n  server: 192.168.1.200\n  path: /exported/path\n  readOnly: \"false\"\nreclaimPolicy: Retain\nallowVolumeExpansion: true\nmountOptions:\n  - hard\n  - nfsvers=4.1\nEOF\n```\n\n## Firewall Configuration (Cross-Platform)\n\n### Required Ports\n```bash\n# Control plane ports\nsudo firewall-cmd --permanent --add-port=6443/tcp    # API server\nsudo firewall-cmd --permanent --add-port=2379-2380/tcp  # etcd\nsudo firewall-cmd --permanent --add-port=10250/tcp  # kubelet\nsudo firewall-cmd --permanent --add-port=10259/tcp  # kube-scheduler\nsudo firewall-cmd --permanent --add-port=10257/tcp  # kube-controller-manager\n\n# Worker node ports\nsudo firewall-cmd --permanent --add-port=10250/tcp  # kubelet\nsudo firewall-cmd --permanent --add-port=30000-32767/tcp  # NodePort services\n\n# CNI ports (Flannel)\nsudo firewall-cmd --permanent --add-port=8285/udp   # Flannel\nsudo firewall-cmd --permanent --add-port=8472/udp   # Flannel VXLAN\n\nsudo firewall-cmd --reload\n\n# UFW (Ubuntu/Debian)\nsudo ufw allow 6443/tcp\nsudo ufw allow 2379:2380/tcp\nsudo ufw allow 10250/tcp\nsudo ufw allow 10259/tcp\nsudo ufw allow 10257/tcp\nsudo ufw allow 30000:32767/tcp\nsudo ufw allow 8285/udp\nsudo ufw allow 8472/udp\n\n# iptables (manual configuration)\nsudo iptables -A INPUT -p tcp --dport 6443 -j ACCEPT\nsudo iptables -A INPUT -p tcp --dport 2379:2380 -j ACCEPT\nsudo iptables -A INPUT -p tcp --dport 10250 -j ACCEPT\n```\n\n### SELinux Configuration (RHEL/CentOS)\n```bash\n# Configure SELinux for Kubernetes\nsudo setenforce 0\nsudo sed -i 's/^SELINUX=enforcing$/SELINUX=permissive/' /etc/selinux/config\n\n# Alternative: Configure SELinux policies instead of disabling\nsudo setsebool -P container_manage_cgroup true\nsudo setsebool -P container_use_cgroup true\n\n# Install SELinux policies for containers\nsudo yum install -y container-selinux\n\n# Check for denials\nsudo ausearch -m AVC,USER_AVC -ts recent\n```\n\n## High Availability Setup\n\n### Multi-Master Cluster with kubeadm\n```bash\n# On first control plane node\nsudo kubeadm init \\\n  --control-plane-endpoint=\"k8s-cluster.example.com:6443\" \\\n  --upload-certs \\\n  --pod-network-cidr=10.244.0.0/16\n\n# Note the commands to join additional control plane nodes and workers\n\n# On additional control plane nodes:\nsudo kubeadm join k8s-cluster.example.com:6443 \\\n  --token abcdef.0123456789abcdef \\\n  --discovery-token-ca-cert-hash sha256:1234... \\\n  --control-plane \\\n  --certificate-key 1234...\n\n# Configure load balancer (HAProxy example)\ncat <<EOF | sudo tee /etc/haproxy/haproxy.cfg\nglobal\n    log stdout local0\n    chroot /var/lib/haproxy\n    stats socket /run/haproxy/admin.sock mode 660 level admin\n    stats timeout 30s\n    user haproxy\n    group haproxy\n    daemon\n\ndefaults\n    mode tcp\n    log global\n    option tcplog\n    option dontlognull\n    timeout connect 5000\n    timeout client 50000\n    timeout server 50000\n\nfrontend k8s-api\n    bind *:6443\n    mode tcp\n    default_backend k8s-api-backend\n\nbackend k8s-api-backend\n    mode tcp\n    balance roundrobin\n    server k8s-master-1 192.168.1.101:6443 check\n    server k8s-master-2 192.168.1.102:6443 check\n    server k8s-master-3 192.168.1.103:6443 check\nEOF\n\nsudo systemctl restart haproxy\n```\n\n### External etcd Cluster\n```bash\n# Install etcd on dedicated nodes\nETCD_VER=v3.5.9\ncurl -L https://github.com/etcd-io/etcd/releases/download/${ETCD_VER}/etcd-${ETCD_VER}-linux-amd64.tar.gz -o etcd-${ETCD_VER}-linux-amd64.tar.gz\ntar xzf etcd-${ETCD_VER}-linux-amd64.tar.gz\nsudo mv etcd-${ETCD_VER}-linux-amd64/{etcd,etcdctl} /usr/local/bin/\n\n# Create etcd configuration\nsudo tee /etc/systemd/system/etcd.service > /dev/null <<EOF\n[Unit]\nDescription=etcd\nDocumentation=https://github.com/coreos\n\n[Service]\nType=notify\nUser=etcd\nExecStart=/usr/local/bin/etcd \\\\\n  --name=etcd-1 \\\\\n  --data-dir=/var/lib/etcd \\\\\n  --listen-client-urls=https://192.168.1.201:2379 \\\\\n  --advertise-client-urls=https://192.168.1.201:2379 \\\\\n  --listen-peer-urls=https://192.168.1.201:2380 \\\\\n  --initial-advertise-peer-urls=https://192.168.1.201:2380 \\\\\n  --initial-cluster=etcd-1=https://192.168.1.201:2380,etcd-2=https://192.168.1.202:2380,etcd-3=https://192.168.1.203:2380 \\\\\n  --initial-cluster-token=etcd-cluster-1 \\\\\n  --initial-cluster-state=new \\\\\n  --cert-file=/etc/etcd/pki/server.crt \\\\\n  --key-file=/etc/etcd/pki/server.key \\\\\n  --peer-cert-file=/etc/etcd/pki/peer.crt \\\\\n  --peer-key-file=/etc/etcd/pki/peer.key \\\\\n  --trusted-ca-file=/etc/etcd/pki/ca.crt \\\\\n  --peer-trusted-ca-file=/etc/etcd/pki/ca.crt \\\\\n  --peer-client-cert-auth \\\\\n  --client-cert-auth\nRestart=on-failure\nRestartSec=5\n\n[Install]\nWantedBy=multi-user.target\nEOF\n\n# Create etcd user and directories\nsudo useradd -r etcd\nsudo mkdir -p /var/lib/etcd /etc/etcd/pki\nsudo chown etcd:etcd /var/lib/etcd\nsudo systemctl enable --now etcd\n```\n\n## Application Deployment Examples\n\n### Secure Application Deployment\n```bash\n# Create namespace with network policies\ncat <<EOF | kubectl apply -f -\napiVersion: v1\nkind: Namespace\nmetadata:\n  name: myapp\n  labels:\n    pod-security.kubernetes.io/enforce: restricted\n    pod-security.kubernetes.io/audit: restricted\n    pod-security.kubernetes.io/warn: restricted\n---\napiVersion: v1\nkind: ServiceAccount\nmetadata:\n  name: myapp-sa\n  namespace: myapp\n---\napiVersion: rbac.authorization.k8s.io/v1\nkind: Role\nmetadata:\n  namespace: myapp\n  name: myapp-role\nrules:\n- apiGroups: [\"\"]\n  resources: [\"configmaps\", \"secrets\"]\n  verbs: [\"get\", \"list\"]\n---\napiVersion: rbac.authorization.k8s.io/v1\nkind: RoleBinding\nmetadata:\n  name: myapp-rolebinding\n  namespace: myapp\nsubjects:\n- kind: ServiceAccount\n  name: myapp-sa\n  namespace: myapp\nroleRef:\n  kind: Role\n  name: myapp-role\n  apiGroup: rbac.authorization.k8s.io\n---\napiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: myapp-deployment\n  namespace: myapp\nspec:\n  replicas: 3\n  selector:\n    matchLabels:\n      app: myapp\n  template:\n    metadata:\n      labels:\n        app: myapp\n    spec:\n      serviceAccountName: myapp-sa\n      securityContext:\n        runAsNonRoot: true\n        runAsUser: 1000\n        runAsGroup: 3000\n        fsGroup: 2000\n        seccompProfile:\n          type: RuntimeDefault\n      containers:\n      - name: app\n        image: nginx:alpine\n        ports:\n        - containerPort: 80\n        securityContext:\n          allowPrivilegeEscalation: false\n          readOnlyRootFilesystem: true\n          capabilities:\n            drop:\n            - ALL\n        resources:\n          requests:\n            memory: \"64Mi\"\n            cpu: \"250m\"\n          limits:\n            memory: \"128Mi\"\n            cpu: \"500m\"\n        livenessProbe:\n          httpGet:\n            path: /\n            port: 80\n          initialDelaySeconds: 30\n          periodSeconds: 10\n        readinessProbe:\n          httpGet:\n            path: /\n            port: 80\n          initialDelaySeconds: 5\n          periodSeconds: 5\n        volumeMounts:\n        - name: tmp-volume\n          mountPath: /tmp\n        - name: cache-volume\n          mountPath: /var/cache/nginx\n      volumes:\n      - name: tmp-volume\n        emptyDir: {}\n      - name: cache-volume\n        emptyDir: {}\n---\napiVersion: v1\nkind: Service\nmetadata:\n  name: myapp-service\n  namespace: myapp\nspec:\n  selector:\n    app: myapp\n  ports:\n  - port: 80\n    targetPort: 80\n  type: ClusterIP\nEOF\n```\n\n### StatefulSet with Persistent Storage\n```bash\n# Deploy StatefulSet application (database example)\ncat <<EOF | kubectl apply -f -\napiVersion: apps/v1\nkind: StatefulSet\nmetadata:\n  name: mysql-statefulset\n  namespace: myapp\nspec:\n  serviceName: mysql-service\n  replicas: 3\n  selector:\n    matchLabels:\n      app: mysql\n  template:\n    metadata:\n      labels:\n        app: mysql\n    spec:\n      securityContext:\n        runAsUser: 999\n        runAsGroup: 999\n        fsGroup: 999\n      containers:\n      - name: mysql\n        image: mysql:8.0\n        ports:\n        - containerPort: 3306\n          name: mysql\n        env:\n        - name: MYSQL_ROOT_PASSWORD\n          valueFrom:\n            secretKeyRef:\n              name: mysql-secret\n              key: root-password\n        volumeMounts:\n        - name: mysql-storage\n          mountPath: /var/lib/mysql\n        resources:\n          requests:\n            memory: \"1Gi\"\n            cpu: \"500m\"\n          limits:\n            memory: \"2Gi\"\n            cpu: \"1000m\"\n  volumeClaimTemplates:\n  - metadata:\n      name: mysql-storage\n    spec:\n      accessModes: [\"ReadWriteOnce\"]\n      storageClassName: \"local-storage\"\n      resources:\n        requests:\n          storage: 10Gi\n---\napiVersion: v1\nkind: Service\nmetadata:\n  name: mysql-service\n  namespace: myapp\nspec:\n  clusterIP: None\n  selector:\n    app: mysql\n  ports:\n  - port: 3306\n    targetPort: 3306\n---\napiVersion: v1\nkind: Secret\nmetadata:\n  name: mysql-secret\n  namespace: myapp\ntype: Opaque\ndata:\n  root-password: $(echo -n 'secure_mysql_password' | base64)\nEOF\n```\n\n## Backup and Disaster Recovery\n\n### etcd Backup\n```bash\n# Create etcd backup script\nsudo tee /usr/local/bin/etcd-backup.sh > /dev/null <<'EOF'\n#!/bin/bash\nBACKUP_DIR=\"/backup/etcd\"\nDATE=$(date +%Y%m%d_%H%M%S)\n\nmkdir -p ${BACKUP_DIR}\n\n# Create etcd snapshot\nETCDCTL_API=3 etcdctl snapshot save ${BACKUP_DIR}/etcd-backup-${DATE}.db \\\n  --endpoints=https://127.0.0.1:2379 \\\n  --cacert=/etc/kubernetes/pki/etcd/ca.crt \\\n  --cert=/etc/kubernetes/pki/etcd/server.crt \\\n  --key=/etc/kubernetes/pki/etcd/server.key\n\n# Verify snapshot\nETCDCTL_API=3 etcdctl snapshot status ${BACKUP_DIR}/etcd-backup-${DATE}.db -w table\n\n# Keep only last 7 backups\nfind ${BACKUP_DIR} -name \"etcd-backup-*.db\" -type f -mtime +7 -delete\n\necho \"etcd backup completed: etcd-backup-${DATE}.db\"\nEOF\n\nsudo chmod +x /usr/local/bin/etcd-backup.sh\n\n# Schedule backup\necho \"0 2 * * * root /usr/local/bin/etcd-backup.sh\" | sudo tee -a /etc/crontab\n```\n\n### Cluster State Backup\n```bash\n# Backup all cluster resources\nkubectl get all --all-namespaces -o yaml > cluster-backup-$(date +%Y%m%d).yaml\n\n# Backup specific resource types\nkubectl get configmaps,secrets,persistentvolumes,persistentvolumeclaims --all-namespaces -o yaml > cluster-data-backup-$(date +%Y%m%d).yaml\n\n# Create backup script for all resources\nsudo tee /usr/local/bin/k8s-backup.sh > /dev/null <<'EOF'\n#!/bin/bash\nBACKUP_DIR=\"/backup/kubernetes\"\nDATE=$(date +%Y%m%d_%H%M%S)\n\nmkdir -p ${BACKUP_DIR}\n\n# Backup all cluster resources\nkubectl get all --all-namespaces -o yaml > ${BACKUP_DIR}/cluster-all-${DATE}.yaml\n\n# Backup critical resources separately\nkubectl get configmaps,secrets,persistentvolumes,persistentvolumeclaims --all-namespaces -o yaml > ${BACKUP_DIR}/cluster-data-${DATE}.yaml\n\n# Backup custom resources\nkubectl get crd -o yaml > ${BACKUP_DIR}/cluster-crd-${DATE}.yaml\n\n# Backup RBAC\nkubectl get clusterroles,clusterrolebindings,roles,rolebindings --all-namespaces -o yaml > ${BACKUP_DIR}/cluster-rbac-${DATE}.yaml\n\n# etcd backup\n/usr/local/bin/etcd-backup.sh\n\n# Compress backups\ntar -czf ${BACKUP_DIR}/k8s-complete-backup-${DATE}.tar.gz ${BACKUP_DIR}/*-${DATE}.yaml\n\n# Keep only last 7 backups\nfind ${BACKUP_DIR} -name \"*-${DATE:0:8}*\" -type f -mtime +7 -delete\n\necho \"Kubernetes backup completed: ${DATE}\"\nEOF\n\nsudo chmod +x /usr/local/bin/k8s-backup.sh\necho \"0 3 * * * root /usr/local/bin/k8s-backup.sh\" | sudo tee -a /etc/crontab\n```\n\n## Verification and Testing\n\n### Cluster Health Checks\n```bash\n# Check cluster components\nkubectl get componentstatuses\nkubectl cluster-info\nkubectl get nodes -o wide\n\n# Check all pods in system namespaces\nkubectl get pods --all-namespaces\nkubectl get events --all-namespaces --sort-by=.metadata.creationTimestamp\n\n# Test DNS resolution\nkubectl run test-dns --image=busybox --rm -it --restart=Never -- nslookup kubernetes.default\n\n# Test pod networking\nkubectl run test-pod-1 --image=nginx --port=80\nkubectl expose pod test-pod-1 --port=80 --type=ClusterIP\nkubectl run test-pod-2 --image=busybox --rm -it --restart=Never -- wget -qO- test-pod-1\n\n# Check resource usage\nkubectl top nodes\nkubectl top pods --all-namespaces\n\n# Verify RBAC\nkubectl auth can-i create deployments\nkubectl auth can-i get secrets --as=system:serviceaccount:default:default\n\n# Test persistent storage\nkubectl apply -f - <<EOF\napiVersion: v1\nkind: PersistentVolumeClaim\nmetadata:\n  name: test-pvc\nspec:\n  accessModes:\n  - ReadWriteOnce\n  resources:\n    requests:\n      storage: 1Gi\n---\napiVersion: v1\nkind: Pod\nmetadata:\n  name: test-storage-pod\nspec:\n  containers:\n  - name: app\n    image: busybox\n    command: ['sh', '-c', 'echo \"Storage test\" > /data/test.txt && cat /data/test.txt && sleep 3600']\n    volumeMounts:\n    - name: storage\n      mountPath: /data\n  volumes:\n  - name: storage\n    persistentVolumeClaim:\n      claimName: test-pvc\nEOF\n\nkubectl logs test-storage-pod\nkubectl delete pod test-storage-pod\nkubectl delete pvc test-pvc\n```\n\n### Security Validation\n```bash\n# Run CIS Kubernetes Benchmark\ndocker run --rm -v $(pwd):/tmp aquasec/kube-bench:latest run --targets master,node,etcd,policies\n\n# Check pod security policies\nkubectl get psp  # For older versions\nkubectl get podsecuritypolicies  # For older versions\n\n# Verify network policies are working\nkubectl describe networkpolicy default-deny-all\n\n# Check for privileged containers\nkubectl get pods --all-namespaces -o jsonpath='{range .items[*]}{.metadata.name}{\"\\t\"}{.spec.securityContext.privileged}{\"\\n\"}{end}' | grep true\n\n# Audit security contexts\nkubectl get pods --all-namespaces -o jsonpath='{range .items[*]}{.metadata.namespace}{\"\\t\"}{.metadata.name}{\"\\t\"}{.spec.securityContext}{\"\\n\"}{end}'\n\n# Check for containers running as root\nkubectl get pods --all-namespaces -o jsonpath='{range .items[*]}{.metadata.name}{\"\\t\"}{.spec.containers[*].securityContext.runAsUser}{\"\\n\"}{end}' | grep -E '\\t0$|\\t$'\n```\n\n## Troubleshooting (Cross-Platform)\n\n### Common Issues and Solutions\n```bash\n# Node not ready issues\nkubectl describe node <node-name>\nkubectl get events --sort-by=.metadata.creationTimestamp\n\n# Check kubelet logs\nsudo journalctl -u kubelet -f\n\n# Check container runtime\nsudo systemctl status containerd\nsudo crictl pods\n\n# Network issues\nkubectl get pods -n kube-system\nkubectl describe pod <cni-pod-name> -n kube-system\n\n# Permission issues (SELinux)\nsudo ausearch -m AVC -ts recent\nsudo setsebool -P container_manage_cgroup true\n\n# Certificate issues\nsudo kubeadm certs check-expiration\nopenssl x509 -in /etc/kubernetes/pki/apiserver.crt -text -noout\n\n# Resource exhaustion\nkubectl describe node <node-name>\nkubectl top nodes\nkubectl top pods --all-namespaces --sort-by=memory\n\n# etcd issues\nsudo etcdctl endpoint health \\\n  --endpoints=https://127.0.0.1:2379 \\\n  --cacert=/etc/kubernetes/pki/etcd/ca.crt \\\n  --cert=/etc/kubernetes/pki/etcd/server.crt \\\n  --key=/etc/kubernetes/pki/etcd/server.key\n\n# Reset cluster (if needed)\nsudo kubeadm reset\nsudo rm -rf /etc/cni/net.d\nsudo rm -rf $HOME/.kube/config\n```\n\n### Debug Pod Issues\n```bash\n# Debug failing pods\nkubectl describe pod <pod-name>\nkubectl logs <pod-name> -c <container-name>\nkubectl get events --field-selector involvedObject.name=<pod-name>\n\n# Debug networking\nkubectl run debug-pod --image=nicolaka/netshoot --rm -it --restart=Never\n\n# Check resource constraints\nkubectl describe resourcequota -n <namespace>\nkubectl describe limitrange -n <namespace>\n\n# Debug storage issues\nkubectl describe pvc <pvc-name>\nkubectl get events --field-selector involvedObject.name=<pvc-name>\n\n# Debug service connectivity\nkubectl run debug --image=busybox --rm -it --restart=Never -- nslookup <service-name>\nkubectl get endpoints <service-name>\n\n# Debug ingress issues\nkubectl describe ingress <ingress-name>\nkubectl get events --field-selector involvedObject.name=<ingress-name>\nkubectl logs -n ingress-nginx deployment/ingress-nginx-controller\n```\n\n## Performance Optimization\n\n### System-Level Tuning\n\n```bash\n# Kernel optimization for Kubernetes\nsudo tee -a /etc/sysctl.conf > /dev/null <<EOF\n# Kubernetes performance tuning\nnet.core.somaxconn = 32768\nnet.core.netdev_max_backlog = 5000\nnet.ipv4.tcp_max_syn_backlog = 8192\nnet.ipv4.tcp_max_tw_buckets = 2000000\nnet.ipv4.tcp_tw_reuse = 1\nnet.ipv4.tcp_fin_timeout = 10\nnet.ipv4.ip_local_port_range = 1024 65000\nnet.core.rmem_default = 262144\nnet.core.rmem_max = 134217728\nnet.core.wmem_default = 262144\nnet.core.wmem_max = 134217728\nnet.ipv4.tcp_rmem = 4096 87380 134217728\nnet.ipv4.tcp_wmem = 4096 65536 134217728\nfs.file-max = 2097152\nfs.inotify.max_user_instances = 8192\nfs.inotify.max_user_watches = 1048576\nvm.swappiness = 0\nvm.overcommit_memory = 1\nvm.dirty_ratio = 80\nvm.dirty_background_ratio = 5\nkernel.pid_max = 4194304\nEOF\n\nsudo sysctl -p\n\n# Set resource limits\nsudo tee -a /etc/security/limits.conf > /dev/null <<EOF\nroot soft nofile 65536\nroot hard nofile 65536\n* soft nofile 65536\n* hard nofile 65536\n* soft nproc 65536\n* hard nproc 65536\nEOF\n\n# Configure systemd limits for containerd and kubelet\nsudo mkdir -p /etc/systemd/system/containerd.service.d/\nsudo tee /etc/systemd/system/containerd.service.d/limits.conf > /dev/null <<EOF\n[Service]\nLimitNOFILE=1048576\nLimitNPROC=1048576\nLimitCORE=infinity\nOOMScoreAdjust=-999\nEOF\n\nsudo mkdir -p /etc/systemd/system/kubelet.service.d/\nsudo tee /etc/systemd/system/kubelet.service.d/limits.conf > /dev/null <<EOF\n[Service]\nLimitNOFILE=1048576\nLimitNPROC=1048576\nLimitCORE=infinity\nOOMScoreAdjust=-999\nEOF\n\nsudo systemctl daemon-reload\nsudo systemctl restart containerd kubelet\n```\n\n### Kubernetes Performance Configuration\n\n```bash\n# Optimize kubelet configuration\nsudo tee /var/lib/kubelet/config.yaml > /dev/null <<EOF\napiVersion: kubelet.config.k8s.io/v1beta1\nkind: KubeletConfiguration\naddress: 0.0.0.0\nport: 10250\nreadOnlyPort: 0\nauthentication:\n  webhook:\n    enabled: true\nauthorization:\n  mode: Webhook\nclusterDomain: cluster.local\nclusterDNS:\n- 10.96.0.10\nmaxPods: 250\npodsPerCore: 10\ncgroupDriver: systemd\ncontainerLogMaxSize: 50Mi\ncontainerLogMaxFiles: 5\neventRecordQPS: 50\neventBurst: 100\nkubeAPIQPS: 50\nkubeAPIBurst: 100\nserializeImagePulls: false\nregistryPullQPS: 10\nregistryBurst: 20\nsyncFrequency: 1m\nfileCheckFrequency: 20s\nhttpCheckFrequency: 20s\nnodeStatusUpdateFrequency: 10s\nimageMinimumGCAge: 2m\nimageGCHighThresholdPercent: 85\nimageGCLowThresholdPercent: 80\nvolumeStatsAggPeriod: 1m\nsystemReserved:\n  cpu: 200m\n  memory: 512Mi\n  ephemeral-storage: 2Gi\nkubeReserved:\n  cpu: 200m\n  memory: 512Mi\n  ephemeral-storage: 2Gi\nEOF\n\n# Optimize API server configuration\nsudo sed -i '/- kube-apiserver/a\\\n    - --max-requests-inflight=2000\\\n    - --max-mutating-requests-inflight=1000\\\n    - --watch-cache-sizes=nodes#100,pods#1000,replicationcontrollers#500\\\n    - --target-ram-mb=2048\\\n    - --event-ttl=168h0m0s' /etc/kubernetes/manifests/kube-apiserver.yaml\n\n# Optimize etcd configuration\nsudo tee -a /etc/kubernetes/manifests/etcd.yaml > /dev/null <<EOF\n    - --max-request-bytes=33554432\n    - --quota-backend-bytes=8589934592\n    - --snapshot-count=10000\n    - --heartbeat-interval=100\n    - --election-timeout=1000\nEOF\n```\n\n## Integration Examples\n\n### Python Client Library\n\n```python\n# kubernetes-client example\nfrom kubernetes import client, config\nimport json\n\n# Load kubeconfig\nconfig.load_kube_config()  # or config.load_incluster_config() for in-cluster\n\n# Initialize API clients\nv1 = client.CoreV1Api()\napps_v1 = client.AppsV1Api()\nnetworking_v1 = client.NetworkingV1Api()\n\n# Create a namespace\nnamespace = client.V1Namespace(\n    metadata=client.V1ObjectMeta(name=\"python-app\")\n)\nv1.create_namespace(body=namespace)\n\n# Create a deployment\ndeployment = client.V1Deployment(\n    metadata=client.V1ObjectMeta(name=\"nginx-deployment\"),\n    spec=client.V1DeploymentSpec(\n        replicas=3,\n        selector=client.V1LabelSelector(\n            match_labels={\"app\": \"nginx\"}\n        ),\n        template=client.V1PodTemplateSpec(\n            metadata=client.V1ObjectMeta(\n                labels={\"app\": \"nginx\"}\n            ),\n            spec=client.V1PodSpec(\n                containers=[\n                    client.V1Container(\n                        name=\"nginx\",\n                        image=\"nginx:alpine\",\n                        ports=[client.V1ContainerPort(container_port=80)],\n                        resources=client.V1ResourceRequirements(\n                            requests={\"cpu\": \"100m\", \"memory\": \"128Mi\"},\n                            limits={\"cpu\": \"500m\", \"memory\": \"512Mi\"}\n                        )\n                    )\n                ]\n            )\n        )\n    )\n)\n\napps_v1.create_namespaced_deployment(\n    namespace=\"python-app\", \n    body=deployment\n)\n\n# Create a service\nservice = client.V1Service(\n    metadata=client.V1ObjectMeta(name=\"nginx-service\"),\n    spec=client.V1ServiceSpec(\n        selector={\"app\": \"nginx\"},\n        ports=[\n            client.V1ServicePort(port=80, target_port=80)\n        ],\n        type=\"LoadBalancer\"\n    )\n)\n\nv1.create_namespaced_service(namespace=\"python-app\", body=service)\n\n# Monitor pods\ndef monitor_pods():\n    pods = v1.list_namespaced_pod(namespace=\"python-app\")\n    for pod in pods.items:\n        print(f\"Pod: {pod.metadata.name}, Status: {pod.status.phase}\")\n\nmonitor_pods()\n\n# Stream logs\ndef stream_logs(pod_name):\n    for line in v1.read_namespaced_pod_log(\n        name=pod_name, \n        namespace=\"python-app\", \n        follow=True, \n        _preload_content=False\n    ).stream():\n        print(line.decode('utf-8'), end='')\n\n# Clean up\napps_v1.delete_namespaced_deployment(name=\"nginx-deployment\", namespace=\"python-app\")\nv1.delete_namespaced_service(name=\"nginx-service\", namespace=\"python-app\")\nv1.delete_namespace(name=\"python-app\")\n```\n\n### Node.js Client Example\n\n```javascript\n// kubernetes-example.js\nconst k8s = require('@kubernetes/client-node');\n\n// Load kubeconfig\nconst kc = new k8s.KubeConfig();\nkc.loadFromDefault();\n\nconst k8sApi = kc.makeApiClient(k8s.CoreV1Api);\nconst k8sAppsApi = kc.makeApiClient(k8s.AppsV1Api);\n\nconst namespace = 'nodejs-app';\n\nasync function createNamespace() {\n    const namespaceManifest = {\n        metadata: {\n            name: namespace\n        }\n    };\n    \n    try {\n        await k8sApi.createNamespace(namespaceManifest);\n        console.log(`Namespace ${namespace} created`);\n    } catch (error) {\n        console.error('Error creating namespace:', error.response?.body || error.message);\n    }\n}\n\nasync function createDeployment() {\n    const deploymentManifest = {\n        metadata: {\n            name: 'nginx-deployment'\n        },\n        spec: {\n            replicas: 3,\n            selector: {\n                matchLabels: {\n                    app: 'nginx'\n                }\n            },\n            template: {\n                metadata: {\n                    labels: {\n                        app: 'nginx'\n                    }\n                },\n                spec: {\n                    containers: [{\n                        name: 'nginx',\n                        image: 'nginx:alpine',\n                        ports: [{\n                            containerPort: 80\n                        }],\n                        resources: {\n                            requests: {\n                                cpu: '100m',\n                                memory: '128Mi'\n                            },\n                            limits: {\n                                cpu: '500m',\n                                memory: '512Mi'\n                            }\n                        }\n                    }]\n                }\n            }\n        }\n    };\n    \n    try {\n        await k8sAppsApi.createNamespacedDeployment(namespace, deploymentManifest);\n        console.log('Deployment created: nginx-deployment');\n    } catch (error) {\n        console.error('Error creating deployment:', error.response?.body || error.message);\n    }\n}\n\nasync function createService() {\n    const serviceManifest = {\n        metadata: {\n            name: 'nginx-service'\n        },\n        spec: {\n            selector: {\n                app: 'nginx'\n            },\n            ports: [{\n                port: 80,\n                targetPort: 80\n            }],\n            type: 'LoadBalancer'\n        }\n    };\n    \n    try {\n        await k8sApi.createNamespacedService(namespace, serviceManifest);\n        console.log('Service created: nginx-service');\n    } catch (error) {\n        console.error('Error creating service:', error.response?.body || error.message);\n    }\n}\n\nasync function listPods() {\n    try {\n        const response = await k8sApi.listNamespacedPod(namespace);\n        console.log(`Found ${response.body.items.length} pods:`);\n        response.body.items.forEach(pod => {\n            console.log(`Pod: ${pod.metadata.name}, Status: ${pod.status.phase}`);\n        });\n    } catch (error) {\n        console.error('Error listing pods:', error.response?.body || error.message);\n    }\n}\n\nasync function cleanup() {\n    try {\n        await k8sAppsApi.deleteNamespacedDeployment('nginx-deployment', namespace);\n        await k8sApi.deleteNamespacedService('nginx-service', namespace);\n        await k8sApi.deleteNamespace(namespace);\n        console.log('Resources cleaned up');\n    } catch (error) {\n        console.error('Error during cleanup:', error.response?.body || error.message);\n    }\n}\n\nasync function main() {\n    await createNamespace();\n    await createDeployment();\n    await createService();\n    \n    // Wait a bit for pods to start\n    setTimeout(async () => {\n        await listPods();\n        await cleanup();\n    }, 5000);\n}\n\nmain().catch(console.error);\n```\n\n### Java Client Example\n\n```java\n// KubernetesExample.java\nimport io.kubernetes.client.openapi.ApiClient;\nimport io.kubernetes.client.openapi.ApiException;\nimport io.kubernetes.client.openapi.Configuration;\nimport io.kubernetes.client.openapi.apis.AppsV1Api;\nimport io.kubernetes.client.openapi.apis.CoreV1Api;\nimport io.kubernetes.client.openapi.models.*;\nimport io.kubernetes.client.util.Config;\n\nimport java.util.Collections;\nimport java.util.HashMap;\nimport java.util.Map;\n\npublic class KubernetesExample {\n    public static void main(String[] args) throws Exception {\n        // Load kubeconfig\n        ApiClient client = Config.defaultClient();\n        Configuration.setDefaultApiClient(client);\n        \n        CoreV1Api coreV1Api = new CoreV1Api();\n        AppsV1Api appsV1Api = new AppsV1Api();\n        \n        String namespace = \"java-app\";\n        \n        // Create namespace\n        V1Namespace ns = new V1Namespace()\n            .metadata(new V1ObjectMeta().name(namespace));\n        \n        try {\n            coreV1Api.createNamespace(ns, null, null, null, null);\n            System.out.println(\"Namespace created: \" + namespace);\n        } catch (ApiException e) {\n            System.err.println(\"Failed to create namespace: \" + e.getResponseBody());\n        }\n        \n        // Create deployment\n        Map<String, String> labels = new HashMap<>();\n        labels.put(\"app\", \"nginx\");\n        \n        V1Deployment deployment = new V1Deployment()\n            .metadata(new V1ObjectMeta().name(\"nginx-deployment\"))\n            .spec(new V1DeploymentSpec()\n                .replicas(3)\n                .selector(new V1LabelSelector().matchLabels(labels))\n                .template(new V1PodTemplateSpec()\n                    .metadata(new V1ObjectMeta().labels(labels))\n                    .spec(new V1PodSpec()\n                        .containers(Collections.singletonList(\n                            new V1Container()\n                                .name(\"nginx\")\n                                .image(\"nginx:alpine\")\n                                .ports(Collections.singletonList(\n                                    new V1ContainerPort().containerPort(80)\n                                ))\n                                .resources(new V1ResourceRequirements()\n                                    .requests(Map.of(\n                                        \"cpu\", Quantity.fromString(\"100m\"),\n                                        \"memory\", Quantity.fromString(\"128Mi\")\n                                    ))\n                                    .limits(Map.of(\n                                        \"cpu\", Quantity.fromString(\"500m\"),\n                                        \"memory\", Quantity.fromString(\"512Mi\")\n                                    ))\n                                )\n                        ))\n                    )\n                )\n            );\n            \n        try {\n            appsV1Api.createNamespacedDeployment(namespace, deployment, null, null, null, null);\n            System.out.println(\"Deployment created: nginx-deployment\");\n        } catch (ApiException e) {\n            System.err.println(\"Failed to create deployment: \" + e.getResponseBody());\n        }\n        \n        // Create service\n        V1Service service = new V1Service()\n            .metadata(new V1ObjectMeta().name(\"nginx-service\"))\n            .spec(new V1ServiceSpec()\n                .selector(labels)\n                .ports(Collections.singletonList(\n                    new V1ServicePort().port(80).targetPort(new IntOrString(80))\n                ))\n                .type(\"LoadBalancer\")\n            );\n            \n        try {\n            coreV1Api.createNamespacedService(namespace, service, null, null, null, null);\n            System.out.println(\"Service created: nginx-service\");\n        } catch (ApiException e) {\n            System.err.println(\"Failed to create service: \" + e.getResponseBody());\n        }\n        \n        // List pods\n        try {\n            V1PodList pods = coreV1Api.listNamespacedPod(namespace, null, null, null, null, null, null, null, null, null, null);\n            System.out.println(\"Found \" + pods.getItems().size() + \" pods:\");\n            for (V1Pod pod : pods.getItems()) {\n                System.out.println(\"Pod: \" + pod.getMetadata().getName() + \n                                 \", Status: \" + pod.getStatus().getPhase());\n            }\n        } catch (ApiException e) {\n            System.err.println(\"Failed to list pods: \" + e.getResponseBody());\n        }\n        \n        // Cleanup\n        try {\n            appsV1Api.deleteNamespacedDeployment(\"nginx-deployment\", namespace, null, null, null, null, null, null);\n            coreV1Api.deleteNamespacedService(\"nginx-service\", namespace, null, null, null, null, null, null);\n            coreV1Api.deleteNamespace(namespace, null, null, null, null, null, null);\n            System.out.println(\"Resources cleaned up\");\n        } catch (ApiException e) {\n            System.err.println(\"Failed to cleanup: \" + e.getResponseBody());\n        }\n    }\n}\n```\n\n## Maintenance\n\n### Update Procedures\n\n```bash\n# Check current Kubernetes version\nkubectl version --short\n\n# Plan upgrade with kubeadm\nsudo kubeadm upgrade plan\n\n# Upgrade kubeadm first\nsudo apt update && sudo apt-mark unhold kubeadm\nsudo apt install -y kubeadm=1.29.1-00\nsudo apt-mark hold kubeadm\n\n# Or for RHEL/CentOS\nsudo yum update -y kubeadm-1.29.1\n\n# Upgrade control plane\nsudo kubeadm upgrade apply v1.29.1\n\n# Upgrade kubelet and kubectl\nsudo apt-mark unhold kubelet kubectl\nsudo apt install -y kubelet=1.29.1-00 kubectl=1.29.1-00\nsudo apt-mark hold kubelet kubectl\n\nsudo systemctl daemon-reload\nsudo systemctl restart kubelet\n\n# Drain and upgrade worker nodes\nkubectl drain <worker-node> --ignore-daemonsets --delete-emptydir-data\n# On worker node:\nsudo kubeadm upgrade node\nsudo apt install -y kubelet=1.29.1-00 kubectl=1.29.1-00\nsudo systemctl daemon-reload\nsudo systemctl restart kubelet\n\n# Uncordon worker node\nkubectl uncordon <worker-node>\n```\n\n### Maintenance Tasks\n\n```bash\n# Weekly maintenance script\n#!/bin/bash\n# k8s-maintenance.sh\n\n# Check cluster health\necho \"=== Cluster Health Check ===\"\nkubectl get nodes -o wide\nkubectl get pods --all-namespaces | grep -v Running | grep -v Completed\n\n# Check resource usage\necho \"=== Resource Usage ===\"\nkubectl top nodes\nkubectl top pods --all-namespaces --sort-by=cpu | head -10\n\n# Check certificate expiry\necho \"=== Certificate Expiry ===\"\nsudo kubeadm certs check-expiration\n\n# Clean up completed jobs\necho \"=== Cleanup ===\"\nkubectl get jobs --all-namespaces -o json | jq -r '.items[] | select(.status.conditions[]?.type == \"Complete\") | \"\\(.metadata.namespace) \\(.metadata.name)\"' | xargs -l bash -c 'kubectl delete job $1 -n $0'\n\n# Clean up evicted pods\nkubectl get pods --all-namespaces --field-selector=status.phase=Failed -o json | jq -r '.items[] | \"\\(.metadata.namespace) \\(.metadata.name)\"' | xargs -l bash -c 'kubectl delete pod $1 -n $0'\n\n# Check for security updates\necho \"=== Security Updates Available ===\"\nsudo apt list --upgradable | grep -i security\n\n# Backup etcd\necho \"=== etcd Backup ===\"\nsudo etcdctl snapshot save /backup/etcd-$(date +%Y%m%d_%H%M%S).db \\\n  --endpoints=https://127.0.0.1:2379 \\\n  --cacert=/etc/kubernetes/pki/etcd/ca.crt \\\n  --cert=/etc/kubernetes/pki/etcd/server.crt \\\n  --key=/etc/kubernetes/pki/etcd/server.key\n\necho \"Maintenance completed at: $(date)\"\n```\n\n## Additional Resources\n\n- [Official Documentation](https://kubernetes.io/docs/)\n- [kubectl Reference](https://kubernetes.io/docs/reference/kubectl/)\n- [Security Best Practices](https://kubernetes.io/docs/concepts/security/)\n- [CIS Kubernetes Benchmark](https://www.cisecurity.org/benchmark/kubernetes)\n- [OWASP Kubernetes Security Cheat Sheet](https://cheatsheetseries.owasp.org/cheatsheets/Kubernetes_Security_Cheat_Sheet.html)\n- [Kubernetes The Hard Way](https://github.com/kelseyhightower/kubernetes-the-hard-way)\n- [Kubernetes Academy](https://kubernetes.academy/)\n- [CNCF Landscape](https://landscape.cncf.io/)\n\n---\n\n**Note:** This guide is part of the [HowToMgr](https://howtomgr.github.io) collection.","readmeHtml":"<h1 id=\"kubernetes-installation-guide\" class=\"mobile-header\">Kubernetes Installation Guide</h1>\n<p class=\"mobile-paragraph\">Kubernetes is a free and open-source container orchestration platform for automating deployment, scaling, and management of containerized applications. Originally developed by Google and now maintained by the Cloud Native Computing Foundation (CNCF), Kubernetes serves as the industry standard for container orchestration. It provides enterprise-grade security, scalability, and reliability for cloud-native applications, offering a robust alternative to proprietary solutions like AWS ECS, Azure Container Instances, or Google Cloud Run without vendor lock-in.</p>\n<h2 id=\"prerequisites\" class=\"mobile-header\">Prerequisites</h2>\n<li class=\"mobile-list-item\"><strong>Hardware Requirements</strong>:</li>\n<li class=\"mobile-list-item\">CPU: 2+ cores for control plane, 1+ core for worker nodes</li>\n<li class=\"mobile-list-item\">RAM: 2GB+ per control plane node, 1GB+ per worker node</li>\n<li class=\"mobile-list-item\">Storage: 20GB+ available disk space per node (SSD recommended)</li>\n<li class=\"mobile-list-item\">Network: Stable connectivity between all nodes (1Gbps+ recommended)</li>\n<li class=\"mobile-list-item\"><strong>Operating System</strong>: </li>\n<li class=\"mobile-list-item\">Linux: Any modern distribution with kernel 3.10+ (4.x+ recommended)</li>\n<li class=\"mobile-list-item\">Container runtime support (containerd, Docker, CRI-O)</li>\n<li class=\"mobile-list-item\">macOS: Docker Desktop with Kubernetes enabled (development only)</li>\n<li class=\"mobile-list-item\">Windows: Docker Desktop with Kubernetes enabled (development only)</li>\n<li class=\"mobile-list-item\"><strong>Network Requirements</strong>:</li>\n<li class=\"mobile-list-item\">Unique hostname, MAC address, and product_uuid for every node</li>\n<li class=\"mobile-list-item\">Port 6443 (Kubernetes API server)</li>\n<li class=\"mobile-list-item\">Port 2379-2380 (etcd server client API)</li>\n<li class=\"mobile-list-item\">Port 10250 (kubelet API)</li>\n<li class=\"mobile-list-item\">Port 10259 (kube-scheduler)</li>\n<li class=\"mobile-list-item\">Port 10257 (kube-controller-manager)</li>\n<li class=\"mobile-list-item\">Port 30000-32767 (NodePort Services)</li>\n<li class=\"mobile-list-item\"><strong>Dependencies</strong>:</li>\n<li class=\"mobile-list-item\">Container runtime (containerd recommended)</li>\n<li class=\"mobile-list-item\">systemd or compatible init system</li>\n<li class=\"mobile-list-item\">iptables (for network rules)</li>\n<li class=\"mobile-list-item\">ebtables and ethtool (for networking)</li>\n<li class=\"mobile-list-item\"><strong>System Access</strong>: root or sudo privileges required</li>\n<li class=\"mobile-list-item\"><strong>Special Requirements</strong>:</li>\n<li class=\"mobile-list-item\">Swap must be disabled on all nodes</li>\n<li class=\"mobile-list-item\">SELinux in permissive mode (for RHEL/CentOS)</li>\n<li class=\"mobile-list-item\">Firewall configured to allow cluster communication</li>\n<h2 id=\"system-preparation-all-distributions\" class=\"mobile-header\">System Preparation (All Distributions)</h2>\n<h3 id=\"disable-swap-required\" class=\"mobile-header\">Disable Swap (Required)</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Disable swap immediately\nsudo swapoff -a\n\n# Disable swap permanently\nsudo sed -i &#039;/ swap / s/^\\(.*\\)$/#\\1/g&#039; /etc/fstab\n\n# Verify swap is disabled\nfree -h\nswapon --show</code></pre>\n      </div>\n    </div>\n<h3 id=\"configure-kernel-modules\" class=\"mobile-header\">Configure Kernel Modules</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Load required kernel modules\ncat &lt;&lt;EOF | sudo tee /etc/modules-load.d/k8s.conf\noverlay\nbr_netfilter\nEOF\n\nsudo modprobe overlay\nsudo modprobe br_netfilter\n\n# Configure sysctl parameters\ncat &lt;&lt;EOF | sudo tee /etc/sysctl.d/k8s.conf\nnet.bridge.bridge-nf-call-iptables  = 1\nnet.bridge.bridge-nf-call-ip6tables = 1\nnet.ipv4.ip_forward                 = 1\nEOF\n\nsudo sysctl --system</code></pre>\n      </div>\n    </div>\n<h2 id=\"container-runtime-installation\" class=\"mobile-header\">Container Runtime Installation</h2>\n<h3 id=\"containerd-recommended\" class=\"mobile-header\">containerd (Recommended)</h3>\n<p class=\"mobile-paragraph\">#### Ubuntu/Debian</p>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Update package list\nsudo apt-get update\n\n# Install dependencies\nsudo apt-get install -y ca-certificates curl gnupg lsb-release\n\n# Add Docker repository for containerd\nsudo mkdir -m 0755 -p /etc/apt/keyrings\ncurl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmor -o /etc/apt/keyrings/docker.gpg\n\necho &quot;deb [arch=$(dpkg --print-architecture) signed-by=/etc/apt/keyrings/docker.gpg] https://download.docker.com/linux/ubuntu $(lsb_release -cs) stable&quot; | sudo tee /etc/apt/sources.list.d/docker.list &gt; /dev/null\n\n# Install containerd\nsudo apt-get update\nsudo apt-get install -y containerd.io\n\n# Configure containerd\nsudo mkdir -p /etc/containerd\ncontainerd config default | sudo tee /etc/containerd/config.toml\n\n# Enable SystemdCgroup driver\nsudo sed -i &#039;s/SystemdCgroup = false/SystemdCgroup = true/&#039; /etc/containerd/config.toml\n\n# Restart and enable containerd\nsudo systemctl restart containerd\nsudo systemctl enable containerd</code></pre>\n      </div>\n    </div>\n<p class=\"mobile-paragraph\">#### RHEL/CentOS/Rocky Linux/AlmaLinux</p>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Install prerequisites\nsudo yum install -y yum-utils device-mapper-persistent-data lvm2\n\n# Add Docker repository\nsudo yum-config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo\n\n# Install containerd\nsudo yum install -y containerd.io\n\n# Configure containerd\nsudo mkdir -p /etc/containerd\ncontainerd config default | sudo tee /etc/containerd/config.toml\n\n# Enable SystemdCgroup driver\nsudo sed -i &#039;s/SystemdCgroup = false/SystemdCgroup = true/&#039; /etc/containerd/config.toml\n\n# Restart and enable containerd\nsudo systemctl restart containerd\nsudo systemctl enable containerd</code></pre>\n      </div>\n    </div>\n<p class=\"mobile-paragraph\">#### Fedora</p>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Install containerd\nsudo dnf install -y containerd\n\n# Configure containerd\nsudo mkdir -p /etc/containerd\ncontainerd config default | sudo tee /etc/containerd/config.toml\nsudo sed -i &#039;s/SystemdCgroup = false/SystemdCgroup = true/&#039; /etc/containerd/config.toml\n\n# Restart and enable containerd\nsudo systemctl restart containerd\nsudo systemctl enable containerd</code></pre>\n      </div>\n    </div>\n<p class=\"mobile-paragraph\">#### Arch Linux</p>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Install containerd\nsudo pacman -Syu containerd\n\n# Configure containerd\nsudo mkdir -p /etc/containerd\ncontainerd config default | sudo tee /etc/containerd/config.toml\nsudo sed -i &#039;s/SystemdCgroup = false/SystemdCgroup = true/&#039; /etc/containerd/config.toml\n\n# Enable and start containerd\nsudo systemctl enable --now containerd</code></pre>\n      </div>\n    </div>\n<h2 id=\"kubernetes-installation\" class=\"mobile-header\">Kubernetes Installation</h2>\n<h3 id=\"kubeadm-kubelet-kubectl-installation\" class=\"mobile-header\">kubeadm, kubelet, kubectl Installation</h3>\n<p class=\"mobile-paragraph\">#### Ubuntu/Debian</p>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Update package index and install packages needed for apt to use HTTPS\nsudo apt-get update\nsudo apt-get install -y apt-transport-https ca-certificates curl gpg\n\n# Download and add the Kubernetes signing key\ncurl -fsSL https://pkgs.k8s.io/core:/stable:/v1.29/deb/Release.key | sudo gpg --dearmor -o /etc/apt/keyrings/kubernetes-apt-keyring.gpg\n\n# Add Kubernetes repository\necho &#039;deb [signed-by=/etc/apt/keyrings/kubernetes-apt-keyring.gpg] https://pkgs.k8s.io/core:/stable:/v1.29/deb/ /&#039; | sudo tee /etc/apt/sources.list.d/kubernetes.list\n\n# Update package index and install Kubernetes components\nsudo apt-get update\nsudo apt-get install -y kubelet kubeadm kubectl\n\n# Hold packages to prevent automatic updates\nsudo apt-mark hold kubelet kubeadm kubectl\n\n# Enable kubelet\nsudo systemctl enable --now kubelet</code></pre>\n      </div>\n    </div>\n<p class=\"mobile-paragraph\">#### RHEL/CentOS/Rocky Linux/AlmaLinux/Fedora</p>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Create Kubernetes repository\ncat &lt;&lt;EOF | sudo tee /etc/yum.repos.d/kubernetes.repo\n[kubernetes]\nname=Kubernetes\nbaseurl=https://pkgs.k8s.io/core:/stable:/v1.29/rpm/\nenabled=1\ngpgcheck=1\ngpgkey=https://pkgs.k8s.io/core:/stable:/v1.29/rpm/repodata/repomd.xml.key\nexclude=kubelet kubeadm kubectl cri-tools kubernetes-cni\nEOF\n\n# Set SELinux to permissive mode (required for cluster communication)\nsudo setenforce 0\nsudo sed -i &#039;s/^SELINUX=enforcing$/SELINUX=permissive/&#039; /etc/selinux/config\n\n# Install Kubernetes components\nsudo yum install -y kubelet kubeadm kubectl --disableexcludes=kubernetes\n\n# Enable kubelet\nsudo systemctl enable --now kubelet</code></pre>\n      </div>\n    </div>\n<p class=\"mobile-paragraph\">#### Arch Linux</p>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Install from AUR (using yay)\nyay -S kubeadm-bin kubelet-bin kubectl-bin\n\n# Or build from source\ngit clone https://aur.archlinux.org/kubectl-bin.git\ncd kubectl-bin &amp;&amp; makepkg -si\n\n# Enable kubelet\nsudo systemctl enable --now kubelet</code></pre>\n      </div>\n    </div>\n<p class=\"mobile-paragraph\">#### openSUSE/SLES</p>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># openSUSE Leap/Tumbleweed\nsudo zypper refresh\n\n# Add Kubernetes repository\nsudo rpm --import https://pkgs.k8s.io/core:/stable:/v1.29/rpm/repodata/repomd.xml.key\necho &#039;baseurl=https://pkgs.k8s.io/core:/stable:/v1.29/rpm/&#039; | sudo tee /etc/zypp/repos.d/kubernetes.repo\n\n# Install Kubernetes components\nsudo zypper install -y kubelet kubeadm kubectl\n\n# SLES 15 (requires additional modules)\nsudo SUSEConnect -p sle-module-containers/15.5/x86_64\nsudo zypper install -y kubelet kubeadm kubectl\n\n# Enable kubelet\nsudo systemctl enable --now kubelet</code></pre>\n      </div>\n    </div>\n<p class=\"mobile-paragraph\">#### Alpine Linux</p>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Install containerd first\napk add --no-cache containerd\n\n# Add community repository for Kubernetes\necho &quot;http://dl-cdn.alpinelinux.org/alpine/edge/community&quot; &gt;&gt; /etc/apk/repositories\napk update\n\n# Install Kubernetes components (if available)\napk add --no-cache kubectl\n\n# Or install from binary\nKUBE_VERSION=&quot;v1.29.0&quot;\ncurl -LO &quot;https://dl.k8s.io/release/${KUBE_VERSION}/bin/linux/amd64/kubectl&quot;\ncurl -LO &quot;https://dl.k8s.io/release/${KUBE_VERSION}/bin/linux/amd64/kubeadm&quot;\ncurl -LO &quot;https://dl.k8s.io/release/${KUBE_VERSION}/bin/linux/amd64/kubelet&quot;\n\nchmod +x kubectl kubeadm kubelet\nsudo mv kubectl kubeadm kubelet /usr/local/bin/\n\n# Configure OpenRC service\nsudo tee /etc/init.d/kubelet &gt; /dev/null &lt;&lt;&#039;EOF&#039;\n#!/sbin/openrc-run\nname=&quot;kubelet&quot;\ncommand=&quot;/usr/local/bin/kubelet&quot;\ncommand_args=&quot;--config=/var/lib/kubelet/config.yaml --kubeconfig=/etc/kubernetes/kubelet.conf&quot;\npidfile=&quot;/var/run/kubelet.pid&quot;\ncommand_background=&quot;yes&quot;\ndepend() {\n    need net\n    after containerd\n}\nEOF\n\nsudo chmod +x /etc/init.d/kubelet\nsudo rc-update add kubelet default</code></pre>\n      </div>\n    </div>\n<p class=\"mobile-paragraph\">#### macOS (Development Only)</p>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Install Docker Desktop\n# Download from: https://www.docker.com/products/docker-desktop\n\n# Enable Kubernetes in Docker Desktop\n# Docker Desktop â†’ Preferences â†’ Kubernetes â†’ Enable Kubernetes\n\n# Install kubectl via Homebrew\nbrew install kubectl\n\n# Alternative: Install kubectl directly\ncurl -LO &quot;https://dl.k8s.io/release/$(curl -L -s https://dl.k8s.io/release/stable.txt)/bin/darwin/amd64/kubectl&quot;\nchmod +x kubectl\nsudo mv kubectl /usr/local/bin/\n\n# Verify installation\nkubectl version --client\nkubectl cluster-info\n\n# Configure kubectl context\nkubectl config use-context docker-desktop</code></pre>\n      </div>\n    </div>\n<p class=\"mobile-paragraph\">#### FreeBSD</p>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Install from ports\ncd /usr/ports/sysutils/kubectl &amp;&amp; make install clean\n\n# Or install from packages\npkg install kubectl\n\n# Note: Full Kubernetes cluster on FreeBSD requires manual compilation\n# For development, use kubectl to connect to remote clusters\n\n# Install container runtime (if needed)\npkg install containerd\n\n# Configure kubectl for remote cluster access\nmkdir -p ~/.kube\n# Copy kubeconfig from Linux cluster to ~/.kube/config</code></pre>\n      </div>\n    </div>\n<p class=\"mobile-paragraph\">#### Windows (Development Only)</p>\n<div class=\"mobile-code-block\" data-language=\"powershell\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">powershell</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-powershell\"># Method 1: Install Docker Desktop\n# Download from: https://www.docker.com/products/docker-desktop\n# Enable Kubernetes in Docker Desktop settings\n\n# Method 2: Install using Chocolatey\nchoco install kubernetes-cli\n\n# Method 3: Install using Scoop\nscoop install kubectl\n\n# Method 4: Manual installation\n# Download from https://dl.k8s.io/release/v1.29.0/bin/windows/amd64/kubectl.exe\n# Add to PATH environment variable\n\n# Enable Kubernetes in Docker Desktop\n# Docker Desktop â†’ Settings â†’ Kubernetes â†’ Enable Kubernetes\n\n# Verify installation\nkubectl version --client\nkubectl cluster-info\n\n# Configure PowerShell completion (optional)\nkubectl completion powershell | Out-String | Invoke-Expression</code></pre>\n      </div>\n    </div>\n<h2 id=\"initial-configuration\" class=\"mobile-header\">Initial Configuration</h2>\n<h3 id=\"first-run-setup\" class=\"mobile-header\">First-Run Setup</h3>\n<p class=\"mobile-paragraph\">1. <strong>Verify system requirements</strong>:</p>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Check if swap is disabled\nfree -h\nswapon --show\n\n# Verify required ports are available\nsudo ss -tlnp | grep -E &#039;:(6443|2379|2380|10250|10259|10257)&#039;\n\n# Check container runtime\nsudo systemctl status containerd</code></pre>\n      </div>\n    </div>\n<p class=\"mobile-paragraph\">2. <strong>Configure container runtime</strong>:</p>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Default containerd configuration directory\nsudo mkdir -p /etc/containerd\n\n# Generate default configuration\ncontainerd config default | sudo tee /etc/containerd/config.toml\n\n# Enable SystemdCgroup for better resource management\nsudo sed -i &#039;s/SystemdCgroup = false/SystemdCgroup = true/&#039; /etc/containerd/config.toml\n\n# Restart containerd with new configuration\nsudo systemctl restart containerd</code></pre>\n      </div>\n    </div>\n<p class=\"mobile-paragraph\">3. <strong>Initialize cluster networking</strong>:</p>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Load required kernel modules\nsudo modprobe overlay\nsudo modprobe br_netfilter\n\n# Configure sysctl for networking\necho &#039;net.bridge.bridge-nf-call-iptables=1&#039; | sudo tee -a /etc/sysctl.conf\necho &#039;net.ipv4.ip_forward=1&#039; | sudo tee -a /etc/sysctl.conf\nsudo sysctl -p</code></pre>\n      </div>\n    </div>\n<p class=\"mobile-paragraph\">4. <strong>Set up kubelet configuration</strong>:</p>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Create kubelet configuration directory\nsudo mkdir -p /var/lib/kubelet\n\n# Set kubelet to automatically restart\nsudo systemctl enable kubelet</code></pre>\n      </div>\n    </div>\n<h3 id=\"testing-initial-setup\" class=\"mobile-header\">Testing Initial Setup</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Verify container runtime is working\nsudo crictl version\nsudo crictl info\n\n# Check if kubelet is ready\nsudo systemctl status kubelet\n\n# Verify kernel modules are loaded\nlsmod | grep -E &#039;overlay|br_netfilter&#039;\n\n# Test container runtime with a simple container\nsudo crictl pull k8s.gcr.io/pause:3.9\nsudo crictl images</code></pre>\n      </div>\n    </div>\n<p class=\"mobile-paragraph\"><strong>WARNING:</strong> Ensure all prerequisite steps are completed before proceeding to cluster initialization!</p>\n<h2 id=\"service-management\" class=\"mobile-header\">Service Management</h2>\n<h3 id=\"systemd-rhel-debian-ubuntu-arch-opensuse\" class=\"mobile-header\">systemd (RHEL, Debian, Ubuntu, Arch, openSUSE)</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Enable Kubernetes services to start on boot\nsudo systemctl enable kubelet\nsudo systemctl enable containerd\n\n# Start services\nsudo systemctl start containerd\nsudo systemctl start kubelet\n\n# Stop services\nsudo systemctl stop kubelet\nsudo systemctl stop containerd\n\n# Restart services\nsudo systemctl restart containerd\nsudo systemctl restart kubelet\n\n# Check service status\nsudo systemctl status kubelet\nsudo systemctl status containerd\n\n# View service logs\nsudo journalctl -u kubelet -f\nsudo journalctl -u containerd -f\n\n# Reload systemd daemon after config changes\nsudo systemctl daemon-reload</code></pre>\n      </div>\n    </div>\n<h3 id=\"openrc-alpine-linux\" class=\"mobile-header\">OpenRC (Alpine Linux)</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Enable services to start on boot\nsudo rc-update add containerd default\nsudo rc-update add kubelet default\n\n# Start services\nsudo rc-service containerd start\nsudo rc-service kubelet start\n\n# Stop services\nsudo rc-service kubelet stop\nsudo rc-service containerd stop\n\n# Restart services\nsudo rc-service containerd restart\nsudo rc-service kubelet restart\n\n# Check service status\nsudo rc-service kubelet status\nsudo rc-service containerd status\n\n# View logs\nsudo tail -f /var/log/kubelet.log</code></pre>\n      </div>\n    </div>\n<h3 id=\"launchd-macos-with-docker-desktop\" class=\"mobile-header\">launchd (macOS with Docker Desktop)</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Docker Desktop manages Kubernetes services automatically\n# Use Docker Desktop interface to start/stop Kubernetes\n\n# Check Kubernetes status\nkubectl cluster-info\n\n# Restart Kubernetes through Docker Desktop\n# Docker Desktop â†’ Preferences â†’ Kubernetes â†’ Reset Kubernetes Cluster\n\n# View logs through Docker Desktop\n# Docker Desktop â†’ Troubleshoot â†’ Clean / Purge data</code></pre>\n      </div>\n    </div>\n<h3 id=\"windows-service-manager\" class=\"mobile-header\">Windows Service Manager</h3>\n<div class=\"mobile-code-block\" data-language=\"powershell\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">powershell</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-powershell\"># Docker Desktop manages Kubernetes services on Windows\n# Use Docker Desktop interface for management\n\n# Check Kubernetes status\nkubectl cluster-info\n\n# Restart Docker Desktop service\nRestart-Service com.docker.service\n\n# View Docker Desktop logs\nGet-EventLog -LogName Application -Source &quot;Docker Desktop&quot;</code></pre>\n      </div>\n    </div>\n<h2 id=\"cluster-initialization\" class=\"mobile-header\">Cluster Initialization</h2>\n<h3 id=\"control-plane-setup-master-node\" class=\"mobile-header\">Control Plane Setup (Master Node)</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Initialize cluster with security best practices\nsudo kubeadm init \\\n  --pod-network-cidr=10.244.0.0/16 \\\n  --service-cidr=10.96.0.0/12 \\\n  --apiserver-advertise-address=$(hostname -I | awk &#039;{print $1}&#039;) \\\n  --node-name=$(hostname) \\\n  --ignore-preflight-errors=NumCPU\n\n# Configure kubectl for regular user\nmkdir -p $HOME/.kube\nsudo cp -i /etc/kubernetes/admin.conf $HOME/.kube/config\nsudo chown $(id -u):$(id -g) $HOME/.kube/config\n\n# Alternative: Root user configuration\nexport KUBECONFIG=/etc/kubernetes/admin.conf\necho &#039;export KUBECONFIG=/etc/kubernetes/admin.conf&#039; &gt;&gt; ~/.bashrc\n\n# Verify control plane is running\nkubectl cluster-info\nkubectl get nodes\nkubectl get pods --all-namespaces</code></pre>\n      </div>\n    </div>\n<h3 id=\"network-plugin-installation\" class=\"mobile-header\">Network Plugin Installation</h3>\n<p class=\"mobile-paragraph\">#### Flannel (Simple, recommended for beginners)</p>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Install Flannel CNI\nkubectl apply -f https://github.com/flannel-io/flannel/releases/latest/download/kube-flannel.yml\n\n# Verify Flannel pods are running\nkubectl get pods -n kube-flannel</code></pre>\n      </div>\n    </div>\n<p class=\"mobile-paragraph\">#### Calico (Advanced networking and network policies)</p>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Install Calico CNI\nkubectl create -f https://raw.githubusercontent.com/projectcalico/calico/v3.26.1/manifests/tigera-operator.yaml\n\n# Download and apply Calico custom resources\ncurl https://raw.githubusercontent.com/projectcalico/calico/v3.26.1/manifests/custom-resources.yaml -O\nkubectl create -f custom-resources.yaml\n\n# Verify Calico is running\nkubectl get pods -n calico-system</code></pre>\n      </div>\n    </div>\n<p class=\"mobile-paragraph\">#### Cilium (eBPF-based networking)</p>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Install Cilium CLI\nCILIUM_CLI_VERSION=$(curl -s https://raw.githubusercontent.com/cilium/cilium-cli/main/stable.txt)\nCLI_ARCH=amd64\nif [ &quot;$(uname -m)&quot; = &quot;aarch64&quot; ]; then CLI_ARCH=arm64; fi\ncurl -L --fail --remote-name-all https://github.com/cilium/cilium-cli/releases/download/${CILIUM_CLI_VERSION}/cilium-linux-${CLI_ARCH}.tar.gz{,.sha256sum}\nsha256sum --check cilium-linux-${CLI_ARCH}.tar.gz.sha256sum\nsudo tar xzvfC cilium-linux-${CLI_ARCH}.tar.gz /usr/local/bin\nrm cilium-linux-${CLI_ARCH}.tar.gz{,.sha256sum}\n\n# Install Cilium\ncilium install\n\n# Verify installation\ncilium status --wait</code></pre>\n      </div>\n    </div>\n<h3 id=\"worker-node-setup\" class=\"mobile-header\">Worker Node Setup</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># On worker nodes, use the join command from control plane initialization\n# Example (replace with your actual token and hash):\nsudo kubeadm join 192.168.1.100:6443 \\\n  --token abcdef.0123456789abcdef \\\n  --discovery-token-ca-cert-hash sha256:1234567890abcdef...\n\n# If you need to get the join command again:\n# On control plane:\nkubeadm token create --print-join-command\n\n# Verify nodes joined successfully\nkubectl get nodes -o wide</code></pre>\n      </div>\n    </div>\n<h2 id=\"security-hardening-2024-best-practices\" class=\"mobile-header\">Security Hardening (2024 Best Practices)</h2>\n<h3 id=\"rbac-configuration\" class=\"mobile-header\">RBAC Configuration</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Create service account with limited permissions\nkubectl create serviceaccount developer-sa -n default\n\n# Create role with specific permissions\ncat &lt;&lt;EOF | kubectl apply -f -\napiVersion: rbac.authorization.k8s.io/v1\nkind: Role\nmetadata:\n  namespace: default\n  name: developer-role\nrules:\n- apiGroups: [&quot;&quot;]\n  resources: [&quot;pods&quot;, &quot;services&quot;, &quot;configmaps&quot;]\n  verbs: [&quot;get&quot;, &quot;list&quot;, &quot;watch&quot;, &quot;create&quot;, &quot;update&quot;, &quot;patch&quot;, &quot;delete&quot;]\n- apiGroups: [&quot;apps&quot;]\n  resources: [&quot;deployments&quot;, &quot;replicasets&quot;]\n  verbs: [&quot;get&quot;, &quot;list&quot;, &quot;watch&quot;, &quot;create&quot;, &quot;update&quot;, &quot;patch&quot;, &quot;delete&quot;]\n- apiGroups: [&quot;&quot;]\n  resources: [&quot;pods/log&quot;]\n  verbs: [&quot;get&quot;, &quot;list&quot;]\nEOF\n\n# Create role binding\ncat &lt;&lt;EOF | kubectl apply -f -\napiVersion: rbac.authorization.k8s.io/v1\nkind: RoleBinding\nmetadata:\n  name: developer-binding\n  namespace: default\nsubjects:\n- kind: ServiceAccount\n  name: developer-sa\n  namespace: default\nroleRef:\n  kind: Role\n  name: developer-role\n  apiGroup: rbac.authorization.k8s.io\nEOF\n\n# Test RBAC configuration\nkubectl auth can-i create deployments --as=system:serviceaccount:default:developer-sa</code></pre>\n      </div>\n    </div>\n<h3 id=\"pod-security-standards\" class=\"mobile-header\">Pod Security Standards</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Enable Pod Security Standards (baseline level)\ncat &lt;&lt;EOF | kubectl apply -f -\napiVersion: v1\nkind: Namespace\nmetadata:\n  name: secure-namespace\n  labels:\n    pod-security.kubernetes.io/enforce: baseline\n    pod-security.kubernetes.io/audit: baseline\n    pod-security.kubernetes.io/warn: baseline\nEOF\n\n# For restricted security (recommended for production)\ncat &lt;&lt;EOF | kubectl apply -f -\napiVersion: v1\nkind: Namespace\nmetadata:\n  name: restricted-namespace\n  labels:\n    pod-security.kubernetes.io/enforce: restricted\n    pod-security.kubernetes.io/audit: restricted\n    pod-security.kubernetes.io/warn: restricted\nEOF\n\n# Example secure pod configuration\ncat &lt;&lt;EOF | kubectl apply -f -\napiVersion: v1\nkind: Pod\nmetadata:\n  name: secure-pod\n  namespace: restricted-namespace\nspec:\n  securityContext:\n    runAsNonRoot: true\n    runAsUser: 1000\n    runAsGroup: 3000\n    fsGroup: 2000\n    seccompProfile:\n      type: RuntimeDefault\n  containers:\n  - name: app\n    image: nginx:latest\n    securityContext:\n      allowPrivilegeEscalation: false\n      readOnlyRootFilesystem: true\n      capabilities:\n        drop:\n        - ALL\n    ports:\n    - containerPort: 80\n    volumeMounts:\n    - name: tmp-volume\n      mountPath: /tmp\n    - name: cache-volume\n      mountPath: /var/cache/nginx\n  volumes:\n  - name: tmp-volume\n    emptyDir: {}\n  - name: cache-volume\n    emptyDir: {}\nEOF</code></pre>\n      </div>\n    </div>\n<h3 id=\"network-policies\" class=\"mobile-header\">Network Policies</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Default deny all network policy\ncat &lt;&lt;EOF | kubectl apply -f -\napiVersion: networking.k8s.io/v1\nkind: NetworkPolicy\nmetadata:\n  name: default-deny-all\n  namespace: default\nspec:\n  podSelector: {}\n  policyTypes:\n  - Ingress\n  - Egress\nEOF\n\n# Allow specific communication\ncat &lt;&lt;EOF | kubectl apply -f -\napiVersion: networking.k8s.io/v1\nkind: NetworkPolicy\nmetadata:\n  name: allow-nginx-ingress\n  namespace: default\nspec:\n  podSelector:\n    matchLabels:\n      app: nginx\n  policyTypes:\n  - Ingress\n  ingress:\n  - from:\n    - namespaceSelector:\n        matchLabels:\n          name: ingress-nginx\n    ports:\n    - protocol: TCP\n      port: 80\nEOF\n\n# Allow egress for DNS\ncat &lt;&lt;EOF | kubectl apply -f -\napiVersion: networking.k8s.io/v1\nkind: NetworkPolicy\nmetadata:\n  name: allow-dns-egress\n  namespace: default\nspec:\n  podSelector: {}\n  policyTypes:\n  - Egress\n  egress:\n  - to: []\n    ports:\n    - protocol: UDP\n      port: 53\nEOF</code></pre>\n      </div>\n    </div>\n<h3 id=\"etcd-security\" class=\"mobile-header\">etcd Security</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Check etcd encryption at rest\nkubectl get secrets --all-namespaces -o json | kubectl replace -f-\n\n# Create encryption configuration\ncat &lt;&lt;EOF | sudo tee /etc/kubernetes/enc.yaml\napiVersion: apiserver.config.k8s.io/v1\nkind: EncryptionConfiguration\nresources:\n- resources:\n  - secrets\n  - configmaps\n  - pandas.awesome.bears.example\n  providers:\n  - aescbc:\n      keys:\n      - name: key1\n        secret: $(head -c 32 /dev/urandom | base64)\n  - identity: {}\nEOF\n\n# Update kube-apiserver configuration\nsudo sed -i &#039;/--encryption-provider-config=/d&#039; /etc/kubernetes/manifests/kube-apiserver.yaml\nsudo sed -i &#039;/- kube-apiserver/a\\    - --encryption-provider-config=/etc/kubernetes/enc.yaml&#039; /etc/kubernetes/manifests/kube-apiserver.yaml\n\n# Mount encryption config in kube-apiserver\nsudo sed -i &#039;/volumeMounts:/a\\    - mountPath: /etc/kubernetes/enc.yaml\\n      name: encryption-config\\n      readOnly: true&#039; /etc/kubernetes/manifests/kube-apiserver.yaml\nsudo sed -i &#039;/volumes:/a\\  - hostPath:\\n      path: /etc/kubernetes/enc.yaml\\n      type: FileOrCreate\\n    name: encryption-config&#039; /etc/kubernetes/manifests/kube-apiserver.yaml</code></pre>\n      </div>\n    </div>\n<h2 id=\"alternative-installation-methods\" class=\"mobile-header\">Alternative Installation Methods</h2>\n<h3 id=\"k3s-lightweight-kubernetes\" class=\"mobile-header\">k3s (Lightweight Kubernetes)</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Install k3s on control plane\ncurl -sfL https://get.k3s.io | sh -s - --write-kubeconfig-mode 644\n\n# Get node token for workers\nsudo cat /var/lib/rancher/k3s/server/node-token\n\n# Install on worker nodes\ncurl -sfL https://get.k3s.io | K3S_URL=https://myserver:6443 K3S_TOKEN=mynodetoken sh -\n\n# Configure kubectl\nmkdir -p ~/.kube\nsudo cp /etc/rancher/k3s/k3s.yaml ~/.kube/config\nsudo chown $(id -u):$(id -g) ~/.kube/config\nexport KUBECONFIG=~/.kube/config\n\n# Verify cluster\nkubectl get nodes</code></pre>\n      </div>\n    </div>\n<h3 id=\"k0s-zero-deps-kubernetes\" class=\"mobile-header\">k0s (Zero-deps Kubernetes)</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Download k0s\ncurl -sSLf https://get.k0s.sh | sudo sh\n\n# Initialize controller\nsudo k0s install controller --single\n\n# Start k0s\nsudo systemctl start k0scontroller\n\n# Generate worker join token\nsudo k0s token create --role=worker\n\n# On worker nodes:\nsudo k0s install worker --token-file /path/to/token/file\nsudo systemctl start k0sworker\n\n# Configure kubectl\nmkdir -p ~/.kube\nsudo k0s kubeconfig admin &gt; ~/.kube/config</code></pre>\n      </div>\n    </div>\n<h3 id=\"microk8s-ubuntusnap\" class=\"mobile-header\">MicroK8s (Ubuntu/Snap)</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Install MicroK8s\nsudo snap install microk8s --classic\n\n# Add user to microk8s group\nsudo usermod -a -G microk8s $USER\nsudo chown -f -R $USER ~/.kube\nnewgrp microk8s\n\n# Enable essential addons\nmicrok8s enable dns dashboard storage\n\n# Configure kubectl alias\necho &#039;alias kubectl=&quot;microk8s kubectl&quot;&#039; &gt;&gt; ~/.bashrc\nsource ~/.bashrc\n\n# Get cluster info\nmicrok8s kubectl cluster-info</code></pre>\n      </div>\n    </div>\n<h3 id=\"minikube-development\" class=\"mobile-header\">Minikube (Development)</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Install minikube\ncurl -LO https://storage.googleapis.com/minikube/releases/latest/minikube-linux-amd64\nsudo install minikube-linux-amd64 /usr/local/bin/minikube\n\n# Start cluster with specific configuration\nminikube start \\\n  --driver=containerd \\\n  --cpus=4 \\\n  --memory=8g \\\n  --disk-size=50g \\\n  --kubernetes-version=v1.29.0\n\n# Enable addons\nminikube addons enable dashboard\nminikube addons enable metrics-server\nminikube addons enable ingress\nminikube addons enable registry\n\n# Configure kubectl context\nkubectl config use-context minikube\n\n# Access dashboard\nminikube dashboard</code></pre>\n      </div>\n    </div>\n<h2 id=\"essential-add-ons-installation\" class=\"mobile-header\">Essential Add-ons Installation</h2>\n<h3 id=\"metrics-server\" class=\"mobile-header\">Metrics Server</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Install metrics-server for resource monitoring\nkubectl apply -f https://github.com/kubernetes-sigs/metrics-server/releases/latest/download/components.yaml\n\n# For development clusters, may need to add --kubelet-insecure-tls\nkubectl patch deployment metrics-server -n kube-system --type=&#039;json&#039; -p=&#039;[{&quot;op&quot;: &quot;add&quot;, &quot;path&quot;: &quot;/spec/template/spec/containers/0/args/-&quot;, &quot;value&quot;: &quot;--kubelet-insecure-tls&quot;}]&#039;\n\n# Verify metrics server\nkubectl top nodes\nkubectl top pods --all-namespaces</code></pre>\n      </div>\n    </div>\n<h3 id=\"kubernetes-dashboard\" class=\"mobile-header\">Kubernetes Dashboard</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Install dashboard\nkubectl apply -f https://raw.githubusercontent.com/kubernetes/dashboard/v2.7.0/aio/deploy/recommended.yaml\n\n# Create admin service account\ncat &lt;&lt;EOF | kubectl apply -f -\napiVersion: v1\nkind: ServiceAccount\nmetadata:\n  name: admin-user\n  namespace: kubernetes-dashboard\n---\napiVersion: rbac.authorization.k8s.io/v1\nkind: ClusterRoleBinding\nmetadata:\n  name: admin-user\nroleRef:\n  apiGroup: rbac.authorization.k8s.io\n  kind: ClusterRole\n  name: cluster-admin\nsubjects:\n- kind: ServiceAccount\n  name: admin-user\n  namespace: kubernetes-dashboard\nEOF\n\n# Get access token\nkubectl -n kubernetes-dashboard create token admin-user\n\n# Access dashboard\nkubectl proxy &amp;\n# Visit: http://localhost:8001/api/v1/namespaces/kubernetes-dashboard/services/https:kubernetes-dashboard:/proxy/</code></pre>\n      </div>\n    </div>\n<h3 id=\"ingress-controller-nginx\" class=\"mobile-header\">Ingress Controller (NGINX)</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Install NGINX Ingress Controller\nkubectl apply -f https://raw.githubusercontent.com/kubernetes/ingress-nginx/controller-v1.8.2/deploy/static/provider/cloud/deploy.yaml\n\n# For bare metal installations\nkubectl apply -f https://raw.githubusercontent.com/kubernetes/ingress-nginx/controller-v1.8.2/deploy/static/provider/baremetal/deploy.yaml\n\n# Verify installation\nkubectl get pods -n ingress-nginx\nkubectl get svc -n ingress-nginx\n\n# Create sample ingress\ncat &lt;&lt;EOF | kubectl apply -f -\napiVersion: networking.k8s.io/v1\nkind: Ingress\nmetadata:\n  name: example-ingress\n  annotations:\n    nginx.ingress.kubernetes.io/rewrite-target: /\n    nginx.ingress.kubernetes.io/ssl-redirect: &quot;true&quot;\nspec:\n  ingressClassName: nginx\n  tls:\n  - hosts:\n    - example.com\n    secretName: example-tls\n  rules:\n  - host: example.com\n    http:\n      paths:\n      - path: /\n        pathType: Prefix\n        backend:\n          service:\n            name: web-service\n            port:\n              number: 80\nEOF</code></pre>\n      </div>\n    </div>\n<h2 id=\"reverse-proxy-setup\" class=\"mobile-header\">Reverse Proxy Setup</h2>\n<h3 id=\"nginx-ingress-controller-configuration\" class=\"mobile-header\">NGINX Ingress Controller Configuration</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Install NGINX Ingress Controller with custom configuration\ncat &lt;&lt;EOF | kubectl apply -f -\napiVersion: v1\nkind: Namespace\nmetadata:\n  name: ingress-nginx\n---\napiVersion: helm.cattle.io/v1\nkind: HelmChart\nmetadata:\n  name: ingress-nginx\n  namespace: ingress-nginx\nspec:\n  chart: ingress-nginx\n  repo: https://kubernetes.github.io/ingress-nginx\n  targetNamespace: ingress-nginx\n  valuesContent: |-\n    controller:\n      replicaCount: 2\n      service:\n        type: LoadBalancer\n        externalTrafficPolicy: Local\n      config:\n        ssl-redirect: &quot;true&quot;\n        force-ssl-redirect: &quot;true&quot;\n        ssl-protocols: &quot;TLSv1.2 TLSv1.3&quot;\n        ssl-ciphers: &quot;ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384&quot;\n        client-body-buffer-size: &quot;64k&quot;\n        client-body-timeout: &quot;60&quot;\n        client-header-timeout: &quot;60&quot;\n        large-client-header-buffers: &quot;4 64k&quot;\n        proxy-body-size: &quot;50m&quot;\n        server-name-hash-bucket-size: &quot;128&quot;\n      metrics:\n        enabled: true\n        serviceMonitor:\n          enabled: true\nEOF</code></pre>\n      </div>\n    </div>\n<h3 id=\"traefik-ingress-controller\" class=\"mobile-header\">Traefik Ingress Controller</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Install Traefik with custom configuration\ncat &lt;&lt;EOF | kubectl apply -f -\napiVersion: v1\nkind: Namespace\nmetadata:\n  name: traefik-system\n---\napiVersion: argoproj.io/v1alpha1\nkind: Application\nmetadata:\n  name: traefik\n  namespace: argocd\nspec:\n  project: default\n  source:\n    chart: traefik\n    repoURL: https://traefik.github.io/charts\n    targetRevision: 21.1.0\n    helm:\n      values: |\n        deployment:\n          replicas: 2\n        service:\n          type: LoadBalancer\n        ingressRoute:\n          dashboard:\n            enabled: true\n        logs:\n          general:\n            level: INFO\n          access:\n            enabled: true\n        metrics:\n          prometheus:\n            enabled: true\n        certificatesResolvers:\n          letsencrypt:\n            acme:\n              email: admin@example.com\n              storage: /data/acme.json\n              httpChallenge:\n                entryPoint: web\n  destination:\n    server: https://kubernetes.default.svc\n    namespace: traefik-system\nEOF</code></pre>\n      </div>\n    </div>\n<h3 id=\"haproxy-load-balancer-for-api-server\" class=\"mobile-header\">HAProxy Load Balancer for API Server</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Install HAProxy for external load balancing\ncat &lt;&lt;EOF | kubectl apply -f -\napiVersion: v1\nkind: ConfigMap\nmetadata:\n  name: haproxy-config\n  namespace: kube-system\ndata:\n  haproxy.cfg: |\n    global\n        log stdout local0\n        daemon\n        \n    defaults\n        mode tcp\n        log global\n        option tcplog\n        timeout connect 5000ms\n        timeout client 50000ms\n        timeout server 50000ms\n        \n    frontend k8s-api-frontend\n        bind *:6443\n        mode tcp\n        default_backend k8s-api-backend\n        \n    backend k8s-api-backend\n        mode tcp\n        balance roundrobin\n        option tcp-check\n        server master1 10.0.1.10:6443 check\n        server master2 10.0.1.11:6443 check\n        server master3 10.0.1.12:6443 check\n---\napiVersion: apps/v1\nkind: DaemonSet\nmetadata:\n  name: haproxy-lb\n  namespace: kube-system\nspec:\n  selector:\n    matchLabels:\n      app: haproxy-lb\n  template:\n    metadata:\n      labels:\n        app: haproxy-lb\n    spec:\n      hostNetwork: true\n      containers:\n      - name: haproxy\n        image: haproxy:2.8-alpine\n        ports:\n        - containerPort: 6443\n          hostPort: 6443\n        volumeMounts:\n        - name: haproxy-config\n          mountPath: /usr/local/etc/haproxy\n      volumes:\n      - name: haproxy-config\n        configMap:\n          name: haproxy-config\nEOF</code></pre>\n      </div>\n    </div>\n<h2 id=\"database-setup\" class=\"mobile-header\">Database Setup</h2>\n<h3 id=\"postgresql-statefulset-with-ha\" class=\"mobile-header\">PostgreSQL StatefulSet with HA</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Deploy PostgreSQL cluster with replication\ncat &lt;&lt;EOF | kubectl apply -f -\napiVersion: v1\nkind: Namespace\nmetadata:\n  name: postgresql\n---\napiVersion: postgresql.cnpg.io/v1\nkind: Cluster\nmetadata:\n  name: postgresql-cluster\n  namespace: postgresql\nspec:\n  instances: 3\n  primaryUpdateStrategy: unsupervised\n  \n  postgresql:\n    parameters:\n      max_connections: &quot;200&quot;\n      shared_buffers: &quot;256MB&quot;\n      effective_cache_size: &quot;1GB&quot;\n      maintenance_work_mem: &quot;64MB&quot;\n      checkpoint_completion_target: &quot;0.9&quot;\n      wal_buffers: &quot;16MB&quot;\n      default_statistics_target: &quot;100&quot;\n      random_page_cost: &quot;1.1&quot;\n      effective_io_concurrency: &quot;200&quot;\n      \n  bootstrap:\n    initdb:\n      database: app_database\n      owner: app_user\n      secret:\n        name: postgresql-credentials\n        \n  storage:\n    storageClass: &quot;fast-ssd&quot;\n    size: &quot;100Gi&quot;\n    \n  monitoring:\n    enabled: true\n    \n  backup:\n    retentionPolicy: &quot;30d&quot;\n    barmanObjectStore:\n      destinationPath: s3://postgresql-backups/cluster1\n      s3Credentials:\n        accessKeyId:\n          name: backup-credentials\n          key: ACCESS_KEY_ID\n        secretAccessKey:\n          name: backup-credentials\n          key: SECRET_ACCESS_KEY\n      wal:\n        retention: &quot;5d&quot;\n      data:\n        retention: &quot;30d&quot;\n---\napiVersion: v1\nkind: Secret\nmetadata:\n  name: postgresql-credentials\n  namespace: postgresql\ntype: kubernetes.io/basic-auth\ndata:\n  username: $(echo -n &#039;app_user&#039; | base64)\n  password: $(echo -n &#039;secure_database_password_123!&#039; | base64)\nEOF</code></pre>\n      </div>\n    </div>\n<h3 id=\"mysql-cluster-with-percona-operator\" class=\"mobile-header\">MySQL Cluster with Percona Operator</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Deploy MySQL cluster using Percona Operator\ncat &lt;&lt;EOF | kubectl apply -f -\napiVersion: v1\nkind: Namespace\nmetadata:\n  name: mysql\n---\napiVersion: pxc.percona.com/v1-12-0\nkind: PerconaXtraDBCluster\nmetadata:\n  name: mysql-cluster\n  namespace: mysql\nspec:\n  crVersion: 1.12.0\n  allowUnsafeConfigurations: false\n  secretsName: mysql-secrets\n  vaultSecretName: &quot;&quot;\n  sslSecretName: &quot;&quot;\n  sslInternalSecretName: &quot;&quot;\n  logCollectorSecretName: &quot;&quot;\n  \n  pxc:\n    size: 3\n    image: percona/percona-xtradb-cluster:8.0.32-24.2\n    autoRecovery: true\n    configuration: |\n      [mysqld]\n      wsrep_provider_options=&quot;debug=1;gcache.size=1G;gcache.page_size=1G&quot;\n      wsrep_debug=1\n      wsrep_cluster_address=gcomm://\n      binlog_format=ROW\n      default_storage_engine=InnoDB\n      innodb_autoinc_lock_mode=2\n      innodb_locks_unsafe_for_binlog=1\n      max_connections=350\n      innodb_buffer_pool_size=512M\n      \n    resources:\n      requests:\n        memory: 1G\n        cpu: 600m\n      limits:\n        memory: 1G\n        cpu: &quot;1&quot;\n        \n    volumeSpec:\n      persistentVolumeClaim:\n        storageClassName: fast-ssd\n        accessModes: [ &quot;ReadWriteOnce&quot; ]\n        resources:\n          requests:\n            storage: 80Gi\n            \n    affinity:\n      antiAffinityTopologyKey: &quot;kubernetes.io/hostname&quot;\n      \n  haproxy:\n    enabled: true\n    size: 2\n    image: percona/percona-xtradb-cluster-operator:1.12.0-haproxy\n    \n    resources:\n      requests:\n        memory: 256M\n        cpu: 250m\n      limits:\n        memory: 256M\n        cpu: 500m\n        \n  proxysql:\n    enabled: false\n    \n  backup:\n    image: percona/percona-xtradb-cluster-operator:1.12.0-pxc8.0-backup\n    schedule:\n      - name: &quot;daily-backup&quot;\n        schedule: &quot;0 2 * * *&quot;\n        keep: 7\n        storageName: s3-backup-storage\n        \n---\napiVersion: v1\nkind: Secret\nmetadata:\n  name: mysql-secrets\n  namespace: mysql\ntype: Opaque\ndata:\n  root: $(echo -n &#039;secure_mysql_root_password!&#039; | base64)\n  xtrabackup: $(echo -n &#039;backup_password_123!&#039; | base64)\n  monitor: $(echo -n &#039;monitor_user_password!&#039; | base64)\n  clustercheck: $(echo -n &#039;cluster_check_password!&#039; | base64)\n  proxysql: $(echo -n &#039;proxysql_admin_password!&#039; | base64)\n  operator: $(echo -n &#039;operator_user_password!&#039; | base64)\nEOF</code></pre>\n      </div>\n    </div>\n<h3 id=\"redis-cluster-deployment\" class=\"mobile-header\">Redis Cluster Deployment</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Deploy Redis cluster with Redis Operator\ncat &lt;&lt;EOF | kubectl apply -f -\napiVersion: v1\nkind: Namespace\nmetadata:\n  name: redis\n---\napiVersion: redis.redis.opstreelabs.in/v1beta1\nkind: RedisCluster\nmetadata:\n  name: redis-cluster\n  namespace: redis\nspec:\n  clusterSize: 6\n  clusterVersion: v7\n  persistenceEnabled: true\n  redisSecret:\n    name: redis-secret\n    key: password\n  redisConfig:\n    redis-config: |\n      maxmemory 512mb\n      maxmemory-policy allkeys-lru\n      save 900 1\n      save 300 10\n      save 60 10000\n      tcp-keepalive 60\n      tcp-backlog 8192\n      timeout 300\n      \n  storage:\n    volumeClaimTemplate:\n      spec:\n        accessModes: [&quot;ReadWriteOnce&quot;]\n        storageClassName: fast-ssd\n        resources:\n          requests:\n            storage: 50Gi\n            \n  resources:\n    requests:\n      memory: 512Mi\n      cpu: 250m\n    limits:\n      memory: 512Mi\n      cpu: 500m\n      \n  nodeSelector:\n    node-type: &quot;redis-optimized&quot;\n    \n  podSecurityContext:\n    runAsUser: 1000\n    runAsGroup: 1000\n    fsGroup: 1000\n    \n  securityContext:\n    allowPrivilegeEscalation: false\n    readOnlyRootFilesystem: true\n    runAsNonRoot: true\n    capabilities:\n      drop:\n      - ALL\n---\napiVersion: v1\nkind: Secret\nmetadata:\n  name: redis-secret\n  namespace: redis\ntype: Opaque\ndata:\n  password: $(echo -n &#039;secure_redis_password_123!&#039; | base64)\nEOF</code></pre>\n      </div>\n    </div>\n<h2 id=\"storage-configuration\" class=\"mobile-header\">Storage Configuration</h2>\n<h3 id=\"persistent-volumes-and-storage-classes\" class=\"mobile-header\">Persistent Volumes and Storage Classes</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Create local storage class\ncat &lt;&lt;EOF | kubectl apply -f -\napiVersion: storage.k8s.io/v1\nkind: StorageClass\nmetadata:\n  name: local-storage\nprovisioner: kubernetes.io/no-provisioner\nvolumeBindingMode: WaitForFirstConsumer\nallowVolumeExpansion: true\nreclaimPolicy: Delete\nEOF\n\n# Create persistent volume\ncat &lt;&lt;EOF | kubectl apply -f -\napiVersion: v1\nkind: PersistentVolume\nmetadata:\n  name: local-pv-1\nspec:\n  capacity:\n    storage: 10Gi\n  volumeMode: Filesystem\n  accessModes:\n  - ReadWriteOnce\n  persistentVolumeReclaimPolicy: Delete\n  storageClassName: local-storage\n  local:\n    path: /mnt/disk1\n  nodeAffinity:\n    required:\n      nodeSelectorTerms:\n      - matchExpressions:\n        - key: kubernetes.io/hostname\n          operator: In\n          values:\n          - node-1\nEOF\n\n# Create persistent volume claim\ncat &lt;&lt;EOF | kubectl apply -f -\napiVersion: v1\nkind: PersistentVolumeClaim\nmetadata:\n  name: app-data-pvc\nspec:\n  accessModes:\n  - ReadWriteOnce\n  storageClassName: local-storage\n  resources:\n    requests:\n      storage: 5Gi\nEOF</code></pre>\n      </div>\n    </div>\n<h3 id=\"nfs-storage-shared-volumes\" class=\"mobile-header\">NFS Storage (Shared volumes)</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Install NFS client utilities (all nodes)\n# Ubuntu/Debian\nsudo apt install -y nfs-common\n\n# RHEL/CentOS\nsudo yum install -y nfs-utils\n\n# Create NFS storage class\ncat &lt;&lt;EOF | kubectl apply -f -\napiVersion: storage.k8s.io/v1\nkind: StorageClass\nmetadata:\n  name: nfs-storage\nprovisioner: example.com/nfs\nparameters:\n  server: 192.168.1.200\n  path: /exported/path\n  readOnly: &quot;false&quot;\nreclaimPolicy: Retain\nallowVolumeExpansion: true\nmountOptions:\n  - hard\n  - nfsvers=4.1\nEOF</code></pre>\n      </div>\n    </div>\n<h2 id=\"firewall-configuration-cross-platform\" class=\"mobile-header\">Firewall Configuration (Cross-Platform)</h2>\n<h3 id=\"required-ports\" class=\"mobile-header\">Required Ports</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Control plane ports\nsudo firewall-cmd --permanent --add-port=6443/tcp    # API server\nsudo firewall-cmd --permanent --add-port=2379-2380/tcp  # etcd\nsudo firewall-cmd --permanent --add-port=10250/tcp  # kubelet\nsudo firewall-cmd --permanent --add-port=10259/tcp  # kube-scheduler\nsudo firewall-cmd --permanent --add-port=10257/tcp  # kube-controller-manager\n\n# Worker node ports\nsudo firewall-cmd --permanent --add-port=10250/tcp  # kubelet\nsudo firewall-cmd --permanent --add-port=30000-32767/tcp  # NodePort services\n\n# CNI ports (Flannel)\nsudo firewall-cmd --permanent --add-port=8285/udp   # Flannel\nsudo firewall-cmd --permanent --add-port=8472/udp   # Flannel VXLAN\n\nsudo firewall-cmd --reload\n\n# UFW (Ubuntu/Debian)\nsudo ufw allow 6443/tcp\nsudo ufw allow 2379:2380/tcp\nsudo ufw allow 10250/tcp\nsudo ufw allow 10259/tcp\nsudo ufw allow 10257/tcp\nsudo ufw allow 30000:32767/tcp\nsudo ufw allow 8285/udp\nsudo ufw allow 8472/udp\n\n# iptables (manual configuration)\nsudo iptables -A INPUT -p tcp --dport 6443 -j ACCEPT\nsudo iptables -A INPUT -p tcp --dport 2379:2380 -j ACCEPT\nsudo iptables -A INPUT -p tcp --dport 10250 -j ACCEPT</code></pre>\n      </div>\n    </div>\n<h3 id=\"selinux-configuration-rhelcentos\" class=\"mobile-header\">SELinux Configuration (RHEL/CentOS)</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Configure SELinux for Kubernetes\nsudo setenforce 0\nsudo sed -i &#039;s/^SELINUX=enforcing$/SELINUX=permissive/&#039; /etc/selinux/config\n\n# Alternative: Configure SELinux policies instead of disabling\nsudo setsebool -P container_manage_cgroup true\nsudo setsebool -P container_use_cgroup true\n\n# Install SELinux policies for containers\nsudo yum install -y container-selinux\n\n# Check for denials\nsudo ausearch -m AVC,USER_AVC -ts recent</code></pre>\n      </div>\n    </div>\n<h2 id=\"high-availability-setup\" class=\"mobile-header\">High Availability Setup</h2>\n<h3 id=\"multi-master-cluster-with-kubeadm\" class=\"mobile-header\">Multi-Master Cluster with kubeadm</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># On first control plane node\nsudo kubeadm init \\\n  --control-plane-endpoint=&quot;k8s-cluster.example.com:6443&quot; \\\n  --upload-certs \\\n  --pod-network-cidr=10.244.0.0/16\n\n# Note the commands to join additional control plane nodes and workers\n\n# On additional control plane nodes:\nsudo kubeadm join k8s-cluster.example.com:6443 \\\n  --token abcdef.0123456789abcdef \\\n  --discovery-token-ca-cert-hash sha256:1234... \\\n  --control-plane \\\n  --certificate-key 1234...\n\n# Configure load balancer (HAProxy example)\ncat &lt;&lt;EOF | sudo tee /etc/haproxy/haproxy.cfg\nglobal\n    log stdout local0\n    chroot /var/lib/haproxy\n    stats socket /run/haproxy/admin.sock mode 660 level admin\n    stats timeout 30s\n    user haproxy\n    group haproxy\n    daemon\n\ndefaults\n    mode tcp\n    log global\n    option tcplog\n    option dontlognull\n    timeout connect 5000\n    timeout client 50000\n    timeout server 50000\n\nfrontend k8s-api\n    bind *:6443\n    mode tcp\n    default_backend k8s-api-backend\n\nbackend k8s-api-backend\n    mode tcp\n    balance roundrobin\n    server k8s-master-1 192.168.1.101:6443 check\n    server k8s-master-2 192.168.1.102:6443 check\n    server k8s-master-3 192.168.1.103:6443 check\nEOF\n\nsudo systemctl restart haproxy</code></pre>\n      </div>\n    </div>\n<h3 id=\"external-etcd-cluster\" class=\"mobile-header\">External etcd Cluster</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Install etcd on dedicated nodes\nETCD_VER=v3.5.9\ncurl -L https://github.com/etcd-io/etcd/releases/download/${ETCD_VER}/etcd-${ETCD_VER}-linux-amd64.tar.gz -o etcd-${ETCD_VER}-linux-amd64.tar.gz\ntar xzf etcd-${ETCD_VER}-linux-amd64.tar.gz\nsudo mv etcd-${ETCD_VER}-linux-amd64/{etcd,etcdctl} /usr/local/bin/\n\n# Create etcd configuration\nsudo tee /etc/systemd/system/etcd.service &gt; /dev/null &lt;&lt;EOF\n[Unit]\nDescription=etcd\nDocumentation=https://github.com/coreos\n\n[Service]\nType=notify\nUser=etcd\nExecStart=/usr/local/bin/etcd \\\\\n  --name=etcd-1 \\\\\n  --data-dir=/var/lib/etcd \\\\\n  --listen-client-urls=https://192.168.1.201:2379 \\\\\n  --advertise-client-urls=https://192.168.1.201:2379 \\\\\n  --listen-peer-urls=https://192.168.1.201:2380 \\\\\n  --initial-advertise-peer-urls=https://192.168.1.201:2380 \\\\\n  --initial-cluster=etcd-1=https://192.168.1.201:2380,etcd-2=https://192.168.1.202:2380,etcd-3=https://192.168.1.203:2380 \\\\\n  --initial-cluster-token=etcd-cluster-1 \\\\\n  --initial-cluster-state=new \\\\\n  --cert-file=/etc/etcd/pki/server.crt \\\\\n  --key-file=/etc/etcd/pki/server.key \\\\\n  --peer-cert-file=/etc/etcd/pki/peer.crt \\\\\n  --peer-key-file=/etc/etcd/pki/peer.key \\\\\n  --trusted-ca-file=/etc/etcd/pki/ca.crt \\\\\n  --peer-trusted-ca-file=/etc/etcd/pki/ca.crt \\\\\n  --peer-client-cert-auth \\\\\n  --client-cert-auth\nRestart=on-failure\nRestartSec=5\n\n[Install]\nWantedBy=multi-user.target\nEOF\n\n# Create etcd user and directories\nsudo useradd -r etcd\nsudo mkdir -p /var/lib/etcd /etc/etcd/pki\nsudo chown etcd:etcd /var/lib/etcd\nsudo systemctl enable --now etcd</code></pre>\n      </div>\n    </div>\n<h2 id=\"application-deployment-examples\" class=\"mobile-header\">Application Deployment Examples</h2>\n<h3 id=\"secure-application-deployment\" class=\"mobile-header\">Secure Application Deployment</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Create namespace with network policies\ncat &lt;&lt;EOF | kubectl apply -f -\napiVersion: v1\nkind: Namespace\nmetadata:\n  name: myapp\n  labels:\n    pod-security.kubernetes.io/enforce: restricted\n    pod-security.kubernetes.io/audit: restricted\n    pod-security.kubernetes.io/warn: restricted\n---\napiVersion: v1\nkind: ServiceAccount\nmetadata:\n  name: myapp-sa\n  namespace: myapp\n---\napiVersion: rbac.authorization.k8s.io/v1\nkind: Role\nmetadata:\n  namespace: myapp\n  name: myapp-role\nrules:\n- apiGroups: [&quot;&quot;]\n  resources: [&quot;configmaps&quot;, &quot;secrets&quot;]\n  verbs: [&quot;get&quot;, &quot;list&quot;]\n---\napiVersion: rbac.authorization.k8s.io/v1\nkind: RoleBinding\nmetadata:\n  name: myapp-rolebinding\n  namespace: myapp\nsubjects:\n- kind: ServiceAccount\n  name: myapp-sa\n  namespace: myapp\nroleRef:\n  kind: Role\n  name: myapp-role\n  apiGroup: rbac.authorization.k8s.io\n---\napiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: myapp-deployment\n  namespace: myapp\nspec:\n  replicas: 3\n  selector:\n    matchLabels:\n      app: myapp\n  template:\n    metadata:\n      labels:\n        app: myapp\n    spec:\n      serviceAccountName: myapp-sa\n      securityContext:\n        runAsNonRoot: true\n        runAsUser: 1000\n        runAsGroup: 3000\n        fsGroup: 2000\n        seccompProfile:\n          type: RuntimeDefault\n      containers:\n      - name: app\n        image: nginx:alpine\n        ports:\n        - containerPort: 80\n        securityContext:\n          allowPrivilegeEscalation: false\n          readOnlyRootFilesystem: true\n          capabilities:\n            drop:\n            - ALL\n        resources:\n          requests:\n            memory: &quot;64Mi&quot;\n            cpu: &quot;250m&quot;\n          limits:\n            memory: &quot;128Mi&quot;\n            cpu: &quot;500m&quot;\n        livenessProbe:\n          httpGet:\n            path: /\n            port: 80\n          initialDelaySeconds: 30\n          periodSeconds: 10\n        readinessProbe:\n          httpGet:\n            path: /\n            port: 80\n          initialDelaySeconds: 5\n          periodSeconds: 5\n        volumeMounts:\n        - name: tmp-volume\n          mountPath: /tmp\n        - name: cache-volume\n          mountPath: /var/cache/nginx\n      volumes:\n      - name: tmp-volume\n        emptyDir: {}\n      - name: cache-volume\n        emptyDir: {}\n---\napiVersion: v1\nkind: Service\nmetadata:\n  name: myapp-service\n  namespace: myapp\nspec:\n  selector:\n    app: myapp\n  ports:\n  - port: 80\n    targetPort: 80\n  type: ClusterIP\nEOF</code></pre>\n      </div>\n    </div>\n<h3 id=\"statefulset-with-persistent-storage\" class=\"mobile-header\">StatefulSet with Persistent Storage</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Deploy StatefulSet application (database example)\ncat &lt;&lt;EOF | kubectl apply -f -\napiVersion: apps/v1\nkind: StatefulSet\nmetadata:\n  name: mysql-statefulset\n  namespace: myapp\nspec:\n  serviceName: mysql-service\n  replicas: 3\n  selector:\n    matchLabels:\n      app: mysql\n  template:\n    metadata:\n      labels:\n        app: mysql\n    spec:\n      securityContext:\n        runAsUser: 999\n        runAsGroup: 999\n        fsGroup: 999\n      containers:\n      - name: mysql\n        image: mysql:8.0\n        ports:\n        - containerPort: 3306\n          name: mysql\n        env:\n        - name: MYSQL_ROOT_PASSWORD\n          valueFrom:\n            secretKeyRef:\n              name: mysql-secret\n              key: root-password\n        volumeMounts:\n        - name: mysql-storage\n          mountPath: /var/lib/mysql\n        resources:\n          requests:\n            memory: &quot;1Gi&quot;\n            cpu: &quot;500m&quot;\n          limits:\n            memory: &quot;2Gi&quot;\n            cpu: &quot;1000m&quot;\n  volumeClaimTemplates:\n  - metadata:\n      name: mysql-storage\n    spec:\n      accessModes: [&quot;ReadWriteOnce&quot;]\n      storageClassName: &quot;local-storage&quot;\n      resources:\n        requests:\n          storage: 10Gi\n---\napiVersion: v1\nkind: Service\nmetadata:\n  name: mysql-service\n  namespace: myapp\nspec:\n  clusterIP: None\n  selector:\n    app: mysql\n  ports:\n  - port: 3306\n    targetPort: 3306\n---\napiVersion: v1\nkind: Secret\nmetadata:\n  name: mysql-secret\n  namespace: myapp\ntype: Opaque\ndata:\n  root-password: $(echo -n &#039;secure_mysql_password&#039; | base64)\nEOF</code></pre>\n      </div>\n    </div>\n<h2 id=\"backup-and-disaster-recovery\" class=\"mobile-header\">Backup and Disaster Recovery</h2>\n<h3 id=\"etcd-backup\" class=\"mobile-header\">etcd Backup</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Create etcd backup script\nsudo tee /usr/local/bin/etcd-backup.sh &gt; /dev/null &lt;&lt;&#039;EOF&#039;\n#!/bin/bash\nBACKUP_DIR=&quot;/backup/etcd&quot;\nDATE=$(date +%Y%m%d_%H%M%S)\n\nmkdir -p ${BACKUP_DIR}\n\n# Create etcd snapshot\nETCDCTL_API=3 etcdctl snapshot save ${BACKUP_DIR}/etcd-backup-${DATE}.db \\\n  --endpoints=https://127.0.0.1:2379 \\\n  --cacert=/etc/kubernetes/pki/etcd/ca.crt \\\n  --cert=/etc/kubernetes/pki/etcd/server.crt \\\n  --key=/etc/kubernetes/pki/etcd/server.key\n\n# Verify snapshot\nETCDCTL_API=3 etcdctl snapshot status ${BACKUP_DIR}/etcd-backup-${DATE}.db -w table\n\n# Keep only last 7 backups\nfind ${BACKUP_DIR} -name &quot;etcd-backup-*.db&quot; -type f -mtime +7 -delete\n\necho &quot;etcd backup completed: etcd-backup-${DATE}.db&quot;\nEOF\n\nsudo chmod +x /usr/local/bin/etcd-backup.sh\n\n# Schedule backup\necho &quot;0 2 * * * root /usr/local/bin/etcd-backup.sh&quot; | sudo tee -a /etc/crontab</code></pre>\n      </div>\n    </div>\n<h3 id=\"cluster-state-backup\" class=\"mobile-header\">Cluster State Backup</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Backup all cluster resources\nkubectl get all --all-namespaces -o yaml &gt; cluster-backup-$(date +%Y%m%d).yaml\n\n# Backup specific resource types\nkubectl get configmaps,secrets,persistentvolumes,persistentvolumeclaims --all-namespaces -o yaml &gt; cluster-data-backup-$(date +%Y%m%d).yaml\n\n# Create backup script for all resources\nsudo tee /usr/local/bin/k8s-backup.sh &gt; /dev/null &lt;&lt;&#039;EOF&#039;\n#!/bin/bash\nBACKUP_DIR=&quot;/backup/kubernetes&quot;\nDATE=$(date +%Y%m%d_%H%M%S)\n\nmkdir -p ${BACKUP_DIR}\n\n# Backup all cluster resources\nkubectl get all --all-namespaces -o yaml &gt; ${BACKUP_DIR}/cluster-all-${DATE}.yaml\n\n# Backup critical resources separately\nkubectl get configmaps,secrets,persistentvolumes,persistentvolumeclaims --all-namespaces -o yaml &gt; ${BACKUP_DIR}/cluster-data-${DATE}.yaml\n\n# Backup custom resources\nkubectl get crd -o yaml &gt; ${BACKUP_DIR}/cluster-crd-${DATE}.yaml\n\n# Backup RBAC\nkubectl get clusterroles,clusterrolebindings,roles,rolebindings --all-namespaces -o yaml &gt; ${BACKUP_DIR}/cluster-rbac-${DATE}.yaml\n\n# etcd backup\n/usr/local/bin/etcd-backup.sh\n\n# Compress backups\ntar -czf ${BACKUP_DIR}/k8s-complete-backup-${DATE}.tar.gz ${BACKUP_DIR}/*-${DATE}.yaml\n\n# Keep only last 7 backups\nfind ${BACKUP_DIR} -name &quot;*-${DATE:0:8}*&quot; -type f -mtime +7 -delete\n\necho &quot;Kubernetes backup completed: ${DATE}&quot;\nEOF\n\nsudo chmod +x /usr/local/bin/k8s-backup.sh\necho &quot;0 3 * * * root /usr/local/bin/k8s-backup.sh&quot; | sudo tee -a /etc/crontab</code></pre>\n      </div>\n    </div>\n<h2 id=\"verification-and-testing\" class=\"mobile-header\">Verification and Testing</h2>\n<h3 id=\"cluster-health-checks\" class=\"mobile-header\">Cluster Health Checks</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Check cluster components\nkubectl get componentstatuses\nkubectl cluster-info\nkubectl get nodes -o wide\n\n# Check all pods in system namespaces\nkubectl get pods --all-namespaces\nkubectl get events --all-namespaces --sort-by=.metadata.creationTimestamp\n\n# Test DNS resolution\nkubectl run test-dns --image=busybox --rm -it --restart=Never -- nslookup kubernetes.default\n\n# Test pod networking\nkubectl run test-pod-1 --image=nginx --port=80\nkubectl expose pod test-pod-1 --port=80 --type=ClusterIP\nkubectl run test-pod-2 --image=busybox --rm -it --restart=Never -- wget -qO- test-pod-1\n\n# Check resource usage\nkubectl top nodes\nkubectl top pods --all-namespaces\n\n# Verify RBAC\nkubectl auth can-i create deployments\nkubectl auth can-i get secrets --as=system:serviceaccount:default:default\n\n# Test persistent storage\nkubectl apply -f - &lt;&lt;EOF\napiVersion: v1\nkind: PersistentVolumeClaim\nmetadata:\n  name: test-pvc\nspec:\n  accessModes:\n  - ReadWriteOnce\n  resources:\n    requests:\n      storage: 1Gi\n---\napiVersion: v1\nkind: Pod\nmetadata:\n  name: test-storage-pod\nspec:\n  containers:\n  - name: app\n    image: busybox\n    command: [&#039;sh&#039;, &#039;-c&#039;, &#039;echo &quot;Storage test&quot; &gt; /data/test.txt &amp;&amp; cat /data/test.txt &amp;&amp; sleep 3600&#039;]\n    volumeMounts:\n    - name: storage\n      mountPath: /data\n  volumes:\n  - name: storage\n    persistentVolumeClaim:\n      claimName: test-pvc\nEOF\n\nkubectl logs test-storage-pod\nkubectl delete pod test-storage-pod\nkubectl delete pvc test-pvc</code></pre>\n      </div>\n    </div>\n<h3 id=\"security-validation\" class=\"mobile-header\">Security Validation</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Run CIS Kubernetes Benchmark\ndocker run --rm -v $(pwd):/tmp aquasec/kube-bench:latest run --targets master,node,etcd,policies\n\n# Check pod security policies\nkubectl get psp  # For older versions\nkubectl get podsecuritypolicies  # For older versions\n\n# Verify network policies are working\nkubectl describe networkpolicy default-deny-all\n\n# Check for privileged containers\nkubectl get pods --all-namespaces -o jsonpath=&#039;{range .items[*]}{.metadata.name}{&quot;\\t&quot;}{.spec.securityContext.privileged}{&quot;\\n&quot;}{end}&#039; | grep true\n\n# Audit security contexts\nkubectl get pods --all-namespaces -o jsonpath=&#039;{range .items[*]}{.metadata.namespace}{&quot;\\t&quot;}{.metadata.name}{&quot;\\t&quot;}{.spec.securityContext}{&quot;\\n&quot;}{end}&#039;\n\n# Check for containers running as root\nkubectl get pods --all-namespaces -o jsonpath=&#039;{range .items[*]}{.metadata.name}{&quot;\\t&quot;}{.spec.containers[*].securityContext.runAsUser}{&quot;\\n&quot;}{end}&#039; | grep -E &#039;\\t0$|\\t$&#039;</code></pre>\n      </div>\n    </div>\n<h2 id=\"troubleshooting-cross-platform\" class=\"mobile-header\">Troubleshooting (Cross-Platform)</h2>\n<h3 id=\"common-issues-and-solutions\" class=\"mobile-header\">Common Issues and Solutions</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Node not ready issues\nkubectl describe node &lt;node-name&gt;\nkubectl get events --sort-by=.metadata.creationTimestamp\n\n# Check kubelet logs\nsudo journalctl -u kubelet -f\n\n# Check container runtime\nsudo systemctl status containerd\nsudo crictl pods\n\n# Network issues\nkubectl get pods -n kube-system\nkubectl describe pod &lt;cni-pod-name&gt; -n kube-system\n\n# Permission issues (SELinux)\nsudo ausearch -m AVC -ts recent\nsudo setsebool -P container_manage_cgroup true\n\n# Certificate issues\nsudo kubeadm certs check-expiration\nopenssl x509 -in /etc/kubernetes/pki/apiserver.crt -text -noout\n\n# Resource exhaustion\nkubectl describe node &lt;node-name&gt;\nkubectl top nodes\nkubectl top pods --all-namespaces --sort-by=memory\n\n# etcd issues\nsudo etcdctl endpoint health \\\n  --endpoints=https://127.0.0.1:2379 \\\n  --cacert=/etc/kubernetes/pki/etcd/ca.crt \\\n  --cert=/etc/kubernetes/pki/etcd/server.crt \\\n  --key=/etc/kubernetes/pki/etcd/server.key\n\n# Reset cluster (if needed)\nsudo kubeadm reset\nsudo rm -rf /etc/cni/net.d\nsudo rm -rf $HOME/.kube/config</code></pre>\n      </div>\n    </div>\n<h3 id=\"debug-pod-issues\" class=\"mobile-header\">Debug Pod Issues</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Debug failing pods\nkubectl describe pod &lt;pod-name&gt;\nkubectl logs &lt;pod-name&gt; -c &lt;container-name&gt;\nkubectl get events --field-selector involvedObject.name=&lt;pod-name&gt;\n\n# Debug networking\nkubectl run debug-pod --image=nicolaka/netshoot --rm -it --restart=Never\n\n# Check resource constraints\nkubectl describe resourcequota -n &lt;namespace&gt;\nkubectl describe limitrange -n &lt;namespace&gt;\n\n# Debug storage issues\nkubectl describe pvc &lt;pvc-name&gt;\nkubectl get events --field-selector involvedObject.name=&lt;pvc-name&gt;\n\n# Debug service connectivity\nkubectl run debug --image=busybox --rm -it --restart=Never -- nslookup &lt;service-name&gt;\nkubectl get endpoints &lt;service-name&gt;\n\n# Debug ingress issues\nkubectl describe ingress &lt;ingress-name&gt;\nkubectl get events --field-selector involvedObject.name=&lt;ingress-name&gt;\nkubectl logs -n ingress-nginx deployment/ingress-nginx-controller</code></pre>\n      </div>\n    </div>\n<h2 id=\"performance-optimization\" class=\"mobile-header\">Performance Optimization</h2>\n<h3 id=\"system-level-tuning\" class=\"mobile-header\">System-Level Tuning</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Kernel optimization for Kubernetes\nsudo tee -a /etc/sysctl.conf &gt; /dev/null &lt;&lt;EOF\n# Kubernetes performance tuning\nnet.core.somaxconn = 32768\nnet.core.netdev_max_backlog = 5000\nnet.ipv4.tcp_max_syn_backlog = 8192\nnet.ipv4.tcp_max_tw_buckets = 2000000\nnet.ipv4.tcp_tw_reuse = 1\nnet.ipv4.tcp_fin_timeout = 10\nnet.ipv4.ip_local_port_range = 1024 65000\nnet.core.rmem_default = 262144\nnet.core.rmem_max = 134217728\nnet.core.wmem_default = 262144\nnet.core.wmem_max = 134217728\nnet.ipv4.tcp_rmem = 4096 87380 134217728\nnet.ipv4.tcp_wmem = 4096 65536 134217728\nfs.file-max = 2097152\nfs.inotify.max_user_instances = 8192\nfs.inotify.max_user_watches = 1048576\nvm.swappiness = 0\nvm.overcommit_memory = 1\nvm.dirty_ratio = 80\nvm.dirty_background_ratio = 5\nkernel.pid_max = 4194304\nEOF\n\nsudo sysctl -p\n\n# Set resource limits\nsudo tee -a /etc/security/limits.conf &gt; /dev/null &lt;&lt;EOF\nroot soft nofile 65536\nroot hard nofile 65536\n* soft nofile 65536\n* hard nofile 65536\n* soft nproc 65536\n* hard nproc 65536\nEOF\n\n# Configure systemd limits for containerd and kubelet\nsudo mkdir -p /etc/systemd/system/containerd.service.d/\nsudo tee /etc/systemd/system/containerd.service.d/limits.conf &gt; /dev/null &lt;&lt;EOF\n[Service]\nLimitNOFILE=1048576\nLimitNPROC=1048576\nLimitCORE=infinity\nOOMScoreAdjust=-999\nEOF\n\nsudo mkdir -p /etc/systemd/system/kubelet.service.d/\nsudo tee /etc/systemd/system/kubelet.service.d/limits.conf &gt; /dev/null &lt;&lt;EOF\n[Service]\nLimitNOFILE=1048576\nLimitNPROC=1048576\nLimitCORE=infinity\nOOMScoreAdjust=-999\nEOF\n\nsudo systemctl daemon-reload\nsudo systemctl restart containerd kubelet</code></pre>\n      </div>\n    </div>\n<h3 id=\"kubernetes-performance-configuration\" class=\"mobile-header\">Kubernetes Performance Configuration</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Optimize kubelet configuration\nsudo tee /var/lib/kubelet/config.yaml &gt; /dev/null &lt;&lt;EOF\napiVersion: kubelet.config.k8s.io/v1beta1\nkind: KubeletConfiguration\naddress: 0.0.0.0\nport: 10250\nreadOnlyPort: 0\nauthentication:\n  webhook:\n    enabled: true\nauthorization:\n  mode: Webhook\nclusterDomain: cluster.local\nclusterDNS:\n- 10.96.0.10\nmaxPods: 250\npodsPerCore: 10\ncgroupDriver: systemd\ncontainerLogMaxSize: 50Mi\ncontainerLogMaxFiles: 5\neventRecordQPS: 50\neventBurst: 100\nkubeAPIQPS: 50\nkubeAPIBurst: 100\nserializeImagePulls: false\nregistryPullQPS: 10\nregistryBurst: 20\nsyncFrequency: 1m\nfileCheckFrequency: 20s\nhttpCheckFrequency: 20s\nnodeStatusUpdateFrequency: 10s\nimageMinimumGCAge: 2m\nimageGCHighThresholdPercent: 85\nimageGCLowThresholdPercent: 80\nvolumeStatsAggPeriod: 1m\nsystemReserved:\n  cpu: 200m\n  memory: 512Mi\n  ephemeral-storage: 2Gi\nkubeReserved:\n  cpu: 200m\n  memory: 512Mi\n  ephemeral-storage: 2Gi\nEOF\n\n# Optimize API server configuration\nsudo sed -i &#039;/- kube-apiserver/a\\\n    - --max-requests-inflight=2000\\\n    - --max-mutating-requests-inflight=1000\\\n    - --watch-cache-sizes=nodes#100,pods#1000,replicationcontrollers#500\\\n    - --target-ram-mb=2048\\\n    - --event-ttl=168h0m0s&#039; /etc/kubernetes/manifests/kube-apiserver.yaml\n\n# Optimize etcd configuration\nsudo tee -a /etc/kubernetes/manifests/etcd.yaml &gt; /dev/null &lt;&lt;EOF\n    - --max-request-bytes=33554432\n    - --quota-backend-bytes=8589934592\n    - --snapshot-count=10000\n    - --heartbeat-interval=100\n    - --election-timeout=1000\nEOF</code></pre>\n      </div>\n    </div>\n<h2 id=\"integration-examples\" class=\"mobile-header\">Integration Examples</h2>\n<h3 id=\"python-client-library\" class=\"mobile-header\">Python Client Library</h3>\n<div class=\"mobile-code-block\" data-language=\"python\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">python</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-python\"># kubernetes-client example\nfrom kubernetes import client, config\nimport json\n\n# Load kubeconfig\nconfig.load_kube_config()  # or config.load_incluster_config() for in-cluster\n\n# Initialize API clients\nv1 = client.CoreV1Api()\napps_v1 = client.AppsV1Api()\nnetworking_v1 = client.NetworkingV1Api()\n\n# Create a namespace\nnamespace = client.V1Namespace(\n    metadata=client.V1ObjectMeta(name=&quot;python-app&quot;)\n)\nv1.create_namespace(body=namespace)\n\n# Create a deployment\ndeployment = client.V1Deployment(\n    metadata=client.V1ObjectMeta(name=&quot;nginx-deployment&quot;),\n    spec=client.V1DeploymentSpec(\n        replicas=3,\n        selector=client.V1LabelSelector(\n            match_labels={&quot;app&quot;: &quot;nginx&quot;}\n        ),\n        template=client.V1PodTemplateSpec(\n            metadata=client.V1ObjectMeta(\n                labels={&quot;app&quot;: &quot;nginx&quot;}\n            ),\n            spec=client.V1PodSpec(\n                containers=[\n                    client.V1Container(\n                        name=&quot;nginx&quot;,\n                        image=&quot;nginx:alpine&quot;,\n                        ports=[client.V1ContainerPort(container_port=80)],\n                        resources=client.V1ResourceRequirements(\n                            requests={&quot;cpu&quot;: &quot;100m&quot;, &quot;memory&quot;: &quot;128Mi&quot;},\n                            limits={&quot;cpu&quot;: &quot;500m&quot;, &quot;memory&quot;: &quot;512Mi&quot;}\n                        )\n                    )\n                ]\n            )\n        )\n    )\n)\n\napps_v1.create_namespaced_deployment(\n    namespace=&quot;python-app&quot;, \n    body=deployment\n)\n\n# Create a service\nservice = client.V1Service(\n    metadata=client.V1ObjectMeta(name=&quot;nginx-service&quot;),\n    spec=client.V1ServiceSpec(\n        selector={&quot;app&quot;: &quot;nginx&quot;},\n        ports=[\n            client.V1ServicePort(port=80, target_port=80)\n        ],\n        type=&quot;LoadBalancer&quot;\n    )\n)\n\nv1.create_namespaced_service(namespace=&quot;python-app&quot;, body=service)\n\n# Monitor pods\ndef monitor_pods():\n    pods = v1.list_namespaced_pod(namespace=&quot;python-app&quot;)\n    for pod in pods.items:\n        print(f&quot;Pod: {pod.metadata.name}, Status: {pod.status.phase}&quot;)\n\nmonitor_pods()\n\n# Stream logs\ndef stream_logs(pod_name):\n    for line in v1.read_namespaced_pod_log(\n        name=pod_name, \n        namespace=&quot;python-app&quot;, \n        follow=True, \n        _preload_content=False\n    ).stream():\n        print(line.decode(&#039;utf-8&#039;), end=&#039;&#039;)\n\n# Clean up\napps_v1.delete_namespaced_deployment(name=&quot;nginx-deployment&quot;, namespace=&quot;python-app&quot;)\nv1.delete_namespaced_service(name=&quot;nginx-service&quot;, namespace=&quot;python-app&quot;)\nv1.delete_namespace(name=&quot;python-app&quot;)</code></pre>\n      </div>\n    </div>\n<h3 id=\"nodejs-client-example\" class=\"mobile-header\">Node.js Client Example</h3>\n<div class=\"mobile-code-block\" data-language=\"javascript\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">javascript</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-javascript\">// kubernetes-example.js\nconst k8s = require(&#039;@kubernetes/client-node&#039;);\n\n// Load kubeconfig\nconst kc = new k8s.KubeConfig();\nkc.loadFromDefault();\n\nconst k8sApi = kc.makeApiClient(k8s.CoreV1Api);\nconst k8sAppsApi = kc.makeApiClient(k8s.AppsV1Api);\n\nconst namespace = &#039;nodejs-app&#039;;\n\nasync function createNamespace() {\n    const namespaceManifest = {\n        metadata: {\n            name: namespace\n        }\n    };\n    \n    try {\n        await k8sApi.createNamespace(namespaceManifest);\n        console.log(`Namespace ${namespace} created`);\n    } catch (error) {\n        console.error(&#039;Error creating namespace:&#039;, error.response?.body || error.message);\n    }\n}\n\nasync function createDeployment() {\n    const deploymentManifest = {\n        metadata: {\n            name: &#039;nginx-deployment&#039;\n        },\n        spec: {\n            replicas: 3,\n            selector: {\n                matchLabels: {\n                    app: &#039;nginx&#039;\n                }\n            },\n            template: {\n                metadata: {\n                    labels: {\n                        app: &#039;nginx&#039;\n                    }\n                },\n                spec: {\n                    containers: [{\n                        name: &#039;nginx&#039;,\n                        image: &#039;nginx:alpine&#039;,\n                        ports: [{\n                            containerPort: 80\n                        }],\n                        resources: {\n                            requests: {\n                                cpu: &#039;100m&#039;,\n                                memory: &#039;128Mi&#039;\n                            },\n                            limits: {\n                                cpu: &#039;500m&#039;,\n                                memory: &#039;512Mi&#039;\n                            }\n                        }\n                    }]\n                }\n            }\n        }\n    };\n    \n    try {\n        await k8sAppsApi.createNamespacedDeployment(namespace, deploymentManifest);\n        console.log(&#039;Deployment created: nginx-deployment&#039;);\n    } catch (error) {\n        console.error(&#039;Error creating deployment:&#039;, error.response?.body || error.message);\n    }\n}\n\nasync function createService() {\n    const serviceManifest = {\n        metadata: {\n            name: &#039;nginx-service&#039;\n        },\n        spec: {\n            selector: {\n                app: &#039;nginx&#039;\n            },\n            ports: [{\n                port: 80,\n                targetPort: 80\n            }],\n            type: &#039;LoadBalancer&#039;\n        }\n    };\n    \n    try {\n        await k8sApi.createNamespacedService(namespace, serviceManifest);\n        console.log(&#039;Service created: nginx-service&#039;);\n    } catch (error) {\n        console.error(&#039;Error creating service:&#039;, error.response?.body || error.message);\n    }\n}\n\nasync function listPods() {\n    try {\n        const response = await k8sApi.listNamespacedPod(namespace);\n        console.log(`Found ${response.body.items.length} pods:`);\n        response.body.items.forEach(pod =&gt; {\n            console.log(`Pod: ${pod.metadata.name}, Status: ${pod.status.phase}`);\n        });\n    } catch (error) {\n        console.error(&#039;Error listing pods:&#039;, error.response?.body || error.message);\n    }\n}\n\nasync function cleanup() {\n    try {\n        await k8sAppsApi.deleteNamespacedDeployment(&#039;nginx-deployment&#039;, namespace);\n        await k8sApi.deleteNamespacedService(&#039;nginx-service&#039;, namespace);\n        await k8sApi.deleteNamespace(namespace);\n        console.log(&#039;Resources cleaned up&#039;);\n    } catch (error) {\n        console.error(&#039;Error during cleanup:&#039;, error.response?.body || error.message);\n    }\n}\n\nasync function main() {\n    await createNamespace();\n    await createDeployment();\n    await createService();\n    \n    // Wait a bit for pods to start\n    setTimeout(async () =&gt; {\n        await listPods();\n        await cleanup();\n    }, 5000);\n}\n\nmain().catch(console.error);</code></pre>\n      </div>\n    </div>\n<h3 id=\"java-client-example\" class=\"mobile-header\">Java Client Example</h3>\n<div class=\"mobile-code-block\" data-language=\"java\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">java</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-java\">// KubernetesExample.java\nimport io.kubernetes.client.openapi.ApiClient;\nimport io.kubernetes.client.openapi.ApiException;\nimport io.kubernetes.client.openapi.Configuration;\nimport io.kubernetes.client.openapi.apis.AppsV1Api;\nimport io.kubernetes.client.openapi.apis.CoreV1Api;\nimport io.kubernetes.client.openapi.models.*;\nimport io.kubernetes.client.util.Config;\n\nimport java.util.Collections;\nimport java.util.HashMap;\nimport java.util.Map;\n\npublic class KubernetesExample {\n    public static void main(String[] args) throws Exception {\n        // Load kubeconfig\n        ApiClient client = Config.defaultClient();\n        Configuration.setDefaultApiClient(client);\n        \n        CoreV1Api coreV1Api = new CoreV1Api();\n        AppsV1Api appsV1Api = new AppsV1Api();\n        \n        String namespace = &quot;java-app&quot;;\n        \n        // Create namespace\n        V1Namespace ns = new V1Namespace()\n            .metadata(new V1ObjectMeta().name(namespace));\n        \n        try {\n            coreV1Api.createNamespace(ns, null, null, null, null);\n            System.out.println(&quot;Namespace created: &quot; + namespace);\n        } catch (ApiException e) {\n            System.err.println(&quot;Failed to create namespace: &quot; + e.getResponseBody());\n        }\n        \n        // Create deployment\n        Map&lt;String, String&gt; labels = new HashMap&lt;&gt;();\n        labels.put(&quot;app&quot;, &quot;nginx&quot;);\n        \n        V1Deployment deployment = new V1Deployment()\n            .metadata(new V1ObjectMeta().name(&quot;nginx-deployment&quot;))\n            .spec(new V1DeploymentSpec()\n                .replicas(3)\n                .selector(new V1LabelSelector().matchLabels(labels))\n                .template(new V1PodTemplateSpec()\n                    .metadata(new V1ObjectMeta().labels(labels))\n                    .spec(new V1PodSpec()\n                        .containers(Collections.singletonList(\n                            new V1Container()\n                                .name(&quot;nginx&quot;)\n                                .image(&quot;nginx:alpine&quot;)\n                                .ports(Collections.singletonList(\n                                    new V1ContainerPort().containerPort(80)\n                                ))\n                                .resources(new V1ResourceRequirements()\n                                    .requests(Map.of(\n                                        &quot;cpu&quot;, Quantity.fromString(&quot;100m&quot;),\n                                        &quot;memory&quot;, Quantity.fromString(&quot;128Mi&quot;)\n                                    ))\n                                    .limits(Map.of(\n                                        &quot;cpu&quot;, Quantity.fromString(&quot;500m&quot;),\n                                        &quot;memory&quot;, Quantity.fromString(&quot;512Mi&quot;)\n                                    ))\n                                )\n                        ))\n                    )\n                )\n            );\n            \n        try {\n            appsV1Api.createNamespacedDeployment(namespace, deployment, null, null, null, null);\n            System.out.println(&quot;Deployment created: nginx-deployment&quot;);\n        } catch (ApiException e) {\n            System.err.println(&quot;Failed to create deployment: &quot; + e.getResponseBody());\n        }\n        \n        // Create service\n        V1Service service = new V1Service()\n            .metadata(new V1ObjectMeta().name(&quot;nginx-service&quot;))\n            .spec(new V1ServiceSpec()\n                .selector(labels)\n                .ports(Collections.singletonList(\n                    new V1ServicePort().port(80).targetPort(new IntOrString(80))\n                ))\n                .type(&quot;LoadBalancer&quot;)\n            );\n            \n        try {\n            coreV1Api.createNamespacedService(namespace, service, null, null, null, null);\n            System.out.println(&quot;Service created: nginx-service&quot;);\n        } catch (ApiException e) {\n            System.err.println(&quot;Failed to create service: &quot; + e.getResponseBody());\n        }\n        \n        // List pods\n        try {\n            V1PodList pods = coreV1Api.listNamespacedPod(namespace, null, null, null, null, null, null, null, null, null, null);\n            System.out.println(&quot;Found &quot; + pods.getItems().size() + &quot; pods:&quot;);\n            for (V1Pod pod : pods.getItems()) {\n                System.out.println(&quot;Pod: &quot; + pod.getMetadata().getName() + \n                                 &quot;, Status: &quot; + pod.getStatus().getPhase());\n            }\n        } catch (ApiException e) {\n            System.err.println(&quot;Failed to list pods: &quot; + e.getResponseBody());\n        }\n        \n        // Cleanup\n        try {\n            appsV1Api.deleteNamespacedDeployment(&quot;nginx-deployment&quot;, namespace, null, null, null, null, null, null);\n            coreV1Api.deleteNamespacedService(&quot;nginx-service&quot;, namespace, null, null, null, null, null, null);\n            coreV1Api.deleteNamespace(namespace, null, null, null, null, null, null);\n            System.out.println(&quot;Resources cleaned up&quot;);\n        } catch (ApiException e) {\n            System.err.println(&quot;Failed to cleanup: &quot; + e.getResponseBody());\n        }\n    }\n}</code></pre>\n      </div>\n    </div>\n<h2 id=\"maintenance\" class=\"mobile-header\">Maintenance</h2>\n<h3 id=\"update-procedures\" class=\"mobile-header\">Update Procedures</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Check current Kubernetes version\nkubectl version --short\n\n# Plan upgrade with kubeadm\nsudo kubeadm upgrade plan\n\n# Upgrade kubeadm first\nsudo apt update &amp;&amp; sudo apt-mark unhold kubeadm\nsudo apt install -y kubeadm=1.29.1-00\nsudo apt-mark hold kubeadm\n\n# Or for RHEL/CentOS\nsudo yum update -y kubeadm-1.29.1\n\n# Upgrade control plane\nsudo kubeadm upgrade apply v1.29.1\n\n# Upgrade kubelet and kubectl\nsudo apt-mark unhold kubelet kubectl\nsudo apt install -y kubelet=1.29.1-00 kubectl=1.29.1-00\nsudo apt-mark hold kubelet kubectl\n\nsudo systemctl daemon-reload\nsudo systemctl restart kubelet\n\n# Drain and upgrade worker nodes\nkubectl drain &lt;worker-node&gt; --ignore-daemonsets --delete-emptydir-data\n# On worker node:\nsudo kubeadm upgrade node\nsudo apt install -y kubelet=1.29.1-00 kubectl=1.29.1-00\nsudo systemctl daemon-reload\nsudo systemctl restart kubelet\n\n# Uncordon worker node\nkubectl uncordon &lt;worker-node&gt;</code></pre>\n      </div>\n    </div>\n<h3 id=\"maintenance-tasks\" class=\"mobile-header\">Maintenance Tasks</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Weekly maintenance script\n#!/bin/bash\n# k8s-maintenance.sh\n\n# Check cluster health\necho &quot;=== Cluster Health Check ===&quot;\nkubectl get nodes -o wide\nkubectl get pods --all-namespaces | grep -v Running | grep -v Completed\n\n# Check resource usage\necho &quot;=== Resource Usage ===&quot;\nkubectl top nodes\nkubectl top pods --all-namespaces --sort-by=cpu | head -10\n\n# Check certificate expiry\necho &quot;=== Certificate Expiry ===&quot;\nsudo kubeadm certs check-expiration\n\n# Clean up completed jobs\necho &quot;=== Cleanup ===&quot;\nkubectl get jobs --all-namespaces -o json | jq -r &#039;.items[] | select(.status.conditions[]?.type == &quot;Complete&quot;) | &quot;\\(.metadata.namespace) \\(.metadata.name)&quot;&#039; | xargs -l bash -c &#039;kubectl delete job $1 -n $0&#039;\n\n# Clean up evicted pods\nkubectl get pods --all-namespaces --field-selector=status.phase=Failed -o json | jq -r &#039;.items[] | &quot;\\(.metadata.namespace) \\(.metadata.name)&quot;&#039; | xargs -l bash -c &#039;kubectl delete pod $1 -n $0&#039;\n\n# Check for security updates\necho &quot;=== Security Updates Available ===&quot;\nsudo apt list --upgradable | grep -i security\n\n# Backup etcd\necho &quot;=== etcd Backup ===&quot;\nsudo etcdctl snapshot save /backup/etcd-$(date +%Y%m%d_%H%M%S).db \\\n  --endpoints=https://127.0.0.1:2379 \\\n  --cacert=/etc/kubernetes/pki/etcd/ca.crt \\\n  --cert=/etc/kubernetes/pki/etcd/server.crt \\\n  --key=/etc/kubernetes/pki/etcd/server.key\n\necho &quot;Maintenance completed at: $(date)&quot;</code></pre>\n      </div>\n    </div>\n<h2 id=\"additional-resources\" class=\"mobile-header\">Additional Resources</h2>\n<li class=\"mobile-list-item\"><a href=\"https://kubernetes.io/docs/\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">Official Documentation</a></li>\n<li class=\"mobile-list-item\"><a href=\"https://kubernetes.io/docs/reference/kubectl/\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">kubectl Reference</a></li>\n<li class=\"mobile-list-item\"><a href=\"https://kubernetes.io/docs/concepts/security/\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">Security Best Practices</a></li>\n<li class=\"mobile-list-item\"><a href=\"https://www.cisecurity.org/benchmark/kubernetes\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">CIS Kubernetes Benchmark</a></li>\n<li class=\"mobile-list-item\"><a href=\"https://cheatsheetseries.owasp.org/cheatsheets/Kubernetes_Security_Cheat_Sheet.html\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">OWASP Kubernetes Security Cheat Sheet</a></li>\n<li class=\"mobile-list-item\"><a href=\"https://github.com/kelseyhightower/kubernetes-the-hard-way\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">Kubernetes The Hard Way</a></li>\n<li class=\"mobile-list-item\"><a href=\"https://kubernetes.academy/\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">Kubernetes Academy</a></li>\n<li class=\"mobile-list-item\"><a href=\"https://landscape.cncf.io/\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">CNCF Landscape</a></li>\n<p class=\"mobile-paragraph\">---</p>\n<p class=\"mobile-paragraph\"><strong>Note:</strong> This guide is part of the <a href=\"https://howtomgr.github.io\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">HowToMgr</a> collection.</p>","readTime":"35 min","wordCount":6949,"lastBuilt":"2025-09-14T18:11:59.392Z"},{"name":"libvirt","displayName":"Libvirt","slug":"libvirt","description":"Repo for libvirt","category":"infrastructure","language":null,"stars":0,"forks":0,"topics":[],"githubUrl":"https://github.com/howtomgr/libvirt","updatedAt":"2025-09-08T03:10:30Z","createdAt":"2023-08-28T03:48:25Z","readmeRaw":"# libvirt setup\n\n## [Archlinux](./ArchLinux.md)  \n  \n","readmeHtml":"<h1 id=\"libvirt-setup\" class=\"mobile-header\">libvirt setup</h1>\n<h2 id=\"archlinuxarchlinuxmd\" class=\"mobile-header\">[Archlinux](./ArchLinux.md)  </h2>","readTime":"1 min","wordCount":6,"lastBuilt":"2025-09-14T18:12:17.636Z"},{"name":"mastodon","displayName":"Mastodon","slug":"mastodon","description":"Repo for mastodon","category":"communication","language":null,"stars":0,"forks":0,"topics":[],"githubUrl":"https://github.com/howtomgr/mastodon","updatedAt":"2025-09-08T03:10:44Z","createdAt":"2023-08-28T03:48:35Z","readmeRaw":"## Mastodon Install guide\n\n```shell\ncurl --silent --location https://rpm.nodesource.com/setup_8.x | bash -  \nwget https://dl.yarnpkg.com/rpm/yarn.repo -O /etc/yum.repos.d/yarn.repo  \nrpm -Uvh https://download.postgresql.org/pub/repos/yum/9.6/redhat/rhel-7-x86_64/pgdg-centos96-9.6-3.noarch.rpm  \n  \nwget https://github.com/CasjaysDev/packages/raw/main/rhel/mastodon.txt -O /tmp/mastodon.txt  \nyum install -y $(cat /tmp/mastodon.txt)  \n  \n/usr/pgsql-9.6/bin/postgresql96-setup initdb  \n  \nsystemctl start postgresql-9.6 redis  \nsystemctl enable postgresql-9.6 redis  \n  \nvim /var/lib/pgsql/9.6/data/pg_hba.conf  \n  \n# TYPE  DATABASE        USER            ADDRESS                 METHOD  \n  \n# \"local\" is for Unix domain socket connections only  \nlocal   all             all                                     trust  \n# IPv4 local connections:  \nhost    all             all             127.0.0.1/32            md5  \n# IPv6 local connections:  \nhost    all             all             ::1/128                 md5  \n  \nadduser mastodon  \nsu - mastodon  \ngpg --keyserver hkp://keys.gnupg.net --recv-keys 409B6B1796C275462A1703113804BB82D39DC0E3 7D2BAF1CF37B13E2069D6956105BD0E739499BDB  \ncurl -sSL https://get.rvm.io | bash -s stable  \nsource /home/mastodon/.rvm/scripts/rvm  \nrvm install 2.5.1  \n  \ngem install bundler  \ncd ~  \ngit clone https://github.com/tootsuite/mastodon.git app  \ncd ~/app  \ngit checkout $(git describe --tags `git rev-list --tags --max-count=1`)  \nbundle config build.pg --with-pg-config=/usr/pgsql-9.6/bin/pg_config  \nbundle install --deployment --without development test  \nexit  \n  \npasswd postgres  \nsu - postgres -c psql  \nCREATE USER mastodon CREATEDB;  \nALTER USER mastodon WITH ENCRYPTED password 'YOURSECUREPASSWORD' CREATEDB;  \n\\q  \n  \nsu - mastodon  \ncd ~/app  \nRAILS_ENV=production bundle exec rake mastodon:setup  \n  \nsu -  \ngit clone https://github.com/casjay-base/howtos /tmp/howtos\ncp -Rfv /tmp/howtos/mastodon/{etc,usr}* /  \n  \nsystemctl daemon-reload  \nsystemctl enable mastodon-web mastodon-queue mastodon-api  \nsystemctl start mastodon-web mastodon-queue mastodon-api  \nsystemctl status mastodon-web mastodon-queue mastodon-api  \n```  \n","readmeHtml":"<h2 id=\"mastodon-install-guide\" class=\"mobile-header\">Mastodon Install guide</h2>\n<div class=\"mobile-code-block\" data-language=\"shell\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">shell</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-shell\">curl --silent --location https://rpm.nodesource.com/setup_8.x | bash -  \nwget https://dl.yarnpkg.com/rpm/yarn.repo -O /etc/yum.repos.d/yarn.repo  \nrpm -Uvh https://download.postgresql.org/pub/repos/yum/9.6/redhat/rhel-7-x86_64/pgdg-centos96-9.6-3.noarch.rpm  \n  \nwget https://github.com/CasjaysDev/packages/raw/main/rhel/mastodon.txt -O /tmp/mastodon.txt  \nyum install -y $(cat /tmp/mastodon.txt)  \n  \n/usr/pgsql-9.6/bin/postgresql96-setup initdb  \n  \nsystemctl start postgresql-9.6 redis  \nsystemctl enable postgresql-9.6 redis  \n  \nvim /var/lib/pgsql/9.6/data/pg_hba.conf  \n  \n# TYPE  DATABASE        USER            ADDRESS                 METHOD  \n  \n# &quot;local&quot; is for Unix domain socket connections only  \nlocal   all             all                                     trust  \n# IPv4 local connections:  \nhost    all             all             127.0.0.1/32            md5  \n# IPv6 local connections:  \nhost    all             all             ::1/128                 md5  \n  \nadduser mastodon  \nsu - mastodon  \ngpg --keyserver hkp://keys.gnupg.net --recv-keys 409B6B1796C275462A1703113804BB82D39DC0E3 7D2BAF1CF37B13E2069D6956105BD0E739499BDB  \ncurl -sSL https://get.rvm.io | bash -s stable  \nsource /home/mastodon/.rvm/scripts/rvm  \nrvm install 2.5.1  \n  \ngem install bundler  \ncd ~  \ngit clone https://github.com/tootsuite/mastodon.git app  \ncd ~/app  \ngit checkout $(git describe --tags `git rev-list --tags --max-count=1`)  \nbundle config build.pg --with-pg-config=/usr/pgsql-9.6/bin/pg_config  \nbundle install --deployment --without development test  \nexit  \n  \npasswd postgres  \nsu - postgres -c psql  \nCREATE USER mastodon CREATEDB;  \nALTER USER mastodon WITH ENCRYPTED password &#039;YOURSECUREPASSWORD&#039; CREATEDB;  \n\\q  \n  \nsu - mastodon  \ncd ~/app  \nRAILS_ENV=production bundle exec rake mastodon:setup  \n  \nsu -  \ngit clone https://github.com/casjay-base/howtos /tmp/howtos\ncp -Rfv /tmp/howtos/mastodon/{etc,usr}* /  \n  \nsystemctl daemon-reload  \nsystemctl enable mastodon-web mastodon-queue mastodon-api  \nsystemctl start mastodon-web mastodon-queue mastodon-api  \nsystemctl status mastodon-web mastodon-queue mastodon-api  </code></pre>\n      </div>\n    </div>","readTime":"1 min","wordCount":190,"lastBuilt":"2025-09-14T18:12:17.241Z"},{"name":"mattermost","displayName":"Mattermost","slug":"mattermost","description":"Repo for mattermost","category":"communication","language":null,"stars":0,"forks":0,"topics":[],"githubUrl":"https://github.com/howtomgr/mattermost","updatedAt":"2025-09-14T01:30:27Z","createdAt":"2023-08-28T03:48:46Z","readmeRaw":"# Mattermost Installation Guide\n\nOpen-source, self-hosted team communication platform with enterprise-grade security. Complete alternative to Slack with advanced features for secure collaboration, workflow automation, and integrated voice/video calling.\n\n## Prerequisites\n\n- Linux system (any modern distribution)\n- Root or sudo access\n- 4GB RAM minimum, 8GB+ recommended for production\n- PostgreSQL 11+ or MySQL 8.0+ database\n- NGINX reverse proxy (recommended for production)\n- Domain name and SSL certificate for HTTPS\n\n## Installation\n\n### Ubuntu/Debian (Recommended)\n```bash\n# Update system packages\nsudo apt update && sudo apt upgrade -y\n\n# Download latest Mattermost server\nMATTERMOST_VERSION=\"9.2.4\"  # Check for latest at https://mattermost.com/download\nwget https://releases.mattermost.com/${MATTERMOST_VERSION}/mattermost-${MATTERMOST_VERSION}-linux-amd64.tar.gz\n\n# Extract and install\ntar -xzf mattermost-${MATTERMOST_VERSION}-linux-amd64.tar.gz\nsudo mv mattermost /opt/\n\n# Create system user\nsudo useradd --system --user-group mattermost\nsudo chown -R mattermost:mattermost /opt/mattermost\n\n# Create data directory\nsudo mkdir -p /opt/mattermost/data\nsudo chown mattermost:mattermost /opt/mattermost/data\nsudo chmod 755 /opt/mattermost/data\n\n# Set proper permissions\nsudo find /opt/mattermost -type d -exec chmod 755 {} \\;\nsudo find /opt/mattermost -type f -exec chmod 644 {} \\;\nsudo chmod +x /opt/mattermost/bin/mattermost\n\n# Create log directory\nsudo mkdir -p /var/log/mattermost\nsudo chown mattermost:mattermost /var/log/mattermost\n```\n\n### RHEL/CentOS/Rocky Linux/AlmaLinux\n```bash\n# Install prerequisites\nsudo yum update -y\nsudo yum install -y wget tar\n\n# Download and install Mattermost\nMATTERMOST_VERSION=\"9.2.4\"\nwget https://releases.mattermost.com/${MATTERMOST_VERSION}/mattermost-${MATTERMOST_VERSION}-linux-amd64.tar.gz\ntar -xzf mattermost-${MATTERMOST_VERSION}-linux-amd64.tar.gz\nsudo mv mattermost /opt/\n\n# Create system user and directories\nsudo useradd --system --user-group mattermost\nsudo chown -R mattermost:mattermost /opt/mattermost\nsudo mkdir -p /opt/mattermost/data /var/log/mattermost\nsudo chown mattermost:mattermost /opt/mattermost/data /var/log/mattermost\n\n# Configure firewall\nsudo firewall-cmd --permanent --add-port=8065/tcp\nsudo firewall-cmd --reload\n```\n\n### Docker Installation (Production Ready)\n```bash\n# Create Mattermost directory structure\nmkdir -p ~/mattermost/{config,data,logs,plugins,client-plugins}\n\n# Create Docker Compose configuration\ncat > ~/mattermost/docker-compose.yml <<EOF\nversion: '3.8'\n\nservices:\n  postgres:\n    image: postgres:15-alpine\n    container_name: mattermost-postgres\n    restart: unless-stopped\n    environment:\n      - POSTGRES_DB=mattermost\n      - POSTGRES_USER=mattermost\n      - POSTGRES_PASSWORD=secure_postgres_password_2024\n      - POSTGRES_INITDB_ARGS=\"--encoding=UTF8 --lc-collate=C --lc-ctype=C\"\n    volumes:\n      - postgres_data:/var/lib/postgresql/data\n      - ./postgres-custom.conf:/etc/postgresql/postgresql.conf\n    networks:\n      - mattermost\n    security_opt:\n      - no-new-privileges:true\n    read_only: true\n    tmpfs:\n      - /tmp\n      - /var/run/postgresql\n\n  mattermost:\n    image: mattermost/mattermost-enterprise-edition:latest\n    container_name: mattermost\n    restart: unless-stopped\n    depends_on:\n      - postgres\n    environment:\n      # Database settings\n      - MM_SQLSETTINGS_DRIVERNAME=postgres\n      - MM_SQLSETTINGS_DATASOURCE=postgres://mattermost:secure_postgres_password_2024@postgres:5432/mattermost?sslmode=disable&connect_timeout=10\n      \n      # Server settings\n      - MM_SERVICESETTINGS_SITEURL=https://mattermost.example.com\n      - MM_SERVICESETTINGS_LISTENADDRESS=:8000\n      - MM_SERVICESETTINGS_ENABLELINKPREVIEWS=true\n      - MM_SERVICESETTINGS_ENABLEDEVELOPER=false\n      - MM_SERVICESETTINGS_ENABLESECURITYFIXALERT=true\n      - MM_SERVICESETTINGS_ENABLEINSECUREOUTGOINGCONNECTIONS=false\n      \n      # File settings\n      - MM_FILESETTINGS_MAXFILESIZE=104857600  # 100MB\n      - MM_FILESETTINGS_DRIVERNAME=local\n      - MM_FILESETTINGS_DIRECTORY=/mattermost/data\n      \n      # Email settings (configure SMTP)\n      - MM_EMAILSETTINGS_ENABLESIGNUPWITHEMAIL=false\n      - MM_EMAILSETTINGS_ENABLESIGNINWITHEMAIL=true\n      - MM_EMAILSETTINGS_ENABLESIGNINWITHUSERNAME=true\n      - MM_EMAILSETTINGS_SMTPSERVER=smtp.example.com\n      - MM_EMAILSETTINGS_SMTPPORT=587\n      - MM_EMAILSETTINGS_SMTPUSERNAME=mattermost@example.com\n      - MM_EMAILSETTINGS_SMTPPASSWORD=smtp_secure_password\n      - MM_EMAILSETTINGS_ENABLESMTPAUTH=true\n      - MM_EMAILSETTINGS_CONNECTIONSECURITY=STARTTLS\n      \n      # Security settings\n      - MM_TEAMSETTINGS_ENABLEOPENSERVER=false\n      - MM_TEAMSETTINGS_ENABLEUSERCREATION=false\n      - MM_TEAMSETTINGS_RESTRICTCREATIONTODOMAIN=example.com\n      - MM_PASSWORDSETTINGS_MINIMUMLENGTH=12\n      - MM_PASSWORDSETTINGS_REQUIRELOWERCASE=true\n      - MM_PASSWORDSETTINGS_REQUIREUPPERCASE=true\n      - MM_PASSWORDSETTINGS_REQUIRENUMBER=true\n      - MM_PASSWORDSETTINGS_REQUIRESYMBOL=true\n      \n      # Session settings\n      - MM_SESSIONSETTINGS_SESSIONLENGTHWEBINHOURS=720  # 30 days\n      - MM_SESSIONSETTINGS_SESSIONLENGTHMOBILEINHOURS=720\n      - MM_SESSIONSETTINGS_ENABLEUSERACCESSTOKENS=false\n      \n      # Rate limiting\n      - MM_RATELIMITSETTINGS_ENABLE=true\n      - MM_RATELIMITSETTINGS_PERSEC=10\n      - MM_RATELIMITSETTINGS_MAXBURST=100\n      \n      # Privacy settings\n      - MM_PRIVACYSETTINGS_SHOWEMAILADDRESS=false\n      - MM_PRIVACYSETTINGS_SHOWFULLNAME=false\n      \n      # Logging\n      - MM_LOGSETTINGS_ENABLECONSOLE=true\n      - MM_LOGSETTINGS_CONSOLELEVEL=INFO\n      - MM_LOGSETTINGS_ENABLEFILE=true\n      - MM_LOGSETTINGS_FILELEVEL=INFO\n      - MM_LOGSETTINGS_FILELOCATION=/mattermost/logs/mattermost.log\n      \n    volumes:\n      - ./config:/mattermost/config:rw\n      - ./data:/mattermost/data:rw\n      - ./logs:/mattermost/logs:rw\n      - ./plugins:/mattermost/plugins:rw\n      - ./client-plugins:/mattermost/client/plugins:rw\n    ports:\n      - \"127.0.0.1:8065:8000\"  # Bind to localhost only\n    networks:\n      - mattermost\n    security_opt:\n      - no-new-privileges:true\n    read_only: true\n    tmpfs:\n      - /tmp\n\nnetworks:\n  mattermost:\n    driver: bridge\n\nvolumes:\n  postgres_data:\nEOF\n\n# Start Mattermost stack\ncd ~/mattermost\ndocker-compose up -d\n\n# Check logs\ndocker-compose logs -f mattermost\n```\n\n### Kubernetes Installation (Enterprise)\n```bash\n# Install Mattermost Operator\nkubectl create namespace mattermost-operator\n\n# Install via Helm\nhelm repo add mattermost https://helm.mattermost.com\nhelm repo update\n\nhelm install mattermost-operator mattermost/mattermost-operator \\\n  --namespace mattermost-operator \\\n  --set image.tag=v2.0.0\n\n# Create Mattermost cluster configuration\ncat > mattermost-cluster.yaml <<EOF\napiVersion: mattermost.com/v1alpha1\nkind: Mattermost\nmetadata:\n  name: mattermost\n  namespace: mattermost\nspec:\n  size: 1000users  # Adjust based on user count\n  ingressName: mattermost.example.com\n  version: v9.2.4\n  \n  database:\n    external:\n      url: \"postgres://mattermost:secure_password@postgres.example.com:5432/mattermost?sslmode=require\"\n  \n  fileStore:\n    external:\n      url: \"s3://mattermost-files\"\n      bucket: \"mattermost-files\"\n      region: \"us-west-2\"\n      \n  elasticSearch:\n    host: \"elasticsearch.example.com:9200\"\n    username: \"mattermost\"\n    password: \"elasticsearch_password\"\n    \n  blueGreen:\n    enable: true\n    productionDeployment: blue\n    \n  resourceRequests:\n    cpu: \"1000m\"\n    memory: \"2Gi\"\n    \n  resourceLimits:\n    cpu: \"2000m\" \n    memory: \"4Gi\"\n    \n  affinity:\n    podAntiAffinity:\n      requiredDuringSchedulingIgnoredDuringExecution:\n        - labelSelector:\n            matchExpressions:\n              - key: app\n                operator: In\n                values:\n                  - mattermost\n          topologyKey: kubernetes.io/hostname\n          \n  livenessProbe:\n    httpGet:\n      path: /api/v4/system/ping\n      port: 8000\n    initialDelaySeconds: 30\n    periodSeconds: 10\n    \n  readinessProbe:\n    httpGet:\n      path: /api/v4/system/ping\n      port: 8000\n    initialDelaySeconds: 15\n    periodSeconds: 5\nEOF\n\nkubectl apply -f mattermost-cluster.yaml\n```\n\n## Database Configuration\n\n### PostgreSQL Setup (Recommended)\n```bash\n# Install PostgreSQL 15\nsudo apt install -y postgresql-15 postgresql-client-15\n\n# Create Mattermost database and user\nsudo -u postgres psql <<EOF\nCREATE DATABASE mattermost WITH ENCODING 'UTF8' LC_COLLATE='en_US.UTF-8' LC_CTYPE='en_US.UTF-8' TEMPLATE=template0;\nCREATE USER mattermost WITH ENCRYPTED PASSWORD 'MattermostDBPassword2024!';\nGRANT ALL PRIVILEGES ON DATABASE mattermost TO mattermost;\n\n-- Performance optimization for Mattermost\nALTER SYSTEM SET shared_buffers = '1GB';\nALTER SYSTEM SET effective_cache_size = '3GB';\nALTER SYSTEM SET work_mem = '16MB';\nALTER SYSTEM SET maintenance_work_mem = '256MB';\nALTER SYSTEM SET checkpoint_completion_target = 0.9;\nALTER SYSTEM SET wal_buffers = '16MB';\nALTER SYSTEM SET random_page_cost = 1.1;\n\n-- Mattermost-specific settings\nALTER DATABASE mattermost SET default_text_search_config = 'pg_catalog.english';\n\nSELECT pg_reload_conf();\nEOF\n\n# Configure PostgreSQL for Mattermost\nsudo tee -a /etc/postgresql/15/main/postgresql.conf > /dev/null <<EOF\n\n# Mattermost optimizations\nmax_connections = 300\nshared_preload_libraries = 'pg_stat_statements'\ntrack_activity_query_size = 2048\npg_stat_statements.track = all\nEOF\n\nsudo systemctl restart postgresql\n```\n\n### MySQL 8.0 Setup (Alternative)\n```bash\n# Install MySQL 8.0\nsudo apt install -y mysql-server\n\n# Secure installation\nsudo mysql_secure_installation\n\n# Create Mattermost database\nmysql -u root -p <<EOF\nCREATE DATABASE mattermost CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;\nCREATE USER 'mattermost'@'localhost' IDENTIFIED BY 'MattermostDBPassword2024!';\nGRANT ALL PRIVILEGES ON mattermost.* TO 'mattermost'@'localhost';\n\n-- MySQL optimization for Mattermost\nSET GLOBAL innodb_buffer_pool_size = 1073741824;  -- 1GB\nSET GLOBAL max_connections = 300;\nSET GLOBAL wait_timeout = 600;\nSET GLOBAL interactive_timeout = 600;\n\nFLUSH PRIVILEGES;\nEOF\n```\n\n## Production Configuration\n\n### Mattermost Server Configuration\n```bash\n# Create production configuration\nsudo tee /opt/mattermost/config/config.json > /dev/null <<'EOF'\n{\n  \"ServiceSettings\": {\n    \"SiteURL\": \"https://mattermost.example.com\",\n    \"WebsocketURL\": \"\",\n    \"LicenseFileLocation\": \"\",\n    \"ListenAddress\": \":8065\",\n    \"ConnectionSecurity\": \"\",\n    \"TLSCertFile\": \"\",\n    \"TLSKeyFile\": \"\",\n    \"TLSMinVer\": \"1.2\",\n    \"TLSStrictTransport\": false,\n    \"TLSStrictTransportMaxAge\": 63072000,\n    \"TLSOverwriteCiphers\": [],\n    \"UseLetsEncrypt\": false,\n    \"LetsEncryptCertificateCacheFile\": \"./config/letsencrypt.cache\",\n    \"Forward80To443\": false,\n    \"ReadTimeout\": 300,\n    \"WriteTimeout\": 300,\n    \"IdleTimeout\": 60,\n    \"MaximumLoginAttempts\": 10,\n    \"GoroutineHealthThreshold\": -1,\n    \"GoogleDeveloperKey\": \"\",\n    \"EnableBotAccountCreation\": false,\n    \"EnableUserAccessTokens\": false,\n    \"EnableLinkPreviews\": false,\n    \"EnableTesting\": false,\n    \"EnableDeveloper\": false,\n    \"EnableOpenTracing\": false,\n    \"EnableSecurityFixAlert\": true,\n    \"EnableInsecureOutgoingConnections\": false,\n    \"AllowedUntrustedInternalConnections\": \"\",\n    \"EnablePostSearch\": true,\n    \"EnableUserStatuses\": true,\n    \"ExperimentalEnableAuthenticationTransfer\": true,\n    \"ClusterLogTimeoutMilliseconds\": 2000,\n    \"CloseUnusedDirectMessages\": false,\n    \"EnablePreviewFeatures\": true,\n    \"EnableTutorial\": true,\n    \"ExperimentalEnableDefaultChannelLeaveJoinMessages\": true,\n    \"ExperimentalGroupUnreadChannels\": \"disabled\",\n    \"ExperimentalChannelOrganization\": false,\n    \"EnableAPITeamDeletion\": false,\n    \"ExperimentalEnableHardenedMode\": false,\n    \"DisableLegacyMFA\": true,\n    \"ExperimentalStrictCSRFEnforcement\": false,\n    \"EnableEmailInvitations\": false,\n    \"DisableBotsWhenOwnerIsDeactivated\": true,\n    \"EnableBotAccountCreation\": false,\n    \"EnableSVGs\": false,\n    \"EnableLatex\": false,\n    \"EnableLocalMode\": false,\n    \"LocalModeSocketLocation\": \"/var/tmp/mattermost_local.socket\",\n    \"EnableAWSMetering\": false,\n    \"SplitKey\": \"\",\n    \"FeatureFlagSyncIntervalSeconds\": 30,\n    \"DebugSplit\": false,\n    \"ThreadAutoFollow\": true,\n    \"ManagedResourcePaths\": \"\",\n    \"EnableLegacySidebar\": false,\n    \"CollapsedThreads\": \"default_off\"\n  },\n  \n  \"TeamSettings\": {\n    \"SiteName\": \"Mattermost\",\n    \"MaxUsersPerTeam\": 50000,\n    \"EnableTeamCreation\": false,\n    \"EnableUserCreation\": false,\n    \"EnableOpenServer\": false,\n    \"EnableUserDeactivation\": true,\n    \"RestrictCreationToDomains\": \"example.com\",\n    \"EnableCustomBrand\": false,\n    \"CustomBrandText\": \"\",\n    \"CustomDescriptionText\": \"\",\n    \"RestrictDirectMessage\": \"any\",\n    \"RestrictTeamInvite\": \"all\",\n    \"RestrictPublicChannelManagement\": \"all\",\n    \"RestrictPrivateChannelManagement\": \"all\",\n    \"RestrictPublicChannelCreation\": \"all\",\n    \"RestrictPrivateChannelCreation\": \"all\",\n    \"RestrictPublicChannelDeletion\": \"all\",\n    \"RestrictPrivateChannelDeletion\": \"all\",\n    \"RestrictPrivateChannelManageMembers\": \"all\",\n    \"EnableXToLeaveChannelsFromLHS\": false,\n    \"UserStatusAwayTimeout\": 300,\n    \"MaxChannelsPerTeam\": 50000,\n    \"MaxNotificationsPerChannel\": 1000000,\n    \"EnableConfirmNotificationsToChannel\": true,\n    \"TeammateNameDisplay\": \"username\",\n    \"ExperimentalViewArchivedChannels\": false,\n    \"ExperimentalEnableAutomaticReplies\": false,\n    \"ExperimentalHideTownSquareinLHS\": false,\n    \"ExperimentalTownSquareIsReadOnly\": false,\n    \"LockTeammateNameDisplay\": false,\n    \"ExperimentalPrimaryTeam\": \"\",\n    \"ExperimentalDefaultChannels\": []\n  },\n  \n  \"SqlSettings\": {\n    \"DriverName\": \"postgres\",\n    \"DataSource\": \"postgres://mattermost:MattermostDBPassword2024!@localhost:5432/mattermost?sslmode=disable&connect_timeout=10\",\n    \"DataSourceReplicas\": [],\n    \"DataSourceSearchReplicas\": [],\n    \"MaxIdleConns\": 20,\n    \"ConnMaxLifetimeMilliseconds\": 3600000,\n    \"ConnMaxIdleTimeMilliseconds\": 300000,\n    \"MaxOpenConns\": 300,\n    \"Trace\": false,\n    \"AtRestEncryptKey\": \"\",\n    \"QueryTimeout\": 30,\n    \"DisableDatabaseSearch\": false\n  },\n  \n  \"LogSettings\": {\n    \"EnableConsole\": true,\n    \"ConsoleLevel\": \"INFO\",\n    \"ConsoleJson\": true,\n    \"EnableFile\": true,\n    \"FileLevel\": \"INFO\",\n    \"FileJson\": true,\n    \"FileLocation\": \"/mattermost/logs/mattermost.log\",\n    \"EnableWebhookDebugging\": true,\n    \"EnableDiagnostics\": false,\n    \"EnableSentry\": false,\n    \"AdvancedLoggingConfig\": \"\"\n  },\n  \n  \"PasswordSettings\": {\n    \"MinimumLength\": 12,\n    \"Lowercase\": true,\n    \"Number\": true,\n    \"Uppercase\": true,\n    \"Symbol\": true\n  },\n  \n  \"FileSettings\": {\n    \"EnableFileAttachments\": true,\n    \"EnableMobileUpload\": true,\n    \"EnableMobileDownload\": true,\n    \"MaxFileSize\": 104857600,\n    \"DriverName\": \"local\",\n    \"Directory\": \"/opt/mattermost/data/\",\n    \"EnablePublicLink\": false,\n    \"ExtractContent\": true,\n    \"ArchiveRecursion\": false,\n    \"PublicLinkSalt\": \"\",\n    \"InitialFont\": \"nunito-bold.ttf\",\n    \"AmazonS3AccessKeyId\": \"\",\n    \"AmazonS3SecretAccessKey\": \"\",\n    \"AmazonS3Bucket\": \"\",\n    \"AmazonS3PathPrefix\": \"\",\n    \"AmazonS3Region\": \"\",\n    \"AmazonS3Endpoint\": \"\",\n    \"AmazonS3SSL\": true,\n    \"AmazonS3SignV2\": false,\n    \"AmazonS3SSE\": false,\n    \"AmazonS3Trace\": false\n  },\n  \n  \"EmailSettings\": {\n    \"EnableSignUpWithEmail\": false,\n    \"EnableSignInWithEmail\": true,\n    \"EnableSignInWithUsername\": true,\n    \"SendEmailNotifications\": true,\n    \"UseChannelInEmailNotifications\": false,\n    \"RequireEmailVerification\": true,\n    \"FeedbackName\": \"Mattermost\",\n    \"FeedbackEmail\": \"mattermost@example.com\",\n    \"ReplyToAddress\": \"mattermost@example.com\",\n    \"FeedbackOrganization\": \"\",\n    \"EnableSMTPAuth\": true,\n    \"SMTPUsername\": \"mattermost@example.com\",\n    \"SMTPPassword\": \"smtp_secure_password\",\n    \"SMTPServer\": \"smtp.example.com\",\n    \"SMTPPort\": \"587\",\n    \"SMTPServerTimeout\": 10,\n    \"ConnectionSecurity\": \"STARTTLS\",\n    \"SendPushNotifications\": true,\n    \"PushNotificationServer\": \"https://push.mattermost.com\",\n    \"PushNotificationContents\": \"generic\",\n    \"PushNotificationBuffer\": 1000\n  },\n  \n  \"RateLimitSettings\": {\n    \"Enable\": true,\n    \"PerSec\": 10,\n    \"MaxBurst\": 100,\n    \"MemoryStoreSize\": 10000,\n    \"VaryByRemoteAddr\": true,\n    \"VaryByUser\": false,\n    \"VaryByHeader\": \"\"\n  },\n  \n  \"PrivacySettings\": {\n    \"ShowEmailAddress\": false,\n    \"ShowFullName\": false\n  },\n  \n  \"SupportSettings\": {\n    \"TermsOfServiceLink\": \"https://mattermost.org/terms-of-service/\",\n    \"PrivacyPolicyLink\": \"https://mattermost.org/privacy-policy/\",\n    \"AboutLink\": \"https://about.mattermost.com/default-about/\",\n    \"HelpLink\": \"https://about.mattermost.com/default-help/\",\n    \"ReportAProblemLink\": \"https://about.mattermost.com/default-report-a-problem/\",\n    \"SupportEmail\": \"feedback@mattermost.com\",\n    \"CustomTermsOfServiceEnabled\": false,\n    \"CustomTermsOfServiceReAcceptancePeriod\": 365,\n    \"EnableAskCommunityLink\": true\n  },\n  \n  \"AnnouncementSettings\": {\n    \"EnableBanner\": false,\n    \"BannerText\": \"\",\n    \"BannerColor\": \"#f2a93b\",\n    \"BannerTextColor\": \"#333333\",\n    \"AllowBannerDismissal\": true\n  },\n  \n  \"ThemeSettings\": {\n    \"EnableThemeSelection\": true,\n    \"DefaultTheme\": \"default\",\n    \"AllowCustomThemes\": true,\n    \"AllowedThemes\": []\n  },\n  \n  \"GitLabSettings\": {\n    \"Enable\": false,\n    \"Secret\": \"\",\n    \"Id\": \"\",\n    \"Scope\": \"\",\n    \"AuthEndpoint\": \"\",\n    \"TokenEndpoint\": \"\",\n    \"UserApiEndpoint\": \"\"\n  },\n  \n  \"GoogleSettings\": {\n    \"Enable\": false,\n    \"Secret\": \"\",\n    \"Id\": \"\",\n    \"Scope\": \"profile email\",\n    \"AuthEndpoint\": \"https://accounts.google.com/o/oauth2/v2/auth\",\n    \"TokenEndpoint\": \"https://www.googleapis.com/oauth2/v4/token\",\n    \"UserApiEndpoint\": \"https://people.googleapis.com/v1/people/me?personFields=names%2CemailAddresses%2Cnicknames%2Cmetadata\"\n  },\n  \n  \"Office365Settings\": {\n    \"Enable\": false,\n    \"Secret\": \"\",\n    \"Id\": \"\",\n    \"Scope\": \"User.Read\",\n    \"AuthEndpoint\": \"https://login.microsoftonline.com/common/oauth2/v2.0/authorize\",\n    \"TokenEndpoint\": \"https://login.microsoftonline.com/common/oauth2/v2.0/token\",\n    \"UserApiEndpoint\": \"https://graph.microsoft.com/v1.0/me\",\n    \"Directory\": \"\"\n  },\n  \n  \"LdapSettings\": {\n    \"Enable\": false,\n    \"EnableSync\": false,\n    \"LdapServer\": \"ldap.example.com\",\n    \"LdapPort\": 636,\n    \"ConnectionSecurity\": \"TLS\",\n    \"BaseDN\": \"DC=example,DC=com\",\n    \"BindUsername\": \"CN=mattermost,OU=Service Accounts,DC=example,DC=com\",\n    \"BindPassword\": \"ldap_service_password\",\n    \"UserFilter\": \"\",\n    \"GroupFilter\": \"\",\n    \"GuestFilter\": \"\",\n    \"EnableAdminFilter\": true,\n    \"AdminFilter\": \"(memberOf=CN=Mattermost Admins,OU=Groups,DC=example,DC=com)\",\n    \"GroupDisplayNameAttribute\": \"cn\",\n    \"GroupIdAttribute\": \"cn\",\n    \"FirstNameAttribute\": \"givenName\",\n    \"LastNameAttribute\": \"sn\",\n    \"EmailAttribute\": \"mail\",\n    \"UsernameAttribute\": \"sAMAccountName\",\n    \"NicknameAttribute\": \"\",\n    \"IdAttribute\": \"objectGUID\",\n    \"PositionAttribute\": \"title\",\n    \"LoginIdAttribute\": \"sAMAccountName\",\n    \"PictureAttribute\": \"\",\n    \"SyncIntervalMinutes\": 60,\n    \"SkipCertificateVerification\": false,\n    \"PublicCertificateFile\": \"\",\n    \"PrivateKeyFile\": \"\",\n    \"QueryTimeout\": 60,\n    \"MaxPageSize\": 0,\n    \"LoginFieldName\": \"\",\n    \"LoginButtonColor\": \"#0000\",\n    \"LoginButtonBorderColor\": \"#2389D7\",\n    \"LoginButtonTextColor\": \"#2389D7\"\n  }\n}\nEOF\n\nsudo chown mattermost:mattermost /opt/mattermost/config/config.json\nsudo chmod 600 /opt/mattermost/config/config.json\n```\n\n### SystemD Service Configuration\n```bash\n# Create secure systemd service\nsudo tee /etc/systemd/system/mattermost.service > /dev/null <<EOF\n[Unit]\nDescription=Mattermost Team Communication Service\nAfter=network.target postgresql.service mysql.service\nWants=network.target\n\n[Service]\nType=notify\nUser=mattermost\nGroup=mattermost\nExecStart=/opt/mattermost/bin/mattermost\nWorkingDirectory=/opt/mattermost\nLimitNOFILE=49152\nRestart=always\nRestartSec=10\n\n# Security settings\nNoNewPrivileges=true\nPrivateTmp=true\nPrivateDevices=true\nProtectHome=true\nProtectSystem=strict\nReadWritePaths=/opt/mattermost/data /opt/mattermost/logs /opt/mattermost/config /opt/mattermost/plugins\nProtectKernelTunables=true\nProtectKernelModules=true\nProtectControlGroups=true\n\n# Resource limits\nMemoryMax=4G\nCPUQuota=200%\n\n[Install]\nWantedBy=multi-user.target\nEOF\n\nsudo systemctl daemon-reload\nsudo systemctl enable --now mattermost\n\n# Verify service status\nsudo systemctl status mattermost\n```\n\n## Security Hardening\n\n### NGINX Reverse Proxy with Security\n```bash\n# Create secure NGINX configuration\nsudo tee /etc/nginx/sites-available/mattermost > /dev/null <<EOF\n# Mattermost NGINX Configuration with Security Headers\n\nupstream mattermost {\n    server 127.0.0.1:8065;\n    keepalive 64;\n}\n\nproxy_cache_path /var/cache/nginx/mattermost levels=1:2 keys_zone=mattermost_cache:10m max_size=3g inactive=120m use_temp_path=off;\n\n# HTTP to HTTPS redirect\nserver {\n    listen 80;\n    server_name mattermost.example.com;\n    return 301 https://\\$server_name\\$request_uri;\n}\n\n# HTTPS server\nserver {\n    listen 443 ssl http2;\n    server_name mattermost.example.com;\n\n    # SSL configuration\n    ssl_certificate /etc/letsencrypt/live/mattermost.example.com/fullchain.pem;\n    ssl_certificate_key /etc/letsencrypt/live/mattermost.example.com/privkey.pem;\n    ssl_protocols TLSv1.2 TLSv1.3;\n    ssl_ciphers ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384;\n    ssl_prefer_server_ciphers off;\n    ssl_session_cache shared:SSL:50m;\n    ssl_session_timeout 1d;\n    ssl_session_tickets off;\n\n    # Security headers\n    add_header Strict-Transport-Security \"max-age=31536000; includeSubDomains\" always;\n    add_header X-Content-Type-Options nosniff always;\n    add_header X-Frame-Options DENY always;\n    add_header X-XSS-Protection \"1; mode=block\" always;\n    add_header Referrer-Policy \"strict-origin-when-cross-origin\" always;\n    add_header Content-Security-Policy \"frame-ancestors 'none'\" always;\n\n    # Rate limiting\n    limit_req_zone \\$binary_remote_addr zone=mattermost_ratelimit:10m rate=10r/s;\n    limit_req zone=mattermost_ratelimit burst=20 nodelay;\n\n    # Max upload size for file attachments\n    client_max_body_size 50M;\n\n    location ~ /api/v[0-9]+/(users/)?websocket\\$ {\n        proxy_set_header Upgrade \\$http_upgrade;\n        proxy_set_header Connection \"upgrade\";\n        client_max_body_size 50M;\n        proxy_set_header Host \\$http_host;\n        proxy_set_header X-Real-IP \\$remote_addr;\n        proxy_set_header X-Forwarded-For \\$proxy_add_x_forwarded_for;\n        proxy_set_header X-Forwarded-Proto \\$scheme;\n        proxy_set_header X-Frame-Options SAMEORIGIN;\n        proxy_buffers 256 16k;\n        proxy_buffer_size 16k;\n        client_body_timeout 60;\n        send_timeout 300;\n        lingering_timeout 5;\n        proxy_connect_timeout 90;\n        proxy_send_timeout 300;\n        proxy_read_timeout 90s;\n        proxy_pass http://mattermost;\n    }\n\n    location / {\n        client_max_body_size 50M;\n        proxy_set_header Connection \"\";\n        proxy_set_header Host \\$http_host;\n        proxy_set_header X-Real-IP \\$remote_addr;\n        proxy_set_header X-Forwarded-For \\$proxy_add_x_forwarded_for;\n        proxy_set_header X-Forwarded-Proto \\$scheme;\n        proxy_set_header X-Frame-Options SAMEORIGIN;\n        proxy_buffers 256 16k;\n        proxy_buffer_size 16k;\n        proxy_read_timeout 600s;\n        proxy_cache mattermost_cache;\n        proxy_cache_revalidate on;\n        proxy_cache_min_uses 2;\n        proxy_cache_use_stale timeout;\n        proxy_cache_lock on;\n        proxy_http_version 1.1;\n        proxy_pass http://mattermost;\n    }\n}\nEOF\n\n# Enable site and install SSL\nsudo ln -s /etc/nginx/sites-available/mattermost /etc/nginx/sites-enabled/\nsudo certbot --nginx -d mattermost.example.com\nsudo nginx -t && sudo systemctl reload nginx\n```\n\n### Advanced Security Configuration\n```bash\n# Configure fail2ban for Mattermost\nsudo tee /etc/fail2ban/filter.d/mattermost.conf > /dev/null <<EOF\n[Definition]\nfailregex = ^.*\"level\":\"error\".*\"msg\":\"Invalid login attempt\".*\"user_id\":\"[^\"]*\".*\"ip\":\"<HOST>\"\nignoreregex =\nEOF\n\nsudo tee /etc/fail2ban/jail.d/mattermost.conf > /dev/null <<EOF\n[mattermost]\nenabled = true\nport = http,https\nfilter = mattermost\nlogpath = /opt/mattermost/logs/mattermost.log\nmaxretry = 5\nbantime = 3600\nfindtime = 600\naction = iptables-multiport[name=Mattermost, port=\"http,https\", protocol=tcp]\nEOF\n\nsudo systemctl restart fail2ban\n```\n\n## Backup and Monitoring\n\n### Backup Strategy\n```bash\nsudo tee /usr/local/bin/mattermost-backup.sh > /dev/null <<'EOF'\n#!/bin/bash\nBACKUP_DIR=\"/backup/mattermost\"\nDATE=$(date +%Y%m%d_%H%M%S)\n\nmkdir -p ${BACKUP_DIR}/{database,config,data,plugins}\n\necho \"Starting Mattermost backup...\"\n\n# Stop Mattermost service\nsystemctl stop mattermost\n\n# Backup database\nsudo -u postgres pg_dump mattermost > ${BACKUP_DIR}/database/mattermost-${DATE}.sql\ngzip ${BACKUP_DIR}/database/mattermost-${DATE}.sql\n\n# Backup configuration\ncp /opt/mattermost/config/config.json ${BACKUP_DIR}/config/config-${DATE}.json\n\n# Backup user data and files\ntar -czf ${BACKUP_DIR}/data/mattermost-data-${DATE}.tar.gz -C /opt/mattermost data/\n\n# Backup plugins\nif [ -d \"/opt/mattermost/plugins\" ]; then\n    tar -czf ${BACKUP_DIR}/plugins/mattermost-plugins-${DATE}.tar.gz -C /opt/mattermost plugins/\nfi\n\n# Start Mattermost\nsystemctl start mattermost\n\n# Upload to cloud storage\naws s3 cp ${BACKUP_DIR}/ s3://mattermost-backups/ --recursive\ngsutil cp -r ${BACKUP_DIR}/* gs://mattermost-backups/\n\n# Keep last 7 backups\nfind ${BACKUP_DIR} -name \"mattermost-*\" -type f -mtime +7 -delete\n\necho \"Mattermost backup completed: ${DATE}\"\nEOF\n\nsudo chmod +x /usr/local/bin/mattermost-backup.sh\necho \"0 2 * * * root /usr/local/bin/mattermost-backup.sh\" | sudo tee -a /etc/crontab\n```\n\n### Health Monitoring\n```bash\nsudo tee /usr/local/bin/mattermost-health.sh > /dev/null <<'EOF'\n#!/bin/bash\nHEALTH_LOG=\"/var/log/mattermost-health.log\"\n\nlog_message() {\n    echo \"$(date '+%Y-%m-%d %H:%M:%S') - $1\" | tee -a ${HEALTH_LOG}\n}\n\n# Check service status\nif systemctl is-active mattermost >/dev/null 2>&1; then\n    log_message \"âœ“ Mattermost service is running\"\nelse\n    log_message \"âœ— Mattermost service is not running\"\n    exit 1\nfi\n\n# Check web interface\nHTTP_STATUS=$(curl -s -o /dev/null -w \"%{http_code}\" http://localhost:8065/api/v4/system/ping)\nif [ \"${HTTP_STATUS}\" = \"200\" ]; then\n    log_message \"âœ“ Mattermost API is responding\"\nelse\n    log_message \"âœ— Mattermost API issues (HTTP ${HTTP_STATUS})\"\nfi\n\n# Check database connectivity\nDB_STATUS=$(curl -s http://localhost:8065/api/v4/database/ping | jq -r '.database_status' 2>/dev/null)\nif [ \"$DB_STATUS\" = \"OK\" ]; then\n    log_message \"âœ“ Database connection healthy\"\nelse\n    log_message \"âš  Database connection issues\"\nfi\n\n# Check disk space\nDISK_USAGE=$(df /opt/mattermost | awk 'NR==2 {print $5}' | sed 's/%//')\nif [ ${DISK_USAGE} -gt 85 ]; then\n    log_message \"âš  High disk usage: ${DISK_USAGE}%\"\nelse\n    log_message \"âœ“ Disk usage: ${DISK_USAGE}%\"\nfi\n\nlog_message \"Mattermost health check completed\"\nEOF\n\nsudo chmod +x /usr/local/bin/mattermost-health.sh\necho \"*/15 * * * * root /usr/local/bin/mattermost-health.sh\" | sudo tee -a /etc/crontab\n```\n\n## Troubleshooting\n\n### Common Issues and Solutions\n```bash\n# Check Mattermost service status\nsudo systemctl status mattermost\nsudo journalctl -u mattermost -f\n\n# Check Mattermost logs\nsudo tail -f /opt/mattermost/logs/mattermost.log\n\n# Test API connectivity\ncurl -i http://localhost:8065/api/v4/system/ping\n\n# Check database connection\nsudo -u postgres psql mattermost -c \"SELECT version();\"\n\n# Check file permissions\nls -la /opt/mattermost/\nsudo chown -R mattermost:mattermost /opt/mattermost\n\n# Memory usage\nps aux --sort=-%mem | grep mattermost\npmap -x $(pgrep mattermost)\n\n# Network connectivity\nss -tulpn | grep 8065\nnetstat -tulpn | grep mattermost\n\n# Configuration validation\n/opt/mattermost/bin/mattermost config validate\n\n# Reset admin password (CLI)\nsudo -u mattermost /opt/mattermost/bin/mattermost user password admin new_password\n\n# Check plugin status\nsudo -u mattermost /opt/mattermost/bin/mattermost plugin list\n\n# Database migration (if needed)\nsudo -u mattermost /opt/mattermost/bin/mattermost db migrate\n\n# Clear cache\nsudo rm -rf /opt/mattermost/data/cache/*\nsudo systemctl restart mattermost\n```\n\n## Additional Resources\n\n- [Mattermost Documentation](https://docs.mattermost.com/)\n- [Installation Guide](https://docs.mattermost.com/guides/deployment.html)\n- [Security Guide](https://docs.mattermost.com/overview/security.html)\n- [Admin Guide](https://docs.mattermost.com/guides/administration.html)\n- [Mattermost Community](https://community.mattermost.com/)\n\n---\n\n**Note:** This guide is part of the [HowToMgr](https://howtomgr.github.io) collection.","readmeHtml":"<h1 id=\"mattermost-installation-guide\" class=\"mobile-header\">Mattermost Installation Guide</h1>\n<p class=\"mobile-paragraph\">Open-source, self-hosted team communication platform with enterprise-grade security. Complete alternative to Slack with advanced features for secure collaboration, workflow automation, and integrated voice/video calling.</p>\n<h2 id=\"prerequisites\" class=\"mobile-header\">Prerequisites</h2>\n<li class=\"mobile-list-item\">Linux system (any modern distribution)</li>\n<li class=\"mobile-list-item\">Root or sudo access</li>\n<li class=\"mobile-list-item\">4GB RAM minimum, 8GB+ recommended for production</li>\n<li class=\"mobile-list-item\">PostgreSQL 11+ or MySQL 8.0+ database</li>\n<li class=\"mobile-list-item\">NGINX reverse proxy (recommended for production)</li>\n<li class=\"mobile-list-item\">Domain name and SSL certificate for HTTPS</li>\n<h2 id=\"installation\" class=\"mobile-header\">Installation</h2>\n<h3 id=\"ubuntudebian-recommended\" class=\"mobile-header\">Ubuntu/Debian (Recommended)</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Update system packages\nsudo apt update &amp;&amp; sudo apt upgrade -y\n\n# Download latest Mattermost server\nMATTERMOST_VERSION=&quot;9.2.4&quot;  # Check for latest at https://mattermost.com/download\nwget https://releases.mattermost.com/${MATTERMOST_VERSION}/mattermost-${MATTERMOST_VERSION}-linux-amd64.tar.gz\n\n# Extract and install\ntar -xzf mattermost-${MATTERMOST_VERSION}-linux-amd64.tar.gz\nsudo mv mattermost /opt/\n\n# Create system user\nsudo useradd --system --user-group mattermost\nsudo chown -R mattermost:mattermost /opt/mattermost\n\n# Create data directory\nsudo mkdir -p /opt/mattermost/data\nsudo chown mattermost:mattermost /opt/mattermost/data\nsudo chmod 755 /opt/mattermost/data\n\n# Set proper permissions\nsudo find /opt/mattermost -type d -exec chmod 755 {} \\;\nsudo find /opt/mattermost -type f -exec chmod 644 {} \\;\nsudo chmod +x /opt/mattermost/bin/mattermost\n\n# Create log directory\nsudo mkdir -p /var/log/mattermost\nsudo chown mattermost:mattermost /var/log/mattermost</code></pre>\n      </div>\n    </div>\n<h3 id=\"rhelcentosrocky-linuxalmalinux\" class=\"mobile-header\">RHEL/CentOS/Rocky Linux/AlmaLinux</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Install prerequisites\nsudo yum update -y\nsudo yum install -y wget tar\n\n# Download and install Mattermost\nMATTERMOST_VERSION=&quot;9.2.4&quot;\nwget https://releases.mattermost.com/${MATTERMOST_VERSION}/mattermost-${MATTERMOST_VERSION}-linux-amd64.tar.gz\ntar -xzf mattermost-${MATTERMOST_VERSION}-linux-amd64.tar.gz\nsudo mv mattermost /opt/\n\n# Create system user and directories\nsudo useradd --system --user-group mattermost\nsudo chown -R mattermost:mattermost /opt/mattermost\nsudo mkdir -p /opt/mattermost/data /var/log/mattermost\nsudo chown mattermost:mattermost /opt/mattermost/data /var/log/mattermost\n\n# Configure firewall\nsudo firewall-cmd --permanent --add-port=8065/tcp\nsudo firewall-cmd --reload</code></pre>\n      </div>\n    </div>\n<h3 id=\"docker-installation-production-ready\" class=\"mobile-header\">Docker Installation (Production Ready)</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Create Mattermost directory structure\nmkdir -p ~/mattermost/{config,data,logs,plugins,client-plugins}\n\n# Create Docker Compose configuration\ncat &gt; ~/mattermost/docker-compose.yml &lt;&lt;EOF\nversion: &#039;3.8&#039;\n\nservices:\n  postgres:\n    image: postgres:15-alpine\n    container_name: mattermost-postgres\n    restart: unless-stopped\n    environment:\n      - POSTGRES_DB=mattermost\n      - POSTGRES_USER=mattermost\n      - POSTGRES_PASSWORD=secure_postgres_password_2024\n      - POSTGRES_INITDB_ARGS=&quot;--encoding=UTF8 --lc-collate=C --lc-ctype=C&quot;\n    volumes:\n      - postgres_data:/var/lib/postgresql/data\n      - ./postgres-custom.conf:/etc/postgresql/postgresql.conf\n    networks:\n      - mattermost\n    security_opt:\n      - no-new-privileges:true\n    read_only: true\n    tmpfs:\n      - /tmp\n      - /var/run/postgresql\n\n  mattermost:\n    image: mattermost/mattermost-enterprise-edition:latest\n    container_name: mattermost\n    restart: unless-stopped\n    depends_on:\n      - postgres\n    environment:\n      # Database settings\n      - MM_SQLSETTINGS_DRIVERNAME=postgres\n      - MM_SQLSETTINGS_DATASOURCE=postgres://mattermost:secure_postgres_password_2024@postgres:5432/mattermost?sslmode=disable&amp;connect_timeout=10\n      \n      # Server settings\n      - MM_SERVICESETTINGS_SITEURL=https://mattermost.example.com\n      - MM_SERVICESETTINGS_LISTENADDRESS=:8000\n      - MM_SERVICESETTINGS_ENABLELINKPREVIEWS=true\n      - MM_SERVICESETTINGS_ENABLEDEVELOPER=false\n      - MM_SERVICESETTINGS_ENABLESECURITYFIXALERT=true\n      - MM_SERVICESETTINGS_ENABLEINSECUREOUTGOINGCONNECTIONS=false\n      \n      # File settings\n      - MM_FILESETTINGS_MAXFILESIZE=104857600  # 100MB\n      - MM_FILESETTINGS_DRIVERNAME=local\n      - MM_FILESETTINGS_DIRECTORY=/mattermost/data\n      \n      # Email settings (configure SMTP)\n      - MM_EMAILSETTINGS_ENABLESIGNUPWITHEMAIL=false\n      - MM_EMAILSETTINGS_ENABLESIGNINWITHEMAIL=true\n      - MM_EMAILSETTINGS_ENABLESIGNINWITHUSERNAME=true\n      - MM_EMAILSETTINGS_SMTPSERVER=smtp.example.com\n      - MM_EMAILSETTINGS_SMTPPORT=587\n      - MM_EMAILSETTINGS_SMTPUSERNAME=mattermost@example.com\n      - MM_EMAILSETTINGS_SMTPPASSWORD=smtp_secure_password\n      - MM_EMAILSETTINGS_ENABLESMTPAUTH=true\n      - MM_EMAILSETTINGS_CONNECTIONSECURITY=STARTTLS\n      \n      # Security settings\n      - MM_TEAMSETTINGS_ENABLEOPENSERVER=false\n      - MM_TEAMSETTINGS_ENABLEUSERCREATION=false\n      - MM_TEAMSETTINGS_RESTRICTCREATIONTODOMAIN=example.com\n      - MM_PASSWORDSETTINGS_MINIMUMLENGTH=12\n      - MM_PASSWORDSETTINGS_REQUIRELOWERCASE=true\n      - MM_PASSWORDSETTINGS_REQUIREUPPERCASE=true\n      - MM_PASSWORDSETTINGS_REQUIRENUMBER=true\n      - MM_PASSWORDSETTINGS_REQUIRESYMBOL=true\n      \n      # Session settings\n      - MM_SESSIONSETTINGS_SESSIONLENGTHWEBINHOURS=720  # 30 days\n      - MM_SESSIONSETTINGS_SESSIONLENGTHMOBILEINHOURS=720\n      - MM_SESSIONSETTINGS_ENABLEUSERACCESSTOKENS=false\n      \n      # Rate limiting\n      - MM_RATELIMITSETTINGS_ENABLE=true\n      - MM_RATELIMITSETTINGS_PERSEC=10\n      - MM_RATELIMITSETTINGS_MAXBURST=100\n      \n      # Privacy settings\n      - MM_PRIVACYSETTINGS_SHOWEMAILADDRESS=false\n      - MM_PRIVACYSETTINGS_SHOWFULLNAME=false\n      \n      # Logging\n      - MM_LOGSETTINGS_ENABLECONSOLE=true\n      - MM_LOGSETTINGS_CONSOLELEVEL=INFO\n      - MM_LOGSETTINGS_ENABLEFILE=true\n      - MM_LOGSETTINGS_FILELEVEL=INFO\n      - MM_LOGSETTINGS_FILELOCATION=/mattermost/logs/mattermost.log\n      \n    volumes:\n      - ./config:/mattermost/config:rw\n      - ./data:/mattermost/data:rw\n      - ./logs:/mattermost/logs:rw\n      - ./plugins:/mattermost/plugins:rw\n      - ./client-plugins:/mattermost/client/plugins:rw\n    ports:\n      - &quot;127.0.0.1:8065:8000&quot;  # Bind to localhost only\n    networks:\n      - mattermost\n    security_opt:\n      - no-new-privileges:true\n    read_only: true\n    tmpfs:\n      - /tmp\n\nnetworks:\n  mattermost:\n    driver: bridge\n\nvolumes:\n  postgres_data:\nEOF\n\n# Start Mattermost stack\ncd ~/mattermost\ndocker-compose up -d\n\n# Check logs\ndocker-compose logs -f mattermost</code></pre>\n      </div>\n    </div>\n<h3 id=\"kubernetes-installation-enterprise\" class=\"mobile-header\">Kubernetes Installation (Enterprise)</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Install Mattermost Operator\nkubectl create namespace mattermost-operator\n\n# Install via Helm\nhelm repo add mattermost https://helm.mattermost.com\nhelm repo update\n\nhelm install mattermost-operator mattermost/mattermost-operator \\\n  --namespace mattermost-operator \\\n  --set image.tag=v2.0.0\n\n# Create Mattermost cluster configuration\ncat &gt; mattermost-cluster.yaml &lt;&lt;EOF\napiVersion: mattermost.com/v1alpha1\nkind: Mattermost\nmetadata:\n  name: mattermost\n  namespace: mattermost\nspec:\n  size: 1000users  # Adjust based on user count\n  ingressName: mattermost.example.com\n  version: v9.2.4\n  \n  database:\n    external:\n      url: &quot;postgres://mattermost:secure_password@postgres.example.com:5432/mattermost?sslmode=require&quot;\n  \n  fileStore:\n    external:\n      url: &quot;s3://mattermost-files&quot;\n      bucket: &quot;mattermost-files&quot;\n      region: &quot;us-west-2&quot;\n      \n  elasticSearch:\n    host: &quot;elasticsearch.example.com:9200&quot;\n    username: &quot;mattermost&quot;\n    password: &quot;elasticsearch_password&quot;\n    \n  blueGreen:\n    enable: true\n    productionDeployment: blue\n    \n  resourceRequests:\n    cpu: &quot;1000m&quot;\n    memory: &quot;2Gi&quot;\n    \n  resourceLimits:\n    cpu: &quot;2000m&quot; \n    memory: &quot;4Gi&quot;\n    \n  affinity:\n    podAntiAffinity:\n      requiredDuringSchedulingIgnoredDuringExecution:\n        - labelSelector:\n            matchExpressions:\n              - key: app\n                operator: In\n                values:\n                  - mattermost\n          topologyKey: kubernetes.io/hostname\n          \n  livenessProbe:\n    httpGet:\n      path: /api/v4/system/ping\n      port: 8000\n    initialDelaySeconds: 30\n    periodSeconds: 10\n    \n  readinessProbe:\n    httpGet:\n      path: /api/v4/system/ping\n      port: 8000\n    initialDelaySeconds: 15\n    periodSeconds: 5\nEOF\n\nkubectl apply -f mattermost-cluster.yaml</code></pre>\n      </div>\n    </div>\n<h2 id=\"database-configuration\" class=\"mobile-header\">Database Configuration</h2>\n<h3 id=\"postgresql-setup-recommended\" class=\"mobile-header\">PostgreSQL Setup (Recommended)</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Install PostgreSQL 15\nsudo apt install -y postgresql-15 postgresql-client-15\n\n# Create Mattermost database and user\nsudo -u postgres psql &lt;&lt;EOF\nCREATE DATABASE mattermost WITH ENCODING &#039;UTF8&#039; LC_COLLATE=&#039;en_US.UTF-8&#039; LC_CTYPE=&#039;en_US.UTF-8&#039; TEMPLATE=template0;\nCREATE USER mattermost WITH ENCRYPTED PASSWORD &#039;MattermostDBPassword2024!&#039;;\nGRANT ALL PRIVILEGES ON DATABASE mattermost TO mattermost;\n\n-- Performance optimization for Mattermost\nALTER SYSTEM SET shared_buffers = &#039;1GB&#039;;\nALTER SYSTEM SET effective_cache_size = &#039;3GB&#039;;\nALTER SYSTEM SET work_mem = &#039;16MB&#039;;\nALTER SYSTEM SET maintenance_work_mem = &#039;256MB&#039;;\nALTER SYSTEM SET checkpoint_completion_target = 0.9;\nALTER SYSTEM SET wal_buffers = &#039;16MB&#039;;\nALTER SYSTEM SET random_page_cost = 1.1;\n\n-- Mattermost-specific settings\nALTER DATABASE mattermost SET default_text_search_config = &#039;pg_catalog.english&#039;;\n\nSELECT pg_reload_conf();\nEOF\n\n# Configure PostgreSQL for Mattermost\nsudo tee -a /etc/postgresql/15/main/postgresql.conf &gt; /dev/null &lt;&lt;EOF\n\n# Mattermost optimizations\nmax_connections = 300\nshared_preload_libraries = &#039;pg_stat_statements&#039;\ntrack_activity_query_size = 2048\npg_stat_statements.track = all\nEOF\n\nsudo systemctl restart postgresql</code></pre>\n      </div>\n    </div>\n<h3 id=\"mysql-80-setup-alternative\" class=\"mobile-header\">MySQL 8.0 Setup (Alternative)</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Install MySQL 8.0\nsudo apt install -y mysql-server\n\n# Secure installation\nsudo mysql_secure_installation\n\n# Create Mattermost database\nmysql -u root -p &lt;&lt;EOF\nCREATE DATABASE mattermost CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;\nCREATE USER &#039;mattermost&#039;@&#039;localhost&#039; IDENTIFIED BY &#039;MattermostDBPassword2024!&#039;;\nGRANT ALL PRIVILEGES ON mattermost.* TO &#039;mattermost&#039;@&#039;localhost&#039;;\n\n-- MySQL optimization for Mattermost\nSET GLOBAL innodb_buffer_pool_size = 1073741824;  -- 1GB\nSET GLOBAL max_connections = 300;\nSET GLOBAL wait_timeout = 600;\nSET GLOBAL interactive_timeout = 600;\n\nFLUSH PRIVILEGES;\nEOF</code></pre>\n      </div>\n    </div>\n<h2 id=\"production-configuration\" class=\"mobile-header\">Production Configuration</h2>\n<h3 id=\"mattermost-server-configuration\" class=\"mobile-header\">Mattermost Server Configuration</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Create production configuration\nsudo tee /opt/mattermost/config/config.json &gt; /dev/null &lt;&lt;&#039;EOF&#039;\n{\n  &quot;ServiceSettings&quot;: {\n    &quot;SiteURL&quot;: &quot;https://mattermost.example.com&quot;,\n    &quot;WebsocketURL&quot;: &quot;&quot;,\n    &quot;LicenseFileLocation&quot;: &quot;&quot;,\n    &quot;ListenAddress&quot;: &quot;:8065&quot;,\n    &quot;ConnectionSecurity&quot;: &quot;&quot;,\n    &quot;TLSCertFile&quot;: &quot;&quot;,\n    &quot;TLSKeyFile&quot;: &quot;&quot;,\n    &quot;TLSMinVer&quot;: &quot;1.2&quot;,\n    &quot;TLSStrictTransport&quot;: false,\n    &quot;TLSStrictTransportMaxAge&quot;: 63072000,\n    &quot;TLSOverwriteCiphers&quot;: [],\n    &quot;UseLetsEncrypt&quot;: false,\n    &quot;LetsEncryptCertificateCacheFile&quot;: &quot;./config/letsencrypt.cache&quot;,\n    &quot;Forward80To443&quot;: false,\n    &quot;ReadTimeout&quot;: 300,\n    &quot;WriteTimeout&quot;: 300,\n    &quot;IdleTimeout&quot;: 60,\n    &quot;MaximumLoginAttempts&quot;: 10,\n    &quot;GoroutineHealthThreshold&quot;: -1,\n    &quot;GoogleDeveloperKey&quot;: &quot;&quot;,\n    &quot;EnableBotAccountCreation&quot;: false,\n    &quot;EnableUserAccessTokens&quot;: false,\n    &quot;EnableLinkPreviews&quot;: false,\n    &quot;EnableTesting&quot;: false,\n    &quot;EnableDeveloper&quot;: false,\n    &quot;EnableOpenTracing&quot;: false,\n    &quot;EnableSecurityFixAlert&quot;: true,\n    &quot;EnableInsecureOutgoingConnections&quot;: false,\n    &quot;AllowedUntrustedInternalConnections&quot;: &quot;&quot;,\n    &quot;EnablePostSearch&quot;: true,\n    &quot;EnableUserStatuses&quot;: true,\n    &quot;ExperimentalEnableAuthenticationTransfer&quot;: true,\n    &quot;ClusterLogTimeoutMilliseconds&quot;: 2000,\n    &quot;CloseUnusedDirectMessages&quot;: false,\n    &quot;EnablePreviewFeatures&quot;: true,\n    &quot;EnableTutorial&quot;: true,\n    &quot;ExperimentalEnableDefaultChannelLeaveJoinMessages&quot;: true,\n    &quot;ExperimentalGroupUnreadChannels&quot;: &quot;disabled&quot;,\n    &quot;ExperimentalChannelOrganization&quot;: false,\n    &quot;EnableAPITeamDeletion&quot;: false,\n    &quot;ExperimentalEnableHardenedMode&quot;: false,\n    &quot;DisableLegacyMFA&quot;: true,\n    &quot;ExperimentalStrictCSRFEnforcement&quot;: false,\n    &quot;EnableEmailInvitations&quot;: false,\n    &quot;DisableBotsWhenOwnerIsDeactivated&quot;: true,\n    &quot;EnableBotAccountCreation&quot;: false,\n    &quot;EnableSVGs&quot;: false,\n    &quot;EnableLatex&quot;: false,\n    &quot;EnableLocalMode&quot;: false,\n    &quot;LocalModeSocketLocation&quot;: &quot;/var/tmp/mattermost_local.socket&quot;,\n    &quot;EnableAWSMetering&quot;: false,\n    &quot;SplitKey&quot;: &quot;&quot;,\n    &quot;FeatureFlagSyncIntervalSeconds&quot;: 30,\n    &quot;DebugSplit&quot;: false,\n    &quot;ThreadAutoFollow&quot;: true,\n    &quot;ManagedResourcePaths&quot;: &quot;&quot;,\n    &quot;EnableLegacySidebar&quot;: false,\n    &quot;CollapsedThreads&quot;: &quot;default_off&quot;\n  },\n  \n  &quot;TeamSettings&quot;: {\n    &quot;SiteName&quot;: &quot;Mattermost&quot;,\n    &quot;MaxUsersPerTeam&quot;: 50000,\n    &quot;EnableTeamCreation&quot;: false,\n    &quot;EnableUserCreation&quot;: false,\n    &quot;EnableOpenServer&quot;: false,\n    &quot;EnableUserDeactivation&quot;: true,\n    &quot;RestrictCreationToDomains&quot;: &quot;example.com&quot;,\n    &quot;EnableCustomBrand&quot;: false,\n    &quot;CustomBrandText&quot;: &quot;&quot;,\n    &quot;CustomDescriptionText&quot;: &quot;&quot;,\n    &quot;RestrictDirectMessage&quot;: &quot;any&quot;,\n    &quot;RestrictTeamInvite&quot;: &quot;all&quot;,\n    &quot;RestrictPublicChannelManagement&quot;: &quot;all&quot;,\n    &quot;RestrictPrivateChannelManagement&quot;: &quot;all&quot;,\n    &quot;RestrictPublicChannelCreation&quot;: &quot;all&quot;,\n    &quot;RestrictPrivateChannelCreation&quot;: &quot;all&quot;,\n    &quot;RestrictPublicChannelDeletion&quot;: &quot;all&quot;,\n    &quot;RestrictPrivateChannelDeletion&quot;: &quot;all&quot;,\n    &quot;RestrictPrivateChannelManageMembers&quot;: &quot;all&quot;,\n    &quot;EnableXToLeaveChannelsFromLHS&quot;: false,\n    &quot;UserStatusAwayTimeout&quot;: 300,\n    &quot;MaxChannelsPerTeam&quot;: 50000,\n    &quot;MaxNotificationsPerChannel&quot;: 1000000,\n    &quot;EnableConfirmNotificationsToChannel&quot;: true,\n    &quot;TeammateNameDisplay&quot;: &quot;username&quot;,\n    &quot;ExperimentalViewArchivedChannels&quot;: false,\n    &quot;ExperimentalEnableAutomaticReplies&quot;: false,\n    &quot;ExperimentalHideTownSquareinLHS&quot;: false,\n    &quot;ExperimentalTownSquareIsReadOnly&quot;: false,\n    &quot;LockTeammateNameDisplay&quot;: false,\n    &quot;ExperimentalPrimaryTeam&quot;: &quot;&quot;,\n    &quot;ExperimentalDefaultChannels&quot;: []\n  },\n  \n  &quot;SqlSettings&quot;: {\n    &quot;DriverName&quot;: &quot;postgres&quot;,\n    &quot;DataSource&quot;: &quot;postgres://mattermost:MattermostDBPassword2024!@localhost:5432/mattermost?sslmode=disable&amp;connect_timeout=10&quot;,\n    &quot;DataSourceReplicas&quot;: [],\n    &quot;DataSourceSearchReplicas&quot;: [],\n    &quot;MaxIdleConns&quot;: 20,\n    &quot;ConnMaxLifetimeMilliseconds&quot;: 3600000,\n    &quot;ConnMaxIdleTimeMilliseconds&quot;: 300000,\n    &quot;MaxOpenConns&quot;: 300,\n    &quot;Trace&quot;: false,\n    &quot;AtRestEncryptKey&quot;: &quot;&quot;,\n    &quot;QueryTimeout&quot;: 30,\n    &quot;DisableDatabaseSearch&quot;: false\n  },\n  \n  &quot;LogSettings&quot;: {\n    &quot;EnableConsole&quot;: true,\n    &quot;ConsoleLevel&quot;: &quot;INFO&quot;,\n    &quot;ConsoleJson&quot;: true,\n    &quot;EnableFile&quot;: true,\n    &quot;FileLevel&quot;: &quot;INFO&quot;,\n    &quot;FileJson&quot;: true,\n    &quot;FileLocation&quot;: &quot;/mattermost/logs/mattermost.log&quot;,\n    &quot;EnableWebhookDebugging&quot;: true,\n    &quot;EnableDiagnostics&quot;: false,\n    &quot;EnableSentry&quot;: false,\n    &quot;AdvancedLoggingConfig&quot;: &quot;&quot;\n  },\n  \n  &quot;PasswordSettings&quot;: {\n    &quot;MinimumLength&quot;: 12,\n    &quot;Lowercase&quot;: true,\n    &quot;Number&quot;: true,\n    &quot;Uppercase&quot;: true,\n    &quot;Symbol&quot;: true\n  },\n  \n  &quot;FileSettings&quot;: {\n    &quot;EnableFileAttachments&quot;: true,\n    &quot;EnableMobileUpload&quot;: true,\n    &quot;EnableMobileDownload&quot;: true,\n    &quot;MaxFileSize&quot;: 104857600,\n    &quot;DriverName&quot;: &quot;local&quot;,\n    &quot;Directory&quot;: &quot;/opt/mattermost/data/&quot;,\n    &quot;EnablePublicLink&quot;: false,\n    &quot;ExtractContent&quot;: true,\n    &quot;ArchiveRecursion&quot;: false,\n    &quot;PublicLinkSalt&quot;: &quot;&quot;,\n    &quot;InitialFont&quot;: &quot;nunito-bold.ttf&quot;,\n    &quot;AmazonS3AccessKeyId&quot;: &quot;&quot;,\n    &quot;AmazonS3SecretAccessKey&quot;: &quot;&quot;,\n    &quot;AmazonS3Bucket&quot;: &quot;&quot;,\n    &quot;AmazonS3PathPrefix&quot;: &quot;&quot;,\n    &quot;AmazonS3Region&quot;: &quot;&quot;,\n    &quot;AmazonS3Endpoint&quot;: &quot;&quot;,\n    &quot;AmazonS3SSL&quot;: true,\n    &quot;AmazonS3SignV2&quot;: false,\n    &quot;AmazonS3SSE&quot;: false,\n    &quot;AmazonS3Trace&quot;: false\n  },\n  \n  &quot;EmailSettings&quot;: {\n    &quot;EnableSignUpWithEmail&quot;: false,\n    &quot;EnableSignInWithEmail&quot;: true,\n    &quot;EnableSignInWithUsername&quot;: true,\n    &quot;SendEmailNotifications&quot;: true,\n    &quot;UseChannelInEmailNotifications&quot;: false,\n    &quot;RequireEmailVerification&quot;: true,\n    &quot;FeedbackName&quot;: &quot;Mattermost&quot;,\n    &quot;FeedbackEmail&quot;: &quot;mattermost@example.com&quot;,\n    &quot;ReplyToAddress&quot;: &quot;mattermost@example.com&quot;,\n    &quot;FeedbackOrganization&quot;: &quot;&quot;,\n    &quot;EnableSMTPAuth&quot;: true,\n    &quot;SMTPUsername&quot;: &quot;mattermost@example.com&quot;,\n    &quot;SMTPPassword&quot;: &quot;smtp_secure_password&quot;,\n    &quot;SMTPServer&quot;: &quot;smtp.example.com&quot;,\n    &quot;SMTPPort&quot;: &quot;587&quot;,\n    &quot;SMTPServerTimeout&quot;: 10,\n    &quot;ConnectionSecurity&quot;: &quot;STARTTLS&quot;,\n    &quot;SendPushNotifications&quot;: true,\n    &quot;PushNotificationServer&quot;: &quot;https://push.mattermost.com&quot;,\n    &quot;PushNotificationContents&quot;: &quot;generic&quot;,\n    &quot;PushNotificationBuffer&quot;: 1000\n  },\n  \n  &quot;RateLimitSettings&quot;: {\n    &quot;Enable&quot;: true,\n    &quot;PerSec&quot;: 10,\n    &quot;MaxBurst&quot;: 100,\n    &quot;MemoryStoreSize&quot;: 10000,\n    &quot;VaryByRemoteAddr&quot;: true,\n    &quot;VaryByUser&quot;: false,\n    &quot;VaryByHeader&quot;: &quot;&quot;\n  },\n  \n  &quot;PrivacySettings&quot;: {\n    &quot;ShowEmailAddress&quot;: false,\n    &quot;ShowFullName&quot;: false\n  },\n  \n  &quot;SupportSettings&quot;: {\n    &quot;TermsOfServiceLink&quot;: &quot;https://mattermost.org/terms-of-service/&quot;,\n    &quot;PrivacyPolicyLink&quot;: &quot;https://mattermost.org/privacy-policy/&quot;,\n    &quot;AboutLink&quot;: &quot;https://about.mattermost.com/default-about/&quot;,\n    &quot;HelpLink&quot;: &quot;https://about.mattermost.com/default-help/&quot;,\n    &quot;ReportAProblemLink&quot;: &quot;https://about.mattermost.com/default-report-a-problem/&quot;,\n    &quot;SupportEmail&quot;: &quot;feedback@mattermost.com&quot;,\n    &quot;CustomTermsOfServiceEnabled&quot;: false,\n    &quot;CustomTermsOfServiceReAcceptancePeriod&quot;: 365,\n    &quot;EnableAskCommunityLink&quot;: true\n  },\n  \n  &quot;AnnouncementSettings&quot;: {\n    &quot;EnableBanner&quot;: false,\n    &quot;BannerText&quot;: &quot;&quot;,\n    &quot;BannerColor&quot;: &quot;#f2a93b&quot;,\n    &quot;BannerTextColor&quot;: &quot;#333333&quot;,\n    &quot;AllowBannerDismissal&quot;: true\n  },\n  \n  &quot;ThemeSettings&quot;: {\n    &quot;EnableThemeSelection&quot;: true,\n    &quot;DefaultTheme&quot;: &quot;default&quot;,\n    &quot;AllowCustomThemes&quot;: true,\n    &quot;AllowedThemes&quot;: []\n  },\n  \n  &quot;GitLabSettings&quot;: {\n    &quot;Enable&quot;: false,\n    &quot;Secret&quot;: &quot;&quot;,\n    &quot;Id&quot;: &quot;&quot;,\n    &quot;Scope&quot;: &quot;&quot;,\n    &quot;AuthEndpoint&quot;: &quot;&quot;,\n    &quot;TokenEndpoint&quot;: &quot;&quot;,\n    &quot;UserApiEndpoint&quot;: &quot;&quot;\n  },\n  \n  &quot;GoogleSettings&quot;: {\n    &quot;Enable&quot;: false,\n    &quot;Secret&quot;: &quot;&quot;,\n    &quot;Id&quot;: &quot;&quot;,\n    &quot;Scope&quot;: &quot;profile email&quot;,\n    &quot;AuthEndpoint&quot;: &quot;https://accounts.google.com/o/oauth2/v2/auth&quot;,\n    &quot;TokenEndpoint&quot;: &quot;https://www.googleapis.com/oauth2/v4/token&quot;,\n    &quot;UserApiEndpoint&quot;: &quot;https://people.googleapis.com/v1/people/me?personFields=names%2CemailAddresses%2Cnicknames%2Cmetadata&quot;\n  },\n  \n  &quot;Office365Settings&quot;: {\n    &quot;Enable&quot;: false,\n    &quot;Secret&quot;: &quot;&quot;,\n    &quot;Id&quot;: &quot;&quot;,\n    &quot;Scope&quot;: &quot;User.Read&quot;,\n    &quot;AuthEndpoint&quot;: &quot;https://login.microsoftonline.com/common/oauth2/v2.0/authorize&quot;,\n    &quot;TokenEndpoint&quot;: &quot;https://login.microsoftonline.com/common/oauth2/v2.0/token&quot;,\n    &quot;UserApiEndpoint&quot;: &quot;https://graph.microsoft.com/v1.0/me&quot;,\n    &quot;Directory&quot;: &quot;&quot;\n  },\n  \n  &quot;LdapSettings&quot;: {\n    &quot;Enable&quot;: false,\n    &quot;EnableSync&quot;: false,\n    &quot;LdapServer&quot;: &quot;ldap.example.com&quot;,\n    &quot;LdapPort&quot;: 636,\n    &quot;ConnectionSecurity&quot;: &quot;TLS&quot;,\n    &quot;BaseDN&quot;: &quot;DC=example,DC=com&quot;,\n    &quot;BindUsername&quot;: &quot;CN=mattermost,OU=Service Accounts,DC=example,DC=com&quot;,\n    &quot;BindPassword&quot;: &quot;ldap_service_password&quot;,\n    &quot;UserFilter&quot;: &quot;&quot;,\n    &quot;GroupFilter&quot;: &quot;&quot;,\n    &quot;GuestFilter&quot;: &quot;&quot;,\n    &quot;EnableAdminFilter&quot;: true,\n    &quot;AdminFilter&quot;: &quot;(memberOf=CN=Mattermost Admins,OU=Groups,DC=example,DC=com)&quot;,\n    &quot;GroupDisplayNameAttribute&quot;: &quot;cn&quot;,\n    &quot;GroupIdAttribute&quot;: &quot;cn&quot;,\n    &quot;FirstNameAttribute&quot;: &quot;givenName&quot;,\n    &quot;LastNameAttribute&quot;: &quot;sn&quot;,\n    &quot;EmailAttribute&quot;: &quot;mail&quot;,\n    &quot;UsernameAttribute&quot;: &quot;sAMAccountName&quot;,\n    &quot;NicknameAttribute&quot;: &quot;&quot;,\n    &quot;IdAttribute&quot;: &quot;objectGUID&quot;,\n    &quot;PositionAttribute&quot;: &quot;title&quot;,\n    &quot;LoginIdAttribute&quot;: &quot;sAMAccountName&quot;,\n    &quot;PictureAttribute&quot;: &quot;&quot;,\n    &quot;SyncIntervalMinutes&quot;: 60,\n    &quot;SkipCertificateVerification&quot;: false,\n    &quot;PublicCertificateFile&quot;: &quot;&quot;,\n    &quot;PrivateKeyFile&quot;: &quot;&quot;,\n    &quot;QueryTimeout&quot;: 60,\n    &quot;MaxPageSize&quot;: 0,\n    &quot;LoginFieldName&quot;: &quot;&quot;,\n    &quot;LoginButtonColor&quot;: &quot;#0000&quot;,\n    &quot;LoginButtonBorderColor&quot;: &quot;#2389D7&quot;,\n    &quot;LoginButtonTextColor&quot;: &quot;#2389D7&quot;\n  }\n}\nEOF\n\nsudo chown mattermost:mattermost /opt/mattermost/config/config.json\nsudo chmod 600 /opt/mattermost/config/config.json</code></pre>\n      </div>\n    </div>\n<h3 id=\"systemd-service-configuration\" class=\"mobile-header\">SystemD Service Configuration</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Create secure systemd service\nsudo tee /etc/systemd/system/mattermost.service &gt; /dev/null &lt;&lt;EOF\n[Unit]\nDescription=Mattermost Team Communication Service\nAfter=network.target postgresql.service mysql.service\nWants=network.target\n\n[Service]\nType=notify\nUser=mattermost\nGroup=mattermost\nExecStart=/opt/mattermost/bin/mattermost\nWorkingDirectory=/opt/mattermost\nLimitNOFILE=49152\nRestart=always\nRestartSec=10\n\n# Security settings\nNoNewPrivileges=true\nPrivateTmp=true\nPrivateDevices=true\nProtectHome=true\nProtectSystem=strict\nReadWritePaths=/opt/mattermost/data /opt/mattermost/logs /opt/mattermost/config /opt/mattermost/plugins\nProtectKernelTunables=true\nProtectKernelModules=true\nProtectControlGroups=true\n\n# Resource limits\nMemoryMax=4G\nCPUQuota=200%\n\n[Install]\nWantedBy=multi-user.target\nEOF\n\nsudo systemctl daemon-reload\nsudo systemctl enable --now mattermost\n\n# Verify service status\nsudo systemctl status mattermost</code></pre>\n      </div>\n    </div>\n<h2 id=\"security-hardening\" class=\"mobile-header\">Security Hardening</h2>\n<h3 id=\"nginx-reverse-proxy-with-security\" class=\"mobile-header\">NGINX Reverse Proxy with Security</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Create secure NGINX configuration\nsudo tee /etc/nginx/sites-available/mattermost &gt; /dev/null &lt;&lt;EOF\n# Mattermost NGINX Configuration with Security Headers\n\nupstream mattermost {\n    server 127.0.0.1:8065;\n    keepalive 64;\n}\n\nproxy_cache_path /var/cache/nginx/mattermost levels=1:2 keys_zone=mattermost_cache:10m max_size=3g inactive=120m use_temp_path=off;\n\n# HTTP to HTTPS redirect\nserver {\n    listen 80;\n    server_name mattermost.example.com;\n    return 301 https://\\$server_name\\$request_uri;\n}\n\n# HTTPS server\nserver {\n    listen 443 ssl http2;\n    server_name mattermost.example.com;\n\n    # SSL configuration\n    ssl_certificate /etc/letsencrypt/live/mattermost.example.com/fullchain.pem;\n    ssl_certificate_key /etc/letsencrypt/live/mattermost.example.com/privkey.pem;\n    ssl_protocols TLSv1.2 TLSv1.3;\n    ssl_ciphers ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384;\n    ssl_prefer_server_ciphers off;\n    ssl_session_cache shared:SSL:50m;\n    ssl_session_timeout 1d;\n    ssl_session_tickets off;\n\n    # Security headers\n    add_header Strict-Transport-Security &quot;max-age=31536000; includeSubDomains&quot; always;\n    add_header X-Content-Type-Options nosniff always;\n    add_header X-Frame-Options DENY always;\n    add_header X-XSS-Protection &quot;1; mode=block&quot; always;\n    add_header Referrer-Policy &quot;strict-origin-when-cross-origin&quot; always;\n    add_header Content-Security-Policy &quot;frame-ancestors &#039;none&#039;&quot; always;\n\n    # Rate limiting\n    limit_req_zone \\$binary_remote_addr zone=mattermost_ratelimit:10m rate=10r/s;\n    limit_req zone=mattermost_ratelimit burst=20 nodelay;\n\n    # Max upload size for file attachments\n    client_max_body_size 50M;\n\n    location ~ /api/v[0-9]+/(users/)?websocket\\$ {\n        proxy_set_header Upgrade \\$http_upgrade;\n        proxy_set_header Connection &quot;upgrade&quot;;\n        client_max_body_size 50M;\n        proxy_set_header Host \\$http_host;\n        proxy_set_header X-Real-IP \\$remote_addr;\n        proxy_set_header X-Forwarded-For \\$proxy_add_x_forwarded_for;\n        proxy_set_header X-Forwarded-Proto \\$scheme;\n        proxy_set_header X-Frame-Options SAMEORIGIN;\n        proxy_buffers 256 16k;\n        proxy_buffer_size 16k;\n        client_body_timeout 60;\n        send_timeout 300;\n        lingering_timeout 5;\n        proxy_connect_timeout 90;\n        proxy_send_timeout 300;\n        proxy_read_timeout 90s;\n        proxy_pass http://mattermost;\n    }\n\n    location / {\n        client_max_body_size 50M;\n        proxy_set_header Connection &quot;&quot;;\n        proxy_set_header Host \\$http_host;\n        proxy_set_header X-Real-IP \\$remote_addr;\n        proxy_set_header X-Forwarded-For \\$proxy_add_x_forwarded_for;\n        proxy_set_header X-Forwarded-Proto \\$scheme;\n        proxy_set_header X-Frame-Options SAMEORIGIN;\n        proxy_buffers 256 16k;\n        proxy_buffer_size 16k;\n        proxy_read_timeout 600s;\n        proxy_cache mattermost_cache;\n        proxy_cache_revalidate on;\n        proxy_cache_min_uses 2;\n        proxy_cache_use_stale timeout;\n        proxy_cache_lock on;\n        proxy_http_version 1.1;\n        proxy_pass http://mattermost;\n    }\n}\nEOF\n\n# Enable site and install SSL\nsudo ln -s /etc/nginx/sites-available/mattermost /etc/nginx/sites-enabled/\nsudo certbot --nginx -d mattermost.example.com\nsudo nginx -t &amp;&amp; sudo systemctl reload nginx</code></pre>\n      </div>\n    </div>\n<h3 id=\"advanced-security-configuration\" class=\"mobile-header\">Advanced Security Configuration</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Configure fail2ban for Mattermost\nsudo tee /etc/fail2ban/filter.d/mattermost.conf &gt; /dev/null &lt;&lt;EOF\n[Definition]\nfailregex = ^.*&quot;level&quot;:&quot;error&quot;.*&quot;msg&quot;:&quot;Invalid login attempt&quot;.*&quot;user_id&quot;:&quot;[^&quot;]*&quot;.*&quot;ip&quot;:&quot;&lt;HOST&gt;&quot;\nignoreregex =\nEOF\n\nsudo tee /etc/fail2ban/jail.d/mattermost.conf &gt; /dev/null &lt;&lt;EOF\n[mattermost]\nenabled = true\nport = http,https\nfilter = mattermost\nlogpath = /opt/mattermost/logs/mattermost.log\nmaxretry = 5\nbantime = 3600\nfindtime = 600\naction = iptables-multiport[name=Mattermost, port=&quot;http,https&quot;, protocol=tcp]\nEOF\n\nsudo systemctl restart fail2ban</code></pre>\n      </div>\n    </div>\n<h2 id=\"backup-and-monitoring\" class=\"mobile-header\">Backup and Monitoring</h2>\n<h3 id=\"backup-strategy\" class=\"mobile-header\">Backup Strategy</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\">sudo tee /usr/local/bin/mattermost-backup.sh &gt; /dev/null &lt;&lt;&#039;EOF&#039;\n#!/bin/bash\nBACKUP_DIR=&quot;/backup/mattermost&quot;\nDATE=$(date +%Y%m%d_%H%M%S)\n\nmkdir -p ${BACKUP_DIR}/{database,config,data,plugins}\n\necho &quot;Starting Mattermost backup...&quot;\n\n# Stop Mattermost service\nsystemctl stop mattermost\n\n# Backup database\nsudo -u postgres pg_dump mattermost &gt; ${BACKUP_DIR}/database/mattermost-${DATE}.sql\ngzip ${BACKUP_DIR}/database/mattermost-${DATE}.sql\n\n# Backup configuration\ncp /opt/mattermost/config/config.json ${BACKUP_DIR}/config/config-${DATE}.json\n\n# Backup user data and files\ntar -czf ${BACKUP_DIR}/data/mattermost-data-${DATE}.tar.gz -C /opt/mattermost data/\n\n# Backup plugins\nif [ -d &quot;/opt/mattermost/plugins&quot; ]; then\n    tar -czf ${BACKUP_DIR}/plugins/mattermost-plugins-${DATE}.tar.gz -C /opt/mattermost plugins/\nfi\n\n# Start Mattermost\nsystemctl start mattermost\n\n# Upload to cloud storage\naws s3 cp ${BACKUP_DIR}/ s3://mattermost-backups/ --recursive\ngsutil cp -r ${BACKUP_DIR}/* gs://mattermost-backups/\n\n# Keep last 7 backups\nfind ${BACKUP_DIR} -name &quot;mattermost-*&quot; -type f -mtime +7 -delete\n\necho &quot;Mattermost backup completed: ${DATE}&quot;\nEOF\n\nsudo chmod +x /usr/local/bin/mattermost-backup.sh\necho &quot;0 2 * * * root /usr/local/bin/mattermost-backup.sh&quot; | sudo tee -a /etc/crontab</code></pre>\n      </div>\n    </div>\n<h3 id=\"health-monitoring\" class=\"mobile-header\">Health Monitoring</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\">sudo tee /usr/local/bin/mattermost-health.sh &gt; /dev/null &lt;&lt;&#039;EOF&#039;\n#!/bin/bash\nHEALTH_LOG=&quot;/var/log/mattermost-health.log&quot;\n\nlog_message() {\n    echo &quot;$(date &#039;+%Y-%m-%d %H:%M:%S&#039;) - $1&quot; | tee -a ${HEALTH_LOG}\n}\n\n# Check service status\nif systemctl is-active mattermost &gt;/dev/null 2&gt;&amp;1; then\n    log_message &quot;âœ“ Mattermost service is running&quot;\nelse\n    log_message &quot;âœ— Mattermost service is not running&quot;\n    exit 1\nfi\n\n# Check web interface\nHTTP_STATUS=$(curl -s -o /dev/null -w &quot;%{http_code}&quot; http://localhost:8065/api/v4/system/ping)\nif [ &quot;${HTTP_STATUS}&quot; = &quot;200&quot; ]; then\n    log_message &quot;âœ“ Mattermost API is responding&quot;\nelse\n    log_message &quot;âœ— Mattermost API issues (HTTP ${HTTP_STATUS})&quot;\nfi\n\n# Check database connectivity\nDB_STATUS=$(curl -s http://localhost:8065/api/v4/database/ping | jq -r &#039;.database_status&#039; 2&gt;/dev/null)\nif [ &quot;$DB_STATUS&quot; = &quot;OK&quot; ]; then\n    log_message &quot;âœ“ Database connection healthy&quot;\nelse\n    log_message &quot;âš  Database connection issues&quot;\nfi\n\n# Check disk space\nDISK_USAGE=$(df /opt/mattermost | awk &#039;NR==2 {print $5}&#039; | sed &#039;s/%//&#039;)\nif [ ${DISK_USAGE} -gt 85 ]; then\n    log_message &quot;âš  High disk usage: ${DISK_USAGE}%&quot;\nelse\n    log_message &quot;âœ“ Disk usage: ${DISK_USAGE}%&quot;\nfi\n\nlog_message &quot;Mattermost health check completed&quot;\nEOF\n\nsudo chmod +x /usr/local/bin/mattermost-health.sh\necho &quot;*/15 * * * * root /usr/local/bin/mattermost-health.sh&quot; | sudo tee -a /etc/crontab</code></pre>\n      </div>\n    </div>\n<h2 id=\"troubleshooting\" class=\"mobile-header\">Troubleshooting</h2>\n<h3 id=\"common-issues-and-solutions\" class=\"mobile-header\">Common Issues and Solutions</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Check Mattermost service status\nsudo systemctl status mattermost\nsudo journalctl -u mattermost -f\n\n# Check Mattermost logs\nsudo tail -f /opt/mattermost/logs/mattermost.log\n\n# Test API connectivity\ncurl -i http://localhost:8065/api/v4/system/ping\n\n# Check database connection\nsudo -u postgres psql mattermost -c &quot;SELECT version();&quot;\n\n# Check file permissions\nls -la /opt/mattermost/\nsudo chown -R mattermost:mattermost /opt/mattermost\n\n# Memory usage\nps aux --sort=-%mem | grep mattermost\npmap -x $(pgrep mattermost)\n\n# Network connectivity\nss -tulpn | grep 8065\nnetstat -tulpn | grep mattermost\n\n# Configuration validation\n/opt/mattermost/bin/mattermost config validate\n\n# Reset admin password (CLI)\nsudo -u mattermost /opt/mattermost/bin/mattermost user password admin new_password\n\n# Check plugin status\nsudo -u mattermost /opt/mattermost/bin/mattermost plugin list\n\n# Database migration (if needed)\nsudo -u mattermost /opt/mattermost/bin/mattermost db migrate\n\n# Clear cache\nsudo rm -rf /opt/mattermost/data/cache/*\nsudo systemctl restart mattermost</code></pre>\n      </div>\n    </div>\n<h2 id=\"additional-resources\" class=\"mobile-header\">Additional Resources</h2>\n<li class=\"mobile-list-item\"><a href=\"https://docs.mattermost.com/\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">Mattermost Documentation</a></li>\n<li class=\"mobile-list-item\"><a href=\"https://docs.mattermost.com/guides/deployment.html\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">Installation Guide</a></li>\n<li class=\"mobile-list-item\"><a href=\"https://docs.mattermost.com/overview/security.html\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">Security Guide</a></li>\n<li class=\"mobile-list-item\"><a href=\"https://docs.mattermost.com/guides/administration.html\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">Admin Guide</a></li>\n<li class=\"mobile-list-item\"><a href=\"https://community.mattermost.com/\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">Mattermost Community</a></li>\n<p class=\"mobile-paragraph\">---</p>\n<p class=\"mobile-paragraph\"><strong>Note:</strong> This guide is part of the <a href=\"https://howtomgr.github.io\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">HowToMgr</a> collection.</p>","readTime":"12 min","wordCount":2308,"lastBuilt":"2025-09-14T18:12:04.483Z"},{"name":"mce","displayName":"Mce","slug":"mce","description":"Repo for mce","category":"infrastructure","language":null,"stars":0,"forks":0,"topics":[],"githubUrl":"https://github.com/howtomgr/mce","updatedAt":"2025-09-08T03:10:56Z","createdAt":"2023-08-28T03:48:56Z","readmeRaw":"# CouchPotato/HeadPhones/SickRage/Plex/Emby install\n\n## CentOS/RedHat/SL 7\n\n```bash\nyum groupinstall -y \"Development Tools\"\nyum -y install curl gcc gettext git libmediainfo libzen mediainfo p7zip par2cmdline python-configobj sqlite tar unzip wget unrar\n\nmkdir -p /mnt/media /mnt/torrents\necho \"\n10.0.254.1:/mnt/Volume_1/media           /mnt/media                   nfs defaults,rw 0 0\n10.0.254.1:/mnt/Volume_1/torrents        /mnt/torrents                nfs defaults,rw 0 0\n\" >> /etc/fstab\nmount -a\n```\n\n### CouchPotato\n\n```bash\nyum install -y transmission-daemon\nrm -Rf /usr/src/python2 /usr/src/python3\ngit clone https://git.casjay.in/interpreters/python2.git /usr/src/python2\ncd /usr/src/python2 && ./build.sh && cd\n\ngit clone https://git.casjay.in/mirrors/couchpotato.git /var/lib/couchpotato\ngit clone https://git.casjay.in/systems/couchpotato.git /tmp/couchpotato\n\nmkdir -p /var/lib/couchpotato && cd /var/lib/couchpotato\n/usr/local/bin/python2.7 -m virtualenv .\nsource /var/lib/couchpotato/bin/activate\n/var/lib/couchpotato/bin/python -m pip install cheetah cryptography sabyenc --upgrade\n/var/lib/couchpotato/bin/python -m pip install -r /tmp/couchpotato/requirements.txt\ndeactivate\n\ncd ~\n\ncp -Rfv /tmp/couchpotato/{etc,root,var}* /\nsystemctl disable transmission-daemon --now\nsystemctl enable couchpotato couchpotato-bt httpd nginx smb nmb --now\n\nrm -Rf /usr/src/python2 /usr/src/python3 /tmp/couchpotato/ \n\nmunin-node-configure --remove-also --shell | sh\nsystemctl restart munin-node httpd nginx\nhistory -c && history -w && exit\n\n```\n\n### HeadPhones\n\n```bash\nyum install -y transmission-daemon\nrm -Rf /usr/src/python2 /usr/src/python3\ngit clone https://git.casjay.in/interpreters/python2.git /usr/src/python2\ncd /usr/src/python2 && ./build.sh && cd\n\ngit clone https://git.casjay.in/mirrors/headphones.git /var/lib/headphones\ngit clone https://git.casjay.in/systems/headphones.git /tmp/headphones\n\nmkdir -p /var/lib/headphones && cd /var/lib/headphones\n/usr/local/bin/python2.7 -m virtualenv .\nsource /var/lib/headphones/bin/activate\n/var/lib/headphones/bin/python -m pip install cheetah cryptography sabyenc --upgrade\n/var/lib/headphones/bin/python -m pip install -r /tmp/headphones/requirements.txt\ndeactivate\n\ncd ~\n\ncp -Rfv /tmp/headphones/{etc,root,var}* /\nsystemctl disable transmission-daemon --now\nsystemctl enable headphones headphones-bt httpd nginx smb nmb --now\n\nrm -Rf /usr/src/python2 /usr/src/python3 /tmp/headphones/ \n\nmunin-node-configure --remove-also --shell | sh\nsystemctl restart munin-node httpd nginx\nhistory -c && history -w && exit\n\n```\n\n### SickRage\n\n```bash\nyum install -y transmission-daemon\nrm -Rf /usr/src/python2 /usr/src/python3\ngit clone https://git.casjay.in/interpreters/python2.git /usr/src/python2\ncd /usr/src/python2 && ./build.sh && cd\n\ngit clone https://git.casjay.in/mirrors/sickrage.git /var/lib/sickrage\ngit clone https://git.casjay.in/systems/sickrage.git /tmp/sickrage\n\nmkdir -p /var/lib/sickrage && cd /var/lib/sickrage\n/usr/local/bin/python2.7 -m virtualenv .\nsource /var/lib/sickrage/bin/activate\n/var/lib/sickrage/bin/python -m pip install cheetah cryptography sabyenc --upgrade\n/var/lib/sickrage/bin/python -m pip install -r /tmp/sickrage/requirements.txt\ndeactivate\n\ncd ~\n\ncp -Rfv /tmp/sickrage/{etc,root,var}* /\nsystemctl disable transmission-daemon --now\nsystemctl enable sickrage sickrage-bt httpd nginx smb nmb --now\n\nrm -Rf /usr/src/python2 /usr/src/python3 /tmp/sickrage/ \n\nmunin-node-configure --remove-also --shell | sh\nsystemctl restart munin-node httpd nginx\nhistory -c && history -w && exit\n\n```\n\n### Plex\n\n```bash\nyum install ffmpeg\nyum install -y https://downloads.plex.tv/plex-media-server/1.14.0.5470-9d51fdfaa/plexmediaserver-1.14.0.5470-9d51fdfaa.x86_64.rpm \ngo to http://yourserverip:32400/ and configure it\n\nOptional stats for plex [Tautulli]\nrm -Rf /usr/src/python2 /usr/src/python3\ngit clone https://git.casjay.in/interpreters/python2.git /usr/src/python2\ncd /usr/src/python2 && ./build.sh && cd\ngit clone https://git.casjay.in/mirrors/Plex-Tautulli.git /var/lib/tautulli\ngit clone https://git.casjay.in/mirrors/plex.git /tmp/plex\ncp -Rf /tmp/plex/{etc,root,var}* /\n```\n\n### Emby\n\n```bash\nyum install ffmpeg\nyum install -y https://github.com/MediaBrowser/Emby.Releases/releases/download/3.5.3.0/emby-server-rpm_3.5.3.0_x86_64.rpm\ngo to http://yourserverip:8096/ and configure it\n\n```\n\n### Airsonic\n\n```bash\nmkdir -p /var/airsonic\nyum install java-1.8.0-openjdk-headless -y\nwget https://github.com/airsonic/airsonic/raw/main/contrib/airsonic.service -O /etc/systemd/system/airsonic.service\nwget https://github.com/airsonic/airsonic/releases/download/v10.1.2/airsonic.war -O /var/airsonic/airsonic.war\nmkdir -p /mnt/media\necho \" 10.0.254.1:/mnt/Volume_1/media           /mnt/media                   nfs defaults,rw 0 0\" >> /etc/fstab\nmount -a\n\n```\n","readmeHtml":"<h1 id=\"couchpotatoheadphonessickrageplexemby-install\" class=\"mobile-header\">CouchPotato/HeadPhones/SickRage/Plex/Emby install</h1>\n<h2 id=\"centosredhatsl-7\" class=\"mobile-header\">CentOS/RedHat/SL 7</h2>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\">yum groupinstall -y &quot;Development Tools&quot;\nyum -y install curl gcc gettext git libmediainfo libzen mediainfo p7zip par2cmdline python-configobj sqlite tar unzip wget unrar\n\nmkdir -p /mnt/media /mnt/torrents\necho &quot;\n10.0.254.1:/mnt/Volume_1/media           /mnt/media                   nfs defaults,rw 0 0\n10.0.254.1:/mnt/Volume_1/torrents        /mnt/torrents                nfs defaults,rw 0 0\n&quot; &gt;&gt; /etc/fstab\nmount -a</code></pre>\n      </div>\n    </div>\n<h3 id=\"couchpotato\" class=\"mobile-header\">CouchPotato</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\">yum install -y transmission-daemon\nrm -Rf /usr/src/python2 /usr/src/python3\ngit clone https://git.casjay.in/interpreters/python2.git /usr/src/python2\ncd /usr/src/python2 &amp;&amp; ./build.sh &amp;&amp; cd\n\ngit clone https://git.casjay.in/mirrors/couchpotato.git /var/lib/couchpotato\ngit clone https://git.casjay.in/systems/couchpotato.git /tmp/couchpotato\n\nmkdir -p /var/lib/couchpotato &amp;&amp; cd /var/lib/couchpotato\n/usr/local/bin/python2.7 -m virtualenv .\nsource /var/lib/couchpotato/bin/activate\n/var/lib/couchpotato/bin/python -m pip install cheetah cryptography sabyenc --upgrade\n/var/lib/couchpotato/bin/python -m pip install -r /tmp/couchpotato/requirements.txt\ndeactivate\n\ncd ~\n\ncp -Rfv /tmp/couchpotato/{etc,root,var}* /\nsystemctl disable transmission-daemon --now\nsystemctl enable couchpotato couchpotato-bt httpd nginx smb nmb --now\n\nrm -Rf /usr/src/python2 /usr/src/python3 /tmp/couchpotato/ \n\nmunin-node-configure --remove-also --shell | sh\nsystemctl restart munin-node httpd nginx\nhistory -c &amp;&amp; history -w &amp;&amp; exit\n</code></pre>\n      </div>\n    </div>\n<h3 id=\"headphones\" class=\"mobile-header\">HeadPhones</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\">yum install -y transmission-daemon\nrm -Rf /usr/src/python2 /usr/src/python3\ngit clone https://git.casjay.in/interpreters/python2.git /usr/src/python2\ncd /usr/src/python2 &amp;&amp; ./build.sh &amp;&amp; cd\n\ngit clone https://git.casjay.in/mirrors/headphones.git /var/lib/headphones\ngit clone https://git.casjay.in/systems/headphones.git /tmp/headphones\n\nmkdir -p /var/lib/headphones &amp;&amp; cd /var/lib/headphones\n/usr/local/bin/python2.7 -m virtualenv .\nsource /var/lib/headphones/bin/activate\n/var/lib/headphones/bin/python -m pip install cheetah cryptography sabyenc --upgrade\n/var/lib/headphones/bin/python -m pip install -r /tmp/headphones/requirements.txt\ndeactivate\n\ncd ~\n\ncp -Rfv /tmp/headphones/{etc,root,var}* /\nsystemctl disable transmission-daemon --now\nsystemctl enable headphones headphones-bt httpd nginx smb nmb --now\n\nrm -Rf /usr/src/python2 /usr/src/python3 /tmp/headphones/ \n\nmunin-node-configure --remove-also --shell | sh\nsystemctl restart munin-node httpd nginx\nhistory -c &amp;&amp; history -w &amp;&amp; exit\n</code></pre>\n      </div>\n    </div>\n<h3 id=\"sickrage\" class=\"mobile-header\">SickRage</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\">yum install -y transmission-daemon\nrm -Rf /usr/src/python2 /usr/src/python3\ngit clone https://git.casjay.in/interpreters/python2.git /usr/src/python2\ncd /usr/src/python2 &amp;&amp; ./build.sh &amp;&amp; cd\n\ngit clone https://git.casjay.in/mirrors/sickrage.git /var/lib/sickrage\ngit clone https://git.casjay.in/systems/sickrage.git /tmp/sickrage\n\nmkdir -p /var/lib/sickrage &amp;&amp; cd /var/lib/sickrage\n/usr/local/bin/python2.7 -m virtualenv .\nsource /var/lib/sickrage/bin/activate\n/var/lib/sickrage/bin/python -m pip install cheetah cryptography sabyenc --upgrade\n/var/lib/sickrage/bin/python -m pip install -r /tmp/sickrage/requirements.txt\ndeactivate\n\ncd ~\n\ncp -Rfv /tmp/sickrage/{etc,root,var}* /\nsystemctl disable transmission-daemon --now\nsystemctl enable sickrage sickrage-bt httpd nginx smb nmb --now\n\nrm -Rf /usr/src/python2 /usr/src/python3 /tmp/sickrage/ \n\nmunin-node-configure --remove-also --shell | sh\nsystemctl restart munin-node httpd nginx\nhistory -c &amp;&amp; history -w &amp;&amp; exit\n</code></pre>\n      </div>\n    </div>\n<h3 id=\"plex\" class=\"mobile-header\">Plex</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\">yum install ffmpeg\nyum install -y https://downloads.plex.tv/plex-media-server/1.14.0.5470-9d51fdfaa/plexmediaserver-1.14.0.5470-9d51fdfaa.x86_64.rpm \ngo to http://yourserverip:32400/ and configure it\n\nOptional stats for plex [Tautulli]\nrm -Rf /usr/src/python2 /usr/src/python3\ngit clone https://git.casjay.in/interpreters/python2.git /usr/src/python2\ncd /usr/src/python2 &amp;&amp; ./build.sh &amp;&amp; cd\ngit clone https://git.casjay.in/mirrors/Plex-Tautulli.git /var/lib/tautulli\ngit clone https://git.casjay.in/mirrors/plex.git /tmp/plex\ncp -Rf /tmp/plex/{etc,root,var}* /</code></pre>\n      </div>\n    </div>\n<h3 id=\"emby\" class=\"mobile-header\">Emby</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\">yum install ffmpeg\nyum install -y https://github.com/MediaBrowser/Emby.Releases/releases/download/3.5.3.0/emby-server-rpm_3.5.3.0_x86_64.rpm\ngo to http://yourserverip:8096/ and configure it\n</code></pre>\n      </div>\n    </div>\n<h3 id=\"airsonic\" class=\"mobile-header\">Airsonic</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\">mkdir -p /var/airsonic\nyum install java-1.8.0-openjdk-headless -y\nwget https://github.com/airsonic/airsonic/raw/main/contrib/airsonic.service -O /etc/systemd/system/airsonic.service\nwget https://github.com/airsonic/airsonic/releases/download/v10.1.2/airsonic.war -O /var/airsonic/airsonic.war\nmkdir -p /mnt/media\necho &quot; 10.0.254.1:/mnt/Volume_1/media           /mnt/media                   nfs defaults,rw 0 0&quot; &gt;&gt; /etc/fstab\nmount -a\n</code></pre>\n      </div>\n    </div>","readTime":"3 min","wordCount":448,"lastBuilt":"2025-09-14T18:12:16.984Z"},{"name":"minecraft-server","displayName":"Minecraft Server","slug":"minecraft-server","description":"Repo for minecraft-server","category":"infrastructure","language":null,"stars":0,"forks":0,"topics":[],"githubUrl":"https://github.com/howtomgr/minecraft-server","updatedAt":"2025-09-08T03:11:10Z","createdAt":"2025-09-08T03:10:59Z","readmeRaw":"## ðŸ‘‹ Welcome to minecraft-server ðŸš€  \n\nminecraft-server README  \n  \n  \n## Author  \n\nðŸ¤– casjay: [Github](https://github.com/casjay) ðŸ¤–  \n","readmeHtml":"<h2 id=\"welcome-to-minecraft-server\" class=\"mobile-header\">ðŸ‘‹ Welcome to minecraft-server ðŸš€  </h2>\n<p class=\"mobile-paragraph\">minecraft-server README  </p>\n<h2 id=\"author\" class=\"mobile-header\">Author  </h2>\n<p class=\"mobile-paragraph\">ðŸ¤– casjay: <a href=\"https://github.com/casjay\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">Github</a> ðŸ¤–  </p>","readTime":"1 min","wordCount":15,"lastBuilt":"2025-09-14T18:12:16.726Z"},{"name":"minikube","displayName":"Minikube","slug":"minikube","description":"Repo for minikube","category":"container","language":null,"stars":0,"forks":0,"topics":[],"githubUrl":"https://github.com/howtomgr/minikube","updatedAt":"2025-09-08T03:11:25Z","createdAt":"2025-09-08T03:11:15Z","readmeRaw":"## ðŸ‘‹ Welcome to minikube ðŸš€  \n\nminikube README  \n  \n  \n## Author  \n\nðŸ¤– casjay: [Github](https://github.com/casjay) ðŸ¤–  \n","readmeHtml":"<h2 id=\"welcome-to-minikube\" class=\"mobile-header\">ðŸ‘‹ Welcome to minikube ðŸš€  </h2>\n<p class=\"mobile-paragraph\">minikube README  </p>\n<h2 id=\"author\" class=\"mobile-header\">Author  </h2>\n<p class=\"mobile-paragraph\">ðŸ¤– casjay: <a href=\"https://github.com/casjay\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">Github</a> ðŸ¤–  </p>","readTime":"1 min","wordCount":15,"lastBuilt":"2025-09-14T18:12:16.455Z"},{"name":"minio","displayName":"Minio","slug":"minio","description":"Repo for minio","category":"infrastructure","language":null,"stars":0,"forks":0,"topics":[],"githubUrl":"https://github.com/howtomgr/minio","updatedAt":"2025-09-14T01:30:32Z","createdAt":"2025-09-08T03:11:29Z","readmeRaw":"# MinIO Installation Guide\n\nHigh-performance S3-compatible object storage server designed for cloud-native applications. Essential for modern data infrastructure with enterprise-grade security and multi-cloud compatibility.\n\n## Prerequisites\n\n- Linux system (any modern distribution)\n- Root or sudo access\n- 4GB RAM minimum, 8GB+ recommended for production\n- Multiple drives/volumes for distributed deployment\n- Network connectivity for cluster configuration\n\n## Installation\n\n### Single Node Deployment\n```bash\n# Create MinIO user\nsudo useradd --system --shell /bin/false minio\n\n# Create data directories\nsudo mkdir -p /opt/minio/{bin,data,certs}\nsudo chown -R minio:minio /opt/minio\n\n# Download MinIO server\ncd /tmp\nwget https://dl.min.io/server/minio/release/linux-amd64/minio\nchmod +x minio\nsudo mv minio /opt/minio/bin/\n\n# Create MinIO configuration\nsudo tee /etc/default/minio > /dev/null <<EOF\n# MinIO Configuration\nMINIO_ROOT_USER=admin\nMINIO_ROOT_PASSWORD=MinIOSecurePassword2024!\nMINIO_VOLUMES=\"/opt/minio/data\"\nMINIO_OPTS=\"--certs-dir /opt/minio/certs --console-address :9001\"\nMINIO_SERVER_URL=\"https://minio.example.com:9000\"\nMINIO_BROWSER_REDIRECT_URL=\"https://minio.example.com:9001\"\nEOF\n\n# Create systemd service\nsudo tee /etc/systemd/system/minio.service > /dev/null <<EOF\n[Unit]\nDescription=MinIO Object Storage Server\nDocumentation=https://docs.min.io\nWants=network-online.target\nAfter=network-online.target\nAssertFileIsExecutable=/opt/minio/bin/minio\n\n[Service]\nType=notify\nUser=minio\nGroup=minio\nEnvironmentFile=/etc/default/minio\nExecStart=/opt/minio/bin/minio server \\$MINIO_OPTS \\$MINIO_VOLUMES\nRestart=always\nLimitNOFILE=65536\nTasksMax=infinity\nTimeoutStopSec=infinity\nSendSIGKILL=no\n\n# Security settings\nNoNewPrivileges=true\nPrivateTmp=true\nProtectSystem=strict\nReadWritePaths=/opt/minio\n\n[Install]\nWantedBy=multi-user.target\nEOF\n\nsudo systemctl daemon-reload\nsudo systemctl enable --now minio\n```\n\n### Distributed Deployment (4 Nodes)\n```bash\n# Configure for distributed deployment\n# Run on each node (adjust IP addresses):\n\nsudo tee /etc/default/minio > /dev/null <<EOF\nMINIO_ROOT_USER=admin\nMINIO_ROOT_PASSWORD=MinIOSecurePassword2024!\nMINIO_VOLUMES=\"https://minio-{1...4}.example.com:9000/opt/minio/data{1...4}\"\nMINIO_OPTS=\"--certs-dir /opt/minio/certs --console-address :9001\"\nMINIO_SERVER_URL=\"https://minio.example.com:9000\"\nEOF\n\n# Create multiple data directories on each node\nsudo mkdir -p /opt/minio/data{1..4}\nsudo chown -R minio:minio /opt/minio/data*\n\nsudo systemctl restart minio\n```\n\n## Security Configuration\n\n### SSL/TLS Setup\n```bash\n# Generate SSL certificates\nsudo mkdir -p /opt/minio/certs\n\n# Self-signed certificate for testing\nsudo openssl req -new -newkey rsa:4096 -days 365 -nodes -x509 \\\n  -subj \"/C=US/ST=State/L=City/O=Organization/CN=minio.example.com\" \\\n  -keyout /opt/minio/certs/private.key \\\n  -out /opt/minio/certs/public.crt\n\n# Production: Use Let's Encrypt or proper CA certificates\nsudo cp /etc/letsencrypt/live/minio.example.com/fullchain.pem /opt/minio/certs/public.crt\nsudo cp /etc/letsencrypt/live/minio.example.com/privkey.pem /opt/minio/certs/private.key\n\nsudo chown -R minio:minio /opt/minio/certs\nsudo chmod 600 /opt/minio/certs/private.key\n```\n\n### Access Control and Policies\n```bash\n# Install MinIO Client (mc)\nwget https://dl.min.io/client/mc/release/linux-amd64/mc\nchmod +x mc\nsudo mv mc /usr/local/bin/\n\n# Configure MinIO client\nmc alias set local https://localhost:9000 admin MinIOSecurePassword2024!\n\n# Create users and policies\ncat > /tmp/readonly-policy.json <<EOF\n{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"s3:GetObject\",\n        \"s3:ListBucket\"\n      ],\n      \"Resource\": [\n        \"arn:aws:s3:::*/*\",\n        \"arn:aws:s3:::*\"\n      ]\n    }\n  ]\n}\nEOF\n\ncat > /tmp/readwrite-policy.json <<EOF\n{\n  \"Version\": \"2012-10-17\", \n  \"Statement\": [\n    {\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"s3:*\"\n      ],\n      \"Resource\": [\n        \"arn:aws:s3:::app-data/*\",\n        \"arn:aws:s3:::app-data\"\n      ]\n    }\n  ]\n}\nEOF\n\n# Create policies\nmc admin policy create local readonly /tmp/readonly-policy.json\nmc admin policy create local readwrite /tmp/readwrite-policy.json\n\n# Create users\nmc admin user add local appuser AppUserSecurePassword2024!\nmc admin policy attach local readwrite --user appuser\n\nmc admin user add local readonly ReadOnlyUserPassword2024!\nmc admin policy attach local readonly --user readonly\n```\n\n## Backup and Monitoring\n\n### Health Monitoring\n```bash\nsudo tee /usr/local/bin/minio-health.sh > /dev/null <<'EOF'\n#!/bin/bash\nLOG=\"/var/log/minio-health.log\"\n\nlog_message() {\n    echo \"$(date '+%Y-%m-%d %H:%M:%S') - $1\" | tee -a ${LOG}\n}\n\n# Check service\nif systemctl is-active minio >/dev/null; then\n    log_message \"âœ“ MinIO service running\"\nelse\n    log_message \"âœ— MinIO service not running\"\nfi\n\n# Check API health\nif curl -f https://localhost:9000/minio/health/live >/dev/null 2>&1; then\n    log_message \"âœ“ MinIO API responding\"\nelse\n    log_message \"âœ— MinIO API not responding\"\nfi\n\n# Check cluster status (if distributed)\nmc admin info local >/dev/null 2>&1\nif [ $? -eq 0 ]; then\n    log_message \"âœ“ MinIO cluster healthy\"\nelse\n    log_message \"âš  MinIO cluster issues\"\nfi\n\nlog_message \"MinIO health check completed\"\nEOF\n\nsudo chmod +x /usr/local/bin/minio-health.sh\necho \"*/10 * * * * root /usr/local/bin/minio-health.sh\" | sudo tee -a /etc/crontab\n```\n\n## Additional Resources\n\n- [MinIO Documentation](https://docs.min.io/)\n- [MinIO Administration Guide](https://docs.min.io/minio/baremetal/)\n\n---\n\n**Note:** This guide is part of the [HowToMgr](https://howtomgr.github.io) collection.","readmeHtml":"<h1 id=\"minio-installation-guide\" class=\"mobile-header\">MinIO Installation Guide</h1>\n<p class=\"mobile-paragraph\">High-performance S3-compatible object storage server designed for cloud-native applications. Essential for modern data infrastructure with enterprise-grade security and multi-cloud compatibility.</p>\n<h2 id=\"prerequisites\" class=\"mobile-header\">Prerequisites</h2>\n<li class=\"mobile-list-item\">Linux system (any modern distribution)</li>\n<li class=\"mobile-list-item\">Root or sudo access</li>\n<li class=\"mobile-list-item\">4GB RAM minimum, 8GB+ recommended for production</li>\n<li class=\"mobile-list-item\">Multiple drives/volumes for distributed deployment</li>\n<li class=\"mobile-list-item\">Network connectivity for cluster configuration</li>\n<h2 id=\"installation\" class=\"mobile-header\">Installation</h2>\n<h3 id=\"single-node-deployment\" class=\"mobile-header\">Single Node Deployment</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Create MinIO user\nsudo useradd --system --shell /bin/false minio\n\n# Create data directories\nsudo mkdir -p /opt/minio/{bin,data,certs}\nsudo chown -R minio:minio /opt/minio\n\n# Download MinIO server\ncd /tmp\nwget https://dl.min.io/server/minio/release/linux-amd64/minio\nchmod +x minio\nsudo mv minio /opt/minio/bin/\n\n# Create MinIO configuration\nsudo tee /etc/default/minio &gt; /dev/null &lt;&lt;EOF\n# MinIO Configuration\nMINIO_ROOT_USER=admin\nMINIO_ROOT_PASSWORD=MinIOSecurePassword2024!\nMINIO_VOLUMES=&quot;/opt/minio/data&quot;\nMINIO_OPTS=&quot;--certs-dir /opt/minio/certs --console-address :9001&quot;\nMINIO_SERVER_URL=&quot;https://minio.example.com:9000&quot;\nMINIO_BROWSER_REDIRECT_URL=&quot;https://minio.example.com:9001&quot;\nEOF\n\n# Create systemd service\nsudo tee /etc/systemd/system/minio.service &gt; /dev/null &lt;&lt;EOF\n[Unit]\nDescription=MinIO Object Storage Server\nDocumentation=https://docs.min.io\nWants=network-online.target\nAfter=network-online.target\nAssertFileIsExecutable=/opt/minio/bin/minio\n\n[Service]\nType=notify\nUser=minio\nGroup=minio\nEnvironmentFile=/etc/default/minio\nExecStart=/opt/minio/bin/minio server \\$MINIO_OPTS \\$MINIO_VOLUMES\nRestart=always\nLimitNOFILE=65536\nTasksMax=infinity\nTimeoutStopSec=infinity\nSendSIGKILL=no\n\n# Security settings\nNoNewPrivileges=true\nPrivateTmp=true\nProtectSystem=strict\nReadWritePaths=/opt/minio\n\n[Install]\nWantedBy=multi-user.target\nEOF\n\nsudo systemctl daemon-reload\nsudo systemctl enable --now minio</code></pre>\n      </div>\n    </div>\n<h3 id=\"distributed-deployment-4-nodes\" class=\"mobile-header\">Distributed Deployment (4 Nodes)</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Configure for distributed deployment\n# Run on each node (adjust IP addresses):\n\nsudo tee /etc/default/minio &gt; /dev/null &lt;&lt;EOF\nMINIO_ROOT_USER=admin\nMINIO_ROOT_PASSWORD=MinIOSecurePassword2024!\nMINIO_VOLUMES=&quot;https://minio-{1...4}.example.com:9000/opt/minio/data{1...4}&quot;\nMINIO_OPTS=&quot;--certs-dir /opt/minio/certs --console-address :9001&quot;\nMINIO_SERVER_URL=&quot;https://minio.example.com:9000&quot;\nEOF\n\n# Create multiple data directories on each node\nsudo mkdir -p /opt/minio/data{1..4}\nsudo chown -R minio:minio /opt/minio/data*\n\nsudo systemctl restart minio</code></pre>\n      </div>\n    </div>\n<h2 id=\"security-configuration\" class=\"mobile-header\">Security Configuration</h2>\n<h3 id=\"ssltls-setup\" class=\"mobile-header\">SSL/TLS Setup</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Generate SSL certificates\nsudo mkdir -p /opt/minio/certs\n\n# Self-signed certificate for testing\nsudo openssl req -new -newkey rsa:4096 -days 365 -nodes -x509 \\\n  -subj &quot;/C=US/ST=State/L=City/O=Organization/CN=minio.example.com&quot; \\\n  -keyout /opt/minio/certs/private.key \\\n  -out /opt/minio/certs/public.crt\n\n# Production: Use Let&#039;s Encrypt or proper CA certificates\nsudo cp /etc/letsencrypt/live/minio.example.com/fullchain.pem /opt/minio/certs/public.crt\nsudo cp /etc/letsencrypt/live/minio.example.com/privkey.pem /opt/minio/certs/private.key\n\nsudo chown -R minio:minio /opt/minio/certs\nsudo chmod 600 /opt/minio/certs/private.key</code></pre>\n      </div>\n    </div>\n<h3 id=\"access-control-and-policies\" class=\"mobile-header\">Access Control and Policies</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Install MinIO Client (mc)\nwget https://dl.min.io/client/mc/release/linux-amd64/mc\nchmod +x mc\nsudo mv mc /usr/local/bin/\n\n# Configure MinIO client\nmc alias set local https://localhost:9000 admin MinIOSecurePassword2024!\n\n# Create users and policies\ncat &gt; /tmp/readonly-policy.json &lt;&lt;EOF\n{\n  &quot;Version&quot;: &quot;2012-10-17&quot;,\n  &quot;Statement&quot;: [\n    {\n      &quot;Effect&quot;: &quot;Allow&quot;,\n      &quot;Action&quot;: [\n        &quot;s3:GetObject&quot;,\n        &quot;s3:ListBucket&quot;\n      ],\n      &quot;Resource&quot;: [\n        &quot;arn:aws:s3:::*/*&quot;,\n        &quot;arn:aws:s3:::*&quot;\n      ]\n    }\n  ]\n}\nEOF\n\ncat &gt; /tmp/readwrite-policy.json &lt;&lt;EOF\n{\n  &quot;Version&quot;: &quot;2012-10-17&quot;, \n  &quot;Statement&quot;: [\n    {\n      &quot;Effect&quot;: &quot;Allow&quot;,\n      &quot;Action&quot;: [\n        &quot;s3:*&quot;\n      ],\n      &quot;Resource&quot;: [\n        &quot;arn:aws:s3:::app-data/*&quot;,\n        &quot;arn:aws:s3:::app-data&quot;\n      ]\n    }\n  ]\n}\nEOF\n\n# Create policies\nmc admin policy create local readonly /tmp/readonly-policy.json\nmc admin policy create local readwrite /tmp/readwrite-policy.json\n\n# Create users\nmc admin user add local appuser AppUserSecurePassword2024!\nmc admin policy attach local readwrite --user appuser\n\nmc admin user add local readonly ReadOnlyUserPassword2024!\nmc admin policy attach local readonly --user readonly</code></pre>\n      </div>\n    </div>\n<h2 id=\"backup-and-monitoring\" class=\"mobile-header\">Backup and Monitoring</h2>\n<h3 id=\"health-monitoring\" class=\"mobile-header\">Health Monitoring</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\">sudo tee /usr/local/bin/minio-health.sh &gt; /dev/null &lt;&lt;&#039;EOF&#039;\n#!/bin/bash\nLOG=&quot;/var/log/minio-health.log&quot;\n\nlog_message() {\n    echo &quot;$(date &#039;+%Y-%m-%d %H:%M:%S&#039;) - $1&quot; | tee -a ${LOG}\n}\n\n# Check service\nif systemctl is-active minio &gt;/dev/null; then\n    log_message &quot;âœ“ MinIO service running&quot;\nelse\n    log_message &quot;âœ— MinIO service not running&quot;\nfi\n\n# Check API health\nif curl -f https://localhost:9000/minio/health/live &gt;/dev/null 2&gt;&amp;1; then\n    log_message &quot;âœ“ MinIO API responding&quot;\nelse\n    log_message &quot;âœ— MinIO API not responding&quot;\nfi\n\n# Check cluster status (if distributed)\nmc admin info local &gt;/dev/null 2&gt;&amp;1\nif [ $? -eq 0 ]; then\n    log_message &quot;âœ“ MinIO cluster healthy&quot;\nelse\n    log_message &quot;âš  MinIO cluster issues&quot;\nfi\n\nlog_message &quot;MinIO health check completed&quot;\nEOF\n\nsudo chmod +x /usr/local/bin/minio-health.sh\necho &quot;*/10 * * * * root /usr/local/bin/minio-health.sh&quot; | sudo tee -a /etc/crontab</code></pre>\n      </div>\n    </div>\n<h2 id=\"additional-resources\" class=\"mobile-header\">Additional Resources</h2>\n<li class=\"mobile-list-item\"><a href=\"https://docs.min.io/\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">MinIO Documentation</a></li>\n<li class=\"mobile-list-item\"><a href=\"https://docs.min.io/minio/baremetal/\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">MinIO Administration Guide</a></li>\n<p class=\"mobile-paragraph\">---</p>\n<p class=\"mobile-paragraph\"><strong>Note:</strong> This guide is part of the <a href=\"https://howtomgr.github.io\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">HowToMgr</a> collection.</p>","readTime":"3 min","wordCount":587,"lastBuilt":"2025-09-14T18:12:04.091Z"},{"name":"mongodb","displayName":"MongoDB","slug":"mongodb","description":"Repo for mongodb","category":"database","language":null,"stars":0,"forks":0,"topics":[],"githubUrl":"https://github.com/howtomgr/mongodb","updatedAt":"2025-09-14T01:30:34Z","createdAt":"2023-08-28T03:49:06Z","readmeRaw":"# MongoDB Installation Guide\n\nMongoDB is a free and open-source document-oriented NoSQL database. Originally developed by 10gen (now MongoDB Inc.), MongoDB uses JSON-like documents with optional schemas instead of traditional table-based relational database structure. It serves as a FOSS alternative to commercial document databases like Amazon DocumentDB, Azure Cosmos DB, or Oracle NoSQL Database, offering enterprise-grade features including horizontal scaling, replica sets, and sharding without licensing costs, with features like ACID transactions, aggregation pipelines, and full-text search.\n\n## Prerequisites\n\n- **Hardware Requirements**:\n  - CPU: 2 cores minimum (4+ cores recommended for production)\n  - RAM: 2GB minimum (8GB+ recommended for production)\n  - Storage: 10GB minimum (SSD strongly recommended for performance)\n  - Network: Stable connectivity for replica sets and sharding\n- **Operating System**: \n  - Linux: Any modern distribution with kernel 3.2+\n  - macOS: 10.14+ (Mojave or newer)\n  - Windows: Windows Server 2016+ or Windows 10\n  - FreeBSD: Not officially supported by MongoDB Inc.\n- **Network Requirements**:\n  - Port 27017 (default MongoDB port)\n  - Port 27018 (default shard port)\n  - Port 27019 (default config server port)\n  - Additional ports for replica set members\n- **Dependencies**:\n  - OpenSSL, PCRE, zlib (usually included in distributions)\n  - systemd or compatible init system (Linux)\n  - Root or administrative access for installation\n- **System Access**: root or sudo privileges required\n\n## Installation\n\n### RHEL/CentOS/Rocky Linux/AlmaLinux\n\n```bash\n# Create MongoDB 7.0 repository\nsudo tee /etc/yum.repos.d/mongodb-org-7.0.repo <<EOF\n[mongodb-org-7.0]\nname=MongoDB Repository\nbaseurl=https://repo.mongodb.org/yum/redhat/\\$releasever/mongodb-org/7.0/\\$basearch/\ngpgcheck=1\nenabled=1\ngpgkey=https://www.mongodb.org/static/pgp/server-7.0.asc\nEOF\n\n# Install MongoDB\nsudo yum install -y mongodb-org mongodb-org-tools mongodb-mongosh\n\n# Enable and start service\nsudo systemctl enable --now mongod\n\n# Configure firewall\nsudo firewall-cmd --permanent --add-port=27017/tcp\nsudo firewall-cmd --reload\n\n# Verify installation\nmongosh --eval 'db.runCommand(\"connectionStatus\")'\n```\n\n### Debian/Ubuntu\n\n```bash\n# Update package index\nsudo apt update\n\n# Install prerequisite packages\nsudo apt install -y wget gnupg software-properties-common\n\n# Import MongoDB GPG key\nwget -qO /tmp/mongodb-server-7.0.asc https://www.mongodb.org/static/pgp/server-7.0.asc\nsudo mv /tmp/mongodb-server-7.0.asc /etc/apt/trusted.gpg.d/mongodb-server-7.0.asc\n\n# Add MongoDB repository\necho \"deb [arch=amd64,arm64] https://repo.mongodb.org/apt/ubuntu $(lsb_release -cs)/mongodb-org/7.0 multiverse\" | sudo tee /etc/apt/sources.list.d/mongodb-org-7.0.list\n\n# Update package index\nsudo apt update\n\n# Install MongoDB\nsudo apt install -y mongodb-org mongodb-org-tools mongodb-mongosh\n\n# Enable and start service\nsudo systemctl enable --now mongod\n\n# Configure firewall\nsudo ufw allow 27017\n```\n\n### Arch Linux\n\n```bash\n# MongoDB is available in AUR\nyay -S mongodb-bin mongodb-tools-bin mongosh-bin\n\n# Alternative: Install from AUR with makepkg\ngit clone https://aur.archlinux.org/mongodb-bin.git\ncd mongodb-bin\nmakepkg -si\n\n# Create mongodb user and group\nsudo useradd -r -s /sbin/nologin mongodb\n\n# Create necessary directories\nsudo mkdir -p /var/lib/mongodb /var/log/mongodb\nsudo chown mongodb:mongodb /var/lib/mongodb /var/log/mongodb\n\n# Enable and start service\nsudo systemctl enable --now mongodb\n\n# Configuration location: /etc/mongodb.conf\n```\n\n### Alpine Linux\n\n```bash\n# MongoDB is not officially supported on Alpine Linux\n# Use Docker for MongoDB on Alpine:\n\n# Install Docker\napk add --no-cache docker docker-compose\n\n# Enable and start Docker\nrc-update add docker default\nrc-service docker start\n\n# Run MongoDB container\ndocker run -d \\\n  --name mongodb \\\n  --restart unless-stopped \\\n  -p 27017:27017 \\\n  -v /var/lib/mongodb:/data/db \\\n  -e MONGO_INITDB_ROOT_USERNAME=admin \\\n  -e MONGO_INITDB_ROOT_PASSWORD=SecurePassword123! \\\n  mongo:7.0\n\n# Verify installation\ndocker exec mongodb mongosh --eval 'db.runCommand(\"connectionStatus\")'\n```\n\n### openSUSE/SLES\n\n```bash\n# MongoDB is not officially packaged for openSUSE/SLES\n# Use Docker or manual installation:\n\n# Method 1: Docker installation\nsudo zypper install -y docker docker-compose\nsudo systemctl enable --now docker\n\ndocker run -d \\\n  --name mongodb \\\n  --restart unless-stopped \\\n  -p 27017:27017 \\\n  -v /var/lib/mongodb:/data/db \\\n  -e MONGO_INITDB_ROOT_USERNAME=admin \\\n  -e MONGO_INITDB_ROOT_PASSWORD=SecurePassword123! \\\n  mongo:7.0\n\n# Method 2: Manual installation from tarball\nwget https://fastdl.mongodb.org/linux/mongodb-linux-x86_64-rhel80-7.0.4.tgz\ntar -xzf mongodb-linux-x86_64-rhel80-7.0.4.tgz\nsudo cp mongodb-linux-x86_64-rhel80-7.0.4/bin/* /usr/local/bin/\n\n# Create mongodb user and directories\nsudo useradd -r mongodb\nsudo mkdir -p /var/lib/mongodb /var/log/mongodb\nsudo chown mongodb:mongodb /var/lib/mongodb /var/log/mongodb\n```\n\n### macOS\n\n```bash\n# Using Homebrew\nbrew tap mongodb/brew\nbrew install mongodb-community@7.0 mongodb-database-tools mongosh\n\n# Start MongoDB service\nbrew services start mongodb/brew/mongodb-community@7.0\n\n# Or run manually\nmongod --config /usr/local/etc/mongod.conf\n\n# Configuration location: /usr/local/etc/mongod.conf\n# Alternative: /opt/homebrew/etc/mongod.conf (Apple Silicon)\n```\n\n### FreeBSD\n\n```bash\n# MongoDB is not officially supported on FreeBSD\n# Use Docker or compile from source:\n\n# Install Docker\npkg install docker\necho 'docker_enable=\"YES\"' >> /etc/rc.conf\nservice docker start\n\n# Run MongoDB container\ndocker run -d \\\n  --name mongodb \\\n  --restart unless-stopped \\\n  -p 27017:27017 \\\n  -v /var/lib/mongodb:/data/db \\\n  -e MONGO_INITDB_ROOT_USERNAME=admin \\\n  -e MONGO_INITDB_ROOT_PASSWORD=SecurePassword123! \\\n  mongo:7.0\n```\n\n### Windows\n\n```powershell\n# Method 1: Using Chocolatey\nchoco install mongodb mongodb-shell\n\n# Method 2: Using Scoop\nscoop bucket add main\nscoop install mongodb mongodb-shell\n\n# Method 3: Manual installation\n# Download from https://www.mongodb.com/download-center/community\n# Run mongodb-windows-x86_64-*.msi\n\n# Install as Windows service\n\"C:\\Program Files\\MongoDB\\Server\\7.0\\bin\\mongod.exe\" --config \"C:\\Program Files\\MongoDB\\Server\\7.0\\bin\\mongod.cfg\" --install\n\n# Start service\nnet start MongoDB\n\n# Configuration location: C:\\Program Files\\MongoDB\\Server\\7.0\\bin\\mongod.cfg\n```\n\n## Initial Configuration\n\n### First-Run Setup\n\n1. **Create mongodb user** (if not created by package):\n```bash\n# Linux systems\nsudo useradd -r -d /var/lib/mongodb -s /sbin/nologin -c \"MongoDB Server\" mongodb\n```\n\n2. **Default configuration locations**:\n- RHEL/CentOS/Rocky/AlmaLinux: `/etc/mongod.conf`\n- Debian/Ubuntu: `/etc/mongod.conf`\n- Arch Linux: `/etc/mongodb.conf`\n- Alpine Linux: Docker container configuration\n- openSUSE/SLES: `/etc/mongod.conf` (manual installation)\n- macOS: `/usr/local/etc/mongod.conf`\n- FreeBSD: Docker container configuration\n- Windows: `C:\\Program Files\\MongoDB\\Server\\7.0\\bin\\mongod.cfg`\n\n3. **Essential settings to change**:\n\n```yaml\n# /etc/mongod.conf\nstorage:\n  dbPath: /var/lib/mongodb\n  journal:\n    enabled: true\n  wiredTiger:\n    engineConfig:\n      cacheSizeGB: 2\n      journalCompressor: snappy\n\nsystemLog:\n  destination: file\n  path: /var/log/mongodb/mongod.log\n  logAppend: true\n  logRotate: rename\n\nnet:\n  port: 27017\n  bindIp: 127.0.0.1\n  maxIncomingConnections: 200\n\nsecurity:\n  authorization: enabled\n  javascriptEnabled: false\n\noperationProfiling:\n  slowOpThresholdMs: 100\n\nreplication:\n  replSetName: rs0\n\nprocessManagement:\n  fork: true\n  pidFilePath: /var/run/mongodb/mongod.pid\n```\n\n### Testing Initial Setup\n\n```bash\n# Check if MongoDB is running\nsudo systemctl status mongod\n\n# Test connection\nmongosh --eval 'db.runCommand(\"connectionStatus\")'\n\n# Check database status\nmongosh --eval 'db.runCommand(\"serverStatus\")'\n\n# Check configuration\nmongosh --eval 'db.runCommand(\"getCmdLineOpts\")'\n\n# Test basic operations\nmongosh --eval 'use test; db.testCollection.insertOne({test: \"document\"}); db.testCollection.findOne()'\n```\n\n**WARNING:** Enable authentication and create admin users immediately after installation!\n\n## Service Management\n\n### systemd (RHEL, Debian, Ubuntu, Arch, openSUSE)\n\n```bash\n# Enable MongoDB to start on boot\nsudo systemctl enable mongod\n\n# Start MongoDB\nsudo systemctl start mongod\n\n# Stop MongoDB\nsudo systemctl stop mongod\n\n# Restart MongoDB\nsudo systemctl restart mongod\n\n# Reload configuration (graceful restart)\nsudo systemctl reload mongod\n\n# Check status\nsudo systemctl status mongod\n\n# View logs\nsudo journalctl -u mongod -f\n```\n\n### OpenRC (Alpine Linux)\n\n```bash\n# MongoDB runs in Docker container on Alpine\ndocker start mongodb\ndocker stop mongodb\ndocker restart mongodb\n\n# Check status\ndocker ps | grep mongodb\n\n# View logs\ndocker logs -f mongodb\n```\n\n### rc.d (FreeBSD)\n\n```bash\n# MongoDB runs in Docker container on FreeBSD\nservice docker start\n\ndocker start mongodb\ndocker stop mongodb\ndocker restart mongodb\n\n# Check status\ndocker ps | grep mongodb\n```\n\n### launchd (macOS)\n\n```bash\n# Using Homebrew services\nbrew services start mongodb/brew/mongodb-community@7.0\nbrew services stop mongodb/brew/mongodb-community@7.0\nbrew services restart mongodb/brew/mongodb-community@7.0\n\n# Check status\nbrew services list | grep mongodb\n\n# Manual control\nmongod --config /usr/local/etc/mongod.conf\n```\n\n### Windows Service Manager\n\n```powershell\n# Start MongoDB service\nnet start MongoDB\n\n# Stop MongoDB service\nnet stop MongoDB\n\n# Using PowerShell\nStart-Service MongoDB\nStop-Service MongoDB\nRestart-Service MongoDB\n\n# Check status\nGet-Service MongoDB\n\n# View logs\nGet-EventLog -LogName Application -Source MongoDB\n```\n\n## Advanced Configuration\n\n### Replica Set Configuration\n\n```yaml\n# Replica set configuration\nreplication:\n  replSetName: rs0\n\n# Sharding configuration (config server)\nsharding:\n  clusterRole: configsvr\n\nreplication:\n  replSetName: configReplSet\n\n# Sharding configuration (shard)\nsharding:\n  clusterRole: shardsvr\n\nreplication:\n  replSetName: shardReplSet\n```\n\n### Sharding Setup\n\n```javascript\n// Initialize config server replica set\nrs.initiate({\n  _id: \"configReplSet\",\n  configsvr: true,\n  members: [\n    { _id: 0, host: \"config1.example.com:27019\" },\n    { _id: 1, host: \"config2.example.com:27019\" },\n    { _id: 2, host: \"config3.example.com:27019\" }\n  ]\n})\n\n// Initialize shard replica sets\nrs.initiate({\n  _id: \"shard1ReplSet\",\n  members: [\n    { _id: 0, host: \"shard1-a.example.com:27018\" },\n    { _id: 1, host: \"shard1-b.example.com:27018\" },\n    { _id: 2, host: \"shard1-c.example.com:27018\" }\n  ]\n})\n\n// Add shards to cluster (from mongos)\nsh.addShard(\"shard1ReplSet/shard1-a.example.com:27018,shard1-b.example.com:27018,shard1-c.example.com:27018\")\n```\n\n### Advanced Security Settings\n\n```yaml\n# Security configuration\nsecurity:\n  authorization: enabled\n  clusterAuthMode: keyFile\n  keyFile: /etc/mongodb/mongodb-keyfile\n  javascriptEnabled: false\n  \nnet:\n  tls:\n    mode: requireTLS\n    certificateKeyFile: /etc/mongodb/ssl/mongodb.pem\n    CAFile: /etc/mongodb/ssl/ca.pem\n    allowInvalidHostnames: false\n    allowInvalidCertificates: false\n\nauditLog:\n  destination: file\n  format: JSON\n  path: /var/log/mongodb/audit.log\n```\n\n## Reverse Proxy Setup\n\n### nginx Configuration\n\n```nginx\n# /etc/nginx/sites-available/mongodb\nupstream mongodb_backend {\n    server 127.0.0.1:27017 max_fails=3 fail_timeout=30s;\n    server 127.0.0.1:27018 max_fails=3 fail_timeout=30s backup;\n}\n\nserver {\n    listen 27017;\n    proxy_pass mongodb_backend;\n    proxy_timeout 1s;\n    proxy_responses 1;\n    error_log /var/log/nginx/mongodb.log;\n}\n```\n\n### HAProxy Configuration\n\n```haproxy\n# /etc/haproxy/haproxy.cfg\nfrontend mongodb_frontend\n    bind *:27017\n    mode tcp\n    option tcplog\n    default_backend mongodb_servers\n\nbackend mongodb_servers\n    mode tcp\n    balance roundrobin\n    option tcp-check\n    tcp-check connect\n    server mongodb1 127.0.0.1:27017 check\n    server mongodb2 127.0.0.1:27018 check backup\n```\n\n### Connection Pooling with mongos\n\n```yaml\n# mongos configuration\nsharding:\n  configDB: configReplSet/config1.example.com:27019,config2.example.com:27019,config3.example.com:27019\n\nnet:\n  port: 27017\n  bindIp: 0.0.0.0\n  maxIncomingConnections: 1000\n\nsystemLog:\n  destination: file\n  path: /var/log/mongodb/mongos.log\n  logAppend: true\n```\n\n## Security Configuration\n\n### SSL/TLS Setup\n\n```bash\n# Generate SSL certificates for MongoDB\nsudo mkdir -p /etc/mongodb/ssl\n\n# Create CA certificate\nsudo openssl genrsa -out /etc/mongodb/ssl/ca-key.pem 4096\nsudo openssl req -new -x509 -days 3650 -key /etc/mongodb/ssl/ca-key.pem -out /etc/mongodb/ssl/ca.pem -subj \"/C=US/ST=State/L=City/O=Organization/CN=MongoDB-CA\"\n\n# Create server certificate\nsudo openssl genrsa -out /etc/mongodb/ssl/mongodb-key.pem 4096\nsudo openssl req -new -key /etc/mongodb/ssl/mongodb-key.pem -out /etc/mongodb/ssl/mongodb-req.pem -subj \"/C=US/ST=State/L=City/O=Organization/CN=mongodb.example.com\"\nsudo openssl x509 -req -in /etc/mongodb/ssl/mongodb-req.pem -CA /etc/mongodb/ssl/ca.pem -CAkey /etc/mongodb/ssl/ca-key.pem -CAcreateserial -out /etc/mongodb/ssl/mongodb-cert.pem -days 365\n\n# Combine certificate and key\nsudo cat /etc/mongodb/ssl/mongodb-cert.pem /etc/mongodb/ssl/mongodb-key.pem > /etc/mongodb/ssl/mongodb.pem\n\n# Set permissions\nsudo chown -R mongodb:mongodb /etc/mongodb/ssl\nsudo chmod 600 /etc/mongodb/ssl/*.pem\nsudo chmod 644 /etc/mongodb/ssl/ca.pem\n```\n\n### User Security and Authentication\n\n```javascript\n// Create admin user\nuse admin\ndb.createUser({\n  user: \"admin\",\n  pwd: \"SecureAdminPassword123!\",\n  roles: [\n    { role: \"userAdminAnyDatabase\", db: \"admin\" },\n    { role: \"readWriteAnyDatabase\", db: \"admin\" },\n    { role: \"dbAdminAnyDatabase\", db: \"admin\" },\n    { role: \"clusterAdmin\", db: \"admin\" }\n  ]\n})\n\n// Create application user\nuse myapp\ndb.createUser({\n  user: \"appuser\",\n  pwd: \"SecureAppPassword123!\",\n  roles: [\n    { role: \"readWrite\", db: \"myapp\" }\n  ]\n})\n\n// Create backup user\nuse admin\ndb.createUser({\n  user: \"backup\",\n  pwd: \"BackupPassword123!\",\n  roles: [\n    { role: \"backup\", db: \"admin\" },\n    { role: \"clusterMonitor\", db: \"admin\" }\n  ]\n})\n\n// Create monitoring user\ndb.createUser({\n  user: \"monitor\",\n  pwd: \"MonitorPassword123!\",\n  roles: [\n    { role: \"clusterMonitor\", db: \"admin\" },\n    { role: \"read\", db: \"local\" }\n  ]\n})\n```\n\n### Firewall Rules\n\n```bash\n# UFW (Ubuntu/Debian)\nsudo ufw allow from 192.168.1.0/24 to any port 27017\nsudo ufw reload\n\n# firewalld (RHEL/CentOS/openSUSE)\nsudo firewall-cmd --permanent --new-zone=mongodb\nsudo firewall-cmd --permanent --zone=mongodb --add-source=192.168.1.0/24\nsudo firewall-cmd --permanent --zone=mongodb --add-port=27017/tcp\nsudo firewall-cmd --reload\n\n# iptables\nsudo iptables -A INPUT -s 192.168.1.0/24 -p tcp --dport 27017 -j ACCEPT\nsudo iptables-save > /etc/iptables/rules.v4\n\n# pf (FreeBSD)\n# Add to /etc/pf.conf\npass in on $ext_if proto tcp from 192.168.1.0/24 to any port 27017\n\n# Windows Firewall\nNew-NetFirewallRule -DisplayName \"MongoDB\" -Direction Inbound -Protocol TCP -LocalPort 27017 -RemoteAddress 192.168.1.0/24 -Action Allow\n```\n\n## Database Setup\n\n### Database Creation and Management\n\n```javascript\n// Create application database\nuse myapp\n\n// Create collections with validation\ndb.createCollection(\"users\", {\n  validator: {\n    $jsonSchema: {\n      bsonType: \"object\",\n      required: [\"username\", \"email\"],\n      properties: {\n        username: {\n          bsonType: \"string\",\n          description: \"must be a string and is required\"\n        },\n        email: {\n          bsonType: \"string\",\n          pattern: \"^.+@.+$\",\n          description: \"must be a valid email address\"\n        }\n      }\n    }\n  }\n})\n\n// Create indexes for performance\ndb.users.createIndex({ username: 1 }, { unique: true })\ndb.users.createIndex({ email: 1 }, { unique: true })\ndb.users.createIndex({ created_at: 1 })\n\n// Create time-series collection (MongoDB 5.0+)\ndb.createCollection(\"logs\", {\n  timeseries: {\n    timeField: \"timestamp\",\n    metaField: \"source\",\n    granularity: \"minutes\"\n  }\n})\n```\n\n### Database Optimization\n\n```javascript\n// Analyze collection statistics\ndb.stats()\ndb.users.stats()\n\n// Check index usage\ndb.users.aggregate([{ $indexStats: {} }])\n\n// Optimize queries with explain\ndb.users.find({ username: \"john\" }).explain(\"executionStats\")\n\n// Create compound indexes\ndb.orders.createIndex({ user_id: 1, created_at: -1 })\n\n// Text search index\ndb.products.createIndex({ name: \"text\", description: \"text\" })\n```\n\n## Performance Optimization\n\n### System Tuning\n\n```bash\n# MongoDB-specific system optimizations\nsudo tee -a /etc/sysctl.conf <<EOF\n# MongoDB optimizations\nvm.swappiness = 1\nvm.max_map_count = 262144\nnet.core.somaxconn = 4096\nnet.ipv4.tcp_fin_timeout = 30\nnet.ipv4.tcp_keepalive_time = 120\nnet.ipv4.tcp_max_syn_backlog = 4096\nEOF\n\nsudo sysctl -p\n\n# Disable Transparent Huge Pages\necho 'never' | sudo tee /sys/kernel/mm/transparent_hugepage/enabled\necho 'never' | sudo tee /sys/kernel/mm/transparent_hugepage/defrag\n\n# Make THP disable permanent\nsudo tee /etc/systemd/system/disable-thp.service <<EOF\n[Unit]\nDescription=Disable Transparent Huge Pages (THP)\nDefaultDependencies=no\nAfter=sysinit.target local-fs.target\nBefore=mongod.service\n\n[Service]\nType=oneshot\nExecStart=/bin/sh -c 'echo never | tee /sys/kernel/mm/transparent_hugepage/enabled > /dev/null'\nExecStart=/bin/sh -c 'echo never | tee /sys/kernel/mm/transparent_hugepage/defrag > /dev/null'\n\n[Install]\nWantedBy=basic.target\nEOF\n\nsudo systemctl enable --now disable-thp\n```\n\n### MongoDB Performance Tuning\n\n```yaml\n# High-performance MongoDB configuration\nstorage:\n  wiredTiger:\n    engineConfig:\n      cacheSizeGB: 8  # 50% of available RAM\n      journalCompressor: snappy\n      directoryForIndexes: true\n    collectionConfig:\n      blockCompressor: snappy\n    indexConfig:\n      prefixCompression: true\n\noperationProfiling:\n  mode: slowOp\n  slowOpThresholdMs: 100\n  slowOpSampleRate: 1.0\n\nnet:\n  maxIncomingConnections: 1000\n  serviceExecutor: adaptive\n\nsetParameter:\n  cursorTimeoutMillis: 600000\n  failIndexKeyTooLong: false\n  maxIndexBuildDrainBatchSize: 128\n  wiredTigerConcurrentReadTransactions: 128\n  wiredTigerConcurrentWriteTransactions: 128\n```\n\n### Query Optimization\n\n```javascript\n// Enable profiler for slow operations\ndb.setProfilingLevel(2, { slowms: 100 })\n\n// Analyze slow queries\ndb.system.profile.find().limit(5).sort({ ts: -1 }).pretty()\n\n// Index optimization\ndb.collection.getIndexes()\ndb.collection.dropIndex(\"index_name\")\n\n// Use aggregation pipeline optimization\ndb.collection.aggregate([\n  { $match: { status: \"active\" } },\n  { $sort: { created_at: -1 } },\n  { $limit: 100 }\n], { allowDiskUse: true })\n```\n\n## Monitoring\n\n### Built-in Monitoring\n\n```javascript\n// Server status and statistics\ndb.runCommand(\"serverStatus\")\ndb.runCommand(\"dbStats\")\ndb.runCommand(\"collStats\", \"collection_name\")\n\n// Connection and operation monitoring\ndb.runCommand(\"currentOp\")\ndb.runCommand(\"top\")\n\n// Replica set monitoring\nrs.status()\nrs.printReplicationInfo()\nrs.printSlaveReplicationInfo()\n\n// Sharding monitoring\nsh.status()\ndb.printShardingStatus()\n```\n\n### External Monitoring Setup\n\n```bash\n# Install MongoDB Exporter for Prometheus\nwget https://github.com/percona/mongodb_exporter/releases/download/v0.39.0/mongodb_exporter-0.39.0.linux-amd64.tar.gz\ntar xzf mongodb_exporter-*.tar.gz\nsudo cp mongodb_exporter /usr/local/bin/\n\n# Create systemd service\nsudo tee /etc/systemd/system/mongodb_exporter.service <<EOF\n[Unit]\nDescription=MongoDB Exporter\nAfter=network.target\n\n[Service]\nType=simple\nUser=mongodb\nEnvironment=MONGODB_URI=\"mongodb://monitor:MonitorPassword123!@localhost:27017/admin\"\nExecStart=/usr/local/bin/mongodb_exporter --mongodb.uri=\\$MONGODB_URI\nRestart=always\n\n[Install]\nWantedBy=multi-user.target\nEOF\n\nsudo systemctl enable --now mongodb_exporter\n```\n\n### Health Check Scripts\n\n```bash\n#!/bin/bash\n# mongodb-health-check.sh\n\n# Check MongoDB service\nif ! systemctl is-active mongod >/dev/null 2>&1; then\n    echo \"CRITICAL: MongoDB service is not running\"\n    exit 2\nfi\n\n# Check connectivity\nif ! mongosh --quiet --eval \"db.runCommand('ping')\" >/dev/null 2>&1; then\n    echo \"CRITICAL: Cannot connect to MongoDB\"\n    exit 2\nfi\n\n# Check replica set status (if configured)\nREPLICA_STATUS=$(mongosh --quiet --eval \"rs.status().ok\" 2>/dev/null)\nif [ \"$REPLICA_STATUS\" = \"1\" ]; then\n    PRIMARY_COUNT=$(mongosh --quiet --eval \"rs.status().members.filter(m => m.stateStr === 'PRIMARY').length\" 2>/dev/null)\n    if [ \"$PRIMARY_COUNT\" != \"1\" ]; then\n        echo \"WARNING: No primary or multiple primaries in replica set\"\n        exit 1\n    fi\nfi\n\n# Check connections\nCONNECTIONS=$(mongosh --quiet --eval \"db.serverStatus().connections.current\" 2>/dev/null)\nMAX_CONNECTIONS=$(mongosh --quiet --eval \"db.serverStatus().connections.available\" 2>/dev/null)\nCONNECTION_USAGE=$((CONNECTIONS * 100 / (CONNECTIONS + MAX_CONNECTIONS)))\n\nif [ $CONNECTION_USAGE -gt 80 ]; then\n    echo \"WARNING: High connection usage: ${CONNECTION_USAGE}%\"\n    exit 1\nfi\n\necho \"OK: MongoDB is healthy\"\nexit 0\n```\n\n## Backup and Restore\n\n### Backup Procedures\n\n```bash\n#!/bin/bash\n# mongodb-backup.sh\n\nBACKUP_DIR=\"/backup/mongodb/$(date +%Y%m%d_%H%M%S)\"\nmkdir -p \"$BACKUP_DIR\"\n\n# Full database backup\nmongodump \\\n  --host=\"localhost:27017\" \\\n  --username=backup \\\n  --password=BackupPassword123! \\\n  --authenticationDatabase=admin \\\n  --gzip \\\n  --out \"$BACKUP_DIR\"\n\n# Oplog backup for point-in-time recovery\nmongodump \\\n  --host=\"localhost:27017\" \\\n  --username=backup \\\n  --password=BackupPassword123! \\\n  --authenticationDatabase=admin \\\n  --db=local \\\n  --collection=oplog.rs \\\n  --gzip \\\n  --out \"$BACKUP_DIR/oplog\"\n\n# Configuration backup\ncp -r /etc/mongod.conf \"$BACKUP_DIR/\"\n\n# Compress backup\ntar czf \"$BACKUP_DIR.tar.gz\" -C \"$(dirname \"$BACKUP_DIR\")\" \"$(basename \"$BACKUP_DIR\")\"\nrm -rf \"$BACKUP_DIR\"\n\necho \"Backup completed: $BACKUP_DIR.tar.gz\"\n```\n\n### Restore Procedures\n\n```bash\n#!/bin/bash\n# mongodb-restore.sh\n\nBACKUP_FILE=\"$1\"\nif [ -z \"$BACKUP_FILE\" ]; then\n    echo \"Usage: $0 <backup-file.tar.gz>\"\n    exit 1\nfi\n\n# Extract backup\nBACKUP_DIR=\"/tmp/mongodb-restore-$(date +%s)\"\nmkdir -p \"$BACKUP_DIR\"\ntar xzf \"$BACKUP_FILE\" -C \"$BACKUP_DIR\" --strip-components=1\n\n# Stop applications using the database\necho \"Stopping applications...\"\n\n# Restore database\necho \"Restoring database from $BACKUP_FILE...\"\nmongorestore \\\n  --host=\"localhost:27017\" \\\n  --username=admin \\\n  --password=SecureAdminPassword123! \\\n  --authenticationDatabase=admin \\\n  --gzip \\\n  --drop \\\n  \"$BACKUP_DIR\"\n\n# Cleanup\nrm -rf \"$BACKUP_DIR\"\n\necho \"Restore completed\"\n```\n\n### Point-in-Time Recovery\n\n```bash\n#!/bin/bash\n# mongodb-pitr.sh\n\nBACKUP_FILE=\"$1\"\nRECOVERY_TIME=\"$2\"\n\nif [ -z \"$BACKUP_FILE\" ] || [ -z \"$RECOVERY_TIME\" ]; then\n    echo \"Usage: $0 <backup-file.tar.gz> <recovery-time>\"\n    echo \"Example: $0 backup.tar.gz '2024-01-15T14:30:00.000Z'\"\n    exit 1\nfi\n\n# Extract and restore base backup\nBACKUP_DIR=\"/tmp/mongodb-pitr-$(date +%s)\"\nmkdir -p \"$BACKUP_DIR\"\ntar xzf \"$BACKUP_FILE\" -C \"$BACKUP_DIR\" --strip-components=1\n\n# Restore base backup\nmongorestore \\\n  --host=\"localhost:27017\" \\\n  --username=admin \\\n  --password=SecureAdminPassword123! \\\n  --authenticationDatabase=admin \\\n  --gzip \\\n  --drop \\\n  \"$BACKUP_DIR\"\n\n# Apply oplog up to recovery point\nmongorestore \\\n  --host=\"localhost:27017\" \\\n  --username=admin \\\n  --password=SecureAdminPassword123! \\\n  --authenticationDatabase=admin \\\n  --oplogReplay \\\n  --oplogLimit=\"$(date -d \"$RECOVERY_TIME\" +%s):1\" \\\n  --gzip \\\n  \"$BACKUP_DIR/oplog\"\n\n# Cleanup\nrm -rf \"$BACKUP_DIR\"\n\necho \"Point-in-time recovery completed to $RECOVERY_TIME\"\n```\n\n## Troubleshooting\n\n### Common Issues\n\n1. **MongoDB won't start**:\n```bash\n# Check logs\nsudo journalctl -u mongod -f\nsudo tail -f /var/log/mongodb/mongod.log\n\n# Check disk space\ndf -h /var/lib/mongodb\n\n# Check permissions\nls -la /var/lib/mongodb\n\n# Repair database\nmongod --repair --dbpath /var/lib/mongodb\n```\n\n2. **Connection issues**:\n```bash\n# Check if MongoDB is listening\nsudo ss -tlnp | grep :27017\n\n# Test local connection\nmongosh --eval \"db.runCommand('ping')\"\n\n# Check authentication\nmongosh admin --username admin\n\n# Check bind address\nmongosh --eval \"db.runCommand('getCmdLineOpts')\"\n```\n\n3. **Performance issues**:\n```bash\n# Check slow queries\nmongosh --eval \"db.setProfilingLevel(2, {slowms: 100})\"\nmongosh --eval \"db.system.profile.find().sort({ts:-1}).limit(5)\"\n\n# Check index usage\nmongosh --eval \"db.collection.getIndexes()\"\n\n# Check server status\nmongosh --eval \"db.serverStatus()\"\n```\n\n### Debug Mode\n\n```bash\n# Start MongoDB with verbose logging\nsudo systemctl edit mongod\n# Add:\n[Service]\nEnvironment=\"MONGOD_OPTIONS=--verbose\"\n\nsudo systemctl daemon-reload\nsudo systemctl restart mongod\n\n# Enable profiling for all operations\nmongosh --eval \"db.setProfilingLevel(2)\"\n\n# View debug logs\nsudo tail -f /var/log/mongodb/mongod.log\n```\n\n## Maintenance\n\n### Update Procedures\n\n```bash\n# RHEL/CentOS/Rocky/AlmaLinux\nsudo yum check-update mongodb-org\nsudo yum update mongodb-org\n\n# Debian/Ubuntu\nsudo apt update\nsudo apt upgrade mongodb-org\n\n# Arch Linux\nyay -Syu mongodb-bin\n\n# macOS\nbrew upgrade mongodb-community@7.0\n\n# Docker (Alpine/FreeBSD)\ndocker pull mongo:7.0\ndocker stop mongodb\ndocker rm mongodb\n# Re-run docker run command with new image\n\n# Always backup before updates\n./mongodb-backup.sh\n\n# Restart after updates\nsudo systemctl restart mongod\n```\n\n### Maintenance Tasks\n\n```bash\n# Weekly maintenance script\n#!/bin/bash\n# mongodb-maintenance.sh\n\n# Compact collections\nmongosh admin --username admin --password SecureAdminPassword123! <<EOF\nuse myapp\ndb.runCommand({compact: \"collection_name\"})\nEOF\n\n# Update collection statistics\nmongosh admin --username admin --password SecureAdminPassword123! <<EOF\ndb.runCommand({planCacheClear: \"\"})\nEOF\n\n# Clean up old oplogs (automatically managed but can be tuned)\nmongosh admin --username admin --password SecureAdminPassword123! <<EOF\nuse local\ndb.oplog.rs.find().sort({\\$natural:-1}).limit(1)\nEOF\n\necho \"MongoDB maintenance completed\"\n```\n\n### Health Monitoring\n\n```bash\n# Create monitoring cron job\necho \"*/5 * * * * /usr/local/bin/mongodb-health-check.sh\" | sudo crontab -\n\n# Log rotation\nsudo tee /etc/logrotate.d/mongodb <<EOF\n/var/log/mongodb/*.log {\n    daily\n    rotate 7\n    compress\n    delaycompress\n    missingok\n    notifempty\n    create 644 mongodb mongodb\n    postrotate\n        /bin/kill -SIGUSR1 \\$(cat /var/run/mongodb/mongod.pid 2>/dev/null) 2>/dev/null || true\n    endscript\n}\nEOF\n```\n\n## Integration Examples\n\n### Node.js Integration\n\n```javascript\n// Using MongoDB Node.js driver\nconst { MongoClient } = require('mongodb');\n\nconst client = new MongoClient('mongodb://appuser:SecureAppPassword123!@localhost:27017/myapp', {\n  tls: true,\n  tlsCertificateKeyFile: '/etc/mongodb/ssl/client.pem',\n  tlsCAFile: '/etc/mongodb/ssl/ca.pem',\n  authSource: 'myapp'\n});\n\nasync function connect() {\n  await client.connect();\n  const db = client.db('myapp');\n  return db;\n}\n```\n\n### Python Integration\n\n```python\n# Using PyMongo\nimport pymongo\nfrom pymongo import MongoClient\n\nclient = MongoClient('mongodb://appuser:SecureAppPassword123!@localhost:27017/myapp', \n                    tls=True,\n                    tlsCertificateKeyFile='/etc/mongodb/ssl/client.pem',\n                    tlsCAFile='/etc/mongodb/ssl/ca.pem',\n                    authSource='myapp')\n\ndb = client.myapp\ncollection = db.users\n```\n\n### Java Integration\n\n```java\n// Using MongoDB Java driver\nimport com.mongodb.client.MongoClients;\nimport com.mongodb.client.MongoClient;\nimport com.mongodb.client.MongoDatabase;\nimport com.mongodb.MongoClientSettings;\nimport com.mongodb.ConnectionString;\n\nMongoClientSettings settings = MongoClientSettings.builder()\n    .applyConnectionString(new ConnectionString(\"mongodb://appuser:SecureAppPassword123!@localhost:27017/myapp\"))\n    .applyToSslSettings(builder -> \n        builder.enabled(true)\n               .invalidHostNameAllowed(false))\n    .build();\n\nMongoClient mongoClient = MongoClients.create(settings);\nMongoDatabase database = mongoClient.getDatabase(\"myapp\");\n```\n\n### Express.js Integration\n\n```javascript\n// Using Mongoose ODM\nconst mongoose = require('mongoose');\n\nmongoose.connect('mongodb://appuser:SecureAppPassword123!@localhost:27017/myapp', {\n  tls: true,\n  tlsCertificateKeyFile: '/etc/mongodb/ssl/client.pem',\n  tlsCAFile: '/etc/mongodb/ssl/ca.pem',\n  authSource: 'myapp'\n});\n\nconst userSchema = new mongoose.Schema({\n  username: { type: String, required: true, unique: true },\n  email: { type: String, required: true, unique: true },\n  created_at: { type: Date, default: Date.now }\n});\n\nmodule.exports = mongoose.model('User', userSchema);\n```\n\n## Additional Resources\n\n- [Official MongoDB Documentation](https://docs.mongodb.com/)\n- [MongoDB University](https://university.mongodb.com/)\n- [MongoDB Security Checklist](https://docs.mongodb.com/manual/administration/security-checklist/)\n- [MongoDB Performance Best Practices](https://docs.mongodb.com/manual/administration/analyzing-mongodb-performance/)\n- [Replica Set Tutorial](https://docs.mongodb.com/manual/tutorial/deploy-replica-set/)\n- [Sharding Tutorial](https://docs.mongodb.com/manual/tutorial/deploy-shard-cluster/)\n- [MongoDB Community Forum](https://developer.mongodb.com/community/forums/)\n- [MongoDB Blog](https://www.mongodb.com/blog)\n\n---\n\n**Note:** This guide is part of the [HowToMgr](https://howtomgr.github.io) collection. Always refer to official documentation for the most up-to-date information.","readmeHtml":"<h1 id=\"mongodb-installation-guide\" class=\"mobile-header\">MongoDB Installation Guide</h1>\n<p class=\"mobile-paragraph\">MongoDB is a free and open-source document-oriented NoSQL database. Originally developed by 10gen (now MongoDB Inc.), MongoDB uses JSON-like documents with optional schemas instead of traditional table-based relational database structure. It serves as a FOSS alternative to commercial document databases like Amazon DocumentDB, Azure Cosmos DB, or Oracle NoSQL Database, offering enterprise-grade features including horizontal scaling, replica sets, and sharding without licensing costs, with features like ACID transactions, aggregation pipelines, and full-text search.</p>\n<h2 id=\"prerequisites\" class=\"mobile-header\">Prerequisites</h2>\n<li class=\"mobile-list-item\"><strong>Hardware Requirements</strong>:</li>\n<li class=\"mobile-list-item\">CPU: 2 cores minimum (4+ cores recommended for production)</li>\n<li class=\"mobile-list-item\">RAM: 2GB minimum (8GB+ recommended for production)</li>\n<li class=\"mobile-list-item\">Storage: 10GB minimum (SSD strongly recommended for performance)</li>\n<li class=\"mobile-list-item\">Network: Stable connectivity for replica sets and sharding</li>\n<li class=\"mobile-list-item\"><strong>Operating System</strong>: </li>\n<li class=\"mobile-list-item\">Linux: Any modern distribution with kernel 3.2+</li>\n<li class=\"mobile-list-item\">macOS: 10.14+ (Mojave or newer)</li>\n<li class=\"mobile-list-item\">Windows: Windows Server 2016+ or Windows 10</li>\n<li class=\"mobile-list-item\">FreeBSD: Not officially supported by MongoDB Inc.</li>\n<li class=\"mobile-list-item\"><strong>Network Requirements</strong>:</li>\n<li class=\"mobile-list-item\">Port 27017 (default MongoDB port)</li>\n<li class=\"mobile-list-item\">Port 27018 (default shard port)</li>\n<li class=\"mobile-list-item\">Port 27019 (default config server port)</li>\n<li class=\"mobile-list-item\">Additional ports for replica set members</li>\n<li class=\"mobile-list-item\"><strong>Dependencies</strong>:</li>\n<li class=\"mobile-list-item\">OpenSSL, PCRE, zlib (usually included in distributions)</li>\n<li class=\"mobile-list-item\">systemd or compatible init system (Linux)</li>\n<li class=\"mobile-list-item\">Root or administrative access for installation</li>\n<li class=\"mobile-list-item\"><strong>System Access</strong>: root or sudo privileges required</li>\n<h2 id=\"installation\" class=\"mobile-header\">Installation</h2>\n<h3 id=\"rhelcentosrocky-linuxalmalinux\" class=\"mobile-header\">RHEL/CentOS/Rocky Linux/AlmaLinux</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Create MongoDB 7.0 repository\nsudo tee /etc/yum.repos.d/mongodb-org-7.0.repo &lt;&lt;EOF\n[mongodb-org-7.0]\nname=MongoDB Repository\nbaseurl=https://repo.mongodb.org/yum/redhat/\\$releasever/mongodb-org/7.0/\\$basearch/\ngpgcheck=1\nenabled=1\ngpgkey=https://www.mongodb.org/static/pgp/server-7.0.asc\nEOF\n\n# Install MongoDB\nsudo yum install -y mongodb-org mongodb-org-tools mongodb-mongosh\n\n# Enable and start service\nsudo systemctl enable --now mongod\n\n# Configure firewall\nsudo firewall-cmd --permanent --add-port=27017/tcp\nsudo firewall-cmd --reload\n\n# Verify installation\nmongosh --eval &#039;db.runCommand(&quot;connectionStatus&quot;)&#039;</code></pre>\n      </div>\n    </div>\n<h3 id=\"debianubuntu\" class=\"mobile-header\">Debian/Ubuntu</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Update package index\nsudo apt update\n\n# Install prerequisite packages\nsudo apt install -y wget gnupg software-properties-common\n\n# Import MongoDB GPG key\nwget -qO /tmp/mongodb-server-7.0.asc https://www.mongodb.org/static/pgp/server-7.0.asc\nsudo mv /tmp/mongodb-server-7.0.asc /etc/apt/trusted.gpg.d/mongodb-server-7.0.asc\n\n# Add MongoDB repository\necho &quot;deb [arch=amd64,arm64] https://repo.mongodb.org/apt/ubuntu $(lsb_release -cs)/mongodb-org/7.0 multiverse&quot; | sudo tee /etc/apt/sources.list.d/mongodb-org-7.0.list\n\n# Update package index\nsudo apt update\n\n# Install MongoDB\nsudo apt install -y mongodb-org mongodb-org-tools mongodb-mongosh\n\n# Enable and start service\nsudo systemctl enable --now mongod\n\n# Configure firewall\nsudo ufw allow 27017</code></pre>\n      </div>\n    </div>\n<h3 id=\"arch-linux\" class=\"mobile-header\">Arch Linux</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># MongoDB is available in AUR\nyay -S mongodb-bin mongodb-tools-bin mongosh-bin\n\n# Alternative: Install from AUR with makepkg\ngit clone https://aur.archlinux.org/mongodb-bin.git\ncd mongodb-bin\nmakepkg -si\n\n# Create mongodb user and group\nsudo useradd -r -s /sbin/nologin mongodb\n\n# Create necessary directories\nsudo mkdir -p /var/lib/mongodb /var/log/mongodb\nsudo chown mongodb:mongodb /var/lib/mongodb /var/log/mongodb\n\n# Enable and start service\nsudo systemctl enable --now mongodb\n\n# Configuration location: /etc/mongodb.conf</code></pre>\n      </div>\n    </div>\n<h3 id=\"alpine-linux\" class=\"mobile-header\">Alpine Linux</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># MongoDB is not officially supported on Alpine Linux\n# Use Docker for MongoDB on Alpine:\n\n# Install Docker\napk add --no-cache docker docker-compose\n\n# Enable and start Docker\nrc-update add docker default\nrc-service docker start\n\n# Run MongoDB container\ndocker run -d \\\n  --name mongodb \\\n  --restart unless-stopped \\\n  -p 27017:27017 \\\n  -v /var/lib/mongodb:/data/db \\\n  -e MONGO_INITDB_ROOT_USERNAME=admin \\\n  -e MONGO_INITDB_ROOT_PASSWORD=SecurePassword123! \\\n  mongo:7.0\n\n# Verify installation\ndocker exec mongodb mongosh --eval &#039;db.runCommand(&quot;connectionStatus&quot;)&#039;</code></pre>\n      </div>\n    </div>\n<h3 id=\"opensusesles\" class=\"mobile-header\">openSUSE/SLES</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># MongoDB is not officially packaged for openSUSE/SLES\n# Use Docker or manual installation:\n\n# Method 1: Docker installation\nsudo zypper install -y docker docker-compose\nsudo systemctl enable --now docker\n\ndocker run -d \\\n  --name mongodb \\\n  --restart unless-stopped \\\n  -p 27017:27017 \\\n  -v /var/lib/mongodb:/data/db \\\n  -e MONGO_INITDB_ROOT_USERNAME=admin \\\n  -e MONGO_INITDB_ROOT_PASSWORD=SecurePassword123! \\\n  mongo:7.0\n\n# Method 2: Manual installation from tarball\nwget https://fastdl.mongodb.org/linux/mongodb-linux-x86_64-rhel80-7.0.4.tgz\ntar -xzf mongodb-linux-x86_64-rhel80-7.0.4.tgz\nsudo cp mongodb-linux-x86_64-rhel80-7.0.4/bin/* /usr/local/bin/\n\n# Create mongodb user and directories\nsudo useradd -r mongodb\nsudo mkdir -p /var/lib/mongodb /var/log/mongodb\nsudo chown mongodb:mongodb /var/lib/mongodb /var/log/mongodb</code></pre>\n      </div>\n    </div>\n<h3 id=\"macos\" class=\"mobile-header\">macOS</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Using Homebrew\nbrew tap mongodb/brew\nbrew install mongodb-community@7.0 mongodb-database-tools mongosh\n\n# Start MongoDB service\nbrew services start mongodb/brew/mongodb-community@7.0\n\n# Or run manually\nmongod --config /usr/local/etc/mongod.conf\n\n# Configuration location: /usr/local/etc/mongod.conf\n# Alternative: /opt/homebrew/etc/mongod.conf (Apple Silicon)</code></pre>\n      </div>\n    </div>\n<h3 id=\"freebsd\" class=\"mobile-header\">FreeBSD</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># MongoDB is not officially supported on FreeBSD\n# Use Docker or compile from source:\n\n# Install Docker\npkg install docker\necho &#039;docker_enable=&quot;YES&quot;&#039; &gt;&gt; /etc/rc.conf\nservice docker start\n\n# Run MongoDB container\ndocker run -d \\\n  --name mongodb \\\n  --restart unless-stopped \\\n  -p 27017:27017 \\\n  -v /var/lib/mongodb:/data/db \\\n  -e MONGO_INITDB_ROOT_USERNAME=admin \\\n  -e MONGO_INITDB_ROOT_PASSWORD=SecurePassword123! \\\n  mongo:7.0</code></pre>\n      </div>\n    </div>\n<h3 id=\"windows\" class=\"mobile-header\">Windows</h3>\n<div class=\"mobile-code-block\" data-language=\"powershell\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">powershell</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-powershell\"># Method 1: Using Chocolatey\nchoco install mongodb mongodb-shell\n\n# Method 2: Using Scoop\nscoop bucket add main\nscoop install mongodb mongodb-shell\n\n# Method 3: Manual installation\n# Download from https://www.mongodb.com/download-center/community\n# Run mongodb-windows-x86_64-*.msi\n\n# Install as Windows service\n&quot;C:\\Program Files\\MongoDB\\Server\\7.0\\bin\\mongod.exe&quot; --config &quot;C:\\Program Files\\MongoDB\\Server\\7.0\\bin\\mongod.cfg&quot; --install\n\n# Start service\nnet start MongoDB\n\n# Configuration location: C:\\Program Files\\MongoDB\\Server\\7.0\\bin\\mongod.cfg</code></pre>\n      </div>\n    </div>\n<h2 id=\"initial-configuration\" class=\"mobile-header\">Initial Configuration</h2>\n<h3 id=\"first-run-setup\" class=\"mobile-header\">First-Run Setup</h3>\n<p class=\"mobile-paragraph\">1. <strong>Create mongodb user</strong> (if not created by package):</p>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Linux systems\nsudo useradd -r -d /var/lib/mongodb -s /sbin/nologin -c &quot;MongoDB Server&quot; mongodb</code></pre>\n      </div>\n    </div>\n<p class=\"mobile-paragraph\">2. <strong>Default configuration locations</strong>:</p>\n<li class=\"mobile-list-item\">RHEL/CentOS/Rocky/AlmaLinux: <code class=\"mobile-inline-code\">/etc/mongod.conf</code></li>\n<li class=\"mobile-list-item\">Debian/Ubuntu: <code class=\"mobile-inline-code\">/etc/mongod.conf</code></li>\n<li class=\"mobile-list-item\">Arch Linux: <code class=\"mobile-inline-code\">/etc/mongodb.conf</code></li>\n<li class=\"mobile-list-item\">Alpine Linux: Docker container configuration</li>\n<li class=\"mobile-list-item\">openSUSE/SLES: <code class=\"mobile-inline-code\">/etc/mongod.conf</code> (manual installation)</li>\n<li class=\"mobile-list-item\">macOS: <code class=\"mobile-inline-code\">/usr/local/etc/mongod.conf</code></li>\n<li class=\"mobile-list-item\">FreeBSD: Docker container configuration</li>\n<li class=\"mobile-list-item\">Windows: <code class=\"mobile-inline-code\">C:\\Program Files\\MongoDB\\Server\\7.0\\bin\\mongod.cfg</code></li>\n<p class=\"mobile-paragraph\">3. <strong>Essential settings to change</strong>:</p>\n<div class=\"mobile-code-block\" data-language=\"yaml\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">yaml</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-yaml\"># /etc/mongod.conf\nstorage:\n  dbPath: /var/lib/mongodb\n  journal:\n    enabled: true\n  wiredTiger:\n    engineConfig:\n      cacheSizeGB: 2\n      journalCompressor: snappy\n\nsystemLog:\n  destination: file\n  path: /var/log/mongodb/mongod.log\n  logAppend: true\n  logRotate: rename\n\nnet:\n  port: 27017\n  bindIp: 127.0.0.1\n  maxIncomingConnections: 200\n\nsecurity:\n  authorization: enabled\n  javascriptEnabled: false\n\noperationProfiling:\n  slowOpThresholdMs: 100\n\nreplication:\n  replSetName: rs0\n\nprocessManagement:\n  fork: true\n  pidFilePath: /var/run/mongodb/mongod.pid</code></pre>\n      </div>\n    </div>\n<h3 id=\"testing-initial-setup\" class=\"mobile-header\">Testing Initial Setup</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Check if MongoDB is running\nsudo systemctl status mongod\n\n# Test connection\nmongosh --eval &#039;db.runCommand(&quot;connectionStatus&quot;)&#039;\n\n# Check database status\nmongosh --eval &#039;db.runCommand(&quot;serverStatus&quot;)&#039;\n\n# Check configuration\nmongosh --eval &#039;db.runCommand(&quot;getCmdLineOpts&quot;)&#039;\n\n# Test basic operations\nmongosh --eval &#039;use test; db.testCollection.insertOne({test: &quot;document&quot;}); db.testCollection.findOne()&#039;</code></pre>\n      </div>\n    </div>\n<p class=\"mobile-paragraph\"><strong>WARNING:</strong> Enable authentication and create admin users immediately after installation!</p>\n<h2 id=\"service-management\" class=\"mobile-header\">Service Management</h2>\n<h3 id=\"systemd-rhel-debian-ubuntu-arch-opensuse\" class=\"mobile-header\">systemd (RHEL, Debian, Ubuntu, Arch, openSUSE)</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Enable MongoDB to start on boot\nsudo systemctl enable mongod\n\n# Start MongoDB\nsudo systemctl start mongod\n\n# Stop MongoDB\nsudo systemctl stop mongod\n\n# Restart MongoDB\nsudo systemctl restart mongod\n\n# Reload configuration (graceful restart)\nsudo systemctl reload mongod\n\n# Check status\nsudo systemctl status mongod\n\n# View logs\nsudo journalctl -u mongod -f</code></pre>\n      </div>\n    </div>\n<h3 id=\"openrc-alpine-linux\" class=\"mobile-header\">OpenRC (Alpine Linux)</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># MongoDB runs in Docker container on Alpine\ndocker start mongodb\ndocker stop mongodb\ndocker restart mongodb\n\n# Check status\ndocker ps | grep mongodb\n\n# View logs\ndocker logs -f mongodb</code></pre>\n      </div>\n    </div>\n<h3 id=\"rcd-freebsd\" class=\"mobile-header\">rc.d (FreeBSD)</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># MongoDB runs in Docker container on FreeBSD\nservice docker start\n\ndocker start mongodb\ndocker stop mongodb\ndocker restart mongodb\n\n# Check status\ndocker ps | grep mongodb</code></pre>\n      </div>\n    </div>\n<h3 id=\"launchd-macos\" class=\"mobile-header\">launchd (macOS)</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Using Homebrew services\nbrew services start mongodb/brew/mongodb-community@7.0\nbrew services stop mongodb/brew/mongodb-community@7.0\nbrew services restart mongodb/brew/mongodb-community@7.0\n\n# Check status\nbrew services list | grep mongodb\n\n# Manual control\nmongod --config /usr/local/etc/mongod.conf</code></pre>\n      </div>\n    </div>\n<h3 id=\"windows-service-manager\" class=\"mobile-header\">Windows Service Manager</h3>\n<div class=\"mobile-code-block\" data-language=\"powershell\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">powershell</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-powershell\"># Start MongoDB service\nnet start MongoDB\n\n# Stop MongoDB service\nnet stop MongoDB\n\n# Using PowerShell\nStart-Service MongoDB\nStop-Service MongoDB\nRestart-Service MongoDB\n\n# Check status\nGet-Service MongoDB\n\n# View logs\nGet-EventLog -LogName Application -Source MongoDB</code></pre>\n      </div>\n    </div>\n<h2 id=\"advanced-configuration\" class=\"mobile-header\">Advanced Configuration</h2>\n<h3 id=\"replica-set-configuration\" class=\"mobile-header\">Replica Set Configuration</h3>\n<div class=\"mobile-code-block\" data-language=\"yaml\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">yaml</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-yaml\"># Replica set configuration\nreplication:\n  replSetName: rs0\n\n# Sharding configuration (config server)\nsharding:\n  clusterRole: configsvr\n\nreplication:\n  replSetName: configReplSet\n\n# Sharding configuration (shard)\nsharding:\n  clusterRole: shardsvr\n\nreplication:\n  replSetName: shardReplSet</code></pre>\n      </div>\n    </div>\n<h3 id=\"sharding-setup\" class=\"mobile-header\">Sharding Setup</h3>\n<div class=\"mobile-code-block\" data-language=\"javascript\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">javascript</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-javascript\">// Initialize config server replica set\nrs.initiate({\n  _id: &quot;configReplSet&quot;,\n  configsvr: true,\n  members: [\n    { _id: 0, host: &quot;config1.example.com:27019&quot; },\n    { _id: 1, host: &quot;config2.example.com:27019&quot; },\n    { _id: 2, host: &quot;config3.example.com:27019&quot; }\n  ]\n})\n\n// Initialize shard replica sets\nrs.initiate({\n  _id: &quot;shard1ReplSet&quot;,\n  members: [\n    { _id: 0, host: &quot;shard1-a.example.com:27018&quot; },\n    { _id: 1, host: &quot;shard1-b.example.com:27018&quot; },\n    { _id: 2, host: &quot;shard1-c.example.com:27018&quot; }\n  ]\n})\n\n// Add shards to cluster (from mongos)\nsh.addShard(&quot;shard1ReplSet/shard1-a.example.com:27018,shard1-b.example.com:27018,shard1-c.example.com:27018&quot;)</code></pre>\n      </div>\n    </div>\n<h3 id=\"advanced-security-settings\" class=\"mobile-header\">Advanced Security Settings</h3>\n<div class=\"mobile-code-block\" data-language=\"yaml\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">yaml</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-yaml\"># Security configuration\nsecurity:\n  authorization: enabled\n  clusterAuthMode: keyFile\n  keyFile: /etc/mongodb/mongodb-keyfile\n  javascriptEnabled: false\n  \nnet:\n  tls:\n    mode: requireTLS\n    certificateKeyFile: /etc/mongodb/ssl/mongodb.pem\n    CAFile: /etc/mongodb/ssl/ca.pem\n    allowInvalidHostnames: false\n    allowInvalidCertificates: false\n\nauditLog:\n  destination: file\n  format: JSON\n  path: /var/log/mongodb/audit.log</code></pre>\n      </div>\n    </div>\n<h2 id=\"reverse-proxy-setup\" class=\"mobile-header\">Reverse Proxy Setup</h2>\n<h3 id=\"nginx-configuration\" class=\"mobile-header\">nginx Configuration</h3>\n<div class=\"mobile-code-block\" data-language=\"nginx\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">nginx</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-nginx\"># /etc/nginx/sites-available/mongodb\nupstream mongodb_backend {\n    server 127.0.0.1:27017 max_fails=3 fail_timeout=30s;\n    server 127.0.0.1:27018 max_fails=3 fail_timeout=30s backup;\n}\n\nserver {\n    listen 27017;\n    proxy_pass mongodb_backend;\n    proxy_timeout 1s;\n    proxy_responses 1;\n    error_log /var/log/nginx/mongodb.log;\n}</code></pre>\n      </div>\n    </div>\n<h3 id=\"haproxy-configuration\" class=\"mobile-header\">HAProxy Configuration</h3>\n<div class=\"mobile-code-block\" data-language=\"haproxy\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">haproxy</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-haproxy\"># /etc/haproxy/haproxy.cfg\nfrontend mongodb_frontend\n    bind *:27017\n    mode tcp\n    option tcplog\n    default_backend mongodb_servers\n\nbackend mongodb_servers\n    mode tcp\n    balance roundrobin\n    option tcp-check\n    tcp-check connect\n    server mongodb1 127.0.0.1:27017 check\n    server mongodb2 127.0.0.1:27018 check backup</code></pre>\n      </div>\n    </div>\n<h3 id=\"connection-pooling-with-mongos\" class=\"mobile-header\">Connection Pooling with mongos</h3>\n<div class=\"mobile-code-block\" data-language=\"yaml\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">yaml</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-yaml\"># mongos configuration\nsharding:\n  configDB: configReplSet/config1.example.com:27019,config2.example.com:27019,config3.example.com:27019\n\nnet:\n  port: 27017\n  bindIp: 0.0.0.0\n  maxIncomingConnections: 1000\n\nsystemLog:\n  destination: file\n  path: /var/log/mongodb/mongos.log\n  logAppend: true</code></pre>\n      </div>\n    </div>\n<h2 id=\"security-configuration\" class=\"mobile-header\">Security Configuration</h2>\n<h3 id=\"ssltls-setup\" class=\"mobile-header\">SSL/TLS Setup</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Generate SSL certificates for MongoDB\nsudo mkdir -p /etc/mongodb/ssl\n\n# Create CA certificate\nsudo openssl genrsa -out /etc/mongodb/ssl/ca-key.pem 4096\nsudo openssl req -new -x509 -days 3650 -key /etc/mongodb/ssl/ca-key.pem -out /etc/mongodb/ssl/ca.pem -subj &quot;/C=US/ST=State/L=City/O=Organization/CN=MongoDB-CA&quot;\n\n# Create server certificate\nsudo openssl genrsa -out /etc/mongodb/ssl/mongodb-key.pem 4096\nsudo openssl req -new -key /etc/mongodb/ssl/mongodb-key.pem -out /etc/mongodb/ssl/mongodb-req.pem -subj &quot;/C=US/ST=State/L=City/O=Organization/CN=mongodb.example.com&quot;\nsudo openssl x509 -req -in /etc/mongodb/ssl/mongodb-req.pem -CA /etc/mongodb/ssl/ca.pem -CAkey /etc/mongodb/ssl/ca-key.pem -CAcreateserial -out /etc/mongodb/ssl/mongodb-cert.pem -days 365\n\n# Combine certificate and key\nsudo cat /etc/mongodb/ssl/mongodb-cert.pem /etc/mongodb/ssl/mongodb-key.pem &gt; /etc/mongodb/ssl/mongodb.pem\n\n# Set permissions\nsudo chown -R mongodb:mongodb /etc/mongodb/ssl\nsudo chmod 600 /etc/mongodb/ssl/*.pem\nsudo chmod 644 /etc/mongodb/ssl/ca.pem</code></pre>\n      </div>\n    </div>\n<h3 id=\"user-security-and-authentication\" class=\"mobile-header\">User Security and Authentication</h3>\n<div class=\"mobile-code-block\" data-language=\"javascript\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">javascript</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-javascript\">// Create admin user\nuse admin\ndb.createUser({\n  user: &quot;admin&quot;,\n  pwd: &quot;SecureAdminPassword123!&quot;,\n  roles: [\n    { role: &quot;userAdminAnyDatabase&quot;, db: &quot;admin&quot; },\n    { role: &quot;readWriteAnyDatabase&quot;, db: &quot;admin&quot; },\n    { role: &quot;dbAdminAnyDatabase&quot;, db: &quot;admin&quot; },\n    { role: &quot;clusterAdmin&quot;, db: &quot;admin&quot; }\n  ]\n})\n\n// Create application user\nuse myapp\ndb.createUser({\n  user: &quot;appuser&quot;,\n  pwd: &quot;SecureAppPassword123!&quot;,\n  roles: [\n    { role: &quot;readWrite&quot;, db: &quot;myapp&quot; }\n  ]\n})\n\n// Create backup user\nuse admin\ndb.createUser({\n  user: &quot;backup&quot;,\n  pwd: &quot;BackupPassword123!&quot;,\n  roles: [\n    { role: &quot;backup&quot;, db: &quot;admin&quot; },\n    { role: &quot;clusterMonitor&quot;, db: &quot;admin&quot; }\n  ]\n})\n\n// Create monitoring user\ndb.createUser({\n  user: &quot;monitor&quot;,\n  pwd: &quot;MonitorPassword123!&quot;,\n  roles: [\n    { role: &quot;clusterMonitor&quot;, db: &quot;admin&quot; },\n    { role: &quot;read&quot;, db: &quot;local&quot; }\n  ]\n})</code></pre>\n      </div>\n    </div>\n<h3 id=\"firewall-rules\" class=\"mobile-header\">Firewall Rules</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># UFW (Ubuntu/Debian)\nsudo ufw allow from 192.168.1.0/24 to any port 27017\nsudo ufw reload\n\n# firewalld (RHEL/CentOS/openSUSE)\nsudo firewall-cmd --permanent --new-zone=mongodb\nsudo firewall-cmd --permanent --zone=mongodb --add-source=192.168.1.0/24\nsudo firewall-cmd --permanent --zone=mongodb --add-port=27017/tcp\nsudo firewall-cmd --reload\n\n# iptables\nsudo iptables -A INPUT -s 192.168.1.0/24 -p tcp --dport 27017 -j ACCEPT\nsudo iptables-save &gt; /etc/iptables/rules.v4\n\n# pf (FreeBSD)\n# Add to /etc/pf.conf\npass in on $ext_if proto tcp from 192.168.1.0/24 to any port 27017\n\n# Windows Firewall\nNew-NetFirewallRule -DisplayName &quot;MongoDB&quot; -Direction Inbound -Protocol TCP -LocalPort 27017 -RemoteAddress 192.168.1.0/24 -Action Allow</code></pre>\n      </div>\n    </div>\n<h2 id=\"database-setup\" class=\"mobile-header\">Database Setup</h2>\n<h3 id=\"database-creation-and-management\" class=\"mobile-header\">Database Creation and Management</h3>\n<div class=\"mobile-code-block\" data-language=\"javascript\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">javascript</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-javascript\">// Create application database\nuse myapp\n\n// Create collections with validation\ndb.createCollection(&quot;users&quot;, {\n  validator: {\n    $jsonSchema: {\n      bsonType: &quot;object&quot;,\n      required: [&quot;username&quot;, &quot;email&quot;],\n      properties: {\n        username: {\n          bsonType: &quot;string&quot;,\n          description: &quot;must be a string and is required&quot;\n        },\n        email: {\n          bsonType: &quot;string&quot;,\n          pattern: &quot;^.+@.+$&quot;,\n          description: &quot;must be a valid email address&quot;\n        }\n      }\n    }\n  }\n})\n\n// Create indexes for performance\ndb.users.createIndex({ username: 1 }, { unique: true })\ndb.users.createIndex({ email: 1 }, { unique: true })\ndb.users.createIndex({ created_at: 1 })\n\n// Create time-series collection (MongoDB 5.0+)\ndb.createCollection(&quot;logs&quot;, {\n  timeseries: {\n    timeField: &quot;timestamp&quot;,\n    metaField: &quot;source&quot;,\n    granularity: &quot;minutes&quot;\n  }\n})</code></pre>\n      </div>\n    </div>\n<h3 id=\"database-optimization\" class=\"mobile-header\">Database Optimization</h3>\n<div class=\"mobile-code-block\" data-language=\"javascript\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">javascript</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-javascript\">// Analyze collection statistics\ndb.stats()\ndb.users.stats()\n\n// Check index usage\ndb.users.aggregate([{ $indexStats: {} }])\n\n// Optimize queries with explain\ndb.users.find({ username: &quot;john&quot; }).explain(&quot;executionStats&quot;)\n\n// Create compound indexes\ndb.orders.createIndex({ user_id: 1, created_at: -1 })\n\n// Text search index\ndb.products.createIndex({ name: &quot;text&quot;, description: &quot;text&quot; })</code></pre>\n      </div>\n    </div>\n<h2 id=\"performance-optimization\" class=\"mobile-header\">Performance Optimization</h2>\n<h3 id=\"system-tuning\" class=\"mobile-header\">System Tuning</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># MongoDB-specific system optimizations\nsudo tee -a /etc/sysctl.conf &lt;&lt;EOF\n# MongoDB optimizations\nvm.swappiness = 1\nvm.max_map_count = 262144\nnet.core.somaxconn = 4096\nnet.ipv4.tcp_fin_timeout = 30\nnet.ipv4.tcp_keepalive_time = 120\nnet.ipv4.tcp_max_syn_backlog = 4096\nEOF\n\nsudo sysctl -p\n\n# Disable Transparent Huge Pages\necho &#039;never&#039; | sudo tee /sys/kernel/mm/transparent_hugepage/enabled\necho &#039;never&#039; | sudo tee /sys/kernel/mm/transparent_hugepage/defrag\n\n# Make THP disable permanent\nsudo tee /etc/systemd/system/disable-thp.service &lt;&lt;EOF\n[Unit]\nDescription=Disable Transparent Huge Pages (THP)\nDefaultDependencies=no\nAfter=sysinit.target local-fs.target\nBefore=mongod.service\n\n[Service]\nType=oneshot\nExecStart=/bin/sh -c &#039;echo never | tee /sys/kernel/mm/transparent_hugepage/enabled &gt; /dev/null&#039;\nExecStart=/bin/sh -c &#039;echo never | tee /sys/kernel/mm/transparent_hugepage/defrag &gt; /dev/null&#039;\n\n[Install]\nWantedBy=basic.target\nEOF\n\nsudo systemctl enable --now disable-thp</code></pre>\n      </div>\n    </div>\n<h3 id=\"mongodb-performance-tuning\" class=\"mobile-header\">MongoDB Performance Tuning</h3>\n<div class=\"mobile-code-block\" data-language=\"yaml\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">yaml</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-yaml\"># High-performance MongoDB configuration\nstorage:\n  wiredTiger:\n    engineConfig:\n      cacheSizeGB: 8  # 50% of available RAM\n      journalCompressor: snappy\n      directoryForIndexes: true\n    collectionConfig:\n      blockCompressor: snappy\n    indexConfig:\n      prefixCompression: true\n\noperationProfiling:\n  mode: slowOp\n  slowOpThresholdMs: 100\n  slowOpSampleRate: 1.0\n\nnet:\n  maxIncomingConnections: 1000\n  serviceExecutor: adaptive\n\nsetParameter:\n  cursorTimeoutMillis: 600000\n  failIndexKeyTooLong: false\n  maxIndexBuildDrainBatchSize: 128\n  wiredTigerConcurrentReadTransactions: 128\n  wiredTigerConcurrentWriteTransactions: 128</code></pre>\n      </div>\n    </div>\n<h3 id=\"query-optimization\" class=\"mobile-header\">Query Optimization</h3>\n<div class=\"mobile-code-block\" data-language=\"javascript\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">javascript</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-javascript\">// Enable profiler for slow operations\ndb.setProfilingLevel(2, { slowms: 100 })\n\n// Analyze slow queries\ndb.system.profile.find().limit(5).sort({ ts: -1 }).pretty()\n\n// Index optimization\ndb.collection.getIndexes()\ndb.collection.dropIndex(&quot;index_name&quot;)\n\n// Use aggregation pipeline optimization\ndb.collection.aggregate([\n  { $match: { status: &quot;active&quot; } },\n  { $sort: { created_at: -1 } },\n  { $limit: 100 }\n], { allowDiskUse: true })</code></pre>\n      </div>\n    </div>\n<h2 id=\"monitoring\" class=\"mobile-header\">Monitoring</h2>\n<h3 id=\"built-in-monitoring\" class=\"mobile-header\">Built-in Monitoring</h3>\n<div class=\"mobile-code-block\" data-language=\"javascript\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">javascript</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-javascript\">// Server status and statistics\ndb.runCommand(&quot;serverStatus&quot;)\ndb.runCommand(&quot;dbStats&quot;)\ndb.runCommand(&quot;collStats&quot;, &quot;collection_name&quot;)\n\n// Connection and operation monitoring\ndb.runCommand(&quot;currentOp&quot;)\ndb.runCommand(&quot;top&quot;)\n\n// Replica set monitoring\nrs.status()\nrs.printReplicationInfo()\nrs.printSlaveReplicationInfo()\n\n// Sharding monitoring\nsh.status()\ndb.printShardingStatus()</code></pre>\n      </div>\n    </div>\n<h3 id=\"external-monitoring-setup\" class=\"mobile-header\">External Monitoring Setup</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Install MongoDB Exporter for Prometheus\nwget https://github.com/percona/mongodb_exporter/releases/download/v0.39.0/mongodb_exporter-0.39.0.linux-amd64.tar.gz\ntar xzf mongodb_exporter-*.tar.gz\nsudo cp mongodb_exporter /usr/local/bin/\n\n# Create systemd service\nsudo tee /etc/systemd/system/mongodb_exporter.service &lt;&lt;EOF\n[Unit]\nDescription=MongoDB Exporter\nAfter=network.target\n\n[Service]\nType=simple\nUser=mongodb\nEnvironment=MONGODB_URI=&quot;mongodb://monitor:MonitorPassword123!@localhost:27017/admin&quot;\nExecStart=/usr/local/bin/mongodb_exporter --mongodb.uri=\\$MONGODB_URI\nRestart=always\n\n[Install]\nWantedBy=multi-user.target\nEOF\n\nsudo systemctl enable --now mongodb_exporter</code></pre>\n      </div>\n    </div>\n<h3 id=\"health-check-scripts\" class=\"mobile-header\">Health Check Scripts</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\">#!/bin/bash\n# mongodb-health-check.sh\n\n# Check MongoDB service\nif ! systemctl is-active mongod &gt;/dev/null 2&gt;&amp;1; then\n    echo &quot;CRITICAL: MongoDB service is not running&quot;\n    exit 2\nfi\n\n# Check connectivity\nif ! mongosh --quiet --eval &quot;db.runCommand(&#039;ping&#039;)&quot; &gt;/dev/null 2&gt;&amp;1; then\n    echo &quot;CRITICAL: Cannot connect to MongoDB&quot;\n    exit 2\nfi\n\n# Check replica set status (if configured)\nREPLICA_STATUS=$(mongosh --quiet --eval &quot;rs.status().ok&quot; 2&gt;/dev/null)\nif [ &quot;$REPLICA_STATUS&quot; = &quot;1&quot; ]; then\n    PRIMARY_COUNT=$(mongosh --quiet --eval &quot;rs.status().members.filter(m =&gt; m.stateStr === &#039;PRIMARY&#039;).length&quot; 2&gt;/dev/null)\n    if [ &quot;$PRIMARY_COUNT&quot; != &quot;1&quot; ]; then\n        echo &quot;WARNING: No primary or multiple primaries in replica set&quot;\n        exit 1\n    fi\nfi\n\n# Check connections\nCONNECTIONS=$(mongosh --quiet --eval &quot;db.serverStatus().connections.current&quot; 2&gt;/dev/null)\nMAX_CONNECTIONS=$(mongosh --quiet --eval &quot;db.serverStatus().connections.available&quot; 2&gt;/dev/null)\nCONNECTION_USAGE=$((CONNECTIONS * 100 / (CONNECTIONS + MAX_CONNECTIONS)))\n\nif [ $CONNECTION_USAGE -gt 80 ]; then\n    echo &quot;WARNING: High connection usage: ${CONNECTION_USAGE}%&quot;\n    exit 1\nfi\n\necho &quot;OK: MongoDB is healthy&quot;\nexit 0</code></pre>\n      </div>\n    </div>\n<h2 id=\"backup-and-restore\" class=\"mobile-header\">Backup and Restore</h2>\n<h3 id=\"backup-procedures\" class=\"mobile-header\">Backup Procedures</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\">#!/bin/bash\n# mongodb-backup.sh\n\nBACKUP_DIR=&quot;/backup/mongodb/$(date +%Y%m%d_%H%M%S)&quot;\nmkdir -p &quot;$BACKUP_DIR&quot;\n\n# Full database backup\nmongodump \\\n  --host=&quot;localhost:27017&quot; \\\n  --username=backup \\\n  --password=BackupPassword123! \\\n  --authenticationDatabase=admin \\\n  --gzip \\\n  --out &quot;$BACKUP_DIR&quot;\n\n# Oplog backup for point-in-time recovery\nmongodump \\\n  --host=&quot;localhost:27017&quot; \\\n  --username=backup \\\n  --password=BackupPassword123! \\\n  --authenticationDatabase=admin \\\n  --db=local \\\n  --collection=oplog.rs \\\n  --gzip \\\n  --out &quot;$BACKUP_DIR/oplog&quot;\n\n# Configuration backup\ncp -r /etc/mongod.conf &quot;$BACKUP_DIR/&quot;\n\n# Compress backup\ntar czf &quot;$BACKUP_DIR.tar.gz&quot; -C &quot;$(dirname &quot;$BACKUP_DIR&quot;)&quot; &quot;$(basename &quot;$BACKUP_DIR&quot;)&quot;\nrm -rf &quot;$BACKUP_DIR&quot;\n\necho &quot;Backup completed: $BACKUP_DIR.tar.gz&quot;</code></pre>\n      </div>\n    </div>\n<h3 id=\"restore-procedures\" class=\"mobile-header\">Restore Procedures</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\">#!/bin/bash\n# mongodb-restore.sh\n\nBACKUP_FILE=&quot;$1&quot;\nif [ -z &quot;$BACKUP_FILE&quot; ]; then\n    echo &quot;Usage: $0 &lt;backup-file.tar.gz&gt;&quot;\n    exit 1\nfi\n\n# Extract backup\nBACKUP_DIR=&quot;/tmp/mongodb-restore-$(date +%s)&quot;\nmkdir -p &quot;$BACKUP_DIR&quot;\ntar xzf &quot;$BACKUP_FILE&quot; -C &quot;$BACKUP_DIR&quot; --strip-components=1\n\n# Stop applications using the database\necho &quot;Stopping applications...&quot;\n\n# Restore database\necho &quot;Restoring database from $BACKUP_FILE...&quot;\nmongorestore \\\n  --host=&quot;localhost:27017&quot; \\\n  --username=admin \\\n  --password=SecureAdminPassword123! \\\n  --authenticationDatabase=admin \\\n  --gzip \\\n  --drop \\\n  &quot;$BACKUP_DIR&quot;\n\n# Cleanup\nrm -rf &quot;$BACKUP_DIR&quot;\n\necho &quot;Restore completed&quot;</code></pre>\n      </div>\n    </div>\n<h3 id=\"point-in-time-recovery\" class=\"mobile-header\">Point-in-Time Recovery</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\">#!/bin/bash\n# mongodb-pitr.sh\n\nBACKUP_FILE=&quot;$1&quot;\nRECOVERY_TIME=&quot;$2&quot;\n\nif [ -z &quot;$BACKUP_FILE&quot; ] || [ -z &quot;$RECOVERY_TIME&quot; ]; then\n    echo &quot;Usage: $0 &lt;backup-file.tar.gz&gt; &lt;recovery-time&gt;&quot;\n    echo &quot;Example: $0 backup.tar.gz &#039;2024-01-15T14:30:00.000Z&#039;&quot;\n    exit 1\nfi\n\n# Extract and restore base backup\nBACKUP_DIR=&quot;/tmp/mongodb-pitr-$(date +%s)&quot;\nmkdir -p &quot;$BACKUP_DIR&quot;\ntar xzf &quot;$BACKUP_FILE&quot; -C &quot;$BACKUP_DIR&quot; --strip-components=1\n\n# Restore base backup\nmongorestore \\\n  --host=&quot;localhost:27017&quot; \\\n  --username=admin \\\n  --password=SecureAdminPassword123! \\\n  --authenticationDatabase=admin \\\n  --gzip \\\n  --drop \\\n  &quot;$BACKUP_DIR&quot;\n\n# Apply oplog up to recovery point\nmongorestore \\\n  --host=&quot;localhost:27017&quot; \\\n  --username=admin \\\n  --password=SecureAdminPassword123! \\\n  --authenticationDatabase=admin \\\n  --oplogReplay \\\n  --oplogLimit=&quot;$(date -d &quot;$RECOVERY_TIME&quot; +%s):1&quot; \\\n  --gzip \\\n  &quot;$BACKUP_DIR/oplog&quot;\n\n# Cleanup\nrm -rf &quot;$BACKUP_DIR&quot;\n\necho &quot;Point-in-time recovery completed to $RECOVERY_TIME&quot;</code></pre>\n      </div>\n    </div>\n<h2 id=\"troubleshooting\" class=\"mobile-header\">Troubleshooting</h2>\n<h3 id=\"common-issues\" class=\"mobile-header\">Common Issues</h3>\n<p class=\"mobile-paragraph\">1. <strong>MongoDB won't start</strong>:</p>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Check logs\nsudo journalctl -u mongod -f\nsudo tail -f /var/log/mongodb/mongod.log\n\n# Check disk space\ndf -h /var/lib/mongodb\n\n# Check permissions\nls -la /var/lib/mongodb\n\n# Repair database\nmongod --repair --dbpath /var/lib/mongodb</code></pre>\n      </div>\n    </div>\n<p class=\"mobile-paragraph\">2. <strong>Connection issues</strong>:</p>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Check if MongoDB is listening\nsudo ss -tlnp | grep :27017\n\n# Test local connection\nmongosh --eval &quot;db.runCommand(&#039;ping&#039;)&quot;\n\n# Check authentication\nmongosh admin --username admin\n\n# Check bind address\nmongosh --eval &quot;db.runCommand(&#039;getCmdLineOpts&#039;)&quot;</code></pre>\n      </div>\n    </div>\n<p class=\"mobile-paragraph\">3. <strong>Performance issues</strong>:</p>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Check slow queries\nmongosh --eval &quot;db.setProfilingLevel(2, {slowms: 100})&quot;\nmongosh --eval &quot;db.system.profile.find().sort({ts:-1}).limit(5)&quot;\n\n# Check index usage\nmongosh --eval &quot;db.collection.getIndexes()&quot;\n\n# Check server status\nmongosh --eval &quot;db.serverStatus()&quot;</code></pre>\n      </div>\n    </div>\n<h3 id=\"debug-mode\" class=\"mobile-header\">Debug Mode</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Start MongoDB with verbose logging\nsudo systemctl edit mongod\n# Add:\n[Service]\nEnvironment=&quot;MONGOD_OPTIONS=--verbose&quot;\n\nsudo systemctl daemon-reload\nsudo systemctl restart mongod\n\n# Enable profiling for all operations\nmongosh --eval &quot;db.setProfilingLevel(2)&quot;\n\n# View debug logs\nsudo tail -f /var/log/mongodb/mongod.log</code></pre>\n      </div>\n    </div>\n<h2 id=\"maintenance\" class=\"mobile-header\">Maintenance</h2>\n<h3 id=\"update-procedures\" class=\"mobile-header\">Update Procedures</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># RHEL/CentOS/Rocky/AlmaLinux\nsudo yum check-update mongodb-org\nsudo yum update mongodb-org\n\n# Debian/Ubuntu\nsudo apt update\nsudo apt upgrade mongodb-org\n\n# Arch Linux\nyay -Syu mongodb-bin\n\n# macOS\nbrew upgrade mongodb-community@7.0\n\n# Docker (Alpine/FreeBSD)\ndocker pull mongo:7.0\ndocker stop mongodb\ndocker rm mongodb\n# Re-run docker run command with new image\n\n# Always backup before updates\n./mongodb-backup.sh\n\n# Restart after updates\nsudo systemctl restart mongod</code></pre>\n      </div>\n    </div>\n<h3 id=\"maintenance-tasks\" class=\"mobile-header\">Maintenance Tasks</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Weekly maintenance script\n#!/bin/bash\n# mongodb-maintenance.sh\n\n# Compact collections\nmongosh admin --username admin --password SecureAdminPassword123! &lt;&lt;EOF\nuse myapp\ndb.runCommand({compact: &quot;collection_name&quot;})\nEOF\n\n# Update collection statistics\nmongosh admin --username admin --password SecureAdminPassword123! &lt;&lt;EOF\ndb.runCommand({planCacheClear: &quot;&quot;})\nEOF\n\n# Clean up old oplogs (automatically managed but can be tuned)\nmongosh admin --username admin --password SecureAdminPassword123! &lt;&lt;EOF\nuse local\ndb.oplog.rs.find().sort({\\$natural:-1}).limit(1)\nEOF\n\necho &quot;MongoDB maintenance completed&quot;</code></pre>\n      </div>\n    </div>\n<h3 id=\"health-monitoring\" class=\"mobile-header\">Health Monitoring</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Create monitoring cron job\necho &quot;*/5 * * * * /usr/local/bin/mongodb-health-check.sh&quot; | sudo crontab -\n\n# Log rotation\nsudo tee /etc/logrotate.d/mongodb &lt;&lt;EOF\n/var/log/mongodb/*.log {\n    daily\n    rotate 7\n    compress\n    delaycompress\n    missingok\n    notifempty\n    create 644 mongodb mongodb\n    postrotate\n        /bin/kill -SIGUSR1 \\$(cat /var/run/mongodb/mongod.pid 2&gt;/dev/null) 2&gt;/dev/null || true\n    endscript\n}\nEOF</code></pre>\n      </div>\n    </div>\n<h2 id=\"integration-examples\" class=\"mobile-header\">Integration Examples</h2>\n<h3 id=\"nodejs-integration\" class=\"mobile-header\">Node.js Integration</h3>\n<div class=\"mobile-code-block\" data-language=\"javascript\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">javascript</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-javascript\">// Using MongoDB Node.js driver\nconst { MongoClient } = require(&#039;mongodb&#039;);\n\nconst client = new MongoClient(&#039;mongodb://appuser:SecureAppPassword123!@localhost:27017/myapp&#039;, {\n  tls: true,\n  tlsCertificateKeyFile: &#039;/etc/mongodb/ssl/client.pem&#039;,\n  tlsCAFile: &#039;/etc/mongodb/ssl/ca.pem&#039;,\n  authSource: &#039;myapp&#039;\n});\n\nasync function connect() {\n  await client.connect();\n  const db = client.db(&#039;myapp&#039;);\n  return db;\n}</code></pre>\n      </div>\n    </div>\n<h3 id=\"python-integration\" class=\"mobile-header\">Python Integration</h3>\n<div class=\"mobile-code-block\" data-language=\"python\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">python</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-python\"># Using PyMongo\nimport pymongo\nfrom pymongo import MongoClient\n\nclient = MongoClient(&#039;mongodb://appuser:SecureAppPassword123!@localhost:27017/myapp&#039;, \n                    tls=True,\n                    tlsCertificateKeyFile=&#039;/etc/mongodb/ssl/client.pem&#039;,\n                    tlsCAFile=&#039;/etc/mongodb/ssl/ca.pem&#039;,\n                    authSource=&#039;myapp&#039;)\n\ndb = client.myapp\ncollection = db.users</code></pre>\n      </div>\n    </div>\n<h3 id=\"java-integration\" class=\"mobile-header\">Java Integration</h3>\n<div class=\"mobile-code-block\" data-language=\"java\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">java</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-java\">// Using MongoDB Java driver\nimport com.mongodb.client.MongoClients;\nimport com.mongodb.client.MongoClient;\nimport com.mongodb.client.MongoDatabase;\nimport com.mongodb.MongoClientSettings;\nimport com.mongodb.ConnectionString;\n\nMongoClientSettings settings = MongoClientSettings.builder()\n    .applyConnectionString(new ConnectionString(&quot;mongodb://appuser:SecureAppPassword123!@localhost:27017/myapp&quot;))\n    .applyToSslSettings(builder -&gt; \n        builder.enabled(true)\n               .invalidHostNameAllowed(false))\n    .build();\n\nMongoClient mongoClient = MongoClients.create(settings);\nMongoDatabase database = mongoClient.getDatabase(&quot;myapp&quot;);</code></pre>\n      </div>\n    </div>\n<h3 id=\"expressjs-integration\" class=\"mobile-header\">Express.js Integration</h3>\n<div class=\"mobile-code-block\" data-language=\"javascript\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">javascript</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-javascript\">// Using Mongoose ODM\nconst mongoose = require(&#039;mongoose&#039;);\n\nmongoose.connect(&#039;mongodb://appuser:SecureAppPassword123!@localhost:27017/myapp&#039;, {\n  tls: true,\n  tlsCertificateKeyFile: &#039;/etc/mongodb/ssl/client.pem&#039;,\n  tlsCAFile: &#039;/etc/mongodb/ssl/ca.pem&#039;,\n  authSource: &#039;myapp&#039;\n});\n\nconst userSchema = new mongoose.Schema({\n  username: { type: String, required: true, unique: true },\n  email: { type: String, required: true, unique: true },\n  created_at: { type: Date, default: Date.now }\n});\n\nmodule.exports = mongoose.model(&#039;User&#039;, userSchema);</code></pre>\n      </div>\n    </div>\n<h2 id=\"additional-resources\" class=\"mobile-header\">Additional Resources</h2>\n<li class=\"mobile-list-item\"><a href=\"https://docs.mongodb.com/\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">Official MongoDB Documentation</a></li>\n<li class=\"mobile-list-item\"><a href=\"https://university.mongodb.com/\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">MongoDB University</a></li>\n<li class=\"mobile-list-item\"><a href=\"https://docs.mongodb.com/manual/administration/security-checklist/\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">MongoDB Security Checklist</a></li>\n<li class=\"mobile-list-item\"><a href=\"https://docs.mongodb.com/manual/administration/analyzing-mongodb-performance/\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">MongoDB Performance Best Practices</a></li>\n<li class=\"mobile-list-item\"><a href=\"https://docs.mongodb.com/manual/tutorial/deploy-replica-set/\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">Replica Set Tutorial</a></li>\n<li class=\"mobile-list-item\"><a href=\"https://docs.mongodb.com/manual/tutorial/deploy-shard-cluster/\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">Sharding Tutorial</a></li>\n<li class=\"mobile-list-item\"><a href=\"https://developer.mongodb.com/community/forums/\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">MongoDB Community Forum</a></li>\n<li class=\"mobile-list-item\"><a href=\"https://www.mongodb.com/blog\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">MongoDB Blog</a></li>\n<p class=\"mobile-paragraph\">---</p>\n<p class=\"mobile-paragraph\"><strong>Note:</strong> This guide is part of the <a href=\"https://howtomgr.github.io\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">HowToMgr</a> collection. Always refer to official documentation for the most up-to-date information.</p>","readTime":"16 min","wordCount":3152,"lastBuilt":"2025-09-14T18:12:03.792Z"},{"name":"nagios","displayName":"Nagios","slug":"nagios","description":"Repo for nagios","category":"monitoring","language":null,"stars":0,"forks":0,"topics":[],"githubUrl":"https://github.com/howtomgr/nagios","updatedAt":"2025-09-08T03:12:01Z","createdAt":"2025-09-08T03:11:50Z","readmeRaw":"## ðŸ‘‹ Welcome to nagios ðŸš€  \n\nnagios README  \n  \n  \n## Author  \n\nðŸ¤– casjay: [Github](https://github.com/casjay) ðŸ¤–  \n","readmeHtml":"<h2 id=\"welcome-to-nagios\" class=\"mobile-header\">ðŸ‘‹ Welcome to nagios ðŸš€  </h2>\n<p class=\"mobile-paragraph\">nagios README  </p>\n<h2 id=\"author\" class=\"mobile-header\">Author  </h2>\n<p class=\"mobile-paragraph\">ðŸ¤– casjay: <a href=\"https://github.com/casjay\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">Github</a> ðŸ¤–  </p>","readTime":"1 min","wordCount":15,"lastBuilt":"2025-09-14T18:12:16.141Z"},{"name":"nextcloud","displayName":"Nextcloud","slug":"nextcloud","description":"Repo for nextcloud","category":"productivity","language":null,"stars":0,"forks":0,"topics":[],"githubUrl":"https://github.com/howtomgr/nextcloud","updatedAt":"2025-09-08T03:12:12Z","createdAt":"2025-09-08T03:12:02Z","readmeRaw":"# Nextcloud Installation Guide\n\nSelf-hosted file sync and share platform with collaboration features, calendar, contacts, and extensive app ecosystem.\n\n## Prerequisites\n\n- Linux system (Ubuntu/Debian, RHEL/CentOS, or compatible)\n- Web server (Apache or NGINX)\n- PHP 8.0+ with required extensions\n- Database (MySQL/MariaDB, PostgreSQL, or SQLite)\n- 2GB RAM minimum, 4GB+ recommended\n\n## Installation\n\n### LAMP Stack Setup (Apache + MySQL + PHP)\n```bash\n# Ubuntu/Debian\nsudo apt update\nsudo apt install -y apache2 mariadb-server php php-mysql php-gd php-curl php-mbstring php-intl php-mcrypt php-imagick php-xml php-zip php-bcmath php-gmp\n\n# RHEL/CentOS\nsudo yum install -y httpd mariadb-server php php-mysql php-gd php-curl php-mbstring php-intl php-mcrypt php-imagick php-xml php-zip php-bcmath php-gmp\n\n# Enable services\nsudo systemctl enable --now apache2 mariadb  # Ubuntu/Debian\nsudo systemctl enable --now httpd mariadb    # RHEL/CentOS\n```\n\n### Database Setup\n```bash\n# Secure MySQL installation\nsudo mysql_secure_installation\n\n# Create Nextcloud database\nsudo mysql -u root -p <<EOF\nCREATE DATABASE nextcloud CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci;\nCREATE USER 'nextclouduser'@'localhost' IDENTIFIED BY 'secure_password';\nGRANT ALL PRIVILEGES ON nextcloud.* TO 'nextclouduser'@'localhost';\nFLUSH PRIVILEGES;\nEXIT\nEOF\n```\n\n### Nextcloud Download and Setup\n```bash\n# Download Nextcloud\ncd /tmp\nwget https://download.nextcloud.com/server/releases/latest.tar.bz2\ntar -xjf latest.tar.bz2\n\n# Move to web directory\nsudo cp -R nextcloud /var/www/html/\nsudo chown -R www-data:www-data /var/www/html/nextcloud  # Ubuntu/Debian\nsudo chown -R apache:apache /var/www/html/nextcloud      # RHEL/CentOS\n\n# Set proper permissions\nsudo find /var/www/html/nextcloud/ -type f -print0 | xargs -0 chmod 0640\nsudo find /var/www/html/nextcloud/ -type d -print0 | xargs -0 chmod 0750\nsudo chmod 750 /var/www/html/nextcloud\nsudo chmod -R 770 /var/www/html/nextcloud/data\nsudo chmod -R 770 /var/www/html/nextcloud/apps\nsudo chmod -R 770 /var/www/html/nextcloud/config\n```\n\n### Using Docker Compose\n```bash\n# Create docker-compose.yml\nmkdir -p ~/nextcloud && cd ~/nextcloud\n\ncat > docker-compose.yml <<EOF\nversion: '3.8'\n\nservices:\n  nextcloud:\n    image: nextcloud:latest\n    restart: unless-stopped\n    ports:\n      - \"8080:80\"\n    volumes:\n      - nextcloud_data:/var/www/html\n      - ./config:/var/www/html/config\n      - ./custom_apps:/var/www/html/custom_apps\n      - ./data:/var/www/html/data\n    environment:\n      - MYSQL_HOST=db\n      - MYSQL_DATABASE=nextcloud\n      - MYSQL_USER=nextcloud\n      - MYSQL_PASSWORD=secure_password\n      - NEXTCLOUD_ADMIN_USER=admin\n      - NEXTCLOUD_ADMIN_PASSWORD=admin_password\n      - NEXTCLOUD_TRUSTED_DOMAINS=nextcloud.example.com\n    depends_on:\n      - db\n      - redis\n    networks:\n      - nextcloud\n\n  db:\n    image: mariadb:10.6\n    restart: unless-stopped\n    command: --transaction-isolation=READ-COMMITTED --binlog-format=ROW --innodb-file-per-table=1 --skip-innodb-read-only-compressed\n    volumes:\n      - db_data:/var/lib/mysql\n    environment:\n      - MYSQL_ROOT_PASSWORD=root_password\n      - MYSQL_PASSWORD=secure_password\n      - MYSQL_DATABASE=nextcloud\n      - MYSQL_USER=nextcloud\n    networks:\n      - nextcloud\n\n  redis:\n    image: redis:alpine\n    restart: unless-stopped\n    networks:\n      - nextcloud\n\nvolumes:\n  nextcloud_data:\n  db_data:\n\nnetworks:\n  nextcloud:\n    driver: bridge\nEOF\n\n# Start services\ndocker-compose up -d\n\n# Check logs\ndocker-compose logs -f nextcloud\n```\n\n## Configuration\n\n### Apache Virtual Host\n```bash\n# Create Apache virtual host\nsudo tee /etc/apache2/sites-available/nextcloud.conf > /dev/null <<EOF\n<VirtualHost *:80>\n    ServerName nextcloud.example.com\n    DocumentRoot /var/www/html/nextcloud\n\n    <Directory /var/www/html/nextcloud/>\n        Require all granted\n        AllowOverride All\n        Options FollowSymLinks MultiViews\n        \n        <IfModule mod_dav.c>\n            Dav off\n        </IfModule>\n    </Directory>\n\n    # Security headers\n    Header always set Strict-Transport-Security \"max-age=15552000; includeSubDomains\"\n    Header always set X-Content-Type-Options nosniff\n    Header always set X-Frame-Options \"SAMEORIGIN\"\n    Header always set X-XSS-Protection \"1; mode=block\"\n    Header always set Referrer-Policy \"no-referrer\"\n    Header always set Feature-Policy \"camera 'none'; microphone 'none'\"\n\n    ErrorLog \\${APACHE_LOG_DIR}/nextcloud_error.log\n    CustomLog \\${APACHE_LOG_DIR}/nextcloud_access.log combined\n</VirtualHost>\nEOF\n\n# Enable required modules\nsudo a2enmod rewrite headers env dir mime ssl\nsudo a2ensite nextcloud.conf\nsudo systemctl restart apache2\n```\n\n### NGINX Configuration\n```bash\n# Create NGINX server block\nsudo tee /etc/nginx/sites-available/nextcloud > /dev/null <<EOF\nupstream php-handler {\n    server unix:/var/run/php/php8.0-fpm.sock;\n}\n\nserver {\n    listen 80;\n    server_name nextcloud.example.com;\n    return 301 https://\\$server_name\\$request_uri;\n}\n\nserver {\n    listen 443 ssl http2;\n    server_name nextcloud.example.com;\n\n    # SSL configuration\n    ssl_certificate /etc/ssl/certs/nextcloud.crt;\n    ssl_certificate_key /etc/ssl/private/nextcloud.key;\n    ssl_protocols TLSv1.2 TLSv1.3;\n    ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:ECDHE-RSA-AES256-GCM-SHA384;\n    ssl_prefer_server_ciphers off;\n\n    # Security headers\n    add_header Strict-Transport-Security \"max-age=15768000; includeSubDomains; preload\" always;\n    add_header Referrer-Policy \"no-referrer\" always;\n    add_header X-Content-Type-Options \"nosniff\" always;\n    add_header X-Download-Options \"noopen\" always;\n    add_header X-Frame-Options \"SAMEORIGIN\" always;\n    add_header X-Permitted-Cross-Domain-Policies \"none\" always;\n    add_header X-Robots-Tag \"none\" always;\n    add_header X-XSS-Protection \"1; mode=block\" always;\n\n    # Remove X-Powered-By\n    fastcgi_hide_header X-Powered-By;\n\n    # Path to the root of your installation\n    root /var/www/html/nextcloud;\n    index index.php index.html /index.php\\$request_uri;\n\n    # Rule borrowed from `.htaccess` to handle Microsoft DAV clients\n    location = / {\n        if ( \\$http_user_agent ~ ^DavClnt ) {\n            return 302 /remote.php/webdav/\\$is_args\\$args;\n        }\n    }\n\n    location = /robots.txt {\n        allow all;\n        log_not_found off;\n        access_log off;\n    }\n\n    # Make a regex exception for `/.well-known` so that clients can still\n    # access it despite the existence of the regex rule\n    location ^~ /.well-known {\n        location = /.well-known/carddav { return 301 /remote.php/dav/; }\n        location = /.well-known/caldav  { return 301 /remote.php/dav/; }\n        location /.well-known/acme-challenge    { try_files \\$uri \\$uri/ =404; }\n        location /.well-known/pki-validation    { try_files \\$uri \\$uri/ =404; }\n        return 301 /index.php\\$request_uri;\n    }\n\n    # Rules borrowed from `.htaccess` to hide certain paths.\n    location ~ ^/(?:build|tests|config|lib|3rdparty|templates|data)(?:\\$|/)  { return 404; }\n    location ~ ^/(?:\\\\.|autotest|occ|issue|indie|db_|console)                { return 404; }\n\n    # Ensure this block, which passes PHP files to the PHP process, is above the blocks\n    # which handle static assets (as seen below). If this block is not declared first,\n    # then Nginx will encounter an infinite rewriting loop when it prepends\n    # `/index.php` to the URI, resulting in a HTTP 500 error response.\n    location ~ \\\\.php(?:\\$|/) {\n        # Required for legacy support\n        rewrite ^/(?!index|remote|public|cron|core\\\\/ajax\\\\/update|status|ocs\\\\/v[12]|updater\\\\/.+|oc[ms]-provider\\\\/.+|.+\\\\/richdocumentscode\\\\/proxy) /index.php\\$request_uri;\n\n        fastcgi_split_path_info ^(.+?\\\\.php)(/.*)\\$;\n        set \\$path_info \\$fastcgi_path_info;\n\n        try_files \\$fastcgi_script_name =404;\n\n        include fastcgi_params;\n        fastcgi_param SCRIPT_FILENAME \\$document_root\\$fastcgi_script_name;\n        fastcgi_param PATH_INFO \\$path_info;\n        fastcgi_param HTTPS on;\n\n        fastcgi_param modHeadersAvailable true;\n        fastcgi_param front_controller_active true;\n        fastcgi_pass php-handler;\n\n        fastcgi_intercept_errors on;\n        fastcgi_request_buffering off;\n    }\n\n    location ~ \\\\.(?:css|js|svg|gif|png|jpg|ico)\\$ {\n        try_files \\$uri /index.php\\$request_uri;\n        expires 6M;\n        access_log off;\n    }\n\n    location ~ \\\\.woff2?\\$ {\n        try_files \\$uri /index.php\\$request_uri;\n        expires 7d;\n        access_log off;\n    }\n\n    # Rule borrowed from `.htaccess`\n    location /remote {\n        return 301 /remote.php\\$request_uri;\n    }\n\n    location / {\n        try_files \\$uri \\$uri/ /index.php\\$request_uri;\n    }\n}\nEOF\n\n# Enable site\nsudo ln -s /etc/nginx/sites-available/nextcloud /etc/nginx/sites-enabled/\nsudo nginx -t && sudo systemctl restart nginx\n```\n\n### PHP Configuration\n```bash\n# Optimize PHP for Nextcloud\nsudo nano /etc/php/8.0/apache2/php.ini  # Apache\nsudo nano /etc/php/8.0/fpm/php.ini      # NGINX\n\n# Recommended settings:\nmemory_limit = 512M\nupload_max_filesize = 16G\npost_max_size = 16G\nmax_execution_time = 3600\nmax_input_time = 3600\nmax_input_vars = 3000\ndate.timezone = \"America/New_York\"\n\n# OPcache settings\nopcache.enable = 1\nopcache.interned_strings_buffer = 16\nopcache.max_accelerated_files = 10000\nopcache.memory_consumption = 128\nopcache.save_comments = 1\nopcache.revalidate_freq = 1\n\n# APCu for local cache\napc.enable_cli = 1\n\nsudo systemctl restart apache2  # Apache\nsudo systemctl restart php8.0-fpm  # NGINX\n```\n\n### Command Line Installation\n```bash\n# Install via command line\ncd /var/www/html/nextcloud\nsudo -u www-data php occ maintenance:install \\\n  --database=\"mysql\" \\\n  --database-name=\"nextcloud\" \\\n  --database-user=\"nextclouduser\" \\\n  --database-pass=\"secure_password\" \\\n  --admin-user=\"admin\" \\\n  --admin-pass=\"admin_password\" \\\n  --data-dir=\"/var/www/html/nextcloud/data\"\n\n# Configure trusted domains\nsudo -u www-data php occ config:system:set trusted_domains 0 --value=nextcloud.example.com\nsudo -u www-data php occ config:system:set trusted_domains 1 --value=192.168.1.100\n\n# Configure caching\nsudo -u www-data php occ config:system:set memcache.local --value=\"\\\\OC\\\\Memcache\\\\APCu\"\nsudo -u www-data php occ config:system:set memcache.distributed --value=\"\\\\OC\\\\Memcache\\\\Redis\"\nsudo -u www-data php occ config:system:set redis host --value=\"localhost\"\nsudo -u www-data php occ config:system:set redis port --value=6379\n```\n\n## Performance Optimization\n\n### Redis Caching Setup\n```bash\n# Install Redis\nsudo apt install -y redis-server  # Ubuntu/Debian\nsudo yum install -y redis          # RHEL/CentOS\n\nsudo systemctl enable --now redis\n\n# Configure Redis for Nextcloud\nsudo tee -a /etc/redis/redis.conf > /dev/null <<EOF\nmaxmemory 512mb\nmaxmemory-policy allkeys-lru\nsave 900 1\nsave 300 10\nsave 60 10000\nEOF\n\nsudo systemctl restart redis\n\n# Install Redis PHP extension\nsudo apt install -y php-redis  # Ubuntu/Debian\nsudo yum install -y php-redis   # RHEL/CentOS\n\n# Configure Nextcloud to use Redis\nsudo -u www-data php occ config:system:set memcache.local --value=\"\\\\OC\\\\Memcache\\\\APCu\"\nsudo -u www-data php occ config:system:set memcache.distributed --value=\"\\\\OC\\\\Memcache\\\\Redis\"\nsudo -u www-data php occ config:system:set redis host --value=\"localhost\"\nsudo -u www-data php occ config:system:set redis port --value=6379\n```\n\n### Database Optimization\n```bash\n# MySQL/MariaDB optimization for Nextcloud\nsudo tee -a /etc/mysql/mysql.conf.d/nextcloud.cnf > /dev/null <<EOF\n[mysqld]\ninnodb_buffer_pool_size = 1G\ninnodb_io_capacity = 4000\ninnodb_log_file_size = 128M\ninnodb_log_buffer_size = 32M\ninnodb_flush_log_at_trx_commit = 1\ninnodb_flush_method = O_DIRECT\ninnodb_file_per_table = 1\n\nquery_cache_type = 1\nquery_cache_limit = 2M\nquery_cache_size = 64M\n\ntmp_table_size = 64M\nmax_heap_table_size = 64M\n\njoin_buffer_size = 262144\nsort_buffer_size = 262144\n\nmax_connections = 100\nmax_connect_errors = 10\nconnect_timeout = 5\nwait_timeout = 600\nmax_allowed_packet = 64M\n\nthread_cache_size = 128\nquery_cache_size = 64M\n\n[mysql.server]\ndefault-table-type = innodb\nEOF\n\nsudo systemctl restart mysql\n\n# Add indexes for better performance\nmysql -u nextclouduser -p nextcloud <<EOF\nALTER TABLE oc_jobs ADD INDEX jobs_class_index (class);\nALTER TABLE oc_filecache ADD INDEX fs_mtime (mtime);\nEOF\n```\n\n### Background Jobs\n```bash\n# Configure cron for background jobs\nsudo crontab -u www-data -e\n# Add: */5 * * * * php /var/www/html/nextcloud/occ system:cron\n\n# Or configure via occ command\nsudo -u www-data php occ background:cron\n\n# Check background job status\nsudo -u www-data php occ status\nsudo -u www-data php occ background:job:list\n```\n\n## Security Hardening\n\n### File Permissions and Security\n```bash\n# Secure file permissions script\nsudo tee /usr/local/bin/nextcloud-permissions.sh > /dev/null <<'EOF'\n#!/bin/bash\nncpath='/var/www/html/nextcloud'\nhtuser='www-data'\nhtgroup='www-data'\nrootuser='root'\n\nprintf \"Creating possible missing Directories\\n\"\nmkdir -p $ncpath/data\nmkdir -p $ncpath/assets\nmkdir -p $ncpath/updater\n\nprintf \"chmod Files and Directories\\n\"\nfind ${ncpath}/ -type f -print0 | xargs -0 chmod 0640\nfind ${ncpath}/ -type d -print0 | xargs -0 chmod 0750\n\nprintf \"chown Directories\\n\"\nchown -R ${rootuser}:${htgroup} ${ncpath}/\nchown -R ${htuser}:${htgroup} ${ncpath}/apps/\nchown -R ${htuser}:${htgroup} ${ncpath}/assets/\nchown -R ${htuser}:${htgroup} ${ncpath}/config/\nchown -R ${htuser}:${htgroup} ${ncpath}/data/\nchown -R ${htuser}:${htgroup} ${ncpath}/themes/\nchown -R ${htuser}:${htgroup} ${ncpath}/updater/\n\nchmod +x ${ncpath}/occ\n\nprintf \"chmod/chown .htaccess\\n\"\nif [ -f ${ncpath}/.htaccess ]; then\n    chmod 0644 ${ncpath}/.htaccess\n    chown ${rootuser}:${htgroup} ${ncpath}/.htaccess\nfi\n\nif [ -f ${ncpath}/data/.htaccess ]; then\n    chmod 0644 ${ncpath}/data/.htaccess\n    chown ${rootuser}:${htgroup} ${ncpath}/data/.htaccess\nfi\nEOF\n\nsudo chmod +x /usr/local/bin/nextcloud-permissions.sh\nsudo /usr/local/bin/nextcloud-permissions.sh\n```\n\n### SSL/TLS Configuration\n```bash\n# Install Let's Encrypt certificate\nsudo apt install -y certbot python3-certbot-apache  # Apache\nsudo apt install -y certbot python3-certbot-nginx   # NGINX\n\n# Obtain certificate\nsudo certbot --apache -d nextcloud.example.com  # Apache\nsudo certbot --nginx -d nextcloud.example.com   # NGINX\n\n# Configure HTTPS redirect in Nextcloud\nsudo -u www-data php occ config:system:set overwrite.cli.url --value=\"https://nextcloud.example.com\"\nsudo -u www-data php occ config:system:set overwriteprotocol --value=\"https\"\n```\n\n### Security Scan and Hardening\n```bash\n# Run Nextcloud security scan\nsudo -u www-data php occ security:certificates\nsudo -u www-data php occ security:bruteforce:reset admin\n\n# Configure rate limiting\nsudo -u www-data php occ config:app:set brute_force_protection delay_increment --value=10\nsudo -u www-data php occ config:app:set brute_force_protection fail_tolerance --value=3\n\n# Enable two-factor authentication\nsudo -u www-data php occ app:enable twofactor_totp\nsudo -u www-data php occ app:enable twofactor_u2f\n\n# Configure file access control\nsudo -u www-data php occ config:system:set default_file_access --value=\"restrict\"\n```\n\n## App Management\n\n### Essential Apps Installation\n```bash\n# Install popular apps via occ\nsudo -u www-data php occ app:install calendar\nsudo -u www-data php occ app:install contacts\nsudo -u www-data php occ app:install mail\nsudo -u www-data php occ app:install notes\nsudo -u www-data php occ app:install tasks\nsudo -u www-data php occ app:install deck\nsudo -u www-data php occ app:install polls\nsudo -u www-data php occ app:install richdocuments  # OnlyOffice integration\n\n# Enable apps\nsudo -u www-data php occ app:enable calendar\nsudo -u www-data php occ app:enable contacts\nsudo -u www-data php occ app:enable mail\n\n# List available apps\nsudo -u www-data php occ app:list\n\n# Update apps\nsudo -u www-data php occ app:update --all\n```\n\n### OnlyOffice Integration\n```bash\n# Install OnlyOffice Document Server\ndocker run -d --name onlyoffice \\\n  -p 8080:80 \\\n  -v onlyoffice_data:/var/www/onlyoffice/Data \\\n  -v onlyoffice_log:/var/log/onlyoffice \\\n  -v onlyoffice_fonts:/usr/share/fonts/truetype/custom \\\n  -v onlyoffice_forgotten:/var/lib/onlyoffice/documentserver/App_Data/cache/files/forgotten \\\n  onlyoffice/documentserver\n\n# Configure Nextcloud to use OnlyOffice\nsudo -u www-data php occ config:app:set richdocuments wopi_url --value=\"http://localhost:8080\"\n```\n\n## Backup and Maintenance\n\n### Backup Script\n```bash\nsudo tee /usr/local/bin/nextcloud-backup.sh > /dev/null <<'EOF'\n#!/bin/bash\nBACKUP_DIR=\"/backup/nextcloud\"\nNC_DIR=\"/var/www/html/nextcloud\"\nDATE=$(date +%Y%m%d_%H%M%S)\n\nmkdir -p ${BACKUP_DIR}/{files,database}\n\n# Enable maintenance mode\nsudo -u www-data php ${NC_DIR}/occ maintenance:mode --on\n\n# Backup files (exclude data directory for space)\ntar --exclude=\"${NC_DIR}/data\" -czf ${BACKUP_DIR}/files/nextcloud-files-${DATE}.tar.gz -C /var/www/html nextcloud\n\n# Backup database\nmysqldump -u nextclouduser -p'secure_password' nextcloud > ${BACKUP_DIR}/database/nextcloud-db-${DATE}.sql\ngzip ${BACKUP_DIR}/database/nextcloud-db-${DATE}.sql\n\n# Backup data directory separately (if needed)\n# tar -czf ${BACKUP_DIR}/files/nextcloud-data-${DATE}.tar.gz -C ${NC_DIR} data\n\n# Disable maintenance mode\nsudo -u www-data php ${NC_DIR}/occ maintenance:mode --off\n\n# Keep only last 7 backups\nfind ${BACKUP_DIR} -name \"nextcloud-*\" -type f -mtime +7 -delete\n\necho \"Backup completed: nextcloud-${DATE}\"\nEOF\n\nsudo chmod +x /usr/local/bin/nextcloud-backup.sh\n\n# Schedule daily backup\necho \"0 2 * * * root /usr/local/bin/nextcloud-backup.sh\" | sudo tee -a /etc/crontab\n```\n\n### Update and Maintenance\n```bash\n# Create update script\nsudo tee /usr/local/bin/nextcloud-update.sh > /dev/null <<'EOF'\n#!/bin/bash\nNC_DIR=\"/var/www/html/nextcloud\"\n\n# Check for updates\nsudo -u www-data php ${NC_DIR}/occ update:check\n\n# Run updater\nsudo -u www-data php ${NC_DIR}/updater/updater.phar\n\n# Update apps\nsudo -u www-data php ${NC_DIR}/occ app:update --all\n\n# Run database upgrades\nsudo -u www-data php ${NC_DIR}/occ upgrade\n\n# Scan files\nsudo -u www-data php ${NC_DIR}/occ files:scan --all\n\n# Clean up\nsudo -u www-data php ${NC_DIR}/occ files:cleanup\nsudo -u www-data php ${NC_DIR}/occ trashbin:cleanup --all-users\n\necho \"Nextcloud update completed\"\nEOF\n\nsudo chmod +x /usr/local/bin/nextcloud-update.sh\n```\n\n## Verification\n\n```bash\n# Check web server status\nsudo systemctl status apache2  # or nginx\nsudo systemctl status mysql\n\n# Test Nextcloud installation\ncurl -I http://localhost/nextcloud\ncurl -I https://nextcloud.example.com\n\n# Check Nextcloud status via occ\ncd /var/www/html/nextcloud\nsudo -u www-data php occ status\nsudo -u www-data php occ check\n\n# Check background jobs\nsudo -u www-data php occ background:job:list\n\n# Check database connectivity\nsudo -u www-data php occ db:check\n\n# Check security status\nsudo -u www-data php occ security:certificates\nsudo -u www-data php occ security:bruteforce:attempts\n\n# Test file operations\nsudo -u www-data php occ files:scan admin\nsudo -u www-data php occ files:scan --all\n\n# Check logs\nsudo tail -f /var/www/html/nextcloud/data/nextcloud.log\nsudo tail -f /var/log/apache2/nextcloud_error.log\n```\n\n## Troubleshooting\n\n```bash\n# Enable debug mode\nsudo -u www-data php occ config:system:set debug --value=true --type=boolean\nsudo -u www-data php occ config:system:set loglevel --value=0\n\n# Check system requirements\nsudo -u www-data php occ check\n\n# Repair installation\nsudo -u www-data php occ maintenance:repair\n\n# Clear cache\nsudo -u www-data php occ files:cleanup\n\n# Fix file permissions\nsudo /usr/local/bin/nextcloud-permissions.sh\n\n# Database repair\nsudo -u www-data php occ db:check-and-repair\n\n# Update file cache\nsudo -u www-data php occ files:scan --all\n\n# Check configuration\nsudo -u www-data php occ config:list system\n\n# Reset user password\nsudo -u www-data php occ user:resetpassword admin\n\n# Check disk usage\ndu -sh /var/www/html/nextcloud/data/\ndf -h /var/www/html/nextcloud/\n\n# Memory usage check\nsudo -u www-data php occ status --output=json\n```\n\n## Additional Resources\n\n- [Official Documentation](https://docs.nextcloud.com/)\n- [Admin Manual](https://docs.nextcloud.com/server/latest/admin_manual/)\n- [Security Hardening Guide](https://docs.nextcloud.com/server/latest/admin_manual/installation/harden_server.html)\n- [Performance Tuning](https://docs.nextcloud.com/server/latest/admin_manual/installation/server_tuning.html)\n- [Community Forum](https://help.nextcloud.com/)\n\n---\n\n**Note:** This guide is part of the [HowToMgr](https://howtomgr.github.io) collection.","readmeHtml":"<h1 id=\"nextcloud-installation-guide\" class=\"mobile-header\">Nextcloud Installation Guide</h1>\n<p class=\"mobile-paragraph\">Self-hosted file sync and share platform with collaboration features, calendar, contacts, and extensive app ecosystem.</p>\n<h2 id=\"prerequisites\" class=\"mobile-header\">Prerequisites</h2>\n<li class=\"mobile-list-item\">Linux system (Ubuntu/Debian, RHEL/CentOS, or compatible)</li>\n<li class=\"mobile-list-item\">Web server (Apache or NGINX)</li>\n<li class=\"mobile-list-item\">PHP 8.0+ with required extensions</li>\n<li class=\"mobile-list-item\">Database (MySQL/MariaDB, PostgreSQL, or SQLite)</li>\n<li class=\"mobile-list-item\">2GB RAM minimum, 4GB+ recommended</li>\n<h2 id=\"installation\" class=\"mobile-header\">Installation</h2>\n<h3 id=\"lamp-stack-setup-apache-mysql-php\" class=\"mobile-header\">LAMP Stack Setup (Apache + MySQL + PHP)</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Ubuntu/Debian\nsudo apt update\nsudo apt install -y apache2 mariadb-server php php-mysql php-gd php-curl php-mbstring php-intl php-mcrypt php-imagick php-xml php-zip php-bcmath php-gmp\n\n# RHEL/CentOS\nsudo yum install -y httpd mariadb-server php php-mysql php-gd php-curl php-mbstring php-intl php-mcrypt php-imagick php-xml php-zip php-bcmath php-gmp\n\n# Enable services\nsudo systemctl enable --now apache2 mariadb  # Ubuntu/Debian\nsudo systemctl enable --now httpd mariadb    # RHEL/CentOS</code></pre>\n      </div>\n    </div>\n<h3 id=\"database-setup\" class=\"mobile-header\">Database Setup</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Secure MySQL installation\nsudo mysql_secure_installation\n\n# Create Nextcloud database\nsudo mysql -u root -p &lt;&lt;EOF\nCREATE DATABASE nextcloud CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci;\nCREATE USER &#039;nextclouduser&#039;@&#039;localhost&#039; IDENTIFIED BY &#039;secure_password&#039;;\nGRANT ALL PRIVILEGES ON nextcloud.* TO &#039;nextclouduser&#039;@&#039;localhost&#039;;\nFLUSH PRIVILEGES;\nEXIT\nEOF</code></pre>\n      </div>\n    </div>\n<h3 id=\"nextcloud-download-and-setup\" class=\"mobile-header\">Nextcloud Download and Setup</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Download Nextcloud\ncd /tmp\nwget https://download.nextcloud.com/server/releases/latest.tar.bz2\ntar -xjf latest.tar.bz2\n\n# Move to web directory\nsudo cp -R nextcloud /var/www/html/\nsudo chown -R www-data:www-data /var/www/html/nextcloud  # Ubuntu/Debian\nsudo chown -R apache:apache /var/www/html/nextcloud      # RHEL/CentOS\n\n# Set proper permissions\nsudo find /var/www/html/nextcloud/ -type f -print0 | xargs -0 chmod 0640\nsudo find /var/www/html/nextcloud/ -type d -print0 | xargs -0 chmod 0750\nsudo chmod 750 /var/www/html/nextcloud\nsudo chmod -R 770 /var/www/html/nextcloud/data\nsudo chmod -R 770 /var/www/html/nextcloud/apps\nsudo chmod -R 770 /var/www/html/nextcloud/config</code></pre>\n      </div>\n    </div>\n<h3 id=\"using-docker-compose\" class=\"mobile-header\">Using Docker Compose</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Create docker-compose.yml\nmkdir -p ~/nextcloud &amp;&amp; cd ~/nextcloud\n\ncat &gt; docker-compose.yml &lt;&lt;EOF\nversion: &#039;3.8&#039;\n\nservices:\n  nextcloud:\n    image: nextcloud:latest\n    restart: unless-stopped\n    ports:\n      - &quot;8080:80&quot;\n    volumes:\n      - nextcloud_data:/var/www/html\n      - ./config:/var/www/html/config\n      - ./custom_apps:/var/www/html/custom_apps\n      - ./data:/var/www/html/data\n    environment:\n      - MYSQL_HOST=db\n      - MYSQL_DATABASE=nextcloud\n      - MYSQL_USER=nextcloud\n      - MYSQL_PASSWORD=secure_password\n      - NEXTCLOUD_ADMIN_USER=admin\n      - NEXTCLOUD_ADMIN_PASSWORD=admin_password\n      - NEXTCLOUD_TRUSTED_DOMAINS=nextcloud.example.com\n    depends_on:\n      - db\n      - redis\n    networks:\n      - nextcloud\n\n  db:\n    image: mariadb:10.6\n    restart: unless-stopped\n    command: --transaction-isolation=READ-COMMITTED --binlog-format=ROW --innodb-file-per-table=1 --skip-innodb-read-only-compressed\n    volumes:\n      - db_data:/var/lib/mysql\n    environment:\n      - MYSQL_ROOT_PASSWORD=root_password\n      - MYSQL_PASSWORD=secure_password\n      - MYSQL_DATABASE=nextcloud\n      - MYSQL_USER=nextcloud\n    networks:\n      - nextcloud\n\n  redis:\n    image: redis:alpine\n    restart: unless-stopped\n    networks:\n      - nextcloud\n\nvolumes:\n  nextcloud_data:\n  db_data:\n\nnetworks:\n  nextcloud:\n    driver: bridge\nEOF\n\n# Start services\ndocker-compose up -d\n\n# Check logs\ndocker-compose logs -f nextcloud</code></pre>\n      </div>\n    </div>\n<h2 id=\"configuration\" class=\"mobile-header\">Configuration</h2>\n<h3 id=\"apache-virtual-host\" class=\"mobile-header\">Apache Virtual Host</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Create Apache virtual host\nsudo tee /etc/apache2/sites-available/nextcloud.conf &gt; /dev/null &lt;&lt;EOF\n&lt;VirtualHost *:80&gt;\n    ServerName nextcloud.example.com\n    DocumentRoot /var/www/html/nextcloud\n\n    &lt;Directory /var/www/html/nextcloud/&gt;\n        Require all granted\n        AllowOverride All\n        Options FollowSymLinks MultiViews\n        \n        &lt;IfModule mod_dav.c&gt;\n            Dav off\n        &lt;/IfModule&gt;\n    &lt;/Directory&gt;\n\n    # Security headers\n    Header always set Strict-Transport-Security &quot;max-age=15552000; includeSubDomains&quot;\n    Header always set X-Content-Type-Options nosniff\n    Header always set X-Frame-Options &quot;SAMEORIGIN&quot;\n    Header always set X-XSS-Protection &quot;1; mode=block&quot;\n    Header always set Referrer-Policy &quot;no-referrer&quot;\n    Header always set Feature-Policy &quot;camera &#039;none&#039;; microphone &#039;none&#039;&quot;\n\n    ErrorLog \\${APACHE_LOG_DIR}/nextcloud_error.log\n    CustomLog \\${APACHE_LOG_DIR}/nextcloud_access.log combined\n&lt;/VirtualHost&gt;\nEOF\n\n# Enable required modules\nsudo a2enmod rewrite headers env dir mime ssl\nsudo a2ensite nextcloud.conf\nsudo systemctl restart apache2</code></pre>\n      </div>\n    </div>\n<h3 id=\"nginx-configuration\" class=\"mobile-header\">NGINX Configuration</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Create NGINX server block\nsudo tee /etc/nginx/sites-available/nextcloud &gt; /dev/null &lt;&lt;EOF\nupstream php-handler {\n    server unix:/var/run/php/php8.0-fpm.sock;\n}\n\nserver {\n    listen 80;\n    server_name nextcloud.example.com;\n    return 301 https://\\$server_name\\$request_uri;\n}\n\nserver {\n    listen 443 ssl http2;\n    server_name nextcloud.example.com;\n\n    # SSL configuration\n    ssl_certificate /etc/ssl/certs/nextcloud.crt;\n    ssl_certificate_key /etc/ssl/private/nextcloud.key;\n    ssl_protocols TLSv1.2 TLSv1.3;\n    ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:ECDHE-RSA-AES256-GCM-SHA384;\n    ssl_prefer_server_ciphers off;\n\n    # Security headers\n    add_header Strict-Transport-Security &quot;max-age=15768000; includeSubDomains; preload&quot; always;\n    add_header Referrer-Policy &quot;no-referrer&quot; always;\n    add_header X-Content-Type-Options &quot;nosniff&quot; always;\n    add_header X-Download-Options &quot;noopen&quot; always;\n    add_header X-Frame-Options &quot;SAMEORIGIN&quot; always;\n    add_header X-Permitted-Cross-Domain-Policies &quot;none&quot; always;\n    add_header X-Robots-Tag &quot;none&quot; always;\n    add_header X-XSS-Protection &quot;1; mode=block&quot; always;\n\n    # Remove X-Powered-By\n    fastcgi_hide_header X-Powered-By;\n\n    # Path to the root of your installation\n    root /var/www/html/nextcloud;\n    index index.php index.html /index.php\\$request_uri;\n\n    # Rule borrowed from `.htaccess` to handle Microsoft DAV clients\n    location = / {\n        if ( \\$http_user_agent ~ ^DavClnt ) {\n            return 302 /remote.php/webdav/\\$is_args\\$args;\n        }\n    }\n\n    location = /robots.txt {\n        allow all;\n        log_not_found off;\n        access_log off;\n    }\n\n    # Make a regex exception for `/.well-known` so that clients can still\n    # access it despite the existence of the regex rule\n    location ^~ /.well-known {\n        location = /.well-known/carddav { return 301 /remote.php/dav/; }\n        location = /.well-known/caldav  { return 301 /remote.php/dav/; }\n        location /.well-known/acme-challenge    { try_files \\$uri \\$uri/ =404; }\n        location /.well-known/pki-validation    { try_files \\$uri \\$uri/ =404; }\n        return 301 /index.php\\$request_uri;\n    }\n\n    # Rules borrowed from `.htaccess` to hide certain paths.\n    location ~ ^/(?:build|tests|config|lib|3rdparty|templates|data)(?:\\$|/)  { return 404; }\n    location ~ ^/(?:\\\\.|autotest|occ|issue|indie|db_|console)                { return 404; }\n\n    # Ensure this block, which passes PHP files to the PHP process, is above the blocks\n    # which handle static assets (as seen below). If this block is not declared first,\n    # then Nginx will encounter an infinite rewriting loop when it prepends\n    # `/index.php` to the URI, resulting in a HTTP 500 error response.\n    location ~ \\\\.php(?:\\$|/) {\n        # Required for legacy support\n        rewrite ^/(?!index|remote|public|cron|core\\\\/ajax\\\\/update|status|ocs\\\\/v[12]|updater\\\\/.+|oc[ms]-provider\\\\/.+|.+\\\\/richdocumentscode\\\\/proxy) /index.php\\$request_uri;\n\n        fastcgi_split_path_info ^(.+?\\\\.php)(/.*)\\$;\n        set \\$path_info \\$fastcgi_path_info;\n\n        try_files \\$fastcgi_script_name =404;\n\n        include fastcgi_params;\n        fastcgi_param SCRIPT_FILENAME \\$document_root\\$fastcgi_script_name;\n        fastcgi_param PATH_INFO \\$path_info;\n        fastcgi_param HTTPS on;\n\n        fastcgi_param modHeadersAvailable true;\n        fastcgi_param front_controller_active true;\n        fastcgi_pass php-handler;\n\n        fastcgi_intercept_errors on;\n        fastcgi_request_buffering off;\n    }\n\n    location ~ \\\\.(?:css|js|svg|gif|png|jpg|ico)\\$ {\n        try_files \\$uri /index.php\\$request_uri;\n        expires 6M;\n        access_log off;\n    }\n\n    location ~ \\\\.woff2?\\$ {\n        try_files \\$uri /index.php\\$request_uri;\n        expires 7d;\n        access_log off;\n    }\n\n    # Rule borrowed from `.htaccess`\n    location /remote {\n        return 301 /remote.php\\$request_uri;\n    }\n\n    location / {\n        try_files \\$uri \\$uri/ /index.php\\$request_uri;\n    }\n}\nEOF\n\n# Enable site\nsudo ln -s /etc/nginx/sites-available/nextcloud /etc/nginx/sites-enabled/\nsudo nginx -t &amp;&amp; sudo systemctl restart nginx</code></pre>\n      </div>\n    </div>\n<h3 id=\"php-configuration\" class=\"mobile-header\">PHP Configuration</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Optimize PHP for Nextcloud\nsudo nano /etc/php/8.0/apache2/php.ini  # Apache\nsudo nano /etc/php/8.0/fpm/php.ini      # NGINX\n\n# Recommended settings:\nmemory_limit = 512M\nupload_max_filesize = 16G\npost_max_size = 16G\nmax_execution_time = 3600\nmax_input_time = 3600\nmax_input_vars = 3000\ndate.timezone = &quot;America/New_York&quot;\n\n# OPcache settings\nopcache.enable = 1\nopcache.interned_strings_buffer = 16\nopcache.max_accelerated_files = 10000\nopcache.memory_consumption = 128\nopcache.save_comments = 1\nopcache.revalidate_freq = 1\n\n# APCu for local cache\napc.enable_cli = 1\n\nsudo systemctl restart apache2  # Apache\nsudo systemctl restart php8.0-fpm  # NGINX</code></pre>\n      </div>\n    </div>\n<h3 id=\"command-line-installation\" class=\"mobile-header\">Command Line Installation</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Install via command line\ncd /var/www/html/nextcloud\nsudo -u www-data php occ maintenance:install \\\n  --database=&quot;mysql&quot; \\\n  --database-name=&quot;nextcloud&quot; \\\n  --database-user=&quot;nextclouduser&quot; \\\n  --database-pass=&quot;secure_password&quot; \\\n  --admin-user=&quot;admin&quot; \\\n  --admin-pass=&quot;admin_password&quot; \\\n  --data-dir=&quot;/var/www/html/nextcloud/data&quot;\n\n# Configure trusted domains\nsudo -u www-data php occ config:system:set trusted_domains 0 --value=nextcloud.example.com\nsudo -u www-data php occ config:system:set trusted_domains 1 --value=192.168.1.100\n\n# Configure caching\nsudo -u www-data php occ config:system:set memcache.local --value=&quot;\\\\OC\\\\Memcache\\\\APCu&quot;\nsudo -u www-data php occ config:system:set memcache.distributed --value=&quot;\\\\OC\\\\Memcache\\\\Redis&quot;\nsudo -u www-data php occ config:system:set redis host --value=&quot;localhost&quot;\nsudo -u www-data php occ config:system:set redis port --value=6379</code></pre>\n      </div>\n    </div>\n<h2 id=\"performance-optimization\" class=\"mobile-header\">Performance Optimization</h2>\n<h3 id=\"redis-caching-setup\" class=\"mobile-header\">Redis Caching Setup</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Install Redis\nsudo apt install -y redis-server  # Ubuntu/Debian\nsudo yum install -y redis          # RHEL/CentOS\n\nsudo systemctl enable --now redis\n\n# Configure Redis for Nextcloud\nsudo tee -a /etc/redis/redis.conf &gt; /dev/null &lt;&lt;EOF\nmaxmemory 512mb\nmaxmemory-policy allkeys-lru\nsave 900 1\nsave 300 10\nsave 60 10000\nEOF\n\nsudo systemctl restart redis\n\n# Install Redis PHP extension\nsudo apt install -y php-redis  # Ubuntu/Debian\nsudo yum install -y php-redis   # RHEL/CentOS\n\n# Configure Nextcloud to use Redis\nsudo -u www-data php occ config:system:set memcache.local --value=&quot;\\\\OC\\\\Memcache\\\\APCu&quot;\nsudo -u www-data php occ config:system:set memcache.distributed --value=&quot;\\\\OC\\\\Memcache\\\\Redis&quot;\nsudo -u www-data php occ config:system:set redis host --value=&quot;localhost&quot;\nsudo -u www-data php occ config:system:set redis port --value=6379</code></pre>\n      </div>\n    </div>\n<h3 id=\"database-optimization\" class=\"mobile-header\">Database Optimization</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># MySQL/MariaDB optimization for Nextcloud\nsudo tee -a /etc/mysql/mysql.conf.d/nextcloud.cnf &gt; /dev/null &lt;&lt;EOF\n[mysqld]\ninnodb_buffer_pool_size = 1G\ninnodb_io_capacity = 4000\ninnodb_log_file_size = 128M\ninnodb_log_buffer_size = 32M\ninnodb_flush_log_at_trx_commit = 1\ninnodb_flush_method = O_DIRECT\ninnodb_file_per_table = 1\n\nquery_cache_type = 1\nquery_cache_limit = 2M\nquery_cache_size = 64M\n\ntmp_table_size = 64M\nmax_heap_table_size = 64M\n\njoin_buffer_size = 262144\nsort_buffer_size = 262144\n\nmax_connections = 100\nmax_connect_errors = 10\nconnect_timeout = 5\nwait_timeout = 600\nmax_allowed_packet = 64M\n\nthread_cache_size = 128\nquery_cache_size = 64M\n\n[mysql.server]\ndefault-table-type = innodb\nEOF\n\nsudo systemctl restart mysql\n\n# Add indexes for better performance\nmysql -u nextclouduser -p nextcloud &lt;&lt;EOF\nALTER TABLE oc_jobs ADD INDEX jobs_class_index (class);\nALTER TABLE oc_filecache ADD INDEX fs_mtime (mtime);\nEOF</code></pre>\n      </div>\n    </div>\n<h3 id=\"background-jobs\" class=\"mobile-header\">Background Jobs</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Configure cron for background jobs\nsudo crontab -u www-data -e\n# Add: */5 * * * * php /var/www/html/nextcloud/occ system:cron\n\n# Or configure via occ command\nsudo -u www-data php occ background:cron\n\n# Check background job status\nsudo -u www-data php occ status\nsudo -u www-data php occ background:job:list</code></pre>\n      </div>\n    </div>\n<h2 id=\"security-hardening\" class=\"mobile-header\">Security Hardening</h2>\n<h3 id=\"file-permissions-and-security\" class=\"mobile-header\">File Permissions and Security</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Secure file permissions script\nsudo tee /usr/local/bin/nextcloud-permissions.sh &gt; /dev/null &lt;&lt;&#039;EOF&#039;\n#!/bin/bash\nncpath=&#039;/var/www/html/nextcloud&#039;\nhtuser=&#039;www-data&#039;\nhtgroup=&#039;www-data&#039;\nrootuser=&#039;root&#039;\n\nprintf &quot;Creating possible missing Directories\\n&quot;\nmkdir -p $ncpath/data\nmkdir -p $ncpath/assets\nmkdir -p $ncpath/updater\n\nprintf &quot;chmod Files and Directories\\n&quot;\nfind ${ncpath}/ -type f -print0 | xargs -0 chmod 0640\nfind ${ncpath}/ -type d -print0 | xargs -0 chmod 0750\n\nprintf &quot;chown Directories\\n&quot;\nchown -R ${rootuser}:${htgroup} ${ncpath}/\nchown -R ${htuser}:${htgroup} ${ncpath}/apps/\nchown -R ${htuser}:${htgroup} ${ncpath}/assets/\nchown -R ${htuser}:${htgroup} ${ncpath}/config/\nchown -R ${htuser}:${htgroup} ${ncpath}/data/\nchown -R ${htuser}:${htgroup} ${ncpath}/themes/\nchown -R ${htuser}:${htgroup} ${ncpath}/updater/\n\nchmod +x ${ncpath}/occ\n\nprintf &quot;chmod/chown .htaccess\\n&quot;\nif [ -f ${ncpath}/.htaccess ]; then\n    chmod 0644 ${ncpath}/.htaccess\n    chown ${rootuser}:${htgroup} ${ncpath}/.htaccess\nfi\n\nif [ -f ${ncpath}/data/.htaccess ]; then\n    chmod 0644 ${ncpath}/data/.htaccess\n    chown ${rootuser}:${htgroup} ${ncpath}/data/.htaccess\nfi\nEOF\n\nsudo chmod +x /usr/local/bin/nextcloud-permissions.sh\nsudo /usr/local/bin/nextcloud-permissions.sh</code></pre>\n      </div>\n    </div>\n<h3 id=\"ssltls-configuration\" class=\"mobile-header\">SSL/TLS Configuration</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Install Let&#039;s Encrypt certificate\nsudo apt install -y certbot python3-certbot-apache  # Apache\nsudo apt install -y certbot python3-certbot-nginx   # NGINX\n\n# Obtain certificate\nsudo certbot --apache -d nextcloud.example.com  # Apache\nsudo certbot --nginx -d nextcloud.example.com   # NGINX\n\n# Configure HTTPS redirect in Nextcloud\nsudo -u www-data php occ config:system:set overwrite.cli.url --value=&quot;https://nextcloud.example.com&quot;\nsudo -u www-data php occ config:system:set overwriteprotocol --value=&quot;https&quot;</code></pre>\n      </div>\n    </div>\n<h3 id=\"security-scan-and-hardening\" class=\"mobile-header\">Security Scan and Hardening</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Run Nextcloud security scan\nsudo -u www-data php occ security:certificates\nsudo -u www-data php occ security:bruteforce:reset admin\n\n# Configure rate limiting\nsudo -u www-data php occ config:app:set brute_force_protection delay_increment --value=10\nsudo -u www-data php occ config:app:set brute_force_protection fail_tolerance --value=3\n\n# Enable two-factor authentication\nsudo -u www-data php occ app:enable twofactor_totp\nsudo -u www-data php occ app:enable twofactor_u2f\n\n# Configure file access control\nsudo -u www-data php occ config:system:set default_file_access --value=&quot;restrict&quot;</code></pre>\n      </div>\n    </div>\n<h2 id=\"app-management\" class=\"mobile-header\">App Management</h2>\n<h3 id=\"essential-apps-installation\" class=\"mobile-header\">Essential Apps Installation</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Install popular apps via occ\nsudo -u www-data php occ app:install calendar\nsudo -u www-data php occ app:install contacts\nsudo -u www-data php occ app:install mail\nsudo -u www-data php occ app:install notes\nsudo -u www-data php occ app:install tasks\nsudo -u www-data php occ app:install deck\nsudo -u www-data php occ app:install polls\nsudo -u www-data php occ app:install richdocuments  # OnlyOffice integration\n\n# Enable apps\nsudo -u www-data php occ app:enable calendar\nsudo -u www-data php occ app:enable contacts\nsudo -u www-data php occ app:enable mail\n\n# List available apps\nsudo -u www-data php occ app:list\n\n# Update apps\nsudo -u www-data php occ app:update --all</code></pre>\n      </div>\n    </div>\n<h3 id=\"onlyoffice-integration\" class=\"mobile-header\">OnlyOffice Integration</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Install OnlyOffice Document Server\ndocker run -d --name onlyoffice \\\n  -p 8080:80 \\\n  -v onlyoffice_data:/var/www/onlyoffice/Data \\\n  -v onlyoffice_log:/var/log/onlyoffice \\\n  -v onlyoffice_fonts:/usr/share/fonts/truetype/custom \\\n  -v onlyoffice_forgotten:/var/lib/onlyoffice/documentserver/App_Data/cache/files/forgotten \\\n  onlyoffice/documentserver\n\n# Configure Nextcloud to use OnlyOffice\nsudo -u www-data php occ config:app:set richdocuments wopi_url --value=&quot;http://localhost:8080&quot;</code></pre>\n      </div>\n    </div>\n<h2 id=\"backup-and-maintenance\" class=\"mobile-header\">Backup and Maintenance</h2>\n<h3 id=\"backup-script\" class=\"mobile-header\">Backup Script</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\">sudo tee /usr/local/bin/nextcloud-backup.sh &gt; /dev/null &lt;&lt;&#039;EOF&#039;\n#!/bin/bash\nBACKUP_DIR=&quot;/backup/nextcloud&quot;\nNC_DIR=&quot;/var/www/html/nextcloud&quot;\nDATE=$(date +%Y%m%d_%H%M%S)\n\nmkdir -p ${BACKUP_DIR}/{files,database}\n\n# Enable maintenance mode\nsudo -u www-data php ${NC_DIR}/occ maintenance:mode --on\n\n# Backup files (exclude data directory for space)\ntar --exclude=&quot;${NC_DIR}/data&quot; -czf ${BACKUP_DIR}/files/nextcloud-files-${DATE}.tar.gz -C /var/www/html nextcloud\n\n# Backup database\nmysqldump -u nextclouduser -p&#039;secure_password&#039; nextcloud &gt; ${BACKUP_DIR}/database/nextcloud-db-${DATE}.sql\ngzip ${BACKUP_DIR}/database/nextcloud-db-${DATE}.sql\n\n# Backup data directory separately (if needed)\n# tar -czf ${BACKUP_DIR}/files/nextcloud-data-${DATE}.tar.gz -C ${NC_DIR} data\n\n# Disable maintenance mode\nsudo -u www-data php ${NC_DIR}/occ maintenance:mode --off\n\n# Keep only last 7 backups\nfind ${BACKUP_DIR} -name &quot;nextcloud-*&quot; -type f -mtime +7 -delete\n\necho &quot;Backup completed: nextcloud-${DATE}&quot;\nEOF\n\nsudo chmod +x /usr/local/bin/nextcloud-backup.sh\n\n# Schedule daily backup\necho &quot;0 2 * * * root /usr/local/bin/nextcloud-backup.sh&quot; | sudo tee -a /etc/crontab</code></pre>\n      </div>\n    </div>\n<h3 id=\"update-and-maintenance\" class=\"mobile-header\">Update and Maintenance</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Create update script\nsudo tee /usr/local/bin/nextcloud-update.sh &gt; /dev/null &lt;&lt;&#039;EOF&#039;\n#!/bin/bash\nNC_DIR=&quot;/var/www/html/nextcloud&quot;\n\n# Check for updates\nsudo -u www-data php ${NC_DIR}/occ update:check\n\n# Run updater\nsudo -u www-data php ${NC_DIR}/updater/updater.phar\n\n# Update apps\nsudo -u www-data php ${NC_DIR}/occ app:update --all\n\n# Run database upgrades\nsudo -u www-data php ${NC_DIR}/occ upgrade\n\n# Scan files\nsudo -u www-data php ${NC_DIR}/occ files:scan --all\n\n# Clean up\nsudo -u www-data php ${NC_DIR}/occ files:cleanup\nsudo -u www-data php ${NC_DIR}/occ trashbin:cleanup --all-users\n\necho &quot;Nextcloud update completed&quot;\nEOF\n\nsudo chmod +x /usr/local/bin/nextcloud-update.sh</code></pre>\n      </div>\n    </div>\n<h2 id=\"verification\" class=\"mobile-header\">Verification</h2>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Check web server status\nsudo systemctl status apache2  # or nginx\nsudo systemctl status mysql\n\n# Test Nextcloud installation\ncurl -I http://localhost/nextcloud\ncurl -I https://nextcloud.example.com\n\n# Check Nextcloud status via occ\ncd /var/www/html/nextcloud\nsudo -u www-data php occ status\nsudo -u www-data php occ check\n\n# Check background jobs\nsudo -u www-data php occ background:job:list\n\n# Check database connectivity\nsudo -u www-data php occ db:check\n\n# Check security status\nsudo -u www-data php occ security:certificates\nsudo -u www-data php occ security:bruteforce:attempts\n\n# Test file operations\nsudo -u www-data php occ files:scan admin\nsudo -u www-data php occ files:scan --all\n\n# Check logs\nsudo tail -f /var/www/html/nextcloud/data/nextcloud.log\nsudo tail -f /var/log/apache2/nextcloud_error.log</code></pre>\n      </div>\n    </div>\n<h2 id=\"troubleshooting\" class=\"mobile-header\">Troubleshooting</h2>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Enable debug mode\nsudo -u www-data php occ config:system:set debug --value=true --type=boolean\nsudo -u www-data php occ config:system:set loglevel --value=0\n\n# Check system requirements\nsudo -u www-data php occ check\n\n# Repair installation\nsudo -u www-data php occ maintenance:repair\n\n# Clear cache\nsudo -u www-data php occ files:cleanup\n\n# Fix file permissions\nsudo /usr/local/bin/nextcloud-permissions.sh\n\n# Database repair\nsudo -u www-data php occ db:check-and-repair\n\n# Update file cache\nsudo -u www-data php occ files:scan --all\n\n# Check configuration\nsudo -u www-data php occ config:list system\n\n# Reset user password\nsudo -u www-data php occ user:resetpassword admin\n\n# Check disk usage\ndu -sh /var/www/html/nextcloud/data/\ndf -h /var/www/html/nextcloud/\n\n# Memory usage check\nsudo -u www-data php occ status --output=json</code></pre>\n      </div>\n    </div>\n<h2 id=\"additional-resources\" class=\"mobile-header\">Additional Resources</h2>\n<li class=\"mobile-list-item\"><a href=\"https://docs.nextcloud.com/\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">Official Documentation</a></li>\n<li class=\"mobile-list-item\"><a href=\"https://docs.nextcloud.com/server/latest/admin_manual/\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">Admin Manual</a></li>\n<li class=\"mobile-list-item\"><a href=\"https://docs.nextcloud.com/server/latest/admin_manual/installation/harden_server.html\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">Security Hardening Guide</a></li>\n<li class=\"mobile-list-item\"><a href=\"https://docs.nextcloud.com/server/latest/admin_manual/installation/server_tuning.html\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">Performance Tuning</a></li>\n<li class=\"mobile-list-item\"><a href=\"https://help.nextcloud.com/\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">Community Forum</a></li>\n<p class=\"mobile-paragraph\">---</p>\n<p class=\"mobile-paragraph\"><strong>Note:</strong> This guide is part of the <a href=\"https://howtomgr.github.io\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">HowToMgr</a> collection.</p>","readTime":"12 min","wordCount":2269,"lastBuilt":"2025-09-14T18:12:15.848Z"},{"name":"nexus","displayName":"Nexus","slug":"nexus","description":"Repo for nexus","category":"infrastructure","language":null,"stars":0,"forks":0,"topics":[],"githubUrl":"https://github.com/howtomgr/nexus","updatedAt":"2025-09-08T03:12:24Z","createdAt":"2025-09-08T03:12:14Z","readmeRaw":"## ðŸ‘‹ Welcome to nexus ðŸš€  \n\nnexus README  \n  \n  \n## Author  \n\nðŸ¤– casjay: [Github](https://github.com/casjay) ðŸ¤–  \n","readmeHtml":"<h2 id=\"welcome-to-nexus\" class=\"mobile-header\">ðŸ‘‹ Welcome to nexus ðŸš€  </h2>\n<p class=\"mobile-paragraph\">nexus README  </p>\n<h2 id=\"author\" class=\"mobile-header\">Author  </h2>\n<p class=\"mobile-paragraph\">ðŸ¤– casjay: <a href=\"https://github.com/casjay\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">Github</a> ðŸ¤–  </p>","readTime":"1 min","wordCount":15,"lastBuilt":"2025-09-14T18:12:15.498Z"},{"name":"nginx","displayName":"NGINX","slug":"nginx","description":"Repo for nginx","category":"web-server","language":null,"stars":0,"forks":0,"topics":[],"githubUrl":"https://github.com/howtomgr/nginx","updatedAt":"2025-09-14T01:30:38Z","createdAt":"2025-09-08T03:12:26Z","readmeRaw":"# NGINX Installation Guide\n\nNGINX is a free and open-source web server, reverse proxy, load balancer, and HTTP cache. Originally written by Igor Sysoev to solve the C10K problem, it's now one of the most popular web servers in the world. NGINX serves as a FOSS alternative to commercial solutions like F5 BIG-IP, Citrix ADC, or proprietary CDNs, offering enterprise-grade performance and reliability without licensing costs.\n\n## Prerequisites\n\n- **Hardware Requirements**:\n  - CPU: 1 core minimum (2+ cores recommended for high traffic)\n  - RAM: 512MB minimum (2GB+ recommended for production)\n  - Storage: 100MB for installation (more for logs and cache)\n- **Operating System**: Linux, BSD, macOS, or Windows\n- **Network Requirements**:\n  - Port 80 (HTTP) and/or 443 (HTTPS)\n  - Additional ports for specific applications\n- **Dependencies**:\n  - PCRE library (for regular expressions)\n  - zlib library (for gzip compression)\n  - OpenSSL library (for SSL/TLS support)\n- **System Access**: root or sudo privileges required\n\n## Installation\n\n### RHEL/CentOS/Rocky Linux/AlmaLinux\n\n```bash\n# RHEL/CentOS 7\nsudo yum install -y epel-release\nsudo yum install -y nginx\n\n# RHEL/CentOS/Rocky/AlmaLinux 8+\nsudo dnf install -y epel-release\nsudo dnf install -y nginx\n\n# Official NGINX repository (recommended for latest stable)\nsudo tee /etc/yum.repos.d/nginx.repo <<'EOF'\n[nginx-stable]\nname=nginx stable repo\nbaseurl=http://nginx.org/packages/centos/$releasever/$basearch/\ngpgcheck=1\nenabled=1\ngpgkey=https://nginx.org/keys/nginx_signing.key\nmodule_hotfixes=true\nEOF\n\n# Install from official repository\nsudo dnf install -y nginx\n\n# Enable and start service\nsudo systemctl enable --now nginx\n```\n\n### Debian/Ubuntu\n\n```bash\n# Distribution packages\nsudo apt update\nsudo apt install -y nginx\n\n# Official NGINX repository (recommended for latest stable)\n# Install prerequisites\nsudo apt install -y curl gnupg2 ca-certificates lsb-release debian-archive-keyring\n\n# Add NGINX signing key\ncurl https://nginx.org/keys/nginx_signing.key | gpg --dearmor \\\n    | sudo tee /usr/share/keyrings/nginx-archive-keyring.gpg >/dev/null\n\n# Add repository\necho \"deb [signed-by=/usr/share/keyrings/nginx-archive-keyring.gpg] \\\n    http://nginx.org/packages/ubuntu `lsb_release -cs` nginx\" \\\n    | sudo tee /etc/apt/sources.list.d/nginx.list\n\n# Install nginx\nsudo apt update\nsudo apt install -y nginx\n\n# Enable and start service\nsudo systemctl enable --now nginx\n```\n\n### Arch Linux\n\n```bash\n# Install nginx from official repositories\nsudo pacman -S nginx\n\n# Optional: Install additional modules\nsudo pacman -S nginx-mod-brotli nginx-mod-headers-more nginx-mod-naxsi\n\n# For GeoIP support\nsudo pacman -S nginx-mod-geoip2\n\n# Enable and start service\nsudo systemctl enable --now nginx\n\n# Install mainline version from AUR\nyay -S nginx-mainline\n\n# Configuration location: /etc/nginx/\n```\n\n### Alpine Linux\n\n```bash\n# Install nginx\napk add --no-cache nginx\n\n# Install additional modules\napk add --no-cache nginx-mod-http-lua nginx-mod-stream nginx-mod-http-geoip2\n\n# Create required directories\nmkdir -p /run/nginx /var/lib/nginx/tmp\n\n# Create nginx user if not exists\nadduser -D -H -s /sbin/nologin -G nginx -g nginx nginx\n\n# Enable and start service\nrc-update add nginx default\nrc-service nginx start\n\n# Configuration location: /etc/nginx/\n```\n\n### openSUSE/SLES\n\n```bash\n# openSUSE Leap/Tumbleweed\nsudo zypper install -y nginx\n\n# Install additional modules\nsudo zypper install -y nginx-module-geoip nginx-module-image-filter\n\n# SLES 15\nsudo SUSEConnect -p sle-module-web-scripting/15.5/x86_64\nsudo zypper install -y nginx\n\n# Enable and start service\nsudo systemctl enable --now nginx\n\n# Configuration location: /etc/nginx/\n```\n\n### macOS\n\n```bash\n# Using Homebrew\nbrew install nginx\n\n# Start as service\nbrew services start nginx\n\n# Or run manually\nnginx\n\n# Configuration location: /usr/local/etc/nginx/\n# Alternative: /opt/homebrew/etc/nginx/ (Apple Silicon)\n```\n\n### FreeBSD\n\n```bash\n# Using pkg\npkg install nginx\n\n# Enable in rc.conf\necho 'nginx_enable=\"YES\"' >> /etc/rc.conf\n\n# Start service\nservice nginx start\n\n# Configuration location: /usr/local/etc/nginx/\n```\n\n### Windows\n\n```powershell\n# Method 1: Using Chocolatey\nchoco install nginx\n\n# Method 2: Using Scoop\nscoop install nginx\n\n# Method 3: Manual installation\n# Download from http://nginx.org/en/download.html\n# Extract to C:\\nginx\n\n# Start nginx\ncd C:\\nginx\nstart nginx\n\n# Install as Windows service using NSSM\nnssm install nginx C:\\nginx\\nginx.exe\nnssm set nginx AppDirectory C:\\nginx\nnssm start nginx\n\n# Configuration location: C:\\nginx\\conf\\\n```\n\n## Initial Configuration\n\n### First-Run Setup\n\n1. **Create nginx user** (if not created by package):\n```bash\n# Linux systems\nsudo useradd -r -d /var/cache/nginx -s /sbin/nologin -c \"nginx user\" nginx\n```\n\n2. **Default configuration locations**:\n- RHEL/CentOS/Rocky/AlmaLinux: `/etc/nginx/nginx.conf`\n- Debian/Ubuntu: `/etc/nginx/nginx.conf`\n- Arch Linux: `/etc/nginx/nginx.conf`\n- Alpine Linux: `/etc/nginx/nginx.conf`\n- openSUSE/SLES: `/etc/nginx/nginx.conf`\n- macOS: `/usr/local/etc/nginx/nginx.conf`\n- FreeBSD: `/usr/local/etc/nginx/nginx.conf`\n- Windows: `C:\\nginx\\conf\\nginx.conf`\n\n3. **Essential settings to change**:\n\n```nginx\n# /etc/nginx/nginx.conf\nuser nginx;  # Run as non-root user\nworker_processes auto;  # Auto-detect CPU cores\nerror_log /var/log/nginx/error.log warn;\npid /var/run/nginx.pid;\n\nevents {\n    worker_connections 1024;  # Increase for high traffic\n    use epoll;  # Linux only, efficient connection method\n}\n\nhttp {\n    # Hide nginx version\n    server_tokens off;\n    \n    # Basic security headers\n    add_header X-Frame-Options \"SAMEORIGIN\" always;\n    add_header X-Content-Type-Options \"nosniff\" always;\n    add_header X-XSS-Protection \"1; mode=block\" always;\n    \n    # Remove default server block\n    # Create site-specific configs in /etc/nginx/conf.d/\n}\n```\n\n### Testing Initial Setup\n\n```bash\n# Test configuration syntax\nsudo nginx -t\n\n# Check nginx version and modules\nnginx -V\n\n# Verify nginx is listening\nsudo ss -tlnp | grep :80\n\n# Test with curl\ncurl -I http://localhost\n```\n\n**WARNING:** Remove or modify the default server block to prevent information disclosure!\n\n## Service Management\n\n### systemd (RHEL, Debian, Ubuntu, Arch, openSUSE)\n\n```bash\n# Enable nginx to start on boot\nsudo systemctl enable nginx\n\n# Start nginx\nsudo systemctl start nginx\n\n# Stop nginx\nsudo systemctl stop nginx\n\n# Restart nginx\nsudo systemctl restart nginx\n\n# Reload configuration without downtime\nsudo systemctl reload nginx\n\n# Check status\nsudo systemctl status nginx\n\n# View logs\nsudo journalctl -u nginx -f\n```\n\n### OpenRC (Alpine Linux)\n\n```bash\n# Enable nginx to start on boot\nrc-update add nginx default\n\n# Start nginx\nrc-service nginx start\n\n# Stop nginx\nrc-service nginx stop\n\n# Restart nginx\nrc-service nginx restart\n\n# Reload configuration\nrc-service nginx reload\n\n# Check status\nrc-service nginx status\n```\n\n### rc.d (FreeBSD)\n\n```bash\n# Enable in /etc/rc.conf\necho 'nginx_enable=\"YES\"' >> /etc/rc.conf\n\n# Start nginx\nservice nginx start\n\n# Stop nginx\nservice nginx stop\n\n# Restart nginx\nservice nginx restart\n\n# Reload configuration\nservice nginx reload\n\n# Check status\nservice nginx status\n```\n\n### launchd (macOS)\n\n```bash\n# Using Homebrew services\nbrew services start nginx\nbrew services stop nginx\nbrew services restart nginx\n\n# Manual launchd control\nsudo launchctl load /Library/LaunchDaemons/homebrew.mxcl.nginx.plist\nsudo launchctl unload /Library/LaunchDaemons/homebrew.mxcl.nginx.plist\n```\n\n### Windows Service Manager\n\n```powershell\n# Using NSSM\nnssm start nginx\nnssm stop nginx\nnssm restart nginx\n\n# Using nginx directly\nnginx -s stop\nnginx -s quit  # Graceful shutdown\nnginx -s reload\nnginx -s reopen  # Reopen log files\n```\n\n## Advanced Configuration\n\n### Main Configuration Structure\n\n```nginx\n# /etc/nginx/nginx.conf\nuser nginx;\nworker_processes auto;\nworker_cpu_affinity auto;\nerror_log /var/log/nginx/error.log warn;\npid /var/run/nginx.pid;\n\n# Load dynamic modules\nload_module modules/ngx_http_geoip2_module.so;\n\nevents {\n    worker_connections 4096;\n    use epoll;\n    multi_accept on;\n}\n\nhttp {\n    include /etc/nginx/mime.types;\n    default_type application/octet-stream;\n\n    # Logging\n    log_format main '$remote_addr - $remote_user [$time_local] \"$request\" '\n                    '$status $body_bytes_sent \"$http_referer\" '\n                    '\"$http_user_agent\" \"$http_x_forwarded_for\"';\n    \n    access_log /var/log/nginx/access.log main buffer=16k;\n\n    # Performance\n    sendfile on;\n    tcp_nopush on;\n    tcp_nodelay on;\n    keepalive_timeout 65;\n    types_hash_max_size 2048;\n    client_max_body_size 100M;\n\n    # Gzip compression\n    gzip on;\n    gzip_vary on;\n    gzip_proxied any;\n    gzip_comp_level 6;\n    gzip_types text/plain text/css text/xml text/javascript \n               application/json application/javascript application/xml+rss \n               application/rss+xml application/atom+xml image/svg+xml;\n\n    # SSL configuration\n    ssl_protocols TLSv1.2 TLSv1.3;\n    ssl_ciphers ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384;\n    ssl_prefer_server_ciphers off;\n    ssl_session_cache shared:SSL:10m;\n    ssl_session_timeout 10m;\n    ssl_session_tickets off;\n    ssl_stapling on;\n    ssl_stapling_verify on;\n\n    # Include server blocks\n    include /etc/nginx/conf.d/*.conf;\n    include /etc/nginx/sites-enabled/*;\n}\n```\n\n### Virtual Host Example\n\n```nginx\n# /etc/nginx/conf.d/example.com.conf\nserver {\n    listen 80;\n    listen [::]:80;\n    server_name example.com www.example.com;\n    \n    # Redirect to HTTPS\n    return 301 https://$server_name$request_uri;\n}\n\nserver {\n    listen 443 ssl http2;\n    listen [::]:443 ssl http2;\n    server_name example.com www.example.com;\n\n    # SSL configuration\n    ssl_certificate /etc/letsencrypt/live/example.com/fullchain.pem;\n    ssl_certificate_key /etc/letsencrypt/live/example.com/privkey.pem;\n    ssl_trusted_certificate /etc/letsencrypt/live/example.com/chain.pem;\n\n    # Security headers\n    add_header Strict-Transport-Security \"max-age=63072000\" always;\n    add_header X-Frame-Options \"DENY\" always;\n    add_header X-Content-Type-Options \"nosniff\" always;\n    add_header X-XSS-Protection \"1; mode=block\" always;\n    add_header Referrer-Policy \"no-referrer-when-downgrade\" always;\n    add_header Content-Security-Policy \"default-src 'self' http: https: data: blob: 'unsafe-inline'\" always;\n\n    # Logging\n    access_log /var/log/nginx/example.com.access.log;\n    error_log /var/log/nginx/example.com.error.log;\n\n    # Root directory\n    root /var/www/example.com/public;\n    index index.html index.htm index.php;\n\n    # Locations\n    location / {\n        try_files $uri $uri/ =404;\n    }\n\n    # PHP-FPM configuration\n    location ~ \\.php$ {\n        fastcgi_pass unix:/var/run/php/php8.1-fpm.sock;\n        fastcgi_index index.php;\n        fastcgi_param SCRIPT_FILENAME $realpath_root$fastcgi_script_name;\n        include fastcgi_params;\n    }\n\n    # Deny access to hidden files\n    location ~ /\\. {\n        deny all;\n    }\n}\n```\n\n## Reverse Proxy Setup\n\n### Basic Reverse Proxy\n\n```nginx\n# /etc/nginx/conf.d/app.example.com.conf\nupstream backend {\n    server 127.0.0.1:3000;\n    server 127.0.0.1:3001 backup;\n    keepalive 32;\n}\n\nserver {\n    listen 80;\n    server_name app.example.com;\n    return 301 https://$server_name$request_uri;\n}\n\nserver {\n    listen 443 ssl http2;\n    server_name app.example.com;\n\n    ssl_certificate /etc/letsencrypt/live/app.example.com/fullchain.pem;\n    ssl_certificate_key /etc/letsencrypt/live/app.example.com/privkey.pem;\n\n    location / {\n        proxy_pass http://backend;\n        proxy_http_version 1.1;\n        \n        # Headers\n        proxy_set_header Host $host;\n        proxy_set_header X-Real-IP $remote_addr;\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n        proxy_set_header X-Forwarded-Proto $scheme;\n        \n        # Timeouts\n        proxy_connect_timeout 60s;\n        proxy_send_timeout 60s;\n        proxy_read_timeout 60s;\n        \n        # Websocket support\n        proxy_set_header Upgrade $http_upgrade;\n        proxy_set_header Connection \"upgrade\";\n    }\n}\n```\n\n### Load Balancing Methods\n\n```nginx\n# Round-robin (default)\nupstream backend {\n    server backend1.example.com;\n    server backend2.example.com;\n    server backend3.example.com;\n}\n\n# Least connections\nupstream backend {\n    least_conn;\n    server backend1.example.com;\n    server backend2.example.com;\n    server backend3.example.com;\n}\n\n# IP hash (session persistence)\nupstream backend {\n    ip_hash;\n    server backend1.example.com;\n    server backend2.example.com;\n    server backend3.example.com;\n}\n\n# Weighted distribution\nupstream backend {\n    server backend1.example.com weight=3;\n    server backend2.example.com weight=2;\n    server backend3.example.com weight=1;\n}\n```\n\n## Security Configuration\n\n### Basic Security Hardening\n\n```nginx\n# Global security settings in nginx.conf\nhttp {\n    # Hide nginx version\n    server_tokens off;\n    \n    # Limit request methods\n    if ($request_method !~ ^(GET|HEAD|POST|PUT|DELETE|OPTIONS)$) {\n        return 405;\n    }\n    \n    # Limit buffer sizes\n    client_body_buffer_size 1K;\n    client_header_buffer_size 1k;\n    client_max_body_size 1M;\n    large_client_header_buffers 2 1k;\n    \n    # Timeouts\n    client_body_timeout 10;\n    client_header_timeout 10;\n    keepalive_timeout 5 5;\n    send_timeout 10;\n    \n    # Rate limiting zones\n    limit_req_zone $binary_remote_addr zone=general:10m rate=10r/s;\n    limit_req_zone $binary_remote_addr zone=login:10m rate=3r/m;\n    limit_conn_zone $binary_remote_addr zone=addr:10m;\n}\n```\n\n### SSL/TLS Best Practices\n\n```nginx\n# Modern SSL configuration\nssl_protocols TLSv1.2 TLSv1.3;\nssl_ciphers ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-CHACHA20-POLY1305:ECDHE-RSA-CHACHA20-POLY1305:DHE-RSA-AES128-GCM-SHA256:DHE-RSA-AES256-GCM-SHA384;\nssl_prefer_server_ciphers off;\n\n# Enable HSTS\nadd_header Strict-Transport-Security \"max-age=63072000; includeSubDomains; preload\" always;\n\n# SSL session caching\nssl_session_cache shared:SSL:50m;\nssl_session_timeout 1d;\nssl_session_tickets off;\n\n# OCSP stapling\nssl_stapling on;\nssl_stapling_verify on;\nresolver 8.8.8.8 8.8.4.4 valid=300s;\nresolver_timeout 5s;\n\n# Diffie-Hellman parameters\nssl_dhparam /etc/nginx/dhparam.pem;\n```\n\n### Firewall Rules\n\n```bash\n# UFW (Ubuntu/Debian)\nsudo ufw allow 'Nginx Full'\nsudo ufw allow 80/tcp\nsudo ufw allow 443/tcp\n\n# firewalld (RHEL/CentOS/openSUSE)\nsudo firewall-cmd --permanent --add-service=http\nsudo firewall-cmd --permanent --add-service=https\nsudo firewall-cmd --reload\n\n# iptables\nsudo iptables -A INPUT -p tcp --dport 80 -j ACCEPT\nsudo iptables -A INPUT -p tcp --dport 443 -j ACCEPT\nsudo iptables-save > /etc/iptables/rules.v4\n\n# pf (FreeBSD)\n# Add to /etc/pf.conf\npass in on $ext_if proto tcp from any to any port {80, 443}\n```\n\n### ModSecurity WAF Integration\n\n```bash\n# Install ModSecurity\n# Debian/Ubuntu\nsudo apt install -y libmodsecurity3 libmodsecurity-nginx\n\n# Build nginx with ModSecurity support\n./configure --add-dynamic-module=/path/to/ModSecurity-nginx\n\n# Load module in nginx.conf\nload_module modules/ngx_http_modsecurity_module.so;\n\n# Enable in server block\nmodsecurity on;\nmodsecurity_rules_file /etc/nginx/modsec/main.conf;\n```\n\n## Database Setup\n\nNot applicable for NGINX as it doesn't require a database. However, NGINX can be configured to work with various database-backed applications through reverse proxy configurations.\n\n## Performance Optimization\n\n### System Tuning\n\n```bash\n# /etc/sysctl.conf\n# Increase system limits\nnet.core.somaxconn = 65535\nnet.core.netdev_max_backlog = 65535\nnet.ipv4.tcp_max_syn_backlog = 65535\nnet.ipv4.tcp_fin_timeout = 30\nnet.ipv4.tcp_keepalive_time = 1200\nnet.ipv4.tcp_max_tw_buckets = 5000\nnet.ipv4.tcp_tw_reuse = 1\nnet.ipv4.tcp_slow_start_after_idle = 0\n\n# File descriptors\nfs.file-max = 65535\n\n# Apply changes\nsudo sysctl -p\n```\n\n### NGINX Optimization\n\n```nginx\n# Worker configuration\nworker_processes auto;\nworker_cpu_affinity auto;\nworker_rlimit_nofile 65535;\n\nevents {\n    worker_connections 65535;\n    use epoll;\n    multi_accept on;\n}\n\nhttp {\n    # Caching\n    open_file_cache max=200000 inactive=20s;\n    open_file_cache_valid 30s;\n    open_file_cache_min_uses 2;\n    open_file_cache_errors on;\n\n    # Buffer sizes\n    client_body_buffer_size 128k;\n    client_max_body_size 10m;\n    client_header_buffer_size 1k;\n    large_client_header_buffers 4 16k;\n    output_buffers 1 32k;\n    postpone_output 1460;\n\n    # Compression\n    gzip on;\n    gzip_vary on;\n    gzip_proxied any;\n    gzip_comp_level 6;\n    gzip_min_length 1000;\n    gzip_disable \"msie6\";\n    gzip_types\n        text/plain\n        text/css\n        text/xml\n        text/javascript\n        application/json\n        application/javascript\n        application/xml+rss\n        application/rss+xml\n        application/atom+xml\n        image/svg+xml;\n}\n```\n\n### Content Caching\n\n```nginx\n# Define cache\nproxy_cache_path /var/cache/nginx levels=1:2 keys_zone=static_cache:10m max_size=1g inactive=60m use_temp_path=off;\n\nserver {\n    location ~* \\.(jpg|jpeg|png|gif|ico|css|js)$ {\n        expires 1y;\n        add_header Cache-Control \"public, immutable\";\n        proxy_cache static_cache;\n        proxy_cache_valid 200 60m;\n        proxy_cache_use_stale error timeout invalid_header updating http_500 http_502 http_503 http_504;\n    }\n}\n```\n\n## Monitoring\n\n### Built-in Status Module\n\n```nginx\n# Enable stub_status\nserver {\n    listen 127.0.0.1:8080;\n    server_name localhost;\n    \n    location /nginx_status {\n        stub_status;\n        allow 127.0.0.1;\n        deny all;\n    }\n}\n```\n\n### Access with curl\n\n```bash\n# Get basic metrics\ncurl http://127.0.0.1:8080/nginx_status\n\n# Sample output:\n# Active connections: 291\n# server accepts handled requests\n#  16630948 16630948 31070465\n# Reading: 6 Writing: 179 Waiting: 106\n```\n\n### Log Analysis\n\n```bash\n# Top 10 IP addresses\nawk '{print $1}' /var/log/nginx/access.log | sort | uniq -c | sort -rn | head -10\n\n# Response codes distribution\nawk '{print $9}' /var/log/nginx/access.log | sort | uniq -c | sort -rn\n\n# Requests per second\ntail -10000 /var/log/nginx/access.log | awk '{print $4}' | uniq -c\n\n# Slow requests (>1s)\nawk '$11 > 1' /var/log/nginx/access.log\n```\n\n### Prometheus Exporter\n\n```bash\n# Install nginx-prometheus-exporter\nwget https://github.com/nginxinc/nginx-prometheus-exporter/releases/download/v0.11.0/nginx-prometheus-exporter_0.11.0_linux_amd64.tar.gz\ntar xzf nginx-prometheus-exporter_0.11.0_linux_amd64.tar.gz\nsudo mv nginx-prometheus-exporter /usr/local/bin/\n\n# Run exporter\nnginx-prometheus-exporter -nginx.scrape-uri=http://127.0.0.1:8080/nginx_status\n\n# Add to Prometheus config\nscrape_configs:\n  - job_name: 'nginx'\n    static_configs:\n      - targets: ['localhost:9113']\n```\n\n## Backup and Restore\n\n### What to Backup\n\n1. **Configuration files**:\n```bash\n/etc/nginx/nginx.conf\n/etc/nginx/conf.d/\n/etc/nginx/sites-available/\n/etc/nginx/sites-enabled/\n/etc/nginx/snippets/\n```\n\n2. **SSL certificates**:\n```bash\n/etc/letsencrypt/\n/etc/ssl/certs/\n/etc/ssl/private/\n```\n\n3. **Log files** (if needed):\n```bash\n/var/log/nginx/\n```\n\n### Backup Script\n\n```bash\n#!/bin/bash\n# backup-nginx.sh\n\nBACKUP_DIR=\"/backup/nginx/$(date +%Y%m%d_%H%M%S)\"\nmkdir -p \"$BACKUP_DIR\"\n\n# Backup nginx configuration\ntar czf \"$BACKUP_DIR/nginx-config.tar.gz\" \\\n    /etc/nginx/ \\\n    --exclude='*.log' \\\n    --exclude='*.pid'\n\n# Backup SSL certificates\nif [ -d /etc/letsencrypt ]; then\n    tar czf \"$BACKUP_DIR/letsencrypt.tar.gz\" /etc/letsencrypt/\nfi\n\n# Save package version\nnginx -v 2>&1 | tee \"$BACKUP_DIR/nginx-version.txt\"\n\n# Test configuration backup\ntar -tzf \"$BACKUP_DIR/nginx-config.tar.gz\" > \"$BACKUP_DIR/backup-contents.txt\"\n\necho \"Backup completed: $BACKUP_DIR\"\n```\n\n### Restore Script\n\n```bash\n#!/bin/bash\n# restore-nginx.sh\n\nBACKUP_DIR=\"$1\"\nif [ -z \"$BACKUP_DIR\" ]; then\n    echo \"Usage: $0 <backup-directory>\"\n    exit 1\nfi\n\n# Stop nginx\nsudo systemctl stop nginx\n\n# Restore configuration\nsudo tar xzf \"$BACKUP_DIR/nginx-config.tar.gz\" -C /\n\n# Restore SSL certificates\nif [ -f \"$BACKUP_DIR/letsencrypt.tar.gz\" ]; then\n    sudo tar xzf \"$BACKUP_DIR/letsencrypt.tar.gz\" -C /\nfi\n\n# Test configuration\nsudo nginx -t\n\nif [ $? -eq 0 ]; then\n    # Start nginx if config is valid\n    sudo systemctl start nginx\n    echo \"Restore completed successfully\"\nelse\n    echo \"Configuration test failed! Please check the configuration\"\n    exit 1\nfi\n```\n\n## Troubleshooting\n\n### Common Issues\n\n1. **Port 80/443 already in use**:\n```bash\n# Find process using port\nsudo ss -tlnp | grep :80\nsudo lsof -i :80\n\n# Stop conflicting service (e.g., Apache)\nsudo systemctl stop apache2\nsudo systemctl disable apache2\n```\n\n2. **Permission denied errors**:\n```bash\n# Check nginx user\nps aux | grep nginx\n\n# Fix ownership\nsudo chown -R nginx:nginx /var/cache/nginx\nsudo chown -R nginx:nginx /var/log/nginx\n\n# SELinux issues (RHEL/CentOS)\nsudo semanage port -l | grep http_port_t\nsudo setsebool -P httpd_can_network_connect 1\n```\n\n3. **502 Bad Gateway**:\n```bash\n# Check upstream service\ncurl -I http://localhost:3000\n\n# Check nginx error log\nsudo tail -f /var/log/nginx/error.log\n\n# Verify socket permissions (PHP-FPM example)\nls -la /var/run/php/php8.1-fpm.sock\n```\n\n4. **SSL certificate issues**:\n```bash\n# Test SSL configuration\nopenssl s_client -connect example.com:443\n\n# Verify certificate\nsudo nginx -t\n\n# Check certificate expiry\necho | openssl s_client -servername example.com -connect example.com:443 2>/dev/null | openssl x509 -noout -dates\n```\n\n### Debug Mode\n\n```nginx\n# Enable debug logging\nerror_log /var/log/nginx/error.log debug;\n\n# Debug specific module\nerror_log /var/log/nginx/error.log debug_http;\n\n# Debug rewrite rules\nrewrite_log on;\nerror_log /var/log/nginx/rewrite.log notice;\n```\n\n## Maintenance\n\n### Update Procedures\n\n```bash\n# RHEL/CentOS/Rocky/AlmaLinux\nsudo dnf check-update nginx\nsudo dnf update nginx\n\n# Debian/Ubuntu\nsudo apt update\nsudo apt upgrade nginx\n\n# Arch Linux\nsudo pacman -Syu nginx\n\n# Alpine Linux\napk update\napk upgrade nginx\n\n# openSUSE\nsudo zypper update nginx\n\n# FreeBSD\npkg update\npkg upgrade nginx\n\n# Always test configuration after update\nsudo nginx -t\nsudo systemctl reload nginx\n```\n\n### Log Rotation\n\n```bash\n# Default logrotate configuration\n# /etc/logrotate.d/nginx\n/var/log/nginx/*.log {\n    daily\n    missingok\n    rotate 14\n    compress\n    delaycompress\n    notifempty\n    create 0640 nginx adm\n    sharedscripts\n    prerotate\n        if [ -d /etc/logrotate.d/httpd-prerotate ]; then \\\n            run-parts /etc/logrotate.d/httpd-prerotate; \\\n        fi\n    endscript\n    postrotate\n        invoke-rc.d nginx rotate >/dev/null 2>&1\n    endscript\n}\n```\n\n### Performance Monitoring\n\n```bash\n# Monitor nginx processes\nhtop -p $(pgrep -d, nginx)\n\n# Check memory usage\nps aux | grep nginx | awk '{sum+=$6} END {print \"Total RSS: \" sum/1024 \" MB\"}'\n\n# Monitor connections\nwatch -n 1 'ss -tan | grep :80 | wc -l'\n\n# Check open files\nsudo lsof -u nginx | wc -l\n```\n\n## Integration Examples\n\n### PHP-FPM Integration\n\n```nginx\n# PHP-FPM upstream\nupstream php-fpm {\n    server unix:/var/run/php/php8.1-fpm.sock;\n}\n\nserver {\n    location ~ \\.php$ {\n        try_files $uri =404;\n        fastcgi_split_path_info ^(.+\\.php)(/.+)$;\n        fastcgi_pass php-fpm;\n        fastcgi_index index.php;\n        fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;\n        include fastcgi_params;\n        \n        # Performance\n        fastcgi_buffer_size 16k;\n        fastcgi_buffers 4 16k;\n    }\n}\n```\n\n### Node.js Application\n\n```nginx\nupstream nodejs_app {\n    server 127.0.0.1:3000;\n    keepalive 64;\n}\n\nserver {\n    location / {\n        proxy_pass http://nodejs_app;\n        proxy_http_version 1.1;\n        proxy_set_header Upgrade $http_upgrade;\n        proxy_set_header Connection 'upgrade';\n        proxy_set_header Host $host;\n        proxy_cache_bypass $http_upgrade;\n        proxy_set_header X-Real-IP $remote_addr;\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n        proxy_set_header X-Forwarded-Proto $scheme;\n    }\n}\n```\n\n### Python/Gunicorn Integration\n\n```nginx\nupstream gunicorn_app {\n    server unix:/run/gunicorn.sock fail_timeout=0;\n}\n\nserver {\n    location / {\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n        proxy_set_header X-Forwarded-Proto $scheme;\n        proxy_set_header Host $http_host;\n        proxy_redirect off;\n        proxy_pass http://gunicorn_app;\n    }\n    \n    location /static/ {\n        alias /var/www/app/static/;\n        expires 30d;\n        add_header Cache-Control \"public, immutable\";\n    }\n}\n```\n\n### Ruby on Rails\n\n```nginx\nupstream rails_app {\n    server unix:/var/www/app/shared/sockets/puma.sock fail_timeout=0;\n}\n\nserver {\n    root /var/www/app/current/public;\n    \n    location / {\n        try_files $uri @rails_app;\n    }\n    \n    location @rails_app {\n        proxy_pass http://rails_app;\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n        proxy_set_header X-Forwarded-Proto $scheme;\n        proxy_set_header Host $http_host;\n        proxy_redirect off;\n    }\n    \n    location ~ ^/(assets|packs)/ {\n        gzip_static on;\n        expires max;\n        add_header Cache-Control public;\n    }\n}\n```\n\n### WebSocket Support\n\n```nginx\nmap $http_upgrade $connection_upgrade {\n    default upgrade;\n    '' close;\n}\n\nupstream websocket {\n    server 127.0.0.1:8080;\n}\n\nserver {\n    location /ws {\n        proxy_pass http://websocket;\n        proxy_http_version 1.1;\n        proxy_set_header Upgrade $http_upgrade;\n        proxy_set_header Connection $connection_upgrade;\n        proxy_set_header Host $host;\n        proxy_set_header X-Real-IP $remote_addr;\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n        proxy_set_header X-Forwarded-Proto $scheme;\n        \n        # Timeouts\n        proxy_connect_timeout 7d;\n        proxy_send_timeout 7d;\n        proxy_read_timeout 7d;\n    }\n}\n```\n\n## Additional Resources\n\n- [Official Documentation](https://nginx.org/en/docs/)\n- [GitHub Repository](https://github.com/nginx/nginx)\n- [NGINX Wiki](https://www.nginx.com/resources/wiki/)\n- [NGINX Config Generator](https://www.digitalocean.com/community/tools/nginx)\n- [Community Forum](https://forum.nginx.org/)\n- [Security Advisories](https://nginx.org/en/security_advisories.html)\n- [Module Registry](https://www.nginx.com/resources/wiki/modules/)\n\n---\n\n**Note:** This guide is part of the [HowToMgr](https://howtomgr.github.io) collection. Always refer to official documentation for the most up-to-date information.","readmeHtml":"<h1 id=\"nginx-installation-guide\" class=\"mobile-header\">NGINX Installation Guide</h1>\n<p class=\"mobile-paragraph\">NGINX is a free and open-source web server, reverse proxy, load balancer, and HTTP cache. Originally written by Igor Sysoev to solve the C10K problem, it's now one of the most popular web servers in the world. NGINX serves as a FOSS alternative to commercial solutions like F5 BIG-IP, Citrix ADC, or proprietary CDNs, offering enterprise-grade performance and reliability without licensing costs.</p>\n<h2 id=\"prerequisites\" class=\"mobile-header\">Prerequisites</h2>\n<li class=\"mobile-list-item\"><strong>Hardware Requirements</strong>:</li>\n<li class=\"mobile-list-item\">CPU: 1 core minimum (2+ cores recommended for high traffic)</li>\n<li class=\"mobile-list-item\">RAM: 512MB minimum (2GB+ recommended for production)</li>\n<li class=\"mobile-list-item\">Storage: 100MB for installation (more for logs and cache)</li>\n<li class=\"mobile-list-item\"><strong>Operating System</strong>: Linux, BSD, macOS, or Windows</li>\n<li class=\"mobile-list-item\"><strong>Network Requirements</strong>:</li>\n<li class=\"mobile-list-item\">Port 80 (HTTP) and/or 443 (HTTPS)</li>\n<li class=\"mobile-list-item\">Additional ports for specific applications</li>\n<li class=\"mobile-list-item\"><strong>Dependencies</strong>:</li>\n<li class=\"mobile-list-item\">PCRE library (for regular expressions)</li>\n<li class=\"mobile-list-item\">zlib library (for gzip compression)</li>\n<li class=\"mobile-list-item\">OpenSSL library (for SSL/TLS support)</li>\n<li class=\"mobile-list-item\"><strong>System Access</strong>: root or sudo privileges required</li>\n<h2 id=\"installation\" class=\"mobile-header\">Installation</h2>\n<h3 id=\"rhelcentosrocky-linuxalmalinux\" class=\"mobile-header\">RHEL/CentOS/Rocky Linux/AlmaLinux</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># RHEL/CentOS 7\nsudo yum install -y epel-release\nsudo yum install -y nginx\n\n# RHEL/CentOS/Rocky/AlmaLinux 8+\nsudo dnf install -y epel-release\nsudo dnf install -y nginx\n\n# Official NGINX repository (recommended for latest stable)\nsudo tee /etc/yum.repos.d/nginx.repo &lt;&lt;&#039;EOF&#039;\n[nginx-stable]\nname=nginx stable repo\nbaseurl=http://nginx.org/packages/centos/$releasever/$basearch/\ngpgcheck=1\nenabled=1\ngpgkey=https://nginx.org/keys/nginx_signing.key\nmodule_hotfixes=true\nEOF\n\n# Install from official repository\nsudo dnf install -y nginx\n\n# Enable and start service\nsudo systemctl enable --now nginx</code></pre>\n      </div>\n    </div>\n<h3 id=\"debianubuntu\" class=\"mobile-header\">Debian/Ubuntu</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Distribution packages\nsudo apt update\nsudo apt install -y nginx\n\n# Official NGINX repository (recommended for latest stable)\n# Install prerequisites\nsudo apt install -y curl gnupg2 ca-certificates lsb-release debian-archive-keyring\n\n# Add NGINX signing key\ncurl https://nginx.org/keys/nginx_signing.key | gpg --dearmor \\\n    | sudo tee /usr/share/keyrings/nginx-archive-keyring.gpg &gt;/dev/null\n\n# Add repository\necho &quot;deb [signed-by=/usr/share/keyrings/nginx-archive-keyring.gpg] \\\n    http://nginx.org/packages/ubuntu `lsb_release -cs` nginx&quot; \\\n    | sudo tee /etc/apt/sources.list.d/nginx.list\n\n# Install nginx\nsudo apt update\nsudo apt install -y nginx\n\n# Enable and start service\nsudo systemctl enable --now nginx</code></pre>\n      </div>\n    </div>\n<h3 id=\"arch-linux\" class=\"mobile-header\">Arch Linux</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Install nginx from official repositories\nsudo pacman -S nginx\n\n# Optional: Install additional modules\nsudo pacman -S nginx-mod-brotli nginx-mod-headers-more nginx-mod-naxsi\n\n# For GeoIP support\nsudo pacman -S nginx-mod-geoip2\n\n# Enable and start service\nsudo systemctl enable --now nginx\n\n# Install mainline version from AUR\nyay -S nginx-mainline\n\n# Configuration location: /etc/nginx/</code></pre>\n      </div>\n    </div>\n<h3 id=\"alpine-linux\" class=\"mobile-header\">Alpine Linux</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Install nginx\napk add --no-cache nginx\n\n# Install additional modules\napk add --no-cache nginx-mod-http-lua nginx-mod-stream nginx-mod-http-geoip2\n\n# Create required directories\nmkdir -p /run/nginx /var/lib/nginx/tmp\n\n# Create nginx user if not exists\nadduser -D -H -s /sbin/nologin -G nginx -g nginx nginx\n\n# Enable and start service\nrc-update add nginx default\nrc-service nginx start\n\n# Configuration location: /etc/nginx/</code></pre>\n      </div>\n    </div>\n<h3 id=\"opensusesles\" class=\"mobile-header\">openSUSE/SLES</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># openSUSE Leap/Tumbleweed\nsudo zypper install -y nginx\n\n# Install additional modules\nsudo zypper install -y nginx-module-geoip nginx-module-image-filter\n\n# SLES 15\nsudo SUSEConnect -p sle-module-web-scripting/15.5/x86_64\nsudo zypper install -y nginx\n\n# Enable and start service\nsudo systemctl enable --now nginx\n\n# Configuration location: /etc/nginx/</code></pre>\n      </div>\n    </div>\n<h3 id=\"macos\" class=\"mobile-header\">macOS</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Using Homebrew\nbrew install nginx\n\n# Start as service\nbrew services start nginx\n\n# Or run manually\nnginx\n\n# Configuration location: /usr/local/etc/nginx/\n# Alternative: /opt/homebrew/etc/nginx/ (Apple Silicon)</code></pre>\n      </div>\n    </div>\n<h3 id=\"freebsd\" class=\"mobile-header\">FreeBSD</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Using pkg\npkg install nginx\n\n# Enable in rc.conf\necho &#039;nginx_enable=&quot;YES&quot;&#039; &gt;&gt; /etc/rc.conf\n\n# Start service\nservice nginx start\n\n# Configuration location: /usr/local/etc/nginx/</code></pre>\n      </div>\n    </div>\n<h3 id=\"windows\" class=\"mobile-header\">Windows</h3>\n<div class=\"mobile-code-block\" data-language=\"powershell\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">powershell</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-powershell\"># Method 1: Using Chocolatey\nchoco install nginx\n\n# Method 2: Using Scoop\nscoop install nginx\n\n# Method 3: Manual installation\n# Download from http://nginx.org/en/download.html\n# Extract to C:\\nginx\n\n# Start nginx\ncd C:\\nginx\nstart nginx\n\n# Install as Windows service using NSSM\nnssm install nginx C:\\nginx\\nginx.exe\nnssm set nginx AppDirectory C:\\nginx\nnssm start nginx\n\n# Configuration location: C:\\nginx\\conf\\</code></pre>\n      </div>\n    </div>\n<h2 id=\"initial-configuration\" class=\"mobile-header\">Initial Configuration</h2>\n<h3 id=\"first-run-setup\" class=\"mobile-header\">First-Run Setup</h3>\n<p class=\"mobile-paragraph\">1. <strong>Create nginx user</strong> (if not created by package):</p>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Linux systems\nsudo useradd -r -d /var/cache/nginx -s /sbin/nologin -c &quot;nginx user&quot; nginx</code></pre>\n      </div>\n    </div>\n<p class=\"mobile-paragraph\">2. <strong>Default configuration locations</strong>:</p>\n<li class=\"mobile-list-item\">RHEL/CentOS/Rocky/AlmaLinux: <code class=\"mobile-inline-code\">/etc/nginx/nginx.conf</code></li>\n<li class=\"mobile-list-item\">Debian/Ubuntu: <code class=\"mobile-inline-code\">/etc/nginx/nginx.conf</code></li>\n<li class=\"mobile-list-item\">Arch Linux: <code class=\"mobile-inline-code\">/etc/nginx/nginx.conf</code></li>\n<li class=\"mobile-list-item\">Alpine Linux: <code class=\"mobile-inline-code\">/etc/nginx/nginx.conf</code></li>\n<li class=\"mobile-list-item\">openSUSE/SLES: <code class=\"mobile-inline-code\">/etc/nginx/nginx.conf</code></li>\n<li class=\"mobile-list-item\">macOS: <code class=\"mobile-inline-code\">/usr/local/etc/nginx/nginx.conf</code></li>\n<li class=\"mobile-list-item\">FreeBSD: <code class=\"mobile-inline-code\">/usr/local/etc/nginx/nginx.conf</code></li>\n<li class=\"mobile-list-item\">Windows: <code class=\"mobile-inline-code\">C:\\nginx\\conf\\nginx.conf</code></li>\n<p class=\"mobile-paragraph\">3. <strong>Essential settings to change</strong>:</p>\n<div class=\"mobile-code-block\" data-language=\"nginx\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">nginx</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-nginx\"># /etc/nginx/nginx.conf\nuser nginx;  # Run as non-root user\nworker_processes auto;  # Auto-detect CPU cores\nerror_log /var/log/nginx/error.log warn;\npid /var/run/nginx.pid;\n\nevents {\n    worker_connections 1024;  # Increase for high traffic\n    use epoll;  # Linux only, efficient connection method\n}\n\nhttp {\n    # Hide nginx version\n    server_tokens off;\n    \n    # Basic security headers\n    add_header X-Frame-Options &quot;SAMEORIGIN&quot; always;\n    add_header X-Content-Type-Options &quot;nosniff&quot; always;\n    add_header X-XSS-Protection &quot;1; mode=block&quot; always;\n    \n    # Remove default server block\n    # Create site-specific configs in /etc/nginx/conf.d/\n}</code></pre>\n      </div>\n    </div>\n<h3 id=\"testing-initial-setup\" class=\"mobile-header\">Testing Initial Setup</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Test configuration syntax\nsudo nginx -t\n\n# Check nginx version and modules\nnginx -V\n\n# Verify nginx is listening\nsudo ss -tlnp | grep :80\n\n# Test with curl\ncurl -I http://localhost</code></pre>\n      </div>\n    </div>\n<p class=\"mobile-paragraph\"><strong>WARNING:</strong> Remove or modify the default server block to prevent information disclosure!</p>\n<h2 id=\"service-management\" class=\"mobile-header\">Service Management</h2>\n<h3 id=\"systemd-rhel-debian-ubuntu-arch-opensuse\" class=\"mobile-header\">systemd (RHEL, Debian, Ubuntu, Arch, openSUSE)</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Enable nginx to start on boot\nsudo systemctl enable nginx\n\n# Start nginx\nsudo systemctl start nginx\n\n# Stop nginx\nsudo systemctl stop nginx\n\n# Restart nginx\nsudo systemctl restart nginx\n\n# Reload configuration without downtime\nsudo systemctl reload nginx\n\n# Check status\nsudo systemctl status nginx\n\n# View logs\nsudo journalctl -u nginx -f</code></pre>\n      </div>\n    </div>\n<h3 id=\"openrc-alpine-linux\" class=\"mobile-header\">OpenRC (Alpine Linux)</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Enable nginx to start on boot\nrc-update add nginx default\n\n# Start nginx\nrc-service nginx start\n\n# Stop nginx\nrc-service nginx stop\n\n# Restart nginx\nrc-service nginx restart\n\n# Reload configuration\nrc-service nginx reload\n\n# Check status\nrc-service nginx status</code></pre>\n      </div>\n    </div>\n<h3 id=\"rcd-freebsd\" class=\"mobile-header\">rc.d (FreeBSD)</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Enable in /etc/rc.conf\necho &#039;nginx_enable=&quot;YES&quot;&#039; &gt;&gt; /etc/rc.conf\n\n# Start nginx\nservice nginx start\n\n# Stop nginx\nservice nginx stop\n\n# Restart nginx\nservice nginx restart\n\n# Reload configuration\nservice nginx reload\n\n# Check status\nservice nginx status</code></pre>\n      </div>\n    </div>\n<h3 id=\"launchd-macos\" class=\"mobile-header\">launchd (macOS)</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Using Homebrew services\nbrew services start nginx\nbrew services stop nginx\nbrew services restart nginx\n\n# Manual launchd control\nsudo launchctl load /Library/LaunchDaemons/homebrew.mxcl.nginx.plist\nsudo launchctl unload /Library/LaunchDaemons/homebrew.mxcl.nginx.plist</code></pre>\n      </div>\n    </div>\n<h3 id=\"windows-service-manager\" class=\"mobile-header\">Windows Service Manager</h3>\n<div class=\"mobile-code-block\" data-language=\"powershell\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">powershell</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-powershell\"># Using NSSM\nnssm start nginx\nnssm stop nginx\nnssm restart nginx\n\n# Using nginx directly\nnginx -s stop\nnginx -s quit  # Graceful shutdown\nnginx -s reload\nnginx -s reopen  # Reopen log files</code></pre>\n      </div>\n    </div>\n<h2 id=\"advanced-configuration\" class=\"mobile-header\">Advanced Configuration</h2>\n<h3 id=\"main-configuration-structure\" class=\"mobile-header\">Main Configuration Structure</h3>\n<div class=\"mobile-code-block\" data-language=\"nginx\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">nginx</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-nginx\"># /etc/nginx/nginx.conf\nuser nginx;\nworker_processes auto;\nworker_cpu_affinity auto;\nerror_log /var/log/nginx/error.log warn;\npid /var/run/nginx.pid;\n\n# Load dynamic modules\nload_module modules/ngx_http_geoip2_module.so;\n\nevents {\n    worker_connections 4096;\n    use epoll;\n    multi_accept on;\n}\n\nhttp {\n    include /etc/nginx/mime.types;\n    default_type application/octet-stream;\n\n    # Logging\n    log_format main &#039;$remote_addr - $remote_user [$time_local] &quot;$request&quot; &#039;\n                    &#039;$status $body_bytes_sent &quot;$http_referer&quot; &#039;\n                    &#039;&quot;$http_user_agent&quot; &quot;$http_x_forwarded_for&quot;&#039;;\n    \n    access_log /var/log/nginx/access.log main buffer=16k;\n\n    # Performance\n    sendfile on;\n    tcp_nopush on;\n    tcp_nodelay on;\n    keepalive_timeout 65;\n    types_hash_max_size 2048;\n    client_max_body_size 100M;\n\n    # Gzip compression\n    gzip on;\n    gzip_vary on;\n    gzip_proxied any;\n    gzip_comp_level 6;\n    gzip_types text/plain text/css text/xml text/javascript \n               application/json application/javascript application/xml+rss \n               application/rss+xml application/atom+xml image/svg+xml;\n\n    # SSL configuration\n    ssl_protocols TLSv1.2 TLSv1.3;\n    ssl_ciphers ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384;\n    ssl_prefer_server_ciphers off;\n    ssl_session_cache shared:SSL:10m;\n    ssl_session_timeout 10m;\n    ssl_session_tickets off;\n    ssl_stapling on;\n    ssl_stapling_verify on;\n\n    # Include server blocks\n    include /etc/nginx/conf.d/*.conf;\n    include /etc/nginx/sites-enabled/*;\n}</code></pre>\n      </div>\n    </div>\n<h3 id=\"virtual-host-example\" class=\"mobile-header\">Virtual Host Example</h3>\n<div class=\"mobile-code-block\" data-language=\"nginx\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">nginx</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-nginx\"># /etc/nginx/conf.d/example.com.conf\nserver {\n    listen 80;\n    listen [::]:80;\n    server_name example.com www.example.com;\n    \n    # Redirect to HTTPS\n    return 301 https://$server_name$request_uri;\n}\n\nserver {\n    listen 443 ssl http2;\n    listen [::]:443 ssl http2;\n    server_name example.com www.example.com;\n\n    # SSL configuration\n    ssl_certificate /etc/letsencrypt/live/example.com/fullchain.pem;\n    ssl_certificate_key /etc/letsencrypt/live/example.com/privkey.pem;\n    ssl_trusted_certificate /etc/letsencrypt/live/example.com/chain.pem;\n\n    # Security headers\n    add_header Strict-Transport-Security &quot;max-age=63072000&quot; always;\n    add_header X-Frame-Options &quot;DENY&quot; always;\n    add_header X-Content-Type-Options &quot;nosniff&quot; always;\n    add_header X-XSS-Protection &quot;1; mode=block&quot; always;\n    add_header Referrer-Policy &quot;no-referrer-when-downgrade&quot; always;\n    add_header Content-Security-Policy &quot;default-src &#039;self&#039; http: https: data: blob: &#039;unsafe-inline&#039;&quot; always;\n\n    # Logging\n    access_log /var/log/nginx/example.com.access.log;\n    error_log /var/log/nginx/example.com.error.log;\n\n    # Root directory\n    root /var/www/example.com/public;\n    index index.html index.htm index.php;\n\n    # Locations\n    location / {\n        try_files $uri $uri/ =404;\n    }\n\n    # PHP-FPM configuration\n    location ~ \\.php$ {\n        fastcgi_pass unix:/var/run/php/php8.1-fpm.sock;\n        fastcgi_index index.php;\n        fastcgi_param SCRIPT_FILENAME $realpath_root$fastcgi_script_name;\n        include fastcgi_params;\n    }\n\n    # Deny access to hidden files\n    location ~ /\\. {\n        deny all;\n    }\n}</code></pre>\n      </div>\n    </div>\n<h2 id=\"reverse-proxy-setup\" class=\"mobile-header\">Reverse Proxy Setup</h2>\n<h3 id=\"basic-reverse-proxy\" class=\"mobile-header\">Basic Reverse Proxy</h3>\n<div class=\"mobile-code-block\" data-language=\"nginx\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">nginx</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-nginx\"># /etc/nginx/conf.d/app.example.com.conf\nupstream backend {\n    server 127.0.0.1:3000;\n    server 127.0.0.1:3001 backup;\n    keepalive 32;\n}\n\nserver {\n    listen 80;\n    server_name app.example.com;\n    return 301 https://$server_name$request_uri;\n}\n\nserver {\n    listen 443 ssl http2;\n    server_name app.example.com;\n\n    ssl_certificate /etc/letsencrypt/live/app.example.com/fullchain.pem;\n    ssl_certificate_key /etc/letsencrypt/live/app.example.com/privkey.pem;\n\n    location / {\n        proxy_pass http://backend;\n        proxy_http_version 1.1;\n        \n        # Headers\n        proxy_set_header Host $host;\n        proxy_set_header X-Real-IP $remote_addr;\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n        proxy_set_header X-Forwarded-Proto $scheme;\n        \n        # Timeouts\n        proxy_connect_timeout 60s;\n        proxy_send_timeout 60s;\n        proxy_read_timeout 60s;\n        \n        # Websocket support\n        proxy_set_header Upgrade $http_upgrade;\n        proxy_set_header Connection &quot;upgrade&quot;;\n    }\n}</code></pre>\n      </div>\n    </div>\n<h3 id=\"load-balancing-methods\" class=\"mobile-header\">Load Balancing Methods</h3>\n<div class=\"mobile-code-block\" data-language=\"nginx\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">nginx</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-nginx\"># Round-robin (default)\nupstream backend {\n    server backend1.example.com;\n    server backend2.example.com;\n    server backend3.example.com;\n}\n\n# Least connections\nupstream backend {\n    least_conn;\n    server backend1.example.com;\n    server backend2.example.com;\n    server backend3.example.com;\n}\n\n# IP hash (session persistence)\nupstream backend {\n    ip_hash;\n    server backend1.example.com;\n    server backend2.example.com;\n    server backend3.example.com;\n}\n\n# Weighted distribution\nupstream backend {\n    server backend1.example.com weight=3;\n    server backend2.example.com weight=2;\n    server backend3.example.com weight=1;\n}</code></pre>\n      </div>\n    </div>\n<h2 id=\"security-configuration\" class=\"mobile-header\">Security Configuration</h2>\n<h3 id=\"basic-security-hardening\" class=\"mobile-header\">Basic Security Hardening</h3>\n<div class=\"mobile-code-block\" data-language=\"nginx\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">nginx</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-nginx\"># Global security settings in nginx.conf\nhttp {\n    # Hide nginx version\n    server_tokens off;\n    \n    # Limit request methods\n    if ($request_method !~ ^(GET|HEAD|POST|PUT|DELETE|OPTIONS)$) {\n        return 405;\n    }\n    \n    # Limit buffer sizes\n    client_body_buffer_size 1K;\n    client_header_buffer_size 1k;\n    client_max_body_size 1M;\n    large_client_header_buffers 2 1k;\n    \n    # Timeouts\n    client_body_timeout 10;\n    client_header_timeout 10;\n    keepalive_timeout 5 5;\n    send_timeout 10;\n    \n    # Rate limiting zones\n    limit_req_zone $binary_remote_addr zone=general:10m rate=10r/s;\n    limit_req_zone $binary_remote_addr zone=login:10m rate=3r/m;\n    limit_conn_zone $binary_remote_addr zone=addr:10m;\n}</code></pre>\n      </div>\n    </div>\n<h3 id=\"ssltls-best-practices\" class=\"mobile-header\">SSL/TLS Best Practices</h3>\n<div class=\"mobile-code-block\" data-language=\"nginx\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">nginx</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-nginx\"># Modern SSL configuration\nssl_protocols TLSv1.2 TLSv1.3;\nssl_ciphers ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-CHACHA20-POLY1305:ECDHE-RSA-CHACHA20-POLY1305:DHE-RSA-AES128-GCM-SHA256:DHE-RSA-AES256-GCM-SHA384;\nssl_prefer_server_ciphers off;\n\n# Enable HSTS\nadd_header Strict-Transport-Security &quot;max-age=63072000; includeSubDomains; preload&quot; always;\n\n# SSL session caching\nssl_session_cache shared:SSL:50m;\nssl_session_timeout 1d;\nssl_session_tickets off;\n\n# OCSP stapling\nssl_stapling on;\nssl_stapling_verify on;\nresolver 8.8.8.8 8.8.4.4 valid=300s;\nresolver_timeout 5s;\n\n# Diffie-Hellman parameters\nssl_dhparam /etc/nginx/dhparam.pem;</code></pre>\n      </div>\n    </div>\n<h3 id=\"firewall-rules\" class=\"mobile-header\">Firewall Rules</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># UFW (Ubuntu/Debian)\nsudo ufw allow &#039;Nginx Full&#039;\nsudo ufw allow 80/tcp\nsudo ufw allow 443/tcp\n\n# firewalld (RHEL/CentOS/openSUSE)\nsudo firewall-cmd --permanent --add-service=http\nsudo firewall-cmd --permanent --add-service=https\nsudo firewall-cmd --reload\n\n# iptables\nsudo iptables -A INPUT -p tcp --dport 80 -j ACCEPT\nsudo iptables -A INPUT -p tcp --dport 443 -j ACCEPT\nsudo iptables-save &gt; /etc/iptables/rules.v4\n\n# pf (FreeBSD)\n# Add to /etc/pf.conf\npass in on $ext_if proto tcp from any to any port {80, 443}</code></pre>\n      </div>\n    </div>\n<h3 id=\"modsecurity-waf-integration\" class=\"mobile-header\">ModSecurity WAF Integration</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Install ModSecurity\n# Debian/Ubuntu\nsudo apt install -y libmodsecurity3 libmodsecurity-nginx\n\n# Build nginx with ModSecurity support\n./configure --add-dynamic-module=/path/to/ModSecurity-nginx\n\n# Load module in nginx.conf\nload_module modules/ngx_http_modsecurity_module.so;\n\n# Enable in server block\nmodsecurity on;\nmodsecurity_rules_file /etc/nginx/modsec/main.conf;</code></pre>\n      </div>\n    </div>\n<h2 id=\"database-setup\" class=\"mobile-header\">Database Setup</h2>\n<p class=\"mobile-paragraph\">Not applicable for NGINX as it doesn't require a database. However, NGINX can be configured to work with various database-backed applications through reverse proxy configurations.</p>\n<h2 id=\"performance-optimization\" class=\"mobile-header\">Performance Optimization</h2>\n<h3 id=\"system-tuning\" class=\"mobile-header\">System Tuning</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># /etc/sysctl.conf\n# Increase system limits\nnet.core.somaxconn = 65535\nnet.core.netdev_max_backlog = 65535\nnet.ipv4.tcp_max_syn_backlog = 65535\nnet.ipv4.tcp_fin_timeout = 30\nnet.ipv4.tcp_keepalive_time = 1200\nnet.ipv4.tcp_max_tw_buckets = 5000\nnet.ipv4.tcp_tw_reuse = 1\nnet.ipv4.tcp_slow_start_after_idle = 0\n\n# File descriptors\nfs.file-max = 65535\n\n# Apply changes\nsudo sysctl -p</code></pre>\n      </div>\n    </div>\n<h3 id=\"nginx-optimization\" class=\"mobile-header\">NGINX Optimization</h3>\n<div class=\"mobile-code-block\" data-language=\"nginx\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">nginx</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-nginx\"># Worker configuration\nworker_processes auto;\nworker_cpu_affinity auto;\nworker_rlimit_nofile 65535;\n\nevents {\n    worker_connections 65535;\n    use epoll;\n    multi_accept on;\n}\n\nhttp {\n    # Caching\n    open_file_cache max=200000 inactive=20s;\n    open_file_cache_valid 30s;\n    open_file_cache_min_uses 2;\n    open_file_cache_errors on;\n\n    # Buffer sizes\n    client_body_buffer_size 128k;\n    client_max_body_size 10m;\n    client_header_buffer_size 1k;\n    large_client_header_buffers 4 16k;\n    output_buffers 1 32k;\n    postpone_output 1460;\n\n    # Compression\n    gzip on;\n    gzip_vary on;\n    gzip_proxied any;\n    gzip_comp_level 6;\n    gzip_min_length 1000;\n    gzip_disable &quot;msie6&quot;;\n    gzip_types\n        text/plain\n        text/css\n        text/xml\n        text/javascript\n        application/json\n        application/javascript\n        application/xml+rss\n        application/rss+xml\n        application/atom+xml\n        image/svg+xml;\n}</code></pre>\n      </div>\n    </div>\n<h3 id=\"content-caching\" class=\"mobile-header\">Content Caching</h3>\n<div class=\"mobile-code-block\" data-language=\"nginx\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">nginx</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-nginx\"># Define cache\nproxy_cache_path /var/cache/nginx levels=1:2 keys_zone=static_cache:10m max_size=1g inactive=60m use_temp_path=off;\n\nserver {\n    location ~* \\.(jpg|jpeg|png|gif|ico|css|js)$ {\n        expires 1y;\n        add_header Cache-Control &quot;public, immutable&quot;;\n        proxy_cache static_cache;\n        proxy_cache_valid 200 60m;\n        proxy_cache_use_stale error timeout invalid_header updating http_500 http_502 http_503 http_504;\n    }\n}</code></pre>\n      </div>\n    </div>\n<h2 id=\"monitoring\" class=\"mobile-header\">Monitoring</h2>\n<h3 id=\"built-in-status-module\" class=\"mobile-header\">Built-in Status Module</h3>\n<div class=\"mobile-code-block\" data-language=\"nginx\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">nginx</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-nginx\"># Enable stub_status\nserver {\n    listen 127.0.0.1:8080;\n    server_name localhost;\n    \n    location /nginx_status {\n        stub_status;\n        allow 127.0.0.1;\n        deny all;\n    }\n}</code></pre>\n      </div>\n    </div>\n<h3 id=\"access-with-curl\" class=\"mobile-header\">Access with curl</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Get basic metrics\ncurl http://127.0.0.1:8080/nginx_status\n\n# Sample output:\n# Active connections: 291\n# server accepts handled requests\n#  16630948 16630948 31070465\n# Reading: 6 Writing: 179 Waiting: 106</code></pre>\n      </div>\n    </div>\n<h3 id=\"log-analysis\" class=\"mobile-header\">Log Analysis</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Top 10 IP addresses\nawk &#039;{print $1}&#039; /var/log/nginx/access.log | sort | uniq -c | sort -rn | head -10\n\n# Response codes distribution\nawk &#039;{print $9}&#039; /var/log/nginx/access.log | sort | uniq -c | sort -rn\n\n# Requests per second\ntail -10000 /var/log/nginx/access.log | awk &#039;{print $4}&#039; | uniq -c\n\n# Slow requests (&gt;1s)\nawk &#039;$11 &gt; 1&#039; /var/log/nginx/access.log</code></pre>\n      </div>\n    </div>\n<h3 id=\"prometheus-exporter\" class=\"mobile-header\">Prometheus Exporter</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Install nginx-prometheus-exporter\nwget https://github.com/nginxinc/nginx-prometheus-exporter/releases/download/v0.11.0/nginx-prometheus-exporter_0.11.0_linux_amd64.tar.gz\ntar xzf nginx-prometheus-exporter_0.11.0_linux_amd64.tar.gz\nsudo mv nginx-prometheus-exporter /usr/local/bin/\n\n# Run exporter\nnginx-prometheus-exporter -nginx.scrape-uri=http://127.0.0.1:8080/nginx_status\n\n# Add to Prometheus config\nscrape_configs:\n  - job_name: &#039;nginx&#039;\n    static_configs:\n      - targets: [&#039;localhost:9113&#039;]</code></pre>\n      </div>\n    </div>\n<h2 id=\"backup-and-restore\" class=\"mobile-header\">Backup and Restore</h2>\n<h3 id=\"what-to-backup\" class=\"mobile-header\">What to Backup</h3>\n<p class=\"mobile-paragraph\">1. <strong>Configuration files</strong>:</p>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\">/etc/nginx/nginx.conf\n/etc/nginx/conf.d/\n/etc/nginx/sites-available/\n/etc/nginx/sites-enabled/\n/etc/nginx/snippets/</code></pre>\n      </div>\n    </div>\n<p class=\"mobile-paragraph\">2. <strong>SSL certificates</strong>:</p>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\">/etc/letsencrypt/\n/etc/ssl/certs/\n/etc/ssl/private/</code></pre>\n      </div>\n    </div>\n<p class=\"mobile-paragraph\">3. <strong>Log files</strong> (if needed):</p>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\">/var/log/nginx/</code></pre>\n      </div>\n    </div>\n<h3 id=\"backup-script\" class=\"mobile-header\">Backup Script</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\">#!/bin/bash\n# backup-nginx.sh\n\nBACKUP_DIR=&quot;/backup/nginx/$(date +%Y%m%d_%H%M%S)&quot;\nmkdir -p &quot;$BACKUP_DIR&quot;\n\n# Backup nginx configuration\ntar czf &quot;$BACKUP_DIR/nginx-config.tar.gz&quot; \\\n    /etc/nginx/ \\\n    --exclude=&#039;*.log&#039; \\\n    --exclude=&#039;*.pid&#039;\n\n# Backup SSL certificates\nif [ -d /etc/letsencrypt ]; then\n    tar czf &quot;$BACKUP_DIR/letsencrypt.tar.gz&quot; /etc/letsencrypt/\nfi\n\n# Save package version\nnginx -v 2&gt;&amp;1 | tee &quot;$BACKUP_DIR/nginx-version.txt&quot;\n\n# Test configuration backup\ntar -tzf &quot;$BACKUP_DIR/nginx-config.tar.gz&quot; &gt; &quot;$BACKUP_DIR/backup-contents.txt&quot;\n\necho &quot;Backup completed: $BACKUP_DIR&quot;</code></pre>\n      </div>\n    </div>\n<h3 id=\"restore-script\" class=\"mobile-header\">Restore Script</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\">#!/bin/bash\n# restore-nginx.sh\n\nBACKUP_DIR=&quot;$1&quot;\nif [ -z &quot;$BACKUP_DIR&quot; ]; then\n    echo &quot;Usage: $0 &lt;backup-directory&gt;&quot;\n    exit 1\nfi\n\n# Stop nginx\nsudo systemctl stop nginx\n\n# Restore configuration\nsudo tar xzf &quot;$BACKUP_DIR/nginx-config.tar.gz&quot; -C /\n\n# Restore SSL certificates\nif [ -f &quot;$BACKUP_DIR/letsencrypt.tar.gz&quot; ]; then\n    sudo tar xzf &quot;$BACKUP_DIR/letsencrypt.tar.gz&quot; -C /\nfi\n\n# Test configuration\nsudo nginx -t\n\nif [ $? -eq 0 ]; then\n    # Start nginx if config is valid\n    sudo systemctl start nginx\n    echo &quot;Restore completed successfully&quot;\nelse\n    echo &quot;Configuration test failed! Please check the configuration&quot;\n    exit 1\nfi</code></pre>\n      </div>\n    </div>\n<h2 id=\"troubleshooting\" class=\"mobile-header\">Troubleshooting</h2>\n<h3 id=\"common-issues\" class=\"mobile-header\">Common Issues</h3>\n<p class=\"mobile-paragraph\">1. <strong>Port 80/443 already in use</strong>:</p>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Find process using port\nsudo ss -tlnp | grep :80\nsudo lsof -i :80\n\n# Stop conflicting service (e.g., Apache)\nsudo systemctl stop apache2\nsudo systemctl disable apache2</code></pre>\n      </div>\n    </div>\n<p class=\"mobile-paragraph\">2. <strong>Permission denied errors</strong>:</p>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Check nginx user\nps aux | grep nginx\n\n# Fix ownership\nsudo chown -R nginx:nginx /var/cache/nginx\nsudo chown -R nginx:nginx /var/log/nginx\n\n# SELinux issues (RHEL/CentOS)\nsudo semanage port -l | grep http_port_t\nsudo setsebool -P httpd_can_network_connect 1</code></pre>\n      </div>\n    </div>\n<p class=\"mobile-paragraph\">3. <strong>502 Bad Gateway</strong>:</p>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Check upstream service\ncurl -I http://localhost:3000\n\n# Check nginx error log\nsudo tail -f /var/log/nginx/error.log\n\n# Verify socket permissions (PHP-FPM example)\nls -la /var/run/php/php8.1-fpm.sock</code></pre>\n      </div>\n    </div>\n<p class=\"mobile-paragraph\">4. <strong>SSL certificate issues</strong>:</p>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Test SSL configuration\nopenssl s_client -connect example.com:443\n\n# Verify certificate\nsudo nginx -t\n\n# Check certificate expiry\necho | openssl s_client -servername example.com -connect example.com:443 2&gt;/dev/null | openssl x509 -noout -dates</code></pre>\n      </div>\n    </div>\n<h3 id=\"debug-mode\" class=\"mobile-header\">Debug Mode</h3>\n<div class=\"mobile-code-block\" data-language=\"nginx\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">nginx</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-nginx\"># Enable debug logging\nerror_log /var/log/nginx/error.log debug;\n\n# Debug specific module\nerror_log /var/log/nginx/error.log debug_http;\n\n# Debug rewrite rules\nrewrite_log on;\nerror_log /var/log/nginx/rewrite.log notice;</code></pre>\n      </div>\n    </div>\n<h2 id=\"maintenance\" class=\"mobile-header\">Maintenance</h2>\n<h3 id=\"update-procedures\" class=\"mobile-header\">Update Procedures</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># RHEL/CentOS/Rocky/AlmaLinux\nsudo dnf check-update nginx\nsudo dnf update nginx\n\n# Debian/Ubuntu\nsudo apt update\nsudo apt upgrade nginx\n\n# Arch Linux\nsudo pacman -Syu nginx\n\n# Alpine Linux\napk update\napk upgrade nginx\n\n# openSUSE\nsudo zypper update nginx\n\n# FreeBSD\npkg update\npkg upgrade nginx\n\n# Always test configuration after update\nsudo nginx -t\nsudo systemctl reload nginx</code></pre>\n      </div>\n    </div>\n<h3 id=\"log-rotation\" class=\"mobile-header\">Log Rotation</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Default logrotate configuration\n# /etc/logrotate.d/nginx\n/var/log/nginx/*.log {\n    daily\n    missingok\n    rotate 14\n    compress\n    delaycompress\n    notifempty\n    create 0640 nginx adm\n    sharedscripts\n    prerotate\n        if [ -d /etc/logrotate.d/httpd-prerotate ]; then \\\n            run-parts /etc/logrotate.d/httpd-prerotate; \\\n        fi\n    endscript\n    postrotate\n        invoke-rc.d nginx rotate &gt;/dev/null 2&gt;&amp;1\n    endscript\n}</code></pre>\n      </div>\n    </div>\n<h3 id=\"performance-monitoring\" class=\"mobile-header\">Performance Monitoring</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Monitor nginx processes\nhtop -p $(pgrep -d, nginx)\n\n# Check memory usage\nps aux | grep nginx | awk &#039;{sum+=$6} END {print &quot;Total RSS: &quot; sum/1024 &quot; MB&quot;}&#039;\n\n# Monitor connections\nwatch -n 1 &#039;ss -tan | grep :80 | wc -l&#039;\n\n# Check open files\nsudo lsof -u nginx | wc -l</code></pre>\n      </div>\n    </div>\n<h2 id=\"integration-examples\" class=\"mobile-header\">Integration Examples</h2>\n<h3 id=\"php-fpm-integration\" class=\"mobile-header\">PHP-FPM Integration</h3>\n<div class=\"mobile-code-block\" data-language=\"nginx\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">nginx</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-nginx\"># PHP-FPM upstream\nupstream php-fpm {\n    server unix:/var/run/php/php8.1-fpm.sock;\n}\n\nserver {\n    location ~ \\.php$ {\n        try_files $uri =404;\n        fastcgi_split_path_info ^(.+\\.php)(/.+)$;\n        fastcgi_pass php-fpm;\n        fastcgi_index index.php;\n        fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;\n        include fastcgi_params;\n        \n        # Performance\n        fastcgi_buffer_size 16k;\n        fastcgi_buffers 4 16k;\n    }\n}</code></pre>\n      </div>\n    </div>\n<h3 id=\"nodejs-application\" class=\"mobile-header\">Node.js Application</h3>\n<div class=\"mobile-code-block\" data-language=\"nginx\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">nginx</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-nginx\">upstream nodejs_app {\n    server 127.0.0.1:3000;\n    keepalive 64;\n}\n\nserver {\n    location / {\n        proxy_pass http://nodejs_app;\n        proxy_http_version 1.1;\n        proxy_set_header Upgrade $http_upgrade;\n        proxy_set_header Connection &#039;upgrade&#039;;\n        proxy_set_header Host $host;\n        proxy_cache_bypass $http_upgrade;\n        proxy_set_header X-Real-IP $remote_addr;\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n        proxy_set_header X-Forwarded-Proto $scheme;\n    }\n}</code></pre>\n      </div>\n    </div>\n<h3 id=\"pythongunicorn-integration\" class=\"mobile-header\">Python/Gunicorn Integration</h3>\n<div class=\"mobile-code-block\" data-language=\"nginx\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">nginx</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-nginx\">upstream gunicorn_app {\n    server unix:/run/gunicorn.sock fail_timeout=0;\n}\n\nserver {\n    location / {\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n        proxy_set_header X-Forwarded-Proto $scheme;\n        proxy_set_header Host $http_host;\n        proxy_redirect off;\n        proxy_pass http://gunicorn_app;\n    }\n    \n    location /static/ {\n        alias /var/www/app/static/;\n        expires 30d;\n        add_header Cache-Control &quot;public, immutable&quot;;\n    }\n}</code></pre>\n      </div>\n    </div>\n<h3 id=\"ruby-on-rails\" class=\"mobile-header\">Ruby on Rails</h3>\n<div class=\"mobile-code-block\" data-language=\"nginx\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">nginx</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-nginx\">upstream rails_app {\n    server unix:/var/www/app/shared/sockets/puma.sock fail_timeout=0;\n}\n\nserver {\n    root /var/www/app/current/public;\n    \n    location / {\n        try_files $uri @rails_app;\n    }\n    \n    location @rails_app {\n        proxy_pass http://rails_app;\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n        proxy_set_header X-Forwarded-Proto $scheme;\n        proxy_set_header Host $http_host;\n        proxy_redirect off;\n    }\n    \n    location ~ ^/(assets|packs)/ {\n        gzip_static on;\n        expires max;\n        add_header Cache-Control public;\n    }\n}</code></pre>\n      </div>\n    </div>\n<h3 id=\"websocket-support\" class=\"mobile-header\">WebSocket Support</h3>\n<div class=\"mobile-code-block\" data-language=\"nginx\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">nginx</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-nginx\">map $http_upgrade $connection_upgrade {\n    default upgrade;\n    &#039;&#039; close;\n}\n\nupstream websocket {\n    server 127.0.0.1:8080;\n}\n\nserver {\n    location /ws {\n        proxy_pass http://websocket;\n        proxy_http_version 1.1;\n        proxy_set_header Upgrade $http_upgrade;\n        proxy_set_header Connection $connection_upgrade;\n        proxy_set_header Host $host;\n        proxy_set_header X-Real-IP $remote_addr;\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n        proxy_set_header X-Forwarded-Proto $scheme;\n        \n        # Timeouts\n        proxy_connect_timeout 7d;\n        proxy_send_timeout 7d;\n        proxy_read_timeout 7d;\n    }\n}</code></pre>\n      </div>\n    </div>\n<h2 id=\"additional-resources\" class=\"mobile-header\">Additional Resources</h2>\n<li class=\"mobile-list-item\"><a href=\"https://nginx.org/en/docs/\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">Official Documentation</a></li>\n<li class=\"mobile-list-item\"><a href=\"https://github.com/nginx/nginx\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">GitHub Repository</a></li>\n<li class=\"mobile-list-item\"><a href=\"https://www.nginx.com/resources/wiki/\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">NGINX Wiki</a></li>\n<li class=\"mobile-list-item\"><a href=\"https://www.digitalocean.com/community/tools/nginx\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">NGINX Config Generator</a></li>\n<li class=\"mobile-list-item\"><a href=\"https://forum.nginx.org/\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">Community Forum</a></li>\n<li class=\"mobile-list-item\"><a href=\"https://nginx.org/en/security_advisories.html\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">Security Advisories</a></li>\n<li class=\"mobile-list-item\"><a href=\"https://www.nginx.com/resources/wiki/modules/\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">Module Registry</a></li>\n<p class=\"mobile-paragraph\">---</p>\n<p class=\"mobile-paragraph\"><strong>Note:</strong> This guide is part of the <a href=\"https://howtomgr.github.io\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">HowToMgr</a> collection. Always refer to official documentation for the most up-to-date information.</p>","readTime":"15 min","wordCount":2897,"lastBuilt":"2025-09-14T18:12:03.408Z"},{"name":"nodejs","displayName":"Node.js","slug":"nodejs","description":"Repo for nodejs","category":"infrastructure","language":null,"stars":0,"forks":0,"topics":[],"githubUrl":"https://github.com/howtomgr/nodejs","updatedAt":"2025-09-14T01:30:41Z","createdAt":"2023-08-28T03:49:17Z","readmeRaw":"# Node.js Installation Guide\n\nJavaScript runtime built on Chrome's V8 JavaScript engine. Essential platform for modern web applications, APIs, and microservices with enterprise-grade performance and security features.\n\n## Prerequisites\n\n- Linux system (any modern distribution)\n- Root or sudo access\n- 2GB RAM minimum, 4GB+ recommended for production\n- curl or wget for package downloads\n- Git for source code management\n\n## Installation\n\n### Using NVM (Recommended for Development)\n```bash\n# Download and install NVM (Node Version Manager)\ncurl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.5/install.sh | bash\n\n# Reload shell profile\nsource ~/.bashrc\n\n# Install latest LTS version (recommended for production)\nnvm install --lts\nnvm use --lts\n\n# Install specific version\nnvm install 20.10.0  # Latest LTS as of 2024\nnvm use 20.10.0\n\n# Set default version\nnvm alias default 20.10.0\n\n# Verify installation\nnode --version\nnpm --version\n\n# List available versions\nnvm list-remote --lts\nnvm list\n```\n\n### Ubuntu/Debian (Package Manager)\n```bash\n# Update system packages\nsudo apt update && sudo apt upgrade -y\n\n# Method 1: Install from Ubuntu repositories (older version)\nsudo apt install -y nodejs npm\n\n# Method 2: Install from NodeSource repository (latest LTS)\ncurl -fsSL https://deb.nodesource.com/setup_lts.x | sudo -E bash -\nsudo apt install -y nodejs\n\n# Install build tools for native modules\nsudo apt install -y build-essential python3-dev\n\n# Verify installation\nnode --version\nnpm --version\n\n# Update npm to latest version\nsudo npm install -g npm@latest\n```\n\n### RHEL/CentOS/Rocky Linux/AlmaLinux\n```bash\n# Enable EPEL repository\nsudo yum install -y epel-release\n\n# Method 1: Install from EPEL (may be older)\nsudo yum install -y nodejs npm\n\n# Method 2: Install from NodeSource (recommended)\ncurl -fsSL https://rpm.nodesource.com/setup_lts.x | sudo bash -\nsudo yum install -y nodejs\n\n# Install development tools\nsudo yum groupinstall -y \"Development Tools\"\nsudo yum install -y python3-devel\n\n# Verify installation\nnode --version\nnpm --version\n```\n\n### Fedora\n```bash\n# Install Node.js from official repositories\nsudo dnf install -y nodejs npm\n\n# Or install from NodeSource for latest LTS\ncurl -fsSL https://rpm.nodesource.com/setup_lts.x | sudo bash -\nsudo dnf install -y nodejs\n\n# Install development tools\nsudo dnf groupinstall -y \"Development Tools\"\nsudo dnf install -y python3-devel\n\n# Verify installation\nnode --version\nnpm --version\n```\n\n### Arch Linux\n```bash\n# Install Node.js and npm\nsudo pacman -Syu nodejs npm\n\n# Install base-devel for building native modules\nsudo pacman -S base-devel python\n\n# Verify installation\nnode --version\nnpm --version\n```\n\n### Docker Installation\n```bash\n# Create Node.js application structure\nmkdir -p ~/nodejs-app/{src,config,logs,node_modules}\ncd ~/nodejs-app\n\n# Create production Dockerfile\ncat > Dockerfile <<EOF\n# Multi-stage build for production\nFROM node:20-alpine AS builder\n\n# Create app directory\nWORKDIR /usr/src/app\n\n# Copy package files\nCOPY package*.json ./\n\n# Install dependencies (including dev dependencies)\nRUN npm ci --only=production\n\n# Production stage\nFROM node:20-alpine AS production\n\n# Create non-root user\nRUN addgroup -g 1001 -S nodejs && \\\n    adduser -S nodejs -u 1001\n\n# Set working directory\nWORKDIR /usr/src/app\n\n# Copy node_modules from builder stage\nCOPY --from=builder /usr/src/app/node_modules ./node_modules\n\n# Copy application code\nCOPY --chown=nodejs:nodejs . .\n\n# Remove unnecessary files\nRUN rm -f .dockerignore Dockerfile* README.md\n\n# Security: Run as non-root user\nUSER nodejs\n\n# Expose port\nEXPOSE 3000\n\n# Health check\nHEALTHCHECK --interval=30s --timeout=3s --start-period=5s --retries=3 \\\n  CMD node healthcheck.js\n\n# Start application\nCMD [\"node\", \"server.js\"]\nEOF\n\n# Create .dockerignore\ncat > .dockerignore <<EOF\nnode_modules\nnpm-debug.log\nDockerfile*\n.git\n.gitignore\nREADME.md\n.env\n.nyc_output\ncoverage\n.npm\n.coverage\n.jest\n.cache\nEOF\n\n# Create production docker-compose.yml\ncat > docker-compose.prod.yml <<EOF\nversion: '3.8'\n\nservices:\n  app:\n    build:\n      context: .\n      target: production\n    restart: unless-stopped\n    ports:\n      - \"127.0.0.1:3000:3000\"\n    environment:\n      - NODE_ENV=production\n      - PORT=3000\n    volumes:\n      - ./logs:/usr/src/app/logs\n    networks:\n      - app-network\n    security_opt:\n      - no-new-privileges:true\n    read_only: true\n    tmpfs:\n      - /tmp\n    healthcheck:\n      test: [\"CMD\", \"node\", \"healthcheck.js\"]\n      interval: 30s\n      timeout: 10s\n      retries: 3\n      start_period: 30s\n\n  nginx:\n    image: nginx:alpine\n    restart: unless-stopped\n    ports:\n      - \"80:80\"\n      - \"443:443\"\n    volumes:\n      - ./nginx.conf:/etc/nginx/nginx.conf:ro\n      - ./ssl:/etc/nginx/ssl:ro\n    depends_on:\n      - app\n    networks:\n      - app-network\n\nnetworks:\n  app-network:\n    driver: bridge\nEOF\n\ndocker-compose -f docker-compose.prod.yml up -d\n```\n\n## Production Configuration\n\n### PM2 Process Manager (Production Standard)\n```bash\n# Install PM2 globally\nsudo npm install -g pm2\n\n# Create PM2 ecosystem configuration\ncat > ecosystem.config.js <<EOF\nmodule.exports = {\n  apps: [{\n    name: 'node-app',\n    script: './server.js',\n    instances: 'max',  // Use all CPU cores\n    exec_mode: 'cluster',\n    \n    // Performance settings\n    max_memory_restart: '1G',\n    node_args: '--max-old-space-size=1024',\n    \n    // Environment variables\n    env: {\n      NODE_ENV: 'development',\n      PORT: 3000\n    },\n    env_production: {\n      NODE_ENV: 'production',\n      PORT: 3000\n    },\n    \n    // Logging\n    log_file: './logs/app.log',\n    out_file: './logs/out.log',\n    error_file: './logs/error.log',\n    log_date_format: 'YYYY-MM-DD HH:mm:ss Z',\n    merge_logs: true,\n    \n    // Monitoring\n    monitoring: true,\n    pmx: true,\n    \n    // Auto-restart settings\n    autorestart: true,\n    watch: false,  // Disable in production\n    max_restarts: 10,\n    min_uptime: '10s',\n    \n    // Instance settings\n    instance_var: 'INSTANCE_ID',\n    \n    // Source map support\n    source_map_support: true,\n    \n    // Graceful shutdown\n    kill_timeout: 5000,\n    listen_timeout: 8000,\n    \n    // Health checking\n    health_check_grace_period: 3000\n  }],\n  \n  // Deployment configuration\n  deploy: {\n    production: {\n      user: 'nodejs',\n      host: ['app1.example.com', 'app2.example.com'],\n      ref: 'origin/main',\n      repo: 'git@github.com:username/repository.git',\n      path: '/var/www/production',\n      'post-deploy': 'npm install && pm2 reload ecosystem.config.js --env production',\n      'pre-setup': 'apt update -y; apt install git -y'\n    },\n    staging: {\n      user: 'nodejs',\n      host: 'staging.example.com',\n      ref: 'origin/develop',\n      repo: 'git@github.com:username/repository.git',\n      path: '/var/www/staging',\n      'post-deploy': 'npm install && pm2 reload ecosystem.config.js --env staging'\n    }\n  }\n};\nEOF\n\n# Start application with PM2\npm2 start ecosystem.config.js --env production\n\n# Save PM2 configuration\npm2 save\n\n# Generate startup script\npm2 startup\nsudo env PATH=$PATH:/usr/bin /usr/lib/node_modules/pm2/bin/pm2 startup systemd -u $USER --hp $HOME\n\n# Monitor application\npm2 status\npm2 logs\npm2 monit\n```\n\n### NGINX Reverse Proxy Configuration\n```bash\n# Create NGINX configuration for Node.js applications\nsudo tee /etc/nginx/sites-available/nodejs-app > /dev/null <<EOF\n# Node.js Application NGINX Configuration\n\nupstream nodejs_backend {\n    least_conn;\n    server 127.0.0.1:3000 max_fails=3 fail_timeout=30s;\n    # Add more servers for load balancing:\n    # server 127.0.0.1:3001 max_fails=3 fail_timeout=30s;\n    # server 127.0.0.1:3002 max_fails=3 fail_timeout=30s;\n    keepalive 64;\n}\n\n# HTTP to HTTPS redirect\nserver {\n    listen 80;\n    server_name app.example.com;\n    return 301 https://\\$server_name\\$request_uri;\n}\n\n# HTTPS server\nserver {\n    listen 443 ssl http2;\n    server_name app.example.com;\n\n    # SSL configuration\n    ssl_certificate /etc/letsencrypt/live/app.example.com/fullchain.pem;\n    ssl_certificate_key /etc/letsencrypt/live/app.example.com/privkey.pem;\n    ssl_protocols TLSv1.2 TLSv1.3;\n    ssl_ciphers ECDHE-RSA-AES256-GCM-SHA512:DHE-RSA-AES256-GCM-SHA512;\n    ssl_prefer_server_ciphers off;\n    ssl_session_cache shared:SSL:10m;\n    ssl_session_timeout 10m;\n\n    # Security headers\n    add_header Strict-Transport-Security \"max-age=31536000; includeSubDomains\" always;\n    add_header X-Content-Type-Options nosniff always;\n    add_header X-Frame-Options DENY always;\n    add_header X-XSS-Protection \"1; mode=block\" always;\n    add_header Referrer-Policy \"strict-origin-when-cross-origin\" always;\n\n    # Rate limiting\n    limit_req_zone \\$binary_remote_addr zone=api_limit:10m rate=10r/s;\n    limit_req zone=api_limit burst=20 nodelay;\n\n    # Gzip compression\n    gzip on;\n    gzip_vary on;\n    gzip_min_length 1024;\n    gzip_proxied any;\n    gzip_comp_level 6;\n    gzip_types\n        text/plain\n        text/css\n        text/xml\n        text/javascript\n        application/json\n        application/javascript\n        application/xml+rss\n        application/atom+xml\n        image/svg+xml;\n\n    location / {\n        proxy_pass http://nodejs_backend;\n        proxy_http_version 1.1;\n        proxy_set_header Upgrade \\$http_upgrade;\n        proxy_set_header Connection 'upgrade';\n        proxy_set_header Host \\$host;\n        proxy_set_header X-Real-IP \\$remote_addr;\n        proxy_set_header X-Forwarded-For \\$proxy_add_x_forwarded_for;\n        proxy_set_header X-Forwarded-Proto \\$scheme;\n        proxy_cache_bypass \\$http_upgrade;\n        \n        # Timeout settings\n        proxy_connect_timeout 60s;\n        proxy_send_timeout 60s;\n        proxy_read_timeout 60s;\n        \n        # Buffer settings\n        proxy_buffer_size 4k;\n        proxy_buffers 4 4k;\n    }\n\n    # Static assets caching\n    location ~* \\.(js|css|png|jpg|jpeg|gif|ico|svg|woff|woff2|ttf|eot)\\$ {\n        expires 1y;\n        add_header Cache-Control \"public, immutable\";\n        access_log off;\n    }\n\n    # API rate limiting (stricter)\n    location /api/ {\n        limit_req zone=api_limit burst=10 nodelay;\n        proxy_pass http://nodejs_backend;\n        proxy_set_header Host \\$host;\n        proxy_set_header X-Real-IP \\$remote_addr;\n        proxy_set_header X-Forwarded-For \\$proxy_add_x_forwarded_for;\n        proxy_set_header X-Forwarded-Proto \\$scheme;\n    }\n\n    # Health check endpoint\n    location /health {\n        access_log off;\n        proxy_pass http://nodejs_backend;\n        proxy_set_header Host \\$host;\n    }\n}\nEOF\n\nsudo ln -s /etc/nginx/sites-available/nodejs-app /etc/nginx/sites-enabled/\nsudo nginx -t && sudo systemctl reload nginx\n```\n\n### SystemD Service (Alternative to PM2)\n```bash\n# Create systemd service for Node.js application\nsudo tee /etc/systemd/system/nodejs-app.service > /dev/null <<EOF\n[Unit]\nDescription=Node.js Application\nDocumentation=https://nodejs.org/\nAfter=network.target\n\n[Service]\nType=simple\nUser=nodejs\nGroup=nodejs\nWorkingDirectory=/var/www/nodejs-app\nExecStart=/usr/bin/node server.js\nExecReload=/bin/kill -SIGUSR2 \\$MAINPID\nRestart=always\nRestartSec=10\nStandardOutput=syslog\nStandardError=syslog\nSyslogIdentifier=nodejs-app\n\n# Environment variables\nEnvironment=NODE_ENV=production\nEnvironment=PORT=3000\n\n# Security settings\nNoNewPrivileges=true\nPrivateTmp=true\nPrivateDevices=true\nProtectHome=true\nProtectSystem=strict\nReadWritePaths=/var/www/nodejs-app/logs /var/www/nodejs-app/uploads\nProtectKernelTunables=true\nProtectKernelModules=true\nProtectControlGroups=true\n\n# Resource limits\nMemoryMax=2G\nCPUQuota=200%\nTasksMax=4096\n\n[Install]\nWantedBy=multi-user.target\nEOF\n\n# Create nodejs user\nsudo useradd --system --shell /bin/false --home /var/www/nodejs-app nodejs\n\n# Set up application directory\nsudo mkdir -p /var/www/nodejs-app/{logs,uploads}\nsudo chown -R nodejs:nodejs /var/www/nodejs-app\n\nsudo systemctl daemon-reload\nsudo systemctl enable --now nodejs-app\n```\n\n## Security Hardening\n\n### Application Security Best Practices\n```bash\n# Create secure application template\nmkdir -p ~/secure-nodejs-app\ncd ~/secure-nodejs-app\n\n# Create package.json with security-focused dependencies\ncat > package.json <<EOF\n{\n  \"name\": \"secure-nodejs-app\",\n  \"version\": \"1.0.0\",\n  \"description\": \"Secure Node.js application template\",\n  \"main\": \"server.js\",\n  \"scripts\": {\n    \"start\": \"node server.js\",\n    \"dev\": \"nodemon server.js\",\n    \"test\": \"jest\",\n    \"security:audit\": \"npm audit\",\n    \"security:check\": \"nsp check\",\n    \"lint\": \"eslint .\",\n    \"format\": \"prettier --write .\"\n  },\n  \"dependencies\": {\n    \"express\": \"^4.18.2\",\n    \"helmet\": \"^7.1.0\",\n    \"cors\": \"^2.8.5\",\n    \"express-rate-limit\": \"^7.1.5\",\n    \"express-validator\": \"^7.0.1\",\n    \"bcryptjs\": \"^2.4.3\",\n    \"jsonwebtoken\": \"^9.0.2\",\n    \"mongoose\": \"^8.0.3\",\n    \"dotenv\": \"^16.3.1\",\n    \"compression\": \"^1.7.4\",\n    \"morgan\": \"^1.10.0\",\n    \"winston\": \"^3.11.0\",\n    \"hpp\": \"^0.2.3\",\n    \"express-mongo-sanitize\": \"^2.2.0\",\n    \"xss\": \"^1.0.14\"\n  },\n  \"devDependencies\": {\n    \"nodemon\": \"^3.0.2\",\n    \"jest\": \"^29.7.0\",\n    \"eslint\": \"^8.55.0\",\n    \"prettier\": \"^3.1.0\",\n    \"nsp\": \"^3.2.1\"\n  },\n  \"engines\": {\n    \"node\": \">=20.0.0\",\n    \"npm\": \">=9.0.0\"\n  }\n}\nEOF\n\n# Create secure server template\ncat > server.js <<'EOF'\n'use strict';\n\nconst express = require('express');\nconst helmet = require('helmet');\nconst cors = require('cors');\nconst rateLimit = require('express-rate-limit');\nconst { body, validationResult } = require('express-validator');\nconst mongoSanitize = require('express-mongo-sanitize');\nconst xss = require('xss');\nconst compression = require('compression');\nconst morgan = require('morgan');\nconst winston = require('winston');\nconst hpp = require('hpp');\nrequire('dotenv').config();\n\nconst app = express();\nconst PORT = process.env.PORT || 3000;\n\n// Security middleware\napp.use(helmet({\n  contentSecurityPolicy: {\n    directives: {\n      defaultSrc: [\"'self'\"],\n      styleSrc: [\"'self'\", \"'unsafe-inline'\"],\n      scriptSrc: [\"'self'\"],\n      imgSrc: [\"'self'\", \"data:\", \"https:\"]\n    }\n  },\n  hsts: {\n    maxAge: 31536000,\n    includeSubDomains: true,\n    preload: true\n  }\n}));\n\n// CORS configuration\napp.use(cors({\n  origin: process.env.ALLOWED_ORIGINS?.split(',') || ['https://example.com'],\n  methods: ['GET', 'POST', 'PUT', 'DELETE'],\n  allowedHeaders: ['Content-Type', 'Authorization'],\n  credentials: true\n}));\n\n// Rate limiting\nconst limiter = rateLimit({\n  windowMs: 15 * 60 * 1000, // 15 minutes\n  max: 100, // Limit each IP to 100 requests per windowMs\n  message: 'Too many requests from this IP, please try again later.',\n  standardHeaders: true,\n  legacyHeaders: false\n});\napp.use(limiter);\n\n// API rate limiting (stricter)\nconst apiLimiter = rateLimit({\n  windowMs: 15 * 60 * 1000,\n  max: 50,\n  message: 'Too many API requests from this IP'\n});\napp.use('/api/', apiLimiter);\n\n// Body parsing with size limits\napp.use(express.json({ limit: '10mb' }));\napp.use(express.urlencoded({ extended: true, limit: '10mb' }));\n\n// Security sanitization\napp.use(mongoSanitize());\napp.use(hpp()); // Prevent HTTP Parameter Pollution\n\n// Compression\napp.use(compression());\n\n// Logging\nconst logger = winston.createLogger({\n  level: 'info',\n  format: winston.format.combine(\n    winston.format.timestamp(),\n    winston.format.errors({ stack: true }),\n    winston.format.json()\n  ),\n  transports: [\n    new winston.transports.File({ filename: 'logs/error.log', level: 'error' }),\n    new winston.transports.File({ filename: 'logs/combined.log' })\n  ]\n});\n\nif (process.env.NODE_ENV !== 'production') {\n  logger.add(new winston.transports.Console({\n    format: winston.format.simple()\n  }));\n}\n\n// Request logging\napp.use(morgan('combined', {\n  stream: { write: message => logger.info(message.trim()) }\n}));\n\n// Input validation middleware\nconst validateInput = (req, res, next) => {\n  const errors = validationResult(req);\n  if (!errors.isEmpty()) {\n    return res.status(400).json({\n      success: false,\n      errors: errors.array()\n    });\n  }\n  next();\n};\n\n// Health check endpoint\napp.get('/health', (req, res) => {\n  res.status(200).json({\n    status: 'healthy',\n    timestamp: new Date().toISOString(),\n    uptime: process.uptime(),\n    memory: process.memoryUsage(),\n    version: process.version\n  });\n});\n\n// API routes with validation\napp.post('/api/users', [\n  body('email').isEmail().normalizeEmail(),\n  body('name').trim().escape().isLength({ min: 2, max: 50 }),\n  body('password').isLength({ min: 12 }).matches(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)(?=.*[@$!%*?&])/),\n  validateInput\n], (req, res) => {\n  try {\n    // Sanitize input\n    const sanitizedBody = {\n      email: xss(req.body.email),\n      name: xss(req.body.name),\n      password: req.body.password // Don't sanitize password, just validate\n    };\n    \n    // Process request\n    res.json({ success: true, message: 'User created successfully' });\n  } catch (error) {\n    logger.error('Error creating user:', error);\n    res.status(500).json({ success: false, message: 'Internal server error' });\n  }\n});\n\n// Error handling middleware\napp.use((error, req, res, next) => {\n  logger.error('Unhandled error:', error);\n  \n  res.status(error.status || 500).json({\n    success: false,\n    message: process.env.NODE_ENV === 'production' \n      ? 'Something went wrong!' \n      : error.message\n  });\n});\n\n// 404 handler\napp.use('*', (req, res) => {\n  res.status(404).json({\n    success: false,\n    message: 'Route not found'\n  });\n});\n\n// Graceful shutdown\nprocess.on('SIGTERM', () => {\n  logger.info('SIGTERM signal received: closing HTTP server');\n  server.close(() => {\n    logger.info('HTTP server closed');\n    process.exit(0);\n  });\n});\n\nprocess.on('SIGINT', () => {\n  logger.info('SIGINT signal received: closing HTTP server');\n  server.close(() => {\n    logger.info('HTTP server closed');\n    process.exit(0);\n  });\n});\n\n// Unhandled promise rejection handling\nprocess.on('unhandledRejection', (reason, promise) => {\n  logger.error('Unhandled Rejection at:', promise, 'reason:', reason);\n  process.exit(1);\n});\n\n// Uncaught exception handling\nprocess.on('uncaughtException', (error) => {\n  logger.error('Uncaught Exception thrown:', error);\n  process.exit(1);\n});\n\nconst server = app.listen(PORT, '127.0.0.1', () => {\n  logger.info(`Server running on port ${PORT} in ${process.env.NODE_ENV} mode`);\n});\n\nmodule.exports = app;\nEOF\n\n# Create healthcheck script for Docker\ncat > healthcheck.js <<EOF\nconst http = require('http');\n\nconst options = {\n  hostname: 'localhost',\n  port: process.env.PORT || 3000,\n  path: '/health',\n  method: 'GET',\n  timeout: 2000\n};\n\nconst req = http.request(options, (res) => {\n  if (res.statusCode === 200) {\n    process.exit(0);\n  } else {\n    process.exit(1);\n  }\n});\n\nreq.on('error', () => {\n  process.exit(1);\n});\n\nreq.end();\nEOF\n\n# Install dependencies\nnpm install\n```\n\n### Environment Configuration\n```bash\n# Create secure environment configuration\ncat > .env.example <<EOF\n# Node.js Application Environment Configuration\n\n# Application settings\nNODE_ENV=production\nPORT=3000\nHOST=127.0.0.1\n\n# Database connection\nDATABASE_URL=mongodb://username:password@localhost:27017/myapp?authSource=admin\n# Or PostgreSQL: postgresql://username:password@localhost:5432/myapp\n\n# Security keys (generate with: openssl rand -base64 32)\nJWT_SECRET=your_jwt_secret_here_32_characters_minimum\nSESSION_SECRET=your_session_secret_here_32_characters_minimum\nENCRYPTION_KEY=your_encryption_key_here_32_characters\n\n# CORS settings\nALLOWED_ORIGINS=https://example.com,https://app.example.com\n\n# Email configuration (for notifications)\nSMTP_HOST=smtp.example.com\nSMTP_PORT=587\nSMTP_USER=app@example.com\nSMTP_PASS=smtp_password\n\n# Rate limiting\nRATE_LIMIT_WINDOW_MS=900000\nRATE_LIMIT_MAX=100\n\n# File upload settings\nMAX_FILE_SIZE=10485760\nUPLOAD_PATH=/var/www/nodejs-app/uploads\n\n# Monitoring\nENABLE_MONITORING=true\nLOG_LEVEL=info\n\n# Security settings\nBCRYPT_ROUNDS=12\nJWT_EXPIRY=24h\nSESSION_TIMEOUT=3600000\n\n# External APIs\nEXTERNAL_API_KEY=your_api_key_here\nEXTERNAL_API_URL=https://api.external-service.com\n\n# Redis configuration (for sessions/caching)\nREDIS_URL=redis://localhost:6379\nREDIS_PASSWORD=redis_password\n\n# Health check settings\nHEALTH_CHECK_INTERVAL=30000\nEOF\n\n# Create production environment file\ncp .env.example .env\necho \".env\" >> .gitignore\n\n# Set secure permissions\nchmod 600 .env\n```\n\n## Performance Optimization\n\n### Node.js Performance Tuning\n```bash\n# Create performance optimization script\nsudo tee /usr/local/bin/nodejs-optimize.sh > /dev/null <<'EOF'\n#!/bin/bash\n\necho \"Optimizing Node.js application performance...\"\n\n# System-level optimizations\n# Increase file descriptor limits\nsudo tee -a /etc/security/limits.conf > /dev/null <<LIMITS\nnodejs soft nofile 65535\nnodejs hard nofile 65535\nnodejs soft nproc 65535\nnodejs hard nproc 65535\nLIMITS\n\n# Kernel optimizations for Node.js\nsudo tee -a /etc/sysctl.conf > /dev/null <<SYSCTL\n# Node.js optimizations\nnet.core.somaxconn = 65535\nnet.core.netdev_max_backlog = 5000\nnet.ipv4.tcp_max_syn_backlog = 65535\nnet.ipv4.tcp_fin_timeout = 10\nnet.ipv4.tcp_tw_reuse = 1\nnet.ipv4.ip_local_port_range = 15000 65000\nfs.file-max = 100000\nvm.swappiness = 1\nSYSCTL\n\nsudo sysctl -p\n\n# PM2 optimization for clustering\nif command -v pm2 >/dev/null 2>&1; then\n    # Update PM2 configuration for performance\n    pm2 delete all 2>/dev/null || true\n    \n    cat > /tmp/ecosystem-optimized.config.js <<PM2CONFIG\nmodule.exports = {\n  apps: [{\n    name: 'nodejs-app-optimized',\n    script: './server.js',\n    instances: 'max',\n    exec_mode: 'cluster',\n    \n    // V8 optimizations\n    node_args: [\n      '--max-old-space-size=2048',\n      '--optimize-for-size',\n      '--gc-interval=100',\n      '--expose-gc'\n    ],\n    \n    // Performance settings\n    max_memory_restart: '2G',\n    min_uptime: '10s',\n    max_restarts: 5,\n    \n    // Environment\n    env_production: {\n      NODE_ENV: 'production',\n      UV_THREADPOOL_SIZE: 16\n    }\n  }]\n};\nPM2CONFIG\n    \n    pm2 start /tmp/ecosystem-optimized.config.js --env production\n    pm2 save\nfi\n\necho \"Node.js optimization completed\"\nEOF\n\nsudo chmod +x /usr/local/bin/nodejs-optimize.sh\n```\n\n### Monitoring and Logging\n```bash\n# Create Node.js monitoring script\nsudo tee /usr/local/bin/nodejs-monitor.sh > /dev/null <<'EOF'\n#!/bin/bash\nMONITOR_LOG=\"/var/log/nodejs-monitor.log\"\n\nlog_message() {\n    echo \"$(date '+%Y-%m-%d %H:%M:%S') - $1\" | tee -a ${MONITOR_LOG}\n}\n\n# Check if PM2 is managing processes\nif command -v pm2 >/dev/null 2>&1; then\n    PM2_STATUS=$(pm2 jlist | jq -r '.[].pm2_env.status' 2>/dev/null)\n    if echo \"$PM2_STATUS\" | grep -q \"online\"; then\n        log_message \"âœ“ PM2 processes are running\"\n        \n        # Check memory usage\n        PM2_MEMORY=$(pm2 jlist | jq -r '.[].monit.memory' 2>/dev/null | awk '{sum += $1} END {print sum/1024/1024}')\n        log_message \"â„¹ PM2 total memory usage: ${PM2_MEMORY}MB\"\n        \n        # Check CPU usage\n        PM2_CPU=$(pm2 jlist | jq -r '.[].monit.cpu' 2>/dev/null | awk '{sum += $1} END {print sum}')\n        log_message \"â„¹ PM2 total CPU usage: ${PM2_CPU}%\"\n    else\n        log_message \"âš  PM2 processes not online\"\n    fi\nfi\n\n# Check systemd service (if not using PM2)\nif systemctl is-active nodejs-app >/dev/null 2>&1; then\n    log_message \"âœ“ Node.js systemd service is running\"\nelse\n    log_message \"â„¹ Node.js systemd service not active (may be using PM2)\"\nfi\n\n# Check application health endpoint\nif curl -f http://localhost:3000/health >/dev/null 2>&1; then\n    log_message \"âœ“ Application health endpoint responding\"\n    \n    # Get detailed health info\n    HEALTH_DATA=$(curl -s http://localhost:3000/health)\n    UPTIME=$(echo \"$HEALTH_DATA\" | jq -r '.uptime' 2>/dev/null)\n    MEMORY_USED=$(echo \"$HEALTH_DATA\" | jq -r '.memory.rss' 2>/dev/null)\n    \n    if [ -n \"$UPTIME\" ]; then\n        log_message \"â„¹ Application uptime: ${UPTIME}s\"\n    fi\n    if [ -n \"$MEMORY_USED\" ]; then\n        MEMORY_MB=$((MEMORY_USED / 1024 / 1024))\n        log_message \"â„¹ Application memory: ${MEMORY_MB}MB\"\n    fi\nelse\n    log_message \"âœ— Application health endpoint not responding\"\nfi\n\n# Check Node.js version\nNODE_VERSION=$(node --version 2>/dev/null)\nif [ -n \"$NODE_VERSION\" ]; then\n    log_message \"â„¹ Node.js version: ${NODE_VERSION}\"\nfi\n\n# Check npm security audit\nif [ -f \"package.json\" ]; then\n    AUDIT_RESULT=$(npm audit --audit-level high --json 2>/dev/null)\n    VULNERABILITIES=$(echo \"$AUDIT_RESULT\" | jq -r '.metadata.vulnerabilities.total' 2>/dev/null)\n    if [ -n \"$VULNERABILITIES\" ] && [ \"$VULNERABILITIES\" -gt 0 ]; then\n        log_message \"âš  ${VULNERABILITIES} security vulnerabilities found\"\n    else\n        log_message \"âœ“ No high/critical security vulnerabilities\"\n    fi\nfi\n\nlog_message \"Node.js monitoring completed\"\nEOF\n\nsudo chmod +x /usr/local/bin/nodejs-monitor.sh\n\n# Schedule monitoring every 5 minutes\necho \"*/5 * * * * root /usr/local/bin/nodejs-monitor.sh\" | sudo tee -a /etc/crontab\n```\n\n## Backup and Deployment\n\n### Application Backup Strategy\n```bash\nsudo tee /usr/local/bin/nodejs-backup.sh > /dev/null <<'EOF'\n#!/bin/bash\nBACKUP_DIR=\"/backup/nodejs\"\nDATE=$(date +%Y%m%d_%H%M%S)\n\nmkdir -p ${BACKUP_DIR}/{app,config,logs}\n\necho \"Starting Node.js application backup...\"\n\n# Backup application code and dependencies\ntar --exclude='node_modules' --exclude='logs/*' --exclude='.git' \\\n    -czf ${BACKUP_DIR}/app/nodejs-app-${DATE}.tar.gz \\\n    -C /var/www/nodejs-app .\n\n# Backup PM2 configuration and process list\nif command -v pm2 >/dev/null 2>&1; then\n    pm2 save\n    cp ~/.pm2/dump.pm2 ${BACKUP_DIR}/config/pm2-processes-${DATE}.json\n    cp ecosystem.config.js ${BACKUP_DIR}/config/ecosystem-${DATE}.js 2>/dev/null || true\nfi\n\n# Backup environment configuration\ncp /var/www/nodejs-app/.env ${BACKUP_DIR}/config/env-${DATE}.backup 2>/dev/null || true\n\n# Backup systemd service files\ncp /etc/systemd/system/nodejs-app.service ${BACKUP_DIR}/config/nodejs-app-${DATE}.service 2>/dev/null || true\n\n# Backup logs\ntar -czf ${BACKUP_DIR}/logs/nodejs-logs-${DATE}.tar.gz \\\n    /var/www/nodejs-app/logs/ 2>/dev/null || true\n\n# Backup NGINX configuration\ncp /etc/nginx/sites-available/nodejs-app ${BACKUP_DIR}/config/nginx-${DATE}.conf 2>/dev/null || true\n\n# Upload to cloud storage\naws s3 cp ${BACKUP_DIR}/ s3://nodejs-backups/ --recursive\ngsutil cp -r ${BACKUP_DIR}/* gs://nodejs-backups/\n\n# Keep only last 14 backups\nfind ${BACKUP_DIR} -name \"nodejs-*\" -type f -mtime +14 -delete\n\necho \"Node.js backup completed: ${DATE}\"\nEOF\n\nsudo chmod +x /usr/local/bin/nodejs-backup.sh\n\n# Schedule daily backups\necho \"0 2 * * * root /usr/local/bin/nodejs-backup.sh\" | sudo tee -a /etc/crontab\n```\n\n### Zero-Downtime Deployment\n```bash\n# Create deployment script\nsudo tee /usr/local/bin/nodejs-deploy.sh > /dev/null <<'EOF'\n#!/bin/bash\nVERSION=\"${1}\"\nREPO_URL=\"${2:-https://github.com/example/nodejs-app.git}\"\n\nif [ -z \"$VERSION\" ]; then\n    echo \"Usage: $0 <version> [repo_url]\"\n    echo \"Example: $0 v1.2.3\"\n    exit 1\nfi\n\nDEPLOY_DIR=\"/var/www/nodejs-app\"\nRELEASES_DIR=\"${DEPLOY_DIR}/releases\"\nSHARED_DIR=\"${DEPLOY_DIR}/shared\"\nCURRENT_LINK=\"${DEPLOY_DIR}/current\"\nRELEASE_DIR=\"${RELEASES_DIR}/${VERSION}\"\n\necho \"Deploying Node.js application version: ${VERSION}\"\n\n# Create directory structure\nmkdir -p ${RELEASES_DIR} ${SHARED_DIR}/{logs,uploads,config}\n\n# Clone and checkout specific version\ngit clone ${REPO_URL} ${RELEASE_DIR}\ncd ${RELEASE_DIR}\ngit checkout ${VERSION}\n\n# Copy shared configuration\ncp ${SHARED_DIR}/config/.env . 2>/dev/null || true\n\n# Install dependencies (production only)\nnpm ci --only=production\n\n# Run security audit\nnpm audit --audit-level high\n\n# Run tests\nnpm test\n\n# Create symbolic links for shared directories\nln -sfn ${SHARED_DIR}/logs logs\nln -sfn ${SHARED_DIR}/uploads uploads\n\n# Update current symlink (atomic operation)\nln -sfn ${RELEASE_DIR} ${CURRENT_LINK}\n\n# Reload PM2 or systemd service\nif command -v pm2 >/dev/null 2>&1 && pm2 list | grep -q \"nodejs-app\"; then\n    echo \"Reloading PM2 processes...\"\n    cd ${CURRENT_LINK}\n    pm2 reload ecosystem.config.js --env production\nelif systemctl is-active nodejs-app >/dev/null 2>&1; then\n    echo \"Restarting systemd service...\"\n    systemctl restart nodejs-app\nfi\n\n# Wait for application to be ready\necho \"Waiting for application to start...\"\nfor i in {1..30}; do\n    if curl -f http://localhost:3000/health >/dev/null 2>&1; then\n        echo \"âœ“ Application is healthy\"\n        break\n    fi\n    sleep 2\ndone\n\n# Keep only last 5 releases\ncd ${RELEASES_DIR}\nls -t | tail -n +6 | xargs rm -rf\n\n# Set proper ownership\nchown -R nodejs:nodejs ${DEPLOY_DIR}\n\necho \"Deployment completed successfully: ${VERSION}\"\necho \"Application is available at: http://localhost:3000\"\nEOF\n\nsudo chmod +x /usr/local/bin/nodejs-deploy.sh\n```\n\n## Troubleshooting\n\n### Common Issues and Solutions\n```bash\n# Check Node.js application status\n# PM2 processes\npm2 status\npm2 logs\npm2 monit\n\n# SystemD service\nsudo systemctl status nodejs-app\nsudo journalctl -u nodejs-app -f\n\n# Check application logs\ntail -f /var/www/nodejs-app/logs/combined.log\ntail -f /var/www/nodejs-app/logs/error.log\n\n# Test application health\ncurl -i http://localhost:3000/health\n\n# Check memory leaks\nnode --inspect server.js\n# Connect Chrome DevTools to memory tab\n\n# Performance profiling\nnode --prof server.js\n# Generate profile: node --prof-process isolate-*.log > profile.txt\n\n# Check for security vulnerabilities\nnpm audit\nnpm audit fix\n\n# Update dependencies\nnpm outdated\nnpm update\n\n# Check package vulnerabilities\nnpx retire\n\n# Memory usage analysis\nps aux --sort=-%mem | grep node\npmap -x $(pgrep node)\n\n# Network connectivity\nss -tulpn | grep 3000\nnetstat -tulpn | grep node\n\n# Process monitoring\nhtop -p $(pgrep node)\ntop -p $(pgrep node)\n\n# Debug mode (development only)\nnode --inspect-brk server.js\n\n# Cluster mode debugging\npm2 logs --lines 1000\npm2 flush  # Clear all logs\n\n# Database connection issues\n# Check MongoDB connection\nmongosh --eval \"db.adminCommand('ping')\"\n\n# Check PostgreSQL connection\npsql -h localhost -U username -d dbname -c \"SELECT version();\"\n\n# SSL/HTTPS issues\nopenssl s_client -connect app.example.com:443\ncurl -I https://app.example.com\n\n# Environment issues\nprintenv | grep NODE\necho $NODE_ENV\n\n# Restart applications\npm2 restart all\n# Or\nsudo systemctl restart nodejs-app\n\n# Clean npm cache\nnpm cache clean --force\n\n# Rebuild native modules\nnpm rebuild\n```\n\n## Additional Resources\n\n- [Node.js Official Documentation](https://nodejs.org/docs/)\n- [Node.js Security Best Practices](https://nodejs.org/en/security/)\n- [PM2 Documentation](https://pm2.keymetrics.io/docs/)\n- [Express.js Security Guide](https://expressjs.com/en/advanced/best-practice-security.html)\n- [Node.js Best Practices](https://github.com/goldbergyoni/nodebestpractices)\n\n---\n\n**Note:** This guide is part of the [HowToMgr](https://howtomgr.github.io) collection.","readmeHtml":"<h1 id=\"nodejs-installation-guide\" class=\"mobile-header\">Node.js Installation Guide</h1>\n<p class=\"mobile-paragraph\">JavaScript runtime built on Chrome's V8 JavaScript engine. Essential platform for modern web applications, APIs, and microservices with enterprise-grade performance and security features.</p>\n<h2 id=\"prerequisites\" class=\"mobile-header\">Prerequisites</h2>\n<li class=\"mobile-list-item\">Linux system (any modern distribution)</li>\n<li class=\"mobile-list-item\">Root or sudo access</li>\n<li class=\"mobile-list-item\">2GB RAM minimum, 4GB+ recommended for production</li>\n<li class=\"mobile-list-item\">curl or wget for package downloads</li>\n<li class=\"mobile-list-item\">Git for source code management</li>\n<h2 id=\"installation\" class=\"mobile-header\">Installation</h2>\n<h3 id=\"using-nvm-recommended-for-development\" class=\"mobile-header\">Using NVM (Recommended for Development)</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Download and install NVM (Node Version Manager)\ncurl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.5/install.sh | bash\n\n# Reload shell profile\nsource ~/.bashrc\n\n# Install latest LTS version (recommended for production)\nnvm install --lts\nnvm use --lts\n\n# Install specific version\nnvm install 20.10.0  # Latest LTS as of 2024\nnvm use 20.10.0\n\n# Set default version\nnvm alias default 20.10.0\n\n# Verify installation\nnode --version\nnpm --version\n\n# List available versions\nnvm list-remote --lts\nnvm list</code></pre>\n      </div>\n    </div>\n<h3 id=\"ubuntudebian-package-manager\" class=\"mobile-header\">Ubuntu/Debian (Package Manager)</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Update system packages\nsudo apt update &amp;&amp; sudo apt upgrade -y\n\n# Method 1: Install from Ubuntu repositories (older version)\nsudo apt install -y nodejs npm\n\n# Method 2: Install from NodeSource repository (latest LTS)\ncurl -fsSL https://deb.nodesource.com/setup_lts.x | sudo -E bash -\nsudo apt install -y nodejs\n\n# Install build tools for native modules\nsudo apt install -y build-essential python3-dev\n\n# Verify installation\nnode --version\nnpm --version\n\n# Update npm to latest version\nsudo npm install -g npm@latest</code></pre>\n      </div>\n    </div>\n<h3 id=\"rhelcentosrocky-linuxalmalinux\" class=\"mobile-header\">RHEL/CentOS/Rocky Linux/AlmaLinux</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Enable EPEL repository\nsudo yum install -y epel-release\n\n# Method 1: Install from EPEL (may be older)\nsudo yum install -y nodejs npm\n\n# Method 2: Install from NodeSource (recommended)\ncurl -fsSL https://rpm.nodesource.com/setup_lts.x | sudo bash -\nsudo yum install -y nodejs\n\n# Install development tools\nsudo yum groupinstall -y &quot;Development Tools&quot;\nsudo yum install -y python3-devel\n\n# Verify installation\nnode --version\nnpm --version</code></pre>\n      </div>\n    </div>\n<h3 id=\"fedora\" class=\"mobile-header\">Fedora</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Install Node.js from official repositories\nsudo dnf install -y nodejs npm\n\n# Or install from NodeSource for latest LTS\ncurl -fsSL https://rpm.nodesource.com/setup_lts.x | sudo bash -\nsudo dnf install -y nodejs\n\n# Install development tools\nsudo dnf groupinstall -y &quot;Development Tools&quot;\nsudo dnf install -y python3-devel\n\n# Verify installation\nnode --version\nnpm --version</code></pre>\n      </div>\n    </div>\n<h3 id=\"arch-linux\" class=\"mobile-header\">Arch Linux</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Install Node.js and npm\nsudo pacman -Syu nodejs npm\n\n# Install base-devel for building native modules\nsudo pacman -S base-devel python\n\n# Verify installation\nnode --version\nnpm --version</code></pre>\n      </div>\n    </div>\n<h3 id=\"docker-installation\" class=\"mobile-header\">Docker Installation</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Create Node.js application structure\nmkdir -p ~/nodejs-app/{src,config,logs,node_modules}\ncd ~/nodejs-app\n\n# Create production Dockerfile\ncat &gt; Dockerfile &lt;&lt;EOF\n# Multi-stage build for production\nFROM node:20-alpine AS builder\n\n# Create app directory\nWORKDIR /usr/src/app\n\n# Copy package files\nCOPY package*.json ./\n\n# Install dependencies (including dev dependencies)\nRUN npm ci --only=production\n\n# Production stage\nFROM node:20-alpine AS production\n\n# Create non-root user\nRUN addgroup -g 1001 -S nodejs &amp;&amp; \\\n    adduser -S nodejs -u 1001\n\n# Set working directory\nWORKDIR /usr/src/app\n\n# Copy node_modules from builder stage\nCOPY --from=builder /usr/src/app/node_modules ./node_modules\n\n# Copy application code\nCOPY --chown=nodejs:nodejs . .\n\n# Remove unnecessary files\nRUN rm -f .dockerignore Dockerfile* README.md\n\n# Security: Run as non-root user\nUSER nodejs\n\n# Expose port\nEXPOSE 3000\n\n# Health check\nHEALTHCHECK --interval=30s --timeout=3s --start-period=5s --retries=3 \\\n  CMD node healthcheck.js\n\n# Start application\nCMD [&quot;node&quot;, &quot;server.js&quot;]\nEOF\n\n# Create .dockerignore\ncat &gt; .dockerignore &lt;&lt;EOF\nnode_modules\nnpm-debug.log\nDockerfile*\n.git\n.gitignore\nREADME.md\n.env\n.nyc_output\ncoverage\n.npm\n.coverage\n.jest\n.cache\nEOF\n\n# Create production docker-compose.yml\ncat &gt; docker-compose.prod.yml &lt;&lt;EOF\nversion: &#039;3.8&#039;\n\nservices:\n  app:\n    build:\n      context: .\n      target: production\n    restart: unless-stopped\n    ports:\n      - &quot;127.0.0.1:3000:3000&quot;\n    environment:\n      - NODE_ENV=production\n      - PORT=3000\n    volumes:\n      - ./logs:/usr/src/app/logs\n    networks:\n      - app-network\n    security_opt:\n      - no-new-privileges:true\n    read_only: true\n    tmpfs:\n      - /tmp\n    healthcheck:\n      test: [&quot;CMD&quot;, &quot;node&quot;, &quot;healthcheck.js&quot;]\n      interval: 30s\n      timeout: 10s\n      retries: 3\n      start_period: 30s\n\n  nginx:\n    image: nginx:alpine\n    restart: unless-stopped\n    ports:\n      - &quot;80:80&quot;\n      - &quot;443:443&quot;\n    volumes:\n      - ./nginx.conf:/etc/nginx/nginx.conf:ro\n      - ./ssl:/etc/nginx/ssl:ro\n    depends_on:\n      - app\n    networks:\n      - app-network\n\nnetworks:\n  app-network:\n    driver: bridge\nEOF\n\ndocker-compose -f docker-compose.prod.yml up -d</code></pre>\n      </div>\n    </div>\n<h2 id=\"production-configuration\" class=\"mobile-header\">Production Configuration</h2>\n<h3 id=\"pm2-process-manager-production-standard\" class=\"mobile-header\">PM2 Process Manager (Production Standard)</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Install PM2 globally\nsudo npm install -g pm2\n\n# Create PM2 ecosystem configuration\ncat &gt; ecosystem.config.js &lt;&lt;EOF\nmodule.exports = {\n  apps: [{\n    name: &#039;node-app&#039;,\n    script: &#039;./server.js&#039;,\n    instances: &#039;max&#039;,  // Use all CPU cores\n    exec_mode: &#039;cluster&#039;,\n    \n    // Performance settings\n    max_memory_restart: &#039;1G&#039;,\n    node_args: &#039;--max-old-space-size=1024&#039;,\n    \n    // Environment variables\n    env: {\n      NODE_ENV: &#039;development&#039;,\n      PORT: 3000\n    },\n    env_production: {\n      NODE_ENV: &#039;production&#039;,\n      PORT: 3000\n    },\n    \n    // Logging\n    log_file: &#039;./logs/app.log&#039;,\n    out_file: &#039;./logs/out.log&#039;,\n    error_file: &#039;./logs/error.log&#039;,\n    log_date_format: &#039;YYYY-MM-DD HH:mm:ss Z&#039;,\n    merge_logs: true,\n    \n    // Monitoring\n    monitoring: true,\n    pmx: true,\n    \n    // Auto-restart settings\n    autorestart: true,\n    watch: false,  // Disable in production\n    max_restarts: 10,\n    min_uptime: &#039;10s&#039;,\n    \n    // Instance settings\n    instance_var: &#039;INSTANCE_ID&#039;,\n    \n    // Source map support\n    source_map_support: true,\n    \n    // Graceful shutdown\n    kill_timeout: 5000,\n    listen_timeout: 8000,\n    \n    // Health checking\n    health_check_grace_period: 3000\n  }],\n  \n  // Deployment configuration\n  deploy: {\n    production: {\n      user: &#039;nodejs&#039;,\n      host: [&#039;app1.example.com&#039;, &#039;app2.example.com&#039;],\n      ref: &#039;origin/main&#039;,\n      repo: &#039;git@github.com:username/repository.git&#039;,\n      path: &#039;/var/www/production&#039;,\n      &#039;post-deploy&#039;: &#039;npm install &amp;&amp; pm2 reload ecosystem.config.js --env production&#039;,\n      &#039;pre-setup&#039;: &#039;apt update -y; apt install git -y&#039;\n    },\n    staging: {\n      user: &#039;nodejs&#039;,\n      host: &#039;staging.example.com&#039;,\n      ref: &#039;origin/develop&#039;,\n      repo: &#039;git@github.com:username/repository.git&#039;,\n      path: &#039;/var/www/staging&#039;,\n      &#039;post-deploy&#039;: &#039;npm install &amp;&amp; pm2 reload ecosystem.config.js --env staging&#039;\n    }\n  }\n};\nEOF\n\n# Start application with PM2\npm2 start ecosystem.config.js --env production\n\n# Save PM2 configuration\npm2 save\n\n# Generate startup script\npm2 startup\nsudo env PATH=$PATH:/usr/bin /usr/lib/node_modules/pm2/bin/pm2 startup systemd -u $USER --hp $HOME\n\n# Monitor application\npm2 status\npm2 logs\npm2 monit</code></pre>\n      </div>\n    </div>\n<h3 id=\"nginx-reverse-proxy-configuration\" class=\"mobile-header\">NGINX Reverse Proxy Configuration</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Create NGINX configuration for Node.js applications\nsudo tee /etc/nginx/sites-available/nodejs-app &gt; /dev/null &lt;&lt;EOF\n# Node.js Application NGINX Configuration\n\nupstream nodejs_backend {\n    least_conn;\n    server 127.0.0.1:3000 max_fails=3 fail_timeout=30s;\n    # Add more servers for load balancing:\n    # server 127.0.0.1:3001 max_fails=3 fail_timeout=30s;\n    # server 127.0.0.1:3002 max_fails=3 fail_timeout=30s;\n    keepalive 64;\n}\n\n# HTTP to HTTPS redirect\nserver {\n    listen 80;\n    server_name app.example.com;\n    return 301 https://\\$server_name\\$request_uri;\n}\n\n# HTTPS server\nserver {\n    listen 443 ssl http2;\n    server_name app.example.com;\n\n    # SSL configuration\n    ssl_certificate /etc/letsencrypt/live/app.example.com/fullchain.pem;\n    ssl_certificate_key /etc/letsencrypt/live/app.example.com/privkey.pem;\n    ssl_protocols TLSv1.2 TLSv1.3;\n    ssl_ciphers ECDHE-RSA-AES256-GCM-SHA512:DHE-RSA-AES256-GCM-SHA512;\n    ssl_prefer_server_ciphers off;\n    ssl_session_cache shared:SSL:10m;\n    ssl_session_timeout 10m;\n\n    # Security headers\n    add_header Strict-Transport-Security &quot;max-age=31536000; includeSubDomains&quot; always;\n    add_header X-Content-Type-Options nosniff always;\n    add_header X-Frame-Options DENY always;\n    add_header X-XSS-Protection &quot;1; mode=block&quot; always;\n    add_header Referrer-Policy &quot;strict-origin-when-cross-origin&quot; always;\n\n    # Rate limiting\n    limit_req_zone \\$binary_remote_addr zone=api_limit:10m rate=10r/s;\n    limit_req zone=api_limit burst=20 nodelay;\n\n    # Gzip compression\n    gzip on;\n    gzip_vary on;\n    gzip_min_length 1024;\n    gzip_proxied any;\n    gzip_comp_level 6;\n    gzip_types\n        text/plain\n        text/css\n        text/xml\n        text/javascript\n        application/json\n        application/javascript\n        application/xml+rss\n        application/atom+xml\n        image/svg+xml;\n\n    location / {\n        proxy_pass http://nodejs_backend;\n        proxy_http_version 1.1;\n        proxy_set_header Upgrade \\$http_upgrade;\n        proxy_set_header Connection &#039;upgrade&#039;;\n        proxy_set_header Host \\$host;\n        proxy_set_header X-Real-IP \\$remote_addr;\n        proxy_set_header X-Forwarded-For \\$proxy_add_x_forwarded_for;\n        proxy_set_header X-Forwarded-Proto \\$scheme;\n        proxy_cache_bypass \\$http_upgrade;\n        \n        # Timeout settings\n        proxy_connect_timeout 60s;\n        proxy_send_timeout 60s;\n        proxy_read_timeout 60s;\n        \n        # Buffer settings\n        proxy_buffer_size 4k;\n        proxy_buffers 4 4k;\n    }\n\n    # Static assets caching\n    location ~* \\.(js|css|png|jpg|jpeg|gif|ico|svg|woff|woff2|ttf|eot)\\$ {\n        expires 1y;\n        add_header Cache-Control &quot;public, immutable&quot;;\n        access_log off;\n    }\n\n    # API rate limiting (stricter)\n    location /api/ {\n        limit_req zone=api_limit burst=10 nodelay;\n        proxy_pass http://nodejs_backend;\n        proxy_set_header Host \\$host;\n        proxy_set_header X-Real-IP \\$remote_addr;\n        proxy_set_header X-Forwarded-For \\$proxy_add_x_forwarded_for;\n        proxy_set_header X-Forwarded-Proto \\$scheme;\n    }\n\n    # Health check endpoint\n    location /health {\n        access_log off;\n        proxy_pass http://nodejs_backend;\n        proxy_set_header Host \\$host;\n    }\n}\nEOF\n\nsudo ln -s /etc/nginx/sites-available/nodejs-app /etc/nginx/sites-enabled/\nsudo nginx -t &amp;&amp; sudo systemctl reload nginx</code></pre>\n      </div>\n    </div>\n<h3 id=\"systemd-service-alternative-to-pm2\" class=\"mobile-header\">SystemD Service (Alternative to PM2)</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Create systemd service for Node.js application\nsudo tee /etc/systemd/system/nodejs-app.service &gt; /dev/null &lt;&lt;EOF\n[Unit]\nDescription=Node.js Application\nDocumentation=https://nodejs.org/\nAfter=network.target\n\n[Service]\nType=simple\nUser=nodejs\nGroup=nodejs\nWorkingDirectory=/var/www/nodejs-app\nExecStart=/usr/bin/node server.js\nExecReload=/bin/kill -SIGUSR2 \\$MAINPID\nRestart=always\nRestartSec=10\nStandardOutput=syslog\nStandardError=syslog\nSyslogIdentifier=nodejs-app\n\n# Environment variables\nEnvironment=NODE_ENV=production\nEnvironment=PORT=3000\n\n# Security settings\nNoNewPrivileges=true\nPrivateTmp=true\nPrivateDevices=true\nProtectHome=true\nProtectSystem=strict\nReadWritePaths=/var/www/nodejs-app/logs /var/www/nodejs-app/uploads\nProtectKernelTunables=true\nProtectKernelModules=true\nProtectControlGroups=true\n\n# Resource limits\nMemoryMax=2G\nCPUQuota=200%\nTasksMax=4096\n\n[Install]\nWantedBy=multi-user.target\nEOF\n\n# Create nodejs user\nsudo useradd --system --shell /bin/false --home /var/www/nodejs-app nodejs\n\n# Set up application directory\nsudo mkdir -p /var/www/nodejs-app/{logs,uploads}\nsudo chown -R nodejs:nodejs /var/www/nodejs-app\n\nsudo systemctl daemon-reload\nsudo systemctl enable --now nodejs-app</code></pre>\n      </div>\n    </div>\n<h2 id=\"security-hardening\" class=\"mobile-header\">Security Hardening</h2>\n<h3 id=\"application-security-best-practices\" class=\"mobile-header\">Application Security Best Practices</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Create secure application template\nmkdir -p ~/secure-nodejs-app\ncd ~/secure-nodejs-app\n\n# Create package.json with security-focused dependencies\ncat &gt; package.json &lt;&lt;EOF\n{\n  &quot;name&quot;: &quot;secure-nodejs-app&quot;,\n  &quot;version&quot;: &quot;1.0.0&quot;,\n  &quot;description&quot;: &quot;Secure Node.js application template&quot;,\n  &quot;main&quot;: &quot;server.js&quot;,\n  &quot;scripts&quot;: {\n    &quot;start&quot;: &quot;node server.js&quot;,\n    &quot;dev&quot;: &quot;nodemon server.js&quot;,\n    &quot;test&quot;: &quot;jest&quot;,\n    &quot;security:audit&quot;: &quot;npm audit&quot;,\n    &quot;security:check&quot;: &quot;nsp check&quot;,\n    &quot;lint&quot;: &quot;eslint .&quot;,\n    &quot;format&quot;: &quot;prettier --write .&quot;\n  },\n  &quot;dependencies&quot;: {\n    &quot;express&quot;: &quot;^4.18.2&quot;,\n    &quot;helmet&quot;: &quot;^7.1.0&quot;,\n    &quot;cors&quot;: &quot;^2.8.5&quot;,\n    &quot;express-rate-limit&quot;: &quot;^7.1.5&quot;,\n    &quot;express-validator&quot;: &quot;^7.0.1&quot;,\n    &quot;bcryptjs&quot;: &quot;^2.4.3&quot;,\n    &quot;jsonwebtoken&quot;: &quot;^9.0.2&quot;,\n    &quot;mongoose&quot;: &quot;^8.0.3&quot;,\n    &quot;dotenv&quot;: &quot;^16.3.1&quot;,\n    &quot;compression&quot;: &quot;^1.7.4&quot;,\n    &quot;morgan&quot;: &quot;^1.10.0&quot;,\n    &quot;winston&quot;: &quot;^3.11.0&quot;,\n    &quot;hpp&quot;: &quot;^0.2.3&quot;,\n    &quot;express-mongo-sanitize&quot;: &quot;^2.2.0&quot;,\n    &quot;xss&quot;: &quot;^1.0.14&quot;\n  },\n  &quot;devDependencies&quot;: {\n    &quot;nodemon&quot;: &quot;^3.0.2&quot;,\n    &quot;jest&quot;: &quot;^29.7.0&quot;,\n    &quot;eslint&quot;: &quot;^8.55.0&quot;,\n    &quot;prettier&quot;: &quot;^3.1.0&quot;,\n    &quot;nsp&quot;: &quot;^3.2.1&quot;\n  },\n  &quot;engines&quot;: {\n    &quot;node&quot;: &quot;&gt;=20.0.0&quot;,\n    &quot;npm&quot;: &quot;&gt;=9.0.0&quot;\n  }\n}\nEOF\n\n# Create secure server template\ncat &gt; server.js &lt;&lt;&#039;EOF&#039;\n&#039;use strict&#039;;\n\nconst express = require(&#039;express&#039;);\nconst helmet = require(&#039;helmet&#039;);\nconst cors = require(&#039;cors&#039;);\nconst rateLimit = require(&#039;express-rate-limit&#039;);\nconst { body, validationResult } = require(&#039;express-validator&#039;);\nconst mongoSanitize = require(&#039;express-mongo-sanitize&#039;);\nconst xss = require(&#039;xss&#039;);\nconst compression = require(&#039;compression&#039;);\nconst morgan = require(&#039;morgan&#039;);\nconst winston = require(&#039;winston&#039;);\nconst hpp = require(&#039;hpp&#039;);\nrequire(&#039;dotenv&#039;).config();\n\nconst app = express();\nconst PORT = process.env.PORT || 3000;\n\n// Security middleware\napp.use(helmet({\n  contentSecurityPolicy: {\n    directives: {\n      defaultSrc: [&quot;&#039;self&#039;&quot;],\n      styleSrc: [&quot;&#039;self&#039;&quot;, &quot;&#039;unsafe-inline&#039;&quot;],\n      scriptSrc: [&quot;&#039;self&#039;&quot;],\n      imgSrc: [&quot;&#039;self&#039;&quot;, &quot;data:&quot;, &quot;https:&quot;]\n    }\n  },\n  hsts: {\n    maxAge: 31536000,\n    includeSubDomains: true,\n    preload: true\n  }\n}));\n\n// CORS configuration\napp.use(cors({\n  origin: process.env.ALLOWED_ORIGINS?.split(&#039;,&#039;) || [&#039;https://example.com&#039;],\n  methods: [&#039;GET&#039;, &#039;POST&#039;, &#039;PUT&#039;, &#039;DELETE&#039;],\n  allowedHeaders: [&#039;Content-Type&#039;, &#039;Authorization&#039;],\n  credentials: true\n}));\n\n// Rate limiting\nconst limiter = rateLimit({\n  windowMs: 15 * 60 * 1000, // 15 minutes\n  max: 100, // Limit each IP to 100 requests per windowMs\n  message: &#039;Too many requests from this IP, please try again later.&#039;,\n  standardHeaders: true,\n  legacyHeaders: false\n});\napp.use(limiter);\n\n// API rate limiting (stricter)\nconst apiLimiter = rateLimit({\n  windowMs: 15 * 60 * 1000,\n  max: 50,\n  message: &#039;Too many API requests from this IP&#039;\n});\napp.use(&#039;/api/&#039;, apiLimiter);\n\n// Body parsing with size limits\napp.use(express.json({ limit: &#039;10mb&#039; }));\napp.use(express.urlencoded({ extended: true, limit: &#039;10mb&#039; }));\n\n// Security sanitization\napp.use(mongoSanitize());\napp.use(hpp()); // Prevent HTTP Parameter Pollution\n\n// Compression\napp.use(compression());\n\n// Logging\nconst logger = winston.createLogger({\n  level: &#039;info&#039;,\n  format: winston.format.combine(\n    winston.format.timestamp(),\n    winston.format.errors({ stack: true }),\n    winston.format.json()\n  ),\n  transports: [\n    new winston.transports.File({ filename: &#039;logs/error.log&#039;, level: &#039;error&#039; }),\n    new winston.transports.File({ filename: &#039;logs/combined.log&#039; })\n  ]\n});\n\nif (process.env.NODE_ENV !== &#039;production&#039;) {\n  logger.add(new winston.transports.Console({\n    format: winston.format.simple()\n  }));\n}\n\n// Request logging\napp.use(morgan(&#039;combined&#039;, {\n  stream: { write: message =&gt; logger.info(message.trim()) }\n}));\n\n// Input validation middleware\nconst validateInput = (req, res, next) =&gt; {\n  const errors = validationResult(req);\n  if (!errors.isEmpty()) {\n    return res.status(400).json({\n      success: false,\n      errors: errors.array()\n    });\n  }\n  next();\n};\n\n// Health check endpoint\napp.get(&#039;/health&#039;, (req, res) =&gt; {\n  res.status(200).json({\n    status: &#039;healthy&#039;,\n    timestamp: new Date().toISOString(),\n    uptime: process.uptime(),\n    memory: process.memoryUsage(),\n    version: process.version\n  });\n});\n\n// API routes with validation\napp.post(&#039;/api/users&#039;, [\n  body(&#039;email&#039;).isEmail().normalizeEmail(),\n  body(&#039;name&#039;).trim().escape().isLength({ min: 2, max: 50 }),\n  body(&#039;password&#039;).isLength({ min: 12 }).matches(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)(?=.*[@$!%*?&amp;])/),\n  validateInput\n], (req, res) =&gt; {\n  try {\n    // Sanitize input\n    const sanitizedBody = {\n      email: xss(req.body.email),\n      name: xss(req.body.name),\n      password: req.body.password // Don&#039;t sanitize password, just validate\n    };\n    \n    // Process request\n    res.json({ success: true, message: &#039;User created successfully&#039; });\n  } catch (error) {\n    logger.error(&#039;Error creating user:&#039;, error);\n    res.status(500).json({ success: false, message: &#039;Internal server error&#039; });\n  }\n});\n\n// Error handling middleware\napp.use((error, req, res, next) =&gt; {\n  logger.error(&#039;Unhandled error:&#039;, error);\n  \n  res.status(error.status || 500).json({\n    success: false,\n    message: process.env.NODE_ENV === &#039;production&#039; \n      ? &#039;Something went wrong!&#039; \n      : error.message\n  });\n});\n\n// 404 handler\napp.use(&#039;*&#039;, (req, res) =&gt; {\n  res.status(404).json({\n    success: false,\n    message: &#039;Route not found&#039;\n  });\n});\n\n// Graceful shutdown\nprocess.on(&#039;SIGTERM&#039;, () =&gt; {\n  logger.info(&#039;SIGTERM signal received: closing HTTP server&#039;);\n  server.close(() =&gt; {\n    logger.info(&#039;HTTP server closed&#039;);\n    process.exit(0);\n  });\n});\n\nprocess.on(&#039;SIGINT&#039;, () =&gt; {\n  logger.info(&#039;SIGINT signal received: closing HTTP server&#039;);\n  server.close(() =&gt; {\n    logger.info(&#039;HTTP server closed&#039;);\n    process.exit(0);\n  });\n});\n\n// Unhandled promise rejection handling\nprocess.on(&#039;unhandledRejection&#039;, (reason, promise) =&gt; {\n  logger.error(&#039;Unhandled Rejection at:&#039;, promise, &#039;reason:&#039;, reason);\n  process.exit(1);\n});\n\n// Uncaught exception handling\nprocess.on(&#039;uncaughtException&#039;, (error) =&gt; {\n  logger.error(&#039;Uncaught Exception thrown:&#039;, error);\n  process.exit(1);\n});\n\nconst server = app.listen(PORT, &#039;127.0.0.1&#039;, () =&gt; {\n  logger.info(`Server running on port ${PORT} in ${process.env.NODE_ENV} mode`);\n});\n\nmodule.exports = app;\nEOF\n\n# Create healthcheck script for Docker\ncat &gt; healthcheck.js &lt;&lt;EOF\nconst http = require(&#039;http&#039;);\n\nconst options = {\n  hostname: &#039;localhost&#039;,\n  port: process.env.PORT || 3000,\n  path: &#039;/health&#039;,\n  method: &#039;GET&#039;,\n  timeout: 2000\n};\n\nconst req = http.request(options, (res) =&gt; {\n  if (res.statusCode === 200) {\n    process.exit(0);\n  } else {\n    process.exit(1);\n  }\n});\n\nreq.on(&#039;error&#039;, () =&gt; {\n  process.exit(1);\n});\n\nreq.end();\nEOF\n\n# Install dependencies\nnpm install</code></pre>\n      </div>\n    </div>\n<h3 id=\"environment-configuration\" class=\"mobile-header\">Environment Configuration</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Create secure environment configuration\ncat &gt; .env.example &lt;&lt;EOF\n# Node.js Application Environment Configuration\n\n# Application settings\nNODE_ENV=production\nPORT=3000\nHOST=127.0.0.1\n\n# Database connection\nDATABASE_URL=mongodb://username:password@localhost:27017/myapp?authSource=admin\n# Or PostgreSQL: postgresql://username:password@localhost:5432/myapp\n\n# Security keys (generate with: openssl rand -base64 32)\nJWT_SECRET=your_jwt_secret_here_32_characters_minimum\nSESSION_SECRET=your_session_secret_here_32_characters_minimum\nENCRYPTION_KEY=your_encryption_key_here_32_characters\n\n# CORS settings\nALLOWED_ORIGINS=https://example.com,https://app.example.com\n\n# Email configuration (for notifications)\nSMTP_HOST=smtp.example.com\nSMTP_PORT=587\nSMTP_USER=app@example.com\nSMTP_PASS=smtp_password\n\n# Rate limiting\nRATE_LIMIT_WINDOW_MS=900000\nRATE_LIMIT_MAX=100\n\n# File upload settings\nMAX_FILE_SIZE=10485760\nUPLOAD_PATH=/var/www/nodejs-app/uploads\n\n# Monitoring\nENABLE_MONITORING=true\nLOG_LEVEL=info\n\n# Security settings\nBCRYPT_ROUNDS=12\nJWT_EXPIRY=24h\nSESSION_TIMEOUT=3600000\n\n# External APIs\nEXTERNAL_API_KEY=your_api_key_here\nEXTERNAL_API_URL=https://api.external-service.com\n\n# Redis configuration (for sessions/caching)\nREDIS_URL=redis://localhost:6379\nREDIS_PASSWORD=redis_password\n\n# Health check settings\nHEALTH_CHECK_INTERVAL=30000\nEOF\n\n# Create production environment file\ncp .env.example .env\necho &quot;.env&quot; &gt;&gt; .gitignore\n\n# Set secure permissions\nchmod 600 .env</code></pre>\n      </div>\n    </div>\n<h2 id=\"performance-optimization\" class=\"mobile-header\">Performance Optimization</h2>\n<h3 id=\"nodejs-performance-tuning\" class=\"mobile-header\">Node.js Performance Tuning</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Create performance optimization script\nsudo tee /usr/local/bin/nodejs-optimize.sh &gt; /dev/null &lt;&lt;&#039;EOF&#039;\n#!/bin/bash\n\necho &quot;Optimizing Node.js application performance...&quot;\n\n# System-level optimizations\n# Increase file descriptor limits\nsudo tee -a /etc/security/limits.conf &gt; /dev/null &lt;&lt;LIMITS\nnodejs soft nofile 65535\nnodejs hard nofile 65535\nnodejs soft nproc 65535\nnodejs hard nproc 65535\nLIMITS\n\n# Kernel optimizations for Node.js\nsudo tee -a /etc/sysctl.conf &gt; /dev/null &lt;&lt;SYSCTL\n# Node.js optimizations\nnet.core.somaxconn = 65535\nnet.core.netdev_max_backlog = 5000\nnet.ipv4.tcp_max_syn_backlog = 65535\nnet.ipv4.tcp_fin_timeout = 10\nnet.ipv4.tcp_tw_reuse = 1\nnet.ipv4.ip_local_port_range = 15000 65000\nfs.file-max = 100000\nvm.swappiness = 1\nSYSCTL\n\nsudo sysctl -p\n\n# PM2 optimization for clustering\nif command -v pm2 &gt;/dev/null 2&gt;&amp;1; then\n    # Update PM2 configuration for performance\n    pm2 delete all 2&gt;/dev/null || true\n    \n    cat &gt; /tmp/ecosystem-optimized.config.js &lt;&lt;PM2CONFIG\nmodule.exports = {\n  apps: [{\n    name: &#039;nodejs-app-optimized&#039;,\n    script: &#039;./server.js&#039;,\n    instances: &#039;max&#039;,\n    exec_mode: &#039;cluster&#039;,\n    \n    // V8 optimizations\n    node_args: [\n      &#039;--max-old-space-size=2048&#039;,\n      &#039;--optimize-for-size&#039;,\n      &#039;--gc-interval=100&#039;,\n      &#039;--expose-gc&#039;\n    ],\n    \n    // Performance settings\n    max_memory_restart: &#039;2G&#039;,\n    min_uptime: &#039;10s&#039;,\n    max_restarts: 5,\n    \n    // Environment\n    env_production: {\n      NODE_ENV: &#039;production&#039;,\n      UV_THREADPOOL_SIZE: 16\n    }\n  }]\n};\nPM2CONFIG\n    \n    pm2 start /tmp/ecosystem-optimized.config.js --env production\n    pm2 save\nfi\n\necho &quot;Node.js optimization completed&quot;\nEOF\n\nsudo chmod +x /usr/local/bin/nodejs-optimize.sh</code></pre>\n      </div>\n    </div>\n<h3 id=\"monitoring-and-logging\" class=\"mobile-header\">Monitoring and Logging</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Create Node.js monitoring script\nsudo tee /usr/local/bin/nodejs-monitor.sh &gt; /dev/null &lt;&lt;&#039;EOF&#039;\n#!/bin/bash\nMONITOR_LOG=&quot;/var/log/nodejs-monitor.log&quot;\n\nlog_message() {\n    echo &quot;$(date &#039;+%Y-%m-%d %H:%M:%S&#039;) - $1&quot; | tee -a ${MONITOR_LOG}\n}\n\n# Check if PM2 is managing processes\nif command -v pm2 &gt;/dev/null 2&gt;&amp;1; then\n    PM2_STATUS=$(pm2 jlist | jq -r &#039;.[].pm2_env.status&#039; 2&gt;/dev/null)\n    if echo &quot;$PM2_STATUS&quot; | grep -q &quot;online&quot;; then\n        log_message &quot;âœ“ PM2 processes are running&quot;\n        \n        # Check memory usage\n        PM2_MEMORY=$(pm2 jlist | jq -r &#039;.[].monit.memory&#039; 2&gt;/dev/null | awk &#039;{sum += $1} END {print sum/1024/1024}&#039;)\n        log_message &quot;â„¹ PM2 total memory usage: ${PM2_MEMORY}MB&quot;\n        \n        # Check CPU usage\n        PM2_CPU=$(pm2 jlist | jq -r &#039;.[].monit.cpu&#039; 2&gt;/dev/null | awk &#039;{sum += $1} END {print sum}&#039;)\n        log_message &quot;â„¹ PM2 total CPU usage: ${PM2_CPU}%&quot;\n    else\n        log_message &quot;âš  PM2 processes not online&quot;\n    fi\nfi\n\n# Check systemd service (if not using PM2)\nif systemctl is-active nodejs-app &gt;/dev/null 2&gt;&amp;1; then\n    log_message &quot;âœ“ Node.js systemd service is running&quot;\nelse\n    log_message &quot;â„¹ Node.js systemd service not active (may be using PM2)&quot;\nfi\n\n# Check application health endpoint\nif curl -f http://localhost:3000/health &gt;/dev/null 2&gt;&amp;1; then\n    log_message &quot;âœ“ Application health endpoint responding&quot;\n    \n    # Get detailed health info\n    HEALTH_DATA=$(curl -s http://localhost:3000/health)\n    UPTIME=$(echo &quot;$HEALTH_DATA&quot; | jq -r &#039;.uptime&#039; 2&gt;/dev/null)\n    MEMORY_USED=$(echo &quot;$HEALTH_DATA&quot; | jq -r &#039;.memory.rss&#039; 2&gt;/dev/null)\n    \n    if [ -n &quot;$UPTIME&quot; ]; then\n        log_message &quot;â„¹ Application uptime: ${UPTIME}s&quot;\n    fi\n    if [ -n &quot;$MEMORY_USED&quot; ]; then\n        MEMORY_MB=$((MEMORY_USED / 1024 / 1024))\n        log_message &quot;â„¹ Application memory: ${MEMORY_MB}MB&quot;\n    fi\nelse\n    log_message &quot;âœ— Application health endpoint not responding&quot;\nfi\n\n# Check Node.js version\nNODE_VERSION=$(node --version 2&gt;/dev/null)\nif [ -n &quot;$NODE_VERSION&quot; ]; then\n    log_message &quot;â„¹ Node.js version: ${NODE_VERSION}&quot;\nfi\n\n# Check npm security audit\nif [ -f &quot;package.json&quot; ]; then\n    AUDIT_RESULT=$(npm audit --audit-level high --json 2&gt;/dev/null)\n    VULNERABILITIES=$(echo &quot;$AUDIT_RESULT&quot; | jq -r &#039;.metadata.vulnerabilities.total&#039; 2&gt;/dev/null)\n    if [ -n &quot;$VULNERABILITIES&quot; ] &amp;&amp; [ &quot;$VULNERABILITIES&quot; -gt 0 ]; then\n        log_message &quot;âš  ${VULNERABILITIES} security vulnerabilities found&quot;\n    else\n        log_message &quot;âœ“ No high/critical security vulnerabilities&quot;\n    fi\nfi\n\nlog_message &quot;Node.js monitoring completed&quot;\nEOF\n\nsudo chmod +x /usr/local/bin/nodejs-monitor.sh\n\n# Schedule monitoring every 5 minutes\necho &quot;*/5 * * * * root /usr/local/bin/nodejs-monitor.sh&quot; | sudo tee -a /etc/crontab</code></pre>\n      </div>\n    </div>\n<h2 id=\"backup-and-deployment\" class=\"mobile-header\">Backup and Deployment</h2>\n<h3 id=\"application-backup-strategy\" class=\"mobile-header\">Application Backup Strategy</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\">sudo tee /usr/local/bin/nodejs-backup.sh &gt; /dev/null &lt;&lt;&#039;EOF&#039;\n#!/bin/bash\nBACKUP_DIR=&quot;/backup/nodejs&quot;\nDATE=$(date +%Y%m%d_%H%M%S)\n\nmkdir -p ${BACKUP_DIR}/{app,config,logs}\n\necho &quot;Starting Node.js application backup...&quot;\n\n# Backup application code and dependencies\ntar --exclude=&#039;node_modules&#039; --exclude=&#039;logs/*&#039; --exclude=&#039;.git&#039; \\\n    -czf ${BACKUP_DIR}/app/nodejs-app-${DATE}.tar.gz \\\n    -C /var/www/nodejs-app .\n\n# Backup PM2 configuration and process list\nif command -v pm2 &gt;/dev/null 2&gt;&amp;1; then\n    pm2 save\n    cp ~/.pm2/dump.pm2 ${BACKUP_DIR}/config/pm2-processes-${DATE}.json\n    cp ecosystem.config.js ${BACKUP_DIR}/config/ecosystem-${DATE}.js 2&gt;/dev/null || true\nfi\n\n# Backup environment configuration\ncp /var/www/nodejs-app/.env ${BACKUP_DIR}/config/env-${DATE}.backup 2&gt;/dev/null || true\n\n# Backup systemd service files\ncp /etc/systemd/system/nodejs-app.service ${BACKUP_DIR}/config/nodejs-app-${DATE}.service 2&gt;/dev/null || true\n\n# Backup logs\ntar -czf ${BACKUP_DIR}/logs/nodejs-logs-${DATE}.tar.gz \\\n    /var/www/nodejs-app/logs/ 2&gt;/dev/null || true\n\n# Backup NGINX configuration\ncp /etc/nginx/sites-available/nodejs-app ${BACKUP_DIR}/config/nginx-${DATE}.conf 2&gt;/dev/null || true\n\n# Upload to cloud storage\naws s3 cp ${BACKUP_DIR}/ s3://nodejs-backups/ --recursive\ngsutil cp -r ${BACKUP_DIR}/* gs://nodejs-backups/\n\n# Keep only last 14 backups\nfind ${BACKUP_DIR} -name &quot;nodejs-*&quot; -type f -mtime +14 -delete\n\necho &quot;Node.js backup completed: ${DATE}&quot;\nEOF\n\nsudo chmod +x /usr/local/bin/nodejs-backup.sh\n\n# Schedule daily backups\necho &quot;0 2 * * * root /usr/local/bin/nodejs-backup.sh&quot; | sudo tee -a /etc/crontab</code></pre>\n      </div>\n    </div>\n<h3 id=\"zero-downtime-deployment\" class=\"mobile-header\">Zero-Downtime Deployment</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Create deployment script\nsudo tee /usr/local/bin/nodejs-deploy.sh &gt; /dev/null &lt;&lt;&#039;EOF&#039;\n#!/bin/bash\nVERSION=&quot;${1}&quot;\nREPO_URL=&quot;${2:-https://github.com/example/nodejs-app.git}&quot;\n\nif [ -z &quot;$VERSION&quot; ]; then\n    echo &quot;Usage: $0 &lt;version&gt; [repo_url]&quot;\n    echo &quot;Example: $0 v1.2.3&quot;\n    exit 1\nfi\n\nDEPLOY_DIR=&quot;/var/www/nodejs-app&quot;\nRELEASES_DIR=&quot;${DEPLOY_DIR}/releases&quot;\nSHARED_DIR=&quot;${DEPLOY_DIR}/shared&quot;\nCURRENT_LINK=&quot;${DEPLOY_DIR}/current&quot;\nRELEASE_DIR=&quot;${RELEASES_DIR}/${VERSION}&quot;\n\necho &quot;Deploying Node.js application version: ${VERSION}&quot;\n\n# Create directory structure\nmkdir -p ${RELEASES_DIR} ${SHARED_DIR}/{logs,uploads,config}\n\n# Clone and checkout specific version\ngit clone ${REPO_URL} ${RELEASE_DIR}\ncd ${RELEASE_DIR}\ngit checkout ${VERSION}\n\n# Copy shared configuration\ncp ${SHARED_DIR}/config/.env . 2&gt;/dev/null || true\n\n# Install dependencies (production only)\nnpm ci --only=production\n\n# Run security audit\nnpm audit --audit-level high\n\n# Run tests\nnpm test\n\n# Create symbolic links for shared directories\nln -sfn ${SHARED_DIR}/logs logs\nln -sfn ${SHARED_DIR}/uploads uploads\n\n# Update current symlink (atomic operation)\nln -sfn ${RELEASE_DIR} ${CURRENT_LINK}\n\n# Reload PM2 or systemd service\nif command -v pm2 &gt;/dev/null 2&gt;&amp;1 &amp;&amp; pm2 list | grep -q &quot;nodejs-app&quot;; then\n    echo &quot;Reloading PM2 processes...&quot;\n    cd ${CURRENT_LINK}\n    pm2 reload ecosystem.config.js --env production\nelif systemctl is-active nodejs-app &gt;/dev/null 2&gt;&amp;1; then\n    echo &quot;Restarting systemd service...&quot;\n    systemctl restart nodejs-app\nfi\n\n# Wait for application to be ready\necho &quot;Waiting for application to start...&quot;\nfor i in {1..30}; do\n    if curl -f http://localhost:3000/health &gt;/dev/null 2&gt;&amp;1; then\n        echo &quot;âœ“ Application is healthy&quot;\n        break\n    fi\n    sleep 2\ndone\n\n# Keep only last 5 releases\ncd ${RELEASES_DIR}\nls -t | tail -n +6 | xargs rm -rf\n\n# Set proper ownership\nchown -R nodejs:nodejs ${DEPLOY_DIR}\n\necho &quot;Deployment completed successfully: ${VERSION}&quot;\necho &quot;Application is available at: http://localhost:3000&quot;\nEOF\n\nsudo chmod +x /usr/local/bin/nodejs-deploy.sh</code></pre>\n      </div>\n    </div>\n<h2 id=\"troubleshooting\" class=\"mobile-header\">Troubleshooting</h2>\n<h3 id=\"common-issues-and-solutions\" class=\"mobile-header\">Common Issues and Solutions</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Check Node.js application status\n# PM2 processes\npm2 status\npm2 logs\npm2 monit\n\n# SystemD service\nsudo systemctl status nodejs-app\nsudo journalctl -u nodejs-app -f\n\n# Check application logs\ntail -f /var/www/nodejs-app/logs/combined.log\ntail -f /var/www/nodejs-app/logs/error.log\n\n# Test application health\ncurl -i http://localhost:3000/health\n\n# Check memory leaks\nnode --inspect server.js\n# Connect Chrome DevTools to memory tab\n\n# Performance profiling\nnode --prof server.js\n# Generate profile: node --prof-process isolate-*.log &gt; profile.txt\n\n# Check for security vulnerabilities\nnpm audit\nnpm audit fix\n\n# Update dependencies\nnpm outdated\nnpm update\n\n# Check package vulnerabilities\nnpx retire\n\n# Memory usage analysis\nps aux --sort=-%mem | grep node\npmap -x $(pgrep node)\n\n# Network connectivity\nss -tulpn | grep 3000\nnetstat -tulpn | grep node\n\n# Process monitoring\nhtop -p $(pgrep node)\ntop -p $(pgrep node)\n\n# Debug mode (development only)\nnode --inspect-brk server.js\n\n# Cluster mode debugging\npm2 logs --lines 1000\npm2 flush  # Clear all logs\n\n# Database connection issues\n# Check MongoDB connection\nmongosh --eval &quot;db.adminCommand(&#039;ping&#039;)&quot;\n\n# Check PostgreSQL connection\npsql -h localhost -U username -d dbname -c &quot;SELECT version();&quot;\n\n# SSL/HTTPS issues\nopenssl s_client -connect app.example.com:443\ncurl -I https://app.example.com\n\n# Environment issues\nprintenv | grep NODE\necho $NODE_ENV\n\n# Restart applications\npm2 restart all\n# Or\nsudo systemctl restart nodejs-app\n\n# Clean npm cache\nnpm cache clean --force\n\n# Rebuild native modules\nnpm rebuild</code></pre>\n      </div>\n    </div>\n<h2 id=\"additional-resources\" class=\"mobile-header\">Additional Resources</h2>\n<li class=\"mobile-list-item\"><a href=\"https://nodejs.org/docs/\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">Node.js Official Documentation</a></li>\n<li class=\"mobile-list-item\"><a href=\"https://nodejs.org/en/security/\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">Node.js Security Best Practices</a></li>\n<li class=\"mobile-list-item\"><a href=\"https://pm2.keymetrics.io/docs/\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">PM2 Documentation</a></li>\n<li class=\"mobile-list-item\"><a href=\"https://expressjs.com/en/advanced/best-practice-security.html\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">Express.js Security Guide</a></li>\n<li class=\"mobile-list-item\"><a href=\"https://github.com/goldbergyoni/nodebestpractices\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">Node.js Best Practices</a></li>\n<p class=\"mobile-paragraph\">---</p>\n<p class=\"mobile-paragraph\"><strong>Note:</strong> This guide is part of the <a href=\"https://howtomgr.github.io\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">HowToMgr</a> collection.</p>","readTime":"17 min","wordCount":3313,"lastBuilt":"2025-09-14T18:12:03.080Z"},{"name":"odoo","displayName":"Odoo","slug":"odoo","description":"Repo for odoo","category":"infrastructure","language":null,"stars":0,"forks":0,"topics":[],"githubUrl":"https://github.com/howtomgr/odoo","updatedAt":"2025-09-08T03:12:54Z","createdAt":"2025-09-08T03:12:44Z","readmeRaw":"## ðŸ‘‹ Welcome to odoo ðŸš€  \n\nodoo README  \n  \n  \n## Author  \n\nðŸ¤– casjay: [Github](https://github.com/casjay) ðŸ¤–  \n","readmeHtml":"<h2 id=\"welcome-to-odoo\" class=\"mobile-header\">ðŸ‘‹ Welcome to odoo ðŸš€  </h2>\n<p class=\"mobile-paragraph\">odoo README  </p>\n<h2 id=\"author\" class=\"mobile-header\">Author  </h2>\n<p class=\"mobile-paragraph\">ðŸ¤– casjay: <a href=\"https://github.com/casjay\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">Github</a> ðŸ¤–  </p>","readTime":"1 min","wordCount":15,"lastBuilt":"2025-09-14T18:12:15.241Z"},{"name":"openvpn","displayName":"Openvpn","slug":"openvpn","description":"Repo for openvpn","category":"security","language":null,"stars":0,"forks":0,"topics":[],"githubUrl":"https://github.com/howtomgr/openvpn","updatedAt":"2025-09-08T03:13:07Z","createdAt":"2025-09-08T03:12:57Z","readmeRaw":"## ðŸ‘‹ Welcome to openvpn ðŸš€  \n\nopenvpn README  \n  \n  \n## Author  \n\nðŸ¤– casjay: [Github](https://github.com/casjay) ðŸ¤–  \n","readmeHtml":"<h2 id=\"welcome-to-openvpn\" class=\"mobile-header\">ðŸ‘‹ Welcome to openvpn ðŸš€  </h2>\n<p class=\"mobile-paragraph\">openvpn README  </p>\n<h2 id=\"author\" class=\"mobile-header\">Author  </h2>\n<p class=\"mobile-paragraph\">ðŸ¤– casjay: <a href=\"https://github.com/casjay\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">Github</a> ðŸ¤–  </p>","readTime":"1 min","wordCount":15,"lastBuilt":"2025-09-14T18:12:14.907Z"},{"name":"opnsense","displayName":"Opnsense","slug":"opnsense","description":"Repo for opnsense","category":"infrastructure","language":null,"stars":0,"forks":0,"topics":[],"githubUrl":"https://github.com/howtomgr/opnsense","updatedAt":"2025-09-08T03:13:18Z","createdAt":"2025-09-08T03:13:08Z","readmeRaw":"## ðŸ‘‹ Welcome to opnsense ðŸš€  \n\nopnsense README  \n  \n  \n## Author  \n\nðŸ¤– casjay: [Github](https://github.com/casjay) ðŸ¤–  \n","readmeHtml":"<h2 id=\"welcome-to-opnsense\" class=\"mobile-header\">ðŸ‘‹ Welcome to opnsense ðŸš€  </h2>\n<p class=\"mobile-paragraph\">opnsense README  </p>\n<h2 id=\"author\" class=\"mobile-header\">Author  </h2>\n<p class=\"mobile-paragraph\">ðŸ¤– casjay: <a href=\"https://github.com/casjay\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">Github</a> ðŸ¤–  </p>","readTime":"1 min","wordCount":15,"lastBuilt":"2025-09-14T18:12:14.611Z"},{"name":"owncloud","displayName":"Owncloud","slug":"owncloud","description":"Repo for owncloud","category":"infrastructure","language":null,"stars":0,"forks":0,"topics":[],"githubUrl":"https://github.com/howtomgr/owncloud","updatedAt":"2025-09-08T03:13:30Z","createdAt":"2025-09-08T03:13:20Z","readmeRaw":"## ðŸ‘‹ Welcome to owncloud ðŸš€  \n\nowncloud README  \n  \n  \n## Author  \n\nðŸ¤– casjay: [Github](https://github.com/casjay) ðŸ¤–  \n","readmeHtml":"<h2 id=\"welcome-to-owncloud\" class=\"mobile-header\">ðŸ‘‹ Welcome to owncloud ðŸš€  </h2>\n<p class=\"mobile-paragraph\">owncloud README  </p>\n<h2 id=\"author\" class=\"mobile-header\">Author  </h2>\n<p class=\"mobile-paragraph\">ðŸ¤– casjay: <a href=\"https://github.com/casjay\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">Github</a> ðŸ¤–  </p>","readTime":"1 min","wordCount":15,"lastBuilt":"2025-09-14T18:12:14.318Z"},{"name":"pfsense","displayName":"Pfsense","slug":"pfsense","description":"Repo for pfsense","category":"infrastructure","language":null,"stars":0,"forks":0,"topics":[],"githubUrl":"https://github.com/howtomgr/pfsense","updatedAt":"2025-09-08T03:13:43Z","createdAt":"2025-09-08T03:13:32Z","readmeRaw":"## ðŸ‘‹ Welcome to pfsense ðŸš€  \n\npfsense README  \n  \n  \n## Author  \n\nðŸ¤– casjay: [Github](https://github.com/casjay) ðŸ¤–  \n","readmeHtml":"<h2 id=\"welcome-to-pfsense\" class=\"mobile-header\">ðŸ‘‹ Welcome to pfsense ðŸš€  </h2>\n<p class=\"mobile-paragraph\">pfsense README  </p>\n<h2 id=\"author\" class=\"mobile-header\">Author  </h2>\n<p class=\"mobile-paragraph\">ðŸ¤– casjay: <a href=\"https://github.com/casjay\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">Github</a> ðŸ¤–  </p>","readTime":"1 min","wordCount":15,"lastBuilt":"2025-09-14T18:12:14.038Z"},{"name":"pgadmin","displayName":"Pgadmin","slug":"pgadmin","description":"Repo for pgadmin","category":"infrastructure","language":null,"stars":0,"forks":0,"topics":[],"githubUrl":"https://github.com/howtomgr/pgadmin","updatedAt":"2025-09-08T03:13:54Z","createdAt":"2025-09-08T03:13:44Z","readmeRaw":"## ðŸ‘‹ Welcome to pgadmin ðŸš€  \n\npgadmin README  \n  \n  \n## Author  \n\nðŸ¤– casjay: [Github](https://github.com/casjay) ðŸ¤–  \n","readmeHtml":"<h2 id=\"welcome-to-pgadmin\" class=\"mobile-header\">ðŸ‘‹ Welcome to pgadmin ðŸš€  </h2>\n<p class=\"mobile-paragraph\">pgadmin README  </p>\n<h2 id=\"author\" class=\"mobile-header\">Author  </h2>\n<p class=\"mobile-paragraph\">ðŸ¤– casjay: <a href=\"https://github.com/casjay\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">Github</a> ðŸ¤–  </p>","readTime":"1 min","wordCount":15,"lastBuilt":"2025-09-14T18:12:13.746Z"},{"name":"phpmyadmin","displayName":"Phpmyadmin","slug":"phpmyadmin","description":"Repo for phpmyadmin","category":"infrastructure","language":null,"stars":0,"forks":0,"topics":[],"githubUrl":"https://github.com/howtomgr/phpmyadmin","updatedAt":"2025-09-08T03:14:06Z","createdAt":"2025-09-08T03:13:56Z","readmeRaw":"## ðŸ‘‹ Welcome to phpmyadmin ðŸš€  \n\nphpmyadmin README  \n  \n  \n## Author  \n\nðŸ¤– casjay: [Github](https://github.com/casjay) ðŸ¤–  \n","readmeHtml":"<h2 id=\"welcome-to-phpmyadmin\" class=\"mobile-header\">ðŸ‘‹ Welcome to phpmyadmin ðŸš€  </h2>\n<p class=\"mobile-paragraph\">phpmyadmin README  </p>\n<h2 id=\"author\" class=\"mobile-header\">Author  </h2>\n<p class=\"mobile-paragraph\">ðŸ¤– casjay: <a href=\"https://github.com/casjay\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">Github</a> ðŸ¤–  </p>","readTime":"1 min","wordCount":15,"lastBuilt":"2025-09-14T18:12:13.376Z"},{"name":"pihole","displayName":"Pi-hole","slug":"pihole","description":"Repo for pihole","category":"security","language":null,"stars":0,"forks":0,"topics":[],"githubUrl":"https://github.com/howtomgr/pihole","updatedAt":"2025-09-14T01:30:48Z","createdAt":"2025-09-08T03:14:08Z","readmeRaw":"# Pi-hole Installation Guide\n\nNetwork-wide ad and tracker blocking DNS sinkhole that protects your entire network from unwanted content without requiring client-side software. Essential tool for privacy, security, and performance improvement.\n\n## Prerequisites\n\n- Linux system (any modern distribution)\n- Root or sudo access\n- 1GB RAM minimum, 2GB recommended\n- Static IP address for DNS server\n- Port 53 available for DNS service\n- Web server port (80/443) available for admin interface\n\n## Installation\n\n### One-Line Installation (Recommended)\n```bash\n# Download and run the automated installer\ncurl -sSL https://install.pi-hole.net | bash\n\n# Alternative: Download and review before running\nwget -O basic-install.sh https://install.pi-hole.net\nless basic-install.sh  # Review the script\nsudo bash basic-install.sh\n```\n\n### Ubuntu/Debian Manual Installation\n```bash\n# Update system packages\nsudo apt update && sudo apt upgrade -y\n\n# Install dependencies\nsudo apt install -y curl dnsutils net-tools\n\n# Create pihole user\nsudo useradd --system --shell /usr/sbin/nologin pihole\n\n# Download Pi-hole\ngit clone --depth 1 https://github.com/pi-hole/pi-hole.git Pi-hole\ncd Pi-hole\n\n# Run installer\nsudo bash automated\\ install/basic-install.sh\n\n# Verify installation\npihole status\ndig @localhost google.com\n```\n\n## Configuration\n\n### Enhanced Privacy Setup\n```bash\n# Configure maximum privacy\nsudo tee /etc/pihole/pihole-FTL.conf > /dev/null <<EOF\nPRIVACYLEVEL=2\nMAXLOGAGE=24\nIGNORE_LOCALHOST=yes\nBLOCKINGMODE=IP-AAAA-NODATA\nCNAME_INSPECTION=yes\nEOF\n\nsudo systemctl restart pihole-FTL\n```\n\n### Custom Blocklists\n```bash\n# Add comprehensive blocklists\npihole -a -l https://raw.githubusercontent.com/StevenBlack/hosts/master/hosts\npihole -a -l https://mirror1.malwaredomains.com/files/justdomains\npihole -a -l https://s3.amazonaws.com/lists.disconnect.me/simple_tracking.txt\n\n# Update blocklists\npihole -g\n```\n\n## Security and Monitoring\n\n### Security Hardening\n```bash\n# Secure web interface\nsudo tee /etc/lighttpd/conf-available/99-pihole-security.conf > /dev/null <<EOF\nserver.modules += ( \"mod_setenv\" )\nsetenv.add-response-header = (\n    \"X-Frame-Options\" => \"DENY\",\n    \"X-Content-Type-Options\" => \"nosniff\",\n    \"Strict-Transport-Security\" => \"max-age=31536000\"\n)\nEOF\n\nsudo lighttpd-enable-mod pihole-security\nsudo systemctl restart lighttpd\n```\n\n### Monitoring Script\n```bash\nsudo tee /usr/local/bin/pihole-monitor.sh > /dev/null <<'EOF'\n#!/bin/bash\nLOG=\"/var/log/pihole-monitor.log\"\n\nlog_message() {\n    echo \"$(date '+%Y-%m-%d %H:%M:%S') - $1\" | tee -a ${LOG}\n}\n\n# Check service\nif systemctl is-active pihole-FTL >/dev/null; then\n    log_message \"âœ“ Pi-hole service running\"\nelse\n    log_message \"âœ— Pi-hole service not running\"\nfi\n\n# Check DNS resolution\nif dig @localhost google.com +short >/dev/null 2>&1; then\n    log_message \"âœ“ DNS resolution working\"\nelse\n    log_message \"âœ— DNS resolution failed\"\nfi\n\n# Check blocking\nif dig @localhost doubleclick.net +short | grep -q \"0.0.0.0\"; then\n    log_message \"âœ“ Ad blocking working\"\nelse\n    log_message \"âš  Ad blocking issues\"\nfi\n\nlog_message \"Pi-hole monitoring completed\"\nEOF\n\nsudo chmod +x /usr/local/bin/pihole-monitor.sh\necho \"*/15 * * * * root /usr/local/bin/pihole-monitor.sh\" | sudo tee -a /etc/crontab\n```\n\n## Backup Strategy\n\n```bash\nsudo tee /usr/local/bin/pihole-backup.sh > /dev/null <<'EOF'\n#!/bin/bash\nBACKUP_DIR=\"/backup/pihole\"\nDATE=$(date +%Y%m%d_%H%M%S)\n\nmkdir -p ${BACKUP_DIR}\n\n# Backup Pi-hole configuration\npihole -a -t > ${BACKUP_DIR}/pihole-backup-${DATE}.tar.gz\n\n# Keep last 14 backups\nfind ${BACKUP_DIR} -name \"pihole-backup-*.tar.gz\" -mtime +14 -delete\n\necho \"Pi-hole backup completed: ${DATE}\"\nEOF\n\nsudo chmod +x /usr/local/bin/pihole-backup.sh\necho \"0 2 * * * root /usr/local/bin/pihole-backup.sh\" | sudo tee -a /etc/crontab\n```\n\n## Additional Resources\n\n- [Pi-hole Documentation](https://docs.pi-hole.net/)\n- [Pi-hole Community](https://discourse.pi-hole.net/)\n- [Blocklist Collections](https://github.com/hectorm/hmirror)\n\n---\n\n**Note:** This guide is part of the [HowToMgr](https://howtomgr.github.io) collection.","readmeHtml":"<h1 id=\"pi-hole-installation-guide\" class=\"mobile-header\">Pi-hole Installation Guide</h1>\n<p class=\"mobile-paragraph\">Network-wide ad and tracker blocking DNS sinkhole that protects your entire network from unwanted content without requiring client-side software. Essential tool for privacy, security, and performance improvement.</p>\n<h2 id=\"prerequisites\" class=\"mobile-header\">Prerequisites</h2>\n<li class=\"mobile-list-item\">Linux system (any modern distribution)</li>\n<li class=\"mobile-list-item\">Root or sudo access</li>\n<li class=\"mobile-list-item\">1GB RAM minimum, 2GB recommended</li>\n<li class=\"mobile-list-item\">Static IP address for DNS server</li>\n<li class=\"mobile-list-item\">Port 53 available for DNS service</li>\n<li class=\"mobile-list-item\">Web server port (80/443) available for admin interface</li>\n<h2 id=\"installation\" class=\"mobile-header\">Installation</h2>\n<h3 id=\"one-line-installation-recommended\" class=\"mobile-header\">One-Line Installation (Recommended)</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Download and run the automated installer\ncurl -sSL https://install.pi-hole.net | bash\n\n# Alternative: Download and review before running\nwget -O basic-install.sh https://install.pi-hole.net\nless basic-install.sh  # Review the script\nsudo bash basic-install.sh</code></pre>\n      </div>\n    </div>\n<h3 id=\"ubuntudebian-manual-installation\" class=\"mobile-header\">Ubuntu/Debian Manual Installation</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Update system packages\nsudo apt update &amp;&amp; sudo apt upgrade -y\n\n# Install dependencies\nsudo apt install -y curl dnsutils net-tools\n\n# Create pihole user\nsudo useradd --system --shell /usr/sbin/nologin pihole\n\n# Download Pi-hole\ngit clone --depth 1 https://github.com/pi-hole/pi-hole.git Pi-hole\ncd Pi-hole\n\n# Run installer\nsudo bash automated\\ install/basic-install.sh\n\n# Verify installation\npihole status\ndig @localhost google.com</code></pre>\n      </div>\n    </div>\n<h2 id=\"configuration\" class=\"mobile-header\">Configuration</h2>\n<h3 id=\"enhanced-privacy-setup\" class=\"mobile-header\">Enhanced Privacy Setup</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Configure maximum privacy\nsudo tee /etc/pihole/pihole-FTL.conf &gt; /dev/null &lt;&lt;EOF\nPRIVACYLEVEL=2\nMAXLOGAGE=24\nIGNORE_LOCALHOST=yes\nBLOCKINGMODE=IP-AAAA-NODATA\nCNAME_INSPECTION=yes\nEOF\n\nsudo systemctl restart pihole-FTL</code></pre>\n      </div>\n    </div>\n<h3 id=\"custom-blocklists\" class=\"mobile-header\">Custom Blocklists</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Add comprehensive blocklists\npihole -a -l https://raw.githubusercontent.com/StevenBlack/hosts/master/hosts\npihole -a -l https://mirror1.malwaredomains.com/files/justdomains\npihole -a -l https://s3.amazonaws.com/lists.disconnect.me/simple_tracking.txt\n\n# Update blocklists\npihole -g</code></pre>\n      </div>\n    </div>\n<h2 id=\"security-and-monitoring\" class=\"mobile-header\">Security and Monitoring</h2>\n<h3 id=\"security-hardening\" class=\"mobile-header\">Security Hardening</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Secure web interface\nsudo tee /etc/lighttpd/conf-available/99-pihole-security.conf &gt; /dev/null &lt;&lt;EOF\nserver.modules += ( &quot;mod_setenv&quot; )\nsetenv.add-response-header = (\n    &quot;X-Frame-Options&quot; =&gt; &quot;DENY&quot;,\n    &quot;X-Content-Type-Options&quot; =&gt; &quot;nosniff&quot;,\n    &quot;Strict-Transport-Security&quot; =&gt; &quot;max-age=31536000&quot;\n)\nEOF\n\nsudo lighttpd-enable-mod pihole-security\nsudo systemctl restart lighttpd</code></pre>\n      </div>\n    </div>\n<h3 id=\"monitoring-script\" class=\"mobile-header\">Monitoring Script</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\">sudo tee /usr/local/bin/pihole-monitor.sh &gt; /dev/null &lt;&lt;&#039;EOF&#039;\n#!/bin/bash\nLOG=&quot;/var/log/pihole-monitor.log&quot;\n\nlog_message() {\n    echo &quot;$(date &#039;+%Y-%m-%d %H:%M:%S&#039;) - $1&quot; | tee -a ${LOG}\n}\n\n# Check service\nif systemctl is-active pihole-FTL &gt;/dev/null; then\n    log_message &quot;âœ“ Pi-hole service running&quot;\nelse\n    log_message &quot;âœ— Pi-hole service not running&quot;\nfi\n\n# Check DNS resolution\nif dig @localhost google.com +short &gt;/dev/null 2&gt;&amp;1; then\n    log_message &quot;âœ“ DNS resolution working&quot;\nelse\n    log_message &quot;âœ— DNS resolution failed&quot;\nfi\n\n# Check blocking\nif dig @localhost doubleclick.net +short | grep -q &quot;0.0.0.0&quot;; then\n    log_message &quot;âœ“ Ad blocking working&quot;\nelse\n    log_message &quot;âš  Ad blocking issues&quot;\nfi\n\nlog_message &quot;Pi-hole monitoring completed&quot;\nEOF\n\nsudo chmod +x /usr/local/bin/pihole-monitor.sh\necho &quot;*/15 * * * * root /usr/local/bin/pihole-monitor.sh&quot; | sudo tee -a /etc/crontab</code></pre>\n      </div>\n    </div>\n<h2 id=\"backup-strategy\" class=\"mobile-header\">Backup Strategy</h2>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\">sudo tee /usr/local/bin/pihole-backup.sh &gt; /dev/null &lt;&lt;&#039;EOF&#039;\n#!/bin/bash\nBACKUP_DIR=&quot;/backup/pihole&quot;\nDATE=$(date +%Y%m%d_%H%M%S)\n\nmkdir -p ${BACKUP_DIR}\n\n# Backup Pi-hole configuration\npihole -a -t &gt; ${BACKUP_DIR}/pihole-backup-${DATE}.tar.gz\n\n# Keep last 14 backups\nfind ${BACKUP_DIR} -name &quot;pihole-backup-*.tar.gz&quot; -mtime +14 -delete\n\necho &quot;Pi-hole backup completed: ${DATE}&quot;\nEOF\n\nsudo chmod +x /usr/local/bin/pihole-backup.sh\necho &quot;0 2 * * * root /usr/local/bin/pihole-backup.sh&quot; | sudo tee -a /etc/crontab</code></pre>\n      </div>\n    </div>\n<h2 id=\"additional-resources\" class=\"mobile-header\">Additional Resources</h2>\n<li class=\"mobile-list-item\"><a href=\"https://docs.pi-hole.net/\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">Pi-hole Documentation</a></li>\n<li class=\"mobile-list-item\"><a href=\"https://discourse.pi-hole.net/\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">Pi-hole Community</a></li>\n<li class=\"mobile-list-item\"><a href=\"https://github.com/hectorm/hmirror\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">Blocklist Collections</a></li>\n<p class=\"mobile-paragraph\">---</p>\n<p class=\"mobile-paragraph\"><strong>Note:</strong> This guide is part of the <a href=\"https://howtomgr.github.io\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">HowToMgr</a> collection.</p>","readTime":"3 min","wordCount":479,"lastBuilt":"2025-09-14T18:12:02.780Z"},{"name":"plex","displayName":"Plex","slug":"plex","description":"Repo for plex","category":"media","language":null,"stars":0,"forks":0,"topics":[],"githubUrl":"https://github.com/howtomgr/plex","updatedAt":"2025-09-14T01:30:51Z","createdAt":"2025-09-08T03:14:20Z","readmeRaw":"# Plex Media Server Installation Guide\n\nPremium media server for organizing and streaming personal media collections. Industry-leading platform with advanced features including hardware transcoding, remote access, and mobile apps.\n\n## Prerequisites\n\n- Linux system (any modern distribution)\n- Root or sudo access\n- 4GB RAM minimum, 8GB+ recommended for transcoding\n- GPU recommended for hardware transcoding\n- Storage space for media library\n- Plex account (free signup required)\n\n## Installation\n\n### Ubuntu/Debian\n```bash\n# Update system packages\nsudo apt update && sudo apt upgrade -y\n\n# Download Plex Media Server\nwget https://downloads.plex.tv/plex-media-server-new/1.32.8.7639-fb6452ebf/debian/plexmediaserver_1.32.8.7639-fb6452ebf_amd64.deb\n\n# Install Plex\nsudo dpkg -i plexmediaserver_*.deb\nsudo apt-get install -f  # Fix any dependency issues\n\n# Enable and start service\nsudo systemctl enable --now plexmediaserver\n\n# Configure firewall\nsudo ufw allow 32400/tcp comment 'Plex Media Server'\nsudo ufw allow 1900/udp comment 'Plex DLNA'\n\n# Verify installation\nsudo systemctl status plexmediaserver\n```\n\n### RHEL/CentOS/Rocky Linux/AlmaLinux\n```bash\n# Download Plex Media Server\nwget https://downloads.plex.tv/plex-media-server-new/1.32.8.7639-fb6452ebf/redhat/plexmediaserver-1.32.8.7639-fb6452ebf.x86_64.rpm\n\n# Install Plex\nsudo yum localinstall -y plexmediaserver-*.rpm\n\n# Enable and start service\nsudo systemctl enable --now plexmediaserver\n\n# Configure firewall\nsudo firewall-cmd --permanent --add-port=32400/tcp\nsudo firewall-cmd --reload\n```\n\n### Docker Installation\n```bash\n# Create Plex directories\nmkdir -p ~/plex/{config,media}\n\n# Run Plex container\ndocker run -d \\\n  --name plex \\\n  --restart unless-stopped \\\n  --net=host \\\n  -e TZ=\"America/New_York\" \\\n  -e PLEX_CLAIM=\"claim-your-token-here\" \\\n  -v ~/plex/config:/config \\\n  -v ~/plex/media:/data \\\n  --device /dev/dri:/dev/dri \\\n  plexinc/pms-docker:latest\n```\n\n## Configuration\n\n### Media Library Setup\n```bash\n# Create media directory structure\nsudo mkdir -p /media/{movies,tv-shows,music}\nsudo chown -R plex:plex /media\nsudo chmod -R 755 /media\n\n# Hardware transcoding setup\nsudo usermod -aG video plex\nls -la /dev/dri/\n```\n\n### Security and Backup\n```bash\n# NGINX reverse proxy\nsudo tee /etc/nginx/sites-available/plex > /dev/null <<EOF\nserver {\n    listen 443 ssl http2;\n    server_name plex.example.com;\n\n    ssl_certificate /etc/letsencrypt/live/plex.example.com/fullchain.pem;\n    ssl_certificate_key /etc/letsencrypt/live/plex.example.com/privkey.pem;\n\n    location / {\n        proxy_pass http://127.0.0.1:32400;\n        proxy_set_header Host \\$host;\n        proxy_set_header X-Real-IP \\$remote_addr;\n        proxy_set_header X-Forwarded-For \\$proxy_add_x_forwarded_for;\n        proxy_set_header X-Forwarded-Proto \\$scheme;\n    }\n}\nEOF\n\n# Backup strategy\nsudo tee /usr/local/bin/plex-backup.sh > /dev/null <<'EOF'\n#!/bin/bash\nBACKUP_DIR=\"/backup/plex\"\nDATE=$(date +%Y%m%d_%H%M%S)\n\nmkdir -p ${BACKUP_DIR}\n\nsudo systemctl stop plexmediaserver\nsudo tar -czf ${BACKUP_DIR}/plex-${DATE}.tar.gz -C /var/lib/plexmediaserver .\nsudo systemctl start plexmediaserver\n\necho \"Plex backup completed: ${DATE}\"\nEOF\n\nsudo chmod +x /usr/local/bin/plex-backup.sh\necho \"0 1 * * * root /usr/local/bin/plex-backup.sh\" | sudo tee -a /etc/crontab\n```\n\n## Additional Resources\n\n- [Plex Support](https://support.plex.tv/)\n- [Plex Installation Guide](https://support.plex.tv/articles/200288586-installation/)\n\n---\n\n**Note:** This guide is part of the [HowToMgr](https://howtomgr.github.io) collection.","readmeHtml":"<h1 id=\"plex-media-server-installation-guide\" class=\"mobile-header\">Plex Media Server Installation Guide</h1>\n<p class=\"mobile-paragraph\">Premium media server for organizing and streaming personal media collections. Industry-leading platform with advanced features including hardware transcoding, remote access, and mobile apps.</p>\n<h2 id=\"prerequisites\" class=\"mobile-header\">Prerequisites</h2>\n<li class=\"mobile-list-item\">Linux system (any modern distribution)</li>\n<li class=\"mobile-list-item\">Root or sudo access</li>\n<li class=\"mobile-list-item\">4GB RAM minimum, 8GB+ recommended for transcoding</li>\n<li class=\"mobile-list-item\">GPU recommended for hardware transcoding</li>\n<li class=\"mobile-list-item\">Storage space for media library</li>\n<li class=\"mobile-list-item\">Plex account (free signup required)</li>\n<h2 id=\"installation\" class=\"mobile-header\">Installation</h2>\n<h3 id=\"ubuntudebian\" class=\"mobile-header\">Ubuntu/Debian</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Update system packages\nsudo apt update &amp;&amp; sudo apt upgrade -y\n\n# Download Plex Media Server\nwget https://downloads.plex.tv/plex-media-server-new/1.32.8.7639-fb6452ebf/debian/plexmediaserver_1.32.8.7639-fb6452ebf_amd64.deb\n\n# Install Plex\nsudo dpkg -i plexmediaserver_*.deb\nsudo apt-get install -f  # Fix any dependency issues\n\n# Enable and start service\nsudo systemctl enable --now plexmediaserver\n\n# Configure firewall\nsudo ufw allow 32400/tcp comment &#039;Plex Media Server&#039;\nsudo ufw allow 1900/udp comment &#039;Plex DLNA&#039;\n\n# Verify installation\nsudo systemctl status plexmediaserver</code></pre>\n      </div>\n    </div>\n<h3 id=\"rhelcentosrocky-linuxalmalinux\" class=\"mobile-header\">RHEL/CentOS/Rocky Linux/AlmaLinux</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Download Plex Media Server\nwget https://downloads.plex.tv/plex-media-server-new/1.32.8.7639-fb6452ebf/redhat/plexmediaserver-1.32.8.7639-fb6452ebf.x86_64.rpm\n\n# Install Plex\nsudo yum localinstall -y plexmediaserver-*.rpm\n\n# Enable and start service\nsudo systemctl enable --now plexmediaserver\n\n# Configure firewall\nsudo firewall-cmd --permanent --add-port=32400/tcp\nsudo firewall-cmd --reload</code></pre>\n      </div>\n    </div>\n<h3 id=\"docker-installation\" class=\"mobile-header\">Docker Installation</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Create Plex directories\nmkdir -p ~/plex/{config,media}\n\n# Run Plex container\ndocker run -d \\\n  --name plex \\\n  --restart unless-stopped \\\n  --net=host \\\n  -e TZ=&quot;America/New_York&quot; \\\n  -e PLEX_CLAIM=&quot;claim-your-token-here&quot; \\\n  -v ~/plex/config:/config \\\n  -v ~/plex/media:/data \\\n  --device /dev/dri:/dev/dri \\\n  plexinc/pms-docker:latest</code></pre>\n      </div>\n    </div>\n<h2 id=\"configuration\" class=\"mobile-header\">Configuration</h2>\n<h3 id=\"media-library-setup\" class=\"mobile-header\">Media Library Setup</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Create media directory structure\nsudo mkdir -p /media/{movies,tv-shows,music}\nsudo chown -R plex:plex /media\nsudo chmod -R 755 /media\n\n# Hardware transcoding setup\nsudo usermod -aG video plex\nls -la /dev/dri/</code></pre>\n      </div>\n    </div>\n<h3 id=\"security-and-backup\" class=\"mobile-header\">Security and Backup</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># NGINX reverse proxy\nsudo tee /etc/nginx/sites-available/plex &gt; /dev/null &lt;&lt;EOF\nserver {\n    listen 443 ssl http2;\n    server_name plex.example.com;\n\n    ssl_certificate /etc/letsencrypt/live/plex.example.com/fullchain.pem;\n    ssl_certificate_key /etc/letsencrypt/live/plex.example.com/privkey.pem;\n\n    location / {\n        proxy_pass http://127.0.0.1:32400;\n        proxy_set_header Host \\$host;\n        proxy_set_header X-Real-IP \\$remote_addr;\n        proxy_set_header X-Forwarded-For \\$proxy_add_x_forwarded_for;\n        proxy_set_header X-Forwarded-Proto \\$scheme;\n    }\n}\nEOF\n\n# Backup strategy\nsudo tee /usr/local/bin/plex-backup.sh &gt; /dev/null &lt;&lt;&#039;EOF&#039;\n#!/bin/bash\nBACKUP_DIR=&quot;/backup/plex&quot;\nDATE=$(date +%Y%m%d_%H%M%S)\n\nmkdir -p ${BACKUP_DIR}\n\nsudo systemctl stop plexmediaserver\nsudo tar -czf ${BACKUP_DIR}/plex-${DATE}.tar.gz -C /var/lib/plexmediaserver .\nsudo systemctl start plexmediaserver\n\necho &quot;Plex backup completed: ${DATE}&quot;\nEOF\n\nsudo chmod +x /usr/local/bin/plex-backup.sh\necho &quot;0 1 * * * root /usr/local/bin/plex-backup.sh&quot; | sudo tee -a /etc/crontab</code></pre>\n      </div>\n    </div>\n<h2 id=\"additional-resources\" class=\"mobile-header\">Additional Resources</h2>\n<li class=\"mobile-list-item\"><a href=\"https://support.plex.tv/\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">Plex Support</a></li>\n<li class=\"mobile-list-item\"><a href=\"https://support.plex.tv/articles/200288586-installation/\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">Plex Installation Guide</a></li>\n<p class=\"mobile-paragraph\">---</p>\n<p class=\"mobile-paragraph\"><strong>Note:</strong> This guide is part of the <a href=\"https://howtomgr.github.io\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">HowToMgr</a> collection.</p>","readTime":"2 min","wordCount":389,"lastBuilt":"2025-09-14T18:12:02.523Z"},{"name":"portainer","displayName":"Portainer","slug":"portainer","description":"Repo for portainer","category":"container","language":null,"stars":0,"forks":0,"topics":[],"githubUrl":"https://github.com/howtomgr/portainer","updatedAt":"2025-09-14T01:30:53Z","createdAt":"2025-09-08T03:14:32Z","readmeRaw":"# Portainer Installation Guide\n\nLightweight management UI for Docker, Docker Swarm, and Kubernetes. Essential tool for container management with enterprise-grade security and multi-environment support.\n\n## Prerequisites\n\n- Linux system (any modern distribution)\n- Docker or Kubernetes cluster\n- Root or sudo access\n- 1GB RAM minimum, 2GB recommended\n- Network connectivity to container runtime\n\n## Installation\n\n### Docker Standalone\n```bash\n# Create Portainer volume\ndocker volume create portainer_data\n\n# Run Portainer Community Edition\ndocker run -d \\\n  --name portainer \\\n  --restart unless-stopped \\\n  -p 8000:8000 \\\n  -p 9443:9443 \\\n  -v /var/run/docker.sock:/var/run/docker.sock \\\n  -v portainer_data:/data \\\n  --security-opt no-new-privileges:true \\\n  portainer/portainer-ce:latest\n\n# Access web interface at https://localhost:9443\n```\n\n### NGINX Security Integration\n```bash\nsudo tee /etc/nginx/sites-available/portainer > /dev/null <<EOF\nserver {\n    listen 443 ssl http2;\n    server_name portainer.example.com;\n\n    ssl_certificate /etc/letsencrypt/live/portainer.example.com/fullchain.pem;\n    ssl_certificate_key /etc/letsencrypt/live/portainer.example.com/privkey.pem;\n\n    location / {\n        proxy_pass https://127.0.0.1:9443;\n        proxy_set_header Host \\$host;\n        proxy_set_header X-Real-IP \\$remote_addr;\n        proxy_set_header X-Forwarded-For \\$proxy_add_x_forwarded_for;\n        proxy_set_header X-Forwarded-Proto \\$scheme;\n        proxy_ssl_verify off;\n    }\n}\nEOF\n\nsudo ln -s /etc/nginx/sites-available/portainer /etc/nginx/sites-enabled/\nsudo nginx -t && sudo systemctl reload nginx\n```\n\n## Additional Resources\n\n- [Portainer Documentation](https://docs.portainer.io/)\n- [Portainer Community](https://www.portainer.io/community)\n\n---\n\n**Note:** This guide is part of the [HowToMgr](https://howtomgr.github.io) collection.","readmeHtml":"<h1 id=\"portainer-installation-guide\" class=\"mobile-header\">Portainer Installation Guide</h1>\n<p class=\"mobile-paragraph\">Lightweight management UI for Docker, Docker Swarm, and Kubernetes. Essential tool for container management with enterprise-grade security and multi-environment support.</p>\n<h2 id=\"prerequisites\" class=\"mobile-header\">Prerequisites</h2>\n<li class=\"mobile-list-item\">Linux system (any modern distribution)</li>\n<li class=\"mobile-list-item\">Docker or Kubernetes cluster</li>\n<li class=\"mobile-list-item\">Root or sudo access</li>\n<li class=\"mobile-list-item\">1GB RAM minimum, 2GB recommended</li>\n<li class=\"mobile-list-item\">Network connectivity to container runtime</li>\n<h2 id=\"installation\" class=\"mobile-header\">Installation</h2>\n<h3 id=\"docker-standalone\" class=\"mobile-header\">Docker Standalone</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Create Portainer volume\ndocker volume create portainer_data\n\n# Run Portainer Community Edition\ndocker run -d \\\n  --name portainer \\\n  --restart unless-stopped \\\n  -p 8000:8000 \\\n  -p 9443:9443 \\\n  -v /var/run/docker.sock:/var/run/docker.sock \\\n  -v portainer_data:/data \\\n  --security-opt no-new-privileges:true \\\n  portainer/portainer-ce:latest\n\n# Access web interface at https://localhost:9443</code></pre>\n      </div>\n    </div>\n<h3 id=\"nginx-security-integration\" class=\"mobile-header\">NGINX Security Integration</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\">sudo tee /etc/nginx/sites-available/portainer &gt; /dev/null &lt;&lt;EOF\nserver {\n    listen 443 ssl http2;\n    server_name portainer.example.com;\n\n    ssl_certificate /etc/letsencrypt/live/portainer.example.com/fullchain.pem;\n    ssl_certificate_key /etc/letsencrypt/live/portainer.example.com/privkey.pem;\n\n    location / {\n        proxy_pass https://127.0.0.1:9443;\n        proxy_set_header Host \\$host;\n        proxy_set_header X-Real-IP \\$remote_addr;\n        proxy_set_header X-Forwarded-For \\$proxy_add_x_forwarded_for;\n        proxy_set_header X-Forwarded-Proto \\$scheme;\n        proxy_ssl_verify off;\n    }\n}\nEOF\n\nsudo ln -s /etc/nginx/sites-available/portainer /etc/nginx/sites-enabled/\nsudo nginx -t &amp;&amp; sudo systemctl reload nginx</code></pre>\n      </div>\n    </div>\n<h2 id=\"additional-resources\" class=\"mobile-header\">Additional Resources</h2>\n<li class=\"mobile-list-item\"><a href=\"https://docs.portainer.io/\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">Portainer Documentation</a></li>\n<li class=\"mobile-list-item\"><a href=\"https://www.portainer.io/community\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">Portainer Community</a></li>\n<p class=\"mobile-paragraph\">---</p>\n<p class=\"mobile-paragraph\"><strong>Note:</strong> This guide is part of the <a href=\"https://howtomgr.github.io\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">HowToMgr</a> collection.</p>","readTime":"1 min","wordCount":184,"lastBuilt":"2025-09-14T18:12:02.233Z"},{"name":"prometheus","displayName":"Prometheus","slug":"prometheus","description":"Repo for prometheus","category":"monitoring","language":null,"stars":0,"forks":0,"topics":[],"githubUrl":"https://github.com/howtomgr/prometheus","updatedAt":"2025-09-14T01:30:55Z","createdAt":"2025-09-08T03:14:43Z","readmeRaw":"# Prometheus Installation Guide\n\nPrometheus is a free and open-source systems monitoring and alerting toolkit originally built at SoundCloud. Now a standalone project and part of the Cloud Native Computing Foundation, it features a multi-dimensional data model with time series data identified by metric name and key/value pairs, PromQL query language, and powerful alerting capabilities. It serves as a FOSS alternative to commercial monitoring solutions like Datadog, New Relic, or Splunk, offering enterprise-grade monitoring and alerting without licensing costs.\n\n## Prerequisites\n\n- **Hardware Requirements**:\n  - CPU: 2 cores minimum (4+ cores recommended for production)\n  - RAM: 2GB minimum (8GB+ recommended for production)\n  - Storage: 20GB minimum (100GB+ SSD recommended for metrics retention)\n  - Network: Stable connectivity for scraping targets\n- **Operating System**: \n  - Linux: Any modern distribution with kernel 2.6.32+\n  - macOS: 10.12+ (Sierra or newer)\n  - Windows: Windows Server 2016+ or Windows 10\n  - FreeBSD: 11.0+\n- **Network Requirements**:\n  - Port 9090 (Prometheus web UI and API)\n  - Port 9093 (Alertmanager)\n  - Port 9094 (Alertmanager cluster)\n  - Various ports for exporters (9100 for node_exporter, etc.)\n- **Dependencies**:\n  - No runtime dependencies (Go binary)\n  - Optional: Grafana for visualization\n  - Optional: Alertmanager for alerting\n- **System Access**: root or sudo privileges for installation\n\n## Installation\n\n### RHEL/CentOS/Rocky Linux/AlmaLinux\n\n```bash\n# Create prometheus user\nsudo useradd --no-create-home --shell /bin/false prometheus\n\n# Create directories\nsudo mkdir -p /etc/prometheus /var/lib/prometheus\nsudo chown prometheus:prometheus /etc/prometheus /var/lib/prometheus\n\n# Download latest Prometheus\nPROMETHEUS_VERSION=\"2.48.0\"\ncd /tmp\nwget https://github.com/prometheus/prometheus/releases/download/v${PROMETHEUS_VERSION}/prometheus-${PROMETHEUS_VERSION}.linux-amd64.tar.gz\ntar xzf prometheus-${PROMETHEUS_VERSION}.linux-amd64.tar.gz\n\n# Install binaries\ncd prometheus-${PROMETHEUS_VERSION}.linux-amd64\nsudo cp prometheus promtool /usr/local/bin/\nsudo chown prometheus:prometheus /usr/local/bin/prometheus /usr/local/bin/promtool\n\n# Copy configuration files\nsudo cp -r consoles console_libraries /etc/prometheus/\nsudo chown -R prometheus:prometheus /etc/prometheus/consoles /etc/prometheus/console_libraries\n\n# Create basic configuration\nsudo tee /etc/prometheus/prometheus.yml > /dev/null <<EOF\nglobal:\n  scrape_interval: 15s\n  evaluation_interval: 15s\n\nscrape_configs:\n  - job_name: 'prometheus'\n    static_configs:\n      - targets: ['localhost:9090']\nEOF\n\nsudo chown prometheus:prometheus /etc/prometheus/prometheus.yml\n```\n\n### Debian/Ubuntu\n\n```bash\n# Method 1: From official repository\nwget -O prometheus.tar.gz https://github.com/prometheus/prometheus/releases/download/v2.48.0/prometheus-2.48.0.linux-amd64.tar.gz\ntar xzf prometheus.tar.gz\ncd prometheus-*\n\n# Create user and directories\nsudo useradd --no-create-home --shell /bin/false prometheus\nsudo mkdir -p /etc/prometheus /var/lib/prometheus\nsudo cp prometheus promtool /usr/local/bin/\nsudo cp -r consoles console_libraries /etc/prometheus/\nsudo chown -R prometheus:prometheus /etc/prometheus /var/lib/prometheus /usr/local/bin/prometheus /usr/local/bin/promtool\n\n# Method 2: Using snap (simpler but less flexible)\nsudo snap install prometheus\n\n# Method 3: From community packages (older version)\nsudo apt update\nsudo apt install -y prometheus\n```\n\n### Arch Linux\n\n```bash\n# Install from official repositories\nsudo pacman -S prometheus\n\n# Optional: Install exporters\nsudo pacman -S prometheus-node-exporter\nsudo pacman -S prometheus-blackbox-exporter\n\n# Enable and start service\nsudo systemctl enable --now prometheus\n\n# For latest version from AUR\nyay -S prometheus-bin\n\n# Configuration location: /etc/prometheus/prometheus.yml\n```\n\n### Alpine Linux\n\n```bash\n# Install Prometheus\napk add --no-cache prometheus prometheus-node-exporter\n\n# Create prometheus user if not exists\nadduser -D -H -s /sbin/nologin prometheus\n\n# Create directories\nmkdir -p /etc/prometheus /var/lib/prometheus\nchown prometheus:prometheus /etc/prometheus /var/lib/prometheus\n\n# Enable and start service\nrc-update add prometheus default\nrc-service prometheus start\n\n# For Alertmanager\napk add --no-cache alertmanager\n```\n\n### openSUSE/SLES\n\n```bash\n# openSUSE Leap/Tumbleweed\nsudo zypper install -y prometheus\n\n# For latest version, build from source\nsudo zypper install -y go\ngo install github.com/prometheus/prometheus/cmd/prometheus@latest\nsudo cp ~/go/bin/prometheus /usr/local/bin/\n\n# SLES 15\n# May need to add monitoring repository\nsudo SUSEConnect -p sle-module-containers/15.5/x86_64\nsudo zypper install -y prometheus\n\n# Create service user\nsudo useradd --no-create-home --shell /bin/false prometheus\n\n# Enable and start service\nsudo systemctl enable --now prometheus\n```\n\n### macOS\n\n```bash\n# Using Homebrew\nbrew install prometheus\n\n# Start as service\nbrew services start prometheus\n\n# Or run manually\nprometheus --config.file=/usr/local/etc/prometheus.yml\n\n# Install exporters\nbrew install prometheus-node-exporter\n\n# Configuration location: /usr/local/etc/prometheus.yml\n# Alternative: /opt/homebrew/etc/prometheus.yml (Apple Silicon)\n```\n\n### FreeBSD\n\n```bash\n# Using pkg\npkg install prometheus\npkg install node_exporter\n\n# Using ports\ncd /usr/ports/net-mgmt/prometheus\nmake install clean\n\n# Enable in rc.conf\necho 'prometheus_enable=\"YES\"' >> /etc/rc.conf\necho 'node_exporter_enable=\"YES\"' >> /etc/rc.conf\n\n# Start services\nservice prometheus start\nservice node_exporter start\n\n# Configuration location: /usr/local/etc/prometheus.yml\n```\n\n### Windows\n\n```powershell\n# Method 1: Using Chocolatey\nchoco install prometheus\n\n# Method 2: Using Scoop\nscoop bucket add extras\nscoop install prometheus\n\n# Method 3: Manual installation\n# Download from https://github.com/prometheus/prometheus/releases\n# Extract to C:\\prometheus\n# Create C:\\prometheus\\prometheus.yml\n\n# Install as Windows service using NSSM\nnssm install prometheus C:\\prometheus\\prometheus.exe\nnssm set prometheus AppParameters \"--config.file=C:\\prometheus\\prometheus.yml --storage.tsdb.path=C:\\prometheus\\data\"\nnssm set prometheus AppDirectory C:\\prometheus\nnssm start prometheus\n\n# Or use Windows Service Wrapper\n# Download WinSW from https://github.com/winsw/winsw/releases\n```\n\n## Initial Configuration\n\n### First-Run Setup\n\n1. **Create Prometheus user** (if not created by package):\n```bash\n# Linux systems\nsudo useradd -r -d /var/lib/prometheus -s /sbin/nologin -c \"Prometheus monitoring\" prometheus\n```\n\n2. **Default configuration locations**:\n- RHEL/CentOS/Rocky/AlmaLinux: `/etc/prometheus/prometheus.yml`\n- Debian/Ubuntu: `/etc/prometheus/prometheus.yml`\n- Arch Linux: `/etc/prometheus/prometheus.yml`\n- Alpine Linux: `/etc/prometheus/prometheus.yml`\n- openSUSE/SLES: `/etc/prometheus/prometheus.yml`\n- macOS: `/usr/local/etc/prometheus.yml`\n- FreeBSD: `/usr/local/etc/prometheus.yml`\n- Windows: `C:\\prometheus\\prometheus.yml`\n\n3. **Essential settings to change**:\n\n```yaml\n# /etc/prometheus/prometheus.yml\nglobal:\n  scrape_interval: 15s       # How often to scrape targets\n  evaluation_interval: 15s   # How often to evaluate rules\n  external_labels:          # Labels to add to all metrics\n    cluster: 'production'\n    replica: 'prometheus-1'\n\n# Alertmanager configuration\nalerting:\n  alertmanagers:\n    - static_configs:\n        - targets:\n          - localhost:9093\n\n# Load rules once and periodically evaluate them\nrule_files:\n  - \"rules/*.yml\"\n\n# Scrape configurations\nscrape_configs:\n  # Prometheus itself\n  - job_name: 'prometheus'\n    static_configs:\n      - targets: ['localhost:9090']\n\n  # Node exporter for system metrics\n  - job_name: 'node'\n    static_configs:\n      - targets: ['localhost:9100']\n```\n\n### Testing Initial Setup\n\n```bash\n# Test configuration syntax\npromtool check config /etc/prometheus/prometheus.yml\n\n# Start Prometheus (if not using systemd)\nprometheus --config.file=/etc/prometheus/prometheus.yml\n\n# Verify Prometheus is running\ncurl http://localhost:9090/-/healthy\n\n# Check targets\ncurl http://localhost:9090/api/v1/targets\n\n# Run a test query\ncurl http://localhost:9090/api/v1/query?query=up\n```\n\n**WARNING:** Never expose Prometheus to the public internet without authentication!\n\n## Service Management\n\n### systemd (RHEL, Debian, Ubuntu, Arch, openSUSE)\n\n```bash\n# Create systemd service file\nsudo tee /etc/systemd/system/prometheus.service <<EOF\n[Unit]\nDescription=Prometheus\nWants=network-online.target\nAfter=network-online.target\n\n[Service]\nUser=prometheus\nGroup=prometheus\nType=simple\nRestart=always\nRestartSec=5s\nExecStart=/usr/local/bin/prometheus \\\n    --config.file /etc/prometheus/prometheus.yml \\\n    --storage.tsdb.path /var/lib/prometheus/ \\\n    --web.console.libraries=/etc/prometheus/console_libraries \\\n    --web.console.templates=/etc/prometheus/consoles \\\n    --web.enable-lifecycle\n\n[Install]\nWantedBy=multi-user.target\nEOF\n\n# Reload systemd and start Prometheus\nsudo systemctl daemon-reload\nsudo systemctl enable prometheus\nsudo systemctl start prometheus\n\n# Management commands\nsudo systemctl stop prometheus\nsudo systemctl restart prometheus\nsudo systemctl status prometheus\n\n# View logs\nsudo journalctl -u prometheus -f\n```\n\n### OpenRC (Alpine Linux)\n\n```bash\n# Create init script\nsudo tee /etc/init.d/prometheus <<'EOF'\n#!/sbin/openrc-run\n\nname=\"prometheus\"\ndescription=\"Prometheus monitoring system\"\ncommand=\"/usr/bin/prometheus\"\ncommand_args=\"--config.file=/etc/prometheus/prometheus.yml --storage.tsdb.path=/var/lib/prometheus/\"\ncommand_user=\"prometheus:prometheus\"\npidfile=\"/run/${RC_SVCNAME}.pid\"\nstart_stop_daemon_args=\"--background --make-pidfile\"\n\ndepend() {\n    need net\n    after firewall\n}\nEOF\n\nsudo chmod +x /etc/init.d/prometheus\n\n# Enable and start\nrc-update add prometheus default\nrc-service prometheus start\n\n# Management commands\nrc-service prometheus stop\nrc-service prometheus restart\nrc-service prometheus status\n```\n\n### rc.d (FreeBSD)\n\n```bash\n# Enable in /etc/rc.conf\necho 'prometheus_enable=\"YES\"' >> /etc/rc.conf\necho 'prometheus_config=\"/usr/local/etc/prometheus.yml\"' >> /etc/rc.conf\necho 'prometheus_data_dir=\"/var/db/prometheus\"' >> /etc/rc.conf\n\n# Start Prometheus\nservice prometheus start\n\n# Management commands\nservice prometheus stop\nservice prometheus restart\nservice prometheus status\nservice prometheus reload\n```\n\n### launchd (macOS)\n\n```bash\n# Using Homebrew services\nbrew services start prometheus\nbrew services stop prometheus\nbrew services restart prometheus\n\n# Check status\nbrew services list | grep prometheus\n\n# Manual launchd management\nsudo launchctl load /Library/LaunchDaemons/homebrew.mxcl.prometheus.plist\nsudo launchctl unload /Library/LaunchDaemons/homebrew.mxcl.prometheus.plist\n```\n\n### Windows Service Manager\n\n```powershell\n# Using NSSM\nnssm start prometheus\nnssm stop prometheus\nnssm restart prometheus\n\n# Using native Windows commands\nStart-Service prometheus\nStop-Service prometheus\nRestart-Service prometheus\n\n# Check status\nGet-Service prometheus\n\n# View logs\nGet-EventLog -LogName Application -Source prometheus -Newest 50\n```\n\n## Advanced Configuration\n\n### Storage Configuration\n\n```yaml\n# Advanced storage settings via command-line flags\n--storage.tsdb.path=/var/lib/prometheus/\n--storage.tsdb.retention.time=30d\n--storage.tsdb.retention.size=50GB\n--storage.tsdb.wal-compression\n--storage.tsdb.max-block-duration=2h\n--storage.tsdb.min-block-duration=2h\n```\n\n### High Availability Setup\n\n```yaml\n# prometheus.yml for HA setup\nglobal:\n  scrape_interval: 15s\n  evaluation_interval: 15s\n  external_labels:\n    cluster: 'production'\n    replica: '1'  # Different for each replica\n\n# Remote write for long-term storage\nremote_write:\n  - url: \"http://thanos-receive:19291/api/v1/receive\"\n    queue_config:\n      max_samples_per_send: 10000\n      batch_send_deadline: 5s\n      max_retries: 3\n\n# Remote read for querying historical data\nremote_read:\n  - url: \"http://thanos-query:9090/api/v1/read\"\n    read_recent: true\n```\n\n### Service Discovery\n\n```yaml\n# Kubernetes service discovery\nscrape_configs:\n  - job_name: 'kubernetes-pods'\n    kubernetes_sd_configs:\n      - role: pod\n    relabel_configs:\n      - source_labels: [__meta_kubernetes_pod_annotation_prometheus_io_scrape]\n        action: keep\n        regex: true\n      - source_labels: [__meta_kubernetes_pod_annotation_prometheus_io_path]\n        action: replace\n        target_label: __metrics_path__\n        regex: (.+)\n\n# File-based service discovery\n  - job_name: 'file-sd'\n    file_sd_configs:\n      - files:\n        - '/etc/prometheus/targets/*.yml'\n        refresh_interval: 5m\n\n# DNS service discovery\n  - job_name: 'dns-sd'\n    dns_sd_configs:\n      - names:\n        - '_prometheus._tcp.example.com'\n        type: 'SRV'\n        refresh_interval: 30s\n```\n\n## Reverse Proxy Setup\n\n### nginx Configuration\n\n```nginx\n# /etc/nginx/sites-available/prometheus\nupstream prometheus {\n    server 127.0.0.1:9090;\n}\n\nserver {\n    listen 80;\n    server_name prometheus.example.com;\n    return 301 https://$server_name$request_uri;\n}\n\nserver {\n    listen 443 ssl http2;\n    server_name prometheus.example.com;\n\n    ssl_certificate /etc/letsencrypt/live/prometheus.example.com/fullchain.pem;\n    ssl_certificate_key /etc/letsencrypt/live/prometheus.example.com/privkey.pem;\n\n    # Security headers\n    add_header Strict-Transport-Security \"max-age=63072000\" always;\n    add_header X-Frame-Options \"DENY\" always;\n    add_header X-Content-Type-Options \"nosniff\" always;\n\n    location / {\n        proxy_pass http://prometheus;\n        proxy_set_header Host $host;\n        proxy_set_header X-Real-IP $remote_addr;\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n        proxy_set_header X-Forwarded-Proto $scheme;\n        \n        # Basic authentication\n        auth_basic \"Prometheus\";\n        auth_basic_user_file /etc/nginx/.htpasswd;\n    }\n}\n```\n\n### Apache Configuration\n\n```apache\n# /etc/apache2/sites-available/prometheus.conf\n<VirtualHost *:443>\n    ServerName prometheus.example.com\n    \n    SSLEngine on\n    SSLCertificateFile /etc/letsencrypt/live/prometheus.example.com/fullchain.pem\n    SSLCertificateKeyFile /etc/letsencrypt/live/prometheus.example.com/privkey.pem\n    \n    ProxyPreserveHost On\n    ProxyPass / http://localhost:9090/\n    ProxyPassReverse / http://localhost:9090/\n    \n    <Location />\n        AuthType Basic\n        AuthName \"Prometheus\"\n        AuthUserFile /etc/apache2/.htpasswd\n        Require valid-user\n    </Location>\n</VirtualHost>\n```\n\n### Caddy Configuration\n\n```caddyfile\nprometheus.example.com {\n    reverse_proxy localhost:9090\n    \n    basicauth {\n        admin $2a$14$xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\n    }\n    \n    header {\n        Strict-Transport-Security \"max-age=63072000\"\n        X-Frame-Options \"DENY\"\n        X-Content-Type-Options \"nosniff\"\n    }\n}\n```\n\n### HAProxy Configuration\n\n```haproxy\nfrontend prometheus_frontend\n    bind *:443 ssl crt /etc/haproxy/certs/prometheus.pem\n    mode http\n    option httplog\n    \n    # Basic auth\n    acl auth_ok http_auth(users)\n    http-request auth realm Prometheus if !auth_ok\n    \n    default_backend prometheus_backend\n\nbackend prometheus_backend\n    mode http\n    balance roundrobin\n    option httpchk GET /-/healthy\n    server prometheus1 127.0.0.1:9090 check\n```\n\n## Security Configuration\n\n### Authentication with Basic Auth\n\n```bash\n# Generate password file\nhtpasswd -c /etc/prometheus/.htpasswd admin\n\n# Configure Prometheus with basic auth\nsudo tee /etc/prometheus/web.yml <<EOF\nbasic_auth_users:\n  admin: $2y$10$hashed_password_here\nEOF\n\n# Update systemd service to use web config\nExecStart=/usr/local/bin/prometheus \\\n    --config.file=/etc/prometheus/prometheus.yml \\\n    --web.config.file=/etc/prometheus/web.yml\n```\n\n### TLS Configuration\n\n```yaml\n# web.yml for TLS\ntls_server_config:\n  cert_file: /etc/prometheus/prometheus.crt\n  key_file: /etc/prometheus/prometheus.key\n  client_auth_type: RequireAndVerifyClientCert\n  client_ca_file: /etc/prometheus/ca.crt\n  min_version: TLS12\n  cipher_suites:\n    - TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384\n    - TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384\n```\n\n### Firewall Rules\n\n```bash\n# UFW (Ubuntu/Debian)\nsudo ufw allow from 192.168.1.0/24 to any port 9090\nsudo ufw allow from 192.168.1.0/24 to any port 9093\nsudo ufw reload\n\n# firewalld (RHEL/CentOS/openSUSE)\nsudo firewall-cmd --permanent --new-zone=prometheus\nsudo firewall-cmd --permanent --zone=prometheus --add-source=192.168.1.0/24\nsudo firewall-cmd --permanent --zone=prometheus --add-port=9090/tcp\nsudo firewall-cmd --permanent --zone=prometheus --add-port=9093/tcp\nsudo firewall-cmd --reload\n\n# iptables\nsudo iptables -A INPUT -s 192.168.1.0/24 -p tcp --dport 9090 -j ACCEPT\nsudo iptables -A INPUT -s 192.168.1.0/24 -p tcp --dport 9093 -j ACCEPT\nsudo iptables-save > /etc/iptables/rules.v4\n\n# pf (FreeBSD)\n# Add to /etc/pf.conf\npass in on $ext_if proto tcp from 192.168.1.0/24 to any port 9090\npass in on $ext_if proto tcp from 192.168.1.0/24 to any port 9093\n\n# Windows Firewall\nNew-NetFirewallRule -DisplayName \"Prometheus\" -Direction Inbound -Protocol TCP -LocalPort 9090 -RemoteAddress 192.168.1.0/24 -Action Allow\n```\n\n### Security Best Practices\n\n```bash\n# Restrict Prometheus data directory permissions\nsudo chmod 700 /var/lib/prometheus\nsudo chown -R prometheus:prometheus /var/lib/prometheus\n\n# Disable admin API endpoints in production\n# Remove --web.enable-admin-api flag\n\n# Enable CORS restrictions\n--web.cors.origin=\"https://grafana.example.com\"\n\n# Set read timeout\n--web.read-timeout=5m\n\n# Limit concurrent queries\n--query.max-concurrency=20\n```\n\n## Database Setup\n\nPrometheus uses its own time-series database (TSDB) and doesn't require external database setup. However, you can configure remote storage:\n\n### Remote Storage Options\n\n```yaml\n# PostgreSQL with TimescaleDB\nremote_write:\n  - url: \"http://prometheus-postgresql-adapter:9201/write\"\nremote_read:\n  - url: \"http://prometheus-postgresql-adapter:9201/read\"\n\n# InfluxDB\nremote_write:\n  - url: \"http://influxdb:8086/api/v1/prom/write?db=prometheus\"\nremote_read:\n  - url: \"http://influxdb:8086/api/v1/prom/read?db=prometheus\"\n\n# Cortex/Thanos\nremote_write:\n  - url: \"http://cortex:9009/api/prom/push\"\n    queue_config:\n      capacity: 10000\n      max_samples_per_send: 3000\n```\n\n### Storage Sizing\n\n```bash\n# Calculate storage requirements\n# Formula: retention_time * ingested_samples_per_second * bytes_per_sample\n# Example: 30 days * 100k samples/sec * 2 bytes = ~520GB\n\n# Monitor storage usage\ncurl http://localhost:9090/api/v1/query?query=prometheus_tsdb_storage_blocks_bytes\n\n# Configure retention\n--storage.tsdb.retention.time=30d\n--storage.tsdb.retention.size=500GB\n```\n\n## Performance Optimization\n\n### System Tuning\n\n```bash\n# Increase file descriptor limits\nsudo tee -a /etc/security/limits.conf <<EOF\nprometheus soft nofile 65535\nprometheus hard nofile 65535\nEOF\n\n# Kernel parameters for better performance\nsudo tee -a /etc/sysctl.conf <<EOF\n# Prometheus optimizations\nvm.max_map_count = 262144\nfs.file-max = 65535\nnet.core.somaxconn = 32768\nnet.ipv4.tcp_max_syn_backlog = 8192\nEOF\n\nsudo sysctl -p\n```\n\n### Query Optimization\n\n```yaml\n# Recording rules for expensive queries\ngroups:\n  - name: aggregations\n    interval: 30s\n    rules:\n      - record: node:cpu_utilization:avg1m\n        expr: 100 - (avg by(instance) (irate(node_cpu_seconds_total{mode=\"idle\"}[1m])) * 100)\n      \n      - record: node:memory_utilization:ratio\n        expr: 1 - (node_memory_MemAvailable_bytes / node_memory_MemTotal_bytes)\n```\n\n### Storage Optimization\n\n```bash\n# Enable compression\n--storage.tsdb.wal-compression\n\n# Optimize block duration for your workload\n--storage.tsdb.max-block-duration=2h\n--storage.tsdb.min-block-duration=2h\n\n# Increase sample buffer\n--storage.tsdb.head-chunks-write-queue-size=1000000\n```\n\n## Monitoring\n\n### Built-in Metrics\n\n```bash\n# Prometheus self-monitoring queries\n# Storage usage\nprometheus_tsdb_storage_blocks_bytes\n\n# Ingestion rate\nrate(prometheus_tsdb_head_samples_appended_total[5m])\n\n# Query performance\nhistogram_quantile(0.99, rate(prometheus_engine_query_duration_seconds_bucket[5m]))\n\n# Active time series\nprometheus_tsdb_head_series\n\n# Memory usage\nprocess_resident_memory_bytes\n```\n\n### Alerting Rules\n\n```yaml\n# /etc/prometheus/rules/prometheus.yml\ngroups:\n  - name: prometheus\n    rules:\n      - alert: PrometheusDown\n        expr: up{job=\"prometheus\"} == 0\n        for: 5m\n        labels:\n          severity: critical\n        annotations:\n          summary: \"Prometheus is down\"\n          \n      - alert: PrometheusStorageSpace\n        expr: prometheus_tsdb_storage_blocks_bytes / 1024 / 1024 / 1024 > 100\n        for: 5m\n        labels:\n          severity: warning\n        annotations:\n          summary: \"Prometheus storage exceeds 100GB\"\n          \n      - alert: PrometheusHighMemory\n        expr: process_resident_memory_bytes / 1024 / 1024 / 1024 > 8\n        for: 10m\n        labels:\n          severity: warning\n        annotations:\n          summary: \"Prometheus memory usage exceeds 8GB\"\n```\n\n### External Monitoring\n\n```bash\n# Blackbox exporter configuration for monitoring Prometheus\nmodules:\n  prometheus_health:\n    prober: http\n    timeout: 5s\n    http:\n      valid_status_codes: [200]\n      method: GET\n      path: /-/healthy\n      \n  prometheus_ready:\n    prober: http\n    timeout: 5s\n    http:\n      valid_status_codes: [200]\n      method: GET\n      path: /-/ready\n```\n\n## Backup and Restore\n\n### Backup Procedures\n\n```bash\n#!/bin/bash\n# backup-prometheus.sh\n\nBACKUP_DIR=\"/backup/prometheus/$(date +%Y%m%d_%H%M%S)\"\nmkdir -p \"$BACKUP_DIR\"\n\n# Option 1: Using snapshots (requires --web.enable-lifecycle)\ncurl -XPOST http://localhost:9090/api/v1/admin/tsdb/snapshot\nSNAPSHOT=$(curl -s http://localhost:9090/api/v1/admin/tsdb/snapshot | jq -r .data.name)\ncp -r /var/lib/prometheus/snapshots/$SNAPSHOT \"$BACKUP_DIR/data\"\n\n# Option 2: Direct file backup (requires stopping Prometheus)\nsystemctl stop prometheus\ntar czf \"$BACKUP_DIR/prometheus-data.tar.gz\" -C /var/lib/prometheus .\nsystemctl start prometheus\n\n# Backup configuration\ntar czf \"$BACKUP_DIR/prometheus-config.tar.gz\" -C /etc prometheus\n\n# Backup to remote storage\n# aws s3 cp \"$BACKUP_DIR\" s3://backups/prometheus/ --recursive\n# rsync -avz \"$BACKUP_DIR\" backup-server:/backups/prometheus/\n\necho \"Backup completed: $BACKUP_DIR\"\n```\n\n### Restore Procedures\n\n```bash\n#!/bin/bash\n# restore-prometheus.sh\n\nBACKUP_DIR=\"$1\"\nif [ -z \"$BACKUP_DIR\" ]; then\n    echo \"Usage: $0 <backup-directory>\"\n    exit 1\nfi\n\n# Stop Prometheus\nsystemctl stop prometheus\n\n# Restore data\nrm -rf /var/lib/prometheus/*\ntar xzf \"$BACKUP_DIR/prometheus-data.tar.gz\" -C /var/lib/prometheus\nchown -R prometheus:prometheus /var/lib/prometheus\n\n# Restore configuration\ntar xzf \"$BACKUP_DIR/prometheus-config.tar.gz\" -C /etc\nchown -R prometheus:prometheus /etc/prometheus\n\n# Start Prometheus\nsystemctl start prometheus\n\necho \"Restore completed from: $BACKUP_DIR\"\n```\n\n### Automated Backup\n\n```bash\n# Create cron job for daily backups\necho \"0 2 * * * /usr/local/bin/backup-prometheus.sh\" | sudo tee -a /etc/crontab\n\n# Backup retention script\nfind /backup/prometheus -type d -mtime +30 -exec rm -rf {} \\; 2>/dev/null\n```\n\n## Troubleshooting\n\n### Common Issues\n\n1. **High memory usage**:\n```bash\n# Check cardinality\ncurl -s http://localhost:9090/api/v1/label/__name__/values | jq -r '.data[]' | wc -l\n\n# Find high cardinality metrics\ntopk(10, count by (__name__)({__name__=~\".+\"}))\n\n# Reduce memory usage\n--storage.tsdb.retention.time=15d  # Reduce retention\n--query.max-samples=50000000       # Limit query samples\n```\n\n2. **Slow queries**:\n```bash\n# Enable query logging\n--log.queries-longer-than=10s\n\n# Check slow queries\ncurl 'http://localhost:9090/api/v1/query?query=up&stats=all' | jq .stats\n\n# Add recording rules for expensive queries\n```\n\n3. **Storage issues**:\n```bash\n# Check disk space\ndf -h /var/lib/prometheus\n\n# Clean up old blocks\npromtool tsdb clean /var/lib/prometheus\n\n# Analyze TSDB\npromtool tsdb analyze /var/lib/prometheus\n```\n\n4. **Scraping failures**:\n```bash\n# Check target status\ncurl http://localhost:9090/api/v1/targets | jq '.data.activeTargets[] | select(.health != \"up\")'\n\n# Debug specific target\ncurl -v http://target-host:9100/metrics\n\n# Check Prometheus logs\njournalctl -u prometheus -f | grep \"error\"\n```\n\n### Debug Mode\n\n```bash\n# Enable debug logging\n--log.level=debug\n\n# Enable query logging\n--log.queries-longer-than=0s\n\n# Profile Prometheus\ncurl http://localhost:9090/debug/pprof/profile?seconds=30 > profile.out\ngo tool pprof profile.out\n```\n\n## Maintenance\n\n### Update Procedures\n\n```bash\n# RHEL/CentOS/Rocky/AlmaLinux\n# Download new version\nPROMETHEUS_VERSION=\"2.49.0\"\nwget https://github.com/prometheus/prometheus/releases/download/v${PROMETHEUS_VERSION}/prometheus-${PROMETHEUS_VERSION}.linux-amd64.tar.gz\n\n# Backup current installation\ncp /usr/local/bin/prometheus /usr/local/bin/prometheus.backup\n\n# Update binaries\ntar xzf prometheus-${PROMETHEUS_VERSION}.linux-amd64.tar.gz\ncd prometheus-${PROMETHEUS_VERSION}.linux-amd64\nsudo systemctl stop prometheus\nsudo cp prometheus promtool /usr/local/bin/\nsudo systemctl start prometheus\n\n# Debian/Ubuntu\n# Similar process for manual installation\n# For snap: sudo snap refresh prometheus\n\n# Arch Linux\nsudo pacman -Syu prometheus\n\n# Alpine Linux\napk upgrade prometheus\n\n# openSUSE\nsudo zypper update prometheus\n\n# FreeBSD\npkg upgrade prometheus\n\n# macOS\nbrew upgrade prometheus\n\n# Windows\n# Update using package manager or manual download\n```\n\n### Health Checks\n\n```bash\n#!/bin/bash\n# prometheus-health-check.sh\n\n# Check if Prometheus is healthy\nif ! curl -f -s http://localhost:9090/-/healthy > /dev/null; then\n    echo \"CRITICAL: Prometheus is not healthy\"\n    exit 2\nfi\n\n# Check if Prometheus is ready\nif ! curl -f -s http://localhost:9090/-/ready > /dev/null; then\n    echo \"WARNING: Prometheus is not ready\"\n    exit 1\nfi\n\n# Check storage space\nUSED_PERCENT=$(df /var/lib/prometheus | awk 'NR==2 {print $5}' | sed 's/%//')\nif [ \"$USED_PERCENT\" -gt 85 ]; then\n    echo \"WARNING: Storage usage is ${USED_PERCENT}%\"\n    exit 1\nfi\n\n# Check for failed targets\nFAILED_TARGETS=$(curl -s http://localhost:9090/api/v1/targets | jq '[.data.activeTargets[] | select(.health != \"up\")] | length')\nif [ \"$FAILED_TARGETS\" -gt 0 ]; then\n    echo \"WARNING: $FAILED_TARGETS targets are down\"\n    exit 1\nfi\n\necho \"OK: Prometheus is healthy\"\nexit 0\n```\n\n### Cleanup Tasks\n\n```bash\n# Remove old snapshots\nfind /var/lib/prometheus/snapshots -type d -mtime +7 -exec rm -rf {} \\; 2>/dev/null\n\n# Compact TSDB\npromtool tsdb compact /var/lib/prometheus\n\n# Clean WAL\npromtool tsdb clean /var/lib/prometheus\n\n# Remove old backups\nfind /backup/prometheus -type d -mtime +30 -exec rm -rf {} \\; 2>/dev/null\n```\n\n## Integration Examples\n\n### Grafana Integration\n\n```bash\n# Add Prometheus datasource via API\ncurl -X POST http://admin:admin@localhost:3000/api/datasources \\\n  -H 'Content-Type: application/json' \\\n  -d '{\n    \"name\": \"Prometheus\",\n    \"type\": \"prometheus\",\n    \"url\": \"http://localhost:9090\",\n    \"access\": \"proxy\",\n    \"isDefault\": true\n  }'\n```\n\n### Alertmanager Integration\n\n```yaml\n# alertmanager.yml\nglobal:\n  resolve_timeout: 5m\n\nroute:\n  group_by: ['alertname']\n  group_wait: 10s\n  group_interval: 10s\n  repeat_interval: 1h\n  receiver: 'web.hook'\n\nreceivers:\n  - name: 'web.hook'\n    webhook_configs:\n      - url: 'http://localhost:5001/'\n```\n\n### Application Instrumentation\n\n```python\n# Python example\nfrom prometheus_client import Counter, Histogram, Gauge, start_http_server\nimport time\n\n# Create metrics\nREQUEST_COUNT = Counter('app_requests_total', 'Total requests', ['method', 'endpoint'])\nREQUEST_LATENCY = Histogram('app_request_latency_seconds', 'Request latency')\nACTIVE_USERS = Gauge('app_active_users', 'Active users')\n\n# Use in application\n@REQUEST_LATENCY.time()\ndef process_request():\n    REQUEST_COUNT.labels(method='GET', endpoint='/api').inc()\n    ACTIVE_USERS.set(42)\n    time.sleep(0.1)\n\n# Start metrics server\nstart_http_server(8000)\n```\n\n```javascript\n// Node.js example\nconst prometheus = require('prom-client');\nconst express = require('express');\n\n// Create metrics\nconst httpRequestDuration = new prometheus.Histogram({\n  name: 'http_request_duration_seconds',\n  help: 'Duration of HTTP requests in seconds',\n  labelNames: ['method', 'route', 'status']\n});\n\nconst app = express();\n\n// Middleware to track metrics\napp.use((req, res, next) => {\n  const end = httpRequestDuration.startTimer();\n  res.on('finish', () => {\n    end({ method: req.method, route: req.path, status: res.statusCode });\n  });\n  next();\n});\n\n// Metrics endpoint\napp.get('/metrics', async (req, res) => {\n  res.set('Content-Type', prometheus.register.contentType);\n  res.end(await prometheus.register.metrics());\n});\n```\n\n```go\n// Go example\npackage main\n\nimport (\n    \"net/http\"\n    \"github.com/prometheus/client_golang/prometheus\"\n    \"github.com/prometheus/client_golang/prometheus/promhttp\"\n)\n\nvar (\n    httpRequests = prometheus.NewCounterVec(\n        prometheus.CounterOpts{\n            Name: \"http_requests_total\",\n            Help: \"Total number of HTTP requests\",\n        },\n        []string{\"method\", \"endpoint\"},\n    )\n)\n\nfunc init() {\n    prometheus.MustRegister(httpRequests)\n}\n\nfunc main() {\n    http.Handle(\"/metrics\", promhttp.Handler())\n    http.HandleFunc(\"/\", func(w http.ResponseWriter, r *http.Request) {\n        httpRequests.WithLabelValues(r.Method, r.URL.Path).Inc()\n        w.Write([]byte(\"Hello World\"))\n    })\n    http.ListenAndServe(\":8080\", nil)\n}\n```\n\n## Additional Resources\n\n- [Official Documentation](https://prometheus.io/docs/)\n- [GitHub Repository](https://github.com/prometheus/prometheus)\n- [PromQL Documentation](https://prometheus.io/docs/prometheus/latest/querying/basics/)\n- [Best Practices](https://prometheus.io/docs/practices/)\n- [Awesome Prometheus](https://github.com/roaldnefs/awesome-prometheus)\n- [Prometheus Operator](https://github.com/prometheus-operator/prometheus-operator)\n- [Exporters](https://prometheus.io/docs/instrumenting/exporters/)\n- [Community](https://prometheus.io/community/)\n\n---\n\n**Note:** This guide is part of the [HowToMgr](https://howtomgr.github.io) collection. Always refer to official documentation for the most up-to-date information.","readmeHtml":"<h1 id=\"prometheus-installation-guide\" class=\"mobile-header\">Prometheus Installation Guide</h1>\n<p class=\"mobile-paragraph\">Prometheus is a free and open-source systems monitoring and alerting toolkit originally built at SoundCloud. Now a standalone project and part of the Cloud Native Computing Foundation, it features a multi-dimensional data model with time series data identified by metric name and key/value pairs, PromQL query language, and powerful alerting capabilities. It serves as a FOSS alternative to commercial monitoring solutions like Datadog, New Relic, or Splunk, offering enterprise-grade monitoring and alerting without licensing costs.</p>\n<h2 id=\"prerequisites\" class=\"mobile-header\">Prerequisites</h2>\n<li class=\"mobile-list-item\"><strong>Hardware Requirements</strong>:</li>\n<li class=\"mobile-list-item\">CPU: 2 cores minimum (4+ cores recommended for production)</li>\n<li class=\"mobile-list-item\">RAM: 2GB minimum (8GB+ recommended for production)</li>\n<li class=\"mobile-list-item\">Storage: 20GB minimum (100GB+ SSD recommended for metrics retention)</li>\n<li class=\"mobile-list-item\">Network: Stable connectivity for scraping targets</li>\n<li class=\"mobile-list-item\"><strong>Operating System</strong>: </li>\n<li class=\"mobile-list-item\">Linux: Any modern distribution with kernel 2.6.32+</li>\n<li class=\"mobile-list-item\">macOS: 10.12+ (Sierra or newer)</li>\n<li class=\"mobile-list-item\">Windows: Windows Server 2016+ or Windows 10</li>\n<li class=\"mobile-list-item\">FreeBSD: 11.0+</li>\n<li class=\"mobile-list-item\"><strong>Network Requirements</strong>:</li>\n<li class=\"mobile-list-item\">Port 9090 (Prometheus web UI and API)</li>\n<li class=\"mobile-list-item\">Port 9093 (Alertmanager)</li>\n<li class=\"mobile-list-item\">Port 9094 (Alertmanager cluster)</li>\n<li class=\"mobile-list-item\">Various ports for exporters (9100 for node_exporter, etc.)</li>\n<li class=\"mobile-list-item\"><strong>Dependencies</strong>:</li>\n<li class=\"mobile-list-item\">No runtime dependencies (Go binary)</li>\n<li class=\"mobile-list-item\">Optional: Grafana for visualization</li>\n<li class=\"mobile-list-item\">Optional: Alertmanager for alerting</li>\n<li class=\"mobile-list-item\"><strong>System Access</strong>: root or sudo privileges for installation</li>\n<h2 id=\"installation\" class=\"mobile-header\">Installation</h2>\n<h3 id=\"rhelcentosrocky-linuxalmalinux\" class=\"mobile-header\">RHEL/CentOS/Rocky Linux/AlmaLinux</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Create prometheus user\nsudo useradd --no-create-home --shell /bin/false prometheus\n\n# Create directories\nsudo mkdir -p /etc/prometheus /var/lib/prometheus\nsudo chown prometheus:prometheus /etc/prometheus /var/lib/prometheus\n\n# Download latest Prometheus\nPROMETHEUS_VERSION=&quot;2.48.0&quot;\ncd /tmp\nwget https://github.com/prometheus/prometheus/releases/download/v${PROMETHEUS_VERSION}/prometheus-${PROMETHEUS_VERSION}.linux-amd64.tar.gz\ntar xzf prometheus-${PROMETHEUS_VERSION}.linux-amd64.tar.gz\n\n# Install binaries\ncd prometheus-${PROMETHEUS_VERSION}.linux-amd64\nsudo cp prometheus promtool /usr/local/bin/\nsudo chown prometheus:prometheus /usr/local/bin/prometheus /usr/local/bin/promtool\n\n# Copy configuration files\nsudo cp -r consoles console_libraries /etc/prometheus/\nsudo chown -R prometheus:prometheus /etc/prometheus/consoles /etc/prometheus/console_libraries\n\n# Create basic configuration\nsudo tee /etc/prometheus/prometheus.yml &gt; /dev/null &lt;&lt;EOF\nglobal:\n  scrape_interval: 15s\n  evaluation_interval: 15s\n\nscrape_configs:\n  - job_name: &#039;prometheus&#039;\n    static_configs:\n      - targets: [&#039;localhost:9090&#039;]\nEOF\n\nsudo chown prometheus:prometheus /etc/prometheus/prometheus.yml</code></pre>\n      </div>\n    </div>\n<h3 id=\"debianubuntu\" class=\"mobile-header\">Debian/Ubuntu</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Method 1: From official repository\nwget -O prometheus.tar.gz https://github.com/prometheus/prometheus/releases/download/v2.48.0/prometheus-2.48.0.linux-amd64.tar.gz\ntar xzf prometheus.tar.gz\ncd prometheus-*\n\n# Create user and directories\nsudo useradd --no-create-home --shell /bin/false prometheus\nsudo mkdir -p /etc/prometheus /var/lib/prometheus\nsudo cp prometheus promtool /usr/local/bin/\nsudo cp -r consoles console_libraries /etc/prometheus/\nsudo chown -R prometheus:prometheus /etc/prometheus /var/lib/prometheus /usr/local/bin/prometheus /usr/local/bin/promtool\n\n# Method 2: Using snap (simpler but less flexible)\nsudo snap install prometheus\n\n# Method 3: From community packages (older version)\nsudo apt update\nsudo apt install -y prometheus</code></pre>\n      </div>\n    </div>\n<h3 id=\"arch-linux\" class=\"mobile-header\">Arch Linux</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Install from official repositories\nsudo pacman -S prometheus\n\n# Optional: Install exporters\nsudo pacman -S prometheus-node-exporter\nsudo pacman -S prometheus-blackbox-exporter\n\n# Enable and start service\nsudo systemctl enable --now prometheus\n\n# For latest version from AUR\nyay -S prometheus-bin\n\n# Configuration location: /etc/prometheus/prometheus.yml</code></pre>\n      </div>\n    </div>\n<h3 id=\"alpine-linux\" class=\"mobile-header\">Alpine Linux</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Install Prometheus\napk add --no-cache prometheus prometheus-node-exporter\n\n# Create prometheus user if not exists\nadduser -D -H -s /sbin/nologin prometheus\n\n# Create directories\nmkdir -p /etc/prometheus /var/lib/prometheus\nchown prometheus:prometheus /etc/prometheus /var/lib/prometheus\n\n# Enable and start service\nrc-update add prometheus default\nrc-service prometheus start\n\n# For Alertmanager\napk add --no-cache alertmanager</code></pre>\n      </div>\n    </div>\n<h3 id=\"opensusesles\" class=\"mobile-header\">openSUSE/SLES</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># openSUSE Leap/Tumbleweed\nsudo zypper install -y prometheus\n\n# For latest version, build from source\nsudo zypper install -y go\ngo install github.com/prometheus/prometheus/cmd/prometheus@latest\nsudo cp ~/go/bin/prometheus /usr/local/bin/\n\n# SLES 15\n# May need to add monitoring repository\nsudo SUSEConnect -p sle-module-containers/15.5/x86_64\nsudo zypper install -y prometheus\n\n# Create service user\nsudo useradd --no-create-home --shell /bin/false prometheus\n\n# Enable and start service\nsudo systemctl enable --now prometheus</code></pre>\n      </div>\n    </div>\n<h3 id=\"macos\" class=\"mobile-header\">macOS</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Using Homebrew\nbrew install prometheus\n\n# Start as service\nbrew services start prometheus\n\n# Or run manually\nprometheus --config.file=/usr/local/etc/prometheus.yml\n\n# Install exporters\nbrew install prometheus-node-exporter\n\n# Configuration location: /usr/local/etc/prometheus.yml\n# Alternative: /opt/homebrew/etc/prometheus.yml (Apple Silicon)</code></pre>\n      </div>\n    </div>\n<h3 id=\"freebsd\" class=\"mobile-header\">FreeBSD</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Using pkg\npkg install prometheus\npkg install node_exporter\n\n# Using ports\ncd /usr/ports/net-mgmt/prometheus\nmake install clean\n\n# Enable in rc.conf\necho &#039;prometheus_enable=&quot;YES&quot;&#039; &gt;&gt; /etc/rc.conf\necho &#039;node_exporter_enable=&quot;YES&quot;&#039; &gt;&gt; /etc/rc.conf\n\n# Start services\nservice prometheus start\nservice node_exporter start\n\n# Configuration location: /usr/local/etc/prometheus.yml</code></pre>\n      </div>\n    </div>\n<h3 id=\"windows\" class=\"mobile-header\">Windows</h3>\n<div class=\"mobile-code-block\" data-language=\"powershell\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">powershell</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-powershell\"># Method 1: Using Chocolatey\nchoco install prometheus\n\n# Method 2: Using Scoop\nscoop bucket add extras\nscoop install prometheus\n\n# Method 3: Manual installation\n# Download from https://github.com/prometheus/prometheus/releases\n# Extract to C:\\prometheus\n# Create C:\\prometheus\\prometheus.yml\n\n# Install as Windows service using NSSM\nnssm install prometheus C:\\prometheus\\prometheus.exe\nnssm set prometheus AppParameters &quot;--config.file=C:\\prometheus\\prometheus.yml --storage.tsdb.path=C:\\prometheus\\data&quot;\nnssm set prometheus AppDirectory C:\\prometheus\nnssm start prometheus\n\n# Or use Windows Service Wrapper\n# Download WinSW from https://github.com/winsw/winsw/releases</code></pre>\n      </div>\n    </div>\n<h2 id=\"initial-configuration\" class=\"mobile-header\">Initial Configuration</h2>\n<h3 id=\"first-run-setup\" class=\"mobile-header\">First-Run Setup</h3>\n<p class=\"mobile-paragraph\">1. <strong>Create Prometheus user</strong> (if not created by package):</p>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Linux systems\nsudo useradd -r -d /var/lib/prometheus -s /sbin/nologin -c &quot;Prometheus monitoring&quot; prometheus</code></pre>\n      </div>\n    </div>\n<p class=\"mobile-paragraph\">2. <strong>Default configuration locations</strong>:</p>\n<li class=\"mobile-list-item\">RHEL/CentOS/Rocky/AlmaLinux: <code class=\"mobile-inline-code\">/etc/prometheus/prometheus.yml</code></li>\n<li class=\"mobile-list-item\">Debian/Ubuntu: <code class=\"mobile-inline-code\">/etc/prometheus/prometheus.yml</code></li>\n<li class=\"mobile-list-item\">Arch Linux: <code class=\"mobile-inline-code\">/etc/prometheus/prometheus.yml</code></li>\n<li class=\"mobile-list-item\">Alpine Linux: <code class=\"mobile-inline-code\">/etc/prometheus/prometheus.yml</code></li>\n<li class=\"mobile-list-item\">openSUSE/SLES: <code class=\"mobile-inline-code\">/etc/prometheus/prometheus.yml</code></li>\n<li class=\"mobile-list-item\">macOS: <code class=\"mobile-inline-code\">/usr/local/etc/prometheus.yml</code></li>\n<li class=\"mobile-list-item\">FreeBSD: <code class=\"mobile-inline-code\">/usr/local/etc/prometheus.yml</code></li>\n<li class=\"mobile-list-item\">Windows: <code class=\"mobile-inline-code\">C:\\prometheus\\prometheus.yml</code></li>\n<p class=\"mobile-paragraph\">3. <strong>Essential settings to change</strong>:</p>\n<div class=\"mobile-code-block\" data-language=\"yaml\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">yaml</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-yaml\"># /etc/prometheus/prometheus.yml\nglobal:\n  scrape_interval: 15s       # How often to scrape targets\n  evaluation_interval: 15s   # How often to evaluate rules\n  external_labels:          # Labels to add to all metrics\n    cluster: &#039;production&#039;\n    replica: &#039;prometheus-1&#039;\n\n# Alertmanager configuration\nalerting:\n  alertmanagers:\n    - static_configs:\n        - targets:\n          - localhost:9093\n\n# Load rules once and periodically evaluate them\nrule_files:\n  - &quot;rules/*.yml&quot;\n\n# Scrape configurations\nscrape_configs:\n  # Prometheus itself\n  - job_name: &#039;prometheus&#039;\n    static_configs:\n      - targets: [&#039;localhost:9090&#039;]\n\n  # Node exporter for system metrics\n  - job_name: &#039;node&#039;\n    static_configs:\n      - targets: [&#039;localhost:9100&#039;]</code></pre>\n      </div>\n    </div>\n<h3 id=\"testing-initial-setup\" class=\"mobile-header\">Testing Initial Setup</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Test configuration syntax\npromtool check config /etc/prometheus/prometheus.yml\n\n# Start Prometheus (if not using systemd)\nprometheus --config.file=/etc/prometheus/prometheus.yml\n\n# Verify Prometheus is running\ncurl http://localhost:9090/-/healthy\n\n# Check targets\ncurl http://localhost:9090/api/v1/targets\n\n# Run a test query\ncurl http://localhost:9090/api/v1/query?query=up</code></pre>\n      </div>\n    </div>\n<p class=\"mobile-paragraph\"><strong>WARNING:</strong> Never expose Prometheus to the public internet without authentication!</p>\n<h2 id=\"service-management\" class=\"mobile-header\">Service Management</h2>\n<h3 id=\"systemd-rhel-debian-ubuntu-arch-opensuse\" class=\"mobile-header\">systemd (RHEL, Debian, Ubuntu, Arch, openSUSE)</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Create systemd service file\nsudo tee /etc/systemd/system/prometheus.service &lt;&lt;EOF\n[Unit]\nDescription=Prometheus\nWants=network-online.target\nAfter=network-online.target\n\n[Service]\nUser=prometheus\nGroup=prometheus\nType=simple\nRestart=always\nRestartSec=5s\nExecStart=/usr/local/bin/prometheus \\\n    --config.file /etc/prometheus/prometheus.yml \\\n    --storage.tsdb.path /var/lib/prometheus/ \\\n    --web.console.libraries=/etc/prometheus/console_libraries \\\n    --web.console.templates=/etc/prometheus/consoles \\\n    --web.enable-lifecycle\n\n[Install]\nWantedBy=multi-user.target\nEOF\n\n# Reload systemd and start Prometheus\nsudo systemctl daemon-reload\nsudo systemctl enable prometheus\nsudo systemctl start prometheus\n\n# Management commands\nsudo systemctl stop prometheus\nsudo systemctl restart prometheus\nsudo systemctl status prometheus\n\n# View logs\nsudo journalctl -u prometheus -f</code></pre>\n      </div>\n    </div>\n<h3 id=\"openrc-alpine-linux\" class=\"mobile-header\">OpenRC (Alpine Linux)</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Create init script\nsudo tee /etc/init.d/prometheus &lt;&lt;&#039;EOF&#039;\n#!/sbin/openrc-run\n\nname=&quot;prometheus&quot;\ndescription=&quot;Prometheus monitoring system&quot;\ncommand=&quot;/usr/bin/prometheus&quot;\ncommand_args=&quot;--config.file=/etc/prometheus/prometheus.yml --storage.tsdb.path=/var/lib/prometheus/&quot;\ncommand_user=&quot;prometheus:prometheus&quot;\npidfile=&quot;/run/${RC_SVCNAME}.pid&quot;\nstart_stop_daemon_args=&quot;--background --make-pidfile&quot;\n\ndepend() {\n    need net\n    after firewall\n}\nEOF\n\nsudo chmod +x /etc/init.d/prometheus\n\n# Enable and start\nrc-update add prometheus default\nrc-service prometheus start\n\n# Management commands\nrc-service prometheus stop\nrc-service prometheus restart\nrc-service prometheus status</code></pre>\n      </div>\n    </div>\n<h3 id=\"rcd-freebsd\" class=\"mobile-header\">rc.d (FreeBSD)</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Enable in /etc/rc.conf\necho &#039;prometheus_enable=&quot;YES&quot;&#039; &gt;&gt; /etc/rc.conf\necho &#039;prometheus_config=&quot;/usr/local/etc/prometheus.yml&quot;&#039; &gt;&gt; /etc/rc.conf\necho &#039;prometheus_data_dir=&quot;/var/db/prometheus&quot;&#039; &gt;&gt; /etc/rc.conf\n\n# Start Prometheus\nservice prometheus start\n\n# Management commands\nservice prometheus stop\nservice prometheus restart\nservice prometheus status\nservice prometheus reload</code></pre>\n      </div>\n    </div>\n<h3 id=\"launchd-macos\" class=\"mobile-header\">launchd (macOS)</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Using Homebrew services\nbrew services start prometheus\nbrew services stop prometheus\nbrew services restart prometheus\n\n# Check status\nbrew services list | grep prometheus\n\n# Manual launchd management\nsudo launchctl load /Library/LaunchDaemons/homebrew.mxcl.prometheus.plist\nsudo launchctl unload /Library/LaunchDaemons/homebrew.mxcl.prometheus.plist</code></pre>\n      </div>\n    </div>\n<h3 id=\"windows-service-manager\" class=\"mobile-header\">Windows Service Manager</h3>\n<div class=\"mobile-code-block\" data-language=\"powershell\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">powershell</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-powershell\"># Using NSSM\nnssm start prometheus\nnssm stop prometheus\nnssm restart prometheus\n\n# Using native Windows commands\nStart-Service prometheus\nStop-Service prometheus\nRestart-Service prometheus\n\n# Check status\nGet-Service prometheus\n\n# View logs\nGet-EventLog -LogName Application -Source prometheus -Newest 50</code></pre>\n      </div>\n    </div>\n<h2 id=\"advanced-configuration\" class=\"mobile-header\">Advanced Configuration</h2>\n<h3 id=\"storage-configuration\" class=\"mobile-header\">Storage Configuration</h3>\n<div class=\"mobile-code-block\" data-language=\"yaml\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">yaml</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-yaml\"># Advanced storage settings via command-line flags\n--storage.tsdb.path=/var/lib/prometheus/\n--storage.tsdb.retention.time=30d\n--storage.tsdb.retention.size=50GB\n--storage.tsdb.wal-compression\n--storage.tsdb.max-block-duration=2h\n--storage.tsdb.min-block-duration=2h</code></pre>\n      </div>\n    </div>\n<h3 id=\"high-availability-setup\" class=\"mobile-header\">High Availability Setup</h3>\n<div class=\"mobile-code-block\" data-language=\"yaml\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">yaml</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-yaml\"># prometheus.yml for HA setup\nglobal:\n  scrape_interval: 15s\n  evaluation_interval: 15s\n  external_labels:\n    cluster: &#039;production&#039;\n    replica: &#039;1&#039;  # Different for each replica\n\n# Remote write for long-term storage\nremote_write:\n  - url: &quot;http://thanos-receive:19291/api/v1/receive&quot;\n    queue_config:\n      max_samples_per_send: 10000\n      batch_send_deadline: 5s\n      max_retries: 3\n\n# Remote read for querying historical data\nremote_read:\n  - url: &quot;http://thanos-query:9090/api/v1/read&quot;\n    read_recent: true</code></pre>\n      </div>\n    </div>\n<h3 id=\"service-discovery\" class=\"mobile-header\">Service Discovery</h3>\n<div class=\"mobile-code-block\" data-language=\"yaml\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">yaml</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-yaml\"># Kubernetes service discovery\nscrape_configs:\n  - job_name: &#039;kubernetes-pods&#039;\n    kubernetes_sd_configs:\n      - role: pod\n    relabel_configs:\n      - source_labels: [__meta_kubernetes_pod_annotation_prometheus_io_scrape]\n        action: keep\n        regex: true\n      - source_labels: [__meta_kubernetes_pod_annotation_prometheus_io_path]\n        action: replace\n        target_label: __metrics_path__\n        regex: (.+)\n\n# File-based service discovery\n  - job_name: &#039;file-sd&#039;\n    file_sd_configs:\n      - files:\n        - &#039;/etc/prometheus/targets/*.yml&#039;\n        refresh_interval: 5m\n\n# DNS service discovery\n  - job_name: &#039;dns-sd&#039;\n    dns_sd_configs:\n      - names:\n        - &#039;_prometheus._tcp.example.com&#039;\n        type: &#039;SRV&#039;\n        refresh_interval: 30s</code></pre>\n      </div>\n    </div>\n<h2 id=\"reverse-proxy-setup\" class=\"mobile-header\">Reverse Proxy Setup</h2>\n<h3 id=\"nginx-configuration\" class=\"mobile-header\">nginx Configuration</h3>\n<div class=\"mobile-code-block\" data-language=\"nginx\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">nginx</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-nginx\"># /etc/nginx/sites-available/prometheus\nupstream prometheus {\n    server 127.0.0.1:9090;\n}\n\nserver {\n    listen 80;\n    server_name prometheus.example.com;\n    return 301 https://$server_name$request_uri;\n}\n\nserver {\n    listen 443 ssl http2;\n    server_name prometheus.example.com;\n\n    ssl_certificate /etc/letsencrypt/live/prometheus.example.com/fullchain.pem;\n    ssl_certificate_key /etc/letsencrypt/live/prometheus.example.com/privkey.pem;\n\n    # Security headers\n    add_header Strict-Transport-Security &quot;max-age=63072000&quot; always;\n    add_header X-Frame-Options &quot;DENY&quot; always;\n    add_header X-Content-Type-Options &quot;nosniff&quot; always;\n\n    location / {\n        proxy_pass http://prometheus;\n        proxy_set_header Host $host;\n        proxy_set_header X-Real-IP $remote_addr;\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n        proxy_set_header X-Forwarded-Proto $scheme;\n        \n        # Basic authentication\n        auth_basic &quot;Prometheus&quot;;\n        auth_basic_user_file /etc/nginx/.htpasswd;\n    }\n}</code></pre>\n      </div>\n    </div>\n<h3 id=\"apache-configuration\" class=\"mobile-header\">Apache Configuration</h3>\n<div class=\"mobile-code-block\" data-language=\"apache\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">apache</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-apache\"># /etc/apache2/sites-available/prometheus.conf\n&lt;VirtualHost *:443&gt;\n    ServerName prometheus.example.com\n    \n    SSLEngine on\n    SSLCertificateFile /etc/letsencrypt/live/prometheus.example.com/fullchain.pem\n    SSLCertificateKeyFile /etc/letsencrypt/live/prometheus.example.com/privkey.pem\n    \n    ProxyPreserveHost On\n    ProxyPass / http://localhost:9090/\n    ProxyPassReverse / http://localhost:9090/\n    \n    &lt;Location /&gt;\n        AuthType Basic\n        AuthName &quot;Prometheus&quot;\n        AuthUserFile /etc/apache2/.htpasswd\n        Require valid-user\n    &lt;/Location&gt;\n&lt;/VirtualHost&gt;</code></pre>\n      </div>\n    </div>\n<h3 id=\"caddy-configuration\" class=\"mobile-header\">Caddy Configuration</h3>\n<div class=\"mobile-code-block\" data-language=\"caddyfile\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">caddyfile</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-caddyfile\">prometheus.example.com {\n    reverse_proxy localhost:9090\n    \n    basicauth {\n        admin $2a$14$xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\n    }\n    \n    header {\n        Strict-Transport-Security &quot;max-age=63072000&quot;\n        X-Frame-Options &quot;DENY&quot;\n        X-Content-Type-Options &quot;nosniff&quot;\n    }\n}</code></pre>\n      </div>\n    </div>\n<h3 id=\"haproxy-configuration\" class=\"mobile-header\">HAProxy Configuration</h3>\n<div class=\"mobile-code-block\" data-language=\"haproxy\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">haproxy</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-haproxy\">frontend prometheus_frontend\n    bind *:443 ssl crt /etc/haproxy/certs/prometheus.pem\n    mode http\n    option httplog\n    \n    # Basic auth\n    acl auth_ok http_auth(users)\n    http-request auth realm Prometheus if !auth_ok\n    \n    default_backend prometheus_backend\n\nbackend prometheus_backend\n    mode http\n    balance roundrobin\n    option httpchk GET /-/healthy\n    server prometheus1 127.0.0.1:9090 check</code></pre>\n      </div>\n    </div>\n<h2 id=\"security-configuration\" class=\"mobile-header\">Security Configuration</h2>\n<h3 id=\"authentication-with-basic-auth\" class=\"mobile-header\">Authentication with Basic Auth</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Generate password file\nhtpasswd -c /etc/prometheus/.htpasswd admin\n\n# Configure Prometheus with basic auth\nsudo tee /etc/prometheus/web.yml &lt;&lt;EOF\nbasic_auth_users:\n  admin: $2y$10$hashed_password_here\nEOF\n\n# Update systemd service to use web config\nExecStart=/usr/local/bin/prometheus \\\n    --config.file=/etc/prometheus/prometheus.yml \\\n    --web.config.file=/etc/prometheus/web.yml</code></pre>\n      </div>\n    </div>\n<h3 id=\"tls-configuration\" class=\"mobile-header\">TLS Configuration</h3>\n<div class=\"mobile-code-block\" data-language=\"yaml\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">yaml</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-yaml\"># web.yml for TLS\ntls_server_config:\n  cert_file: /etc/prometheus/prometheus.crt\n  key_file: /etc/prometheus/prometheus.key\n  client_auth_type: RequireAndVerifyClientCert\n  client_ca_file: /etc/prometheus/ca.crt\n  min_version: TLS12\n  cipher_suites:\n    - TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384\n    - TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384</code></pre>\n      </div>\n    </div>\n<h3 id=\"firewall-rules\" class=\"mobile-header\">Firewall Rules</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># UFW (Ubuntu/Debian)\nsudo ufw allow from 192.168.1.0/24 to any port 9090\nsudo ufw allow from 192.168.1.0/24 to any port 9093\nsudo ufw reload\n\n# firewalld (RHEL/CentOS/openSUSE)\nsudo firewall-cmd --permanent --new-zone=prometheus\nsudo firewall-cmd --permanent --zone=prometheus --add-source=192.168.1.0/24\nsudo firewall-cmd --permanent --zone=prometheus --add-port=9090/tcp\nsudo firewall-cmd --permanent --zone=prometheus --add-port=9093/tcp\nsudo firewall-cmd --reload\n\n# iptables\nsudo iptables -A INPUT -s 192.168.1.0/24 -p tcp --dport 9090 -j ACCEPT\nsudo iptables -A INPUT -s 192.168.1.0/24 -p tcp --dport 9093 -j ACCEPT\nsudo iptables-save &gt; /etc/iptables/rules.v4\n\n# pf (FreeBSD)\n# Add to /etc/pf.conf\npass in on $ext_if proto tcp from 192.168.1.0/24 to any port 9090\npass in on $ext_if proto tcp from 192.168.1.0/24 to any port 9093\n\n# Windows Firewall\nNew-NetFirewallRule -DisplayName &quot;Prometheus&quot; -Direction Inbound -Protocol TCP -LocalPort 9090 -RemoteAddress 192.168.1.0/24 -Action Allow</code></pre>\n      </div>\n    </div>\n<h3 id=\"security-best-practices\" class=\"mobile-header\">Security Best Practices</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Restrict Prometheus data directory permissions\nsudo chmod 700 /var/lib/prometheus\nsudo chown -R prometheus:prometheus /var/lib/prometheus\n\n# Disable admin API endpoints in production\n# Remove --web.enable-admin-api flag\n\n# Enable CORS restrictions\n--web.cors.origin=&quot;https://grafana.example.com&quot;\n\n# Set read timeout\n--web.read-timeout=5m\n\n# Limit concurrent queries\n--query.max-concurrency=20</code></pre>\n      </div>\n    </div>\n<h2 id=\"database-setup\" class=\"mobile-header\">Database Setup</h2>\n<p class=\"mobile-paragraph\">Prometheus uses its own time-series database (TSDB) and doesn't require external database setup. However, you can configure remote storage:</p>\n<h3 id=\"remote-storage-options\" class=\"mobile-header\">Remote Storage Options</h3>\n<div class=\"mobile-code-block\" data-language=\"yaml\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">yaml</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-yaml\"># PostgreSQL with TimescaleDB\nremote_write:\n  - url: &quot;http://prometheus-postgresql-adapter:9201/write&quot;\nremote_read:\n  - url: &quot;http://prometheus-postgresql-adapter:9201/read&quot;\n\n# InfluxDB\nremote_write:\n  - url: &quot;http://influxdb:8086/api/v1/prom/write?db=prometheus&quot;\nremote_read:\n  - url: &quot;http://influxdb:8086/api/v1/prom/read?db=prometheus&quot;\n\n# Cortex/Thanos\nremote_write:\n  - url: &quot;http://cortex:9009/api/prom/push&quot;\n    queue_config:\n      capacity: 10000\n      max_samples_per_send: 3000</code></pre>\n      </div>\n    </div>\n<h3 id=\"storage-sizing\" class=\"mobile-header\">Storage Sizing</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Calculate storage requirements\n# Formula: retention_time * ingested_samples_per_second * bytes_per_sample\n# Example: 30 days * 100k samples/sec * 2 bytes = ~520GB\n\n# Monitor storage usage\ncurl http://localhost:9090/api/v1/query?query=prometheus_tsdb_storage_blocks_bytes\n\n# Configure retention\n--storage.tsdb.retention.time=30d\n--storage.tsdb.retention.size=500GB</code></pre>\n      </div>\n    </div>\n<h2 id=\"performance-optimization\" class=\"mobile-header\">Performance Optimization</h2>\n<h3 id=\"system-tuning\" class=\"mobile-header\">System Tuning</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Increase file descriptor limits\nsudo tee -a /etc/security/limits.conf &lt;&lt;EOF\nprometheus soft nofile 65535\nprometheus hard nofile 65535\nEOF\n\n# Kernel parameters for better performance\nsudo tee -a /etc/sysctl.conf &lt;&lt;EOF\n# Prometheus optimizations\nvm.max_map_count = 262144\nfs.file-max = 65535\nnet.core.somaxconn = 32768\nnet.ipv4.tcp_max_syn_backlog = 8192\nEOF\n\nsudo sysctl -p</code></pre>\n      </div>\n    </div>\n<h3 id=\"query-optimization\" class=\"mobile-header\">Query Optimization</h3>\n<div class=\"mobile-code-block\" data-language=\"yaml\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">yaml</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-yaml\"># Recording rules for expensive queries\ngroups:\n  - name: aggregations\n    interval: 30s\n    rules:\n      - record: node:cpu_utilization:avg1m\n        expr: 100 - (avg by(instance) (irate(node_cpu_seconds_total{mode=&quot;idle&quot;}[1m])) * 100)\n      \n      - record: node:memory_utilization:ratio\n        expr: 1 - (node_memory_MemAvailable_bytes / node_memory_MemTotal_bytes)</code></pre>\n      </div>\n    </div>\n<h3 id=\"storage-optimization\" class=\"mobile-header\">Storage Optimization</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Enable compression\n--storage.tsdb.wal-compression\n\n# Optimize block duration for your workload\n--storage.tsdb.max-block-duration=2h\n--storage.tsdb.min-block-duration=2h\n\n# Increase sample buffer\n--storage.tsdb.head-chunks-write-queue-size=1000000</code></pre>\n      </div>\n    </div>\n<h2 id=\"monitoring\" class=\"mobile-header\">Monitoring</h2>\n<h3 id=\"built-in-metrics\" class=\"mobile-header\">Built-in Metrics</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Prometheus self-monitoring queries\n# Storage usage\nprometheus_tsdb_storage_blocks_bytes\n\n# Ingestion rate\nrate(prometheus_tsdb_head_samples_appended_total[5m])\n\n# Query performance\nhistogram_quantile(0.99, rate(prometheus_engine_query_duration_seconds_bucket[5m]))\n\n# Active time series\nprometheus_tsdb_head_series\n\n# Memory usage\nprocess_resident_memory_bytes</code></pre>\n      </div>\n    </div>\n<h3 id=\"alerting-rules\" class=\"mobile-header\">Alerting Rules</h3>\n<div class=\"mobile-code-block\" data-language=\"yaml\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">yaml</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-yaml\"># /etc/prometheus/rules/prometheus.yml\ngroups:\n  - name: prometheus\n    rules:\n      - alert: PrometheusDown\n        expr: up{job=&quot;prometheus&quot;} == 0\n        for: 5m\n        labels:\n          severity: critical\n        annotations:\n          summary: &quot;Prometheus is down&quot;\n          \n      - alert: PrometheusStorageSpace\n        expr: prometheus_tsdb_storage_blocks_bytes / 1024 / 1024 / 1024 &gt; 100\n        for: 5m\n        labels:\n          severity: warning\n        annotations:\n          summary: &quot;Prometheus storage exceeds 100GB&quot;\n          \n      - alert: PrometheusHighMemory\n        expr: process_resident_memory_bytes / 1024 / 1024 / 1024 &gt; 8\n        for: 10m\n        labels:\n          severity: warning\n        annotations:\n          summary: &quot;Prometheus memory usage exceeds 8GB&quot;</code></pre>\n      </div>\n    </div>\n<h3 id=\"external-monitoring\" class=\"mobile-header\">External Monitoring</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Blackbox exporter configuration for monitoring Prometheus\nmodules:\n  prometheus_health:\n    prober: http\n    timeout: 5s\n    http:\n      valid_status_codes: [200]\n      method: GET\n      path: /-/healthy\n      \n  prometheus_ready:\n    prober: http\n    timeout: 5s\n    http:\n      valid_status_codes: [200]\n      method: GET\n      path: /-/ready</code></pre>\n      </div>\n    </div>\n<h2 id=\"backup-and-restore\" class=\"mobile-header\">Backup and Restore</h2>\n<h3 id=\"backup-procedures\" class=\"mobile-header\">Backup Procedures</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\">#!/bin/bash\n# backup-prometheus.sh\n\nBACKUP_DIR=&quot;/backup/prometheus/$(date +%Y%m%d_%H%M%S)&quot;\nmkdir -p &quot;$BACKUP_DIR&quot;\n\n# Option 1: Using snapshots (requires --web.enable-lifecycle)\ncurl -XPOST http://localhost:9090/api/v1/admin/tsdb/snapshot\nSNAPSHOT=$(curl -s http://localhost:9090/api/v1/admin/tsdb/snapshot | jq -r .data.name)\ncp -r /var/lib/prometheus/snapshots/$SNAPSHOT &quot;$BACKUP_DIR/data&quot;\n\n# Option 2: Direct file backup (requires stopping Prometheus)\nsystemctl stop prometheus\ntar czf &quot;$BACKUP_DIR/prometheus-data.tar.gz&quot; -C /var/lib/prometheus .\nsystemctl start prometheus\n\n# Backup configuration\ntar czf &quot;$BACKUP_DIR/prometheus-config.tar.gz&quot; -C /etc prometheus\n\n# Backup to remote storage\n# aws s3 cp &quot;$BACKUP_DIR&quot; s3://backups/prometheus/ --recursive\n# rsync -avz &quot;$BACKUP_DIR&quot; backup-server:/backups/prometheus/\n\necho &quot;Backup completed: $BACKUP_DIR&quot;</code></pre>\n      </div>\n    </div>\n<h3 id=\"restore-procedures\" class=\"mobile-header\">Restore Procedures</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\">#!/bin/bash\n# restore-prometheus.sh\n\nBACKUP_DIR=&quot;$1&quot;\nif [ -z &quot;$BACKUP_DIR&quot; ]; then\n    echo &quot;Usage: $0 &lt;backup-directory&gt;&quot;\n    exit 1\nfi\n\n# Stop Prometheus\nsystemctl stop prometheus\n\n# Restore data\nrm -rf /var/lib/prometheus/*\ntar xzf &quot;$BACKUP_DIR/prometheus-data.tar.gz&quot; -C /var/lib/prometheus\nchown -R prometheus:prometheus /var/lib/prometheus\n\n# Restore configuration\ntar xzf &quot;$BACKUP_DIR/prometheus-config.tar.gz&quot; -C /etc\nchown -R prometheus:prometheus /etc/prometheus\n\n# Start Prometheus\nsystemctl start prometheus\n\necho &quot;Restore completed from: $BACKUP_DIR&quot;</code></pre>\n      </div>\n    </div>\n<h3 id=\"automated-backup\" class=\"mobile-header\">Automated Backup</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Create cron job for daily backups\necho &quot;0 2 * * * /usr/local/bin/backup-prometheus.sh&quot; | sudo tee -a /etc/crontab\n\n# Backup retention script\nfind /backup/prometheus -type d -mtime +30 -exec rm -rf {} \\; 2&gt;/dev/null</code></pre>\n      </div>\n    </div>\n<h2 id=\"troubleshooting\" class=\"mobile-header\">Troubleshooting</h2>\n<h3 id=\"common-issues\" class=\"mobile-header\">Common Issues</h3>\n<p class=\"mobile-paragraph\">1. <strong>High memory usage</strong>:</p>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Check cardinality\ncurl -s http://localhost:9090/api/v1/label/__name__/values | jq -r &#039;.data[]&#039; | wc -l\n\n# Find high cardinality metrics\ntopk(10, count by (__name__)({__name__=~&quot;.+&quot;}))\n\n# Reduce memory usage\n--storage.tsdb.retention.time=15d  # Reduce retention\n--query.max-samples=50000000       # Limit query samples</code></pre>\n      </div>\n    </div>\n<p class=\"mobile-paragraph\">2. <strong>Slow queries</strong>:</p>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Enable query logging\n--log.queries-longer-than=10s\n\n# Check slow queries\ncurl &#039;http://localhost:9090/api/v1/query?query=up&amp;stats=all&#039; | jq .stats\n\n# Add recording rules for expensive queries</code></pre>\n      </div>\n    </div>\n<p class=\"mobile-paragraph\">3. <strong>Storage issues</strong>:</p>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Check disk space\ndf -h /var/lib/prometheus\n\n# Clean up old blocks\npromtool tsdb clean /var/lib/prometheus\n\n# Analyze TSDB\npromtool tsdb analyze /var/lib/prometheus</code></pre>\n      </div>\n    </div>\n<p class=\"mobile-paragraph\">4. <strong>Scraping failures</strong>:</p>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Check target status\ncurl http://localhost:9090/api/v1/targets | jq &#039;.data.activeTargets[] | select(.health != &quot;up&quot;)&#039;\n\n# Debug specific target\ncurl -v http://target-host:9100/metrics\n\n# Check Prometheus logs\njournalctl -u prometheus -f | grep &quot;error&quot;</code></pre>\n      </div>\n    </div>\n<h3 id=\"debug-mode\" class=\"mobile-header\">Debug Mode</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Enable debug logging\n--log.level=debug\n\n# Enable query logging\n--log.queries-longer-than=0s\n\n# Profile Prometheus\ncurl http://localhost:9090/debug/pprof/profile?seconds=30 &gt; profile.out\ngo tool pprof profile.out</code></pre>\n      </div>\n    </div>\n<h2 id=\"maintenance\" class=\"mobile-header\">Maintenance</h2>\n<h3 id=\"update-procedures\" class=\"mobile-header\">Update Procedures</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># RHEL/CentOS/Rocky/AlmaLinux\n# Download new version\nPROMETHEUS_VERSION=&quot;2.49.0&quot;\nwget https://github.com/prometheus/prometheus/releases/download/v${PROMETHEUS_VERSION}/prometheus-${PROMETHEUS_VERSION}.linux-amd64.tar.gz\n\n# Backup current installation\ncp /usr/local/bin/prometheus /usr/local/bin/prometheus.backup\n\n# Update binaries\ntar xzf prometheus-${PROMETHEUS_VERSION}.linux-amd64.tar.gz\ncd prometheus-${PROMETHEUS_VERSION}.linux-amd64\nsudo systemctl stop prometheus\nsudo cp prometheus promtool /usr/local/bin/\nsudo systemctl start prometheus\n\n# Debian/Ubuntu\n# Similar process for manual installation\n# For snap: sudo snap refresh prometheus\n\n# Arch Linux\nsudo pacman -Syu prometheus\n\n# Alpine Linux\napk upgrade prometheus\n\n# openSUSE\nsudo zypper update prometheus\n\n# FreeBSD\npkg upgrade prometheus\n\n# macOS\nbrew upgrade prometheus\n\n# Windows\n# Update using package manager or manual download</code></pre>\n      </div>\n    </div>\n<h3 id=\"health-checks\" class=\"mobile-header\">Health Checks</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\">#!/bin/bash\n# prometheus-health-check.sh\n\n# Check if Prometheus is healthy\nif ! curl -f -s http://localhost:9090/-/healthy &gt; /dev/null; then\n    echo &quot;CRITICAL: Prometheus is not healthy&quot;\n    exit 2\nfi\n\n# Check if Prometheus is ready\nif ! curl -f -s http://localhost:9090/-/ready &gt; /dev/null; then\n    echo &quot;WARNING: Prometheus is not ready&quot;\n    exit 1\nfi\n\n# Check storage space\nUSED_PERCENT=$(df /var/lib/prometheus | awk &#039;NR==2 {print $5}&#039; | sed &#039;s/%//&#039;)\nif [ &quot;$USED_PERCENT&quot; -gt 85 ]; then\n    echo &quot;WARNING: Storage usage is ${USED_PERCENT}%&quot;\n    exit 1\nfi\n\n# Check for failed targets\nFAILED_TARGETS=$(curl -s http://localhost:9090/api/v1/targets | jq &#039;[.data.activeTargets[] | select(.health != &quot;up&quot;)] | length&#039;)\nif [ &quot;$FAILED_TARGETS&quot; -gt 0 ]; then\n    echo &quot;WARNING: $FAILED_TARGETS targets are down&quot;\n    exit 1\nfi\n\necho &quot;OK: Prometheus is healthy&quot;\nexit 0</code></pre>\n      </div>\n    </div>\n<h3 id=\"cleanup-tasks\" class=\"mobile-header\">Cleanup Tasks</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Remove old snapshots\nfind /var/lib/prometheus/snapshots -type d -mtime +7 -exec rm -rf {} \\; 2&gt;/dev/null\n\n# Compact TSDB\npromtool tsdb compact /var/lib/prometheus\n\n# Clean WAL\npromtool tsdb clean /var/lib/prometheus\n\n# Remove old backups\nfind /backup/prometheus -type d -mtime +30 -exec rm -rf {} \\; 2&gt;/dev/null</code></pre>\n      </div>\n    </div>\n<h2 id=\"integration-examples\" class=\"mobile-header\">Integration Examples</h2>\n<h3 id=\"grafana-integration\" class=\"mobile-header\">Grafana Integration</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Add Prometheus datasource via API\ncurl -X POST http://admin:admin@localhost:3000/api/datasources \\\n  -H &#039;Content-Type: application/json&#039; \\\n  -d &#039;{\n    &quot;name&quot;: &quot;Prometheus&quot;,\n    &quot;type&quot;: &quot;prometheus&quot;,\n    &quot;url&quot;: &quot;http://localhost:9090&quot;,\n    &quot;access&quot;: &quot;proxy&quot;,\n    &quot;isDefault&quot;: true\n  }&#039;</code></pre>\n      </div>\n    </div>\n<h3 id=\"alertmanager-integration\" class=\"mobile-header\">Alertmanager Integration</h3>\n<div class=\"mobile-code-block\" data-language=\"yaml\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">yaml</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-yaml\"># alertmanager.yml\nglobal:\n  resolve_timeout: 5m\n\nroute:\n  group_by: [&#039;alertname&#039;]\n  group_wait: 10s\n  group_interval: 10s\n  repeat_interval: 1h\n  receiver: &#039;web.hook&#039;\n\nreceivers:\n  - name: &#039;web.hook&#039;\n    webhook_configs:\n      - url: &#039;http://localhost:5001/&#039;</code></pre>\n      </div>\n    </div>\n<h3 id=\"application-instrumentation\" class=\"mobile-header\">Application Instrumentation</h3>\n<div class=\"mobile-code-block\" data-language=\"python\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">python</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-python\"># Python example\nfrom prometheus_client import Counter, Histogram, Gauge, start_http_server\nimport time\n\n# Create metrics\nREQUEST_COUNT = Counter(&#039;app_requests_total&#039;, &#039;Total requests&#039;, [&#039;method&#039;, &#039;endpoint&#039;])\nREQUEST_LATENCY = Histogram(&#039;app_request_latency_seconds&#039;, &#039;Request latency&#039;)\nACTIVE_USERS = Gauge(&#039;app_active_users&#039;, &#039;Active users&#039;)\n\n# Use in application\n@REQUEST_LATENCY.time()\ndef process_request():\n    REQUEST_COUNT.labels(method=&#039;GET&#039;, endpoint=&#039;/api&#039;).inc()\n    ACTIVE_USERS.set(42)\n    time.sleep(0.1)\n\n# Start metrics server\nstart_http_server(8000)</code></pre>\n      </div>\n    </div>\n<div class=\"mobile-code-block\" data-language=\"javascript\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">javascript</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-javascript\">// Node.js example\nconst prometheus = require(&#039;prom-client&#039;);\nconst express = require(&#039;express&#039;);\n\n// Create metrics\nconst httpRequestDuration = new prometheus.Histogram({\n  name: &#039;http_request_duration_seconds&#039;,\n  help: &#039;Duration of HTTP requests in seconds&#039;,\n  labelNames: [&#039;method&#039;, &#039;route&#039;, &#039;status&#039;]\n});\n\nconst app = express();\n\n// Middleware to track metrics\napp.use((req, res, next) =&gt; {\n  const end = httpRequestDuration.startTimer();\n  res.on(&#039;finish&#039;, () =&gt; {\n    end({ method: req.method, route: req.path, status: res.statusCode });\n  });\n  next();\n});\n\n// Metrics endpoint\napp.get(&#039;/metrics&#039;, async (req, res) =&gt; {\n  res.set(&#039;Content-Type&#039;, prometheus.register.contentType);\n  res.end(await prometheus.register.metrics());\n});</code></pre>\n      </div>\n    </div>\n<div class=\"mobile-code-block\" data-language=\"go\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">go</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-go\">// Go example\npackage main\n\nimport (\n    &quot;net/http&quot;\n    &quot;github.com/prometheus/client_golang/prometheus&quot;\n    &quot;github.com/prometheus/client_golang/prometheus/promhttp&quot;\n)\n\nvar (\n    httpRequests = prometheus.NewCounterVec(\n        prometheus.CounterOpts{\n            Name: &quot;http_requests_total&quot;,\n            Help: &quot;Total number of HTTP requests&quot;,\n        },\n        []string{&quot;method&quot;, &quot;endpoint&quot;},\n    )\n)\n\nfunc init() {\n    prometheus.MustRegister(httpRequests)\n}\n\nfunc main() {\n    http.Handle(&quot;/metrics&quot;, promhttp.Handler())\n    http.HandleFunc(&quot;/&quot;, func(w http.ResponseWriter, r *http.Request) {\n        httpRequests.WithLabelValues(r.Method, r.URL.Path).Inc()\n        w.Write([]byte(&quot;Hello World&quot;))\n    })\n    http.ListenAndServe(&quot;:8080&quot;, nil)\n}</code></pre>\n      </div>\n    </div>\n<h2 id=\"additional-resources\" class=\"mobile-header\">Additional Resources</h2>\n<li class=\"mobile-list-item\"><a href=\"https://prometheus.io/docs/\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">Official Documentation</a></li>\n<li class=\"mobile-list-item\"><a href=\"https://github.com/prometheus/prometheus\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">GitHub Repository</a></li>\n<li class=\"mobile-list-item\"><a href=\"https://prometheus.io/docs/prometheus/latest/querying/basics/\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">PromQL Documentation</a></li>\n<li class=\"mobile-list-item\"><a href=\"https://prometheus.io/docs/practices/\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">Best Practices</a></li>\n<li class=\"mobile-list-item\"><a href=\"https://github.com/roaldnefs/awesome-prometheus\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">Awesome Prometheus</a></li>\n<li class=\"mobile-list-item\"><a href=\"https://github.com/prometheus-operator/prometheus-operator\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">Prometheus Operator</a></li>\n<li class=\"mobile-list-item\"><a href=\"https://prometheus.io/docs/instrumenting/exporters/\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">Exporters</a></li>\n<li class=\"mobile-list-item\"><a href=\"https://prometheus.io/community/\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">Community</a></li>\n<p class=\"mobile-paragraph\">---</p>\n<p class=\"mobile-paragraph\"><strong>Note:</strong> This guide is part of the <a href=\"https://howtomgr.github.io\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">HowToMgr</a> collection. Always refer to official documentation for the most up-to-date information.</p>","readTime":"16 min","wordCount":3072,"lastBuilt":"2025-09-14T18:12:01.958Z"},{"name":"prosody","displayName":"Prosody","slug":"prosody","description":"Repo for prosody","category":"infrastructure","language":null,"stars":0,"forks":0,"topics":[],"githubUrl":"https://github.com/howtomgr/prosody","updatedAt":"2025-09-08T03:14:59Z","createdAt":"2023-08-28T03:49:26Z","readmeRaw":"#### Prosody IM Server\n\n```shell\nmkdir -p /var/lib/docker/storage/prosody && chmod -Rf 777 /var/lib/docker/storage/prosody\ndocker run -d \\\n   -p 82:80\n   -p 5222:5222 \\\n   -p 5269:5269 \\\n   -p 5281:5281\n   -p 5347:5347 \\\n   -e LOCAL=admin \\\n   -e DOMAIN=MYDOMAIN \\\n   -e PASSWORD=juliet4ever \\\n   -v /var/lib/docker/storage/prosody/log:/var/log/prosody \\\n   -v /var/lib/docker/storage/prosody/configuration:/etc/prosody \\\n   -v /var/lib/docker/storage/prosody/modules:/usr/lib/prosody-modules \\\n   prosody/prosody\n```\n","readmeHtml":"<p class=\"mobile-paragraph\">#### Prosody IM Server</p>\n<div class=\"mobile-code-block\" data-language=\"shell\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">shell</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-shell\">mkdir -p /var/lib/docker/storage/prosody &amp;&amp; chmod -Rf 777 /var/lib/docker/storage/prosody\ndocker run -d \\\n   -p 82:80\n   -p 5222:5222 \\\n   -p 5269:5269 \\\n   -p 5281:5281\n   -p 5347:5347 \\\n   -e LOCAL=admin \\\n   -e DOMAIN=MYDOMAIN \\\n   -e PASSWORD=juliet4ever \\\n   -v /var/lib/docker/storage/prosody/log:/var/log/prosody \\\n   -v /var/lib/docker/storage/prosody/configuration:/etc/prosody \\\n   -v /var/lib/docker/storage/prosody/modules:/usr/lib/prosody-modules \\\n   prosody/prosody</code></pre>\n      </div>\n    </div>","readTime":"1 min","wordCount":51,"lastBuilt":"2025-09-14T18:12:13.095Z"},{"name":"proxmox","displayName":"Proxmox","slug":"proxmox","description":"Repo for proxmox","category":"infrastructure","language":null,"stars":0,"forks":0,"topics":[],"githubUrl":"https://github.com/howtomgr/proxmox","updatedAt":"2025-09-08T03:15:04Z","createdAt":"2023-08-28T03:49:36Z","readmeRaw":"# Install docker\n\n### ZFS\n\n```shell\nzfs create -o mountpoint=/var/lib/docker rpool/docker\nmkdir /etc/systemd/system/docker.service.d\ncurl -q -LSs https://github.com/casjay-base/howtos/raw/main/proxmox/storage-driver.conf >/etc/systemd/system/docker.service.d/storage-driver.conf\n```\n\n### Docker\n\n```shell\napt-get install -y apt-transport-https ca-certificates curl gnupg2 software-properties-common\ncurl -fsSL https://download.docker.com/linux/debian/gpg | apt-key add -\napt-key fingerprint 0EBFCD88\nadd-apt-repository \"deb [arch=amd64] https://download.docker.com/linux/debian $(lsb_release -cs) stable\"\napt-get update && apt-get install docker-ce -y\n```\n\n### Yacht\n\n```shell\nmkdir -p \"/root/.local/share/srv/docker/yacht/\"\nsudo docker run -d \\\n    --name=\"yacht\" \\\n    --hostname \"yacht\" \\\n    --restart=unless-stopped \\\n    --privileged \\\n    -e TZ=\"${TZ:-${TIMEZONE:-America/New_York}}\" \\\n    -v \"/root/.local/share/srv/docker/yacht/data\":/data \\\n    -v \"/root/.local/share/srv/docker/yacht/config\":/config \\\n    -p 8000:8000 \\\n    selfhostedpro/yacht 1>/dev/null\n```\n\n### Portainer\n\n```shell\nmkdir -p /root/.local/share/srv/docker/portainer/data\ndocker run -d -p 9000:9000 \\\n    --name portainer \\\n    -v /root/.local/share/srv/docker/portainer/data:/data \\\n    -v /var/run/docker.sock:/var/run/docker.sock \\\n    portainer/portainer-ce\n```\n\n### nginx\n\n```shell\nmkdir -p /root/.local/share/srv/docker/nginx-manager/files/{data,config,letsencrypt}\nsudo docker run -d \\\n    --name=\"nginx-manager\" \\\n    --hostname \"$HOSTNAME\" \\\n    --restart=unless-stopped \\\n    --privileged \\\n    -e TZ=\"America/New_York\" \\\n    -e DISABLE_IPV6=true \\\n    -v \"/root/.local/share/srv/docker/nginx-manager/data\":/data \\\n    -v \"/root/.local/share/srv/docker/nginx-manager/config\":/app/config \\\n    -v \"/root/.local/share/srv/docker/nginx-manager/letsencrypt\":/etc/letsencrypt \\\n    -p 80:80 \\\n    -p 8888:81 \\\n    -p 443:443 \\\n    jc21/nginx-proxy-manager:2\n```\n","readmeHtml":"<h1 id=\"install-docker\" class=\"mobile-header\">Install docker</h1>\n<h3 id=\"zfs\" class=\"mobile-header\">ZFS</h3>\n<div class=\"mobile-code-block\" data-language=\"shell\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">shell</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-shell\">zfs create -o mountpoint=/var/lib/docker rpool/docker\nmkdir /etc/systemd/system/docker.service.d\ncurl -q -LSs https://github.com/casjay-base/howtos/raw/main/proxmox/storage-driver.conf &gt;/etc/systemd/system/docker.service.d/storage-driver.conf</code></pre>\n      </div>\n    </div>\n<h3 id=\"docker\" class=\"mobile-header\">Docker</h3>\n<div class=\"mobile-code-block\" data-language=\"shell\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">shell</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-shell\">apt-get install -y apt-transport-https ca-certificates curl gnupg2 software-properties-common\ncurl -fsSL https://download.docker.com/linux/debian/gpg | apt-key add -\napt-key fingerprint 0EBFCD88\nadd-apt-repository &quot;deb [arch=amd64] https://download.docker.com/linux/debian $(lsb_release -cs) stable&quot;\napt-get update &amp;&amp; apt-get install docker-ce -y</code></pre>\n      </div>\n    </div>\n<h3 id=\"yacht\" class=\"mobile-header\">Yacht</h3>\n<div class=\"mobile-code-block\" data-language=\"shell\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">shell</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-shell\">mkdir -p &quot;/root/.local/share/srv/docker/yacht/&quot;\nsudo docker run -d \\\n    --name=&quot;yacht&quot; \\\n    --hostname &quot;yacht&quot; \\\n    --restart=unless-stopped \\\n    --privileged \\\n    -e TZ=&quot;${TZ:-${TIMEZONE:-America/New_York}}&quot; \\\n    -v &quot;/root/.local/share/srv/docker/yacht/data&quot;:/data \\\n    -v &quot;/root/.local/share/srv/docker/yacht/config&quot;:/config \\\n    -p 8000:8000 \\\n    selfhostedpro/yacht 1&gt;/dev/null</code></pre>\n      </div>\n    </div>\n<h3 id=\"portainer\" class=\"mobile-header\">Portainer</h3>\n<div class=\"mobile-code-block\" data-language=\"shell\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">shell</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-shell\">mkdir -p /root/.local/share/srv/docker/portainer/data\ndocker run -d -p 9000:9000 \\\n    --name portainer \\\n    -v /root/.local/share/srv/docker/portainer/data:/data \\\n    -v /var/run/docker.sock:/var/run/docker.sock \\\n    portainer/portainer-ce</code></pre>\n      </div>\n    </div>\n<h3 id=\"nginx\" class=\"mobile-header\">nginx</h3>\n<div class=\"mobile-code-block\" data-language=\"shell\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">shell</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-shell\">mkdir -p /root/.local/share/srv/docker/nginx-manager/files/{data,config,letsencrypt}\nsudo docker run -d \\\n    --name=&quot;nginx-manager&quot; \\\n    --hostname &quot;$HOSTNAME&quot; \\\n    --restart=unless-stopped \\\n    --privileged \\\n    -e TZ=&quot;America/New_York&quot; \\\n    -e DISABLE_IPV6=true \\\n    -v &quot;/root/.local/share/srv/docker/nginx-manager/data&quot;:/data \\\n    -v &quot;/root/.local/share/srv/docker/nginx-manager/config&quot;:/app/config \\\n    -v &quot;/root/.local/share/srv/docker/nginx-manager/letsencrypt&quot;:/etc/letsencrypt \\\n    -p 80:80 \\\n    -p 8888:81 \\\n    -p 443:443 \\\n    jc21/nginx-proxy-manager:2</code></pre>\n      </div>\n    </div>","readTime":"1 min","wordCount":160,"lastBuilt":"2025-09-14T18:12:12.708Z"},{"name":"rabbitmq","displayName":"Rabbitmq","slug":"rabbitmq","description":"Repo for rabbitmq","category":"infrastructure","language":null,"stars":0,"forks":0,"topics":[],"githubUrl":"https://github.com/howtomgr/rabbitmq","updatedAt":"2025-09-14T03:45:47Z","createdAt":"2025-09-08T03:15:11Z","readmeRaw":"# RabbitMQ Installation Guide\n\nRabbitMQ is a free and open-source message-queueing software and broker written in Erlang. Originally developed by Rabbit Technologies and now owned by VMware, RabbitMQ implements the Advanced Message Queuing Protocol (AMQP) and provides message routing, queuing, and delivery guarantees. It serves as a FOSS alternative to commercial message brokers like IBM MQ, Oracle WebLogic Server, or Microsoft Azure Service Bus, offering enterprise-grade reliability, clustering, and high availability without licensing costs, with features like message persistence, flexible routing, and cross-language support.\n\n## Prerequisites\n\n- **Hardware Requirements**:\n  - CPU: 2 cores minimum (4+ cores recommended for production)\n  - RAM: 1GB minimum (4GB+ recommended for production)\n  - Storage: 10GB minimum (SSD recommended for message persistence)\n  - Network: Stable connectivity for clustering setups\n- **Operating System**: \n  - Linux: Any modern distribution with kernel 3.2+\n  - macOS: 10.13+ (High Sierra or newer)\n  - Windows: Windows Server 2016+ or Windows 10\n  - FreeBSD: 11.0+\n- **Network Requirements**:\n  - Port 5672 (AMQP 0-9-1 and 1.0)\n  - Port 15672 (HTTP Management API)\n  - Port 25672 (Erlang distribution for clustering)\n  - Port 4369 (EPMD - Erlang Port Mapper Daemon)\n  - Port 35672-35682 (CLI tools)\n- **Dependencies**:\n  - Erlang/OTP (version 23.2+ for RabbitMQ 3.9+)\n  - systemd or compatible init system (Linux)\n  - Root or administrative access for installation\n- **System Access**: root or sudo privileges required\n\n## Installation\n\n### RHEL/CentOS/Rocky Linux/AlmaLinux\n\n```bash\n# Add RabbitMQ repository\ncurl -s https://packagecloud.io/install/repositories/rabbitmq/rabbitmq-server/script.rpm.sh | sudo bash\n\n# Add Erlang repository\ncurl -s https://packagecloud.io/install/repositories/rabbitmq/erlang/script.rpm.sh | sudo bash\n\n# Install Erlang\nsudo yum install -y erlang\n\n# Install RabbitMQ server\nsudo yum install -y rabbitmq-server\n\n# Enable and start service\nsudo systemctl enable --now rabbitmq-server\n\n# Enable management plugin\nsudo rabbitmq-plugins enable rabbitmq_management\n\n# Configure firewall\nsudo firewall-cmd --permanent --add-port=5672/tcp\nsudo firewall-cmd --permanent --add-port=15672/tcp\nsudo firewall-cmd --permanent --add-port=25672/tcp\nsudo firewall-cmd --reload\n\n# Create admin user\nsudo rabbitmqctl add_user admin SecureAdminPassword123!\nsudo rabbitmqctl set_user_tags admin administrator\nsudo rabbitmqctl set_permissions -p / admin \".*\" \".*\" \".*\"\n\n# Remove guest user (security)\nsudo rabbitmqctl delete_user guest\n```\n\n### Debian/Ubuntu\n\n```bash\n# Update package index\nsudo apt update\n\n# Install prerequisite packages\nsudo apt install -y curl gnupg apt-transport-https\n\n# Add RabbitMQ signing key\ncurl -fsSL https://keys.openpgp.org/vks/v1/by-fingerprint/0A9AF2115F4687BD29803A206B73A36E6026DFCA | sudo gpg --dearmor -o /usr/share/keyrings/com.rabbitmq.team.gpg\n\n# Add RabbitMQ repository\necho \"deb [signed-by=/usr/share/keyrings/com.rabbitmq.team.gpg] https://ppa1.novemberain.com/rabbitmq/rabbitmq-server/deb/ubuntu $(lsb_release -cs) main\" | sudo tee /etc/apt/sources.list.d/rabbitmq.list\n\n# Add Erlang repository\necho \"deb [signed-by=/usr/share/keyrings/com.rabbitmq.team.gpg] https://ppa1.novemberain.com/rabbitmq/rabbitmq-erlang/deb/ubuntu $(lsb_release -cs) main\" | sudo tee /etc/apt/sources.list.d/rabbitmq-erlang.list\n\n# Update package index\nsudo apt update\n\n# Install Erlang and RabbitMQ\nsudo apt install -y erlang-base erlang-asn1 erlang-crypto erlang-eldap erlang-ftp erlang-inets erlang-mnesia erlang-os-mon erlang-parsetools erlang-public-key erlang-runtime-tools erlang-snmp erlang-ssl erlang-syntax-tools erlang-tftp erlang-tools erlang-xmerl\nsudo apt install -y rabbitmq-server\n\n# Enable and start service\nsudo systemctl enable --now rabbitmq-server\n\n# Enable management plugin\nsudo rabbitmq-plugins enable rabbitmq_management\n\n# Configure firewall\nsudo ufw allow 5672\nsudo ufw allow 15672\n\n# Create admin user\nsudo rabbitmqctl add_user admin SecureAdminPassword123!\nsudo rabbitmqctl set_user_tags admin administrator\nsudo rabbitmqctl set_permissions -p / admin \".*\" \".*\" \".*\"\n\n# Remove guest user (security)\nsudo rabbitmqctl delete_user guest\n```\n\n### Arch Linux\n\n```bash\n# Install RabbitMQ from official repositories\nsudo pacman -S rabbitmq\n\n# Install Erlang (dependency)\nsudo pacman -S erlang-nox\n\n# Create rabbitmq user if not exists\nsudo useradd -r -s /sbin/nologin -d /var/lib/rabbitmq -c \"RabbitMQ messaging server\" rabbitmq\n\n# Enable and start service\nsudo systemctl enable --now rabbitmq\n\n# Enable management plugin\nsudo rabbitmq-plugins enable rabbitmq_management\n\n# Create admin user\nsudo rabbitmqctl add_user admin SecureAdminPassword123!\nsudo rabbitmqctl set_user_tags admin administrator\nsudo rabbitmqctl set_permissions -p / admin \".*\" \".*\" \".*\"\n\n# Remove guest user (security)\nsudo rabbitmqctl delete_user guest\n\n# Configuration location: /etc/rabbitmq/\n```\n\n### Alpine Linux\n\n```bash\n# Install RabbitMQ\napk add --no-cache rabbitmq-server rabbitmq-server-management\n\n# Install Erlang\napk add --no-cache erlang\n\n# Create rabbitmq user if not exists\nadduser -D -H -s /sbin/nologin -G rabbitmq rabbitmq\n\n# Set permissions\nchown -R rabbitmq:rabbitmq /var/lib/rabbitmq /var/log/rabbitmq\n\n# Enable and start service\nrc-update add rabbitmq default\nrc-service rabbitmq start\n\n# Enable management plugin\nrabbitmq-plugins enable rabbitmq_management\n\n# Create admin user\nrabbitmqctl add_user admin SecureAdminPassword123!\nrabbitmqctl set_user_tags admin administrator\nrabbitmqctl set_permissions -p / admin \".*\" \".*\" \".*\"\n\n# Remove guest user (security)\nrabbitmqctl delete_user guest\n```\n\n### openSUSE/SLES\n\n```bash\n# openSUSE Leap/Tumbleweed\nsudo zypper install -y rabbitmq-server erlang\n\n# SLES 15\nsudo SUSEConnect -p sle-module-server-applications/15.5/x86_64\nsudo zypper install -y rabbitmq-server erlang\n\n# Enable and start service\nsudo systemctl enable --now rabbitmq-server\n\n# Enable management plugin\nsudo rabbitmq-plugins enable rabbitmq_management\n\n# Configure firewall\nsudo firewall-cmd --permanent --add-port=5672/tcp\nsudo firewall-cmd --permanent --add-port=15672/tcp\nsudo firewall-cmd --reload\n\n# Create admin user\nsudo rabbitmqctl add_user admin SecureAdminPassword123!\nsudo rabbitmqctl set_user_tags admin administrator\nsudo rabbitmqctl set_permissions -p / admin \".*\" \".*\" \".*\"\n\n# Remove guest user (security)\nsudo rabbitmqctl delete_user guest\n```\n\n### macOS\n\n```bash\n# Using Homebrew\nbrew install rabbitmq\n\n# Start RabbitMQ service\nbrew services start rabbitmq\n\n# Or run manually\nsudo rabbitmq-server\n\n# Enable management plugin\nsudo rabbitmq-plugins enable rabbitmq_management\n\n# Create admin user\nsudo rabbitmqctl add_user admin SecureAdminPassword123!\nsudo rabbitmqctl set_user_tags admin administrator\nsudo rabbitmqctl set_permissions -p / admin \".*\" \".*\" \".*\"\n\n# Remove guest user (security)\nsudo rabbitmqctl delete_user guest\n\n# Configuration location: /usr/local/etc/rabbitmq/\n# Alternative: /opt/homebrew/etc/rabbitmq/ (Apple Silicon)\n```\n\n### FreeBSD\n\n```bash\n# Using pkg\npkg install rabbitmq erlang\n\n# Using ports\ncd /usr/ports/net/rabbitmq\nmake install clean\n\n# Enable RabbitMQ\necho 'rabbitmq_enable=\"YES\"' >> /etc/rc.conf\n\n# Start service\nservice rabbitmq start\n\n# Enable management plugin\nrabbitmq-plugins enable rabbitmq_management\n\n# Create admin user\nrabbitmqctl add_user admin SecureAdminPassword123!\nrabbitmqctl set_user_tags admin administrator\nrabbitmqctl set_permissions -p / admin \".*\" \".*\" \".*\"\n\n# Remove guest user (security)\nrabbitmqctl delete_user guest\n\n# Configuration location: /usr/local/etc/rabbitmq/\n```\n\n### Windows\n\n```powershell\n# Method 1: Using Chocolatey\nchoco install rabbitmq\n\n# Method 2: Using Scoop\nscoop install rabbitmq\n\n# Method 3: Manual installation\n# Download from https://www.rabbitmq.com/download.html\n# Install Erlang first, then RabbitMQ\n\n# Install as Windows service (automatic with installer)\n# The service is named \"RabbitMQ\"\n\n# Enable management plugin\nrabbitmq-plugins.bat enable rabbitmq_management\n\n# Create admin user\nrabbitmqctl.bat add_user admin SecureAdminPassword123!\nrabbitmqctl.bat set_user_tags admin administrator\nrabbitmqctl.bat set_permissions -p / admin \".*\" \".*\" \".*\"\n\n# Remove guest user (security)\nrabbitmqctl.bat delete_user guest\n\n# Configuration location: %APPDATA%\\RabbitMQ\\\n```\n\n## Initial Configuration\n\n### First-Run Setup\n\n1. **Create rabbitmq user** (if not created by package):\n```bash\n# Linux systems\nsudo useradd -r -d /var/lib/rabbitmq -s /sbin/nologin -c \"RabbitMQ messaging server\" rabbitmq\n```\n\n2. **Default configuration locations**:\n- RHEL/CentOS/Rocky/AlmaLinux: `/etc/rabbitmq/rabbitmq.conf`\n- Debian/Ubuntu: `/etc/rabbitmq/rabbitmq.conf`\n- Arch Linux: `/etc/rabbitmq/rabbitmq.conf`\n- Alpine Linux: `/etc/rabbitmq/rabbitmq.conf`\n- openSUSE/SLES: `/etc/rabbitmq/rabbitmq.conf`\n- macOS: `/usr/local/etc/rabbitmq/rabbitmq.conf`\n- FreeBSD: `/usr/local/etc/rabbitmq/rabbitmq.conf`\n- Windows: `%APPDATA%\\RabbitMQ\\rabbitmq.conf`\n\n3. **Essential settings to change**:\n\n```ini\n# /etc/rabbitmq/rabbitmq.conf\n# Network and clustering\nlisteners.tcp.default = 5672\nmanagement.tcp.port = 15672\n\n# Security\nloopback_users.guest = false\ndefault_user = admin\ndefault_pass = SecureAdminPassword123!\n\n# Logging\nlog.file.level = info\nlog.file = /var/log/rabbitmq/rabbitmq.log\nlog.file.rotation.size = 10485760\n\n# Memory and disk limits\nvm_memory_high_watermark.relative = 0.6\ndisk_free_limit.absolute = 1GB\n\n# Message TTL and limits\ndefault_user_tags.administrator = true\nheartbeat = 60\n\n# Clustering (if multiple nodes)\ncluster_formation.peer_discovery_backend = rabbit_peer_discovery_classic_config\ncluster_formation.classic_config.nodes.1 = rabbit@node1\ncluster_formation.classic_config.nodes.2 = rabbit@node2\n```\n\n### Testing Initial Setup\n\n```bash\n# Check if RabbitMQ is running\nsudo systemctl status rabbitmq-server\n\n# Test connection\nrabbitmqctl status\n\n# Check cluster status\nrabbitmqctl cluster_status\n\n# List users\nrabbitmqctl list_users\n\n# List virtual hosts\nrabbitmqctl list_vhosts\n\n# Test management interface\ncurl -u admin:SecureAdminPassword123! http://localhost:15672/api/overview\n\n# Test AMQP connection\nrabbitmqctl eval 'rabbit_networking:tcp_listener_started(5672).'\n```\n\n**WARNING:** Remove or disable the default guest user and enable proper authentication!\n\n## Service Management\n\n### systemd (RHEL, Debian, Ubuntu, Arch, openSUSE)\n\n```bash\n# Enable RabbitMQ to start on boot\nsudo systemctl enable rabbitmq-server\n\n# Start RabbitMQ\nsudo systemctl start rabbitmq-server\n\n# Stop RabbitMQ\nsudo systemctl stop rabbitmq-server\n\n# Restart RabbitMQ\nsudo systemctl restart rabbitmq-server\n\n# Reload configuration (graceful)\nsudo rabbitmqctl eval 'application:stop(rabbitmq_management_agent), application:start(rabbitmq_management_agent).'\n\n# Check status\nsudo systemctl status rabbitmq-server\n\n# View logs\nsudo journalctl -u rabbitmq-server -f\n```\n\n### OpenRC (Alpine Linux)\n\n```bash\n# Enable RabbitMQ to start on boot\nrc-update add rabbitmq default\n\n# Start RabbitMQ\nrc-service rabbitmq start\n\n# Stop RabbitMQ\nrc-service rabbitmq stop\n\n# Restart RabbitMQ\nrc-service rabbitmq restart\n\n# Check status\nrc-service rabbitmq status\n\n# View logs\ntail -f /var/log/rabbitmq/rabbit@$(hostname).log\n```\n\n### rc.d (FreeBSD)\n\n```bash\n# Enable in /etc/rc.conf\necho 'rabbitmq_enable=\"YES\"' >> /etc/rc.conf\n\n# Start RabbitMQ\nservice rabbitmq start\n\n# Stop RabbitMQ\nservice rabbitmq stop\n\n# Restart RabbitMQ\nservice rabbitmq restart\n\n# Check status\nservice rabbitmq status\n```\n\n### launchd (macOS)\n\n```bash\n# Using Homebrew services\nbrew services start rabbitmq\nbrew services stop rabbitmq\nbrew services restart rabbitmq\n\n# Check status\nbrew services list | grep rabbitmq\n\n# Manual control\nsudo rabbitmq-server -detached\nsudo rabbitmqctl shutdown\n```\n\n### Windows Service Manager\n\n```powershell\n# Start RabbitMQ service\nnet start RabbitMQ\n\n# Stop RabbitMQ service\nnet stop RabbitMQ\n\n# Using PowerShell\nStart-Service RabbitMQ\nStop-Service RabbitMQ\nRestart-Service RabbitMQ\n\n# Check status\nGet-Service RabbitMQ\n\n# View logs\nGet-EventLog -LogName Application -Source RabbitMQ\n```\n\n## Advanced Configuration\n\n### High Availability Configuration\n\n```ini\n# Cluster configuration\ncluster_formation.peer_discovery_backend = rabbit_peer_discovery_classic_config\ncluster_formation.classic_config.nodes.1 = rabbit@rabbitmq-1\ncluster_formation.classic_config.nodes.2 = rabbit@rabbitmq-2\ncluster_formation.classic_config.nodes.3 = rabbit@rabbitmq-3\n\n# Enable quorum queues by default\ndefault_queue_type = quorum\n\n# HA policy for classic queues\nqueue_master_locator = min-masters\n```\n\n### Advanced Security Settings\n\n```ini\n# SSL/TLS configuration\nlisteners.ssl.default = 5671\nssl_options.cacertfile = /etc/rabbitmq/ssl/ca_certificate.pem\nssl_options.certfile = /etc/rabbitmq/ssl/server_certificate.pem\nssl_options.keyfile = /etc/rabbitmq/ssl/server_key.pem\nssl_options.verify = verify_peer\nssl_options.fail_if_no_peer_cert = true\n\n# Management over HTTPS\nmanagement.ssl.port = 15671\nmanagement.ssl.cacertfile = /etc/rabbitmq/ssl/ca_certificate.pem\nmanagement.ssl.certfile = /etc/rabbitmq/ssl/server_certificate.pem\nmanagement.ssl.keyfile = /etc/rabbitmq/ssl/server_key.pem\n\n# Authentication backends\nauth_backends.1 = rabbit_auth_backend_ldap\nauth_backends.2 = rabbit_auth_backend_internal\n\n# LDAP configuration\nauth_ldap.servers.1 = ldap.example.com\nauth_ldap.user_dn_pattern = cn=${username},ou=users,dc=example,dc=com\n```\n\n## Reverse Proxy Setup\n\n### nginx Configuration\n\n```nginx\n# /etc/nginx/sites-available/rabbitmq\nupstream rabbitmq_management {\n    server 127.0.0.1:15672 max_fails=3 fail_timeout=30s;\n    server 127.0.0.1:15673 max_fails=3 fail_timeout=30s backup;\n}\n\nserver {\n    listen 80;\n    server_name rabbitmq.example.com;\n    return 301 https://$server_name$request_uri;\n}\n\nserver {\n    listen 443 ssl http2;\n    server_name rabbitmq.example.com;\n\n    ssl_certificate /etc/letsencrypt/live/rabbitmq.example.com/fullchain.pem;\n    ssl_certificate_key /etc/letsencrypt/live/rabbitmq.example.com/privkey.pem;\n\n    location / {\n        proxy_pass http://rabbitmq_management;\n        proxy_set_header Host $host;\n        proxy_set_header X-Real-IP $remote_addr;\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n        proxy_set_header X-Forwarded-Proto $scheme;\n        \n        # WebSocket support for management UI\n        proxy_http_version 1.1;\n        proxy_set_header Upgrade $http_upgrade;\n        proxy_set_header Connection \"upgrade\";\n    }\n}\n```\n\n### HAProxy Configuration\n\n```haproxy\n# /etc/haproxy/haproxy.cfg\nfrontend rabbitmq_management_frontend\n    bind *:80\n    bind *:443 ssl crt /etc/ssl/certs/rabbitmq.pem\n    redirect scheme https if !{ ssl_fc }\n    default_backend rabbitmq_management_servers\n\nbackend rabbitmq_management_servers\n    mode http\n    balance roundrobin\n    option httpchk GET /api/aliveness-test/%2F\n    server rabbitmq1 127.0.0.1:15672 check\n    server rabbitmq2 127.0.0.1:15673 check backup\n\nfrontend rabbitmq_amqp_frontend\n    bind *:5672\n    mode tcp\n    default_backend rabbitmq_amqp_servers\n\nbackend rabbitmq_amqp_servers\n    mode tcp\n    balance roundrobin\n    server rabbitmq1 127.0.0.1:5672 check\n    server rabbitmq2 127.0.0.1:5673 check backup\n```\n\n## Security Configuration\n\n### SSL/TLS Setup\n\n```bash\n# Generate SSL certificates for RabbitMQ\nsudo mkdir -p /etc/rabbitmq/ssl\n\n# Create CA certificate\nsudo openssl genrsa -out /etc/rabbitmq/ssl/ca_key.pem 4096\nsudo openssl req -new -x509 -days 3650 -key /etc/rabbitmq/ssl/ca_key.pem -out /etc/rabbitmq/ssl/ca_certificate.pem -subj \"/C=US/ST=State/L=City/O=Organization/CN=RabbitMQ-CA\"\n\n# Create server certificate\nsudo openssl genrsa -out /etc/rabbitmq/ssl/server_key.pem 4096\nsudo openssl req -new -key /etc/rabbitmq/ssl/server_key.pem -out /etc/rabbitmq/ssl/server_certificate_request.pem -subj \"/C=US/ST=State/L=City/O=Organization/CN=rabbitmq.example.com\"\nsudo openssl x509 -req -in /etc/rabbitmq/ssl/server_certificate_request.pem -CA /etc/rabbitmq/ssl/ca_certificate.pem -CAkey /etc/rabbitmq/ssl/ca_key.pem -CAcreateserial -out /etc/rabbitmq/ssl/server_certificate.pem -days 365\n\n# Create client certificate\nsudo openssl genrsa -out /etc/rabbitmq/ssl/client_key.pem 4096\nsudo openssl req -new -key /etc/rabbitmq/ssl/client_key.pem -out /etc/rabbitmq/ssl/client_certificate_request.pem -subj \"/C=US/ST=State/L=City/O=Organization/CN=rabbitmq-client\"\nsudo openssl x509 -req -in /etc/rabbitmq/ssl/client_certificate_request.pem -CA /etc/rabbitmq/ssl/ca_certificate.pem -CAkey /etc/rabbitmq/ssl/ca_key.pem -CAcreateserial -out /etc/rabbitmq/ssl/client_certificate.pem -days 365\n\n# Set permissions\nsudo chown -R rabbitmq:rabbitmq /etc/rabbitmq/ssl\nsudo chmod 600 /etc/rabbitmq/ssl/*_key.pem\nsudo chmod 644 /etc/rabbitmq/ssl/*_certificate.pem /etc/rabbitmq/ssl/ca_certificate.pem\n```\n\n### User Management and Access Control\n\n```bash\n# Create application user\nsudo rabbitmqctl add_user myapp SecureAppPassword123!\nsudo rabbitmqctl set_permissions -p / myapp \"myapp\\..*\" \"myapp\\..*\" \"myapp\\..*\"\n\n# Create monitoring user\nsudo rabbitmqctl add_user monitoring MonitorPassword123!\nsudo rabbitmqctl set_user_tags monitoring monitoring\nsudo rabbitmqctl set_permissions -p / monitoring \"\" \"\" \".*\"\n\n# Create backup user\nsudo rabbitmqctl add_user backup BackupPassword123!\nsudo rabbitmqctl set_user_tags backup management\nsudo rabbitmqctl set_permissions -p / backup \"\" \"\" \".*\"\n\n# Create virtual hosts\nsudo rabbitmqctl add_vhost production\nsudo rabbitmqctl add_vhost staging\n\n# Set permissions for virtual hosts\nsudo rabbitmqctl set_permissions -p production myapp \".*\" \".*\" \".*\"\nsudo rabbitmqctl set_permissions -p staging myapp \".*\" \".*\" \".*\"\n\n# Set resource limits\nsudo rabbitmqctl set_user_limits myapp '{\"max-connections\": 100, \"max-channels\": 1000}'\n```\n\n### Firewall Rules\n\n```bash\n# UFW (Ubuntu/Debian)\nsudo ufw allow from 192.168.1.0/24 to any port 5672\nsudo ufw allow from 192.168.1.0/24 to any port 15672\nsudo ufw reload\n\n# firewalld (RHEL/CentOS/openSUSE)\nsudo firewall-cmd --permanent --new-zone=rabbitmq\nsudo firewall-cmd --permanent --zone=rabbitmq --add-source=192.168.1.0/24\nsudo firewall-cmd --permanent --zone=rabbitmq --add-port=5672/tcp\nsudo firewall-cmd --permanent --zone=rabbitmq --add-port=15672/tcp\nsudo firewall-cmd --permanent --zone=rabbitmq --add-port=25672/tcp\nsudo firewall-cmd --reload\n\n# iptables\nsudo iptables -A INPUT -s 192.168.1.0/24 -p tcp --dport 5672 -j ACCEPT\nsudo iptables -A INPUT -s 192.168.1.0/24 -p tcp --dport 15672 -j ACCEPT\nsudo iptables -save > /etc/iptables/rules.v4\n\n# pf (FreeBSD)\n# Add to /etc/pf.conf\npass in on $ext_if proto tcp from 192.168.1.0/24 to any port {5672, 15672, 25672}\n\n# Windows Firewall\nNew-NetFirewallRule -DisplayName \"RabbitMQ AMQP\" -Direction Inbound -Protocol TCP -LocalPort 5672 -RemoteAddress 192.168.1.0/24 -Action Allow\nNew-NetFirewallRule -DisplayName \"RabbitMQ Management\" -Direction Inbound -Protocol TCP -LocalPort 15672 -RemoteAddress 192.168.1.0/24 -Action Allow\n```\n\n## Database Setup\n\n### Queue and Exchange Configuration\n\n```bash\n# Create exchanges\nrabbitmqctl eval 'rabbit_exchange:declare({resource, <<\"/\">>, exchange, <<\"logs\">>}, topic, true, false, false, []).'\nrabbitmqctl eval 'rabbit_exchange:declare({resource, <<\"/\">>, exchange, <<\"tasks\">>}, direct, true, false, false, []).'\n\n# Create queues\nrabbitmqctl eval 'rabbit_amqqueue:declare({resource, <<\"/\">>, queue, <<\"error_logs\">>}, true, false, [], none, <<\"/\">>).'\nrabbitmqctl eval 'rabbit_amqqueue:declare({resource, <<\"/\">>, queue, <<\"task_queue\">>}, true, false, [], none, <<\"/\">>).'\n\n# Create bindings\nrabbitmqctl eval 'rabbit_binding:add({binding, {resource, <<\"/\">>, exchange, <<\"logs\">>}, <<\"error\">>, {resource, <<\"/\">>, queue, <<\"error_logs\">>}, []}).'\n\n# Set queue policies for HA\nsudo rabbitmqctl set_policy ha-all \".*\" '{\"ha-mode\":\"all\",\"ha-sync-mode\":\"automatic\"}'\n\n# Set TTL policy\nsudo rabbitmqctl set_policy TTL \".*\" '{\"message-ttl\":3600000}' --apply-to queues\n\n# Set queue length limit\nsudo rabbitmqctl set_policy max-length \".*\" '{\"max-length\":10000}' --apply-to queues\n```\n\n### Shovel Configuration (Message Transfer)\n\n```bash\n# Install shovel plugin\nsudo rabbitmq-plugins enable rabbitmq_shovel\nsudo rabbitmq-plugins enable rabbitmq_shovel_management\n\n# Create shovel (via management API)\ncurl -u admin:SecureAdminPassword123! -X PUT \\\n  http://localhost:15672/api/parameters/shovel/%2F/my-shovel \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\n    \"value\": {\n      \"src-protocol\": \"amqp091\",\n      \"src-uri\": \"amqp://guest:guest@source-server:5672/%2F\",\n      \"src-queue\": \"source-queue\",\n      \"dest-protocol\": \"amqp091\",\n      \"dest-uri\": \"amqp://guest:guest@dest-server:5672/%2F\",\n      \"dest-queue\": \"dest-queue\"\n    }\n  }'\n```\n\n## Performance Optimization\n\n### System Tuning\n\n```bash\n# RabbitMQ-specific system optimizations\nsudo tee -a /etc/sysctl.conf <<EOF\n# RabbitMQ optimizations\nvm.swappiness = 1\nnet.core.somaxconn = 4096\nnet.ipv4.tcp_fin_timeout = 30\nnet.ipv4.tcp_tw_reuse = 1\nfs.file-max = 100000\nEOF\n\nsudo sysctl -p\n\n# Increase file descriptor limits\nsudo tee -a /etc/security/limits.conf <<EOF\nrabbitmq soft nofile 65536\nrabbitmq hard nofile 65536\nEOF\n\n# Set Erlang VM parameters\nsudo tee /etc/rabbitmq/rabbitmq-env.conf <<EOF\nRABBITMQ_SERVER_ERL_ARGS=\"+K true +A 128 +P 1048576\"\nRABBITMQ_CTL_ERL_ARGS=\"+K true\"\nEOF\n```\n\n### RabbitMQ Performance Configuration\n\n```ini\n# High-performance RabbitMQ configuration\n# /etc/rabbitmq/rabbitmq.conf\n\n# Memory and disk\nvm_memory_high_watermark.relative = 0.4\nvm_memory_high_watermark_paging_ratio = 0.3\ndisk_free_limit.absolute = 2GB\n\n# Clustering and replication\ncluster_partition_handling = pause_minority\ncluster_keepalive_interval = 10000\n\n# Connection and channel limits\nconnection_max = 65536\nchannel_max = 2047\n\n# Message store\nmsg_store_file_size_limit = 16777216\nqueue_index_embed_msgs_below = 4096\n\n# Lazy queues (for large queues)\nlazy_queue_explicit_gc_run_operation_threshold = 1000\n\n# Mnesia table loading\nmnesia_table_loading_retry_timeout = 30000\nmnesia_table_loading_retry_limit = 10\n```\n\n### Queue Optimization\n\n```bash\n# Enable lazy queues for large message backlogs\nrabbitmqctl set_policy lazy-queue \".*\" '{\"queue-mode\":\"lazy\"}' --apply-to queues\n\n# Configure quorum queues for better consistency\nrabbitmqctl set_policy quorum-queue \".*\" '{\"queue-type\":\"quorum\"}' --apply-to queues\n\n# Set delivery limits to prevent poison messages\nrabbitmqctl set_policy delivery-limit \".*\" '{\"delivery-limit\":10}' --apply-to queues\n\n# Configure stream queues for high throughput\nrabbitmqctl set_policy stream-queue \"stream.*\" '{\"queue-type\":\"stream\"}' --apply-to queues\n```\n\n## Monitoring\n\n### Built-in Monitoring\n\n```bash\n# Node status and statistics\nrabbitmqctl status\nrabbitmqctl node_health_check\nrabbitmqctl environment\n\n# Queue monitoring\nrabbitmqctl list_queues name messages consumers memory\nrabbitmqctl list_exchanges name type\nrabbitmqctl list_bindings\n\n# Connection monitoring\nrabbitmqctl list_connections peer_host peer_port state channels\nrabbitmqctl list_channels connection name consumer_count messages_unacknowledged\n\n# Cluster monitoring\nrabbitmqctl cluster_status\nrabbitmqctl list_cluster_nodes\n\n# Memory and disk usage\nrabbitmqctl eval 'rabbit_vm:memory().'\nrabbitmqctl eval 'rabbit_disk_monitor:get_disk_free().'\n```\n\n### External Monitoring Setup\n\n```bash\n# Install RabbitMQ Exporter for Prometheus\nwget https://github.com/kbudde/rabbitmq_exporter/releases/download/v1.0.0/rabbitmq_exporter-1.0.0.linux-amd64.tar.gz\ntar xzf rabbitmq_exporter-*.tar.gz\nsudo cp rabbitmq_exporter /usr/local/bin/\n\n# Create monitoring user in RabbitMQ\nsudo rabbitmqctl add_user prometheus PrometheusPassword123!\nsudo rabbitmqctl set_user_tags prometheus monitoring\n\n# Create systemd service\nsudo tee /etc/systemd/system/rabbitmq_exporter.service <<EOF\n[Unit]\nDescription=RabbitMQ Exporter\nAfter=network.target\n\n[Service]\nType=simple\nUser=rabbitmq\nEnvironment=RABBIT_URL=\"http://prometheus:PrometheusPassword123!@localhost:15672\"\nExecStart=/usr/local/bin/rabbitmq_exporter\nRestart=always\n\n[Install]\nWantedBy=multi-user.target\nEOF\n\nsudo systemctl enable --now rabbitmq_exporter\n```\n\n### Health Check Scripts\n\n```bash\n#!/bin/bash\n# rabbitmq-health-check.sh\n\n# Check RabbitMQ service\nif ! systemctl is-active rabbitmq-server >/dev/null 2>&1; then\n    echo \"CRITICAL: RabbitMQ service is not running\"\n    exit 2\nfi\n\n# Check node health\nif ! rabbitmqctl node_health_check >/dev/null 2>&1; then\n    echo \"CRITICAL: RabbitMQ node health check failed\"\n    exit 2\nfi\n\n# Check cluster status\nCLUSTER_STATUS=$(rabbitmqctl cluster_status --formatter json 2>/dev/null | jq -r '.running_nodes | length')\nif [ \"$CLUSTER_STATUS\" -lt 2 ]; then\n    echo \"WARNING: Less than 2 nodes running in cluster\"\n    exit 1\nfi\n\n# Check memory usage\nMEMORY_ALARM=$(rabbitmqctl status --formatter json 2>/dev/null | jq -r '.alarms | length')\nif [ \"$MEMORY_ALARM\" -gt 0 ]; then\n    echo \"WARNING: Memory alarms detected\"\n    exit 1\nfi\n\n# Check disk space\nDISK_ALARM=$(rabbitmqctl status --formatter json 2>/dev/null | jq -r '.disk_free_alarm')\nif [ \"$DISK_ALARM\" = \"true\" ]; then\n    echo \"WARNING: Disk space alarm active\"\n    exit 1\nfi\n\n# Check queue lengths\nMAX_QUEUE_LENGTH=$(rabbitmqctl list_queues messages --formatter json 2>/dev/null | jq -r 'max_by(.messages).messages')\nif [ \"$MAX_QUEUE_LENGTH\" -gt 100000 ]; then\n    echo \"WARNING: Queue length exceeds 100,000 messages\"\n    exit 1\nfi\n\necho \"OK: RabbitMQ is healthy\"\nexit 0\n```\n\n## Backup and Restore\n\n### Backup Procedures\n\n```bash\n#!/bin/bash\n# rabbitmq-backup.sh\n\nBACKUP_DIR=\"/backup/rabbitmq/$(date +%Y%m%d_%H%M%S)\"\nmkdir -p \"$BACKUP_DIR\"\n\n# Export definitions (exchanges, queues, users, policies)\ncurl -u admin:SecureAdminPassword123! \\\n    http://localhost:15672/api/definitions \\\n    -o \"$BACKUP_DIR/definitions.json\"\n\n# Export queue messages (if needed for small queues)\nrabbitmqctl eval \"\n    application:load(rabbitmq_management_agent),\n    rabbitmq_management_db:get_all_queues(all_vhosts).\n\" > \"$BACKUP_DIR/queue_stats.txt\"\n\n# Backup configuration files\ntar czf \"$BACKUP_DIR/rabbitmq-config.tar.gz\" \\\n    /etc/rabbitmq/ \\\n    --exclude='*.log' \\\n    --exclude='*.pid'\n\n# Backup SSL certificates\nif [ -d /etc/rabbitmq/ssl ]; then\n    tar czf \"$BACKUP_DIR/rabbitmq-ssl.tar.gz\" /etc/rabbitmq/ssl/\nfi\n\n# Save cluster information\nrabbitmqctl cluster_status > \"$BACKUP_DIR/cluster_status.txt\"\nrabbitmqctl status > \"$BACKUP_DIR/node_status.txt\"\n\n# Create manifest\necho \"RabbitMQ Backup - $(date)\" > \"$BACKUP_DIR/backup_manifest.txt\"\necho \"Node: $(hostname)\" >> \"$BACKUP_DIR/backup_manifest.txt\"\necho \"Version: $(rabbitmqctl version)\" >> \"$BACKUP_DIR/backup_manifest.txt\"\n\necho \"Backup completed: $BACKUP_DIR\"\n```\n\n### Restore Procedures\n\n```bash\n#!/bin/bash\n# rabbitmq-restore.sh\n\nBACKUP_DIR=\"$1\"\nif [ -z \"$BACKUP_DIR\" ]; then\n    echo \"Usage: $0 <backup-directory>\"\n    exit 1\nfi\n\n# Stop RabbitMQ (ensure clean state)\nsudo systemctl stop rabbitmq-server\n\n# Restore configuration\nsudo tar xzf \"$BACKUP_DIR/rabbitmq-config.tar.gz\" -C /\n\n# Restore SSL certificates\nif [ -f \"$BACKUP_DIR/rabbitmq-ssl.tar.gz\" ]; then\n    sudo tar xzf \"$BACKUP_DIR/rabbitmq-ssl.tar.gz\" -C /\nfi\n\n# Start RabbitMQ\nsudo systemctl start rabbitmq-server\n\n# Wait for RabbitMQ to start\nsleep 10\n\n# Import definitions\ncurl -u admin:SecureAdminPassword123! \\\n    -X POST \\\n    -H \"Content-Type: application/json\" \\\n    -d @\"$BACKUP_DIR/definitions.json\" \\\n    http://localhost:15672/api/definitions\n\n# Verify restore\nrabbitmqctl list_queues\nrabbitmqctl list_users\n\necho \"Restore completed from $BACKUP_DIR\"\n```\n\n### Message-Level Backup (Advanced)\n\n```bash\n#!/bin/bash\n# rabbitmq-message-backup.sh\n\nBACKUP_DIR=\"/backup/rabbitmq-messages/$(date +%Y%m%d_%H%M%S)\"\nmkdir -p \"$BACKUP_DIR\"\n\n# Install shovel plugin for message transfer\nrabbitmq-plugins enable rabbitmq_shovel\nrabbitmq-plugins enable rabbitmq_shovel_management\n\n# Backup messages from all queues\nrabbitmqctl list_queues name --formatter json | jq -r '.[].name' | while read -r queue; do\n    if [ \"$queue\" != \"null\" ]; then\n        # Create shovel to backup queue\n        curl -u admin:SecureAdminPassword123! -X PUT \\\n            \"http://localhost:15672/api/parameters/shovel/%2F/backup-$queue\" \\\n            -H \"Content-Type: application/json\" \\\n            -d \"{\n                \\\"value\\\": {\n                    \\\"src-protocol\\\": \\\"amqp091\\\",\n                    \\\"src-uri\\\": \\\"amqp://admin:SecureAdminPassword123!@localhost:5672/%2F\\\",\n                    \\\"src-queue\\\": \\\"$queue\\\",\n                    \\\"dest-protocol\\\": \\\"amqp091\\\",\n                    \\\"dest-uri\\\": \\\"amqp://backup:BackupPassword123!@backup-server:5672/%2F\\\",\n                    \\\"dest-queue\\\": \\\"backup-$queue\\\"\n                }\n            }\"\n    fi\ndone\n\necho \"Message backup shovels created for all queues\"\n```\n\n## Troubleshooting\n\n### Common Issues\n\n1. **RabbitMQ won't start**:\n```bash\n# Check logs\nsudo journalctl -u rabbitmq-server -f\nsudo tail -f /var/log/rabbitmq/rabbit@$(hostname).log\n\n# Check Erlang installation\nerl -version\n\n# Check disk space\ndf -h /var/lib/rabbitmq\n\n# Check permissions\nls -la /var/lib/rabbitmq\nls -la /var/log/rabbitmq\n\n# Reset node (last resort)\nsudo rabbitmqctl stop_app\nsudo rabbitmqctl reset\nsudo rabbitmqctl start_app\n```\n\n2. **Cluster issues**:\n```bash\n# Check cluster status\nrabbitmqctl cluster_status\n\n# Check network connectivity between nodes\ntelnet rabbitmq-node-2 25672\n\n# Check Erlang cookie consistency\nsudo cat /var/lib/rabbitmq/.erlang.cookie\n\n# Force cluster join\nsudo rabbitmqctl stop_app\nsudo rabbitmqctl join_cluster rabbit@rabbitmq-node-1\nsudo rabbitmqctl start_app\n```\n\n3. **Memory/disk alarms**:\n```bash\n# Check alarms\nrabbitmqctl status | grep alarms\n\n# Check memory usage\nrabbitmqctl eval 'rabbit_vm:memory().'\n\n# Check disk usage\ndf -h /var/lib/rabbitmq\n\n# Clear memory alarm (after fixing issue)\nrabbitmqctl eval 'vm_memory_monitor:set_vm_memory_high_watermark(0.4).'\n```\n\n4. **Connection issues**:\n```bash\n# Check if RabbitMQ is listening\nsudo ss -tlnp | grep :5672\n\n# Test AMQP connection\nrabbitmqctl eval 'rabbit_networking:tcp_listener_started(5672).'\n\n# Check user permissions\nrabbitmqctl list_user_permissions admin\n\n# Test with management API\ncurl -u admin:SecureAdminPassword123! http://localhost:15672/api/overview\n```\n\n### Debug Mode\n\n```bash\n# Enable debug logging\necho 'log.file.level = debug' >> /etc/rabbitmq/rabbitmq.conf\n\n# Enable connection logging\necho 'log.connection.level = debug' >> /etc/rabbitmq/rabbitmq.conf\n\n# Enable channel logging  \necho 'log.channel.level = debug' >> /etc/rabbitmq/rabbitmq.conf\n\n# Restart to apply\nsudo systemctl restart rabbitmq-server\n\n# View debug logs\nsudo tail -f /var/log/rabbitmq/rabbit@$(hostname).log\n```\n\n## Maintenance\n\n### Update Procedures\n\n```bash\n# RHEL/CentOS/Rocky/AlmaLinux\nsudo yum check-update rabbitmq-server\nsudo yum update rabbitmq-server\n\n# Debian/Ubuntu\nsudo apt update\nsudo apt upgrade rabbitmq-server\n\n# Arch Linux\nsudo pacman -Syu rabbitmq\n\n# Alpine Linux\napk update\napk upgrade rabbitmq-server\n\n# openSUSE\nsudo zypper update rabbitmq-server\n\n# FreeBSD\npkg update\npkg upgrade rabbitmq\n\n# Always backup before updates\n./rabbitmq-backup.sh\n\n# Test after updates\nrabbitmqctl status\nsudo systemctl restart rabbitmq-server\n```\n\n### Maintenance Tasks\n\n```bash\n# Weekly maintenance script\n#!/bin/bash\n# rabbitmq-maintenance.sh\n\n# Rotate logs\nrabbitmqctl rotate_logs\n\n# Check node health\nrabbitmqctl node_health_check\n\n# Clean up old definitions backup\nfind /backup/rabbitmq -name \"*.json\" -mtime +30 -delete\n\n# Optimize memory usage\nrabbitmqctl eval 'erlang:garbage_collect().'\n\n# Check and clean old message store files\nrabbitmqctl eval 'rabbit_msg_store_gc:gc().'\n\n# Check queue statistics\nrabbitmqctl list_queues name messages consumers memory | \\\n    awk '$2 > 1000 {print \"Queue \" $1 \" has \" $2 \" messages\"}'\n\necho \"RabbitMQ maintenance completed\"\n```\n\n### Health Monitoring\n\n```bash\n# Create monitoring cron job\necho \"*/5 * * * * /usr/local/bin/rabbitmq-health-check.sh\" | sudo crontab -\n\n# Log rotation\nsudo tee /etc/logrotate.d/rabbitmq <<EOF\n/var/log/rabbitmq/*.log {\n    daily\n    rotate 30\n    compress\n    delaycompress\n    missingok\n    notifempty\n    sharedscripts\n    postrotate\n        rabbitmqctl rotate_logs\n    endscript\n}\nEOF\n```\n\n## Integration Examples\n\n### Python (pika) Integration\n\n```python\nimport pika\nimport ssl\n\n# Basic connection\nconnection = pika.BlockingConnection(\n    pika.ConnectionParameters(host='localhost', port=5672,\n                            credentials=pika.PlainCredentials('myapp', 'SecureAppPassword123!'))\n)\nchannel = connection.channel()\n\n# SSL connection\nssl_context = ssl.create_default_context(cafile='/etc/rabbitmq/ssl/ca_certificate.pem')\nssl_context.check_hostname = False\n\nssl_connection = pika.BlockingConnection(\n    pika.ConnectionParameters(\n        host='localhost',\n        port=5671,\n        credentials=pika.PlainCredentials('myapp', 'SecureAppPassword123!'),\n        ssl_options=pika.SSLOptions(ssl_context)\n    )\n)\n\n# Declare queue and exchange\nchannel.exchange_declare(exchange='task_exchange', exchange_type='direct')\nchannel.queue_declare(queue='task_queue', durable=True)\nchannel.queue_bind(exchange='task_exchange', queue='task_queue', routing_key='task')\n\n# Publish message\nchannel.basic_publish(\n    exchange='task_exchange',\n    routing_key='task',\n    body='Hello, RabbitMQ!',\n    properties=pika.BasicProperties(delivery_mode=2)  # Make message persistent\n)\n\n# Consume messages\ndef callback(ch, method, properties, body):\n    print(f\"Received: {body}\")\n    ch.basic_ack(delivery_tag=method.delivery_tag)\n\nchannel.basic_qos(prefetch_count=1)\nchannel.basic_consume(queue='task_queue', on_message_callback=callback)\nchannel.start_consuming()\n```\n\n### Node.js (amqplib) Integration\n\n```javascript\nconst amqp = require('amqplib');\nconst fs = require('fs');\n\n// Basic connection\nasync function connectBasic() {\n    const connection = await amqp.connect('amqp://myapp:SecureAppPassword123!@localhost:5672');\n    return connection;\n}\n\n// SSL connection\nasync function connectSSL() {\n    const connection = await amqp.connect({\n        protocol: 'amqps',\n        hostname: 'localhost',\n        port: 5671,\n        username: 'myapp',\n        password: 'SecureAppPassword123!',\n        ca: [fs.readFileSync('/etc/rabbitmq/ssl/ca_certificate.pem')],\n        cert: fs.readFileSync('/etc/rabbitmq/ssl/client_certificate.pem'),\n        key: fs.readFileSync('/etc/rabbitmq/ssl/client_key.pem')\n    });\n    return connection;\n}\n\n// Publisher\nasync function publishMessage() {\n    const connection = await connectBasic();\n    const channel = await connection.createChannel();\n    \n    const exchange = 'task_exchange';\n    const routingKey = 'task';\n    const message = 'Hello from Node.js!';\n    \n    await channel.assertExchange(exchange, 'direct', { durable: true });\n    await channel.publish(exchange, routingKey, Buffer.from(message), { persistent: true });\n    \n    console.log('Message sent');\n    await channel.close();\n    await connection.close();\n}\n\n// Consumer\nasync function consumeMessages() {\n    const connection = await connectBasic();\n    const channel = await connection.createChannel();\n    \n    const queue = 'task_queue';\n    \n    await channel.assertQueue(queue, { durable: true });\n    await channel.prefetch(1);\n    \n    console.log('Waiting for messages...');\n    \n    channel.consume(queue, async (message) => {\n        if (message) {\n            console.log('Received:', message.content.toString());\n            // Process message\n            channel.ack(message);\n        }\n    });\n}\n```\n\n### Java (Spring AMQP) Integration\n\n```java\n// Configuration\n@Configuration\n@EnableRabbit\npublic class RabbitConfig {\n    \n    @Bean\n    public ConnectionFactory connectionFactory() {\n        CachingConnectionFactory factory = new CachingConnectionFactory(\"localhost\");\n        factory.setPort(5672);\n        factory.setUsername(\"myapp\");\n        factory.setPassword(\"SecureAppPassword123!\");\n        factory.setVirtualHost(\"/\");\n        return factory;\n    }\n    \n    @Bean\n    public RabbitTemplate rabbitTemplate(ConnectionFactory connectionFactory) {\n        RabbitTemplate template = new RabbitTemplate(connectionFactory);\n        template.setMandatory(true);\n        return template;\n    }\n    \n    @Bean\n    public DirectExchange taskExchange() {\n        return new DirectExchange(\"task_exchange\", true, false);\n    }\n    \n    @Bean\n    public Queue taskQueue() {\n        return QueueBuilder.durable(\"task_queue\").build();\n    }\n    \n    @Bean\n    public Binding taskBinding() {\n        return BindingBuilder.bind(taskQueue()).to(taskExchange()).with(\"task\");\n    }\n}\n\n// Producer\n@Service\npublic class MessageProducer {\n    \n    @Autowired\n    private RabbitTemplate rabbitTemplate;\n    \n    public void sendMessage(String message) {\n        rabbitTemplate.convertAndSend(\"task_exchange\", \"task\", message);\n    }\n}\n\n// Consumer\n@Service\npublic class MessageConsumer {\n    \n    @RabbitListener(queues = \"task_queue\")\n    public void receiveMessage(String message) {\n        System.out.println(\"Received: \" + message);\n        // Process message\n    }\n}\n```\n\n### Go (amqp091-go) Integration\n\n```go\npackage main\n\nimport (\n    \"log\"\n    \"github.com/rabbitmq/amqp091-go\"\n)\n\nfunc connectRabbitMQ() (*amqp091.Connection, error) {\n    return amqp091.Dial(\"amqp://myapp:SecureAppPassword123!@localhost:5672/\")\n}\n\nfunc publishMessage(message string) error {\n    conn, err := connectRabbitMQ()\n    if err != nil {\n        return err\n    }\n    defer conn.Close()\n\n    ch, err := conn.Channel()\n    if err != nil {\n        return err\n    }\n    defer ch.Close()\n\n    // Declare exchange\n    err = ch.ExchangeDeclare(\n        \"task_exchange\",\n        \"direct\",\n        true,  // durable\n        false, // auto-deleted\n        false, // internal\n        false, // no-wait\n        nil,   // arguments\n    )\n    if err != nil {\n        return err\n    }\n\n    // Declare queue\n    _, err = ch.QueueDeclare(\n        \"task_queue\",\n        true,  // durable\n        false, // delete when unused\n        false, // exclusive\n        false, // no-wait\n        nil,   // arguments\n    )\n    if err != nil {\n        return err\n    }\n\n    // Publish message\n    return ch.Publish(\n        \"task_exchange\",\n        \"task\",\n        false, // mandatory\n        false, // immediate\n        amqp091.Publishing{\n            ContentType:  \"text/plain\",\n            Body:         []byte(message),\n            DeliveryMode: amqp091.Persistent,\n        },\n    )\n}\n\nfunc consumeMessages() error {\n    conn, err := connectRabbitMQ()\n    if err != nil {\n        return err\n    }\n    defer conn.Close()\n\n    ch, err := conn.Channel()\n    if err != nil {\n        return err\n    }\n    defer ch.Close()\n\n    msgs, err := ch.Consume(\n        \"task_queue\",\n        \"\",    // consumer\n        false, // auto-ack\n        false, // exclusive\n        false, // no-local\n        false, // no-wait\n        nil,   // args\n    )\n    if err != nil {\n        return err\n    }\n\n    forever := make(chan bool)\n\n    go func() {\n        for d := range msgs {\n            log.Printf(\"Received: %s\", d.Body)\n            // Process message\n            d.Ack(false)\n        }\n    }()\n\n    log.Printf(\"Waiting for messages...\")\n    <-forever\n    return nil\n}\n```\n\n## Additional Resources\n\n- [Official RabbitMQ Documentation](https://www.rabbitmq.com/documentation.html)\n- [RabbitMQ Tutorials](https://www.rabbitmq.com/getstarted.html)\n- [RabbitMQ Management Plugin](https://www.rabbitmq.com/management.html)\n- [RabbitMQ Clustering Guide](https://www.rabbitmq.com/clustering.html)\n- [RabbitMQ High Availability](https://www.rabbitmq.com/ha.html)\n- [AMQP 0-9-1 Protocol Reference](https://www.rabbitmq.com/amqp-0-9-1-reference.html)\n- [RabbitMQ Community](https://www.rabbitmq.com/community.html)\n- [RabbitMQ GitHub Repository](https://github.com/rabbitmq/rabbitmq-server)\n\n---\n\n**Note:** This guide is part of the [HowToMgr](https://howtomgr.github.io) collection. Always refer to official documentation for the most up-to-date information.","readmeHtml":"<h1 id=\"rabbitmq-installation-guide\" class=\"mobile-header\">RabbitMQ Installation Guide</h1>\n<p class=\"mobile-paragraph\">RabbitMQ is a free and open-source message-queueing software and broker written in Erlang. Originally developed by Rabbit Technologies and now owned by VMware, RabbitMQ implements the Advanced Message Queuing Protocol (AMQP) and provides message routing, queuing, and delivery guarantees. It serves as a FOSS alternative to commercial message brokers like IBM MQ, Oracle WebLogic Server, or Microsoft Azure Service Bus, offering enterprise-grade reliability, clustering, and high availability without licensing costs, with features like message persistence, flexible routing, and cross-language support.</p>\n<h2 id=\"prerequisites\" class=\"mobile-header\">Prerequisites</h2>\n<li class=\"mobile-list-item\"><strong>Hardware Requirements</strong>:</li>\n<li class=\"mobile-list-item\">CPU: 2 cores minimum (4+ cores recommended for production)</li>\n<li class=\"mobile-list-item\">RAM: 1GB minimum (4GB+ recommended for production)</li>\n<li class=\"mobile-list-item\">Storage: 10GB minimum (SSD recommended for message persistence)</li>\n<li class=\"mobile-list-item\">Network: Stable connectivity for clustering setups</li>\n<li class=\"mobile-list-item\"><strong>Operating System</strong>: </li>\n<li class=\"mobile-list-item\">Linux: Any modern distribution with kernel 3.2+</li>\n<li class=\"mobile-list-item\">macOS: 10.13+ (High Sierra or newer)</li>\n<li class=\"mobile-list-item\">Windows: Windows Server 2016+ or Windows 10</li>\n<li class=\"mobile-list-item\">FreeBSD: 11.0+</li>\n<li class=\"mobile-list-item\"><strong>Network Requirements</strong>:</li>\n<li class=\"mobile-list-item\">Port 5672 (AMQP 0-9-1 and 1.0)</li>\n<li class=\"mobile-list-item\">Port 15672 (HTTP Management API)</li>\n<li class=\"mobile-list-item\">Port 25672 (Erlang distribution for clustering)</li>\n<li class=\"mobile-list-item\">Port 4369 (EPMD - Erlang Port Mapper Daemon)</li>\n<li class=\"mobile-list-item\">Port 35672-35682 (CLI tools)</li>\n<li class=\"mobile-list-item\"><strong>Dependencies</strong>:</li>\n<li class=\"mobile-list-item\">Erlang/OTP (version 23.2+ for RabbitMQ 3.9+)</li>\n<li class=\"mobile-list-item\">systemd or compatible init system (Linux)</li>\n<li class=\"mobile-list-item\">Root or administrative access for installation</li>\n<li class=\"mobile-list-item\"><strong>System Access</strong>: root or sudo privileges required</li>\n<h2 id=\"installation\" class=\"mobile-header\">Installation</h2>\n<h3 id=\"rhelcentosrocky-linuxalmalinux\" class=\"mobile-header\">RHEL/CentOS/Rocky Linux/AlmaLinux</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Add RabbitMQ repository\ncurl -s https://packagecloud.io/install/repositories/rabbitmq/rabbitmq-server/script.rpm.sh | sudo bash\n\n# Add Erlang repository\ncurl -s https://packagecloud.io/install/repositories/rabbitmq/erlang/script.rpm.sh | sudo bash\n\n# Install Erlang\nsudo yum install -y erlang\n\n# Install RabbitMQ server\nsudo yum install -y rabbitmq-server\n\n# Enable and start service\nsudo systemctl enable --now rabbitmq-server\n\n# Enable management plugin\nsudo rabbitmq-plugins enable rabbitmq_management\n\n# Configure firewall\nsudo firewall-cmd --permanent --add-port=5672/tcp\nsudo firewall-cmd --permanent --add-port=15672/tcp\nsudo firewall-cmd --permanent --add-port=25672/tcp\nsudo firewall-cmd --reload\n\n# Create admin user\nsudo rabbitmqctl add_user admin SecureAdminPassword123!\nsudo rabbitmqctl set_user_tags admin administrator\nsudo rabbitmqctl set_permissions -p / admin &quot;.*&quot; &quot;.*&quot; &quot;.*&quot;\n\n# Remove guest user (security)\nsudo rabbitmqctl delete_user guest</code></pre>\n      </div>\n    </div>\n<h3 id=\"debianubuntu\" class=\"mobile-header\">Debian/Ubuntu</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Update package index\nsudo apt update\n\n# Install prerequisite packages\nsudo apt install -y curl gnupg apt-transport-https\n\n# Add RabbitMQ signing key\ncurl -fsSL https://keys.openpgp.org/vks/v1/by-fingerprint/0A9AF2115F4687BD29803A206B73A36E6026DFCA | sudo gpg --dearmor -o /usr/share/keyrings/com.rabbitmq.team.gpg\n\n# Add RabbitMQ repository\necho &quot;deb [signed-by=/usr/share/keyrings/com.rabbitmq.team.gpg] https://ppa1.novemberain.com/rabbitmq/rabbitmq-server/deb/ubuntu $(lsb_release -cs) main&quot; | sudo tee /etc/apt/sources.list.d/rabbitmq.list\n\n# Add Erlang repository\necho &quot;deb [signed-by=/usr/share/keyrings/com.rabbitmq.team.gpg] https://ppa1.novemberain.com/rabbitmq/rabbitmq-erlang/deb/ubuntu $(lsb_release -cs) main&quot; | sudo tee /etc/apt/sources.list.d/rabbitmq-erlang.list\n\n# Update package index\nsudo apt update\n\n# Install Erlang and RabbitMQ\nsudo apt install -y erlang-base erlang-asn1 erlang-crypto erlang-eldap erlang-ftp erlang-inets erlang-mnesia erlang-os-mon erlang-parsetools erlang-public-key erlang-runtime-tools erlang-snmp erlang-ssl erlang-syntax-tools erlang-tftp erlang-tools erlang-xmerl\nsudo apt install -y rabbitmq-server\n\n# Enable and start service\nsudo systemctl enable --now rabbitmq-server\n\n# Enable management plugin\nsudo rabbitmq-plugins enable rabbitmq_management\n\n# Configure firewall\nsudo ufw allow 5672\nsudo ufw allow 15672\n\n# Create admin user\nsudo rabbitmqctl add_user admin SecureAdminPassword123!\nsudo rabbitmqctl set_user_tags admin administrator\nsudo rabbitmqctl set_permissions -p / admin &quot;.*&quot; &quot;.*&quot; &quot;.*&quot;\n\n# Remove guest user (security)\nsudo rabbitmqctl delete_user guest</code></pre>\n      </div>\n    </div>\n<h3 id=\"arch-linux\" class=\"mobile-header\">Arch Linux</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Install RabbitMQ from official repositories\nsudo pacman -S rabbitmq\n\n# Install Erlang (dependency)\nsudo pacman -S erlang-nox\n\n# Create rabbitmq user if not exists\nsudo useradd -r -s /sbin/nologin -d /var/lib/rabbitmq -c &quot;RabbitMQ messaging server&quot; rabbitmq\n\n# Enable and start service\nsudo systemctl enable --now rabbitmq\n\n# Enable management plugin\nsudo rabbitmq-plugins enable rabbitmq_management\n\n# Create admin user\nsudo rabbitmqctl add_user admin SecureAdminPassword123!\nsudo rabbitmqctl set_user_tags admin administrator\nsudo rabbitmqctl set_permissions -p / admin &quot;.*&quot; &quot;.*&quot; &quot;.*&quot;\n\n# Remove guest user (security)\nsudo rabbitmqctl delete_user guest\n\n# Configuration location: /etc/rabbitmq/</code></pre>\n      </div>\n    </div>\n<h3 id=\"alpine-linux\" class=\"mobile-header\">Alpine Linux</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Install RabbitMQ\napk add --no-cache rabbitmq-server rabbitmq-server-management\n\n# Install Erlang\napk add --no-cache erlang\n\n# Create rabbitmq user if not exists\nadduser -D -H -s /sbin/nologin -G rabbitmq rabbitmq\n\n# Set permissions\nchown -R rabbitmq:rabbitmq /var/lib/rabbitmq /var/log/rabbitmq\n\n# Enable and start service\nrc-update add rabbitmq default\nrc-service rabbitmq start\n\n# Enable management plugin\nrabbitmq-plugins enable rabbitmq_management\n\n# Create admin user\nrabbitmqctl add_user admin SecureAdminPassword123!\nrabbitmqctl set_user_tags admin administrator\nrabbitmqctl set_permissions -p / admin &quot;.*&quot; &quot;.*&quot; &quot;.*&quot;\n\n# Remove guest user (security)\nrabbitmqctl delete_user guest</code></pre>\n      </div>\n    </div>\n<h3 id=\"opensusesles\" class=\"mobile-header\">openSUSE/SLES</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># openSUSE Leap/Tumbleweed\nsudo zypper install -y rabbitmq-server erlang\n\n# SLES 15\nsudo SUSEConnect -p sle-module-server-applications/15.5/x86_64\nsudo zypper install -y rabbitmq-server erlang\n\n# Enable and start service\nsudo systemctl enable --now rabbitmq-server\n\n# Enable management plugin\nsudo rabbitmq-plugins enable rabbitmq_management\n\n# Configure firewall\nsudo firewall-cmd --permanent --add-port=5672/tcp\nsudo firewall-cmd --permanent --add-port=15672/tcp\nsudo firewall-cmd --reload\n\n# Create admin user\nsudo rabbitmqctl add_user admin SecureAdminPassword123!\nsudo rabbitmqctl set_user_tags admin administrator\nsudo rabbitmqctl set_permissions -p / admin &quot;.*&quot; &quot;.*&quot; &quot;.*&quot;\n\n# Remove guest user (security)\nsudo rabbitmqctl delete_user guest</code></pre>\n      </div>\n    </div>\n<h3 id=\"macos\" class=\"mobile-header\">macOS</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Using Homebrew\nbrew install rabbitmq\n\n# Start RabbitMQ service\nbrew services start rabbitmq\n\n# Or run manually\nsudo rabbitmq-server\n\n# Enable management plugin\nsudo rabbitmq-plugins enable rabbitmq_management\n\n# Create admin user\nsudo rabbitmqctl add_user admin SecureAdminPassword123!\nsudo rabbitmqctl set_user_tags admin administrator\nsudo rabbitmqctl set_permissions -p / admin &quot;.*&quot; &quot;.*&quot; &quot;.*&quot;\n\n# Remove guest user (security)\nsudo rabbitmqctl delete_user guest\n\n# Configuration location: /usr/local/etc/rabbitmq/\n# Alternative: /opt/homebrew/etc/rabbitmq/ (Apple Silicon)</code></pre>\n      </div>\n    </div>\n<h3 id=\"freebsd\" class=\"mobile-header\">FreeBSD</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Using pkg\npkg install rabbitmq erlang\n\n# Using ports\ncd /usr/ports/net/rabbitmq\nmake install clean\n\n# Enable RabbitMQ\necho &#039;rabbitmq_enable=&quot;YES&quot;&#039; &gt;&gt; /etc/rc.conf\n\n# Start service\nservice rabbitmq start\n\n# Enable management plugin\nrabbitmq-plugins enable rabbitmq_management\n\n# Create admin user\nrabbitmqctl add_user admin SecureAdminPassword123!\nrabbitmqctl set_user_tags admin administrator\nrabbitmqctl set_permissions -p / admin &quot;.*&quot; &quot;.*&quot; &quot;.*&quot;\n\n# Remove guest user (security)\nrabbitmqctl delete_user guest\n\n# Configuration location: /usr/local/etc/rabbitmq/</code></pre>\n      </div>\n    </div>\n<h3 id=\"windows\" class=\"mobile-header\">Windows</h3>\n<div class=\"mobile-code-block\" data-language=\"powershell\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">powershell</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-powershell\"># Method 1: Using Chocolatey\nchoco install rabbitmq\n\n# Method 2: Using Scoop\nscoop install rabbitmq\n\n# Method 3: Manual installation\n# Download from https://www.rabbitmq.com/download.html\n# Install Erlang first, then RabbitMQ\n\n# Install as Windows service (automatic with installer)\n# The service is named &quot;RabbitMQ&quot;\n\n# Enable management plugin\nrabbitmq-plugins.bat enable rabbitmq_management\n\n# Create admin user\nrabbitmqctl.bat add_user admin SecureAdminPassword123!\nrabbitmqctl.bat set_user_tags admin administrator\nrabbitmqctl.bat set_permissions -p / admin &quot;.*&quot; &quot;.*&quot; &quot;.*&quot;\n\n# Remove guest user (security)\nrabbitmqctl.bat delete_user guest\n\n# Configuration location: %APPDATA%\\RabbitMQ\\</code></pre>\n      </div>\n    </div>\n<h2 id=\"initial-configuration\" class=\"mobile-header\">Initial Configuration</h2>\n<h3 id=\"first-run-setup\" class=\"mobile-header\">First-Run Setup</h3>\n<p class=\"mobile-paragraph\">1. <strong>Create rabbitmq user</strong> (if not created by package):</p>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Linux systems\nsudo useradd -r -d /var/lib/rabbitmq -s /sbin/nologin -c &quot;RabbitMQ messaging server&quot; rabbitmq</code></pre>\n      </div>\n    </div>\n<p class=\"mobile-paragraph\">2. <strong>Default configuration locations</strong>:</p>\n<li class=\"mobile-list-item\">RHEL/CentOS/Rocky/AlmaLinux: <code class=\"mobile-inline-code\">/etc/rabbitmq/rabbitmq.conf</code></li>\n<li class=\"mobile-list-item\">Debian/Ubuntu: <code class=\"mobile-inline-code\">/etc/rabbitmq/rabbitmq.conf</code></li>\n<li class=\"mobile-list-item\">Arch Linux: <code class=\"mobile-inline-code\">/etc/rabbitmq/rabbitmq.conf</code></li>\n<li class=\"mobile-list-item\">Alpine Linux: <code class=\"mobile-inline-code\">/etc/rabbitmq/rabbitmq.conf</code></li>\n<li class=\"mobile-list-item\">openSUSE/SLES: <code class=\"mobile-inline-code\">/etc/rabbitmq/rabbitmq.conf</code></li>\n<li class=\"mobile-list-item\">macOS: <code class=\"mobile-inline-code\">/usr/local/etc/rabbitmq/rabbitmq.conf</code></li>\n<li class=\"mobile-list-item\">FreeBSD: <code class=\"mobile-inline-code\">/usr/local/etc/rabbitmq/rabbitmq.conf</code></li>\n<li class=\"mobile-list-item\">Windows: <code class=\"mobile-inline-code\">%APPDATA%\\RabbitMQ\\rabbitmq.conf</code></li>\n<p class=\"mobile-paragraph\">3. <strong>Essential settings to change</strong>:</p>\n<div class=\"mobile-code-block\" data-language=\"ini\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">ini</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-ini\"># /etc/rabbitmq/rabbitmq.conf\n# Network and clustering\nlisteners.tcp.default = 5672\nmanagement.tcp.port = 15672\n\n# Security\nloopback_users.guest = false\ndefault_user = admin\ndefault_pass = SecureAdminPassword123!\n\n# Logging\nlog.file.level = info\nlog.file = /var/log/rabbitmq/rabbitmq.log\nlog.file.rotation.size = 10485760\n\n# Memory and disk limits\nvm_memory_high_watermark.relative = 0.6\ndisk_free_limit.absolute = 1GB\n\n# Message TTL and limits\ndefault_user_tags.administrator = true\nheartbeat = 60\n\n# Clustering (if multiple nodes)\ncluster_formation.peer_discovery_backend = rabbit_peer_discovery_classic_config\ncluster_formation.classic_config.nodes.1 = rabbit@node1\ncluster_formation.classic_config.nodes.2 = rabbit@node2</code></pre>\n      </div>\n    </div>\n<h3 id=\"testing-initial-setup\" class=\"mobile-header\">Testing Initial Setup</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Check if RabbitMQ is running\nsudo systemctl status rabbitmq-server\n\n# Test connection\nrabbitmqctl status\n\n# Check cluster status\nrabbitmqctl cluster_status\n\n# List users\nrabbitmqctl list_users\n\n# List virtual hosts\nrabbitmqctl list_vhosts\n\n# Test management interface\ncurl -u admin:SecureAdminPassword123! http://localhost:15672/api/overview\n\n# Test AMQP connection\nrabbitmqctl eval &#039;rabbit_networking:tcp_listener_started(5672).&#039;</code></pre>\n      </div>\n    </div>\n<p class=\"mobile-paragraph\"><strong>WARNING:</strong> Remove or disable the default guest user and enable proper authentication!</p>\n<h2 id=\"service-management\" class=\"mobile-header\">Service Management</h2>\n<h3 id=\"systemd-rhel-debian-ubuntu-arch-opensuse\" class=\"mobile-header\">systemd (RHEL, Debian, Ubuntu, Arch, openSUSE)</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Enable RabbitMQ to start on boot\nsudo systemctl enable rabbitmq-server\n\n# Start RabbitMQ\nsudo systemctl start rabbitmq-server\n\n# Stop RabbitMQ\nsudo systemctl stop rabbitmq-server\n\n# Restart RabbitMQ\nsudo systemctl restart rabbitmq-server\n\n# Reload configuration (graceful)\nsudo rabbitmqctl eval &#039;application:stop(rabbitmq_management_agent), application:start(rabbitmq_management_agent).&#039;\n\n# Check status\nsudo systemctl status rabbitmq-server\n\n# View logs\nsudo journalctl -u rabbitmq-server -f</code></pre>\n      </div>\n    </div>\n<h3 id=\"openrc-alpine-linux\" class=\"mobile-header\">OpenRC (Alpine Linux)</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Enable RabbitMQ to start on boot\nrc-update add rabbitmq default\n\n# Start RabbitMQ\nrc-service rabbitmq start\n\n# Stop RabbitMQ\nrc-service rabbitmq stop\n\n# Restart RabbitMQ\nrc-service rabbitmq restart\n\n# Check status\nrc-service rabbitmq status\n\n# View logs\ntail -f /var/log/rabbitmq/rabbit@$(hostname).log</code></pre>\n      </div>\n    </div>\n<h3 id=\"rcd-freebsd\" class=\"mobile-header\">rc.d (FreeBSD)</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Enable in /etc/rc.conf\necho &#039;rabbitmq_enable=&quot;YES&quot;&#039; &gt;&gt; /etc/rc.conf\n\n# Start RabbitMQ\nservice rabbitmq start\n\n# Stop RabbitMQ\nservice rabbitmq stop\n\n# Restart RabbitMQ\nservice rabbitmq restart\n\n# Check status\nservice rabbitmq status</code></pre>\n      </div>\n    </div>\n<h3 id=\"launchd-macos\" class=\"mobile-header\">launchd (macOS)</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Using Homebrew services\nbrew services start rabbitmq\nbrew services stop rabbitmq\nbrew services restart rabbitmq\n\n# Check status\nbrew services list | grep rabbitmq\n\n# Manual control\nsudo rabbitmq-server -detached\nsudo rabbitmqctl shutdown</code></pre>\n      </div>\n    </div>\n<h3 id=\"windows-service-manager\" class=\"mobile-header\">Windows Service Manager</h3>\n<div class=\"mobile-code-block\" data-language=\"powershell\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">powershell</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-powershell\"># Start RabbitMQ service\nnet start RabbitMQ\n\n# Stop RabbitMQ service\nnet stop RabbitMQ\n\n# Using PowerShell\nStart-Service RabbitMQ\nStop-Service RabbitMQ\nRestart-Service RabbitMQ\n\n# Check status\nGet-Service RabbitMQ\n\n# View logs\nGet-EventLog -LogName Application -Source RabbitMQ</code></pre>\n      </div>\n    </div>\n<h2 id=\"advanced-configuration\" class=\"mobile-header\">Advanced Configuration</h2>\n<h3 id=\"high-availability-configuration\" class=\"mobile-header\">High Availability Configuration</h3>\n<div class=\"mobile-code-block\" data-language=\"ini\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">ini</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-ini\"># Cluster configuration\ncluster_formation.peer_discovery_backend = rabbit_peer_discovery_classic_config\ncluster_formation.classic_config.nodes.1 = rabbit@rabbitmq-1\ncluster_formation.classic_config.nodes.2 = rabbit@rabbitmq-2\ncluster_formation.classic_config.nodes.3 = rabbit@rabbitmq-3\n\n# Enable quorum queues by default\ndefault_queue_type = quorum\n\n# HA policy for classic queues\nqueue_master_locator = min-masters</code></pre>\n      </div>\n    </div>\n<h3 id=\"advanced-security-settings\" class=\"mobile-header\">Advanced Security Settings</h3>\n<div class=\"mobile-code-block\" data-language=\"ini\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">ini</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-ini\"># SSL/TLS configuration\nlisteners.ssl.default = 5671\nssl_options.cacertfile = /etc/rabbitmq/ssl/ca_certificate.pem\nssl_options.certfile = /etc/rabbitmq/ssl/server_certificate.pem\nssl_options.keyfile = /etc/rabbitmq/ssl/server_key.pem\nssl_options.verify = verify_peer\nssl_options.fail_if_no_peer_cert = true\n\n# Management over HTTPS\nmanagement.ssl.port = 15671\nmanagement.ssl.cacertfile = /etc/rabbitmq/ssl/ca_certificate.pem\nmanagement.ssl.certfile = /etc/rabbitmq/ssl/server_certificate.pem\nmanagement.ssl.keyfile = /etc/rabbitmq/ssl/server_key.pem\n\n# Authentication backends\nauth_backends.1 = rabbit_auth_backend_ldap\nauth_backends.2 = rabbit_auth_backend_internal\n\n# LDAP configuration\nauth_ldap.servers.1 = ldap.example.com\nauth_ldap.user_dn_pattern = cn=${username},ou=users,dc=example,dc=com</code></pre>\n      </div>\n    </div>\n<h2 id=\"reverse-proxy-setup\" class=\"mobile-header\">Reverse Proxy Setup</h2>\n<h3 id=\"nginx-configuration\" class=\"mobile-header\">nginx Configuration</h3>\n<div class=\"mobile-code-block\" data-language=\"nginx\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">nginx</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-nginx\"># /etc/nginx/sites-available/rabbitmq\nupstream rabbitmq_management {\n    server 127.0.0.1:15672 max_fails=3 fail_timeout=30s;\n    server 127.0.0.1:15673 max_fails=3 fail_timeout=30s backup;\n}\n\nserver {\n    listen 80;\n    server_name rabbitmq.example.com;\n    return 301 https://$server_name$request_uri;\n}\n\nserver {\n    listen 443 ssl http2;\n    server_name rabbitmq.example.com;\n\n    ssl_certificate /etc/letsencrypt/live/rabbitmq.example.com/fullchain.pem;\n    ssl_certificate_key /etc/letsencrypt/live/rabbitmq.example.com/privkey.pem;\n\n    location / {\n        proxy_pass http://rabbitmq_management;\n        proxy_set_header Host $host;\n        proxy_set_header X-Real-IP $remote_addr;\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n        proxy_set_header X-Forwarded-Proto $scheme;\n        \n        # WebSocket support for management UI\n        proxy_http_version 1.1;\n        proxy_set_header Upgrade $http_upgrade;\n        proxy_set_header Connection &quot;upgrade&quot;;\n    }\n}</code></pre>\n      </div>\n    </div>\n<h3 id=\"haproxy-configuration\" class=\"mobile-header\">HAProxy Configuration</h3>\n<div class=\"mobile-code-block\" data-language=\"haproxy\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">haproxy</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-haproxy\"># /etc/haproxy/haproxy.cfg\nfrontend rabbitmq_management_frontend\n    bind *:80\n    bind *:443 ssl crt /etc/ssl/certs/rabbitmq.pem\n    redirect scheme https if !{ ssl_fc }\n    default_backend rabbitmq_management_servers\n\nbackend rabbitmq_management_servers\n    mode http\n    balance roundrobin\n    option httpchk GET /api/aliveness-test/%2F\n    server rabbitmq1 127.0.0.1:15672 check\n    server rabbitmq2 127.0.0.1:15673 check backup\n\nfrontend rabbitmq_amqp_frontend\n    bind *:5672\n    mode tcp\n    default_backend rabbitmq_amqp_servers\n\nbackend rabbitmq_amqp_servers\n    mode tcp\n    balance roundrobin\n    server rabbitmq1 127.0.0.1:5672 check\n    server rabbitmq2 127.0.0.1:5673 check backup</code></pre>\n      </div>\n    </div>\n<h2 id=\"security-configuration\" class=\"mobile-header\">Security Configuration</h2>\n<h3 id=\"ssltls-setup\" class=\"mobile-header\">SSL/TLS Setup</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Generate SSL certificates for RabbitMQ\nsudo mkdir -p /etc/rabbitmq/ssl\n\n# Create CA certificate\nsudo openssl genrsa -out /etc/rabbitmq/ssl/ca_key.pem 4096\nsudo openssl req -new -x509 -days 3650 -key /etc/rabbitmq/ssl/ca_key.pem -out /etc/rabbitmq/ssl/ca_certificate.pem -subj &quot;/C=US/ST=State/L=City/O=Organization/CN=RabbitMQ-CA&quot;\n\n# Create server certificate\nsudo openssl genrsa -out /etc/rabbitmq/ssl/server_key.pem 4096\nsudo openssl req -new -key /etc/rabbitmq/ssl/server_key.pem -out /etc/rabbitmq/ssl/server_certificate_request.pem -subj &quot;/C=US/ST=State/L=City/O=Organization/CN=rabbitmq.example.com&quot;\nsudo openssl x509 -req -in /etc/rabbitmq/ssl/server_certificate_request.pem -CA /etc/rabbitmq/ssl/ca_certificate.pem -CAkey /etc/rabbitmq/ssl/ca_key.pem -CAcreateserial -out /etc/rabbitmq/ssl/server_certificate.pem -days 365\n\n# Create client certificate\nsudo openssl genrsa -out /etc/rabbitmq/ssl/client_key.pem 4096\nsudo openssl req -new -key /etc/rabbitmq/ssl/client_key.pem -out /etc/rabbitmq/ssl/client_certificate_request.pem -subj &quot;/C=US/ST=State/L=City/O=Organization/CN=rabbitmq-client&quot;\nsudo openssl x509 -req -in /etc/rabbitmq/ssl/client_certificate_request.pem -CA /etc/rabbitmq/ssl/ca_certificate.pem -CAkey /etc/rabbitmq/ssl/ca_key.pem -CAcreateserial -out /etc/rabbitmq/ssl/client_certificate.pem -days 365\n\n# Set permissions\nsudo chown -R rabbitmq:rabbitmq /etc/rabbitmq/ssl\nsudo chmod 600 /etc/rabbitmq/ssl/*_key.pem\nsudo chmod 644 /etc/rabbitmq/ssl/*_certificate.pem /etc/rabbitmq/ssl/ca_certificate.pem</code></pre>\n      </div>\n    </div>\n<h3 id=\"user-management-and-access-control\" class=\"mobile-header\">User Management and Access Control</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Create application user\nsudo rabbitmqctl add_user myapp SecureAppPassword123!\nsudo rabbitmqctl set_permissions -p / myapp &quot;myapp\\..*&quot; &quot;myapp\\..*&quot; &quot;myapp\\..*&quot;\n\n# Create monitoring user\nsudo rabbitmqctl add_user monitoring MonitorPassword123!\nsudo rabbitmqctl set_user_tags monitoring monitoring\nsudo rabbitmqctl set_permissions -p / monitoring &quot;&quot; &quot;&quot; &quot;.*&quot;\n\n# Create backup user\nsudo rabbitmqctl add_user backup BackupPassword123!\nsudo rabbitmqctl set_user_tags backup management\nsudo rabbitmqctl set_permissions -p / backup &quot;&quot; &quot;&quot; &quot;.*&quot;\n\n# Create virtual hosts\nsudo rabbitmqctl add_vhost production\nsudo rabbitmqctl add_vhost staging\n\n# Set permissions for virtual hosts\nsudo rabbitmqctl set_permissions -p production myapp &quot;.*&quot; &quot;.*&quot; &quot;.*&quot;\nsudo rabbitmqctl set_permissions -p staging myapp &quot;.*&quot; &quot;.*&quot; &quot;.*&quot;\n\n# Set resource limits\nsudo rabbitmqctl set_user_limits myapp &#039;{&quot;max-connections&quot;: 100, &quot;max-channels&quot;: 1000}&#039;</code></pre>\n      </div>\n    </div>\n<h3 id=\"firewall-rules\" class=\"mobile-header\">Firewall Rules</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># UFW (Ubuntu/Debian)\nsudo ufw allow from 192.168.1.0/24 to any port 5672\nsudo ufw allow from 192.168.1.0/24 to any port 15672\nsudo ufw reload\n\n# firewalld (RHEL/CentOS/openSUSE)\nsudo firewall-cmd --permanent --new-zone=rabbitmq\nsudo firewall-cmd --permanent --zone=rabbitmq --add-source=192.168.1.0/24\nsudo firewall-cmd --permanent --zone=rabbitmq --add-port=5672/tcp\nsudo firewall-cmd --permanent --zone=rabbitmq --add-port=15672/tcp\nsudo firewall-cmd --permanent --zone=rabbitmq --add-port=25672/tcp\nsudo firewall-cmd --reload\n\n# iptables\nsudo iptables -A INPUT -s 192.168.1.0/24 -p tcp --dport 5672 -j ACCEPT\nsudo iptables -A INPUT -s 192.168.1.0/24 -p tcp --dport 15672 -j ACCEPT\nsudo iptables -save &gt; /etc/iptables/rules.v4\n\n# pf (FreeBSD)\n# Add to /etc/pf.conf\npass in on $ext_if proto tcp from 192.168.1.0/24 to any port {5672, 15672, 25672}\n\n# Windows Firewall\nNew-NetFirewallRule -DisplayName &quot;RabbitMQ AMQP&quot; -Direction Inbound -Protocol TCP -LocalPort 5672 -RemoteAddress 192.168.1.0/24 -Action Allow\nNew-NetFirewallRule -DisplayName &quot;RabbitMQ Management&quot; -Direction Inbound -Protocol TCP -LocalPort 15672 -RemoteAddress 192.168.1.0/24 -Action Allow</code></pre>\n      </div>\n    </div>\n<h2 id=\"database-setup\" class=\"mobile-header\">Database Setup</h2>\n<h3 id=\"queue-and-exchange-configuration\" class=\"mobile-header\">Queue and Exchange Configuration</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Create exchanges\nrabbitmqctl eval &#039;rabbit_exchange:declare({resource, &lt;&lt;&quot;/&quot;&gt;&gt;, exchange, &lt;&lt;&quot;logs&quot;&gt;&gt;}, topic, true, false, false, []).&#039;\nrabbitmqctl eval &#039;rabbit_exchange:declare({resource, &lt;&lt;&quot;/&quot;&gt;&gt;, exchange, &lt;&lt;&quot;tasks&quot;&gt;&gt;}, direct, true, false, false, []).&#039;\n\n# Create queues\nrabbitmqctl eval &#039;rabbit_amqqueue:declare({resource, &lt;&lt;&quot;/&quot;&gt;&gt;, queue, &lt;&lt;&quot;error_logs&quot;&gt;&gt;}, true, false, [], none, &lt;&lt;&quot;/&quot;&gt;&gt;).&#039;\nrabbitmqctl eval &#039;rabbit_amqqueue:declare({resource, &lt;&lt;&quot;/&quot;&gt;&gt;, queue, &lt;&lt;&quot;task_queue&quot;&gt;&gt;}, true, false, [], none, &lt;&lt;&quot;/&quot;&gt;&gt;).&#039;\n\n# Create bindings\nrabbitmqctl eval &#039;rabbit_binding:add({binding, {resource, &lt;&lt;&quot;/&quot;&gt;&gt;, exchange, &lt;&lt;&quot;logs&quot;&gt;&gt;}, &lt;&lt;&quot;error&quot;&gt;&gt;, {resource, &lt;&lt;&quot;/&quot;&gt;&gt;, queue, &lt;&lt;&quot;error_logs&quot;&gt;&gt;}, []}).&#039;\n\n# Set queue policies for HA\nsudo rabbitmqctl set_policy ha-all &quot;.*&quot; &#039;{&quot;ha-mode&quot;:&quot;all&quot;,&quot;ha-sync-mode&quot;:&quot;automatic&quot;}&#039;\n\n# Set TTL policy\nsudo rabbitmqctl set_policy TTL &quot;.*&quot; &#039;{&quot;message-ttl&quot;:3600000}&#039; --apply-to queues\n\n# Set queue length limit\nsudo rabbitmqctl set_policy max-length &quot;.*&quot; &#039;{&quot;max-length&quot;:10000}&#039; --apply-to queues</code></pre>\n      </div>\n    </div>\n<h3 id=\"shovel-configuration-message-transfer\" class=\"mobile-header\">Shovel Configuration (Message Transfer)</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Install shovel plugin\nsudo rabbitmq-plugins enable rabbitmq_shovel\nsudo rabbitmq-plugins enable rabbitmq_shovel_management\n\n# Create shovel (via management API)\ncurl -u admin:SecureAdminPassword123! -X PUT \\\n  http://localhost:15672/api/parameters/shovel/%2F/my-shovel \\\n  -H &quot;Content-Type: application/json&quot; \\\n  -d &#039;{\n    &quot;value&quot;: {\n      &quot;src-protocol&quot;: &quot;amqp091&quot;,\n      &quot;src-uri&quot;: &quot;amqp://guest:guest@source-server:5672/%2F&quot;,\n      &quot;src-queue&quot;: &quot;source-queue&quot;,\n      &quot;dest-protocol&quot;: &quot;amqp091&quot;,\n      &quot;dest-uri&quot;: &quot;amqp://guest:guest@dest-server:5672/%2F&quot;,\n      &quot;dest-queue&quot;: &quot;dest-queue&quot;\n    }\n  }&#039;</code></pre>\n      </div>\n    </div>\n<h2 id=\"performance-optimization\" class=\"mobile-header\">Performance Optimization</h2>\n<h3 id=\"system-tuning\" class=\"mobile-header\">System Tuning</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># RabbitMQ-specific system optimizations\nsudo tee -a /etc/sysctl.conf &lt;&lt;EOF\n# RabbitMQ optimizations\nvm.swappiness = 1\nnet.core.somaxconn = 4096\nnet.ipv4.tcp_fin_timeout = 30\nnet.ipv4.tcp_tw_reuse = 1\nfs.file-max = 100000\nEOF\n\nsudo sysctl -p\n\n# Increase file descriptor limits\nsudo tee -a /etc/security/limits.conf &lt;&lt;EOF\nrabbitmq soft nofile 65536\nrabbitmq hard nofile 65536\nEOF\n\n# Set Erlang VM parameters\nsudo tee /etc/rabbitmq/rabbitmq-env.conf &lt;&lt;EOF\nRABBITMQ_SERVER_ERL_ARGS=&quot;+K true +A 128 +P 1048576&quot;\nRABBITMQ_CTL_ERL_ARGS=&quot;+K true&quot;\nEOF</code></pre>\n      </div>\n    </div>\n<h3 id=\"rabbitmq-performance-configuration\" class=\"mobile-header\">RabbitMQ Performance Configuration</h3>\n<div class=\"mobile-code-block\" data-language=\"ini\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">ini</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-ini\"># High-performance RabbitMQ configuration\n# /etc/rabbitmq/rabbitmq.conf\n\n# Memory and disk\nvm_memory_high_watermark.relative = 0.4\nvm_memory_high_watermark_paging_ratio = 0.3\ndisk_free_limit.absolute = 2GB\n\n# Clustering and replication\ncluster_partition_handling = pause_minority\ncluster_keepalive_interval = 10000\n\n# Connection and channel limits\nconnection_max = 65536\nchannel_max = 2047\n\n# Message store\nmsg_store_file_size_limit = 16777216\nqueue_index_embed_msgs_below = 4096\n\n# Lazy queues (for large queues)\nlazy_queue_explicit_gc_run_operation_threshold = 1000\n\n# Mnesia table loading\nmnesia_table_loading_retry_timeout = 30000\nmnesia_table_loading_retry_limit = 10</code></pre>\n      </div>\n    </div>\n<h3 id=\"queue-optimization\" class=\"mobile-header\">Queue Optimization</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Enable lazy queues for large message backlogs\nrabbitmqctl set_policy lazy-queue &quot;.*&quot; &#039;{&quot;queue-mode&quot;:&quot;lazy&quot;}&#039; --apply-to queues\n\n# Configure quorum queues for better consistency\nrabbitmqctl set_policy quorum-queue &quot;.*&quot; &#039;{&quot;queue-type&quot;:&quot;quorum&quot;}&#039; --apply-to queues\n\n# Set delivery limits to prevent poison messages\nrabbitmqctl set_policy delivery-limit &quot;.*&quot; &#039;{&quot;delivery-limit&quot;:10}&#039; --apply-to queues\n\n# Configure stream queues for high throughput\nrabbitmqctl set_policy stream-queue &quot;stream.*&quot; &#039;{&quot;queue-type&quot;:&quot;stream&quot;}&#039; --apply-to queues</code></pre>\n      </div>\n    </div>\n<h2 id=\"monitoring\" class=\"mobile-header\">Monitoring</h2>\n<h3 id=\"built-in-monitoring\" class=\"mobile-header\">Built-in Monitoring</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Node status and statistics\nrabbitmqctl status\nrabbitmqctl node_health_check\nrabbitmqctl environment\n\n# Queue monitoring\nrabbitmqctl list_queues name messages consumers memory\nrabbitmqctl list_exchanges name type\nrabbitmqctl list_bindings\n\n# Connection monitoring\nrabbitmqctl list_connections peer_host peer_port state channels\nrabbitmqctl list_channels connection name consumer_count messages_unacknowledged\n\n# Cluster monitoring\nrabbitmqctl cluster_status\nrabbitmqctl list_cluster_nodes\n\n# Memory and disk usage\nrabbitmqctl eval &#039;rabbit_vm:memory().&#039;\nrabbitmqctl eval &#039;rabbit_disk_monitor:get_disk_free().&#039;</code></pre>\n      </div>\n    </div>\n<h3 id=\"external-monitoring-setup\" class=\"mobile-header\">External Monitoring Setup</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Install RabbitMQ Exporter for Prometheus\nwget https://github.com/kbudde/rabbitmq_exporter/releases/download/v1.0.0/rabbitmq_exporter-1.0.0.linux-amd64.tar.gz\ntar xzf rabbitmq_exporter-*.tar.gz\nsudo cp rabbitmq_exporter /usr/local/bin/\n\n# Create monitoring user in RabbitMQ\nsudo rabbitmqctl add_user prometheus PrometheusPassword123!\nsudo rabbitmqctl set_user_tags prometheus monitoring\n\n# Create systemd service\nsudo tee /etc/systemd/system/rabbitmq_exporter.service &lt;&lt;EOF\n[Unit]\nDescription=RabbitMQ Exporter\nAfter=network.target\n\n[Service]\nType=simple\nUser=rabbitmq\nEnvironment=RABBIT_URL=&quot;http://prometheus:PrometheusPassword123!@localhost:15672&quot;\nExecStart=/usr/local/bin/rabbitmq_exporter\nRestart=always\n\n[Install]\nWantedBy=multi-user.target\nEOF\n\nsudo systemctl enable --now rabbitmq_exporter</code></pre>\n      </div>\n    </div>\n<h3 id=\"health-check-scripts\" class=\"mobile-header\">Health Check Scripts</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\">#!/bin/bash\n# rabbitmq-health-check.sh\n\n# Check RabbitMQ service\nif ! systemctl is-active rabbitmq-server &gt;/dev/null 2&gt;&amp;1; then\n    echo &quot;CRITICAL: RabbitMQ service is not running&quot;\n    exit 2\nfi\n\n# Check node health\nif ! rabbitmqctl node_health_check &gt;/dev/null 2&gt;&amp;1; then\n    echo &quot;CRITICAL: RabbitMQ node health check failed&quot;\n    exit 2\nfi\n\n# Check cluster status\nCLUSTER_STATUS=$(rabbitmqctl cluster_status --formatter json 2&gt;/dev/null | jq -r &#039;.running_nodes | length&#039;)\nif [ &quot;$CLUSTER_STATUS&quot; -lt 2 ]; then\n    echo &quot;WARNING: Less than 2 nodes running in cluster&quot;\n    exit 1\nfi\n\n# Check memory usage\nMEMORY_ALARM=$(rabbitmqctl status --formatter json 2&gt;/dev/null | jq -r &#039;.alarms | length&#039;)\nif [ &quot;$MEMORY_ALARM&quot; -gt 0 ]; then\n    echo &quot;WARNING: Memory alarms detected&quot;\n    exit 1\nfi\n\n# Check disk space\nDISK_ALARM=$(rabbitmqctl status --formatter json 2&gt;/dev/null | jq -r &#039;.disk_free_alarm&#039;)\nif [ &quot;$DISK_ALARM&quot; = &quot;true&quot; ]; then\n    echo &quot;WARNING: Disk space alarm active&quot;\n    exit 1\nfi\n\n# Check queue lengths\nMAX_QUEUE_LENGTH=$(rabbitmqctl list_queues messages --formatter json 2&gt;/dev/null | jq -r &#039;max_by(.messages).messages&#039;)\nif [ &quot;$MAX_QUEUE_LENGTH&quot; -gt 100000 ]; then\n    echo &quot;WARNING: Queue length exceeds 100,000 messages&quot;\n    exit 1\nfi\n\necho &quot;OK: RabbitMQ is healthy&quot;\nexit 0</code></pre>\n      </div>\n    </div>\n<h2 id=\"backup-and-restore\" class=\"mobile-header\">Backup and Restore</h2>\n<h3 id=\"backup-procedures\" class=\"mobile-header\">Backup Procedures</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\">#!/bin/bash\n# rabbitmq-backup.sh\n\nBACKUP_DIR=&quot;/backup/rabbitmq/$(date +%Y%m%d_%H%M%S)&quot;\nmkdir -p &quot;$BACKUP_DIR&quot;\n\n# Export definitions (exchanges, queues, users, policies)\ncurl -u admin:SecureAdminPassword123! \\\n    http://localhost:15672/api/definitions \\\n    -o &quot;$BACKUP_DIR/definitions.json&quot;\n\n# Export queue messages (if needed for small queues)\nrabbitmqctl eval &quot;\n    application:load(rabbitmq_management_agent),\n    rabbitmq_management_db:get_all_queues(all_vhosts).\n&quot; &gt; &quot;$BACKUP_DIR/queue_stats.txt&quot;\n\n# Backup configuration files\ntar czf &quot;$BACKUP_DIR/rabbitmq-config.tar.gz&quot; \\\n    /etc/rabbitmq/ \\\n    --exclude=&#039;*.log&#039; \\\n    --exclude=&#039;*.pid&#039;\n\n# Backup SSL certificates\nif [ -d /etc/rabbitmq/ssl ]; then\n    tar czf &quot;$BACKUP_DIR/rabbitmq-ssl.tar.gz&quot; /etc/rabbitmq/ssl/\nfi\n\n# Save cluster information\nrabbitmqctl cluster_status &gt; &quot;$BACKUP_DIR/cluster_status.txt&quot;\nrabbitmqctl status &gt; &quot;$BACKUP_DIR/node_status.txt&quot;\n\n# Create manifest\necho &quot;RabbitMQ Backup - $(date)&quot; &gt; &quot;$BACKUP_DIR/backup_manifest.txt&quot;\necho &quot;Node: $(hostname)&quot; &gt;&gt; &quot;$BACKUP_DIR/backup_manifest.txt&quot;\necho &quot;Version: $(rabbitmqctl version)&quot; &gt;&gt; &quot;$BACKUP_DIR/backup_manifest.txt&quot;\n\necho &quot;Backup completed: $BACKUP_DIR&quot;</code></pre>\n      </div>\n    </div>\n<h3 id=\"restore-procedures\" class=\"mobile-header\">Restore Procedures</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\">#!/bin/bash\n# rabbitmq-restore.sh\n\nBACKUP_DIR=&quot;$1&quot;\nif [ -z &quot;$BACKUP_DIR&quot; ]; then\n    echo &quot;Usage: $0 &lt;backup-directory&gt;&quot;\n    exit 1\nfi\n\n# Stop RabbitMQ (ensure clean state)\nsudo systemctl stop rabbitmq-server\n\n# Restore configuration\nsudo tar xzf &quot;$BACKUP_DIR/rabbitmq-config.tar.gz&quot; -C /\n\n# Restore SSL certificates\nif [ -f &quot;$BACKUP_DIR/rabbitmq-ssl.tar.gz&quot; ]; then\n    sudo tar xzf &quot;$BACKUP_DIR/rabbitmq-ssl.tar.gz&quot; -C /\nfi\n\n# Start RabbitMQ\nsudo systemctl start rabbitmq-server\n\n# Wait for RabbitMQ to start\nsleep 10\n\n# Import definitions\ncurl -u admin:SecureAdminPassword123! \\\n    -X POST \\\n    -H &quot;Content-Type: application/json&quot; \\\n    -d @&quot;$BACKUP_DIR/definitions.json&quot; \\\n    http://localhost:15672/api/definitions\n\n# Verify restore\nrabbitmqctl list_queues\nrabbitmqctl list_users\n\necho &quot;Restore completed from $BACKUP_DIR&quot;</code></pre>\n      </div>\n    </div>\n<h3 id=\"message-level-backup-advanced\" class=\"mobile-header\">Message-Level Backup (Advanced)</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\">#!/bin/bash\n# rabbitmq-message-backup.sh\n\nBACKUP_DIR=&quot;/backup/rabbitmq-messages/$(date +%Y%m%d_%H%M%S)&quot;\nmkdir -p &quot;$BACKUP_DIR&quot;\n\n# Install shovel plugin for message transfer\nrabbitmq-plugins enable rabbitmq_shovel\nrabbitmq-plugins enable rabbitmq_shovel_management\n\n# Backup messages from all queues\nrabbitmqctl list_queues name --formatter json | jq -r &#039;.[].name&#039; | while read -r queue; do\n    if [ &quot;$queue&quot; != &quot;null&quot; ]; then\n        # Create shovel to backup queue\n        curl -u admin:SecureAdminPassword123! -X PUT \\\n            &quot;http://localhost:15672/api/parameters/shovel/%2F/backup-$queue&quot; \\\n            -H &quot;Content-Type: application/json&quot; \\\n            -d &quot;{\n                \\&quot;value\\&quot;: {\n                    \\&quot;src-protocol\\&quot;: \\&quot;amqp091\\&quot;,\n                    \\&quot;src-uri\\&quot;: \\&quot;amqp://admin:SecureAdminPassword123!@localhost:5672/%2F\\&quot;,\n                    \\&quot;src-queue\\&quot;: \\&quot;$queue\\&quot;,\n                    \\&quot;dest-protocol\\&quot;: \\&quot;amqp091\\&quot;,\n                    \\&quot;dest-uri\\&quot;: \\&quot;amqp://backup:BackupPassword123!@backup-server:5672/%2F\\&quot;,\n                    \\&quot;dest-queue\\&quot;: \\&quot;backup-$queue\\&quot;\n                }\n            }&quot;\n    fi\ndone\n\necho &quot;Message backup shovels created for all queues&quot;</code></pre>\n      </div>\n    </div>\n<h2 id=\"troubleshooting\" class=\"mobile-header\">Troubleshooting</h2>\n<h3 id=\"common-issues\" class=\"mobile-header\">Common Issues</h3>\n<p class=\"mobile-paragraph\">1. <strong>RabbitMQ won't start</strong>:</p>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Check logs\nsudo journalctl -u rabbitmq-server -f\nsudo tail -f /var/log/rabbitmq/rabbit@$(hostname).log\n\n# Check Erlang installation\nerl -version\n\n# Check disk space\ndf -h /var/lib/rabbitmq\n\n# Check permissions\nls -la /var/lib/rabbitmq\nls -la /var/log/rabbitmq\n\n# Reset node (last resort)\nsudo rabbitmqctl stop_app\nsudo rabbitmqctl reset\nsudo rabbitmqctl start_app</code></pre>\n      </div>\n    </div>\n<p class=\"mobile-paragraph\">2. <strong>Cluster issues</strong>:</p>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Check cluster status\nrabbitmqctl cluster_status\n\n# Check network connectivity between nodes\ntelnet rabbitmq-node-2 25672\n\n# Check Erlang cookie consistency\nsudo cat /var/lib/rabbitmq/.erlang.cookie\n\n# Force cluster join\nsudo rabbitmqctl stop_app\nsudo rabbitmqctl join_cluster rabbit@rabbitmq-node-1\nsudo rabbitmqctl start_app</code></pre>\n      </div>\n    </div>\n<p class=\"mobile-paragraph\">3. <strong>Memory/disk alarms</strong>:</p>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Check alarms\nrabbitmqctl status | grep alarms\n\n# Check memory usage\nrabbitmqctl eval &#039;rabbit_vm:memory().&#039;\n\n# Check disk usage\ndf -h /var/lib/rabbitmq\n\n# Clear memory alarm (after fixing issue)\nrabbitmqctl eval &#039;vm_memory_monitor:set_vm_memory_high_watermark(0.4).&#039;</code></pre>\n      </div>\n    </div>\n<p class=\"mobile-paragraph\">4. <strong>Connection issues</strong>:</p>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Check if RabbitMQ is listening\nsudo ss -tlnp | grep :5672\n\n# Test AMQP connection\nrabbitmqctl eval &#039;rabbit_networking:tcp_listener_started(5672).&#039;\n\n# Check user permissions\nrabbitmqctl list_user_permissions admin\n\n# Test with management API\ncurl -u admin:SecureAdminPassword123! http://localhost:15672/api/overview</code></pre>\n      </div>\n    </div>\n<h3 id=\"debug-mode\" class=\"mobile-header\">Debug Mode</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Enable debug logging\necho &#039;log.file.level = debug&#039; &gt;&gt; /etc/rabbitmq/rabbitmq.conf\n\n# Enable connection logging\necho &#039;log.connection.level = debug&#039; &gt;&gt; /etc/rabbitmq/rabbitmq.conf\n\n# Enable channel logging  \necho &#039;log.channel.level = debug&#039; &gt;&gt; /etc/rabbitmq/rabbitmq.conf\n\n# Restart to apply\nsudo systemctl restart rabbitmq-server\n\n# View debug logs\nsudo tail -f /var/log/rabbitmq/rabbit@$(hostname).log</code></pre>\n      </div>\n    </div>\n<h2 id=\"maintenance\" class=\"mobile-header\">Maintenance</h2>\n<h3 id=\"update-procedures\" class=\"mobile-header\">Update Procedures</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># RHEL/CentOS/Rocky/AlmaLinux\nsudo yum check-update rabbitmq-server\nsudo yum update rabbitmq-server\n\n# Debian/Ubuntu\nsudo apt update\nsudo apt upgrade rabbitmq-server\n\n# Arch Linux\nsudo pacman -Syu rabbitmq\n\n# Alpine Linux\napk update\napk upgrade rabbitmq-server\n\n# openSUSE\nsudo zypper update rabbitmq-server\n\n# FreeBSD\npkg update\npkg upgrade rabbitmq\n\n# Always backup before updates\n./rabbitmq-backup.sh\n\n# Test after updates\nrabbitmqctl status\nsudo systemctl restart rabbitmq-server</code></pre>\n      </div>\n    </div>\n<h3 id=\"maintenance-tasks\" class=\"mobile-header\">Maintenance Tasks</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Weekly maintenance script\n#!/bin/bash\n# rabbitmq-maintenance.sh\n\n# Rotate logs\nrabbitmqctl rotate_logs\n\n# Check node health\nrabbitmqctl node_health_check\n\n# Clean up old definitions backup\nfind /backup/rabbitmq -name &quot;*.json&quot; -mtime +30 -delete\n\n# Optimize memory usage\nrabbitmqctl eval &#039;erlang:garbage_collect().&#039;\n\n# Check and clean old message store files\nrabbitmqctl eval &#039;rabbit_msg_store_gc:gc().&#039;\n\n# Check queue statistics\nrabbitmqctl list_queues name messages consumers memory | \\\n    awk &#039;$2 &gt; 1000 {print &quot;Queue &quot; $1 &quot; has &quot; $2 &quot; messages&quot;}&#039;\n\necho &quot;RabbitMQ maintenance completed&quot;</code></pre>\n      </div>\n    </div>\n<h3 id=\"health-monitoring\" class=\"mobile-header\">Health Monitoring</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Create monitoring cron job\necho &quot;*/5 * * * * /usr/local/bin/rabbitmq-health-check.sh&quot; | sudo crontab -\n\n# Log rotation\nsudo tee /etc/logrotate.d/rabbitmq &lt;&lt;EOF\n/var/log/rabbitmq/*.log {\n    daily\n    rotate 30\n    compress\n    delaycompress\n    missingok\n    notifempty\n    sharedscripts\n    postrotate\n        rabbitmqctl rotate_logs\n    endscript\n}\nEOF</code></pre>\n      </div>\n    </div>\n<h2 id=\"integration-examples\" class=\"mobile-header\">Integration Examples</h2>\n<h3 id=\"python-pika-integration\" class=\"mobile-header\">Python (pika) Integration</h3>\n<div class=\"mobile-code-block\" data-language=\"python\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">python</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-python\">import pika\nimport ssl\n\n# Basic connection\nconnection = pika.BlockingConnection(\n    pika.ConnectionParameters(host=&#039;localhost&#039;, port=5672,\n                            credentials=pika.PlainCredentials(&#039;myapp&#039;, &#039;SecureAppPassword123!&#039;))\n)\nchannel = connection.channel()\n\n# SSL connection\nssl_context = ssl.create_default_context(cafile=&#039;/etc/rabbitmq/ssl/ca_certificate.pem&#039;)\nssl_context.check_hostname = False\n\nssl_connection = pika.BlockingConnection(\n    pika.ConnectionParameters(\n        host=&#039;localhost&#039;,\n        port=5671,\n        credentials=pika.PlainCredentials(&#039;myapp&#039;, &#039;SecureAppPassword123!&#039;),\n        ssl_options=pika.SSLOptions(ssl_context)\n    )\n)\n\n# Declare queue and exchange\nchannel.exchange_declare(exchange=&#039;task_exchange&#039;, exchange_type=&#039;direct&#039;)\nchannel.queue_declare(queue=&#039;task_queue&#039;, durable=True)\nchannel.queue_bind(exchange=&#039;task_exchange&#039;, queue=&#039;task_queue&#039;, routing_key=&#039;task&#039;)\n\n# Publish message\nchannel.basic_publish(\n    exchange=&#039;task_exchange&#039;,\n    routing_key=&#039;task&#039;,\n    body=&#039;Hello, RabbitMQ!&#039;,\n    properties=pika.BasicProperties(delivery_mode=2)  # Make message persistent\n)\n\n# Consume messages\ndef callback(ch, method, properties, body):\n    print(f&quot;Received: {body}&quot;)\n    ch.basic_ack(delivery_tag=method.delivery_tag)\n\nchannel.basic_qos(prefetch_count=1)\nchannel.basic_consume(queue=&#039;task_queue&#039;, on_message_callback=callback)\nchannel.start_consuming()</code></pre>\n      </div>\n    </div>\n<h3 id=\"nodejs-amqplib-integration\" class=\"mobile-header\">Node.js (amqplib) Integration</h3>\n<div class=\"mobile-code-block\" data-language=\"javascript\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">javascript</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-javascript\">const amqp = require(&#039;amqplib&#039;);\nconst fs = require(&#039;fs&#039;);\n\n// Basic connection\nasync function connectBasic() {\n    const connection = await amqp.connect(&#039;amqp://myapp:SecureAppPassword123!@localhost:5672&#039;);\n    return connection;\n}\n\n// SSL connection\nasync function connectSSL() {\n    const connection = await amqp.connect({\n        protocol: &#039;amqps&#039;,\n        hostname: &#039;localhost&#039;,\n        port: 5671,\n        username: &#039;myapp&#039;,\n        password: &#039;SecureAppPassword123!&#039;,\n        ca: [fs.readFileSync(&#039;/etc/rabbitmq/ssl/ca_certificate.pem&#039;)],\n        cert: fs.readFileSync(&#039;/etc/rabbitmq/ssl/client_certificate.pem&#039;),\n        key: fs.readFileSync(&#039;/etc/rabbitmq/ssl/client_key.pem&#039;)\n    });\n    return connection;\n}\n\n// Publisher\nasync function publishMessage() {\n    const connection = await connectBasic();\n    const channel = await connection.createChannel();\n    \n    const exchange = &#039;task_exchange&#039;;\n    const routingKey = &#039;task&#039;;\n    const message = &#039;Hello from Node.js!&#039;;\n    \n    await channel.assertExchange(exchange, &#039;direct&#039;, { durable: true });\n    await channel.publish(exchange, routingKey, Buffer.from(message), { persistent: true });\n    \n    console.log(&#039;Message sent&#039;);\n    await channel.close();\n    await connection.close();\n}\n\n// Consumer\nasync function consumeMessages() {\n    const connection = await connectBasic();\n    const channel = await connection.createChannel();\n    \n    const queue = &#039;task_queue&#039;;\n    \n    await channel.assertQueue(queue, { durable: true });\n    await channel.prefetch(1);\n    \n    console.log(&#039;Waiting for messages...&#039;);\n    \n    channel.consume(queue, async (message) =&gt; {\n        if (message) {\n            console.log(&#039;Received:&#039;, message.content.toString());\n            // Process message\n            channel.ack(message);\n        }\n    });\n}</code></pre>\n      </div>\n    </div>\n<h3 id=\"java-spring-amqp-integration\" class=\"mobile-header\">Java (Spring AMQP) Integration</h3>\n<div class=\"mobile-code-block\" data-language=\"java\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">java</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-java\">// Configuration\n@Configuration\n@EnableRabbit\npublic class RabbitConfig {\n    \n    @Bean\n    public ConnectionFactory connectionFactory() {\n        CachingConnectionFactory factory = new CachingConnectionFactory(&quot;localhost&quot;);\n        factory.setPort(5672);\n        factory.setUsername(&quot;myapp&quot;);\n        factory.setPassword(&quot;SecureAppPassword123!&quot;);\n        factory.setVirtualHost(&quot;/&quot;);\n        return factory;\n    }\n    \n    @Bean\n    public RabbitTemplate rabbitTemplate(ConnectionFactory connectionFactory) {\n        RabbitTemplate template = new RabbitTemplate(connectionFactory);\n        template.setMandatory(true);\n        return template;\n    }\n    \n    @Bean\n    public DirectExchange taskExchange() {\n        return new DirectExchange(&quot;task_exchange&quot;, true, false);\n    }\n    \n    @Bean\n    public Queue taskQueue() {\n        return QueueBuilder.durable(&quot;task_queue&quot;).build();\n    }\n    \n    @Bean\n    public Binding taskBinding() {\n        return BindingBuilder.bind(taskQueue()).to(taskExchange()).with(&quot;task&quot;);\n    }\n}\n\n// Producer\n@Service\npublic class MessageProducer {\n    \n    @Autowired\n    private RabbitTemplate rabbitTemplate;\n    \n    public void sendMessage(String message) {\n        rabbitTemplate.convertAndSend(&quot;task_exchange&quot;, &quot;task&quot;, message);\n    }\n}\n\n// Consumer\n@Service\npublic class MessageConsumer {\n    \n    @RabbitListener(queues = &quot;task_queue&quot;)\n    public void receiveMessage(String message) {\n        System.out.println(&quot;Received: &quot; + message);\n        // Process message\n    }\n}</code></pre>\n      </div>\n    </div>\n<h3 id=\"go-amqp091-go-integration\" class=\"mobile-header\">Go (amqp091-go) Integration</h3>\n<div class=\"mobile-code-block\" data-language=\"go\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">go</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-go\">package main\n\nimport (\n    &quot;log&quot;\n    &quot;github.com/rabbitmq/amqp091-go&quot;\n)\n\nfunc connectRabbitMQ() (*amqp091.Connection, error) {\n    return amqp091.Dial(&quot;amqp://myapp:SecureAppPassword123!@localhost:5672/&quot;)\n}\n\nfunc publishMessage(message string) error {\n    conn, err := connectRabbitMQ()\n    if err != nil {\n        return err\n    }\n    defer conn.Close()\n\n    ch, err := conn.Channel()\n    if err != nil {\n        return err\n    }\n    defer ch.Close()\n\n    // Declare exchange\n    err = ch.ExchangeDeclare(\n        &quot;task_exchange&quot;,\n        &quot;direct&quot;,\n        true,  // durable\n        false, // auto-deleted\n        false, // internal\n        false, // no-wait\n        nil,   // arguments\n    )\n    if err != nil {\n        return err\n    }\n\n    // Declare queue\n    _, err = ch.QueueDeclare(\n        &quot;task_queue&quot;,\n        true,  // durable\n        false, // delete when unused\n        false, // exclusive\n        false, // no-wait\n        nil,   // arguments\n    )\n    if err != nil {\n        return err\n    }\n\n    // Publish message\n    return ch.Publish(\n        &quot;task_exchange&quot;,\n        &quot;task&quot;,\n        false, // mandatory\n        false, // immediate\n        amqp091.Publishing{\n            ContentType:  &quot;text/plain&quot;,\n            Body:         []byte(message),\n            DeliveryMode: amqp091.Persistent,\n        },\n    )\n}\n\nfunc consumeMessages() error {\n    conn, err := connectRabbitMQ()\n    if err != nil {\n        return err\n    }\n    defer conn.Close()\n\n    ch, err := conn.Channel()\n    if err != nil {\n        return err\n    }\n    defer ch.Close()\n\n    msgs, err := ch.Consume(\n        &quot;task_queue&quot;,\n        &quot;&quot;,    // consumer\n        false, // auto-ack\n        false, // exclusive\n        false, // no-local\n        false, // no-wait\n        nil,   // args\n    )\n    if err != nil {\n        return err\n    }\n\n    forever := make(chan bool)\n\n    go func() {\n        for d := range msgs {\n            log.Printf(&quot;Received: %s&quot;, d.Body)\n            // Process message\n            d.Ack(false)\n        }\n    }()\n\n    log.Printf(&quot;Waiting for messages...&quot;)\n    &lt;-forever\n    return nil\n}</code></pre>\n      </div>\n    </div>\n<h2 id=\"additional-resources\" class=\"mobile-header\">Additional Resources</h2>\n<li class=\"mobile-list-item\"><a href=\"https://www.rabbitmq.com/documentation.html\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">Official RabbitMQ Documentation</a></li>\n<li class=\"mobile-list-item\"><a href=\"https://www.rabbitmq.com/getstarted.html\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">RabbitMQ Tutorials</a></li>\n<li class=\"mobile-list-item\"><a href=\"https://www.rabbitmq.com/management.html\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">RabbitMQ Management Plugin</a></li>\n<li class=\"mobile-list-item\"><a href=\"https://www.rabbitmq.com/clustering.html\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">RabbitMQ Clustering Guide</a></li>\n<li class=\"mobile-list-item\"><a href=\"https://www.rabbitmq.com/ha.html\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">RabbitMQ High Availability</a></li>\n<li class=\"mobile-list-item\"><a href=\"https://www.rabbitmq.com/amqp-0-9-1-reference.html\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">AMQP 0-9-1 Protocol Reference</a></li>\n<li class=\"mobile-list-item\"><a href=\"https://www.rabbitmq.com/community.html\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">RabbitMQ Community</a></li>\n<li class=\"mobile-list-item\"><a href=\"https://github.com/rabbitmq/rabbitmq-server\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">RabbitMQ GitHub Repository</a></li>\n<p class=\"mobile-paragraph\">---</p>\n<p class=\"mobile-paragraph\"><strong>Note:</strong> This guide is part of the <a href=\"https://howtomgr.github.io\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">HowToMgr</a> collection. Always refer to official documentation for the most up-to-date information.</p>","readTime":"21 min","wordCount":4178,"lastBuilt":"2025-09-14T18:11:58.967Z"},{"name":"rancher","displayName":"Rancher","slug":"rancher","description":"Repo for rancher","category":"container","language":null,"stars":0,"forks":0,"topics":[],"githubUrl":"https://github.com/howtomgr/rancher","updatedAt":"2025-09-08T03:15:28Z","createdAt":"2023-08-28T03:49:46Z","readmeRaw":"### Docker, Rancher, and Kubernetes  \n  \nDocker\n\n```shell\nsudo groupadd docker; sudo usermod -aG docker $USER; newgrp docker \ncurl -fsSL https://github.com/docker/docker-install/raw/main/install.sh | sudo sh\nsudo systemctl enable --now docker\n```\n  \nRancher  \n\n```shell\nsudo docker run -d --restart=unless-stopped -p 80:80 -p 443:443 rancher/rancher:latest\n```\n  \nKubernetes\n\n```shell\ncurl -LO \"https://dl.k8s.io/release/$(curl -L -s https://dl.k8s.io/release/stable.txt)/bin/linux/amd64/kubectl\"\nsudo install -o root -g root -m 0755 kubectl /usr/local/bin/kubectl\n```\n\nMiniKube\n\n```shell\n curl -LO https://storage.googleapis.com/minikube/releases/latest/minikube-linux-amd64\n sudo install minikube-linux-amd64 /usr/local/bin/minikube\n minikube start\n```\n\nClean up\n\n```shell\nrm kubectl\nrm minikube\n```\n  \nSources:  \n<https://www.youtube.com/watch?oILc0ywDVTk>  \n<https://rancher.com/docs/rancher/v2.x/en/installation/requirements/installing-docker/>  \n<https://rancher.com/docs/rancher/v2.x/en/installation/other-installation-methods/single-node-docker/>  \n","readmeHtml":"<h3 id=\"docker-rancher-and-kubernetes\" class=\"mobile-header\">Docker, Rancher, and Kubernetes  </h3>\n<p class=\"mobile-paragraph\">Docker</p>\n<div class=\"mobile-code-block\" data-language=\"shell\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">shell</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-shell\">sudo groupadd docker; sudo usermod -aG docker $USER; newgrp docker \ncurl -fsSL https://github.com/docker/docker-install/raw/main/install.sh | sudo sh\nsudo systemctl enable --now docker</code></pre>\n      </div>\n    </div>\n<p class=\"mobile-paragraph\">Rancher  </p>\n<div class=\"mobile-code-block\" data-language=\"shell\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">shell</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-shell\">sudo docker run -d --restart=unless-stopped -p 80:80 -p 443:443 rancher/rancher:latest</code></pre>\n      </div>\n    </div>\n<p class=\"mobile-paragraph\">Kubernetes</p>\n<div class=\"mobile-code-block\" data-language=\"shell\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">shell</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-shell\">curl -LO &quot;https://dl.k8s.io/release/$(curl -L -s https://dl.k8s.io/release/stable.txt)/bin/linux/amd64/kubectl&quot;\nsudo install -o root -g root -m 0755 kubectl /usr/local/bin/kubectl</code></pre>\n      </div>\n    </div>\n<p class=\"mobile-paragraph\">MiniKube</p>\n<div class=\"mobile-code-block\" data-language=\"shell\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">shell</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-shell\"> curl -LO https://storage.googleapis.com/minikube/releases/latest/minikube-linux-amd64\n sudo install minikube-linux-amd64 /usr/local/bin/minikube\n minikube start</code></pre>\n      </div>\n    </div>\n<p class=\"mobile-paragraph\">Clean up</p>\n<div class=\"mobile-code-block\" data-language=\"shell\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">shell</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-shell\">rm kubectl\nrm minikube</code></pre>\n      </div>\n    </div>\n<p class=\"mobile-paragraph\">Sources:  </p>\n<p class=\"mobile-paragraph\"><https://www.youtube.com/watch?oILc0ywDVTk>  </p>\n<p class=\"mobile-paragraph\"><https://rancher.com/docs/rancher/v2.x/en/installation/requirements/installing-docker/>  </p>\n<p class=\"mobile-paragraph\"><https://rancher.com/docs/rancher/v2.x/en/installation/other-installation-methods/single-node-docker/>  </p>","readTime":"1 min","wordCount":86,"lastBuilt":"2025-09-14T18:12:12.389Z"},{"name":"raspbian","displayName":"Raspbian","slug":"raspbian","description":"Repo for raspbian","category":"infrastructure","language":null,"stars":0,"forks":0,"topics":[],"githubUrl":"https://github.com/howtomgr/raspbian","updatedAt":"2025-09-08T03:15:35Z","createdAt":"2023-08-28T03:49:55Z","readmeRaw":"## My raspbian setup  \n  \nServers:  \n\n```shell\nsudo apt update && sudo apt dist-upgrade -yy -q && sudo reboot || echo \"Update has failed\"\nsudo apt install -yy git curl gnupg python3 vim-nox pass lynx net-tools ctags build-essential fim emacs-nox x11-xkb-utils x11-session-utils\nsudo GH=casjay bash -c \"$(curl -LsS https://github.com/casjay-base/raspbian/raw/main/install.sh)\"\nbash -c \"$(curl -LsS -H \"Authorization: token ${GITHUB_ACCESS_TOKEN}\" ${MYPRIVATEDOTFILES_SERVER}/raw/main/install.sh)\"\n```\n\nDesktops:  \n\n```shell\nsudo apt update && sudo apt dist-upgrade -yy -q && sudo reboot || echo \"Update has failed\"\nsudo apt install -yy git curl gnupg python3 python3-pil libjpeg-dev vim-nox neomutt isync msmtp pass lynx notmuch abook urlview newsboat mplayer mpc mpd pianobar net-tools mpv ctags build-essential fim emacs-nox x11-xkb-utils x11-session-utils\nsudo GH=casjay bash -c \"$(curl -LsS https://github.com/casjay-base/raspbian/raw/main/install.sh)\"\nbash -c \"$(curl -LsS -H \"Authorization: token ${GITHUB_ACCESS_TOKEN}\" ${MYPRIVATEDOTFILES_DESKTOP}/raw/main/install.sh)\"\n```\n  \n  \nResources:  \n<https://willemm.nl/track-aircraft-using-ads-b-groundstation-virtual-radar-server-vrs/>  \n","readmeHtml":"<h2 id=\"my-raspbian-setup\" class=\"mobile-header\">My raspbian setup  </h2>\n<p class=\"mobile-paragraph\">Servers:  </p>\n<div class=\"mobile-code-block\" data-language=\"shell\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">shell</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-shell\">sudo apt update &amp;&amp; sudo apt dist-upgrade -yy -q &amp;&amp; sudo reboot || echo &quot;Update has failed&quot;\nsudo apt install -yy git curl gnupg python3 vim-nox pass lynx net-tools ctags build-essential fim emacs-nox x11-xkb-utils x11-session-utils\nsudo GH=casjay bash -c &quot;$(curl -LsS https://github.com/casjay-base/raspbian/raw/main/install.sh)&quot;\nbash -c &quot;$(curl -LsS -H &quot;Authorization: token ${GITHUB_ACCESS_TOKEN}&quot; ${MYPRIVATEDOTFILES_SERVER}/raw/main/install.sh)&quot;</code></pre>\n      </div>\n    </div>\n<p class=\"mobile-paragraph\">Desktops:  </p>\n<div class=\"mobile-code-block\" data-language=\"shell\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">shell</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-shell\">sudo apt update &amp;&amp; sudo apt dist-upgrade -yy -q &amp;&amp; sudo reboot || echo &quot;Update has failed&quot;\nsudo apt install -yy git curl gnupg python3 python3-pil libjpeg-dev vim-nox neomutt isync msmtp pass lynx notmuch abook urlview newsboat mplayer mpc mpd pianobar net-tools mpv ctags build-essential fim emacs-nox x11-xkb-utils x11-session-utils\nsudo GH=casjay bash -c &quot;$(curl -LsS https://github.com/casjay-base/raspbian/raw/main/install.sh)&quot;\nbash -c &quot;$(curl -LsS -H &quot;Authorization: token ${GITHUB_ACCESS_TOKEN}&quot; ${MYPRIVATEDOTFILES_DESKTOP}/raw/main/install.sh)&quot;</code></pre>\n      </div>\n    </div>\n<p class=\"mobile-paragraph\">Resources:  </p>\n<p class=\"mobile-paragraph\"><https://willemm.nl/track-aircraft-using-ads-b-groundstation-virtual-radar-server-vrs/>  </p>","readTime":"1 min","wordCount":129,"lastBuilt":"2025-09-14T18:12:12.125Z"},{"name":"redis","displayName":"Redis","slug":"redis","description":"Repo for redis","category":"database","language":null,"stars":0,"forks":0,"topics":[],"githubUrl":"https://github.com/howtomgr/redis","updatedAt":"2025-09-14T01:31:02Z","createdAt":"2025-09-08T03:15:38Z","readmeRaw":"# Redis Installation Guide\n\nRedis is a free and open-source in-memory data structure store, used as a database, cache, message broker, and streaming engine. Originally developed by Salvatore Sanfilippo, Redis stands for \"Remote Dictionary Server\" and provides data structures such as strings, hashes, lists, sets, sorted sets with range queries, bitmaps, hyperloglogs, and geospatial indexes. It serves as a FOSS alternative to commercial solutions like Amazon ElastiCache, Azure Cache for Redis, or proprietary in-memory databases, offering comparable performance with features like persistence, replication, Lua scripting, and transactions.\n\n## Prerequisites\n\n- **Hardware Requirements**:\n  - CPU: 1 core minimum (2+ cores recommended for production)\n  - RAM: 1GB minimum (8GB+ recommended for production workloads)\n  - Storage: 512MB for installation (SSD recommended for persistence)\n  - Network: Low latency network for cluster deployments\n- **Operating System**: Linux, BSD, macOS, or Windows (via WSL2)\n- **Network Requirements**:\n  - Port 6379 (default Redis port)\n  - Port 16379 (cluster bus port, if using cluster mode)\n  - Additional ports for replicas and sentinel\n- **Dependencies**:\n  - GCC compiler and libc (for building from source)\n  - TCL 8.5+ (for running tests)\n  - systemd or init system (for service management)\n- **System Access**: root or sudo privileges required\n\n## Installation\n\n### RHEL/CentOS/Rocky Linux/AlmaLinux\n\n```bash\n# RHEL/CentOS 7\n# Enable EPEL repository\nsudo yum install -y epel-release\n\n# Install Redis\nsudo yum install -y redis\n\n# Enable and start service\nsudo systemctl enable --now redis\n\n# RHEL/CentOS/Rocky/AlmaLinux 8+\n# Enable EPEL repository\nsudo dnf install -y epel-release\n\n# Install Redis\nsudo dnf install -y redis\n\n# Enable and start service\nsudo systemctl enable --now redis\n\n# Install latest Redis from Remi repository (recommended)\nsudo dnf install -y https://rpms.remirepo.net/enterprise/remi-release-8.rpm\nsudo dnf module enable redis:remi-7.2\nsudo dnf install -y redis\n```\n\n### Debian/Ubuntu\n\n```bash\n# Update package index\nsudo apt update\n\n# Install Redis\nsudo apt install -y redis-server\n\n# The service should start automatically\nsudo systemctl status redis-server\n\n# For latest version, use official Redis repository\ncurl -fsSL https://packages.redis.io/gpg | sudo gpg --dearmor -o /usr/share/keyrings/redis-archive-keyring.gpg\necho \"deb [signed-by=/usr/share/keyrings/redis-archive-keyring.gpg] https://packages.redis.io/deb $(lsb_release -cs) main\" | sudo tee /etc/apt/sources.list.d/redis.list\nsudo apt update\nsudo apt install -y redis\n```\n\n### Arch Linux\n\n```bash\n# Install Redis from official repositories\nsudo pacman -S redis\n\n# Optional: Install Redis tools\nsudo pacman -S redis-tools\n\n# Enable and start service\nsudo systemctl enable --now redis\n\n# For development headers\nsudo pacman -S hiredis\n\n# For Redis modules from AUR\nyay -S redis-mod-redisgraph\nyay -S redis-mod-redisearch\n```\n\n### Alpine Linux\n\n```bash\n# Install Redis\napk add --no-cache redis\n\n# Install additional tools\napk add --no-cache redis-cli redis-benchmark\n\n# Create redis user if not exists\nadduser -D -H -s /sbin/nologin -g redis redis\n\n# Create necessary directories\nmkdir -p /var/lib/redis /var/log/redis /var/run/redis\nchown redis:redis /var/lib/redis /var/log/redis /var/run/redis\n\n# Enable and start service\nrc-update add redis default\nrc-service redis start\n```\n\n### openSUSE/SLES\n\n```bash\n# openSUSE Leap/Tumbleweed\nsudo zypper install -y redis\n\n# Start and enable service\nsudo systemctl enable --now redis@default\n\n# For cluster setup\nsudo zypper install -y redis-sentinel\n\n# SLES 15\n# May need to enable additional modules\nsudo SUSEConnect -p sle-module-server-applications/15.5/x86_64\nsudo zypper install -y redis6\n\n# Alternative: use Open Build Service\nsudo zypper addrepo https://download.opensuse.org/repositories/server:database/openSUSE_Leap_15.5/server:database.repo\nsudo zypper refresh\nsudo zypper install -y redis\n```\n\n### macOS\n\n```bash\n# Using Homebrew\nbrew install redis\n\n# Start Redis service\nbrew services start redis\n\n# Or run manually\nredis-server /usr/local/etc/redis.conf\n\n# For development\nbrew install hiredis\n\n# Alternative: Using MacPorts\nsudo port install redis\nsudo port load redis\n```\n\n### FreeBSD\n\n```bash\n# Install Redis\npkg install redis\n\n# Or from ports\ncd /usr/ports/databases/redis\nmake install clean\n\n# Enable Redis\necho 'redis_enable=\"YES\"' >> /etc/rc.conf\n\n# Start Redis\nservice redis start\n\n# For development\npkg install hiredis\n```\n\n### Windows\n\n```powershell\n# Method 1: Using WSL2 (Recommended)\nwsl --install\n# Then follow Linux instructions inside WSL2\n\n# Method 2: Using Chocolatey\nchoco install redis-64\n\n# Method 3: Using Memurai (Redis-compatible for Windows)\n# Download from https://www.memurai.com/\n\n# Method 4: Using official Redis on Windows archive\n# Download from https://github.com/microsoftarchive/redis/releases\n# Extract to C:\\Redis\n# Run redis-server.exe\n\n# Add to PATH\n[Environment]::SetEnvironmentVariable(\"Path\", \"$env:Path;C:\\Redis\", \"Machine\")\n\n# Create Windows service\nredis-server --service-install redis.windows.conf --loglevel verbose\nredis-server --service-start\n```\n\n## Initial Configuration\n\n### First-Run Setup\n\n1. **Create Redis user** (if not created by package):\n```bash\n# Linux systems\nsudo useradd -r -d /var/lib/redis -s /sbin/nologin -c \"Redis Database Server\" redis\n```\n\n2. **Default configuration locations**:\n- RHEL/CentOS/Rocky/AlmaLinux: `/etc/redis.conf` or `/etc/redis/redis.conf`\n- Debian/Ubuntu: `/etc/redis/redis.conf`\n- Arch Linux: `/etc/redis/redis.conf`\n- Alpine Linux: `/etc/redis.conf`\n- openSUSE/SLES: `/etc/redis/default.conf`\n- macOS: `/usr/local/etc/redis.conf`\n- FreeBSD: `/usr/local/etc/redis.conf`\n- Windows: `C:\\Redis\\redis.windows.conf`\n\n3. **Essential settings to change**:\n\n```bash\n# Edit Redis configuration\nsudo vi /etc/redis/redis.conf\n\n# Critical settings to modify:\n\n# Bind to specific interfaces (default is localhost only)\nbind 127.0.0.1 ::1\n# For network access (be careful!):\n# bind 0.0.0.0\n\n# Require password for connections\nrequirepass YourStrongPasswordHere123!\n\n# Set memory limit\nmaxmemory 2gb\nmaxmemory-policy allkeys-lru\n\n# Enable persistence\nsave 900 1      # Save after 900 sec if at least 1 key changed\nsave 300 10     # Save after 300 sec if at least 10 keys changed  \nsave 60 10000   # Save after 60 sec if at least 10000 keys changed\n\n# Set working directory\ndir /var/lib/redis\n\n# Set log file\nlogfile /var/log/redis/redis.log\nloglevel notice\n\n# Disable dangerous commands\nrename-command FLUSHDB \"\"\nrename-command FLUSHALL \"\"\nrename-command CONFIG \"CONFIG_y7d9s3k4\"\n```\n\n### Testing Initial Setup\n\n```bash\n# Test Redis is running\nredis-cli ping\n# Should return: PONG\n\n# Test with authentication\nredis-cli -a YourStrongPasswordHere123! ping\n\n# Set and get a test key\nredis-cli -a YourStrongPasswordHere123! SET test \"Hello Redis\"\nredis-cli -a YourStrongPasswordHere123! GET test\n\n# Check Redis info\nredis-cli -a YourStrongPasswordHere123! INFO server\n```\n\n**WARNING:** Never expose Redis to the public internet without proper authentication and SSL/TLS encryption!\n\n## Service Management\n\n### systemd (RHEL, Debian, Ubuntu, Arch, openSUSE)\n\n```bash\n# Enable Redis to start on boot\nsudo systemctl enable redis\n# Or on some systems:\nsudo systemctl enable redis-server\n\n# Start Redis\nsudo systemctl start redis\n\n# Stop Redis\nsudo systemctl stop redis\n\n# Restart Redis\nsudo systemctl restart redis\n\n# Reload configuration without restart\nsudo systemctl reload redis\n\n# Check status\nsudo systemctl status redis\n\n# View logs\nsudo journalctl -u redis -f\n```\n\n### OpenRC (Alpine Linux)\n\n```bash\n# Enable Redis to start on boot\nrc-update add redis default\n\n# Start Redis\nrc-service redis start\n\n# Stop Redis\nrc-service redis stop\n\n# Restart Redis\nrc-service redis restart\n\n# Check status\nrc-service redis status\n\n# View logs\ntail -f /var/log/redis/redis.log\n```\n\n### rc.d (FreeBSD)\n\n```bash\n# Enable in /etc/rc.conf\necho 'redis_enable=\"YES\"' >> /etc/rc.conf\n\n# Start Redis\nservice redis start\n\n# Stop Redis\nservice redis stop\n\n# Restart Redis\nservice redis restart\n\n# Check status\nservice redis status\n```\n\n### launchd (macOS)\n\n```bash\n# Using Homebrew services\nbrew services start redis\nbrew services stop redis\nbrew services restart redis\n\n# Check status\nbrew services list | grep redis\n\n# Manual control\nredis-server /usr/local/etc/redis.conf\n# Stop with Ctrl+C or:\nredis-cli shutdown\n```\n\n### Windows Service Manager\n\n```powershell\n# Start Redis service\nredis-server --service-start\n\n# Stop Redis service  \nredis-server --service-stop\n\n# Using net commands\nnet start Redis\nnet stop Redis\n\n# Using PowerShell\nStart-Service -Name Redis\nStop-Service -Name Redis\nRestart-Service -Name Redis\n\n# Check status\nGet-Service -Name Redis\n```\n\n## Advanced Configuration\n\n### Memory Optimization\n\n```bash\n# /etc/redis/redis.conf\n\n# Memory management\nmaxmemory 4gb\nmaxmemory-policy allkeys-lru\n# Policies: volatile-lru, allkeys-lru, volatile-lfu, allkeys-lfu,\n#           volatile-random, allkeys-random, volatile-ttl, noeviction\n\n# Memory optimization\nhash-max-ziplist-entries 512\nhash-max-ziplist-value 64\nlist-max-ziplist-size -2\nlist-compress-depth 0\nset-max-intset-entries 512\nzset-max-ziplist-entries 128\nzset-max-ziplist-value 64\n\n# Enable memory defragmentation (Redis 4.0+)\nactivedefrag yes\nactive-defrag-ignore-bytes 100mb\nactive-defrag-threshold-lower 10\nactive-defrag-threshold-upper 100\n```\n\n### Persistence Configuration\n\n```bash\n# RDB (Redis Database) snapshots\nsave 900 1\nsave 300 10\nsave 60 10000\nstop-writes-on-bgsave-error yes\nrdbcompression yes\nrdbchecksum yes\ndbfilename dump.rdb\ndir /var/lib/redis\n\n# AOF (Append Only File) persistence\nappendonly yes\nappendfilename \"appendonly.aof\"\nappendfsync everysec  # Options: always, everysec, no\nno-appendfsync-on-rewrite no\nauto-aof-rewrite-percentage 100\nauto-aof-rewrite-min-size 64mb\naof-load-truncated yes\naof-use-rdb-preamble yes\n```\n\n### Replication Setup\n\n```bash\n# On replica server, add to redis.conf:\nreplicaof master_ip 6379\nmasterauth YourStrongPasswordHere123!\nreplica-read-only yes\nreplica-serve-stale-data yes\n\n# Replication settings\nrepl-diskless-sync no\nrepl-diskless-sync-delay 5\nrepl-ping-replica-period 10\nrepl-timeout 60\nrepl-disable-tcp-nodelay no\nrepl-backlog-size 1mb\nrepl-backlog-ttl 3600\n```\n\n### Redis Sentinel (High Availability)\n\n```bash\n# /etc/redis/sentinel.conf\nport 26379\nbind 127.0.0.1\nprotected-mode yes\nsentinel monitor mymaster 127.0.0.1 6379 2\nsentinel auth-pass mymaster YourStrongPasswordHere123!\nsentinel down-after-milliseconds mymaster 5000\nsentinel parallel-syncs mymaster 1\nsentinel failover-timeout mymaster 10000\n\n# Start sentinel\nredis-sentinel /etc/redis/sentinel.conf\n```\n\n## Reverse Proxy Setup\n\nWhile Redis doesn't use HTTP reverse proxies, you can use TCP proxies for load balancing.\n\n### HAProxy Configuration\n\n```nginx\n# /etc/haproxy/haproxy.cfg\nglobal\n    maxconn 4096\n    daemon\n\ndefaults\n    mode tcp\n    timeout connect 5000ms\n    timeout client 50000ms\n    timeout server 50000ms\n\nlisten redis\n    bind *:6379\n    balance roundrobin\n    option tcp-check\n    tcp-check connect\n    tcp-check send AUTH\\ YourStrongPasswordHere123!\\r\\n\n    tcp-check expect string +OK\n    tcp-check send PING\\r\\n\n    tcp-check expect string +PONG\n    tcp-check send QUIT\\r\\n\n    tcp-check expect string +OK\n    server redis1 192.168.1.10:6379 check inter 1s\n    server redis2 192.168.1.11:6379 check inter 1s\n```\n\n### nginx Stream Module\n\n```nginx\n# /etc/nginx/nginx.conf\nstream {\n    upstream redis_backend {\n        server 192.168.1.10:6379 max_fails=3 fail_timeout=30s;\n        server 192.168.1.11:6379 max_fails=3 fail_timeout=30s;\n    }\n    \n    server {\n        listen 6379;\n        proxy_pass redis_backend;\n        proxy_connect_timeout 1s;\n        proxy_timeout 3s;\n    }\n}\n```\n\n## Security Configuration\n\n### Authentication and ACL\n\n```bash\n# Basic authentication (redis.conf)\nrequirepass YourStrongPasswordHere123!\n\n# ACL configuration (Redis 6.0+)\naclfile /etc/redis/users.acl\n\n# Create ACL users\n# In redis-cli:\nACL SETUSER alice on >alice_password ~cached:* &* +get +set +del\nACL SETUSER bob on >bob_password ~* &* +@read\nACL SETUSER admin on >admin_password ~* &* +@all\n\n# Disable default user\nACL SETUSER default on nopass ~* &* -@all\n```\n\n### SSL/TLS Configuration\n\n```bash\n# Build Redis with TLS support\nmake BUILD_TLS=yes\n\n# Configure TLS in redis.conf\nport 0\ntls-port 6379\ntls-cert-file /etc/redis/tls/redis.crt\ntls-key-file /etc/redis/tls/redis.key\ntls-ca-cert-file /etc/redis/tls/ca.crt\ntls-dh-params-file /etc/redis/tls/redis.dh\n\n# TLS settings\ntls-protocols \"TLSv1.2 TLSv1.3\"\ntls-ciphers TLS_AES_256_GCM_SHA384:TLS_CHACHA20_POLY1305_SHA256\ntls-ciphersuites TLS_AES_256_GCM_SHA384:TLS_CHACHA20_POLY1305_SHA256\ntls-prefer-server-ciphers yes\n\n# Require TLS for replication\ntls-replication yes\n```\n\n### Firewall Rules\n\n```bash\n# UFW (Ubuntu/Debian)\nsudo ufw allow from 192.168.1.0/24 to any port 6379\nsudo ufw reload\n\n# firewalld (RHEL/CentOS/openSUSE)\nsudo firewall-cmd --permanent --new-zone=redis\nsudo firewall-cmd --permanent --zone=redis --add-source=192.168.1.0/24\nsudo firewall-cmd --permanent --zone=redis --add-port=6379/tcp\nsudo firewall-cmd --reload\n\n# iptables\nsudo iptables -A INPUT -s 192.168.1.0/24 -p tcp --dport 6379 -j ACCEPT\nsudo iptables -A INPUT -p tcp --dport 6379 -j DROP\nsudo iptables-save > /etc/iptables/rules.v4\n\n# pf (FreeBSD)\n# Add to /etc/pf.conf\npass in on $ext_if proto tcp from 192.168.1.0/24 to any port 6379\nblock in on $ext_if proto tcp to any port 6379\n\n# Windows Firewall\nNew-NetFirewallRule -DisplayName \"Redis\" -Direction Inbound -Protocol TCP -LocalPort 6379 -RemoteAddress 192.168.1.0/24 -Action Allow\n```\n\n### Security Best Practices\n\n```bash\n# Disable dangerous commands\nrename-command FLUSHDB \"\"\nrename-command FLUSHALL \"\"\nrename-command KEYS \"\"\nrename-command CONFIG \"CONFIG_y7d9s3k4\"\nrename-command SHUTDOWN \"\"\n\n# Enable protected mode\nprotected-mode yes\n\n# Set client connection limits\ntcp-keepalive 300\ntimeout 300\ntcp-backlog 511\n\n# Limit client output buffer\nclient-output-buffer-limit normal 0 0 0\nclient-output-buffer-limit replica 256mb 64mb 60\nclient-output-buffer-limit pubsub 32mb 8mb 60\n```\n\n## Database Setup\n\nRedis doesn't require traditional database setup, but here's how to organize data:\n\n### Keyspace Design\n\n```bash\n# Use namespacing for keys\nSET user:1000:name \"John Doe\"\nSET user:1000:email \"john@example.com\"\nHSET user:1000 name \"John Doe\" email \"john@example.com\"\n\n# Use expiration for cache\nSET cache:user:1000 \"{...json...}\" EX 3600\n\n# Database selection (0-15 by default)\nSELECT 0  # Default database\nSELECT 1  # Switch to database 1\n\n# Configure number of databases\ndatabases 16\n```\n\n### Data Types Examples\n\n```bash\n# Strings\nSET key \"value\"\nGET key\nINCR counter\nDECR counter\n\n# Lists\nLPUSH queue item1 item2\nRPOP queue\nLRANGE queue 0 -1\n\n# Sets\nSADD tags redis nosql cache\nSMEMBERS tags\nSINTER tags:post1 tags:post2\n\n# Sorted Sets\nZADD leaderboard 100 player1 200 player2\nZRANGE leaderboard 0 -1 WITHSCORES\n\n# Hashes\nHSET user:1000 name \"John\" age 30\nHGETALL user:1000\n\n# Streams (Redis 5.0+)\nXADD mystream * sensor-id 1234 temperature 19.8\nXREAD COUNT 2 STREAMS mystream 0\n```\n\n## Performance Optimization\n\n### System Tuning\n\n```bash\n# /etc/sysctl.conf\n# Increase system memory\nvm.overcommit_memory = 1\nnet.core.somaxconn = 65535\nnet.ipv4.tcp_max_syn_backlog = 65535\n\n# Disable THP (Transparent Huge Pages)\necho never > /sys/kernel/mm/transparent_hugepage/enabled\necho never > /sys/kernel/mm/transparent_hugepage/defrag\n\n# Apply settings\nsudo sysctl -p\n```\n\n### Redis Performance Tuning\n\n```bash\n# redis.conf optimizations\n\n# I/O threads (Redis 6.0+)\nio-threads 4\nio-threads-do-reads yes\n\n# Disable saving if using Redis as cache only\nsave \"\"\n\n# Lazy freeing (Redis 4.0+)\nlazyfree-lazy-eviction yes\nlazyfree-lazy-expire yes\nlazyfree-lazy-server-del yes\nreplica-lazy-flush yes\n\n# Background tasks\nhz 100  # Increase for more responsive background tasks\n\n# Client optimizations\ntcp-keepalive 60\ntcp-backlog 511\n```\n\n### Benchmarking\n\n```bash\n# Basic benchmark\nredis-benchmark -h localhost -p 6379 -a YourStrongPasswordHere123! -n 100000 -c 50\n\n# Test specific commands\nredis-benchmark -h localhost -p 6379 -a YourStrongPasswordHere123! -t set,get -n 100000\n\n# Pipeline mode\nredis-benchmark -h localhost -p 6379 -a YourStrongPasswordHere123! -P 16 -n 100000\n\n# Custom payload size\nredis-benchmark -h localhost -p 6379 -a YourStrongPasswordHere123! -d 1024 -n 100000\n```\n\n## Monitoring\n\n### Built-in Monitoring\n\n```bash\n# Real-time stats\nredis-cli -a YourStrongPasswordHere123! --stat\n\n# Monitor commands in real-time\nredis-cli -a YourStrongPasswordHere123! MONITOR\n\n# Get server info\nredis-cli -a YourStrongPasswordHere123! INFO\nredis-cli -a YourStrongPasswordHere123! INFO stats\nredis-cli -a YourStrongPasswordHere123! INFO memory\nredis-cli -a YourStrongPasswordHere123! INFO replication\n\n# Memory usage analysis\nredis-cli -a YourStrongPasswordHere123! --bigkeys\nredis-cli -a YourStrongPasswordHere123! --memkeys\nredis-cli -a YourStrongPasswordHere123! MEMORY STATS\nredis-cli -a YourStrongPasswordHere123! MEMORY DOCTOR\n```\n\n### Slow Log Analysis\n\n```bash\n# Configure slow log\nCONFIG SET slowlog-log-slower-than 10000  # Log queries slower than 10ms\nCONFIG SET slowlog-max-len 128\n\n# View slow log\nSLOWLOG GET 10\nSLOWLOG LEN\nSLOWLOG RESET\n```\n\n### External Monitoring Tools\n\n```bash\n# Redis Exporter for Prometheus\nwget https://github.com/oliver006/redis_exporter/releases/download/v1.45.0/redis_exporter-v1.45.0.linux-amd64.tar.gz\ntar xzf redis_exporter-*.tar.gz\nsudo cp redis_exporter /usr/local/bin/\n\n# Create systemd service\nsudo tee /etc/systemd/system/redis_exporter.service <<EOF\n[Unit]\nDescription=Redis Exporter\nAfter=network.target\n\n[Service]\nType=simple\nUser=redis\nExecStart=/usr/local/bin/redis_exporter \\\n    --redis.addr=localhost:6379 \\\n    --redis.password=YourStrongPasswordHere123!\nRestart=always\n\n[Install]\nWantedBy=multi-user.target\nEOF\n\nsudo systemctl enable --now redis_exporter\n```\n\n## Backup and Restore\n\n### RDB Snapshot Backup\n\n```bash\n# Manual backup\nredis-cli -a YourStrongPasswordHere123! BGSAVE\n\n# Wait for backup to complete\nredis-cli -a YourStrongPasswordHere123! LASTSAVE\n\n# Copy backup file\nsudo cp /var/lib/redis/dump.rdb /backup/redis/dump_$(date +%Y%m%d_%H%M%S).rdb\n\n# Automated backup script\ncat > /usr/local/bin/redis-backup.sh << 'EOF'\n#!/bin/bash\nBACKUP_DIR=\"/backup/redis\"\nTIMESTAMP=$(date +%Y%m%d_%H%M%S)\nREDIS_CLI=\"redis-cli -a YourStrongPasswordHere123!\"\n\n# Create backup directory\nmkdir -p ${BACKUP_DIR}\n\n# Trigger backup\n${REDIS_CLI} BGSAVE\n\n# Wait for backup to complete\nwhile [ $(${REDIS_CLI} LASTSAVE) -eq $(${REDIS_CLI} LASTSAVE) ]; do\n    sleep 1\ndone\n\n# Copy backup file\ncp /var/lib/redis/dump.rdb ${BACKUP_DIR}/dump_${TIMESTAMP}.rdb\n\n# Keep only last 7 days\nfind ${BACKUP_DIR} -name \"dump_*.rdb\" -mtime +7 -delete\n\necho \"Backup completed: dump_${TIMESTAMP}.rdb\"\nEOF\n\nchmod +x /usr/local/bin/redis-backup.sh\n```\n\n### AOF Backup\n\n```bash\n# If using AOF\nredis-cli -a YourStrongPasswordHere123! BGREWRITEAOF\n\n# Backup AOF file\ncp /var/lib/redis/appendonly.aof /backup/redis/appendonly_$(date +%Y%m%d_%H%M%S).aof\n```\n\n### Restore Procedures\n\n```bash\n# Stop Redis\nsudo systemctl stop redis\n\n# Replace dump file\nsudo cp /backup/redis/dump_20240115_120000.rdb /var/lib/redis/dump.rdb\nsudo chown redis:redis /var/lib/redis/dump.rdb\n\n# Start Redis\nsudo systemctl start redis\n\n# Verify data\nredis-cli -a YourStrongPasswordHere123! DBSIZE\n```\n\n### Backup to Cloud Storage\n\n```bash\n#!/bin/bash\n# Backup to S3\naws s3 cp /var/lib/redis/dump.rdb s3://my-bucket/redis-backups/dump_$(date +%Y%m%d_%H%M%S).rdb\n\n# Backup to Azure\naz storage blob upload --account-name myaccount --container-name redis-backups --name dump_$(date +%Y%m%d_%H%M%S).rdb --file /var/lib/redis/dump.rdb\n\n# Backup to GCS\ngsutil cp /var/lib/redis/dump.rdb gs://my-bucket/redis-backups/dump_$(date +%Y%m%d_%H%M%S).rdb\n```\n\n## Troubleshooting\n\n### Common Issues\n\n1. **Connection refused**:\n```bash\n# Check if Redis is running\nsudo systemctl status redis\nps aux | grep redis\n\n# Check if Redis is listening\nsudo netstat -tlnp | grep 6379\nsudo ss -tlnp | grep 6379\n\n# Check logs\nsudo tail -f /var/log/redis/redis.log\nsudo journalctl -u redis -f\n```\n\n2. **Authentication errors**:\n```bash\n# Test authentication\nredis-cli -a YourWrongPassword ping\n# (error) WRONGPASS invalid username-password pair\n\n# Connect with correct password\nredis-cli -a YourStrongPasswordHere123! ping\n# PONG\n```\n\n3. **Memory issues**:\n```bash\n# Check memory usage\nredis-cli -a YourStrongPasswordHere123! INFO memory\n\n# Check evicted keys\nredis-cli -a YourStrongPasswordHere123! INFO stats | grep evicted\n\n# Set memory limit\nredis-cli -a YourStrongPasswordHere123! CONFIG SET maxmemory 2gb\n\n# Check what's using memory\nredis-cli -a YourStrongPasswordHere123! --bigkeys\n```\n\n4. **Performance issues**:\n```bash\n# Check slow queries\nredis-cli -a YourStrongPasswordHere123! SLOWLOG GET 10\n\n# Check connected clients\nredis-cli -a YourStrongPasswordHere123! CLIENT LIST\n\n# Check persistence status\nredis-cli -a YourStrongPasswordHere123! INFO persistence\n\n# Disable persistence temporarily\nredis-cli -a YourStrongPasswordHere123! CONFIG SET save \"\"\nredis-cli -a YourStrongPasswordHere123! CONFIG SET appendonly no\n```\n\n### Recovery Procedures\n\n```bash\n# Fix corrupted AOF\nredis-check-aof --fix /var/lib/redis/appendonly.aof\n\n# Fix corrupted RDB\nredis-check-rdb /var/lib/redis/dump.rdb\n\n# Emergency flush (use with caution!)\nredis-cli -a YourStrongPasswordHere123! FLUSHDB\nredis-cli -a YourStrongPasswordHere123! FLUSHALL\n```\n\n## Maintenance\n\n### Update Procedures\n\n```bash\n# RHEL/CentOS/Rocky/AlmaLinux\nsudo dnf check-update redis\nsudo dnf update redis\n\n# Debian/Ubuntu\nsudo apt update\nsudo apt upgrade redis-server\n\n# Arch Linux\nsudo pacman -Syu redis\n\n# Alpine Linux\napk update\napk upgrade redis\n\n# openSUSE\nsudo zypper update redis\n\n# FreeBSD\npkg update\npkg upgrade redis\n\n# Always backup before updates\nredis-cli -a YourStrongPasswordHere123! BGSAVE\n```\n\n### Log Rotation\n\n```bash\n# Create logrotate configuration\nsudo tee /etc/logrotate.d/redis <<EOF\n/var/log/redis/*.log {\n    daily\n    rotate 7\n    compress\n    delaycompress\n    missingok\n    notifempty\n    create 640 redis redis\n    postrotate\n        systemctl reload redis > /dev/null 2>&1 || true\n    endscript\n}\nEOF\n```\n\n### Health Checks\n\n```bash\n#!/bin/bash\n# /usr/local/bin/redis-health-check.sh\n\nREDIS_CLI=\"redis-cli -a YourStrongPasswordHere123!\"\n\n# Check if Redis is responding\nif ! ${REDIS_CLI} ping > /dev/null 2>&1; then\n    echo \"Redis is not responding\"\n    exit 1\nfi\n\n# Check memory usage\nUSED_MEMORY=$(${REDIS_CLI} INFO memory | grep used_memory_human | cut -d: -f2 | tr -d '\\r')\necho \"Memory usage: ${USED_MEMORY}\"\n\n# Check replication\nROLE=$(${REDIS_CLI} INFO replication | grep role | cut -d: -f2 | tr -d '\\r')\necho \"Redis role: ${ROLE}\"\n\n# Check persistence\nRDB_LAST_SAVE=$(${REDIS_CLI} LASTSAVE)\necho \"Last save: $(date -d @${RDB_LAST_SAVE})\"\n\necho \"Redis health check passed\"\n```\n\n## Integration Examples\n\n### Python (redis-py)\n\n```python\nimport redis\nfrom redis.sentinel import Sentinel\n\n# Basic connection\nr = redis.Redis(\n    host='localhost',\n    port=6379,\n    password='YourStrongPasswordHere123!',\n    decode_responses=True\n)\n\n# Connection pool\npool = redis.ConnectionPool(\n    host='localhost',\n    port=6379,\n    password='YourStrongPasswordHere123!',\n    max_connections=50\n)\nr = redis.Redis(connection_pool=pool)\n\n# Basic operations\nr.set('key', 'value')\nvalue = r.get('key')\n\n# Pipeline for performance\npipe = r.pipeline()\nfor i in range(10000):\n    pipe.set(f'key:{i}', i)\npipe.execute()\n\n# Pub/Sub\npubsub = r.pubsub()\npubsub.subscribe('channel')\nfor message in pubsub.listen():\n    print(message)\n\n# Sentinel connection\nsentinel = Sentinel([('localhost', 26379)])\nmaster = sentinel.master_for('mymaster', socket_timeout=0.1)\n```\n\n### Node.js (ioredis)\n\n```javascript\nconst Redis = require('ioredis');\n\n// Basic connection\nconst redis = new Redis({\n  host: 'localhost',\n  port: 6379,\n  password: 'YourStrongPasswordHere123!',\n  retryStrategy: (times) => {\n    const delay = Math.min(times * 50, 2000);\n    return delay;\n  }\n});\n\n// Cluster connection\nconst cluster = new Redis.Cluster([\n  { port: 6379, host: '192.168.1.10' },\n  { port: 6379, host: '192.168.1.11' }\n]);\n\n// Basic operations\nasync function example() {\n  await redis.set('key', 'value');\n  const value = await redis.get('key');\n  \n  // Pipeline\n  const pipeline = redis.pipeline();\n  pipeline.set('key1', 'value1');\n  pipeline.set('key2', 'value2');\n  pipeline.get('key1');\n  const results = await pipeline.exec();\n  \n  // Pub/Sub\n  const sub = new Redis();\n  sub.subscribe('news', 'music');\n  sub.on('message', (channel, message) => {\n    console.log(`Received ${message} from ${channel}`);\n  });\n}\n\n// Stream processing\nasync function streamExample() {\n  // Add to stream\n  await redis.xadd('mystream', '*', 'field1', 'value1');\n  \n  // Read from stream\n  const messages = await redis.xread('STREAMS', 'mystream', '0');\n}\n```\n\n### PHP (Predis/PhpRedis)\n\n```php\n<?php\n// Using Predis\nrequire 'vendor/autoload.php';\n\n$client = new Predis\\Client([\n    'scheme' => 'tcp',\n    'host'   => '127.0.0.1',\n    'port'   => 6379,\n    'password' => 'YourStrongPasswordHere123!'\n]);\n\n// Basic operations\n$client->set('key', 'value');\n$value = $client->get('key');\n\n// Pipeline\n$pipe = $client->pipeline();\nfor ($i = 0; $i < 1000; $i++) {\n    $pipe->set(\"key:$i\", $i);\n}\n$pipe->execute();\n\n// Using PhpRedis extension\n$redis = new Redis();\n$redis->connect('127.0.0.1', 6379);\n$redis->auth('YourStrongPasswordHere123!');\n\n// Transactions\n$redis->multi();\n$redis->set('key1', 'value1');\n$redis->set('key2', 'value2');\n$redis->exec();\n\n// Pub/Sub\n$redis->subscribe(['channel1', 'channel2'], function ($redis, $channel, $message) {\n    echo \"Received: $message on $channel\\n\";\n});\n?>\n```\n\n### Java (Jedis/Lettuce)\n\n```java\n// Using Jedis\nimport redis.clients.jedis.Jedis;\nimport redis.clients.jedis.JedisPool;\nimport redis.clients.jedis.JedisPoolConfig;\n\npublic class RedisExample {\n    private static JedisPool pool;\n    \n    static {\n        JedisPoolConfig config = new JedisPoolConfig();\n        config.setMaxTotal(128);\n        config.setMaxIdle(128);\n        config.setMinIdle(16);\n        config.setTestOnBorrow(true);\n        config.setTestOnReturn(true);\n        \n        pool = new JedisPool(config, \"localhost\", 6379, 2000, \"YourStrongPasswordHere123!\");\n    }\n    \n    public static void example() {\n        try (Jedis jedis = pool.getResource()) {\n            // Basic operations\n            jedis.set(\"key\", \"value\");\n            String value = jedis.get(\"key\");\n            \n            // Pipeline\n            Pipeline pipeline = jedis.pipelined();\n            for (int i = 0; i < 10000; i++) {\n                pipeline.set(\"key:\" + i, String.valueOf(i));\n            }\n            pipeline.sync();\n            \n            // Transactions\n            Transaction tx = jedis.multi();\n            tx.set(\"key1\", \"value1\");\n            tx.set(\"key2\", \"value2\");\n            tx.exec();\n        }\n    }\n}\n\n// Using Lettuce\nimport io.lettuce.core.*;\nimport io.lettuce.core.api.StatefulRedisConnection;\nimport io.lettuce.core.api.sync.RedisCommands;\n\nRedisClient client = RedisClient.create(\"redis://password@localhost:6379\");\nStatefulRedisConnection<String, String> connection = client.connect();\nRedisCommands<String, String> sync = connection.sync();\n\nsync.set(\"key\", \"value\");\nString value = sync.get(\"key\");\n```\n\n### Go (go-redis)\n\n```go\npackage main\n\nimport (\n    \"context\"\n    \"fmt\"\n    \"github.com/go-redis/redis/v8\"\n)\n\nvar ctx = context.Background()\n\nfunc main() {\n    // Create client\n    rdb := redis.NewClient(&redis.Options{\n        Addr:     \"localhost:6379\",\n        Password: \"YourStrongPasswordHere123!\",\n        DB:       0,\n        PoolSize: 10,\n    })\n\n    // Basic operations\n    err := rdb.Set(ctx, \"key\", \"value\", 0).Err()\n    if err != nil {\n        panic(err)\n    }\n\n    val, err := rdb.Get(ctx, \"key\").Result()\n    if err != nil {\n        panic(err)\n    }\n    fmt.Println(\"key\", val)\n\n    // Pipeline\n    pipe := rdb.Pipeline()\n    for i := 0; i < 1000; i++ {\n        pipe.Set(ctx, fmt.Sprintf(\"key:%d\", i), i, 0)\n    }\n    _, err = pipe.Exec(ctx)\n\n    // Pub/Sub\n    pubsub := rdb.Subscribe(ctx, \"channel\")\n    ch := pubsub.Channel()\n    for msg := range ch {\n        fmt.Println(msg.Channel, msg.Payload)\n    }\n}\n```\n\n## Additional Resources\n\n- [Official Documentation](https://redis.io/documentation)\n- [GitHub Repository](https://github.com/redis/redis)\n- [Redis Commands Reference](https://redis.io/commands)\n- [Redis University](https://university.redis.com/)\n- [Redis Best Practices](https://redis.io/docs/manual/patterns/)\n- [Redis Security](https://redis.io/docs/manual/security/)\n- [Redis Cluster Tutorial](https://redis.io/docs/manual/scaling/)\n- [Community Forum](https://forum.redis.com/)\n\n---\n\n**Note:** This guide is part of the [HowToMgr](https://howtomgr.github.io) collection. Always refer to official documentation for the most up-to-date information.","readmeHtml":"<h1 id=\"redis-installation-guide\" class=\"mobile-header\">Redis Installation Guide</h1>\n<p class=\"mobile-paragraph\">Redis is a free and open-source in-memory data structure store, used as a database, cache, message broker, and streaming engine. Originally developed by Salvatore Sanfilippo, Redis stands for \"Remote Dictionary Server\" and provides data structures such as strings, hashes, lists, sets, sorted sets with range queries, bitmaps, hyperloglogs, and geospatial indexes. It serves as a FOSS alternative to commercial solutions like Amazon ElastiCache, Azure Cache for Redis, or proprietary in-memory databases, offering comparable performance with features like persistence, replication, Lua scripting, and transactions.</p>\n<h2 id=\"prerequisites\" class=\"mobile-header\">Prerequisites</h2>\n<li class=\"mobile-list-item\"><strong>Hardware Requirements</strong>:</li>\n<li class=\"mobile-list-item\">CPU: 1 core minimum (2+ cores recommended for production)</li>\n<li class=\"mobile-list-item\">RAM: 1GB minimum (8GB+ recommended for production workloads)</li>\n<li class=\"mobile-list-item\">Storage: 512MB for installation (SSD recommended for persistence)</li>\n<li class=\"mobile-list-item\">Network: Low latency network for cluster deployments</li>\n<li class=\"mobile-list-item\"><strong>Operating System</strong>: Linux, BSD, macOS, or Windows (via WSL2)</li>\n<li class=\"mobile-list-item\"><strong>Network Requirements</strong>:</li>\n<li class=\"mobile-list-item\">Port 6379 (default Redis port)</li>\n<li class=\"mobile-list-item\">Port 16379 (cluster bus port, if using cluster mode)</li>\n<li class=\"mobile-list-item\">Additional ports for replicas and sentinel</li>\n<li class=\"mobile-list-item\"><strong>Dependencies</strong>:</li>\n<li class=\"mobile-list-item\">GCC compiler and libc (for building from source)</li>\n<li class=\"mobile-list-item\">TCL 8.5+ (for running tests)</li>\n<li class=\"mobile-list-item\">systemd or init system (for service management)</li>\n<li class=\"mobile-list-item\"><strong>System Access</strong>: root or sudo privileges required</li>\n<h2 id=\"installation\" class=\"mobile-header\">Installation</h2>\n<h3 id=\"rhelcentosrocky-linuxalmalinux\" class=\"mobile-header\">RHEL/CentOS/Rocky Linux/AlmaLinux</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># RHEL/CentOS 7\n# Enable EPEL repository\nsudo yum install -y epel-release\n\n# Install Redis\nsudo yum install -y redis\n\n# Enable and start service\nsudo systemctl enable --now redis\n\n# RHEL/CentOS/Rocky/AlmaLinux 8+\n# Enable EPEL repository\nsudo dnf install -y epel-release\n\n# Install Redis\nsudo dnf install -y redis\n\n# Enable and start service\nsudo systemctl enable --now redis\n\n# Install latest Redis from Remi repository (recommended)\nsudo dnf install -y https://rpms.remirepo.net/enterprise/remi-release-8.rpm\nsudo dnf module enable redis:remi-7.2\nsudo dnf install -y redis</code></pre>\n      </div>\n    </div>\n<h3 id=\"debianubuntu\" class=\"mobile-header\">Debian/Ubuntu</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Update package index\nsudo apt update\n\n# Install Redis\nsudo apt install -y redis-server\n\n# The service should start automatically\nsudo systemctl status redis-server\n\n# For latest version, use official Redis repository\ncurl -fsSL https://packages.redis.io/gpg | sudo gpg --dearmor -o /usr/share/keyrings/redis-archive-keyring.gpg\necho &quot;deb [signed-by=/usr/share/keyrings/redis-archive-keyring.gpg] https://packages.redis.io/deb $(lsb_release -cs) main&quot; | sudo tee /etc/apt/sources.list.d/redis.list\nsudo apt update\nsudo apt install -y redis</code></pre>\n      </div>\n    </div>\n<h3 id=\"arch-linux\" class=\"mobile-header\">Arch Linux</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Install Redis from official repositories\nsudo pacman -S redis\n\n# Optional: Install Redis tools\nsudo pacman -S redis-tools\n\n# Enable and start service\nsudo systemctl enable --now redis\n\n# For development headers\nsudo pacman -S hiredis\n\n# For Redis modules from AUR\nyay -S redis-mod-redisgraph\nyay -S redis-mod-redisearch</code></pre>\n      </div>\n    </div>\n<h3 id=\"alpine-linux\" class=\"mobile-header\">Alpine Linux</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Install Redis\napk add --no-cache redis\n\n# Install additional tools\napk add --no-cache redis-cli redis-benchmark\n\n# Create redis user if not exists\nadduser -D -H -s /sbin/nologin -g redis redis\n\n# Create necessary directories\nmkdir -p /var/lib/redis /var/log/redis /var/run/redis\nchown redis:redis /var/lib/redis /var/log/redis /var/run/redis\n\n# Enable and start service\nrc-update add redis default\nrc-service redis start</code></pre>\n      </div>\n    </div>\n<h3 id=\"opensusesles\" class=\"mobile-header\">openSUSE/SLES</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># openSUSE Leap/Tumbleweed\nsudo zypper install -y redis\n\n# Start and enable service\nsudo systemctl enable --now redis@default\n\n# For cluster setup\nsudo zypper install -y redis-sentinel\n\n# SLES 15\n# May need to enable additional modules\nsudo SUSEConnect -p sle-module-server-applications/15.5/x86_64\nsudo zypper install -y redis6\n\n# Alternative: use Open Build Service\nsudo zypper addrepo https://download.opensuse.org/repositories/server:database/openSUSE_Leap_15.5/server:database.repo\nsudo zypper refresh\nsudo zypper install -y redis</code></pre>\n      </div>\n    </div>\n<h3 id=\"macos\" class=\"mobile-header\">macOS</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Using Homebrew\nbrew install redis\n\n# Start Redis service\nbrew services start redis\n\n# Or run manually\nredis-server /usr/local/etc/redis.conf\n\n# For development\nbrew install hiredis\n\n# Alternative: Using MacPorts\nsudo port install redis\nsudo port load redis</code></pre>\n      </div>\n    </div>\n<h3 id=\"freebsd\" class=\"mobile-header\">FreeBSD</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Install Redis\npkg install redis\n\n# Or from ports\ncd /usr/ports/databases/redis\nmake install clean\n\n# Enable Redis\necho &#039;redis_enable=&quot;YES&quot;&#039; &gt;&gt; /etc/rc.conf\n\n# Start Redis\nservice redis start\n\n# For development\npkg install hiredis</code></pre>\n      </div>\n    </div>\n<h3 id=\"windows\" class=\"mobile-header\">Windows</h3>\n<div class=\"mobile-code-block\" data-language=\"powershell\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">powershell</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-powershell\"># Method 1: Using WSL2 (Recommended)\nwsl --install\n# Then follow Linux instructions inside WSL2\n\n# Method 2: Using Chocolatey\nchoco install redis-64\n\n# Method 3: Using Memurai (Redis-compatible for Windows)\n# Download from https://www.memurai.com/\n\n# Method 4: Using official Redis on Windows archive\n# Download from https://github.com/microsoftarchive/redis/releases\n# Extract to C:\\Redis\n# Run redis-server.exe\n\n# Add to PATH\n[Environment]::SetEnvironmentVariable(&quot;Path&quot;, &quot;$env:Path;C:\\Redis&quot;, &quot;Machine&quot;)\n\n# Create Windows service\nredis-server --service-install redis.windows.conf --loglevel verbose\nredis-server --service-start</code></pre>\n      </div>\n    </div>\n<h2 id=\"initial-configuration\" class=\"mobile-header\">Initial Configuration</h2>\n<h3 id=\"first-run-setup\" class=\"mobile-header\">First-Run Setup</h3>\n<p class=\"mobile-paragraph\">1. <strong>Create Redis user</strong> (if not created by package):</p>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Linux systems\nsudo useradd -r -d /var/lib/redis -s /sbin/nologin -c &quot;Redis Database Server&quot; redis</code></pre>\n      </div>\n    </div>\n<p class=\"mobile-paragraph\">2. <strong>Default configuration locations</strong>:</p>\n<li class=\"mobile-list-item\">RHEL/CentOS/Rocky/AlmaLinux: <code class=\"mobile-inline-code\">/etc/redis.conf</code> or <code class=\"mobile-inline-code\">/etc/redis/redis.conf</code></li>\n<li class=\"mobile-list-item\">Debian/Ubuntu: <code class=\"mobile-inline-code\">/etc/redis/redis.conf</code></li>\n<li class=\"mobile-list-item\">Arch Linux: <code class=\"mobile-inline-code\">/etc/redis/redis.conf</code></li>\n<li class=\"mobile-list-item\">Alpine Linux: <code class=\"mobile-inline-code\">/etc/redis.conf</code></li>\n<li class=\"mobile-list-item\">openSUSE/SLES: <code class=\"mobile-inline-code\">/etc/redis/default.conf</code></li>\n<li class=\"mobile-list-item\">macOS: <code class=\"mobile-inline-code\">/usr/local/etc/redis.conf</code></li>\n<li class=\"mobile-list-item\">FreeBSD: <code class=\"mobile-inline-code\">/usr/local/etc/redis.conf</code></li>\n<li class=\"mobile-list-item\">Windows: <code class=\"mobile-inline-code\">C:\\Redis\\redis.windows.conf</code></li>\n<p class=\"mobile-paragraph\">3. <strong>Essential settings to change</strong>:</p>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Edit Redis configuration\nsudo vi /etc/redis/redis.conf\n\n# Critical settings to modify:\n\n# Bind to specific interfaces (default is localhost only)\nbind 127.0.0.1 ::1\n# For network access (be careful!):\n# bind 0.0.0.0\n\n# Require password for connections\nrequirepass YourStrongPasswordHere123!\n\n# Set memory limit\nmaxmemory 2gb\nmaxmemory-policy allkeys-lru\n\n# Enable persistence\nsave 900 1      # Save after 900 sec if at least 1 key changed\nsave 300 10     # Save after 300 sec if at least 10 keys changed  \nsave 60 10000   # Save after 60 sec if at least 10000 keys changed\n\n# Set working directory\ndir /var/lib/redis\n\n# Set log file\nlogfile /var/log/redis/redis.log\nloglevel notice\n\n# Disable dangerous commands\nrename-command FLUSHDB &quot;&quot;\nrename-command FLUSHALL &quot;&quot;\nrename-command CONFIG &quot;CONFIG_y7d9s3k4&quot;</code></pre>\n      </div>\n    </div>\n<h3 id=\"testing-initial-setup\" class=\"mobile-header\">Testing Initial Setup</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Test Redis is running\nredis-cli ping\n# Should return: PONG\n\n# Test with authentication\nredis-cli -a YourStrongPasswordHere123! ping\n\n# Set and get a test key\nredis-cli -a YourStrongPasswordHere123! SET test &quot;Hello Redis&quot;\nredis-cli -a YourStrongPasswordHere123! GET test\n\n# Check Redis info\nredis-cli -a YourStrongPasswordHere123! INFO server</code></pre>\n      </div>\n    </div>\n<p class=\"mobile-paragraph\"><strong>WARNING:</strong> Never expose Redis to the public internet without proper authentication and SSL/TLS encryption!</p>\n<h2 id=\"service-management\" class=\"mobile-header\">Service Management</h2>\n<h3 id=\"systemd-rhel-debian-ubuntu-arch-opensuse\" class=\"mobile-header\">systemd (RHEL, Debian, Ubuntu, Arch, openSUSE)</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Enable Redis to start on boot\nsudo systemctl enable redis\n# Or on some systems:\nsudo systemctl enable redis-server\n\n# Start Redis\nsudo systemctl start redis\n\n# Stop Redis\nsudo systemctl stop redis\n\n# Restart Redis\nsudo systemctl restart redis\n\n# Reload configuration without restart\nsudo systemctl reload redis\n\n# Check status\nsudo systemctl status redis\n\n# View logs\nsudo journalctl -u redis -f</code></pre>\n      </div>\n    </div>\n<h3 id=\"openrc-alpine-linux\" class=\"mobile-header\">OpenRC (Alpine Linux)</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Enable Redis to start on boot\nrc-update add redis default\n\n# Start Redis\nrc-service redis start\n\n# Stop Redis\nrc-service redis stop\n\n# Restart Redis\nrc-service redis restart\n\n# Check status\nrc-service redis status\n\n# View logs\ntail -f /var/log/redis/redis.log</code></pre>\n      </div>\n    </div>\n<h3 id=\"rcd-freebsd\" class=\"mobile-header\">rc.d (FreeBSD)</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Enable in /etc/rc.conf\necho &#039;redis_enable=&quot;YES&quot;&#039; &gt;&gt; /etc/rc.conf\n\n# Start Redis\nservice redis start\n\n# Stop Redis\nservice redis stop\n\n# Restart Redis\nservice redis restart\n\n# Check status\nservice redis status</code></pre>\n      </div>\n    </div>\n<h3 id=\"launchd-macos\" class=\"mobile-header\">launchd (macOS)</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Using Homebrew services\nbrew services start redis\nbrew services stop redis\nbrew services restart redis\n\n# Check status\nbrew services list | grep redis\n\n# Manual control\nredis-server /usr/local/etc/redis.conf\n# Stop with Ctrl+C or:\nredis-cli shutdown</code></pre>\n      </div>\n    </div>\n<h3 id=\"windows-service-manager\" class=\"mobile-header\">Windows Service Manager</h3>\n<div class=\"mobile-code-block\" data-language=\"powershell\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">powershell</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-powershell\"># Start Redis service\nredis-server --service-start\n\n# Stop Redis service  \nredis-server --service-stop\n\n# Using net commands\nnet start Redis\nnet stop Redis\n\n# Using PowerShell\nStart-Service -Name Redis\nStop-Service -Name Redis\nRestart-Service -Name Redis\n\n# Check status\nGet-Service -Name Redis</code></pre>\n      </div>\n    </div>\n<h2 id=\"advanced-configuration\" class=\"mobile-header\">Advanced Configuration</h2>\n<h3 id=\"memory-optimization\" class=\"mobile-header\">Memory Optimization</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># /etc/redis/redis.conf\n\n# Memory management\nmaxmemory 4gb\nmaxmemory-policy allkeys-lru\n# Policies: volatile-lru, allkeys-lru, volatile-lfu, allkeys-lfu,\n#           volatile-random, allkeys-random, volatile-ttl, noeviction\n\n# Memory optimization\nhash-max-ziplist-entries 512\nhash-max-ziplist-value 64\nlist-max-ziplist-size -2\nlist-compress-depth 0\nset-max-intset-entries 512\nzset-max-ziplist-entries 128\nzset-max-ziplist-value 64\n\n# Enable memory defragmentation (Redis 4.0+)\nactivedefrag yes\nactive-defrag-ignore-bytes 100mb\nactive-defrag-threshold-lower 10\nactive-defrag-threshold-upper 100</code></pre>\n      </div>\n    </div>\n<h3 id=\"persistence-configuration\" class=\"mobile-header\">Persistence Configuration</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># RDB (Redis Database) snapshots\nsave 900 1\nsave 300 10\nsave 60 10000\nstop-writes-on-bgsave-error yes\nrdbcompression yes\nrdbchecksum yes\ndbfilename dump.rdb\ndir /var/lib/redis\n\n# AOF (Append Only File) persistence\nappendonly yes\nappendfilename &quot;appendonly.aof&quot;\nappendfsync everysec  # Options: always, everysec, no\nno-appendfsync-on-rewrite no\nauto-aof-rewrite-percentage 100\nauto-aof-rewrite-min-size 64mb\naof-load-truncated yes\naof-use-rdb-preamble yes</code></pre>\n      </div>\n    </div>\n<h3 id=\"replication-setup\" class=\"mobile-header\">Replication Setup</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># On replica server, add to redis.conf:\nreplicaof master_ip 6379\nmasterauth YourStrongPasswordHere123!\nreplica-read-only yes\nreplica-serve-stale-data yes\n\n# Replication settings\nrepl-diskless-sync no\nrepl-diskless-sync-delay 5\nrepl-ping-replica-period 10\nrepl-timeout 60\nrepl-disable-tcp-nodelay no\nrepl-backlog-size 1mb\nrepl-backlog-ttl 3600</code></pre>\n      </div>\n    </div>\n<h3 id=\"redis-sentinel-high-availability\" class=\"mobile-header\">Redis Sentinel (High Availability)</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># /etc/redis/sentinel.conf\nport 26379\nbind 127.0.0.1\nprotected-mode yes\nsentinel monitor mymaster 127.0.0.1 6379 2\nsentinel auth-pass mymaster YourStrongPasswordHere123!\nsentinel down-after-milliseconds mymaster 5000\nsentinel parallel-syncs mymaster 1\nsentinel failover-timeout mymaster 10000\n\n# Start sentinel\nredis-sentinel /etc/redis/sentinel.conf</code></pre>\n      </div>\n    </div>\n<h2 id=\"reverse-proxy-setup\" class=\"mobile-header\">Reverse Proxy Setup</h2>\n<p class=\"mobile-paragraph\">While Redis doesn't use HTTP reverse proxies, you can use TCP proxies for load balancing.</p>\n<h3 id=\"haproxy-configuration\" class=\"mobile-header\">HAProxy Configuration</h3>\n<div class=\"mobile-code-block\" data-language=\"nginx\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">nginx</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-nginx\"># /etc/haproxy/haproxy.cfg\nglobal\n    maxconn 4096\n    daemon\n\ndefaults\n    mode tcp\n    timeout connect 5000ms\n    timeout client 50000ms\n    timeout server 50000ms\n\nlisten redis\n    bind *:6379\n    balance roundrobin\n    option tcp-check\n    tcp-check connect\n    tcp-check send AUTH\\ YourStrongPasswordHere123!\\r\\n\n    tcp-check expect string +OK\n    tcp-check send PING\\r\\n\n    tcp-check expect string +PONG\n    tcp-check send QUIT\\r\\n\n    tcp-check expect string +OK\n    server redis1 192.168.1.10:6379 check inter 1s\n    server redis2 192.168.1.11:6379 check inter 1s</code></pre>\n      </div>\n    </div>\n<h3 id=\"nginx-stream-module\" class=\"mobile-header\">nginx Stream Module</h3>\n<div class=\"mobile-code-block\" data-language=\"nginx\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">nginx</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-nginx\"># /etc/nginx/nginx.conf\nstream {\n    upstream redis_backend {\n        server 192.168.1.10:6379 max_fails=3 fail_timeout=30s;\n        server 192.168.1.11:6379 max_fails=3 fail_timeout=30s;\n    }\n    \n    server {\n        listen 6379;\n        proxy_pass redis_backend;\n        proxy_connect_timeout 1s;\n        proxy_timeout 3s;\n    }\n}</code></pre>\n      </div>\n    </div>\n<h2 id=\"security-configuration\" class=\"mobile-header\">Security Configuration</h2>\n<h3 id=\"authentication-and-acl\" class=\"mobile-header\">Authentication and ACL</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Basic authentication (redis.conf)\nrequirepass YourStrongPasswordHere123!\n\n# ACL configuration (Redis 6.0+)\naclfile /etc/redis/users.acl\n\n# Create ACL users\n# In redis-cli:\nACL SETUSER alice on &gt;alice_password ~cached:* &amp;* +get +set +del\nACL SETUSER bob on &gt;bob_password ~* &amp;* +@read\nACL SETUSER admin on &gt;admin_password ~* &amp;* +@all\n\n# Disable default user\nACL SETUSER default on nopass ~* &amp;* -@all</code></pre>\n      </div>\n    </div>\n<h3 id=\"ssltls-configuration\" class=\"mobile-header\">SSL/TLS Configuration</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Build Redis with TLS support\nmake BUILD_TLS=yes\n\n# Configure TLS in redis.conf\nport 0\ntls-port 6379\ntls-cert-file /etc/redis/tls/redis.crt\ntls-key-file /etc/redis/tls/redis.key\ntls-ca-cert-file /etc/redis/tls/ca.crt\ntls-dh-params-file /etc/redis/tls/redis.dh\n\n# TLS settings\ntls-protocols &quot;TLSv1.2 TLSv1.3&quot;\ntls-ciphers TLS_AES_256_GCM_SHA384:TLS_CHACHA20_POLY1305_SHA256\ntls-ciphersuites TLS_AES_256_GCM_SHA384:TLS_CHACHA20_POLY1305_SHA256\ntls-prefer-server-ciphers yes\n\n# Require TLS for replication\ntls-replication yes</code></pre>\n      </div>\n    </div>\n<h3 id=\"firewall-rules\" class=\"mobile-header\">Firewall Rules</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># UFW (Ubuntu/Debian)\nsudo ufw allow from 192.168.1.0/24 to any port 6379\nsudo ufw reload\n\n# firewalld (RHEL/CentOS/openSUSE)\nsudo firewall-cmd --permanent --new-zone=redis\nsudo firewall-cmd --permanent --zone=redis --add-source=192.168.1.0/24\nsudo firewall-cmd --permanent --zone=redis --add-port=6379/tcp\nsudo firewall-cmd --reload\n\n# iptables\nsudo iptables -A INPUT -s 192.168.1.0/24 -p tcp --dport 6379 -j ACCEPT\nsudo iptables -A INPUT -p tcp --dport 6379 -j DROP\nsudo iptables-save &gt; /etc/iptables/rules.v4\n\n# pf (FreeBSD)\n# Add to /etc/pf.conf\npass in on $ext_if proto tcp from 192.168.1.0/24 to any port 6379\nblock in on $ext_if proto tcp to any port 6379\n\n# Windows Firewall\nNew-NetFirewallRule -DisplayName &quot;Redis&quot; -Direction Inbound -Protocol TCP -LocalPort 6379 -RemoteAddress 192.168.1.0/24 -Action Allow</code></pre>\n      </div>\n    </div>\n<h3 id=\"security-best-practices\" class=\"mobile-header\">Security Best Practices</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Disable dangerous commands\nrename-command FLUSHDB &quot;&quot;\nrename-command FLUSHALL &quot;&quot;\nrename-command KEYS &quot;&quot;\nrename-command CONFIG &quot;CONFIG_y7d9s3k4&quot;\nrename-command SHUTDOWN &quot;&quot;\n\n# Enable protected mode\nprotected-mode yes\n\n# Set client connection limits\ntcp-keepalive 300\ntimeout 300\ntcp-backlog 511\n\n# Limit client output buffer\nclient-output-buffer-limit normal 0 0 0\nclient-output-buffer-limit replica 256mb 64mb 60\nclient-output-buffer-limit pubsub 32mb 8mb 60</code></pre>\n      </div>\n    </div>\n<h2 id=\"database-setup\" class=\"mobile-header\">Database Setup</h2>\n<p class=\"mobile-paragraph\">Redis doesn't require traditional database setup, but here's how to organize data:</p>\n<h3 id=\"keyspace-design\" class=\"mobile-header\">Keyspace Design</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Use namespacing for keys\nSET user:1000:name &quot;John Doe&quot;\nSET user:1000:email &quot;john@example.com&quot;\nHSET user:1000 name &quot;John Doe&quot; email &quot;john@example.com&quot;\n\n# Use expiration for cache\nSET cache:user:1000 &quot;{...json...}&quot; EX 3600\n\n# Database selection (0-15 by default)\nSELECT 0  # Default database\nSELECT 1  # Switch to database 1\n\n# Configure number of databases\ndatabases 16</code></pre>\n      </div>\n    </div>\n<h3 id=\"data-types-examples\" class=\"mobile-header\">Data Types Examples</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Strings\nSET key &quot;value&quot;\nGET key\nINCR counter\nDECR counter\n\n# Lists\nLPUSH queue item1 item2\nRPOP queue\nLRANGE queue 0 -1\n\n# Sets\nSADD tags redis nosql cache\nSMEMBERS tags\nSINTER tags:post1 tags:post2\n\n# Sorted Sets\nZADD leaderboard 100 player1 200 player2\nZRANGE leaderboard 0 -1 WITHSCORES\n\n# Hashes\nHSET user:1000 name &quot;John&quot; age 30\nHGETALL user:1000\n\n# Streams (Redis 5.0+)\nXADD mystream * sensor-id 1234 temperature 19.8\nXREAD COUNT 2 STREAMS mystream 0</code></pre>\n      </div>\n    </div>\n<h2 id=\"performance-optimization\" class=\"mobile-header\">Performance Optimization</h2>\n<h3 id=\"system-tuning\" class=\"mobile-header\">System Tuning</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># /etc/sysctl.conf\n# Increase system memory\nvm.overcommit_memory = 1\nnet.core.somaxconn = 65535\nnet.ipv4.tcp_max_syn_backlog = 65535\n\n# Disable THP (Transparent Huge Pages)\necho never &gt; /sys/kernel/mm/transparent_hugepage/enabled\necho never &gt; /sys/kernel/mm/transparent_hugepage/defrag\n\n# Apply settings\nsudo sysctl -p</code></pre>\n      </div>\n    </div>\n<h3 id=\"redis-performance-tuning\" class=\"mobile-header\">Redis Performance Tuning</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># redis.conf optimizations\n\n# I/O threads (Redis 6.0+)\nio-threads 4\nio-threads-do-reads yes\n\n# Disable saving if using Redis as cache only\nsave &quot;&quot;\n\n# Lazy freeing (Redis 4.0+)\nlazyfree-lazy-eviction yes\nlazyfree-lazy-expire yes\nlazyfree-lazy-server-del yes\nreplica-lazy-flush yes\n\n# Background tasks\nhz 100  # Increase for more responsive background tasks\n\n# Client optimizations\ntcp-keepalive 60\ntcp-backlog 511</code></pre>\n      </div>\n    </div>\n<h3 id=\"benchmarking\" class=\"mobile-header\">Benchmarking</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Basic benchmark\nredis-benchmark -h localhost -p 6379 -a YourStrongPasswordHere123! -n 100000 -c 50\n\n# Test specific commands\nredis-benchmark -h localhost -p 6379 -a YourStrongPasswordHere123! -t set,get -n 100000\n\n# Pipeline mode\nredis-benchmark -h localhost -p 6379 -a YourStrongPasswordHere123! -P 16 -n 100000\n\n# Custom payload size\nredis-benchmark -h localhost -p 6379 -a YourStrongPasswordHere123! -d 1024 -n 100000</code></pre>\n      </div>\n    </div>\n<h2 id=\"monitoring\" class=\"mobile-header\">Monitoring</h2>\n<h3 id=\"built-in-monitoring\" class=\"mobile-header\">Built-in Monitoring</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Real-time stats\nredis-cli -a YourStrongPasswordHere123! --stat\n\n# Monitor commands in real-time\nredis-cli -a YourStrongPasswordHere123! MONITOR\n\n# Get server info\nredis-cli -a YourStrongPasswordHere123! INFO\nredis-cli -a YourStrongPasswordHere123! INFO stats\nredis-cli -a YourStrongPasswordHere123! INFO memory\nredis-cli -a YourStrongPasswordHere123! INFO replication\n\n# Memory usage analysis\nredis-cli -a YourStrongPasswordHere123! --bigkeys\nredis-cli -a YourStrongPasswordHere123! --memkeys\nredis-cli -a YourStrongPasswordHere123! MEMORY STATS\nredis-cli -a YourStrongPasswordHere123! MEMORY DOCTOR</code></pre>\n      </div>\n    </div>\n<h3 id=\"slow-log-analysis\" class=\"mobile-header\">Slow Log Analysis</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Configure slow log\nCONFIG SET slowlog-log-slower-than 10000  # Log queries slower than 10ms\nCONFIG SET slowlog-max-len 128\n\n# View slow log\nSLOWLOG GET 10\nSLOWLOG LEN\nSLOWLOG RESET</code></pre>\n      </div>\n    </div>\n<h3 id=\"external-monitoring-tools\" class=\"mobile-header\">External Monitoring Tools</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Redis Exporter for Prometheus\nwget https://github.com/oliver006/redis_exporter/releases/download/v1.45.0/redis_exporter-v1.45.0.linux-amd64.tar.gz\ntar xzf redis_exporter-*.tar.gz\nsudo cp redis_exporter /usr/local/bin/\n\n# Create systemd service\nsudo tee /etc/systemd/system/redis_exporter.service &lt;&lt;EOF\n[Unit]\nDescription=Redis Exporter\nAfter=network.target\n\n[Service]\nType=simple\nUser=redis\nExecStart=/usr/local/bin/redis_exporter \\\n    --redis.addr=localhost:6379 \\\n    --redis.password=YourStrongPasswordHere123!\nRestart=always\n\n[Install]\nWantedBy=multi-user.target\nEOF\n\nsudo systemctl enable --now redis_exporter</code></pre>\n      </div>\n    </div>\n<h2 id=\"backup-and-restore\" class=\"mobile-header\">Backup and Restore</h2>\n<h3 id=\"rdb-snapshot-backup\" class=\"mobile-header\">RDB Snapshot Backup</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Manual backup\nredis-cli -a YourStrongPasswordHere123! BGSAVE\n\n# Wait for backup to complete\nredis-cli -a YourStrongPasswordHere123! LASTSAVE\n\n# Copy backup file\nsudo cp /var/lib/redis/dump.rdb /backup/redis/dump_$(date +%Y%m%d_%H%M%S).rdb\n\n# Automated backup script\ncat &gt; /usr/local/bin/redis-backup.sh &lt;&lt; &#039;EOF&#039;\n#!/bin/bash\nBACKUP_DIR=&quot;/backup/redis&quot;\nTIMESTAMP=$(date +%Y%m%d_%H%M%S)\nREDIS_CLI=&quot;redis-cli -a YourStrongPasswordHere123!&quot;\n\n# Create backup directory\nmkdir -p ${BACKUP_DIR}\n\n# Trigger backup\n${REDIS_CLI} BGSAVE\n\n# Wait for backup to complete\nwhile [ $(${REDIS_CLI} LASTSAVE) -eq $(${REDIS_CLI} LASTSAVE) ]; do\n    sleep 1\ndone\n\n# Copy backup file\ncp /var/lib/redis/dump.rdb ${BACKUP_DIR}/dump_${TIMESTAMP}.rdb\n\n# Keep only last 7 days\nfind ${BACKUP_DIR} -name &quot;dump_*.rdb&quot; -mtime +7 -delete\n\necho &quot;Backup completed: dump_${TIMESTAMP}.rdb&quot;\nEOF\n\nchmod +x /usr/local/bin/redis-backup.sh</code></pre>\n      </div>\n    </div>\n<h3 id=\"aof-backup\" class=\"mobile-header\">AOF Backup</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># If using AOF\nredis-cli -a YourStrongPasswordHere123! BGREWRITEAOF\n\n# Backup AOF file\ncp /var/lib/redis/appendonly.aof /backup/redis/appendonly_$(date +%Y%m%d_%H%M%S).aof</code></pre>\n      </div>\n    </div>\n<h3 id=\"restore-procedures\" class=\"mobile-header\">Restore Procedures</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Stop Redis\nsudo systemctl stop redis\n\n# Replace dump file\nsudo cp /backup/redis/dump_20240115_120000.rdb /var/lib/redis/dump.rdb\nsudo chown redis:redis /var/lib/redis/dump.rdb\n\n# Start Redis\nsudo systemctl start redis\n\n# Verify data\nredis-cli -a YourStrongPasswordHere123! DBSIZE</code></pre>\n      </div>\n    </div>\n<h3 id=\"backup-to-cloud-storage\" class=\"mobile-header\">Backup to Cloud Storage</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\">#!/bin/bash\n# Backup to S3\naws s3 cp /var/lib/redis/dump.rdb s3://my-bucket/redis-backups/dump_$(date +%Y%m%d_%H%M%S).rdb\n\n# Backup to Azure\naz storage blob upload --account-name myaccount --container-name redis-backups --name dump_$(date +%Y%m%d_%H%M%S).rdb --file /var/lib/redis/dump.rdb\n\n# Backup to GCS\ngsutil cp /var/lib/redis/dump.rdb gs://my-bucket/redis-backups/dump_$(date +%Y%m%d_%H%M%S).rdb</code></pre>\n      </div>\n    </div>\n<h2 id=\"troubleshooting\" class=\"mobile-header\">Troubleshooting</h2>\n<h3 id=\"common-issues\" class=\"mobile-header\">Common Issues</h3>\n<p class=\"mobile-paragraph\">1. <strong>Connection refused</strong>:</p>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Check if Redis is running\nsudo systemctl status redis\nps aux | grep redis\n\n# Check if Redis is listening\nsudo netstat -tlnp | grep 6379\nsudo ss -tlnp | grep 6379\n\n# Check logs\nsudo tail -f /var/log/redis/redis.log\nsudo journalctl -u redis -f</code></pre>\n      </div>\n    </div>\n<p class=\"mobile-paragraph\">2. <strong>Authentication errors</strong>:</p>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Test authentication\nredis-cli -a YourWrongPassword ping\n# (error) WRONGPASS invalid username-password pair\n\n# Connect with correct password\nredis-cli -a YourStrongPasswordHere123! ping\n# PONG</code></pre>\n      </div>\n    </div>\n<p class=\"mobile-paragraph\">3. <strong>Memory issues</strong>:</p>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Check memory usage\nredis-cli -a YourStrongPasswordHere123! INFO memory\n\n# Check evicted keys\nredis-cli -a YourStrongPasswordHere123! INFO stats | grep evicted\n\n# Set memory limit\nredis-cli -a YourStrongPasswordHere123! CONFIG SET maxmemory 2gb\n\n# Check what&#039;s using memory\nredis-cli -a YourStrongPasswordHere123! --bigkeys</code></pre>\n      </div>\n    </div>\n<p class=\"mobile-paragraph\">4. <strong>Performance issues</strong>:</p>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Check slow queries\nredis-cli -a YourStrongPasswordHere123! SLOWLOG GET 10\n\n# Check connected clients\nredis-cli -a YourStrongPasswordHere123! CLIENT LIST\n\n# Check persistence status\nredis-cli -a YourStrongPasswordHere123! INFO persistence\n\n# Disable persistence temporarily\nredis-cli -a YourStrongPasswordHere123! CONFIG SET save &quot;&quot;\nredis-cli -a YourStrongPasswordHere123! CONFIG SET appendonly no</code></pre>\n      </div>\n    </div>\n<h3 id=\"recovery-procedures\" class=\"mobile-header\">Recovery Procedures</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Fix corrupted AOF\nredis-check-aof --fix /var/lib/redis/appendonly.aof\n\n# Fix corrupted RDB\nredis-check-rdb /var/lib/redis/dump.rdb\n\n# Emergency flush (use with caution!)\nredis-cli -a YourStrongPasswordHere123! FLUSHDB\nredis-cli -a YourStrongPasswordHere123! FLUSHALL</code></pre>\n      </div>\n    </div>\n<h2 id=\"maintenance\" class=\"mobile-header\">Maintenance</h2>\n<h3 id=\"update-procedures\" class=\"mobile-header\">Update Procedures</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># RHEL/CentOS/Rocky/AlmaLinux\nsudo dnf check-update redis\nsudo dnf update redis\n\n# Debian/Ubuntu\nsudo apt update\nsudo apt upgrade redis-server\n\n# Arch Linux\nsudo pacman -Syu redis\n\n# Alpine Linux\napk update\napk upgrade redis\n\n# openSUSE\nsudo zypper update redis\n\n# FreeBSD\npkg update\npkg upgrade redis\n\n# Always backup before updates\nredis-cli -a YourStrongPasswordHere123! BGSAVE</code></pre>\n      </div>\n    </div>\n<h3 id=\"log-rotation\" class=\"mobile-header\">Log Rotation</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Create logrotate configuration\nsudo tee /etc/logrotate.d/redis &lt;&lt;EOF\n/var/log/redis/*.log {\n    daily\n    rotate 7\n    compress\n    delaycompress\n    missingok\n    notifempty\n    create 640 redis redis\n    postrotate\n        systemctl reload redis &gt; /dev/null 2&gt;&amp;1 || true\n    endscript\n}\nEOF</code></pre>\n      </div>\n    </div>\n<h3 id=\"health-checks\" class=\"mobile-header\">Health Checks</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\">#!/bin/bash\n# /usr/local/bin/redis-health-check.sh\n\nREDIS_CLI=&quot;redis-cli -a YourStrongPasswordHere123!&quot;\n\n# Check if Redis is responding\nif ! ${REDIS_CLI} ping &gt; /dev/null 2&gt;&amp;1; then\n    echo &quot;Redis is not responding&quot;\n    exit 1\nfi\n\n# Check memory usage\nUSED_MEMORY=$(${REDIS_CLI} INFO memory | grep used_memory_human | cut -d: -f2 | tr -d &#039;\\r&#039;)\necho &quot;Memory usage: ${USED_MEMORY}&quot;\n\n# Check replication\nROLE=$(${REDIS_CLI} INFO replication | grep role | cut -d: -f2 | tr -d &#039;\\r&#039;)\necho &quot;Redis role: ${ROLE}&quot;\n\n# Check persistence\nRDB_LAST_SAVE=$(${REDIS_CLI} LASTSAVE)\necho &quot;Last save: $(date -d @${RDB_LAST_SAVE})&quot;\n\necho &quot;Redis health check passed&quot;</code></pre>\n      </div>\n    </div>\n<h2 id=\"integration-examples\" class=\"mobile-header\">Integration Examples</h2>\n<h3 id=\"python-redis-py\" class=\"mobile-header\">Python (redis-py)</h3>\n<div class=\"mobile-code-block\" data-language=\"python\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">python</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-python\">import redis\nfrom redis.sentinel import Sentinel\n\n# Basic connection\nr = redis.Redis(\n    host=&#039;localhost&#039;,\n    port=6379,\n    password=&#039;YourStrongPasswordHere123!&#039;,\n    decode_responses=True\n)\n\n# Connection pool\npool = redis.ConnectionPool(\n    host=&#039;localhost&#039;,\n    port=6379,\n    password=&#039;YourStrongPasswordHere123!&#039;,\n    max_connections=50\n)\nr = redis.Redis(connection_pool=pool)\n\n# Basic operations\nr.set(&#039;key&#039;, &#039;value&#039;)\nvalue = r.get(&#039;key&#039;)\n\n# Pipeline for performance\npipe = r.pipeline()\nfor i in range(10000):\n    pipe.set(f&#039;key:{i}&#039;, i)\npipe.execute()\n\n# Pub/Sub\npubsub = r.pubsub()\npubsub.subscribe(&#039;channel&#039;)\nfor message in pubsub.listen():\n    print(message)\n\n# Sentinel connection\nsentinel = Sentinel([(&#039;localhost&#039;, 26379)])\nmaster = sentinel.master_for(&#039;mymaster&#039;, socket_timeout=0.1)</code></pre>\n      </div>\n    </div>\n<h3 id=\"nodejs-ioredis\" class=\"mobile-header\">Node.js (ioredis)</h3>\n<div class=\"mobile-code-block\" data-language=\"javascript\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">javascript</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-javascript\">const Redis = require(&#039;ioredis&#039;);\n\n// Basic connection\nconst redis = new Redis({\n  host: &#039;localhost&#039;,\n  port: 6379,\n  password: &#039;YourStrongPasswordHere123!&#039;,\n  retryStrategy: (times) =&gt; {\n    const delay = Math.min(times * 50, 2000);\n    return delay;\n  }\n});\n\n// Cluster connection\nconst cluster = new Redis.Cluster([\n  { port: 6379, host: &#039;192.168.1.10&#039; },\n  { port: 6379, host: &#039;192.168.1.11&#039; }\n]);\n\n// Basic operations\nasync function example() {\n  await redis.set(&#039;key&#039;, &#039;value&#039;);\n  const value = await redis.get(&#039;key&#039;);\n  \n  // Pipeline\n  const pipeline = redis.pipeline();\n  pipeline.set(&#039;key1&#039;, &#039;value1&#039;);\n  pipeline.set(&#039;key2&#039;, &#039;value2&#039;);\n  pipeline.get(&#039;key1&#039;);\n  const results = await pipeline.exec();\n  \n  // Pub/Sub\n  const sub = new Redis();\n  sub.subscribe(&#039;news&#039;, &#039;music&#039;);\n  sub.on(&#039;message&#039;, (channel, message) =&gt; {\n    console.log(`Received ${message} from ${channel}`);\n  });\n}\n\n// Stream processing\nasync function streamExample() {\n  // Add to stream\n  await redis.xadd(&#039;mystream&#039;, &#039;*&#039;, &#039;field1&#039;, &#039;value1&#039;);\n  \n  // Read from stream\n  const messages = await redis.xread(&#039;STREAMS&#039;, &#039;mystream&#039;, &#039;0&#039;);\n}</code></pre>\n      </div>\n    </div>\n<h3 id=\"php-predisphpredis\" class=\"mobile-header\">PHP (Predis/PhpRedis)</h3>\n<div class=\"mobile-code-block\" data-language=\"php\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">php</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-php\">&lt;?php\n// Using Predis\nrequire &#039;vendor/autoload.php&#039;;\n\n$client = new Predis\\Client([\n    &#039;scheme&#039; =&gt; &#039;tcp&#039;,\n    &#039;host&#039;   =&gt; &#039;127.0.0.1&#039;,\n    &#039;port&#039;   =&gt; 6379,\n    &#039;password&#039; =&gt; &#039;YourStrongPasswordHere123!&#039;\n]);\n\n// Basic operations\n$client-&gt;set(&#039;key&#039;, &#039;value&#039;);\n$value = $client-&gt;get(&#039;key&#039;);\n\n// Pipeline\n$pipe = $client-&gt;pipeline();\nfor ($i = 0; $i &lt; 1000; $i++) {\n    $pipe-&gt;set(&quot;key:$i&quot;, $i);\n}\n$pipe-&gt;execute();\n\n// Using PhpRedis extension\n$redis = new Redis();\n$redis-&gt;connect(&#039;127.0.0.1&#039;, 6379);\n$redis-&gt;auth(&#039;YourStrongPasswordHere123!&#039;);\n\n// Transactions\n$redis-&gt;multi();\n$redis-&gt;set(&#039;key1&#039;, &#039;value1&#039;);\n$redis-&gt;set(&#039;key2&#039;, &#039;value2&#039;);\n$redis-&gt;exec();\n\n// Pub/Sub\n$redis-&gt;subscribe([&#039;channel1&#039;, &#039;channel2&#039;], function ($redis, $channel, $message) {\n    echo &quot;Received: $message on $channel\\n&quot;;\n});\n?&gt;</code></pre>\n      </div>\n    </div>\n<h3 id=\"java-jedislettuce\" class=\"mobile-header\">Java (Jedis/Lettuce)</h3>\n<div class=\"mobile-code-block\" data-language=\"java\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">java</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-java\">// Using Jedis\nimport redis.clients.jedis.Jedis;\nimport redis.clients.jedis.JedisPool;\nimport redis.clients.jedis.JedisPoolConfig;\n\npublic class RedisExample {\n    private static JedisPool pool;\n    \n    static {\n        JedisPoolConfig config = new JedisPoolConfig();\n        config.setMaxTotal(128);\n        config.setMaxIdle(128);\n        config.setMinIdle(16);\n        config.setTestOnBorrow(true);\n        config.setTestOnReturn(true);\n        \n        pool = new JedisPool(config, &quot;localhost&quot;, 6379, 2000, &quot;YourStrongPasswordHere123!&quot;);\n    }\n    \n    public static void example() {\n        try (Jedis jedis = pool.getResource()) {\n            // Basic operations\n            jedis.set(&quot;key&quot;, &quot;value&quot;);\n            String value = jedis.get(&quot;key&quot;);\n            \n            // Pipeline\n            Pipeline pipeline = jedis.pipelined();\n            for (int i = 0; i &lt; 10000; i++) {\n                pipeline.set(&quot;key:&quot; + i, String.valueOf(i));\n            }\n            pipeline.sync();\n            \n            // Transactions\n            Transaction tx = jedis.multi();\n            tx.set(&quot;key1&quot;, &quot;value1&quot;);\n            tx.set(&quot;key2&quot;, &quot;value2&quot;);\n            tx.exec();\n        }\n    }\n}\n\n// Using Lettuce\nimport io.lettuce.core.*;\nimport io.lettuce.core.api.StatefulRedisConnection;\nimport io.lettuce.core.api.sync.RedisCommands;\n\nRedisClient client = RedisClient.create(&quot;redis://password@localhost:6379&quot;);\nStatefulRedisConnection&lt;String, String&gt; connection = client.connect();\nRedisCommands&lt;String, String&gt; sync = connection.sync();\n\nsync.set(&quot;key&quot;, &quot;value&quot;);\nString value = sync.get(&quot;key&quot;);</code></pre>\n      </div>\n    </div>\n<h3 id=\"go-go-redis\" class=\"mobile-header\">Go (go-redis)</h3>\n<div class=\"mobile-code-block\" data-language=\"go\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">go</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-go\">package main\n\nimport (\n    &quot;context&quot;\n    &quot;fmt&quot;\n    &quot;github.com/go-redis/redis/v8&quot;\n)\n\nvar ctx = context.Background()\n\nfunc main() {\n    // Create client\n    rdb := redis.NewClient(&amp;redis.Options{\n        Addr:     &quot;localhost:6379&quot;,\n        Password: &quot;YourStrongPasswordHere123!&quot;,\n        DB:       0,\n        PoolSize: 10,\n    })\n\n    // Basic operations\n    err := rdb.Set(ctx, &quot;key&quot;, &quot;value&quot;, 0).Err()\n    if err != nil {\n        panic(err)\n    }\n\n    val, err := rdb.Get(ctx, &quot;key&quot;).Result()\n    if err != nil {\n        panic(err)\n    }\n    fmt.Println(&quot;key&quot;, val)\n\n    // Pipeline\n    pipe := rdb.Pipeline()\n    for i := 0; i &lt; 1000; i++ {\n        pipe.Set(ctx, fmt.Sprintf(&quot;key:%d&quot;, i), i, 0)\n    }\n    _, err = pipe.Exec(ctx)\n\n    // Pub/Sub\n    pubsub := rdb.Subscribe(ctx, &quot;channel&quot;)\n    ch := pubsub.Channel()\n    for msg := range ch {\n        fmt.Println(msg.Channel, msg.Payload)\n    }\n}</code></pre>\n      </div>\n    </div>\n<h2 id=\"additional-resources\" class=\"mobile-header\">Additional Resources</h2>\n<li class=\"mobile-list-item\"><a href=\"https://redis.io/documentation\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">Official Documentation</a></li>\n<li class=\"mobile-list-item\"><a href=\"https://github.com/redis/redis\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">GitHub Repository</a></li>\n<li class=\"mobile-list-item\"><a href=\"https://redis.io/commands\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">Redis Commands Reference</a></li>\n<li class=\"mobile-list-item\"><a href=\"https://university.redis.com/\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">Redis University</a></li>\n<li class=\"mobile-list-item\"><a href=\"https://redis.io/docs/manual/patterns/\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">Redis Best Practices</a></li>\n<li class=\"mobile-list-item\"><a href=\"https://redis.io/docs/manual/security/\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">Redis Security</a></li>\n<li class=\"mobile-list-item\"><a href=\"https://redis.io/docs/manual/scaling/\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">Redis Cluster Tutorial</a></li>\n<li class=\"mobile-list-item\"><a href=\"https://forum.redis.com/\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">Community Forum</a></li>\n<p class=\"mobile-paragraph\">---</p>\n<p class=\"mobile-paragraph\"><strong>Note:</strong> This guide is part of the <a href=\"https://howtomgr.github.io\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">HowToMgr</a> collection. Always refer to official documentation for the most up-to-date information.</p>","readTime":"18 min","wordCount":3495,"lastBuilt":"2025-09-14T18:12:01.651Z"},{"name":"redis-server","displayName":"Redis Server","slug":"redis-server","description":"Repo for redis-server","category":"database","language":null,"stars":0,"forks":0,"topics":[],"githubUrl":"https://github.com/howtomgr/redis-server","updatedAt":"2025-09-14T03:45:52Z","createdAt":"2025-09-08T03:15:51Z","readmeRaw":"# Redis Installation Guide\n\nRedis is a free and open-source in-memory data structure store used as database, cache, message broker, and streaming engine. Originally developed by Salvatore Sanfilippo, Redis (REmote DIctionary Server) is known for its performance, simplicity, and versatility. It serves as a FOSS alternative to commercial in-memory solutions like Amazon ElastiCache, Azure Cache for Redis, or Oracle Coherence, offering enterprise-grade features including persistence, replication, clustering, and pub/sub messaging without licensing costs.\n\n## Prerequisites\n\n- **Hardware Requirements**:\n  - CPU: 1 core minimum (2+ cores recommended for production)\n  - RAM: 512MB minimum (4GB+ recommended for production)\n  - Storage: 1GB minimum (SSD recommended for persistence)\n  - Network: Stable connectivity for clustering and replication\n- **Operating System**: \n  - Linux: Any modern distribution with kernel 3.2+\n  - macOS: 10.13+ (High Sierra or newer)\n  - Windows: Windows Server 2016+ or Windows 10\n  - FreeBSD: 11.0+\n- **Network Requirements**:\n  - Port 6379 (default Redis port)\n  - Port 26379 (Redis Sentinel)\n  - Port 16379 (Redis Cluster bus port)\n  - Additional ports for Redis instances in cluster mode\n- **Dependencies**:\n  - libc, libssl (usually included in distributions)\n  - systemd or compatible init system (Linux)\n  - Root or administrative access for installation\n- **System Access**: root or sudo privileges required\n\n## Installation\n\n### RHEL/CentOS/Rocky Linux/AlmaLinux\n\n```bash\n# Install EPEL repository\nsudo dnf install -y epel-release\n\n# Install Redis\nsudo dnf install -y redis redis-tools\n\n# Enable and start service\nsudo systemctl enable --now redis\n\n# Configure firewall\nsudo firewall-cmd --permanent --add-port=6379/tcp\nsudo firewall-cmd --reload\n\n# Verify installation\nredis-cli --version\nredis-cli ping\n```\n\n### Debian/Ubuntu\n\n```bash\n# Update package index\nsudo apt update\n\n# Install Redis server and tools\nsudo apt install -y redis-server redis-tools\n\n# Enable and start service\nsudo systemctl enable --now redis-server\n\n# Configure firewall\nsudo ufw allow 6379\n\n# Verify installation\nredis-cli --version\nredis-cli ping\n```\n\n### Arch Linux\n\n```bash\n# Install Redis from official repositories\nsudo pacman -S redis\n\n# Enable and start service\nsudo systemctl enable --now redis\n\n# Install additional tools\nsudo pacman -S redis-tools\n\n# Configuration location: /etc/redis/redis.conf\n```\n\n### Alpine Linux\n\n```bash\n# Install Redis\napk add --no-cache redis\n\n# Enable and start service\nrc-update add redis default\nrc-service redis start\n\n# Install additional tools\napk add --no-cache redis-tools\n\n# Configuration location: /etc/redis.conf\n```\n\n### openSUSE/SLES\n\n```bash\n# openSUSE Leap/Tumbleweed\nsudo zypper install -y redis redis-tools\n\n# SLES 15\nsudo SUSEConnect -p sle-module-server-applications/15.5/x86_64\nsudo zypper install -y redis\n\n# Enable and start service\nsudo systemctl enable --now redis\n\n# Configure firewall\nsudo firewall-cmd --permanent --add-port=6379/tcp\nsudo firewall-cmd --reload\n\n# Configuration location: /etc/redis/redis.conf\n```\n\n### macOS\n\n```bash\n# Using Homebrew\nbrew install redis\n\n# Start Redis service\nbrew services start redis\n\n# Or run manually\nredis-server\n\n# Configuration location: /usr/local/etc/redis.conf\n# Alternative: /opt/homebrew/etc/redis.conf (Apple Silicon)\n```\n\n### FreeBSD\n\n```bash\n# Using pkg\npkg install redis\n\n# Enable in rc.conf\necho 'redis_enable=\"YES\"' >> /etc/rc.conf\n\n# Start service\nservice redis start\n\n# Configuration location: /usr/local/etc/redis.conf\n```\n\n### Windows\n\n```bash\n# Method 1: Using Chocolatey\nchoco install redis-64\n\n# Method 2: Using Scoop\nscoop install redis\n\n# Method 3: Manual installation\n# Download from https://github.com/microsoftarchive/redis/releases\n# Extract and run redis-server.exe\n\n# Install as Windows service using NSSM\nnssm install Redis \"C:\\redis\\redis-server.exe\" \"C:\\redis\\redis.windows.conf\"\nnssm start Redis\n\n# Configuration location: C:\\redis\\redis.windows.conf\n```\n\n## Initial Configuration\n\n### First-Run Setup\n\n1. **Create redis user** (if not created by package):\n```bash\n# Linux systems\nsudo useradd -r -d /var/lib/redis -s /sbin/nologin -c \"Redis Server\" redis\n```\n\n2. **Default configuration locations**:\n- RHEL/CentOS/Rocky/AlmaLinux: `/etc/redis.conf` or `/etc/redis/redis.conf`\n- Debian/Ubuntu: `/etc/redis/redis.conf`\n- Arch Linux: `/etc/redis/redis.conf`\n- Alpine Linux: `/etc/redis.conf`\n- openSUSE/SLES: `/etc/redis/redis.conf`\n- macOS: `/usr/local/etc/redis.conf`\n- FreeBSD: `/usr/local/etc/redis.conf`\n- Windows: `C:\\redis\\redis.windows.conf`\n\n3. **Essential settings to change**:\n\n```bash\n# /etc/redis/redis.conf\n# Network\nbind 127.0.0.1\nport 6379\nprotected-mode yes\ntimeout 300\n\n# Security\nrequirepass SecureRedisPassword123!\nrename-command FLUSHDB \"\"\nrename-command FLUSHALL \"\"\nrename-command DEBUG \"\"\nrename-command CONFIG \"CONFIG_$(openssl rand -hex 4)\"\n\n# Memory management\nmaxmemory 2gb\nmaxmemory-policy allkeys-lru\nmaxmemory-samples 5\n\n# Persistence\nsave 900 1\nsave 300 10\nsave 60 10000\nstop-writes-on-bgsave-error yes\nrdbcompression yes\nrdbchecksum yes\ndbfilename dump.rdb\ndir /var/lib/redis\n\n# AOF persistence\nappendonly yes\nappendfilename \"appendonly.aof\"\nappendfsync everysec\nno-appendfsync-on-rewrite no\nauto-aof-rewrite-percentage 100\nauto-aof-rewrite-min-size 64mb\n\n# Logging\nloglevel notice\nlogfile /var/log/redis/redis-server.log\nsyslog-enabled yes\nsyslog-ident redis\n\n# Client connections\ntcp-backlog 511\ntcp-keepalive 300\n```\n\n### Testing Initial Setup\n\n```bash\n# Check if Redis is running\nsudo systemctl status redis\n\n# Test connection\nredis-cli ping\n\n# Test authentication (if password set)\nredis-cli -a SecureRedisPassword123! ping\n\n# Test basic operations\nredis-cli set test \"Hello Redis\"\nredis-cli get test\n\n# Check Redis configuration\nredis-cli config get \"*\"\n```\n\n**WARNING:** Enable authentication and configure firewall rules immediately after installation!\n\n## Service Management\n\n### systemd (RHEL, Debian, Ubuntu, Arch, openSUSE)\n\n```bash\n# Enable Redis to start on boot\nsudo systemctl enable redis\n\n# Start Redis\nsudo systemctl start redis\n\n# Stop Redis\nsudo systemctl stop redis\n\n# Restart Redis\nsudo systemctl restart redis\n\n# Reload configuration\nsudo systemctl reload redis\n\n# Check status\nsudo systemctl status redis\n\n# View logs\nsudo journalctl -u redis -f\n```\n\n### OpenRC (Alpine Linux)\n\n```bash\n# Enable Redis to start on boot\nrc-update add redis default\n\n# Start Redis\nrc-service redis start\n\n# Stop Redis\nrc-service redis stop\n\n# Restart Redis\nrc-service redis restart\n\n# Check status\nrc-service redis status\n\n# View logs\ntail -f /var/log/redis.log\n```\n\n### rc.d (FreeBSD)\n\n```bash\n# Enable in /etc/rc.conf\necho 'redis_enable=\"YES\"' >> /etc/rc.conf\n\n# Start Redis\nservice redis start\n\n# Stop Redis\nservice redis stop\n\n# Restart Redis\nservice redis restart\n\n# Check status\nservice redis status\n```\n\n### launchd (macOS)\n\n```bash\n# Using Homebrew services\nbrew services start redis\nbrew services stop redis\nbrew services restart redis\n\n# Check status\nbrew services list | grep redis\n\n# Manual control\nredis-server /usr/local/etc/redis.conf\n```\n\n### Windows Service Manager\n\n```powershell\n# Start Redis service\nnet start Redis\n\n# Stop Redis service\nnet stop Redis\n\n# Using PowerShell\nStart-Service Redis\nStop-Service Redis\nRestart-Service Redis\n\n# Check status\nGet-Service Redis\n\n# Using NSSM\nnssm start Redis\nnssm stop Redis\nnssm restart Redis\n```\n\n## Advanced Configuration\n\n### Master-Slave Replication\n\n```bash\n# Master configuration\n# /etc/redis/redis-master.conf\nport 6379\nbind 0.0.0.0\nrequirepass MasterPassword123!\nmasterauth MasterPassword123!\n\n# Slave configuration\n# /etc/redis/redis-slave.conf\nport 6380\nbind 0.0.0.0\nslaveof 192.168.1.100 6379\nmasterauth MasterPassword123!\nrequirepass SlavePassword123!\nslave-read-only yes\nslave-serve-stale-data yes\n```\n\n### Redis Cluster Configuration\n\n```bash\n# Cluster node configuration\nport 7000\ncluster-enabled yes\ncluster-config-file nodes-7000.conf\ncluster-node-timeout 15000\nappendonly yes\nrequirepass ClusterPassword123!\nmasterauth ClusterPassword123!\n\n# Create cluster (6 nodes minimum)\nredis-cli --cluster create \\\n  192.168.1.10:7000 192.168.1.11:7000 192.168.1.12:7000 \\\n  192.168.1.13:7000 192.168.1.14:7000 192.168.1.15:7000 \\\n  --cluster-replicas 1 -a ClusterPassword123!\n```\n\n### Redis Sentinel Configuration\n\n```bash\n# /etc/redis/sentinel.conf\nport 26379\nsentinel monitor mymaster 192.168.1.100 6379 2\nsentinel auth-pass mymaster MasterPassword123!\nsentinel down-after-milliseconds mymaster 30000\nsentinel failover-timeout mymaster 180000\nsentinel parallel-syncs mymaster 1\n\n# Notification scripts\nsentinel notification-script mymaster /usr/local/bin/redis-notify.sh\nsentinel client-reconfig-script mymaster /usr/local/bin/redis-reconfig.sh\n```\n\n## Reverse Proxy Setup\n\n### nginx Configuration\n\n```nginx\n# /etc/nginx/sites-available/redis-proxy\nupstream redis_backend {\n    server 127.0.0.1:6379 max_fails=3 fail_timeout=30s;\n    server 127.0.0.1:6380 max_fails=3 fail_timeout=30s backup;\n}\n\nserver {\n    listen 6379;\n    proxy_pass redis_backend;\n    proxy_timeout 1s;\n    proxy_responses 1;\n    error_log /var/log/nginx/redis.log;\n}\n```\n\n### HAProxy Configuration\n\n```haproxy\n# /etc/haproxy/haproxy.cfg\nfrontend redis_frontend\n    bind *:6379\n    mode tcp\n    option tcplog\n    default_backend redis_servers\n\nbackend redis_servers\n    mode tcp\n    balance first\n    option redis-check\n    server redis1 127.0.0.1:6379 check\n    server redis2 127.0.0.1:6380 check backup\n```\n\n### Twemproxy (Redis Proxy)\n\n```yaml\n# /etc/nutcracker/nutcracker.yml\nredis_cluster:\n  listen: 0.0.0.0:22122\n  hash: fnv1a_64\n  hash_tag: \"{}\"\n  distribution: ketama\n  auto_eject_hosts: true\n  timeout: 400\n  redis: true\n  servers:\n   - 127.0.0.1:6379:1\n   - 127.0.0.1:6380:1\n   - 127.0.0.1:6381:1\n```\n\n## Security Configuration\n\n### Authentication and Authorization\n\n```bash\n# Set strong password\nredis-cli config set requirepass \"VerySecureRedisPassword123!\"\n\n# Create ACL users (Redis 6+)\nredis-cli acl setuser app-user on \\\n  >AppUserPassword123! \\\n  ~cached:* ~session:* \\\n  +@read +@write -@dangerous\n\nredis-cli acl setuser readonly-user on \\\n  >ReadOnlyPassword123! \\\n  ~* +@read -@write -@admin\n\n# Save ACL configuration\nredis-cli acl save\n```\n\n### SSL/TLS Configuration\n\n```bash\n# Generate SSL certificates\nsudo mkdir -p /etc/redis/ssl\nsudo openssl genrsa -out /etc/redis/ssl/redis-server-key.pem 4096\nsudo openssl req -new -key /etc/redis/ssl/redis-server-key.pem \\\n  -out /etc/redis/ssl/redis-server-cert.csr \\\n  -subj \"/C=US/ST=State/L=City/O=Organization/CN=redis.example.com\"\nsudo openssl x509 -req -in /etc/redis/ssl/redis-server-cert.csr \\\n  -signkey /etc/redis/ssl/redis-server-key.pem \\\n  -out /etc/redis/ssl/redis-server-cert.pem -days 365\n\n# Update Redis configuration\ntls-port 6380\nport 0\ntls-cert-file /etc/redis/ssl/redis-server-cert.pem\ntls-key-file /etc/redis/ssl/redis-server-key.pem\ntls-protocols \"TLSv1.2 TLSv1.3\"\ntls-prefer-server-ciphers yes\ntls-session-caching no\n```\n\n### Firewall Rules\n\n```bash\n# UFW (Ubuntu/Debian)\nsudo ufw allow from 192.168.1.0/24 to any port 6379\nsudo ufw reload\n\n# firewalld (RHEL/CentOS/openSUSE)\nsudo firewall-cmd --permanent --new-zone=redis\nsudo firewall-cmd --permanent --zone=redis --add-source=192.168.1.0/24\nsudo firewall-cmd --permanent --zone=redis --add-port=6379/tcp\nsudo firewall-cmd --reload\n\n# iptables\nsudo iptables -A INPUT -s 192.168.1.0/24 -p tcp --dport 6379 -j ACCEPT\nsudo iptables-save > /etc/iptables/rules.v4\n\n# pf (FreeBSD)\n# Add to /etc/pf.conf\npass in on $ext_if proto tcp from 192.168.1.0/24 to any port 6379\n\n# Windows Firewall\nNew-NetFirewallRule -DisplayName \"Redis\" -Direction Inbound -Protocol TCP -LocalPort 6379 -RemoteAddress 192.168.1.0/24 -Action Allow\n```\n\n## Database Setup\n\n### Database Creation and Management\n\n```bash\n# Redis doesn't require explicit database creation\n# Databases are numbered 0-15 by default\n\n# Select database\nredis-cli select 0\n\n# Create data structures\nredis-cli hset user:1000 name \"John Doe\" email \"john@example.com\"\nredis-cli sadd users:active 1000 1001 1002\nredis-cli zadd leaderboard 100 \"player1\" 200 \"player2\"\nredis-cli lpush notifications \"New message\" \"System update\"\n\n# Set expiration\nredis-cli expire user:1000 3600\nredis-cli ttl user:1000\n\n# Pipeline operations\nredis-cli --pipe <<EOF\nSET key1 value1\nSET key2 value2\nINCR counter\nEOF\n```\n\n### Data Types and Use Cases\n\n```bash\n# Strings - caching, counters\nredis-cli set cache:user:1000 '{\"name\":\"John\",\"age\":30}'\nredis-cli incr page_views\nredis-cli setex session:abc123 3600 \"user_data\"\n\n# Hashes - objects, user profiles\nredis-cli hset product:1 name \"Laptop\" price 999.99 stock 50\nredis-cli hgetall product:1\n\n# Lists - queues, recent items\nredis-cli lpush job_queue \"process_order:123\"\nredis-cli rpop job_queue\nredis-cli lrange recent_posts 0 9\n\n# Sets - unique collections, tags\nredis-cli sadd tags:post:1 \"redis\" \"database\" \"cache\"\nredis-cli sinter tags:post:1 tags:post:2\n\n# Sorted Sets - leaderboards, rankings\nredis-cli zadd scores 100 \"alice\" 200 \"bob\" 150 \"charlie\"\nredis-cli zrevrange scores 0 2 withscores\n\n# Streams - event logging, messaging\nredis-cli xadd events * action \"user_login\" user_id 1000 timestamp 1640995200\nredis-cli xread streams events 0-0\n```\n\n## Performance Optimization\n\n### System Tuning\n\n```bash\n# Kernel parameters for Redis\nsudo tee -a /etc/sysctl.conf <<EOF\n# Redis performance optimizations\nvm.overcommit_memory = 1\nnet.core.somaxconn = 65535\nnet.ipv4.tcp_max_syn_backlog = 65535\nvm.swappiness = 1\nEOF\n\nsudo sysctl -p\n\n# Disable Transparent Huge Pages\necho 'never' | sudo tee /sys/kernel/mm/transparent_hugepage/enabled\n\n# Make permanent\nsudo tee /etc/systemd/system/disable-thp.service <<EOF\n[Unit]\nDescription=Disable Transparent Huge Pages\nDefaultDependencies=no\nAfter=sysinit.target local-fs.target\nBefore=redis.service\n\n[Service]\nType=oneshot\nExecStart=/bin/sh -c 'echo never | tee /sys/kernel/mm/transparent_hugepage/enabled > /dev/null'\n\n[Install]\nWantedBy=basic.target\nEOF\n\nsudo systemctl enable --now disable-thp\n```\n\n### Redis Performance Tuning\n\n```bash\n# High-performance Redis configuration\n# Memory optimization\nmaxmemory 8gb\nmaxmemory-policy allkeys-lru\nmaxmemory-samples 10\n\n# Network optimization\ntcp-backlog 65535\ntcp-keepalive 300\ntimeout 0\n\n# Persistence optimization\nsave 900 1\nsave 300 10\nsave 60 10000\nrdbcompression yes\nrdbchecksum yes\n\n# AOF optimization\nappendonly yes\nappendfsync everysec\nno-appendfsync-on-rewrite no\nauto-aof-rewrite-percentage 100\nauto-aof-rewrite-min-size 64mb\naof-rewrite-incremental-fsync yes\n\n# Client optimization\nclient-output-buffer-limit normal 0 0 0\nclient-output-buffer-limit replica 256mb 64mb 60\nclient-output-buffer-limit pubsub 32mb 8mb 60\n\n# Threading (Redis 6+)\nio-threads 4\nio-threads-do-reads yes\n```\n\n### Memory Management\n\n```bash\n# Monitor memory usage\nredis-cli info memory\n\n# Analyze memory usage by key pattern\nredis-cli --bigkeys\nredis-cli --memkeys\nredis-cli memory usage key_name\n\n# Memory optimization commands\nredis-cli memory doctor\nredis-cli memory stats\nredis-cli memory purge\n```\n\n## Monitoring\n\n### Built-in Monitoring\n\n```bash\n# Server information\nredis-cli info\nredis-cli info server\nredis-cli info memory\nredis-cli info replication\nredis-cli info stats\n\n# Real-time monitoring\nredis-cli monitor\nredis-cli --latency\nredis-cli --latency-history -i 1\n\n# Slow query log\nredis-cli config set slowlog-log-slower-than 10000\nredis-cli slowlog get 10\nredis-cli slowlog reset\n\n# Client connections\nredis-cli client list\nredis-cli client info\nredis-cli info clients\n```\n\n### External Monitoring Setup\n\n```bash\n# Install Redis Exporter for Prometheus\nwget https://github.com/oliver006/redis_exporter/releases/download/v1.55.0/redis_exporter-v1.55.0.linux-amd64.tar.gz\ntar xzf redis_exporter-*.tar.gz\nsudo cp redis_exporter /usr/local/bin/\n\n# Create systemd service\nsudo tee /etc/systemd/system/redis_exporter.service <<EOF\n[Unit]\nDescription=Redis Exporter\nAfter=network.target\n\n[Service]\nType=simple\nUser=redis\nEnvironment=REDIS_ADDR=redis://localhost:6379\nEnvironment=REDIS_PASSWORD=SecureRedisPassword123!\nExecStart=/usr/local/bin/redis_exporter\nRestart=always\n\n[Install]\nWantedBy=multi-user.target\nEOF\n\nsudo systemctl enable --now redis_exporter\n```\n\n### Health Check Scripts\n\n```bash\n#!/bin/bash\n# redis-health-check.sh\n\n# Check Redis service\nif ! systemctl is-active redis >/dev/null 2>&1; then\n    echo \"CRITICAL: Redis service is not running\"\n    exit 2\nfi\n\n# Check connectivity\nif ! redis-cli ping >/dev/null 2>&1; then\n    echo \"CRITICAL: Cannot connect to Redis\"\n    exit 2\nfi\n\n# Check memory usage\nMEMORY_USED=$(redis-cli info memory | grep 'used_memory:' | cut -d: -f2 | tr -d '\\r')\nMEMORY_MAX=$(redis-cli config get maxmemory | tail -1)\n\nif [ \"$MEMORY_MAX\" != \"0\" ]; then\n    MEMORY_USAGE=$((MEMORY_USED * 100 / MEMORY_MAX))\n    if [ $MEMORY_USAGE -gt 90 ]; then\n        echo \"WARNING: High memory usage: ${MEMORY_USAGE}%\"\n        exit 1\n    fi\nfi\n\n# Check replication (if configured)\nREPLICATION_INFO=$(redis-cli info replication)\nif echo \"$REPLICATION_INFO\" | grep -q \"role:slave\"; then\n    LINK_STATUS=$(echo \"$REPLICATION_INFO\" | grep \"master_link_status\" | cut -d: -f2 | tr -d '\\r')\n    if [ \"$LINK_STATUS\" != \"up\" ]; then\n        echo \"WARNING: Replication link is down\"\n        exit 1\n    fi\nfi\n\necho \"OK: Redis is healthy\"\nexit 0\n```\n\n## Backup and Restore\n\n### Backup Procedures\n\n```bash\n#!/bin/bash\n# redis-backup.sh\n\nBACKUP_DIR=\"/backup/redis/$(date +%Y%m%d_%H%M%S)\"\nmkdir -p \"$BACKUP_DIR\"\n\n# Create RDB backup\nredis-cli -a SecureRedisPassword123! bgsave\nsleep 5\n\n# Wait for background save to complete\nwhile [ \"$(redis-cli -a SecureRedisPassword123! lastsave)\" = \"$(redis-cli -a SecureRedisPassword123! lastsave)\" ]; do\n    sleep 1\ndone\n\n# Copy RDB file\ncp /var/lib/redis/dump.rdb \"$BACKUP_DIR/\"\n\n# Backup AOF file if enabled\nif [ -f /var/lib/redis/appendonly.aof ]; then\n    redis-cli -a SecureRedisPassword123! bgrewriteaof\n    sleep 5\n    cp /var/lib/redis/appendonly.aof \"$BACKUP_DIR/\"\nfi\n\n# Backup configuration\ncp /etc/redis/redis.conf \"$BACKUP_DIR/\"\n\n# Compress backup\ntar czf \"$BACKUP_DIR.tar.gz\" -C \"$(dirname \"$BACKUP_DIR\")\" \"$(basename \"$BACKUP_DIR\")\"\nrm -rf \"$BACKUP_DIR\"\n\necho \"Backup completed: $BACKUP_DIR.tar.gz\"\n```\n\n### Restore Procedures\n\n```bash\n#!/bin/bash\n# redis-restore.sh\n\nBACKUP_FILE=\"$1\"\nif [ -z \"$BACKUP_FILE\" ]; then\n    echo \"Usage: $0 <backup-file.tar.gz>\"\n    exit 1\nfi\n\n# Stop Redis\nsudo systemctl stop redis\n\n# Extract backup\nBACKUP_DIR=\"/tmp/redis-restore-$(date +%s)\"\nmkdir -p \"$BACKUP_DIR\"\ntar xzf \"$BACKUP_FILE\" -C \"$BACKUP_DIR\" --strip-components=1\n\n# Restore RDB file\nif [ -f \"$BACKUP_DIR/dump.rdb\" ]; then\n    cp \"$BACKUP_DIR/dump.rdb\" /var/lib/redis/\n    chown redis:redis /var/lib/redis/dump.rdb\nfi\n\n# Restore AOF file\nif [ -f \"$BACKUP_DIR/appendonly.aof\" ]; then\n    cp \"$BACKUP_DIR/appendonly.aof\" /var/lib/redis/\n    chown redis:redis /var/lib/redis/appendonly.aof\nfi\n\n# Restore configuration\nif [ -f \"$BACKUP_DIR/redis.conf\" ]; then\n    cp \"$BACKUP_DIR/redis.conf\" /etc/redis/\nfi\n\n# Start Redis\nsudo systemctl start redis\n\n# Cleanup\nrm -rf \"$BACKUP_DIR\"\n\necho \"Restore completed\"\n```\n\n### Point-in-Time Recovery\n\n```bash\n#!/bin/bash\n# redis-pitr.sh\n\nRECOVERY_TIME=\"$1\"\nif [ -z \"$RECOVERY_TIME\" ]; then\n    echo \"Usage: $0 <recovery-timestamp>\"\n    echo \"Example: $0 1640995200\"\n    exit 1\nfi\n\n# Find appropriate backup\nBACKUP_FILE=$(find /backup/redis -name \"*.tar.gz\" -newer \"$RECOVERY_TIME\" | head -1)\n\nif [ -z \"$BACKUP_FILE\" ]; then\n    echo \"No backup found for recovery time: $RECOVERY_TIME\"\n    exit 1\nfi\n\n# Restore backup\n./redis-restore.sh \"$BACKUP_FILE\"\n\n# Apply AOF logs from recovery point\nif [ -f /var/lib/redis/appendonly.aof ]; then\n    # Truncate AOF to recovery point\n    redis-check-aof --fix /var/lib/redis/appendonly.aof\nfi\n\necho \"Point-in-time recovery completed to $RECOVERY_TIME\"\n```\n\n## Troubleshooting\n\n### Common Issues\n\n1. **Redis won't start**:\n```bash\n# Check logs\nsudo journalctl -u redis -f\nsudo tail -f /var/log/redis/redis-server.log\n\n# Check disk space\ndf -h /var/lib/redis\n\n# Check permissions\nls -la /var/lib/redis\n\n# Validate configuration\nredis-server --test-config\n```\n\n2. **Connection issues**:\n```bash\n# Check if Redis is listening\nsudo ss -tlnp | grep :6379\n\n# Test local connection\nredis-cli ping\nredis-cli -h 127.0.0.1 -p 6379 ping\n\n# Check authentication\nredis-cli -a SecureRedisPassword123! ping\n\n# Check bind address\nredis-cli config get bind\n```\n\n3. **Performance issues**:\n```bash\n# Check slow queries\nredis-cli slowlog get 10\n\n# Check memory usage\nredis-cli info memory\n\n# Check client connections\nredis-cli info clients\nredis-cli client list\n\n# Monitor latency\nredis-cli --latency-history -i 1\n```\n\n### Debug Mode\n\n```bash\n# Start Redis with verbose logging\nredis-server /etc/redis/redis.conf --loglevel debug\n\n# Enable command logging\nredis-cli config set loglevel debug\n\n# Monitor all commands\nredis-cli monitor\n\n# Check server info\nredis-cli info all\n```\n\n## Maintenance\n\n### Update Procedures\n\n```bash\n# RHEL/CentOS/Rocky/AlmaLinux\nsudo dnf check-update redis\nsudo dnf update redis\n\n# Debian/Ubuntu\nsudo apt update\nsudo apt upgrade redis-server\n\n# Arch Linux\nsudo pacman -Syu redis\n\n# Alpine Linux\napk update\napk upgrade redis\n\n# openSUSE\nsudo zypper update redis\n\n# FreeBSD\npkg update\npkg upgrade redis\n\n# Always backup before updates\n./redis-backup.sh\n\n# Restart after updates\nsudo systemctl restart redis\n```\n\n### Maintenance Tasks\n\n```bash\n# Weekly maintenance script\n#!/bin/bash\n# redis-maintenance.sh\n\n# Check memory usage\nMEMORY_INFO=$(redis-cli info memory)\necho \"Memory usage: $MEMORY_INFO\"\n\n# Clean up expired keys\nredis-cli eval \"return #redis.call('keys', ARGV[1])\" 0 \"*\"\n\n# Optimize RDB file\nredis-cli debug restart\n\n# Check slow queries\nSLOW_QUERIES=$(redis-cli slowlog len)\nif [ \"$SLOW_QUERIES\" -gt 0 ]; then\n    echo \"Found $SLOW_QUERIES slow queries\"\n    redis-cli slowlog get 5\nfi\n\n# Analyze key distribution\nredis-cli --bigkeys\n\n# Check replication lag (if slave)\nif redis-cli info replication | grep -q \"role:slave\"; then\n    redis-cli info replication | grep \"master_last_io_seconds_ago\"\nfi\n\necho \"Redis maintenance completed\"\n```\n\n### Health Monitoring\n\n```bash\n# Create monitoring cron job\necho \"*/5 * * * * /usr/local/bin/redis-health-check.sh\" | sudo crontab -\n\n# Log rotation\nsudo tee /etc/logrotate.d/redis <<EOF\n/var/log/redis/*.log {\n    daily\n    rotate 7\n    compress\n    delaycompress\n    missingok\n    notifempty\n    create 640 redis redis\n    postrotate\n        systemctl reload redis\n    endscript\n}\nEOF\n```\n\n## Integration Examples\n\n### Python Integration\n\n```python\n# Using redis-py\nimport redis\nimport json\n\n# Connect to Redis\nr = redis.Redis(\n    host='localhost',\n    port=6379,\n    password='SecureRedisPassword123!',\n    decode_responses=True\n)\n\n# Basic operations\nr.set('user:1000', json.dumps({'name': 'John', 'age': 30}))\nuser_data = json.loads(r.get('user:1000'))\n\n# Pipeline operations\npipe = r.pipeline()\npipe.set('key1', 'value1')\npipe.set('key2', 'value2')\npipe.incr('counter')\nresults = pipe.execute()\n\n# Pub/Sub\npubsub = r.pubsub()\npubsub.subscribe('notifications')\nfor message in pubsub.listen():\n    print(f\"Received: {message['data']}\")\n```\n\n### Node.js Integration\n\n```javascript\n// Using ioredis\nconst Redis = require('ioredis');\n\nconst redis = new Redis({\n    port: 6379,\n    host: 'localhost',\n    password: 'SecureRedisPassword123!',\n    retryDelayOnFailover: 100,\n    maxRetriesPerRequest: 3,\n});\n\n// Basic operations\nawait redis.set('session:abc123', JSON.stringify({userId: 1000}), 'EX', 3600);\nconst sessionData = JSON.parse(await redis.get('session:abc123'));\n\n// Pipeline operations\nconst pipeline = redis.pipeline();\npipeline.hset('user:1000', 'name', 'John');\npipeline.hset('user:1000', 'email', 'john@example.com');\npipeline.expire('user:1000', 3600);\nawait pipeline.exec();\n\n// Cluster support\nconst cluster = new Redis.Cluster([\n    { host: '127.0.0.1', port: 7000 },\n    { host: '127.0.0.1', port: 7001 },\n    { host: '127.0.0.1', port: 7002 }\n]);\n```\n\n### PHP Integration\n\n```php\n<?php\n// Using Predis\nrequire_once 'vendor/autoload.php';\n\n$redis = new Predis\\Client([\n    'scheme' => 'tcp',\n    'host'   => '127.0.0.1',\n    'port'   => 6379,\n    'password' => 'SecureRedisPassword123!',\n]);\n\n// Basic operations\n$redis->set('cache:product:1', json_encode(['name' => 'Laptop', 'price' => 999.99]));\n$redis->expire('cache:product:1', 3600);\n$productData = json_decode($redis->get('cache:product:1'), true);\n\n// Transaction\n$redis->multi();\n$redis->incr('page_views');\n$redis->lpush('recent_pages', '/products/1');\n$redis->ltrim('recent_pages', 0, 99);\n$results = $redis->exec();\n?>\n```\n\n### Java Integration\n\n```java\n// Using Jedis\nimport redis.clients.jedis.Jedis;\nimport redis.clients.jedis.JedisPool;\nimport redis.clients.jedis.JedisPoolConfig;\n\n// Connection pool\nJedisPoolConfig poolConfig = new JedisPoolConfig();\npoolConfig.setMaxTotal(50);\npoolConfig.setMaxIdle(20);\n\nJedisPool pool = new JedisPool(poolConfig, \"localhost\", 6379, 2000, \"SecureRedisPassword123!\");\n\n// Use connection\ntry (Jedis jedis = pool.getResource()) {\n    // Basic operations\n    jedis.set(\"user:1000\", \"{\\\"name\\\":\\\"John\\\",\\\"age\\\":30}\");\n    jedis.expire(\"user:1000\", 3600);\n    String userData = jedis.get(\"user:1000\");\n    \n    // Pipeline operations\n    Pipeline pipeline = jedis.pipelined();\n    pipeline.hset(\"product:1\", \"name\", \"Laptop\");\n    pipeline.hset(\"product:1\", \"price\", \"999.99\");\n    pipeline.expire(\"product:1\", 3600);\n    pipeline.sync();\n}\n```\n\n## Additional Resources\n\n- [Official Redis Documentation](https://redis.io/documentation)\n- [Redis Commands Reference](https://redis.io/commands)\n- [Redis Modules](https://redis.io/modules)\n- [Redis Security Guidelines](https://redis.io/topics/security)\n- [Redis Persistence](https://redis.io/topics/persistence)\n- [Redis Replication](https://redis.io/topics/replication)\n- [Redis Cluster Tutorial](https://redis.io/tutorial/redis-cluster-tutorial)\n- [Redis Sentinel Documentation](https://redis.io/topics/sentinel)\n\n---\n\n**Note:** This guide is part of the [HowToMgr](https://howtomgr.github.io) collection. Always refer to official documentation for the most up-to-date information.","readmeHtml":"<h1 id=\"redis-installation-guide\" class=\"mobile-header\">Redis Installation Guide</h1>\n<p class=\"mobile-paragraph\">Redis is a free and open-source in-memory data structure store used as database, cache, message broker, and streaming engine. Originally developed by Salvatore Sanfilippo, Redis (REmote DIctionary Server) is known for its performance, simplicity, and versatility. It serves as a FOSS alternative to commercial in-memory solutions like Amazon ElastiCache, Azure Cache for Redis, or Oracle Coherence, offering enterprise-grade features including persistence, replication, clustering, and pub/sub messaging without licensing costs.</p>\n<h2 id=\"prerequisites\" class=\"mobile-header\">Prerequisites</h2>\n<li class=\"mobile-list-item\"><strong>Hardware Requirements</strong>:</li>\n<li class=\"mobile-list-item\">CPU: 1 core minimum (2+ cores recommended for production)</li>\n<li class=\"mobile-list-item\">RAM: 512MB minimum (4GB+ recommended for production)</li>\n<li class=\"mobile-list-item\">Storage: 1GB minimum (SSD recommended for persistence)</li>\n<li class=\"mobile-list-item\">Network: Stable connectivity for clustering and replication</li>\n<li class=\"mobile-list-item\"><strong>Operating System</strong>: </li>\n<li class=\"mobile-list-item\">Linux: Any modern distribution with kernel 3.2+</li>\n<li class=\"mobile-list-item\">macOS: 10.13+ (High Sierra or newer)</li>\n<li class=\"mobile-list-item\">Windows: Windows Server 2016+ or Windows 10</li>\n<li class=\"mobile-list-item\">FreeBSD: 11.0+</li>\n<li class=\"mobile-list-item\"><strong>Network Requirements</strong>:</li>\n<li class=\"mobile-list-item\">Port 6379 (default Redis port)</li>\n<li class=\"mobile-list-item\">Port 26379 (Redis Sentinel)</li>\n<li class=\"mobile-list-item\">Port 16379 (Redis Cluster bus port)</li>\n<li class=\"mobile-list-item\">Additional ports for Redis instances in cluster mode</li>\n<li class=\"mobile-list-item\"><strong>Dependencies</strong>:</li>\n<li class=\"mobile-list-item\">libc, libssl (usually included in distributions)</li>\n<li class=\"mobile-list-item\">systemd or compatible init system (Linux)</li>\n<li class=\"mobile-list-item\">Root or administrative access for installation</li>\n<li class=\"mobile-list-item\"><strong>System Access</strong>: root or sudo privileges required</li>\n<h2 id=\"installation\" class=\"mobile-header\">Installation</h2>\n<h3 id=\"rhelcentosrocky-linuxalmalinux\" class=\"mobile-header\">RHEL/CentOS/Rocky Linux/AlmaLinux</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Install EPEL repository\nsudo dnf install -y epel-release\n\n# Install Redis\nsudo dnf install -y redis redis-tools\n\n# Enable and start service\nsudo systemctl enable --now redis\n\n# Configure firewall\nsudo firewall-cmd --permanent --add-port=6379/tcp\nsudo firewall-cmd --reload\n\n# Verify installation\nredis-cli --version\nredis-cli ping</code></pre>\n      </div>\n    </div>\n<h3 id=\"debianubuntu\" class=\"mobile-header\">Debian/Ubuntu</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Update package index\nsudo apt update\n\n# Install Redis server and tools\nsudo apt install -y redis-server redis-tools\n\n# Enable and start service\nsudo systemctl enable --now redis-server\n\n# Configure firewall\nsudo ufw allow 6379\n\n# Verify installation\nredis-cli --version\nredis-cli ping</code></pre>\n      </div>\n    </div>\n<h3 id=\"arch-linux\" class=\"mobile-header\">Arch Linux</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Install Redis from official repositories\nsudo pacman -S redis\n\n# Enable and start service\nsudo systemctl enable --now redis\n\n# Install additional tools\nsudo pacman -S redis-tools\n\n# Configuration location: /etc/redis/redis.conf</code></pre>\n      </div>\n    </div>\n<h3 id=\"alpine-linux\" class=\"mobile-header\">Alpine Linux</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Install Redis\napk add --no-cache redis\n\n# Enable and start service\nrc-update add redis default\nrc-service redis start\n\n# Install additional tools\napk add --no-cache redis-tools\n\n# Configuration location: /etc/redis.conf</code></pre>\n      </div>\n    </div>\n<h3 id=\"opensusesles\" class=\"mobile-header\">openSUSE/SLES</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># openSUSE Leap/Tumbleweed\nsudo zypper install -y redis redis-tools\n\n# SLES 15\nsudo SUSEConnect -p sle-module-server-applications/15.5/x86_64\nsudo zypper install -y redis\n\n# Enable and start service\nsudo systemctl enable --now redis\n\n# Configure firewall\nsudo firewall-cmd --permanent --add-port=6379/tcp\nsudo firewall-cmd --reload\n\n# Configuration location: /etc/redis/redis.conf</code></pre>\n      </div>\n    </div>\n<h3 id=\"macos\" class=\"mobile-header\">macOS</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Using Homebrew\nbrew install redis\n\n# Start Redis service\nbrew services start redis\n\n# Or run manually\nredis-server\n\n# Configuration location: /usr/local/etc/redis.conf\n# Alternative: /opt/homebrew/etc/redis.conf (Apple Silicon)</code></pre>\n      </div>\n    </div>\n<h3 id=\"freebsd\" class=\"mobile-header\">FreeBSD</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Using pkg\npkg install redis\n\n# Enable in rc.conf\necho &#039;redis_enable=&quot;YES&quot;&#039; &gt;&gt; /etc/rc.conf\n\n# Start service\nservice redis start\n\n# Configuration location: /usr/local/etc/redis.conf</code></pre>\n      </div>\n    </div>\n<h3 id=\"windows\" class=\"mobile-header\">Windows</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Method 1: Using Chocolatey\nchoco install redis-64\n\n# Method 2: Using Scoop\nscoop install redis\n\n# Method 3: Manual installation\n# Download from https://github.com/microsoftarchive/redis/releases\n# Extract and run redis-server.exe\n\n# Install as Windows service using NSSM\nnssm install Redis &quot;C:\\redis\\redis-server.exe&quot; &quot;C:\\redis\\redis.windows.conf&quot;\nnssm start Redis\n\n# Configuration location: C:\\redis\\redis.windows.conf</code></pre>\n      </div>\n    </div>\n<h2 id=\"initial-configuration\" class=\"mobile-header\">Initial Configuration</h2>\n<h3 id=\"first-run-setup\" class=\"mobile-header\">First-Run Setup</h3>\n<p class=\"mobile-paragraph\">1. <strong>Create redis user</strong> (if not created by package):</p>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Linux systems\nsudo useradd -r -d /var/lib/redis -s /sbin/nologin -c &quot;Redis Server&quot; redis</code></pre>\n      </div>\n    </div>\n<p class=\"mobile-paragraph\">2. <strong>Default configuration locations</strong>:</p>\n<li class=\"mobile-list-item\">RHEL/CentOS/Rocky/AlmaLinux: <code class=\"mobile-inline-code\">/etc/redis.conf</code> or <code class=\"mobile-inline-code\">/etc/redis/redis.conf</code></li>\n<li class=\"mobile-list-item\">Debian/Ubuntu: <code class=\"mobile-inline-code\">/etc/redis/redis.conf</code></li>\n<li class=\"mobile-list-item\">Arch Linux: <code class=\"mobile-inline-code\">/etc/redis/redis.conf</code></li>\n<li class=\"mobile-list-item\">Alpine Linux: <code class=\"mobile-inline-code\">/etc/redis.conf</code></li>\n<li class=\"mobile-list-item\">openSUSE/SLES: <code class=\"mobile-inline-code\">/etc/redis/redis.conf</code></li>\n<li class=\"mobile-list-item\">macOS: <code class=\"mobile-inline-code\">/usr/local/etc/redis.conf</code></li>\n<li class=\"mobile-list-item\">FreeBSD: <code class=\"mobile-inline-code\">/usr/local/etc/redis.conf</code></li>\n<li class=\"mobile-list-item\">Windows: <code class=\"mobile-inline-code\">C:\\redis\\redis.windows.conf</code></li>\n<p class=\"mobile-paragraph\">3. <strong>Essential settings to change</strong>:</p>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># /etc/redis/redis.conf\n# Network\nbind 127.0.0.1\nport 6379\nprotected-mode yes\ntimeout 300\n\n# Security\nrequirepass SecureRedisPassword123!\nrename-command FLUSHDB &quot;&quot;\nrename-command FLUSHALL &quot;&quot;\nrename-command DEBUG &quot;&quot;\nrename-command CONFIG &quot;CONFIG_$(openssl rand -hex 4)&quot;\n\n# Memory management\nmaxmemory 2gb\nmaxmemory-policy allkeys-lru\nmaxmemory-samples 5\n\n# Persistence\nsave 900 1\nsave 300 10\nsave 60 10000\nstop-writes-on-bgsave-error yes\nrdbcompression yes\nrdbchecksum yes\ndbfilename dump.rdb\ndir /var/lib/redis\n\n# AOF persistence\nappendonly yes\nappendfilename &quot;appendonly.aof&quot;\nappendfsync everysec\nno-appendfsync-on-rewrite no\nauto-aof-rewrite-percentage 100\nauto-aof-rewrite-min-size 64mb\n\n# Logging\nloglevel notice\nlogfile /var/log/redis/redis-server.log\nsyslog-enabled yes\nsyslog-ident redis\n\n# Client connections\ntcp-backlog 511\ntcp-keepalive 300</code></pre>\n      </div>\n    </div>\n<h3 id=\"testing-initial-setup\" class=\"mobile-header\">Testing Initial Setup</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Check if Redis is running\nsudo systemctl status redis\n\n# Test connection\nredis-cli ping\n\n# Test authentication (if password set)\nredis-cli -a SecureRedisPassword123! ping\n\n# Test basic operations\nredis-cli set test &quot;Hello Redis&quot;\nredis-cli get test\n\n# Check Redis configuration\nredis-cli config get &quot;*&quot;</code></pre>\n      </div>\n    </div>\n<p class=\"mobile-paragraph\"><strong>WARNING:</strong> Enable authentication and configure firewall rules immediately after installation!</p>\n<h2 id=\"service-management\" class=\"mobile-header\">Service Management</h2>\n<h3 id=\"systemd-rhel-debian-ubuntu-arch-opensuse\" class=\"mobile-header\">systemd (RHEL, Debian, Ubuntu, Arch, openSUSE)</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Enable Redis to start on boot\nsudo systemctl enable redis\n\n# Start Redis\nsudo systemctl start redis\n\n# Stop Redis\nsudo systemctl stop redis\n\n# Restart Redis\nsudo systemctl restart redis\n\n# Reload configuration\nsudo systemctl reload redis\n\n# Check status\nsudo systemctl status redis\n\n# View logs\nsudo journalctl -u redis -f</code></pre>\n      </div>\n    </div>\n<h3 id=\"openrc-alpine-linux\" class=\"mobile-header\">OpenRC (Alpine Linux)</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Enable Redis to start on boot\nrc-update add redis default\n\n# Start Redis\nrc-service redis start\n\n# Stop Redis\nrc-service redis stop\n\n# Restart Redis\nrc-service redis restart\n\n# Check status\nrc-service redis status\n\n# View logs\ntail -f /var/log/redis.log</code></pre>\n      </div>\n    </div>\n<h3 id=\"rcd-freebsd\" class=\"mobile-header\">rc.d (FreeBSD)</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Enable in /etc/rc.conf\necho &#039;redis_enable=&quot;YES&quot;&#039; &gt;&gt; /etc/rc.conf\n\n# Start Redis\nservice redis start\n\n# Stop Redis\nservice redis stop\n\n# Restart Redis\nservice redis restart\n\n# Check status\nservice redis status</code></pre>\n      </div>\n    </div>\n<h3 id=\"launchd-macos\" class=\"mobile-header\">launchd (macOS)</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Using Homebrew services\nbrew services start redis\nbrew services stop redis\nbrew services restart redis\n\n# Check status\nbrew services list | grep redis\n\n# Manual control\nredis-server /usr/local/etc/redis.conf</code></pre>\n      </div>\n    </div>\n<h3 id=\"windows-service-manager\" class=\"mobile-header\">Windows Service Manager</h3>\n<div class=\"mobile-code-block\" data-language=\"powershell\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">powershell</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-powershell\"># Start Redis service\nnet start Redis\n\n# Stop Redis service\nnet stop Redis\n\n# Using PowerShell\nStart-Service Redis\nStop-Service Redis\nRestart-Service Redis\n\n# Check status\nGet-Service Redis\n\n# Using NSSM\nnssm start Redis\nnssm stop Redis\nnssm restart Redis</code></pre>\n      </div>\n    </div>\n<h2 id=\"advanced-configuration\" class=\"mobile-header\">Advanced Configuration</h2>\n<h3 id=\"master-slave-replication\" class=\"mobile-header\">Master-Slave Replication</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Master configuration\n# /etc/redis/redis-master.conf\nport 6379\nbind 0.0.0.0\nrequirepass MasterPassword123!\nmasterauth MasterPassword123!\n\n# Slave configuration\n# /etc/redis/redis-slave.conf\nport 6380\nbind 0.0.0.0\nslaveof 192.168.1.100 6379\nmasterauth MasterPassword123!\nrequirepass SlavePassword123!\nslave-read-only yes\nslave-serve-stale-data yes</code></pre>\n      </div>\n    </div>\n<h3 id=\"redis-cluster-configuration\" class=\"mobile-header\">Redis Cluster Configuration</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Cluster node configuration\nport 7000\ncluster-enabled yes\ncluster-config-file nodes-7000.conf\ncluster-node-timeout 15000\nappendonly yes\nrequirepass ClusterPassword123!\nmasterauth ClusterPassword123!\n\n# Create cluster (6 nodes minimum)\nredis-cli --cluster create \\\n  192.168.1.10:7000 192.168.1.11:7000 192.168.1.12:7000 \\\n  192.168.1.13:7000 192.168.1.14:7000 192.168.1.15:7000 \\\n  --cluster-replicas 1 -a ClusterPassword123!</code></pre>\n      </div>\n    </div>\n<h3 id=\"redis-sentinel-configuration\" class=\"mobile-header\">Redis Sentinel Configuration</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># /etc/redis/sentinel.conf\nport 26379\nsentinel monitor mymaster 192.168.1.100 6379 2\nsentinel auth-pass mymaster MasterPassword123!\nsentinel down-after-milliseconds mymaster 30000\nsentinel failover-timeout mymaster 180000\nsentinel parallel-syncs mymaster 1\n\n# Notification scripts\nsentinel notification-script mymaster /usr/local/bin/redis-notify.sh\nsentinel client-reconfig-script mymaster /usr/local/bin/redis-reconfig.sh</code></pre>\n      </div>\n    </div>\n<h2 id=\"reverse-proxy-setup\" class=\"mobile-header\">Reverse Proxy Setup</h2>\n<h3 id=\"nginx-configuration\" class=\"mobile-header\">nginx Configuration</h3>\n<div class=\"mobile-code-block\" data-language=\"nginx\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">nginx</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-nginx\"># /etc/nginx/sites-available/redis-proxy\nupstream redis_backend {\n    server 127.0.0.1:6379 max_fails=3 fail_timeout=30s;\n    server 127.0.0.1:6380 max_fails=3 fail_timeout=30s backup;\n}\n\nserver {\n    listen 6379;\n    proxy_pass redis_backend;\n    proxy_timeout 1s;\n    proxy_responses 1;\n    error_log /var/log/nginx/redis.log;\n}</code></pre>\n      </div>\n    </div>\n<h3 id=\"haproxy-configuration\" class=\"mobile-header\">HAProxy Configuration</h3>\n<div class=\"mobile-code-block\" data-language=\"haproxy\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">haproxy</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-haproxy\"># /etc/haproxy/haproxy.cfg\nfrontend redis_frontend\n    bind *:6379\n    mode tcp\n    option tcplog\n    default_backend redis_servers\n\nbackend redis_servers\n    mode tcp\n    balance first\n    option redis-check\n    server redis1 127.0.0.1:6379 check\n    server redis2 127.0.0.1:6380 check backup</code></pre>\n      </div>\n    </div>\n<h3 id=\"twemproxy-redis-proxy\" class=\"mobile-header\">Twemproxy (Redis Proxy)</h3>\n<div class=\"mobile-code-block\" data-language=\"yaml\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">yaml</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-yaml\"># /etc/nutcracker/nutcracker.yml\nredis_cluster:\n  listen: 0.0.0.0:22122\n  hash: fnv1a_64\n  hash_tag: &quot;{}&quot;\n  distribution: ketama\n  auto_eject_hosts: true\n  timeout: 400\n  redis: true\n  servers:\n   - 127.0.0.1:6379:1\n   - 127.0.0.1:6380:1\n   - 127.0.0.1:6381:1</code></pre>\n      </div>\n    </div>\n<h2 id=\"security-configuration\" class=\"mobile-header\">Security Configuration</h2>\n<h3 id=\"authentication-and-authorization\" class=\"mobile-header\">Authentication and Authorization</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Set strong password\nredis-cli config set requirepass &quot;VerySecureRedisPassword123!&quot;\n\n# Create ACL users (Redis 6+)\nredis-cli acl setuser app-user on \\\n  &gt;AppUserPassword123! \\\n  ~cached:* ~session:* \\\n  +@read +@write -@dangerous\n\nredis-cli acl setuser readonly-user on \\\n  &gt;ReadOnlyPassword123! \\\n  ~* +@read -@write -@admin\n\n# Save ACL configuration\nredis-cli acl save</code></pre>\n      </div>\n    </div>\n<h3 id=\"ssltls-configuration\" class=\"mobile-header\">SSL/TLS Configuration</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Generate SSL certificates\nsudo mkdir -p /etc/redis/ssl\nsudo openssl genrsa -out /etc/redis/ssl/redis-server-key.pem 4096\nsudo openssl req -new -key /etc/redis/ssl/redis-server-key.pem \\\n  -out /etc/redis/ssl/redis-server-cert.csr \\\n  -subj &quot;/C=US/ST=State/L=City/O=Organization/CN=redis.example.com&quot;\nsudo openssl x509 -req -in /etc/redis/ssl/redis-server-cert.csr \\\n  -signkey /etc/redis/ssl/redis-server-key.pem \\\n  -out /etc/redis/ssl/redis-server-cert.pem -days 365\n\n# Update Redis configuration\ntls-port 6380\nport 0\ntls-cert-file /etc/redis/ssl/redis-server-cert.pem\ntls-key-file /etc/redis/ssl/redis-server-key.pem\ntls-protocols &quot;TLSv1.2 TLSv1.3&quot;\ntls-prefer-server-ciphers yes\ntls-session-caching no</code></pre>\n      </div>\n    </div>\n<h3 id=\"firewall-rules\" class=\"mobile-header\">Firewall Rules</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># UFW (Ubuntu/Debian)\nsudo ufw allow from 192.168.1.0/24 to any port 6379\nsudo ufw reload\n\n# firewalld (RHEL/CentOS/openSUSE)\nsudo firewall-cmd --permanent --new-zone=redis\nsudo firewall-cmd --permanent --zone=redis --add-source=192.168.1.0/24\nsudo firewall-cmd --permanent --zone=redis --add-port=6379/tcp\nsudo firewall-cmd --reload\n\n# iptables\nsudo iptables -A INPUT -s 192.168.1.0/24 -p tcp --dport 6379 -j ACCEPT\nsudo iptables-save &gt; /etc/iptables/rules.v4\n\n# pf (FreeBSD)\n# Add to /etc/pf.conf\npass in on $ext_if proto tcp from 192.168.1.0/24 to any port 6379\n\n# Windows Firewall\nNew-NetFirewallRule -DisplayName &quot;Redis&quot; -Direction Inbound -Protocol TCP -LocalPort 6379 -RemoteAddress 192.168.1.0/24 -Action Allow</code></pre>\n      </div>\n    </div>\n<h2 id=\"database-setup\" class=\"mobile-header\">Database Setup</h2>\n<h3 id=\"database-creation-and-management\" class=\"mobile-header\">Database Creation and Management</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Redis doesn&#039;t require explicit database creation\n# Databases are numbered 0-15 by default\n\n# Select database\nredis-cli select 0\n\n# Create data structures\nredis-cli hset user:1000 name &quot;John Doe&quot; email &quot;john@example.com&quot;\nredis-cli sadd users:active 1000 1001 1002\nredis-cli zadd leaderboard 100 &quot;player1&quot; 200 &quot;player2&quot;\nredis-cli lpush notifications &quot;New message&quot; &quot;System update&quot;\n\n# Set expiration\nredis-cli expire user:1000 3600\nredis-cli ttl user:1000\n\n# Pipeline operations\nredis-cli --pipe &lt;&lt;EOF\nSET key1 value1\nSET key2 value2\nINCR counter\nEOF</code></pre>\n      </div>\n    </div>\n<h3 id=\"data-types-and-use-cases\" class=\"mobile-header\">Data Types and Use Cases</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Strings - caching, counters\nredis-cli set cache:user:1000 &#039;{&quot;name&quot;:&quot;John&quot;,&quot;age&quot;:30}&#039;\nredis-cli incr page_views\nredis-cli setex session:abc123 3600 &quot;user_data&quot;\n\n# Hashes - objects, user profiles\nredis-cli hset product:1 name &quot;Laptop&quot; price 999.99 stock 50\nredis-cli hgetall product:1\n\n# Lists - queues, recent items\nredis-cli lpush job_queue &quot;process_order:123&quot;\nredis-cli rpop job_queue\nredis-cli lrange recent_posts 0 9\n\n# Sets - unique collections, tags\nredis-cli sadd tags:post:1 &quot;redis&quot; &quot;database&quot; &quot;cache&quot;\nredis-cli sinter tags:post:1 tags:post:2\n\n# Sorted Sets - leaderboards, rankings\nredis-cli zadd scores 100 &quot;alice&quot; 200 &quot;bob&quot; 150 &quot;charlie&quot;\nredis-cli zrevrange scores 0 2 withscores\n\n# Streams - event logging, messaging\nredis-cli xadd events * action &quot;user_login&quot; user_id 1000 timestamp 1640995200\nredis-cli xread streams events 0-0</code></pre>\n      </div>\n    </div>\n<h2 id=\"performance-optimization\" class=\"mobile-header\">Performance Optimization</h2>\n<h3 id=\"system-tuning\" class=\"mobile-header\">System Tuning</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Kernel parameters for Redis\nsudo tee -a /etc/sysctl.conf &lt;&lt;EOF\n# Redis performance optimizations\nvm.overcommit_memory = 1\nnet.core.somaxconn = 65535\nnet.ipv4.tcp_max_syn_backlog = 65535\nvm.swappiness = 1\nEOF\n\nsudo sysctl -p\n\n# Disable Transparent Huge Pages\necho &#039;never&#039; | sudo tee /sys/kernel/mm/transparent_hugepage/enabled\n\n# Make permanent\nsudo tee /etc/systemd/system/disable-thp.service &lt;&lt;EOF\n[Unit]\nDescription=Disable Transparent Huge Pages\nDefaultDependencies=no\nAfter=sysinit.target local-fs.target\nBefore=redis.service\n\n[Service]\nType=oneshot\nExecStart=/bin/sh -c &#039;echo never | tee /sys/kernel/mm/transparent_hugepage/enabled &gt; /dev/null&#039;\n\n[Install]\nWantedBy=basic.target\nEOF\n\nsudo systemctl enable --now disable-thp</code></pre>\n      </div>\n    </div>\n<h3 id=\"redis-performance-tuning\" class=\"mobile-header\">Redis Performance Tuning</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># High-performance Redis configuration\n# Memory optimization\nmaxmemory 8gb\nmaxmemory-policy allkeys-lru\nmaxmemory-samples 10\n\n# Network optimization\ntcp-backlog 65535\ntcp-keepalive 300\ntimeout 0\n\n# Persistence optimization\nsave 900 1\nsave 300 10\nsave 60 10000\nrdbcompression yes\nrdbchecksum yes\n\n# AOF optimization\nappendonly yes\nappendfsync everysec\nno-appendfsync-on-rewrite no\nauto-aof-rewrite-percentage 100\nauto-aof-rewrite-min-size 64mb\naof-rewrite-incremental-fsync yes\n\n# Client optimization\nclient-output-buffer-limit normal 0 0 0\nclient-output-buffer-limit replica 256mb 64mb 60\nclient-output-buffer-limit pubsub 32mb 8mb 60\n\n# Threading (Redis 6+)\nio-threads 4\nio-threads-do-reads yes</code></pre>\n      </div>\n    </div>\n<h3 id=\"memory-management\" class=\"mobile-header\">Memory Management</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Monitor memory usage\nredis-cli info memory\n\n# Analyze memory usage by key pattern\nredis-cli --bigkeys\nredis-cli --memkeys\nredis-cli memory usage key_name\n\n# Memory optimization commands\nredis-cli memory doctor\nredis-cli memory stats\nredis-cli memory purge</code></pre>\n      </div>\n    </div>\n<h2 id=\"monitoring\" class=\"mobile-header\">Monitoring</h2>\n<h3 id=\"built-in-monitoring\" class=\"mobile-header\">Built-in Monitoring</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Server information\nredis-cli info\nredis-cli info server\nredis-cli info memory\nredis-cli info replication\nredis-cli info stats\n\n# Real-time monitoring\nredis-cli monitor\nredis-cli --latency\nredis-cli --latency-history -i 1\n\n# Slow query log\nredis-cli config set slowlog-log-slower-than 10000\nredis-cli slowlog get 10\nredis-cli slowlog reset\n\n# Client connections\nredis-cli client list\nredis-cli client info\nredis-cli info clients</code></pre>\n      </div>\n    </div>\n<h3 id=\"external-monitoring-setup\" class=\"mobile-header\">External Monitoring Setup</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Install Redis Exporter for Prometheus\nwget https://github.com/oliver006/redis_exporter/releases/download/v1.55.0/redis_exporter-v1.55.0.linux-amd64.tar.gz\ntar xzf redis_exporter-*.tar.gz\nsudo cp redis_exporter /usr/local/bin/\n\n# Create systemd service\nsudo tee /etc/systemd/system/redis_exporter.service &lt;&lt;EOF\n[Unit]\nDescription=Redis Exporter\nAfter=network.target\n\n[Service]\nType=simple\nUser=redis\nEnvironment=REDIS_ADDR=redis://localhost:6379\nEnvironment=REDIS_PASSWORD=SecureRedisPassword123!\nExecStart=/usr/local/bin/redis_exporter\nRestart=always\n\n[Install]\nWantedBy=multi-user.target\nEOF\n\nsudo systemctl enable --now redis_exporter</code></pre>\n      </div>\n    </div>\n<h3 id=\"health-check-scripts\" class=\"mobile-header\">Health Check Scripts</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\">#!/bin/bash\n# redis-health-check.sh\n\n# Check Redis service\nif ! systemctl is-active redis &gt;/dev/null 2&gt;&amp;1; then\n    echo &quot;CRITICAL: Redis service is not running&quot;\n    exit 2\nfi\n\n# Check connectivity\nif ! redis-cli ping &gt;/dev/null 2&gt;&amp;1; then\n    echo &quot;CRITICAL: Cannot connect to Redis&quot;\n    exit 2\nfi\n\n# Check memory usage\nMEMORY_USED=$(redis-cli info memory | grep &#039;used_memory:&#039; | cut -d: -f2 | tr -d &#039;\\r&#039;)\nMEMORY_MAX=$(redis-cli config get maxmemory | tail -1)\n\nif [ &quot;$MEMORY_MAX&quot; != &quot;0&quot; ]; then\n    MEMORY_USAGE=$((MEMORY_USED * 100 / MEMORY_MAX))\n    if [ $MEMORY_USAGE -gt 90 ]; then\n        echo &quot;WARNING: High memory usage: ${MEMORY_USAGE}%&quot;\n        exit 1\n    fi\nfi\n\n# Check replication (if configured)\nREPLICATION_INFO=$(redis-cli info replication)\nif echo &quot;$REPLICATION_INFO&quot; | grep -q &quot;role:slave&quot;; then\n    LINK_STATUS=$(echo &quot;$REPLICATION_INFO&quot; | grep &quot;master_link_status&quot; | cut -d: -f2 | tr -d &#039;\\r&#039;)\n    if [ &quot;$LINK_STATUS&quot; != &quot;up&quot; ]; then\n        echo &quot;WARNING: Replication link is down&quot;\n        exit 1\n    fi\nfi\n\necho &quot;OK: Redis is healthy&quot;\nexit 0</code></pre>\n      </div>\n    </div>\n<h2 id=\"backup-and-restore\" class=\"mobile-header\">Backup and Restore</h2>\n<h3 id=\"backup-procedures\" class=\"mobile-header\">Backup Procedures</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\">#!/bin/bash\n# redis-backup.sh\n\nBACKUP_DIR=&quot;/backup/redis/$(date +%Y%m%d_%H%M%S)&quot;\nmkdir -p &quot;$BACKUP_DIR&quot;\n\n# Create RDB backup\nredis-cli -a SecureRedisPassword123! bgsave\nsleep 5\n\n# Wait for background save to complete\nwhile [ &quot;$(redis-cli -a SecureRedisPassword123! lastsave)&quot; = &quot;$(redis-cli -a SecureRedisPassword123! lastsave)&quot; ]; do\n    sleep 1\ndone\n\n# Copy RDB file\ncp /var/lib/redis/dump.rdb &quot;$BACKUP_DIR/&quot;\n\n# Backup AOF file if enabled\nif [ -f /var/lib/redis/appendonly.aof ]; then\n    redis-cli -a SecureRedisPassword123! bgrewriteaof\n    sleep 5\n    cp /var/lib/redis/appendonly.aof &quot;$BACKUP_DIR/&quot;\nfi\n\n# Backup configuration\ncp /etc/redis/redis.conf &quot;$BACKUP_DIR/&quot;\n\n# Compress backup\ntar czf &quot;$BACKUP_DIR.tar.gz&quot; -C &quot;$(dirname &quot;$BACKUP_DIR&quot;)&quot; &quot;$(basename &quot;$BACKUP_DIR&quot;)&quot;\nrm -rf &quot;$BACKUP_DIR&quot;\n\necho &quot;Backup completed: $BACKUP_DIR.tar.gz&quot;</code></pre>\n      </div>\n    </div>\n<h3 id=\"restore-procedures\" class=\"mobile-header\">Restore Procedures</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\">#!/bin/bash\n# redis-restore.sh\n\nBACKUP_FILE=&quot;$1&quot;\nif [ -z &quot;$BACKUP_FILE&quot; ]; then\n    echo &quot;Usage: $0 &lt;backup-file.tar.gz&gt;&quot;\n    exit 1\nfi\n\n# Stop Redis\nsudo systemctl stop redis\n\n# Extract backup\nBACKUP_DIR=&quot;/tmp/redis-restore-$(date +%s)&quot;\nmkdir -p &quot;$BACKUP_DIR&quot;\ntar xzf &quot;$BACKUP_FILE&quot; -C &quot;$BACKUP_DIR&quot; --strip-components=1\n\n# Restore RDB file\nif [ -f &quot;$BACKUP_DIR/dump.rdb&quot; ]; then\n    cp &quot;$BACKUP_DIR/dump.rdb&quot; /var/lib/redis/\n    chown redis:redis /var/lib/redis/dump.rdb\nfi\n\n# Restore AOF file\nif [ -f &quot;$BACKUP_DIR/appendonly.aof&quot; ]; then\n    cp &quot;$BACKUP_DIR/appendonly.aof&quot; /var/lib/redis/\n    chown redis:redis /var/lib/redis/appendonly.aof\nfi\n\n# Restore configuration\nif [ -f &quot;$BACKUP_DIR/redis.conf&quot; ]; then\n    cp &quot;$BACKUP_DIR/redis.conf&quot; /etc/redis/\nfi\n\n# Start Redis\nsudo systemctl start redis\n\n# Cleanup\nrm -rf &quot;$BACKUP_DIR&quot;\n\necho &quot;Restore completed&quot;</code></pre>\n      </div>\n    </div>\n<h3 id=\"point-in-time-recovery\" class=\"mobile-header\">Point-in-Time Recovery</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\">#!/bin/bash\n# redis-pitr.sh\n\nRECOVERY_TIME=&quot;$1&quot;\nif [ -z &quot;$RECOVERY_TIME&quot; ]; then\n    echo &quot;Usage: $0 &lt;recovery-timestamp&gt;&quot;\n    echo &quot;Example: $0 1640995200&quot;\n    exit 1\nfi\n\n# Find appropriate backup\nBACKUP_FILE=$(find /backup/redis -name &quot;*.tar.gz&quot; -newer &quot;$RECOVERY_TIME&quot; | head -1)\n\nif [ -z &quot;$BACKUP_FILE&quot; ]; then\n    echo &quot;No backup found for recovery time: $RECOVERY_TIME&quot;\n    exit 1\nfi\n\n# Restore backup\n./redis-restore.sh &quot;$BACKUP_FILE&quot;\n\n# Apply AOF logs from recovery point\nif [ -f /var/lib/redis/appendonly.aof ]; then\n    # Truncate AOF to recovery point\n    redis-check-aof --fix /var/lib/redis/appendonly.aof\nfi\n\necho &quot;Point-in-time recovery completed to $RECOVERY_TIME&quot;</code></pre>\n      </div>\n    </div>\n<h2 id=\"troubleshooting\" class=\"mobile-header\">Troubleshooting</h2>\n<h3 id=\"common-issues\" class=\"mobile-header\">Common Issues</h3>\n<p class=\"mobile-paragraph\">1. <strong>Redis won't start</strong>:</p>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Check logs\nsudo journalctl -u redis -f\nsudo tail -f /var/log/redis/redis-server.log\n\n# Check disk space\ndf -h /var/lib/redis\n\n# Check permissions\nls -la /var/lib/redis\n\n# Validate configuration\nredis-server --test-config</code></pre>\n      </div>\n    </div>\n<p class=\"mobile-paragraph\">2. <strong>Connection issues</strong>:</p>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Check if Redis is listening\nsudo ss -tlnp | grep :6379\n\n# Test local connection\nredis-cli ping\nredis-cli -h 127.0.0.1 -p 6379 ping\n\n# Check authentication\nredis-cli -a SecureRedisPassword123! ping\n\n# Check bind address\nredis-cli config get bind</code></pre>\n      </div>\n    </div>\n<p class=\"mobile-paragraph\">3. <strong>Performance issues</strong>:</p>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Check slow queries\nredis-cli slowlog get 10\n\n# Check memory usage\nredis-cli info memory\n\n# Check client connections\nredis-cli info clients\nredis-cli client list\n\n# Monitor latency\nredis-cli --latency-history -i 1</code></pre>\n      </div>\n    </div>\n<h3 id=\"debug-mode\" class=\"mobile-header\">Debug Mode</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Start Redis with verbose logging\nredis-server /etc/redis/redis.conf --loglevel debug\n\n# Enable command logging\nredis-cli config set loglevel debug\n\n# Monitor all commands\nredis-cli monitor\n\n# Check server info\nredis-cli info all</code></pre>\n      </div>\n    </div>\n<h2 id=\"maintenance\" class=\"mobile-header\">Maintenance</h2>\n<h3 id=\"update-procedures\" class=\"mobile-header\">Update Procedures</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># RHEL/CentOS/Rocky/AlmaLinux\nsudo dnf check-update redis\nsudo dnf update redis\n\n# Debian/Ubuntu\nsudo apt update\nsudo apt upgrade redis-server\n\n# Arch Linux\nsudo pacman -Syu redis\n\n# Alpine Linux\napk update\napk upgrade redis\n\n# openSUSE\nsudo zypper update redis\n\n# FreeBSD\npkg update\npkg upgrade redis\n\n# Always backup before updates\n./redis-backup.sh\n\n# Restart after updates\nsudo systemctl restart redis</code></pre>\n      </div>\n    </div>\n<h3 id=\"maintenance-tasks\" class=\"mobile-header\">Maintenance Tasks</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Weekly maintenance script\n#!/bin/bash\n# redis-maintenance.sh\n\n# Check memory usage\nMEMORY_INFO=$(redis-cli info memory)\necho &quot;Memory usage: $MEMORY_INFO&quot;\n\n# Clean up expired keys\nredis-cli eval &quot;return #redis.call(&#039;keys&#039;, ARGV[1])&quot; 0 &quot;*&quot;\n\n# Optimize RDB file\nredis-cli debug restart\n\n# Check slow queries\nSLOW_QUERIES=$(redis-cli slowlog len)\nif [ &quot;$SLOW_QUERIES&quot; -gt 0 ]; then\n    echo &quot;Found $SLOW_QUERIES slow queries&quot;\n    redis-cli slowlog get 5\nfi\n\n# Analyze key distribution\nredis-cli --bigkeys\n\n# Check replication lag (if slave)\nif redis-cli info replication | grep -q &quot;role:slave&quot;; then\n    redis-cli info replication | grep &quot;master_last_io_seconds_ago&quot;\nfi\n\necho &quot;Redis maintenance completed&quot;</code></pre>\n      </div>\n    </div>\n<h3 id=\"health-monitoring\" class=\"mobile-header\">Health Monitoring</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Create monitoring cron job\necho &quot;*/5 * * * * /usr/local/bin/redis-health-check.sh&quot; | sudo crontab -\n\n# Log rotation\nsudo tee /etc/logrotate.d/redis &lt;&lt;EOF\n/var/log/redis/*.log {\n    daily\n    rotate 7\n    compress\n    delaycompress\n    missingok\n    notifempty\n    create 640 redis redis\n    postrotate\n        systemctl reload redis\n    endscript\n}\nEOF</code></pre>\n      </div>\n    </div>\n<h2 id=\"integration-examples\" class=\"mobile-header\">Integration Examples</h2>\n<h3 id=\"python-integration\" class=\"mobile-header\">Python Integration</h3>\n<div class=\"mobile-code-block\" data-language=\"python\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">python</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-python\"># Using redis-py\nimport redis\nimport json\n\n# Connect to Redis\nr = redis.Redis(\n    host=&#039;localhost&#039;,\n    port=6379,\n    password=&#039;SecureRedisPassword123!&#039;,\n    decode_responses=True\n)\n\n# Basic operations\nr.set(&#039;user:1000&#039;, json.dumps({&#039;name&#039;: &#039;John&#039;, &#039;age&#039;: 30}))\nuser_data = json.loads(r.get(&#039;user:1000&#039;))\n\n# Pipeline operations\npipe = r.pipeline()\npipe.set(&#039;key1&#039;, &#039;value1&#039;)\npipe.set(&#039;key2&#039;, &#039;value2&#039;)\npipe.incr(&#039;counter&#039;)\nresults = pipe.execute()\n\n# Pub/Sub\npubsub = r.pubsub()\npubsub.subscribe(&#039;notifications&#039;)\nfor message in pubsub.listen():\n    print(f&quot;Received: {message[&#039;data&#039;]}&quot;)</code></pre>\n      </div>\n    </div>\n<h3 id=\"nodejs-integration\" class=\"mobile-header\">Node.js Integration</h3>\n<div class=\"mobile-code-block\" data-language=\"javascript\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">javascript</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-javascript\">// Using ioredis\nconst Redis = require(&#039;ioredis&#039;);\n\nconst redis = new Redis({\n    port: 6379,\n    host: &#039;localhost&#039;,\n    password: &#039;SecureRedisPassword123!&#039;,\n    retryDelayOnFailover: 100,\n    maxRetriesPerRequest: 3,\n});\n\n// Basic operations\nawait redis.set(&#039;session:abc123&#039;, JSON.stringify({userId: 1000}), &#039;EX&#039;, 3600);\nconst sessionData = JSON.parse(await redis.get(&#039;session:abc123&#039;));\n\n// Pipeline operations\nconst pipeline = redis.pipeline();\npipeline.hset(&#039;user:1000&#039;, &#039;name&#039;, &#039;John&#039;);\npipeline.hset(&#039;user:1000&#039;, &#039;email&#039;, &#039;john@example.com&#039;);\npipeline.expire(&#039;user:1000&#039;, 3600);\nawait pipeline.exec();\n\n// Cluster support\nconst cluster = new Redis.Cluster([\n    { host: &#039;127.0.0.1&#039;, port: 7000 },\n    { host: &#039;127.0.0.1&#039;, port: 7001 },\n    { host: &#039;127.0.0.1&#039;, port: 7002 }\n]);</code></pre>\n      </div>\n    </div>\n<h3 id=\"php-integration\" class=\"mobile-header\">PHP Integration</h3>\n<div class=\"mobile-code-block\" data-language=\"php\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">php</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-php\">&lt;?php\n// Using Predis\nrequire_once &#039;vendor/autoload.php&#039;;\n\n$redis = new Predis\\Client([\n    &#039;scheme&#039; =&gt; &#039;tcp&#039;,\n    &#039;host&#039;   =&gt; &#039;127.0.0.1&#039;,\n    &#039;port&#039;   =&gt; 6379,\n    &#039;password&#039; =&gt; &#039;SecureRedisPassword123!&#039;,\n]);\n\n// Basic operations\n$redis-&gt;set(&#039;cache:product:1&#039;, json_encode([&#039;name&#039; =&gt; &#039;Laptop&#039;, &#039;price&#039; =&gt; 999.99]));\n$redis-&gt;expire(&#039;cache:product:1&#039;, 3600);\n$productData = json_decode($redis-&gt;get(&#039;cache:product:1&#039;), true);\n\n// Transaction\n$redis-&gt;multi();\n$redis-&gt;incr(&#039;page_views&#039;);\n$redis-&gt;lpush(&#039;recent_pages&#039;, &#039;/products/1&#039;);\n$redis-&gt;ltrim(&#039;recent_pages&#039;, 0, 99);\n$results = $redis-&gt;exec();\n?&gt;</code></pre>\n      </div>\n    </div>\n<h3 id=\"java-integration\" class=\"mobile-header\">Java Integration</h3>\n<div class=\"mobile-code-block\" data-language=\"java\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">java</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-java\">// Using Jedis\nimport redis.clients.jedis.Jedis;\nimport redis.clients.jedis.JedisPool;\nimport redis.clients.jedis.JedisPoolConfig;\n\n// Connection pool\nJedisPoolConfig poolConfig = new JedisPoolConfig();\npoolConfig.setMaxTotal(50);\npoolConfig.setMaxIdle(20);\n\nJedisPool pool = new JedisPool(poolConfig, &quot;localhost&quot;, 6379, 2000, &quot;SecureRedisPassword123!&quot;);\n\n// Use connection\ntry (Jedis jedis = pool.getResource()) {\n    // Basic operations\n    jedis.set(&quot;user:1000&quot;, &quot;{\\&quot;name\\&quot;:\\&quot;John\\&quot;,\\&quot;age\\&quot;:30}&quot;);\n    jedis.expire(&quot;user:1000&quot;, 3600);\n    String userData = jedis.get(&quot;user:1000&quot;);\n    \n    // Pipeline operations\n    Pipeline pipeline = jedis.pipelined();\n    pipeline.hset(&quot;product:1&quot;, &quot;name&quot;, &quot;Laptop&quot;);\n    pipeline.hset(&quot;product:1&quot;, &quot;price&quot;, &quot;999.99&quot;);\n    pipeline.expire(&quot;product:1&quot;, 3600);\n    pipeline.sync();\n}</code></pre>\n      </div>\n    </div>\n<h2 id=\"additional-resources\" class=\"mobile-header\">Additional Resources</h2>\n<li class=\"mobile-list-item\"><a href=\"https://redis.io/documentation\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">Official Redis Documentation</a></li>\n<li class=\"mobile-list-item\"><a href=\"https://redis.io/commands\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">Redis Commands Reference</a></li>\n<li class=\"mobile-list-item\"><a href=\"https://redis.io/modules\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">Redis Modules</a></li>\n<li class=\"mobile-list-item\"><a href=\"https://redis.io/topics/security\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">Redis Security Guidelines</a></li>\n<li class=\"mobile-list-item\"><a href=\"https://redis.io/topics/persistence\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">Redis Persistence</a></li>\n<li class=\"mobile-list-item\"><a href=\"https://redis.io/topics/replication\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">Redis Replication</a></li>\n<li class=\"mobile-list-item\"><a href=\"https://redis.io/tutorial/redis-cluster-tutorial\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">Redis Cluster Tutorial</a></li>\n<li class=\"mobile-list-item\"><a href=\"https://redis.io/topics/sentinel\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">Redis Sentinel Documentation</a></li>\n<p class=\"mobile-paragraph\">---</p>\n<p class=\"mobile-paragraph\"><strong>Note:</strong> This guide is part of the <a href=\"https://howtomgr.github.io\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">HowToMgr</a> collection. Always refer to official documentation for the most up-to-date information.</p>","readTime":"16 min","wordCount":3119,"lastBuilt":"2025-09-14T18:11:58.708Z"},{"name":"rocketchat","displayName":"Rocketchat","slug":"rocketchat","description":"Repo for rocketchat","category":"communication","language":null,"stars":0,"forks":0,"topics":[],"githubUrl":"https://github.com/howtomgr/rocketchat","updatedAt":"2025-09-08T03:16:13Z","createdAt":"2025-09-08T03:16:03Z","readmeRaw":"# Rocket.Chat Installation Guide\n\nOpen-source team communication platform with features like real-time messaging, video calls, file sharing, and extensive integrations.\n\n## Prerequisites\n\n- Linux system (Ubuntu/Debian, RHEL/CentOS, or compatible)\n- 4GB RAM minimum, 8GB recommended\n- MongoDB 4.4+ or 5.0+\n- Node.js 14.x\n- Domain name (for SSL setup)\n\n## Installation\n\n### Using Docker Compose (Recommended)\n```bash\n# Create project directory\nmkdir -p ~/rocketchat && cd ~/rocketchat\n\n# Create docker-compose.yml\ncat > docker-compose.yml <<EOF\nversion: '3.8'\n\nservices:\n  rocketchat:\n    image: registry.rocket.chat/rocketchat/rocket.chat:latest\n    restart: unless-stopped\n    environment:\n      MONGO_URL: \"mongodb://mongo:27017/rocketchat?replicaSet=rs0\"\n      MONGO_OPLOG_URL: \"mongodb://mongo:27017/local?replicaSet=rs0\"\n      ROOT_URL: \"https://chat.example.com\"\n      PORT: 3000\n      DEPLOY_METHOD: docker\n      REG_TOKEN: \\${REG_TOKEN}\n    depends_on:\n      - mongo\n    ports:\n      - \"3000:3000\"\n    volumes:\n      - ./uploads:/app/uploads\n    networks:\n      - rocketchat\n\n  mongo:\n    image: docker.io/bitnami/mongodb:5.0\n    restart: unless-stopped\n    environment:\n      MONGODB_REPLICA_SET_MODE: primary\n      MONGODB_REPLICA_SET_NAME: rs0\n      MONGODB_PORT_NUMBER: 27017\n      MONGODB_INITIAL_PRIMARY_HOST: mongo\n      MONGODB_INITIAL_PRIMARY_PORT_NUMBER: 27017\n      MONGODB_ADVERTISED_HOSTNAME: mongo\n      MONGODB_ENABLE_JOURNAL: true\n      ALLOW_EMPTY_PASSWORD: yes\n    volumes:\n      - mongodb_data:/bitnami/mongodb\n    networks:\n      - rocketchat\n\n  mongo-express:\n    image: mongo-express\n    restart: unless-stopped\n    environment:\n      ME_CONFIG_MONGODB_URL: \"mongodb://mongo:27017/\"\n      ME_CONFIG_BASICAUTH_USERNAME: admin\n      ME_CONFIG_BASICAUTH_PASSWORD: pass\n    ports:\n      - \"8081:8081\"\n    depends_on:\n      - mongo\n    networks:\n      - rocketchat\n\nnetworks:\n  rocketchat:\n    driver: bridge\n\nvolumes:\n  mongodb_data:\nEOF\n\n# Start services\ndocker-compose up -d\n\n# Check logs\ndocker-compose logs -f rocketchat\n```\n\n### Manual Installation (Ubuntu/Debian)\n\n#### MongoDB Setup\n```bash\n# Install MongoDB\nwget -qO - https://www.mongodb.org/static/pgp/server-5.0.asc | sudo apt-key add -\necho \"deb [ arch=amd64,arm64 ] https://repo.mongodb.org/apt/ubuntu focal/mongodb-org/5.0 multiverse\" | sudo tee /etc/apt/sources.list.d/mongodb-org-5.0.list\n\nsudo apt update\nsudo apt install -y mongodb-org\n\n# Configure MongoDB as replica set\nsudo systemctl enable --now mongod\n\n# Initialize replica set\nmongo --eval \"rs.initiate({_id: 'rs0', members: [{_id: 0, host: 'localhost:27017'}]})\"\n\n# Create Rocket.Chat database user\nmongo rocketchat --eval \"db.createUser({user: 'rocketchat', pwd: 'secure_password', roles: [{role: 'readWrite', db: 'rocketchat'}]})\"\n```\n\n#### Node.js and Rocket.Chat Setup\n```bash\n# Install Node.js 14.x\ncurl -fsSL https://deb.nodesource.com/setup_14.x | sudo -E bash -\nsudo apt install -y nodejs\n\n# Create rocketchat user\nsudo useradd -m -s /bin/bash rocketchat\n\n# Download and install Rocket.Chat\ncd /opt\nsudo wget https://releases.rocket.chat/latest/download -O rocket.chat.tgz\nsudo tar -xzf rocket.chat.tgz\nsudo mv bundle Rocket.Chat\nsudo chown -R rocketchat:rocketchat /opt/Rocket.Chat\n\n# Install dependencies\ncd /opt/Rocket.Chat/programs/server\nsudo -u rocketchat npm install\n\n# Set environment variables\nsudo tee /etc/systemd/system/rocketchat.service > /dev/null <<EOF\n[Unit]\nDescription=The Rocket.Chat server\nAfter=network.target remote-fs.target nss-lookup.target nginx.service mongod.service\nWants=network.target\n\n[Service]\nExecStart=/usr/local/bin/node /opt/Rocket.Chat/main.js\nStandardOutput=syslog\nStandardError=syslog\nSyslogIdentifier=rocketchat\nUser=rocketchat\nGroup=rocketchat\nEnvironment=MONGO_URL=mongodb://rocketchat:secure_password@localhost:27017/rocketchat?authSource=rocketchat&replicaSet=rs0\nEnvironment=MONGO_OPLOG_URL=mongodb://rocketchat:secure_password@localhost:27017/local?authSource=admin&replicaSet=rs0\nEnvironment=ROOT_URL=https://chat.example.com\nEnvironment=PORT=3000\n\n[Install]\nWantedBy=multi-user.target\nEOF\n\n# Enable and start service\nsudo systemctl daemon-reload\nsudo systemctl enable --now rocketchat\n```\n\n### Snap Installation (Easiest)\n```bash\n# Install Rocket.Chat via snap\nsudo snap install rocketchat-server\n\n# Configure\nsudo snap set rocketchat-server mongodb-url=\"mongodb://localhost:27017/parties\"\nsudo snap set rocketchat-server root-url=\"https://chat.example.com\"\nsudo snap set rocketchat-server port=3000\n\n# Start service\nsudo systemctl enable --now snap.rocketchat-server.rocketchat-server\n```\n\n## Configuration\n\n### NGINX Reverse Proxy\n```bash\n# Create NGINX configuration\nsudo tee /etc/nginx/sites-available/rocketchat > /dev/null <<EOF\n# Upstreams\nupstream backend {\n    server 127.0.0.1:3000;\n}\n\n# HTTPS Server\nserver {\n    listen 443 ssl http2;\n    server_name chat.example.com;\n\n    # SSL Configuration\n    ssl_certificate /etc/letsencrypt/live/chat.example.com/fullchain.pem;\n    ssl_certificate_key /etc/letsencrypt/live/chat.example.com/privkey.pem;\n    ssl_protocols TLSv1.2 TLSv1.3;\n    ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:ECDHE-RSA-AES256-GCM-SHA384;\n    ssl_prefer_server_ciphers off;\n\n    # Security headers\n    add_header X-Frame-Options \"SAMEORIGIN\";\n    add_header X-XSS-Protection \"1; mode=block\";\n    add_header X-Content-Type-Options \"nosniff\";\n    add_header Referrer-Policy \"no-referrer-when-downgrade\";\n    add_header Strict-Transport-Security \"max-age=31536000; includeSubDomains\" always;\n\n    # Proxy settings\n    location / {\n        proxy_pass http://backend;\n        proxy_http_version 1.1;\n        proxy_set_header Upgrade \\$http_upgrade;\n        proxy_set_header Connection \"upgrade\";\n        proxy_set_header Host \\$http_host;\n        proxy_set_header X-Real-IP \\$remote_addr;\n        proxy_set_header X-Forwarded-For \\$proxy_add_x_forwarded_for;\n        proxy_set_header X-Forwarded-Proto \\$scheme;\n        proxy_set_header X-Nginx-Proxy true;\n\n        proxy_redirect off;\n    }\n}\n\n# HTTP to HTTPS redirect\nserver {\n    listen 80;\n    server_name chat.example.com;\n    return 301 https://\\$server_name\\$request_uri;\n}\nEOF\n\n# Enable site\nsudo ln -s /etc/nginx/sites-available/rocketchat /etc/nginx/sites-enabled/\nsudo nginx -t && sudo systemctl restart nginx\n```\n\n### SSL Certificate Setup\n```bash\n# Install Certbot\nsudo apt install -y certbot python3-certbot-nginx\n\n# Obtain SSL certificate\nsudo certbot --nginx -d chat.example.com\n\n# Auto-renewal\nsudo crontab -e\n# Add: 0 12 * * * /usr/bin/certbot renew --quiet && systemctl reload nginx\n```\n\n### Database Optimization\n```bash\n# MongoDB tuning for Rocket.Chat\nsudo tee -a /etc/mongod.conf > /dev/null <<EOF\n\n# Performance tuning\nstorage:\n  wiredTiger:\n    engineConfig:\n      cacheSizeGB: 2\n\n# Replica set configuration\nreplication:\n  replSetName: rs0\n\n# Security\nsecurity:\n  authorization: enabled\n\n# Networking\nnet:\n  bindIp: 127.0.0.1\n  port: 27017\nEOF\n\nsudo systemctl restart mongod\n\n# Create indexes for better performance\nmongo rocketchat --eval \"\ndb.users.createIndex({'username': 1}, {background: true});\ndb.users.createIndex({'emails.address': 1}, {background: true});\ndb.rocketchat_room.createIndex({'name': 1}, {background: true});\ndb.rocketchat_message.createIndex({'rid': 1, 'ts': 1}, {background: true});\n\"\n```\n\n## Administration\n\n### User Management via API\n```bash\n# Get auth token (login as admin first)\ncurl -H \"Content-type:application/json\" \\\n     http://localhost:3000/api/v1/login \\\n     -d '{\"user\":\"admin\", \"password\":\"admin_password\"}'\n\n# Create user via API\ncurl -H \"Content-type:application/json\" \\\n     -H \"X-Auth-Token: AUTH_TOKEN\" \\\n     -H \"X-User-Id: USER_ID\" \\\n     http://localhost:3000/api/v1/users.create \\\n     -d '{\"name\":\"New User\", \"email\":\"user@example.com\", \"password\":\"user_password\", \"username\":\"newuser\"}'\n\n# Create channel\ncurl -H \"Content-type:application/json\" \\\n     -H \"X-Auth-Token: AUTH_TOKEN\" \\\n     -H \"X-User-Id: USER_ID\" \\\n     http://localhost:3000/api/v1/channels.create \\\n     -d '{\"name\":\"general\"}'\n```\n\n### Backup and Restore\n```bash\n# Create backup script\nsudo tee /usr/local/bin/rocketchat-backup.sh > /dev/null <<'EOF'\n#!/bin/bash\nBACKUP_DIR=\"/backup/rocketchat\"\nDATE=$(date +%Y%m%d_%H%M%S)\n\nmkdir -p ${BACKUP_DIR}/{database,uploads}\n\n# Backup MongoDB database\nmongodump --host localhost:27017 --db rocketchat --out ${BACKUP_DIR}/database/mongodb-${DATE}\ntar -czf ${BACKUP_DIR}/database/rocketchat-db-${DATE}.tar.gz -C ${BACKUP_DIR}/database mongodb-${DATE}\nrm -rf ${BACKUP_DIR}/database/mongodb-${DATE}\n\n# Backup uploads directory\ntar -czf ${BACKUP_DIR}/uploads/rocketchat-uploads-${DATE}.tar.gz -C /opt/Rocket.Chat uploads\n\n# Docker backup (if using Docker)\nif command -v docker &> /dev/null; then\n    docker-compose exec mongo mongodump --archive=/tmp/rocketchat-backup.archive --db=rocketchat\n    docker cp rocketchat_mongo_1:/tmp/rocketchat-backup.archive ${BACKUP_DIR}/database/rocketchat-docker-${DATE}.archive\nfi\n\n# Keep only last 7 backups\nfind ${BACKUP_DIR} -name \"rocketchat-*\" -type f -mtime +7 -delete\n\necho \"Backup completed: rocketchat-${DATE}\"\nEOF\n\nsudo chmod +x /usr/local/bin/rocketchat-backup.sh\n```\n\n### Performance Optimization\n```bash\n# Configure Node.js for production\nsudo tee -a /etc/systemd/system/rocketchat.service > /dev/null <<EOF\nEnvironment=NODE_ENV=production\nEnvironment=MONGO_URL=mongodb://localhost:27017/rocketchat?replicaSet=rs0\nEnvironment=MONGO_OPLOG_URL=mongodb://localhost:27017/local?replicaSet=rs0\nEnvironment=ROOT_URL=https://chat.example.com\nEnvironment=PORT=3000\nEnvironment=Accounts_AvatarResize=true\nEnvironment=INSTANCE_IP=127.0.0.1\nEOF\n\n# Restart service\nsudo systemctl daemon-reload\nsudo systemctl restart rocketchat\n```\n\n## Integrations\n\n### LDAP/Active Directory Integration\n```bash\n# Configure LDAP via environment variables\nsudo tee -a /etc/systemd/system/rocketchat.service > /dev/null <<EOF\nEnvironment=LDAP_ENABLE=true\nEnvironment=LDAP_HOST=ldap.example.com\nEnvironment=LDAP_PORT=389\nEnvironment=LDAP_ENCRYPTION=false\nEnvironment=LDAP_AUTHENTICATION=true\nEnvironment=LDAP_AUTHENTICATION_UserDN=cn=admin,dc=example,dc=com\nEnvironment=LDAP_AUTHENTICATION_Password=ldap_password\nEnvironment=LDAP_USER_SEARCH_FILTER=(objectclass=person)\nEnvironment=LDAP_USER_SEARCH_SCOPE=sub\nEnvironment=LDAP_USER_SEARCH_FIELD=sAMAccountName\nEnvironment=LDAP_SEARCH_PAGE_SIZE=250\nEnvironment=LDAP_SEARCH_SIZE_LIMIT=1000\nEOF\n\nsudo systemctl daemon-reload\nsudo systemctl restart rocketchat\n```\n\n### Webhook Integrations\n```bash\n# Create incoming webhook\ncurl -H \"Content-type:application/json\" \\\n     -H \"X-Auth-Token: AUTH_TOKEN\" \\\n     -H \"X-User-Id: USER_ID\" \\\n     http://localhost:3000/api/v1/integrations.create \\\n     -d '{\n       \"type\": \"webhook-incoming\",\n       \"name\": \"webhook-name\",\n       \"enabled\": true,\n       \"username\": \"webhook\",\n       \"channel\": \"#general\"\n     }'\n\n# Test webhook\ncurl -X POST \\\n     -H \"Content-type:application/json\" \\\n     https://chat.example.com/hooks/WEBHOOK_TOKEN \\\n     -d '{\"text\":\"Hello from external system!\"}'\n```\n\n### Email Configuration\n```bash\n# Configure SMTP settings via environment variables\nsudo tee -a /etc/systemd/system/rocketchat.service > /dev/null <<EOF\nEnvironment=MAIL_URL=smtps://smtp.gmail.com:465\nEnvironment=MAIL_FROM=noreply@example.com\nEnvironment=SMTP_Username=your-email@gmail.com\nEnvironment=SMTP_Password=your-app-password\nEnvironment=SMTP_Host=smtp.gmail.com\nEnvironment=SMTP_Port=587\nEnvironment=SMTP_IgnoreTLS=false\nEOF\n\nsudo systemctl daemon-reload\nsudo systemctl restart rocketchat\n```\n\n## Security Configuration\n\n### Firewall Setup\n```bash\n# UFW (Ubuntu/Debian)\nsudo ufw allow 3000/tcp   # Rocket.Chat\nsudo ufw allow 27017/tcp  # MongoDB (restrict to localhost in production)\nsudo ufw allow 'Nginx Full'\nsudo ufw enable\n\n# Firewalld (RHEL/CentOS)\nsudo firewall-cmd --permanent --add-port=3000/tcp\nsudo firewall-cmd --permanent --add-service=http\nsudo firewall-cmd --permanent --add-service=https\nsudo firewall-cmd --reload\n```\n\n### Security Hardening\n```bash\n# MongoDB security\nsudo tee -a /etc/mongod.conf > /dev/null <<EOF\n\n# Enable authentication\nsecurity:\n  authorization: enabled\n\n# Bind to localhost only\nnet:\n  bindIp: 127.0.0.1\nEOF\n\n# Create MongoDB admin user\nmongo admin --eval \"\ndb.createUser({\n  user: 'admin',\n  pwd: 'secure_password',\n  roles: [{role: 'userAdminAnyDatabase', db: 'admin'}]\n});\n\ndb.createUser({\n  user: 'rocketchat',\n  pwd: 'rocketchat_password',\n  roles: [{role: 'readWrite', db: 'rocketchat'}]\n});\n\"\n\nsudo systemctl restart mongod\n\n# Update Rocket.Chat MongoDB URL with authentication\nsudo sed -i 's|MONGO_URL=.*|MONGO_URL=mongodb://rocketchat:rocketchat_password@localhost:27017/rocketchat?authSource=rocketchat&replicaSet=rs0|' /etc/systemd/system/rocketchat.service\n```\n\n## High Availability Setup\n\n### Load Balancer Configuration\n```bash\n# HAProxy configuration for Rocket.Chat cluster\nsudo tee -a /etc/haproxy/haproxy.cfg > /dev/null <<EOF\n\n# Rocket.Chat frontend\nfrontend rocketchat_frontend\n    bind *:80\n    bind *:443 ssl crt /etc/ssl/certs/chat.example.com.pem\n    redirect scheme https if !{ ssl_fc }\n    default_backend rocketchat_servers\n\n# Rocket.Chat backend\nbackend rocketchat_servers\n    balance roundrobin\n    option httpchk GET /api/info\n    http-check expect status 200\n    \n    # WebSocket support\n    timeout tunnel 3600s\n    \n    server chat1 192.168.1.10:3000 check\n    server chat2 192.168.1.11:3000 check\n    server chat3 192.168.1.12:3000 check\nEOF\n\nsudo systemctl restart haproxy\n```\n\n### MongoDB Replica Set (Multi-node)\n```bash\n# On each MongoDB node, configure replica set\nsudo tee -a /etc/mongod.conf > /dev/null <<EOF\nreplication:\n  replSetName: rs0\n  \nnet:\n  bindIp: 0.0.0.0  # Allow connections from other nodes\nEOF\n\nsudo systemctl restart mongod\n\n# Initialize replica set (run on primary node only)\nmongo --eval \"\nrs.initiate({\n  _id: 'rs0',\n  members: [\n    {_id: 0, host: 'mongo1.example.com:27017', priority: 2},\n    {_id: 1, host: 'mongo2.example.com:27017', priority: 1},\n    {_id: 2, host: 'mongo3.example.com:27017', priority: 1, arbiterOnly: true}\n  ]\n});\n\"\n\n# Update Rocket.Chat MongoDB URL for replica set\nEnvironment=MONGO_URL=mongodb://mongo1.example.com:27017,mongo2.example.com:27017,mongo3.example.com:27017/rocketchat?replicaSet=rs0\n```\n\n## Verification\n\n```bash\n# Check service status\nsudo systemctl status rocketchat\nsudo systemctl status mongod\n\n# Docker verification\ndocker-compose ps\ndocker-compose logs rocketchat\n\n# Test web interface\ncurl -I http://localhost:3000\n\n# Check MongoDB connection\nmongo --eval \"db.runCommand('ping')\"\n\n# Test API endpoint\ncurl http://localhost:3000/api/info\n\n# Check logs\nsudo journalctl -u rocketchat -f\ndocker-compose logs -f  # For Docker installation\n\n# Check memory usage\nps aux | grep -E \"(rocket|mongo)\"\ndocker stats  # For Docker installation\n\n# Test webhooks\ncurl -X POST https://chat.example.com/hooks/YOUR_WEBHOOK_TOKEN \\\n     -H \"Content-type:application/json\" \\\n     -d '{\"text\":\"Test message from API\"}'\n```\n\n## Maintenance and Updates\n\n### Update Rocket.Chat\n```bash\n# Manual installation update\ncd /opt\nsudo wget https://releases.rocket.chat/latest/download -O rocket.chat.tgz\nsudo systemctl stop rocketchat\nsudo mv Rocket.Chat Rocket.Chat.backup\nsudo tar -xzf rocket.chat.tgz\nsudo mv bundle Rocket.Chat\nsudo chown -R rocketchat:rocketchat /opt/Rocket.Chat\ncd /opt/Rocket.Chat/programs/server\nsudo -u rocketchat npm install\nsudo systemctl start rocketchat\n\n# Docker update\ncd ~/rocketchat\ndocker-compose pull\ndocker-compose up -d\n\n# Snap update\nsudo snap refresh rocketchat-server\n```\n\n### Database Maintenance\n```bash\n# MongoDB maintenance commands\nmongo rocketchat --eval \"db.stats()\"\nmongo rocketchat --eval \"db.runCommand({compact: 'rocketchat_message'})\"\n\n# Clean up old messages (optional)\nmongo rocketchat --eval \"\nvar cutoff = new Date();\ncutoff.setDate(cutoff.getDate() - 90);  // Keep 90 days\ndb.rocketchat_message.deleteMany({'ts': {\\$lt: cutoff}});\n\"\n\n# Repair database if needed\nmongod --repair --dbpath /var/lib/mongodb\n```\n\n## Troubleshooting\n\n```bash\n# Check Rocket.Chat logs\nsudo journalctl -u rocketchat -f\ndocker-compose logs -f rocketchat  # Docker\n\n# Check MongoDB logs\nsudo journalctl -u mongod -f\ndocker-compose logs -f mongo  # Docker\n\n# Test MongoDB replica set status\nmongo --eval \"rs.status()\"\n\n# Check Node.js processes\nps aux | grep node\n\n# Test database connectivity\nmongo rocketchat --eval \"db.runCommand('ping')\"\n\n# Check disk space\ndf -h /opt/Rocket.Chat\ndf -h /var/lib/mongodb\n\n# Memory usage analysis\nfree -h\ntop -p $(pgrep -d',' node)\n\n# Network connectivity test\ntelnet localhost 3000\ntelnet localhost 27017\n\n# Check environment variables\nsudo systemctl show rocketchat --property=Environment\n\n# Reset admin password (emergency)\nmongo rocketchat --eval \"\ndb.users.update(\n  {username: 'admin'},\n  {\\$set: {'services.password.bcrypt': '\\$2a\\$10\\$n9CM8OgInDlwpvjLKLPML.eizXIzLlRtgCh3GRLafOdR9ldAUh/KG'}}  // password: admin\n);\n\"\n```\n\n## Additional Resources\n\n- [Official Documentation](https://docs.rocket.chat/)\n- [Administrator Guide](https://docs.rocket.chat/setup-and-configure/environment-configuration)\n- [API Documentation](https://developer.rocket.chat/reference/api)\n- [Community Forum](https://forums.rocket.chat/)\n- [GitHub Repository](https://github.com/RocketChat/Rocket.Chat)\n\n---\n\n**Note:** This guide is part of the [HowToMgr](https://howtomgr.github.io) collection.","readmeHtml":"<h1 id=\"rocketchat-installation-guide\" class=\"mobile-header\">Rocket.Chat Installation Guide</h1>\n<p class=\"mobile-paragraph\">Open-source team communication platform with features like real-time messaging, video calls, file sharing, and extensive integrations.</p>\n<h2 id=\"prerequisites\" class=\"mobile-header\">Prerequisites</h2>\n<li class=\"mobile-list-item\">Linux system (Ubuntu/Debian, RHEL/CentOS, or compatible)</li>\n<li class=\"mobile-list-item\">4GB RAM minimum, 8GB recommended</li>\n<li class=\"mobile-list-item\">MongoDB 4.4+ or 5.0+</li>\n<li class=\"mobile-list-item\">Node.js 14.x</li>\n<li class=\"mobile-list-item\">Domain name (for SSL setup)</li>\n<h2 id=\"installation\" class=\"mobile-header\">Installation</h2>\n<h3 id=\"using-docker-compose-recommended\" class=\"mobile-header\">Using Docker Compose (Recommended)</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Create project directory\nmkdir -p ~/rocketchat &amp;&amp; cd ~/rocketchat\n\n# Create docker-compose.yml\ncat &gt; docker-compose.yml &lt;&lt;EOF\nversion: &#039;3.8&#039;\n\nservices:\n  rocketchat:\n    image: registry.rocket.chat/rocketchat/rocket.chat:latest\n    restart: unless-stopped\n    environment:\n      MONGO_URL: &quot;mongodb://mongo:27017/rocketchat?replicaSet=rs0&quot;\n      MONGO_OPLOG_URL: &quot;mongodb://mongo:27017/local?replicaSet=rs0&quot;\n      ROOT_URL: &quot;https://chat.example.com&quot;\n      PORT: 3000\n      DEPLOY_METHOD: docker\n      REG_TOKEN: \\${REG_TOKEN}\n    depends_on:\n      - mongo\n    ports:\n      - &quot;3000:3000&quot;\n    volumes:\n      - ./uploads:/app/uploads\n    networks:\n      - rocketchat\n\n  mongo:\n    image: docker.io/bitnami/mongodb:5.0\n    restart: unless-stopped\n    environment:\n      MONGODB_REPLICA_SET_MODE: primary\n      MONGODB_REPLICA_SET_NAME: rs0\n      MONGODB_PORT_NUMBER: 27017\n      MONGODB_INITIAL_PRIMARY_HOST: mongo\n      MONGODB_INITIAL_PRIMARY_PORT_NUMBER: 27017\n      MONGODB_ADVERTISED_HOSTNAME: mongo\n      MONGODB_ENABLE_JOURNAL: true\n      ALLOW_EMPTY_PASSWORD: yes\n    volumes:\n      - mongodb_data:/bitnami/mongodb\n    networks:\n      - rocketchat\n\n  mongo-express:\n    image: mongo-express\n    restart: unless-stopped\n    environment:\n      ME_CONFIG_MONGODB_URL: &quot;mongodb://mongo:27017/&quot;\n      ME_CONFIG_BASICAUTH_USERNAME: admin\n      ME_CONFIG_BASICAUTH_PASSWORD: pass\n    ports:\n      - &quot;8081:8081&quot;\n    depends_on:\n      - mongo\n    networks:\n      - rocketchat\n\nnetworks:\n  rocketchat:\n    driver: bridge\n\nvolumes:\n  mongodb_data:\nEOF\n\n# Start services\ndocker-compose up -d\n\n# Check logs\ndocker-compose logs -f rocketchat</code></pre>\n      </div>\n    </div>\n<h3 id=\"manual-installation-ubuntudebian\" class=\"mobile-header\">Manual Installation (Ubuntu/Debian)</h3>\n<p class=\"mobile-paragraph\">#### MongoDB Setup</p>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Install MongoDB\nwget -qO - https://www.mongodb.org/static/pgp/server-5.0.asc | sudo apt-key add -\necho &quot;deb [ arch=amd64,arm64 ] https://repo.mongodb.org/apt/ubuntu focal/mongodb-org/5.0 multiverse&quot; | sudo tee /etc/apt/sources.list.d/mongodb-org-5.0.list\n\nsudo apt update\nsudo apt install -y mongodb-org\n\n# Configure MongoDB as replica set\nsudo systemctl enable --now mongod\n\n# Initialize replica set\nmongo --eval &quot;rs.initiate({_id: &#039;rs0&#039;, members: [{_id: 0, host: &#039;localhost:27017&#039;}]})&quot;\n\n# Create Rocket.Chat database user\nmongo rocketchat --eval &quot;db.createUser({user: &#039;rocketchat&#039;, pwd: &#039;secure_password&#039;, roles: [{role: &#039;readWrite&#039;, db: &#039;rocketchat&#039;}]})&quot;</code></pre>\n      </div>\n    </div>\n<p class=\"mobile-paragraph\">#### Node.js and Rocket.Chat Setup</p>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Install Node.js 14.x\ncurl -fsSL https://deb.nodesource.com/setup_14.x | sudo -E bash -\nsudo apt install -y nodejs\n\n# Create rocketchat user\nsudo useradd -m -s /bin/bash rocketchat\n\n# Download and install Rocket.Chat\ncd /opt\nsudo wget https://releases.rocket.chat/latest/download -O rocket.chat.tgz\nsudo tar -xzf rocket.chat.tgz\nsudo mv bundle Rocket.Chat\nsudo chown -R rocketchat:rocketchat /opt/Rocket.Chat\n\n# Install dependencies\ncd /opt/Rocket.Chat/programs/server\nsudo -u rocketchat npm install\n\n# Set environment variables\nsudo tee /etc/systemd/system/rocketchat.service &gt; /dev/null &lt;&lt;EOF\n[Unit]\nDescription=The Rocket.Chat server\nAfter=network.target remote-fs.target nss-lookup.target nginx.service mongod.service\nWants=network.target\n\n[Service]\nExecStart=/usr/local/bin/node /opt/Rocket.Chat/main.js\nStandardOutput=syslog\nStandardError=syslog\nSyslogIdentifier=rocketchat\nUser=rocketchat\nGroup=rocketchat\nEnvironment=MONGO_URL=mongodb://rocketchat:secure_password@localhost:27017/rocketchat?authSource=rocketchat&amp;replicaSet=rs0\nEnvironment=MONGO_OPLOG_URL=mongodb://rocketchat:secure_password@localhost:27017/local?authSource=admin&amp;replicaSet=rs0\nEnvironment=ROOT_URL=https://chat.example.com\nEnvironment=PORT=3000\n\n[Install]\nWantedBy=multi-user.target\nEOF\n\n# Enable and start service\nsudo systemctl daemon-reload\nsudo systemctl enable --now rocketchat</code></pre>\n      </div>\n    </div>\n<h3 id=\"snap-installation-easiest\" class=\"mobile-header\">Snap Installation (Easiest)</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Install Rocket.Chat via snap\nsudo snap install rocketchat-server\n\n# Configure\nsudo snap set rocketchat-server mongodb-url=&quot;mongodb://localhost:27017/parties&quot;\nsudo snap set rocketchat-server root-url=&quot;https://chat.example.com&quot;\nsudo snap set rocketchat-server port=3000\n\n# Start service\nsudo systemctl enable --now snap.rocketchat-server.rocketchat-server</code></pre>\n      </div>\n    </div>\n<h2 id=\"configuration\" class=\"mobile-header\">Configuration</h2>\n<h3 id=\"nginx-reverse-proxy\" class=\"mobile-header\">NGINX Reverse Proxy</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Create NGINX configuration\nsudo tee /etc/nginx/sites-available/rocketchat &gt; /dev/null &lt;&lt;EOF\n# Upstreams\nupstream backend {\n    server 127.0.0.1:3000;\n}\n\n# HTTPS Server\nserver {\n    listen 443 ssl http2;\n    server_name chat.example.com;\n\n    # SSL Configuration\n    ssl_certificate /etc/letsencrypt/live/chat.example.com/fullchain.pem;\n    ssl_certificate_key /etc/letsencrypt/live/chat.example.com/privkey.pem;\n    ssl_protocols TLSv1.2 TLSv1.3;\n    ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:ECDHE-RSA-AES256-GCM-SHA384;\n    ssl_prefer_server_ciphers off;\n\n    # Security headers\n    add_header X-Frame-Options &quot;SAMEORIGIN&quot;;\n    add_header X-XSS-Protection &quot;1; mode=block&quot;;\n    add_header X-Content-Type-Options &quot;nosniff&quot;;\n    add_header Referrer-Policy &quot;no-referrer-when-downgrade&quot;;\n    add_header Strict-Transport-Security &quot;max-age=31536000; includeSubDomains&quot; always;\n\n    # Proxy settings\n    location / {\n        proxy_pass http://backend;\n        proxy_http_version 1.1;\n        proxy_set_header Upgrade \\$http_upgrade;\n        proxy_set_header Connection &quot;upgrade&quot;;\n        proxy_set_header Host \\$http_host;\n        proxy_set_header X-Real-IP \\$remote_addr;\n        proxy_set_header X-Forwarded-For \\$proxy_add_x_forwarded_for;\n        proxy_set_header X-Forwarded-Proto \\$scheme;\n        proxy_set_header X-Nginx-Proxy true;\n\n        proxy_redirect off;\n    }\n}\n\n# HTTP to HTTPS redirect\nserver {\n    listen 80;\n    server_name chat.example.com;\n    return 301 https://\\$server_name\\$request_uri;\n}\nEOF\n\n# Enable site\nsudo ln -s /etc/nginx/sites-available/rocketchat /etc/nginx/sites-enabled/\nsudo nginx -t &amp;&amp; sudo systemctl restart nginx</code></pre>\n      </div>\n    </div>\n<h3 id=\"ssl-certificate-setup\" class=\"mobile-header\">SSL Certificate Setup</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Install Certbot\nsudo apt install -y certbot python3-certbot-nginx\n\n# Obtain SSL certificate\nsudo certbot --nginx -d chat.example.com\n\n# Auto-renewal\nsudo crontab -e\n# Add: 0 12 * * * /usr/bin/certbot renew --quiet &amp;&amp; systemctl reload nginx</code></pre>\n      </div>\n    </div>\n<h3 id=\"database-optimization\" class=\"mobile-header\">Database Optimization</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># MongoDB tuning for Rocket.Chat\nsudo tee -a /etc/mongod.conf &gt; /dev/null &lt;&lt;EOF\n\n# Performance tuning\nstorage:\n  wiredTiger:\n    engineConfig:\n      cacheSizeGB: 2\n\n# Replica set configuration\nreplication:\n  replSetName: rs0\n\n# Security\nsecurity:\n  authorization: enabled\n\n# Networking\nnet:\n  bindIp: 127.0.0.1\n  port: 27017\nEOF\n\nsudo systemctl restart mongod\n\n# Create indexes for better performance\nmongo rocketchat --eval &quot;\ndb.users.createIndex({&#039;username&#039;: 1}, {background: true});\ndb.users.createIndex({&#039;emails.address&#039;: 1}, {background: true});\ndb.rocketchat_room.createIndex({&#039;name&#039;: 1}, {background: true});\ndb.rocketchat_message.createIndex({&#039;rid&#039;: 1, &#039;ts&#039;: 1}, {background: true});\n&quot;</code></pre>\n      </div>\n    </div>\n<h2 id=\"administration\" class=\"mobile-header\">Administration</h2>\n<h3 id=\"user-management-via-api\" class=\"mobile-header\">User Management via API</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Get auth token (login as admin first)\ncurl -H &quot;Content-type:application/json&quot; \\\n     http://localhost:3000/api/v1/login \\\n     -d &#039;{&quot;user&quot;:&quot;admin&quot;, &quot;password&quot;:&quot;admin_password&quot;}&#039;\n\n# Create user via API\ncurl -H &quot;Content-type:application/json&quot; \\\n     -H &quot;X-Auth-Token: AUTH_TOKEN&quot; \\\n     -H &quot;X-User-Id: USER_ID&quot; \\\n     http://localhost:3000/api/v1/users.create \\\n     -d &#039;{&quot;name&quot;:&quot;New User&quot;, &quot;email&quot;:&quot;user@example.com&quot;, &quot;password&quot;:&quot;user_password&quot;, &quot;username&quot;:&quot;newuser&quot;}&#039;\n\n# Create channel\ncurl -H &quot;Content-type:application/json&quot; \\\n     -H &quot;X-Auth-Token: AUTH_TOKEN&quot; \\\n     -H &quot;X-User-Id: USER_ID&quot; \\\n     http://localhost:3000/api/v1/channels.create \\\n     -d &#039;{&quot;name&quot;:&quot;general&quot;}&#039;</code></pre>\n      </div>\n    </div>\n<h3 id=\"backup-and-restore\" class=\"mobile-header\">Backup and Restore</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Create backup script\nsudo tee /usr/local/bin/rocketchat-backup.sh &gt; /dev/null &lt;&lt;&#039;EOF&#039;\n#!/bin/bash\nBACKUP_DIR=&quot;/backup/rocketchat&quot;\nDATE=$(date +%Y%m%d_%H%M%S)\n\nmkdir -p ${BACKUP_DIR}/{database,uploads}\n\n# Backup MongoDB database\nmongodump --host localhost:27017 --db rocketchat --out ${BACKUP_DIR}/database/mongodb-${DATE}\ntar -czf ${BACKUP_DIR}/database/rocketchat-db-${DATE}.tar.gz -C ${BACKUP_DIR}/database mongodb-${DATE}\nrm -rf ${BACKUP_DIR}/database/mongodb-${DATE}\n\n# Backup uploads directory\ntar -czf ${BACKUP_DIR}/uploads/rocketchat-uploads-${DATE}.tar.gz -C /opt/Rocket.Chat uploads\n\n# Docker backup (if using Docker)\nif command -v docker &amp;&gt; /dev/null; then\n    docker-compose exec mongo mongodump --archive=/tmp/rocketchat-backup.archive --db=rocketchat\n    docker cp rocketchat_mongo_1:/tmp/rocketchat-backup.archive ${BACKUP_DIR}/database/rocketchat-docker-${DATE}.archive\nfi\n\n# Keep only last 7 backups\nfind ${BACKUP_DIR} -name &quot;rocketchat-*&quot; -type f -mtime +7 -delete\n\necho &quot;Backup completed: rocketchat-${DATE}&quot;\nEOF\n\nsudo chmod +x /usr/local/bin/rocketchat-backup.sh</code></pre>\n      </div>\n    </div>\n<h3 id=\"performance-optimization\" class=\"mobile-header\">Performance Optimization</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Configure Node.js for production\nsudo tee -a /etc/systemd/system/rocketchat.service &gt; /dev/null &lt;&lt;EOF\nEnvironment=NODE_ENV=production\nEnvironment=MONGO_URL=mongodb://localhost:27017/rocketchat?replicaSet=rs0\nEnvironment=MONGO_OPLOG_URL=mongodb://localhost:27017/local?replicaSet=rs0\nEnvironment=ROOT_URL=https://chat.example.com\nEnvironment=PORT=3000\nEnvironment=Accounts_AvatarResize=true\nEnvironment=INSTANCE_IP=127.0.0.1\nEOF\n\n# Restart service\nsudo systemctl daemon-reload\nsudo systemctl restart rocketchat</code></pre>\n      </div>\n    </div>\n<h2 id=\"integrations\" class=\"mobile-header\">Integrations</h2>\n<h3 id=\"ldapactive-directory-integration\" class=\"mobile-header\">LDAP/Active Directory Integration</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Configure LDAP via environment variables\nsudo tee -a /etc/systemd/system/rocketchat.service &gt; /dev/null &lt;&lt;EOF\nEnvironment=LDAP_ENABLE=true\nEnvironment=LDAP_HOST=ldap.example.com\nEnvironment=LDAP_PORT=389\nEnvironment=LDAP_ENCRYPTION=false\nEnvironment=LDAP_AUTHENTICATION=true\nEnvironment=LDAP_AUTHENTICATION_UserDN=cn=admin,dc=example,dc=com\nEnvironment=LDAP_AUTHENTICATION_Password=ldap_password\nEnvironment=LDAP_USER_SEARCH_FILTER=(objectclass=person)\nEnvironment=LDAP_USER_SEARCH_SCOPE=sub\nEnvironment=LDAP_USER_SEARCH_FIELD=sAMAccountName\nEnvironment=LDAP_SEARCH_PAGE_SIZE=250\nEnvironment=LDAP_SEARCH_SIZE_LIMIT=1000\nEOF\n\nsudo systemctl daemon-reload\nsudo systemctl restart rocketchat</code></pre>\n      </div>\n    </div>\n<h3 id=\"webhook-integrations\" class=\"mobile-header\">Webhook Integrations</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Create incoming webhook\ncurl -H &quot;Content-type:application/json&quot; \\\n     -H &quot;X-Auth-Token: AUTH_TOKEN&quot; \\\n     -H &quot;X-User-Id: USER_ID&quot; \\\n     http://localhost:3000/api/v1/integrations.create \\\n     -d &#039;{\n       &quot;type&quot;: &quot;webhook-incoming&quot;,\n       &quot;name&quot;: &quot;webhook-name&quot;,\n       &quot;enabled&quot;: true,\n       &quot;username&quot;: &quot;webhook&quot;,\n       &quot;channel&quot;: &quot;#general&quot;\n     }&#039;\n\n# Test webhook\ncurl -X POST \\\n     -H &quot;Content-type:application/json&quot; \\\n     https://chat.example.com/hooks/WEBHOOK_TOKEN \\\n     -d &#039;{&quot;text&quot;:&quot;Hello from external system!&quot;}&#039;</code></pre>\n      </div>\n    </div>\n<h3 id=\"email-configuration\" class=\"mobile-header\">Email Configuration</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Configure SMTP settings via environment variables\nsudo tee -a /etc/systemd/system/rocketchat.service &gt; /dev/null &lt;&lt;EOF\nEnvironment=MAIL_URL=smtps://smtp.gmail.com:465\nEnvironment=MAIL_FROM=noreply@example.com\nEnvironment=SMTP_Username=your-email@gmail.com\nEnvironment=SMTP_Password=your-app-password\nEnvironment=SMTP_Host=smtp.gmail.com\nEnvironment=SMTP_Port=587\nEnvironment=SMTP_IgnoreTLS=false\nEOF\n\nsudo systemctl daemon-reload\nsudo systemctl restart rocketchat</code></pre>\n      </div>\n    </div>\n<h2 id=\"security-configuration\" class=\"mobile-header\">Security Configuration</h2>\n<h3 id=\"firewall-setup\" class=\"mobile-header\">Firewall Setup</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># UFW (Ubuntu/Debian)\nsudo ufw allow 3000/tcp   # Rocket.Chat\nsudo ufw allow 27017/tcp  # MongoDB (restrict to localhost in production)\nsudo ufw allow &#039;Nginx Full&#039;\nsudo ufw enable\n\n# Firewalld (RHEL/CentOS)\nsudo firewall-cmd --permanent --add-port=3000/tcp\nsudo firewall-cmd --permanent --add-service=http\nsudo firewall-cmd --permanent --add-service=https\nsudo firewall-cmd --reload</code></pre>\n      </div>\n    </div>\n<h3 id=\"security-hardening\" class=\"mobile-header\">Security Hardening</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># MongoDB security\nsudo tee -a /etc/mongod.conf &gt; /dev/null &lt;&lt;EOF\n\n# Enable authentication\nsecurity:\n  authorization: enabled\n\n# Bind to localhost only\nnet:\n  bindIp: 127.0.0.1\nEOF\n\n# Create MongoDB admin user\nmongo admin --eval &quot;\ndb.createUser({\n  user: &#039;admin&#039;,\n  pwd: &#039;secure_password&#039;,\n  roles: [{role: &#039;userAdminAnyDatabase&#039;, db: &#039;admin&#039;}]\n});\n\ndb.createUser({\n  user: &#039;rocketchat&#039;,\n  pwd: &#039;rocketchat_password&#039;,\n  roles: [{role: &#039;readWrite&#039;, db: &#039;rocketchat&#039;}]\n});\n&quot;\n\nsudo systemctl restart mongod\n\n# Update Rocket.Chat MongoDB URL with authentication\nsudo sed -i &#039;s|MONGO_URL=.*|MONGO_URL=mongodb://rocketchat:rocketchat_password@localhost:27017/rocketchat?authSource=rocketchat&amp;replicaSet=rs0|&#039; /etc/systemd/system/rocketchat.service</code></pre>\n      </div>\n    </div>\n<h2 id=\"high-availability-setup\" class=\"mobile-header\">High Availability Setup</h2>\n<h3 id=\"load-balancer-configuration\" class=\"mobile-header\">Load Balancer Configuration</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># HAProxy configuration for Rocket.Chat cluster\nsudo tee -a /etc/haproxy/haproxy.cfg &gt; /dev/null &lt;&lt;EOF\n\n# Rocket.Chat frontend\nfrontend rocketchat_frontend\n    bind *:80\n    bind *:443 ssl crt /etc/ssl/certs/chat.example.com.pem\n    redirect scheme https if !{ ssl_fc }\n    default_backend rocketchat_servers\n\n# Rocket.Chat backend\nbackend rocketchat_servers\n    balance roundrobin\n    option httpchk GET /api/info\n    http-check expect status 200\n    \n    # WebSocket support\n    timeout tunnel 3600s\n    \n    server chat1 192.168.1.10:3000 check\n    server chat2 192.168.1.11:3000 check\n    server chat3 192.168.1.12:3000 check\nEOF\n\nsudo systemctl restart haproxy</code></pre>\n      </div>\n    </div>\n<h3 id=\"mongodb-replica-set-multi-node\" class=\"mobile-header\">MongoDB Replica Set (Multi-node)</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># On each MongoDB node, configure replica set\nsudo tee -a /etc/mongod.conf &gt; /dev/null &lt;&lt;EOF\nreplication:\n  replSetName: rs0\n  \nnet:\n  bindIp: 0.0.0.0  # Allow connections from other nodes\nEOF\n\nsudo systemctl restart mongod\n\n# Initialize replica set (run on primary node only)\nmongo --eval &quot;\nrs.initiate({\n  _id: &#039;rs0&#039;,\n  members: [\n    {_id: 0, host: &#039;mongo1.example.com:27017&#039;, priority: 2},\n    {_id: 1, host: &#039;mongo2.example.com:27017&#039;, priority: 1},\n    {_id: 2, host: &#039;mongo3.example.com:27017&#039;, priority: 1, arbiterOnly: true}\n  ]\n});\n&quot;\n\n# Update Rocket.Chat MongoDB URL for replica set\nEnvironment=MONGO_URL=mongodb://mongo1.example.com:27017,mongo2.example.com:27017,mongo3.example.com:27017/rocketchat?replicaSet=rs0</code></pre>\n      </div>\n    </div>\n<h2 id=\"verification\" class=\"mobile-header\">Verification</h2>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Check service status\nsudo systemctl status rocketchat\nsudo systemctl status mongod\n\n# Docker verification\ndocker-compose ps\ndocker-compose logs rocketchat\n\n# Test web interface\ncurl -I http://localhost:3000\n\n# Check MongoDB connection\nmongo --eval &quot;db.runCommand(&#039;ping&#039;)&quot;\n\n# Test API endpoint\ncurl http://localhost:3000/api/info\n\n# Check logs\nsudo journalctl -u rocketchat -f\ndocker-compose logs -f  # For Docker installation\n\n# Check memory usage\nps aux | grep -E &quot;(rocket|mongo)&quot;\ndocker stats  # For Docker installation\n\n# Test webhooks\ncurl -X POST https://chat.example.com/hooks/YOUR_WEBHOOK_TOKEN \\\n     -H &quot;Content-type:application/json&quot; \\\n     -d &#039;{&quot;text&quot;:&quot;Test message from API&quot;}&#039;</code></pre>\n      </div>\n    </div>\n<h2 id=\"maintenance-and-updates\" class=\"mobile-header\">Maintenance and Updates</h2>\n<h3 id=\"update-rocketchat\" class=\"mobile-header\">Update Rocket.Chat</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Manual installation update\ncd /opt\nsudo wget https://releases.rocket.chat/latest/download -O rocket.chat.tgz\nsudo systemctl stop rocketchat\nsudo mv Rocket.Chat Rocket.Chat.backup\nsudo tar -xzf rocket.chat.tgz\nsudo mv bundle Rocket.Chat\nsudo chown -R rocketchat:rocketchat /opt/Rocket.Chat\ncd /opt/Rocket.Chat/programs/server\nsudo -u rocketchat npm install\nsudo systemctl start rocketchat\n\n# Docker update\ncd ~/rocketchat\ndocker-compose pull\ndocker-compose up -d\n\n# Snap update\nsudo snap refresh rocketchat-server</code></pre>\n      </div>\n    </div>\n<h3 id=\"database-maintenance\" class=\"mobile-header\">Database Maintenance</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># MongoDB maintenance commands\nmongo rocketchat --eval &quot;db.stats()&quot;\nmongo rocketchat --eval &quot;db.runCommand({compact: &#039;rocketchat_message&#039;})&quot;\n\n# Clean up old messages (optional)\nmongo rocketchat --eval &quot;\nvar cutoff = new Date();\ncutoff.setDate(cutoff.getDate() - 90);  // Keep 90 days\ndb.rocketchat_message.deleteMany({&#039;ts&#039;: {\\$lt: cutoff}});\n&quot;\n\n# Repair database if needed\nmongod --repair --dbpath /var/lib/mongodb</code></pre>\n      </div>\n    </div>\n<h2 id=\"troubleshooting\" class=\"mobile-header\">Troubleshooting</h2>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Check Rocket.Chat logs\nsudo journalctl -u rocketchat -f\ndocker-compose logs -f rocketchat  # Docker\n\n# Check MongoDB logs\nsudo journalctl -u mongod -f\ndocker-compose logs -f mongo  # Docker\n\n# Test MongoDB replica set status\nmongo --eval &quot;rs.status()&quot;\n\n# Check Node.js processes\nps aux | grep node\n\n# Test database connectivity\nmongo rocketchat --eval &quot;db.runCommand(&#039;ping&#039;)&quot;\n\n# Check disk space\ndf -h /opt/Rocket.Chat\ndf -h /var/lib/mongodb\n\n# Memory usage analysis\nfree -h\ntop -p $(pgrep -d&#039;,&#039; node)\n\n# Network connectivity test\ntelnet localhost 3000\ntelnet localhost 27017\n\n# Check environment variables\nsudo systemctl show rocketchat --property=Environment\n\n# Reset admin password (emergency)\nmongo rocketchat --eval &quot;\ndb.users.update(\n  {username: &#039;admin&#039;},\n  {\\$set: {&#039;services.password.bcrypt&#039;: &#039;\\$2a\\$10\\$n9CM8OgInDlwpvjLKLPML.eizXIzLlRtgCh3GRLafOdR9ldAUh/KG&#039;}}  // password: admin\n);\n&quot;</code></pre>\n      </div>\n    </div>\n<h2 id=\"additional-resources\" class=\"mobile-header\">Additional Resources</h2>\n<li class=\"mobile-list-item\"><a href=\"https://docs.rocket.chat/\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">Official Documentation</a></li>\n<li class=\"mobile-list-item\"><a href=\"https://docs.rocket.chat/setup-and-configure/environment-configuration\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">Administrator Guide</a></li>\n<li class=\"mobile-list-item\"><a href=\"https://developer.rocket.chat/reference/api\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">API Documentation</a></li>\n<li class=\"mobile-list-item\"><a href=\"https://forums.rocket.chat/\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">Community Forum</a></li>\n<li class=\"mobile-list-item\"><a href=\"https://github.com/RocketChat/Rocket.Chat\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">GitHub Repository</a></li>\n<p class=\"mobile-paragraph\">---</p>\n<p class=\"mobile-paragraph\"><strong>Note:</strong> This guide is part of the <a href=\"https://howtomgr.github.io\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">HowToMgr</a> collection.</p>","readTime":"9 min","wordCount":1673,"lastBuilt":"2025-09-14T18:12:11.880Z"},{"name":"shinobi","displayName":"Shinobi","slug":"shinobi","description":"Repo for shinobi","category":"infrastructure","language":null,"stars":0,"forks":0,"topics":[],"githubUrl":"https://github.com/howtomgr/shinobi","updatedAt":"2025-09-08T03:16:18Z","createdAt":"2023-08-28T03:50:05Z","readmeRaw":"# CentOS\n\n```bash\nsudo yum install -y ffmpeg gstreamer1-libav x264 x265 git curl gnupg2\nsudo yum install -y nodejs\nln -s /usr/bin/nodejs /usr/bin/node\n\ngit clone https://gitlab.com/Shinobi-Systems/Shinobi.git /usr/local/share/shinobi\ncd /usr/local/share/shinobi\nchmod +x INSTALL/centos.sh && INSTALL/centos.sh\n\n```\n\n# Debian\n\n```bash\nsudo apt update\nsudo apt install ffmpeg libav-tools x264 x265 git curl gnupg2\ncurl -sL https://deb.nodesource.com/setup_8.x | sudo -E bash -\nsudo apt install nodejs -y\nln -s /usr/bin/nodejs /usr/bin/node\n\ngit clone https://gitlab.com/Shinobi-Systems/Shinobi.git /usr/local/share/shinobi\ncd /usr/local/share/shinobi\nchmod +x INSTALL/ubuntu.sh && INSTALL/ubuntu.sh\n```\n","readmeHtml":"<h1 id=\"centos\" class=\"mobile-header\">CentOS</h1>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\">sudo yum install -y ffmpeg gstreamer1-libav x264 x265 git curl gnupg2\nsudo yum install -y nodejs\nln -s /usr/bin/nodejs /usr/bin/node\n\ngit clone https://gitlab.com/Shinobi-Systems/Shinobi.git /usr/local/share/shinobi\ncd /usr/local/share/shinobi\nchmod +x INSTALL/centos.sh &amp;&amp; INSTALL/centos.sh\n</code></pre>\n      </div>\n    </div>\n<h1 id=\"debian\" class=\"mobile-header\">Debian</h1>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\">sudo apt update\nsudo apt install ffmpeg libav-tools x264 x265 git curl gnupg2\ncurl -sL https://deb.nodesource.com/setup_8.x | sudo -E bash -\nsudo apt install nodejs -y\nln -s /usr/bin/nodejs /usr/bin/node\n\ngit clone https://gitlab.com/Shinobi-Systems/Shinobi.git /usr/local/share/shinobi\ncd /usr/local/share/shinobi\nchmod +x INSTALL/ubuntu.sh &amp;&amp; INSTALL/ubuntu.sh</code></pre>\n      </div>\n    </div>","readTime":"1 min","wordCount":81,"lastBuilt":"2025-09-14T18:12:11.506Z"},{"name":"sonarqube","displayName":"Sonarqube","slug":"sonarqube","description":"Repo for sonarqube","category":"infrastructure","language":null,"stars":0,"forks":0,"topics":[],"githubUrl":"https://github.com/howtomgr/sonarqube","updatedAt":"2025-09-08T03:16:32Z","createdAt":"2025-09-08T03:16:21Z","readmeRaw":"## ðŸ‘‹ Welcome to sonarqube ðŸš€  \n\nsonarqube README  \n  \n  \n## Author  \n\nðŸ¤– casjay: [Github](https://github.com/casjay) ðŸ¤–  \n","readmeHtml":"<h2 id=\"welcome-to-sonarqube\" class=\"mobile-header\">ðŸ‘‹ Welcome to sonarqube ðŸš€  </h2>\n<p class=\"mobile-paragraph\">sonarqube README  </p>\n<h2 id=\"author\" class=\"mobile-header\">Author  </h2>\n<p class=\"mobile-paragraph\">ðŸ¤– casjay: <a href=\"https://github.com/casjay\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">Github</a> ðŸ¤–  </p>","readTime":"1 min","wordCount":15,"lastBuilt":"2025-09-14T18:12:11.200Z"},{"name":"strapi","displayName":"Strapi","slug":"strapi","description":"Repo for strapi","category":"infrastructure","language":null,"stars":0,"forks":0,"topics":[],"githubUrl":"https://github.com/howtomgr/strapi","updatedAt":"2025-09-08T03:16:44Z","createdAt":"2025-09-08T03:16:33Z","readmeRaw":"## ðŸ‘‹ Welcome to strapi ðŸš€  \n\nstrapi README  \n  \n  \n## Author  \n\nðŸ¤– casjay: [Github](https://github.com/casjay) ðŸ¤–  \n","readmeHtml":"<h2 id=\"welcome-to-strapi\" class=\"mobile-header\">ðŸ‘‹ Welcome to strapi ðŸš€  </h2>\n<p class=\"mobile-paragraph\">strapi README  </p>\n<h2 id=\"author\" class=\"mobile-header\">Author  </h2>\n<p class=\"mobile-paragraph\">ðŸ¤– casjay: <a href=\"https://github.com/casjay\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">Github</a> ðŸ¤–  </p>","readTime":"1 min","wordCount":15,"lastBuilt":"2025-09-14T18:12:10.861Z"},{"name":"terraform","displayName":"Terraform","slug":"terraform","description":"Repo for terraform","category":"infrastructure","language":null,"stars":0,"forks":0,"topics":[],"githubUrl":"https://github.com/howtomgr/terraform","updatedAt":"2025-09-14T03:45:58Z","createdAt":"2025-09-08T03:16:51Z","readmeRaw":"# Terraform Installation Guide\n\nTerraform is a free and open-source Infrastructure as Code (IaC) tool developed by HashiCorp for building, changing, and versioning infrastructure safely and efficiently across multiple cloud providers. Originally created by Mitchell Hashimoto in 2014, Terraform uses declarative configuration files to manage infrastructure resources. It serves as a FOSS alternative to commercial IaC solutions like AWS CloudFormation, Azure Resource Manager, or proprietary enterprise tools, offering enterprise-grade features including multi-cloud management, state management, provider ecosystem, and team collaboration without licensing costs.\n\n## Prerequisites\n\n- **Hardware Requirements**:\n  - CPU: 1 core minimum (2+ cores recommended for large infrastructures)\n  - RAM: 2GB minimum (4GB+ recommended for production)\n  - Storage: 5GB minimum (more for state files and provider binaries)\n  - Network: Stable connectivity for cloud provider APIs\n- **Operating System**: \n  - Linux: Any modern distribution with kernel 3.2+\n  - macOS: 10.13+ (High Sierra or newer)\n  - Windows: Windows Server 2016+ or Windows 10\n  - FreeBSD: 12.0+\n- **Network Requirements**:\n  - HTTPS access to cloud provider APIs (port 443)\n  - Access to Terraform Registry (registry.terraform.io)\n  - Access to HashiCorp releases (releases.hashicorp.com)\n- **Dependencies**:\n  - Cloud provider CLI tools (aws-cli, azure-cli, gcloud)\n  - Git for configuration management\n  - Text editor or IDE\n  - Root or administrative access for installation\n- **System Access**: root or sudo privileges required for installation\n\n## Installation\n\n### RHEL/CentOS/Rocky Linux/AlmaLinux\n\n```bash\n# Add HashiCorp repository\nsudo yum install -y yum-utils\nsudo yum-config-manager --add-repo https://rpm.releases.hashicorp.com/RHEL/hashicorp.repo\n\n# Install Terraform\nsudo yum install -y terraform\n\n# Verify installation\nterraform version\n\n# Alternative: DNF for newer systems\nsudo dnf install -y yum-utils\nsudo dnf config-manager --add-repo https://rpm.releases.hashicorp.com/RHEL/hashicorp.repo\nsudo dnf install -y terraform\n```\n\n### Debian/Ubuntu\n\n```bash\n# Add HashiCorp GPG key\nwget -O- https://apt.releases.hashicorp.com/gpg | sudo gpg --dearmor -o /usr/share/keyrings/hashicorp-archive-keyring.gpg\n\n# Add HashiCorp repository\necho \"deb [signed-by=/usr/share/keyrings/hashicorp-archive-keyring.gpg] https://apt.releases.hashicorp.com $(lsb_release -cs) main\" | sudo tee /etc/apt/sources.list.d/hashicorp.list\n\n# Update and install Terraform\nsudo apt update\nsudo apt install -y terraform\n\n# Verify installation\nterraform version\n```\n\n### Arch Linux\n\n```bash\n# Install from community repository\nsudo pacman -S terraform\n\n# Alternative: Install from AUR\nyay -S terraform\n\n# Install additional tools\nsudo pacman -S terraform-docs tflint\n\n# Verify installation\nterraform version\n```\n\n### Alpine Linux\n\n```bash\n# Install from Alpine repositories\nsudo apk update\nsudo apk add terraform\n\n# Install additional tools\nsudo apk add bash git curl\n\n# Verify installation\nterraform version\n```\n\n### openSUSE/SLES\n\n```bash\n# openSUSE Leap/Tumbleweed\nsudo zypper install -y terraform\n\n# SLES 15\nsudo SUSEConnect -p sle-module-development-tools/15.5/x86_64\nsudo zypper install -y terraform\n\n# Alternative: Add HashiCorp repository\nsudo zypper addrepo https://rpm.releases.hashicorp.com/SLES/hashicorp.repo\nsudo zypper refresh\nsudo zypper install terraform\n\n# Verify installation\nterraform version\n```\n\n### macOS\n\n```bash\n# Using Homebrew\nbrew tap hashicorp/tap\nbrew install hashicorp/tap/terraform\n\n# Alternative: Install specific version\nbrew install terraform@1.6\n\n# Verify installation\nterraform version\n\n# Using tfenv for version management\nbrew install tfenv\ntfenv install latest\ntfenv use latest\n```\n\n### FreeBSD\n\n```bash\n# Using pkg\npkg install terraform\n\n# Using ports\ncd /usr/ports/sysutils/terraform\nmake install clean\n\n# Verify installation\nterraform version\n```\n\n### Windows\n\n```powershell\n# Method 1: Using Chocolatey\nchoco install terraform\n\n# Method 2: Using Scoop\nscoop bucket add main\nscoop install terraform\n\n# Method 3: Manual installation\n# Download from https://releases.hashicorp.com/terraform/\n# Extract terraform.exe to C:\\terraform\n# Add C:\\terraform to PATH\n\n# Method 4: Using Winget\nwinget install HashiCorp.Terraform\n\n# Verify installation\nterraform version\n```\n\n## Initial Configuration\n\n### First-Run Setup\n\n1. **Create terraform user** (optional for dedicated service):\n```bash\n# Linux systems\nsudo useradd -r -d /opt/terraform -s /sbin/nologin -c \"Terraform Service\" terraform\n```\n\n2. **Default configuration locations**:\n- RHEL/CentOS/Rocky/AlmaLinux: `/etc/terraform/` (custom) or `/usr/local/bin/`\n- Debian/Ubuntu: `/etc/terraform/` (custom) or `/usr/local/bin/`\n- Arch Linux: `/etc/terraform/` (custom) or `/usr/bin/`\n- Alpine Linux: `/etc/terraform/` (custom) or `/usr/bin/`\n- openSUSE/SLES: `/etc/terraform/` (custom) or `/usr/local/bin/`\n- macOS: `/usr/local/etc/terraform/` or `/opt/homebrew/etc/terraform/`\n- FreeBSD: `/usr/local/etc/terraform/`\n- Windows: `C:\\terraform\\` or `%APPDATA%\\terraform\\`\n\n3. **Essential initial configuration**:\n\n```bash\n# Create workspace directory\nmkdir -p ~/terraform/projects\ncd ~/terraform/projects\n\n# Create first Terraform configuration\ncat > main.tf <<EOF\nterraform {\n  required_version = \">= 1.6\"\n  required_providers {\n    local = {\n      source  = \"hashicorp/local\"\n      version = \"~> 2.0\"\n    }\n  }\n}\n\nresource \"local_file\" \"hello_world\" {\n  content  = \"Hello, World from Terraform!\"\n  filename = \"hello.txt\"\n}\nEOF\n\n# Initialize Terraform\nterraform init\n\n# Validate configuration\nterraform validate\n\n# Plan deployment\nterraform plan\n\n# Apply configuration\nterraform apply\n```\n\n### Testing Initial Setup\n\n```bash\n# Check Terraform version\nterraform version\n\n# Validate configuration\nterraform validate\n\n# Format configuration files\nterraform fmt\n\n# Initialize and test basic functionality\nterraform init\nterraform plan\nterraform apply\n\n# List state\nterraform state list\n\n# Show state details\nterraform show\n\n# Clean up test resources\nterraform destroy\n```\n\n**WARNING:** Configure proper authentication for cloud providers before deploying real infrastructure!\n\n## Service Management\n\n### systemd (Linux Systems)\n\n```bash\n# Create systemd service for Terraform agent (if using)\nsudo tee /etc/systemd/system/terraform-agent.service <<EOF\n[Unit]\nDescription=Terraform Agent\nAfter=network.target\n\n[Service]\nType=simple\nUser=terraform\nWorkingDirectory=/opt/terraform\nExecStart=/usr/local/bin/terraform-agent\nRestart=always\nRestartSec=10\n\n[Install]\nWantedBy=multi-user.target\nEOF\n\nsudo systemctl daemon-reload\nsudo systemctl enable terraform-agent\n```\n\n### OpenRC (Alpine Linux)\n\n```bash\n# Create OpenRC service script\nsudo tee /etc/init.d/terraform-agent <<EOF\n#!/sbin/openrc-run\n\nname=\"terraform-agent\"\ndescription=\"Terraform Agent\"\ncommand=\"/usr/bin/terraform-agent\"\ncommand_user=\"terraform\"\ncommand_background=true\npidfile=\"/var/run/terraform-agent.pid\"\n\ndepend() {\n    need net\n}\nEOF\n\nsudo chmod +x /etc/init.d/terraform-agent\nrc-update add terraform-agent default\n```\n\n### rc.d (FreeBSD)\n\n```bash\n# Create rc.d script\nsudo tee /usr/local/etc/rc.d/terraform_agent <<EOF\n#!/bin/sh\n. /etc/rc.subr\n\nname=terraform_agent\nrcvar=terraform_agent_enable\ncommand=\"/usr/local/bin/terraform-agent\"\npidfile=\"/var/run/terraform_agent.pid\"\nstart_cmd=\"terraform_agent_start\"\n\nterraform_agent_start() {\n    daemon -p \\${pidfile} \\${command}\n}\n\nload_rc_config \\$name\nrun_rc_command \"\\$1\"\nEOF\n\nsudo chmod +x /usr/local/etc/rc.d/terraform_agent\necho 'terraform_agent_enable=\"YES\"' >> /etc/rc.conf\n```\n\n### launchd (macOS)\n\n```bash\n# Create LaunchDaemon plist\nsudo tee /Library/LaunchDaemons/com.hashicorp.terraform.agent.plist <<EOF\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<!DOCTYPE plist PUBLIC \"-//Apple//DTD PLIST 1.0//EN\" \"http://www.apple.com/DTDs/PropertyList-1.0.dtd\">\n<plist version=\"1.0\">\n<dict>\n    <key>Label</key>\n    <string>com.hashicorp.terraform.agent</string>\n    <key>ProgramArguments</key>\n    <array>\n        <string>/usr/local/bin/terraform-agent</string>\n    </array>\n    <key>RunAtLoad</key>\n    <true/>\n    <key>KeepAlive</key>\n    <true/>\n</dict>\n</plist>\nEOF\n\nsudo launchctl load /Library/LaunchDaemons/com.hashicorp.terraform.agent.plist\n```\n\n### Windows Service Manager\n\n```powershell\n# Install Terraform as Windows service using NSSM\nnssm install TerraformAgent \"C:\\terraform\\terraform-agent.exe\"\nnssm set TerraformAgent AppDirectory \"C:\\terraform\"\nnssm set TerraformAgent DisplayName \"Terraform Agent\"\nnssm set TerraformAgent Description \"HashiCorp Terraform Agent\"\nnssm start TerraformAgent\n\n# Alternative: Using sc command\nsc create TerraformAgent binPath=\"C:\\terraform\\terraform-agent.exe\" start=auto\nsc start TerraformAgent\n```\n\n## Advanced Configuration\n\n### Multi-Cloud Provider Setup\n\n```bash\n# Create comprehensive multi-cloud configuration\ncat > providers.tf <<EOF\nterraform {\n  required_version = \">= 1.6\"\n  required_providers {\n    aws = {\n      source  = \"hashicorp/aws\"\n      version = \"~> 5.0\"\n    }\n    azurerm = {\n      source  = \"hashicorp/azurerm\"\n      version = \"~> 3.0\"\n    }\n    google = {\n      source  = \"hashicorp/google\"\n      version = \"~> 5.0\"\n    }\n    kubernetes = {\n      source  = \"hashicorp/kubernetes\"\n      version = \"~> 2.0\"\n    }\n    helm = {\n      source  = \"hashicorp/helm\"\n      version = \"~> 2.0\"\n    }\n  }\n  \n  # Remote state configuration\n  backend \"s3\" {\n    bucket = \"terraform-state-bucket\"\n    key    = \"infrastructure/terraform.tfstate\"\n    region = \"us-west-2\"\n    \n    # State locking with DynamoDB\n    dynamodb_table = \"terraform-state-lock\"\n    encrypt        = true\n  }\n}\n\n# AWS Provider\nprovider \"aws\" {\n  region = var.aws_region\n  \n  default_tags {\n    tags = {\n      Environment   = var.environment\n      ManagedBy     = \"terraform\"\n      Project       = var.project_name\n      Owner         = var.owner\n    }\n  }\n}\n\n# Azure Provider\nprovider \"azurerm\" {\n  features {\n    resource_group {\n      prevent_deletion_if_contains_resources = false\n    }\n    key_vault {\n      purge_soft_delete_on_destroy = true\n    }\n  }\n}\n\n# Google Cloud Provider\nprovider \"google\" {\n  project = var.gcp_project_id\n  region  = var.gcp_region\n  zone    = var.gcp_zone\n}\n\n# Kubernetes Provider\nprovider \"kubernetes\" {\n  config_path = \"~/.kube/config\"\n}\n\n# Helm Provider\nprovider \"helm\" {\n  kubernetes {\n    config_path = \"~/.kube/config\"\n  }\n}\nEOF\n```\n\n### Enterprise Features Configuration\n\n```bash\n# Terraform Cloud/Enterprise configuration\ncat > cloud.tf <<EOF\nterraform {\n  cloud {\n    organization = \"your-organization\"\n    \n    workspaces {\n      name = \"production-infrastructure\"\n    }\n  }\n}\n\n# Remote execution configuration\nterraform {\n  cloud {\n    organization = \"your-organization\"\n    \n    workspaces {\n      tags = [\"production\", \"web-app\"]\n    }\n  }\n  \n  required_providers {\n    tfe = {\n      source  = \"hashicorp/tfe\"\n      version = \"~> 0.48\"\n    }\n  }\n}\n\n# Terraform Enterprise configuration\nprovider \"tfe\" {\n  hostname = \"terraform.company.com\"\n  token    = var.tfe_token\n}\n\n# Workspace configuration\nresource \"tfe_workspace\" \"production\" {\n  name         = \"production-infrastructure\"\n  organization = var.tfe_organization\n  \n  auto_apply = false\n  queue_all_runs = false\n  \n  terraform_version = \"1.6.4\"\n  \n  vcs_repo {\n    identifier     = \"company/infrastructure\"\n    branch         = \"main\"\n    oauth_token_id = var.vcs_oauth_token_id\n  }\n  \n  working_directory = \"environments/production\"\n}\nEOF\n```\n\n### Advanced State Management\n\n```bash\n# Encrypted remote state with multiple backends\ncat > backend-s3.tf <<EOF\n# S3 backend with encryption and locking\nterraform {\n  backend \"s3\" {\n    bucket         = \"terraform-state-bucket\"\n    key            = \"infrastructure/terraform.tfstate\"\n    region         = \"us-west-2\"\n    encrypt        = true\n    kms_key_id     = \"arn:aws:kms:us-west-2:ACCOUNT:key/KEY-ID\"\n    dynamodb_table = \"terraform-state-lock\"\n    \n    # Additional security\n    skip_region_validation      = false\n    skip_credentials_validation = false\n    skip_metadata_api_check     = false\n  }\n}\n\n# State bucket with versioning and lifecycle\nresource \"aws_s3_bucket\" \"terraform_state\" {\n  bucket = \"terraform-state-bucket\"\n  \n  tags = {\n    Name        = \"Terraform State Bucket\"\n    Environment = var.environment\n  }\n}\n\nresource \"aws_s3_bucket_versioning\" \"terraform_state_versioning\" {\n  bucket = aws_s3_bucket.terraform_state.id\n  versioning_configuration {\n    status = \"Enabled\"\n  }\n}\n\nresource \"aws_s3_bucket_server_side_encryption_configuration\" \"terraform_state_encryption\" {\n  bucket = aws_s3_bucket.terraform_state.id\n\n  rule {\n    apply_server_side_encryption_by_default {\n      kms_master_key_id = aws_kms_key.terraform_bucket_key.arn\n      sse_algorithm     = \"aws:kms\"\n    }\n  }\n}\n\nresource \"aws_s3_bucket_public_access_block\" \"terraform_state\" {\n  bucket = aws_s3_bucket.terraform_state.id\n\n  block_public_acls       = true\n  block_public_policy     = true\n  ignore_public_acls      = true\n  restrict_public_buckets = true\n}\n\n# KMS key for encryption\nresource \"aws_kms_key\" \"terraform_bucket_key\" {\n  description             = \"KMS key for Terraform state bucket encryption\"\n  deletion_window_in_days = 7\n\n  tags = {\n    Name        = \"Terraform State Bucket Key\"\n    Environment = var.environment\n  }\n}\n\n# DynamoDB table for state locking\nresource \"aws_dynamodb_table\" \"terraform_state_lock\" {\n  name           = \"terraform-state-lock\"\n  billing_mode   = \"PAY_PER_REQUEST\"\n  hash_key       = \"LockID\"\n\n  attribute {\n    name = \"LockID\"\n    type = \"S\"\n  }\n\n  server_side_encryption {\n    enabled = true\n  }\n\n  point_in_time_recovery {\n    enabled = true\n  }\n\n  tags = {\n    Name        = \"Terraform State Lock Table\"\n    Environment = var.environment\n  }\n}\nEOF\n```\n\n## Reverse Proxy Setup\n\nTerraform itself doesn't typically require reverse proxy setup, but when using Terraform Enterprise or Cloud, you might need to configure proxies for API access:\n\n### Corporate Proxy Configuration\n\n```bash\n# Configure Terraform to work through corporate proxy\nexport HTTP_PROXY=http://proxy.company.com:8080\nexport HTTPS_PROXY=http://proxy.company.com:8080\nexport NO_PROXY=localhost,127.0.0.1,.company.com\n\n# Add to ~/.bashrc or ~/.zshrc\ncat >> ~/.bashrc <<EOF\n# Terraform proxy settings\nexport HTTP_PROXY=http://proxy.company.com:8080\nexport HTTPS_PROXY=http://proxy.company.com:8080\nexport NO_PROXY=localhost,127.0.0.1,.company.com\nEOF\n\n# Configure Git for proxy (if needed for modules)\ngit config --global http.proxy http://proxy.company.com:8080\ngit config --global https.proxy http://proxy.company.com:8080\n```\n\n### nginx Configuration for Terraform Enterprise\n\n```nginx\n# /etc/nginx/sites-available/terraform-enterprise\nupstream terraform_enterprise {\n    server 127.0.0.1:8800;\n    server 127.0.0.1:8801 backup;\n}\n\nserver {\n    listen 443 ssl http2;\n    server_name terraform.company.com;\n\n    ssl_certificate /etc/ssl/certs/terraform.company.com.crt;\n    ssl_certificate_key /etc/ssl/private/terraform.company.com.key;\n\n    # Security headers\n    add_header Strict-Transport-Security \"max-age=31536000\" always;\n    add_header X-Frame-Options \"DENY\" always;\n    add_header X-Content-Type-Options \"nosniff\" always;\n\n    location / {\n        proxy_pass http://terraform_enterprise;\n        proxy_set_header Host $host;\n        proxy_set_header X-Real-IP $remote_addr;\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n        proxy_set_header X-Forwarded-Proto $scheme;\n        \n        # WebSocket support for real-time updates\n        proxy_http_version 1.1;\n        proxy_set_header Upgrade $http_upgrade;\n        proxy_set_header Connection \"upgrade\";\n        \n        # Timeouts for long-running operations\n        proxy_connect_timeout 60s;\n        proxy_send_timeout 60s;\n        proxy_read_timeout 300s;\n    }\n}\n```\n\n## Security Configuration\n\n### Secure Credential Management\n\n```bash\n# Use environment variables for credentials\ncat > .env.example <<EOF\n# AWS credentials\nAWS_ACCESS_KEY_ID=your_access_key\nAWS_SECRET_ACCESS_KEY=your_secret_key\nAWS_DEFAULT_REGION=us-west-2\n\n# Azure credentials\nARM_CLIENT_ID=your_client_id\nARM_CLIENT_SECRET=your_client_secret\nARM_SUBSCRIPTION_ID=your_subscription_id\nARM_TENANT_ID=your_tenant_id\n\n# GCP credentials\nGOOGLE_APPLICATION_CREDENTIALS=/path/to/service-account-key.json\nGOOGLE_PROJECT=your_project_id\n\n# Terraform Cloud\nTF_CLOUD_TOKEN=your_terraform_cloud_token\nEOF\n\n# Use IAM roles for AWS (recommended)\ncat > aws-iam-role.tf <<EOF\n# IAM role for Terraform execution\nresource \"aws_iam_role\" \"terraform_execution\" {\n  name = \"TerraformExecutionRole\"\n\n  assume_role_policy = jsonencode({\n    Version = \"2012-10-17\"\n    Statement = [\n      {\n        Action = \"sts:AssumeRole\"\n        Effect = \"Allow\"\n        Principal = {\n          Service = \"ec2.amazonaws.com\"\n        }\n      },\n    ]\n  })\n}\n\n# Attach managed policies with least privilege\nresource \"aws_iam_role_policy_attachment\" \"terraform_execution\" {\n  for_each = toset([\n    \"arn:aws:iam::aws:policy/PowerUserAccess\"\n  ])\n  \n  role       = aws_iam_role.terraform_execution.name\n  policy_arn = each.value\n}\n\n# Create instance profile\nresource \"aws_iam_instance_profile\" \"terraform_execution\" {\n  name = \"TerraformExecutionProfile\"\n  role = aws_iam_role.terraform_execution.name\n}\nEOF\n```\n\n### Security Scanning and Compliance\n\n```bash\n# Pre-commit hooks for security\ncat > .pre-commit-config.yaml <<EOF\nrepos:\n- repo: https://github.com/antonbabenko/pre-commit-terraform\n  rev: v1.83.5\n  hooks:\n    - id: terraform_fmt\n    - id: terraform_validate\n    - id: terraform_docs\n    - id: terraform_tflint\n    - id: terraform_checkov\n    - id: terraform_trivy\n\n- repo: https://github.com/Yelp/detect-secrets\n  rev: v1.4.0\n  hooks:\n    - id: detect-secrets\n      args: ['--baseline', '.secrets.baseline']\nEOF\n\n# Checkov configuration for security scanning\ncat > .checkov.yaml <<EOF\nframework:\n  - terraform\n  - secrets\n\ncheck:\n  - CKV_AWS_79  # Ensure Instance Metadata Service Version 1 is not enabled\n  - CKV_AWS_8   # Ensure Launch Configuration EBS encryption\n  - CKV_AZURE_1 # Ensure storage account encryption\n\nskip-check:\n  - CKV_AWS_23  # Skip S3 bucket public read check for specific use cases\n\noutput: cli\nquiet: false\ncompact: false\nEOF\n\n# TFLint configuration\ncat > .tflint.hcl <<EOF\nplugin \"aws\" {\n    enabled = true\n    version = \"0.21.2\"\n    source  = \"github.com/terraform-linters/tflint-ruleset-aws\"\n}\n\nplugin \"azurerm\" {\n    enabled = true\n    version = \"0.21.0\"\n    source  = \"github.com/terraform-linters/tflint-ruleset-azurerm\"\n}\n\nrule \"terraform_unused_declarations\" {\n  enabled = true\n}\n\nrule \"terraform_naming_convention\" {\n  enabled = true\n  format  = \"snake_case\"\n}\nEOF\n```\n\n### Policy as Code with OPA\n\n```bash\n# OPA (Open Policy Agent) security policies\ncat > policy/security.rego <<EOF\npackage terraform.security\n\n# Deny instances without encryption\ndeny[reason] {\n    resource := input.resource_changes[_]\n    resource.type == \"aws_instance\"\n    resource.change.after.root_block_device[_].encrypted == false\n    reason := \"AWS instances must have encrypted root volumes\"\n}\n\n# Deny public S3 buckets\ndeny[reason] {\n    resource := input.resource_changes[_]\n    resource.type == \"aws_s3_bucket_public_access_block\"\n    resource.change.after.block_public_acls == false\n    reason := \"S3 buckets must block public access\"\n}\n\n# Require specific instance types in production\ndeny[reason] {\n    resource := input.resource_changes[_]\n    resource.type == \"aws_instance\"\n    instance_type := resource.change.after.instance_type\n    not allowed_instance_type(instance_type)\n    workspace := input.terraform_version.workspace\n    workspace == \"production\"\n    reason := sprintf(\"Production instances must use approved instance types, got: %v\", [instance_type])\n}\n\nallowed_instance_type(instance_type) {\n    allowed_types := [\"t3.micro\", \"t3.small\", \"t3.medium\", \"m5.large\", \"m5.xlarge\"]\n    instance_type in allowed_types\n}\nEOF\n\n# Policy validation script\ncat > scripts/validate-policy.sh <<'EOF'\n#!/bin/bash\n\n# Generate Terraform plan\nterraform plan -out=tfplan\nterraform show -json tfplan > tfplan.json\n\n# Validate against policies\nconftest test tfplan.json --policy policy/\n\n# Cleanup\nrm tfplan tfplan.json\nEOF\n\nchmod +x scripts/validate-policy.sh\n```\n\n## Database Setup\n\nTerraform doesn't require a traditional database, but it does use state files and can integrate with various storage backends:\n\n### State Storage Backends\n\n```bash\n# PostgreSQL backend (for Terraform Enterprise)\ncat > backend-postgres.tf <<EOF\nterraform {\n  backend \"pg\" {\n    conn_str = \"postgres://user:pass@localhost/terraform_backend?sslmode=require\"\n  }\n}\nEOF\n\n# Consul backend for distributed state\ncat > backend-consul.tf <<EOF\nterraform {\n  backend \"consul\" {\n    address = \"consul.company.com:8500\"\n    scheme  = \"https\"\n    path    = \"terraform/infrastructure\"\n  }\n}\nEOF\n\n# etcd backend\ncat > backend-etcd.tf <<EOF\nterraform {\n  backend \"etcdv3\" {\n    endpoints = [\"http://etcd1:2379\", \"http://etcd2:2379\", \"http://etcd3:2379\"]\n    lock      = true\n    prefix    = \"terraform-state/\"\n  }\n}\nEOF\n```\n\n### Database Infrastructure Management\n\n```bash\n# Database deployment with Terraform\ncat > database.tf <<EOF\n# RDS instance with Multi-AZ\nresource \"aws_db_instance\" \"main\" {\n  identifier = \"${var.project_name}-db\"\n  \n  engine         = \"postgresql\"\n  engine_version = \"15.4\"\n  instance_class = \"db.t3.micro\"\n  \n  allocated_storage     = 20\n  max_allocated_storage = 100\n  storage_type         = \"gp3\"\n  storage_encrypted    = true\n  kms_key_id          = aws_kms_key.rds.arn\n  \n  db_name  = var.database_name\n  username = var.database_username\n  password = var.database_password\n  port     = 5432\n  \n  multi_az               = true\n  publicly_accessible    = false\n  backup_retention_period = 7\n  backup_window          = \"03:00-04:00\"\n  maintenance_window     = \"sun:04:00-sun:05:00\"\n  \n  skip_final_snapshot = false\n  final_snapshot_identifier = \"${var.project_name}-db-final-snapshot\"\n  \n  vpc_security_group_ids = [aws_security_group.rds.id]\n  db_subnet_group_name   = aws_db_subnet_group.main.name\n  \n  tags = var.common_tags\n}\n\n# Database subnet group\nresource \"aws_db_subnet_group\" \"main\" {\n  name       = \"${var.project_name}-db-subnet-group\"\n  subnet_ids = var.private_subnet_ids\n\n  tags = merge(var.common_tags, {\n    Name = \"${var.project_name}-db-subnet-group\"\n  })\n}\n\n# KMS key for RDS encryption\nresource \"aws_kms_key\" \"rds\" {\n  description             = \"KMS key for RDS encryption\"\n  deletion_window_in_days = 7\n\n  tags = merge(var.common_tags, {\n    Name = \"${var.project_name}-rds-kms-key\"\n  })\n}\nEOF\n```\n\n## Performance Optimization\n\n### Terraform Performance Tuning\n\n```bash\n# Optimize Terraform execution\ncat > terraform.tfvars <<EOF\n# Performance settings\nterraform_parallelism = 10\nterraform_refresh = true\nterraform_upgrade = false\nEOF\n\n# Performance optimization script\ncat > scripts/optimize-terraform.sh <<'EOF'\n#!/bin/bash\n\n# Increase parallelism for faster execution\nexport TF_CLI_ARGS_plan=\"-parallelism=10\"\nexport TF_CLI_ARGS_apply=\"-parallelism=10\"\n\n# Use faster JSON output for large states\nexport TF_CLI_ARGS_show=\"-json\"\n\n# Optimize provider caching\nexport TF_PLUGIN_CACHE_DIR=\"$HOME/.terraform.d/plugin-cache\"\nmkdir -p \"$TF_PLUGIN_CACHE_DIR\"\n\n# Performance monitoring\necho \"Starting Terraform operation at $(date)\"\ntime terraform \"$@\"\necho \"Completed Terraform operation at $(date)\"\nEOF\n\nchmod +x scripts/optimize-terraform.sh\n```\n\n### Large Infrastructure Management\n\n```bash\n# Workspace and module organization\ncat > modules/infrastructure/main.tf <<EOF\n# Optimized module structure for large deployments\nterraform {\n  required_providers {\n    aws = {\n      source  = \"hashicorp/aws\"\n      version = \"~> 5.0\"\n    }\n  }\n}\n\n# Use data sources efficiently\ndata \"aws_availability_zones\" \"available\" {\n  state = \"available\"\n  \n  # Cache this data to avoid repeated API calls\n  lifecycle {\n    postcondition {\n      condition     = length(self.names) >= 2\n      error_message = \"At least 2 availability zones required.\"\n    }\n  }\n}\n\n# Optimize resource creation with for_each\nresource \"aws_subnet\" \"private\" {\n  for_each = toset(slice(data.aws_availability_zones.available.names, 0, var.subnet_count))\n  \n  vpc_id            = aws_vpc.main.id\n  cidr_block        = cidrsubnet(var.vpc_cidr, 8, index(data.aws_availability_zones.available.names, each.value) + 10)\n  availability_zone = each.value\n  \n  tags = merge(var.common_tags, {\n    Name = \"${var.name_prefix}-private-${each.value}\"\n    Type = \"private\"\n  })\n}\n\n# Use locals for complex computations\nlocals {\n  # Pre-compute values to avoid recalculation\n  availability_zones = slice(data.aws_availability_zones.available.names, 0, var.subnet_count)\n  \n  # Create maps for efficient lookups\n  subnet_map = {\n    for subnet in aws_subnet.private : \n    subnet.availability_zone => subnet.id\n  }\n}\nEOF\n```\n\n### State Optimization\n\n```bash\n# State file optimization script\ncat > scripts/optimize-state.sh <<'EOF'\n#!/bin/bash\n\n# Pull current state for backup\nterraform state pull > state-backup-$(date +%Y%m%d_%H%M%S).json\n\n# Remove unused resources from state\nterraform state list | while read resource; do\n    if terraform plan -target=\"$resource\" | grep -q \"No changes\"; then\n        echo \"Checking if $resource can be safely removed...\"\n        # Add logic to safely remove unused resources\n    fi\ndone\n\n# Refresh state to sync with real infrastructure\nterraform refresh\n\necho \"State optimization completed\"\nEOF\n\nchmod +x scripts/optimize-state.sh\n```\n\n## Monitoring\n\n### Terraform Operations Monitoring\n\n```bash\n# Terraform execution monitoring\ncat > scripts/monitor-terraform.sh <<'EOF'\n#!/bin/bash\n\nLOG_FILE=\"/var/log/terraform/operations.log\"\nMETRICS_FILE=\"/var/log/terraform/metrics.log\"\n\n# Ensure log directory exists\nmkdir -p \"$(dirname \"$LOG_FILE\")\"\nmkdir -p \"$(dirname \"$METRICS_FILE\")\"\n\n# Function to log operations\nlog_operation() {\n    local operation=\"$1\"\n    local status=\"$2\"\n    local duration=\"$3\"\n    local timestamp=$(date '+%Y-%m-%d %H:%M:%S')\n    \n    echo \"[$timestamp] Operation: $operation, Status: $status, Duration: ${duration}s\" >> \"$LOG_FILE\"\n    echo \"terraform_operation_duration{operation=\\\"$operation\\\",status=\\\"$status\\\"} $duration\" >> \"$METRICS_FILE\"\n}\n\n# Wrapper function for terraform commands\nterraform_monitored() {\n    local operation=\"$1\"\n    shift\n    local start_time=$(date +%s)\n    local exit_code=0\n    \n    echo \"Starting Terraform $operation at $(date)\"\n    \n    if terraform \"$operation\" \"$@\"; then\n        local end_time=$(date +%s)\n        local duration=$((end_time - start_time))\n        log_operation \"$operation\" \"success\" \"$duration\"\n        echo \"Terraform $operation completed successfully in ${duration}s\"\n    else\n        exit_code=$?\n        local end_time=$(date +%s)\n        local duration=$((end_time - start_time))\n        log_operation \"$operation\" \"failure\" \"$duration\"\n        echo \"Terraform $operation failed after ${duration}s\"\n        return $exit_code\n    fi\n}\n\n# Usage: terraform_monitored plan, terraform_monitored apply, etc.\nterraform_monitored \"$@\"\nEOF\n\nchmod +x scripts/monitor-terraform.sh\n```\n\n### Infrastructure Monitoring with Terraform\n\n```bash\n# Deploy monitoring stack with Terraform\ncat > monitoring.tf <<EOF\n# CloudWatch alarms for infrastructure\nresource \"aws_cloudwatch_metric_alarm\" \"high_cpu\" {\n  for_each = toset(module.compute.instance_ids)\n  \n  alarm_name          = \"high-cpu-${each.key}\"\n  comparison_operator = \"GreaterThanThreshold\"\n  evaluation_periods  = \"2\"\n  metric_name        = \"CPUUtilization\"\n  namespace          = \"AWS/EC2\"\n  period             = \"300\"\n  statistic          = \"Average\"\n  threshold          = \"80\"\n  alarm_description  = \"This metric monitors EC2 CPU utilization\"\n\n  dimensions = {\n    InstanceId = each.value\n  }\n\n  alarm_actions = [aws_sns_topic.alerts.arn]\n  \n  tags = var.common_tags\n}\n\n# SNS topic for alerts\nresource \"aws_sns_topic\" \"alerts\" {\n  name = \"${var.project_name}-infrastructure-alerts\"\n  \n  tags = var.common_tags\n}\n\nresource \"aws_sns_topic_subscription\" \"email_alerts\" {\n  topic_arn = aws_sns_topic.alerts.arn\n  protocol  = \"email\"\n  endpoint  = var.alert_email\n}\n\n# Log group for Terraform operations\nresource \"aws_cloudwatch_log_group\" \"terraform_ops\" {\n  name              = \"/terraform/operations\"\n  retention_in_days = 30\n  \n  tags = var.common_tags\n}\n\n# Dashboard for infrastructure monitoring\nresource \"aws_cloudwatch_dashboard\" \"main\" {\n  dashboard_name = \"${var.project_name}-infrastructure\"\n\n  dashboard_body = jsonencode({\n    widgets = [\n      {\n        type   = \"metric\"\n        x      = 0\n        y      = 0\n        width  = 12\n        height = 6\n\n        properties = {\n          metrics = [\n            [\"AWS/EC2\", \"CPUUtilization\", \"InstanceId\", module.compute.instance_ids[0]],\n          ]\n          view    = \"timeSeries\"\n          stacked = false\n          region  = var.aws_region\n          title   = \"EC2 Instance CPU\"\n          period  = 300\n        }\n      }\n    ]\n  })\n}\nEOF\n```\n\n### Terraform Cloud Monitoring\n\n```bash\n# Monitor Terraform Cloud workspaces\ncat > scripts/monitor-tf-cloud.sh <<'EOF'\n#!/bin/bash\n\nTF_CLOUD_TOKEN=\"${TF_CLOUD_TOKEN}\"\nORGANIZATION=\"${TF_ORGANIZATION}\"\n\n# Function to get workspace status\nget_workspace_status() {\n    local workspace_name=\"$1\"\n    \n    curl -s \\\n        --header \"Authorization: Bearer $TF_CLOUD_TOKEN\" \\\n        --header \"Content-Type: application/vnd.api+json\" \\\n        \"https://app.terraform.io/api/v2/organizations/$ORGANIZATION/workspaces/$workspace_name/current-run\" \\\n        | jq -r '.data.attributes.status'\n}\n\n# Function to get workspace runs\nget_recent_runs() {\n    local workspace_id=\"$1\"\n    \n    curl -s \\\n        --header \"Authorization: Bearer $TF_CLOUD_TOKEN\" \\\n        --header \"Content-Type: application/vnd.api+json\" \\\n        \"https://app.terraform.io/api/v2/workspaces/$workspace_id/runs\" \\\n        | jq -r '.data[].attributes | \"\\(.status) - \\(.created_at)\"'\n}\n\n# Monitor critical workspaces\nWORKSPACES=(\"production-web\" \"production-database\" \"staging-environment\")\n\nfor workspace in \"${WORKSPACES[@]}\"; do\n    status=$(get_workspace_status \"$workspace\")\n    echo \"Workspace: $workspace, Status: $status\"\n    \n    if [[ \"$status\" == \"errored\" ]]; then\n        echo \"âŒ ALERT: Workspace $workspace has errors!\"\n        # Send alert to monitoring system\n        curl -X POST \\\n            -H \"Content-Type: application/json\" \\\n            -d \"{\\\"text\\\": \\\"Terraform workspace $workspace has errors\\\"}\" \\\n            \"$SLACK_WEBHOOK_URL\"\n    elif [[ \"$status\" == \"planned_and_finished\" ]]; then\n        echo \"âœ… Workspace $workspace is healthy\"\n    fi\ndone\nEOF\n\nchmod +x scripts/monitor-tf-cloud.sh\n```\n\n## Backup and Restore\n\n### State File Backup\n\n```bash\n# Comprehensive state backup script\ncat > scripts/backup-terraform-state.sh <<'EOF'\n#!/bin/bash\n\nBACKUP_DIR=\"/backup/terraform\"\nDATE=$(date +%Y%m%d_%H%M%S)\nENVIRONMENTS=(\"development\" \"staging\" \"production\")\n\nmkdir -p \"$BACKUP_DIR\"\n\nbackup_state() {\n    local environment=\"$1\"\n    local backup_path=\"$BACKUP_DIR/$environment\"\n    \n    echo \"Backing up $environment state...\"\n    mkdir -p \"$backup_path\"\n    \n    # Change to environment directory\n    cd \"environments/$environment\" || return 1\n    \n    # Pull current state\n    terraform state pull > \"$backup_path/terraform-state-$DATE.json\"\n    \n    # Backup configuration files\n    tar -czf \"$backup_path/terraform-config-$DATE.tar.gz\" \\\n        --exclude=\".terraform\" \\\n        --exclude=\"*.tfplan\" \\\n        .\n    \n    # Backup workspace info\n    terraform workspace show > \"$backup_path/current-workspace-$DATE.txt\"\n    terraform workspace list > \"$backup_path/all-workspaces-$DATE.txt\"\n    \n    # Backup provider versions\n    terraform version > \"$backup_path/terraform-version-$DATE.txt\"\n    \n    cd - > /dev/null\n    \n    echo \"âœ… Backup completed for $environment\"\n}\n\n# Backup all environments\nfor env in \"${ENVIRONMENTS[@]}\"; do\n    if [[ -d \"environments/$env\" ]]; then\n        backup_state \"$env\"\n    else\n        echo \"âš ï¸  Environment directory not found: environments/$env\"\n    fi\ndone\n\n# Create consolidated backup\ncd \"$BACKUP_DIR\"\ntar -czf \"terraform-complete-backup-$DATE.tar.gz\" \\\n    --exclude=\"*.tar.gz\" \\\n    .\n\n# Upload to cloud storage\nif command -v aws &> /dev/null; then\n    aws s3 cp \"terraform-complete-backup-$DATE.tar.gz\" \\\n        s3://terraform-backups/\nfi\n\nif command -v az &> /dev/null; then\n    az storage blob upload \\\n        --file \"terraform-complete-backup-$DATE.tar.gz\" \\\n        --container-name terraform-backups \\\n        --name \"terraform-complete-backup-$DATE.tar.gz\"\nfi\n\nif command -v gsutil &> /dev/null; then\n    gsutil cp \"terraform-complete-backup-$DATE.tar.gz\" \\\n        gs://terraform-backups/\nfi\n\n# Cleanup old backups (keep last 30 days)\nfind \"$BACKUP_DIR\" -name \"terraform-complete-backup-*.tar.gz\" \\\n    -mtime +30 -delete\n\necho \"ðŸŽ‰ All backups completed successfully\"\nEOF\n\nchmod +x scripts/backup-terraform-state.sh\n```\n\n### Disaster Recovery Procedures\n\n```bash\n# Disaster recovery script\ncat > scripts/disaster-recovery.sh <<'EOF'\n#!/bin/bash\n\nBACKUP_FILE=\"$1\"\nTARGET_ENVIRONMENT=\"$2\"\n\nif [[ -z \"$BACKUP_FILE\" || -z \"$TARGET_ENVIRONMENT\" ]]; then\n    echo \"Usage: $0 <backup-file.tar.gz> <target-environment>\"\n    echo \"Example: $0 terraform-complete-backup-20240115_143000.tar.gz production\"\n    exit 1\nfi\n\n# Verify backup file exists\nif [[ ! -f \"$BACKUP_FILE\" ]]; then\n    echo \"âŒ Backup file not found: $BACKUP_FILE\"\n    exit 1\nfi\n\n# Create recovery directory\nRECOVERY_DIR=\"/tmp/terraform-recovery-$(date +%s)\"\nmkdir -p \"$RECOVERY_DIR\"\n\n# Extract backup\necho \"ðŸ“¦ Extracting backup...\"\ntar -xzf \"$BACKUP_FILE\" -C \"$RECOVERY_DIR\"\n\n# Navigate to target environment\ncd \"environments/$TARGET_ENVIRONMENT\" || {\n    echo \"âŒ Target environment directory not found: environments/$TARGET_ENVIRONMENT\"\n    exit 1\n}\n\n# Backup current state before recovery\necho \"ðŸ’¾ Backing up current state...\"\nterraform state pull > \"current-state-backup-$(date +%Y%m%d_%H%M%S).json\"\n\n# Import recovered state\nRECOVERED_STATE=\"$RECOVERY_DIR/$TARGET_ENVIRONMENT/terraform-state-*.json\"\nif [[ -f $RECOVERED_STATE ]]; then\n    echo \"ðŸ”„ Restoring state from backup...\"\n    terraform state push \"$RECOVERED_STATE\"\nelse\n    echo \"âŒ No state file found in backup for environment: $TARGET_ENVIRONMENT\"\n    exit 1\nfi\n\n# Verify state consistency\necho \"ðŸ” Verifying state consistency...\"\nif terraform plan -detailed-exitcode; then\n    echo \"âœ… State restored successfully - no drift detected\"\nelif [[ $? -eq 2 ]]; then\n    echo \"âš ï¸  State restored but drift detected - manual review required\"\n    terraform plan\nelse\n    echo \"âŒ State restoration failed - check error messages above\"\n    exit 1\nfi\n\n# Cleanup\nrm -rf \"$RECOVERY_DIR\"\n\necho \"ðŸŽ‰ Disaster recovery completed for environment: $TARGET_ENVIRONMENT\"\necho \"ðŸ’¡ Please review the plan output and apply changes if necessary\"\nEOF\n\nchmod +x scripts/disaster-recovery.sh\n```\n\n### State Migration and Refactoring\n\n```bash\n# State migration script for refactoring\ncat > scripts/migrate-state.sh <<'EOF'\n#!/bin/bash\n\n# Function to safely move resources in state\nmove_resource() {\n    local old_address=\"$1\"\n    local new_address=\"$2\"\n    \n    echo \"Moving $old_address to $new_address\"\n    \n    # Check if source resource exists\n    if terraform state show \"$old_address\" &>/dev/null; then\n        terraform state mv \"$old_address\" \"$new_address\"\n        echo \"âœ… Successfully moved $old_address to $new_address\"\n    else\n        echo \"âš ï¸  Resource not found: $old_address\"\n    fi\n}\n\n# Function to import existing resources\nimport_resource() {\n    local resource_address=\"$1\"\n    local resource_id=\"$2\"\n    \n    echo \"Importing $resource_id as $resource_address\"\n    \n    if terraform import \"$resource_address\" \"$resource_id\"; then\n        echo \"âœ… Successfully imported $resource_id as $resource_address\"\n    else\n        echo \"âŒ Failed to import $resource_id\"\n    fi\n}\n\n# Example migrations\necho \"ðŸ”„ Starting state migrations...\"\n\n# Move resources to modules\nmove_resource \"aws_instance.web\" \"module.web_servers.aws_instance.main[0]\"\nmove_resource \"aws_security_group.web\" \"module.web_servers.aws_security_group.main\"\n\n# Import existing resources\nimport_resource \"aws_s3_bucket.existing_bucket\" \"existing-bucket-name\"\n\n# Remove resources that are no longer managed\nterraform state rm aws_instance.deprecated\n\necho \"ðŸŽ‰ State migrations completed\"\necho \"ðŸ’¡ Run 'terraform plan' to verify changes\"\nEOF\n\nchmod +x scripts/migrate-state.sh\n```\n\n## Troubleshooting\n\n### Common Issues and Solutions\n\n```bash\n# Terraform troubleshooting script\ncat > scripts/troubleshoot-terraform.sh <<'EOF'\n#!/bin/bash\n\necho \"ðŸ”§ Terraform Troubleshooting Tool\"\necho \"================================\"\n\n# Check Terraform installation\ncheck_installation() {\n    echo \"ðŸ“‹ Checking Terraform installation...\"\n    \n    if command -v terraform &> /dev/null; then\n        terraform version\n        echo \"âœ… Terraform is installed\"\n    else\n        echo \"âŒ Terraform is not installed or not in PATH\"\n        return 1\n    fi\n}\n\n# Check configuration syntax\ncheck_configuration() {\n    echo \"ðŸ“‹ Checking configuration syntax...\"\n    \n    if terraform fmt -check -diff; then\n        echo \"âœ… Configuration is properly formatted\"\n    else\n        echo \"âš ï¸  Configuration formatting issues found\"\n        terraform fmt -diff\n    fi\n    \n    if terraform validate; then\n        echo \"âœ… Configuration is valid\"\n    else\n        echo \"âŒ Configuration validation failed\"\n        return 1\n    fi\n}\n\n# Check provider authentication\ncheck_providers() {\n    echo \"ðŸ“‹ Checking provider authentication...\"\n    \n    # AWS\n    if aws sts get-caller-identity &>/dev/null; then\n        echo \"âœ… AWS credentials are valid\"\n    else\n        echo \"âš ï¸  AWS credentials may be invalid or not configured\"\n    fi\n    \n    # Azure\n    if az account show &>/dev/null; then\n        echo \"âœ… Azure credentials are valid\"\n    else\n        echo \"âš ï¸  Azure credentials may be invalid or not configured\"\n    fi\n    \n    # GCP\n    if gcloud auth list --filter=status:ACTIVE --format=\"value(account)\" &>/dev/null; then\n        echo \"âœ… GCP credentials are valid\"\n    else\n        echo \"âš ï¸  GCP credentials may be invalid or not configured\"\n    fi\n}\n\n# Check state file\ncheck_state() {\n    echo \"ðŸ“‹ Checking state file...\"\n    \n    if terraform state list &>/dev/null; then\n        resource_count=$(terraform state list | wc -l)\n        echo \"âœ… State file is accessible with $resource_count resources\"\n    else\n        echo \"âŒ Cannot access state file\"\n        return 1\n    fi\n}\n\n# Check for common issues\ncheck_common_issues() {\n    echo \"ðŸ“‹ Checking for common issues...\"\n    \n    # Check for lock file\n    if [[ -f \".terraform.lock.hcl\" ]]; then\n        echo \"âœ… Lock file exists\"\n    else\n        echo \"âš ï¸  Lock file missing - run 'terraform init'\"\n    fi\n    \n    # Check for local state file in production\n    if [[ -f \"terraform.tfstate\" ]] && [[ $(terraform workspace show) == \"production\" ]]; then\n        echo \"âš ï¸  Local state file detected in production workspace\"\n        echo \"    Consider using remote state for production\"\n    fi\n    \n    # Check for hardcoded secrets\n    if grep -r \"password\\s*=\\s*\\\"\" . --include=\"*.tf\" --include=\"*.tfvars\" 2>/dev/null; then\n        echo \"âš ï¸  Potential hardcoded passwords found\"\n    fi\n    \n    # Check for large state file\n    if [[ -f \"terraform.tfstate\" ]]; then\n        state_size=$(stat -f%z \"terraform.tfstate\" 2>/dev/null || stat -c%s \"terraform.tfstate\" 2>/dev/null)\n        if [[ $state_size -gt 10485760 ]]; then  # 10MB\n            echo \"âš ï¸  Large state file detected ($(($state_size / 1024 / 1024))MB)\"\n            echo \"    Consider splitting into smaller configurations\"\n        fi\n    fi\n}\n\n# Debug mode information\ndebug_info() {\n    echo \"ðŸ“‹ Debug information...\"\n    \n    echo \"Working directory: $(pwd)\"\n    echo \"Terraform workspace: $(terraform workspace show)\"\n    echo \"Environment variables:\"\n    env | grep -E \"^(TF_|AWS_|ARM_|GOOGLE_)\" | sed 's/=.*/=***/' | sort\n}\n\n# Run all checks\nrun_all_checks() {\n    check_installation || return 1\n    check_configuration || return 1\n    check_providers\n    check_state || return 1\n    check_common_issues\n    debug_info\n}\n\n# Main execution\ncase \"${1:-all}\" in\n    \"installation\")\n        check_installation\n        ;;\n    \"config\")\n        check_configuration\n        ;;\n    \"providers\")\n        check_providers\n        ;;\n    \"state\")\n        check_state\n        ;;\n    \"common\")\n        check_common_issues\n        ;;\n    \"debug\")\n        debug_info\n        ;;\n    \"all\")\n        run_all_checks\n        ;;\n    *)\n        echo \"Usage: $0 [installation|config|providers|state|common|debug|all]\"\n        exit 1\n        ;;\nesac\nEOF\n\nchmod +x scripts/troubleshoot-terraform.sh\n```\n\n### Advanced Debugging\n\n```bash\n# Advanced debugging techniques\ncat > scripts/debug-terraform.sh <<'EOF'\n#!/bin/bash\n\n# Enable debug logging\nexport TF_LOG=DEBUG\nexport TF_LOG_PATH=\"terraform-debug-$(date +%Y%m%d_%H%M%S).log\"\n\n# Create debug session\ndebug_session() {\n    local operation=\"$1\"\n    shift\n    \n    echo \"ðŸ› Starting debug session for: $operation\"\n    echo \"Debug log: $TF_LOG_PATH\"\n    \n    # Capture detailed timing information\n    time terraform \"$operation\" \"$@\" 2>&1 | tee -a \"$TF_LOG_PATH\"\n    \n    local exit_code=${PIPESTATUS[0]}\n    \n    if [[ $exit_code -ne 0 ]]; then\n        echo \"âŒ Operation failed with exit code: $exit_code\"\n        echo \"ðŸ“„ Last 50 lines of debug log:\"\n        tail -50 \"$TF_LOG_PATH\"\n    else\n        echo \"âœ… Operation completed successfully\"\n    fi\n    \n    return $exit_code\n}\n\n# Analyze state file for issues\nanalyze_state() {\n    echo \"ðŸ” Analyzing state file...\"\n    \n    # Check for orphaned resources\n    echo \"Checking for potential orphaned resources...\"\n    terraform state list | while read resource; do\n        if ! terraform plan -target=\"$resource\" -detailed-exitcode >/dev/null 2>&1; then\n            echo \"âš ï¸  Potential issue with resource: $resource\"\n        fi\n    done\n    \n    # Check for large resources in state\n    echo \"Checking for large resources...\"\n    terraform state pull | jq -r '.resources[] | select(.instances[0].attributes | length > 50) | .address' 2>/dev/null | head -10\n}\n\n# Provider debug information\ndebug_providers() {\n    echo \"ðŸ” Debugging provider issues...\"\n    \n    # Show provider configuration\n    terraform providers\n    \n    # Check provider cache\n    if [[ -d \"$HOME/.terraform.d/plugin-cache\" ]]; then\n        echo \"Provider cache contents:\"\n        ls -la \"$HOME/.terraform.d/plugin-cache\"\n    fi\n    \n    # Check for provider version conflicts\n    terraform version -json | jq '.provider_selections' 2>/dev/null\n}\n\n# Network and API debugging\ndebug_network() {\n    echo \"ðŸŒ Debugging network connectivity...\"\n    \n    # Test connectivity to common endpoints\n    local endpoints=(\n        \"https://releases.hashicorp.com\"\n        \"https://registry.terraform.io\"\n        \"https://api.github.com\"\n        \"https://aws.amazon.com\"\n        \"https://management.azure.com\"\n        \"https://www.googleapis.com\"\n    )\n    \n    for endpoint in \"${endpoints[@]}\"; do\n        if curl -s --connect-timeout 5 \"$endpoint\" >/dev/null; then\n            echo \"âœ… $endpoint - OK\"\n        else\n            echo \"âŒ $endpoint - FAILED\"\n        fi\n    done\n}\n\n# Performance analysis\nanalyze_performance() {\n    echo \"ðŸ“Š Analyzing Terraform performance...\"\n    \n    # Generate and analyze dependency graph\n    terraform graph > dependency-graph.dot\n    \n    # Count resources by type\n    echo \"Resource distribution:\"\n    terraform state list | cut -d. -f1 | sort | uniq -c | sort -nr | head -10\n    \n    # Estimate plan time based on resources\n    resource_count=$(terraform state list | wc -l)\n    estimated_time=$((resource_count * 2))  # Rough estimate: 2 seconds per resource\n    echo \"Estimated plan time: ${estimated_time} seconds for $resource_count resources\"\n}\n\n# Usage\ncase \"${1:-help}\" in\n    \"session\")\n        shift\n        debug_session \"$@\"\n        ;;\n    \"state\")\n        analyze_state\n        ;;\n    \"providers\")\n        debug_providers\n        ;;\n    \"network\")\n        debug_network\n        ;;\n    \"performance\")\n        analyze_performance\n        ;;\n    \"all\")\n        debug_providers\n        debug_network\n        analyze_state\n        analyze_performance\n        ;;\n    \"help\"|*)\n        echo \"Usage: $0 [session|state|providers|network|performance|all]\"\n        echo \"\"\n        echo \"  session <operation> [args]  - Debug specific Terraform operation\"\n        echo \"  state                       - Analyze state file for issues\"\n        echo \"  providers                   - Debug provider configuration\"\n        echo \"  network                     - Test network connectivity\"\n        echo \"  performance                 - Analyze performance characteristics\"\n        echo \"  all                         - Run all debug checks\"\n        ;;\nesac\nEOF\n\nchmod +x scripts/debug-terraform.sh\n```\n\n## Maintenance\n\n### Update Procedures\n\n```bash\n# Terraform update script\ncat > scripts/update-terraform.sh <<'EOF'\n#!/bin/bash\n\nCURRENT_VERSION=$(terraform version -json | jq -r '.terraform_version')\necho \"Current Terraform version: $CURRENT_VERSION\"\n\n# Check for latest version\ncheck_latest_version() {\n    local latest_version\n    latest_version=$(curl -s https://api.github.com/repos/hashicorp/terraform/releases/latest | jq -r '.tag_name' | sed 's/v//')\n    echo \"Latest Terraform version: $latest_version\"\n    \n    if [[ \"$CURRENT_VERSION\" != \"$latest_version\" ]]; then\n        echo \"âš ï¸  Update available: $CURRENT_VERSION â†’ $latest_version\"\n        return 1\n    else\n        echo \"âœ… Terraform is up to date\"\n        return 0\n    fi\n}\n\n# Update using package manager\nupdate_terraform() {\n    echo \"ðŸ”„ Updating Terraform...\"\n    \n    if command -v apt &>/dev/null; then\n        sudo apt update && sudo apt upgrade terraform\n    elif command -v yum &>/dev/null; then\n        sudo yum update terraform\n    elif command -v dnf &>/dev/null; then\n        sudo dnf update terraform\n    elif command -v pacman &>/dev/null; then\n        sudo pacman -Syu terraform\n    elif command -v zypper &>/dev/null; then\n        sudo zypper update terraform\n    elif command -v brew &>/dev/null; then\n        brew upgrade terraform\n    else\n        echo \"âŒ No supported package manager found\"\n        echo \"ðŸ’¡ Please update manually from: https://releases.hashicorp.com/terraform/\"\n        return 1\n    fi\n}\n\n# Update providers\nupdate_providers() {\n    echo \"ðŸ”„ Updating providers...\"\n    terraform init -upgrade\n}\n\n# Verify update\nverify_update() {\n    echo \"ðŸ” Verifying update...\"\n    \n    terraform version\n    \n    # Test basic functionality\n    if terraform validate; then\n        echo \"âœ… Update verification successful\"\n    else\n        echo \"âŒ Update verification failed\"\n        return 1\n    fi\n}\n\n# Main update process\nmain() {\n    if check_latest_version; then\n        exit 0\n    fi\n    \n    echo \"Proceed with update? (y/N)\"\n    read -r response\n    \n    if [[ \"$response\" =~ ^[Yy]$ ]]; then\n        update_terraform || exit 1\n        update_providers || exit 1\n        verify_update || exit 1\n        echo \"ðŸŽ‰ Terraform update completed successfully\"\n    else\n        echo \"Update cancelled\"\n    fi\n}\n\nmain \"$@\"\nEOF\n\nchmod +x scripts/update-terraform.sh\n```\n\n### Maintenance Tasks\n\n```bash\n# Comprehensive maintenance script\ncat > scripts/terraform-maintenance.sh <<'EOF'\n#!/bin/bash\n\nMAINTENANCE_LOG=\"/var/log/terraform-maintenance-$(date +%Y%m%d_%H%M%S).log\"\n\nlog() {\n    echo \"$(date '+%Y-%m-%d %H:%M:%S') - $1\" | tee -a \"$MAINTENANCE_LOG\"\n}\n\n# Cleanup old plan files\ncleanup_plans() {\n    log \"ðŸ§¹ Cleaning up old plan files...\"\n    find . -name \"*.tfplan\" -mtime +7 -delete\n    find . -name \"*.tfplan.json\" -mtime +7 -delete\n    log \"âœ… Plan file cleanup completed\"\n}\n\n# Cleanup provider cache\ncleanup_provider_cache() {\n    log \"ðŸ§¹ Cleaning up provider cache...\"\n    if [[ -d \"$HOME/.terraform.d/plugin-cache\" ]]; then\n        # Remove providers older than 30 days\n        find \"$HOME/.terraform.d/plugin-cache\" -type f -mtime +30 -delete\n        \n        # Remove empty directories\n        find \"$HOME/.terraform.d/plugin-cache\" -type d -empty -delete\n        \n        cache_size=$(du -sh \"$HOME/.terraform.d/plugin-cache\" 2>/dev/null | cut -f1)\n        log \"âœ… Provider cache cleanup completed - current size: $cache_size\"\n    fi\n}\n\n# Validate all configurations\nvalidate_configurations() {\n    log \"ðŸ” Validating all configurations...\"\n    \n    local validation_failed=false\n    \n    # Find all directories with Terraform files\n    find . -name \"*.tf\" -exec dirname {} \\; | sort -u | while read -r dir; do\n        log \"Validating: $dir\"\n        cd \"$dir\" || continue\n        \n        if terraform validate; then\n            log \"âœ… $dir validation passed\"\n        else\n            log \"âŒ $dir validation failed\"\n            validation_failed=true\n        fi\n        \n        cd - > /dev/null\n    done\n    \n    if [[ \"$validation_failed\" == \"true\" ]]; then\n        log \"âš ï¸  Some validations failed - please review\"\n    else\n        log \"âœ… All validations passed\"\n    fi\n}\n\n# Check for deprecated features\ncheck_deprecated() {\n    log \"ðŸ” Checking for deprecated features...\"\n    \n    # Check for deprecated syntax\n    local deprecated_patterns=(\n        \"provider\\s+\\\"[^\\\"]+\\\"\\s+{\" # Old provider syntax\n        \"terraform\\s+{[^}]*version\\s*=\" # Old terraform version constraints\n        \"ignore_changes\\s*=\" # Old ignore_changes syntax\n    )\n    \n    for pattern in \"${deprecated_patterns[@]}\"; do\n        if grep -r \"$pattern\" . --include=\"*.tf\" 2>/dev/null; then\n            log \"âš ï¸  Deprecated pattern found: $pattern\"\n        fi\n    done\n    \n    log \"âœ… Deprecation check completed\"\n}\n\n# Security audit\nsecurity_audit() {\n    log \"ðŸ”’ Performing security audit...\"\n    \n    # Check for potential security issues\n    local security_issues=()\n    \n    # Check for hardcoded secrets\n    if grep -r -i \"password\\s*=\\s*\\\"[^$]\" . --include=\"*.tf\" --include=\"*.tfvars\" 2>/dev/null; then\n        security_issues+=(\"Potential hardcoded passwords\")\n    fi\n    \n    # Check for public access\n    if grep -r \"0.0.0.0/0\" . --include=\"*.tf\" 2>/dev/null; then\n        security_issues+=(\"Public access (0.0.0.0/0) found\")\n    fi\n    \n    # Check for unencrypted resources\n    if grep -r \"encrypt.*=.*false\" . --include=\"*.tf\" 2>/dev/null; then\n        security_issues+=(\"Unencrypted resources found\")\n    fi\n    \n    if [[ ${#security_issues[@]} -gt 0 ]]; then\n        log \"âš ï¸  Security issues found:\"\n        for issue in \"${security_issues[@]}\"; do\n            log \"  - $issue\"\n        done\n    else\n        log \"âœ… No obvious security issues found\"\n    fi\n}\n\n# State health check\nstate_health_check() {\n    log \"ðŸ¥ Performing state health check...\"\n    \n    # Check state file size\n    if [[ -f \"terraform.tfstate\" ]]; then\n        state_size=$(stat -f%z \"terraform.tfstate\" 2>/dev/null || stat -c%s \"terraform.tfstate\" 2>/dev/null)\n        state_size_mb=$((state_size / 1024 / 1024))\n        \n        if [[ $state_size_mb -gt 50 ]]; then\n            log \"âš ï¸  Large state file detected: ${state_size_mb}MB\"\n        else\n            log \"âœ… State file size OK: ${state_size_mb}MB\"\n        fi\n    fi\n    \n    # Check for drift\n    if terraform plan -detailed-exitcode > /dev/null 2>&1; then\n        log \"âœ… No infrastructure drift detected\"\n    else\n        exit_code=$?\n        if [[ $exit_code -eq 2 ]]; then\n            log \"âš ï¸  Infrastructure drift detected\"\n        else\n            log \"âŒ Error checking for drift\"\n        fi\n    fi\n}\n\n# Generate maintenance report\ngenerate_report() {\n    log \"ðŸ“Š Generating maintenance report...\"\n    \n    local report_file=\"/tmp/terraform-maintenance-report-$(date +%Y%m%d_%H%M%S).md\"\n    \n    cat > \"$report_file\" <<EOF\n# Terraform Maintenance Report\n\n**Date:** $(date)\n**Duration:** $((SECONDS / 60)) minutes\n\n## Summary\n\n- Configuration validation: $(grep \"validation\" \"$MAINTENANCE_LOG\" | grep -c \"passed\")\n- Security audit: Completed\n- State health check: Completed\n- Cleanup operations: Completed\n\n## Recommendations\n\n$(grep \"âš ï¸\" \"$MAINTENANCE_LOG\" | sed 's/.*âš ï¸  /- /')\n\n## Full Log\n\n\\`\\`\\`\n$(cat \"$MAINTENANCE_LOG\")\n\\`\\`\\`\nEOF\n    \n    log \"ðŸ“„ Maintenance report generated: $report_file\"\n    \n    # Email report if configured\n    if [[ -n \"$MAINTENANCE_EMAIL\" ]]; then\n        mail -s \"Terraform Maintenance Report - $(date)\" \"$MAINTENANCE_EMAIL\" < \"$report_file\"\n        log \"ðŸ“§ Report emailed to: $MAINTENANCE_EMAIL\"\n    fi\n}\n\n# Main maintenance routine\nmain() {\n    log \"ðŸš€ Starting Terraform maintenance...\"\n    \n    cleanup_plans\n    cleanup_provider_cache\n    validate_configurations\n    check_deprecated\n    security_audit\n    state_health_check\n    generate_report\n    \n    log \"ðŸŽ‰ Terraform maintenance completed\"\n    log \"ðŸ“Š Total runtime: $((SECONDS / 60)) minutes\"\n}\n\n# Run maintenance\nmain \"$@\"\nEOF\n\nchmod +x scripts/terraform-maintenance.sh\n\n# Schedule maintenance with cron\ncat > scripts/schedule-maintenance.sh <<'EOF'\n#!/bin/bash\n\n# Add to crontab for weekly maintenance\n(crontab -l 2>/dev/null; echo \"0 2 * * 0 /path/to/terraform-maintenance.sh\") | crontab -\n\necho \"âœ… Weekly maintenance scheduled for Sundays at 2 AM\"\nEOF\n\nchmod +x scripts/schedule-maintenance.sh\n```\n\n## Integration Examples\n\n### CI/CD Pipeline Integration\n\n```bash\n# GitHub Actions workflow\nmkdir -p .github/workflows\ncat > .github/workflows/terraform.yml <<EOF\nname: Terraform Multi-Cloud Deployment\n\non:\n  push:\n    branches: [ main, develop ]\n  pull_request:\n    branches: [ main ]\n\nenv:\n  TF_VERSION: 1.6.4\n\njobs:\n  terraform:\n    runs-on: ubuntu-latest\n    strategy:\n      matrix:\n        environment: [development, staging, production]\n        \n    steps:\n    - name: Checkout code\n      uses: actions/checkout@v4\n    \n    - name: Setup Terraform\n      uses: hashicorp/setup-terraform@v3\n      with:\n        terraform_version: \\${{ env.TF_VERSION }}\n        cli_config_credentials_token: \\${{ secrets.TF_CLOUD_TOKEN }}\n    \n    - name: Configure AWS credentials\n      uses: aws-actions/configure-aws-credentials@v4\n      with:\n        aws-access-key-id: \\${{ secrets.AWS_ACCESS_KEY_ID }}\n        aws-secret-access-key: \\${{ secrets.AWS_SECRET_ACCESS_KEY }}\n        aws-region: us-west-2\n    \n    - name: Terraform Format Check\n      run: terraform fmt -check -recursive\n    \n    - name: Terraform Initialize\n      run: terraform init\n      working-directory: environments/\\${{ matrix.environment }}\n    \n    - name: Terraform Validate\n      run: terraform validate\n      working-directory: environments/\\${{ matrix.environment }}\n    \n    - name: Terraform Plan\n      run: terraform plan -var-file=\"\\${{ matrix.environment }}.tfvars\"\n      working-directory: environments/\\${{ matrix.environment }}\n    \n    - name: Security Scan with Checkov\n      uses: bridgecrewio/checkov-action@master\n      with:\n        directory: .\n        framework: terraform\n        output_format: sarif\n        output_file_path: checkov.sarif\n    \n    - name: Upload Checkov results\n      uses: github/codeql-action/upload-sarif@v2\n      if: always()\n      with:\n        sarif_file: checkov.sarif\n    \n    - name: Terraform Apply (Production)\n      if: github.ref == 'refs/heads/main' && matrix.environment == 'production'\n      run: terraform apply -auto-approve -var-file=\"production.tfvars\"\n      working-directory: environments/production\nEOF\n```\n\n### GitLab CI Integration\n\n```bash\ncat > .gitlab-ci.yml <<EOF\nstages:\n  - validate\n  - plan\n  - apply\n  - destroy\n\nvariables:\n  TF_ROOT: \\${CI_PROJECT_DIR}\n  TF_VERSION: \"1.6.4\"\n  TF_IN_AUTOMATION: \"true\"\n\ncache:\n  key: \"\\${TF_ROOT}\"\n  paths:\n    - \\${TF_ROOT}/.terraform\n\nbefore_script:\n  - cd \\${TF_ROOT}\n  - terraform version\n  - terraform init\n\nvalidate:\n  stage: validate\n  script:\n    - terraform fmt -check -recursive\n    - terraform validate\n    - |\n      for dir in environments/*/; do\n        cd \"\\$dir\"\n        terraform validate\n        cd -\n      done\n  rules:\n    - if: '\\$CI_MERGE_REQUEST_IID'\n    - if: '\\$CI_COMMIT_BRANCH == \\$CI_DEFAULT_BRANCH'\n\nplan:production:\n  stage: plan\n  script:\n    - cd environments/production\n    - terraform plan -var-file=\"production.tfvars\" -out=\"production.tfplan\"\n  artifacts:\n    paths:\n      - environments/production/production.tfplan\n    expire_in: 1 week\n  rules:\n    - if: '\\$CI_COMMIT_BRANCH == \\$CI_DEFAULT_BRANCH'\n\napply:production:\n  stage: apply\n  script:\n    - cd environments/production\n    - terraform apply -input=false \"production.tfplan\"\n  dependencies:\n    - plan:production\n  rules:\n    - if: '\\$CI_COMMIT_BRANCH == \\$CI_DEFAULT_BRANCH'\n      when: manual\nEOF\n```\n\n### Jenkins Pipeline\n\n```groovy\n// Jenkinsfile\npipeline {\n    agent any\n    \n    environment {\n        TF_VERSION = '1.6.4'\n        AWS_DEFAULT_REGION = 'us-west-2'\n    }\n    \n    stages {\n        stage('Checkout') {\n            steps {\n                checkout scm\n            }\n        }\n        \n        stage('Setup') {\n            steps {\n                sh '''\n                    # Install Terraform if not present\n                    if ! command -v terraform &> /dev/null; then\n                        wget https://releases.hashicorp.com/terraform/${TF_VERSION}/terraform_${TF_VERSION}_linux_amd64.zip\n                        unzip terraform_${TF_VERSION}_linux_amd64.zip\n                        chmod +x terraform\n                        sudo mv terraform /usr/local/bin/\n                    fi\n                    \n                    terraform version\n                '''\n            }\n        }\n        \n        stage('Validate') {\n            parallel {\n                stage('Format Check') {\n                    steps {\n                        sh 'terraform fmt -check -recursive'\n                    }\n                }\n                stage('Configuration Validation') {\n                    steps {\n                        sh '''\n                            for dir in environments/*/; do\n                                cd \"$dir\"\n                                terraform init\n                                terraform validate\n                                cd -\n                            done\n                        '''\n                    }\n                }\n                stage('Security Scan') {\n                    steps {\n                        sh '''\n                            # Install and run Checkov\n                            pip3 install checkov\n                            checkov --framework terraform --directory .\n                        '''\n                    }\n                }\n            }\n        }\n        \n        stage('Plan') {\n            steps {\n                script {\n                    def environments = ['development', 'staging', 'production']\n                    def planResults = [:]\n                    \n                    environments.each { env ->\n                        planResults[env] = {\n                            dir(\"environments/${env}\") {\n                                sh \"\"\"\n                                    terraform init\n                                    terraform plan -var-file=\"${env}.tfvars\" -out=\"${env}.tfplan\"\n                                \"\"\"\n                            }\n                        }\n                    }\n                    \n                    parallel planResults\n                }\n            }\n        }\n        \n        stage('Apply') {\n            when {\n                branch 'main'\n            }\n            steps {\n                script {\n                    input message: 'Apply Terraform changes?', ok: 'Apply'\n                    \n                    dir('environments/production') {\n                        sh 'terraform apply -input=false production.tfplan'\n                    }\n                }\n            }\n        }\n    }\n    \n    post {\n        always {\n            archiveArtifacts artifacts: 'environments/**/*.tfplan', fingerprint: true\n            publishHTML([\n                allowMissing: false,\n                alwaysLinkToLastBuild: true,\n                keepAll: true,\n                reportDir: 'checkov-report',\n                reportFiles: 'index.html',\n                reportName: 'Checkov Security Report'\n            ])\n        }\n        failure {\n            emailext (\n                subject: \"Terraform Pipeline Failed: ${env.JOB_NAME} - ${env.BUILD_NUMBER}\",\n                body: \"The Terraform pipeline has failed. Please check the build logs for details.\",\n                to: \"${env.CHANGE_AUTHOR_EMAIL}\"\n            )\n        }\n    }\n}\n```\n\n## Additional Resources\n\n- [Official Terraform Documentation](https://developer.hashicorp.com/terraform/docs)\n- [Terraform Registry](https://registry.terraform.io/)\n- [Terraform Best Practices](https://developer.hashicorp.com/terraform/cloud-docs/recommended-practices)\n- [Multi-Cloud Architecture Guide](https://developer.hashicorp.com/terraform/tutorials/aws-get-started)\n- [Security Best Practices](https://developer.hashicorp.com/terraform/language/values/sensitive)\n- [AWS Provider Documentation](https://registry.terraform.io/providers/hashicorp/aws/latest/docs)\n- [Azure Provider Documentation](https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs)\n- [GCP Provider Documentation](https://registry.terraform.io/providers/hashicorp/google/latest/docs)\n- [Terraform Community Forum](https://discuss.hashicorp.com/c/terraform-core)\n- [HashiCorp Learn Terraform](https://learn.hashicorp.com/terraform)\n\n---\n\n**Note:** This guide is part of the [HowToMgr](https://howtomgr.github.io) collection. Always refer to official documentation for the most up-to-date information.","readmeHtml":"<h1 id=\"terraform-installation-guide\" class=\"mobile-header\">Terraform Installation Guide</h1>\n<p class=\"mobile-paragraph\">Terraform is a free and open-source Infrastructure as Code (IaC) tool developed by HashiCorp for building, changing, and versioning infrastructure safely and efficiently across multiple cloud providers. Originally created by Mitchell Hashimoto in 2014, Terraform uses declarative configuration files to manage infrastructure resources. It serves as a FOSS alternative to commercial IaC solutions like AWS CloudFormation, Azure Resource Manager, or proprietary enterprise tools, offering enterprise-grade features including multi-cloud management, state management, provider ecosystem, and team collaboration without licensing costs.</p>\n<h2 id=\"prerequisites\" class=\"mobile-header\">Prerequisites</h2>\n<li class=\"mobile-list-item\"><strong>Hardware Requirements</strong>:</li>\n<li class=\"mobile-list-item\">CPU: 1 core minimum (2+ cores recommended for large infrastructures)</li>\n<li class=\"mobile-list-item\">RAM: 2GB minimum (4GB+ recommended for production)</li>\n<li class=\"mobile-list-item\">Storage: 5GB minimum (more for state files and provider binaries)</li>\n<li class=\"mobile-list-item\">Network: Stable connectivity for cloud provider APIs</li>\n<li class=\"mobile-list-item\"><strong>Operating System</strong>: </li>\n<li class=\"mobile-list-item\">Linux: Any modern distribution with kernel 3.2+</li>\n<li class=\"mobile-list-item\">macOS: 10.13+ (High Sierra or newer)</li>\n<li class=\"mobile-list-item\">Windows: Windows Server 2016+ or Windows 10</li>\n<li class=\"mobile-list-item\">FreeBSD: 12.0+</li>\n<li class=\"mobile-list-item\"><strong>Network Requirements</strong>:</li>\n<li class=\"mobile-list-item\">HTTPS access to cloud provider APIs (port 443)</li>\n<li class=\"mobile-list-item\">Access to Terraform Registry (registry.terraform.io)</li>\n<li class=\"mobile-list-item\">Access to HashiCorp releases (releases.hashicorp.com)</li>\n<li class=\"mobile-list-item\"><strong>Dependencies</strong>:</li>\n<li class=\"mobile-list-item\">Cloud provider CLI tools (aws-cli, azure-cli, gcloud)</li>\n<li class=\"mobile-list-item\">Git for configuration management</li>\n<li class=\"mobile-list-item\">Text editor or IDE</li>\n<li class=\"mobile-list-item\">Root or administrative access for installation</li>\n<li class=\"mobile-list-item\"><strong>System Access</strong>: root or sudo privileges required for installation</li>\n<h2 id=\"installation\" class=\"mobile-header\">Installation</h2>\n<h3 id=\"rhelcentosrocky-linuxalmalinux\" class=\"mobile-header\">RHEL/CentOS/Rocky Linux/AlmaLinux</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Add HashiCorp repository\nsudo yum install -y yum-utils\nsudo yum-config-manager --add-repo https://rpm.releases.hashicorp.com/RHEL/hashicorp.repo\n\n# Install Terraform\nsudo yum install -y terraform\n\n# Verify installation\nterraform version\n\n# Alternative: DNF for newer systems\nsudo dnf install -y yum-utils\nsudo dnf config-manager --add-repo https://rpm.releases.hashicorp.com/RHEL/hashicorp.repo\nsudo dnf install -y terraform</code></pre>\n      </div>\n    </div>\n<h3 id=\"debianubuntu\" class=\"mobile-header\">Debian/Ubuntu</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Add HashiCorp GPG key\nwget -O- https://apt.releases.hashicorp.com/gpg | sudo gpg --dearmor -o /usr/share/keyrings/hashicorp-archive-keyring.gpg\n\n# Add HashiCorp repository\necho &quot;deb [signed-by=/usr/share/keyrings/hashicorp-archive-keyring.gpg] https://apt.releases.hashicorp.com $(lsb_release -cs) main&quot; | sudo tee /etc/apt/sources.list.d/hashicorp.list\n\n# Update and install Terraform\nsudo apt update\nsudo apt install -y terraform\n\n# Verify installation\nterraform version</code></pre>\n      </div>\n    </div>\n<h3 id=\"arch-linux\" class=\"mobile-header\">Arch Linux</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Install from community repository\nsudo pacman -S terraform\n\n# Alternative: Install from AUR\nyay -S terraform\n\n# Install additional tools\nsudo pacman -S terraform-docs tflint\n\n# Verify installation\nterraform version</code></pre>\n      </div>\n    </div>\n<h3 id=\"alpine-linux\" class=\"mobile-header\">Alpine Linux</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Install from Alpine repositories\nsudo apk update\nsudo apk add terraform\n\n# Install additional tools\nsudo apk add bash git curl\n\n# Verify installation\nterraform version</code></pre>\n      </div>\n    </div>\n<h3 id=\"opensusesles\" class=\"mobile-header\">openSUSE/SLES</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># openSUSE Leap/Tumbleweed\nsudo zypper install -y terraform\n\n# SLES 15\nsudo SUSEConnect -p sle-module-development-tools/15.5/x86_64\nsudo zypper install -y terraform\n\n# Alternative: Add HashiCorp repository\nsudo zypper addrepo https://rpm.releases.hashicorp.com/SLES/hashicorp.repo\nsudo zypper refresh\nsudo zypper install terraform\n\n# Verify installation\nterraform version</code></pre>\n      </div>\n    </div>\n<h3 id=\"macos\" class=\"mobile-header\">macOS</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Using Homebrew\nbrew tap hashicorp/tap\nbrew install hashicorp/tap/terraform\n\n# Alternative: Install specific version\nbrew install terraform@1.6\n\n# Verify installation\nterraform version\n\n# Using tfenv for version management\nbrew install tfenv\ntfenv install latest\ntfenv use latest</code></pre>\n      </div>\n    </div>\n<h3 id=\"freebsd\" class=\"mobile-header\">FreeBSD</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Using pkg\npkg install terraform\n\n# Using ports\ncd /usr/ports/sysutils/terraform\nmake install clean\n\n# Verify installation\nterraform version</code></pre>\n      </div>\n    </div>\n<h3 id=\"windows\" class=\"mobile-header\">Windows</h3>\n<div class=\"mobile-code-block\" data-language=\"powershell\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">powershell</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-powershell\"># Method 1: Using Chocolatey\nchoco install terraform\n\n# Method 2: Using Scoop\nscoop bucket add main\nscoop install terraform\n\n# Method 3: Manual installation\n# Download from https://releases.hashicorp.com/terraform/\n# Extract terraform.exe to C:\\terraform\n# Add C:\\terraform to PATH\n\n# Method 4: Using Winget\nwinget install HashiCorp.Terraform\n\n# Verify installation\nterraform version</code></pre>\n      </div>\n    </div>\n<h2 id=\"initial-configuration\" class=\"mobile-header\">Initial Configuration</h2>\n<h3 id=\"first-run-setup\" class=\"mobile-header\">First-Run Setup</h3>\n<p class=\"mobile-paragraph\">1. <strong>Create terraform user</strong> (optional for dedicated service):</p>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Linux systems\nsudo useradd -r -d /opt/terraform -s /sbin/nologin -c &quot;Terraform Service&quot; terraform</code></pre>\n      </div>\n    </div>\n<p class=\"mobile-paragraph\">2. <strong>Default configuration locations</strong>:</p>\n<li class=\"mobile-list-item\">RHEL/CentOS/Rocky/AlmaLinux: <code class=\"mobile-inline-code\">/etc/terraform/</code> (custom) or <code class=\"mobile-inline-code\">/usr/local/bin/</code></li>\n<li class=\"mobile-list-item\">Debian/Ubuntu: <code class=\"mobile-inline-code\">/etc/terraform/</code> (custom) or <code class=\"mobile-inline-code\">/usr/local/bin/</code></li>\n<li class=\"mobile-list-item\">Arch Linux: <code class=\"mobile-inline-code\">/etc/terraform/</code> (custom) or <code class=\"mobile-inline-code\">/usr/bin/</code></li>\n<li class=\"mobile-list-item\">Alpine Linux: <code class=\"mobile-inline-code\">/etc/terraform/</code> (custom) or <code class=\"mobile-inline-code\">/usr/bin/</code></li>\n<li class=\"mobile-list-item\">openSUSE/SLES: <code class=\"mobile-inline-code\">/etc/terraform/</code> (custom) or <code class=\"mobile-inline-code\">/usr/local/bin/</code></li>\n<li class=\"mobile-list-item\">macOS: <code class=\"mobile-inline-code\">/usr/local/etc/terraform/</code> or <code class=\"mobile-inline-code\">/opt/homebrew/etc/terraform/</code></li>\n<li class=\"mobile-list-item\">FreeBSD: <code class=\"mobile-inline-code\">/usr/local/etc/terraform/</code></li>\n<li class=\"mobile-list-item\">Windows: <code class=\"mobile-inline-code\">C:\\terraform\\</code> or <code class=\"mobile-inline-code\">%APPDATA%\\terraform\\</code></li>\n<p class=\"mobile-paragraph\">3. <strong>Essential initial configuration</strong>:</p>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Create workspace directory\nmkdir -p ~/terraform/projects\ncd ~/terraform/projects\n\n# Create first Terraform configuration\ncat &gt; main.tf &lt;&lt;EOF\nterraform {\n  required_version = &quot;&gt;= 1.6&quot;\n  required_providers {\n    local = {\n      source  = &quot;hashicorp/local&quot;\n      version = &quot;~&gt; 2.0&quot;\n    }\n  }\n}\n\nresource &quot;local_file&quot; &quot;hello_world&quot; {\n  content  = &quot;Hello, World from Terraform!&quot;\n  filename = &quot;hello.txt&quot;\n}\nEOF\n\n# Initialize Terraform\nterraform init\n\n# Validate configuration\nterraform validate\n\n# Plan deployment\nterraform plan\n\n# Apply configuration\nterraform apply</code></pre>\n      </div>\n    </div>\n<h3 id=\"testing-initial-setup\" class=\"mobile-header\">Testing Initial Setup</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Check Terraform version\nterraform version\n\n# Validate configuration\nterraform validate\n\n# Format configuration files\nterraform fmt\n\n# Initialize and test basic functionality\nterraform init\nterraform plan\nterraform apply\n\n# List state\nterraform state list\n\n# Show state details\nterraform show\n\n# Clean up test resources\nterraform destroy</code></pre>\n      </div>\n    </div>\n<p class=\"mobile-paragraph\"><strong>WARNING:</strong> Configure proper authentication for cloud providers before deploying real infrastructure!</p>\n<h2 id=\"service-management\" class=\"mobile-header\">Service Management</h2>\n<h3 id=\"systemd-linux-systems\" class=\"mobile-header\">systemd (Linux Systems)</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Create systemd service for Terraform agent (if using)\nsudo tee /etc/systemd/system/terraform-agent.service &lt;&lt;EOF\n[Unit]\nDescription=Terraform Agent\nAfter=network.target\n\n[Service]\nType=simple\nUser=terraform\nWorkingDirectory=/opt/terraform\nExecStart=/usr/local/bin/terraform-agent\nRestart=always\nRestartSec=10\n\n[Install]\nWantedBy=multi-user.target\nEOF\n\nsudo systemctl daemon-reload\nsudo systemctl enable terraform-agent</code></pre>\n      </div>\n    </div>\n<h3 id=\"openrc-alpine-linux\" class=\"mobile-header\">OpenRC (Alpine Linux)</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Create OpenRC service script\nsudo tee /etc/init.d/terraform-agent &lt;&lt;EOF\n#!/sbin/openrc-run\n\nname=&quot;terraform-agent&quot;\ndescription=&quot;Terraform Agent&quot;\ncommand=&quot;/usr/bin/terraform-agent&quot;\ncommand_user=&quot;terraform&quot;\ncommand_background=true\npidfile=&quot;/var/run/terraform-agent.pid&quot;\n\ndepend() {\n    need net\n}\nEOF\n\nsudo chmod +x /etc/init.d/terraform-agent\nrc-update add terraform-agent default</code></pre>\n      </div>\n    </div>\n<h3 id=\"rcd-freebsd\" class=\"mobile-header\">rc.d (FreeBSD)</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Create rc.d script\nsudo tee /usr/local/etc/rc.d/terraform_agent &lt;&lt;EOF\n#!/bin/sh\n. /etc/rc.subr\n\nname=terraform_agent\nrcvar=terraform_agent_enable\ncommand=&quot;/usr/local/bin/terraform-agent&quot;\npidfile=&quot;/var/run/terraform_agent.pid&quot;\nstart_cmd=&quot;terraform_agent_start&quot;\n\nterraform_agent_start() {\n    daemon -p \\${pidfile} \\${command}\n}\n\nload_rc_config \\$name\nrun_rc_command &quot;\\$1&quot;\nEOF\n\nsudo chmod +x /usr/local/etc/rc.d/terraform_agent\necho &#039;terraform_agent_enable=&quot;YES&quot;&#039; &gt;&gt; /etc/rc.conf</code></pre>\n      </div>\n    </div>\n<h3 id=\"launchd-macos\" class=\"mobile-header\">launchd (macOS)</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Create LaunchDaemon plist\nsudo tee /Library/LaunchDaemons/com.hashicorp.terraform.agent.plist &lt;&lt;EOF\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;!DOCTYPE plist PUBLIC &quot;-//Apple//DTD PLIST 1.0//EN&quot; &quot;http://www.apple.com/DTDs/PropertyList-1.0.dtd&quot;&gt;\n&lt;plist version=&quot;1.0&quot;&gt;\n&lt;dict&gt;\n    &lt;key&gt;Label&lt;/key&gt;\n    &lt;string&gt;com.hashicorp.terraform.agent&lt;/string&gt;\n    &lt;key&gt;ProgramArguments&lt;/key&gt;\n    &lt;array&gt;\n        &lt;string&gt;/usr/local/bin/terraform-agent&lt;/string&gt;\n    &lt;/array&gt;\n    &lt;key&gt;RunAtLoad&lt;/key&gt;\n    &lt;true/&gt;\n    &lt;key&gt;KeepAlive&lt;/key&gt;\n    &lt;true/&gt;\n&lt;/dict&gt;\n&lt;/plist&gt;\nEOF\n\nsudo launchctl load /Library/LaunchDaemons/com.hashicorp.terraform.agent.plist</code></pre>\n      </div>\n    </div>\n<h3 id=\"windows-service-manager\" class=\"mobile-header\">Windows Service Manager</h3>\n<div class=\"mobile-code-block\" data-language=\"powershell\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">powershell</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-powershell\"># Install Terraform as Windows service using NSSM\nnssm install TerraformAgent &quot;C:\\terraform\\terraform-agent.exe&quot;\nnssm set TerraformAgent AppDirectory &quot;C:\\terraform&quot;\nnssm set TerraformAgent DisplayName &quot;Terraform Agent&quot;\nnssm set TerraformAgent Description &quot;HashiCorp Terraform Agent&quot;\nnssm start TerraformAgent\n\n# Alternative: Using sc command\nsc create TerraformAgent binPath=&quot;C:\\terraform\\terraform-agent.exe&quot; start=auto\nsc start TerraformAgent</code></pre>\n      </div>\n    </div>\n<h2 id=\"advanced-configuration\" class=\"mobile-header\">Advanced Configuration</h2>\n<h3 id=\"multi-cloud-provider-setup\" class=\"mobile-header\">Multi-Cloud Provider Setup</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Create comprehensive multi-cloud configuration\ncat &gt; providers.tf &lt;&lt;EOF\nterraform {\n  required_version = &quot;&gt;= 1.6&quot;\n  required_providers {\n    aws = {\n      source  = &quot;hashicorp/aws&quot;\n      version = &quot;~&gt; 5.0&quot;\n    }\n    azurerm = {\n      source  = &quot;hashicorp/azurerm&quot;\n      version = &quot;~&gt; 3.0&quot;\n    }\n    google = {\n      source  = &quot;hashicorp/google&quot;\n      version = &quot;~&gt; 5.0&quot;\n    }\n    kubernetes = {\n      source  = &quot;hashicorp/kubernetes&quot;\n      version = &quot;~&gt; 2.0&quot;\n    }\n    helm = {\n      source  = &quot;hashicorp/helm&quot;\n      version = &quot;~&gt; 2.0&quot;\n    }\n  }\n  \n  # Remote state configuration\n  backend &quot;s3&quot; {\n    bucket = &quot;terraform-state-bucket&quot;\n    key    = &quot;infrastructure/terraform.tfstate&quot;\n    region = &quot;us-west-2&quot;\n    \n    # State locking with DynamoDB\n    dynamodb_table = &quot;terraform-state-lock&quot;\n    encrypt        = true\n  }\n}\n\n# AWS Provider\nprovider &quot;aws&quot; {\n  region = var.aws_region\n  \n  default_tags {\n    tags = {\n      Environment   = var.environment\n      ManagedBy     = &quot;terraform&quot;\n      Project       = var.project_name\n      Owner         = var.owner\n    }\n  }\n}\n\n# Azure Provider\nprovider &quot;azurerm&quot; {\n  features {\n    resource_group {\n      prevent_deletion_if_contains_resources = false\n    }\n    key_vault {\n      purge_soft_delete_on_destroy = true\n    }\n  }\n}\n\n# Google Cloud Provider\nprovider &quot;google&quot; {\n  project = var.gcp_project_id\n  region  = var.gcp_region\n  zone    = var.gcp_zone\n}\n\n# Kubernetes Provider\nprovider &quot;kubernetes&quot; {\n  config_path = &quot;~/.kube/config&quot;\n}\n\n# Helm Provider\nprovider &quot;helm&quot; {\n  kubernetes {\n    config_path = &quot;~/.kube/config&quot;\n  }\n}\nEOF</code></pre>\n      </div>\n    </div>\n<h3 id=\"enterprise-features-configuration\" class=\"mobile-header\">Enterprise Features Configuration</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Terraform Cloud/Enterprise configuration\ncat &gt; cloud.tf &lt;&lt;EOF\nterraform {\n  cloud {\n    organization = &quot;your-organization&quot;\n    \n    workspaces {\n      name = &quot;production-infrastructure&quot;\n    }\n  }\n}\n\n# Remote execution configuration\nterraform {\n  cloud {\n    organization = &quot;your-organization&quot;\n    \n    workspaces {\n      tags = [&quot;production&quot;, &quot;web-app&quot;]\n    }\n  }\n  \n  required_providers {\n    tfe = {\n      source  = &quot;hashicorp/tfe&quot;\n      version = &quot;~&gt; 0.48&quot;\n    }\n  }\n}\n\n# Terraform Enterprise configuration\nprovider &quot;tfe&quot; {\n  hostname = &quot;terraform.company.com&quot;\n  token    = var.tfe_token\n}\n\n# Workspace configuration\nresource &quot;tfe_workspace&quot; &quot;production&quot; {\n  name         = &quot;production-infrastructure&quot;\n  organization = var.tfe_organization\n  \n  auto_apply = false\n  queue_all_runs = false\n  \n  terraform_version = &quot;1.6.4&quot;\n  \n  vcs_repo {\n    identifier     = &quot;company/infrastructure&quot;\n    branch         = &quot;main&quot;\n    oauth_token_id = var.vcs_oauth_token_id\n  }\n  \n  working_directory = &quot;environments/production&quot;\n}\nEOF</code></pre>\n      </div>\n    </div>\n<h3 id=\"advanced-state-management\" class=\"mobile-header\">Advanced State Management</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Encrypted remote state with multiple backends\ncat &gt; backend-s3.tf &lt;&lt;EOF\n# S3 backend with encryption and locking\nterraform {\n  backend &quot;s3&quot; {\n    bucket         = &quot;terraform-state-bucket&quot;\n    key            = &quot;infrastructure/terraform.tfstate&quot;\n    region         = &quot;us-west-2&quot;\n    encrypt        = true\n    kms_key_id     = &quot;arn:aws:kms:us-west-2:ACCOUNT:key/KEY-ID&quot;\n    dynamodb_table = &quot;terraform-state-lock&quot;\n    \n    # Additional security\n    skip_region_validation      = false\n    skip_credentials_validation = false\n    skip_metadata_api_check     = false\n  }\n}\n\n# State bucket with versioning and lifecycle\nresource &quot;aws_s3_bucket&quot; &quot;terraform_state&quot; {\n  bucket = &quot;terraform-state-bucket&quot;\n  \n  tags = {\n    Name        = &quot;Terraform State Bucket&quot;\n    Environment = var.environment\n  }\n}\n\nresource &quot;aws_s3_bucket_versioning&quot; &quot;terraform_state_versioning&quot; {\n  bucket = aws_s3_bucket.terraform_state.id\n  versioning_configuration {\n    status = &quot;Enabled&quot;\n  }\n}\n\nresource &quot;aws_s3_bucket_server_side_encryption_configuration&quot; &quot;terraform_state_encryption&quot; {\n  bucket = aws_s3_bucket.terraform_state.id\n\n  rule {\n    apply_server_side_encryption_by_default {\n      kms_master_key_id = aws_kms_key.terraform_bucket_key.arn\n      sse_algorithm     = &quot;aws:kms&quot;\n    }\n  }\n}\n\nresource &quot;aws_s3_bucket_public_access_block&quot; &quot;terraform_state&quot; {\n  bucket = aws_s3_bucket.terraform_state.id\n\n  block_public_acls       = true\n  block_public_policy     = true\n  ignore_public_acls      = true\n  restrict_public_buckets = true\n}\n\n# KMS key for encryption\nresource &quot;aws_kms_key&quot; &quot;terraform_bucket_key&quot; {\n  description             = &quot;KMS key for Terraform state bucket encryption&quot;\n  deletion_window_in_days = 7\n\n  tags = {\n    Name        = &quot;Terraform State Bucket Key&quot;\n    Environment = var.environment\n  }\n}\n\n# DynamoDB table for state locking\nresource &quot;aws_dynamodb_table&quot; &quot;terraform_state_lock&quot; {\n  name           = &quot;terraform-state-lock&quot;\n  billing_mode   = &quot;PAY_PER_REQUEST&quot;\n  hash_key       = &quot;LockID&quot;\n\n  attribute {\n    name = &quot;LockID&quot;\n    type = &quot;S&quot;\n  }\n\n  server_side_encryption {\n    enabled = true\n  }\n\n  point_in_time_recovery {\n    enabled = true\n  }\n\n  tags = {\n    Name        = &quot;Terraform State Lock Table&quot;\n    Environment = var.environment\n  }\n}\nEOF</code></pre>\n      </div>\n    </div>\n<h2 id=\"reverse-proxy-setup\" class=\"mobile-header\">Reverse Proxy Setup</h2>\n<p class=\"mobile-paragraph\">Terraform itself doesn't typically require reverse proxy setup, but when using Terraform Enterprise or Cloud, you might need to configure proxies for API access:</p>\n<h3 id=\"corporate-proxy-configuration\" class=\"mobile-header\">Corporate Proxy Configuration</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Configure Terraform to work through corporate proxy\nexport HTTP_PROXY=http://proxy.company.com:8080\nexport HTTPS_PROXY=http://proxy.company.com:8080\nexport NO_PROXY=localhost,127.0.0.1,.company.com\n\n# Add to ~/.bashrc or ~/.zshrc\ncat &gt;&gt; ~/.bashrc &lt;&lt;EOF\n# Terraform proxy settings\nexport HTTP_PROXY=http://proxy.company.com:8080\nexport HTTPS_PROXY=http://proxy.company.com:8080\nexport NO_PROXY=localhost,127.0.0.1,.company.com\nEOF\n\n# Configure Git for proxy (if needed for modules)\ngit config --global http.proxy http://proxy.company.com:8080\ngit config --global https.proxy http://proxy.company.com:8080</code></pre>\n      </div>\n    </div>\n<h3 id=\"nginx-configuration-for-terraform-enterprise\" class=\"mobile-header\">nginx Configuration for Terraform Enterprise</h3>\n<div class=\"mobile-code-block\" data-language=\"nginx\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">nginx</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-nginx\"># /etc/nginx/sites-available/terraform-enterprise\nupstream terraform_enterprise {\n    server 127.0.0.1:8800;\n    server 127.0.0.1:8801 backup;\n}\n\nserver {\n    listen 443 ssl http2;\n    server_name terraform.company.com;\n\n    ssl_certificate /etc/ssl/certs/terraform.company.com.crt;\n    ssl_certificate_key /etc/ssl/private/terraform.company.com.key;\n\n    # Security headers\n    add_header Strict-Transport-Security &quot;max-age=31536000&quot; always;\n    add_header X-Frame-Options &quot;DENY&quot; always;\n    add_header X-Content-Type-Options &quot;nosniff&quot; always;\n\n    location / {\n        proxy_pass http://terraform_enterprise;\n        proxy_set_header Host $host;\n        proxy_set_header X-Real-IP $remote_addr;\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n        proxy_set_header X-Forwarded-Proto $scheme;\n        \n        # WebSocket support for real-time updates\n        proxy_http_version 1.1;\n        proxy_set_header Upgrade $http_upgrade;\n        proxy_set_header Connection &quot;upgrade&quot;;\n        \n        # Timeouts for long-running operations\n        proxy_connect_timeout 60s;\n        proxy_send_timeout 60s;\n        proxy_read_timeout 300s;\n    }\n}</code></pre>\n      </div>\n    </div>\n<h2 id=\"security-configuration\" class=\"mobile-header\">Security Configuration</h2>\n<h3 id=\"secure-credential-management\" class=\"mobile-header\">Secure Credential Management</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Use environment variables for credentials\ncat &gt; .env.example &lt;&lt;EOF\n# AWS credentials\nAWS_ACCESS_KEY_ID=your_access_key\nAWS_SECRET_ACCESS_KEY=your_secret_key\nAWS_DEFAULT_REGION=us-west-2\n\n# Azure credentials\nARM_CLIENT_ID=your_client_id\nARM_CLIENT_SECRET=your_client_secret\nARM_SUBSCRIPTION_ID=your_subscription_id\nARM_TENANT_ID=your_tenant_id\n\n# GCP credentials\nGOOGLE_APPLICATION_CREDENTIALS=/path/to/service-account-key.json\nGOOGLE_PROJECT=your_project_id\n\n# Terraform Cloud\nTF_CLOUD_TOKEN=your_terraform_cloud_token\nEOF\n\n# Use IAM roles for AWS (recommended)\ncat &gt; aws-iam-role.tf &lt;&lt;EOF\n# IAM role for Terraform execution\nresource &quot;aws_iam_role&quot; &quot;terraform_execution&quot; {\n  name = &quot;TerraformExecutionRole&quot;\n\n  assume_role_policy = jsonencode({\n    Version = &quot;2012-10-17&quot;\n    Statement = [\n      {\n        Action = &quot;sts:AssumeRole&quot;\n        Effect = &quot;Allow&quot;\n        Principal = {\n          Service = &quot;ec2.amazonaws.com&quot;\n        }\n      },\n    ]\n  })\n}\n\n# Attach managed policies with least privilege\nresource &quot;aws_iam_role_policy_attachment&quot; &quot;terraform_execution&quot; {\n  for_each = toset([\n    &quot;arn:aws:iam::aws:policy/PowerUserAccess&quot;\n  ])\n  \n  role       = aws_iam_role.terraform_execution.name\n  policy_arn = each.value\n}\n\n# Create instance profile\nresource &quot;aws_iam_instance_profile&quot; &quot;terraform_execution&quot; {\n  name = &quot;TerraformExecutionProfile&quot;\n  role = aws_iam_role.terraform_execution.name\n}\nEOF</code></pre>\n      </div>\n    </div>\n<h3 id=\"security-scanning-and-compliance\" class=\"mobile-header\">Security Scanning and Compliance</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Pre-commit hooks for security\ncat &gt; .pre-commit-config.yaml &lt;&lt;EOF\nrepos:\n- repo: https://github.com/antonbabenko/pre-commit-terraform\n  rev: v1.83.5\n  hooks:\n    - id: terraform_fmt\n    - id: terraform_validate\n    - id: terraform_docs\n    - id: terraform_tflint\n    - id: terraform_checkov\n    - id: terraform_trivy\n\n- repo: https://github.com/Yelp/detect-secrets\n  rev: v1.4.0\n  hooks:\n    - id: detect-secrets\n      args: [&#039;--baseline&#039;, &#039;.secrets.baseline&#039;]\nEOF\n\n# Checkov configuration for security scanning\ncat &gt; .checkov.yaml &lt;&lt;EOF\nframework:\n  - terraform\n  - secrets\n\ncheck:\n  - CKV_AWS_79  # Ensure Instance Metadata Service Version 1 is not enabled\n  - CKV_AWS_8   # Ensure Launch Configuration EBS encryption\n  - CKV_AZURE_1 # Ensure storage account encryption\n\nskip-check:\n  - CKV_AWS_23  # Skip S3 bucket public read check for specific use cases\n\noutput: cli\nquiet: false\ncompact: false\nEOF\n\n# TFLint configuration\ncat &gt; .tflint.hcl &lt;&lt;EOF\nplugin &quot;aws&quot; {\n    enabled = true\n    version = &quot;0.21.2&quot;\n    source  = &quot;github.com/terraform-linters/tflint-ruleset-aws&quot;\n}\n\nplugin &quot;azurerm&quot; {\n    enabled = true\n    version = &quot;0.21.0&quot;\n    source  = &quot;github.com/terraform-linters/tflint-ruleset-azurerm&quot;\n}\n\nrule &quot;terraform_unused_declarations&quot; {\n  enabled = true\n}\n\nrule &quot;terraform_naming_convention&quot; {\n  enabled = true\n  format  = &quot;snake_case&quot;\n}\nEOF</code></pre>\n      </div>\n    </div>\n<h3 id=\"policy-as-code-with-opa\" class=\"mobile-header\">Policy as Code with OPA</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># OPA (Open Policy Agent) security policies\ncat &gt; policy/security.rego &lt;&lt;EOF\npackage terraform.security\n\n# Deny instances without encryption\ndeny[reason] {\n    resource := input.resource_changes[_]\n    resource.type == &quot;aws_instance&quot;\n    resource.change.after.root_block_device[_].encrypted == false\n    reason := &quot;AWS instances must have encrypted root volumes&quot;\n}\n\n# Deny public S3 buckets\ndeny[reason] {\n    resource := input.resource_changes[_]\n    resource.type == &quot;aws_s3_bucket_public_access_block&quot;\n    resource.change.after.block_public_acls == false\n    reason := &quot;S3 buckets must block public access&quot;\n}\n\n# Require specific instance types in production\ndeny[reason] {\n    resource := input.resource_changes[_]\n    resource.type == &quot;aws_instance&quot;\n    instance_type := resource.change.after.instance_type\n    not allowed_instance_type(instance_type)\n    workspace := input.terraform_version.workspace\n    workspace == &quot;production&quot;\n    reason := sprintf(&quot;Production instances must use approved instance types, got: %v&quot;, [instance_type])\n}\n\nallowed_instance_type(instance_type) {\n    allowed_types := [&quot;t3.micro&quot;, &quot;t3.small&quot;, &quot;t3.medium&quot;, &quot;m5.large&quot;, &quot;m5.xlarge&quot;]\n    instance_type in allowed_types\n}\nEOF\n\n# Policy validation script\ncat &gt; scripts/validate-policy.sh &lt;&lt;&#039;EOF&#039;\n#!/bin/bash\n\n# Generate Terraform plan\nterraform plan -out=tfplan\nterraform show -json tfplan &gt; tfplan.json\n\n# Validate against policies\nconftest test tfplan.json --policy policy/\n\n# Cleanup\nrm tfplan tfplan.json\nEOF\n\nchmod +x scripts/validate-policy.sh</code></pre>\n      </div>\n    </div>\n<h2 id=\"database-setup\" class=\"mobile-header\">Database Setup</h2>\n<p class=\"mobile-paragraph\">Terraform doesn't require a traditional database, but it does use state files and can integrate with various storage backends:</p>\n<h3 id=\"state-storage-backends\" class=\"mobile-header\">State Storage Backends</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># PostgreSQL backend (for Terraform Enterprise)\ncat &gt; backend-postgres.tf &lt;&lt;EOF\nterraform {\n  backend &quot;pg&quot; {\n    conn_str = &quot;postgres://user:pass@localhost/terraform_backend?sslmode=require&quot;\n  }\n}\nEOF\n\n# Consul backend for distributed state\ncat &gt; backend-consul.tf &lt;&lt;EOF\nterraform {\n  backend &quot;consul&quot; {\n    address = &quot;consul.company.com:8500&quot;\n    scheme  = &quot;https&quot;\n    path    = &quot;terraform/infrastructure&quot;\n  }\n}\nEOF\n\n# etcd backend\ncat &gt; backend-etcd.tf &lt;&lt;EOF\nterraform {\n  backend &quot;etcdv3&quot; {\n    endpoints = [&quot;http://etcd1:2379&quot;, &quot;http://etcd2:2379&quot;, &quot;http://etcd3:2379&quot;]\n    lock      = true\n    prefix    = &quot;terraform-state/&quot;\n  }\n}\nEOF</code></pre>\n      </div>\n    </div>\n<h3 id=\"database-infrastructure-management\" class=\"mobile-header\">Database Infrastructure Management</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Database deployment with Terraform\ncat &gt; database.tf &lt;&lt;EOF\n# RDS instance with Multi-AZ\nresource &quot;aws_db_instance&quot; &quot;main&quot; {\n  identifier = &quot;${var.project_name}-db&quot;\n  \n  engine         = &quot;postgresql&quot;\n  engine_version = &quot;15.4&quot;\n  instance_class = &quot;db.t3.micro&quot;\n  \n  allocated_storage     = 20\n  max_allocated_storage = 100\n  storage_type         = &quot;gp3&quot;\n  storage_encrypted    = true\n  kms_key_id          = aws_kms_key.rds.arn\n  \n  db_name  = var.database_name\n  username = var.database_username\n  password = var.database_password\n  port     = 5432\n  \n  multi_az               = true\n  publicly_accessible    = false\n  backup_retention_period = 7\n  backup_window          = &quot;03:00-04:00&quot;\n  maintenance_window     = &quot;sun:04:00-sun:05:00&quot;\n  \n  skip_final_snapshot = false\n  final_snapshot_identifier = &quot;${var.project_name}-db-final-snapshot&quot;\n  \n  vpc_security_group_ids = [aws_security_group.rds.id]\n  db_subnet_group_name   = aws_db_subnet_group.main.name\n  \n  tags = var.common_tags\n}\n\n# Database subnet group\nresource &quot;aws_db_subnet_group&quot; &quot;main&quot; {\n  name       = &quot;${var.project_name}-db-subnet-group&quot;\n  subnet_ids = var.private_subnet_ids\n\n  tags = merge(var.common_tags, {\n    Name = &quot;${var.project_name}-db-subnet-group&quot;\n  })\n}\n\n# KMS key for RDS encryption\nresource &quot;aws_kms_key&quot; &quot;rds&quot; {\n  description             = &quot;KMS key for RDS encryption&quot;\n  deletion_window_in_days = 7\n\n  tags = merge(var.common_tags, {\n    Name = &quot;${var.project_name}-rds-kms-key&quot;\n  })\n}\nEOF</code></pre>\n      </div>\n    </div>\n<h2 id=\"performance-optimization\" class=\"mobile-header\">Performance Optimization</h2>\n<h3 id=\"terraform-performance-tuning\" class=\"mobile-header\">Terraform Performance Tuning</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Optimize Terraform execution\ncat &gt; terraform.tfvars &lt;&lt;EOF\n# Performance settings\nterraform_parallelism = 10\nterraform_refresh = true\nterraform_upgrade = false\nEOF\n\n# Performance optimization script\ncat &gt; scripts/optimize-terraform.sh &lt;&lt;&#039;EOF&#039;\n#!/bin/bash\n\n# Increase parallelism for faster execution\nexport TF_CLI_ARGS_plan=&quot;-parallelism=10&quot;\nexport TF_CLI_ARGS_apply=&quot;-parallelism=10&quot;\n\n# Use faster JSON output for large states\nexport TF_CLI_ARGS_show=&quot;-json&quot;\n\n# Optimize provider caching\nexport TF_PLUGIN_CACHE_DIR=&quot;$HOME/.terraform.d/plugin-cache&quot;\nmkdir -p &quot;$TF_PLUGIN_CACHE_DIR&quot;\n\n# Performance monitoring\necho &quot;Starting Terraform operation at $(date)&quot;\ntime terraform &quot;$@&quot;\necho &quot;Completed Terraform operation at $(date)&quot;\nEOF\n\nchmod +x scripts/optimize-terraform.sh</code></pre>\n      </div>\n    </div>\n<h3 id=\"large-infrastructure-management\" class=\"mobile-header\">Large Infrastructure Management</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Workspace and module organization\ncat &gt; modules/infrastructure/main.tf &lt;&lt;EOF\n# Optimized module structure for large deployments\nterraform {\n  required_providers {\n    aws = {\n      source  = &quot;hashicorp/aws&quot;\n      version = &quot;~&gt; 5.0&quot;\n    }\n  }\n}\n\n# Use data sources efficiently\ndata &quot;aws_availability_zones&quot; &quot;available&quot; {\n  state = &quot;available&quot;\n  \n  # Cache this data to avoid repeated API calls\n  lifecycle {\n    postcondition {\n      condition     = length(self.names) &gt;= 2\n      error_message = &quot;At least 2 availability zones required.&quot;\n    }\n  }\n}\n\n# Optimize resource creation with for_each\nresource &quot;aws_subnet&quot; &quot;private&quot; {\n  for_each = toset(slice(data.aws_availability_zones.available.names, 0, var.subnet_count))\n  \n  vpc_id            = aws_vpc.main.id\n  cidr_block        = cidrsubnet(var.vpc_cidr, 8, index(data.aws_availability_zones.available.names, each.value) + 10)\n  availability_zone = each.value\n  \n  tags = merge(var.common_tags, {\n    Name = &quot;${var.name_prefix}-private-${each.value}&quot;\n    Type = &quot;private&quot;\n  })\n}\n\n# Use locals for complex computations\nlocals {\n  # Pre-compute values to avoid recalculation\n  availability_zones = slice(data.aws_availability_zones.available.names, 0, var.subnet_count)\n  \n  # Create maps for efficient lookups\n  subnet_map = {\n    for subnet in aws_subnet.private : \n    subnet.availability_zone =&gt; subnet.id\n  }\n}\nEOF</code></pre>\n      </div>\n    </div>\n<h3 id=\"state-optimization\" class=\"mobile-header\">State Optimization</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># State file optimization script\ncat &gt; scripts/optimize-state.sh &lt;&lt;&#039;EOF&#039;\n#!/bin/bash\n\n# Pull current state for backup\nterraform state pull &gt; state-backup-$(date +%Y%m%d_%H%M%S).json\n\n# Remove unused resources from state\nterraform state list | while read resource; do\n    if terraform plan -target=&quot;$resource&quot; | grep -q &quot;No changes&quot;; then\n        echo &quot;Checking if $resource can be safely removed...&quot;\n        # Add logic to safely remove unused resources\n    fi\ndone\n\n# Refresh state to sync with real infrastructure\nterraform refresh\n\necho &quot;State optimization completed&quot;\nEOF\n\nchmod +x scripts/optimize-state.sh</code></pre>\n      </div>\n    </div>\n<h2 id=\"monitoring\" class=\"mobile-header\">Monitoring</h2>\n<h3 id=\"terraform-operations-monitoring\" class=\"mobile-header\">Terraform Operations Monitoring</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Terraform execution monitoring\ncat &gt; scripts/monitor-terraform.sh &lt;&lt;&#039;EOF&#039;\n#!/bin/bash\n\nLOG_FILE=&quot;/var/log/terraform/operations.log&quot;\nMETRICS_FILE=&quot;/var/log/terraform/metrics.log&quot;\n\n# Ensure log directory exists\nmkdir -p &quot;$(dirname &quot;$LOG_FILE&quot;)&quot;\nmkdir -p &quot;$(dirname &quot;$METRICS_FILE&quot;)&quot;\n\n# Function to log operations\nlog_operation() {\n    local operation=&quot;$1&quot;\n    local status=&quot;$2&quot;\n    local duration=&quot;$3&quot;\n    local timestamp=$(date &#039;+%Y-%m-%d %H:%M:%S&#039;)\n    \n    echo &quot;[$timestamp] Operation: $operation, Status: $status, Duration: ${duration}s&quot; &gt;&gt; &quot;$LOG_FILE&quot;\n    echo &quot;terraform_operation_duration{operation=\\&quot;$operation\\&quot;,status=\\&quot;$status\\&quot;} $duration&quot; &gt;&gt; &quot;$METRICS_FILE&quot;\n}\n\n# Wrapper function for terraform commands\nterraform_monitored() {\n    local operation=&quot;$1&quot;\n    shift\n    local start_time=$(date +%s)\n    local exit_code=0\n    \n    echo &quot;Starting Terraform $operation at $(date)&quot;\n    \n    if terraform &quot;$operation&quot; &quot;$@&quot;; then\n        local end_time=$(date +%s)\n        local duration=$((end_time - start_time))\n        log_operation &quot;$operation&quot; &quot;success&quot; &quot;$duration&quot;\n        echo &quot;Terraform $operation completed successfully in ${duration}s&quot;\n    else\n        exit_code=$?\n        local end_time=$(date +%s)\n        local duration=$((end_time - start_time))\n        log_operation &quot;$operation&quot; &quot;failure&quot; &quot;$duration&quot;\n        echo &quot;Terraform $operation failed after ${duration}s&quot;\n        return $exit_code\n    fi\n}\n\n# Usage: terraform_monitored plan, terraform_monitored apply, etc.\nterraform_monitored &quot;$@&quot;\nEOF\n\nchmod +x scripts/monitor-terraform.sh</code></pre>\n      </div>\n    </div>\n<h3 id=\"infrastructure-monitoring-with-terraform\" class=\"mobile-header\">Infrastructure Monitoring with Terraform</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Deploy monitoring stack with Terraform\ncat &gt; monitoring.tf &lt;&lt;EOF\n# CloudWatch alarms for infrastructure\nresource &quot;aws_cloudwatch_metric_alarm&quot; &quot;high_cpu&quot; {\n  for_each = toset(module.compute.instance_ids)\n  \n  alarm_name          = &quot;high-cpu-${each.key}&quot;\n  comparison_operator = &quot;GreaterThanThreshold&quot;\n  evaluation_periods  = &quot;2&quot;\n  metric_name        = &quot;CPUUtilization&quot;\n  namespace          = &quot;AWS/EC2&quot;\n  period             = &quot;300&quot;\n  statistic          = &quot;Average&quot;\n  threshold          = &quot;80&quot;\n  alarm_description  = &quot;This metric monitors EC2 CPU utilization&quot;\n\n  dimensions = {\n    InstanceId = each.value\n  }\n\n  alarm_actions = [aws_sns_topic.alerts.arn]\n  \n  tags = var.common_tags\n}\n\n# SNS topic for alerts\nresource &quot;aws_sns_topic&quot; &quot;alerts&quot; {\n  name = &quot;${var.project_name}-infrastructure-alerts&quot;\n  \n  tags = var.common_tags\n}\n\nresource &quot;aws_sns_topic_subscription&quot; &quot;email_alerts&quot; {\n  topic_arn = aws_sns_topic.alerts.arn\n  protocol  = &quot;email&quot;\n  endpoint  = var.alert_email\n}\n\n# Log group for Terraform operations\nresource &quot;aws_cloudwatch_log_group&quot; &quot;terraform_ops&quot; {\n  name              = &quot;/terraform/operations&quot;\n  retention_in_days = 30\n  \n  tags = var.common_tags\n}\n\n# Dashboard for infrastructure monitoring\nresource &quot;aws_cloudwatch_dashboard&quot; &quot;main&quot; {\n  dashboard_name = &quot;${var.project_name}-infrastructure&quot;\n\n  dashboard_body = jsonencode({\n    widgets = [\n      {\n        type   = &quot;metric&quot;\n        x      = 0\n        y      = 0\n        width  = 12\n        height = 6\n\n        properties = {\n          metrics = [\n            [&quot;AWS/EC2&quot;, &quot;CPUUtilization&quot;, &quot;InstanceId&quot;, module.compute.instance_ids[0]],\n          ]\n          view    = &quot;timeSeries&quot;\n          stacked = false\n          region  = var.aws_region\n          title   = &quot;EC2 Instance CPU&quot;\n          period  = 300\n        }\n      }\n    ]\n  })\n}\nEOF</code></pre>\n      </div>\n    </div>\n<h3 id=\"terraform-cloud-monitoring\" class=\"mobile-header\">Terraform Cloud Monitoring</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Monitor Terraform Cloud workspaces\ncat &gt; scripts/monitor-tf-cloud.sh &lt;&lt;&#039;EOF&#039;\n#!/bin/bash\n\nTF_CLOUD_TOKEN=&quot;${TF_CLOUD_TOKEN}&quot;\nORGANIZATION=&quot;${TF_ORGANIZATION}&quot;\n\n# Function to get workspace status\nget_workspace_status() {\n    local workspace_name=&quot;$1&quot;\n    \n    curl -s \\\n        --header &quot;Authorization: Bearer $TF_CLOUD_TOKEN&quot; \\\n        --header &quot;Content-Type: application/vnd.api+json&quot; \\\n        &quot;https://app.terraform.io/api/v2/organizations/$ORGANIZATION/workspaces/$workspace_name/current-run&quot; \\\n        | jq -r &#039;.data.attributes.status&#039;\n}\n\n# Function to get workspace runs\nget_recent_runs() {\n    local workspace_id=&quot;$1&quot;\n    \n    curl -s \\\n        --header &quot;Authorization: Bearer $TF_CLOUD_TOKEN&quot; \\\n        --header &quot;Content-Type: application/vnd.api+json&quot; \\\n        &quot;https://app.terraform.io/api/v2/workspaces/$workspace_id/runs&quot; \\\n        | jq -r &#039;.data[].attributes | &quot;\\(.status) - \\(.created_at)&quot;&#039;\n}\n\n# Monitor critical workspaces\nWORKSPACES=(&quot;production-web&quot; &quot;production-database&quot; &quot;staging-environment&quot;)\n\nfor workspace in &quot;${WORKSPACES[@]}&quot;; do\n    status=$(get_workspace_status &quot;$workspace&quot;)\n    echo &quot;Workspace: $workspace, Status: $status&quot;\n    \n    if [[ &quot;$status&quot; == &quot;errored&quot; ]]; then\n        echo &quot;âŒ ALERT: Workspace $workspace has errors!&quot;\n        # Send alert to monitoring system\n        curl -X POST \\\n            -H &quot;Content-Type: application/json&quot; \\\n            -d &quot;{\\&quot;text\\&quot;: \\&quot;Terraform workspace $workspace has errors\\&quot;}&quot; \\\n            &quot;$SLACK_WEBHOOK_URL&quot;\n    elif [[ &quot;$status&quot; == &quot;planned_and_finished&quot; ]]; then\n        echo &quot;âœ… Workspace $workspace is healthy&quot;\n    fi\ndone\nEOF\n\nchmod +x scripts/monitor-tf-cloud.sh</code></pre>\n      </div>\n    </div>\n<h2 id=\"backup-and-restore\" class=\"mobile-header\">Backup and Restore</h2>\n<h3 id=\"state-file-backup\" class=\"mobile-header\">State File Backup</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Comprehensive state backup script\ncat &gt; scripts/backup-terraform-state.sh &lt;&lt;&#039;EOF&#039;\n#!/bin/bash\n\nBACKUP_DIR=&quot;/backup/terraform&quot;\nDATE=$(date +%Y%m%d_%H%M%S)\nENVIRONMENTS=(&quot;development&quot; &quot;staging&quot; &quot;production&quot;)\n\nmkdir -p &quot;$BACKUP_DIR&quot;\n\nbackup_state() {\n    local environment=&quot;$1&quot;\n    local backup_path=&quot;$BACKUP_DIR/$environment&quot;\n    \n    echo &quot;Backing up $environment state...&quot;\n    mkdir -p &quot;$backup_path&quot;\n    \n    # Change to environment directory\n    cd &quot;environments/$environment&quot; || return 1\n    \n    # Pull current state\n    terraform state pull &gt; &quot;$backup_path/terraform-state-$DATE.json&quot;\n    \n    # Backup configuration files\n    tar -czf &quot;$backup_path/terraform-config-$DATE.tar.gz&quot; \\\n        --exclude=&quot;.terraform&quot; \\\n        --exclude=&quot;*.tfplan&quot; \\\n        .\n    \n    # Backup workspace info\n    terraform workspace show &gt; &quot;$backup_path/current-workspace-$DATE.txt&quot;\n    terraform workspace list &gt; &quot;$backup_path/all-workspaces-$DATE.txt&quot;\n    \n    # Backup provider versions\n    terraform version &gt; &quot;$backup_path/terraform-version-$DATE.txt&quot;\n    \n    cd - &gt; /dev/null\n    \n    echo &quot;âœ… Backup completed for $environment&quot;\n}\n\n# Backup all environments\nfor env in &quot;${ENVIRONMENTS[@]}&quot;; do\n    if [[ -d &quot;environments/$env&quot; ]]; then\n        backup_state &quot;$env&quot;\n    else\n        echo &quot;âš ï¸  Environment directory not found: environments/$env&quot;\n    fi\ndone\n\n# Create consolidated backup\ncd &quot;$BACKUP_DIR&quot;\ntar -czf &quot;terraform-complete-backup-$DATE.tar.gz&quot; \\\n    --exclude=&quot;*.tar.gz&quot; \\\n    .\n\n# Upload to cloud storage\nif command -v aws &amp;&gt; /dev/null; then\n    aws s3 cp &quot;terraform-complete-backup-$DATE.tar.gz&quot; \\\n        s3://terraform-backups/\nfi\n\nif command -v az &amp;&gt; /dev/null; then\n    az storage blob upload \\\n        --file &quot;terraform-complete-backup-$DATE.tar.gz&quot; \\\n        --container-name terraform-backups \\\n        --name &quot;terraform-complete-backup-$DATE.tar.gz&quot;\nfi\n\nif command -v gsutil &amp;&gt; /dev/null; then\n    gsutil cp &quot;terraform-complete-backup-$DATE.tar.gz&quot; \\\n        gs://terraform-backups/\nfi\n\n# Cleanup old backups (keep last 30 days)\nfind &quot;$BACKUP_DIR&quot; -name &quot;terraform-complete-backup-*.tar.gz&quot; \\\n    -mtime +30 -delete\n\necho &quot;ðŸŽ‰ All backups completed successfully&quot;\nEOF\n\nchmod +x scripts/backup-terraform-state.sh</code></pre>\n      </div>\n    </div>\n<h3 id=\"disaster-recovery-procedures\" class=\"mobile-header\">Disaster Recovery Procedures</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Disaster recovery script\ncat &gt; scripts/disaster-recovery.sh &lt;&lt;&#039;EOF&#039;\n#!/bin/bash\n\nBACKUP_FILE=&quot;$1&quot;\nTARGET_ENVIRONMENT=&quot;$2&quot;\n\nif [[ -z &quot;$BACKUP_FILE&quot; || -z &quot;$TARGET_ENVIRONMENT&quot; ]]; then\n    echo &quot;Usage: $0 &lt;backup-file.tar.gz&gt; &lt;target-environment&gt;&quot;\n    echo &quot;Example: $0 terraform-complete-backup-20240115_143000.tar.gz production&quot;\n    exit 1\nfi\n\n# Verify backup file exists\nif [[ ! -f &quot;$BACKUP_FILE&quot; ]]; then\n    echo &quot;âŒ Backup file not found: $BACKUP_FILE&quot;\n    exit 1\nfi\n\n# Create recovery directory\nRECOVERY_DIR=&quot;/tmp/terraform-recovery-$(date +%s)&quot;\nmkdir -p &quot;$RECOVERY_DIR&quot;\n\n# Extract backup\necho &quot;ðŸ“¦ Extracting backup...&quot;\ntar -xzf &quot;$BACKUP_FILE&quot; -C &quot;$RECOVERY_DIR&quot;\n\n# Navigate to target environment\ncd &quot;environments/$TARGET_ENVIRONMENT&quot; || {\n    echo &quot;âŒ Target environment directory not found: environments/$TARGET_ENVIRONMENT&quot;\n    exit 1\n}\n\n# Backup current state before recovery\necho &quot;ðŸ’¾ Backing up current state...&quot;\nterraform state pull &gt; &quot;current-state-backup-$(date +%Y%m%d_%H%M%S).json&quot;\n\n# Import recovered state\nRECOVERED_STATE=&quot;$RECOVERY_DIR/$TARGET_ENVIRONMENT/terraform-state-*.json&quot;\nif [[ -f $RECOVERED_STATE ]]; then\n    echo &quot;ðŸ”„ Restoring state from backup...&quot;\n    terraform state push &quot;$RECOVERED_STATE&quot;\nelse\n    echo &quot;âŒ No state file found in backup for environment: $TARGET_ENVIRONMENT&quot;\n    exit 1\nfi\n\n# Verify state consistency\necho &quot;ðŸ” Verifying state consistency...&quot;\nif terraform plan -detailed-exitcode; then\n    echo &quot;âœ… State restored successfully - no drift detected&quot;\nelif [[ $? -eq 2 ]]; then\n    echo &quot;âš ï¸  State restored but drift detected - manual review required&quot;\n    terraform plan\nelse\n    echo &quot;âŒ State restoration failed - check error messages above&quot;\n    exit 1\nfi\n\n# Cleanup\nrm -rf &quot;$RECOVERY_DIR&quot;\n\necho &quot;ðŸŽ‰ Disaster recovery completed for environment: $TARGET_ENVIRONMENT&quot;\necho &quot;ðŸ’¡ Please review the plan output and apply changes if necessary&quot;\nEOF\n\nchmod +x scripts/disaster-recovery.sh</code></pre>\n      </div>\n    </div>\n<h3 id=\"state-migration-and-refactoring\" class=\"mobile-header\">State Migration and Refactoring</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># State migration script for refactoring\ncat &gt; scripts/migrate-state.sh &lt;&lt;&#039;EOF&#039;\n#!/bin/bash\n\n# Function to safely move resources in state\nmove_resource() {\n    local old_address=&quot;$1&quot;\n    local new_address=&quot;$2&quot;\n    \n    echo &quot;Moving $old_address to $new_address&quot;\n    \n    # Check if source resource exists\n    if terraform state show &quot;$old_address&quot; &amp;&gt;/dev/null; then\n        terraform state mv &quot;$old_address&quot; &quot;$new_address&quot;\n        echo &quot;âœ… Successfully moved $old_address to $new_address&quot;\n    else\n        echo &quot;âš ï¸  Resource not found: $old_address&quot;\n    fi\n}\n\n# Function to import existing resources\nimport_resource() {\n    local resource_address=&quot;$1&quot;\n    local resource_id=&quot;$2&quot;\n    \n    echo &quot;Importing $resource_id as $resource_address&quot;\n    \n    if terraform import &quot;$resource_address&quot; &quot;$resource_id&quot;; then\n        echo &quot;âœ… Successfully imported $resource_id as $resource_address&quot;\n    else\n        echo &quot;âŒ Failed to import $resource_id&quot;\n    fi\n}\n\n# Example migrations\necho &quot;ðŸ”„ Starting state migrations...&quot;\n\n# Move resources to modules\nmove_resource &quot;aws_instance.web&quot; &quot;module.web_servers.aws_instance.main[0]&quot;\nmove_resource &quot;aws_security_group.web&quot; &quot;module.web_servers.aws_security_group.main&quot;\n\n# Import existing resources\nimport_resource &quot;aws_s3_bucket.existing_bucket&quot; &quot;existing-bucket-name&quot;\n\n# Remove resources that are no longer managed\nterraform state rm aws_instance.deprecated\n\necho &quot;ðŸŽ‰ State migrations completed&quot;\necho &quot;ðŸ’¡ Run &#039;terraform plan&#039; to verify changes&quot;\nEOF\n\nchmod +x scripts/migrate-state.sh</code></pre>\n      </div>\n    </div>\n<h2 id=\"troubleshooting\" class=\"mobile-header\">Troubleshooting</h2>\n<h3 id=\"common-issues-and-solutions\" class=\"mobile-header\">Common Issues and Solutions</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Terraform troubleshooting script\ncat &gt; scripts/troubleshoot-terraform.sh &lt;&lt;&#039;EOF&#039;\n#!/bin/bash\n\necho &quot;ðŸ”§ Terraform Troubleshooting Tool&quot;\necho &quot;================================&quot;\n\n# Check Terraform installation\ncheck_installation() {\n    echo &quot;ðŸ“‹ Checking Terraform installation...&quot;\n    \n    if command -v terraform &amp;&gt; /dev/null; then\n        terraform version\n        echo &quot;âœ… Terraform is installed&quot;\n    else\n        echo &quot;âŒ Terraform is not installed or not in PATH&quot;\n        return 1\n    fi\n}\n\n# Check configuration syntax\ncheck_configuration() {\n    echo &quot;ðŸ“‹ Checking configuration syntax...&quot;\n    \n    if terraform fmt -check -diff; then\n        echo &quot;âœ… Configuration is properly formatted&quot;\n    else\n        echo &quot;âš ï¸  Configuration formatting issues found&quot;\n        terraform fmt -diff\n    fi\n    \n    if terraform validate; then\n        echo &quot;âœ… Configuration is valid&quot;\n    else\n        echo &quot;âŒ Configuration validation failed&quot;\n        return 1\n    fi\n}\n\n# Check provider authentication\ncheck_providers() {\n    echo &quot;ðŸ“‹ Checking provider authentication...&quot;\n    \n    # AWS\n    if aws sts get-caller-identity &amp;&gt;/dev/null; then\n        echo &quot;âœ… AWS credentials are valid&quot;\n    else\n        echo &quot;âš ï¸  AWS credentials may be invalid or not configured&quot;\n    fi\n    \n    # Azure\n    if az account show &amp;&gt;/dev/null; then\n        echo &quot;âœ… Azure credentials are valid&quot;\n    else\n        echo &quot;âš ï¸  Azure credentials may be invalid or not configured&quot;\n    fi\n    \n    # GCP\n    if gcloud auth list --filter=status:ACTIVE --format=&quot;value(account)&quot; &amp;&gt;/dev/null; then\n        echo &quot;âœ… GCP credentials are valid&quot;\n    else\n        echo &quot;âš ï¸  GCP credentials may be invalid or not configured&quot;\n    fi\n}\n\n# Check state file\ncheck_state() {\n    echo &quot;ðŸ“‹ Checking state file...&quot;\n    \n    if terraform state list &amp;&gt;/dev/null; then\n        resource_count=$(terraform state list | wc -l)\n        echo &quot;âœ… State file is accessible with $resource_count resources&quot;\n    else\n        echo &quot;âŒ Cannot access state file&quot;\n        return 1\n    fi\n}\n\n# Check for common issues\ncheck_common_issues() {\n    echo &quot;ðŸ“‹ Checking for common issues...&quot;\n    \n    # Check for lock file\n    if [[ -f &quot;.terraform.lock.hcl&quot; ]]; then\n        echo &quot;âœ… Lock file exists&quot;\n    else\n        echo &quot;âš ï¸  Lock file missing - run &#039;terraform init&#039;&quot;\n    fi\n    \n    # Check for local state file in production\n    if [[ -f &quot;terraform.tfstate&quot; ]] &amp;&amp; [[ $(terraform workspace show) == &quot;production&quot; ]]; then\n        echo &quot;âš ï¸  Local state file detected in production workspace&quot;\n        echo &quot;    Consider using remote state for production&quot;\n    fi\n    \n    # Check for hardcoded secrets\n    if grep -r &quot;password\\s*=\\s*\\&quot;&quot; . --include=&quot;*.tf&quot; --include=&quot;*.tfvars&quot; 2&gt;/dev/null; then\n        echo &quot;âš ï¸  Potential hardcoded passwords found&quot;\n    fi\n    \n    # Check for large state file\n    if [[ -f &quot;terraform.tfstate&quot; ]]; then\n        state_size=$(stat -f%z &quot;terraform.tfstate&quot; 2&gt;/dev/null || stat -c%s &quot;terraform.tfstate&quot; 2&gt;/dev/null)\n        if [[ $state_size -gt 10485760 ]]; then  # 10MB\n            echo &quot;âš ï¸  Large state file detected ($(($state_size / 1024 / 1024))MB)&quot;\n            echo &quot;    Consider splitting into smaller configurations&quot;\n        fi\n    fi\n}\n\n# Debug mode information\ndebug_info() {\n    echo &quot;ðŸ“‹ Debug information...&quot;\n    \n    echo &quot;Working directory: $(pwd)&quot;\n    echo &quot;Terraform workspace: $(terraform workspace show)&quot;\n    echo &quot;Environment variables:&quot;\n    env | grep -E &quot;^(TF_|AWS_|ARM_|GOOGLE_)&quot; | sed &#039;s/=.*/=***/&#039; | sort\n}\n\n# Run all checks\nrun_all_checks() {\n    check_installation || return 1\n    check_configuration || return 1\n    check_providers\n    check_state || return 1\n    check_common_issues\n    debug_info\n}\n\n# Main execution\ncase &quot;${1:-all}&quot; in\n    &quot;installation&quot;)\n        check_installation\n        ;;\n    &quot;config&quot;)\n        check_configuration\n        ;;\n    &quot;providers&quot;)\n        check_providers\n        ;;\n    &quot;state&quot;)\n        check_state\n        ;;\n    &quot;common&quot;)\n        check_common_issues\n        ;;\n    &quot;debug&quot;)\n        debug_info\n        ;;\n    &quot;all&quot;)\n        run_all_checks\n        ;;\n    *)\n        echo &quot;Usage: $0 [installation|config|providers|state|common|debug|all]&quot;\n        exit 1\n        ;;\nesac\nEOF\n\nchmod +x scripts/troubleshoot-terraform.sh</code></pre>\n      </div>\n    </div>\n<h3 id=\"advanced-debugging\" class=\"mobile-header\">Advanced Debugging</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Advanced debugging techniques\ncat &gt; scripts/debug-terraform.sh &lt;&lt;&#039;EOF&#039;\n#!/bin/bash\n\n# Enable debug logging\nexport TF_LOG=DEBUG\nexport TF_LOG_PATH=&quot;terraform-debug-$(date +%Y%m%d_%H%M%S).log&quot;\n\n# Create debug session\ndebug_session() {\n    local operation=&quot;$1&quot;\n    shift\n    \n    echo &quot;ðŸ› Starting debug session for: $operation&quot;\n    echo &quot;Debug log: $TF_LOG_PATH&quot;\n    \n    # Capture detailed timing information\n    time terraform &quot;$operation&quot; &quot;$@&quot; 2&gt;&amp;1 | tee -a &quot;$TF_LOG_PATH&quot;\n    \n    local exit_code=${PIPESTATUS[0]}\n    \n    if [[ $exit_code -ne 0 ]]; then\n        echo &quot;âŒ Operation failed with exit code: $exit_code&quot;\n        echo &quot;ðŸ“„ Last 50 lines of debug log:&quot;\n        tail -50 &quot;$TF_LOG_PATH&quot;\n    else\n        echo &quot;âœ… Operation completed successfully&quot;\n    fi\n    \n    return $exit_code\n}\n\n# Analyze state file for issues\nanalyze_state() {\n    echo &quot;ðŸ” Analyzing state file...&quot;\n    \n    # Check for orphaned resources\n    echo &quot;Checking for potential orphaned resources...&quot;\n    terraform state list | while read resource; do\n        if ! terraform plan -target=&quot;$resource&quot; -detailed-exitcode &gt;/dev/null 2&gt;&amp;1; then\n            echo &quot;âš ï¸  Potential issue with resource: $resource&quot;\n        fi\n    done\n    \n    # Check for large resources in state\n    echo &quot;Checking for large resources...&quot;\n    terraform state pull | jq -r &#039;.resources[] | select(.instances[0].attributes | length &gt; 50) | .address&#039; 2&gt;/dev/null | head -10\n}\n\n# Provider debug information\ndebug_providers() {\n    echo &quot;ðŸ” Debugging provider issues...&quot;\n    \n    # Show provider configuration\n    terraform providers\n    \n    # Check provider cache\n    if [[ -d &quot;$HOME/.terraform.d/plugin-cache&quot; ]]; then\n        echo &quot;Provider cache contents:&quot;\n        ls -la &quot;$HOME/.terraform.d/plugin-cache&quot;\n    fi\n    \n    # Check for provider version conflicts\n    terraform version -json | jq &#039;.provider_selections&#039; 2&gt;/dev/null\n}\n\n# Network and API debugging\ndebug_network() {\n    echo &quot;ðŸŒ Debugging network connectivity...&quot;\n    \n    # Test connectivity to common endpoints\n    local endpoints=(\n        &quot;https://releases.hashicorp.com&quot;\n        &quot;https://registry.terraform.io&quot;\n        &quot;https://api.github.com&quot;\n        &quot;https://aws.amazon.com&quot;\n        &quot;https://management.azure.com&quot;\n        &quot;https://www.googleapis.com&quot;\n    )\n    \n    for endpoint in &quot;${endpoints[@]}&quot;; do\n        if curl -s --connect-timeout 5 &quot;$endpoint&quot; &gt;/dev/null; then\n            echo &quot;âœ… $endpoint - OK&quot;\n        else\n            echo &quot;âŒ $endpoint - FAILED&quot;\n        fi\n    done\n}\n\n# Performance analysis\nanalyze_performance() {\n    echo &quot;ðŸ“Š Analyzing Terraform performance...&quot;\n    \n    # Generate and analyze dependency graph\n    terraform graph &gt; dependency-graph.dot\n    \n    # Count resources by type\n    echo &quot;Resource distribution:&quot;\n    terraform state list | cut -d. -f1 | sort | uniq -c | sort -nr | head -10\n    \n    # Estimate plan time based on resources\n    resource_count=$(terraform state list | wc -l)\n    estimated_time=$((resource_count * 2))  # Rough estimate: 2 seconds per resource\n    echo &quot;Estimated plan time: ${estimated_time} seconds for $resource_count resources&quot;\n}\n\n# Usage\ncase &quot;${1:-help}&quot; in\n    &quot;session&quot;)\n        shift\n        debug_session &quot;$@&quot;\n        ;;\n    &quot;state&quot;)\n        analyze_state\n        ;;\n    &quot;providers&quot;)\n        debug_providers\n        ;;\n    &quot;network&quot;)\n        debug_network\n        ;;\n    &quot;performance&quot;)\n        analyze_performance\n        ;;\n    &quot;all&quot;)\n        debug_providers\n        debug_network\n        analyze_state\n        analyze_performance\n        ;;\n    &quot;help&quot;|*)\n        echo &quot;Usage: $0 [session|state|providers|network|performance|all]&quot;\n        echo &quot;&quot;\n        echo &quot;  session &lt;operation&gt; [args]  - Debug specific Terraform operation&quot;\n        echo &quot;  state                       - Analyze state file for issues&quot;\n        echo &quot;  providers                   - Debug provider configuration&quot;\n        echo &quot;  network                     - Test network connectivity&quot;\n        echo &quot;  performance                 - Analyze performance characteristics&quot;\n        echo &quot;  all                         - Run all debug checks&quot;\n        ;;\nesac\nEOF\n\nchmod +x scripts/debug-terraform.sh</code></pre>\n      </div>\n    </div>\n<h2 id=\"maintenance\" class=\"mobile-header\">Maintenance</h2>\n<h3 id=\"update-procedures\" class=\"mobile-header\">Update Procedures</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Terraform update script\ncat &gt; scripts/update-terraform.sh &lt;&lt;&#039;EOF&#039;\n#!/bin/bash\n\nCURRENT_VERSION=$(terraform version -json | jq -r &#039;.terraform_version&#039;)\necho &quot;Current Terraform version: $CURRENT_VERSION&quot;\n\n# Check for latest version\ncheck_latest_version() {\n    local latest_version\n    latest_version=$(curl -s https://api.github.com/repos/hashicorp/terraform/releases/latest | jq -r &#039;.tag_name&#039; | sed &#039;s/v//&#039;)\n    echo &quot;Latest Terraform version: $latest_version&quot;\n    \n    if [[ &quot;$CURRENT_VERSION&quot; != &quot;$latest_version&quot; ]]; then\n        echo &quot;âš ï¸  Update available: $CURRENT_VERSION â†’ $latest_version&quot;\n        return 1\n    else\n        echo &quot;âœ… Terraform is up to date&quot;\n        return 0\n    fi\n}\n\n# Update using package manager\nupdate_terraform() {\n    echo &quot;ðŸ”„ Updating Terraform...&quot;\n    \n    if command -v apt &amp;&gt;/dev/null; then\n        sudo apt update &amp;&amp; sudo apt upgrade terraform\n    elif command -v yum &amp;&gt;/dev/null; then\n        sudo yum update terraform\n    elif command -v dnf &amp;&gt;/dev/null; then\n        sudo dnf update terraform\n    elif command -v pacman &amp;&gt;/dev/null; then\n        sudo pacman -Syu terraform\n    elif command -v zypper &amp;&gt;/dev/null; then\n        sudo zypper update terraform\n    elif command -v brew &amp;&gt;/dev/null; then\n        brew upgrade terraform\n    else\n        echo &quot;âŒ No supported package manager found&quot;\n        echo &quot;ðŸ’¡ Please update manually from: https://releases.hashicorp.com/terraform/&quot;\n        return 1\n    fi\n}\n\n# Update providers\nupdate_providers() {\n    echo &quot;ðŸ”„ Updating providers...&quot;\n    terraform init -upgrade\n}\n\n# Verify update\nverify_update() {\n    echo &quot;ðŸ” Verifying update...&quot;\n    \n    terraform version\n    \n    # Test basic functionality\n    if terraform validate; then\n        echo &quot;âœ… Update verification successful&quot;\n    else\n        echo &quot;âŒ Update verification failed&quot;\n        return 1\n    fi\n}\n\n# Main update process\nmain() {\n    if check_latest_version; then\n        exit 0\n    fi\n    \n    echo &quot;Proceed with update? (y/N)&quot;\n    read -r response\n    \n    if [[ &quot;$response&quot; =~ ^[Yy]$ ]]; then\n        update_terraform || exit 1\n        update_providers || exit 1\n        verify_update || exit 1\n        echo &quot;ðŸŽ‰ Terraform update completed successfully&quot;\n    else\n        echo &quot;Update cancelled&quot;\n    fi\n}\n\nmain &quot;$@&quot;\nEOF\n\nchmod +x scripts/update-terraform.sh</code></pre>\n      </div>\n    </div>\n<h3 id=\"maintenance-tasks\" class=\"mobile-header\">Maintenance Tasks</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Comprehensive maintenance script\ncat &gt; scripts/terraform-maintenance.sh &lt;&lt;&#039;EOF&#039;\n#!/bin/bash\n\nMAINTENANCE_LOG=&quot;/var/log/terraform-maintenance-$(date +%Y%m%d_%H%M%S).log&quot;\n\nlog() {\n    echo &quot;$(date &#039;+%Y-%m-%d %H:%M:%S&#039;) - $1&quot; | tee -a &quot;$MAINTENANCE_LOG&quot;\n}\n\n# Cleanup old plan files\ncleanup_plans() {\n    log &quot;ðŸ§¹ Cleaning up old plan files...&quot;\n    find . -name &quot;*.tfplan&quot; -mtime +7 -delete\n    find . -name &quot;*.tfplan.json&quot; -mtime +7 -delete\n    log &quot;âœ… Plan file cleanup completed&quot;\n}\n\n# Cleanup provider cache\ncleanup_provider_cache() {\n    log &quot;ðŸ§¹ Cleaning up provider cache...&quot;\n    if [[ -d &quot;$HOME/.terraform.d/plugin-cache&quot; ]]; then\n        # Remove providers older than 30 days\n        find &quot;$HOME/.terraform.d/plugin-cache&quot; -type f -mtime +30 -delete\n        \n        # Remove empty directories\n        find &quot;$HOME/.terraform.d/plugin-cache&quot; -type d -empty -delete\n        \n        cache_size=$(du -sh &quot;$HOME/.terraform.d/plugin-cache&quot; 2&gt;/dev/null | cut -f1)\n        log &quot;âœ… Provider cache cleanup completed - current size: $cache_size&quot;\n    fi\n}\n\n# Validate all configurations\nvalidate_configurations() {\n    log &quot;ðŸ” Validating all configurations...&quot;\n    \n    local validation_failed=false\n    \n    # Find all directories with Terraform files\n    find . -name &quot;*.tf&quot; -exec dirname {} \\; | sort -u | while read -r dir; do\n        log &quot;Validating: $dir&quot;\n        cd &quot;$dir&quot; || continue\n        \n        if terraform validate; then\n            log &quot;âœ… $dir validation passed&quot;\n        else\n            log &quot;âŒ $dir validation failed&quot;\n            validation_failed=true\n        fi\n        \n        cd - &gt; /dev/null\n    done\n    \n    if [[ &quot;$validation_failed&quot; == &quot;true&quot; ]]; then\n        log &quot;âš ï¸  Some validations failed - please review&quot;\n    else\n        log &quot;âœ… All validations passed&quot;\n    fi\n}\n\n# Check for deprecated features\ncheck_deprecated() {\n    log &quot;ðŸ” Checking for deprecated features...&quot;\n    \n    # Check for deprecated syntax\n    local deprecated_patterns=(\n        &quot;provider\\s+\\&quot;[^\\&quot;]+\\&quot;\\s+{&quot; # Old provider syntax\n        &quot;terraform\\s+{[^}]*version\\s*=&quot; # Old terraform version constraints\n        &quot;ignore_changes\\s*=&quot; # Old ignore_changes syntax\n    )\n    \n    for pattern in &quot;${deprecated_patterns[@]}&quot;; do\n        if grep -r &quot;$pattern&quot; . --include=&quot;*.tf&quot; 2&gt;/dev/null; then\n            log &quot;âš ï¸  Deprecated pattern found: $pattern&quot;\n        fi\n    done\n    \n    log &quot;âœ… Deprecation check completed&quot;\n}\n\n# Security audit\nsecurity_audit() {\n    log &quot;ðŸ”’ Performing security audit...&quot;\n    \n    # Check for potential security issues\n    local security_issues=()\n    \n    # Check for hardcoded secrets\n    if grep -r -i &quot;password\\s*=\\s*\\&quot;[^$]&quot; . --include=&quot;*.tf&quot; --include=&quot;*.tfvars&quot; 2&gt;/dev/null; then\n        security_issues+=(&quot;Potential hardcoded passwords&quot;)\n    fi\n    \n    # Check for public access\n    if grep -r &quot;0.0.0.0/0&quot; . --include=&quot;*.tf&quot; 2&gt;/dev/null; then\n        security_issues+=(&quot;Public access (0.0.0.0/0) found&quot;)\n    fi\n    \n    # Check for unencrypted resources\n    if grep -r &quot;encrypt.*=.*false&quot; . --include=&quot;*.tf&quot; 2&gt;/dev/null; then\n        security_issues+=(&quot;Unencrypted resources found&quot;)\n    fi\n    \n    if [[ ${#security_issues[@]} -gt 0 ]]; then\n        log &quot;âš ï¸  Security issues found:&quot;\n        for issue in &quot;${security_issues[@]}&quot;; do\n            log &quot;  - $issue&quot;\n        done\n    else\n        log &quot;âœ… No obvious security issues found&quot;\n    fi\n}\n\n# State health check\nstate_health_check() {\n    log &quot;ðŸ¥ Performing state health check...&quot;\n    \n    # Check state file size\n    if [[ -f &quot;terraform.tfstate&quot; ]]; then\n        state_size=$(stat -f%z &quot;terraform.tfstate&quot; 2&gt;/dev/null || stat -c%s &quot;terraform.tfstate&quot; 2&gt;/dev/null)\n        state_size_mb=$((state_size / 1024 / 1024))\n        \n        if [[ $state_size_mb -gt 50 ]]; then\n            log &quot;âš ï¸  Large state file detected: ${state_size_mb}MB&quot;\n        else\n            log &quot;âœ… State file size OK: ${state_size_mb}MB&quot;\n        fi\n    fi\n    \n    # Check for drift\n    if terraform plan -detailed-exitcode &gt; /dev/null 2&gt;&amp;1; then\n        log &quot;âœ… No infrastructure drift detected&quot;\n    else\n        exit_code=$?\n        if [[ $exit_code -eq 2 ]]; then\n            log &quot;âš ï¸  Infrastructure drift detected&quot;\n        else\n            log &quot;âŒ Error checking for drift&quot;\n        fi\n    fi\n}\n\n# Generate maintenance report\ngenerate_report() {\n    log &quot;ðŸ“Š Generating maintenance report...&quot;\n    \n    local report_file=&quot;/tmp/terraform-maintenance-report-$(date +%Y%m%d_%H%M%S).md&quot;\n    \n    cat &gt; &quot;$report_file&quot; &lt;&lt;EOF\n# Terraform Maintenance Report\n\n**Date:** $(date)\n**Duration:** $((SECONDS / 60)) minutes\n\n## Summary\n\n- Configuration validation: $(grep &quot;validation&quot; &quot;$MAINTENANCE_LOG&quot; | grep -c &quot;passed&quot;)\n- Security audit: Completed\n- State health check: Completed\n- Cleanup operations: Completed\n\n## Recommendations\n\n$(grep &quot;âš ï¸&quot; &quot;$MAINTENANCE_LOG&quot; | sed &#039;s/.*âš ï¸  /- /&#039;)\n\n## Full Log\n\n\\`\\`\\`\n$(cat &quot;$MAINTENANCE_LOG&quot;)\n\\`\\`\\`\nEOF\n    \n    log &quot;ðŸ“„ Maintenance report generated: $report_file&quot;\n    \n    # Email report if configured\n    if [[ -n &quot;$MAINTENANCE_EMAIL&quot; ]]; then\n        mail -s &quot;Terraform Maintenance Report - $(date)&quot; &quot;$MAINTENANCE_EMAIL&quot; &lt; &quot;$report_file&quot;\n        log &quot;ðŸ“§ Report emailed to: $MAINTENANCE_EMAIL&quot;\n    fi\n}\n\n# Main maintenance routine\nmain() {\n    log &quot;ðŸš€ Starting Terraform maintenance...&quot;\n    \n    cleanup_plans\n    cleanup_provider_cache\n    validate_configurations\n    check_deprecated\n    security_audit\n    state_health_check\n    generate_report\n    \n    log &quot;ðŸŽ‰ Terraform maintenance completed&quot;\n    log &quot;ðŸ“Š Total runtime: $((SECONDS / 60)) minutes&quot;\n}\n\n# Run maintenance\nmain &quot;$@&quot;\nEOF\n\nchmod +x scripts/terraform-maintenance.sh\n\n# Schedule maintenance with cron\ncat &gt; scripts/schedule-maintenance.sh &lt;&lt;&#039;EOF&#039;\n#!/bin/bash\n\n# Add to crontab for weekly maintenance\n(crontab -l 2&gt;/dev/null; echo &quot;0 2 * * 0 /path/to/terraform-maintenance.sh&quot;) | crontab -\n\necho &quot;âœ… Weekly maintenance scheduled for Sundays at 2 AM&quot;\nEOF\n\nchmod +x scripts/schedule-maintenance.sh</code></pre>\n      </div>\n    </div>\n<h2 id=\"integration-examples\" class=\"mobile-header\">Integration Examples</h2>\n<h3 id=\"cicd-pipeline-integration\" class=\"mobile-header\">CI/CD Pipeline Integration</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># GitHub Actions workflow\nmkdir -p .github/workflows\ncat &gt; .github/workflows/terraform.yml &lt;&lt;EOF\nname: Terraform Multi-Cloud Deployment\n\non:\n  push:\n    branches: [ main, develop ]\n  pull_request:\n    branches: [ main ]\n\nenv:\n  TF_VERSION: 1.6.4\n\njobs:\n  terraform:\n    runs-on: ubuntu-latest\n    strategy:\n      matrix:\n        environment: [development, staging, production]\n        \n    steps:\n    - name: Checkout code\n      uses: actions/checkout@v4\n    \n    - name: Setup Terraform\n      uses: hashicorp/setup-terraform@v3\n      with:\n        terraform_version: \\${{ env.TF_VERSION }}\n        cli_config_credentials_token: \\${{ secrets.TF_CLOUD_TOKEN }}\n    \n    - name: Configure AWS credentials\n      uses: aws-actions/configure-aws-credentials@v4\n      with:\n        aws-access-key-id: \\${{ secrets.AWS_ACCESS_KEY_ID }}\n        aws-secret-access-key: \\${{ secrets.AWS_SECRET_ACCESS_KEY }}\n        aws-region: us-west-2\n    \n    - name: Terraform Format Check\n      run: terraform fmt -check -recursive\n    \n    - name: Terraform Initialize\n      run: terraform init\n      working-directory: environments/\\${{ matrix.environment }}\n    \n    - name: Terraform Validate\n      run: terraform validate\n      working-directory: environments/\\${{ matrix.environment }}\n    \n    - name: Terraform Plan\n      run: terraform plan -var-file=&quot;\\${{ matrix.environment }}.tfvars&quot;\n      working-directory: environments/\\${{ matrix.environment }}\n    \n    - name: Security Scan with Checkov\n      uses: bridgecrewio/checkov-action@master\n      with:\n        directory: .\n        framework: terraform\n        output_format: sarif\n        output_file_path: checkov.sarif\n    \n    - name: Upload Checkov results\n      uses: github/codeql-action/upload-sarif@v2\n      if: always()\n      with:\n        sarif_file: checkov.sarif\n    \n    - name: Terraform Apply (Production)\n      if: github.ref == &#039;refs/heads/main&#039; &amp;&amp; matrix.environment == &#039;production&#039;\n      run: terraform apply -auto-approve -var-file=&quot;production.tfvars&quot;\n      working-directory: environments/production\nEOF</code></pre>\n      </div>\n    </div>\n<h3 id=\"gitlab-ci-integration\" class=\"mobile-header\">GitLab CI Integration</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\">cat &gt; .gitlab-ci.yml &lt;&lt;EOF\nstages:\n  - validate\n  - plan\n  - apply\n  - destroy\n\nvariables:\n  TF_ROOT: \\${CI_PROJECT_DIR}\n  TF_VERSION: &quot;1.6.4&quot;\n  TF_IN_AUTOMATION: &quot;true&quot;\n\ncache:\n  key: &quot;\\${TF_ROOT}&quot;\n  paths:\n    - \\${TF_ROOT}/.terraform\n\nbefore_script:\n  - cd \\${TF_ROOT}\n  - terraform version\n  - terraform init\n\nvalidate:\n  stage: validate\n  script:\n    - terraform fmt -check -recursive\n    - terraform validate\n    - |\n      for dir in environments/*/; do\n        cd &quot;\\$dir&quot;\n        terraform validate\n        cd -\n      done\n  rules:\n    - if: &#039;\\$CI_MERGE_REQUEST_IID&#039;\n    - if: &#039;\\$CI_COMMIT_BRANCH == \\$CI_DEFAULT_BRANCH&#039;\n\nplan:production:\n  stage: plan\n  script:\n    - cd environments/production\n    - terraform plan -var-file=&quot;production.tfvars&quot; -out=&quot;production.tfplan&quot;\n  artifacts:\n    paths:\n      - environments/production/production.tfplan\n    expire_in: 1 week\n  rules:\n    - if: &#039;\\$CI_COMMIT_BRANCH == \\$CI_DEFAULT_BRANCH&#039;\n\napply:production:\n  stage: apply\n  script:\n    - cd environments/production\n    - terraform apply -input=false &quot;production.tfplan&quot;\n  dependencies:\n    - plan:production\n  rules:\n    - if: &#039;\\$CI_COMMIT_BRANCH == \\$CI_DEFAULT_BRANCH&#039;\n      when: manual\nEOF</code></pre>\n      </div>\n    </div>\n<h3 id=\"jenkins-pipeline\" class=\"mobile-header\">Jenkins Pipeline</h3>\n<div class=\"mobile-code-block\" data-language=\"groovy\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">groovy</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-groovy\">// Jenkinsfile\npipeline {\n    agent any\n    \n    environment {\n        TF_VERSION = &#039;1.6.4&#039;\n        AWS_DEFAULT_REGION = &#039;us-west-2&#039;\n    }\n    \n    stages {\n        stage(&#039;Checkout&#039;) {\n            steps {\n                checkout scm\n            }\n        }\n        \n        stage(&#039;Setup&#039;) {\n            steps {\n                sh &#039;&#039;&#039;\n                    # Install Terraform if not present\n                    if ! command -v terraform &amp;&gt; /dev/null; then\n                        wget https://releases.hashicorp.com/terraform/${TF_VERSION}/terraform_${TF_VERSION}_linux_amd64.zip\n                        unzip terraform_${TF_VERSION}_linux_amd64.zip\n                        chmod +x terraform\n                        sudo mv terraform /usr/local/bin/\n                    fi\n                    \n                    terraform version\n                &#039;&#039;&#039;\n            }\n        }\n        \n        stage(&#039;Validate&#039;) {\n            parallel {\n                stage(&#039;Format Check&#039;) {\n                    steps {\n                        sh &#039;terraform fmt -check -recursive&#039;\n                    }\n                }\n                stage(&#039;Configuration Validation&#039;) {\n                    steps {\n                        sh &#039;&#039;&#039;\n                            for dir in environments/*/; do\n                                cd &quot;$dir&quot;\n                                terraform init\n                                terraform validate\n                                cd -\n                            done\n                        &#039;&#039;&#039;\n                    }\n                }\n                stage(&#039;Security Scan&#039;) {\n                    steps {\n                        sh &#039;&#039;&#039;\n                            # Install and run Checkov\n                            pip3 install checkov\n                            checkov --framework terraform --directory .\n                        &#039;&#039;&#039;\n                    }\n                }\n            }\n        }\n        \n        stage(&#039;Plan&#039;) {\n            steps {\n                script {\n                    def environments = [&#039;development&#039;, &#039;staging&#039;, &#039;production&#039;]\n                    def planResults = [:]\n                    \n                    environments.each { env -&gt;\n                        planResults[env] = {\n                            dir(&quot;environments/${env}&quot;) {\n                                sh &quot;&quot;&quot;\n                                    terraform init\n                                    terraform plan -var-file=&quot;${env}.tfvars&quot; -out=&quot;${env}.tfplan&quot;\n                                &quot;&quot;&quot;\n                            }\n                        }\n                    }\n                    \n                    parallel planResults\n                }\n            }\n        }\n        \n        stage(&#039;Apply&#039;) {\n            when {\n                branch &#039;main&#039;\n            }\n            steps {\n                script {\n                    input message: &#039;Apply Terraform changes?&#039;, ok: &#039;Apply&#039;\n                    \n                    dir(&#039;environments/production&#039;) {\n                        sh &#039;terraform apply -input=false production.tfplan&#039;\n                    }\n                }\n            }\n        }\n    }\n    \n    post {\n        always {\n            archiveArtifacts artifacts: &#039;environments/**/*.tfplan&#039;, fingerprint: true\n            publishHTML([\n                allowMissing: false,\n                alwaysLinkToLastBuild: true,\n                keepAll: true,\n                reportDir: &#039;checkov-report&#039;,\n                reportFiles: &#039;index.html&#039;,\n                reportName: &#039;Checkov Security Report&#039;\n            ])\n        }\n        failure {\n            emailext (\n                subject: &quot;Terraform Pipeline Failed: ${env.JOB_NAME} - ${env.BUILD_NUMBER}&quot;,\n                body: &quot;The Terraform pipeline has failed. Please check the build logs for details.&quot;,\n                to: &quot;${env.CHANGE_AUTHOR_EMAIL}&quot;\n            )\n        }\n    }\n}</code></pre>\n      </div>\n    </div>\n<h2 id=\"additional-resources\" class=\"mobile-header\">Additional Resources</h2>\n<li class=\"mobile-list-item\"><a href=\"https://developer.hashicorp.com/terraform/docs\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">Official Terraform Documentation</a></li>\n<li class=\"mobile-list-item\"><a href=\"https://registry.terraform.io/\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">Terraform Registry</a></li>\n<li class=\"mobile-list-item\"><a href=\"https://developer.hashicorp.com/terraform/cloud-docs/recommended-practices\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">Terraform Best Practices</a></li>\n<li class=\"mobile-list-item\"><a href=\"https://developer.hashicorp.com/terraform/tutorials/aws-get-started\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">Multi-Cloud Architecture Guide</a></li>\n<li class=\"mobile-list-item\"><a href=\"https://developer.hashicorp.com/terraform/language/values/sensitive\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">Security Best Practices</a></li>\n<li class=\"mobile-list-item\"><a href=\"https://registry.terraform.io/providers/hashicorp/aws/latest/docs\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">AWS Provider Documentation</a></li>\n<li class=\"mobile-list-item\"><a href=\"https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">Azure Provider Documentation</a></li>\n<li class=\"mobile-list-item\"><a href=\"https://registry.terraform.io/providers/hashicorp/google/latest/docs\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">GCP Provider Documentation</a></li>\n<li class=\"mobile-list-item\"><a href=\"https://discuss.hashicorp.com/c/terraform-core\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">Terraform Community Forum</a></li>\n<li class=\"mobile-list-item\"><a href=\"https://learn.hashicorp.com/terraform\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">HashiCorp Learn Terraform</a></li>\n<p class=\"mobile-paragraph\">---</p>\n<p class=\"mobile-paragraph\"><strong>Note:</strong> This guide is part of the <a href=\"https://howtomgr.github.io\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">HowToMgr</a> collection. Always refer to official documentation for the most up-to-date information.</p>","readTime":"33 min","wordCount":6439,"lastBuilt":"2025-09-14T18:11:58.404Z"},{"name":"traefik","displayName":"Traefik","slug":"traefik","description":"Repo for traefik","category":"web-server","language":null,"stars":0,"forks":0,"topics":[],"githubUrl":"https://github.com/howtomgr/traefik","updatedAt":"2025-09-08T03:17:15Z","createdAt":"2025-09-08T03:17:04Z","readmeRaw":"## ðŸ‘‹ Welcome to traefik ðŸš€  \n\ntraefik README  \n  \n  \n## Author  \n\nðŸ¤– casjay: [Github](https://github.com/casjay) ðŸ¤–  \n","readmeHtml":"<h2 id=\"welcome-to-traefik\" class=\"mobile-header\">ðŸ‘‹ Welcome to traefik ðŸš€  </h2>\n<p class=\"mobile-paragraph\">traefik README  </p>\n<h2 id=\"author\" class=\"mobile-header\">Author  </h2>\n<p class=\"mobile-paragraph\">ðŸ¤– casjay: <a href=\"https://github.com/casjay\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">Github</a> ðŸ¤–  </p>","readTime":"1 min","wordCount":15,"lastBuilt":"2025-09-14T18:12:10.573Z"},{"name":"transmission","displayName":"Transmission","slug":"transmission","description":"Repo for transmission","category":"infrastructure","language":null,"stars":0,"forks":0,"topics":[],"githubUrl":"https://github.com/howtomgr/transmission","updatedAt":"2025-09-08T03:17:27Z","createdAt":"2025-09-08T03:17:17Z","readmeRaw":"## ðŸ‘‹ Welcome to transmission ðŸš€  \n\ntransmission README  \n  \n  \n## Author  \n\nðŸ¤– casjay: [Github](https://github.com/casjay) ðŸ¤–  \n","readmeHtml":"<h2 id=\"welcome-to-transmission\" class=\"mobile-header\">ðŸ‘‹ Welcome to transmission ðŸš€  </h2>\n<p class=\"mobile-paragraph\">transmission README  </p>\n<h2 id=\"author\" class=\"mobile-header\">Author  </h2>\n<p class=\"mobile-paragraph\">ðŸ¤– casjay: <a href=\"https://github.com/casjay\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">Github</a> ðŸ¤–  </p>","readTime":"1 min","wordCount":15,"lastBuilt":"2025-09-14T18:12:10.323Z"},{"name":"truenas-scale","displayName":"Truenas Scale","slug":"truenas-scale","description":"Repo for truenas-scale","category":"infrastructure","language":null,"stars":0,"forks":0,"topics":[],"githubUrl":"https://github.com/howtomgr/truenas-scale","updatedAt":"2025-09-08T03:17:40Z","createdAt":"2025-09-08T03:17:30Z","readmeRaw":"## ðŸ‘‹ Welcome to truenas-scale ðŸš€  \n\ntruenas-scale README  \n  \n  \n## Author  \n\nðŸ¤– casjay: [Github](https://github.com/casjay) ðŸ¤–  \n","readmeHtml":"<h2 id=\"welcome-to-truenas-scale\" class=\"mobile-header\">ðŸ‘‹ Welcome to truenas-scale ðŸš€  </h2>\n<p class=\"mobile-paragraph\">truenas-scale README  </p>\n<h2 id=\"author\" class=\"mobile-header\">Author  </h2>\n<p class=\"mobile-paragraph\">ðŸ¤– casjay: <a href=\"https://github.com/casjay\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">Github</a> ðŸ¤–  </p>","readTime":"1 min","wordCount":15,"lastBuilt":"2025-09-14T18:12:10.052Z"},{"name":"unifi-controller","displayName":"Unifi Controller","slug":"unifi-controller","description":"Repo for unifi-controller","category":"infrastructure","language":null,"stars":0,"forks":0,"topics":[],"githubUrl":"https://github.com/howtomgr/unifi-controller","updatedAt":"2025-09-08T03:17:53Z","createdAt":"2025-09-08T03:17:43Z","readmeRaw":"## ðŸ‘‹ Welcome to unifi-controller ðŸš€  \n\nunifi-controller README  \n  \n  \n## Author  \n\nðŸ¤– casjay: [Github](https://github.com/casjay) ðŸ¤–  \n","readmeHtml":"<h2 id=\"welcome-to-unifi-controller\" class=\"mobile-header\">ðŸ‘‹ Welcome to unifi-controller ðŸš€  </h2>\n<p class=\"mobile-paragraph\">unifi-controller README  </p>\n<h2 id=\"author\" class=\"mobile-header\">Author  </h2>\n<p class=\"mobile-paragraph\">ðŸ¤– casjay: <a href=\"https://github.com/casjay\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">Github</a> ðŸ¤–  </p>","readTime":"1 min","wordCount":15,"lastBuilt":"2025-09-14T18:12:09.777Z"},{"name":"vault","displayName":"Vault","slug":"vault","description":"Repo for vault","category":"security","language":null,"stars":0,"forks":0,"topics":[],"githubUrl":"https://github.com/howtomgr/vault","updatedAt":"2025-09-14T01:31:19Z","createdAt":"2025-09-08T03:17:55Z","readmeRaw":"# HashiCorp Vault Installation Guide\n\nEnterprise-grade secrets management platform for securely storing and accessing API keys, passwords, certificates, and other sensitive data. Industry standard for secrets management with advanced security features.\n\n## Prerequisites\n\n- Linux system (any modern distribution)\n- Root or sudo access\n- 4GB RAM minimum, 8GB+ recommended for production\n- Persistent storage for Vault data (encrypted disk recommended)\n- TLS certificates for production deployment\n- HSM (optional, for enterprise compliance)\n\n## Installation\n\n### Using Package Manager (Recommended)\n\n#### Ubuntu/Debian\n```bash\n# Add HashiCorp GPG key\nwget -O- https://apt.releases.hashicorp.com/gpg | sudo gpg --dearmor -o /usr/share/keyrings/hashicorp-archive-keyring.gpg\n\n# Add HashiCorp repository\necho \"deb [signed-by=/usr/share/keyrings/hashicorp-archive-keyring.gpg] https://apt.releases.hashicorp.com $(lsb_release -cs) main\" | sudo tee /etc/apt/sources.list.d/hashicorp.list\n\n# Update and install Vault\nsudo apt update\nsudo apt install -y vault\n\n# Create vault user and directories\nsudo useradd --system --home /etc/vault.d --shell /bin/false vault\nsudo mkdir -p /opt/vault/{data,logs,tls} /etc/vault.d\nsudo chown -R vault:vault /opt/vault /etc/vault.d\n```\n\n#### RHEL/CentOS/Rocky Linux/AlmaLinux\n```bash\n# Add HashiCorp repository\nsudo yum install -y yum-utils\nsudo yum-config-manager --add-repo https://rpm.releases.hashicorp.com/RHEL/hashicorp.repo\n\n# Install Vault\nsudo yum install -y vault\n\n# Create vault user and directories\nsudo useradd --system --home /etc/vault.d --shell /bin/false vault\nsudo mkdir -p /opt/vault/{data,logs,tls} /etc/vault.d\nsudo chown -R vault:vault /opt/vault /etc/vault.d\n```\n\n#### Fedora\n```bash\n# Add HashiCorp repository\nsudo dnf install -y dnf-plugins-core\nsudo dnf config-manager --add-repo https://rpm.releases.hashicorp.com/fedora/hashicorp.repo\n\n# Install Vault\nsudo dnf install -y vault\n\n# Setup directories and user\nsudo useradd --system --home /etc/vault.d --shell /bin/false vault\nsudo mkdir -p /opt/vault/{data,logs,tls} /etc/vault.d\nsudo chown -R vault:vault /opt/vault /etc/vault.d\n```\n\n#### Arch Linux\n```bash\n# Install from AUR\nyay -S vault\n\n# Or from community repository\nsudo pacman -Syu vault\n\n# Setup vault user and directories\nsudo useradd --system --home /etc/vault.d --shell /bin/false vault\nsudo mkdir -p /opt/vault/{data,logs,tls} /etc/vault.d\nsudo chown -R vault:vault /opt/vault /etc/vault.d\n```\n\n### Manual Binary Installation\n```bash\n# Download latest Vault\nVAULT_VERSION=\"1.15.2\"\ncd /tmp\nwget https://releases.hashicorp.com/vault/${VAULT_VERSION}/vault_${VAULT_VERSION}_linux_amd64.zip\n\n# Install unzip if needed\nsudo apt install -y unzip  # Ubuntu/Debian\nsudo yum install -y unzip  # RHEL/CentOS\nsudo pacman -S unzip       # Arch Linux\n\n# Extract and install\nunzip vault_${VAULT_VERSION}_linux_amd64.zip\nsudo mv vault /usr/local/bin/\nsudo chmod +x /usr/local/bin/vault\n\n# Create vault user\nsudo useradd --system --home /etc/vault.d --shell /bin/false vault\n\n# Create directories\nsudo mkdir -p /opt/vault/{data,logs,tls} /etc/vault.d\nsudo chown -R vault:vault /opt/vault /etc/vault.d\n\n# Verify installation\nvault version\n\n# Clean up\nrm vault_${VAULT_VERSION}_linux_amd64.zip\n```\n\n### Using Docker\n```bash\n# Create directories for persistent data\nmkdir -p ~/vault/{data,config,logs,tls}\n\n# Generate TLS certificates for Docker\nopenssl req -x509 -nodes -newkey rsa:4096 -keyout ~/vault/tls/vault.key -out ~/vault/tls/vault.crt -days 365 -subj \"/C=US/ST=State/L=City/O=Organization/CN=vault.example.com\"\n\n# Create production-ready configuration\ncat > ~/vault/config/vault.hcl <<EOF\nui = true\ndisable_mlock = false\n\n# Storage backend\nstorage \"file\" {\n  path = \"/vault/data\"\n}\n\n# HTTPS listener\nlistener \"tcp\" {\n  address       = \"0.0.0.0:8200\"\n  tls_cert_file = \"/vault/tls/vault.crt\"\n  tls_key_file  = \"/vault/tls/vault.key\"\n  tls_min_version = \"tls12\"\n}\n\n# Cluster configuration\napi_addr = \"https://vault.example.com:8200\"\ncluster_addr = \"https://vault.example.com:8201\"\n\n# Logging\nlog_level = \"Info\"\nlog_file  = \"/vault/logs/vault.log\"\nlog_rotate_duration = \"24h\"\nlog_rotate_max_files = 15\n\n# Telemetry\ntelemetry {\n  prometheus_retention_time = \"30s\"\n  disable_hostname = true\n}\n\n# Enterprise features (if using Vault Enterprise)\nlicense_path = \"/vault/license/vault.hclic\"\n\n# Performance replication (Enterprise)\nreplication {\n  resolver_discover_servers = false\n}\nEOF\n\n# Run Vault container with security settings\ndocker run -d \\\n  --name vault \\\n  --restart unless-stopped \\\n  --cap-add=IPC_LOCK \\\n  --ulimit memlock=-1:-1 \\\n  -p 8200:8200 \\\n  -v ~/vault/data:/vault/data \\\n  -v ~/vault/config:/vault/config \\\n  -v ~/vault/logs:/vault/logs \\\n  -v ~/vault/tls:/vault/tls \\\n  vault:latest server -config=/vault/config/vault.hcl\n```\n\n## Production Configuration\n\n### Enterprise Production Configuration\n```bash\n# Create comprehensive production configuration\nsudo tee /etc/vault.d/vault.hcl > /dev/null <<EOF\n# Vault Enterprise Production Configuration\n\n# UI and basic settings\nui = true\ndisable_mlock = false\n\n# Storage backend - Consul (HA) or Integrated Storage (Raft)\nstorage \"raft\" {\n  path    = \"/opt/vault/data\"\n  node_id = \"vault-node-1\"\n\n  retry_join {\n    leader_api_addr = \"https://vault-node-2.example.com:8200\"\n  }\n  \n  retry_join {\n    leader_api_addr = \"https://vault-node-3.example.com:8200\"\n  }\n\n  # Enterprise: Performance replication\n  autopilot {\n    cleanup_dead_servers = true\n    last_contact_threshold = \"200ms\"\n    max_trailing_logs = 250\n    min_quorum = 3\n    server_stabilization_time = \"10s\"\n  }\n}\n\n# Alternative: Consul backend for HA\n# storage \"consul\" {\n#   address = \"127.0.0.1:8500\"\n#   path    = \"vault/\"\n#   service = \"vault\"\n#   check_timeout = \"5s\"\n#   disable_registration = false\n# }\n\n# HTTPS listener with modern TLS\nlistener \"tcp\" {\n  address       = \"0.0.0.0:8200\"\n  tls_cert_file = \"/opt/vault/tls/vault.crt\"\n  tls_key_file  = \"/opt/vault/tls/vault.key\"\n  tls_min_version = \"tls12\"\n  tls_cipher_suites = \"TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384,TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384,TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305,TLS_ECDHE_ECDSA_WITH_CHACHA20_POLY1305,TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256,TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256\"\n  tls_require_and_verify_client_cert = false\n  tls_client_ca_file = \"/opt/vault/tls/ca.crt\"\n}\n\n# Cluster listener for HA\nlistener \"tcp\" {\n  address = \"0.0.0.0:8201\" \n  cluster_address = \"0.0.0.0:8201\"\n  tls_cert_file = \"/opt/vault/tls/vault.crt\"\n  tls_key_file  = \"/opt/vault/tls/vault.key\"\n}\n\n# API and cluster addresses\napi_addr = \"https://vault.example.com:8200\"\ncluster_addr = \"https://vault.example.com:8201\"\n\n# Enterprise license\nlicense_path = \"/opt/vault/license/vault.hclic\"\n\n# Logging configuration\nlog_level = \"Info\"\nlog_file  = \"/opt/vault/logs/vault.log\"\nlog_rotate_duration = \"24h\"\nlog_rotate_max_files = 30\n\n# Telemetry and monitoring\ntelemetry {\n  prometheus_retention_time = \"30s\"\n  disable_hostname = true\n  usage_gauge_period = \"5m\"\n}\n\n# Seal configuration - Auto-unseal with cloud KMS (Enterprise)\nseal \"awskms\" {\n  region     = \"us-west-2\"\n  kms_key_id = \"arn:aws:kms:us-west-2:123456789012:key/12345678-1234-1234-1234-123456789012\"\n}\n\n# Alternative: Azure Key Vault\n# seal \"azurekeyvault\" {\n#   tenant_id      = \"46646709-b63e-4747-be42-516edeaf1e14\"\n#   client_id      = \"03dc33fc-16d9-4b77-8152-3ec568f8af6e\"\n#   client_secret  = \"DUJDS3...\"\n#   vault_name     = \"hc-vault\"\n#   key_name       = \"vault_key\"\n# }\n\n# Alternative: Google Cloud KMS\n# seal \"gcpckms\" {\n#   project     = \"vault-project\"\n#   region      = \"us-central1\"\n#   key_ring    = \"vault-keyring\"\n#   crypto_key  = \"vault-key\"\n# }\n\n# Performance replication (Enterprise)\nreplication {\n  resolver_discover_servers = false\n}\n\n# HSM configuration (Enterprise with HSM)\n# seal \"pkcs11\" {\n#   lib            = \"/usr/lib/softhsm/libsofthsm2.so\"\n#   slot           = \"0\"\n#   pin            = \"1234\"\n#   key_label      = \"vault-hsm-key\"\n#   hmac_key_label = \"vault-hsm-hmac-key\"\n# }\nEOF\n\nsudo chown vault:vault /etc/vault.d/vault.hcl\nsudo chmod 640 /etc/vault.d/vault.hcl\n```\n\n### Advanced TLS Configuration\n```bash\n# Generate production-grade TLS certificates\nsudo mkdir -p /opt/vault/tls\n\n# Create CA certificate\nsudo openssl genrsa -out /opt/vault/tls/ca-key.pem 4096\nsudo openssl req -new -x509 -days 3650 -key /opt/vault/tls/ca-key.pem -out /opt/vault/tls/ca.crt -subj \"/C=US/ST=State/L=City/O=Organization/CN=Vault-CA\"\n\n# Create server certificate\nsudo openssl genrsa -out /opt/vault/tls/vault-key.pem 4096\nsudo openssl req -new -key /opt/vault/tls/vault-key.pem -out /opt/vault/tls/vault.csr -subj \"/C=US/ST=State/L=City/O=Organization/CN=vault.example.com\"\n\n# Create certificate with SAN extensions\nsudo tee /opt/vault/tls/vault.conf > /dev/null <<EOF\n[req]\ndistinguished_name = req_distinguished_name\nreq_extensions = v3_req\n\n[req_distinguished_name]\n\n[v3_req]\nbasicConstraints = CA:FALSE\nkeyUsage = nonRepudiation, digitalSignature, keyEncipherment\nsubjectAltName = @alt_names\n\n[alt_names]\nDNS.1 = vault.example.com\nDNS.2 = vault-node-1.example.com\nDNS.3 = vault-node-2.example.com\nDNS.4 = vault-node-3.example.com\nDNS.5 = localhost\nIP.1 = 127.0.0.1\nIP.2 = 10.0.1.10\nIP.3 = 10.0.1.11\nIP.4 = 10.0.1.12\nEOF\n\nsudo openssl x509 -req -days 365 -in /opt/vault/tls/vault.csr -CA /opt/vault/tls/ca.crt -CAkey /opt/vault/tls/ca-key.pem -CAcreateserial -out /opt/vault/tls/vault.crt -extensions v3_req -extfile /opt/vault/tls/vault.conf\n\n# Set secure permissions\nsudo chmod 600 /opt/vault/tls/*-key.pem\nsudo chmod 644 /opt/vault/tls/*.crt\nsudo chown -R vault:vault /opt/vault/tls\n\n# For Let's Encrypt certificates (production)\nsudo apt install -y certbot  # Ubuntu/Debian\nsudo yum install -y certbot  # RHEL/CentOS\n\nsudo certbot certonly --standalone -d vault.example.com\nsudo cp /etc/letsencrypt/live/vault.example.com/fullchain.pem /opt/vault/tls/vault.crt\nsudo cp /etc/letsencrypt/live/vault.example.com/privkey.pem /opt/vault/tls/vault-key.pem\nsudo chown vault:vault /opt/vault/tls/vault.*\n```\n\n### Enterprise SystemD Service with Security Hardening\n```bash\nsudo tee /etc/systemd/system/vault.service > /dev/null <<EOF\n[Unit]\nDescription=HashiCorp Vault - A tool for managing secrets\nDocumentation=https://www.vaultproject.io/docs/\nRequires=network-online.target\nAfter=network-online.target\nConditionFileNotEmpty=/etc/vault.d/vault.hcl\nStartLimitIntervalSec=60\nStartLimitBurst=3\n\n[Service]\nType=notify\nUser=vault\nGroup=vault\nExecStart=/usr/local/bin/vault server -config=/etc/vault.d/vault.hcl\nExecReload=/bin/kill --signal HUP \\$MAINPID\nKillMode=process\nRestart=on-failure\nRestartSec=5\nTimeoutStopSec=30\nStartLimitInterval=60\nStartLimitBurst=3\n\n# File system isolation\nProtectSystem=full\nProtectHome=read-only\nPrivateTmp=yes\nPrivateDevices=yes\n\n# Secure computing\nNoNewPrivileges=yes\nSecureBits=keep-caps\nCapabilityBoundingSet=CAP_SYSLOG CAP_IPC_LOCK\n\n# Additional security features\nAmbientCapabilities=CAP_IPC_LOCK\nCapabilities=CAP_IPC_LOCK+ep\n\n# Resource limits\nLimitNOFILE=65536\nLimitMEMLOCK=infinity\nLimitCORE=0\n\n# Network isolation\nRestrictNamespaces=yes\nRestrictRealtime=yes\n\n# Read-only paths\nReadOnlyPaths=/etc /usr\n\n# Writable paths\nReadWritePaths=/opt/vault/data\nReadWritePaths=/opt/vault/logs\n\n[Install]\nWantedBy=multi-user.target\nEOF\n\nsudo systemctl daemon-reload\n```\n\n### High Availability Cluster Setup\n```bash\n# Configure HA cluster with Integrated Storage (Raft)\n# Node 1 configuration\nsudo tee /etc/vault.d/vault.hcl > /dev/null <<EOF\nui = true\ndisable_mlock = false\n\nstorage \"raft\" {\n  path    = \"/opt/vault/data\"\n  node_id = \"vault-node-1\"\n}\n\nlistener \"tcp\" {\n  address       = \"0.0.0.0:8200\"\n  tls_cert_file = \"/opt/vault/tls/vault.crt\"\n  tls_key_file  = \"/opt/vault/tls/vault-key.pem\"\n  tls_min_version = \"tls12\"\n}\n\nlistener \"tcp\" {\n  address       = \"0.0.0.0:8201\"\n  cluster_address = \"10.0.1.10:8201\"\n  tls_cert_file = \"/opt/vault/tls/vault.crt\"\n  tls_key_file  = \"/opt/vault/tls/vault-key.pem\"\n}\n\napi_addr = \"https://10.0.1.10:8200\"\ncluster_addr = \"https://10.0.1.10:8201\"\n\n# Enterprise features\nlicense_path = \"/opt/vault/license/vault.hclic\"\n\n# Auto-unseal with AWS KMS\nseal \"awskms\" {\n  region     = \"us-west-2\"\n  kms_key_id = \"arn:aws:kms:us-west-2:123456789012:key/vault-unseal-key\"\n}\n\n# Performance replication (Enterprise)\nreplication {\n  resolver_discover_servers = false\n}\nEOF\n\n# Initialize cluster on first node\nsudo systemctl start vault\nexport VAULT_ADDR='https://127.0.0.1:8200'\nexport VAULT_SKIP_VERIFY=true  # Only for self-signed certs\nvault operator init -recovery-shares=5 -recovery-threshold=3\n\n# Join additional nodes to cluster\n# Node 2 and 3: Add retry_join blocks to their vault.hcl\nsudo tee -a /etc/vault.d/vault.hcl > /dev/null <<EOF\n\nstorage \"raft\" {\n  path    = \"/opt/vault/data\"\n  node_id = \"vault-node-2\"  # Change to node-3 for third node\n  \n  retry_join {\n    leader_api_addr = \"https://10.0.1.10:8200\"\n  }\n}\nEOF\n```\n\n## Security Hardening (2024 Best Practices)\n\n### System-Level Security\n```bash\n# Disable swap (critical for security)\nsudo swapoff -a\nsudo sed -i '/ swap / s/^\\(.*\\)$/#\\1/g' /etc/fstab\n\n# Disable core dumps\necho '* hard core 0' | sudo tee -a /etc/security/limits.conf\necho '* soft core 0' | sudo tee -a /etc/security/limits.conf\necho 'vault hard core 0' | sudo tee -a /etc/security/limits.conf\necho 'vault soft core 0' | sudo tee -a /etc/security/limits.conf\n\n# Configure kernel parameters for security\nsudo tee -a /etc/sysctl.conf > /dev/null <<EOF\n# Vault security hardening\nkernel.dmesg_restrict = 1\nkernel.kptr_restrict = 2\nkernel.yama.ptrace_scope = 1\nfs.suid_dumpable = 0\nnet.ipv4.conf.all.send_redirects = 0\nnet.ipv4.conf.default.send_redirects = 0\nnet.ipv4.conf.all.accept_source_route = 0\nnet.ipv4.conf.default.accept_source_route = 0\nEOF\n\nsudo sysctl -p\n\n# SELinux configuration (RHEL/CentOS/Fedora)\nif command -v getenforce >/dev/null 2>&1; then\n    sudo setsebool -P authlogin_nsswitch_use_ldap 1\n    sudo setsebool -P allow_execheap 0\n    sudo setsebool -P allow_execmem 0\n    sudo setsebool -P allow_execmod 0\n    sudo setsebool -P allow_execstack 0\n    \n    # Custom SELinux policy for Vault\n    sudo tee vault.te > /dev/null <<EOF\nmodule vault 1.0;\n\nrequire {\n    type unconfined_t;\n    type vault_t;\n    class capability { ipc_lock sys_admin };\n    class process { setrlimit };\n}\n\n#============= vault_t ==============\nallow vault_t self:capability { ipc_lock sys_admin };\nallow vault_t self:process setrlimit;\nEOF\n\n    checkmodule -M -m -o vault.mod vault.te\n    semodule_package -o vault.pp -m vault.mod\n    sudo semodule -i vault.pp\nfi\n\n# AppArmor configuration (Ubuntu/Debian)\nif command -v apparmor_status >/dev/null 2>&1; then\n    sudo tee /etc/apparmor.d/vault > /dev/null <<EOF\n#include <tunables/global>\n\n/usr/local/bin/vault {\n  #include <abstractions/base>\n  #include <abstractions/nameservice>\n  #include <abstractions/ssl_certs>\n\n  capability ipc_lock,\n  capability setuid,\n  capability setgid,\n\n  /usr/local/bin/vault mr,\n  /etc/vault.d/** r,\n  /opt/vault/** rwk,\n  /proc/meminfo r,\n  /proc/sys/kernel/random/uuid r,\n  /sys/kernel/mm/transparent_hugepage/hpage_pmd_size r,\n\n  # Network access\n  network inet dgram,\n  network inet stream,\n\n  # Deny dangerous operations\n  deny /proc/kcore rwklx,\n  deny /proc/sysrq-trigger rwklx,\n  deny /proc/kmem rwklx,\n  deny /proc/mem rwklx,\n}\nEOF\n\n    sudo apparmor_parser -r /etc/apparmor.d/vault\nfi\n```\n\n### Firewall Configuration (Cross-Platform)\n```bash\n# UFW (Ubuntu/Debian)\nsudo ufw allow from 10.0.0.0/8 to any port 8200 comment 'Vault API - internal network only'\nsudo ufw allow from 10.0.0.0/8 to any port 8201 comment 'Vault cluster - internal network only'\nsudo ufw deny 8200 comment 'Block Vault API from public'\nsudo ufw deny 8201 comment 'Block Vault cluster from public'\nsudo ufw enable\n\n# Firewalld (RHEL/CentOS/Fedora)\nsudo firewall-cmd --permanent --new-zone=vault\nsudo firewall-cmd --permanent --zone=vault --add-source=10.0.0.0/8\nsudo firewall-cmd --permanent --zone=vault --add-port=8200/tcp\nsudo firewall-cmd --permanent --zone=vault --add-port=8201/tcp\nsudo firewall-cmd --reload\n\n# iptables (Universal)\nsudo iptables -A INPUT -p tcp -s 10.0.0.0/8 --dport 8200 -j ACCEPT\nsudo iptables -A INPUT -p tcp -s 10.0.0.0/8 --dport 8201 -j ACCEPT\nsudo iptables -A INPUT -p tcp --dport 8200 -j DROP\nsudo iptables -A INPUT -p tcp --dport 8201 -j DROP\n\n# Save iptables rules\n# Ubuntu/Debian\nsudo apt install -y iptables-persistent\nsudo netfilter-persistent save\n\n# RHEL/CentOS\nsudo service iptables save\n```\n\n### Audit Logging and Monitoring\n```bash\n# Enable comprehensive audit logging\nexport VAULT_ADDR='https://127.0.0.1:8200'\nvault auth <root-token>\n\n# Enable file audit device\nvault audit enable file file_path=/opt/vault/logs/audit.log\n\n# Enable syslog audit device\nvault audit enable syslog tag=\"vault\" facility=\"LOCAL0\"\n\n# Configure log rotation for audit logs\nsudo tee /etc/logrotate.d/vault-audit > /dev/null <<EOF\n/opt/vault/logs/audit.log {\n    daily\n    missingok\n    rotate 90\n    compress\n    delaycompress\n    notifempty\n    create 640 vault vault\n    postrotate\n        /bin/kill -HUP \\`cat /var/run/vault.pid 2>/dev/null\\` 2>/dev/null || true\n    endscript\n}\nEOF\n\n# Setup centralized logging (rsyslog configuration)\nsudo tee -a /etc/rsyslog.conf > /dev/null <<EOF\n\n# Vault audit logging\nlocal0.*    /var/log/vault-audit.log\n& stop\nEOF\n\nsudo systemctl restart rsyslog\n\n# Prometheus monitoring configuration\nvault write sys/metrics/config enabled=true\n```\n\n## Authentication Methods and Policies\n\n### Enterprise Authentication Setup\n```bash\n# Enable and configure LDAP authentication\nvault auth enable ldap\n\nvault write auth/ldap/config \\\n    url=\"ldaps://ldap.example.com\" \\\n    userdn=\"ou=Users,dc=example,dc=com\" \\\n    userattr=\"sAMAccountName\" \\\n    groupdn=\"ou=Groups,dc=example,dc=com\" \\\n    groupfilter=\"(&(objectClass=group)(member:1.2.840.113556.1.4.1941:={{.UserDN}}))\" \\\n    groupattr=\"cn\" \\\n    binddn=\"cn=vault,ou=Service Accounts,dc=example,dc=com\" \\\n    bindpass=\"ldap_service_password\" \\\n    starttls=true \\\n    insecure_tls=false \\\n    certificate=@/opt/vault/tls/ldap-ca.crt\n\n# Configure OIDC authentication (Azure AD example)\nvault auth enable oidc\n\nvault write auth/oidc/config \\\n    oidc_discovery_url=\"https://login.microsoftonline.com/your-tenant-id/v2.0\" \\\n    oidc_client_id=\"your-application-id\" \\\n    oidc_client_secret=\"your-client-secret\" \\\n    default_role=\"azure-ad-users\"\n\nvault write auth/oidc/role/azure-ad-users \\\n    bound_audiences=\"your-application-id\" \\\n    allowed_redirect_uris=\"https://vault.example.com:8200/ui/vault/auth/oidc/oidc/callback\" \\\n    user_claim=\"email\" \\\n    policies=\"azure-ad-policy\"\n\n# Enable GitHub authentication\nvault auth enable github\n\nvault write auth/github/config \\\n    organization=\"your-organization\" \\\n    base_url=\"https://github.com/\" \\\n    max_ttl=\"8h\" \\\n    ttl=\"1h\"\n\nvault write auth/github/map/teams/vault-admins value=admin-policy\nvault write auth/github/map/teams/developers value=developer-policy\n\n# AWS IAM authentication\nvault auth enable aws\n\nvault write auth/aws/config/client \\\n    secret_key=\"your-secret-key\" \\\n    access_key=\"your-access-key\"\n\nvault write auth/aws/role/ec2-role \\\n    auth_type=\"ec2\" \\\n    policies=\"ec2-policy\" \\\n    max_ttl=\"1h\" \\\n    bound_instances=\"i-1234567890abcdef0,i-0987654321fedcba0\"\n\n# Kubernetes authentication\nvault auth enable kubernetes\n\nvault write auth/kubernetes/config \\\n    token_reviewer_jwt=\"$(cat /var/run/secrets/kubernetes.io/serviceaccount/token)\" \\\n    kubernetes_host=\"https://kubernetes.example.com:6443\" \\\n    kubernetes_ca_cert=@/var/run/secrets/kubernetes.io/serviceaccount/ca.crt\n\nvault write auth/kubernetes/role/myapp \\\n    bound_service_account_names=\"vault-auth\" \\\n    bound_service_account_namespaces=\"default,production\" \\\n    policies=\"myapp-policy\" \\\n    ttl=\"1h\"\n```\n\n### Advanced Policy Management\n```bash\n# Create comprehensive policies with fine-grained access control\ncat > admin-policy.hcl <<EOF\n# Admin policy with full access and audit capabilities\npath \"*\" {\n  capabilities = [\"create\", \"read\", \"update\", \"delete\", \"list\", \"sudo\"]\n}\n\n# Audit log access for compliance\npath \"sys/audit/*\" {\n  capabilities = [\"create\", \"read\", \"update\", \"delete\", \"list\", \"sudo\"]\n}\n\n# Manage authentication methods\npath \"sys/auth/*\" {\n  capabilities = [\"create\", \"read\", \"update\", \"delete\", \"list\", \"sudo\"]\n}\n\n# Mount/unmount secrets engines\npath \"sys/mounts/*\" {\n  capabilities = [\"create\", \"read\", \"update\", \"delete\", \"list\", \"sudo\"]\n}\n\n# Configure and manage the audit devices\npath \"sys/audit\" {\n  capabilities = [\"read\", \"list\"]\n}\nEOF\n\ncat > developer-policy.hcl <<EOF\n# Developer policy with limited access to application secrets\npath \"secret/data/applications/{{identity.entity.aliases.auth_github_*.name}}/*\" {\n  capabilities = [\"create\", \"read\", \"update\", \"delete\", \"list\"]\n}\n\npath \"secret/metadata/applications/{{identity.entity.aliases.auth_github_*.name}}/*\" {\n  capabilities = [\"list\"]\n}\n\n# Read-only access to shared secrets\npath \"secret/data/shared/*\" {\n  capabilities = [\"read\", \"list\"]\n}\n\n# Database credentials with time-bound access\npath \"database/creds/readonly\" {\n  capabilities = [\"read\"]\n}\n\n# PKI certificate generation for specific domains\npath \"pki/issue/developer-role\" {\n  capabilities = [\"create\", \"update\"]\n}\n\n# Self-service capabilities\npath \"auth/token/lookup-self\" {\n  capabilities = [\"read\"]\n}\n\npath \"auth/token/renew-self\" {\n  capabilities = [\"update\"]\n}\n\npath \"auth/token/revoke-self\" {\n  capabilities = [\"update\"]\n}\nEOF\n\ncat > cicd-policy.hcl <<EOF\n# CI/CD policy for automated systems\npath \"secret/data/cicd/*\" {\n  capabilities = [\"create\", \"read\", \"update\", \"delete\", \"list\"]\n}\n\n# Database credentials for deployments\npath \"database/creds/application-user\" {\n  capabilities = [\"read\"]\n}\n\n# PKI for service certificates\npath \"pki/issue/service-role\" {\n  capabilities = [\"create\", \"update\"]\n}\n\n# Kubernetes service account tokens\npath \"kubernetes/creds/application-role\" {\n  capabilities = [\"read\"]\n}\n\n# AWS credentials for deployment\npath \"aws/creds/deployment-role\" {\n  capabilities = [\"read\"]\n}\nEOF\n\n# Apply policies\nvault policy write admin admin-policy.hcl\nvault policy write developer developer-policy.hcl\nvault policy write cicd cicd-policy.hcl\n\n# Create entity for identity management\nvault write identity/entity \\\n    name=\"john.doe\" \\\n    policies=\"developer\" \\\n    metadata=department=\"engineering\" \\\n    metadata=team=\"platform\"\n```\n\n## Advanced Secrets Engines\n\n### Database Secrets Engine\n```bash\n# Enable database secrets engine\nvault secrets enable database\n\n# Configure MySQL connection\nvault write database/config/mysql-prod \\\n    plugin_name=mysql-database-plugin \\\n    connection_url=\"{{username}}:{{password}}@tcp(mysql.example.com:3306)/\" \\\n    allowed_roles=\"mysql-admin,mysql-readonly,mysql-application\" \\\n    username=\"vault\" \\\n    password=\"vault-service-password\" \\\n    max_open_connections=5 \\\n    max_idle_connections=0 \\\n    max_connection_lifetime=\"10m\"\n\n# Create roles for different access levels\nvault write database/roles/mysql-admin \\\n    db_name=mysql-prod \\\n    creation_statements=\"CREATE USER '{{name}}'@'%' IDENTIFIED BY '{{password}}'; GRANT ALL ON *.* TO '{{name}}'@'%';\" \\\n    default_ttl=\"1h\" \\\n    max_ttl=\"24h\"\n\nvault write database/roles/mysql-readonly \\\n    db_name=mysql-prod \\\n    creation_statements=\"CREATE USER '{{name}}'@'%' IDENTIFIED BY '{{password}}'; GRANT SELECT ON *.* TO '{{name}}'@'%';\" \\\n    default_ttl=\"1h\" \\\n    max_ttl=\"8h\"\n\nvault write database/roles/mysql-application \\\n    db_name=mysql-prod \\\n    creation_statements=\"CREATE USER '{{name}}'@'%' IDENTIFIED BY '{{password}}'; GRANT SELECT, INSERT, UPDATE, DELETE ON app_db.* TO '{{name}}'@'%';\" \\\n    default_ttl=\"30m\" \\\n    max_ttl=\"2h\"\n\n# PostgreSQL configuration\nvault write database/config/postgres-prod \\\n    plugin_name=postgresql-database-plugin \\\n    connection_url=\"postgresql://{{username}}:{{password}}@postgres.example.com:5432/postgres?sslmode=require\" \\\n    allowed_roles=\"postgres-admin,postgres-readonly\" \\\n    username=\"vault\" \\\n    password=\"vault-postgres-password\"\n\nvault write database/roles/postgres-admin \\\n    db_name=postgres-prod \\\n    creation_statements=\"CREATE ROLE \\\"{{name}}\\\" WITH LOGIN PASSWORD '{{password}}' VALID UNTIL '{{expiration}}'; GRANT ALL PRIVILEGES ON DATABASE app_db TO \\\"{{name}}\\\";\" \\\n    default_ttl=\"1h\" \\\n    max_ttl=\"24h\"\n```\n\n### PKI Secrets Engine (Enterprise Certificate Management)\n```bash\n# Enable PKI secrets engine for internal CA\nvault secrets enable -path=pki pki\n\n# Configure CA\nvault secrets tune -max-lease-ttl=87600h pki\n\n# Generate internal CA certificate\nvault write -field=certificate pki/root/generate/internal \\\n    common_name=\"Internal CA\" \\\n    issuer_name=\"internal-ca\" \\\n    ttl=87600h > /opt/vault/tls/internal-ca.crt\n\n# Configure certificate URLs\nvault write pki/config/urls \\\n    issuing_certificates=\"https://vault.example.com:8200/v1/pki/ca\" \\\n    crl_distribution_points=\"https://vault.example.com:8200/v1/pki/crl\"\n\n# Create intermediate CA\nvault secrets enable -path=pki_int pki\n\nvault secrets tune -max-lease-ttl=43800h pki_int\n\n# Generate intermediate CSR\nvault write -format=json pki_int/intermediate/generate/internal \\\n    common_name=\"Internal Intermediate CA\" \\\n    issuer_name=\"internal-intermediate-ca\" \\\n    | jq -r '.data.csr' > pki_intermediate.csr\n\n# Sign intermediate certificate\nvault write -format=json pki/root/sign-intermediate \\\n    issuer_ref=\"internal-ca\" \\\n    csr=@pki_intermediate.csr \\\n    format=pem_bundle ttl=\"43800h\" \\\n    | jq -r '.data.certificate' > intermediate.cert.pem\n\n# Import signed certificate\nvault write pki_int/intermediate/set-signed certificate=@intermediate.cert.pem\n\n# Create role for service certificates\nvault write pki_int/roles/service-role \\\n    issuer_ref=\"internal-intermediate-ca\" \\\n    allowed_domains=\"example.com,internal.example.com\" \\\n    allow_subdomains=true \\\n    max_ttl=\"72h\" \\\n    generate_lease=true\n\n# Create role for client certificates\nvault write pki_int/roles/client-role \\\n    issuer_ref=\"internal-intermediate-ca\" \\\n    allowed_domains=\"client.example.com\" \\\n    allow_subdomains=false \\\n    client_flag=true \\\n    max_ttl=\"24h\"\n\n# Generate certificate\nvault write pki_int/issue/service-role common_name=\"api.example.com\" ttl=\"24h\"\n```\n\n### Cloud Provider Integration\n\n#### AWS Secrets Engine\n```bash\n# Enable AWS secrets engine\nvault secrets enable aws\n\n# Configure AWS credentials\nvault write aws/config/root \\\n    access_key=\"vault-aws-access-key\" \\\n    secret_key=\"vault-aws-secret-key\" \\\n    region=\"us-west-2\"\n\n# Create AWS roles\nvault write aws/roles/ec2-admin \\\n    credential_type=\"iam_user\" \\\n    policy_document='-' <<EOF\n{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"ec2:*\",\n        \"vpc:*\"\n      ],\n      \"Resource\": \"*\"\n    }\n  ]\n}\nEOF\n\nvault write aws/roles/s3-readonly \\\n    credential_type=\"iam_user\" \\\n    policy_arns=\"arn:aws:iam::aws:policy/AmazonS3ReadOnlyAccess\" \\\n    default_sts_ttl=\"1h\" \\\n    max_sts_ttl=\"12h\"\n\n# Generate temporary AWS credentials\nvault read aws/creds/ec2-admin\n```\n\n#### Azure Secrets Engine\n```bash\n# Enable Azure secrets engine\nvault secrets enable azure\n\n# Configure Azure credentials\nvault write azure/config \\\n    subscription_id=\"your-subscription-id\" \\\n    tenant_id=\"your-tenant-id\" \\\n    client_id=\"vault-service-principal-id\" \\\n    client_secret=\"vault-service-principal-secret\"\n\n# Create Azure roles\nvault write azure/roles/contributor \\\n    azure_roles='-' <<EOF\n[\n    {\n        \"role_name\": \"Contributor\",\n        \"scope\":  \"/subscriptions/your-subscription-id\"\n    }\n]\nEOF\n\nvault write azure/roles/storage-admin \\\n    azure_roles='-' <<EOF\n[\n    {\n        \"role_name\": \"Storage Account Contributor\",\n        \"scope\":  \"/subscriptions/your-subscription-id/resourceGroups/production\"\n    }\n]\nEOF\n\n# Generate Azure credentials\nvault read azure/creds/contributor\n```\n\n## Enterprise Features\n\n### Performance Replication\n```bash\n# Configure performance replication (Enterprise)\n# On primary cluster\nvault write -f sys/replication/performance/primary/enable\n\n# Generate secondary token\nvault write sys/replication/performance/primary/secondary-token id=\"dr-secondary\"\n\n# On secondary cluster\nvault write sys/replication/performance/secondary/enable token=\"<secondary-token>\"\n\n# Monitor replication status\nvault read sys/replication/status\nvault read sys/replication/performance/status\n```\n\n### Disaster Recovery Replication\n```bash\n# Enable DR replication on primary\nvault write -f sys/replication/dr/primary/enable\n\n# Generate DR token\nvault write sys/replication/dr/primary/secondary-token id=\"dr-cluster\"\n\n# On DR cluster\nvault write sys/replication/dr/secondary/enable token=\"<dr-token>\"\n\n# Promote DR secondary (in disaster scenario)\nvault write -f sys/replication/dr/secondary/promote\n\n# Demote and revert\nvault write -f sys/replication/dr/secondary/reindex\nvault write sys/replication/dr/secondary/update-primary dr_operation_token=\"<operation-token>\"\n```\n\n### Namespaces (Enterprise)\n```bash\n# Create namespaces for multi-tenancy\nvault namespace create engineering\nvault namespace create finance\nvault namespace create operations\n\n# Work within specific namespace\nexport VAULT_NAMESPACE=engineering\n\n# Configure namespace-specific policies and auth methods\nvault policy write -namespace=engineering eng-admin - <<EOF\npath \"*\" {\n  capabilities = [\"create\", \"read\", \"update\", \"delete\", \"list\"]\n}\nEOF\n\n# Enable auth method in namespace\nvault auth enable -namespace=engineering userpass\n\nvault write -namespace=engineering auth/userpass/users/alice \\\n    password=\"secure-password\" \\\n    policies=\"eng-admin\"\n```\n\n### Transform Secrets Engine (Enterprise)\n```bash\n# Enable transform secrets engine for data protection\nvault secrets enable transform\n\n# Create transformation for credit card numbers\nvault write transform/role/payments \\\n    transformations=credit-card-transformation\n\nvault write transform/transformation/credit-card-transformation \\\n    type=fpe \\\n    template=\"credit-card\" \\\n    tweak_source=supplied \\\n    allowed_roles=payments\n\nvault write transform/template/credit-card \\\n    type=regex \\\n    pattern='\\d{4}-\\d{4}-\\d{4}-(\\d{4})' \\\n    alphabet=numerics\n\n# Encode sensitive data\nvault write transform/encode/payments \\\n    transformation=credit-card-transformation \\\n    value=\"1234-5678-9012-3456\" \\\n    tweak=\"user-123\"\n\n# Decode when needed\nvault write transform/decode/payments \\\n    transformation=credit-card-transformation \\\n    value=\"encoded-value\" \\\n    tweak=\"user-123\"\n```\n\n## Backup and Disaster Recovery\n\n### Enterprise Backup Strategy\n```bash\n# Create comprehensive backup script\nsudo tee /usr/local/bin/vault-backup.sh > /dev/null <<'EOF'\n#!/bin/bash\nBACKUP_DIR=\"/backup/vault\"\nDATE=$(date +%Y%m%d_%H%M%S)\n\nmkdir -p ${BACKUP_DIR}/{snapshots,configs,certificates}\n\n# Raft storage snapshot (Enterprise)\nvault operator raft snapshot save ${BACKUP_DIR}/snapshots/vault-snapshot-${DATE}.snap\n\n# Backup configuration files\ntar -czf ${BACKUP_DIR}/configs/vault-config-${DATE}.tar.gz \\\n    /etc/vault.d/ \\\n    /etc/systemd/system/vault.service\n\n# Backup TLS certificates\ntar -czf ${BACKUP_DIR}/certificates/vault-tls-${DATE}.tar.gz \\\n    /opt/vault/tls/\n\n# Backup to cloud storage\n# AWS S3\naws s3 cp ${BACKUP_DIR}/snapshots/vault-snapshot-${DATE}.snap s3://vault-backups/snapshots/\naws s3 cp ${BACKUP_DIR}/configs/vault-config-${DATE}.tar.gz s3://vault-backups/configs/\n\n# Azure Blob Storage\naz storage blob upload \\\n    --file ${BACKUP_DIR}/snapshots/vault-snapshot-${DATE}.snap \\\n    --container-name vault-backups \\\n    --name snapshots/vault-snapshot-${DATE}.snap\n\n# Google Cloud Storage\ngsutil cp ${BACKUP_DIR}/snapshots/vault-snapshot-${DATE}.snap gs://vault-backups/snapshots/\n\n# Verify snapshot integrity\nvault operator raft snapshot inspect ${BACKUP_DIR}/snapshots/vault-snapshot-${DATE}.snap\n\n# Keep only last 30 backups locally\nfind ${BACKUP_DIR} -name \"vault-*\" -type f -mtime +30 -delete\n\n# Encrypt backup files\ngpg --symmetric --cipher-algo AES256 ${BACKUP_DIR}/snapshots/vault-snapshot-${DATE}.snap\n\necho \"Vault backup completed: ${DATE}\"\nEOF\n\nsudo chmod +x /usr/local/bin/vault-backup.sh\n\n# Schedule automated backups\necho \"0 2 * * * root /usr/local/bin/vault-backup.sh\" | sudo tee -a /etc/crontab\n```\n\n### Disaster Recovery Testing\n```bash\n# Create DR testing script\nsudo tee /usr/local/bin/vault-dr-test.sh > /dev/null <<'EOF'\n#!/bin/bash\nTEST_DIR=\"/tmp/vault-dr-test\"\nDATE=$(date +%Y%m%d_%H%M%S)\n\nmkdir -p ${TEST_DIR}\n\n# Test snapshot restore capability\nvault operator raft snapshot save ${TEST_DIR}/test-snapshot-${DATE}.snap\n\n# Verify snapshot\nvault operator raft snapshot inspect ${TEST_DIR}/test-snapshot-${DATE}.snap\n\n# Test unsealing process\nvault operator key-status\n\n# Test authentication methods\nvault auth list\n\n# Test secrets engines\nvault secrets list\n\n# Test policy enforcement\nvault policy list\n\n# Generate test report\ncat > ${TEST_DIR}/dr-test-report-${DATE}.txt <<EOL\nVault DR Test Report - ${DATE}\n================================\n\nSnapshot Creation: $([ -f ${TEST_DIR}/test-snapshot-${DATE}.snap ] && echo \"PASS\" || echo \"FAIL\")\nVault Status: $(vault status -format=json | jq -r .sealed)\nActive Auth Methods: $(vault auth list -format=json | jq -r 'keys | length')\nActive Secrets Engines: $(vault secrets list -format=json | jq -r 'keys | length')\nPolicies Count: $(vault policy list | wc -l)\n\nTest completed at: $(date)\nEOL\n\necho \"DR test completed. Report: ${TEST_DIR}/dr-test-report-${DATE}.txt\"\nEOF\n\nsudo chmod +x /usr/local/bin/vault-dr-test.sh\n\n# Schedule monthly DR tests\necho \"0 2 1 * * root /usr/local/bin/vault-dr-test.sh\" | sudo tee -a /etc/crontab\n```\n\n## Application Integration Examples\n\n### Kubernetes Integration with Vault Agent\n```bash\n# Deploy Vault Agent as sidecar for Kubernetes workloads\ncat > vault-agent-k8s.yaml <<EOF\napiVersion: v1\nkind: ConfigMap\nmetadata:\n  name: vault-agent-config\ndata:\n  vault-agent.hcl: |\n    exit_after_auth = false\n    pid_file = \"/home/vault/pidfile\"\n\n    auto_auth {\n      method \"kubernetes\" {\n        mount_path = \"auth/kubernetes\"\n        config = {\n          role = \"myapp\"\n        }\n      }\n\n      sink \"file\" {\n        config = {\n          path = \"/home/vault/.vault-token\"\n        }\n      }\n    }\n\n    cache {\n      use_auto_auth_token = true\n    }\n\n    listener \"tcp\" {\n      address = \"127.0.0.1:8080\"\n      tls_disable = true\n    }\n\n    vault {\n      address = \"https://vault.example.com:8200\"\n    }\n\n    template {\n      source      = \"/vault/templates/database.conf.tpl\"\n      destination = \"/vault/secrets/database.conf\"\n      perms       = 0640\n      command     = \"pkill -SIGHUP myapp\"\n    }\n---\napiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: myapp-with-vault\nspec:\n  replicas: 3\n  selector:\n    matchLabels:\n      app: myapp\n  template:\n    metadata:\n      labels:\n        app: myapp\n    spec:\n      serviceAccountName: vault-auth\n      securityContext:\n        runAsNonRoot: true\n        runAsUser: 1000\n        fsGroup: 1000\n      containers:\n      - name: vault-agent\n        image: vault:latest\n        command: [\"vault\", \"agent\", \"-config=/vault/config/vault-agent.hcl\"]\n        volumeMounts:\n        - name: vault-config\n          mountPath: /vault/config\n        - name: vault-secrets\n          mountPath: /vault/secrets\n        securityContext:\n          allowPrivilegeEscalation: false\n          readOnlyRootFilesystem: true\n          capabilities:\n            drop:\n            - ALL\n      - name: myapp\n        image: myapp:latest\n        volumeMounts:\n        - name: vault-secrets\n          mountPath: /app/config\n          readOnly: true\n        env:\n        - name: DB_CONFIG_FILE\n          value: \"/app/config/database.conf\"\n        securityContext:\n          allowPrivilegeEscalation: false\n          readOnlyRootFilesystem: true\n          capabilities:\n            drop:\n            - ALL\n      volumes:\n      - name: vault-config\n        configMap:\n          name: vault-agent-config\n      - name: vault-secrets\n        emptyDir:\n          medium: Memory\nEOF\n\nkubectl apply -f vault-agent-k8s.yaml\n```\n\n### CI/CD Pipeline Integration\n```bash\n# GitHub Actions integration\ncat > .github/workflows/vault-secrets.yml <<EOF\nname: Deploy with Vault Secrets\n\non:\n  push:\n    branches: [main]\n\njobs:\n  deploy:\n    runs-on: ubuntu-latest\n    permissions:\n      id-token: write\n      contents: read\n    \n    steps:\n    - name: Checkout code\n      uses: actions/checkout@v4\n    \n    - name: Configure Vault authentication\n      uses: hashicorp/vault-action@v2\n      with:\n        url: https://vault.example.com:8200\n        method: jwt\n        role: github-actions-role\n        secrets: |\n          secret/data/database username | DB_USER ;\n          secret/data/database password | DB_PASS ;\n          aws/creds/deployment-role access_key | AWS_ACCESS_KEY_ID ;\n          aws/creds/deployment-role secret_key | AWS_SECRET_ACCESS_KEY ;\n          pki_int/issue/service-role common_name=api.example.com ttl=1h | API_TLS_CERT\n    \n    - name: Deploy application\n      run: |\n        echo \"Deploying with secrets from Vault\"\n        echo \"Database user: \\${{ env.DB_USER }}\"\n        # Application deployment logic here\n      env:\n        DB_USER: \\${{ env.DB_USER }}\n        DB_PASS: \\${{ env.DB_PASS }}\n        AWS_ACCESS_KEY_ID: \\${{ env.AWS_ACCESS_KEY_ID }}\n        AWS_SECRET_ACCESS_KEY: \\${{ env.AWS_SECRET_ACCESS_KEY }}\nEOF\n\n# Configure GitHub Actions authentication in Vault\nvault auth enable jwt\n\nvault write auth/jwt/config \\\n    bound_issuer=\"https://token.actions.githubusercontent.com\" \\\n    oidc_discovery_url=\"https://token.actions.githubusercontent.com\"\n\nvault write auth/jwt/role/github-actions-role \\\n    bound_audiences=\"https://github.com/your-org\" \\\n    bound_subject=\"repo:your-org/your-repo:ref:refs/heads/main\" \\\n    user_claim=\"actor\" \\\n    role_type=\"jwt\" \\\n    policies=\"cicd-policy\" \\\n    ttl=\"10m\"\n```\n\n### Terraform Integration\n```bash\n# Vault provider for Terraform\ncat > terraform-vault.tf <<EOF\nterraform {\n  required_providers {\n    vault = {\n      source  = \"hashicorp/vault\"\n      version = \"~> 3.0\"\n    }\n  }\n}\n\nprovider \"vault\" {\n  address = \"https://vault.example.com:8200\"\n  token   = var.vault_token\n}\n\n# Read secrets from Vault\ndata \"vault_generic_secret\" \"database\" {\n  path = \"secret/database\"\n}\n\ndata \"vault_aws_access_credentials\" \"deployment\" {\n  backend = \"aws\"\n  role    = \"deployment-role\"\n}\n\n# Use secrets in resources\nresource \"aws_db_instance\" \"main\" {\n  identifier_prefix = var.project_name\n  \n  username = data.vault_generic_secret.database.data[\"username\"]\n  password = data.vault_generic_secret.database.data[\"password\"]\n  \n  # Other configuration...\n}\n\n# Store Terraform-generated secrets back in Vault\nresource \"vault_generic_secret\" \"terraform_outputs\" {\n  path = \"secret/terraform/outputs\"\n\n  data_json = jsonencode({\n    rds_endpoint = aws_db_instance.main.endpoint\n    vpc_id       = aws_vpc.main.id\n    subnet_ids   = aws_subnet.main[*].id\n  })\n}\nEOF\n```\n\n## Monitoring and Observability\n\n### Vault Metrics and Monitoring\n```bash\n# Enable Vault metrics collection\nvault write sys/metrics/config \\\n    enabled=true \\\n    enable_hostname_label=false \\\n    default_lease_duration=\"1h\" \\\n    max_lease_duration=\"24h\"\n\n# Prometheus monitoring configuration\ncat > /etc/prometheus/vault-monitoring.yml <<EOF\nglobal:\n  scrape_interval: 15s\n\nscrape_configs:\n  - job_name: 'vault'\n    scheme: https\n    tls_config:\n      ca_file: /opt/vault/tls/ca.crt\n      cert_file: /opt/prometheus/tls/client.crt\n      key_file: /opt/prometheus/tls/client.key\n    static_configs:\n      - targets: \n        - 'vault-1.example.com:8200'\n        - 'vault-2.example.com:8200'\n        - 'vault-3.example.com:8200'\n    metrics_path: /v1/sys/metrics\n    params:\n      format: ['prometheus']\n    bearer_token: \"prometheus-vault-token\"\n\n  # Monitor Vault process metrics\n  - job_name: 'vault-node-exporter'\n    static_configs:\n      - targets:\n        - 'vault-1.example.com:9100'\n        - 'vault-2.example.com:9100'\n        - 'vault-3.example.com:9100'\nEOF\n\n# Create Grafana dashboards for Vault monitoring\ncurl -X POST http://admin:admin@grafana.example.com/api/dashboards/db \\\n  -H 'Content-Type: application/json' \\\n  -d @vault-dashboard.json\n```\n\n### Advanced Audit Analysis\n```bash\n# Create audit log analysis script\nsudo tee /usr/local/bin/vault-audit-analysis.sh > /dev/null <<'EOF'\n#!/bin/bash\nAUDIT_LOG=\"/opt/vault/logs/audit.log\"\nANALYSIS_DIR=\"/var/log/vault-analysis\"\nDATE=$(date +%Y%m%d_%H%M%S)\n\nmkdir -p ${ANALYSIS_DIR}\n\n# Failed authentication attempts\necho \"Failed Authentication Analysis - ${DATE}\" > ${ANALYSIS_DIR}/failed-auth-${DATE}.txt\njq -r 'select(.type==\"response\" and .error != null) | [.time, .request.remote_address, .error] | @tsv' ${AUDIT_LOG} | tail -100 >> ${ANALYSIS_DIR}/failed-auth-${DATE}.txt\n\n# Most active users\necho \"Most Active Users - ${DATE}\" > ${ANALYSIS_DIR}/active-users-${DATE}.txt\njq -r 'select(.type==\"request\" and .auth != null) | .auth.display_name' ${AUDIT_LOG} | sort | uniq -c | sort -nr | head -20 >> ${ANALYSIS_DIR}/active-users-${DATE}.txt\n\n# Secret access patterns\necho \"Secret Access Patterns - ${DATE}\" > ${ANALYSIS_DIR}/secret-access-${DATE}.txt\njq -r 'select(.type==\"request\" and .request.path | test(\"^secret/data/\")) | [.time, .auth.display_name, .request.path] | @tsv' ${AUDIT_LOG} | tail -100 >> ${ANALYSIS_DIR}/secret-access-${DATE}.txt\n\n# Policy violations\necho \"Policy Violations - ${DATE}\" > ${ANALYSIS_DIR}/policy-violations-${DATE}.txt\njq -r 'select(.type==\"response\" and .error != null and (.error | test(\"permission denied\"))) | [.time, .auth.display_name, .request.path, .error] | @tsv' ${AUDIT_LOG} | tail -50 >> ${ANALYSIS_DIR}/policy-violations-${DATE}.txt\n\n# Generate summary report\ncat > ${ANALYSIS_DIR}/audit-summary-${DATE}.txt <<EOL\nVault Audit Summary - ${DATE}\n==============================\n\nTotal Requests: $(jq -s 'length' ${AUDIT_LOG})\nFailed Authentications: $(jq -s 'map(select(.type==\"response\" and .error != null)) | length' ${AUDIT_LOG})\nPolicy Violations: $(jq -s 'map(select(.type==\"response\" and .error != null and (.error | test(\"permission denied\")))) | length' ${AUDIT_LOG})\nUnique Users: $(jq -r 'select(.type==\"request\" and .auth != null) | .auth.display_name' ${AUDIT_LOG} | sort -u | wc -l)\n\nTop 5 Accessed Paths:\n$(jq -r 'select(.type==\"request\") | .request.path' ${AUDIT_LOG} | sort | uniq -c | sort -nr | head -5)\n\nAnalysis completed at: $(date)\nEOL\n\necho \"Audit analysis completed. Reports in: ${ANALYSIS_DIR}/\"\nEOF\n\nsudo chmod +x /usr/local/bin/vault-audit-analysis.sh\n\n# Schedule weekly audit analysis\necho \"0 6 * * 1 root /usr/local/bin/vault-audit-analysis.sh\" | sudo tee -a /etc/crontab\n```\n\n## Verification and Testing\n\n### Comprehensive Health Checks\n```bash\n# Create Vault health monitoring script\nsudo tee /usr/local/bin/vault-health-check.sh > /dev/null <<'EOF'\n#!/bin/bash\nVAULT_ADDR=\"https://vault.example.com:8200\"\nHEALTH_LOG=\"/var/log/vault-health.log\"\n\n# Function to log with timestamp\nlog_message() {\n    echo \"$(date '+%Y-%m-%d %H:%M:%S') - $1\" | tee -a ${HEALTH_LOG}\n}\n\n# Check Vault service status\nif systemctl is-active vault >/dev/null 2>&1; then\n    log_message \"âœ“ Vault service is running\"\nelse\n    log_message \"âœ— Vault service is not running\"\n    exit 1\nfi\n\n# Check Vault HTTP health\nif curl -k -sf ${VAULT_ADDR}/v1/sys/health >/dev/null 2>&1; then\n    log_message \"âœ“ Vault HTTP endpoint is responding\"\nelse\n    log_message \"âœ— Vault HTTP endpoint is not responding\"\n    exit 1\nfi\n\n# Check if Vault is sealed\nSEALED_STATUS=$(vault status -format=json | jq -r .sealed)\nif [ \"$SEALED_STATUS\" = \"false\" ]; then\n    log_message \"âœ“ Vault is unsealed\"\nelse\n    log_message \"âœ— Vault is sealed\"\n    exit 1\nfi\n\n# Check cluster status (if HA)\nif vault status -format=json | jq -r .ha_enabled | grep -q \"true\"; then\n    CLUSTER_HEALTH=$(vault operator raft list-peers -format=json | jq '.data.config.servers | length')\n    log_message \"âœ“ Cluster has ${CLUSTER_HEALTH} nodes\"\nfi\n\n# Check replication status (Enterprise)\nREPLICATION_STATUS=$(vault read -format=json sys/replication/status 2>/dev/null)\nif [ $? -eq 0 ]; then\n    DR_MODE=$(echo $REPLICATION_STATUS | jq -r .data.dr.mode)\n    PERF_MODE=$(echo $REPLICATION_STATUS | jq -r .data.performance.mode)\n    log_message \"âœ“ Replication status - DR: ${DR_MODE}, Performance: ${PERF_MODE}\"\nfi\n\n# Check auth methods\nAUTH_METHODS=$(vault auth list -format=json | jq -r 'keys | length')\nlog_message \"âœ“ ${AUTH_METHODS} authentication methods enabled\"\n\n# Check secrets engines\nSECRETS_ENGINES=$(vault secrets list -format=json | jq -r 'keys | length')\nlog_message \"âœ“ ${SECRETS_ENGINES} secrets engines enabled\"\n\n# Check policy count\nPOLICIES=$(vault policy list | wc -l)\nlog_message \"âœ“ ${POLICIES} policies configured\"\n\n# Test secret read/write\nTEST_SECRET=\"secret/health-check/test-$(date +%s)\"\nif vault kv put ${TEST_SECRET} test=true >/dev/null 2>&1; then\n    if vault kv get ${TEST_SECRET} >/dev/null 2>&1; then\n        log_message \"âœ“ Secret read/write test passed\"\n        vault kv delete ${TEST_SECRET} >/dev/null 2>&1\n    else\n        log_message \"âœ— Secret read test failed\"\n    fi\nelse\n    log_message \"âœ— Secret write test failed\"\nfi\n\n# Check audit devices\nAUDIT_DEVICES=$(vault audit list -format=json | jq -r 'keys | length')\nlog_message \"âœ“ ${AUDIT_DEVICES} audit devices enabled\"\n\nlog_message \"Vault health check completed successfully\"\nEOF\n\nsudo chmod +x /usr/local/bin/vault-health-check.sh\n\n# Schedule health checks every 15 minutes\necho \"*/15 * * * * root /usr/local/bin/vault-health-check.sh\" | sudo tee -a /etc/crontab\n```\n\n### Security Validation Testing\n```bash\n# Create security testing script\nsudo tee /usr/local/bin/vault-security-test.sh > /dev/null <<'EOF'\n#!/bin/bash\nVAULT_ADDR=\"https://vault.example.com:8200\"\nTEST_RESULTS=\"/tmp/vault-security-test-$(date +%Y%m%d_%H%M%S).txt\"\n\necho \"Vault Security Validation Test\" > ${TEST_RESULTS}\necho \"==============================\" >> ${TEST_RESULTS}\necho \"Date: $(date)\" >> ${TEST_RESULTS}\necho \"\" >> ${TEST_RESULTS}\n\n# Test 1: TLS Configuration\necho \"Testing TLS Configuration...\" >> ${TEST_RESULTS}\nTLS_VERSION=$(openssl s_client -connect vault.example.com:8200 -brief 2>/dev/null | grep \"Protocol version\")\necho \"TLS Version: ${TLS_VERSION}\" >> ${TEST_RESULTS}\n\n# Test 2: Authentication requirements\necho \"Testing authentication requirements...\" >> ${TEST_RESULTS}\nUNAUTH_ACCESS=$(curl -k -s -w \"%{http_code}\" -o /dev/null ${VAULT_ADDR}/v1/secret/test)\nif [ \"$UNAUTH_ACCESS\" = \"403\" ]; then\n    echo \"âœ“ Unauthenticated access properly denied\" >> ${TEST_RESULTS}\nelse\n    echo \"âœ— Unauthenticated access not properly restricted\" >> ${TEST_RESULTS}\nfi\n\n# Test 3: Seal status\necho \"Testing seal status...\" >> ${TEST_RESULTS}\nSEALED=$(vault status -format=json | jq -r .sealed)\nif [ \"$SEALED\" = \"false\" ]; then\n    echo \"âœ“ Vault is properly unsealed\" >> ${TEST_RESULTS}\nelse\n    echo \"âœ— Vault is sealed\" >> ${TEST_RESULTS}\nfi\n\n# Test 4: Audit logging\necho \"Testing audit logging...\" >> ${TEST_RESULTS}\nAUDIT_COUNT=$(vault audit list -format=json | jq -r 'keys | length')\nif [ \"$AUDIT_COUNT\" -gt \"0\" ]; then\n    echo \"âœ“ ${AUDIT_COUNT} audit devices enabled\" >> ${TEST_RESULTS}\nelse\n    echo \"âœ— No audit devices enabled\" >> ${TEST_RESULTS}\nfi\n\n# Test 5: Policy enforcement\necho \"Testing policy enforcement...\" >> ${TEST_RESULTS}\nvault token create -policy=developer -ttl=1m -format=json > /tmp/test-token.json\nTEST_TOKEN=$(jq -r .auth.client_token /tmp/test-token.json)\n\n# Test with limited token\nVAULT_TOKEN=${TEST_TOKEN} vault auth -method=token ${TEST_TOKEN} >/dev/null 2>&1\nLIMITED_ACCESS=$(VAULT_TOKEN=${TEST_TOKEN} curl -k -s -w \"%{http_code}\" -o /dev/null -H \"X-Vault-Token: ${TEST_TOKEN}\" ${VAULT_ADDR}/v1/sys/auth)\nif [ \"$LIMITED_ACCESS\" = \"403\" ]; then\n    echo \"âœ“ Policy enforcement working correctly\" >> ${TEST_RESULTS}\nelse\n    echo \"âœ— Policy enforcement may be misconfigured\" >> ${TEST_RESULTS}\nfi\n\n# Revoke test token\nvault token revoke ${TEST_TOKEN}\nrm /tmp/test-token.json\n\necho \"\" >> ${TEST_RESULTS}\necho \"Security test completed at: $(date)\" >> ${TEST_RESULTS}\n\necho \"Security test completed. Results: ${TEST_RESULTS}\"\nEOF\n\nsudo chmod +x /usr/local/bin/vault-security-test.sh\n\n# Run security tests weekly\necho \"0 8 * * 1 root /usr/local/bin/vault-security-test.sh\" | sudo tee -a /etc/crontab\n```\n\n## Troubleshooting (Cross-Platform)\n\n### Common Issues and Solutions\n```bash\n# Check Vault status and logs\nvault status\nsudo journalctl -u vault -f\n\n# Debug unsealing issues\nvault operator key-status\nvault status -format=json | jq .recovery_seal\n\n# Memory lock issues\ncat /proc/$(pgrep vault)/status | grep VmLck\nulimit -l\n\n# Permission issues\nsudo chown -R vault:vault /opt/vault\nsudo chmod 640 /etc/vault.d/vault.hcl\nls -laZ /opt/vault  # SELinux context\n\n# Network connectivity tests\ncurl -k https://vault.example.com:8200/v1/sys/health\nopenssl s_client -connect vault.example.com:8200\n\n# Storage backend issues\n# For Raft storage\nvault operator raft list-peers\nvault operator raft autopilot status\n\n# For Consul storage\nconsul members\nconsul kv get -recurse vault/\n\n# Certificate issues\nopenssl x509 -in /opt/vault/tls/vault.crt -text -noout\nvault auth -method=cert \\\n    -ca-cert=/opt/vault/tls/ca.crt \\\n    -client-cert=/opt/vault/tls/client.crt \\\n    -client-key=/opt/vault/tls/client.key\n\n# Performance troubleshooting\nvault read sys/metrics\nvault read sys/host-info\nvault read sys/pprof/profile  # Enterprise\n\n# Audit log analysis\ntail -f /opt/vault/logs/audit.log | jq .\ngrep \"error\" /opt/vault/logs/audit.log | jq .\n\n# Token debugging\nvault token lookup\nvault token capabilities secret/data/test\n\n# Seal/unseal debugging\nvault operator unseal -migrate  # For seal migration\nvault operator rekey  # For changing unseal keys\n\n# Cluster debugging\nvault operator raft snapshot save debug-snapshot.snap\nvault operator raft snapshot inspect debug-snapshot.snap\n```\n\n### Advanced Debugging\n```bash\n# Enable debug logging\nsudo systemctl edit vault.service\n# Add:\n[Service]\nExecStart=\nExecStart=/usr/local/bin/vault server -config=/etc/vault.d/vault.hcl -log-level=debug\n\nsudo systemctl daemon-reload\nsudo systemctl restart vault\n\n# Monitor real-time operations\ntail -f /opt/vault/logs/vault.log | grep -E \"(ERROR|WARN|DEBUG)\"\n\n# Database connection debugging\nvault read database/config/mysql-prod\n\n# PKI debugging\nvault read pki/cert/ca\nvault read pki/crl\n\n# Replication debugging (Enterprise)\nvault read sys/replication/performance/status\nvault read sys/replication/dr/status\n\n# HSM debugging (Enterprise)\nvault read sys/seal-status\nvault read sys/hsm/status\n\n# Memory and performance analysis\npmap -x $(pgrep vault)\nstrace -p $(pgrep vault) -e trace=file\n\n# Network debugging\nss -tulpn | grep vault\nnetstat -tulpn | grep vault\n```\n\n## Additional Resources\n\n- [Official Documentation](https://www.vaultproject.io/docs)\n- [API Documentation](https://www.vaultproject.io/api-docs)\n- [Production Hardening Guide](https://learn.hashicorp.com/tutorials/vault/production-hardening)\n- [Enterprise Features](https://www.hashicorp.com/products/vault/enterprise)\n- [Security Best Practices](https://learn.hashicorp.com/tutorials/vault/security-intro)\n- [Community Forum](https://discuss.hashicorp.com/c/vault)\n\n---\n\n**Note:** This guide is part of the [HowToMgr](https://howtomgr.github.io) collection.","readmeHtml":"<h1 id=\"hashicorp-vault-installation-guide\" class=\"mobile-header\">HashiCorp Vault Installation Guide</h1>\n<p class=\"mobile-paragraph\">Enterprise-grade secrets management platform for securely storing and accessing API keys, passwords, certificates, and other sensitive data. Industry standard for secrets management with advanced security features.</p>\n<h2 id=\"prerequisites\" class=\"mobile-header\">Prerequisites</h2>\n<li class=\"mobile-list-item\">Linux system (any modern distribution)</li>\n<li class=\"mobile-list-item\">Root or sudo access</li>\n<li class=\"mobile-list-item\">4GB RAM minimum, 8GB+ recommended for production</li>\n<li class=\"mobile-list-item\">Persistent storage for Vault data (encrypted disk recommended)</li>\n<li class=\"mobile-list-item\">TLS certificates for production deployment</li>\n<li class=\"mobile-list-item\">HSM (optional, for enterprise compliance)</li>\n<h2 id=\"installation\" class=\"mobile-header\">Installation</h2>\n<h3 id=\"using-package-manager-recommended\" class=\"mobile-header\">Using Package Manager (Recommended)</h3>\n<p class=\"mobile-paragraph\">#### Ubuntu/Debian</p>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Add HashiCorp GPG key\nwget -O- https://apt.releases.hashicorp.com/gpg | sudo gpg --dearmor -o /usr/share/keyrings/hashicorp-archive-keyring.gpg\n\n# Add HashiCorp repository\necho &quot;deb [signed-by=/usr/share/keyrings/hashicorp-archive-keyring.gpg] https://apt.releases.hashicorp.com $(lsb_release -cs) main&quot; | sudo tee /etc/apt/sources.list.d/hashicorp.list\n\n# Update and install Vault\nsudo apt update\nsudo apt install -y vault\n\n# Create vault user and directories\nsudo useradd --system --home /etc/vault.d --shell /bin/false vault\nsudo mkdir -p /opt/vault/{data,logs,tls} /etc/vault.d\nsudo chown -R vault:vault /opt/vault /etc/vault.d</code></pre>\n      </div>\n    </div>\n<p class=\"mobile-paragraph\">#### RHEL/CentOS/Rocky Linux/AlmaLinux</p>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Add HashiCorp repository\nsudo yum install -y yum-utils\nsudo yum-config-manager --add-repo https://rpm.releases.hashicorp.com/RHEL/hashicorp.repo\n\n# Install Vault\nsudo yum install -y vault\n\n# Create vault user and directories\nsudo useradd --system --home /etc/vault.d --shell /bin/false vault\nsudo mkdir -p /opt/vault/{data,logs,tls} /etc/vault.d\nsudo chown -R vault:vault /opt/vault /etc/vault.d</code></pre>\n      </div>\n    </div>\n<p class=\"mobile-paragraph\">#### Fedora</p>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Add HashiCorp repository\nsudo dnf install -y dnf-plugins-core\nsudo dnf config-manager --add-repo https://rpm.releases.hashicorp.com/fedora/hashicorp.repo\n\n# Install Vault\nsudo dnf install -y vault\n\n# Setup directories and user\nsudo useradd --system --home /etc/vault.d --shell /bin/false vault\nsudo mkdir -p /opt/vault/{data,logs,tls} /etc/vault.d\nsudo chown -R vault:vault /opt/vault /etc/vault.d</code></pre>\n      </div>\n    </div>\n<p class=\"mobile-paragraph\">#### Arch Linux</p>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Install from AUR\nyay -S vault\n\n# Or from community repository\nsudo pacman -Syu vault\n\n# Setup vault user and directories\nsudo useradd --system --home /etc/vault.d --shell /bin/false vault\nsudo mkdir -p /opt/vault/{data,logs,tls} /etc/vault.d\nsudo chown -R vault:vault /opt/vault /etc/vault.d</code></pre>\n      </div>\n    </div>\n<h3 id=\"manual-binary-installation\" class=\"mobile-header\">Manual Binary Installation</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Download latest Vault\nVAULT_VERSION=&quot;1.15.2&quot;\ncd /tmp\nwget https://releases.hashicorp.com/vault/${VAULT_VERSION}/vault_${VAULT_VERSION}_linux_amd64.zip\n\n# Install unzip if needed\nsudo apt install -y unzip  # Ubuntu/Debian\nsudo yum install -y unzip  # RHEL/CentOS\nsudo pacman -S unzip       # Arch Linux\n\n# Extract and install\nunzip vault_${VAULT_VERSION}_linux_amd64.zip\nsudo mv vault /usr/local/bin/\nsudo chmod +x /usr/local/bin/vault\n\n# Create vault user\nsudo useradd --system --home /etc/vault.d --shell /bin/false vault\n\n# Create directories\nsudo mkdir -p /opt/vault/{data,logs,tls} /etc/vault.d\nsudo chown -R vault:vault /opt/vault /etc/vault.d\n\n# Verify installation\nvault version\n\n# Clean up\nrm vault_${VAULT_VERSION}_linux_amd64.zip</code></pre>\n      </div>\n    </div>\n<h3 id=\"using-docker\" class=\"mobile-header\">Using Docker</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Create directories for persistent data\nmkdir -p ~/vault/{data,config,logs,tls}\n\n# Generate TLS certificates for Docker\nopenssl req -x509 -nodes -newkey rsa:4096 -keyout ~/vault/tls/vault.key -out ~/vault/tls/vault.crt -days 365 -subj &quot;/C=US/ST=State/L=City/O=Organization/CN=vault.example.com&quot;\n\n# Create production-ready configuration\ncat &gt; ~/vault/config/vault.hcl &lt;&lt;EOF\nui = true\ndisable_mlock = false\n\n# Storage backend\nstorage &quot;file&quot; {\n  path = &quot;/vault/data&quot;\n}\n\n# HTTPS listener\nlistener &quot;tcp&quot; {\n  address       = &quot;0.0.0.0:8200&quot;\n  tls_cert_file = &quot;/vault/tls/vault.crt&quot;\n  tls_key_file  = &quot;/vault/tls/vault.key&quot;\n  tls_min_version = &quot;tls12&quot;\n}\n\n# Cluster configuration\napi_addr = &quot;https://vault.example.com:8200&quot;\ncluster_addr = &quot;https://vault.example.com:8201&quot;\n\n# Logging\nlog_level = &quot;Info&quot;\nlog_file  = &quot;/vault/logs/vault.log&quot;\nlog_rotate_duration = &quot;24h&quot;\nlog_rotate_max_files = 15\n\n# Telemetry\ntelemetry {\n  prometheus_retention_time = &quot;30s&quot;\n  disable_hostname = true\n}\n\n# Enterprise features (if using Vault Enterprise)\nlicense_path = &quot;/vault/license/vault.hclic&quot;\n\n# Performance replication (Enterprise)\nreplication {\n  resolver_discover_servers = false\n}\nEOF\n\n# Run Vault container with security settings\ndocker run -d \\\n  --name vault \\\n  --restart unless-stopped \\\n  --cap-add=IPC_LOCK \\\n  --ulimit memlock=-1:-1 \\\n  -p 8200:8200 \\\n  -v ~/vault/data:/vault/data \\\n  -v ~/vault/config:/vault/config \\\n  -v ~/vault/logs:/vault/logs \\\n  -v ~/vault/tls:/vault/tls \\\n  vault:latest server -config=/vault/config/vault.hcl</code></pre>\n      </div>\n    </div>\n<h2 id=\"production-configuration\" class=\"mobile-header\">Production Configuration</h2>\n<h3 id=\"enterprise-production-configuration\" class=\"mobile-header\">Enterprise Production Configuration</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Create comprehensive production configuration\nsudo tee /etc/vault.d/vault.hcl &gt; /dev/null &lt;&lt;EOF\n# Vault Enterprise Production Configuration\n\n# UI and basic settings\nui = true\ndisable_mlock = false\n\n# Storage backend - Consul (HA) or Integrated Storage (Raft)\nstorage &quot;raft&quot; {\n  path    = &quot;/opt/vault/data&quot;\n  node_id = &quot;vault-node-1&quot;\n\n  retry_join {\n    leader_api_addr = &quot;https://vault-node-2.example.com:8200&quot;\n  }\n  \n  retry_join {\n    leader_api_addr = &quot;https://vault-node-3.example.com:8200&quot;\n  }\n\n  # Enterprise: Performance replication\n  autopilot {\n    cleanup_dead_servers = true\n    last_contact_threshold = &quot;200ms&quot;\n    max_trailing_logs = 250\n    min_quorum = 3\n    server_stabilization_time = &quot;10s&quot;\n  }\n}\n\n# Alternative: Consul backend for HA\n# storage &quot;consul&quot; {\n#   address = &quot;127.0.0.1:8500&quot;\n#   path    = &quot;vault/&quot;\n#   service = &quot;vault&quot;\n#   check_timeout = &quot;5s&quot;\n#   disable_registration = false\n# }\n\n# HTTPS listener with modern TLS\nlistener &quot;tcp&quot; {\n  address       = &quot;0.0.0.0:8200&quot;\n  tls_cert_file = &quot;/opt/vault/tls/vault.crt&quot;\n  tls_key_file  = &quot;/opt/vault/tls/vault.key&quot;\n  tls_min_version = &quot;tls12&quot;\n  tls_cipher_suites = &quot;TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384,TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384,TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305,TLS_ECDHE_ECDSA_WITH_CHACHA20_POLY1305,TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256,TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256&quot;\n  tls_require_and_verify_client_cert = false\n  tls_client_ca_file = &quot;/opt/vault/tls/ca.crt&quot;\n}\n\n# Cluster listener for HA\nlistener &quot;tcp&quot; {\n  address = &quot;0.0.0.0:8201&quot; \n  cluster_address = &quot;0.0.0.0:8201&quot;\n  tls_cert_file = &quot;/opt/vault/tls/vault.crt&quot;\n  tls_key_file  = &quot;/opt/vault/tls/vault.key&quot;\n}\n\n# API and cluster addresses\napi_addr = &quot;https://vault.example.com:8200&quot;\ncluster_addr = &quot;https://vault.example.com:8201&quot;\n\n# Enterprise license\nlicense_path = &quot;/opt/vault/license/vault.hclic&quot;\n\n# Logging configuration\nlog_level = &quot;Info&quot;\nlog_file  = &quot;/opt/vault/logs/vault.log&quot;\nlog_rotate_duration = &quot;24h&quot;\nlog_rotate_max_files = 30\n\n# Telemetry and monitoring\ntelemetry {\n  prometheus_retention_time = &quot;30s&quot;\n  disable_hostname = true\n  usage_gauge_period = &quot;5m&quot;\n}\n\n# Seal configuration - Auto-unseal with cloud KMS (Enterprise)\nseal &quot;awskms&quot; {\n  region     = &quot;us-west-2&quot;\n  kms_key_id = &quot;arn:aws:kms:us-west-2:123456789012:key/12345678-1234-1234-1234-123456789012&quot;\n}\n\n# Alternative: Azure Key Vault\n# seal &quot;azurekeyvault&quot; {\n#   tenant_id      = &quot;46646709-b63e-4747-be42-516edeaf1e14&quot;\n#   client_id      = &quot;03dc33fc-16d9-4b77-8152-3ec568f8af6e&quot;\n#   client_secret  = &quot;DUJDS3...&quot;\n#   vault_name     = &quot;hc-vault&quot;\n#   key_name       = &quot;vault_key&quot;\n# }\n\n# Alternative: Google Cloud KMS\n# seal &quot;gcpckms&quot; {\n#   project     = &quot;vault-project&quot;\n#   region      = &quot;us-central1&quot;\n#   key_ring    = &quot;vault-keyring&quot;\n#   crypto_key  = &quot;vault-key&quot;\n# }\n\n# Performance replication (Enterprise)\nreplication {\n  resolver_discover_servers = false\n}\n\n# HSM configuration (Enterprise with HSM)\n# seal &quot;pkcs11&quot; {\n#   lib            = &quot;/usr/lib/softhsm/libsofthsm2.so&quot;\n#   slot           = &quot;0&quot;\n#   pin            = &quot;1234&quot;\n#   key_label      = &quot;vault-hsm-key&quot;\n#   hmac_key_label = &quot;vault-hsm-hmac-key&quot;\n# }\nEOF\n\nsudo chown vault:vault /etc/vault.d/vault.hcl\nsudo chmod 640 /etc/vault.d/vault.hcl</code></pre>\n      </div>\n    </div>\n<h3 id=\"advanced-tls-configuration\" class=\"mobile-header\">Advanced TLS Configuration</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Generate production-grade TLS certificates\nsudo mkdir -p /opt/vault/tls\n\n# Create CA certificate\nsudo openssl genrsa -out /opt/vault/tls/ca-key.pem 4096\nsudo openssl req -new -x509 -days 3650 -key /opt/vault/tls/ca-key.pem -out /opt/vault/tls/ca.crt -subj &quot;/C=US/ST=State/L=City/O=Organization/CN=Vault-CA&quot;\n\n# Create server certificate\nsudo openssl genrsa -out /opt/vault/tls/vault-key.pem 4096\nsudo openssl req -new -key /opt/vault/tls/vault-key.pem -out /opt/vault/tls/vault.csr -subj &quot;/C=US/ST=State/L=City/O=Organization/CN=vault.example.com&quot;\n\n# Create certificate with SAN extensions\nsudo tee /opt/vault/tls/vault.conf &gt; /dev/null &lt;&lt;EOF\n[req]\ndistinguished_name = req_distinguished_name\nreq_extensions = v3_req\n\n[req_distinguished_name]\n\n[v3_req]\nbasicConstraints = CA:FALSE\nkeyUsage = nonRepudiation, digitalSignature, keyEncipherment\nsubjectAltName = @alt_names\n\n[alt_names]\nDNS.1 = vault.example.com\nDNS.2 = vault-node-1.example.com\nDNS.3 = vault-node-2.example.com\nDNS.4 = vault-node-3.example.com\nDNS.5 = localhost\nIP.1 = 127.0.0.1\nIP.2 = 10.0.1.10\nIP.3 = 10.0.1.11\nIP.4 = 10.0.1.12\nEOF\n\nsudo openssl x509 -req -days 365 -in /opt/vault/tls/vault.csr -CA /opt/vault/tls/ca.crt -CAkey /opt/vault/tls/ca-key.pem -CAcreateserial -out /opt/vault/tls/vault.crt -extensions v3_req -extfile /opt/vault/tls/vault.conf\n\n# Set secure permissions\nsudo chmod 600 /opt/vault/tls/*-key.pem\nsudo chmod 644 /opt/vault/tls/*.crt\nsudo chown -R vault:vault /opt/vault/tls\n\n# For Let&#039;s Encrypt certificates (production)\nsudo apt install -y certbot  # Ubuntu/Debian\nsudo yum install -y certbot  # RHEL/CentOS\n\nsudo certbot certonly --standalone -d vault.example.com\nsudo cp /etc/letsencrypt/live/vault.example.com/fullchain.pem /opt/vault/tls/vault.crt\nsudo cp /etc/letsencrypt/live/vault.example.com/privkey.pem /opt/vault/tls/vault-key.pem\nsudo chown vault:vault /opt/vault/tls/vault.*</code></pre>\n      </div>\n    </div>\n<h3 id=\"enterprise-systemd-service-with-security-hardening\" class=\"mobile-header\">Enterprise SystemD Service with Security Hardening</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\">sudo tee /etc/systemd/system/vault.service &gt; /dev/null &lt;&lt;EOF\n[Unit]\nDescription=HashiCorp Vault - A tool for managing secrets\nDocumentation=https://www.vaultproject.io/docs/\nRequires=network-online.target\nAfter=network-online.target\nConditionFileNotEmpty=/etc/vault.d/vault.hcl\nStartLimitIntervalSec=60\nStartLimitBurst=3\n\n[Service]\nType=notify\nUser=vault\nGroup=vault\nExecStart=/usr/local/bin/vault server -config=/etc/vault.d/vault.hcl\nExecReload=/bin/kill --signal HUP \\$MAINPID\nKillMode=process\nRestart=on-failure\nRestartSec=5\nTimeoutStopSec=30\nStartLimitInterval=60\nStartLimitBurst=3\n\n# File system isolation\nProtectSystem=full\nProtectHome=read-only\nPrivateTmp=yes\nPrivateDevices=yes\n\n# Secure computing\nNoNewPrivileges=yes\nSecureBits=keep-caps\nCapabilityBoundingSet=CAP_SYSLOG CAP_IPC_LOCK\n\n# Additional security features\nAmbientCapabilities=CAP_IPC_LOCK\nCapabilities=CAP_IPC_LOCK+ep\n\n# Resource limits\nLimitNOFILE=65536\nLimitMEMLOCK=infinity\nLimitCORE=0\n\n# Network isolation\nRestrictNamespaces=yes\nRestrictRealtime=yes\n\n# Read-only paths\nReadOnlyPaths=/etc /usr\n\n# Writable paths\nReadWritePaths=/opt/vault/data\nReadWritePaths=/opt/vault/logs\n\n[Install]\nWantedBy=multi-user.target\nEOF\n\nsudo systemctl daemon-reload</code></pre>\n      </div>\n    </div>\n<h3 id=\"high-availability-cluster-setup\" class=\"mobile-header\">High Availability Cluster Setup</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Configure HA cluster with Integrated Storage (Raft)\n# Node 1 configuration\nsudo tee /etc/vault.d/vault.hcl &gt; /dev/null &lt;&lt;EOF\nui = true\ndisable_mlock = false\n\nstorage &quot;raft&quot; {\n  path    = &quot;/opt/vault/data&quot;\n  node_id = &quot;vault-node-1&quot;\n}\n\nlistener &quot;tcp&quot; {\n  address       = &quot;0.0.0.0:8200&quot;\n  tls_cert_file = &quot;/opt/vault/tls/vault.crt&quot;\n  tls_key_file  = &quot;/opt/vault/tls/vault-key.pem&quot;\n  tls_min_version = &quot;tls12&quot;\n}\n\nlistener &quot;tcp&quot; {\n  address       = &quot;0.0.0.0:8201&quot;\n  cluster_address = &quot;10.0.1.10:8201&quot;\n  tls_cert_file = &quot;/opt/vault/tls/vault.crt&quot;\n  tls_key_file  = &quot;/opt/vault/tls/vault-key.pem&quot;\n}\n\napi_addr = &quot;https://10.0.1.10:8200&quot;\ncluster_addr = &quot;https://10.0.1.10:8201&quot;\n\n# Enterprise features\nlicense_path = &quot;/opt/vault/license/vault.hclic&quot;\n\n# Auto-unseal with AWS KMS\nseal &quot;awskms&quot; {\n  region     = &quot;us-west-2&quot;\n  kms_key_id = &quot;arn:aws:kms:us-west-2:123456789012:key/vault-unseal-key&quot;\n}\n\n# Performance replication (Enterprise)\nreplication {\n  resolver_discover_servers = false\n}\nEOF\n\n# Initialize cluster on first node\nsudo systemctl start vault\nexport VAULT_ADDR=&#039;https://127.0.0.1:8200&#039;\nexport VAULT_SKIP_VERIFY=true  # Only for self-signed certs\nvault operator init -recovery-shares=5 -recovery-threshold=3\n\n# Join additional nodes to cluster\n# Node 2 and 3: Add retry_join blocks to their vault.hcl\nsudo tee -a /etc/vault.d/vault.hcl &gt; /dev/null &lt;&lt;EOF\n\nstorage &quot;raft&quot; {\n  path    = &quot;/opt/vault/data&quot;\n  node_id = &quot;vault-node-2&quot;  # Change to node-3 for third node\n  \n  retry_join {\n    leader_api_addr = &quot;https://10.0.1.10:8200&quot;\n  }\n}\nEOF</code></pre>\n      </div>\n    </div>\n<h2 id=\"security-hardening-2024-best-practices\" class=\"mobile-header\">Security Hardening (2024 Best Practices)</h2>\n<h3 id=\"system-level-security\" class=\"mobile-header\">System-Level Security</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Disable swap (critical for security)\nsudo swapoff -a\nsudo sed -i &#039;/ swap / s/^\\(.*\\)$/#\\1/g&#039; /etc/fstab\n\n# Disable core dumps\necho &#039;* hard core 0&#039; | sudo tee -a /etc/security/limits.conf\necho &#039;* soft core 0&#039; | sudo tee -a /etc/security/limits.conf\necho &#039;vault hard core 0&#039; | sudo tee -a /etc/security/limits.conf\necho &#039;vault soft core 0&#039; | sudo tee -a /etc/security/limits.conf\n\n# Configure kernel parameters for security\nsudo tee -a /etc/sysctl.conf &gt; /dev/null &lt;&lt;EOF\n# Vault security hardening\nkernel.dmesg_restrict = 1\nkernel.kptr_restrict = 2\nkernel.yama.ptrace_scope = 1\nfs.suid_dumpable = 0\nnet.ipv4.conf.all.send_redirects = 0\nnet.ipv4.conf.default.send_redirects = 0\nnet.ipv4.conf.all.accept_source_route = 0\nnet.ipv4.conf.default.accept_source_route = 0\nEOF\n\nsudo sysctl -p\n\n# SELinux configuration (RHEL/CentOS/Fedora)\nif command -v getenforce &gt;/dev/null 2&gt;&amp;1; then\n    sudo setsebool -P authlogin_nsswitch_use_ldap 1\n    sudo setsebool -P allow_execheap 0\n    sudo setsebool -P allow_execmem 0\n    sudo setsebool -P allow_execmod 0\n    sudo setsebool -P allow_execstack 0\n    \n    # Custom SELinux policy for Vault\n    sudo tee vault.te &gt; /dev/null &lt;&lt;EOF\nmodule vault 1.0;\n\nrequire {\n    type unconfined_t;\n    type vault_t;\n    class capability { ipc_lock sys_admin };\n    class process { setrlimit };\n}\n\n#============= vault_t ==============\nallow vault_t self:capability { ipc_lock sys_admin };\nallow vault_t self:process setrlimit;\nEOF\n\n    checkmodule -M -m -o vault.mod vault.te\n    semodule_package -o vault.pp -m vault.mod\n    sudo semodule -i vault.pp\nfi\n\n# AppArmor configuration (Ubuntu/Debian)\nif command -v apparmor_status &gt;/dev/null 2&gt;&amp;1; then\n    sudo tee /etc/apparmor.d/vault &gt; /dev/null &lt;&lt;EOF\n#include &lt;tunables/global&gt;\n\n/usr/local/bin/vault {\n  #include &lt;abstractions/base&gt;\n  #include &lt;abstractions/nameservice&gt;\n  #include &lt;abstractions/ssl_certs&gt;\n\n  capability ipc_lock,\n  capability setuid,\n  capability setgid,\n\n  /usr/local/bin/vault mr,\n  /etc/vault.d/** r,\n  /opt/vault/** rwk,\n  /proc/meminfo r,\n  /proc/sys/kernel/random/uuid r,\n  /sys/kernel/mm/transparent_hugepage/hpage_pmd_size r,\n\n  # Network access\n  network inet dgram,\n  network inet stream,\n\n  # Deny dangerous operations\n  deny /proc/kcore rwklx,\n  deny /proc/sysrq-trigger rwklx,\n  deny /proc/kmem rwklx,\n  deny /proc/mem rwklx,\n}\nEOF\n\n    sudo apparmor_parser -r /etc/apparmor.d/vault\nfi</code></pre>\n      </div>\n    </div>\n<h3 id=\"firewall-configuration-cross-platform\" class=\"mobile-header\">Firewall Configuration (Cross-Platform)</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># UFW (Ubuntu/Debian)\nsudo ufw allow from 10.0.0.0/8 to any port 8200 comment &#039;Vault API - internal network only&#039;\nsudo ufw allow from 10.0.0.0/8 to any port 8201 comment &#039;Vault cluster - internal network only&#039;\nsudo ufw deny 8200 comment &#039;Block Vault API from public&#039;\nsudo ufw deny 8201 comment &#039;Block Vault cluster from public&#039;\nsudo ufw enable\n\n# Firewalld (RHEL/CentOS/Fedora)\nsudo firewall-cmd --permanent --new-zone=vault\nsudo firewall-cmd --permanent --zone=vault --add-source=10.0.0.0/8\nsudo firewall-cmd --permanent --zone=vault --add-port=8200/tcp\nsudo firewall-cmd --permanent --zone=vault --add-port=8201/tcp\nsudo firewall-cmd --reload\n\n# iptables (Universal)\nsudo iptables -A INPUT -p tcp -s 10.0.0.0/8 --dport 8200 -j ACCEPT\nsudo iptables -A INPUT -p tcp -s 10.0.0.0/8 --dport 8201 -j ACCEPT\nsudo iptables -A INPUT -p tcp --dport 8200 -j DROP\nsudo iptables -A INPUT -p tcp --dport 8201 -j DROP\n\n# Save iptables rules\n# Ubuntu/Debian\nsudo apt install -y iptables-persistent\nsudo netfilter-persistent save\n\n# RHEL/CentOS\nsudo service iptables save</code></pre>\n      </div>\n    </div>\n<h3 id=\"audit-logging-and-monitoring\" class=\"mobile-header\">Audit Logging and Monitoring</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Enable comprehensive audit logging\nexport VAULT_ADDR=&#039;https://127.0.0.1:8200&#039;\nvault auth &lt;root-token&gt;\n\n# Enable file audit device\nvault audit enable file file_path=/opt/vault/logs/audit.log\n\n# Enable syslog audit device\nvault audit enable syslog tag=&quot;vault&quot; facility=&quot;LOCAL0&quot;\n\n# Configure log rotation for audit logs\nsudo tee /etc/logrotate.d/vault-audit &gt; /dev/null &lt;&lt;EOF\n/opt/vault/logs/audit.log {\n    daily\n    missingok\n    rotate 90\n    compress\n    delaycompress\n    notifempty\n    create 640 vault vault\n    postrotate\n        /bin/kill -HUP \\`cat /var/run/vault.pid 2&gt;/dev/null\\` 2&gt;/dev/null || true\n    endscript\n}\nEOF\n\n# Setup centralized logging (rsyslog configuration)\nsudo tee -a /etc/rsyslog.conf &gt; /dev/null &lt;&lt;EOF\n\n# Vault audit logging\nlocal0.*    /var/log/vault-audit.log\n&amp; stop\nEOF\n\nsudo systemctl restart rsyslog\n\n# Prometheus monitoring configuration\nvault write sys/metrics/config enabled=true</code></pre>\n      </div>\n    </div>\n<h2 id=\"authentication-methods-and-policies\" class=\"mobile-header\">Authentication Methods and Policies</h2>\n<h3 id=\"enterprise-authentication-setup\" class=\"mobile-header\">Enterprise Authentication Setup</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Enable and configure LDAP authentication\nvault auth enable ldap\n\nvault write auth/ldap/config \\\n    url=&quot;ldaps://ldap.example.com&quot; \\\n    userdn=&quot;ou=Users,dc=example,dc=com&quot; \\\n    userattr=&quot;sAMAccountName&quot; \\\n    groupdn=&quot;ou=Groups,dc=example,dc=com&quot; \\\n    groupfilter=&quot;(&amp;(objectClass=group)(member:1.2.840.113556.1.4.1941:={{.UserDN}}))&quot; \\\n    groupattr=&quot;cn&quot; \\\n    binddn=&quot;cn=vault,ou=Service Accounts,dc=example,dc=com&quot; \\\n    bindpass=&quot;ldap_service_password&quot; \\\n    starttls=true \\\n    insecure_tls=false \\\n    certificate=@/opt/vault/tls/ldap-ca.crt\n\n# Configure OIDC authentication (Azure AD example)\nvault auth enable oidc\n\nvault write auth/oidc/config \\\n    oidc_discovery_url=&quot;https://login.microsoftonline.com/your-tenant-id/v2.0&quot; \\\n    oidc_client_id=&quot;your-application-id&quot; \\\n    oidc_client_secret=&quot;your-client-secret&quot; \\\n    default_role=&quot;azure-ad-users&quot;\n\nvault write auth/oidc/role/azure-ad-users \\\n    bound_audiences=&quot;your-application-id&quot; \\\n    allowed_redirect_uris=&quot;https://vault.example.com:8200/ui/vault/auth/oidc/oidc/callback&quot; \\\n    user_claim=&quot;email&quot; \\\n    policies=&quot;azure-ad-policy&quot;\n\n# Enable GitHub authentication\nvault auth enable github\n\nvault write auth/github/config \\\n    organization=&quot;your-organization&quot; \\\n    base_url=&quot;https://github.com/&quot; \\\n    max_ttl=&quot;8h&quot; \\\n    ttl=&quot;1h&quot;\n\nvault write auth/github/map/teams/vault-admins value=admin-policy\nvault write auth/github/map/teams/developers value=developer-policy\n\n# AWS IAM authentication\nvault auth enable aws\n\nvault write auth/aws/config/client \\\n    secret_key=&quot;your-secret-key&quot; \\\n    access_key=&quot;your-access-key&quot;\n\nvault write auth/aws/role/ec2-role \\\n    auth_type=&quot;ec2&quot; \\\n    policies=&quot;ec2-policy&quot; \\\n    max_ttl=&quot;1h&quot; \\\n    bound_instances=&quot;i-1234567890abcdef0,i-0987654321fedcba0&quot;\n\n# Kubernetes authentication\nvault auth enable kubernetes\n\nvault write auth/kubernetes/config \\\n    token_reviewer_jwt=&quot;$(cat /var/run/secrets/kubernetes.io/serviceaccount/token)&quot; \\\n    kubernetes_host=&quot;https://kubernetes.example.com:6443&quot; \\\n    kubernetes_ca_cert=@/var/run/secrets/kubernetes.io/serviceaccount/ca.crt\n\nvault write auth/kubernetes/role/myapp \\\n    bound_service_account_names=&quot;vault-auth&quot; \\\n    bound_service_account_namespaces=&quot;default,production&quot; \\\n    policies=&quot;myapp-policy&quot; \\\n    ttl=&quot;1h&quot;</code></pre>\n      </div>\n    </div>\n<h3 id=\"advanced-policy-management\" class=\"mobile-header\">Advanced Policy Management</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Create comprehensive policies with fine-grained access control\ncat &gt; admin-policy.hcl &lt;&lt;EOF\n# Admin policy with full access and audit capabilities\npath &quot;*&quot; {\n  capabilities = [&quot;create&quot;, &quot;read&quot;, &quot;update&quot;, &quot;delete&quot;, &quot;list&quot;, &quot;sudo&quot;]\n}\n\n# Audit log access for compliance\npath &quot;sys/audit/*&quot; {\n  capabilities = [&quot;create&quot;, &quot;read&quot;, &quot;update&quot;, &quot;delete&quot;, &quot;list&quot;, &quot;sudo&quot;]\n}\n\n# Manage authentication methods\npath &quot;sys/auth/*&quot; {\n  capabilities = [&quot;create&quot;, &quot;read&quot;, &quot;update&quot;, &quot;delete&quot;, &quot;list&quot;, &quot;sudo&quot;]\n}\n\n# Mount/unmount secrets engines\npath &quot;sys/mounts/*&quot; {\n  capabilities = [&quot;create&quot;, &quot;read&quot;, &quot;update&quot;, &quot;delete&quot;, &quot;list&quot;, &quot;sudo&quot;]\n}\n\n# Configure and manage the audit devices\npath &quot;sys/audit&quot; {\n  capabilities = [&quot;read&quot;, &quot;list&quot;]\n}\nEOF\n\ncat &gt; developer-policy.hcl &lt;&lt;EOF\n# Developer policy with limited access to application secrets\npath &quot;secret/data/applications/{{identity.entity.aliases.auth_github_*.name}}/*&quot; {\n  capabilities = [&quot;create&quot;, &quot;read&quot;, &quot;update&quot;, &quot;delete&quot;, &quot;list&quot;]\n}\n\npath &quot;secret/metadata/applications/{{identity.entity.aliases.auth_github_*.name}}/*&quot; {\n  capabilities = [&quot;list&quot;]\n}\n\n# Read-only access to shared secrets\npath &quot;secret/data/shared/*&quot; {\n  capabilities = [&quot;read&quot;, &quot;list&quot;]\n}\n\n# Database credentials with time-bound access\npath &quot;database/creds/readonly&quot; {\n  capabilities = [&quot;read&quot;]\n}\n\n# PKI certificate generation for specific domains\npath &quot;pki/issue/developer-role&quot; {\n  capabilities = [&quot;create&quot;, &quot;update&quot;]\n}\n\n# Self-service capabilities\npath &quot;auth/token/lookup-self&quot; {\n  capabilities = [&quot;read&quot;]\n}\n\npath &quot;auth/token/renew-self&quot; {\n  capabilities = [&quot;update&quot;]\n}\n\npath &quot;auth/token/revoke-self&quot; {\n  capabilities = [&quot;update&quot;]\n}\nEOF\n\ncat &gt; cicd-policy.hcl &lt;&lt;EOF\n# CI/CD policy for automated systems\npath &quot;secret/data/cicd/*&quot; {\n  capabilities = [&quot;create&quot;, &quot;read&quot;, &quot;update&quot;, &quot;delete&quot;, &quot;list&quot;]\n}\n\n# Database credentials for deployments\npath &quot;database/creds/application-user&quot; {\n  capabilities = [&quot;read&quot;]\n}\n\n# PKI for service certificates\npath &quot;pki/issue/service-role&quot; {\n  capabilities = [&quot;create&quot;, &quot;update&quot;]\n}\n\n# Kubernetes service account tokens\npath &quot;kubernetes/creds/application-role&quot; {\n  capabilities = [&quot;read&quot;]\n}\n\n# AWS credentials for deployment\npath &quot;aws/creds/deployment-role&quot; {\n  capabilities = [&quot;read&quot;]\n}\nEOF\n\n# Apply policies\nvault policy write admin admin-policy.hcl\nvault policy write developer developer-policy.hcl\nvault policy write cicd cicd-policy.hcl\n\n# Create entity for identity management\nvault write identity/entity \\\n    name=&quot;john.doe&quot; \\\n    policies=&quot;developer&quot; \\\n    metadata=department=&quot;engineering&quot; \\\n    metadata=team=&quot;platform&quot;</code></pre>\n      </div>\n    </div>\n<h2 id=\"advanced-secrets-engines\" class=\"mobile-header\">Advanced Secrets Engines</h2>\n<h3 id=\"database-secrets-engine\" class=\"mobile-header\">Database Secrets Engine</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Enable database secrets engine\nvault secrets enable database\n\n# Configure MySQL connection\nvault write database/config/mysql-prod \\\n    plugin_name=mysql-database-plugin \\\n    connection_url=&quot;{{username}}:{{password}}@tcp(mysql.example.com:3306)/&quot; \\\n    allowed_roles=&quot;mysql-admin,mysql-readonly,mysql-application&quot; \\\n    username=&quot;vault&quot; \\\n    password=&quot;vault-service-password&quot; \\\n    max_open_connections=5 \\\n    max_idle_connections=0 \\\n    max_connection_lifetime=&quot;10m&quot;\n\n# Create roles for different access levels\nvault write database/roles/mysql-admin \\\n    db_name=mysql-prod \\\n    creation_statements=&quot;CREATE USER &#039;{{name}}&#039;@&#039;%&#039; IDENTIFIED BY &#039;{{password}}&#039;; GRANT ALL ON *.* TO &#039;{{name}}&#039;@&#039;%&#039;;&quot; \\\n    default_ttl=&quot;1h&quot; \\\n    max_ttl=&quot;24h&quot;\n\nvault write database/roles/mysql-readonly \\\n    db_name=mysql-prod \\\n    creation_statements=&quot;CREATE USER &#039;{{name}}&#039;@&#039;%&#039; IDENTIFIED BY &#039;{{password}}&#039;; GRANT SELECT ON *.* TO &#039;{{name}}&#039;@&#039;%&#039;;&quot; \\\n    default_ttl=&quot;1h&quot; \\\n    max_ttl=&quot;8h&quot;\n\nvault write database/roles/mysql-application \\\n    db_name=mysql-prod \\\n    creation_statements=&quot;CREATE USER &#039;{{name}}&#039;@&#039;%&#039; IDENTIFIED BY &#039;{{password}}&#039;; GRANT SELECT, INSERT, UPDATE, DELETE ON app_db.* TO &#039;{{name}}&#039;@&#039;%&#039;;&quot; \\\n    default_ttl=&quot;30m&quot; \\\n    max_ttl=&quot;2h&quot;\n\n# PostgreSQL configuration\nvault write database/config/postgres-prod \\\n    plugin_name=postgresql-database-plugin \\\n    connection_url=&quot;postgresql://{{username}}:{{password}}@postgres.example.com:5432/postgres?sslmode=require&quot; \\\n    allowed_roles=&quot;postgres-admin,postgres-readonly&quot; \\\n    username=&quot;vault&quot; \\\n    password=&quot;vault-postgres-password&quot;\n\nvault write database/roles/postgres-admin \\\n    db_name=postgres-prod \\\n    creation_statements=&quot;CREATE ROLE \\&quot;{{name}}\\&quot; WITH LOGIN PASSWORD &#039;{{password}}&#039; VALID UNTIL &#039;{{expiration}}&#039;; GRANT ALL PRIVILEGES ON DATABASE app_db TO \\&quot;{{name}}\\&quot;;&quot; \\\n    default_ttl=&quot;1h&quot; \\\n    max_ttl=&quot;24h&quot;</code></pre>\n      </div>\n    </div>\n<h3 id=\"pki-secrets-engine-enterprise-certificate-management\" class=\"mobile-header\">PKI Secrets Engine (Enterprise Certificate Management)</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Enable PKI secrets engine for internal CA\nvault secrets enable -path=pki pki\n\n# Configure CA\nvault secrets tune -max-lease-ttl=87600h pki\n\n# Generate internal CA certificate\nvault write -field=certificate pki/root/generate/internal \\\n    common_name=&quot;Internal CA&quot; \\\n    issuer_name=&quot;internal-ca&quot; \\\n    ttl=87600h &gt; /opt/vault/tls/internal-ca.crt\n\n# Configure certificate URLs\nvault write pki/config/urls \\\n    issuing_certificates=&quot;https://vault.example.com:8200/v1/pki/ca&quot; \\\n    crl_distribution_points=&quot;https://vault.example.com:8200/v1/pki/crl&quot;\n\n# Create intermediate CA\nvault secrets enable -path=pki_int pki\n\nvault secrets tune -max-lease-ttl=43800h pki_int\n\n# Generate intermediate CSR\nvault write -format=json pki_int/intermediate/generate/internal \\\n    common_name=&quot;Internal Intermediate CA&quot; \\\n    issuer_name=&quot;internal-intermediate-ca&quot; \\\n    | jq -r &#039;.data.csr&#039; &gt; pki_intermediate.csr\n\n# Sign intermediate certificate\nvault write -format=json pki/root/sign-intermediate \\\n    issuer_ref=&quot;internal-ca&quot; \\\n    csr=@pki_intermediate.csr \\\n    format=pem_bundle ttl=&quot;43800h&quot; \\\n    | jq -r &#039;.data.certificate&#039; &gt; intermediate.cert.pem\n\n# Import signed certificate\nvault write pki_int/intermediate/set-signed certificate=@intermediate.cert.pem\n\n# Create role for service certificates\nvault write pki_int/roles/service-role \\\n    issuer_ref=&quot;internal-intermediate-ca&quot; \\\n    allowed_domains=&quot;example.com,internal.example.com&quot; \\\n    allow_subdomains=true \\\n    max_ttl=&quot;72h&quot; \\\n    generate_lease=true\n\n# Create role for client certificates\nvault write pki_int/roles/client-role \\\n    issuer_ref=&quot;internal-intermediate-ca&quot; \\\n    allowed_domains=&quot;client.example.com&quot; \\\n    allow_subdomains=false \\\n    client_flag=true \\\n    max_ttl=&quot;24h&quot;\n\n# Generate certificate\nvault write pki_int/issue/service-role common_name=&quot;api.example.com&quot; ttl=&quot;24h&quot;</code></pre>\n      </div>\n    </div>\n<h3 id=\"cloud-provider-integration\" class=\"mobile-header\">Cloud Provider Integration</h3>\n<p class=\"mobile-paragraph\">#### AWS Secrets Engine</p>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Enable AWS secrets engine\nvault secrets enable aws\n\n# Configure AWS credentials\nvault write aws/config/root \\\n    access_key=&quot;vault-aws-access-key&quot; \\\n    secret_key=&quot;vault-aws-secret-key&quot; \\\n    region=&quot;us-west-2&quot;\n\n# Create AWS roles\nvault write aws/roles/ec2-admin \\\n    credential_type=&quot;iam_user&quot; \\\n    policy_document=&#039;-&#039; &lt;&lt;EOF\n{\n  &quot;Version&quot;: &quot;2012-10-17&quot;,\n  &quot;Statement&quot;: [\n    {\n      &quot;Effect&quot;: &quot;Allow&quot;,\n      &quot;Action&quot;: [\n        &quot;ec2:*&quot;,\n        &quot;vpc:*&quot;\n      ],\n      &quot;Resource&quot;: &quot;*&quot;\n    }\n  ]\n}\nEOF\n\nvault write aws/roles/s3-readonly \\\n    credential_type=&quot;iam_user&quot; \\\n    policy_arns=&quot;arn:aws:iam::aws:policy/AmazonS3ReadOnlyAccess&quot; \\\n    default_sts_ttl=&quot;1h&quot; \\\n    max_sts_ttl=&quot;12h&quot;\n\n# Generate temporary AWS credentials\nvault read aws/creds/ec2-admin</code></pre>\n      </div>\n    </div>\n<p class=\"mobile-paragraph\">#### Azure Secrets Engine</p>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Enable Azure secrets engine\nvault secrets enable azure\n\n# Configure Azure credentials\nvault write azure/config \\\n    subscription_id=&quot;your-subscription-id&quot; \\\n    tenant_id=&quot;your-tenant-id&quot; \\\n    client_id=&quot;vault-service-principal-id&quot; \\\n    client_secret=&quot;vault-service-principal-secret&quot;\n\n# Create Azure roles\nvault write azure/roles/contributor \\\n    azure_roles=&#039;-&#039; &lt;&lt;EOF\n[\n    {\n        &quot;role_name&quot;: &quot;Contributor&quot;,\n        &quot;scope&quot;:  &quot;/subscriptions/your-subscription-id&quot;\n    }\n]\nEOF\n\nvault write azure/roles/storage-admin \\\n    azure_roles=&#039;-&#039; &lt;&lt;EOF\n[\n    {\n        &quot;role_name&quot;: &quot;Storage Account Contributor&quot;,\n        &quot;scope&quot;:  &quot;/subscriptions/your-subscription-id/resourceGroups/production&quot;\n    }\n]\nEOF\n\n# Generate Azure credentials\nvault read azure/creds/contributor</code></pre>\n      </div>\n    </div>\n<h2 id=\"enterprise-features\" class=\"mobile-header\">Enterprise Features</h2>\n<h3 id=\"performance-replication\" class=\"mobile-header\">Performance Replication</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Configure performance replication (Enterprise)\n# On primary cluster\nvault write -f sys/replication/performance/primary/enable\n\n# Generate secondary token\nvault write sys/replication/performance/primary/secondary-token id=&quot;dr-secondary&quot;\n\n# On secondary cluster\nvault write sys/replication/performance/secondary/enable token=&quot;&lt;secondary-token&gt;&quot;\n\n# Monitor replication status\nvault read sys/replication/status\nvault read sys/replication/performance/status</code></pre>\n      </div>\n    </div>\n<h3 id=\"disaster-recovery-replication\" class=\"mobile-header\">Disaster Recovery Replication</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Enable DR replication on primary\nvault write -f sys/replication/dr/primary/enable\n\n# Generate DR token\nvault write sys/replication/dr/primary/secondary-token id=&quot;dr-cluster&quot;\n\n# On DR cluster\nvault write sys/replication/dr/secondary/enable token=&quot;&lt;dr-token&gt;&quot;\n\n# Promote DR secondary (in disaster scenario)\nvault write -f sys/replication/dr/secondary/promote\n\n# Demote and revert\nvault write -f sys/replication/dr/secondary/reindex\nvault write sys/replication/dr/secondary/update-primary dr_operation_token=&quot;&lt;operation-token&gt;&quot;</code></pre>\n      </div>\n    </div>\n<h3 id=\"namespaces-enterprise\" class=\"mobile-header\">Namespaces (Enterprise)</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Create namespaces for multi-tenancy\nvault namespace create engineering\nvault namespace create finance\nvault namespace create operations\n\n# Work within specific namespace\nexport VAULT_NAMESPACE=engineering\n\n# Configure namespace-specific policies and auth methods\nvault policy write -namespace=engineering eng-admin - &lt;&lt;EOF\npath &quot;*&quot; {\n  capabilities = [&quot;create&quot;, &quot;read&quot;, &quot;update&quot;, &quot;delete&quot;, &quot;list&quot;]\n}\nEOF\n\n# Enable auth method in namespace\nvault auth enable -namespace=engineering userpass\n\nvault write -namespace=engineering auth/userpass/users/alice \\\n    password=&quot;secure-password&quot; \\\n    policies=&quot;eng-admin&quot;</code></pre>\n      </div>\n    </div>\n<h3 id=\"transform-secrets-engine-enterprise\" class=\"mobile-header\">Transform Secrets Engine (Enterprise)</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Enable transform secrets engine for data protection\nvault secrets enable transform\n\n# Create transformation for credit card numbers\nvault write transform/role/payments \\\n    transformations=credit-card-transformation\n\nvault write transform/transformation/credit-card-transformation \\\n    type=fpe \\\n    template=&quot;credit-card&quot; \\\n    tweak_source=supplied \\\n    allowed_roles=payments\n\nvault write transform/template/credit-card \\\n    type=regex \\\n    pattern=&#039;\\d{4}-\\d{4}-\\d{4}-(\\d{4})&#039; \\\n    alphabet=numerics\n\n# Encode sensitive data\nvault write transform/encode/payments \\\n    transformation=credit-card-transformation \\\n    value=&quot;1234-5678-9012-3456&quot; \\\n    tweak=&quot;user-123&quot;\n\n# Decode when needed\nvault write transform/decode/payments \\\n    transformation=credit-card-transformation \\\n    value=&quot;encoded-value&quot; \\\n    tweak=&quot;user-123&quot;</code></pre>\n      </div>\n    </div>\n<h2 id=\"backup-and-disaster-recovery\" class=\"mobile-header\">Backup and Disaster Recovery</h2>\n<h3 id=\"enterprise-backup-strategy\" class=\"mobile-header\">Enterprise Backup Strategy</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Create comprehensive backup script\nsudo tee /usr/local/bin/vault-backup.sh &gt; /dev/null &lt;&lt;&#039;EOF&#039;\n#!/bin/bash\nBACKUP_DIR=&quot;/backup/vault&quot;\nDATE=$(date +%Y%m%d_%H%M%S)\n\nmkdir -p ${BACKUP_DIR}/{snapshots,configs,certificates}\n\n# Raft storage snapshot (Enterprise)\nvault operator raft snapshot save ${BACKUP_DIR}/snapshots/vault-snapshot-${DATE}.snap\n\n# Backup configuration files\ntar -czf ${BACKUP_DIR}/configs/vault-config-${DATE}.tar.gz \\\n    /etc/vault.d/ \\\n    /etc/systemd/system/vault.service\n\n# Backup TLS certificates\ntar -czf ${BACKUP_DIR}/certificates/vault-tls-${DATE}.tar.gz \\\n    /opt/vault/tls/\n\n# Backup to cloud storage\n# AWS S3\naws s3 cp ${BACKUP_DIR}/snapshots/vault-snapshot-${DATE}.snap s3://vault-backups/snapshots/\naws s3 cp ${BACKUP_DIR}/configs/vault-config-${DATE}.tar.gz s3://vault-backups/configs/\n\n# Azure Blob Storage\naz storage blob upload \\\n    --file ${BACKUP_DIR}/snapshots/vault-snapshot-${DATE}.snap \\\n    --container-name vault-backups \\\n    --name snapshots/vault-snapshot-${DATE}.snap\n\n# Google Cloud Storage\ngsutil cp ${BACKUP_DIR}/snapshots/vault-snapshot-${DATE}.snap gs://vault-backups/snapshots/\n\n# Verify snapshot integrity\nvault operator raft snapshot inspect ${BACKUP_DIR}/snapshots/vault-snapshot-${DATE}.snap\n\n# Keep only last 30 backups locally\nfind ${BACKUP_DIR} -name &quot;vault-*&quot; -type f -mtime +30 -delete\n\n# Encrypt backup files\ngpg --symmetric --cipher-algo AES256 ${BACKUP_DIR}/snapshots/vault-snapshot-${DATE}.snap\n\necho &quot;Vault backup completed: ${DATE}&quot;\nEOF\n\nsudo chmod +x /usr/local/bin/vault-backup.sh\n\n# Schedule automated backups\necho &quot;0 2 * * * root /usr/local/bin/vault-backup.sh&quot; | sudo tee -a /etc/crontab</code></pre>\n      </div>\n    </div>\n<h3 id=\"disaster-recovery-testing\" class=\"mobile-header\">Disaster Recovery Testing</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Create DR testing script\nsudo tee /usr/local/bin/vault-dr-test.sh &gt; /dev/null &lt;&lt;&#039;EOF&#039;\n#!/bin/bash\nTEST_DIR=&quot;/tmp/vault-dr-test&quot;\nDATE=$(date +%Y%m%d_%H%M%S)\n\nmkdir -p ${TEST_DIR}\n\n# Test snapshot restore capability\nvault operator raft snapshot save ${TEST_DIR}/test-snapshot-${DATE}.snap\n\n# Verify snapshot\nvault operator raft snapshot inspect ${TEST_DIR}/test-snapshot-${DATE}.snap\n\n# Test unsealing process\nvault operator key-status\n\n# Test authentication methods\nvault auth list\n\n# Test secrets engines\nvault secrets list\n\n# Test policy enforcement\nvault policy list\n\n# Generate test report\ncat &gt; ${TEST_DIR}/dr-test-report-${DATE}.txt &lt;&lt;EOL\nVault DR Test Report - ${DATE}\n================================\n\nSnapshot Creation: $([ -f ${TEST_DIR}/test-snapshot-${DATE}.snap ] &amp;&amp; echo &quot;PASS&quot; || echo &quot;FAIL&quot;)\nVault Status: $(vault status -format=json | jq -r .sealed)\nActive Auth Methods: $(vault auth list -format=json | jq -r &#039;keys | length&#039;)\nActive Secrets Engines: $(vault secrets list -format=json | jq -r &#039;keys | length&#039;)\nPolicies Count: $(vault policy list | wc -l)\n\nTest completed at: $(date)\nEOL\n\necho &quot;DR test completed. Report: ${TEST_DIR}/dr-test-report-${DATE}.txt&quot;\nEOF\n\nsudo chmod +x /usr/local/bin/vault-dr-test.sh\n\n# Schedule monthly DR tests\necho &quot;0 2 1 * * root /usr/local/bin/vault-dr-test.sh&quot; | sudo tee -a /etc/crontab</code></pre>\n      </div>\n    </div>\n<h2 id=\"application-integration-examples\" class=\"mobile-header\">Application Integration Examples</h2>\n<h3 id=\"kubernetes-integration-with-vault-agent\" class=\"mobile-header\">Kubernetes Integration with Vault Agent</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Deploy Vault Agent as sidecar for Kubernetes workloads\ncat &gt; vault-agent-k8s.yaml &lt;&lt;EOF\napiVersion: v1\nkind: ConfigMap\nmetadata:\n  name: vault-agent-config\ndata:\n  vault-agent.hcl: |\n    exit_after_auth = false\n    pid_file = &quot;/home/vault/pidfile&quot;\n\n    auto_auth {\n      method &quot;kubernetes&quot; {\n        mount_path = &quot;auth/kubernetes&quot;\n        config = {\n          role = &quot;myapp&quot;\n        }\n      }\n\n      sink &quot;file&quot; {\n        config = {\n          path = &quot;/home/vault/.vault-token&quot;\n        }\n      }\n    }\n\n    cache {\n      use_auto_auth_token = true\n    }\n\n    listener &quot;tcp&quot; {\n      address = &quot;127.0.0.1:8080&quot;\n      tls_disable = true\n    }\n\n    vault {\n      address = &quot;https://vault.example.com:8200&quot;\n    }\n\n    template {\n      source      = &quot;/vault/templates/database.conf.tpl&quot;\n      destination = &quot;/vault/secrets/database.conf&quot;\n      perms       = 0640\n      command     = &quot;pkill -SIGHUP myapp&quot;\n    }\n---\napiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: myapp-with-vault\nspec:\n  replicas: 3\n  selector:\n    matchLabels:\n      app: myapp\n  template:\n    metadata:\n      labels:\n        app: myapp\n    spec:\n      serviceAccountName: vault-auth\n      securityContext:\n        runAsNonRoot: true\n        runAsUser: 1000\n        fsGroup: 1000\n      containers:\n      - name: vault-agent\n        image: vault:latest\n        command: [&quot;vault&quot;, &quot;agent&quot;, &quot;-config=/vault/config/vault-agent.hcl&quot;]\n        volumeMounts:\n        - name: vault-config\n          mountPath: /vault/config\n        - name: vault-secrets\n          mountPath: /vault/secrets\n        securityContext:\n          allowPrivilegeEscalation: false\n          readOnlyRootFilesystem: true\n          capabilities:\n            drop:\n            - ALL\n      - name: myapp\n        image: myapp:latest\n        volumeMounts:\n        - name: vault-secrets\n          mountPath: /app/config\n          readOnly: true\n        env:\n        - name: DB_CONFIG_FILE\n          value: &quot;/app/config/database.conf&quot;\n        securityContext:\n          allowPrivilegeEscalation: false\n          readOnlyRootFilesystem: true\n          capabilities:\n            drop:\n            - ALL\n      volumes:\n      - name: vault-config\n        configMap:\n          name: vault-agent-config\n      - name: vault-secrets\n        emptyDir:\n          medium: Memory\nEOF\n\nkubectl apply -f vault-agent-k8s.yaml</code></pre>\n      </div>\n    </div>\n<h3 id=\"cicd-pipeline-integration\" class=\"mobile-header\">CI/CD Pipeline Integration</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># GitHub Actions integration\ncat &gt; .github/workflows/vault-secrets.yml &lt;&lt;EOF\nname: Deploy with Vault Secrets\n\non:\n  push:\n    branches: [main]\n\njobs:\n  deploy:\n    runs-on: ubuntu-latest\n    permissions:\n      id-token: write\n      contents: read\n    \n    steps:\n    - name: Checkout code\n      uses: actions/checkout@v4\n    \n    - name: Configure Vault authentication\n      uses: hashicorp/vault-action@v2\n      with:\n        url: https://vault.example.com:8200\n        method: jwt\n        role: github-actions-role\n        secrets: |\n          secret/data/database username | DB_USER ;\n          secret/data/database password | DB_PASS ;\n          aws/creds/deployment-role access_key | AWS_ACCESS_KEY_ID ;\n          aws/creds/deployment-role secret_key | AWS_SECRET_ACCESS_KEY ;\n          pki_int/issue/service-role common_name=api.example.com ttl=1h | API_TLS_CERT\n    \n    - name: Deploy application\n      run: |\n        echo &quot;Deploying with secrets from Vault&quot;\n        echo &quot;Database user: \\${{ env.DB_USER }}&quot;\n        # Application deployment logic here\n      env:\n        DB_USER: \\${{ env.DB_USER }}\n        DB_PASS: \\${{ env.DB_PASS }}\n        AWS_ACCESS_KEY_ID: \\${{ env.AWS_ACCESS_KEY_ID }}\n        AWS_SECRET_ACCESS_KEY: \\${{ env.AWS_SECRET_ACCESS_KEY }}\nEOF\n\n# Configure GitHub Actions authentication in Vault\nvault auth enable jwt\n\nvault write auth/jwt/config \\\n    bound_issuer=&quot;https://token.actions.githubusercontent.com&quot; \\\n    oidc_discovery_url=&quot;https://token.actions.githubusercontent.com&quot;\n\nvault write auth/jwt/role/github-actions-role \\\n    bound_audiences=&quot;https://github.com/your-org&quot; \\\n    bound_subject=&quot;repo:your-org/your-repo:ref:refs/heads/main&quot; \\\n    user_claim=&quot;actor&quot; \\\n    role_type=&quot;jwt&quot; \\\n    policies=&quot;cicd-policy&quot; \\\n    ttl=&quot;10m&quot;</code></pre>\n      </div>\n    </div>\n<h3 id=\"terraform-integration\" class=\"mobile-header\">Terraform Integration</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Vault provider for Terraform\ncat &gt; terraform-vault.tf &lt;&lt;EOF\nterraform {\n  required_providers {\n    vault = {\n      source  = &quot;hashicorp/vault&quot;\n      version = &quot;~&gt; 3.0&quot;\n    }\n  }\n}\n\nprovider &quot;vault&quot; {\n  address = &quot;https://vault.example.com:8200&quot;\n  token   = var.vault_token\n}\n\n# Read secrets from Vault\ndata &quot;vault_generic_secret&quot; &quot;database&quot; {\n  path = &quot;secret/database&quot;\n}\n\ndata &quot;vault_aws_access_credentials&quot; &quot;deployment&quot; {\n  backend = &quot;aws&quot;\n  role    = &quot;deployment-role&quot;\n}\n\n# Use secrets in resources\nresource &quot;aws_db_instance&quot; &quot;main&quot; {\n  identifier_prefix = var.project_name\n  \n  username = data.vault_generic_secret.database.data[&quot;username&quot;]\n  password = data.vault_generic_secret.database.data[&quot;password&quot;]\n  \n  # Other configuration...\n}\n\n# Store Terraform-generated secrets back in Vault\nresource &quot;vault_generic_secret&quot; &quot;terraform_outputs&quot; {\n  path = &quot;secret/terraform/outputs&quot;\n\n  data_json = jsonencode({\n    rds_endpoint = aws_db_instance.main.endpoint\n    vpc_id       = aws_vpc.main.id\n    subnet_ids   = aws_subnet.main[*].id\n  })\n}\nEOF</code></pre>\n      </div>\n    </div>\n<h2 id=\"monitoring-and-observability\" class=\"mobile-header\">Monitoring and Observability</h2>\n<h3 id=\"vault-metrics-and-monitoring\" class=\"mobile-header\">Vault Metrics and Monitoring</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Enable Vault metrics collection\nvault write sys/metrics/config \\\n    enabled=true \\\n    enable_hostname_label=false \\\n    default_lease_duration=&quot;1h&quot; \\\n    max_lease_duration=&quot;24h&quot;\n\n# Prometheus monitoring configuration\ncat &gt; /etc/prometheus/vault-monitoring.yml &lt;&lt;EOF\nglobal:\n  scrape_interval: 15s\n\nscrape_configs:\n  - job_name: &#039;vault&#039;\n    scheme: https\n    tls_config:\n      ca_file: /opt/vault/tls/ca.crt\n      cert_file: /opt/prometheus/tls/client.crt\n      key_file: /opt/prometheus/tls/client.key\n    static_configs:\n      - targets: \n        - &#039;vault-1.example.com:8200&#039;\n        - &#039;vault-2.example.com:8200&#039;\n        - &#039;vault-3.example.com:8200&#039;\n    metrics_path: /v1/sys/metrics\n    params:\n      format: [&#039;prometheus&#039;]\n    bearer_token: &quot;prometheus-vault-token&quot;\n\n  # Monitor Vault process metrics\n  - job_name: &#039;vault-node-exporter&#039;\n    static_configs:\n      - targets:\n        - &#039;vault-1.example.com:9100&#039;\n        - &#039;vault-2.example.com:9100&#039;\n        - &#039;vault-3.example.com:9100&#039;\nEOF\n\n# Create Grafana dashboards for Vault monitoring\ncurl -X POST http://admin:admin@grafana.example.com/api/dashboards/db \\\n  -H &#039;Content-Type: application/json&#039; \\\n  -d @vault-dashboard.json</code></pre>\n      </div>\n    </div>\n<h3 id=\"advanced-audit-analysis\" class=\"mobile-header\">Advanced Audit Analysis</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Create audit log analysis script\nsudo tee /usr/local/bin/vault-audit-analysis.sh &gt; /dev/null &lt;&lt;&#039;EOF&#039;\n#!/bin/bash\nAUDIT_LOG=&quot;/opt/vault/logs/audit.log&quot;\nANALYSIS_DIR=&quot;/var/log/vault-analysis&quot;\nDATE=$(date +%Y%m%d_%H%M%S)\n\nmkdir -p ${ANALYSIS_DIR}\n\n# Failed authentication attempts\necho &quot;Failed Authentication Analysis - ${DATE}&quot; &gt; ${ANALYSIS_DIR}/failed-auth-${DATE}.txt\njq -r &#039;select(.type==&quot;response&quot; and .error != null) | [.time, .request.remote_address, .error] | @tsv&#039; ${AUDIT_LOG} | tail -100 &gt;&gt; ${ANALYSIS_DIR}/failed-auth-${DATE}.txt\n\n# Most active users\necho &quot;Most Active Users - ${DATE}&quot; &gt; ${ANALYSIS_DIR}/active-users-${DATE}.txt\njq -r &#039;select(.type==&quot;request&quot; and .auth != null) | .auth.display_name&#039; ${AUDIT_LOG} | sort | uniq -c | sort -nr | head -20 &gt;&gt; ${ANALYSIS_DIR}/active-users-${DATE}.txt\n\n# Secret access patterns\necho &quot;Secret Access Patterns - ${DATE}&quot; &gt; ${ANALYSIS_DIR}/secret-access-${DATE}.txt\njq -r &#039;select(.type==&quot;request&quot; and .request.path | test(&quot;^secret/data/&quot;)) | [.time, .auth.display_name, .request.path] | @tsv&#039; ${AUDIT_LOG} | tail -100 &gt;&gt; ${ANALYSIS_DIR}/secret-access-${DATE}.txt\n\n# Policy violations\necho &quot;Policy Violations - ${DATE}&quot; &gt; ${ANALYSIS_DIR}/policy-violations-${DATE}.txt\njq -r &#039;select(.type==&quot;response&quot; and .error != null and (.error | test(&quot;permission denied&quot;))) | [.time, .auth.display_name, .request.path, .error] | @tsv&#039; ${AUDIT_LOG} | tail -50 &gt;&gt; ${ANALYSIS_DIR}/policy-violations-${DATE}.txt\n\n# Generate summary report\ncat &gt; ${ANALYSIS_DIR}/audit-summary-${DATE}.txt &lt;&lt;EOL\nVault Audit Summary - ${DATE}\n==============================\n\nTotal Requests: $(jq -s &#039;length&#039; ${AUDIT_LOG})\nFailed Authentications: $(jq -s &#039;map(select(.type==&quot;response&quot; and .error != null)) | length&#039; ${AUDIT_LOG})\nPolicy Violations: $(jq -s &#039;map(select(.type==&quot;response&quot; and .error != null and (.error | test(&quot;permission denied&quot;)))) | length&#039; ${AUDIT_LOG})\nUnique Users: $(jq -r &#039;select(.type==&quot;request&quot; and .auth != null) | .auth.display_name&#039; ${AUDIT_LOG} | sort -u | wc -l)\n\nTop 5 Accessed Paths:\n$(jq -r &#039;select(.type==&quot;request&quot;) | .request.path&#039; ${AUDIT_LOG} | sort | uniq -c | sort -nr | head -5)\n\nAnalysis completed at: $(date)\nEOL\n\necho &quot;Audit analysis completed. Reports in: ${ANALYSIS_DIR}/&quot;\nEOF\n\nsudo chmod +x /usr/local/bin/vault-audit-analysis.sh\n\n# Schedule weekly audit analysis\necho &quot;0 6 * * 1 root /usr/local/bin/vault-audit-analysis.sh&quot; | sudo tee -a /etc/crontab</code></pre>\n      </div>\n    </div>\n<h2 id=\"verification-and-testing\" class=\"mobile-header\">Verification and Testing</h2>\n<h3 id=\"comprehensive-health-checks\" class=\"mobile-header\">Comprehensive Health Checks</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Create Vault health monitoring script\nsudo tee /usr/local/bin/vault-health-check.sh &gt; /dev/null &lt;&lt;&#039;EOF&#039;\n#!/bin/bash\nVAULT_ADDR=&quot;https://vault.example.com:8200&quot;\nHEALTH_LOG=&quot;/var/log/vault-health.log&quot;\n\n# Function to log with timestamp\nlog_message() {\n    echo &quot;$(date &#039;+%Y-%m-%d %H:%M:%S&#039;) - $1&quot; | tee -a ${HEALTH_LOG}\n}\n\n# Check Vault service status\nif systemctl is-active vault &gt;/dev/null 2&gt;&amp;1; then\n    log_message &quot;âœ“ Vault service is running&quot;\nelse\n    log_message &quot;âœ— Vault service is not running&quot;\n    exit 1\nfi\n\n# Check Vault HTTP health\nif curl -k -sf ${VAULT_ADDR}/v1/sys/health &gt;/dev/null 2&gt;&amp;1; then\n    log_message &quot;âœ“ Vault HTTP endpoint is responding&quot;\nelse\n    log_message &quot;âœ— Vault HTTP endpoint is not responding&quot;\n    exit 1\nfi\n\n# Check if Vault is sealed\nSEALED_STATUS=$(vault status -format=json | jq -r .sealed)\nif [ &quot;$SEALED_STATUS&quot; = &quot;false&quot; ]; then\n    log_message &quot;âœ“ Vault is unsealed&quot;\nelse\n    log_message &quot;âœ— Vault is sealed&quot;\n    exit 1\nfi\n\n# Check cluster status (if HA)\nif vault status -format=json | jq -r .ha_enabled | grep -q &quot;true&quot;; then\n    CLUSTER_HEALTH=$(vault operator raft list-peers -format=json | jq &#039;.data.config.servers | length&#039;)\n    log_message &quot;âœ“ Cluster has ${CLUSTER_HEALTH} nodes&quot;\nfi\n\n# Check replication status (Enterprise)\nREPLICATION_STATUS=$(vault read -format=json sys/replication/status 2&gt;/dev/null)\nif [ $? -eq 0 ]; then\n    DR_MODE=$(echo $REPLICATION_STATUS | jq -r .data.dr.mode)\n    PERF_MODE=$(echo $REPLICATION_STATUS | jq -r .data.performance.mode)\n    log_message &quot;âœ“ Replication status - DR: ${DR_MODE}, Performance: ${PERF_MODE}&quot;\nfi\n\n# Check auth methods\nAUTH_METHODS=$(vault auth list -format=json | jq -r &#039;keys | length&#039;)\nlog_message &quot;âœ“ ${AUTH_METHODS} authentication methods enabled&quot;\n\n# Check secrets engines\nSECRETS_ENGINES=$(vault secrets list -format=json | jq -r &#039;keys | length&#039;)\nlog_message &quot;âœ“ ${SECRETS_ENGINES} secrets engines enabled&quot;\n\n# Check policy count\nPOLICIES=$(vault policy list | wc -l)\nlog_message &quot;âœ“ ${POLICIES} policies configured&quot;\n\n# Test secret read/write\nTEST_SECRET=&quot;secret/health-check/test-$(date +%s)&quot;\nif vault kv put ${TEST_SECRET} test=true &gt;/dev/null 2&gt;&amp;1; then\n    if vault kv get ${TEST_SECRET} &gt;/dev/null 2&gt;&amp;1; then\n        log_message &quot;âœ“ Secret read/write test passed&quot;\n        vault kv delete ${TEST_SECRET} &gt;/dev/null 2&gt;&amp;1\n    else\n        log_message &quot;âœ— Secret read test failed&quot;\n    fi\nelse\n    log_message &quot;âœ— Secret write test failed&quot;\nfi\n\n# Check audit devices\nAUDIT_DEVICES=$(vault audit list -format=json | jq -r &#039;keys | length&#039;)\nlog_message &quot;âœ“ ${AUDIT_DEVICES} audit devices enabled&quot;\n\nlog_message &quot;Vault health check completed successfully&quot;\nEOF\n\nsudo chmod +x /usr/local/bin/vault-health-check.sh\n\n# Schedule health checks every 15 minutes\necho &quot;*/15 * * * * root /usr/local/bin/vault-health-check.sh&quot; | sudo tee -a /etc/crontab</code></pre>\n      </div>\n    </div>\n<h3 id=\"security-validation-testing\" class=\"mobile-header\">Security Validation Testing</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Create security testing script\nsudo tee /usr/local/bin/vault-security-test.sh &gt; /dev/null &lt;&lt;&#039;EOF&#039;\n#!/bin/bash\nVAULT_ADDR=&quot;https://vault.example.com:8200&quot;\nTEST_RESULTS=&quot;/tmp/vault-security-test-$(date +%Y%m%d_%H%M%S).txt&quot;\n\necho &quot;Vault Security Validation Test&quot; &gt; ${TEST_RESULTS}\necho &quot;==============================&quot; &gt;&gt; ${TEST_RESULTS}\necho &quot;Date: $(date)&quot; &gt;&gt; ${TEST_RESULTS}\necho &quot;&quot; &gt;&gt; ${TEST_RESULTS}\n\n# Test 1: TLS Configuration\necho &quot;Testing TLS Configuration...&quot; &gt;&gt; ${TEST_RESULTS}\nTLS_VERSION=$(openssl s_client -connect vault.example.com:8200 -brief 2&gt;/dev/null | grep &quot;Protocol version&quot;)\necho &quot;TLS Version: ${TLS_VERSION}&quot; &gt;&gt; ${TEST_RESULTS}\n\n# Test 2: Authentication requirements\necho &quot;Testing authentication requirements...&quot; &gt;&gt; ${TEST_RESULTS}\nUNAUTH_ACCESS=$(curl -k -s -w &quot;%{http_code}&quot; -o /dev/null ${VAULT_ADDR}/v1/secret/test)\nif [ &quot;$UNAUTH_ACCESS&quot; = &quot;403&quot; ]; then\n    echo &quot;âœ“ Unauthenticated access properly denied&quot; &gt;&gt; ${TEST_RESULTS}\nelse\n    echo &quot;âœ— Unauthenticated access not properly restricted&quot; &gt;&gt; ${TEST_RESULTS}\nfi\n\n# Test 3: Seal status\necho &quot;Testing seal status...&quot; &gt;&gt; ${TEST_RESULTS}\nSEALED=$(vault status -format=json | jq -r .sealed)\nif [ &quot;$SEALED&quot; = &quot;false&quot; ]; then\n    echo &quot;âœ“ Vault is properly unsealed&quot; &gt;&gt; ${TEST_RESULTS}\nelse\n    echo &quot;âœ— Vault is sealed&quot; &gt;&gt; ${TEST_RESULTS}\nfi\n\n# Test 4: Audit logging\necho &quot;Testing audit logging...&quot; &gt;&gt; ${TEST_RESULTS}\nAUDIT_COUNT=$(vault audit list -format=json | jq -r &#039;keys | length&#039;)\nif [ &quot;$AUDIT_COUNT&quot; -gt &quot;0&quot; ]; then\n    echo &quot;âœ“ ${AUDIT_COUNT} audit devices enabled&quot; &gt;&gt; ${TEST_RESULTS}\nelse\n    echo &quot;âœ— No audit devices enabled&quot; &gt;&gt; ${TEST_RESULTS}\nfi\n\n# Test 5: Policy enforcement\necho &quot;Testing policy enforcement...&quot; &gt;&gt; ${TEST_RESULTS}\nvault token create -policy=developer -ttl=1m -format=json &gt; /tmp/test-token.json\nTEST_TOKEN=$(jq -r .auth.client_token /tmp/test-token.json)\n\n# Test with limited token\nVAULT_TOKEN=${TEST_TOKEN} vault auth -method=token ${TEST_TOKEN} &gt;/dev/null 2&gt;&amp;1\nLIMITED_ACCESS=$(VAULT_TOKEN=${TEST_TOKEN} curl -k -s -w &quot;%{http_code}&quot; -o /dev/null -H &quot;X-Vault-Token: ${TEST_TOKEN}&quot; ${VAULT_ADDR}/v1/sys/auth)\nif [ &quot;$LIMITED_ACCESS&quot; = &quot;403&quot; ]; then\n    echo &quot;âœ“ Policy enforcement working correctly&quot; &gt;&gt; ${TEST_RESULTS}\nelse\n    echo &quot;âœ— Policy enforcement may be misconfigured&quot; &gt;&gt; ${TEST_RESULTS}\nfi\n\n# Revoke test token\nvault token revoke ${TEST_TOKEN}\nrm /tmp/test-token.json\n\necho &quot;&quot; &gt;&gt; ${TEST_RESULTS}\necho &quot;Security test completed at: $(date)&quot; &gt;&gt; ${TEST_RESULTS}\n\necho &quot;Security test completed. Results: ${TEST_RESULTS}&quot;\nEOF\n\nsudo chmod +x /usr/local/bin/vault-security-test.sh\n\n# Run security tests weekly\necho &quot;0 8 * * 1 root /usr/local/bin/vault-security-test.sh&quot; | sudo tee -a /etc/crontab</code></pre>\n      </div>\n    </div>\n<h2 id=\"troubleshooting-cross-platform\" class=\"mobile-header\">Troubleshooting (Cross-Platform)</h2>\n<h3 id=\"common-issues-and-solutions\" class=\"mobile-header\">Common Issues and Solutions</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Check Vault status and logs\nvault status\nsudo journalctl -u vault -f\n\n# Debug unsealing issues\nvault operator key-status\nvault status -format=json | jq .recovery_seal\n\n# Memory lock issues\ncat /proc/$(pgrep vault)/status | grep VmLck\nulimit -l\n\n# Permission issues\nsudo chown -R vault:vault /opt/vault\nsudo chmod 640 /etc/vault.d/vault.hcl\nls -laZ /opt/vault  # SELinux context\n\n# Network connectivity tests\ncurl -k https://vault.example.com:8200/v1/sys/health\nopenssl s_client -connect vault.example.com:8200\n\n# Storage backend issues\n# For Raft storage\nvault operator raft list-peers\nvault operator raft autopilot status\n\n# For Consul storage\nconsul members\nconsul kv get -recurse vault/\n\n# Certificate issues\nopenssl x509 -in /opt/vault/tls/vault.crt -text -noout\nvault auth -method=cert \\\n    -ca-cert=/opt/vault/tls/ca.crt \\\n    -client-cert=/opt/vault/tls/client.crt \\\n    -client-key=/opt/vault/tls/client.key\n\n# Performance troubleshooting\nvault read sys/metrics\nvault read sys/host-info\nvault read sys/pprof/profile  # Enterprise\n\n# Audit log analysis\ntail -f /opt/vault/logs/audit.log | jq .\ngrep &quot;error&quot; /opt/vault/logs/audit.log | jq .\n\n# Token debugging\nvault token lookup\nvault token capabilities secret/data/test\n\n# Seal/unseal debugging\nvault operator unseal -migrate  # For seal migration\nvault operator rekey  # For changing unseal keys\n\n# Cluster debugging\nvault operator raft snapshot save debug-snapshot.snap\nvault operator raft snapshot inspect debug-snapshot.snap</code></pre>\n      </div>\n    </div>\n<h3 id=\"advanced-debugging\" class=\"mobile-header\">Advanced Debugging</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Enable debug logging\nsudo systemctl edit vault.service\n# Add:\n[Service]\nExecStart=\nExecStart=/usr/local/bin/vault server -config=/etc/vault.d/vault.hcl -log-level=debug\n\nsudo systemctl daemon-reload\nsudo systemctl restart vault\n\n# Monitor real-time operations\ntail -f /opt/vault/logs/vault.log | grep -E &quot;(ERROR|WARN|DEBUG)&quot;\n\n# Database connection debugging\nvault read database/config/mysql-prod\n\n# PKI debugging\nvault read pki/cert/ca\nvault read pki/crl\n\n# Replication debugging (Enterprise)\nvault read sys/replication/performance/status\nvault read sys/replication/dr/status\n\n# HSM debugging (Enterprise)\nvault read sys/seal-status\nvault read sys/hsm/status\n\n# Memory and performance analysis\npmap -x $(pgrep vault)\nstrace -p $(pgrep vault) -e trace=file\n\n# Network debugging\nss -tulpn | grep vault\nnetstat -tulpn | grep vault</code></pre>\n      </div>\n    </div>\n<h2 id=\"additional-resources\" class=\"mobile-header\">Additional Resources</h2>\n<li class=\"mobile-list-item\"><a href=\"https://www.vaultproject.io/docs\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">Official Documentation</a></li>\n<li class=\"mobile-list-item\"><a href=\"https://www.vaultproject.io/api-docs\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">API Documentation</a></li>\n<li class=\"mobile-list-item\"><a href=\"https://learn.hashicorp.com/tutorials/vault/production-hardening\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">Production Hardening Guide</a></li>\n<li class=\"mobile-list-item\"><a href=\"https://www.hashicorp.com/products/vault/enterprise\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">Enterprise Features</a></li>\n<li class=\"mobile-list-item\"><a href=\"https://learn.hashicorp.com/tutorials/vault/security-intro\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">Security Best Practices</a></li>\n<li class=\"mobile-list-item\"><a href=\"https://discuss.hashicorp.com/c/vault\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">Community Forum</a></li>\n<p class=\"mobile-paragraph\">---</p>\n<p class=\"mobile-paragraph\"><strong>Note:</strong> This guide is part of the <a href=\"https://howtomgr.github.io\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">HowToMgr</a> collection.</p>","readTime":"27 min","wordCount":5390,"lastBuilt":"2025-09-14T18:12:01.288Z"},{"name":"vscode-server","displayName":"Vscode Server","slug":"vscode-server","description":"Repo for vscode-server","category":"infrastructure","language":null,"stars":0,"forks":0,"topics":[],"githubUrl":"https://github.com/howtomgr/vscode-server","updatedAt":"2025-09-08T03:18:10Z","createdAt":"2023-08-28T03:50:15Z","readmeRaw":"### VS-Code docker\n\n```shell\nsudo mkdir -p /var/lib/docker/storage/vscode/config\n\nsudo docker run -d \\\n  --name=code-server \\\n  -e PUID=0 \\\n  -e PGID=0 \\\n  -e TZ=America/New_York \\\n  -e PASSWORD=password \\\n  -e SUDO_PASSWORD=password \\\n  -e PROXY_DOMAIN=code-server.casjay.in \\\n  -p 8443:8443 \\\n  -v /var/lib/docker/storage/vscode/config:/config \\\n  --restart always \\\n  linuxserver/code-server\n```\n","readmeHtml":"<h3 id=\"vs-code-docker\" class=\"mobile-header\">VS-Code docker</h3>\n<div class=\"mobile-code-block\" data-language=\"shell\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">shell</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-shell\">sudo mkdir -p /var/lib/docker/storage/vscode/config\n\nsudo docker run -d \\\n  --name=code-server \\\n  -e PUID=0 \\\n  -e PGID=0 \\\n  -e TZ=America/New_York \\\n  -e PASSWORD=password \\\n  -e SUDO_PASSWORD=password \\\n  -e PROXY_DOMAIN=code-server.casjay.in \\\n  -p 8443:8443 \\\n  -v /var/lib/docker/storage/vscode/config:/config \\\n  --restart always \\\n  linuxserver/code-server</code></pre>\n      </div>\n    </div>","readTime":"1 min","wordCount":45,"lastBuilt":"2025-09-14T18:12:09.452Z"},{"name":"webvirt","displayName":"Webvirt","slug":"webvirt","description":"Repo for webvirt","category":"infrastructure","language":null,"stars":0,"forks":0,"topics":[],"githubUrl":"https://github.com/howtomgr/webvirt","updatedAt":"2025-09-08T03:18:15Z","createdAt":"2023-08-28T03:50:25Z","readmeRaw":"# CentOS 7 WebVirt\n\n```bash\nyum -y install git python-pip libvirt-python libxml2-python python-websockify supervisor nginx\nyum -y install gcc python-devel\n\npip install --upgrade pip\npip install numpy\n\ngit clone git://github.com/retspen/webvirtmgr.git /usr/share/webvirtmgr\ncd /usr/share/webvirtmgr\npip install -r requirements.txt\n\n./manage.py syncdb\n./manage.py collectstatic\n\nwget https://github.com/casjay-base/howtos/raw/main/webvirt/webvirt.supervisord.ini -O  /etc/supervisord.d/webvirtmgr.ini\nwget https://github.com/casjay-base/howtos/raw/main/webvirt/webvirt-nginx.conf -O /etc/nginx/conf.d/webvirt.conf\n```\n","readmeHtml":"<h1 id=\"centos-7-webvirt\" class=\"mobile-header\">CentOS 7 WebVirt</h1>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\">yum -y install git python-pip libvirt-python libxml2-python python-websockify supervisor nginx\nyum -y install gcc python-devel\n\npip install --upgrade pip\npip install numpy\n\ngit clone git://github.com/retspen/webvirtmgr.git /usr/share/webvirtmgr\ncd /usr/share/webvirtmgr\npip install -r requirements.txt\n\n./manage.py syncdb\n./manage.py collectstatic\n\nwget https://github.com/casjay-base/howtos/raw/main/webvirt/webvirt.supervisord.ini -O  /etc/supervisord.d/webvirtmgr.ini\nwget https://github.com/casjay-base/howtos/raw/main/webvirt/webvirt-nginx.conf -O /etc/nginx/conf.d/webvirt.conf</code></pre>\n      </div>\n    </div>","readTime":"1 min","wordCount":51,"lastBuilt":"2025-09-14T18:12:09.167Z"},{"name":"wireguard","displayName":"Wireguard","slug":"wireguard","description":"Repo for wireguard","category":"security","language":null,"stars":0,"forks":0,"topics":[],"githubUrl":"https://github.com/howtomgr/wireguard","updatedAt":"2025-09-14T01:31:22Z","createdAt":"2025-09-08T03:18:17Z","readmeRaw":"# WireGuard Installation Guide\n\nModern, fast, and secure VPN solution using state-of-the-art cryptography. Essential tool for secure remote access, site-to-site connectivity, and privacy protection with minimal configuration complexity.\n\n## Prerequisites\n\n- Linux system with kernel 3.10+ (any modern distribution)\n- Root or sudo access\n- Static IP address or dynamic DNS\n- UDP port 51820 available (default, configurable)\n- Basic understanding of networking concepts\n\n## Installation\n\n### Ubuntu/Debian\n```bash\n# Update system packages\nsudo apt update && sudo apt upgrade -y\n\n# Install WireGuard\nsudo apt install -y wireguard wireguard-tools\n\n# For older Ubuntu versions (18.04)\nsudo add-apt-repository ppa:wireguard/wireguard\nsudo apt update\nsudo apt install -y wireguard\n\n# Install additional tools\nsudo apt install -y qrencode resolvconf\n\n# Verify installation\nwg --version\nmodprobe wireguard && echo \"WireGuard module loaded successfully\"\n```\n\n### RHEL/CentOS/Rocky Linux/AlmaLinux\n```bash\n# Install EPEL repository\nsudo yum install -y epel-release\n\n# Install WireGuard\nsudo yum install -y wireguard-tools\n\n# For CentOS 7 (requires additional steps)\nsudo yum install -y yum-plugin-elrepo\nsudo yum install -y kmod-wireguard wireguard-tools\n\n# Install additional tools\nsudo yum install -y qrencode\n\n# Enable IP forwarding\necho 'net.ipv4.ip_forward = 1' | sudo tee -a /etc/sysctl.conf\necho 'net.ipv6.conf.all.forwarding = 1' | sudo tee -a /etc/sysctl.conf\nsudo sysctl -p\n```\n\n### Fedora\n```bash\n# Install WireGuard (included in kernel 5.6+)\nsudo dnf install -y wireguard-tools qrencode\n\n# Enable IP forwarding\necho 'net.ipv4.ip_forward = 1' | sudo tee -a /etc/sysctl.conf\nsudo sysctl -p\n```\n\n### Arch Linux\n```bash\n# Install WireGuard\nsudo pacman -Syu wireguard-tools qrencode\n\n# Load WireGuard module\nsudo modprobe wireguard\n\n# Enable IP forwarding\necho 'net.ipv4.ip_forward = 1' | sudo tee -a /etc/sysctl.conf\nsudo sysctl -p\n```\n\n## Server Configuration\n\n### Generate Keys and Create Server Config\n```bash\n# Create WireGuard directory\nsudo mkdir -p /etc/wireguard\nsudo chmod 700 /etc/wireguard\n\n# Generate server keys\ncd /etc/wireguard\nwg genkey | sudo tee server_private.key | wg pubkey | sudo tee server_public.key\nsudo chmod 600 server_private.key\n\n# Create server configuration\nsudo tee /etc/wireguard/wg0.conf > /dev/null <<EOF\n[Interface]\n# Server configuration\nPrivateKey = $(sudo cat server_private.key)\nAddress = 10.0.0.1/24, fd00::1/64\nListenPort = 51820\nSaveConfig = true\n\n# Network configuration\nPostUp = iptables -A FORWARD -i %i -j ACCEPT; iptables -A FORWARD -o %i -j ACCEPT; iptables -t nat -A POSTROUTING -o eth0 -j MASQUERADE; ip6tables -A FORWARD -i %i -j ACCEPT; ip6tables -A FORWARD -o %i -j ACCEPT; ip6tables -t nat -A POSTROUTING -o eth0 -j MASQUERADE\nPostDown = iptables -D FORWARD -i %i -j ACCEPT; iptables -D FORWARD -o %i -j ACCEPT; iptables -t nat -D POSTROUTING -o eth0 -j MASQUERADE; ip6tables -D FORWARD -i %i -j ACCEPT; ip6tables -D FORWARD -o %i -j ACCEPT; ip6tables -t nat -D POSTROUTING -o eth0 -j MASQUERADE\n\n# DNS servers (optional)\nDNS = 1.1.1.1, 8.8.8.8\n\n# Client configurations will be added here automatically\n# [Peer] sections for each client\nEOF\n\nsudo chmod 600 /etc/wireguard/wg0.conf\n```\n\n### Advanced Server Configuration\n```bash\n# Create production server configuration with security\nsudo tee /etc/wireguard/wg0.conf > /dev/null <<EOF\n[Interface]\n# Server identity\nPrivateKey = $(sudo cat server_private.key)\nAddress = 10.0.0.1/24\nListenPort = 51820\nSaveConfig = false  # Disable for security in production\n\n# Network forwarding and NAT\nPostUp = iptables -A FORWARD -i %i -j ACCEPT; iptables -A FORWARD -o %i -j ACCEPT; iptables -t nat -A POSTROUTING -o eth0 -j MASQUERADE\nPostUp = ip6tables -A FORWARD -i %i -j ACCEPT; ip6tables -A FORWARD -o %i -j ACCEPT; ip6tables -t nat -A POSTROUTING -o eth0 -j MASQUERADE\nPostDown = iptables -D FORWARD -i %i -j ACCEPT; iptables -D FORWARD -o %i -j ACCEPT; iptables -t nat -D POSTROUTING -o eth0 -j MASQUERADE\nPostDown = ip6tables -D FORWARD -i %i -j ACCEPT; ip6tables -D FORWARD -o %i -j ACCEPT; ip6tables -t nat -D POSTROUTING -o eth0 -j MASQUERADE\n\n# Security: Block private networks (adjust as needed)\nPostUp = iptables -I FORWARD -s 10.0.0.0/8 -d 192.168.1.0/24 -j DROP\nPostUp = iptables -I FORWARD -s 10.0.0.0/8 -d 172.16.0.0/12 -j DROP\n\n# DNS configuration\nDNS = 10.0.0.1  # Use Pi-hole or local DNS\n\n# Example client configurations\n[Peer]\n# Client 1 - Admin laptop\nPublicKey = client1_public_key_here\nAllowedIPs = 10.0.0.2/32\nPersistentKeepalive = 25\n\n[Peer]  \n# Client 2 - Mobile device\nPublicKey = client2_public_key_here\nAllowedIPs = 10.0.0.3/32\nPersistentKeepalive = 25\n\n[Peer]\n# Client 3 - Site-to-site (branch office)\nPublicKey = site_public_key_here\nAllowedIPs = 10.0.0.0/24, 192.168.100.0/24\nEndpoint = branch.example.com:51820\nPersistentKeepalive = 25\nEOF\n```\n\n## Client Configuration\n\n### Generate Client Configurations\n```bash\n# Create client configuration generator script\nsudo tee /usr/local/bin/wg-add-client.sh > /dev/null <<'EOF'\n#!/bin/bash\nCLIENT_NAME=\"${1}\"\nSERVER_PUBLIC_IP=\"${2:-your-server-public-ip}\"\nSERVER_PUBLIC_KEY=\"$(sudo cat /etc/wireguard/server_public.key)\"\n\nif [ -z \"$CLIENT_NAME\" ]; then\n    echo \"Usage: $0 <client_name> [server_public_ip]\"\n    echo \"Example: $0 laptop1 203.0.113.1\"\n    exit 1\nfi\n\n# Get next available IP\nLAST_IP=$(grep \"AllowedIPs\" /etc/wireguard/wg0.conf | grep -o \"10\\.0\\.0\\.[0-9]*\" | sort -t. -k4 -n | tail -1 | cut -d. -f4)\nNEXT_IP=$((LAST_IP + 1))\nCLIENT_IP=\"10.0.0.${NEXT_IP}/32\"\n\n# Generate client keys\nCLIENT_PRIVATE_KEY=$(wg genkey)\nCLIENT_PUBLIC_KEY=$(echo $CLIENT_PRIVATE_KEY | wg pubkey)\n\n# Add peer to server configuration\nsudo tee -a /etc/wireguard/wg0.conf > /dev/null <<PEER\n\n[Peer]\n# ${CLIENT_NAME}\nPublicKey = ${CLIENT_PUBLIC_KEY}\nAllowedIPs = ${CLIENT_IP}\nPersistentKeepalive = 25\nPEER\n\n# Generate client configuration\ncat > /tmp/${CLIENT_NAME}.conf <<CLIENT_CONFIG\n[Interface]\nPrivateKey = ${CLIENT_PRIVATE_KEY}\nAddress = ${CLIENT_IP}\nDNS = 10.0.0.1, 1.1.1.1\n\n[Peer]\nPublicKey = ${SERVER_PUBLIC_KEY}\nEndpoint = ${SERVER_PUBLIC_IP}:51820\nAllowedIPs = 0.0.0.0/0, ::/0\nPersistentKeepalive = 25\nCLIENT_CONFIG\n\n# Generate QR code for mobile devices\nqrencode -t ansiutf8 < /tmp/${CLIENT_NAME}.conf\n\necho \"Client configuration created: /tmp/${CLIENT_NAME}.conf\"\necho \"Add to server with: sudo wg addconf wg0 <(echo '[Peer]'; echo 'PublicKey = ${CLIENT_PUBLIC_KEY}'; echo 'AllowedIPs = ${CLIENT_IP}')\"\nEOF\n\nsudo chmod +x /usr/local/bin/wg-add-client.sh\n\n# Example: Add a client\n# sudo /usr/local/bin/wg-add-client.sh laptop1 your-server-ip\n```\n\n### Client Examples\n```bash\n# Mobile device configuration\ncat > mobile-client.conf <<EOF\n[Interface]\nPrivateKey = mobile_device_private_key\nAddress = 10.0.0.10/32\nDNS = 10.0.0.1\n\n[Peer]\nPublicKey = server_public_key_here\nEndpoint = vpn.example.com:51820\nAllowedIPs = 0.0.0.0/0, ::/0\nPersistentKeepalive = 25\nEOF\n\n# Site-to-site configuration (branch office)\ncat > branch-office.conf <<EOF\n[Interface]\nPrivateKey = branch_office_private_key\nAddress = 10.0.0.100/32\nPostUp = iptables -A FORWARD -i %i -j ACCEPT; iptables -A FORWARD -o %i -j ACCEPT; iptables -t nat -A POSTROUTING -o eth0 -j MASQUERADE\nPostDown = iptables -D FORWARD -i %i -j ACCEPT; iptables -D FORWARD -o %i -j ACCEPT; iptables -t nat -D POSTROUTING -o eth0 -j MASQUERADE\n\n[Peer]\nPublicKey = server_public_key_here\nEndpoint = vpn.example.com:51820\nAllowedIPs = 10.0.0.0/24, 192.168.1.0/24\nPersistentKeepalive = 25\nEOF\n```\n\n## Service Management and Security\n\n### SystemD Service\n```bash\n# Enable WireGuard interface as systemd service\nsudo systemctl enable wg-quick@wg0\nsudo systemctl start wg-quick@wg0\n\n# Check status\nsudo systemctl status wg-quick@wg0\nsudo wg show\n\n# Alternative: Manual management\nsudo wg-quick up wg0\nsudo wg-quick down wg0\n```\n\n### Firewall Configuration\n```bash\n# Configure UFW for WireGuard\nsudo ufw allow 51820/udp comment 'WireGuard VPN'\nsudo ufw allow from 10.0.0.0/24 comment 'WireGuard clients'\n\n# For internal network access\nsudo ufw allow from 10.0.0.0/24 to 192.168.1.0/24\n\n# Firewalld configuration (RHEL/CentOS)\nsudo firewall-cmd --permanent --add-port=51820/udp\nsudo firewall-cmd --permanent --add-rich-rule='rule family=ipv4 source address=10.0.0.0/24 accept'\nsudo firewall-cmd --reload\n\n# Direct iptables rules\nsudo iptables -A INPUT -p udp --dport 51820 -j ACCEPT\nsudo iptables -A FORWARD -i wg0 -j ACCEPT\nsudo iptables -A FORWARD -o wg0 -j ACCEPT\nsudo iptables -t nat -A POSTROUTING -o eth0 -j MASQUERADE\n```\n\n### Security Hardening\n```bash\n# Configure advanced security features\nsudo tee /etc/wireguard/wg0.conf > /dev/null <<EOF\n[Interface]\nPrivateKey = $(sudo cat server_private.key)\nAddress = 10.0.0.1/24\nListenPort = 51820\n\n# Security: Change default port\n# ListenPort = 41194\n\n# DNS security\nDNS = 10.0.0.1  # Use Pi-hole for ad blocking\n\n# Advanced security rules\nPostUp = iptables -A FORWARD -i %i -j ACCEPT\nPostUp = iptables -A FORWARD -o %i -j ACCEPT\nPostUp = iptables -t nat -A POSTROUTING -o eth0 -j MASQUERADE\n\n# Block access to local network (security measure)\nPostUp = iptables -I FORWARD -s 10.0.0.0/24 -d 192.168.1.0/24 -j DROP\nPostUp = iptables -I FORWARD -s 10.0.0.0/24 -d 172.16.0.0/12 -j DROP\nPostUp = iptables -I FORWARD -s 10.0.0.0/24 -d 10.0.0.0/8 -j DROP\n\n# Allow specific services only\nPostUp = iptables -I FORWARD -s 10.0.0.0/24 -d 192.168.1.100 -p tcp --dport 22 -j ACCEPT    # SSH to server\nPostUp = iptables -I FORWARD -s 10.0.0.0/24 -d 192.168.1.101 -p tcp --dport 443 -j ACCEPT  # HTTPS to web services\n\nPostDown = iptables -D FORWARD -i %i -j ACCEPT\nPostDown = iptables -D FORWARD -o %i -j ACCEPT\nPostDown = iptables -t nat -D POSTROUTING -o eth0 -j MASQUERADE\nEOF\n```\n\n## Management and Automation\n\n### WireGuard Management Script\n```bash\nsudo tee /usr/local/bin/wg-manager.sh > /dev/null <<'EOF'\n#!/bin/bash\n\nINTERFACE=\"wg0\"\nCONFIG_FILE=\"/etc/wireguard/${INTERFACE}.conf\"\nCLIENTS_DIR=\"/etc/wireguard/clients\"\nSERVER_PUBLIC_IP=\"${SERVER_PUBLIC_IP:-$(curl -s ipinfo.io/ip)}\"\nSERVER_PUBLIC_KEY=\"$(sudo cat /etc/wireguard/server_public.key)\"\n\nsudo mkdir -p ${CLIENTS_DIR}\n\ncase \"${1}\" in\n    \"add-client\")\n        CLIENT_NAME=\"${2}\"\n        if [ -z \"$CLIENT_NAME\" ]; then\n            echo \"Usage: $0 add-client <client_name>\"\n            exit 1\n        fi\n        \n        # Generate client keys\n        CLIENT_PRIVATE_KEY=$(wg genkey)\n        CLIENT_PUBLIC_KEY=$(echo $CLIENT_PRIVATE_KEY | wg pubkey)\n        \n        # Get next available IP\n        LAST_IP=$(grep \"AllowedIPs\" ${CONFIG_FILE} | grep -o \"10\\.0\\.0\\.[0-9]*\" | sort -t. -k4 -n | tail -1 | cut -d. -f4)\n        NEXT_IP=$((LAST_IP + 1))\n        CLIENT_IP=\"10.0.0.${NEXT_IP}\"\n        \n        # Add peer to server\n        sudo wg set ${INTERFACE} peer ${CLIENT_PUBLIC_KEY} allowed-ips ${CLIENT_IP}/32\n        \n        # Save to config\n        sudo tee -a ${CONFIG_FILE} > /dev/null <<PEER\n\n[Peer]\n# ${CLIENT_NAME} - $(date)\nPublicKey = ${CLIENT_PUBLIC_KEY}\nAllowedIPs = ${CLIENT_IP}/32\nPersistentKeepalive = 25\nPEER\n        \n        # Generate client config\n        cat > ${CLIENTS_DIR}/${CLIENT_NAME}.conf <<CLIENT_CONFIG\n[Interface]\nPrivateKey = ${CLIENT_PRIVATE_KEY}\nAddress = ${CLIENT_IP}/32\nDNS = 10.0.0.1\n\n[Peer]\nPublicKey = ${SERVER_PUBLIC_KEY}\nEndpoint = ${SERVER_PUBLIC_IP}:51820\nAllowedIPs = 0.0.0.0/0, ::/0\nPersistentKeepalive = 25\nCLIENT_CONFIG\n        \n        # Generate QR code\n        echo \"Client ${CLIENT_NAME} configuration:\"\n        qrencode -t ansiutf8 < ${CLIENTS_DIR}/${CLIENT_NAME}.conf\n        echo \"Configuration file: ${CLIENTS_DIR}/${CLIENT_NAME}.conf\"\n        ;;\n        \n    \"remove-client\")\n        CLIENT_NAME=\"${2}\"\n        if [ -z \"$CLIENT_NAME\" ]; then\n            echo \"Usage: $0 remove-client <client_name>\"\n            exit 1\n        fi\n        \n        CLIENT_PUBLIC_KEY=$(grep -A 3 \"# ${CLIENT_NAME}\" ${CONFIG_FILE} | grep \"PublicKey\" | cut -d' ' -f3)\n        if [ -n \"$CLIENT_PUBLIC_KEY\" ]; then\n            sudo wg set ${INTERFACE} peer ${CLIENT_PUBLIC_KEY} remove\n            sudo sed -i \"/# ${CLIENT_NAME}/,+3d\" ${CONFIG_FILE}\n            rm -f ${CLIENTS_DIR}/${CLIENT_NAME}.conf\n            echo \"Client ${CLIENT_NAME} removed\"\n        else\n            echo \"Client ${CLIENT_NAME} not found\"\n        fi\n        ;;\n        \n    \"list-clients\")\n        echo \"Connected clients:\"\n        sudo wg show ${INTERFACE}\n        echo \"\"\n        echo \"Configured clients:\"\n        grep \"^# \" ${CONFIG_FILE} | sed 's/# /- /'\n        ;;\n        \n    \"show-client\")\n        CLIENT_NAME=\"${2}\"\n        if [ -z \"$CLIENT_NAME\" ]; then\n            echo \"Usage: $0 show-client <client_name>\"\n            exit 1\n        fi\n        \n        if [ -f \"${CLIENTS_DIR}/${CLIENT_NAME}.conf\" ]; then\n            echo \"Configuration for ${CLIENT_NAME}:\"\n            cat ${CLIENTS_DIR}/${CLIENT_NAME}.conf\n            echo \"\"\n            echo \"QR Code:\"\n            qrencode -t ansiutf8 < ${CLIENTS_DIR}/${CLIENT_NAME}.conf\n        else\n            echo \"Client ${CLIENT_NAME} not found\"\n        fi\n        ;;\n        \n    \"status\")\n        echo \"WireGuard Status:\"\n        sudo systemctl status wg-quick@${INTERFACE}\n        echo \"\"\n        echo \"Interface Details:\"\n        sudo wg show ${INTERFACE}\n        echo \"\"\n        echo \"Interface Statistics:\"\n        sudo wg show ${INTERFACE} transfer\n        ;;\n        \n    \"restart\")\n        echo \"Restarting WireGuard...\"\n        sudo systemctl restart wg-quick@${INTERFACE}\n        echo \"WireGuard restarted\"\n        ;;\n        \n    *)\n        echo \"WireGuard Management Script\"\n        echo \"Usage: $0 {add-client|remove-client|list-clients|show-client|status|restart}\"\n        echo \"\"\n        echo \"Examples:\"\n        echo \"  $0 add-client laptop1\"\n        echo \"  $0 remove-client laptop1\"  \n        echo \"  $0 show-client laptop1\"\n        echo \"  $0 list-clients\"\n        echo \"  $0 status\"\n        echo \"  $0 restart\"\n        exit 1\n        ;;\nesac\nEOF\n\nsudo chmod +x /usr/local/bin/wg-manager.sh\n```\n\n### Web UI (WireGuard Easy)\n```bash\n# Install WireGuard Easy (web management interface)\nmkdir -p ~/wg-easy\ncd ~/wg-easy\n\ncat > docker-compose.yml <<EOF\nversion: '3.8'\n\nservices:\n  wg-easy:\n    image: weejewel/wg-easy:latest\n    container_name: wg-easy\n    restart: unless-stopped\n    ports:\n      - \"51821:51821/udp\"  # WireGuard port\n      - \"127.0.0.1:51822:51822/tcp\"  # Web UI port\n    environment:\n      - WG_HOST=vpn.example.com\n      - PASSWORD=WebUISecurePassword2024!\n      - WG_PORT=51821\n      - WG_DEFAULT_ADDRESS=10.8.0.x\n      - WG_DEFAULT_DNS=1.1.1.1,8.8.8.8\n      - WG_MTU=1420\n      - WG_ALLOWED_IPS=0.0.0.0/0,::/0\n      - WG_PERSISTENT_KEEPALIVE=25\n    volumes:\n      - ./data:/etc/wireguard\n    cap_add:\n      - NET_ADMIN\n      - SYS_MODULE\n    sysctls:\n      - net.ipv4.ip_forward=1\n      - net.ipv4.conf.all.src_valid_mark=1\n    networks:\n      - wg-easy\n\nnetworks:\n  wg-easy:\n    driver: bridge\nEOF\n\n# Start WG-Easy\ndocker-compose up -d\n\n# Access web interface at http://localhost:51822\n```\n\n## Monitoring and Maintenance\n\n### Health Monitoring\n```bash\nsudo tee /usr/local/bin/wireguard-health.sh > /dev/null <<'EOF'\n#!/bin/bash\nHEALTH_LOG=\"/var/log/wireguard-health.log\"\n\nlog_message() {\n    echo \"$(date '+%Y-%m-%d %H:%M:%S') - $1\" | tee -a ${HEALTH_LOG}\n}\n\n# Check WireGuard service\nif systemctl is-active wg-quick@wg0 >/dev/null 2>&1; then\n    log_message \"âœ“ WireGuard service is running\"\nelse\n    log_message \"âœ— WireGuard service is not running\"\n    exit 1\nfi\n\n# Check interface status\nif ip link show wg0 >/dev/null 2>&1; then\n    log_message \"âœ“ WireGuard interface is up\"\nelse\n    log_message \"âœ— WireGuard interface is down\"\nfi\n\n# Check connected peers\nCONNECTED_PEERS=$(sudo wg show wg0 peers | wc -l)\nACTIVE_PEERS=$(sudo wg show wg0 latest-handshakes | awk '$2 > 0' | wc -l)\nlog_message \"â„¹ Connected peers: ${ACTIVE_PEERS}/${CONNECTED_PEERS}\"\n\n# Check traffic statistics\nTRAFFIC_STATS=$(sudo wg show wg0 transfer)\nlog_message \"â„¹ Traffic statistics available: $(echo \"$TRAFFIC_STATS\" | wc -l) peers\"\n\n# Check listening port\nif ss -ulpn | grep -q \":51820\"; then\n    log_message \"âœ“ WireGuard is listening on port 51820\"\nelse\n    log_message \"âš  WireGuard not listening on expected port\"\nfi\n\n# Check IP forwarding\nIP_FORWARD=$(cat /proc/sys/net/ipv4/ip_forward)\nif [ \"$IP_FORWARD\" = \"1\" ]; then\n    log_message \"âœ“ IP forwarding is enabled\"\nelse\n    log_message \"âœ— IP forwarding is disabled\"\nfi\n\nlog_message \"WireGuard health check completed\"\nEOF\n\nsudo chmod +x /usr/local/bin/wireguard-health.sh\n\n# Schedule health checks every 10 minutes\necho \"*/10 * * * * root /usr/local/bin/wireguard-health.sh\" | sudo tee -a /etc/crontab\n```\n\n### Backup and Configuration Management\n```bash\nsudo tee /usr/local/bin/wireguard-backup.sh > /dev/null <<'EOF'\n#!/bin/bash\nBACKUP_DIR=\"/backup/wireguard\"\nDATE=$(date +%Y%m%d_%H%M%S)\n\nmkdir -p ${BACKUP_DIR}/{configs,clients}\n\necho \"Starting WireGuard backup...\"\n\n# Backup server configuration\ncp /etc/wireguard/wg0.conf ${BACKUP_DIR}/configs/wg0-${DATE}.conf\n\n# Backup client configurations\nif [ -d \"/etc/wireguard/clients\" ]; then\n    tar -czf ${BACKUP_DIR}/clients/clients-${DATE}.tar.gz -C /etc/wireguard clients/\nfi\n\n# Backup keys\ntar -czf ${BACKUP_DIR}/configs/keys-${DATE}.tar.gz -C /etc/wireguard *.key\n\n# Upload to cloud storage (encrypted)\ngpg --symmetric --cipher-algo AES256 --compress-algo 1 --s2k-mode 3 \\\n    --s2k-digest-algo SHA512 --s2k-count 65536 \\\n    --output ${BACKUP_DIR}/wireguard-backup-${DATE}.tar.gz.gpg \\\n    --compress-level 9 \\\n    <(tar -czf - -C ${BACKUP_DIR} .)\n\n# Upload encrypted backup\naws s3 cp ${BACKUP_DIR}/wireguard-backup-${DATE}.tar.gz.gpg s3://wireguard-backups/\n\n# Keep only last 30 backups\nfind ${BACKUP_DIR} -name \"wireguard-*\" -type f -mtime +30 -delete\n\necho \"WireGuard backup completed: ${DATE}\"\nEOF\n\nsudo chmod +x /usr/local/bin/wireguard-backup.sh\n\n# Schedule daily backups\necho \"0 3 * * * root /usr/local/bin/wireguard-backup.sh\" | sudo tee -a /etc/crontab\n```\n\n## Advanced Features\n\n### Site-to-Site VPN\n```bash\n# Configure site-to-site VPN between offices\n# Office A (Main) - 192.168.1.0/24\n# Office B (Branch) - 192.168.2.0/24\n\n# Main office WireGuard config\nsudo tee /etc/wireguard/site-to-site.conf > /dev/null <<EOF\n[Interface]\nPrivateKey = main_office_private_key\nAddress = 172.16.0.1/30\nListenPort = 51820\n\n# Route traffic between sites\nPostUp = ip route add 192.168.2.0/24 dev %i\nPostUp = iptables -A FORWARD -i %i -o eth0 -s 192.168.2.0/24 -d 192.168.1.0/24 -j ACCEPT\nPostUp = iptables -A FORWARD -i eth0 -o %i -s 192.168.1.0/24 -d 192.168.2.0/24 -j ACCEPT\n\nPostDown = ip route del 192.168.2.0/24 dev %i\nPostDown = iptables -D FORWARD -i %i -o eth0 -s 192.168.2.0/24 -d 192.168.1.0/24 -j ACCEPT\nPostDown = iptables -D FORWARD -i eth0 -o %i -s 192.168.1.0/24 -d 192.168.2.0/24 -j ACCEPT\n\n[Peer]\n# Branch Office\nPublicKey = branch_office_public_key\nEndpoint = branch.example.com:51820\nAllowedIPs = 172.16.0.2/32, 192.168.2.0/24\nPersistentKeepalive = 25\nEOF\n```\n\n### Load Balancing and Failover\n```bash\n# Configure multiple WireGuard servers for redundancy\n# Client configuration with multiple peers\ncat > multi-server-client.conf <<EOF\n[Interface]\nPrivateKey = client_private_key\nAddress = 10.0.0.10/32\nDNS = 1.1.1.1, 8.8.8.8\n\n# Primary server\n[Peer]\nPublicKey = primary_server_public_key\nEndpoint = vpn1.example.com:51820\nAllowedIPs = 0.0.0.0/1, 128.0.0.0/1\nPersistentKeepalive = 25\n\n# Backup server (different IP range to avoid conflicts)\n[Peer]\nPublicKey = backup_server_public_key\nEndpoint = vpn2.example.com:51820\nAllowedIPs = 10.1.0.0/24\nPersistentKeepalive = 25\nEOF\n```\n\n## Troubleshooting\n\n### Common Issues and Solutions\n```bash\n# Check WireGuard status\nsudo systemctl status wg-quick@wg0\nsudo wg show\n\n# Check interface configuration\nip addr show wg0\nip route show table all | grep wg0\n\n# Test connectivity\nping -c 4 10.0.0.1  # Server IP from client\nping -c 4 10.0.0.2  # Client IP from server\n\n# Check firewall rules\nsudo iptables -L -n | grep -E \"(wg0|51820)\"\nsudo ufw status | grep -E \"(WireGuard|51820)\"\n\n# Check logs\nsudo journalctl -u wg-quick@wg0 -f\ndmesg | grep wireguard\n\n# Debug handshake issues\nsudo wg show wg0 latest-handshakes\nsudo wg show wg0 transfer\n\n# Check peer connectivity\nsudo wg show wg0 endpoints\nsudo wg show wg0 allowed-ips\n\n# Restart WireGuard interface\nsudo wg-quick down wg0\nsudo wg-quick up wg0\n\n# Check kernel module\nlsmod | grep wireguard\nmodinfo wireguard\n\n# Test DNS resolution through VPN\nnslookup google.com 10.0.0.1\n\n# Check MTU issues\nping -M do -s 1472 10.0.0.1  # Test MTU size\n\n# Performance testing\niperf3 -s -p 5201  # On server\niperf3 -c 10.0.0.1 -p 5201  # On client\n\n# Configuration validation\nsudo wg-quick up wg0 --dry-run\n\n# Check routing table\nip route show table all\nip rule show\n\n# Network troubleshooting\ntraceroute -I 8.8.8.8  # Test route through VPN\nss -tulpn | grep 51820\nnetstat -tulpn | grep 51820\n```\n\n### Advanced Debugging\n```bash\n# Enable debug logging\necho 'module wireguard +p' | sudo tee /sys/kernel/debug/dynamic_debug/control\n\n# Monitor kernel messages\nsudo dmesg -w | grep wireguard\n\n# Packet capture\nsudo tcpdump -i wg0 -n\nsudo tcpdump -i eth0 port 51820\n\n# Check system resources\nps aux | grep wg\ntop -p $(pgrep wg-quick)\n\n# Verify cryptographic setup\nsudo wg showconf wg0\n\n# Test with verbose output\nsudo wg-quick up wg0 2>&1 | tee /tmp/wg-debug.log\n\n# Check peer handshake details\nsudo wg show wg0 dump\n```\n\n## Additional Resources\n\n- [WireGuard Official Documentation](https://www.wireguard.com/)\n- [WireGuard Quick Start](https://www.wireguard.com/quickstart/)\n- [WireGuard Protocol Whitepaper](https://www.wireguard.com/papers/wireguard.pdf)\n- [WireGuard Community](https://lists.zx2c4.com/mailman/listinfo/wireguard)\n\n---\n\n**Note:** This guide is part of the [HowToMgr](https://howtomgr.github.io) collection.","readmeHtml":"<h1 id=\"wireguard-installation-guide\" class=\"mobile-header\">WireGuard Installation Guide</h1>\n<p class=\"mobile-paragraph\">Modern, fast, and secure VPN solution using state-of-the-art cryptography. Essential tool for secure remote access, site-to-site connectivity, and privacy protection with minimal configuration complexity.</p>\n<h2 id=\"prerequisites\" class=\"mobile-header\">Prerequisites</h2>\n<li class=\"mobile-list-item\">Linux system with kernel 3.10+ (any modern distribution)</li>\n<li class=\"mobile-list-item\">Root or sudo access</li>\n<li class=\"mobile-list-item\">Static IP address or dynamic DNS</li>\n<li class=\"mobile-list-item\">UDP port 51820 available (default, configurable)</li>\n<li class=\"mobile-list-item\">Basic understanding of networking concepts</li>\n<h2 id=\"installation\" class=\"mobile-header\">Installation</h2>\n<h3 id=\"ubuntudebian\" class=\"mobile-header\">Ubuntu/Debian</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Update system packages\nsudo apt update &amp;&amp; sudo apt upgrade -y\n\n# Install WireGuard\nsudo apt install -y wireguard wireguard-tools\n\n# For older Ubuntu versions (18.04)\nsudo add-apt-repository ppa:wireguard/wireguard\nsudo apt update\nsudo apt install -y wireguard\n\n# Install additional tools\nsudo apt install -y qrencode resolvconf\n\n# Verify installation\nwg --version\nmodprobe wireguard &amp;&amp; echo &quot;WireGuard module loaded successfully&quot;</code></pre>\n      </div>\n    </div>\n<h3 id=\"rhelcentosrocky-linuxalmalinux\" class=\"mobile-header\">RHEL/CentOS/Rocky Linux/AlmaLinux</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Install EPEL repository\nsudo yum install -y epel-release\n\n# Install WireGuard\nsudo yum install -y wireguard-tools\n\n# For CentOS 7 (requires additional steps)\nsudo yum install -y yum-plugin-elrepo\nsudo yum install -y kmod-wireguard wireguard-tools\n\n# Install additional tools\nsudo yum install -y qrencode\n\n# Enable IP forwarding\necho &#039;net.ipv4.ip_forward = 1&#039; | sudo tee -a /etc/sysctl.conf\necho &#039;net.ipv6.conf.all.forwarding = 1&#039; | sudo tee -a /etc/sysctl.conf\nsudo sysctl -p</code></pre>\n      </div>\n    </div>\n<h3 id=\"fedora\" class=\"mobile-header\">Fedora</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Install WireGuard (included in kernel 5.6+)\nsudo dnf install -y wireguard-tools qrencode\n\n# Enable IP forwarding\necho &#039;net.ipv4.ip_forward = 1&#039; | sudo tee -a /etc/sysctl.conf\nsudo sysctl -p</code></pre>\n      </div>\n    </div>\n<h3 id=\"arch-linux\" class=\"mobile-header\">Arch Linux</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Install WireGuard\nsudo pacman -Syu wireguard-tools qrencode\n\n# Load WireGuard module\nsudo modprobe wireguard\n\n# Enable IP forwarding\necho &#039;net.ipv4.ip_forward = 1&#039; | sudo tee -a /etc/sysctl.conf\nsudo sysctl -p</code></pre>\n      </div>\n    </div>\n<h2 id=\"server-configuration\" class=\"mobile-header\">Server Configuration</h2>\n<h3 id=\"generate-keys-and-create-server-config\" class=\"mobile-header\">Generate Keys and Create Server Config</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Create WireGuard directory\nsudo mkdir -p /etc/wireguard\nsudo chmod 700 /etc/wireguard\n\n# Generate server keys\ncd /etc/wireguard\nwg genkey | sudo tee server_private.key | wg pubkey | sudo tee server_public.key\nsudo chmod 600 server_private.key\n\n# Create server configuration\nsudo tee /etc/wireguard/wg0.conf &gt; /dev/null &lt;&lt;EOF\n[Interface]\n# Server configuration\nPrivateKey = $(sudo cat server_private.key)\nAddress = 10.0.0.1/24, fd00::1/64\nListenPort = 51820\nSaveConfig = true\n\n# Network configuration\nPostUp = iptables -A FORWARD -i %i -j ACCEPT; iptables -A FORWARD -o %i -j ACCEPT; iptables -t nat -A POSTROUTING -o eth0 -j MASQUERADE; ip6tables -A FORWARD -i %i -j ACCEPT; ip6tables -A FORWARD -o %i -j ACCEPT; ip6tables -t nat -A POSTROUTING -o eth0 -j MASQUERADE\nPostDown = iptables -D FORWARD -i %i -j ACCEPT; iptables -D FORWARD -o %i -j ACCEPT; iptables -t nat -D POSTROUTING -o eth0 -j MASQUERADE; ip6tables -D FORWARD -i %i -j ACCEPT; ip6tables -D FORWARD -o %i -j ACCEPT; ip6tables -t nat -D POSTROUTING -o eth0 -j MASQUERADE\n\n# DNS servers (optional)\nDNS = 1.1.1.1, 8.8.8.8\n\n# Client configurations will be added here automatically\n# [Peer] sections for each client\nEOF\n\nsudo chmod 600 /etc/wireguard/wg0.conf</code></pre>\n      </div>\n    </div>\n<h3 id=\"advanced-server-configuration\" class=\"mobile-header\">Advanced Server Configuration</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Create production server configuration with security\nsudo tee /etc/wireguard/wg0.conf &gt; /dev/null &lt;&lt;EOF\n[Interface]\n# Server identity\nPrivateKey = $(sudo cat server_private.key)\nAddress = 10.0.0.1/24\nListenPort = 51820\nSaveConfig = false  # Disable for security in production\n\n# Network forwarding and NAT\nPostUp = iptables -A FORWARD -i %i -j ACCEPT; iptables -A FORWARD -o %i -j ACCEPT; iptables -t nat -A POSTROUTING -o eth0 -j MASQUERADE\nPostUp = ip6tables -A FORWARD -i %i -j ACCEPT; ip6tables -A FORWARD -o %i -j ACCEPT; ip6tables -t nat -A POSTROUTING -o eth0 -j MASQUERADE\nPostDown = iptables -D FORWARD -i %i -j ACCEPT; iptables -D FORWARD -o %i -j ACCEPT; iptables -t nat -D POSTROUTING -o eth0 -j MASQUERADE\nPostDown = ip6tables -D FORWARD -i %i -j ACCEPT; ip6tables -D FORWARD -o %i -j ACCEPT; ip6tables -t nat -D POSTROUTING -o eth0 -j MASQUERADE\n\n# Security: Block private networks (adjust as needed)\nPostUp = iptables -I FORWARD -s 10.0.0.0/8 -d 192.168.1.0/24 -j DROP\nPostUp = iptables -I FORWARD -s 10.0.0.0/8 -d 172.16.0.0/12 -j DROP\n\n# DNS configuration\nDNS = 10.0.0.1  # Use Pi-hole or local DNS\n\n# Example client configurations\n[Peer]\n# Client 1 - Admin laptop\nPublicKey = client1_public_key_here\nAllowedIPs = 10.0.0.2/32\nPersistentKeepalive = 25\n\n[Peer]  \n# Client 2 - Mobile device\nPublicKey = client2_public_key_here\nAllowedIPs = 10.0.0.3/32\nPersistentKeepalive = 25\n\n[Peer]\n# Client 3 - Site-to-site (branch office)\nPublicKey = site_public_key_here\nAllowedIPs = 10.0.0.0/24, 192.168.100.0/24\nEndpoint = branch.example.com:51820\nPersistentKeepalive = 25\nEOF</code></pre>\n      </div>\n    </div>\n<h2 id=\"client-configuration\" class=\"mobile-header\">Client Configuration</h2>\n<h3 id=\"generate-client-configurations\" class=\"mobile-header\">Generate Client Configurations</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Create client configuration generator script\nsudo tee /usr/local/bin/wg-add-client.sh &gt; /dev/null &lt;&lt;&#039;EOF&#039;\n#!/bin/bash\nCLIENT_NAME=&quot;${1}&quot;\nSERVER_PUBLIC_IP=&quot;${2:-your-server-public-ip}&quot;\nSERVER_PUBLIC_KEY=&quot;$(sudo cat /etc/wireguard/server_public.key)&quot;\n\nif [ -z &quot;$CLIENT_NAME&quot; ]; then\n    echo &quot;Usage: $0 &lt;client_name&gt; [server_public_ip]&quot;\n    echo &quot;Example: $0 laptop1 203.0.113.1&quot;\n    exit 1\nfi\n\n# Get next available IP\nLAST_IP=$(grep &quot;AllowedIPs&quot; /etc/wireguard/wg0.conf | grep -o &quot;10\\.0\\.0\\.[0-9]*&quot; | sort -t. -k4 -n | tail -1 | cut -d. -f4)\nNEXT_IP=$((LAST_IP + 1))\nCLIENT_IP=&quot;10.0.0.${NEXT_IP}/32&quot;\n\n# Generate client keys\nCLIENT_PRIVATE_KEY=$(wg genkey)\nCLIENT_PUBLIC_KEY=$(echo $CLIENT_PRIVATE_KEY | wg pubkey)\n\n# Add peer to server configuration\nsudo tee -a /etc/wireguard/wg0.conf &gt; /dev/null &lt;&lt;PEER\n\n[Peer]\n# ${CLIENT_NAME}\nPublicKey = ${CLIENT_PUBLIC_KEY}\nAllowedIPs = ${CLIENT_IP}\nPersistentKeepalive = 25\nPEER\n\n# Generate client configuration\ncat &gt; /tmp/${CLIENT_NAME}.conf &lt;&lt;CLIENT_CONFIG\n[Interface]\nPrivateKey = ${CLIENT_PRIVATE_KEY}\nAddress = ${CLIENT_IP}\nDNS = 10.0.0.1, 1.1.1.1\n\n[Peer]\nPublicKey = ${SERVER_PUBLIC_KEY}\nEndpoint = ${SERVER_PUBLIC_IP}:51820\nAllowedIPs = 0.0.0.0/0, ::/0\nPersistentKeepalive = 25\nCLIENT_CONFIG\n\n# Generate QR code for mobile devices\nqrencode -t ansiutf8 &lt; /tmp/${CLIENT_NAME}.conf\n\necho &quot;Client configuration created: /tmp/${CLIENT_NAME}.conf&quot;\necho &quot;Add to server with: sudo wg addconf wg0 &lt;(echo &#039;[Peer]&#039;; echo &#039;PublicKey = ${CLIENT_PUBLIC_KEY}&#039;; echo &#039;AllowedIPs = ${CLIENT_IP}&#039;)&quot;\nEOF\n\nsudo chmod +x /usr/local/bin/wg-add-client.sh\n\n# Example: Add a client\n# sudo /usr/local/bin/wg-add-client.sh laptop1 your-server-ip</code></pre>\n      </div>\n    </div>\n<h3 id=\"client-examples\" class=\"mobile-header\">Client Examples</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Mobile device configuration\ncat &gt; mobile-client.conf &lt;&lt;EOF\n[Interface]\nPrivateKey = mobile_device_private_key\nAddress = 10.0.0.10/32\nDNS = 10.0.0.1\n\n[Peer]\nPublicKey = server_public_key_here\nEndpoint = vpn.example.com:51820\nAllowedIPs = 0.0.0.0/0, ::/0\nPersistentKeepalive = 25\nEOF\n\n# Site-to-site configuration (branch office)\ncat &gt; branch-office.conf &lt;&lt;EOF\n[Interface]\nPrivateKey = branch_office_private_key\nAddress = 10.0.0.100/32\nPostUp = iptables -A FORWARD -i %i -j ACCEPT; iptables -A FORWARD -o %i -j ACCEPT; iptables -t nat -A POSTROUTING -o eth0 -j MASQUERADE\nPostDown = iptables -D FORWARD -i %i -j ACCEPT; iptables -D FORWARD -o %i -j ACCEPT; iptables -t nat -D POSTROUTING -o eth0 -j MASQUERADE\n\n[Peer]\nPublicKey = server_public_key_here\nEndpoint = vpn.example.com:51820\nAllowedIPs = 10.0.0.0/24, 192.168.1.0/24\nPersistentKeepalive = 25\nEOF</code></pre>\n      </div>\n    </div>\n<h2 id=\"service-management-and-security\" class=\"mobile-header\">Service Management and Security</h2>\n<h3 id=\"systemd-service\" class=\"mobile-header\">SystemD Service</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Enable WireGuard interface as systemd service\nsudo systemctl enable wg-quick@wg0\nsudo systemctl start wg-quick@wg0\n\n# Check status\nsudo systemctl status wg-quick@wg0\nsudo wg show\n\n# Alternative: Manual management\nsudo wg-quick up wg0\nsudo wg-quick down wg0</code></pre>\n      </div>\n    </div>\n<h3 id=\"firewall-configuration\" class=\"mobile-header\">Firewall Configuration</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Configure UFW for WireGuard\nsudo ufw allow 51820/udp comment &#039;WireGuard VPN&#039;\nsudo ufw allow from 10.0.0.0/24 comment &#039;WireGuard clients&#039;\n\n# For internal network access\nsudo ufw allow from 10.0.0.0/24 to 192.168.1.0/24\n\n# Firewalld configuration (RHEL/CentOS)\nsudo firewall-cmd --permanent --add-port=51820/udp\nsudo firewall-cmd --permanent --add-rich-rule=&#039;rule family=ipv4 source address=10.0.0.0/24 accept&#039;\nsudo firewall-cmd --reload\n\n# Direct iptables rules\nsudo iptables -A INPUT -p udp --dport 51820 -j ACCEPT\nsudo iptables -A FORWARD -i wg0 -j ACCEPT\nsudo iptables -A FORWARD -o wg0 -j ACCEPT\nsudo iptables -t nat -A POSTROUTING -o eth0 -j MASQUERADE</code></pre>\n      </div>\n    </div>\n<h3 id=\"security-hardening\" class=\"mobile-header\">Security Hardening</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Configure advanced security features\nsudo tee /etc/wireguard/wg0.conf &gt; /dev/null &lt;&lt;EOF\n[Interface]\nPrivateKey = $(sudo cat server_private.key)\nAddress = 10.0.0.1/24\nListenPort = 51820\n\n# Security: Change default port\n# ListenPort = 41194\n\n# DNS security\nDNS = 10.0.0.1  # Use Pi-hole for ad blocking\n\n# Advanced security rules\nPostUp = iptables -A FORWARD -i %i -j ACCEPT\nPostUp = iptables -A FORWARD -o %i -j ACCEPT\nPostUp = iptables -t nat -A POSTROUTING -o eth0 -j MASQUERADE\n\n# Block access to local network (security measure)\nPostUp = iptables -I FORWARD -s 10.0.0.0/24 -d 192.168.1.0/24 -j DROP\nPostUp = iptables -I FORWARD -s 10.0.0.0/24 -d 172.16.0.0/12 -j DROP\nPostUp = iptables -I FORWARD -s 10.0.0.0/24 -d 10.0.0.0/8 -j DROP\n\n# Allow specific services only\nPostUp = iptables -I FORWARD -s 10.0.0.0/24 -d 192.168.1.100 -p tcp --dport 22 -j ACCEPT    # SSH to server\nPostUp = iptables -I FORWARD -s 10.0.0.0/24 -d 192.168.1.101 -p tcp --dport 443 -j ACCEPT  # HTTPS to web services\n\nPostDown = iptables -D FORWARD -i %i -j ACCEPT\nPostDown = iptables -D FORWARD -o %i -j ACCEPT\nPostDown = iptables -t nat -D POSTROUTING -o eth0 -j MASQUERADE\nEOF</code></pre>\n      </div>\n    </div>\n<h2 id=\"management-and-automation\" class=\"mobile-header\">Management and Automation</h2>\n<h3 id=\"wireguard-management-script\" class=\"mobile-header\">WireGuard Management Script</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\">sudo tee /usr/local/bin/wg-manager.sh &gt; /dev/null &lt;&lt;&#039;EOF&#039;\n#!/bin/bash\n\nINTERFACE=&quot;wg0&quot;\nCONFIG_FILE=&quot;/etc/wireguard/${INTERFACE}.conf&quot;\nCLIENTS_DIR=&quot;/etc/wireguard/clients&quot;\nSERVER_PUBLIC_IP=&quot;${SERVER_PUBLIC_IP:-$(curl -s ipinfo.io/ip)}&quot;\nSERVER_PUBLIC_KEY=&quot;$(sudo cat /etc/wireguard/server_public.key)&quot;\n\nsudo mkdir -p ${CLIENTS_DIR}\n\ncase &quot;${1}&quot; in\n    &quot;add-client&quot;)\n        CLIENT_NAME=&quot;${2}&quot;\n        if [ -z &quot;$CLIENT_NAME&quot; ]; then\n            echo &quot;Usage: $0 add-client &lt;client_name&gt;&quot;\n            exit 1\n        fi\n        \n        # Generate client keys\n        CLIENT_PRIVATE_KEY=$(wg genkey)\n        CLIENT_PUBLIC_KEY=$(echo $CLIENT_PRIVATE_KEY | wg pubkey)\n        \n        # Get next available IP\n        LAST_IP=$(grep &quot;AllowedIPs&quot; ${CONFIG_FILE} | grep -o &quot;10\\.0\\.0\\.[0-9]*&quot; | sort -t. -k4 -n | tail -1 | cut -d. -f4)\n        NEXT_IP=$((LAST_IP + 1))\n        CLIENT_IP=&quot;10.0.0.${NEXT_IP}&quot;\n        \n        # Add peer to server\n        sudo wg set ${INTERFACE} peer ${CLIENT_PUBLIC_KEY} allowed-ips ${CLIENT_IP}/32\n        \n        # Save to config\n        sudo tee -a ${CONFIG_FILE} &gt; /dev/null &lt;&lt;PEER\n\n[Peer]\n# ${CLIENT_NAME} - $(date)\nPublicKey = ${CLIENT_PUBLIC_KEY}\nAllowedIPs = ${CLIENT_IP}/32\nPersistentKeepalive = 25\nPEER\n        \n        # Generate client config\n        cat &gt; ${CLIENTS_DIR}/${CLIENT_NAME}.conf &lt;&lt;CLIENT_CONFIG\n[Interface]\nPrivateKey = ${CLIENT_PRIVATE_KEY}\nAddress = ${CLIENT_IP}/32\nDNS = 10.0.0.1\n\n[Peer]\nPublicKey = ${SERVER_PUBLIC_KEY}\nEndpoint = ${SERVER_PUBLIC_IP}:51820\nAllowedIPs = 0.0.0.0/0, ::/0\nPersistentKeepalive = 25\nCLIENT_CONFIG\n        \n        # Generate QR code\n        echo &quot;Client ${CLIENT_NAME} configuration:&quot;\n        qrencode -t ansiutf8 &lt; ${CLIENTS_DIR}/${CLIENT_NAME}.conf\n        echo &quot;Configuration file: ${CLIENTS_DIR}/${CLIENT_NAME}.conf&quot;\n        ;;\n        \n    &quot;remove-client&quot;)\n        CLIENT_NAME=&quot;${2}&quot;\n        if [ -z &quot;$CLIENT_NAME&quot; ]; then\n            echo &quot;Usage: $0 remove-client &lt;client_name&gt;&quot;\n            exit 1\n        fi\n        \n        CLIENT_PUBLIC_KEY=$(grep -A 3 &quot;# ${CLIENT_NAME}&quot; ${CONFIG_FILE} | grep &quot;PublicKey&quot; | cut -d&#039; &#039; -f3)\n        if [ -n &quot;$CLIENT_PUBLIC_KEY&quot; ]; then\n            sudo wg set ${INTERFACE} peer ${CLIENT_PUBLIC_KEY} remove\n            sudo sed -i &quot;/# ${CLIENT_NAME}/,+3d&quot; ${CONFIG_FILE}\n            rm -f ${CLIENTS_DIR}/${CLIENT_NAME}.conf\n            echo &quot;Client ${CLIENT_NAME} removed&quot;\n        else\n            echo &quot;Client ${CLIENT_NAME} not found&quot;\n        fi\n        ;;\n        \n    &quot;list-clients&quot;)\n        echo &quot;Connected clients:&quot;\n        sudo wg show ${INTERFACE}\n        echo &quot;&quot;\n        echo &quot;Configured clients:&quot;\n        grep &quot;^# &quot; ${CONFIG_FILE} | sed &#039;s/# /- /&#039;\n        ;;\n        \n    &quot;show-client&quot;)\n        CLIENT_NAME=&quot;${2}&quot;\n        if [ -z &quot;$CLIENT_NAME&quot; ]; then\n            echo &quot;Usage: $0 show-client &lt;client_name&gt;&quot;\n            exit 1\n        fi\n        \n        if [ -f &quot;${CLIENTS_DIR}/${CLIENT_NAME}.conf&quot; ]; then\n            echo &quot;Configuration for ${CLIENT_NAME}:&quot;\n            cat ${CLIENTS_DIR}/${CLIENT_NAME}.conf\n            echo &quot;&quot;\n            echo &quot;QR Code:&quot;\n            qrencode -t ansiutf8 &lt; ${CLIENTS_DIR}/${CLIENT_NAME}.conf\n        else\n            echo &quot;Client ${CLIENT_NAME} not found&quot;\n        fi\n        ;;\n        \n    &quot;status&quot;)\n        echo &quot;WireGuard Status:&quot;\n        sudo systemctl status wg-quick@${INTERFACE}\n        echo &quot;&quot;\n        echo &quot;Interface Details:&quot;\n        sudo wg show ${INTERFACE}\n        echo &quot;&quot;\n        echo &quot;Interface Statistics:&quot;\n        sudo wg show ${INTERFACE} transfer\n        ;;\n        \n    &quot;restart&quot;)\n        echo &quot;Restarting WireGuard...&quot;\n        sudo systemctl restart wg-quick@${INTERFACE}\n        echo &quot;WireGuard restarted&quot;\n        ;;\n        \n    *)\n        echo &quot;WireGuard Management Script&quot;\n        echo &quot;Usage: $0 {add-client|remove-client|list-clients|show-client|status|restart}&quot;\n        echo &quot;&quot;\n        echo &quot;Examples:&quot;\n        echo &quot;  $0 add-client laptop1&quot;\n        echo &quot;  $0 remove-client laptop1&quot;  \n        echo &quot;  $0 show-client laptop1&quot;\n        echo &quot;  $0 list-clients&quot;\n        echo &quot;  $0 status&quot;\n        echo &quot;  $0 restart&quot;\n        exit 1\n        ;;\nesac\nEOF\n\nsudo chmod +x /usr/local/bin/wg-manager.sh</code></pre>\n      </div>\n    </div>\n<h3 id=\"web-ui-wireguard-easy\" class=\"mobile-header\">Web UI (WireGuard Easy)</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Install WireGuard Easy (web management interface)\nmkdir -p ~/wg-easy\ncd ~/wg-easy\n\ncat &gt; docker-compose.yml &lt;&lt;EOF\nversion: &#039;3.8&#039;\n\nservices:\n  wg-easy:\n    image: weejewel/wg-easy:latest\n    container_name: wg-easy\n    restart: unless-stopped\n    ports:\n      - &quot;51821:51821/udp&quot;  # WireGuard port\n      - &quot;127.0.0.1:51822:51822/tcp&quot;  # Web UI port\n    environment:\n      - WG_HOST=vpn.example.com\n      - PASSWORD=WebUISecurePassword2024!\n      - WG_PORT=51821\n      - WG_DEFAULT_ADDRESS=10.8.0.x\n      - WG_DEFAULT_DNS=1.1.1.1,8.8.8.8\n      - WG_MTU=1420\n      - WG_ALLOWED_IPS=0.0.0.0/0,::/0\n      - WG_PERSISTENT_KEEPALIVE=25\n    volumes:\n      - ./data:/etc/wireguard\n    cap_add:\n      - NET_ADMIN\n      - SYS_MODULE\n    sysctls:\n      - net.ipv4.ip_forward=1\n      - net.ipv4.conf.all.src_valid_mark=1\n    networks:\n      - wg-easy\n\nnetworks:\n  wg-easy:\n    driver: bridge\nEOF\n\n# Start WG-Easy\ndocker-compose up -d\n\n# Access web interface at http://localhost:51822</code></pre>\n      </div>\n    </div>\n<h2 id=\"monitoring-and-maintenance\" class=\"mobile-header\">Monitoring and Maintenance</h2>\n<h3 id=\"health-monitoring\" class=\"mobile-header\">Health Monitoring</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\">sudo tee /usr/local/bin/wireguard-health.sh &gt; /dev/null &lt;&lt;&#039;EOF&#039;\n#!/bin/bash\nHEALTH_LOG=&quot;/var/log/wireguard-health.log&quot;\n\nlog_message() {\n    echo &quot;$(date &#039;+%Y-%m-%d %H:%M:%S&#039;) - $1&quot; | tee -a ${HEALTH_LOG}\n}\n\n# Check WireGuard service\nif systemctl is-active wg-quick@wg0 &gt;/dev/null 2&gt;&amp;1; then\n    log_message &quot;âœ“ WireGuard service is running&quot;\nelse\n    log_message &quot;âœ— WireGuard service is not running&quot;\n    exit 1\nfi\n\n# Check interface status\nif ip link show wg0 &gt;/dev/null 2&gt;&amp;1; then\n    log_message &quot;âœ“ WireGuard interface is up&quot;\nelse\n    log_message &quot;âœ— WireGuard interface is down&quot;\nfi\n\n# Check connected peers\nCONNECTED_PEERS=$(sudo wg show wg0 peers | wc -l)\nACTIVE_PEERS=$(sudo wg show wg0 latest-handshakes | awk &#039;$2 &gt; 0&#039; | wc -l)\nlog_message &quot;â„¹ Connected peers: ${ACTIVE_PEERS}/${CONNECTED_PEERS}&quot;\n\n# Check traffic statistics\nTRAFFIC_STATS=$(sudo wg show wg0 transfer)\nlog_message &quot;â„¹ Traffic statistics available: $(echo &quot;$TRAFFIC_STATS&quot; | wc -l) peers&quot;\n\n# Check listening port\nif ss -ulpn | grep -q &quot;:51820&quot;; then\n    log_message &quot;âœ“ WireGuard is listening on port 51820&quot;\nelse\n    log_message &quot;âš  WireGuard not listening on expected port&quot;\nfi\n\n# Check IP forwarding\nIP_FORWARD=$(cat /proc/sys/net/ipv4/ip_forward)\nif [ &quot;$IP_FORWARD&quot; = &quot;1&quot; ]; then\n    log_message &quot;âœ“ IP forwarding is enabled&quot;\nelse\n    log_message &quot;âœ— IP forwarding is disabled&quot;\nfi\n\nlog_message &quot;WireGuard health check completed&quot;\nEOF\n\nsudo chmod +x /usr/local/bin/wireguard-health.sh\n\n# Schedule health checks every 10 minutes\necho &quot;*/10 * * * * root /usr/local/bin/wireguard-health.sh&quot; | sudo tee -a /etc/crontab</code></pre>\n      </div>\n    </div>\n<h3 id=\"backup-and-configuration-management\" class=\"mobile-header\">Backup and Configuration Management</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\">sudo tee /usr/local/bin/wireguard-backup.sh &gt; /dev/null &lt;&lt;&#039;EOF&#039;\n#!/bin/bash\nBACKUP_DIR=&quot;/backup/wireguard&quot;\nDATE=$(date +%Y%m%d_%H%M%S)\n\nmkdir -p ${BACKUP_DIR}/{configs,clients}\n\necho &quot;Starting WireGuard backup...&quot;\n\n# Backup server configuration\ncp /etc/wireguard/wg0.conf ${BACKUP_DIR}/configs/wg0-${DATE}.conf\n\n# Backup client configurations\nif [ -d &quot;/etc/wireguard/clients&quot; ]; then\n    tar -czf ${BACKUP_DIR}/clients/clients-${DATE}.tar.gz -C /etc/wireguard clients/\nfi\n\n# Backup keys\ntar -czf ${BACKUP_DIR}/configs/keys-${DATE}.tar.gz -C /etc/wireguard *.key\n\n# Upload to cloud storage (encrypted)\ngpg --symmetric --cipher-algo AES256 --compress-algo 1 --s2k-mode 3 \\\n    --s2k-digest-algo SHA512 --s2k-count 65536 \\\n    --output ${BACKUP_DIR}/wireguard-backup-${DATE}.tar.gz.gpg \\\n    --compress-level 9 \\\n    &lt;(tar -czf - -C ${BACKUP_DIR} .)\n\n# Upload encrypted backup\naws s3 cp ${BACKUP_DIR}/wireguard-backup-${DATE}.tar.gz.gpg s3://wireguard-backups/\n\n# Keep only last 30 backups\nfind ${BACKUP_DIR} -name &quot;wireguard-*&quot; -type f -mtime +30 -delete\n\necho &quot;WireGuard backup completed: ${DATE}&quot;\nEOF\n\nsudo chmod +x /usr/local/bin/wireguard-backup.sh\n\n# Schedule daily backups\necho &quot;0 3 * * * root /usr/local/bin/wireguard-backup.sh&quot; | sudo tee -a /etc/crontab</code></pre>\n      </div>\n    </div>\n<h2 id=\"advanced-features\" class=\"mobile-header\">Advanced Features</h2>\n<h3 id=\"site-to-site-vpn\" class=\"mobile-header\">Site-to-Site VPN</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Configure site-to-site VPN between offices\n# Office A (Main) - 192.168.1.0/24\n# Office B (Branch) - 192.168.2.0/24\n\n# Main office WireGuard config\nsudo tee /etc/wireguard/site-to-site.conf &gt; /dev/null &lt;&lt;EOF\n[Interface]\nPrivateKey = main_office_private_key\nAddress = 172.16.0.1/30\nListenPort = 51820\n\n# Route traffic between sites\nPostUp = ip route add 192.168.2.0/24 dev %i\nPostUp = iptables -A FORWARD -i %i -o eth0 -s 192.168.2.0/24 -d 192.168.1.0/24 -j ACCEPT\nPostUp = iptables -A FORWARD -i eth0 -o %i -s 192.168.1.0/24 -d 192.168.2.0/24 -j ACCEPT\n\nPostDown = ip route del 192.168.2.0/24 dev %i\nPostDown = iptables -D FORWARD -i %i -o eth0 -s 192.168.2.0/24 -d 192.168.1.0/24 -j ACCEPT\nPostDown = iptables -D FORWARD -i eth0 -o %i -s 192.168.1.0/24 -d 192.168.2.0/24 -j ACCEPT\n\n[Peer]\n# Branch Office\nPublicKey = branch_office_public_key\nEndpoint = branch.example.com:51820\nAllowedIPs = 172.16.0.2/32, 192.168.2.0/24\nPersistentKeepalive = 25\nEOF</code></pre>\n      </div>\n    </div>\n<h3 id=\"load-balancing-and-failover\" class=\"mobile-header\">Load Balancing and Failover</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Configure multiple WireGuard servers for redundancy\n# Client configuration with multiple peers\ncat &gt; multi-server-client.conf &lt;&lt;EOF\n[Interface]\nPrivateKey = client_private_key\nAddress = 10.0.0.10/32\nDNS = 1.1.1.1, 8.8.8.8\n\n# Primary server\n[Peer]\nPublicKey = primary_server_public_key\nEndpoint = vpn1.example.com:51820\nAllowedIPs = 0.0.0.0/1, 128.0.0.0/1\nPersistentKeepalive = 25\n\n# Backup server (different IP range to avoid conflicts)\n[Peer]\nPublicKey = backup_server_public_key\nEndpoint = vpn2.example.com:51820\nAllowedIPs = 10.1.0.0/24\nPersistentKeepalive = 25\nEOF</code></pre>\n      </div>\n    </div>\n<h2 id=\"troubleshooting\" class=\"mobile-header\">Troubleshooting</h2>\n<h3 id=\"common-issues-and-solutions\" class=\"mobile-header\">Common Issues and Solutions</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Check WireGuard status\nsudo systemctl status wg-quick@wg0\nsudo wg show\n\n# Check interface configuration\nip addr show wg0\nip route show table all | grep wg0\n\n# Test connectivity\nping -c 4 10.0.0.1  # Server IP from client\nping -c 4 10.0.0.2  # Client IP from server\n\n# Check firewall rules\nsudo iptables -L -n | grep -E &quot;(wg0|51820)&quot;\nsudo ufw status | grep -E &quot;(WireGuard|51820)&quot;\n\n# Check logs\nsudo journalctl -u wg-quick@wg0 -f\ndmesg | grep wireguard\n\n# Debug handshake issues\nsudo wg show wg0 latest-handshakes\nsudo wg show wg0 transfer\n\n# Check peer connectivity\nsudo wg show wg0 endpoints\nsudo wg show wg0 allowed-ips\n\n# Restart WireGuard interface\nsudo wg-quick down wg0\nsudo wg-quick up wg0\n\n# Check kernel module\nlsmod | grep wireguard\nmodinfo wireguard\n\n# Test DNS resolution through VPN\nnslookup google.com 10.0.0.1\n\n# Check MTU issues\nping -M do -s 1472 10.0.0.1  # Test MTU size\n\n# Performance testing\niperf3 -s -p 5201  # On server\niperf3 -c 10.0.0.1 -p 5201  # On client\n\n# Configuration validation\nsudo wg-quick up wg0 --dry-run\n\n# Check routing table\nip route show table all\nip rule show\n\n# Network troubleshooting\ntraceroute -I 8.8.8.8  # Test route through VPN\nss -tulpn | grep 51820\nnetstat -tulpn | grep 51820</code></pre>\n      </div>\n    </div>\n<h3 id=\"advanced-debugging\" class=\"mobile-header\">Advanced Debugging</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Enable debug logging\necho &#039;module wireguard +p&#039; | sudo tee /sys/kernel/debug/dynamic_debug/control\n\n# Monitor kernel messages\nsudo dmesg -w | grep wireguard\n\n# Packet capture\nsudo tcpdump -i wg0 -n\nsudo tcpdump -i eth0 port 51820\n\n# Check system resources\nps aux | grep wg\ntop -p $(pgrep wg-quick)\n\n# Verify cryptographic setup\nsudo wg showconf wg0\n\n# Test with verbose output\nsudo wg-quick up wg0 2&gt;&amp;1 | tee /tmp/wg-debug.log\n\n# Check peer handshake details\nsudo wg show wg0 dump</code></pre>\n      </div>\n    </div>\n<h2 id=\"additional-resources\" class=\"mobile-header\">Additional Resources</h2>\n<li class=\"mobile-list-item\"><a href=\"https://www.wireguard.com/\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">WireGuard Official Documentation</a></li>\n<li class=\"mobile-list-item\"><a href=\"https://www.wireguard.com/quickstart/\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">WireGuard Quick Start</a></li>\n<li class=\"mobile-list-item\"><a href=\"https://www.wireguard.com/papers/wireguard.pdf\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">WireGuard Protocol Whitepaper</a></li>\n<li class=\"mobile-list-item\"><a href=\"https://lists.zx2c4.com/mailman/listinfo/wireguard\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">WireGuard Community</a></li>\n<p class=\"mobile-paragraph\">---</p>\n<p class=\"mobile-paragraph\"><strong>Note:</strong> This guide is part of the <a href=\"https://howtomgr.github.io\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">HowToMgr</a> collection.</p>","readTime":"14 min","wordCount":2789,"lastBuilt":"2025-09-14T18:12:00.951Z"},{"name":"wordpress","displayName":"Wordpress","slug":"wordpress","description":"Repo for wordpress","category":"productivity","language":null,"stars":0,"forks":0,"topics":[],"githubUrl":"https://github.com/howtomgr/wordpress","updatedAt":"2025-09-14T01:31:24Z","createdAt":"2025-09-08T03:18:29Z","readmeRaw":"# WordPress Installation Guide\n\nWorld's most popular content management system (CMS) powering over 40% of websites globally. Complete guide for secure, high-performance WordPress deployment with modern stack configurations.\n\n## Prerequisites\n\n- Linux system (any modern distribution)\n- 2GB RAM minimum, 4GB+ recommended for production\n- Web server (NGINX recommended, Apache supported)\n- PHP 8.1+ (8.2+ recommended)\n- MySQL 8.0+ or MariaDB 10.6+ \n- SSL certificate for HTTPS\n- Domain name for production deployment\n\n## Installation Methods\n\n### LEMP Stack (Recommended for 2024)\n\n#### Ubuntu/Debian LEMP Setup\n```bash\n# Update system\nsudo apt update && sudo apt upgrade -y\n\n# Install NGINX\nsudo apt install -y nginx\n\n# Install MySQL/MariaDB\nsudo apt install -y mariadb-server mariadb-client\n\n# Install PHP 8.2 and essential extensions\nsudo apt install -y php8.2-fpm php8.2-mysql php8.2-curl php8.2-gd php8.2-mbstring php8.2-xml php8.2-xmlrpc php8.2-soap php8.2-intl php8.2-zip php8.2-bcmath php8.2-imagick php8.2-cli php8.2-dev php8.2-imap php8.2-opcache\n\n# Install additional performance tools\nsudo apt install -y redis-server memcached unzip curl wget\n\n# Enable and start services\nsudo systemctl enable --now nginx mariadb php8.2-fpm redis-server\n\n# Secure MySQL installation\nsudo mysql_secure_installation\n\n# Configure firewall\nsudo ufw allow 'Nginx Full'\nsudo ufw allow OpenSSH\nsudo ufw enable\n```\n\n#### RHEL/CentOS/Rocky Linux LEMP Setup\n```bash\n# Install EPEL and Remi repositories\nsudo yum install -y epel-release\nsudo yum install -y https://rpms.remirepo.net/enterprise/remi-release-9.rpm\n\n# Enable PHP 8.2 repository\nsudo yum-config-manager --enable remi-php82\n\n# Install NGINX\nsudo yum install -y nginx\n\n# Install MariaDB\nsudo yum install -y mariadb-server mariadb\n\n# Install PHP and extensions\nsudo yum install -y php php-fpm php-mysql php-curl php-gd php-mbstring php-xml php-xmlrpc php-soap php-intl php-zip php-bcmath php-imagick php-opcache php-redis\n\n# Install Redis\nsudo yum install -y redis\n\n# Enable and start services\nsudo systemctl enable --now nginx mariadb php-fpm redis\n\n# Configure firewall\nsudo firewall-cmd --permanent --add-service=http\nsudo firewall-cmd --permanent --add-service=https\nsudo firewall-cmd --reload\n\n# Secure MySQL\nsudo mysql_secure_installation\n```\n\n#### Fedora LEMP Setup\n```bash\n# Install NGINX, MariaDB, PHP, and Redis\nsudo dnf install -y nginx mariadb-server mariadb php php-fpm php-mysql php-curl php-gd php-mbstring php-xml php-xmlrpc php-soap php-intl php-zip php-opcache php-redis redis\n\n# Enable and start services\nsudo systemctl enable --now nginx mariadb php-fpm redis\n\n# Configure firewall\nsudo firewall-cmd --permanent --add-service=http\nsudo firewall-cmd --permanent --add-service=https\nsudo firewall-cmd --reload\n\n# Secure MySQL\nsudo mysql_secure_installation\n```\n\n### LAMP Stack (Alternative)\n\n#### Ubuntu/Debian LAMP Setup\n```bash\n# Install Apache, MySQL, PHP\nsudo apt update\nsudo apt install -y apache2 mariadb-server php8.2 php8.2-mysql php8.2-curl php8.2-gd php8.2-mbstring php8.2-xml php8.2-xmlrpc php8.2-soap php8.2-intl php8.2-zip php8.2-opcache libapache2-mod-php8.2\n\n# Enable Apache modules\nsudo a2enmod rewrite ssl headers deflate expires\n\n# Enable and start services\nsudo systemctl enable --now apache2 mariadb\n\n# Configure firewall\nsudo ufw allow 'Apache Full'\nsudo ufw enable\n\n# Secure MySQL\nsudo mysql_secure_installation\n```\n\n### Database Setup (Universal)\n```bash\n# Create WordPress database and user\nsudo mysql -u root -p <<EOF\nCREATE DATABASE wordpress DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;\nCREATE USER 'wpuser'@'localhost' IDENTIFIED BY 'secure_wp_password_2024';\nGRANT ALL PRIVILEGES ON wordpress.* TO 'wpuser'@'localhost';\nFLUSH PRIVILEGES;\n\n-- Optimize MySQL for WordPress\nSET GLOBAL innodb_buffer_pool_size = 1073741824;  -- 1GB\nSET GLOBAL query_cache_size = 67108864;           -- 64MB\nSET GLOBAL query_cache_limit = 2097152;           -- 2MB\nEXIT\nEOF\n\n# Apply permanent MySQL optimizations\nsudo tee /etc/mysql/mysql.conf.d/wordpress.cnf > /dev/null <<EOF\n[mysqld]\n# WordPress optimizations\ninnodb_buffer_pool_size = 1G\ninnodb_log_file_size = 256M\ninnodb_file_per_table = 1\ninnodb_flush_log_at_trx_commit = 2\ninnodb_flush_method = O_DIRECT\n\n# Query cache\nquery_cache_type = 1\nquery_cache_size = 64M\nquery_cache_limit = 2M\n\n# Connection optimization\nmax_connections = 200\nthread_cache_size = 100\ntable_open_cache = 4096\ntmp_table_size = 32M\nmax_heap_table_size = 32M\n\n# Slow query log\nslow_query_log = 1\nlong_query_time = 2\nslow_query_log_file = /var/log/mysql/slow.log\nEOF\n\nsudo systemctl restart mariadb\n```\n\n## WordPress Installation\n\n### Download and Setup WordPress\n```bash\n# Download latest WordPress\ncd /tmp\nwget https://wordpress.org/latest.tar.gz\ntar xzf latest.tar.gz\n\n# Create web directory and copy files\nsudo mkdir -p /var/www/html/example.com\nsudo cp -R /tmp/wordpress/* /var/www/html/example.com/\n\n# Set proper ownership and permissions\n# For NGINX (Ubuntu/Debian)\nsudo chown -R www-data:www-data /var/www/html/example.com\n# For NGINX (RHEL/CentOS)\nsudo chown -R nginx:nginx /var/www/html/example.com\n# For Apache\nsudo chown -R www-data:www-data /var/www/html/example.com  # Ubuntu/Debian\nsudo chown -R apache:apache /var/www/html/example.com      # RHEL/CentOS\n\n# Secure file permissions\nsudo find /var/www/html/example.com/ -type d -exec chmod 755 {} \\;\nsudo find /var/www/html/example.com/ -type f -exec chmod 644 {} \\;\nsudo chmod 600 /var/www/html/example.com/wp-config.php\n\n# Create uploads directory with proper permissions\nsudo mkdir -p /var/www/html/example.com/wp-content/uploads\nsudo chmod 775 /var/www/html/example.com/wp-content/uploads\n```\n\n### Secure WordPress Configuration\n```bash\n# Create secure wp-config.php\ncd /var/www/html/example.com\nsudo cp wp-config-sample.php wp-config.php\n\n# Generate security keys\nSALT_KEYS=$(curl -s https://api.wordpress.org/secret-key/1.1/salt/)\n\n# Create wp-config.php with security hardening\nsudo tee wp-config.php > /dev/null <<EOF\n<?php\n/**\n * WordPress Configuration File - Security Hardened\n */\n\n// ** Database settings ** //\ndefine('DB_NAME', 'wordpress');\ndefine('DB_USER', 'wpuser');\ndefine('DB_PASSWORD', 'secure_wp_password_2024');\ndefine('DB_HOST', '127.0.0.1');  // Use 127.0.0.1 instead of localhost\ndefine('DB_CHARSET', 'utf8mb4');\ndefine('DB_COLLATE', '');\n\n// ** Authentication Unique Keys and Salts ** //\n${SALT_KEYS}\n\n// ** WordPress Database Table prefix ** //\n\\$table_prefix = 'wp_secure_';\n\n// ** Security hardening ** //\ndefine('WP_DEBUG', false);\ndefine('WP_DEBUG_LOG', false);\ndefine('WP_DEBUG_DISPLAY', false);\n\n// Disable file editing\ndefine('DISALLOW_FILE_EDIT', true);\ndefine('DISALLOW_FILE_MODS', true);\n\n// Force SSL\ndefine('FORCE_SSL_ADMIN', true);\n\n// Automatic updates\ndefine('WP_AUTO_UPDATE_CORE', 'minor');\ndefine('AUTOMATIC_UPDATER_DISABLED', false);\n\n// Memory limit\ndefine('WP_MEMORY_LIMIT', '512M');\n\n// Multisite (if needed)\n// define('WP_ALLOW_MULTISITE', true);\n\n// Custom content directory (optional)\ndefine('WP_CONTENT_DIR', '/var/www/html/example.com/wp-content');\ndefine('WP_CONTENT_URL', 'https://example.com/wp-content');\n\n// Database repair\ndefine('WP_ALLOW_REPAIR', false);\n\n// Cron optimization\ndefine('DISABLE_WP_CRON', true);  // Use system cron instead\n\n// Security headers\ndefine('COOKIE_DOMAIN', '.example.com');\ndefine('COOKIEHASH', md5('example.com'));\n\n// File permissions\ndefine('FS_CHMOD_DIR', (0755 & ~ umask()));\ndefine('FS_CHMOD_FILE', (0644 & ~ umask()));\n\n// Redis cache configuration\ndefine('WP_REDIS_HOST', '127.0.0.1');\ndefine('WP_REDIS_PORT', 6379);\ndefine('WP_REDIS_DATABASE', 0);\ndefine('WP_REDIS_TIMEOUT', 1);\ndefine('WP_REDIS_READ_TIMEOUT', 1);\n\n// Rate limiting\ndefine('WP_POST_REVISIONS', 5);\ndefine('AUTOSAVE_INTERVAL', 300);  // 5 minutes\ndefine('EMPTY_TRASH_DAYS', 7);\n\n/* That's all, stop editing! */\nif (!defined('ABSPATH')) {\n    define('ABSPATH', dirname(__FILE__) . '/');\n}\n\nrequire_once ABSPATH . 'wp-settings.php';\nEOF\n\nsudo chown www-data:www-data wp-config.php  # Adjust user as needed\nsudo chmod 600 wp-config.php\n```\n\n## Web Server Configuration\n\n### NGINX Configuration (Recommended)\n```bash\n# Create optimized NGINX configuration for WordPress\nsudo tee /etc/nginx/sites-available/wordpress.conf > /dev/null <<EOF\n# WordPress NGINX Configuration - 2024 Security Hardened\n\n# Rate limiting\nlimit_req_zone \\$binary_remote_addr zone=wp_login:10m rate=1r/s;\nlimit_req_zone \\$binary_remote_addr zone=wp_admin:10m rate=5r/m;\n\n# HTTP to HTTPS redirect\nserver {\n    listen 80;\n    listen [::]:80;\n    server_name example.com www.example.com;\n    return 301 https://example.com\\$request_uri;\n}\n\n# HTTPS Server\nserver {\n    listen 443 ssl http2;\n    listen [::]:443 ssl http2;\n    server_name example.com www.example.com;\n    root /var/www/html/example.com;\n    index index.php index.html index.htm;\n\n    # SSL Configuration (2024 best practices)\n    ssl_certificate /etc/letsencrypt/live/example.com/fullchain.pem;\n    ssl_certificate_key /etc/letsencrypt/live/example.com/privkey.pem;\n    ssl_trusted_certificate /etc/letsencrypt/live/example.com/chain.pem;\n    \n    ssl_protocols TLSv1.2 TLSv1.3;\n    ssl_ciphers ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384;\n    ssl_prefer_server_ciphers off;\n    ssl_session_cache shared:SSL:50m;\n    ssl_session_timeout 1d;\n    ssl_session_tickets off;\n\n    # Security headers (2024 standards)\n    add_header Strict-Transport-Security \"max-age=31536000; includeSubDomains; preload\" always;\n    add_header X-Frame-Options \"SAMEORIGIN\" always;\n    add_header X-Content-Type-Options \"nosniff\" always;\n    add_header X-XSS-Protection \"1; mode=block\" always;\n    add_header Referrer-Policy \"strict-origin-when-cross-origin\" always;\n    add_header Content-Security-Policy \"default-src 'self'; script-src 'self' 'unsafe-inline' 'unsafe-eval' *.googleapis.com *.gstatic.com; style-src 'self' 'unsafe-inline' *.googleapis.com; img-src 'self' data: https:; font-src 'self' data: *.gstatic.com; connect-src 'self'; media-src 'self'; object-src 'none'; child-src 'self'; form-action 'self'; base-uri 'self';\" always;\n    add_header Permissions-Policy \"camera=(), microphone=(), geolocation=()\" always;\n\n    # Hide server information\n    server_tokens off;\n    more_set_headers \"Server: \";\n\n    # Upload size limits\n    client_max_body_size 64M;\n\n    # FastCGI caching\n    set \\$skip_cache 0;\n    if (\\$request_method = POST) { set \\$skip_cache 1; }\n    if (\\$query_string != \"\") { set \\$skip_cache 1; }\n    if (\\$request_uri ~* \"/wp-admin/|/xmlrpc.php|wp-.*.php|/feed/|index.php|sitemap(_index)?.xml\") { set \\$skip_cache 1; }\n    if (\\$http_cookie ~* \"comment_author|wordpress_[a-f0-9]+|wp-postpass|wordpress_no_cache|wordpress_logged_in\") { set \\$skip_cache 1; }\n\n    # Main location block\n    location / {\n        try_files \\$uri \\$uri/ /index.php?\\$args;\n    }\n\n    # WordPress-specific security rules\n    location ~ /\\. {\n        deny all;\n        access_log off;\n        log_not_found off;\n    }\n\n    # Protect wp-config.php\n    location ~* wp-config\\.php {\n        deny all;\n    }\n\n    # Disable execution of PHP in uploads\n    location ~* /(?:uploads|files)/.*\\.php\\$ {\n        deny all;\n    }\n\n    # Block access to sensitive files\n    location ~* \\.(htaccess|htpasswd|ini|log|sh|sql|conf|bak|backup|swp|tmp)\\$ {\n        deny all;\n    }\n\n    # WordPress: deny wp-content, wp-includes php files\n    location ~* ^/(wp-content|wp-includes)/.*\\.php\\$ {\n        deny all;\n    }\n\n    # WordPress: deny general stuff\n    location ~* ^/(readme|license|example|README|INSTALL|CHANGELOG)\\.(txt|md)\\$ {\n        deny all;\n    }\n\n    # Block WordPress brute force attacks\n    location ~* /(wp-login\\.php|wp-admin/).*\\$ {\n        limit_req zone=wp_login burst=1 nodelay;\n        limit_req zone=wp_admin burst=5 nodelay;\n        \n        # IP whitelist for admin (replace with your IPs)\n        # allow 192.168.1.100;\n        # allow 10.0.0.0/8;\n        # deny all;\n        \n        include snippets/fastcgi-php.conf;\n        fastcgi_pass unix:/var/run/php/php8.2-fpm.sock;\n    }\n\n    # PHP processing with caching\n    location ~ \\.php\\$ {\n        include snippets/fastcgi-php.conf;\n        fastcgi_pass unix:/var/run/php/php8.2-fpm.sock;\n        fastcgi_param SCRIPT_FILENAME \\$document_root\\$fastcgi_script_name;\n        include fastcgi_params;\n        \n        # FastCGI caching\n        fastcgi_cache_bypass \\$skip_cache;\n        fastcgi_no_cache \\$skip_cache;\n        fastcgi_cache WORDPRESS;\n        fastcgi_cache_valid 60m;\n        \n        # Security\n        fastcgi_hide_header X-Powered-By;\n    }\n\n    # Static assets optimization\n    location ~* \\.(js|css|png|jpg|jpeg|gif|ico|svg|woff|woff2|ttf|eot|webp|avif)\\$ {\n        expires 1y;\n        add_header Cache-Control \"public, immutable\";\n        add_header Vary \"Accept-Encoding\";\n        access_log off;\n        \n        # CORS for fonts\n        location ~* \\.(woff|woff2|ttf|eot)\\$ {\n            add_header Access-Control-Allow-Origin *;\n        }\n    }\n\n    # XML files (sitemaps, feeds)\n    location ~* \\.(xml|txt)\\$ {\n        expires 1h;\n        add_header Cache-Control \"public\";\n    }\n\n    # Block xmlrpc.php\n    location = /xmlrpc.php {\n        deny all;\n        access_log off;\n        log_not_found off;\n    }\n\n    # WordPress REST API rate limiting\n    location ~* /wp-json/ {\n        limit_req zone=wp_admin burst=10 nodelay;\n        try_files \\$uri \\$uri/ /index.php?\\$args;\n    }\n\n    # Favicon and robots.txt\n    location = /favicon.ico {\n        log_not_found off;\n        access_log off;\n        expires 1y;\n    }\n\n    location = /robots.txt {\n        allow all;\n        log_not_found off;\n        access_log off;\n        expires 1h;\n    }\n\n    # Security.txt\n    location = /.well-known/security.txt {\n        return 301 \\$scheme://\\$server_name/.well-known/security.txt;\n    }\n}\n\n# WWW to non-WWW redirect\nserver {\n    listen 443 ssl http2;\n    listen [::]:443 ssl http2;\n    server_name www.example.com;\n    \n    ssl_certificate /etc/letsencrypt/live/example.com/fullchain.pem;\n    ssl_certificate_key /etc/letsencrypt/live/example.com/privkey.pem;\n    \n    return 301 https://example.com\\$request_uri;\n}\nEOF\n\n# Create FastCGI cache directory\nsudo mkdir -p /var/cache/nginx/wordpress\nsudo chown -R www-data:www-data /var/cache/nginx\n\n# Add FastCGI cache configuration\nsudo tee /etc/nginx/conf.d/fastcgi-cache.conf > /dev/null <<EOF\n# FastCGI cache configuration for WordPress\nfastcgi_cache_path /var/cache/nginx/wordpress levels=1:2 keys_zone=WORDPRESS:100m inactive=60m;\nfastcgi_cache_key \"\\$scheme\\$request_method\\$host\\$request_uri\";\nfastcgi_cache_use_stale error timeout invalid_header http_500;\nfastcgi_ignore_headers Cache-Control Expires Set-Cookie;\nEOF\n\n# Enable site and restart NGINX\nsudo ln -s /etc/nginx/sites-available/wordpress.conf /etc/nginx/sites-enabled/\nsudo nginx -t && sudo systemctl restart nginx\n```\n\n### Apache Configuration (Alternative)\n```bash\n# Create secure Apache virtual host\nsudo tee /etc/apache2/sites-available/wordpress.conf > /dev/null <<EOF\n<VirtualHost *:80>\n    ServerName example.com\n    ServerAlias www.example.com\n    Redirect permanent / https://example.com/\n</VirtualHost>\n\n<VirtualHost *:443>\n    ServerName example.com\n    ServerAlias www.example.com\n    DocumentRoot /var/www/html/example.com\n    \n    # SSL Configuration\n    SSLEngine on\n    SSLCertificateFile /etc/letsencrypt/live/example.com/fullchain.pem\n    SSLCertificateKeyFile /etc/letsencrypt/live/example.com/privkey.pem\n    SSLProtocol all -SSLv3 -TLSv1 -TLSv1.1\n    SSLCipherSuite ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256\n    SSLHonorCipherOrder off\n    \n    # Security headers\n    Header always set Strict-Transport-Security \"max-age=31536000; includeSubDomains; preload\"\n    Header always set X-Frame-Options \"SAMEORIGIN\"\n    Header always set X-Content-Type-Options \"nosniff\"\n    Header always set X-XSS-Protection \"1; mode=block\"\n    Header always set Referrer-Policy \"strict-origin-when-cross-origin\"\n    \n    # Hide server information\n    Header always unset Server\n    Header always unset X-Powered-By\n\n    <Directory /var/www/html/example.com>\n        Options -Indexes +FollowSymLinks\n        AllowOverride All\n        Require all granted\n        \n        # WordPress security\n        <Files wp-config.php>\n            Require all denied\n        </Files>\n        \n        <Files .htaccess>\n            Require all denied\n        </Files>\n        \n        <Files readme.html>\n            Require all denied\n        </Files>\n        \n        <Files license.txt>\n            Require all denied\n        </Files>\n    </Directory>\n\n    # Disable execution in uploads\n    <Directory /var/www/html/example.com/wp-content/uploads>\n        <Files \"*.php\">\n            Require all denied\n        </Files>\n    </Directory>\n\n    # Rate limiting with mod_evasive\n    <IfModule mod_evasive24.c>\n        DOSHashTableSize    1024\n        DOSPageCount        2\n        DOSSiteCount        50\n        DOSPageInterval     1\n        DOSSiteInterval     1\n        DOSBlockingPeriod   600\n        DOSEmailNotify      admin@example.com\n    </IfModule>\n\n    # Compression\n    <IfModule mod_deflate.c>\n        SetOutputFilter DEFLATE\n        AddOutputFilterByType DEFLATE text/html text/css text/javascript text/xml text/plain application/javascript application/xml+rss application/xml application/x-javascript application/json\n        \n        # Don't compress images\n        SetEnvIfNoCase Request_URI \\.(?:gif|jpe?g|png|webp)$ no-gzip dont-vary\n        SetEnvIfNoCase Request_URI \\.(?:exe|t?gz|zip|bz2|sit|rar)$ no-gzip dont-vary\n    </IfModule>\n\n    # Caching\n    <IfModule mod_expires.c>\n        ExpiresActive On\n        ExpiresByType image/jpg \"access plus 1 year\"\n        ExpiresByType image/jpeg \"access plus 1 year\"\n        ExpiresByType image/gif \"access plus 1 year\"\n        ExpiresByType image/png \"access plus 1 year\"\n        ExpiresByType image/webp \"access plus 1 year\"\n        ExpiresByType text/css \"access plus 1 month\"\n        ExpiresByType application/pdf \"access plus 1 month\"\n        ExpiresByType text/javascript \"access plus 1 month\"\n        ExpiresByType application/javascript \"access plus 1 month\"\n        ExpiresDefault \"access plus 1 week\"\n    </IfModule>\n\n    ErrorLog \\${APACHE_LOG_DIR}/wordpress_error.log\n    CustomLog \\${APACHE_LOG_DIR}/wordpress_access.log combined\n</VirtualHost>\nEOF\n\n# Enable modules and site\nsudo a2enmod ssl headers expires deflate rewrite\nsudo a2ensite wordpress.conf\nsudo a2dissite 000-default\nsudo systemctl restart apache2\n```\n\n## PHP Configuration and Optimization\n\n### PHP 8.2 Optimization\n```bash\n# Configure PHP-FPM for optimal WordPress performance\nsudo tee /etc/php/8.2/fpm/pool.d/wordpress.conf > /dev/null <<EOF\n[wordpress]\nuser = www-data\ngroup = www-data\nlisten = /var/run/php/php8.2-fpm-wordpress.sock\nlisten.owner = www-data\nlisten.group = www-data\nlisten.mode = 0660\n\n# Process management\npm = dynamic\npm.max_children = 50\npm.start_servers = 5\npm.min_spare_servers = 5\npm.max_spare_servers = 35\npm.max_requests = 1000\npm.process_idle_timeout = 10s\n\n# Resource limits\nphp_admin_value[memory_limit] = 512M\nphp_admin_value[upload_max_filesize] = 64M\nphp_admin_value[post_max_size] = 64M\nphp_admin_value[max_execution_time] = 300\nphp_admin_value[max_input_time] = 300\nphp_admin_value[max_input_vars] = 3000\n\n# Security settings\nphp_admin_flag[allow_url_fopen] = off\nphp_admin_flag[allow_url_include] = off\nphp_admin_flag[file_uploads] = on\nphp_admin_flag[expose_php] = off\nphp_admin_flag[log_errors] = on\nphp_admin_value[error_log] = /var/log/php/wordpress-error.log\n\n# OPcache settings\nphp_admin_flag[opcache.enable] = on\nphp_admin_value[opcache.memory_consumption] = 256\nphp_admin_value[opcache.interned_strings_buffer] = 16\nphp_admin_value[opcache.max_accelerated_files] = 10000\nphp_admin_value[opcache.revalidate_freq] = 2\nphp_admin_flag[opcache.save_comments] = on\nphp_admin_flag[opcache.fast_shutdown] = on\n\n# Session settings\nphp_admin_value[session.save_handler] = redis\nphp_admin_value[session.save_path] = \"tcp://127.0.0.1:6379\"\nphp_admin_value[session.gc_maxlifetime] = 1440\nEOF\n\n# Create PHP error log directory\nsudo mkdir -p /var/log/php\nsudo chown www-data:www-data /var/log/php\n\n# Configure main PHP settings\nsudo tee -a /etc/php/8.2/fpm/php.ini > /dev/null <<EOF\n\n; WordPress optimizations\nmax_execution_time = 300\nmax_input_time = 300\nmemory_limit = 512M\nupload_max_filesize = 64M\npost_max_size = 64M\nmax_input_vars = 3000\n\n; Security\nexpose_php = Off\nallow_url_fopen = Off\nallow_url_include = Off\ndisplay_errors = Off\nlog_errors = On\nerror_log = /var/log/php/error.log\n\n; Session security\nsession.cookie_httponly = On\nsession.cookie_secure = On\nsession.use_strict_mode = On\n\n; OPcache\nopcache.enable = 1\nopcache.memory_consumption = 256\nopcache.interned_strings_buffer = 16\nopcache.max_accelerated_files = 10000\nopcache.revalidate_freq = 2\nopcache.save_comments = 1\nopcache.fast_shutdown = 1\nopcache.validate_timestamps = 0  ; Production only\n\n; Redis\nextension = redis\n\n; Date/time\ndate.timezone = \"America/New_York\"\nEOF\n\nsudo systemctl restart php8.2-fpm\n```\n\n### Redis Object Caching Setup\n```bash\n# Configure Redis for WordPress\nsudo tee -a /etc/redis/redis.conf > /dev/null <<EOF\n\n# WordPress optimizations\nmaxmemory 512mb\nmaxmemory-policy allkeys-lru\nsave 900 1\nsave 300 10\nsave 60 10000\n\n# Security\nbind 127.0.0.1\nprotected-mode yes\nport 6379\ntcp-backlog 511\n\n# Logging\nloglevel notice\nlogfile /var/log/redis/redis-server.log\n\n# Persistence\nrdbcompression yes\nrdbchecksum yes\nEOF\n\nsudo systemctl restart redis-server\n```\n\n## WordPress CLI (WP-CLI) Installation and Configuration\n\n### WP-CLI Setup\n```bash\n# Download and install WP-CLI\ncurl -O https://raw.githubusercontent.com/wp-cli/builds/gh-pages/phar/wp-cli.phar\nchmod +x wp-cli.phar\nsudo mv wp-cli.phar /usr/local/bin/wp\n\n# Create WP-CLI configuration\nsudo tee /var/www/html/example.com/wp-cli.yml > /dev/null <<EOF\n# WP-CLI configuration\npath: /var/www/html/example.com\n\ncore config:\n  dbhost: 127.0.0.1\n  dbname: wordpress\n  dbuser: wpuser\n  dbpass: secure_wp_password_2024\n  extra-php: |\n    define('WP_DEBUG', false);\n    define('WP_DEBUG_LOG', false);\n    define('DISALLOW_FILE_EDIT', true);\n    define('FORCE_SSL_ADMIN', true);\n    define('WP_REDIS_HOST', '127.0.0.1');\n\nserver:\n  docroot: /var/www/html/example.com\nEOF\n\n# Install WordPress via WP-CLI\ncd /var/www/html/example.com\nsudo -u www-data wp core download --force\nsudo -u www-data wp config create \\\n  --dbname=wordpress \\\n  --dbuser=wpuser \\\n  --dbpass=secure_wp_password_2024 \\\n  --dbhost=127.0.0.1\n\nsudo -u www-data wp core install \\\n  --url=https://example.com \\\n  --title=\"Secure WordPress Site\" \\\n  --admin_user=admin \\\n  --admin_password=secure_admin_password_2024 \\\n  --admin_email=admin@example.com \\\n  --skip-email\n\n# Essential security plugins\nsudo -u www-data wp plugin install wordfence --activate\nsudo -u www-data wp plugin install redis-cache --activate\nsudo -u www-data wp plugin install wp-super-cache --activate\nsudo -u www-data wp plugin install updraftplus --activate\n\n# Performance plugins\nsudo -u www-data wp plugin install autoptimize --activate\nsudo -u www-data wp plugin install smush --activate\n\n# Enable Redis cache\nsudo -u www-data wp redis enable\n\n# Configure security settings\nsudo -u www-data wp config set FORCE_SSL_ADMIN true --raw\nsudo -u www-data wp config set DISALLOW_FILE_EDIT true --raw\nsudo -u www-data wp config set WP_AUTO_UPDATE_CORE minor --raw\n```\n\n## Security Hardening\n\n### File System Security\n```bash\n# Create secure file permissions script\nsudo tee /usr/local/bin/wordpress-permissions.sh > /dev/null <<'EOF'\n#!/bin/bash\nWP_PATH=\"/var/www/html/example.com\"\nWP_USER=\"www-data\"\nWP_GROUP=\"www-data\"\n\n# Set directory permissions\nfind ${WP_PATH}/ -type d -exec chmod 755 {} \\;\n\n# Set file permissions\nfind ${WP_PATH}/ -type f -exec chmod 644 {} \\;\n\n# Secure wp-config.php\nchmod 600 ${WP_PATH}/wp-config.php\n\n# Secure .htaccess\nif [ -f ${WP_PATH}/.htaccess ]; then\n    chmod 644 ${WP_PATH}/.htaccess\nfi\n\n# Set ownership\nchown -R ${WP_USER}:${WP_GROUP} ${WP_PATH}/\n\n# Secure directories\nchmod 755 ${WP_PATH}/wp-content/\nchmod 755 ${WP_PATH}/wp-content/themes/\nchmod 755 ${WP_PATH}/wp-content/plugins/\nchmod 775 ${WP_PATH}/wp-content/uploads/\n\n# Create .htaccess for uploads security (Apache)\ncat > ${WP_PATH}/wp-content/uploads/.htaccess <<EOL\n# Disable PHP execution in uploads directory\n<Files \"*.php\">\n    Order Deny,Allow\n    Deny from All\n</Files>\n\n# Disable directory browsing\nOptions -Indexes\n\n# Deny access to sensitive files\n<FilesMatch \"\\.(htaccess|htpasswd|ini|log|sh|inc|bak)$\">\n    Order Allow,Deny\n    Deny from all\n</FilesMatch>\nEOL\n\necho \"WordPress file permissions have been secured\"\nEOF\n\nsudo chmod +x /usr/local/bin/wordpress-permissions.sh\nsudo /usr/local/bin/wordpress-permissions.sh\n```\n\n### WordPress Security Configuration\n```bash\n# Create comprehensive .htaccess for security (Apache)\nsudo tee /var/www/html/example.com/.htaccess > /dev/null <<EOF\n# WordPress Security .htaccess - 2024\n\n# Block access to wp-config.php\n<Files wp-config.php>\n    Order Allow,Deny\n    Deny from All\n</Files>\n\n# Block access to readme.html, license.txt, etc.\n<FilesMatch \"^(readme\\.html|license\\.txt|wp-config\\.php|\\.htaccess|\\.htpasswd)\">\n    Order Allow,Deny\n    Deny from All\n</FilesMatch>\n\n# Prevent script injections\nOptions +FollowSymLinks\nRewriteEngine On\nRewriteCond %{QUERY_STRING} (<|%3C).*script.*(>|%3E) [NC,OR]\nRewriteCond %{QUERY_STRING} GLOBALS(=|[|%[0-9A-Z]{0,2}) [OR]\nRewriteCond %{QUERY_STRING} _REQUEST(=|[|%[0-9A-Z]{0,2}) [OR]\nRewriteCond %{QUERY_STRING} ^.*(\\[|\\]|\\(|\\)|<|>|Ãª|\"|;|\\?|\\*|\\$|=) [NC,OR]\nRewriteCond %{QUERY_STRING} (NULL|OUTFILE|LOAD_FILE) [OR]\nRewriteCond %{QUERY_STRING} (\\.{1,}/)+(motd|etc|bin) [NC,OR]\nRewriteCond %{QUERY_STRING} (localhost|loopback|127\\.0\\.0\\.1) [NC,OR]\nRewriteCond %{QUERY_STRING} (<|>|'|%0A|%0D|%27|%3C|%3E|%00) [NC,OR]\nRewriteCond %{QUERY_STRING} concat[^\\(]*\\( [NC,OR]\nRewriteCond %{QUERY_STRING} union([^s]*s)+elect [NC,OR]\nRewriteCond %{QUERY_STRING} union([^a]*a)+ll([^s]*s)+elect [NC,OR]\nRewriteCond %{QUERY_STRING} \\-[sdcr].*(allow_url_include|allow_url_fopen|safe_mode|disable_functions|auto_prepend_file) [NC,OR]\nRewriteCond %{QUERY_STRING} (;|<|>|'|\"|\\)|%0A|%0D|%22|%27|%3C|%3E|%00).*(/\\*|union|select|insert|drop|delete|update|cast|create|char|convert|alter|declare|or|;|\\)|script|\\<|\\>|\\&|\\|\\|) [NC]\nRewriteRule ^(.*)$ index.php [F,L]\n\n# Block XML-RPC\n<Files xmlrpc.php>\n    Order Allow,Deny\n    Deny from All\n</Files>\n\n# Limit login attempts\n<FilesMatch \"wp-login.php\">\n    Order Allow,Deny\n    Allow from all\n    # Add your IP for admin access\n    # Allow from 192.168.1.100\n</FilesMatch>\n\n# Disable directory browsing\nOptions -Indexes\n\n# Protect includes directory\n<IfModule mod_rewrite.c>\n    RewriteEngine On\n    RewriteRule ^wp-admin/includes/ - [F,L]\n    RewriteRule !^wp-includes/ - [S=3]\n    RewriteRule ^wp-includes/[^/]+\\.php$ - [F,L]\n    RewriteRule ^wp-includes/js/tinymce/langs/.+\\.php - [F,L]\n    RewriteRule ^wp-includes/theme-compat/ - [F,L]\n</IfModule>\n\n# WordPress SEO\nRewriteRule ^index\\.php$ - [L]\nRewriteCond %{REQUEST_FILENAME} !-f\nRewriteCond %{REQUEST_FILENAME} !-d\nRewriteRule . /index.php [L]\n\n# Force HTTPS (if not using NGINX redirect)\n# RewriteCond %{HTTPS} !=on\n# RewriteRule ^(.*)$ https://%{HTTP_HOST}%{REQUEST_URI} [L,R=301]\n\n# Security headers (if mod_headers is enabled)\n<IfModule mod_headers.c>\n    Header always set Strict-Transport-Security \"max-age=31536000; includeSubDomains; preload\"\n    Header always set X-Frame-Options \"SAMEORIGIN\"\n    Header always set X-Content-Type-Options \"nosniff\"\n    Header always set X-XSS-Protection \"1; mode=block\"\n    Header always set Referrer-Policy \"strict-origin-when-cross-origin\"\n</IfModule>\nEOF\n\nsudo chown www-data:www-data /var/www/html/example.com/.htaccess\n```\n\n## Performance Optimization\n\n### Caching Strategy Implementation\n```bash\n# Install and configure Redis plugin\ncd /var/www/html/example.com\nsudo -u www-data wp plugin install redis-cache --activate\n\n# Configure Redis for WordPress\nsudo -u www-data wp config set WP_REDIS_HOST '127.0.0.1' --raw\nsudo -u www-data wp config set WP_REDIS_PORT 6379 --raw --type=integer\nsudo -u www-data wp config set WP_REDIS_DATABASE 0 --raw --type=integer\nsudo -u www-data wp config set WP_REDIS_TIMEOUT 1 --raw --type=integer\nsudo -u www-data wp config set WP_REDIS_READ_TIMEOUT 1 --raw --type=integer\n\n# Enable Redis object cache\nsudo -u www-data wp redis enable\n\n# Install and configure caching plugin\nsudo -u www-data wp plugin install w3-total-cache --activate\n\n# Configure W3 Total Cache via WP-CLI\nsudo -u www-data wp w3-total-cache option set pgcache.enabled true\nsudo -u www-data wp w3-total-cache option set dbcache.enabled true\nsudo -u www-data wp w3-total-cache option set objectcache.enabled true\nsudo -u www-data wp w3-total-cache option set browsercache.enabled true\n\n# Install performance optimization plugins\nsudo -u www-data wp plugin install autoptimize --activate\nsudo -u www-data wp plugin install smush --activate\nsudo -u www-data wp plugin install wp-rocket --activate  # Premium plugin\n```\n\n### Database Optimization\n```bash\n# Create database optimization script\nsudo tee /usr/local/bin/wordpress-db-optimize.sh > /dev/null <<'EOF'\n#!/bin/bash\nWP_PATH=\"/var/www/html/example.com\"\nLOG_FILE=\"/var/log/wordpress-optimization.log\"\n\ncd ${WP_PATH}\n\nlog_message() {\n    echo \"$(date '+%Y-%m-%d %H:%M:%S') - $1\" | tee -a ${LOG_FILE}\n}\n\nlog_message \"Starting WordPress database optimization...\"\n\n# Database cleanup\nsudo -u www-data wp transient delete --all --quiet\nsudo -u www-data wp db optimize --quiet\nsudo -u www-data wp db repair --quiet\n\n# Clean spam and trash\nsudo -u www-data wp comment delete $(sudo -u www-data wp comment list --status=spam --format=ids) --quiet\nsudo -u www-data wp post delete $(sudo -u www-data wp post list --post_status=trash --format=ids) --quiet\n\n# Optimize images\nif sudo -u www-data wp plugin is-installed smush; then\n    sudo -u www-data wp smush optimize --quiet\nfi\n\n# Clear caches\nif sudo -u www-data wp plugin is-installed w3-total-cache; then\n    sudo -u www-data wp w3-total-cache flush all --quiet\nfi\n\nif sudo -u www-data wp plugin is-installed wp-super-cache; then\n    sudo -u www-data wp super-cache flush --quiet\nfi\n\nif sudo -u www-data wp plugin is-installed redis-cache; then\n    sudo -u www-data wp redis flush --quiet\nfi\n\n# Update WordPress core and plugins\nsudo -u www-data wp core update --quiet\nsudo -u www-data wp plugin update --all --quiet\nsudo -u www-data wp theme update --all --quiet\n\nlog_message \"WordPress optimization completed\"\nEOF\n\nsudo chmod +x /usr/local/bin/wordpress-db-optimize.sh\n\n# Schedule weekly optimization\necho \"0 3 * * 0 root /usr/local/bin/wordpress-db-optimize.sh\" | sudo tee -a /etc/crontab\n```\n\n### CDN Integration\n```bash\n# Configure Cloudflare integration\nsudo -u www-data wp plugin install cloudflare --activate\n\n# Configure CDN settings via WP-CLI\nsudo -u www-data wp option update cloudflare_api_key \"your_cloudflare_api_key\"\nsudo -u www-data wp option update cloudflare_email \"your_email@example.com\"\n\n# Install MaxCDN/StackPath plugin\nsudo -u www-data wp plugin install maxcdn --activate\n\n# Configure image optimization\nsudo -u www-data wp plugin install ewww-image-optimizer --activate\nsudo -u www-data wp option update ewww_image_optimizer_cloud_key \"your_api_key\"\n```\n\n## SSL Certificate Setup\n\n### Let's Encrypt SSL Configuration\n```bash\n# Install Certbot\nsudo apt install -y certbot python3-certbot-nginx  # NGINX\nsudo apt install -y certbot python3-certbot-apache # Apache\n\n# Obtain SSL certificate\nsudo certbot --nginx -d example.com -d www.example.com  # NGINX\nsudo certbot --apache -d example.com -d www.example.com # Apache\n\n# Configure automatic renewal\nsudo crontab -e\n# Add: 0 12 * * * /usr/bin/certbot renew --quiet && systemctl reload nginx\n\n# Test renewal\nsudo certbot renew --dry-run\n\n# Update WordPress URLs to HTTPS\ncd /var/www/html/example.com\nsudo -u www-data wp search-replace \"http://example.com\" \"https://example.com\" --dry-run\nsudo -u www-data wp search-replace \"http://example.com\" \"https://example.com\"\nsudo -u www-data wp option update home \"https://example.com\"\nsudo -u www-data wp option update siteurl \"https://example.com\"\n```\n\n## Backup and Security\n\n### Comprehensive Backup Strategy\n```bash\nsudo tee /usr/local/bin/wordpress-backup.sh > /dev/null <<'EOF'\n#!/bin/bash\nBACKUP_DIR=\"/backup/wordpress\"\nWP_PATH=\"/var/www/html/example.com\"\nDATE=$(date +%Y%m%d_%H%M%S)\n\nmkdir -p ${BACKUP_DIR}/{files,database,configs}\n\ncd ${WP_PATH}\n\n# Database backup via WP-CLI\nsudo -u www-data wp db export ${BACKUP_DIR}/database/wordpress-${DATE}.sql --quiet\ngzip ${BACKUP_DIR}/database/wordpress-${DATE}.sql\n\n# Files backup (exclude cache and temp files)\ntar --exclude='${WP_PATH}/wp-content/cache' \\\n    --exclude='${WP_PATH}/wp-content/uploads/cache' \\\n    --exclude='${WP_PATH}/wp-content/w3tc-config' \\\n    --exclude='${WP_PATH}/.htaccess.bak*' \\\n    -czf ${BACKUP_DIR}/files/wordpress-files-${DATE}.tar.gz \\\n    -C /var/www/html example.com\n\n# Configuration backup\ntar -czf ${BACKUP_DIR}/configs/wordpress-config-${DATE}.tar.gz \\\n    /etc/nginx/sites-available/wordpress.conf \\\n    /etc/php/8.2/fpm/pool.d/wordpress.conf \\\n    /etc/mysql/mysql.conf.d/wordpress.cnf \\\n    /etc/redis/redis.conf\n\n# Upload to cloud storage\naws s3 cp ${BACKUP_DIR}/ s3://wordpress-backups/ --recursive\naz storage blob upload-batch --source ${BACKUP_DIR} --destination wordpress-backups\ngsutil cp -r ${BACKUP_DIR}/* gs://wordpress-backups/\n\n# Keep only last 14 backups locally\nfind ${BACKUP_DIR} -name \"wordpress-*\" -type f -mtime +14 -delete\n\n# Test backup integrity\nif [ -f ${BACKUP_DIR}/database/wordpress-${DATE}.sql.gz ]; then\n    zcat ${BACKUP_DIR}/database/wordpress-${DATE}.sql.gz | head -10 >/dev/null\n    if [ $? -eq 0 ]; then\n        echo \"âœ“ Database backup integrity verified\"\n    else\n        echo \"âœ— Database backup may be corrupted\"\n    fi\nfi\n\necho \"WordPress backup completed: ${DATE}\"\nEOF\n\nsudo chmod +x /usr/local/bin/wordpress-backup.sh\n\n# Schedule daily backups\necho \"0 2 * * * root /usr/local/bin/wordpress-backup.sh\" | sudo tee -a /etc/crontab\n```\n\n### Security Monitoring and Hardening\n```bash\n# Create security monitoring script\nsudo tee /usr/local/bin/wordpress-security-check.sh > /dev/null <<'EOF'\n#!/bin/bash\nWP_PATH=\"/var/www/html/example.com\"\nSECURITY_LOG=\"/var/log/wordpress-security.log\"\n\ncd ${WP_PATH}\n\nlog_message() {\n    echo \"$(date '+%Y-%m-%d %H:%M:%S') - $1\" | tee -a ${SECURITY_LOG}\n}\n\n# Check for malware\nif command -v clamscan >/dev/null 2>&1; then\n    log_message \"Running malware scan...\"\n    clamscan -r ${WP_PATH} --infected --remove --quiet\n    if [ $? -eq 0 ]; then\n        log_message \"âœ“ No malware detected\"\n    else\n        log_message \"âš  Malware detected and removed\"\n    fi\nfi\n\n# Check file integrity\nlog_message \"Checking WordPress core file integrity...\"\nCORE_INTEGRITY=$(sudo -u www-data wp core verify-checksums --quiet 2>&1)\nif [ $? -eq 0 ]; then\n    log_message \"âœ“ WordPress core files are intact\"\nelse\n    log_message \"âš  WordPress core file integrity issues: ${CORE_INTEGRITY}\"\nfi\n\n# Check for vulnerable plugins\nlog_message \"Checking for vulnerable plugins...\"\nVULN_PLUGINS=$(sudo -u www-data wp vuln plugin-status 2>/dev/null | grep \"vulnerable\" | wc -l)\nif [ ${VULN_PLUGINS} -eq 0 ]; then\n    log_message \"âœ“ No vulnerable plugins detected\"\nelse\n    log_message \"âš  ${VULN_PLUGINS} vulnerable plugins found\"\nfi\n\n# Check user accounts\nADMIN_COUNT=$(sudo -u www-data wp user list --role=administrator --format=count)\nlog_message \"â„¹ ${ADMIN_COUNT} administrator accounts found\"\n\n# Check for suspicious uploads\nSUSPICIOUS_FILES=$(find ${WP_PATH}/wp-content/uploads -name \"*.php\" -o -name \"*.js\" -o -name \"*.exe\" 2>/dev/null | wc -l)\nif [ ${SUSPICIOUS_FILES} -gt 0 ]; then\n    log_message \"âš  ${SUSPICIOUS_FILES} suspicious files found in uploads directory\"\n    find ${WP_PATH}/wp-content/uploads -name \"*.php\" -o -name \"*.js\" -o -name \"*.exe\" 2>/dev/null >> ${SECURITY_LOG}\nfi\n\n# Check file permissions\nWRITABLE_FILES=$(find ${WP_PATH} -type f -perm 777 2>/dev/null | wc -l)\nif [ ${WRITABLE_FILES} -gt 0 ]; then\n    log_message \"âš  ${WRITABLE_FILES} files are world-writable\"\nfi\n\n# Check .htaccess integrity\nif [ -f ${WP_PATH}/.htaccess ]; then\n    HTACCESS_SIZE=$(stat -c%s ${WP_PATH}/.htaccess)\n    if [ ${HTACCESS_SIZE} -lt 100 ]; then\n        log_message \"âš  .htaccess file may be compromised or empty\"\n    fi\nfi\n\n# Check for brute force attempts\nFAILED_LOGINS=$(grep \"authentication failure\" /var/log/auth.log | grep -c \"$(date +'%b %d')\")\nif [ ${FAILED_LOGINS} -gt 10 ]; then\n    log_message \"âš  ${FAILED_LOGINS} failed login attempts detected today\"\nfi\n\nlog_message \"Security check completed\"\nEOF\n\nsudo chmod +x /usr/local/bin/wordpress-security-check.sh\n\n# Schedule daily security checks\necho \"0 6 * * * root /usr/local/bin/wordpress-security-check.sh\" | sudo tee -a /etc/crontab\n```\n\n### Fail2Ban WordPress Protection\n```bash\n# Install Fail2Ban\nsudo apt install -y fail2ban  # Ubuntu/Debian\nsudo yum install -y fail2ban  # RHEL/CentOS\n\n# Create WordPress filter\nsudo tee /etc/fail2ban/filter.d/wordpress.conf > /dev/null <<EOF\n[Definition]\nfailregex = ^<HOST>.*POST.*(wp-login\\.php|xmlrpc\\.php).* 200\n            ^<HOST>.*POST.*wp-login\\.php.* 404\n            ^<HOST>.*GET.*wp-admin.* 403\n            ^<HOST>.*POST.*wp-comments-post\\.php.* 403\n\nignoreregex = ^<HOST>.*POST.*wp-login\\.php.*200.*admin\nEOF\n\n# Configure WordPress jail\nsudo tee /etc/fail2ban/jail.d/wordpress.conf > /dev/null <<EOF\n[wordpress]\nenabled = true\nport = http,https\nfilter = wordpress\nlogpath = /var/log/nginx/access.log\nmaxretry = 3\nfindtime = 600\nbantime = 3600\naction = iptables-multiport[name=WordPress, port=\"http,https\", protocol=tcp]\n\n[wordpress-xmlrpc]\nenabled = true\nport = http,https\nfilter = wordpress\nlogpath = /var/log/nginx/access.log\nmaxretry = 1\nfindtime = 300\nbantime = 86400\naction = iptables-multiport[name=WordPress-XMLRPC, port=\"http,https\", protocol=tcp]\nEOF\n\nsudo systemctl restart fail2ban\n```\n\n## Monitoring and Maintenance\n\n### WordPress Health Monitoring\n```bash\nsudo tee /usr/local/bin/wordpress-health-check.sh > /dev/null <<'EOF'\n#!/bin/bash\nWP_PATH=\"/var/www/html/example.com\"\nHEALTH_LOG=\"/var/log/wordpress-health.log\"\n\ncd ${WP_PATH}\n\nlog_message() {\n    echo \"$(date '+%Y-%m-%d %H:%M:%S') - $1\" | tee -a ${HEALTH_LOG}\n}\n\n# Check web server status\nWEB_SERVER=\"nginx\"\nif command -v apache2 >/dev/null 2>&1; then\n    WEB_SERVER=\"apache2\"\nelif command -v httpd >/dev/null 2>&1; then\n    WEB_SERVER=\"httpd\"\nfi\n\nif systemctl is-active ${WEB_SERVER} >/dev/null 2>&1; then\n    log_message \"âœ“ ${WEB_SERVER} is running\"\nelse\n    log_message \"âœ— ${WEB_SERVER} is not running\"\n    exit 1\nfi\n\n# Check database connectivity\nif sudo -u www-data wp db check --quiet >/dev/null 2>&1; then\n    log_message \"âœ“ Database connection is healthy\"\nelse\n    log_message \"âœ— Database connection issues\"\nfi\n\n# Check WordPress status\nWP_VERSION=$(sudo -u www-data wp core version --quiet)\nlog_message \"â„¹ WordPress version: ${WP_VERSION}\"\n\n# Check for updates\nCORE_UPDATES=$(sudo -u www-data wp core check-update --format=count --quiet)\nPLUGIN_UPDATES=$(sudo -u www-data wp plugin list --update=available --format=count --quiet)\nTHEME_UPDATES=$(sudo -u www-data wp theme list --update=available --format=count --quiet)\n\nlog_message \"â„¹ Updates available - Core: ${CORE_UPDATES}, Plugins: ${PLUGIN_UPDATES}, Themes: ${THEME_UPDATES}\"\n\n# Check Redis cache\nif sudo -u www-data wp redis status >/dev/null 2>&1; then\n    log_message \"âœ“ Redis object cache is working\"\nelse\n    log_message \"âš  Redis object cache issues\"\nfi\n\n# Check disk space\nDISK_USAGE=$(df ${WP_PATH} | awk 'NR==2 {print $5}' | sed 's/%//')\nif [ ${DISK_USAGE} -gt 85 ]; then\n    log_message \"âš  Disk usage is ${DISK_USAGE}%\"\nelse\n    log_message \"âœ“ Disk usage is ${DISK_USAGE}%\"\nfi\n\n# Check file permissions\nWRITABLE_WP_CONFIG=$([ -w ${WP_PATH}/wp-config.php ] && echo \"1\" || echo \"0\")\nif [ ${WRITABLE_WP_CONFIG} -eq 1 ]; then\n    log_message \"âš  wp-config.php is writable - security risk\"\nelse\n    log_message \"âœ“ wp-config.php permissions are secure\"\nfi\n\n# Check SSL certificate\nSSL_EXPIRY=$(echo | openssl s_client -servername example.com -connect example.com:443 2>/dev/null | openssl x509 -noout -dates | grep notAfter | cut -d= -f2)\nSSL_EXPIRY_EPOCH=$(date -d \"$SSL_EXPIRY\" +%s)\nCURRENT_EPOCH=$(date +%s)\nDAYS_TO_SSL_EXPIRY=$(( (SSL_EXPIRY_EPOCH - CURRENT_EPOCH) / 86400 ))\n\nif [ ${DAYS_TO_SSL_EXPIRY} -lt 30 ]; then\n    log_message \"âš  SSL certificate expires in ${DAYS_TO_SSL_EXPIRY} days\"\nelse\n    log_message \"âœ“ SSL certificate expires in ${DAYS_TO_SSL_EXPIRY} days\"\nfi\n\n# Check website accessibility\nHTTP_STATUS=$(curl -s -o /dev/null -w \"%{http_code}\" https://example.com)\nif [ \"${HTTP_STATUS}\" = \"200\" ]; then\n    log_message \"âœ“ Website is accessible (HTTP ${HTTP_STATUS})\"\nelse\n    log_message \"âœ— Website accessibility issues (HTTP ${HTTP_STATUS})\"\nfi\n\nlog_message \"WordPress health check completed\"\nEOF\n\nsudo chmod +x /usr/local/bin/wordpress-health-check.sh\n\n# Schedule health checks every 30 minutes\necho \"*/30 * * * * root /usr/local/bin/wordpress-health-check.sh\" | sudo tee -a /etc/crontab\n```\n\n### WordPress Security Scanning\n```bash\n# Install WP-CLI vulnerability scanner\nsudo -u www-data wp package install wp-cli/doctor-command\n\n# Create comprehensive security scan script\nsudo tee /usr/local/bin/wordpress-security-scan.sh > /dev/null <<'EOF'\n#!/bin/bash\nWP_PATH=\"/var/www/html/example.com\"\nSCAN_LOG=\"/var/log/wordpress-security-scan.log\"\nDATE=$(date +%Y%m%d_%H%M%S)\n\ncd ${WP_PATH}\n\nlog_message() {\n    echo \"$(date '+%Y-%m-%d %H:%M:%S') - $1\" | tee -a ${SCAN_LOG}\n}\n\nlog_message \"Starting WordPress security scan...\"\n\n# Check WordPress version\nWP_VERSION=$(sudo -u www-data wp core version --quiet)\nLATEST_VERSION=$(sudo -u www-data wp core check-update --format=csv --quiet | tail -1 | cut -d, -f2)\n\nif [ \"${WP_VERSION}\" != \"${LATEST_VERSION}\" ] && [ -n \"${LATEST_VERSION}\" ]; then\n    log_message \"âš  WordPress is outdated (${WP_VERSION}), latest is ${LATEST_VERSION}\"\nelse\n    log_message \"âœ“ WordPress is up to date (${WP_VERSION})\"\nfi\n\n# Check for vulnerable plugins\nsudo -u www-data wp plugin list --format=json > /tmp/wp-plugins-${DATE}.json\nwhile read -r plugin; do\n    plugin_name=$(echo $plugin | jq -r .name)\n    plugin_version=$(echo $plugin | jq -r .version)\n    plugin_update=$(echo $plugin | jq -r .update)\n    \n    if [ \"$plugin_update\" != \"none\" ] && [ \"$plugin_update\" != \"null\" ]; then\n        log_message \"âš  Plugin update available: ${plugin_name} (${plugin_version})\"\n    fi\ndone < <(jq -c '.[]' /tmp/wp-plugins-${DATE}.json)\n\n# Check theme security\nACTIVE_THEME=$(sudo -u www-data wp theme status --format=json | jq -r '.[] | select(.status==\"Active\") | .name')\nlog_message \"â„¹ Active theme: ${ACTIVE_THEME}\"\n\n# Check user accounts\nUSERS_WITH_ADMIN=$(sudo -u www-data wp user list --role=administrator --format=count --quiet)\nlog_message \"â„¹ ${USERS_WITH_ADMIN} administrator accounts\"\n\n# Check for inactive plugins\nINACTIVE_PLUGINS=$(sudo -u www-data wp plugin list --status=inactive --format=count --quiet)\nif [ ${INACTIVE_PLUGINS} -gt 0 ]; then\n    log_message \"â„¹ ${INACTIVE_PLUGINS} inactive plugins (consider removing)\"\nfi\n\n# Check database integrity\nif sudo -u www-data wp db check --quiet >/dev/null 2>&1; then\n    log_message \"âœ“ Database integrity check passed\"\nelse\n    log_message \"âš  Database integrity issues detected\"\nfi\n\n# Check for spam content\nSPAM_COMMENTS=$(sudo -u www-data wp comment list --status=spam --format=count --quiet)\nif [ ${SPAM_COMMENTS} -gt 0 ]; then\n    log_message \"â„¹ ${SPAM_COMMENTS} spam comments detected\"\nfi\n\n# Run Wordfence scan (if installed)\nif sudo -u www-data wp plugin is-installed wordfence; then\n    log_message \"Running Wordfence security scan...\"\n    # Note: Wordfence CLI scanning requires premium\nfi\n\n# Check file changes (basic integrity)\nfind ${WP_PATH} -name \"*.php\" -newer ${WP_PATH}/wp-config.php | wc -l > /tmp/changed_files_count\nCHANGED_FILES=$(cat /tmp/changed_files_count)\nif [ ${CHANGED_FILES} -gt 5 ]; then\n    log_message \"âš  ${CHANGED_FILES} PHP files changed recently\"\nfi\n\nlog_message \"WordPress security scan completed\"\nEOF\n\nsudo chmod +x /usr/local/bin/wordpress-security-scan.sh\n\n# Schedule daily security scans\necho \"0 7 * * * root /usr/local/bin/wordpress-security-scan.sh\" | sudo tee -a /etc/crontab\n```\n\n## Troubleshooting (Cross-Platform)\n\n### Common Issues and Solutions\n```bash\n# Check web server status\nsudo systemctl status nginx    # or apache2/httpd\nsudo systemctl status php8.2-fpm\nsudo systemctl status mariadb\n\n# Test database connection\nmysql -u wpuser -p wordpress -e \"SELECT 1;\"\n\n# Check PHP-FPM logs\nsudo tail -f /var/log/php8.2-fpm.log\n\n# WordPress debug mode\ncd /var/www/html/example.com\nsudo -u www-data wp config set WP_DEBUG true --raw\nsudo -u www-data wp config set WP_DEBUG_LOG true --raw\nsudo tail -f /var/www/html/example.com/wp-content/debug.log\n\n# Check web server logs\nsudo tail -f /var/log/nginx/error.log          # NGINX\nsudo tail -f /var/log/apache2/error.log        # Apache\n\n# Clear all caches\nsudo -u www-data wp cache flush\nsudo -u www-data wp redis flush\nsudo -u www-data wp super-cache flush\n\n# Reset file permissions\nsudo /usr/local/bin/wordpress-permissions.sh\n\n# Database repair\nsudo -u www-data wp db repair\n\n# Plugin conflict troubleshooting\nsudo -u www-data wp plugin deactivate --all\nsudo -u www-data wp plugin activate plugin-name\n\n# Theme troubleshooting\nsudo -u www-data wp theme activate twentytwentyfour\n\n# Memory issues\nsudo -u www-data wp config set WP_MEMORY_LIMIT 1024M --raw\nfree -h\n\n# Check disk space\ndf -h /var/www/html/example.com\ndu -sh /var/www/html/example.com/wp-content/uploads/\n\n# SSL issues\nsudo certbot certificates\nsudo nginx -t  # or apache2ctl configtest\n\n# Performance debugging\nsudo -u www-data wp profile hook --all\nsudo -u www-data wp doctor check\n\n# Database optimization\nsudo -u www-data wp db optimize\n```\n\n### Advanced Debugging\n```bash\n# Enable WordPress debugging\nsudo -u www-data wp config set WP_DEBUG true --raw\nsudo -u www-data wp config set WP_DEBUG_LOG true --raw\nsudo -u www-data wp config set WP_DEBUG_DISPLAY false --raw\nsudo -u www-data wp config set SCRIPT_DEBUG true --raw\n\n# Query debugging\nsudo -u www-data wp config set SAVEQUERIES true --raw\n\n# Enable error logging\nsudo tee -a /etc/php/8.2/fpm/php.ini > /dev/null <<EOF\n; WordPress debugging\nlog_errors = On\nerror_log = /var/log/php/wordpress-errors.log\ndisplay_errors = Off\ndisplay_startup_errors = Off\nEOF\n\nsudo systemctl restart php8.2-fpm\n\n# Monitor real-time logs\ntail -f /var/www/html/example.com/wp-content/debug.log\ntail -f /var/log/php/wordpress-errors.log\ntail -f /var/log/nginx/error.log\n\n# Database query analysis\nsudo -u www-data wp db query \"SHOW FULL PROCESSLIST;\"\nsudo -u www-data wp db query \"SHOW STATUS LIKE 'Slow_queries';\"\n\n# Memory profiling\nsudo -u www-data wp eval 'echo \"Memory usage: \" . memory_get_usage(true) / 1024 / 1024 . \" MB\\n\";'\n\n# Plugin profiling\nsudo -u www-data wp plugin list --status=active\nsudo -u www-data wp eval 'foreach(get_option(\"active_plugins\") as $p) { echo $p . \"\\n\"; }'\n\n# Theme debugging\nsudo -u www-data wp theme status\nsudo -u www-data wp eval 'echo get_template_directory() . \"\\n\";'\n```\n\n## Additional Resources\n\n- [Official Documentation](https://wordpress.org/documentation/)\n- [WP-CLI Documentation](https://wp-cli.org/)\n- [WordPress Security Guide](https://wordpress.org/support/article/hardening-wordpress/)\n- [Performance Best Practices](https://wordpress.org/support/article/optimization/)\n- [WordPress Codex](https://codex.wordpress.org/)\n- [Security Plugin: Wordfence](https://www.wordfence.com/)\n\n---\n\n**Note:** This guide is part of the [HowToMgr](https://howtomgr.github.io) collection.","readmeHtml":"<h1 id=\"wordpress-installation-guide\" class=\"mobile-header\">WordPress Installation Guide</h1>\n<p class=\"mobile-paragraph\">World's most popular content management system (CMS) powering over 40% of websites globally. Complete guide for secure, high-performance WordPress deployment with modern stack configurations.</p>\n<h2 id=\"prerequisites\" class=\"mobile-header\">Prerequisites</h2>\n<li class=\"mobile-list-item\">Linux system (any modern distribution)</li>\n<li class=\"mobile-list-item\">2GB RAM minimum, 4GB+ recommended for production</li>\n<li class=\"mobile-list-item\">Web server (NGINX recommended, Apache supported)</li>\n<li class=\"mobile-list-item\">PHP 8.1+ (8.2+ recommended)</li>\n<li class=\"mobile-list-item\">MySQL 8.0+ or MariaDB 10.6+ </li>\n<li class=\"mobile-list-item\">SSL certificate for HTTPS</li>\n<li class=\"mobile-list-item\">Domain name for production deployment</li>\n<h2 id=\"installation-methods\" class=\"mobile-header\">Installation Methods</h2>\n<h3 id=\"lemp-stack-recommended-for-2024\" class=\"mobile-header\">LEMP Stack (Recommended for 2024)</h3>\n<p class=\"mobile-paragraph\">#### Ubuntu/Debian LEMP Setup</p>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Update system\nsudo apt update &amp;&amp; sudo apt upgrade -y\n\n# Install NGINX\nsudo apt install -y nginx\n\n# Install MySQL/MariaDB\nsudo apt install -y mariadb-server mariadb-client\n\n# Install PHP 8.2 and essential extensions\nsudo apt install -y php8.2-fpm php8.2-mysql php8.2-curl php8.2-gd php8.2-mbstring php8.2-xml php8.2-xmlrpc php8.2-soap php8.2-intl php8.2-zip php8.2-bcmath php8.2-imagick php8.2-cli php8.2-dev php8.2-imap php8.2-opcache\n\n# Install additional performance tools\nsudo apt install -y redis-server memcached unzip curl wget\n\n# Enable and start services\nsudo systemctl enable --now nginx mariadb php8.2-fpm redis-server\n\n# Secure MySQL installation\nsudo mysql_secure_installation\n\n# Configure firewall\nsudo ufw allow &#039;Nginx Full&#039;\nsudo ufw allow OpenSSH\nsudo ufw enable</code></pre>\n      </div>\n    </div>\n<p class=\"mobile-paragraph\">#### RHEL/CentOS/Rocky Linux LEMP Setup</p>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Install EPEL and Remi repositories\nsudo yum install -y epel-release\nsudo yum install -y https://rpms.remirepo.net/enterprise/remi-release-9.rpm\n\n# Enable PHP 8.2 repository\nsudo yum-config-manager --enable remi-php82\n\n# Install NGINX\nsudo yum install -y nginx\n\n# Install MariaDB\nsudo yum install -y mariadb-server mariadb\n\n# Install PHP and extensions\nsudo yum install -y php php-fpm php-mysql php-curl php-gd php-mbstring php-xml php-xmlrpc php-soap php-intl php-zip php-bcmath php-imagick php-opcache php-redis\n\n# Install Redis\nsudo yum install -y redis\n\n# Enable and start services\nsudo systemctl enable --now nginx mariadb php-fpm redis\n\n# Configure firewall\nsudo firewall-cmd --permanent --add-service=http\nsudo firewall-cmd --permanent --add-service=https\nsudo firewall-cmd --reload\n\n# Secure MySQL\nsudo mysql_secure_installation</code></pre>\n      </div>\n    </div>\n<p class=\"mobile-paragraph\">#### Fedora LEMP Setup</p>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Install NGINX, MariaDB, PHP, and Redis\nsudo dnf install -y nginx mariadb-server mariadb php php-fpm php-mysql php-curl php-gd php-mbstring php-xml php-xmlrpc php-soap php-intl php-zip php-opcache php-redis redis\n\n# Enable and start services\nsudo systemctl enable --now nginx mariadb php-fpm redis\n\n# Configure firewall\nsudo firewall-cmd --permanent --add-service=http\nsudo firewall-cmd --permanent --add-service=https\nsudo firewall-cmd --reload\n\n# Secure MySQL\nsudo mysql_secure_installation</code></pre>\n      </div>\n    </div>\n<h3 id=\"lamp-stack-alternative\" class=\"mobile-header\">LAMP Stack (Alternative)</h3>\n<p class=\"mobile-paragraph\">#### Ubuntu/Debian LAMP Setup</p>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Install Apache, MySQL, PHP\nsudo apt update\nsudo apt install -y apache2 mariadb-server php8.2 php8.2-mysql php8.2-curl php8.2-gd php8.2-mbstring php8.2-xml php8.2-xmlrpc php8.2-soap php8.2-intl php8.2-zip php8.2-opcache libapache2-mod-php8.2\n\n# Enable Apache modules\nsudo a2enmod rewrite ssl headers deflate expires\n\n# Enable and start services\nsudo systemctl enable --now apache2 mariadb\n\n# Configure firewall\nsudo ufw allow &#039;Apache Full&#039;\nsudo ufw enable\n\n# Secure MySQL\nsudo mysql_secure_installation</code></pre>\n      </div>\n    </div>\n<h3 id=\"database-setup-universal\" class=\"mobile-header\">Database Setup (Universal)</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Create WordPress database and user\nsudo mysql -u root -p &lt;&lt;EOF\nCREATE DATABASE wordpress DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;\nCREATE USER &#039;wpuser&#039;@&#039;localhost&#039; IDENTIFIED BY &#039;secure_wp_password_2024&#039;;\nGRANT ALL PRIVILEGES ON wordpress.* TO &#039;wpuser&#039;@&#039;localhost&#039;;\nFLUSH PRIVILEGES;\n\n-- Optimize MySQL for WordPress\nSET GLOBAL innodb_buffer_pool_size = 1073741824;  -- 1GB\nSET GLOBAL query_cache_size = 67108864;           -- 64MB\nSET GLOBAL query_cache_limit = 2097152;           -- 2MB\nEXIT\nEOF\n\n# Apply permanent MySQL optimizations\nsudo tee /etc/mysql/mysql.conf.d/wordpress.cnf &gt; /dev/null &lt;&lt;EOF\n[mysqld]\n# WordPress optimizations\ninnodb_buffer_pool_size = 1G\ninnodb_log_file_size = 256M\ninnodb_file_per_table = 1\ninnodb_flush_log_at_trx_commit = 2\ninnodb_flush_method = O_DIRECT\n\n# Query cache\nquery_cache_type = 1\nquery_cache_size = 64M\nquery_cache_limit = 2M\n\n# Connection optimization\nmax_connections = 200\nthread_cache_size = 100\ntable_open_cache = 4096\ntmp_table_size = 32M\nmax_heap_table_size = 32M\n\n# Slow query log\nslow_query_log = 1\nlong_query_time = 2\nslow_query_log_file = /var/log/mysql/slow.log\nEOF\n\nsudo systemctl restart mariadb</code></pre>\n      </div>\n    </div>\n<h2 id=\"wordpress-installation\" class=\"mobile-header\">WordPress Installation</h2>\n<h3 id=\"download-and-setup-wordpress\" class=\"mobile-header\">Download and Setup WordPress</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Download latest WordPress\ncd /tmp\nwget https://wordpress.org/latest.tar.gz\ntar xzf latest.tar.gz\n\n# Create web directory and copy files\nsudo mkdir -p /var/www/html/example.com\nsudo cp -R /tmp/wordpress/* /var/www/html/example.com/\n\n# Set proper ownership and permissions\n# For NGINX (Ubuntu/Debian)\nsudo chown -R www-data:www-data /var/www/html/example.com\n# For NGINX (RHEL/CentOS)\nsudo chown -R nginx:nginx /var/www/html/example.com\n# For Apache\nsudo chown -R www-data:www-data /var/www/html/example.com  # Ubuntu/Debian\nsudo chown -R apache:apache /var/www/html/example.com      # RHEL/CentOS\n\n# Secure file permissions\nsudo find /var/www/html/example.com/ -type d -exec chmod 755 {} \\;\nsudo find /var/www/html/example.com/ -type f -exec chmod 644 {} \\;\nsudo chmod 600 /var/www/html/example.com/wp-config.php\n\n# Create uploads directory with proper permissions\nsudo mkdir -p /var/www/html/example.com/wp-content/uploads\nsudo chmod 775 /var/www/html/example.com/wp-content/uploads</code></pre>\n      </div>\n    </div>\n<h3 id=\"secure-wordpress-configuration\" class=\"mobile-header\">Secure WordPress Configuration</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Create secure wp-config.php\ncd /var/www/html/example.com\nsudo cp wp-config-sample.php wp-config.php\n\n# Generate security keys\nSALT_KEYS=$(curl -s https://api.wordpress.org/secret-key/1.1/salt/)\n\n# Create wp-config.php with security hardening\nsudo tee wp-config.php &gt; /dev/null &lt;&lt;EOF\n&lt;?php\n/**\n * WordPress Configuration File - Security Hardened\n */\n\n// ** Database settings ** //\ndefine(&#039;DB_NAME&#039;, &#039;wordpress&#039;);\ndefine(&#039;DB_USER&#039;, &#039;wpuser&#039;);\ndefine(&#039;DB_PASSWORD&#039;, &#039;secure_wp_password_2024&#039;);\ndefine(&#039;DB_HOST&#039;, &#039;127.0.0.1&#039;);  // Use 127.0.0.1 instead of localhost\ndefine(&#039;DB_CHARSET&#039;, &#039;utf8mb4&#039;);\ndefine(&#039;DB_COLLATE&#039;, &#039;&#039;);\n\n// ** Authentication Unique Keys and Salts ** //\n${SALT_KEYS}\n\n// ** WordPress Database Table prefix ** //\n\\$table_prefix = &#039;wp_secure_&#039;;\n\n// ** Security hardening ** //\ndefine(&#039;WP_DEBUG&#039;, false);\ndefine(&#039;WP_DEBUG_LOG&#039;, false);\ndefine(&#039;WP_DEBUG_DISPLAY&#039;, false);\n\n// Disable file editing\ndefine(&#039;DISALLOW_FILE_EDIT&#039;, true);\ndefine(&#039;DISALLOW_FILE_MODS&#039;, true);\n\n// Force SSL\ndefine(&#039;FORCE_SSL_ADMIN&#039;, true);\n\n// Automatic updates\ndefine(&#039;WP_AUTO_UPDATE_CORE&#039;, &#039;minor&#039;);\ndefine(&#039;AUTOMATIC_UPDATER_DISABLED&#039;, false);\n\n// Memory limit\ndefine(&#039;WP_MEMORY_LIMIT&#039;, &#039;512M&#039;);\n\n// Multisite (if needed)\n// define(&#039;WP_ALLOW_MULTISITE&#039;, true);\n\n// Custom content directory (optional)\ndefine(&#039;WP_CONTENT_DIR&#039;, &#039;/var/www/html/example.com/wp-content&#039;);\ndefine(&#039;WP_CONTENT_URL&#039;, &#039;https://example.com/wp-content&#039;);\n\n// Database repair\ndefine(&#039;WP_ALLOW_REPAIR&#039;, false);\n\n// Cron optimization\ndefine(&#039;DISABLE_WP_CRON&#039;, true);  // Use system cron instead\n\n// Security headers\ndefine(&#039;COOKIE_DOMAIN&#039;, &#039;.example.com&#039;);\ndefine(&#039;COOKIEHASH&#039;, md5(&#039;example.com&#039;));\n\n// File permissions\ndefine(&#039;FS_CHMOD_DIR&#039;, (0755 &amp; ~ umask()));\ndefine(&#039;FS_CHMOD_FILE&#039;, (0644 &amp; ~ umask()));\n\n// Redis cache configuration\ndefine(&#039;WP_REDIS_HOST&#039;, &#039;127.0.0.1&#039;);\ndefine(&#039;WP_REDIS_PORT&#039;, 6379);\ndefine(&#039;WP_REDIS_DATABASE&#039;, 0);\ndefine(&#039;WP_REDIS_TIMEOUT&#039;, 1);\ndefine(&#039;WP_REDIS_READ_TIMEOUT&#039;, 1);\n\n// Rate limiting\ndefine(&#039;WP_POST_REVISIONS&#039;, 5);\ndefine(&#039;AUTOSAVE_INTERVAL&#039;, 300);  // 5 minutes\ndefine(&#039;EMPTY_TRASH_DAYS&#039;, 7);\n\n/* That&#039;s all, stop editing! */\nif (!defined(&#039;ABSPATH&#039;)) {\n    define(&#039;ABSPATH&#039;, dirname(__FILE__) . &#039;/&#039;);\n}\n\nrequire_once ABSPATH . &#039;wp-settings.php&#039;;\nEOF\n\nsudo chown www-data:www-data wp-config.php  # Adjust user as needed\nsudo chmod 600 wp-config.php</code></pre>\n      </div>\n    </div>\n<h2 id=\"web-server-configuration\" class=\"mobile-header\">Web Server Configuration</h2>\n<h3 id=\"nginx-configuration-recommended\" class=\"mobile-header\">NGINX Configuration (Recommended)</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Create optimized NGINX configuration for WordPress\nsudo tee /etc/nginx/sites-available/wordpress.conf &gt; /dev/null &lt;&lt;EOF\n# WordPress NGINX Configuration - 2024 Security Hardened\n\n# Rate limiting\nlimit_req_zone \\$binary_remote_addr zone=wp_login:10m rate=1r/s;\nlimit_req_zone \\$binary_remote_addr zone=wp_admin:10m rate=5r/m;\n\n# HTTP to HTTPS redirect\nserver {\n    listen 80;\n    listen [::]:80;\n    server_name example.com www.example.com;\n    return 301 https://example.com\\$request_uri;\n}\n\n# HTTPS Server\nserver {\n    listen 443 ssl http2;\n    listen [::]:443 ssl http2;\n    server_name example.com www.example.com;\n    root /var/www/html/example.com;\n    index index.php index.html index.htm;\n\n    # SSL Configuration (2024 best practices)\n    ssl_certificate /etc/letsencrypt/live/example.com/fullchain.pem;\n    ssl_certificate_key /etc/letsencrypt/live/example.com/privkey.pem;\n    ssl_trusted_certificate /etc/letsencrypt/live/example.com/chain.pem;\n    \n    ssl_protocols TLSv1.2 TLSv1.3;\n    ssl_ciphers ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384;\n    ssl_prefer_server_ciphers off;\n    ssl_session_cache shared:SSL:50m;\n    ssl_session_timeout 1d;\n    ssl_session_tickets off;\n\n    # Security headers (2024 standards)\n    add_header Strict-Transport-Security &quot;max-age=31536000; includeSubDomains; preload&quot; always;\n    add_header X-Frame-Options &quot;SAMEORIGIN&quot; always;\n    add_header X-Content-Type-Options &quot;nosniff&quot; always;\n    add_header X-XSS-Protection &quot;1; mode=block&quot; always;\n    add_header Referrer-Policy &quot;strict-origin-when-cross-origin&quot; always;\n    add_header Content-Security-Policy &quot;default-src &#039;self&#039;; script-src &#039;self&#039; &#039;unsafe-inline&#039; &#039;unsafe-eval&#039; *.googleapis.com *.gstatic.com; style-src &#039;self&#039; &#039;unsafe-inline&#039; *.googleapis.com; img-src &#039;self&#039; data: https:; font-src &#039;self&#039; data: *.gstatic.com; connect-src &#039;self&#039;; media-src &#039;self&#039;; object-src &#039;none&#039;; child-src &#039;self&#039;; form-action &#039;self&#039;; base-uri &#039;self&#039;;&quot; always;\n    add_header Permissions-Policy &quot;camera=(), microphone=(), geolocation=()&quot; always;\n\n    # Hide server information\n    server_tokens off;\n    more_set_headers &quot;Server: &quot;;\n\n    # Upload size limits\n    client_max_body_size 64M;\n\n    # FastCGI caching\n    set \\$skip_cache 0;\n    if (\\$request_method = POST) { set \\$skip_cache 1; }\n    if (\\$query_string != &quot;&quot;) { set \\$skip_cache 1; }\n    if (\\$request_uri ~* &quot;/wp-admin/|/xmlrpc.php|wp-.*.php|/feed/|index.php|sitemap(_index)?.xml&quot;) { set \\$skip_cache 1; }\n    if (\\$http_cookie ~* &quot;comment_author|wordpress_[a-f0-9]+|wp-postpass|wordpress_no_cache|wordpress_logged_in&quot;) { set \\$skip_cache 1; }\n\n    # Main location block\n    location / {\n        try_files \\$uri \\$uri/ /index.php?\\$args;\n    }\n\n    # WordPress-specific security rules\n    location ~ /\\. {\n        deny all;\n        access_log off;\n        log_not_found off;\n    }\n\n    # Protect wp-config.php\n    location ~* wp-config\\.php {\n        deny all;\n    }\n\n    # Disable execution of PHP in uploads\n    location ~* /(?:uploads|files)/.*\\.php\\$ {\n        deny all;\n    }\n\n    # Block access to sensitive files\n    location ~* \\.(htaccess|htpasswd|ini|log|sh|sql|conf|bak|backup|swp|tmp)\\$ {\n        deny all;\n    }\n\n    # WordPress: deny wp-content, wp-includes php files\n    location ~* ^/(wp-content|wp-includes)/.*\\.php\\$ {\n        deny all;\n    }\n\n    # WordPress: deny general stuff\n    location ~* ^/(readme|license|example|README|INSTALL|CHANGELOG)\\.(txt|md)\\$ {\n        deny all;\n    }\n\n    # Block WordPress brute force attacks\n    location ~* /(wp-login\\.php|wp-admin/).*\\$ {\n        limit_req zone=wp_login burst=1 nodelay;\n        limit_req zone=wp_admin burst=5 nodelay;\n        \n        # IP whitelist for admin (replace with your IPs)\n        # allow 192.168.1.100;\n        # allow 10.0.0.0/8;\n        # deny all;\n        \n        include snippets/fastcgi-php.conf;\n        fastcgi_pass unix:/var/run/php/php8.2-fpm.sock;\n    }\n\n    # PHP processing with caching\n    location ~ \\.php\\$ {\n        include snippets/fastcgi-php.conf;\n        fastcgi_pass unix:/var/run/php/php8.2-fpm.sock;\n        fastcgi_param SCRIPT_FILENAME \\$document_root\\$fastcgi_script_name;\n        include fastcgi_params;\n        \n        # FastCGI caching\n        fastcgi_cache_bypass \\$skip_cache;\n        fastcgi_no_cache \\$skip_cache;\n        fastcgi_cache WORDPRESS;\n        fastcgi_cache_valid 60m;\n        \n        # Security\n        fastcgi_hide_header X-Powered-By;\n    }\n\n    # Static assets optimization\n    location ~* \\.(js|css|png|jpg|jpeg|gif|ico|svg|woff|woff2|ttf|eot|webp|avif)\\$ {\n        expires 1y;\n        add_header Cache-Control &quot;public, immutable&quot;;\n        add_header Vary &quot;Accept-Encoding&quot;;\n        access_log off;\n        \n        # CORS for fonts\n        location ~* \\.(woff|woff2|ttf|eot)\\$ {\n            add_header Access-Control-Allow-Origin *;\n        }\n    }\n\n    # XML files (sitemaps, feeds)\n    location ~* \\.(xml|txt)\\$ {\n        expires 1h;\n        add_header Cache-Control &quot;public&quot;;\n    }\n\n    # Block xmlrpc.php\n    location = /xmlrpc.php {\n        deny all;\n        access_log off;\n        log_not_found off;\n    }\n\n    # WordPress REST API rate limiting\n    location ~* /wp-json/ {\n        limit_req zone=wp_admin burst=10 nodelay;\n        try_files \\$uri \\$uri/ /index.php?\\$args;\n    }\n\n    # Favicon and robots.txt\n    location = /favicon.ico {\n        log_not_found off;\n        access_log off;\n        expires 1y;\n    }\n\n    location = /robots.txt {\n        allow all;\n        log_not_found off;\n        access_log off;\n        expires 1h;\n    }\n\n    # Security.txt\n    location = /.well-known/security.txt {\n        return 301 \\$scheme://\\$server_name/.well-known/security.txt;\n    }\n}\n\n# WWW to non-WWW redirect\nserver {\n    listen 443 ssl http2;\n    listen [::]:443 ssl http2;\n    server_name www.example.com;\n    \n    ssl_certificate /etc/letsencrypt/live/example.com/fullchain.pem;\n    ssl_certificate_key /etc/letsencrypt/live/example.com/privkey.pem;\n    \n    return 301 https://example.com\\$request_uri;\n}\nEOF\n\n# Create FastCGI cache directory\nsudo mkdir -p /var/cache/nginx/wordpress\nsudo chown -R www-data:www-data /var/cache/nginx\n\n# Add FastCGI cache configuration\nsudo tee /etc/nginx/conf.d/fastcgi-cache.conf &gt; /dev/null &lt;&lt;EOF\n# FastCGI cache configuration for WordPress\nfastcgi_cache_path /var/cache/nginx/wordpress levels=1:2 keys_zone=WORDPRESS:100m inactive=60m;\nfastcgi_cache_key &quot;\\$scheme\\$request_method\\$host\\$request_uri&quot;;\nfastcgi_cache_use_stale error timeout invalid_header http_500;\nfastcgi_ignore_headers Cache-Control Expires Set-Cookie;\nEOF\n\n# Enable site and restart NGINX\nsudo ln -s /etc/nginx/sites-available/wordpress.conf /etc/nginx/sites-enabled/\nsudo nginx -t &amp;&amp; sudo systemctl restart nginx</code></pre>\n      </div>\n    </div>\n<h3 id=\"apache-configuration-alternative\" class=\"mobile-header\">Apache Configuration (Alternative)</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Create secure Apache virtual host\nsudo tee /etc/apache2/sites-available/wordpress.conf &gt; /dev/null &lt;&lt;EOF\n&lt;VirtualHost *:80&gt;\n    ServerName example.com\n    ServerAlias www.example.com\n    Redirect permanent / https://example.com/\n&lt;/VirtualHost&gt;\n\n&lt;VirtualHost *:443&gt;\n    ServerName example.com\n    ServerAlias www.example.com\n    DocumentRoot /var/www/html/example.com\n    \n    # SSL Configuration\n    SSLEngine on\n    SSLCertificateFile /etc/letsencrypt/live/example.com/fullchain.pem\n    SSLCertificateKeyFile /etc/letsencrypt/live/example.com/privkey.pem\n    SSLProtocol all -SSLv3 -TLSv1 -TLSv1.1\n    SSLCipherSuite ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256\n    SSLHonorCipherOrder off\n    \n    # Security headers\n    Header always set Strict-Transport-Security &quot;max-age=31536000; includeSubDomains; preload&quot;\n    Header always set X-Frame-Options &quot;SAMEORIGIN&quot;\n    Header always set X-Content-Type-Options &quot;nosniff&quot;\n    Header always set X-XSS-Protection &quot;1; mode=block&quot;\n    Header always set Referrer-Policy &quot;strict-origin-when-cross-origin&quot;\n    \n    # Hide server information\n    Header always unset Server\n    Header always unset X-Powered-By\n\n    &lt;Directory /var/www/html/example.com&gt;\n        Options -Indexes +FollowSymLinks\n        AllowOverride All\n        Require all granted\n        \n        # WordPress security\n        &lt;Files wp-config.php&gt;\n            Require all denied\n        &lt;/Files&gt;\n        \n        &lt;Files .htaccess&gt;\n            Require all denied\n        &lt;/Files&gt;\n        \n        &lt;Files readme.html&gt;\n            Require all denied\n        &lt;/Files&gt;\n        \n        &lt;Files license.txt&gt;\n            Require all denied\n        &lt;/Files&gt;\n    &lt;/Directory&gt;\n\n    # Disable execution in uploads\n    &lt;Directory /var/www/html/example.com/wp-content/uploads&gt;\n        &lt;Files &quot;*.php&quot;&gt;\n            Require all denied\n        &lt;/Files&gt;\n    &lt;/Directory&gt;\n\n    # Rate limiting with mod_evasive\n    &lt;IfModule mod_evasive24.c&gt;\n        DOSHashTableSize    1024\n        DOSPageCount        2\n        DOSSiteCount        50\n        DOSPageInterval     1\n        DOSSiteInterval     1\n        DOSBlockingPeriod   600\n        DOSEmailNotify      admin@example.com\n    &lt;/IfModule&gt;\n\n    # Compression\n    &lt;IfModule mod_deflate.c&gt;\n        SetOutputFilter DEFLATE\n        AddOutputFilterByType DEFLATE text/html text/css text/javascript text/xml text/plain application/javascript application/xml+rss application/xml application/x-javascript application/json\n        \n        # Don&#039;t compress images\n        SetEnvIfNoCase Request_URI \\.(?:gif|jpe?g|png|webp)$ no-gzip dont-vary\n        SetEnvIfNoCase Request_URI \\.(?:exe|t?gz|zip|bz2|sit|rar)$ no-gzip dont-vary\n    &lt;/IfModule&gt;\n\n    # Caching\n    &lt;IfModule mod_expires.c&gt;\n        ExpiresActive On\n        ExpiresByType image/jpg &quot;access plus 1 year&quot;\n        ExpiresByType image/jpeg &quot;access plus 1 year&quot;\n        ExpiresByType image/gif &quot;access plus 1 year&quot;\n        ExpiresByType image/png &quot;access plus 1 year&quot;\n        ExpiresByType image/webp &quot;access plus 1 year&quot;\n        ExpiresByType text/css &quot;access plus 1 month&quot;\n        ExpiresByType application/pdf &quot;access plus 1 month&quot;\n        ExpiresByType text/javascript &quot;access plus 1 month&quot;\n        ExpiresByType application/javascript &quot;access plus 1 month&quot;\n        ExpiresDefault &quot;access plus 1 week&quot;\n    &lt;/IfModule&gt;\n\n    ErrorLog \\${APACHE_LOG_DIR}/wordpress_error.log\n    CustomLog \\${APACHE_LOG_DIR}/wordpress_access.log combined\n&lt;/VirtualHost&gt;\nEOF\n\n# Enable modules and site\nsudo a2enmod ssl headers expires deflate rewrite\nsudo a2ensite wordpress.conf\nsudo a2dissite 000-default\nsudo systemctl restart apache2</code></pre>\n      </div>\n    </div>\n<h2 id=\"php-configuration-and-optimization\" class=\"mobile-header\">PHP Configuration and Optimization</h2>\n<h3 id=\"php-82-optimization\" class=\"mobile-header\">PHP 8.2 Optimization</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Configure PHP-FPM for optimal WordPress performance\nsudo tee /etc/php/8.2/fpm/pool.d/wordpress.conf &gt; /dev/null &lt;&lt;EOF\n[wordpress]\nuser = www-data\ngroup = www-data\nlisten = /var/run/php/php8.2-fpm-wordpress.sock\nlisten.owner = www-data\nlisten.group = www-data\nlisten.mode = 0660\n\n# Process management\npm = dynamic\npm.max_children = 50\npm.start_servers = 5\npm.min_spare_servers = 5\npm.max_spare_servers = 35\npm.max_requests = 1000\npm.process_idle_timeout = 10s\n\n# Resource limits\nphp_admin_value[memory_limit] = 512M\nphp_admin_value[upload_max_filesize] = 64M\nphp_admin_value[post_max_size] = 64M\nphp_admin_value[max_execution_time] = 300\nphp_admin_value[max_input_time] = 300\nphp_admin_value[max_input_vars] = 3000\n\n# Security settings\nphp_admin_flag[allow_url_fopen] = off\nphp_admin_flag[allow_url_include] = off\nphp_admin_flag[file_uploads] = on\nphp_admin_flag[expose_php] = off\nphp_admin_flag[log_errors] = on\nphp_admin_value[error_log] = /var/log/php/wordpress-error.log\n\n# OPcache settings\nphp_admin_flag[opcache.enable] = on\nphp_admin_value[opcache.memory_consumption] = 256\nphp_admin_value[opcache.interned_strings_buffer] = 16\nphp_admin_value[opcache.max_accelerated_files] = 10000\nphp_admin_value[opcache.revalidate_freq] = 2\nphp_admin_flag[opcache.save_comments] = on\nphp_admin_flag[opcache.fast_shutdown] = on\n\n# Session settings\nphp_admin_value[session.save_handler] = redis\nphp_admin_value[session.save_path] = &quot;tcp://127.0.0.1:6379&quot;\nphp_admin_value[session.gc_maxlifetime] = 1440\nEOF\n\n# Create PHP error log directory\nsudo mkdir -p /var/log/php\nsudo chown www-data:www-data /var/log/php\n\n# Configure main PHP settings\nsudo tee -a /etc/php/8.2/fpm/php.ini &gt; /dev/null &lt;&lt;EOF\n\n; WordPress optimizations\nmax_execution_time = 300\nmax_input_time = 300\nmemory_limit = 512M\nupload_max_filesize = 64M\npost_max_size = 64M\nmax_input_vars = 3000\n\n; Security\nexpose_php = Off\nallow_url_fopen = Off\nallow_url_include = Off\ndisplay_errors = Off\nlog_errors = On\nerror_log = /var/log/php/error.log\n\n; Session security\nsession.cookie_httponly = On\nsession.cookie_secure = On\nsession.use_strict_mode = On\n\n; OPcache\nopcache.enable = 1\nopcache.memory_consumption = 256\nopcache.interned_strings_buffer = 16\nopcache.max_accelerated_files = 10000\nopcache.revalidate_freq = 2\nopcache.save_comments = 1\nopcache.fast_shutdown = 1\nopcache.validate_timestamps = 0  ; Production only\n\n; Redis\nextension = redis\n\n; Date/time\ndate.timezone = &quot;America/New_York&quot;\nEOF\n\nsudo systemctl restart php8.2-fpm</code></pre>\n      </div>\n    </div>\n<h3 id=\"redis-object-caching-setup\" class=\"mobile-header\">Redis Object Caching Setup</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Configure Redis for WordPress\nsudo tee -a /etc/redis/redis.conf &gt; /dev/null &lt;&lt;EOF\n\n# WordPress optimizations\nmaxmemory 512mb\nmaxmemory-policy allkeys-lru\nsave 900 1\nsave 300 10\nsave 60 10000\n\n# Security\nbind 127.0.0.1\nprotected-mode yes\nport 6379\ntcp-backlog 511\n\n# Logging\nloglevel notice\nlogfile /var/log/redis/redis-server.log\n\n# Persistence\nrdbcompression yes\nrdbchecksum yes\nEOF\n\nsudo systemctl restart redis-server</code></pre>\n      </div>\n    </div>\n<h2 id=\"wordpress-cli-wp-cli-installation-and-configuration\" class=\"mobile-header\">WordPress CLI (WP-CLI) Installation and Configuration</h2>\n<h3 id=\"wp-cli-setup\" class=\"mobile-header\">WP-CLI Setup</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Download and install WP-CLI\ncurl -O https://raw.githubusercontent.com/wp-cli/builds/gh-pages/phar/wp-cli.phar\nchmod +x wp-cli.phar\nsudo mv wp-cli.phar /usr/local/bin/wp\n\n# Create WP-CLI configuration\nsudo tee /var/www/html/example.com/wp-cli.yml &gt; /dev/null &lt;&lt;EOF\n# WP-CLI configuration\npath: /var/www/html/example.com\n\ncore config:\n  dbhost: 127.0.0.1\n  dbname: wordpress\n  dbuser: wpuser\n  dbpass: secure_wp_password_2024\n  extra-php: |\n    define(&#039;WP_DEBUG&#039;, false);\n    define(&#039;WP_DEBUG_LOG&#039;, false);\n    define(&#039;DISALLOW_FILE_EDIT&#039;, true);\n    define(&#039;FORCE_SSL_ADMIN&#039;, true);\n    define(&#039;WP_REDIS_HOST&#039;, &#039;127.0.0.1&#039;);\n\nserver:\n  docroot: /var/www/html/example.com\nEOF\n\n# Install WordPress via WP-CLI\ncd /var/www/html/example.com\nsudo -u www-data wp core download --force\nsudo -u www-data wp config create \\\n  --dbname=wordpress \\\n  --dbuser=wpuser \\\n  --dbpass=secure_wp_password_2024 \\\n  --dbhost=127.0.0.1\n\nsudo -u www-data wp core install \\\n  --url=https://example.com \\\n  --title=&quot;Secure WordPress Site&quot; \\\n  --admin_user=admin \\\n  --admin_password=secure_admin_password_2024 \\\n  --admin_email=admin@example.com \\\n  --skip-email\n\n# Essential security plugins\nsudo -u www-data wp plugin install wordfence --activate\nsudo -u www-data wp plugin install redis-cache --activate\nsudo -u www-data wp plugin install wp-super-cache --activate\nsudo -u www-data wp plugin install updraftplus --activate\n\n# Performance plugins\nsudo -u www-data wp plugin install autoptimize --activate\nsudo -u www-data wp plugin install smush --activate\n\n# Enable Redis cache\nsudo -u www-data wp redis enable\n\n# Configure security settings\nsudo -u www-data wp config set FORCE_SSL_ADMIN true --raw\nsudo -u www-data wp config set DISALLOW_FILE_EDIT true --raw\nsudo -u www-data wp config set WP_AUTO_UPDATE_CORE minor --raw</code></pre>\n      </div>\n    </div>\n<h2 id=\"security-hardening\" class=\"mobile-header\">Security Hardening</h2>\n<h3 id=\"file-system-security\" class=\"mobile-header\">File System Security</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Create secure file permissions script\nsudo tee /usr/local/bin/wordpress-permissions.sh &gt; /dev/null &lt;&lt;&#039;EOF&#039;\n#!/bin/bash\nWP_PATH=&quot;/var/www/html/example.com&quot;\nWP_USER=&quot;www-data&quot;\nWP_GROUP=&quot;www-data&quot;\n\n# Set directory permissions\nfind ${WP_PATH}/ -type d -exec chmod 755 {} \\;\n\n# Set file permissions\nfind ${WP_PATH}/ -type f -exec chmod 644 {} \\;\n\n# Secure wp-config.php\nchmod 600 ${WP_PATH}/wp-config.php\n\n# Secure .htaccess\nif [ -f ${WP_PATH}/.htaccess ]; then\n    chmod 644 ${WP_PATH}/.htaccess\nfi\n\n# Set ownership\nchown -R ${WP_USER}:${WP_GROUP} ${WP_PATH}/\n\n# Secure directories\nchmod 755 ${WP_PATH}/wp-content/\nchmod 755 ${WP_PATH}/wp-content/themes/\nchmod 755 ${WP_PATH}/wp-content/plugins/\nchmod 775 ${WP_PATH}/wp-content/uploads/\n\n# Create .htaccess for uploads security (Apache)\ncat &gt; ${WP_PATH}/wp-content/uploads/.htaccess &lt;&lt;EOL\n# Disable PHP execution in uploads directory\n&lt;Files &quot;*.php&quot;&gt;\n    Order Deny,Allow\n    Deny from All\n&lt;/Files&gt;\n\n# Disable directory browsing\nOptions -Indexes\n\n# Deny access to sensitive files\n&lt;FilesMatch &quot;\\.(htaccess|htpasswd|ini|log|sh|inc|bak)$&quot;&gt;\n    Order Allow,Deny\n    Deny from all\n&lt;/FilesMatch&gt;\nEOL\n\necho &quot;WordPress file permissions have been secured&quot;\nEOF\n\nsudo chmod +x /usr/local/bin/wordpress-permissions.sh\nsudo /usr/local/bin/wordpress-permissions.sh</code></pre>\n      </div>\n    </div>\n<h3 id=\"wordpress-security-configuration\" class=\"mobile-header\">WordPress Security Configuration</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Create comprehensive .htaccess for security (Apache)\nsudo tee /var/www/html/example.com/.htaccess &gt; /dev/null &lt;&lt;EOF\n# WordPress Security .htaccess - 2024\n\n# Block access to wp-config.php\n&lt;Files wp-config.php&gt;\n    Order Allow,Deny\n    Deny from All\n&lt;/Files&gt;\n\n# Block access to readme.html, license.txt, etc.\n&lt;FilesMatch &quot;^(readme\\.html|license\\.txt|wp-config\\.php|\\.htaccess|\\.htpasswd)&quot;&gt;\n    Order Allow,Deny\n    Deny from All\n&lt;/FilesMatch&gt;\n\n# Prevent script injections\nOptions +FollowSymLinks\nRewriteEngine On\nRewriteCond %{QUERY_STRING} (&lt;|%3C).*script.*(&gt;|%3E) [NC,OR]\nRewriteCond %{QUERY_STRING} GLOBALS(=|[|%[0-9A-Z]{0,2}) [OR]\nRewriteCond %{QUERY_STRING} _REQUEST(=|[|%[0-9A-Z]{0,2}) [OR]\nRewriteCond %{QUERY_STRING} ^.*(\\[|\\]|\\(|\\)|&lt;|&gt;|Ãª|&quot;|;|\\?|\\*|\\$|=) [NC,OR]\nRewriteCond %{QUERY_STRING} (NULL|OUTFILE|LOAD_FILE) [OR]\nRewriteCond %{QUERY_STRING} (\\.{1,}/)+(motd|etc|bin) [NC,OR]\nRewriteCond %{QUERY_STRING} (localhost|loopback|127\\.0\\.0\\.1) [NC,OR]\nRewriteCond %{QUERY_STRING} (&lt;|&gt;|&#039;|%0A|%0D|%27|%3C|%3E|%00) [NC,OR]\nRewriteCond %{QUERY_STRING} concat[^\\(]*\\( [NC,OR]\nRewriteCond %{QUERY_STRING} union([^s]*s)+elect [NC,OR]\nRewriteCond %{QUERY_STRING} union([^a]*a)+ll([^s]*s)+elect [NC,OR]\nRewriteCond %{QUERY_STRING} \\-[sdcr].*(allow_url_include|allow_url_fopen|safe_mode|disable_functions|auto_prepend_file) [NC,OR]\nRewriteCond %{QUERY_STRING} (;|&lt;|&gt;|&#039;|&quot;|\\)|%0A|%0D|%22|%27|%3C|%3E|%00).*(/\\*|union|select|insert|drop|delete|update|cast|create|char|convert|alter|declare|or|;|\\)|script|\\&lt;|\\&gt;|\\&amp;|\\|\\|) [NC]\nRewriteRule ^(.*)$ index.php [F,L]\n\n# Block XML-RPC\n&lt;Files xmlrpc.php&gt;\n    Order Allow,Deny\n    Deny from All\n&lt;/Files&gt;\n\n# Limit login attempts\n&lt;FilesMatch &quot;wp-login.php&quot;&gt;\n    Order Allow,Deny\n    Allow from all\n    # Add your IP for admin access\n    # Allow from 192.168.1.100\n&lt;/FilesMatch&gt;\n\n# Disable directory browsing\nOptions -Indexes\n\n# Protect includes directory\n&lt;IfModule mod_rewrite.c&gt;\n    RewriteEngine On\n    RewriteRule ^wp-admin/includes/ - [F,L]\n    RewriteRule !^wp-includes/ - [S=3]\n    RewriteRule ^wp-includes/[^/]+\\.php$ - [F,L]\n    RewriteRule ^wp-includes/js/tinymce/langs/.+\\.php - [F,L]\n    RewriteRule ^wp-includes/theme-compat/ - [F,L]\n&lt;/IfModule&gt;\n\n# WordPress SEO\nRewriteRule ^index\\.php$ - [L]\nRewriteCond %{REQUEST_FILENAME} !-f\nRewriteCond %{REQUEST_FILENAME} !-d\nRewriteRule . /index.php [L]\n\n# Force HTTPS (if not using NGINX redirect)\n# RewriteCond %{HTTPS} !=on\n# RewriteRule ^(.*)$ https://%{HTTP_HOST}%{REQUEST_URI} [L,R=301]\n\n# Security headers (if mod_headers is enabled)\n&lt;IfModule mod_headers.c&gt;\n    Header always set Strict-Transport-Security &quot;max-age=31536000; includeSubDomains; preload&quot;\n    Header always set X-Frame-Options &quot;SAMEORIGIN&quot;\n    Header always set X-Content-Type-Options &quot;nosniff&quot;\n    Header always set X-XSS-Protection &quot;1; mode=block&quot;\n    Header always set Referrer-Policy &quot;strict-origin-when-cross-origin&quot;\n&lt;/IfModule&gt;\nEOF\n\nsudo chown www-data:www-data /var/www/html/example.com/.htaccess</code></pre>\n      </div>\n    </div>\n<h2 id=\"performance-optimization\" class=\"mobile-header\">Performance Optimization</h2>\n<h3 id=\"caching-strategy-implementation\" class=\"mobile-header\">Caching Strategy Implementation</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Install and configure Redis plugin\ncd /var/www/html/example.com\nsudo -u www-data wp plugin install redis-cache --activate\n\n# Configure Redis for WordPress\nsudo -u www-data wp config set WP_REDIS_HOST &#039;127.0.0.1&#039; --raw\nsudo -u www-data wp config set WP_REDIS_PORT 6379 --raw --type=integer\nsudo -u www-data wp config set WP_REDIS_DATABASE 0 --raw --type=integer\nsudo -u www-data wp config set WP_REDIS_TIMEOUT 1 --raw --type=integer\nsudo -u www-data wp config set WP_REDIS_READ_TIMEOUT 1 --raw --type=integer\n\n# Enable Redis object cache\nsudo -u www-data wp redis enable\n\n# Install and configure caching plugin\nsudo -u www-data wp plugin install w3-total-cache --activate\n\n# Configure W3 Total Cache via WP-CLI\nsudo -u www-data wp w3-total-cache option set pgcache.enabled true\nsudo -u www-data wp w3-total-cache option set dbcache.enabled true\nsudo -u www-data wp w3-total-cache option set objectcache.enabled true\nsudo -u www-data wp w3-total-cache option set browsercache.enabled true\n\n# Install performance optimization plugins\nsudo -u www-data wp plugin install autoptimize --activate\nsudo -u www-data wp plugin install smush --activate\nsudo -u www-data wp plugin install wp-rocket --activate  # Premium plugin</code></pre>\n      </div>\n    </div>\n<h3 id=\"database-optimization\" class=\"mobile-header\">Database Optimization</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Create database optimization script\nsudo tee /usr/local/bin/wordpress-db-optimize.sh &gt; /dev/null &lt;&lt;&#039;EOF&#039;\n#!/bin/bash\nWP_PATH=&quot;/var/www/html/example.com&quot;\nLOG_FILE=&quot;/var/log/wordpress-optimization.log&quot;\n\ncd ${WP_PATH}\n\nlog_message() {\n    echo &quot;$(date &#039;+%Y-%m-%d %H:%M:%S&#039;) - $1&quot; | tee -a ${LOG_FILE}\n}\n\nlog_message &quot;Starting WordPress database optimization...&quot;\n\n# Database cleanup\nsudo -u www-data wp transient delete --all --quiet\nsudo -u www-data wp db optimize --quiet\nsudo -u www-data wp db repair --quiet\n\n# Clean spam and trash\nsudo -u www-data wp comment delete $(sudo -u www-data wp comment list --status=spam --format=ids) --quiet\nsudo -u www-data wp post delete $(sudo -u www-data wp post list --post_status=trash --format=ids) --quiet\n\n# Optimize images\nif sudo -u www-data wp plugin is-installed smush; then\n    sudo -u www-data wp smush optimize --quiet\nfi\n\n# Clear caches\nif sudo -u www-data wp plugin is-installed w3-total-cache; then\n    sudo -u www-data wp w3-total-cache flush all --quiet\nfi\n\nif sudo -u www-data wp plugin is-installed wp-super-cache; then\n    sudo -u www-data wp super-cache flush --quiet\nfi\n\nif sudo -u www-data wp plugin is-installed redis-cache; then\n    sudo -u www-data wp redis flush --quiet\nfi\n\n# Update WordPress core and plugins\nsudo -u www-data wp core update --quiet\nsudo -u www-data wp plugin update --all --quiet\nsudo -u www-data wp theme update --all --quiet\n\nlog_message &quot;WordPress optimization completed&quot;\nEOF\n\nsudo chmod +x /usr/local/bin/wordpress-db-optimize.sh\n\n# Schedule weekly optimization\necho &quot;0 3 * * 0 root /usr/local/bin/wordpress-db-optimize.sh&quot; | sudo tee -a /etc/crontab</code></pre>\n      </div>\n    </div>\n<h3 id=\"cdn-integration\" class=\"mobile-header\">CDN Integration</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Configure Cloudflare integration\nsudo -u www-data wp plugin install cloudflare --activate\n\n# Configure CDN settings via WP-CLI\nsudo -u www-data wp option update cloudflare_api_key &quot;your_cloudflare_api_key&quot;\nsudo -u www-data wp option update cloudflare_email &quot;your_email@example.com&quot;\n\n# Install MaxCDN/StackPath plugin\nsudo -u www-data wp plugin install maxcdn --activate\n\n# Configure image optimization\nsudo -u www-data wp plugin install ewww-image-optimizer --activate\nsudo -u www-data wp option update ewww_image_optimizer_cloud_key &quot;your_api_key&quot;</code></pre>\n      </div>\n    </div>\n<h2 id=\"ssl-certificate-setup\" class=\"mobile-header\">SSL Certificate Setup</h2>\n<h3 id=\"lets-encrypt-ssl-configuration\" class=\"mobile-header\">Let's Encrypt SSL Configuration</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Install Certbot\nsudo apt install -y certbot python3-certbot-nginx  # NGINX\nsudo apt install -y certbot python3-certbot-apache # Apache\n\n# Obtain SSL certificate\nsudo certbot --nginx -d example.com -d www.example.com  # NGINX\nsudo certbot --apache -d example.com -d www.example.com # Apache\n\n# Configure automatic renewal\nsudo crontab -e\n# Add: 0 12 * * * /usr/bin/certbot renew --quiet &amp;&amp; systemctl reload nginx\n\n# Test renewal\nsudo certbot renew --dry-run\n\n# Update WordPress URLs to HTTPS\ncd /var/www/html/example.com\nsudo -u www-data wp search-replace &quot;http://example.com&quot; &quot;https://example.com&quot; --dry-run\nsudo -u www-data wp search-replace &quot;http://example.com&quot; &quot;https://example.com&quot;\nsudo -u www-data wp option update home &quot;https://example.com&quot;\nsudo -u www-data wp option update siteurl &quot;https://example.com&quot;</code></pre>\n      </div>\n    </div>\n<h2 id=\"backup-and-security\" class=\"mobile-header\">Backup and Security</h2>\n<h3 id=\"comprehensive-backup-strategy\" class=\"mobile-header\">Comprehensive Backup Strategy</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\">sudo tee /usr/local/bin/wordpress-backup.sh &gt; /dev/null &lt;&lt;&#039;EOF&#039;\n#!/bin/bash\nBACKUP_DIR=&quot;/backup/wordpress&quot;\nWP_PATH=&quot;/var/www/html/example.com&quot;\nDATE=$(date +%Y%m%d_%H%M%S)\n\nmkdir -p ${BACKUP_DIR}/{files,database,configs}\n\ncd ${WP_PATH}\n\n# Database backup via WP-CLI\nsudo -u www-data wp db export ${BACKUP_DIR}/database/wordpress-${DATE}.sql --quiet\ngzip ${BACKUP_DIR}/database/wordpress-${DATE}.sql\n\n# Files backup (exclude cache and temp files)\ntar --exclude=&#039;${WP_PATH}/wp-content/cache&#039; \\\n    --exclude=&#039;${WP_PATH}/wp-content/uploads/cache&#039; \\\n    --exclude=&#039;${WP_PATH}/wp-content/w3tc-config&#039; \\\n    --exclude=&#039;${WP_PATH}/.htaccess.bak*&#039; \\\n    -czf ${BACKUP_DIR}/files/wordpress-files-${DATE}.tar.gz \\\n    -C /var/www/html example.com\n\n# Configuration backup\ntar -czf ${BACKUP_DIR}/configs/wordpress-config-${DATE}.tar.gz \\\n    /etc/nginx/sites-available/wordpress.conf \\\n    /etc/php/8.2/fpm/pool.d/wordpress.conf \\\n    /etc/mysql/mysql.conf.d/wordpress.cnf \\\n    /etc/redis/redis.conf\n\n# Upload to cloud storage\naws s3 cp ${BACKUP_DIR}/ s3://wordpress-backups/ --recursive\naz storage blob upload-batch --source ${BACKUP_DIR} --destination wordpress-backups\ngsutil cp -r ${BACKUP_DIR}/* gs://wordpress-backups/\n\n# Keep only last 14 backups locally\nfind ${BACKUP_DIR} -name &quot;wordpress-*&quot; -type f -mtime +14 -delete\n\n# Test backup integrity\nif [ -f ${BACKUP_DIR}/database/wordpress-${DATE}.sql.gz ]; then\n    zcat ${BACKUP_DIR}/database/wordpress-${DATE}.sql.gz | head -10 &gt;/dev/null\n    if [ $? -eq 0 ]; then\n        echo &quot;âœ“ Database backup integrity verified&quot;\n    else\n        echo &quot;âœ— Database backup may be corrupted&quot;\n    fi\nfi\n\necho &quot;WordPress backup completed: ${DATE}&quot;\nEOF\n\nsudo chmod +x /usr/local/bin/wordpress-backup.sh\n\n# Schedule daily backups\necho &quot;0 2 * * * root /usr/local/bin/wordpress-backup.sh&quot; | sudo tee -a /etc/crontab</code></pre>\n      </div>\n    </div>\n<h3 id=\"security-monitoring-and-hardening\" class=\"mobile-header\">Security Monitoring and Hardening</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Create security monitoring script\nsudo tee /usr/local/bin/wordpress-security-check.sh &gt; /dev/null &lt;&lt;&#039;EOF&#039;\n#!/bin/bash\nWP_PATH=&quot;/var/www/html/example.com&quot;\nSECURITY_LOG=&quot;/var/log/wordpress-security.log&quot;\n\ncd ${WP_PATH}\n\nlog_message() {\n    echo &quot;$(date &#039;+%Y-%m-%d %H:%M:%S&#039;) - $1&quot; | tee -a ${SECURITY_LOG}\n}\n\n# Check for malware\nif command -v clamscan &gt;/dev/null 2&gt;&amp;1; then\n    log_message &quot;Running malware scan...&quot;\n    clamscan -r ${WP_PATH} --infected --remove --quiet\n    if [ $? -eq 0 ]; then\n        log_message &quot;âœ“ No malware detected&quot;\n    else\n        log_message &quot;âš  Malware detected and removed&quot;\n    fi\nfi\n\n# Check file integrity\nlog_message &quot;Checking WordPress core file integrity...&quot;\nCORE_INTEGRITY=$(sudo -u www-data wp core verify-checksums --quiet 2&gt;&amp;1)\nif [ $? -eq 0 ]; then\n    log_message &quot;âœ“ WordPress core files are intact&quot;\nelse\n    log_message &quot;âš  WordPress core file integrity issues: ${CORE_INTEGRITY}&quot;\nfi\n\n# Check for vulnerable plugins\nlog_message &quot;Checking for vulnerable plugins...&quot;\nVULN_PLUGINS=$(sudo -u www-data wp vuln plugin-status 2&gt;/dev/null | grep &quot;vulnerable&quot; | wc -l)\nif [ ${VULN_PLUGINS} -eq 0 ]; then\n    log_message &quot;âœ“ No vulnerable plugins detected&quot;\nelse\n    log_message &quot;âš  ${VULN_PLUGINS} vulnerable plugins found&quot;\nfi\n\n# Check user accounts\nADMIN_COUNT=$(sudo -u www-data wp user list --role=administrator --format=count)\nlog_message &quot;â„¹ ${ADMIN_COUNT} administrator accounts found&quot;\n\n# Check for suspicious uploads\nSUSPICIOUS_FILES=$(find ${WP_PATH}/wp-content/uploads -name &quot;*.php&quot; -o -name &quot;*.js&quot; -o -name &quot;*.exe&quot; 2&gt;/dev/null | wc -l)\nif [ ${SUSPICIOUS_FILES} -gt 0 ]; then\n    log_message &quot;âš  ${SUSPICIOUS_FILES} suspicious files found in uploads directory&quot;\n    find ${WP_PATH}/wp-content/uploads -name &quot;*.php&quot; -o -name &quot;*.js&quot; -o -name &quot;*.exe&quot; 2&gt;/dev/null &gt;&gt; ${SECURITY_LOG}\nfi\n\n# Check file permissions\nWRITABLE_FILES=$(find ${WP_PATH} -type f -perm 777 2&gt;/dev/null | wc -l)\nif [ ${WRITABLE_FILES} -gt 0 ]; then\n    log_message &quot;âš  ${WRITABLE_FILES} files are world-writable&quot;\nfi\n\n# Check .htaccess integrity\nif [ -f ${WP_PATH}/.htaccess ]; then\n    HTACCESS_SIZE=$(stat -c%s ${WP_PATH}/.htaccess)\n    if [ ${HTACCESS_SIZE} -lt 100 ]; then\n        log_message &quot;âš  .htaccess file may be compromised or empty&quot;\n    fi\nfi\n\n# Check for brute force attempts\nFAILED_LOGINS=$(grep &quot;authentication failure&quot; /var/log/auth.log | grep -c &quot;$(date +&#039;%b %d&#039;)&quot;)\nif [ ${FAILED_LOGINS} -gt 10 ]; then\n    log_message &quot;âš  ${FAILED_LOGINS} failed login attempts detected today&quot;\nfi\n\nlog_message &quot;Security check completed&quot;\nEOF\n\nsudo chmod +x /usr/local/bin/wordpress-security-check.sh\n\n# Schedule daily security checks\necho &quot;0 6 * * * root /usr/local/bin/wordpress-security-check.sh&quot; | sudo tee -a /etc/crontab</code></pre>\n      </div>\n    </div>\n<h3 id=\"fail2ban-wordpress-protection\" class=\"mobile-header\">Fail2Ban WordPress Protection</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Install Fail2Ban\nsudo apt install -y fail2ban  # Ubuntu/Debian\nsudo yum install -y fail2ban  # RHEL/CentOS\n\n# Create WordPress filter\nsudo tee /etc/fail2ban/filter.d/wordpress.conf &gt; /dev/null &lt;&lt;EOF\n[Definition]\nfailregex = ^&lt;HOST&gt;.*POST.*(wp-login\\.php|xmlrpc\\.php).* 200\n            ^&lt;HOST&gt;.*POST.*wp-login\\.php.* 404\n            ^&lt;HOST&gt;.*GET.*wp-admin.* 403\n            ^&lt;HOST&gt;.*POST.*wp-comments-post\\.php.* 403\n\nignoreregex = ^&lt;HOST&gt;.*POST.*wp-login\\.php.*200.*admin\nEOF\n\n# Configure WordPress jail\nsudo tee /etc/fail2ban/jail.d/wordpress.conf &gt; /dev/null &lt;&lt;EOF\n[wordpress]\nenabled = true\nport = http,https\nfilter = wordpress\nlogpath = /var/log/nginx/access.log\nmaxretry = 3\nfindtime = 600\nbantime = 3600\naction = iptables-multiport[name=WordPress, port=&quot;http,https&quot;, protocol=tcp]\n\n[wordpress-xmlrpc]\nenabled = true\nport = http,https\nfilter = wordpress\nlogpath = /var/log/nginx/access.log\nmaxretry = 1\nfindtime = 300\nbantime = 86400\naction = iptables-multiport[name=WordPress-XMLRPC, port=&quot;http,https&quot;, protocol=tcp]\nEOF\n\nsudo systemctl restart fail2ban</code></pre>\n      </div>\n    </div>\n<h2 id=\"monitoring-and-maintenance\" class=\"mobile-header\">Monitoring and Maintenance</h2>\n<h3 id=\"wordpress-health-monitoring\" class=\"mobile-header\">WordPress Health Monitoring</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\">sudo tee /usr/local/bin/wordpress-health-check.sh &gt; /dev/null &lt;&lt;&#039;EOF&#039;\n#!/bin/bash\nWP_PATH=&quot;/var/www/html/example.com&quot;\nHEALTH_LOG=&quot;/var/log/wordpress-health.log&quot;\n\ncd ${WP_PATH}\n\nlog_message() {\n    echo &quot;$(date &#039;+%Y-%m-%d %H:%M:%S&#039;) - $1&quot; | tee -a ${HEALTH_LOG}\n}\n\n# Check web server status\nWEB_SERVER=&quot;nginx&quot;\nif command -v apache2 &gt;/dev/null 2&gt;&amp;1; then\n    WEB_SERVER=&quot;apache2&quot;\nelif command -v httpd &gt;/dev/null 2&gt;&amp;1; then\n    WEB_SERVER=&quot;httpd&quot;\nfi\n\nif systemctl is-active ${WEB_SERVER} &gt;/dev/null 2&gt;&amp;1; then\n    log_message &quot;âœ“ ${WEB_SERVER} is running&quot;\nelse\n    log_message &quot;âœ— ${WEB_SERVER} is not running&quot;\n    exit 1\nfi\n\n# Check database connectivity\nif sudo -u www-data wp db check --quiet &gt;/dev/null 2&gt;&amp;1; then\n    log_message &quot;âœ“ Database connection is healthy&quot;\nelse\n    log_message &quot;âœ— Database connection issues&quot;\nfi\n\n# Check WordPress status\nWP_VERSION=$(sudo -u www-data wp core version --quiet)\nlog_message &quot;â„¹ WordPress version: ${WP_VERSION}&quot;\n\n# Check for updates\nCORE_UPDATES=$(sudo -u www-data wp core check-update --format=count --quiet)\nPLUGIN_UPDATES=$(sudo -u www-data wp plugin list --update=available --format=count --quiet)\nTHEME_UPDATES=$(sudo -u www-data wp theme list --update=available --format=count --quiet)\n\nlog_message &quot;â„¹ Updates available - Core: ${CORE_UPDATES}, Plugins: ${PLUGIN_UPDATES}, Themes: ${THEME_UPDATES}&quot;\n\n# Check Redis cache\nif sudo -u www-data wp redis status &gt;/dev/null 2&gt;&amp;1; then\n    log_message &quot;âœ“ Redis object cache is working&quot;\nelse\n    log_message &quot;âš  Redis object cache issues&quot;\nfi\n\n# Check disk space\nDISK_USAGE=$(df ${WP_PATH} | awk &#039;NR==2 {print $5}&#039; | sed &#039;s/%//&#039;)\nif [ ${DISK_USAGE} -gt 85 ]; then\n    log_message &quot;âš  Disk usage is ${DISK_USAGE}%&quot;\nelse\n    log_message &quot;âœ“ Disk usage is ${DISK_USAGE}%&quot;\nfi\n\n# Check file permissions\nWRITABLE_WP_CONFIG=$([ -w ${WP_PATH}/wp-config.php ] &amp;&amp; echo &quot;1&quot; || echo &quot;0&quot;)\nif [ ${WRITABLE_WP_CONFIG} -eq 1 ]; then\n    log_message &quot;âš  wp-config.php is writable - security risk&quot;\nelse\n    log_message &quot;âœ“ wp-config.php permissions are secure&quot;\nfi\n\n# Check SSL certificate\nSSL_EXPIRY=$(echo | openssl s_client -servername example.com -connect example.com:443 2&gt;/dev/null | openssl x509 -noout -dates | grep notAfter | cut -d= -f2)\nSSL_EXPIRY_EPOCH=$(date -d &quot;$SSL_EXPIRY&quot; +%s)\nCURRENT_EPOCH=$(date +%s)\nDAYS_TO_SSL_EXPIRY=$(( (SSL_EXPIRY_EPOCH - CURRENT_EPOCH) / 86400 ))\n\nif [ ${DAYS_TO_SSL_EXPIRY} -lt 30 ]; then\n    log_message &quot;âš  SSL certificate expires in ${DAYS_TO_SSL_EXPIRY} days&quot;\nelse\n    log_message &quot;âœ“ SSL certificate expires in ${DAYS_TO_SSL_EXPIRY} days&quot;\nfi\n\n# Check website accessibility\nHTTP_STATUS=$(curl -s -o /dev/null -w &quot;%{http_code}&quot; https://example.com)\nif [ &quot;${HTTP_STATUS}&quot; = &quot;200&quot; ]; then\n    log_message &quot;âœ“ Website is accessible (HTTP ${HTTP_STATUS})&quot;\nelse\n    log_message &quot;âœ— Website accessibility issues (HTTP ${HTTP_STATUS})&quot;\nfi\n\nlog_message &quot;WordPress health check completed&quot;\nEOF\n\nsudo chmod +x /usr/local/bin/wordpress-health-check.sh\n\n# Schedule health checks every 30 minutes\necho &quot;*/30 * * * * root /usr/local/bin/wordpress-health-check.sh&quot; | sudo tee -a /etc/crontab</code></pre>\n      </div>\n    </div>\n<h3 id=\"wordpress-security-scanning\" class=\"mobile-header\">WordPress Security Scanning</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Install WP-CLI vulnerability scanner\nsudo -u www-data wp package install wp-cli/doctor-command\n\n# Create comprehensive security scan script\nsudo tee /usr/local/bin/wordpress-security-scan.sh &gt; /dev/null &lt;&lt;&#039;EOF&#039;\n#!/bin/bash\nWP_PATH=&quot;/var/www/html/example.com&quot;\nSCAN_LOG=&quot;/var/log/wordpress-security-scan.log&quot;\nDATE=$(date +%Y%m%d_%H%M%S)\n\ncd ${WP_PATH}\n\nlog_message() {\n    echo &quot;$(date &#039;+%Y-%m-%d %H:%M:%S&#039;) - $1&quot; | tee -a ${SCAN_LOG}\n}\n\nlog_message &quot;Starting WordPress security scan...&quot;\n\n# Check WordPress version\nWP_VERSION=$(sudo -u www-data wp core version --quiet)\nLATEST_VERSION=$(sudo -u www-data wp core check-update --format=csv --quiet | tail -1 | cut -d, -f2)\n\nif [ &quot;${WP_VERSION}&quot; != &quot;${LATEST_VERSION}&quot; ] &amp;&amp; [ -n &quot;${LATEST_VERSION}&quot; ]; then\n    log_message &quot;âš  WordPress is outdated (${WP_VERSION}), latest is ${LATEST_VERSION}&quot;\nelse\n    log_message &quot;âœ“ WordPress is up to date (${WP_VERSION})&quot;\nfi\n\n# Check for vulnerable plugins\nsudo -u www-data wp plugin list --format=json &gt; /tmp/wp-plugins-${DATE}.json\nwhile read -r plugin; do\n    plugin_name=$(echo $plugin | jq -r .name)\n    plugin_version=$(echo $plugin | jq -r .version)\n    plugin_update=$(echo $plugin | jq -r .update)\n    \n    if [ &quot;$plugin_update&quot; != &quot;none&quot; ] &amp;&amp; [ &quot;$plugin_update&quot; != &quot;null&quot; ]; then\n        log_message &quot;âš  Plugin update available: ${plugin_name} (${plugin_version})&quot;\n    fi\ndone &lt; &lt;(jq -c &#039;.[]&#039; /tmp/wp-plugins-${DATE}.json)\n\n# Check theme security\nACTIVE_THEME=$(sudo -u www-data wp theme status --format=json | jq -r &#039;.[] | select(.status==&quot;Active&quot;) | .name&#039;)\nlog_message &quot;â„¹ Active theme: ${ACTIVE_THEME}&quot;\n\n# Check user accounts\nUSERS_WITH_ADMIN=$(sudo -u www-data wp user list --role=administrator --format=count --quiet)\nlog_message &quot;â„¹ ${USERS_WITH_ADMIN} administrator accounts&quot;\n\n# Check for inactive plugins\nINACTIVE_PLUGINS=$(sudo -u www-data wp plugin list --status=inactive --format=count --quiet)\nif [ ${INACTIVE_PLUGINS} -gt 0 ]; then\n    log_message &quot;â„¹ ${INACTIVE_PLUGINS} inactive plugins (consider removing)&quot;\nfi\n\n# Check database integrity\nif sudo -u www-data wp db check --quiet &gt;/dev/null 2&gt;&amp;1; then\n    log_message &quot;âœ“ Database integrity check passed&quot;\nelse\n    log_message &quot;âš  Database integrity issues detected&quot;\nfi\n\n# Check for spam content\nSPAM_COMMENTS=$(sudo -u www-data wp comment list --status=spam --format=count --quiet)\nif [ ${SPAM_COMMENTS} -gt 0 ]; then\n    log_message &quot;â„¹ ${SPAM_COMMENTS} spam comments detected&quot;\nfi\n\n# Run Wordfence scan (if installed)\nif sudo -u www-data wp plugin is-installed wordfence; then\n    log_message &quot;Running Wordfence security scan...&quot;\n    # Note: Wordfence CLI scanning requires premium\nfi\n\n# Check file changes (basic integrity)\nfind ${WP_PATH} -name &quot;*.php&quot; -newer ${WP_PATH}/wp-config.php | wc -l &gt; /tmp/changed_files_count\nCHANGED_FILES=$(cat /tmp/changed_files_count)\nif [ ${CHANGED_FILES} -gt 5 ]; then\n    log_message &quot;âš  ${CHANGED_FILES} PHP files changed recently&quot;\nfi\n\nlog_message &quot;WordPress security scan completed&quot;\nEOF\n\nsudo chmod +x /usr/local/bin/wordpress-security-scan.sh\n\n# Schedule daily security scans\necho &quot;0 7 * * * root /usr/local/bin/wordpress-security-scan.sh&quot; | sudo tee -a /etc/crontab</code></pre>\n      </div>\n    </div>\n<h2 id=\"troubleshooting-cross-platform\" class=\"mobile-header\">Troubleshooting (Cross-Platform)</h2>\n<h3 id=\"common-issues-and-solutions\" class=\"mobile-header\">Common Issues and Solutions</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Check web server status\nsudo systemctl status nginx    # or apache2/httpd\nsudo systemctl status php8.2-fpm\nsudo systemctl status mariadb\n\n# Test database connection\nmysql -u wpuser -p wordpress -e &quot;SELECT 1;&quot;\n\n# Check PHP-FPM logs\nsudo tail -f /var/log/php8.2-fpm.log\n\n# WordPress debug mode\ncd /var/www/html/example.com\nsudo -u www-data wp config set WP_DEBUG true --raw\nsudo -u www-data wp config set WP_DEBUG_LOG true --raw\nsudo tail -f /var/www/html/example.com/wp-content/debug.log\n\n# Check web server logs\nsudo tail -f /var/log/nginx/error.log          # NGINX\nsudo tail -f /var/log/apache2/error.log        # Apache\n\n# Clear all caches\nsudo -u www-data wp cache flush\nsudo -u www-data wp redis flush\nsudo -u www-data wp super-cache flush\n\n# Reset file permissions\nsudo /usr/local/bin/wordpress-permissions.sh\n\n# Database repair\nsudo -u www-data wp db repair\n\n# Plugin conflict troubleshooting\nsudo -u www-data wp plugin deactivate --all\nsudo -u www-data wp plugin activate plugin-name\n\n# Theme troubleshooting\nsudo -u www-data wp theme activate twentytwentyfour\n\n# Memory issues\nsudo -u www-data wp config set WP_MEMORY_LIMIT 1024M --raw\nfree -h\n\n# Check disk space\ndf -h /var/www/html/example.com\ndu -sh /var/www/html/example.com/wp-content/uploads/\n\n# SSL issues\nsudo certbot certificates\nsudo nginx -t  # or apache2ctl configtest\n\n# Performance debugging\nsudo -u www-data wp profile hook --all\nsudo -u www-data wp doctor check\n\n# Database optimization\nsudo -u www-data wp db optimize</code></pre>\n      </div>\n    </div>\n<h3 id=\"advanced-debugging\" class=\"mobile-header\">Advanced Debugging</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Enable WordPress debugging\nsudo -u www-data wp config set WP_DEBUG true --raw\nsudo -u www-data wp config set WP_DEBUG_LOG true --raw\nsudo -u www-data wp config set WP_DEBUG_DISPLAY false --raw\nsudo -u www-data wp config set SCRIPT_DEBUG true --raw\n\n# Query debugging\nsudo -u www-data wp config set SAVEQUERIES true --raw\n\n# Enable error logging\nsudo tee -a /etc/php/8.2/fpm/php.ini &gt; /dev/null &lt;&lt;EOF\n; WordPress debugging\nlog_errors = On\nerror_log = /var/log/php/wordpress-errors.log\ndisplay_errors = Off\ndisplay_startup_errors = Off\nEOF\n\nsudo systemctl restart php8.2-fpm\n\n# Monitor real-time logs\ntail -f /var/www/html/example.com/wp-content/debug.log\ntail -f /var/log/php/wordpress-errors.log\ntail -f /var/log/nginx/error.log\n\n# Database query analysis\nsudo -u www-data wp db query &quot;SHOW FULL PROCESSLIST;&quot;\nsudo -u www-data wp db query &quot;SHOW STATUS LIKE &#039;Slow_queries&#039;;&quot;\n\n# Memory profiling\nsudo -u www-data wp eval &#039;echo &quot;Memory usage: &quot; . memory_get_usage(true) / 1024 / 1024 . &quot; MB\\n&quot;;&#039;\n\n# Plugin profiling\nsudo -u www-data wp plugin list --status=active\nsudo -u www-data wp eval &#039;foreach(get_option(&quot;active_plugins&quot;) as $p) { echo $p . &quot;\\n&quot;; }&#039;\n\n# Theme debugging\nsudo -u www-data wp theme status\nsudo -u www-data wp eval &#039;echo get_template_directory() . &quot;\\n&quot;;&#039;</code></pre>\n      </div>\n    </div>\n<h2 id=\"additional-resources\" class=\"mobile-header\">Additional Resources</h2>\n<li class=\"mobile-list-item\"><a href=\"https://wordpress.org/documentation/\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">Official Documentation</a></li>\n<li class=\"mobile-list-item\"><a href=\"https://wp-cli.org/\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">WP-CLI Documentation</a></li>\n<li class=\"mobile-list-item\"><a href=\"https://wordpress.org/support/article/hardening-wordpress/\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">WordPress Security Guide</a></li>\n<li class=\"mobile-list-item\"><a href=\"https://wordpress.org/support/article/optimization/\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">Performance Best Practices</a></li>\n<li class=\"mobile-list-item\"><a href=\"https://codex.wordpress.org/\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">WordPress Codex</a></li>\n<li class=\"mobile-list-item\"><a href=\"https://www.wordfence.com/\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">Security Plugin: Wordfence</a></li>\n<p class=\"mobile-paragraph\">---</p>\n<p class=\"mobile-paragraph\"><strong>Note:</strong> This guide is part of the <a href=\"https://howtomgr.github.io\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">HowToMgr</a> collection.</p>","readTime":"27 min","wordCount":5295,"lastBuilt":"2025-09-14T18:12:00.591Z"},{"name":"xen-orchestra","displayName":"Xen Orchestra","slug":"xen-orchestra","description":"Repo for xen-orchestra","category":"infrastructure","language":null,"stars":0,"forks":0,"topics":[],"githubUrl":"https://github.com/howtomgr/xen-orchestra","updatedAt":"2025-09-08T03:18:43Z","createdAt":"2023-08-28T03:50:35Z","readmeRaw":"# xen-orchestra - CentOS\n\n```bash\ncurl --silent --location https://rpm.nodesource.com/setup_8.x | sudo bash -\ncurl --silent --location https://dl.yarnpkg.com/rpm/yarn.repo | sudo tee /etc/yum.repos.d/yarn.repo\n\nyum groupinstall 'Development Tools'\nyum -y install epel-release gcc gcc-c++ automake libpng-devel git python redis nodejs yarn\nsystemctl enable --now redis\n\ngit clone -b master http://github.com/vatesfr/xen-orchestra\nyarn\nyarn build\ncd packages/xo-server\ncp sample.config.yaml .xo-server.yaml\nvi .xo-server.yaml # mounts: '/': '../xo-web/dist/'\nyarn start \n```\n\n## xen-orchestra - Debian\n\n```bash\ncurl -sL https://deb.nodesource.com/setup_8.x | sudo -E bash -\ncurl -sS https://dl.yarnpkg.com/debian/pubkey.gpg | sudo apt-key add -\necho \"deb https://dl.yarnpkg.com/debian/ stable main\" | sudo tee /etc/apt/sources.list.d/yarn.list\nsudo apt update\nsudo apt-get install -y nodejs yarn build-essential redis-server libpng-dev git python-minimal libvhdi-utils lvm2\n\ngit clone -b master http://github.com/vatesfr/xen-orchestra\ncd xen-orchestra\nyarn\nyarn build\ncd packages/xo-server\ncp sample.config.yaml .xo-server.yaml\nvi .xo-server.yaml # mounts: '/': '../xo-web/dist/'\nyarn start \n```\n\n## xen-orchestra - Updating\n\n```bash\ncd /opt/xen-orchestra/\nsudo git pull --ff-only\nsudo yarn\nsudo yarn build\n```\n","readmeHtml":"<h1 id=\"xen-orchestra-centos\" class=\"mobile-header\">xen-orchestra - CentOS</h1>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\">curl --silent --location https://rpm.nodesource.com/setup_8.x | sudo bash -\ncurl --silent --location https://dl.yarnpkg.com/rpm/yarn.repo | sudo tee /etc/yum.repos.d/yarn.repo\n\nyum groupinstall &#039;Development Tools&#039;\nyum -y install epel-release gcc gcc-c++ automake libpng-devel git python redis nodejs yarn\nsystemctl enable --now redis\n\ngit clone -b master http://github.com/vatesfr/xen-orchestra\nyarn\nyarn build\ncd packages/xo-server\ncp sample.config.yaml .xo-server.yaml\nvi .xo-server.yaml # mounts: &#039;/&#039;: &#039;../xo-web/dist/&#039;\nyarn start </code></pre>\n      </div>\n    </div>\n<h2 id=\"xen-orchestra-debian\" class=\"mobile-header\">xen-orchestra - Debian</h2>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\">curl -sL https://deb.nodesource.com/setup_8.x | sudo -E bash -\ncurl -sS https://dl.yarnpkg.com/debian/pubkey.gpg | sudo apt-key add -\necho &quot;deb https://dl.yarnpkg.com/debian/ stable main&quot; | sudo tee /etc/apt/sources.list.d/yarn.list\nsudo apt update\nsudo apt-get install -y nodejs yarn build-essential redis-server libpng-dev git python-minimal libvhdi-utils lvm2\n\ngit clone -b master http://github.com/vatesfr/xen-orchestra\ncd xen-orchestra\nyarn\nyarn build\ncd packages/xo-server\ncp sample.config.yaml .xo-server.yaml\nvi .xo-server.yaml # mounts: &#039;/&#039;: &#039;../xo-web/dist/&#039;\nyarn start </code></pre>\n      </div>\n    </div>\n<h2 id=\"xen-orchestra-updating\" class=\"mobile-header\">xen-orchestra - Updating</h2>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\">cd /opt/xen-orchestra/\nsudo git pull --ff-only\nsudo yarn\nsudo yarn build</code></pre>\n      </div>\n    </div>","readTime":"1 min","wordCount":152,"lastBuilt":"2025-09-14T18:12:08.883Z"},{"name":"yacht","displayName":"Yacht","slug":"yacht","description":"Repo for yacht","category":"infrastructure","language":null,"stars":0,"forks":0,"topics":[],"githubUrl":"https://github.com/howtomgr/yacht","updatedAt":"2025-09-08T03:18:56Z","createdAt":"2025-09-08T03:18:45Z","readmeRaw":"## ðŸ‘‹ Welcome to yacht ðŸš€  \n\nyacht README  \n  \n  \n## Author  \n\nðŸ¤– casjay: [Github](https://github.com/casjay) ðŸ¤–  \n","readmeHtml":"<h2 id=\"welcome-to-yacht\" class=\"mobile-header\">ðŸ‘‹ Welcome to yacht ðŸš€  </h2>\n<p class=\"mobile-paragraph\">yacht README  </p>\n<h2 id=\"author\" class=\"mobile-header\">Author  </h2>\n<p class=\"mobile-paragraph\">ðŸ¤– casjay: <a href=\"https://github.com/casjay\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">Github</a> ðŸ¤–  </p>","readTime":"1 min","wordCount":15,"lastBuilt":"2025-09-14T18:12:08.548Z"},{"name":"zabbix","displayName":"Zabbix","slug":"zabbix","description":"Repo for zabbix","category":"monitoring","language":null,"stars":0,"forks":0,"topics":[],"githubUrl":"https://github.com/howtomgr/zabbix","updatedAt":"2025-09-08T03:19:09Z","createdAt":"2025-09-08T03:18:59Z","readmeRaw":"## ðŸ‘‹ Welcome to zabbix ðŸš€  \n\nzabbix README  \n  \n  \n## Author  \n\nðŸ¤– casjay: [Github](https://github.com/casjay) ðŸ¤–  \n","readmeHtml":"<h2 id=\"welcome-to-zabbix\" class=\"mobile-header\">ðŸ‘‹ Welcome to zabbix ðŸš€  </h2>\n<p class=\"mobile-paragraph\">zabbix README  </p>\n<h2 id=\"author\" class=\"mobile-header\">Author  </h2>\n<p class=\"mobile-paragraph\">ðŸ¤– casjay: <a href=\"https://github.com/casjay\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">Github</a> ðŸ¤–  </p>","readTime":"1 min","wordCount":15,"lastBuilt":"2025-09-14T18:12:08.248Z"},{"name":"zigbee2mqtt","displayName":"Zigbee2mqtt","slug":"zigbee2mqtt","description":"Repo for zigbee2mqtt","category":"infrastructure","language":null,"stars":0,"forks":0,"topics":[],"githubUrl":"https://github.com/howtomgr/zigbee2mqtt","updatedAt":"2025-09-08T03:19:22Z","createdAt":"2025-09-08T03:19:12Z","readmeRaw":"## ðŸ‘‹ Welcome to zigbee2mqtt ðŸš€  \n\nzigbee2mqtt README  \n  \n  \n## Author  \n\nðŸ¤– casjay: [Github](https://github.com/casjay) ðŸ¤–  \n","readmeHtml":"<h2 id=\"welcome-to-zigbee2mqtt\" class=\"mobile-header\">ðŸ‘‹ Welcome to zigbee2mqtt ðŸš€  </h2>\n<p class=\"mobile-paragraph\">zigbee2mqtt README  </p>\n<h2 id=\"author\" class=\"mobile-header\">Author  </h2>\n<p class=\"mobile-paragraph\">ðŸ¤– casjay: <a href=\"https://github.com/casjay\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">Github</a> ðŸ¤–  </p>","readTime":"1 min","wordCount":15,"lastBuilt":"2025-09-14T18:12:07.983Z"}],"categories":[{"key":"web-server","name":"Web Servers","description":"High-performance web servers and reverse proxies","icon":"ðŸŒ","color":"#50fa7b","keywords":["nginx","apache","haproxy","traefik","caddy"]},{"key":"database","name":"Databases","description":"SQL and NoSQL database installation guides","icon":"ðŸ—„ï¸","color":"#8be9fd","keywords":["mysql","postgresql","mongodb","redis","mariadb","databases"]},{"key":"container","name":"Containers","description":"Container platforms and orchestration","icon":"ðŸ“¦","color":"#bd93f9","keywords":["docker","kubernetes","k3s","portainer","rancher","minikube"]},{"key":"security","name":"Security","description":"Security tools and authentication systems","icon":"ðŸ”’","color":"#ff5555","keywords":["vault","authelia","keycloak","pihole","fail2ban","wireguard","openvpn"]},{"key":"monitoring","name":"Monitoring","description":"Observability and monitoring solutions","icon":"ðŸ“Š","color":"#ffb86c","keywords":["prometheus","grafana","loki","jaeger","nagios","zabbix"]},{"key":"communication","name":"Communication","description":"Team communication and collaboration platforms","icon":"ðŸ’¬","color":"#f1fa8c","keywords":["mattermost","rocketchat","matrix","mastodon","element","jitsi"]},{"key":"productivity","name":"Productivity","description":"Content management and productivity tools","icon":"âš¡","color":"#ff79c6","keywords":["nextcloud","wordpress","ghost","bookstack","outline","bitwarden"]},{"key":"media","name":"Media Servers","description":"Media streaming and entertainment platforms","icon":"ðŸŽ¬","color":"#6272a4","keywords":["plex","jellyfin","sonarr","radarr","lidarr","prowlarr"]},{"key":"infrastructure","name":"Infrastructure","description":"DevOps and infrastructure automation tools","icon":"ðŸ—ï¸","color":"#44475a","keywords":["ansible","terraform","gitlab","jenkins","consul","etcd"]}]},"__N_SSG":true}