{"pageProps":{"guide":{"name":"arangodb","displayName":"Arangodb","slug":"arangodb","description":"arangodb is a free and open-source multi-model NoSQL database. ArangoDB combines document, graph, and key-value data models with one query language, serving as an alternative to using multiple specialized databases","category":"database","language":null,"stars":0,"forks":0,"topics":[],"githubUrl":"https://github.com/howtomgr/arangodb","updatedAt":"2025-09-16T02:31:12Z","createdAt":"2025-09-16T02:18:32Z","readmeRaw":"# arangodb Installation Guide\n\narangodb is a free and open-source multi-model NoSQL database. ArangoDB combines document, graph, and key-value data models with one query language, serving as an alternative to using multiple specialized databases\n\n## Prerequisites\n\n- **Hardware Requirements**:\n  - CPU: 2+ cores recommended\n  - RAM: 2GB minimum (8GB+ recommended)\n  - Storage: 10GB+ for data\n  - Network: HTTP/HTTPS access\n- **Operating System**: \n  - Linux: Any modern distribution (RHEL, Debian, Ubuntu, CentOS, Fedora, Arch, Alpine, openSUSE)\n  - macOS: 10.14+ (Mojave or newer)\n  - Windows: Windows Server 2016+ or Windows 10\n  - FreeBSD: 11.0+\n- **Network Requirements**:\n  - Port 8529 (default arangodb port)\n  - Cluster ports if distributed\n- **Dependencies**:\n  - See official documentation for specific requirements\n- **System Access**: root or sudo privileges required\n\n## Installation\n\n### RHEL/CentOS/Rocky Linux/AlmaLinux\n\n```bash\n# Install EPEL repository if needed\nsudo dnf install -y epel-release\n\n# Install arangodb\nsudo dnf install -y arangodb\n\n# Enable and start service\nsudo systemctl enable --now arangodb\n\n# Configure firewall\nsudo firewall-cmd --permanent --add-port=8529/tcp\nsudo firewall-cmd --reload\n\n# Verify installation\narangod --version\n```\n\n### Debian/Ubuntu\n\n```bash\n# Update package index\nsudo apt update\n\n# Install arangodb\nsudo apt install -y arangodb\n\n# Enable and start service\nsudo systemctl enable --now arangodb\n\n# Configure firewall\nsudo ufw allow 8529\n\n# Verify installation\narangod --version\n```\n\n### Arch Linux\n\n```bash\n# Install arangodb\nsudo pacman -S arangodb\n\n# Enable and start service\nsudo systemctl enable --now arangodb\n\n# Verify installation\narangod --version\n```\n\n### Alpine Linux\n\n```bash\n# Install arangodb\napk add --no-cache arangodb\n\n# Enable and start service\nrc-update add arangodb default\nrc-service arangodb start\n\n# Verify installation\narangod --version\n```\n\n### openSUSE/SLES\n\n```bash\n# Install arangodb\nsudo zypper install -y arangodb\n\n# Enable and start service\nsudo systemctl enable --now arangodb\n\n# Configure firewall\nsudo firewall-cmd --permanent --add-port=8529/tcp\nsudo firewall-cmd --reload\n\n# Verify installation\narangod --version\n```\n\n### macOS\n\n```bash\n# Using Homebrew\nbrew install arangodb\n\n# Start service\nbrew services start arangodb\n\n# Verify installation\narangod --version\n```\n\n### FreeBSD\n\n```bash\n# Using pkg\npkg install arangodb\n\n# Enable in rc.conf\necho 'arangodb_enable=\"YES\"' >> /etc/rc.conf\n\n# Start service\nservice arangodb start\n\n# Verify installation\narangod --version\n```\n\n### Windows\n\n```bash\n# Using Chocolatey\nchoco install arangodb\n\n# Or using Scoop\nscoop install arangodb\n\n# Verify installation\narangod --version\n```\n\n## Initial Configuration\n\n### Basic Configuration\n\n```bash\n# Create configuration directory\nsudo mkdir -p /etc/arangodb\n\n# Set up basic configuration\n# See official documentation for detailed configuration options\n\n# Test configuration\narangod --version\n```\n\n## Service Management\n\n### systemd (RHEL, Debian, Ubuntu, Arch, openSUSE)\n\n```bash\n# Enable service\nsudo systemctl enable arangodb\n\n# Start service\nsudo systemctl start arangodb\n\n# Stop service\nsudo systemctl stop arangodb\n\n# Restart service\nsudo systemctl restart arangodb\n\n# Check status\nsudo systemctl status arangodb\n\n# View logs\nsudo journalctl -u arangodb -f\n```\n\n### OpenRC (Alpine Linux)\n\n```bash\n# Enable service\nrc-update add arangodb default\n\n# Start service\nrc-service arangodb start\n\n# Stop service\nrc-service arangodb stop\n\n# Restart service\nrc-service arangodb restart\n\n# Check status\nrc-service arangodb status\n```\n\n### rc.d (FreeBSD)\n\n```bash\n# Enable in /etc/rc.conf\necho 'arangodb_enable=\"YES\"' >> /etc/rc.conf\n\n# Start service\nservice arangodb start\n\n# Stop service\nservice arangodb stop\n\n# Restart service\nservice arangodb restart\n\n# Check status\nservice arangodb status\n```\n\n### launchd (macOS)\n\n```bash\n# Using Homebrew services\nbrew services start arangodb\nbrew services stop arangodb\nbrew services restart arangodb\n\n# Check status\nbrew services list | grep arangodb\n```\n\n### Windows Service Manager\n\n```powershell\n# Start service\nnet start arangodb\n\n# Stop service\nnet stop arangodb\n\n# Using PowerShell\nStart-Service arangodb\nStop-Service arangodb\nRestart-Service arangodb\n\n# Check status\nGet-Service arangodb\n```\n\n## Advanced Configuration\n\nSee the official documentation for advanced configuration options.\n\n## Reverse Proxy Setup\n\n### nginx Configuration\n\n```nginx\nupstream arangodb_backend {\n    server 127.0.0.1:8529;\n}\n\nserver {\n    listen 80;\n    server_name arangodb.example.com;\n    return 301 https://$server_name$request_uri;\n}\n\nserver {\n    listen 443 ssl http2;\n    server_name arangodb.example.com;\n\n    ssl_certificate /etc/ssl/certs/arangodb.example.com.crt;\n    ssl_certificate_key /etc/ssl/private/arangodb.example.com.key;\n\n    location / {\n        proxy_pass http://arangodb_backend;\n        proxy_set_header Host $host;\n        proxy_set_header X-Real-IP $remote_addr;\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n        proxy_set_header X-Forwarded-Proto $scheme;\n    }\n}\n```\n\n### Apache Configuration\n\n```apache\n<VirtualHost *:80>\n    ServerName arangodb.example.com\n    Redirect permanent / https://arangodb.example.com/\n</VirtualHost>\n\n<VirtualHost *:443>\n    ServerName arangodb.example.com\n    \n    SSLEngine on\n    SSLCertificateFile /etc/ssl/certs/arangodb.example.com.crt\n    SSLCertificateKeyFile /etc/ssl/private/arangodb.example.com.key\n    \n    ProxyRequests Off\n    ProxyPreserveHost On\n    \n    ProxyPass / http://127.0.0.1:8529/\n    ProxyPassReverse / http://127.0.0.1:8529/\n</VirtualHost>\n```\n\n### HAProxy Configuration\n\n```haproxy\nfrontend arangodb_frontend\n    bind *:80\n    bind *:443 ssl crt /etc/ssl/certs/arangodb.pem\n    redirect scheme https if !{ ssl_fc }\n    default_backend arangodb_backend\n\nbackend arangodb_backend\n    balance roundrobin\n    server arangodb1 127.0.0.1:8529 check\n```\n\n## Security Configuration\n\n### Basic Security Setup\n\n```bash\n# Set appropriate permissions\nsudo chown -R arangodb:arangodb /etc/arangodb\nsudo chmod 750 /etc/arangodb\n\n# Configure firewall\nsudo firewall-cmd --permanent --add-port=8529/tcp\nsudo firewall-cmd --reload\n\n# Enable SELinux policies (if applicable)\nsudo setsebool -P httpd_can_network_connect on\n```\n\n## Database Setup\n\nSee official documentation for database configuration requirements.\n\n## Performance Optimization\n\n### System Tuning\n\n```bash\n# Basic system tuning\necho 'net.core.somaxconn = 65535' | sudo tee -a /etc/sysctl.conf\necho 'net.ipv4.tcp_max_syn_backlog = 65535' | sudo tee -a /etc/sysctl.conf\nsudo sysctl -p\n```\n\n## Monitoring\n\n### Basic Monitoring\n\n```bash\n# Check service status\nsudo systemctl status arangodb\n\n# View logs\nsudo journalctl -u arangodb -f\n\n# Monitor resource usage\ntop -p $(pgrep arangodb)\n```\n\n## Backup and Restore\n\n### Backup Script\n\n```bash\n#!/bin/bash\n# Basic backup script\nBACKUP_DIR=\"/backup/arangodb\"\nDATE=$(date +%Y%m%d_%H%M%S)\n\nmkdir -p \"$BACKUP_DIR\"\ntar -czf \"$BACKUP_DIR/arangodb-backup-$DATE.tar.gz\" /etc/arangodb /var/lib/arangodb\n\necho \"Backup completed: $BACKUP_DIR/arangodb-backup-$DATE.tar.gz\"\n```\n\n### Restore Procedure\n\n```bash\n# Stop service\nsudo systemctl stop arangodb\n\n# Restore from backup\ntar -xzf /backup/arangodb/arangodb-backup-*.tar.gz -C /\n\n# Start service\nsudo systemctl start arangodb\n```\n\n## Troubleshooting\n\n### Common Issues\n\n1. **Service won't start**:\n```bash\n# Check logs\nsudo journalctl -u arangodb -n 100\nsudo tail -f /var/log/arangodb/arangodb.log\n\n# Check configuration\narangod --version\n\n# Check permissions\nls -la /etc/arangodb\n```\n\n2. **Connection issues**:\n```bash\n# Check if service is listening\nsudo ss -tlnp | grep 8529\n\n# Test connectivity\ntelnet localhost 8529\n\n# Check firewall\nsudo firewall-cmd --list-all\n```\n\n3. **Performance issues**:\n```bash\n# Check resource usage\ntop -p $(pgrep arangodb)\n\n# Check disk I/O\niotop -p $(pgrep arangodb)\n\n# Check connections\nss -an | grep 8529\n```\n\n## Integration Examples\n\n### Docker Compose Example\n\n```yaml\nversion: '3.8'\nservices:\n  arangodb:\n    image: arangodb:latest\n    ports:\n      - \"8529:8529\"\n    volumes:\n      - ./config:/etc/arangodb\n      - ./data:/var/lib/arangodb\n    restart: unless-stopped\n```\n\n## Maintenance\n\n### Update Procedures\n\n```bash\n# RHEL/CentOS/Rocky/AlmaLinux\nsudo dnf update arangodb\n\n# Debian/Ubuntu\nsudo apt update && sudo apt upgrade arangodb\n\n# Arch Linux\nsudo pacman -Syu arangodb\n\n# Alpine Linux\napk update && apk upgrade arangodb\n\n# openSUSE\nsudo zypper update arangodb\n\n# FreeBSD\npkg update && pkg upgrade arangodb\n\n# Always backup before updates\ntar -czf /backup/arangodb-pre-update-$(date +%Y%m%d).tar.gz /etc/arangodb\n\n# Restart after updates\nsudo systemctl restart arangodb\n```\n\n### Regular Maintenance\n\n```bash\n# Log rotation\nsudo logrotate -f /etc/logrotate.d/arangodb\n\n# Clean old logs\nfind /var/log/arangodb -name \"*.log\" -mtime +30 -delete\n\n# Check disk usage\ndu -sh /var/lib/arangodb\n```\n\n## Additional Resources\n\n- Official Documentation: https://docs.arangodb.org/\n- GitHub Repository: https://github.com/arangodb/arangodb\n- Community Forum: https://forum.arangodb.org/\n- Best Practices Guide: https://docs.arangodb.org/best-practices\n\n---\n\n**Note:** This guide is part of the [HowToMgr](https://howtomgr.github.io) collection. Always refer to official documentation for the most up-to-date information.\n","readmeHtml":"<h1 id=\"arangodb-installation-guide\" class=\"mobile-header\">arangodb Installation Guide</h1>\n<p class=\"mobile-paragraph\">arangodb is a free and open-source multi-model NoSQL database. ArangoDB combines document, graph, and key-value data models with one query language, serving as an alternative to using multiple specialized databases</p>\n<h2 id=\"prerequisites\" class=\"mobile-header\">Prerequisites</h2>\n<li class=\"mobile-list-item\"><strong>Hardware Requirements</strong>:</li>\n<li class=\"mobile-list-item\">CPU: 2+ cores recommended</li>\n<li class=\"mobile-list-item\">RAM: 2GB minimum (8GB+ recommended)</li>\n<li class=\"mobile-list-item\">Storage: 10GB+ for data</li>\n<li class=\"mobile-list-item\">Network: HTTP/HTTPS access</li>\n<li class=\"mobile-list-item\"><strong>Operating System</strong>: </li>\n<li class=\"mobile-list-item\">Linux: Any modern distribution (RHEL, Debian, Ubuntu, CentOS, Fedora, Arch, Alpine, openSUSE)</li>\n<li class=\"mobile-list-item\">macOS: 10.14+ (Mojave or newer)</li>\n<li class=\"mobile-list-item\">Windows: Windows Server 2016+ or Windows 10</li>\n<li class=\"mobile-list-item\">FreeBSD: 11.0+</li>\n<li class=\"mobile-list-item\"><strong>Network Requirements</strong>:</li>\n<li class=\"mobile-list-item\">Port 8529 (default arangodb port)</li>\n<li class=\"mobile-list-item\">Cluster ports if distributed</li>\n<li class=\"mobile-list-item\"><strong>Dependencies</strong>:</li>\n<li class=\"mobile-list-item\">See official documentation for specific requirements</li>\n<li class=\"mobile-list-item\"><strong>System Access</strong>: root or sudo privileges required</li>\n<h2 id=\"installation\" class=\"mobile-header\">Installation</h2>\n<h3 id=\"rhelcentosrocky-linuxalmalinux\" class=\"mobile-header\">RHEL/CentOS/Rocky Linux/AlmaLinux</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Install EPEL repository if needed\nsudo dnf install -y epel-release\n\n# Install arangodb\nsudo dnf install -y arangodb\n\n# Enable and start service\nsudo systemctl enable --now arangodb\n\n# Configure firewall\nsudo firewall-cmd --permanent --add-port=8529/tcp\nsudo firewall-cmd --reload\n\n# Verify installation\narangod --version</code></pre>\n      </div>\n    </div>\n<h3 id=\"debianubuntu\" class=\"mobile-header\">Debian/Ubuntu</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Update package index\nsudo apt update\n\n# Install arangodb\nsudo apt install -y arangodb\n\n# Enable and start service\nsudo systemctl enable --now arangodb\n\n# Configure firewall\nsudo ufw allow 8529\n\n# Verify installation\narangod --version</code></pre>\n      </div>\n    </div>\n<h3 id=\"arch-linux\" class=\"mobile-header\">Arch Linux</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Install arangodb\nsudo pacman -S arangodb\n\n# Enable and start service\nsudo systemctl enable --now arangodb\n\n# Verify installation\narangod --version</code></pre>\n      </div>\n    </div>\n<h3 id=\"alpine-linux\" class=\"mobile-header\">Alpine Linux</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Install arangodb\napk add --no-cache arangodb\n\n# Enable and start service\nrc-update add arangodb default\nrc-service arangodb start\n\n# Verify installation\narangod --version</code></pre>\n      </div>\n    </div>\n<h3 id=\"opensusesles\" class=\"mobile-header\">openSUSE/SLES</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Install arangodb\nsudo zypper install -y arangodb\n\n# Enable and start service\nsudo systemctl enable --now arangodb\n\n# Configure firewall\nsudo firewall-cmd --permanent --add-port=8529/tcp\nsudo firewall-cmd --reload\n\n# Verify installation\narangod --version</code></pre>\n      </div>\n    </div>\n<h3 id=\"macos\" class=\"mobile-header\">macOS</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Using Homebrew\nbrew install arangodb\n\n# Start service\nbrew services start arangodb\n\n# Verify installation\narangod --version</code></pre>\n      </div>\n    </div>\n<h3 id=\"freebsd\" class=\"mobile-header\">FreeBSD</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Using pkg\npkg install arangodb\n\n# Enable in rc.conf\necho &#039;arangodb_enable=&quot;YES&quot;&#039; &gt;&gt; /etc/rc.conf\n\n# Start service\nservice arangodb start\n\n# Verify installation\narangod --version</code></pre>\n      </div>\n    </div>\n<h3 id=\"windows\" class=\"mobile-header\">Windows</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Using Chocolatey\nchoco install arangodb\n\n# Or using Scoop\nscoop install arangodb\n\n# Verify installation\narangod --version</code></pre>\n      </div>\n    </div>\n<h2 id=\"initial-configuration\" class=\"mobile-header\">Initial Configuration</h2>\n<h3 id=\"basic-configuration\" class=\"mobile-header\">Basic Configuration</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Create configuration directory\nsudo mkdir -p /etc/arangodb\n\n# Set up basic configuration\n# See official documentation for detailed configuration options\n\n# Test configuration\narangod --version</code></pre>\n      </div>\n    </div>\n<h2 id=\"service-management\" class=\"mobile-header\">Service Management</h2>\n<h3 id=\"systemd-rhel-debian-ubuntu-arch-opensuse\" class=\"mobile-header\">systemd (RHEL, Debian, Ubuntu, Arch, openSUSE)</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Enable service\nsudo systemctl enable arangodb\n\n# Start service\nsudo systemctl start arangodb\n\n# Stop service\nsudo systemctl stop arangodb\n\n# Restart service\nsudo systemctl restart arangodb\n\n# Check status\nsudo systemctl status arangodb\n\n# View logs\nsudo journalctl -u arangodb -f</code></pre>\n      </div>\n    </div>\n<h3 id=\"openrc-alpine-linux\" class=\"mobile-header\">OpenRC (Alpine Linux)</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Enable service\nrc-update add arangodb default\n\n# Start service\nrc-service arangodb start\n\n# Stop service\nrc-service arangodb stop\n\n# Restart service\nrc-service arangodb restart\n\n# Check status\nrc-service arangodb status</code></pre>\n      </div>\n    </div>\n<h3 id=\"rcd-freebsd\" class=\"mobile-header\">rc.d (FreeBSD)</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Enable in /etc/rc.conf\necho &#039;arangodb_enable=&quot;YES&quot;&#039; &gt;&gt; /etc/rc.conf\n\n# Start service\nservice arangodb start\n\n# Stop service\nservice arangodb stop\n\n# Restart service\nservice arangodb restart\n\n# Check status\nservice arangodb status</code></pre>\n      </div>\n    </div>\n<h3 id=\"launchd-macos\" class=\"mobile-header\">launchd (macOS)</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Using Homebrew services\nbrew services start arangodb\nbrew services stop arangodb\nbrew services restart arangodb\n\n# Check status\nbrew services list | grep arangodb</code></pre>\n      </div>\n    </div>\n<h3 id=\"windows-service-manager\" class=\"mobile-header\">Windows Service Manager</h3>\n<div class=\"mobile-code-block\" data-language=\"powershell\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">powershell</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-powershell\"># Start service\nnet start arangodb\n\n# Stop service\nnet stop arangodb\n\n# Using PowerShell\nStart-Service arangodb\nStop-Service arangodb\nRestart-Service arangodb\n\n# Check status\nGet-Service arangodb</code></pre>\n      </div>\n    </div>\n<h2 id=\"advanced-configuration\" class=\"mobile-header\">Advanced Configuration</h2>\n<p class=\"mobile-paragraph\">See the official documentation for advanced configuration options.</p>\n<h2 id=\"reverse-proxy-setup\" class=\"mobile-header\">Reverse Proxy Setup</h2>\n<h3 id=\"nginx-configuration\" class=\"mobile-header\">nginx Configuration</h3>\n<div class=\"mobile-code-block\" data-language=\"nginx\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">nginx</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-nginx\">upstream arangodb_backend {\n    server 127.0.0.1:8529;\n}\n\nserver {\n    listen 80;\n    server_name arangodb.example.com;\n    return 301 https://$server_name$request_uri;\n}\n\nserver {\n    listen 443 ssl http2;\n    server_name arangodb.example.com;\n\n    ssl_certificate /etc/ssl/certs/arangodb.example.com.crt;\n    ssl_certificate_key /etc/ssl/private/arangodb.example.com.key;\n\n    location / {\n        proxy_pass http://arangodb_backend;\n        proxy_set_header Host $host;\n        proxy_set_header X-Real-IP $remote_addr;\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n        proxy_set_header X-Forwarded-Proto $scheme;\n    }\n}</code></pre>\n      </div>\n    </div>\n<h3 id=\"apache-configuration\" class=\"mobile-header\">Apache Configuration</h3>\n<div class=\"mobile-code-block\" data-language=\"apache\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">apache</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-apache\">&lt;VirtualHost *:80&gt;\n    ServerName arangodb.example.com\n    Redirect permanent / https://arangodb.example.com/\n&lt;/VirtualHost&gt;\n\n&lt;VirtualHost *:443&gt;\n    ServerName arangodb.example.com\n    \n    SSLEngine on\n    SSLCertificateFile /etc/ssl/certs/arangodb.example.com.crt\n    SSLCertificateKeyFile /etc/ssl/private/arangodb.example.com.key\n    \n    ProxyRequests Off\n    ProxyPreserveHost On\n    \n    ProxyPass / http://127.0.0.1:8529/\n    ProxyPassReverse / http://127.0.0.1:8529/\n&lt;/VirtualHost&gt;</code></pre>\n      </div>\n    </div>\n<h3 id=\"haproxy-configuration\" class=\"mobile-header\">HAProxy Configuration</h3>\n<div class=\"mobile-code-block\" data-language=\"haproxy\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">haproxy</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-haproxy\">frontend arangodb_frontend\n    bind *:80\n    bind *:443 ssl crt /etc/ssl/certs/arangodb.pem\n    redirect scheme https if !{ ssl_fc }\n    default_backend arangodb_backend\n\nbackend arangodb_backend\n    balance roundrobin\n    server arangodb1 127.0.0.1:8529 check</code></pre>\n      </div>\n    </div>\n<h2 id=\"security-configuration\" class=\"mobile-header\">Security Configuration</h2>\n<h3 id=\"basic-security-setup\" class=\"mobile-header\">Basic Security Setup</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Set appropriate permissions\nsudo chown -R arangodb:arangodb /etc/arangodb\nsudo chmod 750 /etc/arangodb\n\n# Configure firewall\nsudo firewall-cmd --permanent --add-port=8529/tcp\nsudo firewall-cmd --reload\n\n# Enable SELinux policies (if applicable)\nsudo setsebool -P httpd_can_network_connect on</code></pre>\n      </div>\n    </div>\n<h2 id=\"database-setup\" class=\"mobile-header\">Database Setup</h2>\n<p class=\"mobile-paragraph\">See official documentation for database configuration requirements.</p>\n<h2 id=\"performance-optimization\" class=\"mobile-header\">Performance Optimization</h2>\n<h3 id=\"system-tuning\" class=\"mobile-header\">System Tuning</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Basic system tuning\necho &#039;net.core.somaxconn = 65535&#039; | sudo tee -a /etc/sysctl.conf\necho &#039;net.ipv4.tcp_max_syn_backlog = 65535&#039; | sudo tee -a /etc/sysctl.conf\nsudo sysctl -p</code></pre>\n      </div>\n    </div>\n<h2 id=\"monitoring\" class=\"mobile-header\">Monitoring</h2>\n<h3 id=\"basic-monitoring\" class=\"mobile-header\">Basic Monitoring</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Check service status\nsudo systemctl status arangodb\n\n# View logs\nsudo journalctl -u arangodb -f\n\n# Monitor resource usage\ntop -p $(pgrep arangodb)</code></pre>\n      </div>\n    </div>\n<h2 id=\"backup-and-restore\" class=\"mobile-header\">Backup and Restore</h2>\n<h3 id=\"backup-script\" class=\"mobile-header\">Backup Script</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\">#!/bin/bash\n# Basic backup script\nBACKUP_DIR=&quot;/backup/arangodb&quot;\nDATE=$(date +%Y%m%d_%H%M%S)\n\nmkdir -p &quot;$BACKUP_DIR&quot;\ntar -czf &quot;$BACKUP_DIR/arangodb-backup-$DATE.tar.gz&quot; /etc/arangodb /var/lib/arangodb\n\necho &quot;Backup completed: $BACKUP_DIR/arangodb-backup-$DATE.tar.gz&quot;</code></pre>\n      </div>\n    </div>\n<h3 id=\"restore-procedure\" class=\"mobile-header\">Restore Procedure</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Stop service\nsudo systemctl stop arangodb\n\n# Restore from backup\ntar -xzf /backup/arangodb/arangodb-backup-*.tar.gz -C /\n\n# Start service\nsudo systemctl start arangodb</code></pre>\n      </div>\n    </div>\n<h2 id=\"troubleshooting\" class=\"mobile-header\">Troubleshooting</h2>\n<h3 id=\"common-issues\" class=\"mobile-header\">Common Issues</h3>\n<p class=\"mobile-paragraph\">1. <strong>Service won't start</strong>:</p>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Check logs\nsudo journalctl -u arangodb -n 100\nsudo tail -f /var/log/arangodb/arangodb.log\n\n# Check configuration\narangod --version\n\n# Check permissions\nls -la /etc/arangodb</code></pre>\n      </div>\n    </div>\n<p class=\"mobile-paragraph\">2. <strong>Connection issues</strong>:</p>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Check if service is listening\nsudo ss -tlnp | grep 8529\n\n# Test connectivity\ntelnet localhost 8529\n\n# Check firewall\nsudo firewall-cmd --list-all</code></pre>\n      </div>\n    </div>\n<p class=\"mobile-paragraph\">3. <strong>Performance issues</strong>:</p>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Check resource usage\ntop -p $(pgrep arangodb)\n\n# Check disk I/O\niotop -p $(pgrep arangodb)\n\n# Check connections\nss -an | grep 8529</code></pre>\n      </div>\n    </div>\n<h2 id=\"integration-examples\" class=\"mobile-header\">Integration Examples</h2>\n<h3 id=\"docker-compose-example\" class=\"mobile-header\">Docker Compose Example</h3>\n<div class=\"mobile-code-block\" data-language=\"yaml\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">yaml</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-yaml\">version: &#039;3.8&#039;\nservices:\n  arangodb:\n    image: arangodb:latest\n    ports:\n      - &quot;8529:8529&quot;\n    volumes:\n      - ./config:/etc/arangodb\n      - ./data:/var/lib/arangodb\n    restart: unless-stopped</code></pre>\n      </div>\n    </div>\n<h2 id=\"maintenance\" class=\"mobile-header\">Maintenance</h2>\n<h3 id=\"update-procedures\" class=\"mobile-header\">Update Procedures</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># RHEL/CentOS/Rocky/AlmaLinux\nsudo dnf update arangodb\n\n# Debian/Ubuntu\nsudo apt update &amp;&amp; sudo apt upgrade arangodb\n\n# Arch Linux\nsudo pacman -Syu arangodb\n\n# Alpine Linux\napk update &amp;&amp; apk upgrade arangodb\n\n# openSUSE\nsudo zypper update arangodb\n\n# FreeBSD\npkg update &amp;&amp; pkg upgrade arangodb\n\n# Always backup before updates\ntar -czf /backup/arangodb-pre-update-$(date +%Y%m%d).tar.gz /etc/arangodb\n\n# Restart after updates\nsudo systemctl restart arangodb</code></pre>\n      </div>\n    </div>\n<h3 id=\"regular-maintenance\" class=\"mobile-header\">Regular Maintenance</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Log rotation\nsudo logrotate -f /etc/logrotate.d/arangodb\n\n# Clean old logs\nfind /var/log/arangodb -name &quot;*.log&quot; -mtime +30 -delete\n\n# Check disk usage\ndu -sh /var/lib/arangodb</code></pre>\n      </div>\n    </div>\n<h2 id=\"additional-resources\" class=\"mobile-header\">Additional Resources</h2>\n<li class=\"mobile-list-item\">Official Documentation: https://docs.arangodb.org/</li>\n<li class=\"mobile-list-item\">GitHub Repository: https://github.com/arangodb/arangodb</li>\n<li class=\"mobile-list-item\">Community Forum: https://forum.arangodb.org/</li>\n<li class=\"mobile-list-item\">Best Practices Guide: https://docs.arangodb.org/best-practices</li>\n<p class=\"mobile-paragraph\">---</p>\n<p class=\"mobile-paragraph\"><strong>Note:</strong> This guide is part of the <a href=\"https://howtomgr.github.io\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">HowToMgr</a> collection. Always refer to official documentation for the most up-to-date information.</p>","readTime":"6 min","wordCount":1173,"lastBuilt":"2025-09-16T02:44:47.510Z"},"category":{"key":"database","name":"Databases","description":"SQL and NoSQL database installation guides","icon":"ðŸ—„ï¸","color":"#8be9fd","keywords":["mysql","postgresql","mongodb","redis","mariadb","databases"]},"relatedGuides":[{"name":"appwrite","displayName":"Appwrite","slug":"appwrite","description":"Appwrite is an open-source backend-as-a-service platform that provides developers with all the core APIs required to build modern applications. It includes authentication, databases, storage, functions, and real-time capabilities.","category":"database","language":null,"stars":0,"forks":0,"topics":[],"githubUrl":"https://github.com/howtomgr/appwrite","updatedAt":"2025-09-16T02:31:11Z","createdAt":"2025-09-16T02:18:14Z","readmeRaw":"# Appwrite Installation Guide\n\nAppwrite is an open-source backend-as-a-service platform that provides developers with all the core APIs required to build modern applications. It includes authentication, databases, storage, functions, and real-time capabilities.\n\n## Prerequisites\n\n- Docker and Docker Compose installed\n- Minimum 4GB RAM (8GB recommended for production)\n- 10GB free disk space minimum\n- Domain name with DNS configured (for production)\n- SSL certificate (Let's Encrypt recommended)\n\n## Installation\n\n### Docker Compose Installation (Recommended)\n\n1. **Download Appwrite**:\n```bash\n# Create installation directory\nmkdir -p /opt/appwrite\ncd /opt/appwrite\n\n# Download docker-compose.yml\ncurl -o docker-compose.yml https://appwrite.io/install/compose\n\n# Download .env file\ncurl -o .env https://appwrite.io/install/env\n```\n\n2. **Configure Environment**:\n```bash\n# Edit environment variables\nnano .env\n\n# Key variables to configure:\n# _APP_ENV=production\n# _APP_DOMAIN=your-domain.com\n# _APP_DOMAIN_TARGET=your-domain.com\n# _APP_REDIS_PASS=your-redis-password\n# _APP_DB_PASS=your-database-password\n# _APP_OPENSSL_KEY_V1=your-32-char-key\n```\n\n3. **Generate OpenSSL Key**:\n```bash\n# Generate a secure key\nopenssl rand -hex 32\n```\n\n4. **Start Appwrite**:\n```bash\n# Start services\ndocker-compose up -d\n\n# Check status\ndocker-compose ps\n\n# View logs\ndocker-compose logs -f\n```\n\n### Manual Docker Installation\n\n```bash\n# Create network\ndocker network create appwrite\n\n# Run MariaDB\ndocker run -d \\\n  --name appwrite-mariadb \\\n  --network appwrite \\\n  -e MYSQL_ROOT_PASSWORD=rootpassword \\\n  -e MYSQL_DATABASE=appwrite \\\n  -e MYSQL_USER=appwrite \\\n  -e MYSQL_PASSWORD=password \\\n  -v appwrite-mariadb:/var/lib/mysql \\\n  mariadb:10\n\n# Run Redis\ndocker run -d \\\n  --name appwrite-redis \\\n  --network appwrite \\\n  -v appwrite-redis:/data \\\n  redis:alpine\n\n# Run Appwrite\ndocker run -d \\\n  --name appwrite \\\n  --network appwrite \\\n  -p 80:80 \\\n  -p 443:443 \\\n  -e _APP_ENV=production \\\n  -e _APP_OPENSSL_KEY_V1=your-32-char-key \\\n  -e _APP_DOMAIN=localhost \\\n  -e _APP_DB_HOST=appwrite-mariadb \\\n  -e _APP_DB_PORT=3306 \\\n  -e _APP_DB_SCHEMA=appwrite \\\n  -e _APP_DB_USER=appwrite \\\n  -e _APP_DB_PASS=password \\\n  -e _APP_REDIS_HOST=appwrite-redis \\\n  -e _APP_REDIS_PORT=6379 \\\n  -v appwrite-uploads:/storage/uploads \\\n  -v appwrite-cache:/storage/cache \\\n  -v appwrite-config:/storage/config \\\n  -v appwrite-certificates:/storage/certificates \\\n  -v appwrite-functions:/storage/functions \\\n  appwrite/appwrite\n```\n\n## Configuration\n\n### SSL/TLS Setup\n\n1. **Let's Encrypt (Automatic)**:\n```bash\n# Appwrite handles SSL automatically for configured domains\n# Ensure ports 80 and 443 are accessible\n# Domain must point to server IP\n```\n\n2. **Custom SSL Certificate**:\n```bash\n# Copy certificates\ncp /path/to/cert.pem /opt/appwrite/certificates/main.crt\ncp /path/to/key.pem /opt/appwrite/certificates/main.key\n\n# Restart Appwrite\ncd /opt/appwrite\ndocker-compose restart\n```\n\n### Email Configuration\n\nEdit `.env` file:\n```bash\n_APP_SMTP_HOST=smtp.gmail.com\n_APP_SMTP_PORT=587\n_APP_SMTP_SECURE=tls\n_APP_SMTP_USERNAME=your-email@gmail.com\n_APP_SMTP_PASSWORD=your-app-password\n```\n\n### Storage Configuration\n\n1. **Local Storage** (Default):\n```bash\n# Storage is handled automatically\n# Files stored in Docker volumes\n```\n\n2. **S3 Compatible Storage**:\n```bash\n_APP_STORAGE_DEVICE=s3\n_APP_STORAGE_S3_ACCESS_KEY=your-access-key\n_APP_STORAGE_S3_SECRET=your-secret-key\n_APP_STORAGE_S3_REGION=us-east-1\n_APP_STORAGE_S3_BUCKET=appwrite-storage\n```\n\n### Functions Runtime\n\nEnable additional runtimes in `.env`:\n```bash\n_APP_FUNCTIONS_RUNTIMES=node-18.0,python-3.10,php-8.1,ruby-3.1\n```\n\n## Security Configuration\n\n### Firewall Rules\n\n```bash\n# Allow HTTP/HTTPS\nsudo ufw allow 80/tcp\nsudo ufw allow 443/tcp\n\n# Allow Appwrite console (if different port)\nsudo ufw allow 8080/tcp\n```\n\n### Security Headers\n\nAppwrite includes security headers by default:\n- Content Security Policy\n- X-Frame-Options\n- X-Content-Type-Options\n- Strict-Transport-Security\n\n### API Keys and Secrets\n\n1. **Generate secure keys**:\n```bash\n# Generate encryption key\nopenssl rand -hex 32\n\n# Generate session secret\nopenssl rand -hex 32\n```\n\n2. **Rotate keys regularly**:\n```bash\n# Update in .env\n_APP_OPENSSL_KEY_V1=new-key-here\n\n# Restart services\ndocker-compose restart\n```\n\n## Database Management\n\n### Backup\n\n```bash\n# Backup database\ndocker exec appwrite-mariadb mysqldump -u root -p appwrite > backup.sql\n\n# Backup volumes\ndocker run --rm -v appwrite-mariadb:/data -v $(pwd):/backup ubuntu tar czf /backup/mariadb-backup.tar.gz /data\n```\n\n### Restore\n\n```bash\n# Restore database\ndocker exec -i appwrite-mariadb mysql -u root -p appwrite < backup.sql\n\n# Restore volumes\ndocker run --rm -v appwrite-mariadb:/data -v $(pwd):/backup ubuntu tar xzf /backup/mariadb-backup.tar.gz -C /\n```\n\n## Performance Optimization\n\n### Redis Configuration\n\n```bash\n# Edit Redis configuration\ndocker exec -it appwrite-redis redis-cli\n\n# Set max memory\nCONFIG SET maxmemory 2gb\nCONFIG SET maxmemory-policy allkeys-lru\n```\n\n### Database Optimization\n\n```bash\n# Optimize tables\ndocker exec appwrite-mariadb mysqlcheck -u root -p --optimize appwrite\n\n# Configure MariaDB\ndocker exec -it appwrite-mariadb mysql -u root -p\nSET GLOBAL innodb_buffer_pool_size = 1G;\nSET GLOBAL innodb_log_file_size = 256M;\n```\n\n### Scaling\n\n1. **Horizontal Scaling**:\n```bash\n# Use Docker Swarm or Kubernetes\n# Configure load balancer\n# Share storage between instances\n```\n\n2. **Vertical Scaling**:\n```bash\n# Increase container resources\ndocker-compose down\n# Edit docker-compose.yml to add resource limits\ndocker-compose up -d\n```\n\n## Monitoring\n\n### Health Checks\n\n```bash\n# Check service health\ncurl http://localhost/v1/health\n\n# Check specific services\ncurl http://localhost/v1/health/db\ncurl http://localhost/v1/health/cache\ncurl http://localhost/v1/health/time\n```\n\n### Logging\n\n```bash\n# View all logs\ndocker-compose logs -f\n\n# View specific service logs\ndocker-compose logs -f appwrite\ndocker-compose logs -f appwrite-worker-database\n\n# Export logs\ndocker-compose logs > appwrite-logs.txt\n```\n\n### Metrics\n\nEnable Prometheus metrics:\n```bash\n_APP_PROMETHEUS_ENABLE=enabled\n```\n\n## Troubleshooting\n\n### Common Issues\n\n1. **Port conflicts**:\n```bash\n# Check port usage\nsudo netstat -tlnp | grep -E ':(80|443|8080)'\n\n# Change ports in docker-compose.yml\n```\n\n2. **Permission issues**:\n```bash\n# Fix volume permissions\nsudo chown -R 999:999 /var/lib/docker/volumes/appwrite_*\n```\n\n3. **Memory issues**:\n```bash\n# Check memory usage\ndocker stats\n\n# Increase memory limits in docker-compose.yml\n```\n\n### Debug Mode\n\nEnable debug mode in `.env`:\n```bash\n_APP_ENV=development\n_APP_DEBUG=true\n```\n\n## Maintenance\n\n### Updates\n\n```bash\n# Backup first\n./backup.sh\n\n# Pull latest images\ndocker-compose pull\n\n# Restart services\ndocker-compose down\ndocker-compose up -d\n```\n\n### Cleanup\n\n```bash\n# Remove unused images\ndocker image prune -a\n\n# Clean build cache\ndocker builder prune\n\n# Remove old logs\ndocker-compose logs --tail=0 > /dev/null\n```\n\n## SDK Integration\n\n### JavaScript/Node.js\n\n```javascript\nconst sdk = require('node-appwrite');\n\nconst client = new sdk.Client()\n    .setEndpoint('https://your-domain.com/v1')\n    .setProject('your-project-id')\n    .setKey('your-api-key');\n\nconst database = new sdk.Databases(client);\nconst storage = new sdk.Storage(client);\n```\n\n### Python\n\n```python\nfrom appwrite.client import Client\nfrom appwrite.services.databases import Databases\n\nclient = Client()\nclient.set_endpoint('https://your-domain.com/v1')\nclient.set_project('your-project-id')\nclient.set_key('your-api-key')\n\ndatabases = Databases(client)\n```\n\n### Flutter\n\n```dart\nimport 'package:appwrite/appwrite.dart';\n\nfinal client = Client()\n    .setEndpoint('https://your-domain.com/v1')\n    .setProject('your-project-id');\n\nfinal account = Account(client);\nfinal databases = Databases(client);\n```\n\n## Additional Resources\n\n- [Official Documentation](https://appwrite.io/docs)\n- [API Reference](https://appwrite.io/docs/client/account)\n- [GitHub Repository](https://github.com/appwrite/appwrite)\n- [Community Discord](https://appwrite.io/discord)\n- [Docker Hub](https://hub.docker.com/r/appwrite/appwrite)\n- [SDK Libraries](https://appwrite.io/docs/sdks)\n\n---\n\n**Note:** This guide is part of the [HowToMgr](https://howtomgr.github.io) collection. Always refer to official documentation for the most up-to-date information.","readmeHtml":"<h1 id=\"appwrite-installation-guide\" class=\"mobile-header\">Appwrite Installation Guide</h1>\n<p class=\"mobile-paragraph\">Appwrite is an open-source backend-as-a-service platform that provides developers with all the core APIs required to build modern applications. It includes authentication, databases, storage, functions, and real-time capabilities.</p>\n<h2 id=\"prerequisites\" class=\"mobile-header\">Prerequisites</h2>\n<li class=\"mobile-list-item\">Docker and Docker Compose installed</li>\n<li class=\"mobile-list-item\">Minimum 4GB RAM (8GB recommended for production)</li>\n<li class=\"mobile-list-item\">10GB free disk space minimum</li>\n<li class=\"mobile-list-item\">Domain name with DNS configured (for production)</li>\n<li class=\"mobile-list-item\">SSL certificate (Let's Encrypt recommended)</li>\n<h2 id=\"installation\" class=\"mobile-header\">Installation</h2>\n<h3 id=\"docker-compose-installation-recommended\" class=\"mobile-header\">Docker Compose Installation (Recommended)</h3>\n<p class=\"mobile-paragraph\">1. <strong>Download Appwrite</strong>:</p>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Create installation directory\nmkdir -p /opt/appwrite\ncd /opt/appwrite\n\n# Download docker-compose.yml\ncurl -o docker-compose.yml https://appwrite.io/install/compose\n\n# Download .env file\ncurl -o .env https://appwrite.io/install/env</code></pre>\n      </div>\n    </div>\n<p class=\"mobile-paragraph\">2. <strong>Configure Environment</strong>:</p>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Edit environment variables\nnano .env\n\n# Key variables to configure:\n# _APP_ENV=production\n# _APP_DOMAIN=your-domain.com\n# _APP_DOMAIN_TARGET=your-domain.com\n# _APP_REDIS_PASS=your-redis-password\n# _APP_DB_PASS=your-database-password\n# _APP_OPENSSL_KEY_V1=your-32-char-key</code></pre>\n      </div>\n    </div>\n<p class=\"mobile-paragraph\">3. <strong>Generate OpenSSL Key</strong>:</p>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Generate a secure key\nopenssl rand -hex 32</code></pre>\n      </div>\n    </div>\n<p class=\"mobile-paragraph\">4. <strong>Start Appwrite</strong>:</p>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Start services\ndocker-compose up -d\n\n# Check status\ndocker-compose ps\n\n# View logs\ndocker-compose logs -f</code></pre>\n      </div>\n    </div>\n<h3 id=\"manual-docker-installation\" class=\"mobile-header\">Manual Docker Installation</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Create network\ndocker network create appwrite\n\n# Run MariaDB\ndocker run -d \\\n  --name appwrite-mariadb \\\n  --network appwrite \\\n  -e MYSQL_ROOT_PASSWORD=rootpassword \\\n  -e MYSQL_DATABASE=appwrite \\\n  -e MYSQL_USER=appwrite \\\n  -e MYSQL_PASSWORD=password \\\n  -v appwrite-mariadb:/var/lib/mysql \\\n  mariadb:10\n\n# Run Redis\ndocker run -d \\\n  --name appwrite-redis \\\n  --network appwrite \\\n  -v appwrite-redis:/data \\\n  redis:alpine\n\n# Run Appwrite\ndocker run -d \\\n  --name appwrite \\\n  --network appwrite \\\n  -p 80:80 \\\n  -p 443:443 \\\n  -e _APP_ENV=production \\\n  -e _APP_OPENSSL_KEY_V1=your-32-char-key \\\n  -e _APP_DOMAIN=localhost \\\n  -e _APP_DB_HOST=appwrite-mariadb \\\n  -e _APP_DB_PORT=3306 \\\n  -e _APP_DB_SCHEMA=appwrite \\\n  -e _APP_DB_USER=appwrite \\\n  -e _APP_DB_PASS=password \\\n  -e _APP_REDIS_HOST=appwrite-redis \\\n  -e _APP_REDIS_PORT=6379 \\\n  -v appwrite-uploads:/storage/uploads \\\n  -v appwrite-cache:/storage/cache \\\n  -v appwrite-config:/storage/config \\\n  -v appwrite-certificates:/storage/certificates \\\n  -v appwrite-functions:/storage/functions \\\n  appwrite/appwrite</code></pre>\n      </div>\n    </div>\n<h2 id=\"configuration\" class=\"mobile-header\">Configuration</h2>\n<h3 id=\"ssltls-setup\" class=\"mobile-header\">SSL/TLS Setup</h3>\n<p class=\"mobile-paragraph\">1. <strong>Let's Encrypt (Automatic)</strong>:</p>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Appwrite handles SSL automatically for configured domains\n# Ensure ports 80 and 443 are accessible\n# Domain must point to server IP</code></pre>\n      </div>\n    </div>\n<p class=\"mobile-paragraph\">2. <strong>Custom SSL Certificate</strong>:</p>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Copy certificates\ncp /path/to/cert.pem /opt/appwrite/certificates/main.crt\ncp /path/to/key.pem /opt/appwrite/certificates/main.key\n\n# Restart Appwrite\ncd /opt/appwrite\ndocker-compose restart</code></pre>\n      </div>\n    </div>\n<h3 id=\"email-configuration\" class=\"mobile-header\">Email Configuration</h3>\n<p class=\"mobile-paragraph\">Edit <code class=\"mobile-inline-code\">.env</code> file:</p>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\">_APP_SMTP_HOST=smtp.gmail.com\n_APP_SMTP_PORT=587\n_APP_SMTP_SECURE=tls\n_APP_SMTP_USERNAME=your-email@gmail.com\n_APP_SMTP_PASSWORD=your-app-password</code></pre>\n      </div>\n    </div>\n<h3 id=\"storage-configuration\" class=\"mobile-header\">Storage Configuration</h3>\n<p class=\"mobile-paragraph\">1. <strong>Local Storage</strong> (Default):</p>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Storage is handled automatically\n# Files stored in Docker volumes</code></pre>\n      </div>\n    </div>\n<p class=\"mobile-paragraph\">2. <strong>S3 Compatible Storage</strong>:</p>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\">_APP_STORAGE_DEVICE=s3\n_APP_STORAGE_S3_ACCESS_KEY=your-access-key\n_APP_STORAGE_S3_SECRET=your-secret-key\n_APP_STORAGE_S3_REGION=us-east-1\n_APP_STORAGE_S3_BUCKET=appwrite-storage</code></pre>\n      </div>\n    </div>\n<h3 id=\"functions-runtime\" class=\"mobile-header\">Functions Runtime</h3>\n<p class=\"mobile-paragraph\">Enable additional runtimes in <code class=\"mobile-inline-code\">.env</code>:</p>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\">_APP_FUNCTIONS_RUNTIMES=node-18.0,python-3.10,php-8.1,ruby-3.1</code></pre>\n      </div>\n    </div>\n<h2 id=\"security-configuration\" class=\"mobile-header\">Security Configuration</h2>\n<h3 id=\"firewall-rules\" class=\"mobile-header\">Firewall Rules</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Allow HTTP/HTTPS\nsudo ufw allow 80/tcp\nsudo ufw allow 443/tcp\n\n# Allow Appwrite console (if different port)\nsudo ufw allow 8080/tcp</code></pre>\n      </div>\n    </div>\n<h3 id=\"security-headers\" class=\"mobile-header\">Security Headers</h3>\n<p class=\"mobile-paragraph\">Appwrite includes security headers by default:</p>\n<li class=\"mobile-list-item\">Content Security Policy</li>\n<li class=\"mobile-list-item\">X-Frame-Options</li>\n<li class=\"mobile-list-item\">X-Content-Type-Options</li>\n<li class=\"mobile-list-item\">Strict-Transport-Security</li>\n<h3 id=\"api-keys-and-secrets\" class=\"mobile-header\">API Keys and Secrets</h3>\n<p class=\"mobile-paragraph\">1. <strong>Generate secure keys</strong>:</p>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Generate encryption key\nopenssl rand -hex 32\n\n# Generate session secret\nopenssl rand -hex 32</code></pre>\n      </div>\n    </div>\n<p class=\"mobile-paragraph\">2. <strong>Rotate keys regularly</strong>:</p>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Update in .env\n_APP_OPENSSL_KEY_V1=new-key-here\n\n# Restart services\ndocker-compose restart</code></pre>\n      </div>\n    </div>\n<h2 id=\"database-management\" class=\"mobile-header\">Database Management</h2>\n<h3 id=\"backup\" class=\"mobile-header\">Backup</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Backup database\ndocker exec appwrite-mariadb mysqldump -u root -p appwrite &gt; backup.sql\n\n# Backup volumes\ndocker run --rm -v appwrite-mariadb:/data -v $(pwd):/backup ubuntu tar czf /backup/mariadb-backup.tar.gz /data</code></pre>\n      </div>\n    </div>\n<h3 id=\"restore\" class=\"mobile-header\">Restore</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Restore database\ndocker exec -i appwrite-mariadb mysql -u root -p appwrite &lt; backup.sql\n\n# Restore volumes\ndocker run --rm -v appwrite-mariadb:/data -v $(pwd):/backup ubuntu tar xzf /backup/mariadb-backup.tar.gz -C /</code></pre>\n      </div>\n    </div>\n<h2 id=\"performance-optimization\" class=\"mobile-header\">Performance Optimization</h2>\n<h3 id=\"redis-configuration\" class=\"mobile-header\">Redis Configuration</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Edit Redis configuration\ndocker exec -it appwrite-redis redis-cli\n\n# Set max memory\nCONFIG SET maxmemory 2gb\nCONFIG SET maxmemory-policy allkeys-lru</code></pre>\n      </div>\n    </div>\n<h3 id=\"database-optimization\" class=\"mobile-header\">Database Optimization</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Optimize tables\ndocker exec appwrite-mariadb mysqlcheck -u root -p --optimize appwrite\n\n# Configure MariaDB\ndocker exec -it appwrite-mariadb mysql -u root -p\nSET GLOBAL innodb_buffer_pool_size = 1G;\nSET GLOBAL innodb_log_file_size = 256M;</code></pre>\n      </div>\n    </div>\n<h3 id=\"scaling\" class=\"mobile-header\">Scaling</h3>\n<p class=\"mobile-paragraph\">1. <strong>Horizontal Scaling</strong>:</p>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Use Docker Swarm or Kubernetes\n# Configure load balancer\n# Share storage between instances</code></pre>\n      </div>\n    </div>\n<p class=\"mobile-paragraph\">2. <strong>Vertical Scaling</strong>:</p>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Increase container resources\ndocker-compose down\n# Edit docker-compose.yml to add resource limits\ndocker-compose up -d</code></pre>\n      </div>\n    </div>\n<h2 id=\"monitoring\" class=\"mobile-header\">Monitoring</h2>\n<h3 id=\"health-checks\" class=\"mobile-header\">Health Checks</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Check service health\ncurl http://localhost/v1/health\n\n# Check specific services\ncurl http://localhost/v1/health/db\ncurl http://localhost/v1/health/cache\ncurl http://localhost/v1/health/time</code></pre>\n      </div>\n    </div>\n<h3 id=\"logging\" class=\"mobile-header\">Logging</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># View all logs\ndocker-compose logs -f\n\n# View specific service logs\ndocker-compose logs -f appwrite\ndocker-compose logs -f appwrite-worker-database\n\n# Export logs\ndocker-compose logs &gt; appwrite-logs.txt</code></pre>\n      </div>\n    </div>\n<h3 id=\"metrics\" class=\"mobile-header\">Metrics</h3>\n<p class=\"mobile-paragraph\">Enable Prometheus metrics:</p>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\">_APP_PROMETHEUS_ENABLE=enabled</code></pre>\n      </div>\n    </div>\n<h2 id=\"troubleshooting\" class=\"mobile-header\">Troubleshooting</h2>\n<h3 id=\"common-issues\" class=\"mobile-header\">Common Issues</h3>\n<p class=\"mobile-paragraph\">1. <strong>Port conflicts</strong>:</p>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Check port usage\nsudo netstat -tlnp | grep -E &#039;:(80|443|8080)&#039;\n\n# Change ports in docker-compose.yml</code></pre>\n      </div>\n    </div>\n<p class=\"mobile-paragraph\">2. <strong>Permission issues</strong>:</p>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Fix volume permissions\nsudo chown -R 999:999 /var/lib/docker/volumes/appwrite_*</code></pre>\n      </div>\n    </div>\n<p class=\"mobile-paragraph\">3. <strong>Memory issues</strong>:</p>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Check memory usage\ndocker stats\n\n# Increase memory limits in docker-compose.yml</code></pre>\n      </div>\n    </div>\n<h3 id=\"debug-mode\" class=\"mobile-header\">Debug Mode</h3>\n<p class=\"mobile-paragraph\">Enable debug mode in <code class=\"mobile-inline-code\">.env</code>:</p>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\">_APP_ENV=development\n_APP_DEBUG=true</code></pre>\n      </div>\n    </div>\n<h2 id=\"maintenance\" class=\"mobile-header\">Maintenance</h2>\n<h3 id=\"updates\" class=\"mobile-header\">Updates</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Backup first\n./backup.sh\n\n# Pull latest images\ndocker-compose pull\n\n# Restart services\ndocker-compose down\ndocker-compose up -d</code></pre>\n      </div>\n    </div>\n<h3 id=\"cleanup\" class=\"mobile-header\">Cleanup</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Remove unused images\ndocker image prune -a\n\n# Clean build cache\ndocker builder prune\n\n# Remove old logs\ndocker-compose logs --tail=0 &gt; /dev/null</code></pre>\n      </div>\n    </div>\n<h2 id=\"sdk-integration\" class=\"mobile-header\">SDK Integration</h2>\n<h3 id=\"javascriptnodejs\" class=\"mobile-header\">JavaScript/Node.js</h3>\n<div class=\"mobile-code-block\" data-language=\"javascript\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">javascript</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-javascript\">const sdk = require(&#039;node-appwrite&#039;);\n\nconst client = new sdk.Client()\n    .setEndpoint(&#039;https://your-domain.com/v1&#039;)\n    .setProject(&#039;your-project-id&#039;)\n    .setKey(&#039;your-api-key&#039;);\n\nconst database = new sdk.Databases(client);\nconst storage = new sdk.Storage(client);</code></pre>\n      </div>\n    </div>\n<h3 id=\"python\" class=\"mobile-header\">Python</h3>\n<div class=\"mobile-code-block\" data-language=\"python\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">python</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-python\">from appwrite.client import Client\nfrom appwrite.services.databases import Databases\n\nclient = Client()\nclient.set_endpoint(&#039;https://your-domain.com/v1&#039;)\nclient.set_project(&#039;your-project-id&#039;)\nclient.set_key(&#039;your-api-key&#039;)\n\ndatabases = Databases(client)</code></pre>\n      </div>\n    </div>\n<h3 id=\"flutter\" class=\"mobile-header\">Flutter</h3>\n<div class=\"mobile-code-block\" data-language=\"dart\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">dart</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-dart\">import &#039;package:appwrite/appwrite.dart&#039;;\n\nfinal client = Client()\n    .setEndpoint(&#039;https://your-domain.com/v1&#039;)\n    .setProject(&#039;your-project-id&#039;);\n\nfinal account = Account(client);\nfinal databases = Databases(client);</code></pre>\n      </div>\n    </div>\n<h2 id=\"additional-resources\" class=\"mobile-header\">Additional Resources</h2>\n<li class=\"mobile-list-item\"><a href=\"https://appwrite.io/docs\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">Official Documentation</a></li>\n<li class=\"mobile-list-item\"><a href=\"https://appwrite.io/docs/client/account\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">API Reference</a></li>\n<li class=\"mobile-list-item\"><a href=\"https://github.com/appwrite/appwrite\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">GitHub Repository</a></li>\n<li class=\"mobile-list-item\"><a href=\"https://appwrite.io/discord\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">Community Discord</a></li>\n<li class=\"mobile-list-item\"><a href=\"https://hub.docker.com/r/appwrite/appwrite\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">Docker Hub</a></li>\n<li class=\"mobile-list-item\"><a href=\"https://appwrite.io/docs/sdks\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">SDK Libraries</a></li>\n<p class=\"mobile-paragraph\">---</p>\n<p class=\"mobile-paragraph\"><strong>Note:</strong> This guide is part of the <a href=\"https://howtomgr.github.io\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">HowToMgr</a> collection. Always refer to official documentation for the most up-to-date information.</p>","readTime":"5 min","wordCount":969,"lastBuilt":"2025-09-16T02:44:48.111Z"},{"name":"databases","displayName":"Databases","slug":"databases","description":"Comprehensive installation and configuration guide for popular database management systems including MySQL/MariaDB, PostgreSQL, MongoDB, and more. Complete with security hardening and performance optimization for production environments.","category":"database","language":null,"stars":0,"forks":0,"topics":[],"githubUrl":"https://github.com/howtomgr/databases","updatedAt":"2025-09-16T02:31:51Z","createdAt":"2023-08-28T03:47:28Z","readmeRaw":"# Database Installation Guide\n\nComprehensive installation and configuration guide for popular database management systems including MySQL/MariaDB, PostgreSQL, MongoDB, and more. Complete with security hardening and performance optimization for production environments.\n\n## Prerequisites\n\n- Linux system (any modern distribution)\n- Root or sudo access\n- 4GB RAM minimum, 8GB+ recommended for production\n- SSD storage recommended for database files\n- Network connectivity for replication setups (if applicable)\n\n## MySQL/MariaDB Installation\n\n### Ubuntu/Debian\n```bash\n# Update system\nsudo apt update\n\n# Install MariaDB (recommended over MySQL)\nsudo apt install -y mariadb-server mariadb-client\n\n# Or install MySQL\nsudo apt install -y mysql-server mysql-client\n\n# Secure installation\nsudo mysql_secure_installation\n\n# Enable and start service\nsudo systemctl enable --now mariadb  # or mysql\n\n# Verify installation\nmysql --version\nsudo systemctl status mariadb\n```\n\n### RHEL/CentOS/Rocky Linux/AlmaLinux\n```bash\n# Install MariaDB from official repository\nsudo tee /etc/yum.repos.d/MariaDB.repo > /dev/null <<EOF\n[mariadb]\nname = MariaDB\nbaseurl = https://mirror.its.dal.ca/mariadb/yum/10.11/rhel\\$releasever-\\$basearch\nmodule_hotfixes = 1\ngpgkey = https://mirror.its.dal.ca/mariadb/yum/RPM-GPG-KEY-MariaDB\ngpgcheck = 1\nEOF\n\nsudo yum install -y MariaDB-server MariaDB-client MariaDB-backup\n\n# Enable and start service\nsudo systemctl enable --now mariadb\n\n# Secure installation\nsudo mysql_secure_installation\n\n# Configure firewall\nsudo firewall-cmd --permanent --add-service=mysql\nsudo firewall-cmd --reload\n```\n\n### MariaDB Production Configuration\n```bash\n# Create optimized configuration\nsudo tee /etc/mysql/mariadb.conf.d/50-server.cnf > /dev/null <<EOF\n[mysqld]\n# Connection and thread handling\nmax_connections = 500\nthread_cache_size = 100\ntable_open_cache = 4096\ntable_definition_cache = 2048\n\n# InnoDB settings\ninnodb_buffer_pool_size = 4G  # 70-80% of RAM\ninnodb_log_file_size = 1G\ninnodb_log_buffer_size = 64M\ninnodb_file_per_table = 1\ninnodb_flush_log_at_trx_commit = 2\ninnodb_flush_method = O_DIRECT\ninnodb_io_capacity = 2000\ninnodb_io_capacity_max = 4000\ninnodb_read_io_threads = 8\ninnodb_write_io_threads = 8\ninnodb_open_files = 8192\n\n# Query cache (for read-heavy workloads)\nquery_cache_type = 1\nquery_cache_size = 256M\nquery_cache_limit = 2M\n\n# Temporary tables\ntmp_table_size = 64M\nmax_heap_table_size = 64M\n\n# Binary logging (for replication)\nlog_bin = mysql-bin\nbinlog_format = ROW\nsync_binlog = 1\nexpire_logs_days = 7\nbinlog_cache_size = 1M\n\n# Slow query log\nslow_query_log = 1\nslow_query_log_file = /var/log/mysql/slow.log\nlong_query_time = 2\nlog_queries_not_using_indexes = 1\n\n# Security\nbind-address = 127.0.0.1  # Change for network access\nskip_name_resolve = 1\nlocal_infile = 0\n\n# SSL configuration\nssl_cert = /etc/mysql/ssl/server-cert.pem\nssl_key = /etc/mysql/ssl/server-key.pem\nssl_ca = /etc/mysql/ssl/ca-cert.pem\nrequire_secure_transport = ON\n\n# Character set\ncharacter_set_server = utf8mb4\ncollation_server = utf8mb4_unicode_ci\nEOF\n\nsudo systemctl restart mariadb\n```\n\n### MySQL/MariaDB Security Hardening\n```bash\n# Create dedicated database user with limited privileges\nmysql -u root -p <<EOF\n-- Create application database\nCREATE DATABASE myapp CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;\n\n-- Create application user\nCREATE USER 'appuser'@'localhost' IDENTIFIED BY 'secure_app_password_2024';\nCREATE USER 'appuser'@'192.168.1.%' IDENTIFIED BY 'secure_app_password_2024';\n\n-- Grant minimal privileges\nGRANT SELECT, INSERT, UPDATE, DELETE ON myapp.* TO 'appuser'@'localhost';\nGRANT SELECT, INSERT, UPDATE, DELETE ON myapp.* TO 'appuser'@'192.168.1.%';\n\n-- Create read-only user for backups\nCREATE USER 'backup'@'localhost' IDENTIFIED BY 'backup_password_2024';\nGRANT SELECT, LOCK TABLES, SHOW VIEW, EVENT, TRIGGER ON *.* TO 'backup'@'localhost';\n\n-- Create replication user\nCREATE USER 'replication'@'%' IDENTIFIED BY 'replication_password_2024';\nGRANT REPLICATION SLAVE ON *.* TO 'replication'@'%';\n\n-- Remove default users and databases\nDROP DATABASE IF EXISTS test;\nDELETE FROM mysql.user WHERE User='';\nDELETE FROM mysql.user WHERE User='root' AND Host NOT IN ('localhost', '127.0.0.1', '::1');\n\n-- Secure privileges\nFLUSH PRIVILEGES;\nEOF\n\n# Generate SSL certificates for MySQL\nsudo mkdir -p /etc/mysql/ssl\ncd /etc/mysql/ssl\n\n# Create CA certificate\nsudo openssl genrsa -out ca-key.pem 4096\nsudo openssl req -new -x509 -nodes -days 3650 -key ca-key.pem -out ca-cert.pem -subj \"/C=US/ST=State/L=City/O=Organization/CN=MySQL-CA\"\n\n# Create server certificate\nsudo openssl req -newkey rsa:4096 -days 365 -nodes -keyout server-key.pem -out server-req.pem -subj \"/C=US/ST=State/L=City/O=Organization/CN=mysql.example.com\"\nsudo openssl x509 -req -days 365 -set_serial 01 -in server-req.pem -out server-cert.pem -CA ca-cert.pem -CAkey ca-key.pem\n\n# Create client certificate\nsudo openssl req -newkey rsa:4096 -days 365 -nodes -keyout client-key.pem -out client-req.pem -subj \"/C=US/ST=State/L=City/O=Organization/CN=mysql-client\"\nsudo openssl x509 -req -days 365 -set_serial 02 -in client-req.pem -out client-cert.pem -CA ca-cert.pem -CAkey ca-key.pem\n\n# Set permissions\nsudo chown mysql:mysql /etc/mysql/ssl/*\nsudo chmod 600 /etc/mysql/ssl/*key.pem\nsudo chmod 644 /etc/mysql/ssl/*.pem\n\nsudo systemctl restart mariadb\n```\n\n## PostgreSQL Installation\n\n### Ubuntu/Debian PostgreSQL Setup\n```bash\n# Install PostgreSQL official repository\nsudo apt install -y wget ca-certificates\nwget --quiet -O - https://www.postgresql.org/media/keys/ACCC4CF8.asc | sudo apt-key add -\necho \"deb http://apt.postgresql.org/pub/repos/apt/ $(lsb_release -cs)-pgdg main\" | sudo tee /etc/apt/sources.list.d/pgdg.list\n\n# Update and install PostgreSQL 16\nsudo apt update\nsudo apt install -y postgresql-16 postgresql-client-16 postgresql-contrib-16\n\n# Enable and start service\nsudo systemctl enable --now postgresql\n\n# Configure PostgreSQL\nsudo -u postgres psql <<EOF\n-- Create application database\nCREATE DATABASE myapp WITH ENCODING='UTF8' LC_COLLATE='en_US.UTF-8' LC_CTYPE='en_US.UTF-8' TEMPLATE=template0;\n\n-- Create application user\nCREATE USER appuser WITH ENCRYPTED PASSWORD 'secure_app_password_2024';\nGRANT ALL PRIVILEGES ON DATABASE myapp TO appuser;\n\n-- Create read-only user\nCREATE USER readonly WITH ENCRYPTED PASSWORD 'readonly_password_2024';\nGRANT CONNECT ON DATABASE myapp TO readonly;\n\\c myapp\nGRANT USAGE ON SCHEMA public TO readonly;\nGRANT SELECT ON ALL TABLES IN SCHEMA public TO readonly;\nALTER DEFAULT PRIVILEGES IN SCHEMA public GRANT SELECT ON TABLES TO readonly;\n\n-- Security settings\nALTER SYSTEM SET password_encryption = 'scram-sha-256';\nSELECT pg_reload_conf();\nEOF\n```\n\n### RHEL/CentOS/Rocky Linux PostgreSQL\n```bash\n# Install PostgreSQL repository\nsudo yum install -y https://download.postgresql.org/pub/repos/yum/reporpms/EL-9-x86_64/pgdg-redhat-repo-latest.noarch.rpm\n\n# Install PostgreSQL 16\nsudo yum install -y postgresql16-server postgresql16 postgresql16-contrib postgresql16-devel\n\n# Initialize database\nsudo /usr/pgsql-16/bin/postgresql-16-setup initdb\n\n# Enable and start service\nsudo systemctl enable --now postgresql-16\n\n# Configure firewall\nsudo firewall-cmd --permanent --add-port=5432/tcp\nsudo firewall-cmd --reload\n```\n\n### PostgreSQL Production Configuration\n```bash\n# Configure PostgreSQL for production\nsudo tee /var/lib/pgsql/16/data/postgresql.conf > /dev/null <<EOF\n# PostgreSQL 16 Production Configuration\n\n# Connection settings\nlisten_addresses = 'localhost'  # Change to '*' for network access\nport = 5432\nmax_connections = 200\nshared_buffers = 2GB  # 25% of RAM\neffective_cache_size = 8GB  # 75% of RAM\n\n# Memory settings\nwork_mem = 16MB\nmaintenance_work_mem = 512MB\ndynamic_shared_memory_type = posix\n\n# WAL settings\nwal_level = replica\nwal_buffers = 64MB\ncheckpoint_completion_target = 0.9\nmax_wal_size = 4GB\nmin_wal_size = 1GB\ncheckpoint_timeout = 15min\n\n# Query planner\nrandom_page_cost = 1.1  # For SSD\neffective_io_concurrency = 200\nmax_worker_processes = 8\nmax_parallel_workers_per_gather = 4\nmax_parallel_workers = 8\nmax_parallel_maintenance_workers = 4\n\n# Logging\nlog_destination = 'stderr'\nlogging_collector = on\nlog_directory = 'log'\nlog_filename = 'postgresql-%Y-%m-%d_%H%M%S.log'\nlog_rotation_age = 1d\nlog_rotation_size = 100MB\nlog_min_duration_statement = 1000  # Log slow queries\nlog_line_prefix = '%t [%p]: [%l-1] user=%u,db=%d,app=%a,client=%h '\nlog_statement = 'ddl'  # Log DDL statements\nlog_lock_waits = on\n\n# SSL configuration\nssl = on\nssl_cert_file = '/var/lib/pgsql/16/data/ssl/server.crt'\nssl_key_file = '/var/lib/pgsql/16/data/ssl/server.key'\nssl_ca_file = '/var/lib/pgsql/16/data/ssl/ca.crt'\nssl_min_protocol_version = 'TLSv1.2'\nssl_prefer_server_ciphers = on\n\n# Security\npassword_encryption = scram-sha-256\nkrb_server_keyfile = ''\ndb_user_namespace = off\nrow_security = on\n\n# Autovacuum\nautovacuum = on\nautovacuum_max_workers = 4\nautovacuum_naptime = 1min\nautovacuum_vacuum_threshold = 50\nautovacuum_analyze_threshold = 50\nautovacuum_vacuum_scale_factor = 0.1\nautovacuum_analyze_scale_factor = 0.05\n\n# Background writer\nbgwriter_delay = 200ms\nbgwriter_lru_maxpages = 100\nbgwriter_lru_multiplier = 2.0\nbgwriter_flush_after = 512kB\n\n# Checkpointer\ncheckpoint_flush_after = 256kB\n\n# Statistics\ntrack_activities = on\ntrack_counts = on\ntrack_io_timing = on\ntrack_functions = all\nstats_temp_directory = 'pg_stat_tmp'\nEOF\n\n# Configure client authentication\nsudo tee /var/lib/pgsql/16/data/pg_hba.conf > /dev/null <<EOF\n# PostgreSQL Client Authentication Configuration\n\n# TYPE  DATABASE        USER            ADDRESS                 METHOD\n\n# Local connections\nlocal   all             postgres                                peer\nlocal   all             all                                     scram-sha-256\n\n# IPv4 local connections\nhost    all             all             127.0.0.1/32            scram-sha-256\n\n# IPv6 local connections  \nhost    all             all             ::1/128                 scram-sha-256\n\n# Network connections (if needed)\nhostssl myapp           appuser         192.168.1.0/24          scram-sha-256\nhostssl myapp           readonly        192.168.1.0/24          scram-sha-256\n\n# Replication connections\nhostssl replication     replication     192.168.1.0/24          scram-sha-256\n\n# Deny all other connections\nhost    all             all             0.0.0.0/0               reject\nEOF\n\n# Generate SSL certificates\nsudo mkdir -p /var/lib/pgsql/16/data/ssl\ncd /var/lib/pgsql/16/data/ssl\n\nsudo openssl genrsa -out ca.key 4096\nsudo openssl req -new -x509 -days 3650 -key ca.key -out ca.crt -subj \"/C=US/ST=State/L=City/O=Organization/CN=PostgreSQL-CA\"\n\nsudo openssl genrsa -out server.key 4096\nsudo openssl req -new -key server.key -out server.csr -subj \"/C=US/ST=State/L=City/O=Organization/CN=postgres.example.com\"\nsudo openssl x509 -req -days 365 -in server.csr -CA ca.crt -CAkey ca.key -CAcreateserial -out server.crt\n\nsudo chown postgres:postgres /var/lib/pgsql/16/data/ssl/*\nsudo chmod 600 /var/lib/pgsql/16/data/ssl/*.key\nsudo chmod 644 /var/lib/pgsql/16/data/ssl/*.crt\n\nsudo systemctl restart postgresql-16\n```\n\n### PostgreSQL Security Hardening\n```bash\n# Advanced security configuration\nsudo -u postgres psql <<EOF\n-- Enable row-level security\nALTER SYSTEM SET row_security = on;\n\n-- Configure logging for security\nALTER SYSTEM SET log_statement = 'all';\nALTER SYSTEM SET log_connections = on;\nALTER SYSTEM SET log_disconnections = on;\nALTER SYSTEM SET log_lock_waits = on;\nALTER SYSTEM SET log_temp_files = 0;\n\n-- Password policies\nALTER SYSTEM SET password_encryption = 'scram-sha-256';\n\n-- Create roles with specific privileges\nCREATE ROLE app_read;\nGRANT CONNECT ON DATABASE myapp TO app_read;\nGRANT USAGE ON SCHEMA public TO app_read;\nGRANT SELECT ON ALL TABLES IN SCHEMA public TO app_read;\n\nCREATE ROLE app_write;\nGRANT app_read TO app_write;\nGRANT INSERT, UPDATE, DELETE ON ALL TABLES IN SCHEMA public TO app_write;\n\n-- Create application-specific user\nCREATE USER myapp_user WITH PASSWORD 'secure_password_2024';\nGRANT app_write TO myapp_user;\n\n-- Security functions\nCREATE OR REPLACE FUNCTION audit_trigger_function()\nRETURNS TRIGGER AS \\$\\$\nBEGIN\n    INSERT INTO audit_log (table_name, operation, old_values, new_values, user_name, timestamp)\n    VALUES (TG_TABLE_NAME, TG_OP, row_to_json(OLD), row_to_json(NEW), current_user, now());\n    RETURN COALESCE(NEW, OLD);\nEND;\n\\$\\$ LANGUAGE plpgsql;\n\n-- Reload configuration\nSELECT pg_reload_conf();\nEOF\n\n# Configure connection limits\nsudo tee -a /var/lib/pgsql/16/data/postgresql.conf > /dev/null <<EOF\n\n# Connection limiting per user/database\n# ALTER USER myapp_user CONNECTION LIMIT 50;\n# ALTER DATABASE myapp CONNECTION LIMIT 100;\nEOF\n```\n\n## MongoDB Installation\n\n### Ubuntu/Debian MongoDB Setup\n```bash\n# Import MongoDB public GPG key\nwget -qO - https://www.mongodb.org/static/pgp/server-7.0.asc | sudo apt-key add -\n\n# Add MongoDB repository\necho \"deb [ arch=amd64,arm64 ] https://repo.mongodb.org/apt/ubuntu $(lsb_release -cs)/mongodb-org/7.0 multiverse\" | sudo tee /etc/apt/sources.list.d/mongodb-org-7.0.list\n\n# Update and install MongoDB\nsudo apt update\nsudo apt install -y mongodb-org\n\n# Enable and start service\nsudo systemctl enable --now mongod\n\n# Verify installation\nmongosh --eval 'db.runCommand(\"connectionStatus\")'\n```\n\n### RHEL/CentOS/Rocky Linux MongoDB\n```bash\n# Add MongoDB repository\nsudo tee /etc/yum.repos.d/mongodb-org-7.0.repo > /dev/null <<EOF\n[mongodb-org-7.0]\nname=MongoDB Repository\nbaseurl=https://repo.mongodb.org/yum/redhat/\\$releasever/mongodb-org/7.0/\\$basearch/\ngpgcheck=1\nenabled=1\ngpgkey=https://www.mongodb.org/static/pgp/server-7.0.asc\nEOF\n\n# Install MongoDB\nsudo yum install -y mongodb-org\n\n# Enable and start service\nsudo systemctl enable --now mongod\n\n# Configure firewall\nsudo firewall-cmd --permanent --add-port=27017/tcp\nsudo firewall-cmd --reload\n```\n\n### MongoDB Production Configuration\n```bash\n# Create secure MongoDB configuration\nsudo tee /etc/mongod.conf > /dev/null <<EOF\n# MongoDB Production Configuration\n\nstorage:\n  dbPath: /var/lib/mongo\n  journal:\n    enabled: true\n  wiredTiger:\n    engineConfig:\n      cacheSizeGB: 4  # 50% of RAM\n      journalCompressor: snappy\n      directoryForIndexes: false\n    collectionConfig:\n      blockCompressor: snappy\n    indexConfig:\n      prefixCompression: true\n\nsystemLog:\n  destination: file\n  logAppend: true\n  path: /var/log/mongodb/mongod.log\n  quiet: false\n  logRotate: reopen\n  component:\n    accessControl:\n      verbosity: 1\n    command:\n      verbosity: 1\n\nnet:\n  port: 27017\n  bindIp: 127.0.0.1  # Change for network access\n  maxIncomingConnections: 1000\n  compression:\n    compressors: snappy,zstd\n  ssl:\n    mode: requireSSL\n    PEMKeyFile: /etc/ssl/mongodb/mongodb.pem\n    CAFile: /etc/ssl/mongodb/ca.pem\n    allowInvalidHostnames: false\n    allowInvalidCertificates: false\n\nsecurity:\n  authorization: enabled\n  keyFile: /etc/mongodb/mongodb-keyfile\n  clusterAuthMode: x509\n  javascriptEnabled: false\n\noperationProfiling:\n  mode: slowOp\n  slowOpThresholdMs: 100\n  slowOpSampleRate: 0.02\n\nreplication:\n  replSetName: rs0\n  enableMajorityReadConcern: true\n\nsharding:\n  clusterRole: shardsvr  # or configsvr for config servers\n\nprocessManagement:\n  fork: true\n  pidFilePath: /var/run/mongodb/mongod.pid\n  timeZoneInfo: /usr/share/zoneinfo\n\nsetParameter:\n  authenticationMechanisms: SCRAM-SHA-1,SCRAM-SHA-256\n  scramIterationCount: 15000\n  failIndexKeyTooLong: false\n  notablescan: 1  # Disable table scans in production\nEOF\n\n# Create MongoDB keyfile for replica set authentication\nsudo openssl rand -base64 756 | sudo tee /etc/mongodb/mongodb-keyfile\nsudo chmod 600 /etc/mongodb/mongodb-keyfile\nsudo chown mongod:mongod /etc/mongodb/mongodb-keyfile\n\n# Generate SSL certificates for MongoDB\nsudo mkdir -p /etc/ssl/mongodb\ncd /etc/ssl/mongodb\n\nsudo openssl genrsa -out ca.key 4096\nsudo openssl req -new -x509 -days 3650 -key ca.key -out ca.pem -subj \"/C=US/ST=State/L=City/O=Organization/CN=MongoDB-CA\"\n\nsudo openssl genrsa -out mongodb.key 4096\nsudo openssl req -new -key mongodb.key -out mongodb.csr -subj \"/C=US/ST=State/L=City/O=Organization/CN=mongodb.example.com\"\nsudo openssl x509 -req -days 365 -in mongodb.csr -CA ca.pem -CAkey ca.key -CAcreateserial -out mongodb.crt\n\n# Combine certificate and key for MongoDB\nsudo cat mongodb.crt mongodb.key | sudo tee mongodb.pem\nsudo chmod 600 /etc/ssl/mongodb/*.key /etc/ssl/mongodb/*.pem\nsudo chown mongod:mongod /etc/ssl/mongodb/*\n\nsudo systemctl restart mongod\n```\n\n### MongoDB Security Setup\n```bash\n# Initialize MongoDB security\nmongosh --ssl --sslPEMKeyFile /etc/ssl/mongodb/mongodb.pem --sslCAFile /etc/ssl/mongodb/ca.pem <<EOF\n// Create admin user\nuse admin\ndb.createUser({\n  user: \"admin\",\n  pwd: \"secure_admin_password_2024\",\n  roles: [\n    { role: \"userAdminAnyDatabase\", db: \"admin\" },\n    { role: \"readWriteAnyDatabase\", db: \"admin\" },\n    { role: \"dbAdminAnyDatabase\", db: \"admin\" },\n    { role: \"clusterAdmin\", db: \"admin\" }\n  ]\n})\n\n// Create application user\nuse myapp\ndb.createUser({\n  user: \"appuser\",\n  pwd: \"secure_app_password_2024\",\n  roles: [\n    { role: \"readWrite\", db: \"myapp\" }\n  ]\n})\n\n// Create read-only user\ndb.createUser({\n  user: \"readonly\",\n  pwd: \"readonly_password_2024\",\n  roles: [\n    { role: \"read\", db: \"myapp\" }\n  ]\n})\n\n// Create backup user\nuse admin\ndb.createUser({\n  user: \"backup\",\n  pwd: \"backup_password_2024\",\n  roles: [\n    { role: \"backup\", db: \"admin\" },\n    { role: \"restore\", db: \"admin\" }\n  ]\n})\n\n// Initialize replica set (if using replication)\nrs.initiate({\n  _id: \"rs0\",\n  members: [\n    { _id: 0, host: \"mongodb1.example.com:27017\", priority: 2 },\n    { _id: 1, host: \"mongodb2.example.com:27017\", priority: 1 },\n    { _id: 2, host: \"mongodb3.example.com:27017\", priority: 1, arbiterOnly: true }\n  ]\n})\nEOF\n```\n\n## Redis Installation and Configuration\n\n### Redis Setup (All Distributions)\n```bash\n# Ubuntu/Debian\nsudo apt install -y redis-server redis-tools\n\n# RHEL/CentOS\nsudo yum install -y redis\n\n# Fedora\nsudo dnf install -y redis\n\n# Arch Linux\nsudo pacman -S redis\n\n# Configure Redis for production\nsudo tee /etc/redis/redis.conf > /dev/null <<EOF\n# Redis Production Configuration\n\n# Network\nbind 127.0.0.1 ::1  # Change for network access\nport 6379\ntcp-backlog 511\ntimeout 300\ntcp-keepalive 300\n\n# Security\nrequirepass redis_secure_password_2024\nrename-command FLUSHDB \"FLUSHDB_9a8b7c6d5e4f3g2h1\"\nrename-command FLUSHALL \"FLUSHALL_h1g2f3e4d5c6b7a8\"\nrename-command DEBUG \"DEBUG_8a7b6c5d4e3f2g1h\"\nrename-command CONFIG \"CONFIG_1h2g3f4e5d6c7b8a\"\n\n# SSL/TLS (Redis 6.0+)\ntls-port 6380\nport 0  # Disable non-TLS port\ntls-cert-file /etc/redis/tls/redis.crt\ntls-key-file /etc/redis/tls/redis.key\ntls-ca-cert-file /etc/redis/tls/ca.crt\ntls-protocols \"TLSv1.2 TLSv1.3\"\ntls-prefer-server-ciphers yes\n\n# Memory management\nmaxmemory 2gb\nmaxmemory-policy allkeys-lru\nmaxmemory-samples 5\n\n# Persistence\nsave 900 1\nsave 300 10\nsave 60 10000\nrdbcompression yes\nrdbchecksum yes\ndbfilename redis.rdb\ndir /var/lib/redis/\n\n# AOF (Append Only File)\nappendonly yes\nappendfilename \"appendonly.aof\"\nappendfsync everysec\nno-appendfsync-on-rewrite no\nauto-aof-rewrite-percentage 100\nauto-aof-rewrite-min-size 64mb\n\n# Logging\nloglevel notice\nlogfile /var/log/redis/redis-server.log\nsyslog-enabled yes\nsyslog-ident redis\n\n# Slow log\nslowlog-log-slower-than 10000\nslowlog-max-len 128\n\n# Latency monitoring\nlatency-monitor-threshold 100\n\n# Client output buffer limits\nclient-output-buffer-limit normal 0 0 0\nclient-output-buffer-limit replica 256mb 64mb 60\nclient-output-buffer-limit pubsub 32mb 8mb 60\n\n# Advanced configuration\nhz 10\ndynamic-hz yes\naof-rewrite-incremental-fsync yes\nrdb-save-incremental-fsync yes\n\n# Lua scripting\nlua-time-limit 5000\nEOF\n\n# Generate Redis TLS certificates\nsudo mkdir -p /etc/redis/tls\ncd /etc/redis/tls\n\nsudo openssl genrsa -out ca.key 4096\nsudo openssl req -new -x509 -days 3650 -key ca.key -out ca.crt -subj \"/C=US/ST=State/L=City/O=Organization/CN=Redis-CA\"\n\nsudo openssl genrsa -out redis.key 4096\nsudo openssl req -new -key redis.key -out redis.csr -subj \"/C=US/ST=State/L=City/O=Organization/CN=redis.example.com\"\nsudo openssl x509 -req -days 365 -in redis.csr -CA ca.crt -CAkey ca.key -CAcreateserial -out redis.crt\n\nsudo chown redis:redis /etc/redis/tls/*\nsudo chmod 600 /etc/redis/tls/*.key\nsudo chmod 644 /etc/redis/tls/*.crt\n\nsudo systemctl restart redis-server\n```\n\n## Database Monitoring and Maintenance\n\n### Comprehensive Database Monitoring\n```bash\nsudo tee /usr/local/bin/database-monitor.sh > /dev/null <<'EOF'\n#!/bin/bash\nMONITOR_LOG=\"/var/log/database-monitor.log\"\n\nlog_message() {\n    echo \"$(date '+%Y-%m-%d %H:%M:%S') - $1\" | tee -a ${MONITOR_LOG}\n}\n\n# MySQL/MariaDB monitoring\nif command -v mysql >/dev/null 2>&1 && systemctl is-active mariadb >/dev/null 2>&1; then\n    log_message \"=== MySQL/MariaDB Monitoring ===\"\n    \n    # Connection count\n    MYSQL_CONNECTIONS=$(mysql -e \"SHOW STATUS LIKE 'Threads_connected';\" | tail -1 | awk '{print $2}')\n    MYSQL_MAX_CONNECTIONS=$(mysql -e \"SHOW VARIABLES LIKE 'max_connections';\" | tail -1 | awk '{print $2}')\n    log_message \"MySQL connections: ${MYSQL_CONNECTIONS}/${MYSQL_MAX_CONNECTIONS}\"\n    \n    # Query performance\n    SLOW_QUERIES=$(mysql -e \"SHOW STATUS LIKE 'Slow_queries';\" | tail -1 | awk '{print $2}')\n    log_message \"MySQL slow queries: ${SLOW_QUERIES}\"\n    \n    # Buffer pool hit ratio\n    BUFFER_HIT_RATIO=$(mysql -e \"\n      SELECT ROUND((1 - (Innodb_buffer_pool_reads / Innodb_buffer_pool_read_requests)) * 100, 2) as hit_ratio\n      FROM INFORMATION_SCHEMA.GLOBAL_STATUS \n      WHERE VARIABLE_NAME IN ('Innodb_buffer_pool_reads', 'Innodb_buffer_pool_read_requests');\" | tail -1)\n    log_message \"InnoDB buffer pool hit ratio: ${BUFFER_HIT_RATIO}%\"\nfi\n\n# PostgreSQL monitoring\nif command -v psql >/dev/null 2>&1 && systemctl is-active postgresql-16 >/dev/null 2>&1; then\n    log_message \"=== PostgreSQL Monitoring ===\"\n    \n    # Connection count\n    PG_CONNECTIONS=$(sudo -u postgres psql -t -c \"SELECT count(*) FROM pg_stat_activity;\")\n    PG_MAX_CONNECTIONS=$(sudo -u postgres psql -t -c \"SHOW max_connections;\")\n    log_message \"PostgreSQL connections: ${PG_CONNECTIONS}/${PG_MAX_CONNECTIONS}\"\n    \n    # Database size\n    PG_DB_SIZE=$(sudo -u postgres psql -t -c \"SELECT pg_size_pretty(pg_database_size('myapp'));\")\n    log_message \"PostgreSQL database size: ${PG_DB_SIZE}\"\n    \n    # Cache hit ratio\n    PG_CACHE_HIT=$(sudo -u postgres psql -t -c \"\n      SELECT round(sum(blks_hit)*100.0/sum(blks_hit+blks_read), 2) \n      FROM pg_stat_database WHERE datname='myapp';\")\n    log_message \"PostgreSQL cache hit ratio: ${PG_CACHE_HIT}%\"\n    \n    # Long running queries\n    LONG_QUERIES=$(sudo -u postgres psql -t -c \"\n      SELECT count(*) FROM pg_stat_activity \n      WHERE state = 'active' AND now() - query_start > interval '5 minutes';\")\n    log_message \"PostgreSQL long-running queries: ${LONG_QUERIES}\"\nfi\n\n# MongoDB monitoring\nif command -v mongosh >/dev/null 2>&1 && systemctl is-active mongod >/dev/null 2>&1; then\n    log_message \"=== MongoDB Monitoring ===\"\n    \n    # Connection count\n    MONGO_CONNECTIONS=$(mongosh --quiet --eval \"db.serverStatus().connections.current\")\n    MONGO_MAX_CONNECTIONS=$(mongosh --quiet --eval \"db.serverStatus().connections.available\")\n    log_message \"MongoDB connections: ${MONGO_CONNECTIONS}/${MONGO_MAX_CONNECTIONS}\"\n    \n    # Database statistics\n    MONGO_DB_SIZE=$(mongosh myapp --quiet --eval \"Math.round(db.stats().dataSize / 1024 / 1024) + ' MB'\")\n    log_message \"MongoDB database size: ${MONGO_DB_SIZE}\"\n    \n    # OpLog status (for replica sets)\n    if mongosh admin --quiet --eval \"rs.status().ok\" 2>/dev/null | grep -q \"1\"; then\n        OPLOG_SIZE=$(mongosh local --quiet --eval \"Math.round(db.oplog.rs.stats().maxSize / 1024 / 1024) + ' MB'\")\n        log_message \"MongoDB OpLog size: ${OPLOG_SIZE}\"\n    fi\nfi\n\n# Redis monitoring\nif command -v redis-cli >/dev/null 2>&1 && systemctl is-active redis >/dev/null 2>&1; then\n    log_message \"=== Redis Monitoring ===\"\n    \n    # Memory usage\n    REDIS_MEMORY=$(redis-cli info memory | grep used_memory_human: | cut -d: -f2)\n    REDIS_MAX_MEMORY=$(redis-cli config get maxmemory | tail -1)\n    log_message \"Redis memory usage: ${REDIS_MEMORY} / ${REDIS_MAX_MEMORY}\"\n    \n    # Connected clients\n    REDIS_CLIENTS=$(redis-cli info clients | grep connected_clients: | cut -d: -f2)\n    log_message \"Redis connected clients: ${REDIS_CLIENTS}\"\n    \n    # Hit ratio\n    REDIS_HITS=$(redis-cli info stats | grep keyspace_hits: | cut -d: -f2)\n    REDIS_MISSES=$(redis-cli info stats | grep keyspace_misses: | cut -d: -f2)\n    if [ ${REDIS_MISSES} -gt 0 ]; then\n        REDIS_HIT_RATIO=$(echo \"scale=2; ${REDIS_HITS} / (${REDIS_HITS} + ${REDIS_MISSES}) * 100\" | bc)\n        log_message \"Redis hit ratio: ${REDIS_HIT_RATIO}%\"\n    fi\nfi\n\nlog_message \"Database monitoring completed\"\nEOF\n\nsudo chmod +x /usr/local/bin/database-monitor.sh\n\n# Schedule monitoring every 5 minutes\necho \"*/5 * * * * root /usr/local/bin/database-monitor.sh\" | sudo tee -a /etc/crontab\n```\n\n### Database Backup Automation\n```bash\nsudo tee /usr/local/bin/database-backup.sh > /dev/null <<'EOF'\n#!/bin/bash\nBACKUP_DIR=\"/backup/databases\"\nDATE=$(date +%Y%m%d_%H%M%S)\n\nmkdir -p ${BACKUP_DIR}/{mysql,postgresql,mongodb,redis}\n\n# MySQL/MariaDB backup\nif command -v mysql >/dev/null 2>&1 && systemctl is-active mariadb >/dev/null 2>&1; then\n    echo \"Backing up MySQL/MariaDB...\"\n    \n    # Full backup with all databases\n    mysqldump --all-databases --single-transaction --routines --triggers --events \\\n      --master-data=2 --flush-logs --delete-master-logs \\\n      > ${BACKUP_DIR}/mysql/full-backup-${DATE}.sql\n    \n    # Compress backup\n    gzip ${BACKUP_DIR}/mysql/full-backup-${DATE}.sql\n    \n    # Individual database backup\n    mysqldump --single-transaction --routines --triggers myapp \\\n      > ${BACKUP_DIR}/mysql/myapp-backup-${DATE}.sql\n    gzip ${BACKUP_DIR}/mysql/myapp-backup-${DATE}.sql\nfi\n\n# PostgreSQL backup\nif command -v pg_dump >/dev/null 2>&1 && systemctl is-active postgresql-16 >/dev/null 2>&1; then\n    echo \"Backing up PostgreSQL...\"\n    \n    # Full cluster backup\n    sudo -u postgres pg_dumpall > ${BACKUP_DIR}/postgresql/cluster-backup-${DATE}.sql\n    \n    # Individual database backup\n    sudo -u postgres pg_dump -Fc myapp > ${BACKUP_DIR}/postgresql/myapp-backup-${DATE}.dump\n    \n    # Compress SQL backup\n    gzip ${BACKUP_DIR}/postgresql/cluster-backup-${DATE}.sql\nfi\n\n# MongoDB backup\nif command -v mongodump >/dev/null 2>&1 && systemctl is-active mongod >/dev/null 2>&1; then\n    echo \"Backing up MongoDB...\"\n    \n    # Full backup\n    mongodump --host localhost:27017 --ssl \\\n      --sslPEMKeyFile /etc/ssl/mongodb/mongodb.pem \\\n      --sslCAFile /etc/ssl/mongodb/ca.pem \\\n      --out ${BACKUP_DIR}/mongodb/full-backup-${DATE}\n    \n    # Individual database backup\n    mongodump --host localhost:27017 --ssl \\\n      --sslPEMKeyFile /etc/ssl/mongodb/mongodb.pem \\\n      --sslCAFile /etc/ssl/mongodb/ca.pem \\\n      --db myapp --out ${BACKUP_DIR}/mongodb/myapp-backup-${DATE}\n    \n    # Compress backups\n    tar -czf ${BACKUP_DIR}/mongodb/full-backup-${DATE}.tar.gz -C ${BACKUP_DIR}/mongodb full-backup-${DATE}\n    tar -czf ${BACKUP_DIR}/mongodb/myapp-backup-${DATE}.tar.gz -C ${BACKUP_DIR}/mongodb myapp-backup-${DATE}\n    \n    # Remove uncompressed directories\n    rm -rf ${BACKUP_DIR}/mongodb/full-backup-${DATE} ${BACKUP_DIR}/mongodb/myapp-backup-${DATE}\nfi\n\n# Redis backup\nif command -v redis-cli >/dev/null 2>&1 && systemctl is-active redis >/dev/null 2>&1; then\n    echo \"Backing up Redis...\"\n    \n    # Trigger background save\n    redis-cli BGSAVE\n    \n    # Wait for save to complete\n    while [ \"$(redis-cli LASTSAVE)\" = \"$(redis-cli LASTSAVE)\" ]; do\n        sleep 1\n    done\n    \n    # Copy RDB file\n    cp /var/lib/redis/dump.rdb ${BACKUP_DIR}/redis/redis-backup-${DATE}.rdb\n    gzip ${BACKUP_DIR}/redis/redis-backup-${DATE}.rdb\nfi\n\n# Upload to cloud storage\naws s3 cp ${BACKUP_DIR}/ s3://database-backups/ --recursive\naz storage blob upload-batch --source ${BACKUP_DIR} --destination database-backups\ngsutil cp -r ${BACKUP_DIR}/* gs://database-backups/\n\n# Keep only last 14 days of backups\nfind ${BACKUP_DIR} -name \"*backup*\" -type f -mtime +14 -delete\n\n# Verify backup integrity\necho \"Verifying backup integrity...\"\nfor backup in ${BACKUP_DIR}/*/*.gz; do\n    if gzip -t \"$backup\" 2>/dev/null; then\n        echo \"âœ“ $(basename $backup) - OK\"\n    else\n        echo \"âœ— $(basename $backup) - CORRUPTED\"\n    fi\ndone\n\necho \"Database backup completed: ${DATE}\"\nEOF\n\nsudo chmod +x /usr/local/bin/database-backup.sh\n\n# Schedule daily backups\necho \"0 1 * * * root /usr/local/bin/database-backup.sh\" | sudo tee -a /etc/crontab\n```\n\n## High Availability and Replication\n\n### MySQL/MariaDB Master-Slave Replication\n```bash\n# Configure master server\nsudo tee -a /etc/mysql/mariadb.conf.d/replication.cnf > /dev/null <<EOF\n[mysqld]\n# Replication settings\nserver-id = 1\nlog_bin = mysql-bin\nbinlog_format = ROW\nbinlog_do_db = myapp\nsync_binlog = 1\nrelay-log = mysql-relay-bin\nrelay-log-recovery = 1\n\n# GTID replication (recommended)\ngtid_mode = ON\nenforce_gtid_consistency = ON\nlog_slave_updates = ON\nEOF\n\nmysql -u root -p <<EOF\n-- Create replication user\nCREATE USER 'replication'@'%' IDENTIFIED BY 'replication_password_2024';\nGRANT REPLICATION SLAVE ON *.* TO 'replication'@'%';\nFLUSH PRIVILEGES;\n\n-- Get master status\nSHOW MASTER STATUS;\nEOF\n\n# Configure slave server (server-id = 2)\n# On slave server:\nmysql -u root -p <<EOF\nCHANGE MASTER TO\n  MASTER_HOST='mysql-master.example.com',\n  MASTER_USER='replication',\n  MASTER_PASSWORD='replication_password_2024',\n  MASTER_AUTO_POSITION=1;\n\nSTART SLAVE;\nSHOW SLAVE STATUS\\G\nEOF\n```\n\n### PostgreSQL Streaming Replication\n```bash\n# Configure master server\nsudo tee -a /var/lib/pgsql/16/data/postgresql.conf > /dev/null <<EOF\n# Replication settings\nwal_level = replica\nmax_wal_senders = 10\nmax_replication_slots = 10\nwal_keep_size = 1GB\nhot_standby = on\narchive_mode = on\narchive_command = 'cp %p /var/lib/pgsql/16/archive/%f'\nEOF\n\n# Configure replication access\nsudo tee -a /var/lib/pgsql/16/data/pg_hba.conf > /dev/null <<EOF\n# Replication connections\nhostssl replication replication 192.168.1.0/24 scram-sha-256\nEOF\n\n# Create replication user\nsudo -u postgres psql <<EOF\nCREATE USER replication WITH REPLICATION ENCRYPTED PASSWORD 'replication_password_2024';\nEOF\n\n# Create archive directory\nsudo mkdir -p /var/lib/pgsql/16/archive\nsudo chown postgres:postgres /var/lib/pgsql/16/archive\n\nsudo systemctl restart postgresql-16\n\n# Setup slave server\n# On slave server, create base backup:\nsudo -u postgres pg_basebackup -h master.example.com -D /var/lib/pgsql/16/data -U replication -W -v -P -R\n```\n\n### MongoDB Replica Set Configuration\n```bash\n# Initialize replica set (run on primary node)\nmongosh admin <<EOF\nrs.initiate({\n  _id: \"rs0\",\n  version: 1,\n  protocolVersion: 1,\n  members: [\n    { \n      _id: 0, \n      host: \"mongodb1.example.com:27017\",\n      priority: 2,\n      votes: 1\n    },\n    { \n      _id: 1, \n      host: \"mongodb2.example.com:27017\",\n      priority: 1,\n      votes: 1\n    },\n    { \n      _id: 2, \n      host: \"mongodb3.example.com:27017\",\n      priority: 1,\n      votes: 1,\n      arbiterOnly: true\n    }\n  ],\n  settings: {\n    chainingAllowed: false,\n    heartbeatIntervalMillis: 2000,\n    heartbeatTimeoutSecs: 10,\n    electionTimeoutMillis: 10000,\n    catchUpTimeoutMillis: -1,\n    getLastErrorModes: {\n      majority: { \n        tags: { \n          dc: 1 \n        } \n      }\n    }\n  }\n})\n\n// Check replica set status\nrs.status()\n\n// Configure read preferences\nrs.conf()\nEOF\n\n# Configure MongoDB sharding (for large deployments)\n# Config server initialization:\nmongosh admin <<EOF\nrs.initiate({\n  _id: \"configReplSet\",\n  configsvr: true,\n  members: [\n    { _id: 0, host: \"config1.example.com:27019\" },\n    { _id: 1, host: \"config2.example.com:27019\" },\n    { _id: 2, host: \"config3.example.com:27019\" }\n  ]\n})\nEOF\n```\n\n### Redis Sentinel High Availability\n```bash\n# Configure Redis Sentinel for HA\nsudo tee /etc/redis/sentinel.conf > /dev/null <<EOF\n# Redis Sentinel Configuration\nport 26379\nsentinel deny-scripts-reconfig yes\n\n# Monitor Redis master\nsentinel monitor mymaster redis-master.example.com 6379 2\nsentinel auth-pass mymaster redis_secure_password_2024\nsentinel down-after-milliseconds mymaster 5000\nsentinel parallel-syncs mymaster 1\nsentinel failover-timeout mymaster 10000\n\n# Notification scripts\nsentinel notification-script mymaster /etc/redis/notify.sh\nsentinel client-reconfig-script mymaster /etc/redis/reconfig.sh\n\n# Security\nrequirepass sentinel_password_2024\nEOF\n\n# Create notification script\nsudo tee /etc/redis/notify.sh > /dev/null <<'EOF'\n#!/bin/bash\necho \"$(date): Redis failover event: $*\" >> /var/log/redis/sentinel.log\n# Add alerting logic here (email, Slack, etc.)\nEOF\n\n# Create reconfiguration script\nsudo tee /etc/redis/reconfig.sh > /dev/null <<'EOF'\n#!/bin/bash\necho \"$(date): Redis master changed to: $6:$7\" >> /var/log/redis/sentinel.log\n# Update application configuration, restart services, etc.\nEOF\n\nsudo chmod +x /etc/redis/{notify,reconfig}.sh\nsudo systemctl enable --now redis-sentinel\n```\n\n## Performance Optimization\n\n### Database Performance Tuning\n```bash\nsudo tee /usr/local/bin/database-performance-tune.sh > /dev/null <<'EOF'\n#!/bin/bash\n\ntune_mysql() {\n    echo \"Tuning MySQL/MariaDB performance...\"\n    \n    # Calculate optimal buffer pool size (70% of RAM)\n    TOTAL_RAM=$(free -b | awk 'NR==2{print $2}')\n    BUFFER_POOL_SIZE=$((TOTAL_RAM * 70 / 100))\n    \n    mysql -u root -p <<EOF\n-- Performance tuning\nSET GLOBAL innodb_buffer_pool_size = ${BUFFER_POOL_SIZE};\nSET GLOBAL query_cache_size = $((TOTAL_RAM * 5 / 100));\nSET GLOBAL thread_cache_size = 100;\nSET GLOBAL table_open_cache = 4096;\nSET GLOBAL innodb_io_capacity = 2000;\n\n-- Show current configuration\nSHOW VARIABLES LIKE 'innodb_buffer_pool_size';\nSHOW VARIABLES LIKE 'query_cache_size';\nEOF\n}\n\ntune_postgresql() {\n    echo \"Tuning PostgreSQL performance...\"\n    \n    # Use pg_tune recommendations\n    TOTAL_RAM_MB=$(($(free -m | awk 'NR==2{print $2}')))\n    SHARED_BUFFERS=$((TOTAL_RAM_MB / 4))\n    EFFECTIVE_CACHE=$((TOTAL_RAM_MB * 3 / 4))\n    \n    sudo -u postgres psql <<EOF\n-- Performance tuning\nALTER SYSTEM SET shared_buffers = '${SHARED_BUFFERS}MB';\nALTER SYSTEM SET effective_cache_size = '${EFFECTIVE_CACHE}MB';\nALTER SYSTEM SET work_mem = '16MB';\nALTER SYSTEM SET maintenance_work_mem = '256MB';\nALTER SYSTEM SET random_page_cost = 1.1;\nALTER SYSTEM SET effective_io_concurrency = 200;\n\n-- Reload configuration\nSELECT pg_reload_conf();\n\n-- Show current settings\nSHOW shared_buffers;\nSHOW effective_cache_size;\nEOF\n}\n\ntune_mongodb() {\n    echo \"Tuning MongoDB performance...\"\n    \n    # Calculate WiredTiger cache size (50% of RAM)\n    TOTAL_RAM_GB=$(($(free -g | awk 'NR==2{print $2}')))\n    CACHE_SIZE_GB=$((TOTAL_RAM_GB / 2))\n    \n    mongosh admin <<EOF\n// Performance tuning\ndb.adminCommand({\n  \"setParameter\": 1,\n  \"wiredTigerEngineRuntimeConfig\": \"cache_size=${CACHE_SIZE_GB}GB\"\n})\n\n// Show current cache usage\ndb.serverStatus().wiredTiger.cache\nEOF\n}\n\ntune_redis() {\n    echo \"Tuning Redis performance...\"\n    \n    # Calculate maxmemory (50% of RAM for dedicated Redis server)\n    TOTAL_RAM_BYTES=$(free -b | awk 'NR==2{print $2}')\n    MAX_MEMORY_BYTES=$((TOTAL_RAM_BYTES / 2))\n    \n    redis-cli CONFIG SET maxmemory ${MAX_MEMORY_BYTES}\n    redis-cli CONFIG SET maxmemory-policy allkeys-lru\n    redis-cli CONFIG REWRITE\n    \n    echo \"Redis maxmemory set to $(redis-cli CONFIG GET maxmemory | tail -1) bytes\"\n}\n\n# Check which databases are running and tune them\nif systemctl is-active mariadb >/dev/null 2>&1; then\n    tune_mysql\nfi\n\nif systemctl is-active postgresql-16 >/dev/null 2>&1; then\n    tune_postgresql\nfi\n\nif systemctl is-active mongod >/dev/null 2>&1; then\n    tune_mongodb\nfi\n\nif systemctl is-active redis >/dev/null 2>&1; then\n    tune_redis\nfi\n\necho \"Database performance tuning completed\"\nEOF\n\nsudo chmod +x /usr/local/bin/database-performance-tune.sh\n```\n\n## Verification and Testing\n\n### Database Health Checks\n```bash\nsudo tee /usr/local/bin/database-health-check.sh > /dev/null <<'EOF'\n#!/bin/bash\nHEALTH_LOG=\"/var/log/database-health.log\"\n\nlog_message() {\n    echo \"$(date '+%Y-%m-%d %H:%M:%S') - $1\" | tee -a ${HEALTH_LOG}\n}\n\n# MySQL/MariaDB health check\nif command -v mysql >/dev/null 2>&1; then\n    if systemctl is-active mariadb >/dev/null 2>&1; then\n        log_message \"âœ“ MariaDB service is running\"\n        \n        # Test connectivity\n        if mysql -e \"SELECT 1;\" >/dev/null 2>&1; then\n            log_message \"âœ“ MariaDB connectivity test passed\"\n        else\n            log_message \"âœ— MariaDB connectivity test failed\"\n        fi\n        \n        # Check for errors in log\n        ERROR_COUNT=$(tail -100 /var/log/mysql/error.log | grep -i error | wc -l)\n        log_message \"â„¹ MariaDB errors in last 100 log lines: ${ERROR_COUNT}\"\n    else\n        log_message \"âœ— MariaDB service is not running\"\n    fi\nfi\n\n# PostgreSQL health check\nif command -v psql >/dev/null 2>&1; then\n    if systemctl is-active postgresql-16 >/dev/null 2>&1; then\n        log_message \"âœ“ PostgreSQL service is running\"\n        \n        # Test connectivity\n        if sudo -u postgres psql -c \"SELECT version();\" >/dev/null 2>&1; then\n            log_message \"âœ“ PostgreSQL connectivity test passed\"\n        else\n            log_message \"âœ— PostgreSQL connectivity test failed\"\n        fi\n        \n        # Check replication lag (if slave)\n        if sudo -u postgres psql -t -c \"SELECT pg_is_in_recovery();\" | grep -q \"t\"; then\n            LAG=$(sudo -u postgres psql -t -c \"SELECT EXTRACT(EPOCH FROM (now() - pg_last_xact_replay_timestamp()))::int;\")\n            log_message \"â„¹ PostgreSQL replication lag: ${LAG} seconds\"\n        fi\n    else\n        log_message \"âœ— PostgreSQL service is not running\"\n    fi\nfi\n\n# MongoDB health check\nif command -v mongosh >/dev/null 2>&1; then\n    if systemctl is-active mongod >/dev/null 2>&1; then\n        log_message \"âœ“ MongoDB service is running\"\n        \n        # Test connectivity\n        if mongosh --quiet --eval \"db.adminCommand('ping').ok\" 2>/dev/null | grep -q \"1\"; then\n            log_message \"âœ“ MongoDB connectivity test passed\"\n        else\n            log_message \"âœ— MongoDB connectivity test failed\"\n        fi\n        \n        # Check replica set status\n        if mongosh admin --quiet --eval \"rs.status().ok\" 2>/dev/null | grep -q \"1\"; then\n            PRIMARY_COUNT=$(mongosh admin --quiet --eval \"rs.status().members.filter(m => m.stateStr === 'PRIMARY').length\")\n            log_message \"â„¹ MongoDB replica set has ${PRIMARY_COUNT} primary node(s)\"\n        fi\n    else\n        log_message \"âœ— MongoDB service is not running\"\n    fi\nfi\n\n# Redis health check\nif command -v redis-cli >/dev/null 2>&1; then\n    if systemctl is-active redis >/dev/null 2>&1; then\n        log_message \"âœ“ Redis service is running\"\n        \n        # Test connectivity\n        if redis-cli ping | grep -q \"PONG\"; then\n            log_message \"âœ“ Redis connectivity test passed\"\n        else\n            log_message \"âœ— Redis connectivity test failed\"\n        fi\n        \n        # Check memory usage\n        REDIS_MEMORY_PERCENT=$(redis-cli info memory | grep used_memory_rss_human: | cut -d: -f2)\n        log_message \"â„¹ Redis memory usage: ${REDIS_MEMORY_PERCENT}\"\n    else\n        log_message \"âœ— Redis service is not running\"\n    fi\nfi\n\nlog_message \"Database health check completed\"\nEOF\n\nsudo chmod +x /usr/local/bin/database-health-check.sh\n\n# Schedule health checks every 10 minutes\necho \"*/10 * * * * root /usr/local/bin/database-health-check.sh\" | sudo tee -a /etc/crontab\n```\n\n## Troubleshooting (Cross-Platform)\n\n### Common Database Issues\n```bash\n# MySQL/MariaDB troubleshooting\n# Check service status\nsudo systemctl status mariadb\n\n# Check error logs\nsudo tail -f /var/log/mysql/error.log\n\n# Test connectivity\nmysql -u root -p -e \"SELECT version();\"\n\n# Check process list\nmysql -u root -p -e \"SHOW FULL PROCESSLIST;\"\n\n# Check locks\nmysql -u root -p -e \"SHOW ENGINE INNODB STATUS\\G\" | grep -A 20 \"LATEST DETECTED DEADLOCK\"\n\n# Repair tables\nmysqlcheck --all-databases --repair -u root -p\n\n# PostgreSQL troubleshooting\n# Check service status\nsudo systemctl status postgresql-16\n\n# Check logs\nsudo tail -f /var/lib/pgsql/16/data/log/postgresql-*.log\n\n# Test connectivity\nsudo -u postgres psql -c \"SELECT version();\"\n\n# Check active connections\nsudo -u postgres psql -c \"SELECT count(*) FROM pg_stat_activity WHERE state = 'active';\"\n\n# Check locks\nsudo -u postgres psql -c \"SELECT * FROM pg_locks WHERE NOT granted;\"\n\n# Vacuum and analyze\nsudo -u postgres vacuumdb --all --analyze --verbose\n\n# MongoDB troubleshooting\n# Check service status\nsudo systemctl status mongod\n\n# Check logs\nsudo tail -f /var/log/mongodb/mongod.log\n\n# Test connectivity\nmongosh --eval \"db.adminCommand('ping')\"\n\n# Check replica set status\nmongosh admin --eval \"rs.status()\"\n\n# Check database profiler\nmongosh myapp --eval \"db.getProfilingStatus()\"\n\n# Repair database\nmongosh myapp --eval \"db.repairDatabase()\"\n\n# Redis troubleshooting\n# Check service status\nsudo systemctl status redis\n\n# Check logs\nsudo tail -f /var/log/redis/redis-server.log\n\n# Test connectivity\nredis-cli ping\n\n# Check memory stats\nredis-cli info memory\n\n# Check slow log\nredis-cli slowlog get 10\n\n# Monitor commands\nredis-cli monitor\n```\n\n### Advanced Database Debugging\n```bash\n# MySQL/MariaDB debugging\n# Enable general log\nmysql -u root -p -e \"SET GLOBAL general_log = 'ON';\"\nmysql -u root -p -e \"SET GLOBAL log_output = 'FILE';\"\n\n# Performance schema\nmysql -u root -p -e \"SELECT * FROM performance_schema.file_summary_by_event_name WHERE event_name LIKE 'wait/io/file%' ORDER BY sum_timer_wait DESC LIMIT 10;\"\n\n# PostgreSQL debugging\n# Enable query logging\nsudo -u postgres psql -c \"ALTER SYSTEM SET log_statement = 'all';\"\nsudo -u postgres psql -c \"SELECT pg_reload_conf();\"\n\n# Check query performance\nsudo -u postgres psql -c \"SELECT query, calls, total_time, mean_time FROM pg_stat_statements ORDER BY total_time DESC LIMIT 10;\"\n\n# MongoDB debugging\n# Enable profiler\nmongosh myapp --eval \"db.setProfilingLevel(2, { slowms: 100 })\"\n\n# Check slow operations\nmongosh myapp --eval \"db.system.profile.find().sort({ts:-1}).limit(5).pretty()\"\n\n# Redis debugging\n# Enable slow log\nredis-cli CONFIG SET slowlog-log-slower-than 10000\n\n# Check slow operations\nredis-cli SLOWLOG GET 10\n\n# Monitor memory usage\nredis-cli --latency-history -i 1\n```\n\n## Additional Resources\n\n- [MySQL Documentation](https://dev.mysql.com/doc/)\n- [MariaDB Documentation](https://mariadb.com/docs/)\n- [PostgreSQL Documentation](https://www.postgresql.org/docs/)\n- [MongoDB Documentation](https://docs.mongodb.com/)\n- [Redis Documentation](https://redis.io/documentation)\n- [Database Security Cheat Sheet](https://cheatsheetseries.owasp.org/cheatsheets/Database_Security_Cheat_Sheet.html)\n\n---\n\n**Note:** This guide is part of the [HowToMgr](https://howtomgr.github.io) collection.","readmeHtml":"<h1 id=\"database-installation-guide\" class=\"mobile-header\">Database Installation Guide</h1>\n<p class=\"mobile-paragraph\">Comprehensive installation and configuration guide for popular database management systems including MySQL/MariaDB, PostgreSQL, MongoDB, and more. Complete with security hardening and performance optimization for production environments.</p>\n<h2 id=\"prerequisites\" class=\"mobile-header\">Prerequisites</h2>\n<li class=\"mobile-list-item\">Linux system (any modern distribution)</li>\n<li class=\"mobile-list-item\">Root or sudo access</li>\n<li class=\"mobile-list-item\">4GB RAM minimum, 8GB+ recommended for production</li>\n<li class=\"mobile-list-item\">SSD storage recommended for database files</li>\n<li class=\"mobile-list-item\">Network connectivity for replication setups (if applicable)</li>\n<h2 id=\"mysqlmariadb-installation\" class=\"mobile-header\">MySQL/MariaDB Installation</h2>\n<h3 id=\"ubuntudebian\" class=\"mobile-header\">Ubuntu/Debian</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Update system\nsudo apt update\n\n# Install MariaDB (recommended over MySQL)\nsudo apt install -y mariadb-server mariadb-client\n\n# Or install MySQL\nsudo apt install -y mysql-server mysql-client\n\n# Secure installation\nsudo mysql_secure_installation\n\n# Enable and start service\nsudo systemctl enable --now mariadb  # or mysql\n\n# Verify installation\nmysql --version\nsudo systemctl status mariadb</code></pre>\n      </div>\n    </div>\n<h3 id=\"rhelcentosrocky-linuxalmalinux\" class=\"mobile-header\">RHEL/CentOS/Rocky Linux/AlmaLinux</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Install MariaDB from official repository\nsudo tee /etc/yum.repos.d/MariaDB.repo &gt; /dev/null &lt;&lt;EOF\n[mariadb]\nname = MariaDB\nbaseurl = https://mirror.its.dal.ca/mariadb/yum/10.11/rhel\\$releasever-\\$basearch\nmodule_hotfixes = 1\ngpgkey = https://mirror.its.dal.ca/mariadb/yum/RPM-GPG-KEY-MariaDB\ngpgcheck = 1\nEOF\n\nsudo yum install -y MariaDB-server MariaDB-client MariaDB-backup\n\n# Enable and start service\nsudo systemctl enable --now mariadb\n\n# Secure installation\nsudo mysql_secure_installation\n\n# Configure firewall\nsudo firewall-cmd --permanent --add-service=mysql\nsudo firewall-cmd --reload</code></pre>\n      </div>\n    </div>\n<h3 id=\"mariadb-production-configuration\" class=\"mobile-header\">MariaDB Production Configuration</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Create optimized configuration\nsudo tee /etc/mysql/mariadb.conf.d/50-server.cnf &gt; /dev/null &lt;&lt;EOF\n[mysqld]\n# Connection and thread handling\nmax_connections = 500\nthread_cache_size = 100\ntable_open_cache = 4096\ntable_definition_cache = 2048\n\n# InnoDB settings\ninnodb_buffer_pool_size = 4G  # 70-80% of RAM\ninnodb_log_file_size = 1G\ninnodb_log_buffer_size = 64M\ninnodb_file_per_table = 1\ninnodb_flush_log_at_trx_commit = 2\ninnodb_flush_method = O_DIRECT\ninnodb_io_capacity = 2000\ninnodb_io_capacity_max = 4000\ninnodb_read_io_threads = 8\ninnodb_write_io_threads = 8\ninnodb_open_files = 8192\n\n# Query cache (for read-heavy workloads)\nquery_cache_type = 1\nquery_cache_size = 256M\nquery_cache_limit = 2M\n\n# Temporary tables\ntmp_table_size = 64M\nmax_heap_table_size = 64M\n\n# Binary logging (for replication)\nlog_bin = mysql-bin\nbinlog_format = ROW\nsync_binlog = 1\nexpire_logs_days = 7\nbinlog_cache_size = 1M\n\n# Slow query log\nslow_query_log = 1\nslow_query_log_file = /var/log/mysql/slow.log\nlong_query_time = 2\nlog_queries_not_using_indexes = 1\n\n# Security\nbind-address = 127.0.0.1  # Change for network access\nskip_name_resolve = 1\nlocal_infile = 0\n\n# SSL configuration\nssl_cert = /etc/mysql/ssl/server-cert.pem\nssl_key = /etc/mysql/ssl/server-key.pem\nssl_ca = /etc/mysql/ssl/ca-cert.pem\nrequire_secure_transport = ON\n\n# Character set\ncharacter_set_server = utf8mb4\ncollation_server = utf8mb4_unicode_ci\nEOF\n\nsudo systemctl restart mariadb</code></pre>\n      </div>\n    </div>\n<h3 id=\"mysqlmariadb-security-hardening\" class=\"mobile-header\">MySQL/MariaDB Security Hardening</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Create dedicated database user with limited privileges\nmysql -u root -p &lt;&lt;EOF\n-- Create application database\nCREATE DATABASE myapp CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;\n\n-- Create application user\nCREATE USER &#039;appuser&#039;@&#039;localhost&#039; IDENTIFIED BY &#039;secure_app_password_2024&#039;;\nCREATE USER &#039;appuser&#039;@&#039;192.168.1.%&#039; IDENTIFIED BY &#039;secure_app_password_2024&#039;;\n\n-- Grant minimal privileges\nGRANT SELECT, INSERT, UPDATE, DELETE ON myapp.* TO &#039;appuser&#039;@&#039;localhost&#039;;\nGRANT SELECT, INSERT, UPDATE, DELETE ON myapp.* TO &#039;appuser&#039;@&#039;192.168.1.%&#039;;\n\n-- Create read-only user for backups\nCREATE USER &#039;backup&#039;@&#039;localhost&#039; IDENTIFIED BY &#039;backup_password_2024&#039;;\nGRANT SELECT, LOCK TABLES, SHOW VIEW, EVENT, TRIGGER ON *.* TO &#039;backup&#039;@&#039;localhost&#039;;\n\n-- Create replication user\nCREATE USER &#039;replication&#039;@&#039;%&#039; IDENTIFIED BY &#039;replication_password_2024&#039;;\nGRANT REPLICATION SLAVE ON *.* TO &#039;replication&#039;@&#039;%&#039;;\n\n-- Remove default users and databases\nDROP DATABASE IF EXISTS test;\nDELETE FROM mysql.user WHERE User=&#039;&#039;;\nDELETE FROM mysql.user WHERE User=&#039;root&#039; AND Host NOT IN (&#039;localhost&#039;, &#039;127.0.0.1&#039;, &#039;::1&#039;);\n\n-- Secure privileges\nFLUSH PRIVILEGES;\nEOF\n\n# Generate SSL certificates for MySQL\nsudo mkdir -p /etc/mysql/ssl\ncd /etc/mysql/ssl\n\n# Create CA certificate\nsudo openssl genrsa -out ca-key.pem 4096\nsudo openssl req -new -x509 -nodes -days 3650 -key ca-key.pem -out ca-cert.pem -subj &quot;/C=US/ST=State/L=City/O=Organization/CN=MySQL-CA&quot;\n\n# Create server certificate\nsudo openssl req -newkey rsa:4096 -days 365 -nodes -keyout server-key.pem -out server-req.pem -subj &quot;/C=US/ST=State/L=City/O=Organization/CN=mysql.example.com&quot;\nsudo openssl x509 -req -days 365 -set_serial 01 -in server-req.pem -out server-cert.pem -CA ca-cert.pem -CAkey ca-key.pem\n\n# Create client certificate\nsudo openssl req -newkey rsa:4096 -days 365 -nodes -keyout client-key.pem -out client-req.pem -subj &quot;/C=US/ST=State/L=City/O=Organization/CN=mysql-client&quot;\nsudo openssl x509 -req -days 365 -set_serial 02 -in client-req.pem -out client-cert.pem -CA ca-cert.pem -CAkey ca-key.pem\n\n# Set permissions\nsudo chown mysql:mysql /etc/mysql/ssl/*\nsudo chmod 600 /etc/mysql/ssl/*key.pem\nsudo chmod 644 /etc/mysql/ssl/*.pem\n\nsudo systemctl restart mariadb</code></pre>\n      </div>\n    </div>\n<h2 id=\"postgresql-installation\" class=\"mobile-header\">PostgreSQL Installation</h2>\n<h3 id=\"ubuntudebian-postgresql-setup\" class=\"mobile-header\">Ubuntu/Debian PostgreSQL Setup</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Install PostgreSQL official repository\nsudo apt install -y wget ca-certificates\nwget --quiet -O - https://www.postgresql.org/media/keys/ACCC4CF8.asc | sudo apt-key add -\necho &quot;deb http://apt.postgresql.org/pub/repos/apt/ $(lsb_release -cs)-pgdg main&quot; | sudo tee /etc/apt/sources.list.d/pgdg.list\n\n# Update and install PostgreSQL 16\nsudo apt update\nsudo apt install -y postgresql-16 postgresql-client-16 postgresql-contrib-16\n\n# Enable and start service\nsudo systemctl enable --now postgresql\n\n# Configure PostgreSQL\nsudo -u postgres psql &lt;&lt;EOF\n-- Create application database\nCREATE DATABASE myapp WITH ENCODING=&#039;UTF8&#039; LC_COLLATE=&#039;en_US.UTF-8&#039; LC_CTYPE=&#039;en_US.UTF-8&#039; TEMPLATE=template0;\n\n-- Create application user\nCREATE USER appuser WITH ENCRYPTED PASSWORD &#039;secure_app_password_2024&#039;;\nGRANT ALL PRIVILEGES ON DATABASE myapp TO appuser;\n\n-- Create read-only user\nCREATE USER readonly WITH ENCRYPTED PASSWORD &#039;readonly_password_2024&#039;;\nGRANT CONNECT ON DATABASE myapp TO readonly;\n\\c myapp\nGRANT USAGE ON SCHEMA public TO readonly;\nGRANT SELECT ON ALL TABLES IN SCHEMA public TO readonly;\nALTER DEFAULT PRIVILEGES IN SCHEMA public GRANT SELECT ON TABLES TO readonly;\n\n-- Security settings\nALTER SYSTEM SET password_encryption = &#039;scram-sha-256&#039;;\nSELECT pg_reload_conf();\nEOF</code></pre>\n      </div>\n    </div>\n<h3 id=\"rhelcentosrocky-linux-postgresql\" class=\"mobile-header\">RHEL/CentOS/Rocky Linux PostgreSQL</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Install PostgreSQL repository\nsudo yum install -y https://download.postgresql.org/pub/repos/yum/reporpms/EL-9-x86_64/pgdg-redhat-repo-latest.noarch.rpm\n\n# Install PostgreSQL 16\nsudo yum install -y postgresql16-server postgresql16 postgresql16-contrib postgresql16-devel\n\n# Initialize database\nsudo /usr/pgsql-16/bin/postgresql-16-setup initdb\n\n# Enable and start service\nsudo systemctl enable --now postgresql-16\n\n# Configure firewall\nsudo firewall-cmd --permanent --add-port=5432/tcp\nsudo firewall-cmd --reload</code></pre>\n      </div>\n    </div>\n<h3 id=\"postgresql-production-configuration\" class=\"mobile-header\">PostgreSQL Production Configuration</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Configure PostgreSQL for production\nsudo tee /var/lib/pgsql/16/data/postgresql.conf &gt; /dev/null &lt;&lt;EOF\n# PostgreSQL 16 Production Configuration\n\n# Connection settings\nlisten_addresses = &#039;localhost&#039;  # Change to &#039;*&#039; for network access\nport = 5432\nmax_connections = 200\nshared_buffers = 2GB  # 25% of RAM\neffective_cache_size = 8GB  # 75% of RAM\n\n# Memory settings\nwork_mem = 16MB\nmaintenance_work_mem = 512MB\ndynamic_shared_memory_type = posix\n\n# WAL settings\nwal_level = replica\nwal_buffers = 64MB\ncheckpoint_completion_target = 0.9\nmax_wal_size = 4GB\nmin_wal_size = 1GB\ncheckpoint_timeout = 15min\n\n# Query planner\nrandom_page_cost = 1.1  # For SSD\neffective_io_concurrency = 200\nmax_worker_processes = 8\nmax_parallel_workers_per_gather = 4\nmax_parallel_workers = 8\nmax_parallel_maintenance_workers = 4\n\n# Logging\nlog_destination = &#039;stderr&#039;\nlogging_collector = on\nlog_directory = &#039;log&#039;\nlog_filename = &#039;postgresql-%Y-%m-%d_%H%M%S.log&#039;\nlog_rotation_age = 1d\nlog_rotation_size = 100MB\nlog_min_duration_statement = 1000  # Log slow queries\nlog_line_prefix = &#039;%t [%p]: [%l-1] user=%u,db=%d,app=%a,client=%h &#039;\nlog_statement = &#039;ddl&#039;  # Log DDL statements\nlog_lock_waits = on\n\n# SSL configuration\nssl = on\nssl_cert_file = &#039;/var/lib/pgsql/16/data/ssl/server.crt&#039;\nssl_key_file = &#039;/var/lib/pgsql/16/data/ssl/server.key&#039;\nssl_ca_file = &#039;/var/lib/pgsql/16/data/ssl/ca.crt&#039;\nssl_min_protocol_version = &#039;TLSv1.2&#039;\nssl_prefer_server_ciphers = on\n\n# Security\npassword_encryption = scram-sha-256\nkrb_server_keyfile = &#039;&#039;\ndb_user_namespace = off\nrow_security = on\n\n# Autovacuum\nautovacuum = on\nautovacuum_max_workers = 4\nautovacuum_naptime = 1min\nautovacuum_vacuum_threshold = 50\nautovacuum_analyze_threshold = 50\nautovacuum_vacuum_scale_factor = 0.1\nautovacuum_analyze_scale_factor = 0.05\n\n# Background writer\nbgwriter_delay = 200ms\nbgwriter_lru_maxpages = 100\nbgwriter_lru_multiplier = 2.0\nbgwriter_flush_after = 512kB\n\n# Checkpointer\ncheckpoint_flush_after = 256kB\n\n# Statistics\ntrack_activities = on\ntrack_counts = on\ntrack_io_timing = on\ntrack_functions = all\nstats_temp_directory = &#039;pg_stat_tmp&#039;\nEOF\n\n# Configure client authentication\nsudo tee /var/lib/pgsql/16/data/pg_hba.conf &gt; /dev/null &lt;&lt;EOF\n# PostgreSQL Client Authentication Configuration\n\n# TYPE  DATABASE        USER            ADDRESS                 METHOD\n\n# Local connections\nlocal   all             postgres                                peer\nlocal   all             all                                     scram-sha-256\n\n# IPv4 local connections\nhost    all             all             127.0.0.1/32            scram-sha-256\n\n# IPv6 local connections  \nhost    all             all             ::1/128                 scram-sha-256\n\n# Network connections (if needed)\nhostssl myapp           appuser         192.168.1.0/24          scram-sha-256\nhostssl myapp           readonly        192.168.1.0/24          scram-sha-256\n\n# Replication connections\nhostssl replication     replication     192.168.1.0/24          scram-sha-256\n\n# Deny all other connections\nhost    all             all             0.0.0.0/0               reject\nEOF\n\n# Generate SSL certificates\nsudo mkdir -p /var/lib/pgsql/16/data/ssl\ncd /var/lib/pgsql/16/data/ssl\n\nsudo openssl genrsa -out ca.key 4096\nsudo openssl req -new -x509 -days 3650 -key ca.key -out ca.crt -subj &quot;/C=US/ST=State/L=City/O=Organization/CN=PostgreSQL-CA&quot;\n\nsudo openssl genrsa -out server.key 4096\nsudo openssl req -new -key server.key -out server.csr -subj &quot;/C=US/ST=State/L=City/O=Organization/CN=postgres.example.com&quot;\nsudo openssl x509 -req -days 365 -in server.csr -CA ca.crt -CAkey ca.key -CAcreateserial -out server.crt\n\nsudo chown postgres:postgres /var/lib/pgsql/16/data/ssl/*\nsudo chmod 600 /var/lib/pgsql/16/data/ssl/*.key\nsudo chmod 644 /var/lib/pgsql/16/data/ssl/*.crt\n\nsudo systemctl restart postgresql-16</code></pre>\n      </div>\n    </div>\n<h3 id=\"postgresql-security-hardening\" class=\"mobile-header\">PostgreSQL Security Hardening</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Advanced security configuration\nsudo -u postgres psql &lt;&lt;EOF\n-- Enable row-level security\nALTER SYSTEM SET row_security = on;\n\n-- Configure logging for security\nALTER SYSTEM SET log_statement = &#039;all&#039;;\nALTER SYSTEM SET log_connections = on;\nALTER SYSTEM SET log_disconnections = on;\nALTER SYSTEM SET log_lock_waits = on;\nALTER SYSTEM SET log_temp_files = 0;\n\n-- Password policies\nALTER SYSTEM SET password_encryption = &#039;scram-sha-256&#039;;\n\n-- Create roles with specific privileges\nCREATE ROLE app_read;\nGRANT CONNECT ON DATABASE myapp TO app_read;\nGRANT USAGE ON SCHEMA public TO app_read;\nGRANT SELECT ON ALL TABLES IN SCHEMA public TO app_read;\n\nCREATE ROLE app_write;\nGRANT app_read TO app_write;\nGRANT INSERT, UPDATE, DELETE ON ALL TABLES IN SCHEMA public TO app_write;\n\n-- Create application-specific user\nCREATE USER myapp_user WITH PASSWORD &#039;secure_password_2024&#039;;\nGRANT app_write TO myapp_user;\n\n-- Security functions\nCREATE OR REPLACE FUNCTION audit_trigger_function()\nRETURNS TRIGGER AS \\$\\$\nBEGIN\n    INSERT INTO audit_log (table_name, operation, old_values, new_values, user_name, timestamp)\n    VALUES (TG_TABLE_NAME, TG_OP, row_to_json(OLD), row_to_json(NEW), current_user, now());\n    RETURN COALESCE(NEW, OLD);\nEND;\n\\$\\$ LANGUAGE plpgsql;\n\n-- Reload configuration\nSELECT pg_reload_conf();\nEOF\n\n# Configure connection limits\nsudo tee -a /var/lib/pgsql/16/data/postgresql.conf &gt; /dev/null &lt;&lt;EOF\n\n# Connection limiting per user/database\n# ALTER USER myapp_user CONNECTION LIMIT 50;\n# ALTER DATABASE myapp CONNECTION LIMIT 100;\nEOF</code></pre>\n      </div>\n    </div>\n<h2 id=\"mongodb-installation\" class=\"mobile-header\">MongoDB Installation</h2>\n<h3 id=\"ubuntudebian-mongodb-setup\" class=\"mobile-header\">Ubuntu/Debian MongoDB Setup</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Import MongoDB public GPG key\nwget -qO - https://www.mongodb.org/static/pgp/server-7.0.asc | sudo apt-key add -\n\n# Add MongoDB repository\necho &quot;deb [ arch=amd64,arm64 ] https://repo.mongodb.org/apt/ubuntu $(lsb_release -cs)/mongodb-org/7.0 multiverse&quot; | sudo tee /etc/apt/sources.list.d/mongodb-org-7.0.list\n\n# Update and install MongoDB\nsudo apt update\nsudo apt install -y mongodb-org\n\n# Enable and start service\nsudo systemctl enable --now mongod\n\n# Verify installation\nmongosh --eval &#039;db.runCommand(&quot;connectionStatus&quot;)&#039;</code></pre>\n      </div>\n    </div>\n<h3 id=\"rhelcentosrocky-linux-mongodb\" class=\"mobile-header\">RHEL/CentOS/Rocky Linux MongoDB</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Add MongoDB repository\nsudo tee /etc/yum.repos.d/mongodb-org-7.0.repo &gt; /dev/null &lt;&lt;EOF\n[mongodb-org-7.0]\nname=MongoDB Repository\nbaseurl=https://repo.mongodb.org/yum/redhat/\\$releasever/mongodb-org/7.0/\\$basearch/\ngpgcheck=1\nenabled=1\ngpgkey=https://www.mongodb.org/static/pgp/server-7.0.asc\nEOF\n\n# Install MongoDB\nsudo yum install -y mongodb-org\n\n# Enable and start service\nsudo systemctl enable --now mongod\n\n# Configure firewall\nsudo firewall-cmd --permanent --add-port=27017/tcp\nsudo firewall-cmd --reload</code></pre>\n      </div>\n    </div>\n<h3 id=\"mongodb-production-configuration\" class=\"mobile-header\">MongoDB Production Configuration</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Create secure MongoDB configuration\nsudo tee /etc/mongod.conf &gt; /dev/null &lt;&lt;EOF\n# MongoDB Production Configuration\n\nstorage:\n  dbPath: /var/lib/mongo\n  journal:\n    enabled: true\n  wiredTiger:\n    engineConfig:\n      cacheSizeGB: 4  # 50% of RAM\n      journalCompressor: snappy\n      directoryForIndexes: false\n    collectionConfig:\n      blockCompressor: snappy\n    indexConfig:\n      prefixCompression: true\n\nsystemLog:\n  destination: file\n  logAppend: true\n  path: /var/log/mongodb/mongod.log\n  quiet: false\n  logRotate: reopen\n  component:\n    accessControl:\n      verbosity: 1\n    command:\n      verbosity: 1\n\nnet:\n  port: 27017\n  bindIp: 127.0.0.1  # Change for network access\n  maxIncomingConnections: 1000\n  compression:\n    compressors: snappy,zstd\n  ssl:\n    mode: requireSSL\n    PEMKeyFile: /etc/ssl/mongodb/mongodb.pem\n    CAFile: /etc/ssl/mongodb/ca.pem\n    allowInvalidHostnames: false\n    allowInvalidCertificates: false\n\nsecurity:\n  authorization: enabled\n  keyFile: /etc/mongodb/mongodb-keyfile\n  clusterAuthMode: x509\n  javascriptEnabled: false\n\noperationProfiling:\n  mode: slowOp\n  slowOpThresholdMs: 100\n  slowOpSampleRate: 0.02\n\nreplication:\n  replSetName: rs0\n  enableMajorityReadConcern: true\n\nsharding:\n  clusterRole: shardsvr  # or configsvr for config servers\n\nprocessManagement:\n  fork: true\n  pidFilePath: /var/run/mongodb/mongod.pid\n  timeZoneInfo: /usr/share/zoneinfo\n\nsetParameter:\n  authenticationMechanisms: SCRAM-SHA-1,SCRAM-SHA-256\n  scramIterationCount: 15000\n  failIndexKeyTooLong: false\n  notablescan: 1  # Disable table scans in production\nEOF\n\n# Create MongoDB keyfile for replica set authentication\nsudo openssl rand -base64 756 | sudo tee /etc/mongodb/mongodb-keyfile\nsudo chmod 600 /etc/mongodb/mongodb-keyfile\nsudo chown mongod:mongod /etc/mongodb/mongodb-keyfile\n\n# Generate SSL certificates for MongoDB\nsudo mkdir -p /etc/ssl/mongodb\ncd /etc/ssl/mongodb\n\nsudo openssl genrsa -out ca.key 4096\nsudo openssl req -new -x509 -days 3650 -key ca.key -out ca.pem -subj &quot;/C=US/ST=State/L=City/O=Organization/CN=MongoDB-CA&quot;\n\nsudo openssl genrsa -out mongodb.key 4096\nsudo openssl req -new -key mongodb.key -out mongodb.csr -subj &quot;/C=US/ST=State/L=City/O=Organization/CN=mongodb.example.com&quot;\nsudo openssl x509 -req -days 365 -in mongodb.csr -CA ca.pem -CAkey ca.key -CAcreateserial -out mongodb.crt\n\n# Combine certificate and key for MongoDB\nsudo cat mongodb.crt mongodb.key | sudo tee mongodb.pem\nsudo chmod 600 /etc/ssl/mongodb/*.key /etc/ssl/mongodb/*.pem\nsudo chown mongod:mongod /etc/ssl/mongodb/*\n\nsudo systemctl restart mongod</code></pre>\n      </div>\n    </div>\n<h3 id=\"mongodb-security-setup\" class=\"mobile-header\">MongoDB Security Setup</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Initialize MongoDB security\nmongosh --ssl --sslPEMKeyFile /etc/ssl/mongodb/mongodb.pem --sslCAFile /etc/ssl/mongodb/ca.pem &lt;&lt;EOF\n// Create admin user\nuse admin\ndb.createUser({\n  user: &quot;admin&quot;,\n  pwd: &quot;secure_admin_password_2024&quot;,\n  roles: [\n    { role: &quot;userAdminAnyDatabase&quot;, db: &quot;admin&quot; },\n    { role: &quot;readWriteAnyDatabase&quot;, db: &quot;admin&quot; },\n    { role: &quot;dbAdminAnyDatabase&quot;, db: &quot;admin&quot; },\n    { role: &quot;clusterAdmin&quot;, db: &quot;admin&quot; }\n  ]\n})\n\n// Create application user\nuse myapp\ndb.createUser({\n  user: &quot;appuser&quot;,\n  pwd: &quot;secure_app_password_2024&quot;,\n  roles: [\n    { role: &quot;readWrite&quot;, db: &quot;myapp&quot; }\n  ]\n})\n\n// Create read-only user\ndb.createUser({\n  user: &quot;readonly&quot;,\n  pwd: &quot;readonly_password_2024&quot;,\n  roles: [\n    { role: &quot;read&quot;, db: &quot;myapp&quot; }\n  ]\n})\n\n// Create backup user\nuse admin\ndb.createUser({\n  user: &quot;backup&quot;,\n  pwd: &quot;backup_password_2024&quot;,\n  roles: [\n    { role: &quot;backup&quot;, db: &quot;admin&quot; },\n    { role: &quot;restore&quot;, db: &quot;admin&quot; }\n  ]\n})\n\n// Initialize replica set (if using replication)\nrs.initiate({\n  _id: &quot;rs0&quot;,\n  members: [\n    { _id: 0, host: &quot;mongodb1.example.com:27017&quot;, priority: 2 },\n    { _id: 1, host: &quot;mongodb2.example.com:27017&quot;, priority: 1 },\n    { _id: 2, host: &quot;mongodb3.example.com:27017&quot;, priority: 1, arbiterOnly: true }\n  ]\n})\nEOF</code></pre>\n      </div>\n    </div>\n<h2 id=\"redis-installation-and-configuration\" class=\"mobile-header\">Redis Installation and Configuration</h2>\n<h3 id=\"redis-setup-all-distributions\" class=\"mobile-header\">Redis Setup (All Distributions)</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Ubuntu/Debian\nsudo apt install -y redis-server redis-tools\n\n# RHEL/CentOS\nsudo yum install -y redis\n\n# Fedora\nsudo dnf install -y redis\n\n# Arch Linux\nsudo pacman -S redis\n\n# Configure Redis for production\nsudo tee /etc/redis/redis.conf &gt; /dev/null &lt;&lt;EOF\n# Redis Production Configuration\n\n# Network\nbind 127.0.0.1 ::1  # Change for network access\nport 6379\ntcp-backlog 511\ntimeout 300\ntcp-keepalive 300\n\n# Security\nrequirepass redis_secure_password_2024\nrename-command FLUSHDB &quot;FLUSHDB_9a8b7c6d5e4f3g2h1&quot;\nrename-command FLUSHALL &quot;FLUSHALL_h1g2f3e4d5c6b7a8&quot;\nrename-command DEBUG &quot;DEBUG_8a7b6c5d4e3f2g1h&quot;\nrename-command CONFIG &quot;CONFIG_1h2g3f4e5d6c7b8a&quot;\n\n# SSL/TLS (Redis 6.0+)\ntls-port 6380\nport 0  # Disable non-TLS port\ntls-cert-file /etc/redis/tls/redis.crt\ntls-key-file /etc/redis/tls/redis.key\ntls-ca-cert-file /etc/redis/tls/ca.crt\ntls-protocols &quot;TLSv1.2 TLSv1.3&quot;\ntls-prefer-server-ciphers yes\n\n# Memory management\nmaxmemory 2gb\nmaxmemory-policy allkeys-lru\nmaxmemory-samples 5\n\n# Persistence\nsave 900 1\nsave 300 10\nsave 60 10000\nrdbcompression yes\nrdbchecksum yes\ndbfilename redis.rdb\ndir /var/lib/redis/\n\n# AOF (Append Only File)\nappendonly yes\nappendfilename &quot;appendonly.aof&quot;\nappendfsync everysec\nno-appendfsync-on-rewrite no\nauto-aof-rewrite-percentage 100\nauto-aof-rewrite-min-size 64mb\n\n# Logging\nloglevel notice\nlogfile /var/log/redis/redis-server.log\nsyslog-enabled yes\nsyslog-ident redis\n\n# Slow log\nslowlog-log-slower-than 10000\nslowlog-max-len 128\n\n# Latency monitoring\nlatency-monitor-threshold 100\n\n# Client output buffer limits\nclient-output-buffer-limit normal 0 0 0\nclient-output-buffer-limit replica 256mb 64mb 60\nclient-output-buffer-limit pubsub 32mb 8mb 60\n\n# Advanced configuration\nhz 10\ndynamic-hz yes\naof-rewrite-incremental-fsync yes\nrdb-save-incremental-fsync yes\n\n# Lua scripting\nlua-time-limit 5000\nEOF\n\n# Generate Redis TLS certificates\nsudo mkdir -p /etc/redis/tls\ncd /etc/redis/tls\n\nsudo openssl genrsa -out ca.key 4096\nsudo openssl req -new -x509 -days 3650 -key ca.key -out ca.crt -subj &quot;/C=US/ST=State/L=City/O=Organization/CN=Redis-CA&quot;\n\nsudo openssl genrsa -out redis.key 4096\nsudo openssl req -new -key redis.key -out redis.csr -subj &quot;/C=US/ST=State/L=City/O=Organization/CN=redis.example.com&quot;\nsudo openssl x509 -req -days 365 -in redis.csr -CA ca.crt -CAkey ca.key -CAcreateserial -out redis.crt\n\nsudo chown redis:redis /etc/redis/tls/*\nsudo chmod 600 /etc/redis/tls/*.key\nsudo chmod 644 /etc/redis/tls/*.crt\n\nsudo systemctl restart redis-server</code></pre>\n      </div>\n    </div>\n<h2 id=\"database-monitoring-and-maintenance\" class=\"mobile-header\">Database Monitoring and Maintenance</h2>\n<h3 id=\"comprehensive-database-monitoring\" class=\"mobile-header\">Comprehensive Database Monitoring</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\">sudo tee /usr/local/bin/database-monitor.sh &gt; /dev/null &lt;&lt;&#039;EOF&#039;\n#!/bin/bash\nMONITOR_LOG=&quot;/var/log/database-monitor.log&quot;\n\nlog_message() {\n    echo &quot;$(date &#039;+%Y-%m-%d %H:%M:%S&#039;) - $1&quot; | tee -a ${MONITOR_LOG}\n}\n\n# MySQL/MariaDB monitoring\nif command -v mysql &gt;/dev/null 2&gt;&amp;1 &amp;&amp; systemctl is-active mariadb &gt;/dev/null 2&gt;&amp;1; then\n    log_message &quot;=== MySQL/MariaDB Monitoring ===&quot;\n    \n    # Connection count\n    MYSQL_CONNECTIONS=$(mysql -e &quot;SHOW STATUS LIKE &#039;Threads_connected&#039;;&quot; | tail -1 | awk &#039;{print $2}&#039;)\n    MYSQL_MAX_CONNECTIONS=$(mysql -e &quot;SHOW VARIABLES LIKE &#039;max_connections&#039;;&quot; | tail -1 | awk &#039;{print $2}&#039;)\n    log_message &quot;MySQL connections: ${MYSQL_CONNECTIONS}/${MYSQL_MAX_CONNECTIONS}&quot;\n    \n    # Query performance\n    SLOW_QUERIES=$(mysql -e &quot;SHOW STATUS LIKE &#039;Slow_queries&#039;;&quot; | tail -1 | awk &#039;{print $2}&#039;)\n    log_message &quot;MySQL slow queries: ${SLOW_QUERIES}&quot;\n    \n    # Buffer pool hit ratio\n    BUFFER_HIT_RATIO=$(mysql -e &quot;\n      SELECT ROUND((1 - (Innodb_buffer_pool_reads / Innodb_buffer_pool_read_requests)) * 100, 2) as hit_ratio\n      FROM INFORMATION_SCHEMA.GLOBAL_STATUS \n      WHERE VARIABLE_NAME IN (&#039;Innodb_buffer_pool_reads&#039;, &#039;Innodb_buffer_pool_read_requests&#039;);&quot; | tail -1)\n    log_message &quot;InnoDB buffer pool hit ratio: ${BUFFER_HIT_RATIO}%&quot;\nfi\n\n# PostgreSQL monitoring\nif command -v psql &gt;/dev/null 2&gt;&amp;1 &amp;&amp; systemctl is-active postgresql-16 &gt;/dev/null 2&gt;&amp;1; then\n    log_message &quot;=== PostgreSQL Monitoring ===&quot;\n    \n    # Connection count\n    PG_CONNECTIONS=$(sudo -u postgres psql -t -c &quot;SELECT count(*) FROM pg_stat_activity;&quot;)\n    PG_MAX_CONNECTIONS=$(sudo -u postgres psql -t -c &quot;SHOW max_connections;&quot;)\n    log_message &quot;PostgreSQL connections: ${PG_CONNECTIONS}/${PG_MAX_CONNECTIONS}&quot;\n    \n    # Database size\n    PG_DB_SIZE=$(sudo -u postgres psql -t -c &quot;SELECT pg_size_pretty(pg_database_size(&#039;myapp&#039;));&quot;)\n    log_message &quot;PostgreSQL database size: ${PG_DB_SIZE}&quot;\n    \n    # Cache hit ratio\n    PG_CACHE_HIT=$(sudo -u postgres psql -t -c &quot;\n      SELECT round(sum(blks_hit)*100.0/sum(blks_hit+blks_read), 2) \n      FROM pg_stat_database WHERE datname=&#039;myapp&#039;;&quot;)\n    log_message &quot;PostgreSQL cache hit ratio: ${PG_CACHE_HIT}%&quot;\n    \n    # Long running queries\n    LONG_QUERIES=$(sudo -u postgres psql -t -c &quot;\n      SELECT count(*) FROM pg_stat_activity \n      WHERE state = &#039;active&#039; AND now() - query_start &gt; interval &#039;5 minutes&#039;;&quot;)\n    log_message &quot;PostgreSQL long-running queries: ${LONG_QUERIES}&quot;\nfi\n\n# MongoDB monitoring\nif command -v mongosh &gt;/dev/null 2&gt;&amp;1 &amp;&amp; systemctl is-active mongod &gt;/dev/null 2&gt;&amp;1; then\n    log_message &quot;=== MongoDB Monitoring ===&quot;\n    \n    # Connection count\n    MONGO_CONNECTIONS=$(mongosh --quiet --eval &quot;db.serverStatus().connections.current&quot;)\n    MONGO_MAX_CONNECTIONS=$(mongosh --quiet --eval &quot;db.serverStatus().connections.available&quot;)\n    log_message &quot;MongoDB connections: ${MONGO_CONNECTIONS}/${MONGO_MAX_CONNECTIONS}&quot;\n    \n    # Database statistics\n    MONGO_DB_SIZE=$(mongosh myapp --quiet --eval &quot;Math.round(db.stats().dataSize / 1024 / 1024) + &#039; MB&#039;&quot;)\n    log_message &quot;MongoDB database size: ${MONGO_DB_SIZE}&quot;\n    \n    # OpLog status (for replica sets)\n    if mongosh admin --quiet --eval &quot;rs.status().ok&quot; 2&gt;/dev/null | grep -q &quot;1&quot;; then\n        OPLOG_SIZE=$(mongosh local --quiet --eval &quot;Math.round(db.oplog.rs.stats().maxSize / 1024 / 1024) + &#039; MB&#039;&quot;)\n        log_message &quot;MongoDB OpLog size: ${OPLOG_SIZE}&quot;\n    fi\nfi\n\n# Redis monitoring\nif command -v redis-cli &gt;/dev/null 2&gt;&amp;1 &amp;&amp; systemctl is-active redis &gt;/dev/null 2&gt;&amp;1; then\n    log_message &quot;=== Redis Monitoring ===&quot;\n    \n    # Memory usage\n    REDIS_MEMORY=$(redis-cli info memory | grep used_memory_human: | cut -d: -f2)\n    REDIS_MAX_MEMORY=$(redis-cli config get maxmemory | tail -1)\n    log_message &quot;Redis memory usage: ${REDIS_MEMORY} / ${REDIS_MAX_MEMORY}&quot;\n    \n    # Connected clients\n    REDIS_CLIENTS=$(redis-cli info clients | grep connected_clients: | cut -d: -f2)\n    log_message &quot;Redis connected clients: ${REDIS_CLIENTS}&quot;\n    \n    # Hit ratio\n    REDIS_HITS=$(redis-cli info stats | grep keyspace_hits: | cut -d: -f2)\n    REDIS_MISSES=$(redis-cli info stats | grep keyspace_misses: | cut -d: -f2)\n    if [ ${REDIS_MISSES} -gt 0 ]; then\n        REDIS_HIT_RATIO=$(echo &quot;scale=2; ${REDIS_HITS} / (${REDIS_HITS} + ${REDIS_MISSES}) * 100&quot; | bc)\n        log_message &quot;Redis hit ratio: ${REDIS_HIT_RATIO}%&quot;\n    fi\nfi\n\nlog_message &quot;Database monitoring completed&quot;\nEOF\n\nsudo chmod +x /usr/local/bin/database-monitor.sh\n\n# Schedule monitoring every 5 minutes\necho &quot;*/5 * * * * root /usr/local/bin/database-monitor.sh&quot; | sudo tee -a /etc/crontab</code></pre>\n      </div>\n    </div>\n<h3 id=\"database-backup-automation\" class=\"mobile-header\">Database Backup Automation</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\">sudo tee /usr/local/bin/database-backup.sh &gt; /dev/null &lt;&lt;&#039;EOF&#039;\n#!/bin/bash\nBACKUP_DIR=&quot;/backup/databases&quot;\nDATE=$(date +%Y%m%d_%H%M%S)\n\nmkdir -p ${BACKUP_DIR}/{mysql,postgresql,mongodb,redis}\n\n# MySQL/MariaDB backup\nif command -v mysql &gt;/dev/null 2&gt;&amp;1 &amp;&amp; systemctl is-active mariadb &gt;/dev/null 2&gt;&amp;1; then\n    echo &quot;Backing up MySQL/MariaDB...&quot;\n    \n    # Full backup with all databases\n    mysqldump --all-databases --single-transaction --routines --triggers --events \\\n      --master-data=2 --flush-logs --delete-master-logs \\\n      &gt; ${BACKUP_DIR}/mysql/full-backup-${DATE}.sql\n    \n    # Compress backup\n    gzip ${BACKUP_DIR}/mysql/full-backup-${DATE}.sql\n    \n    # Individual database backup\n    mysqldump --single-transaction --routines --triggers myapp \\\n      &gt; ${BACKUP_DIR}/mysql/myapp-backup-${DATE}.sql\n    gzip ${BACKUP_DIR}/mysql/myapp-backup-${DATE}.sql\nfi\n\n# PostgreSQL backup\nif command -v pg_dump &gt;/dev/null 2&gt;&amp;1 &amp;&amp; systemctl is-active postgresql-16 &gt;/dev/null 2&gt;&amp;1; then\n    echo &quot;Backing up PostgreSQL...&quot;\n    \n    # Full cluster backup\n    sudo -u postgres pg_dumpall &gt; ${BACKUP_DIR}/postgresql/cluster-backup-${DATE}.sql\n    \n    # Individual database backup\n    sudo -u postgres pg_dump -Fc myapp &gt; ${BACKUP_DIR}/postgresql/myapp-backup-${DATE}.dump\n    \n    # Compress SQL backup\n    gzip ${BACKUP_DIR}/postgresql/cluster-backup-${DATE}.sql\nfi\n\n# MongoDB backup\nif command -v mongodump &gt;/dev/null 2&gt;&amp;1 &amp;&amp; systemctl is-active mongod &gt;/dev/null 2&gt;&amp;1; then\n    echo &quot;Backing up MongoDB...&quot;\n    \n    # Full backup\n    mongodump --host localhost:27017 --ssl \\\n      --sslPEMKeyFile /etc/ssl/mongodb/mongodb.pem \\\n      --sslCAFile /etc/ssl/mongodb/ca.pem \\\n      --out ${BACKUP_DIR}/mongodb/full-backup-${DATE}\n    \n    # Individual database backup\n    mongodump --host localhost:27017 --ssl \\\n      --sslPEMKeyFile /etc/ssl/mongodb/mongodb.pem \\\n      --sslCAFile /etc/ssl/mongodb/ca.pem \\\n      --db myapp --out ${BACKUP_DIR}/mongodb/myapp-backup-${DATE}\n    \n    # Compress backups\n    tar -czf ${BACKUP_DIR}/mongodb/full-backup-${DATE}.tar.gz -C ${BACKUP_DIR}/mongodb full-backup-${DATE}\n    tar -czf ${BACKUP_DIR}/mongodb/myapp-backup-${DATE}.tar.gz -C ${BACKUP_DIR}/mongodb myapp-backup-${DATE}\n    \n    # Remove uncompressed directories\n    rm -rf ${BACKUP_DIR}/mongodb/full-backup-${DATE} ${BACKUP_DIR}/mongodb/myapp-backup-${DATE}\nfi\n\n# Redis backup\nif command -v redis-cli &gt;/dev/null 2&gt;&amp;1 &amp;&amp; systemctl is-active redis &gt;/dev/null 2&gt;&amp;1; then\n    echo &quot;Backing up Redis...&quot;\n    \n    # Trigger background save\n    redis-cli BGSAVE\n    \n    # Wait for save to complete\n    while [ &quot;$(redis-cli LASTSAVE)&quot; = &quot;$(redis-cli LASTSAVE)&quot; ]; do\n        sleep 1\n    done\n    \n    # Copy RDB file\n    cp /var/lib/redis/dump.rdb ${BACKUP_DIR}/redis/redis-backup-${DATE}.rdb\n    gzip ${BACKUP_DIR}/redis/redis-backup-${DATE}.rdb\nfi\n\n# Upload to cloud storage\naws s3 cp ${BACKUP_DIR}/ s3://database-backups/ --recursive\naz storage blob upload-batch --source ${BACKUP_DIR} --destination database-backups\ngsutil cp -r ${BACKUP_DIR}/* gs://database-backups/\n\n# Keep only last 14 days of backups\nfind ${BACKUP_DIR} -name &quot;*backup*&quot; -type f -mtime +14 -delete\n\n# Verify backup integrity\necho &quot;Verifying backup integrity...&quot;\nfor backup in ${BACKUP_DIR}/*/*.gz; do\n    if gzip -t &quot;$backup&quot; 2&gt;/dev/null; then\n        echo &quot;âœ“ $(basename $backup) - OK&quot;\n    else\n        echo &quot;âœ— $(basename $backup) - CORRUPTED&quot;\n    fi\ndone\n\necho &quot;Database backup completed: ${DATE}&quot;\nEOF\n\nsudo chmod +x /usr/local/bin/database-backup.sh\n\n# Schedule daily backups\necho &quot;0 1 * * * root /usr/local/bin/database-backup.sh&quot; | sudo tee -a /etc/crontab</code></pre>\n      </div>\n    </div>\n<h2 id=\"high-availability-and-replication\" class=\"mobile-header\">High Availability and Replication</h2>\n<h3 id=\"mysqlmariadb-master-slave-replication\" class=\"mobile-header\">MySQL/MariaDB Master-Slave Replication</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Configure master server\nsudo tee -a /etc/mysql/mariadb.conf.d/replication.cnf &gt; /dev/null &lt;&lt;EOF\n[mysqld]\n# Replication settings\nserver-id = 1\nlog_bin = mysql-bin\nbinlog_format = ROW\nbinlog_do_db = myapp\nsync_binlog = 1\nrelay-log = mysql-relay-bin\nrelay-log-recovery = 1\n\n# GTID replication (recommended)\ngtid_mode = ON\nenforce_gtid_consistency = ON\nlog_slave_updates = ON\nEOF\n\nmysql -u root -p &lt;&lt;EOF\n-- Create replication user\nCREATE USER &#039;replication&#039;@&#039;%&#039; IDENTIFIED BY &#039;replication_password_2024&#039;;\nGRANT REPLICATION SLAVE ON *.* TO &#039;replication&#039;@&#039;%&#039;;\nFLUSH PRIVILEGES;\n\n-- Get master status\nSHOW MASTER STATUS;\nEOF\n\n# Configure slave server (server-id = 2)\n# On slave server:\nmysql -u root -p &lt;&lt;EOF\nCHANGE MASTER TO\n  MASTER_HOST=&#039;mysql-master.example.com&#039;,\n  MASTER_USER=&#039;replication&#039;,\n  MASTER_PASSWORD=&#039;replication_password_2024&#039;,\n  MASTER_AUTO_POSITION=1;\n\nSTART SLAVE;\nSHOW SLAVE STATUS\\G\nEOF</code></pre>\n      </div>\n    </div>\n<h3 id=\"postgresql-streaming-replication\" class=\"mobile-header\">PostgreSQL Streaming Replication</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Configure master server\nsudo tee -a /var/lib/pgsql/16/data/postgresql.conf &gt; /dev/null &lt;&lt;EOF\n# Replication settings\nwal_level = replica\nmax_wal_senders = 10\nmax_replication_slots = 10\nwal_keep_size = 1GB\nhot_standby = on\narchive_mode = on\narchive_command = &#039;cp %p /var/lib/pgsql/16/archive/%f&#039;\nEOF\n\n# Configure replication access\nsudo tee -a /var/lib/pgsql/16/data/pg_hba.conf &gt; /dev/null &lt;&lt;EOF\n# Replication connections\nhostssl replication replication 192.168.1.0/24 scram-sha-256\nEOF\n\n# Create replication user\nsudo -u postgres psql &lt;&lt;EOF\nCREATE USER replication WITH REPLICATION ENCRYPTED PASSWORD &#039;replication_password_2024&#039;;\nEOF\n\n# Create archive directory\nsudo mkdir -p /var/lib/pgsql/16/archive\nsudo chown postgres:postgres /var/lib/pgsql/16/archive\n\nsudo systemctl restart postgresql-16\n\n# Setup slave server\n# On slave server, create base backup:\nsudo -u postgres pg_basebackup -h master.example.com -D /var/lib/pgsql/16/data -U replication -W -v -P -R</code></pre>\n      </div>\n    </div>\n<h3 id=\"mongodb-replica-set-configuration\" class=\"mobile-header\">MongoDB Replica Set Configuration</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Initialize replica set (run on primary node)\nmongosh admin &lt;&lt;EOF\nrs.initiate({\n  _id: &quot;rs0&quot;,\n  version: 1,\n  protocolVersion: 1,\n  members: [\n    { \n      _id: 0, \n      host: &quot;mongodb1.example.com:27017&quot;,\n      priority: 2,\n      votes: 1\n    },\n    { \n      _id: 1, \n      host: &quot;mongodb2.example.com:27017&quot;,\n      priority: 1,\n      votes: 1\n    },\n    { \n      _id: 2, \n      host: &quot;mongodb3.example.com:27017&quot;,\n      priority: 1,\n      votes: 1,\n      arbiterOnly: true\n    }\n  ],\n  settings: {\n    chainingAllowed: false,\n    heartbeatIntervalMillis: 2000,\n    heartbeatTimeoutSecs: 10,\n    electionTimeoutMillis: 10000,\n    catchUpTimeoutMillis: -1,\n    getLastErrorModes: {\n      majority: { \n        tags: { \n          dc: 1 \n        } \n      }\n    }\n  }\n})\n\n// Check replica set status\nrs.status()\n\n// Configure read preferences\nrs.conf()\nEOF\n\n# Configure MongoDB sharding (for large deployments)\n# Config server initialization:\nmongosh admin &lt;&lt;EOF\nrs.initiate({\n  _id: &quot;configReplSet&quot;,\n  configsvr: true,\n  members: [\n    { _id: 0, host: &quot;config1.example.com:27019&quot; },\n    { _id: 1, host: &quot;config2.example.com:27019&quot; },\n    { _id: 2, host: &quot;config3.example.com:27019&quot; }\n  ]\n})\nEOF</code></pre>\n      </div>\n    </div>\n<h3 id=\"redis-sentinel-high-availability\" class=\"mobile-header\">Redis Sentinel High Availability</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Configure Redis Sentinel for HA\nsudo tee /etc/redis/sentinel.conf &gt; /dev/null &lt;&lt;EOF\n# Redis Sentinel Configuration\nport 26379\nsentinel deny-scripts-reconfig yes\n\n# Monitor Redis master\nsentinel monitor mymaster redis-master.example.com 6379 2\nsentinel auth-pass mymaster redis_secure_password_2024\nsentinel down-after-milliseconds mymaster 5000\nsentinel parallel-syncs mymaster 1\nsentinel failover-timeout mymaster 10000\n\n# Notification scripts\nsentinel notification-script mymaster /etc/redis/notify.sh\nsentinel client-reconfig-script mymaster /etc/redis/reconfig.sh\n\n# Security\nrequirepass sentinel_password_2024\nEOF\n\n# Create notification script\nsudo tee /etc/redis/notify.sh &gt; /dev/null &lt;&lt;&#039;EOF&#039;\n#!/bin/bash\necho &quot;$(date): Redis failover event: $*&quot; &gt;&gt; /var/log/redis/sentinel.log\n# Add alerting logic here (email, Slack, etc.)\nEOF\n\n# Create reconfiguration script\nsudo tee /etc/redis/reconfig.sh &gt; /dev/null &lt;&lt;&#039;EOF&#039;\n#!/bin/bash\necho &quot;$(date): Redis master changed to: $6:$7&quot; &gt;&gt; /var/log/redis/sentinel.log\n# Update application configuration, restart services, etc.\nEOF\n\nsudo chmod +x /etc/redis/{notify,reconfig}.sh\nsudo systemctl enable --now redis-sentinel</code></pre>\n      </div>\n    </div>\n<h2 id=\"performance-optimization\" class=\"mobile-header\">Performance Optimization</h2>\n<h3 id=\"database-performance-tuning\" class=\"mobile-header\">Database Performance Tuning</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\">sudo tee /usr/local/bin/database-performance-tune.sh &gt; /dev/null &lt;&lt;&#039;EOF&#039;\n#!/bin/bash\n\ntune_mysql() {\n    echo &quot;Tuning MySQL/MariaDB performance...&quot;\n    \n    # Calculate optimal buffer pool size (70% of RAM)\n    TOTAL_RAM=$(free -b | awk &#039;NR==2{print $2}&#039;)\n    BUFFER_POOL_SIZE=$((TOTAL_RAM * 70 / 100))\n    \n    mysql -u root -p &lt;&lt;EOF\n-- Performance tuning\nSET GLOBAL innodb_buffer_pool_size = ${BUFFER_POOL_SIZE};\nSET GLOBAL query_cache_size = $((TOTAL_RAM * 5 / 100));\nSET GLOBAL thread_cache_size = 100;\nSET GLOBAL table_open_cache = 4096;\nSET GLOBAL innodb_io_capacity = 2000;\n\n-- Show current configuration\nSHOW VARIABLES LIKE &#039;innodb_buffer_pool_size&#039;;\nSHOW VARIABLES LIKE &#039;query_cache_size&#039;;\nEOF\n}\n\ntune_postgresql() {\n    echo &quot;Tuning PostgreSQL performance...&quot;\n    \n    # Use pg_tune recommendations\n    TOTAL_RAM_MB=$(($(free -m | awk &#039;NR==2{print $2}&#039;)))\n    SHARED_BUFFERS=$((TOTAL_RAM_MB / 4))\n    EFFECTIVE_CACHE=$((TOTAL_RAM_MB * 3 / 4))\n    \n    sudo -u postgres psql &lt;&lt;EOF\n-- Performance tuning\nALTER SYSTEM SET shared_buffers = &#039;${SHARED_BUFFERS}MB&#039;;\nALTER SYSTEM SET effective_cache_size = &#039;${EFFECTIVE_CACHE}MB&#039;;\nALTER SYSTEM SET work_mem = &#039;16MB&#039;;\nALTER SYSTEM SET maintenance_work_mem = &#039;256MB&#039;;\nALTER SYSTEM SET random_page_cost = 1.1;\nALTER SYSTEM SET effective_io_concurrency = 200;\n\n-- Reload configuration\nSELECT pg_reload_conf();\n\n-- Show current settings\nSHOW shared_buffers;\nSHOW effective_cache_size;\nEOF\n}\n\ntune_mongodb() {\n    echo &quot;Tuning MongoDB performance...&quot;\n    \n    # Calculate WiredTiger cache size (50% of RAM)\n    TOTAL_RAM_GB=$(($(free -g | awk &#039;NR==2{print $2}&#039;)))\n    CACHE_SIZE_GB=$((TOTAL_RAM_GB / 2))\n    \n    mongosh admin &lt;&lt;EOF\n// Performance tuning\ndb.adminCommand({\n  &quot;setParameter&quot;: 1,\n  &quot;wiredTigerEngineRuntimeConfig&quot;: &quot;cache_size=${CACHE_SIZE_GB}GB&quot;\n})\n\n// Show current cache usage\ndb.serverStatus().wiredTiger.cache\nEOF\n}\n\ntune_redis() {\n    echo &quot;Tuning Redis performance...&quot;\n    \n    # Calculate maxmemory (50% of RAM for dedicated Redis server)\n    TOTAL_RAM_BYTES=$(free -b | awk &#039;NR==2{print $2}&#039;)\n    MAX_MEMORY_BYTES=$((TOTAL_RAM_BYTES / 2))\n    \n    redis-cli CONFIG SET maxmemory ${MAX_MEMORY_BYTES}\n    redis-cli CONFIG SET maxmemory-policy allkeys-lru\n    redis-cli CONFIG REWRITE\n    \n    echo &quot;Redis maxmemory set to $(redis-cli CONFIG GET maxmemory | tail -1) bytes&quot;\n}\n\n# Check which databases are running and tune them\nif systemctl is-active mariadb &gt;/dev/null 2&gt;&amp;1; then\n    tune_mysql\nfi\n\nif systemctl is-active postgresql-16 &gt;/dev/null 2&gt;&amp;1; then\n    tune_postgresql\nfi\n\nif systemctl is-active mongod &gt;/dev/null 2&gt;&amp;1; then\n    tune_mongodb\nfi\n\nif systemctl is-active redis &gt;/dev/null 2&gt;&amp;1; then\n    tune_redis\nfi\n\necho &quot;Database performance tuning completed&quot;\nEOF\n\nsudo chmod +x /usr/local/bin/database-performance-tune.sh</code></pre>\n      </div>\n    </div>\n<h2 id=\"verification-and-testing\" class=\"mobile-header\">Verification and Testing</h2>\n<h3 id=\"database-health-checks\" class=\"mobile-header\">Database Health Checks</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\">sudo tee /usr/local/bin/database-health-check.sh &gt; /dev/null &lt;&lt;&#039;EOF&#039;\n#!/bin/bash\nHEALTH_LOG=&quot;/var/log/database-health.log&quot;\n\nlog_message() {\n    echo &quot;$(date &#039;+%Y-%m-%d %H:%M:%S&#039;) - $1&quot; | tee -a ${HEALTH_LOG}\n}\n\n# MySQL/MariaDB health check\nif command -v mysql &gt;/dev/null 2&gt;&amp;1; then\n    if systemctl is-active mariadb &gt;/dev/null 2&gt;&amp;1; then\n        log_message &quot;âœ“ MariaDB service is running&quot;\n        \n        # Test connectivity\n        if mysql -e &quot;SELECT 1;&quot; &gt;/dev/null 2&gt;&amp;1; then\n            log_message &quot;âœ“ MariaDB connectivity test passed&quot;\n        else\n            log_message &quot;âœ— MariaDB connectivity test failed&quot;\n        fi\n        \n        # Check for errors in log\n        ERROR_COUNT=$(tail -100 /var/log/mysql/error.log | grep -i error | wc -l)\n        log_message &quot;â„¹ MariaDB errors in last 100 log lines: ${ERROR_COUNT}&quot;\n    else\n        log_message &quot;âœ— MariaDB service is not running&quot;\n    fi\nfi\n\n# PostgreSQL health check\nif command -v psql &gt;/dev/null 2&gt;&amp;1; then\n    if systemctl is-active postgresql-16 &gt;/dev/null 2&gt;&amp;1; then\n        log_message &quot;âœ“ PostgreSQL service is running&quot;\n        \n        # Test connectivity\n        if sudo -u postgres psql -c &quot;SELECT version();&quot; &gt;/dev/null 2&gt;&amp;1; then\n            log_message &quot;âœ“ PostgreSQL connectivity test passed&quot;\n        else\n            log_message &quot;âœ— PostgreSQL connectivity test failed&quot;\n        fi\n        \n        # Check replication lag (if slave)\n        if sudo -u postgres psql -t -c &quot;SELECT pg_is_in_recovery();&quot; | grep -q &quot;t&quot;; then\n            LAG=$(sudo -u postgres psql -t -c &quot;SELECT EXTRACT(EPOCH FROM (now() - pg_last_xact_replay_timestamp()))::int;&quot;)\n            log_message &quot;â„¹ PostgreSQL replication lag: ${LAG} seconds&quot;\n        fi\n    else\n        log_message &quot;âœ— PostgreSQL service is not running&quot;\n    fi\nfi\n\n# MongoDB health check\nif command -v mongosh &gt;/dev/null 2&gt;&amp;1; then\n    if systemctl is-active mongod &gt;/dev/null 2&gt;&amp;1; then\n        log_message &quot;âœ“ MongoDB service is running&quot;\n        \n        # Test connectivity\n        if mongosh --quiet --eval &quot;db.adminCommand(&#039;ping&#039;).ok&quot; 2&gt;/dev/null | grep -q &quot;1&quot;; then\n            log_message &quot;âœ“ MongoDB connectivity test passed&quot;\n        else\n            log_message &quot;âœ— MongoDB connectivity test failed&quot;\n        fi\n        \n        # Check replica set status\n        if mongosh admin --quiet --eval &quot;rs.status().ok&quot; 2&gt;/dev/null | grep -q &quot;1&quot;; then\n            PRIMARY_COUNT=$(mongosh admin --quiet --eval &quot;rs.status().members.filter(m =&gt; m.stateStr === &#039;PRIMARY&#039;).length&quot;)\n            log_message &quot;â„¹ MongoDB replica set has ${PRIMARY_COUNT} primary node(s)&quot;\n        fi\n    else\n        log_message &quot;âœ— MongoDB service is not running&quot;\n    fi\nfi\n\n# Redis health check\nif command -v redis-cli &gt;/dev/null 2&gt;&amp;1; then\n    if systemctl is-active redis &gt;/dev/null 2&gt;&amp;1; then\n        log_message &quot;âœ“ Redis service is running&quot;\n        \n        # Test connectivity\n        if redis-cli ping | grep -q &quot;PONG&quot;; then\n            log_message &quot;âœ“ Redis connectivity test passed&quot;\n        else\n            log_message &quot;âœ— Redis connectivity test failed&quot;\n        fi\n        \n        # Check memory usage\n        REDIS_MEMORY_PERCENT=$(redis-cli info memory | grep used_memory_rss_human: | cut -d: -f2)\n        log_message &quot;â„¹ Redis memory usage: ${REDIS_MEMORY_PERCENT}&quot;\n    else\n        log_message &quot;âœ— Redis service is not running&quot;\n    fi\nfi\n\nlog_message &quot;Database health check completed&quot;\nEOF\n\nsudo chmod +x /usr/local/bin/database-health-check.sh\n\n# Schedule health checks every 10 minutes\necho &quot;*/10 * * * * root /usr/local/bin/database-health-check.sh&quot; | sudo tee -a /etc/crontab</code></pre>\n      </div>\n    </div>\n<h2 id=\"troubleshooting-cross-platform\" class=\"mobile-header\">Troubleshooting (Cross-Platform)</h2>\n<h3 id=\"common-database-issues\" class=\"mobile-header\">Common Database Issues</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># MySQL/MariaDB troubleshooting\n# Check service status\nsudo systemctl status mariadb\n\n# Check error logs\nsudo tail -f /var/log/mysql/error.log\n\n# Test connectivity\nmysql -u root -p -e &quot;SELECT version();&quot;\n\n# Check process list\nmysql -u root -p -e &quot;SHOW FULL PROCESSLIST;&quot;\n\n# Check locks\nmysql -u root -p -e &quot;SHOW ENGINE INNODB STATUS\\G&quot; | grep -A 20 &quot;LATEST DETECTED DEADLOCK&quot;\n\n# Repair tables\nmysqlcheck --all-databases --repair -u root -p\n\n# PostgreSQL troubleshooting\n# Check service status\nsudo systemctl status postgresql-16\n\n# Check logs\nsudo tail -f /var/lib/pgsql/16/data/log/postgresql-*.log\n\n# Test connectivity\nsudo -u postgres psql -c &quot;SELECT version();&quot;\n\n# Check active connections\nsudo -u postgres psql -c &quot;SELECT count(*) FROM pg_stat_activity WHERE state = &#039;active&#039;;&quot;\n\n# Check locks\nsudo -u postgres psql -c &quot;SELECT * FROM pg_locks WHERE NOT granted;&quot;\n\n# Vacuum and analyze\nsudo -u postgres vacuumdb --all --analyze --verbose\n\n# MongoDB troubleshooting\n# Check service status\nsudo systemctl status mongod\n\n# Check logs\nsudo tail -f /var/log/mongodb/mongod.log\n\n# Test connectivity\nmongosh --eval &quot;db.adminCommand(&#039;ping&#039;)&quot;\n\n# Check replica set status\nmongosh admin --eval &quot;rs.status()&quot;\n\n# Check database profiler\nmongosh myapp --eval &quot;db.getProfilingStatus()&quot;\n\n# Repair database\nmongosh myapp --eval &quot;db.repairDatabase()&quot;\n\n# Redis troubleshooting\n# Check service status\nsudo systemctl status redis\n\n# Check logs\nsudo tail -f /var/log/redis/redis-server.log\n\n# Test connectivity\nredis-cli ping\n\n# Check memory stats\nredis-cli info memory\n\n# Check slow log\nredis-cli slowlog get 10\n\n# Monitor commands\nredis-cli monitor</code></pre>\n      </div>\n    </div>\n<h3 id=\"advanced-database-debugging\" class=\"mobile-header\">Advanced Database Debugging</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># MySQL/MariaDB debugging\n# Enable general log\nmysql -u root -p -e &quot;SET GLOBAL general_log = &#039;ON&#039;;&quot;\nmysql -u root -p -e &quot;SET GLOBAL log_output = &#039;FILE&#039;;&quot;\n\n# Performance schema\nmysql -u root -p -e &quot;SELECT * FROM performance_schema.file_summary_by_event_name WHERE event_name LIKE &#039;wait/io/file%&#039; ORDER BY sum_timer_wait DESC LIMIT 10;&quot;\n\n# PostgreSQL debugging\n# Enable query logging\nsudo -u postgres psql -c &quot;ALTER SYSTEM SET log_statement = &#039;all&#039;;&quot;\nsudo -u postgres psql -c &quot;SELECT pg_reload_conf();&quot;\n\n# Check query performance\nsudo -u postgres psql -c &quot;SELECT query, calls, total_time, mean_time FROM pg_stat_statements ORDER BY total_time DESC LIMIT 10;&quot;\n\n# MongoDB debugging\n# Enable profiler\nmongosh myapp --eval &quot;db.setProfilingLevel(2, { slowms: 100 })&quot;\n\n# Check slow operations\nmongosh myapp --eval &quot;db.system.profile.find().sort({ts:-1}).limit(5).pretty()&quot;\n\n# Redis debugging\n# Enable slow log\nredis-cli CONFIG SET slowlog-log-slower-than 10000\n\n# Check slow operations\nredis-cli SLOWLOG GET 10\n\n# Monitor memory usage\nredis-cli --latency-history -i 1</code></pre>\n      </div>\n    </div>\n<h2 id=\"additional-resources\" class=\"mobile-header\">Additional Resources</h2>\n<li class=\"mobile-list-item\"><a href=\"https://dev.mysql.com/doc/\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">MySQL Documentation</a></li>\n<li class=\"mobile-list-item\"><a href=\"https://mariadb.com/docs/\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">MariaDB Documentation</a></li>\n<li class=\"mobile-list-item\"><a href=\"https://www.postgresql.org/docs/\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">PostgreSQL Documentation</a></li>\n<li class=\"mobile-list-item\"><a href=\"https://docs.mongodb.com/\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">MongoDB Documentation</a></li>\n<li class=\"mobile-list-item\"><a href=\"https://redis.io/documentation\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">Redis Documentation</a></li>\n<li class=\"mobile-list-item\"><a href=\"https://cheatsheetseries.owasp.org/cheatsheets/Database_Security_Cheat_Sheet.html\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">Database Security Cheat Sheet</a></li>\n<p class=\"mobile-paragraph\">---</p>\n<p class=\"mobile-paragraph\"><strong>Note:</strong> This guide is part of the <a href=\"https://howtomgr.github.io\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">HowToMgr</a> collection.</p>","readTime":"25 min","wordCount":4871,"lastBuilt":"2025-09-16T02:44:24.544Z"},{"name":"mongodb","displayName":"MongoDB","slug":"mongodb","description":"Repo for mongodb","category":"database","language":null,"stars":0,"forks":0,"topics":[],"githubUrl":"https://github.com/howtomgr/mongodb","updatedAt":"2025-09-14T01:30:34Z","createdAt":"2023-08-28T03:49:06Z","readmeRaw":"# MongoDB Installation Guide\n\nMongoDB is a free and open-source document-oriented NoSQL database. Originally developed by 10gen (now MongoDB Inc.), MongoDB uses JSON-like documents with optional schemas instead of traditional table-based relational database structure. It serves as a FOSS alternative to commercial document databases like Amazon DocumentDB, Azure Cosmos DB, or Oracle NoSQL Database, offering enterprise-grade features including horizontal scaling, replica sets, and sharding without licensing costs, with features like ACID transactions, aggregation pipelines, and full-text search.\n\n## Prerequisites\n\n- **Hardware Requirements**:\n  - CPU: 2 cores minimum (4+ cores recommended for production)\n  - RAM: 2GB minimum (8GB+ recommended for production)\n  - Storage: 10GB minimum (SSD strongly recommended for performance)\n  - Network: Stable connectivity for replica sets and sharding\n- **Operating System**: \n  - Linux: Any modern distribution with kernel 3.2+\n  - macOS: 10.14+ (Mojave or newer)\n  - Windows: Windows Server 2016+ or Windows 10\n  - FreeBSD: Not officially supported by MongoDB Inc.\n- **Network Requirements**:\n  - Port 27017 (default MongoDB port)\n  - Port 27018 (default shard port)\n  - Port 27019 (default config server port)\n  - Additional ports for replica set members\n- **Dependencies**:\n  - OpenSSL, PCRE, zlib (usually included in distributions)\n  - systemd or compatible init system (Linux)\n  - Root or administrative access for installation\n- **System Access**: root or sudo privileges required\n\n## Installation\n\n### RHEL/CentOS/Rocky Linux/AlmaLinux\n\n```bash\n# Create MongoDB 7.0 repository\nsudo tee /etc/yum.repos.d/mongodb-org-7.0.repo <<EOF\n[mongodb-org-7.0]\nname=MongoDB Repository\nbaseurl=https://repo.mongodb.org/yum/redhat/\\$releasever/mongodb-org/7.0/\\$basearch/\ngpgcheck=1\nenabled=1\ngpgkey=https://www.mongodb.org/static/pgp/server-7.0.asc\nEOF\n\n# Install MongoDB\nsudo yum install -y mongodb-org mongodb-org-tools mongodb-mongosh\n\n# Enable and start service\nsudo systemctl enable --now mongod\n\n# Configure firewall\nsudo firewall-cmd --permanent --add-port=27017/tcp\nsudo firewall-cmd --reload\n\n# Verify installation\nmongosh --eval 'db.runCommand(\"connectionStatus\")'\n```\n\n### Debian/Ubuntu\n\n```bash\n# Update package index\nsudo apt update\n\n# Install prerequisite packages\nsudo apt install -y wget gnupg software-properties-common\n\n# Import MongoDB GPG key\nwget -qO /tmp/mongodb-server-7.0.asc https://www.mongodb.org/static/pgp/server-7.0.asc\nsudo mv /tmp/mongodb-server-7.0.asc /etc/apt/trusted.gpg.d/mongodb-server-7.0.asc\n\n# Add MongoDB repository\necho \"deb [arch=amd64,arm64] https://repo.mongodb.org/apt/ubuntu $(lsb_release -cs)/mongodb-org/7.0 multiverse\" | sudo tee /etc/apt/sources.list.d/mongodb-org-7.0.list\n\n# Update package index\nsudo apt update\n\n# Install MongoDB\nsudo apt install -y mongodb-org mongodb-org-tools mongodb-mongosh\n\n# Enable and start service\nsudo systemctl enable --now mongod\n\n# Configure firewall\nsudo ufw allow 27017\n```\n\n### Arch Linux\n\n```bash\n# MongoDB is available in AUR\nyay -S mongodb-bin mongodb-tools-bin mongosh-bin\n\n# Alternative: Install from AUR with makepkg\ngit clone https://aur.archlinux.org/mongodb-bin.git\ncd mongodb-bin\nmakepkg -si\n\n# Create mongodb user and group\nsudo useradd -r -s /sbin/nologin mongodb\n\n# Create necessary directories\nsudo mkdir -p /var/lib/mongodb /var/log/mongodb\nsudo chown mongodb:mongodb /var/lib/mongodb /var/log/mongodb\n\n# Enable and start service\nsudo systemctl enable --now mongodb\n\n# Configuration location: /etc/mongodb.conf\n```\n\n### Alpine Linux\n\n```bash\n# MongoDB is not officially supported on Alpine Linux\n# Use Docker for MongoDB on Alpine:\n\n# Install Docker\napk add --no-cache docker docker-compose\n\n# Enable and start Docker\nrc-update add docker default\nrc-service docker start\n\n# Run MongoDB container\ndocker run -d \\\n  --name mongodb \\\n  --restart unless-stopped \\\n  -p 27017:27017 \\\n  -v /var/lib/mongodb:/data/db \\\n  -e MONGO_INITDB_ROOT_USERNAME=admin \\\n  -e MONGO_INITDB_ROOT_PASSWORD=SecurePassword123! \\\n  mongo:7.0\n\n# Verify installation\ndocker exec mongodb mongosh --eval 'db.runCommand(\"connectionStatus\")'\n```\n\n### openSUSE/SLES\n\n```bash\n# MongoDB is not officially packaged for openSUSE/SLES\n# Use Docker or manual installation:\n\n# Method 1: Docker installation\nsudo zypper install -y docker docker-compose\nsudo systemctl enable --now docker\n\ndocker run -d \\\n  --name mongodb \\\n  --restart unless-stopped \\\n  -p 27017:27017 \\\n  -v /var/lib/mongodb:/data/db \\\n  -e MONGO_INITDB_ROOT_USERNAME=admin \\\n  -e MONGO_INITDB_ROOT_PASSWORD=SecurePassword123! \\\n  mongo:7.0\n\n# Method 2: Manual installation from tarball\nwget https://fastdl.mongodb.org/linux/mongodb-linux-x86_64-rhel80-7.0.4.tgz\ntar -xzf mongodb-linux-x86_64-rhel80-7.0.4.tgz\nsudo cp mongodb-linux-x86_64-rhel80-7.0.4/bin/* /usr/local/bin/\n\n# Create mongodb user and directories\nsudo useradd -r mongodb\nsudo mkdir -p /var/lib/mongodb /var/log/mongodb\nsudo chown mongodb:mongodb /var/lib/mongodb /var/log/mongodb\n```\n\n### macOS\n\n```bash\n# Using Homebrew\nbrew tap mongodb/brew\nbrew install mongodb-community@7.0 mongodb-database-tools mongosh\n\n# Start MongoDB service\nbrew services start mongodb/brew/mongodb-community@7.0\n\n# Or run manually\nmongod --config /usr/local/etc/mongod.conf\n\n# Configuration location: /usr/local/etc/mongod.conf\n# Alternative: /opt/homebrew/etc/mongod.conf (Apple Silicon)\n```\n\n### FreeBSD\n\n```bash\n# MongoDB is not officially supported on FreeBSD\n# Use Docker or compile from source:\n\n# Install Docker\npkg install docker\necho 'docker_enable=\"YES\"' >> /etc/rc.conf\nservice docker start\n\n# Run MongoDB container\ndocker run -d \\\n  --name mongodb \\\n  --restart unless-stopped \\\n  -p 27017:27017 \\\n  -v /var/lib/mongodb:/data/db \\\n  -e MONGO_INITDB_ROOT_USERNAME=admin \\\n  -e MONGO_INITDB_ROOT_PASSWORD=SecurePassword123! \\\n  mongo:7.0\n```\n\n### Windows\n\n```powershell\n# Method 1: Using Chocolatey\nchoco install mongodb mongodb-shell\n\n# Method 2: Using Scoop\nscoop bucket add main\nscoop install mongodb mongodb-shell\n\n# Method 3: Manual installation\n# Download from https://www.mongodb.com/download-center/community\n# Run mongodb-windows-x86_64-*.msi\n\n# Install as Windows service\n\"C:\\Program Files\\MongoDB\\Server\\7.0\\bin\\mongod.exe\" --config \"C:\\Program Files\\MongoDB\\Server\\7.0\\bin\\mongod.cfg\" --install\n\n# Start service\nnet start MongoDB\n\n# Configuration location: C:\\Program Files\\MongoDB\\Server\\7.0\\bin\\mongod.cfg\n```\n\n## Initial Configuration\n\n### First-Run Setup\n\n1. **Create mongodb user** (if not created by package):\n```bash\n# Linux systems\nsudo useradd -r -d /var/lib/mongodb -s /sbin/nologin -c \"MongoDB Server\" mongodb\n```\n\n2. **Default configuration locations**:\n- RHEL/CentOS/Rocky/AlmaLinux: `/etc/mongod.conf`\n- Debian/Ubuntu: `/etc/mongod.conf`\n- Arch Linux: `/etc/mongodb.conf`\n- Alpine Linux: Docker container configuration\n- openSUSE/SLES: `/etc/mongod.conf` (manual installation)\n- macOS: `/usr/local/etc/mongod.conf`\n- FreeBSD: Docker container configuration\n- Windows: `C:\\Program Files\\MongoDB\\Server\\7.0\\bin\\mongod.cfg`\n\n3. **Essential settings to change**:\n\n```yaml\n# /etc/mongod.conf\nstorage:\n  dbPath: /var/lib/mongodb\n  journal:\n    enabled: true\n  wiredTiger:\n    engineConfig:\n      cacheSizeGB: 2\n      journalCompressor: snappy\n\nsystemLog:\n  destination: file\n  path: /var/log/mongodb/mongod.log\n  logAppend: true\n  logRotate: rename\n\nnet:\n  port: 27017\n  bindIp: 127.0.0.1\n  maxIncomingConnections: 200\n\nsecurity:\n  authorization: enabled\n  javascriptEnabled: false\n\noperationProfiling:\n  slowOpThresholdMs: 100\n\nreplication:\n  replSetName: rs0\n\nprocessManagement:\n  fork: true\n  pidFilePath: /var/run/mongodb/mongod.pid\n```\n\n### Testing Initial Setup\n\n```bash\n# Check if MongoDB is running\nsudo systemctl status mongod\n\n# Test connection\nmongosh --eval 'db.runCommand(\"connectionStatus\")'\n\n# Check database status\nmongosh --eval 'db.runCommand(\"serverStatus\")'\n\n# Check configuration\nmongosh --eval 'db.runCommand(\"getCmdLineOpts\")'\n\n# Test basic operations\nmongosh --eval 'use test; db.testCollection.insertOne({test: \"document\"}); db.testCollection.findOne()'\n```\n\n**WARNING:** Enable authentication and create admin users immediately after installation!\n\n## Service Management\n\n### systemd (RHEL, Debian, Ubuntu, Arch, openSUSE)\n\n```bash\n# Enable MongoDB to start on boot\nsudo systemctl enable mongod\n\n# Start MongoDB\nsudo systemctl start mongod\n\n# Stop MongoDB\nsudo systemctl stop mongod\n\n# Restart MongoDB\nsudo systemctl restart mongod\n\n# Reload configuration (graceful restart)\nsudo systemctl reload mongod\n\n# Check status\nsudo systemctl status mongod\n\n# View logs\nsudo journalctl -u mongod -f\n```\n\n### OpenRC (Alpine Linux)\n\n```bash\n# MongoDB runs in Docker container on Alpine\ndocker start mongodb\ndocker stop mongodb\ndocker restart mongodb\n\n# Check status\ndocker ps | grep mongodb\n\n# View logs\ndocker logs -f mongodb\n```\n\n### rc.d (FreeBSD)\n\n```bash\n# MongoDB runs in Docker container on FreeBSD\nservice docker start\n\ndocker start mongodb\ndocker stop mongodb\ndocker restart mongodb\n\n# Check status\ndocker ps | grep mongodb\n```\n\n### launchd (macOS)\n\n```bash\n# Using Homebrew services\nbrew services start mongodb/brew/mongodb-community@7.0\nbrew services stop mongodb/brew/mongodb-community@7.0\nbrew services restart mongodb/brew/mongodb-community@7.0\n\n# Check status\nbrew services list | grep mongodb\n\n# Manual control\nmongod --config /usr/local/etc/mongod.conf\n```\n\n### Windows Service Manager\n\n```powershell\n# Start MongoDB service\nnet start MongoDB\n\n# Stop MongoDB service\nnet stop MongoDB\n\n# Using PowerShell\nStart-Service MongoDB\nStop-Service MongoDB\nRestart-Service MongoDB\n\n# Check status\nGet-Service MongoDB\n\n# View logs\nGet-EventLog -LogName Application -Source MongoDB\n```\n\n## Advanced Configuration\n\n### Replica Set Configuration\n\n```yaml\n# Replica set configuration\nreplication:\n  replSetName: rs0\n\n# Sharding configuration (config server)\nsharding:\n  clusterRole: configsvr\n\nreplication:\n  replSetName: configReplSet\n\n# Sharding configuration (shard)\nsharding:\n  clusterRole: shardsvr\n\nreplication:\n  replSetName: shardReplSet\n```\n\n### Sharding Setup\n\n```javascript\n// Initialize config server replica set\nrs.initiate({\n  _id: \"configReplSet\",\n  configsvr: true,\n  members: [\n    { _id: 0, host: \"config1.example.com:27019\" },\n    { _id: 1, host: \"config2.example.com:27019\" },\n    { _id: 2, host: \"config3.example.com:27019\" }\n  ]\n})\n\n// Initialize shard replica sets\nrs.initiate({\n  _id: \"shard1ReplSet\",\n  members: [\n    { _id: 0, host: \"shard1-a.example.com:27018\" },\n    { _id: 1, host: \"shard1-b.example.com:27018\" },\n    { _id: 2, host: \"shard1-c.example.com:27018\" }\n  ]\n})\n\n// Add shards to cluster (from mongos)\nsh.addShard(\"shard1ReplSet/shard1-a.example.com:27018,shard1-b.example.com:27018,shard1-c.example.com:27018\")\n```\n\n### Advanced Security Settings\n\n```yaml\n# Security configuration\nsecurity:\n  authorization: enabled\n  clusterAuthMode: keyFile\n  keyFile: /etc/mongodb/mongodb-keyfile\n  javascriptEnabled: false\n  \nnet:\n  tls:\n    mode: requireTLS\n    certificateKeyFile: /etc/mongodb/ssl/mongodb.pem\n    CAFile: /etc/mongodb/ssl/ca.pem\n    allowInvalidHostnames: false\n    allowInvalidCertificates: false\n\nauditLog:\n  destination: file\n  format: JSON\n  path: /var/log/mongodb/audit.log\n```\n\n## Reverse Proxy Setup\n\n### nginx Configuration\n\n```nginx\n# /etc/nginx/sites-available/mongodb\nupstream mongodb_backend {\n    server 127.0.0.1:27017 max_fails=3 fail_timeout=30s;\n    server 127.0.0.1:27018 max_fails=3 fail_timeout=30s backup;\n}\n\nserver {\n    listen 27017;\n    proxy_pass mongodb_backend;\n    proxy_timeout 1s;\n    proxy_responses 1;\n    error_log /var/log/nginx/mongodb.log;\n}\n```\n\n### HAProxy Configuration\n\n```haproxy\n# /etc/haproxy/haproxy.cfg\nfrontend mongodb_frontend\n    bind *:27017\n    mode tcp\n    option tcplog\n    default_backend mongodb_servers\n\nbackend mongodb_servers\n    mode tcp\n    balance roundrobin\n    option tcp-check\n    tcp-check connect\n    server mongodb1 127.0.0.1:27017 check\n    server mongodb2 127.0.0.1:27018 check backup\n```\n\n### Connection Pooling with mongos\n\n```yaml\n# mongos configuration\nsharding:\n  configDB: configReplSet/config1.example.com:27019,config2.example.com:27019,config3.example.com:27019\n\nnet:\n  port: 27017\n  bindIp: 0.0.0.0\n  maxIncomingConnections: 1000\n\nsystemLog:\n  destination: file\n  path: /var/log/mongodb/mongos.log\n  logAppend: true\n```\n\n## Security Configuration\n\n### SSL/TLS Setup\n\n```bash\n# Generate SSL certificates for MongoDB\nsudo mkdir -p /etc/mongodb/ssl\n\n# Create CA certificate\nsudo openssl genrsa -out /etc/mongodb/ssl/ca-key.pem 4096\nsudo openssl req -new -x509 -days 3650 -key /etc/mongodb/ssl/ca-key.pem -out /etc/mongodb/ssl/ca.pem -subj \"/C=US/ST=State/L=City/O=Organization/CN=MongoDB-CA\"\n\n# Create server certificate\nsudo openssl genrsa -out /etc/mongodb/ssl/mongodb-key.pem 4096\nsudo openssl req -new -key /etc/mongodb/ssl/mongodb-key.pem -out /etc/mongodb/ssl/mongodb-req.pem -subj \"/C=US/ST=State/L=City/O=Organization/CN=mongodb.example.com\"\nsudo openssl x509 -req -in /etc/mongodb/ssl/mongodb-req.pem -CA /etc/mongodb/ssl/ca.pem -CAkey /etc/mongodb/ssl/ca-key.pem -CAcreateserial -out /etc/mongodb/ssl/mongodb-cert.pem -days 365\n\n# Combine certificate and key\nsudo cat /etc/mongodb/ssl/mongodb-cert.pem /etc/mongodb/ssl/mongodb-key.pem > /etc/mongodb/ssl/mongodb.pem\n\n# Set permissions\nsudo chown -R mongodb:mongodb /etc/mongodb/ssl\nsudo chmod 600 /etc/mongodb/ssl/*.pem\nsudo chmod 644 /etc/mongodb/ssl/ca.pem\n```\n\n### User Security and Authentication\n\n```javascript\n// Create admin user\nuse admin\ndb.createUser({\n  user: \"admin\",\n  pwd: \"SecureAdminPassword123!\",\n  roles: [\n    { role: \"userAdminAnyDatabase\", db: \"admin\" },\n    { role: \"readWriteAnyDatabase\", db: \"admin\" },\n    { role: \"dbAdminAnyDatabase\", db: \"admin\" },\n    { role: \"clusterAdmin\", db: \"admin\" }\n  ]\n})\n\n// Create application user\nuse myapp\ndb.createUser({\n  user: \"appuser\",\n  pwd: \"SecureAppPassword123!\",\n  roles: [\n    { role: \"readWrite\", db: \"myapp\" }\n  ]\n})\n\n// Create backup user\nuse admin\ndb.createUser({\n  user: \"backup\",\n  pwd: \"BackupPassword123!\",\n  roles: [\n    { role: \"backup\", db: \"admin\" },\n    { role: \"clusterMonitor\", db: \"admin\" }\n  ]\n})\n\n// Create monitoring user\ndb.createUser({\n  user: \"monitor\",\n  pwd: \"MonitorPassword123!\",\n  roles: [\n    { role: \"clusterMonitor\", db: \"admin\" },\n    { role: \"read\", db: \"local\" }\n  ]\n})\n```\n\n### Firewall Rules\n\n```bash\n# UFW (Ubuntu/Debian)\nsudo ufw allow from 192.168.1.0/24 to any port 27017\nsudo ufw reload\n\n# firewalld (RHEL/CentOS/openSUSE)\nsudo firewall-cmd --permanent --new-zone=mongodb\nsudo firewall-cmd --permanent --zone=mongodb --add-source=192.168.1.0/24\nsudo firewall-cmd --permanent --zone=mongodb --add-port=27017/tcp\nsudo firewall-cmd --reload\n\n# iptables\nsudo iptables -A INPUT -s 192.168.1.0/24 -p tcp --dport 27017 -j ACCEPT\nsudo iptables-save > /etc/iptables/rules.v4\n\n# pf (FreeBSD)\n# Add to /etc/pf.conf\npass in on $ext_if proto tcp from 192.168.1.0/24 to any port 27017\n\n# Windows Firewall\nNew-NetFirewallRule -DisplayName \"MongoDB\" -Direction Inbound -Protocol TCP -LocalPort 27017 -RemoteAddress 192.168.1.0/24 -Action Allow\n```\n\n## Database Setup\n\n### Database Creation and Management\n\n```javascript\n// Create application database\nuse myapp\n\n// Create collections with validation\ndb.createCollection(\"users\", {\n  validator: {\n    $jsonSchema: {\n      bsonType: \"object\",\n      required: [\"username\", \"email\"],\n      properties: {\n        username: {\n          bsonType: \"string\",\n          description: \"must be a string and is required\"\n        },\n        email: {\n          bsonType: \"string\",\n          pattern: \"^.+@.+$\",\n          description: \"must be a valid email address\"\n        }\n      }\n    }\n  }\n})\n\n// Create indexes for performance\ndb.users.createIndex({ username: 1 }, { unique: true })\ndb.users.createIndex({ email: 1 }, { unique: true })\ndb.users.createIndex({ created_at: 1 })\n\n// Create time-series collection (MongoDB 5.0+)\ndb.createCollection(\"logs\", {\n  timeseries: {\n    timeField: \"timestamp\",\n    metaField: \"source\",\n    granularity: \"minutes\"\n  }\n})\n```\n\n### Database Optimization\n\n```javascript\n// Analyze collection statistics\ndb.stats()\ndb.users.stats()\n\n// Check index usage\ndb.users.aggregate([{ $indexStats: {} }])\n\n// Optimize queries with explain\ndb.users.find({ username: \"john\" }).explain(\"executionStats\")\n\n// Create compound indexes\ndb.orders.createIndex({ user_id: 1, created_at: -1 })\n\n// Text search index\ndb.products.createIndex({ name: \"text\", description: \"text\" })\n```\n\n## Performance Optimization\n\n### System Tuning\n\n```bash\n# MongoDB-specific system optimizations\nsudo tee -a /etc/sysctl.conf <<EOF\n# MongoDB optimizations\nvm.swappiness = 1\nvm.max_map_count = 262144\nnet.core.somaxconn = 4096\nnet.ipv4.tcp_fin_timeout = 30\nnet.ipv4.tcp_keepalive_time = 120\nnet.ipv4.tcp_max_syn_backlog = 4096\nEOF\n\nsudo sysctl -p\n\n# Disable Transparent Huge Pages\necho 'never' | sudo tee /sys/kernel/mm/transparent_hugepage/enabled\necho 'never' | sudo tee /sys/kernel/mm/transparent_hugepage/defrag\n\n# Make THP disable permanent\nsudo tee /etc/systemd/system/disable-thp.service <<EOF\n[Unit]\nDescription=Disable Transparent Huge Pages (THP)\nDefaultDependencies=no\nAfter=sysinit.target local-fs.target\nBefore=mongod.service\n\n[Service]\nType=oneshot\nExecStart=/bin/sh -c 'echo never | tee /sys/kernel/mm/transparent_hugepage/enabled > /dev/null'\nExecStart=/bin/sh -c 'echo never | tee /sys/kernel/mm/transparent_hugepage/defrag > /dev/null'\n\n[Install]\nWantedBy=basic.target\nEOF\n\nsudo systemctl enable --now disable-thp\n```\n\n### MongoDB Performance Tuning\n\n```yaml\n# High-performance MongoDB configuration\nstorage:\n  wiredTiger:\n    engineConfig:\n      cacheSizeGB: 8  # 50% of available RAM\n      journalCompressor: snappy\n      directoryForIndexes: true\n    collectionConfig:\n      blockCompressor: snappy\n    indexConfig:\n      prefixCompression: true\n\noperationProfiling:\n  mode: slowOp\n  slowOpThresholdMs: 100\n  slowOpSampleRate: 1.0\n\nnet:\n  maxIncomingConnections: 1000\n  serviceExecutor: adaptive\n\nsetParameter:\n  cursorTimeoutMillis: 600000\n  failIndexKeyTooLong: false\n  maxIndexBuildDrainBatchSize: 128\n  wiredTigerConcurrentReadTransactions: 128\n  wiredTigerConcurrentWriteTransactions: 128\n```\n\n### Query Optimization\n\n```javascript\n// Enable profiler for slow operations\ndb.setProfilingLevel(2, { slowms: 100 })\n\n// Analyze slow queries\ndb.system.profile.find().limit(5).sort({ ts: -1 }).pretty()\n\n// Index optimization\ndb.collection.getIndexes()\ndb.collection.dropIndex(\"index_name\")\n\n// Use aggregation pipeline optimization\ndb.collection.aggregate([\n  { $match: { status: \"active\" } },\n  { $sort: { created_at: -1 } },\n  { $limit: 100 }\n], { allowDiskUse: true })\n```\n\n## Monitoring\n\n### Built-in Monitoring\n\n```javascript\n// Server status and statistics\ndb.runCommand(\"serverStatus\")\ndb.runCommand(\"dbStats\")\ndb.runCommand(\"collStats\", \"collection_name\")\n\n// Connection and operation monitoring\ndb.runCommand(\"currentOp\")\ndb.runCommand(\"top\")\n\n// Replica set monitoring\nrs.status()\nrs.printReplicationInfo()\nrs.printSlaveReplicationInfo()\n\n// Sharding monitoring\nsh.status()\ndb.printShardingStatus()\n```\n\n### External Monitoring Setup\n\n```bash\n# Install MongoDB Exporter for Prometheus\nwget https://github.com/percona/mongodb_exporter/releases/download/v0.39.0/mongodb_exporter-0.39.0.linux-amd64.tar.gz\ntar xzf mongodb_exporter-*.tar.gz\nsudo cp mongodb_exporter /usr/local/bin/\n\n# Create systemd service\nsudo tee /etc/systemd/system/mongodb_exporter.service <<EOF\n[Unit]\nDescription=MongoDB Exporter\nAfter=network.target\n\n[Service]\nType=simple\nUser=mongodb\nEnvironment=MONGODB_URI=\"mongodb://monitor:MonitorPassword123!@localhost:27017/admin\"\nExecStart=/usr/local/bin/mongodb_exporter --mongodb.uri=\\$MONGODB_URI\nRestart=always\n\n[Install]\nWantedBy=multi-user.target\nEOF\n\nsudo systemctl enable --now mongodb_exporter\n```\n\n### Health Check Scripts\n\n```bash\n#!/bin/bash\n# mongodb-health-check.sh\n\n# Check MongoDB service\nif ! systemctl is-active mongod >/dev/null 2>&1; then\n    echo \"CRITICAL: MongoDB service is not running\"\n    exit 2\nfi\n\n# Check connectivity\nif ! mongosh --quiet --eval \"db.runCommand('ping')\" >/dev/null 2>&1; then\n    echo \"CRITICAL: Cannot connect to MongoDB\"\n    exit 2\nfi\n\n# Check replica set status (if configured)\nREPLICA_STATUS=$(mongosh --quiet --eval \"rs.status().ok\" 2>/dev/null)\nif [ \"$REPLICA_STATUS\" = \"1\" ]; then\n    PRIMARY_COUNT=$(mongosh --quiet --eval \"rs.status().members.filter(m => m.stateStr === 'PRIMARY').length\" 2>/dev/null)\n    if [ \"$PRIMARY_COUNT\" != \"1\" ]; then\n        echo \"WARNING: No primary or multiple primaries in replica set\"\n        exit 1\n    fi\nfi\n\n# Check connections\nCONNECTIONS=$(mongosh --quiet --eval \"db.serverStatus().connections.current\" 2>/dev/null)\nMAX_CONNECTIONS=$(mongosh --quiet --eval \"db.serverStatus().connections.available\" 2>/dev/null)\nCONNECTION_USAGE=$((CONNECTIONS * 100 / (CONNECTIONS + MAX_CONNECTIONS)))\n\nif [ $CONNECTION_USAGE -gt 80 ]; then\n    echo \"WARNING: High connection usage: ${CONNECTION_USAGE}%\"\n    exit 1\nfi\n\necho \"OK: MongoDB is healthy\"\nexit 0\n```\n\n## Backup and Restore\n\n### Backup Procedures\n\n```bash\n#!/bin/bash\n# mongodb-backup.sh\n\nBACKUP_DIR=\"/backup/mongodb/$(date +%Y%m%d_%H%M%S)\"\nmkdir -p \"$BACKUP_DIR\"\n\n# Full database backup\nmongodump \\\n  --host=\"localhost:27017\" \\\n  --username=backup \\\n  --password=BackupPassword123! \\\n  --authenticationDatabase=admin \\\n  --gzip \\\n  --out \"$BACKUP_DIR\"\n\n# Oplog backup for point-in-time recovery\nmongodump \\\n  --host=\"localhost:27017\" \\\n  --username=backup \\\n  --password=BackupPassword123! \\\n  --authenticationDatabase=admin \\\n  --db=local \\\n  --collection=oplog.rs \\\n  --gzip \\\n  --out \"$BACKUP_DIR/oplog\"\n\n# Configuration backup\ncp -r /etc/mongod.conf \"$BACKUP_DIR/\"\n\n# Compress backup\ntar czf \"$BACKUP_DIR.tar.gz\" -C \"$(dirname \"$BACKUP_DIR\")\" \"$(basename \"$BACKUP_DIR\")\"\nrm -rf \"$BACKUP_DIR\"\n\necho \"Backup completed: $BACKUP_DIR.tar.gz\"\n```\n\n### Restore Procedures\n\n```bash\n#!/bin/bash\n# mongodb-restore.sh\n\nBACKUP_FILE=\"$1\"\nif [ -z \"$BACKUP_FILE\" ]; then\n    echo \"Usage: $0 <backup-file.tar.gz>\"\n    exit 1\nfi\n\n# Extract backup\nBACKUP_DIR=\"/tmp/mongodb-restore-$(date +%s)\"\nmkdir -p \"$BACKUP_DIR\"\ntar xzf \"$BACKUP_FILE\" -C \"$BACKUP_DIR\" --strip-components=1\n\n# Stop applications using the database\necho \"Stopping applications...\"\n\n# Restore database\necho \"Restoring database from $BACKUP_FILE...\"\nmongorestore \\\n  --host=\"localhost:27017\" \\\n  --username=admin \\\n  --password=SecureAdminPassword123! \\\n  --authenticationDatabase=admin \\\n  --gzip \\\n  --drop \\\n  \"$BACKUP_DIR\"\n\n# Cleanup\nrm -rf \"$BACKUP_DIR\"\n\necho \"Restore completed\"\n```\n\n### Point-in-Time Recovery\n\n```bash\n#!/bin/bash\n# mongodb-pitr.sh\n\nBACKUP_FILE=\"$1\"\nRECOVERY_TIME=\"$2\"\n\nif [ -z \"$BACKUP_FILE\" ] || [ -z \"$RECOVERY_TIME\" ]; then\n    echo \"Usage: $0 <backup-file.tar.gz> <recovery-time>\"\n    echo \"Example: $0 backup.tar.gz '2024-01-15T14:30:00.000Z'\"\n    exit 1\nfi\n\n# Extract and restore base backup\nBACKUP_DIR=\"/tmp/mongodb-pitr-$(date +%s)\"\nmkdir -p \"$BACKUP_DIR\"\ntar xzf \"$BACKUP_FILE\" -C \"$BACKUP_DIR\" --strip-components=1\n\n# Restore base backup\nmongorestore \\\n  --host=\"localhost:27017\" \\\n  --username=admin \\\n  --password=SecureAdminPassword123! \\\n  --authenticationDatabase=admin \\\n  --gzip \\\n  --drop \\\n  \"$BACKUP_DIR\"\n\n# Apply oplog up to recovery point\nmongorestore \\\n  --host=\"localhost:27017\" \\\n  --username=admin \\\n  --password=SecureAdminPassword123! \\\n  --authenticationDatabase=admin \\\n  --oplogReplay \\\n  --oplogLimit=\"$(date -d \"$RECOVERY_TIME\" +%s):1\" \\\n  --gzip \\\n  \"$BACKUP_DIR/oplog\"\n\n# Cleanup\nrm -rf \"$BACKUP_DIR\"\n\necho \"Point-in-time recovery completed to $RECOVERY_TIME\"\n```\n\n## Troubleshooting\n\n### Common Issues\n\n1. **MongoDB won't start**:\n```bash\n# Check logs\nsudo journalctl -u mongod -f\nsudo tail -f /var/log/mongodb/mongod.log\n\n# Check disk space\ndf -h /var/lib/mongodb\n\n# Check permissions\nls -la /var/lib/mongodb\n\n# Repair database\nmongod --repair --dbpath /var/lib/mongodb\n```\n\n2. **Connection issues**:\n```bash\n# Check if MongoDB is listening\nsudo ss -tlnp | grep :27017\n\n# Test local connection\nmongosh --eval \"db.runCommand('ping')\"\n\n# Check authentication\nmongosh admin --username admin\n\n# Check bind address\nmongosh --eval \"db.runCommand('getCmdLineOpts')\"\n```\n\n3. **Performance issues**:\n```bash\n# Check slow queries\nmongosh --eval \"db.setProfilingLevel(2, {slowms: 100})\"\nmongosh --eval \"db.system.profile.find().sort({ts:-1}).limit(5)\"\n\n# Check index usage\nmongosh --eval \"db.collection.getIndexes()\"\n\n# Check server status\nmongosh --eval \"db.serverStatus()\"\n```\n\n### Debug Mode\n\n```bash\n# Start MongoDB with verbose logging\nsudo systemctl edit mongod\n# Add:\n[Service]\nEnvironment=\"MONGOD_OPTIONS=--verbose\"\n\nsudo systemctl daemon-reload\nsudo systemctl restart mongod\n\n# Enable profiling for all operations\nmongosh --eval \"db.setProfilingLevel(2)\"\n\n# View debug logs\nsudo tail -f /var/log/mongodb/mongod.log\n```\n\n## Maintenance\n\n### Update Procedures\n\n```bash\n# RHEL/CentOS/Rocky/AlmaLinux\nsudo yum check-update mongodb-org\nsudo yum update mongodb-org\n\n# Debian/Ubuntu\nsudo apt update\nsudo apt upgrade mongodb-org\n\n# Arch Linux\nyay -Syu mongodb-bin\n\n# macOS\nbrew upgrade mongodb-community@7.0\n\n# Docker (Alpine/FreeBSD)\ndocker pull mongo:7.0\ndocker stop mongodb\ndocker rm mongodb\n# Re-run docker run command with new image\n\n# Always backup before updates\n./mongodb-backup.sh\n\n# Restart after updates\nsudo systemctl restart mongod\n```\n\n### Maintenance Tasks\n\n```bash\n# Weekly maintenance script\n#!/bin/bash\n# mongodb-maintenance.sh\n\n# Compact collections\nmongosh admin --username admin --password SecureAdminPassword123! <<EOF\nuse myapp\ndb.runCommand({compact: \"collection_name\"})\nEOF\n\n# Update collection statistics\nmongosh admin --username admin --password SecureAdminPassword123! <<EOF\ndb.runCommand({planCacheClear: \"\"})\nEOF\n\n# Clean up old oplogs (automatically managed but can be tuned)\nmongosh admin --username admin --password SecureAdminPassword123! <<EOF\nuse local\ndb.oplog.rs.find().sort({\\$natural:-1}).limit(1)\nEOF\n\necho \"MongoDB maintenance completed\"\n```\n\n### Health Monitoring\n\n```bash\n# Create monitoring cron job\necho \"*/5 * * * * /usr/local/bin/mongodb-health-check.sh\" | sudo crontab -\n\n# Log rotation\nsudo tee /etc/logrotate.d/mongodb <<EOF\n/var/log/mongodb/*.log {\n    daily\n    rotate 7\n    compress\n    delaycompress\n    missingok\n    notifempty\n    create 644 mongodb mongodb\n    postrotate\n        /bin/kill -SIGUSR1 \\$(cat /var/run/mongodb/mongod.pid 2>/dev/null) 2>/dev/null || true\n    endscript\n}\nEOF\n```\n\n## Integration Examples\n\n### Node.js Integration\n\n```javascript\n// Using MongoDB Node.js driver\nconst { MongoClient } = require('mongodb');\n\nconst client = new MongoClient('mongodb://appuser:SecureAppPassword123!@localhost:27017/myapp', {\n  tls: true,\n  tlsCertificateKeyFile: '/etc/mongodb/ssl/client.pem',\n  tlsCAFile: '/etc/mongodb/ssl/ca.pem',\n  authSource: 'myapp'\n});\n\nasync function connect() {\n  await client.connect();\n  const db = client.db('myapp');\n  return db;\n}\n```\n\n### Python Integration\n\n```python\n# Using PyMongo\nimport pymongo\nfrom pymongo import MongoClient\n\nclient = MongoClient('mongodb://appuser:SecureAppPassword123!@localhost:27017/myapp', \n                    tls=True,\n                    tlsCertificateKeyFile='/etc/mongodb/ssl/client.pem',\n                    tlsCAFile='/etc/mongodb/ssl/ca.pem',\n                    authSource='myapp')\n\ndb = client.myapp\ncollection = db.users\n```\n\n### Java Integration\n\n```java\n// Using MongoDB Java driver\nimport com.mongodb.client.MongoClients;\nimport com.mongodb.client.MongoClient;\nimport com.mongodb.client.MongoDatabase;\nimport com.mongodb.MongoClientSettings;\nimport com.mongodb.ConnectionString;\n\nMongoClientSettings settings = MongoClientSettings.builder()\n    .applyConnectionString(new ConnectionString(\"mongodb://appuser:SecureAppPassword123!@localhost:27017/myapp\"))\n    .applyToSslSettings(builder -> \n        builder.enabled(true)\n               .invalidHostNameAllowed(false))\n    .build();\n\nMongoClient mongoClient = MongoClients.create(settings);\nMongoDatabase database = mongoClient.getDatabase(\"myapp\");\n```\n\n### Express.js Integration\n\n```javascript\n// Using Mongoose ODM\nconst mongoose = require('mongoose');\n\nmongoose.connect('mongodb://appuser:SecureAppPassword123!@localhost:27017/myapp', {\n  tls: true,\n  tlsCertificateKeyFile: '/etc/mongodb/ssl/client.pem',\n  tlsCAFile: '/etc/mongodb/ssl/ca.pem',\n  authSource: 'myapp'\n});\n\nconst userSchema = new mongoose.Schema({\n  username: { type: String, required: true, unique: true },\n  email: { type: String, required: true, unique: true },\n  created_at: { type: Date, default: Date.now }\n});\n\nmodule.exports = mongoose.model('User', userSchema);\n```\n\n## Additional Resources\n\n- [Official MongoDB Documentation](https://docs.mongodb.com/)\n- [MongoDB University](https://university.mongodb.com/)\n- [MongoDB Security Checklist](https://docs.mongodb.com/manual/administration/security-checklist/)\n- [MongoDB Performance Best Practices](https://docs.mongodb.com/manual/administration/analyzing-mongodb-performance/)\n- [Replica Set Tutorial](https://docs.mongodb.com/manual/tutorial/deploy-replica-set/)\n- [Sharding Tutorial](https://docs.mongodb.com/manual/tutorial/deploy-shard-cluster/)\n- [MongoDB Community Forum](https://developer.mongodb.com/community/forums/)\n- [MongoDB Blog](https://www.mongodb.com/blog)\n\n---\n\n**Note:** This guide is part of the [HowToMgr](https://howtomgr.github.io) collection. Always refer to official documentation for the most up-to-date information.","readmeHtml":"<h1 id=\"mongodb-installation-guide\" class=\"mobile-header\">MongoDB Installation Guide</h1>\n<p class=\"mobile-paragraph\">MongoDB is a free and open-source document-oriented NoSQL database. Originally developed by 10gen (now MongoDB Inc.), MongoDB uses JSON-like documents with optional schemas instead of traditional table-based relational database structure. It serves as a FOSS alternative to commercial document databases like Amazon DocumentDB, Azure Cosmos DB, or Oracle NoSQL Database, offering enterprise-grade features including horizontal scaling, replica sets, and sharding without licensing costs, with features like ACID transactions, aggregation pipelines, and full-text search.</p>\n<h2 id=\"prerequisites\" class=\"mobile-header\">Prerequisites</h2>\n<li class=\"mobile-list-item\"><strong>Hardware Requirements</strong>:</li>\n<li class=\"mobile-list-item\">CPU: 2 cores minimum (4+ cores recommended for production)</li>\n<li class=\"mobile-list-item\">RAM: 2GB minimum (8GB+ recommended for production)</li>\n<li class=\"mobile-list-item\">Storage: 10GB minimum (SSD strongly recommended for performance)</li>\n<li class=\"mobile-list-item\">Network: Stable connectivity for replica sets and sharding</li>\n<li class=\"mobile-list-item\"><strong>Operating System</strong>: </li>\n<li class=\"mobile-list-item\">Linux: Any modern distribution with kernel 3.2+</li>\n<li class=\"mobile-list-item\">macOS: 10.14+ (Mojave or newer)</li>\n<li class=\"mobile-list-item\">Windows: Windows Server 2016+ or Windows 10</li>\n<li class=\"mobile-list-item\">FreeBSD: Not officially supported by MongoDB Inc.</li>\n<li class=\"mobile-list-item\"><strong>Network Requirements</strong>:</li>\n<li class=\"mobile-list-item\">Port 27017 (default MongoDB port)</li>\n<li class=\"mobile-list-item\">Port 27018 (default shard port)</li>\n<li class=\"mobile-list-item\">Port 27019 (default config server port)</li>\n<li class=\"mobile-list-item\">Additional ports for replica set members</li>\n<li class=\"mobile-list-item\"><strong>Dependencies</strong>:</li>\n<li class=\"mobile-list-item\">OpenSSL, PCRE, zlib (usually included in distributions)</li>\n<li class=\"mobile-list-item\">systemd or compatible init system (Linux)</li>\n<li class=\"mobile-list-item\">Root or administrative access for installation</li>\n<li class=\"mobile-list-item\"><strong>System Access</strong>: root or sudo privileges required</li>\n<h2 id=\"installation\" class=\"mobile-header\">Installation</h2>\n<h3 id=\"rhelcentosrocky-linuxalmalinux\" class=\"mobile-header\">RHEL/CentOS/Rocky Linux/AlmaLinux</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Create MongoDB 7.0 repository\nsudo tee /etc/yum.repos.d/mongodb-org-7.0.repo &lt;&lt;EOF\n[mongodb-org-7.0]\nname=MongoDB Repository\nbaseurl=https://repo.mongodb.org/yum/redhat/\\$releasever/mongodb-org/7.0/\\$basearch/\ngpgcheck=1\nenabled=1\ngpgkey=https://www.mongodb.org/static/pgp/server-7.0.asc\nEOF\n\n# Install MongoDB\nsudo yum install -y mongodb-org mongodb-org-tools mongodb-mongosh\n\n# Enable and start service\nsudo systemctl enable --now mongod\n\n# Configure firewall\nsudo firewall-cmd --permanent --add-port=27017/tcp\nsudo firewall-cmd --reload\n\n# Verify installation\nmongosh --eval &#039;db.runCommand(&quot;connectionStatus&quot;)&#039;</code></pre>\n      </div>\n    </div>\n<h3 id=\"debianubuntu\" class=\"mobile-header\">Debian/Ubuntu</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Update package index\nsudo apt update\n\n# Install prerequisite packages\nsudo apt install -y wget gnupg software-properties-common\n\n# Import MongoDB GPG key\nwget -qO /tmp/mongodb-server-7.0.asc https://www.mongodb.org/static/pgp/server-7.0.asc\nsudo mv /tmp/mongodb-server-7.0.asc /etc/apt/trusted.gpg.d/mongodb-server-7.0.asc\n\n# Add MongoDB repository\necho &quot;deb [arch=amd64,arm64] https://repo.mongodb.org/apt/ubuntu $(lsb_release -cs)/mongodb-org/7.0 multiverse&quot; | sudo tee /etc/apt/sources.list.d/mongodb-org-7.0.list\n\n# Update package index\nsudo apt update\n\n# Install MongoDB\nsudo apt install -y mongodb-org mongodb-org-tools mongodb-mongosh\n\n# Enable and start service\nsudo systemctl enable --now mongod\n\n# Configure firewall\nsudo ufw allow 27017</code></pre>\n      </div>\n    </div>\n<h3 id=\"arch-linux\" class=\"mobile-header\">Arch Linux</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># MongoDB is available in AUR\nyay -S mongodb-bin mongodb-tools-bin mongosh-bin\n\n# Alternative: Install from AUR with makepkg\ngit clone https://aur.archlinux.org/mongodb-bin.git\ncd mongodb-bin\nmakepkg -si\n\n# Create mongodb user and group\nsudo useradd -r -s /sbin/nologin mongodb\n\n# Create necessary directories\nsudo mkdir -p /var/lib/mongodb /var/log/mongodb\nsudo chown mongodb:mongodb /var/lib/mongodb /var/log/mongodb\n\n# Enable and start service\nsudo systemctl enable --now mongodb\n\n# Configuration location: /etc/mongodb.conf</code></pre>\n      </div>\n    </div>\n<h3 id=\"alpine-linux\" class=\"mobile-header\">Alpine Linux</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># MongoDB is not officially supported on Alpine Linux\n# Use Docker for MongoDB on Alpine:\n\n# Install Docker\napk add --no-cache docker docker-compose\n\n# Enable and start Docker\nrc-update add docker default\nrc-service docker start\n\n# Run MongoDB container\ndocker run -d \\\n  --name mongodb \\\n  --restart unless-stopped \\\n  -p 27017:27017 \\\n  -v /var/lib/mongodb:/data/db \\\n  -e MONGO_INITDB_ROOT_USERNAME=admin \\\n  -e MONGO_INITDB_ROOT_PASSWORD=SecurePassword123! \\\n  mongo:7.0\n\n# Verify installation\ndocker exec mongodb mongosh --eval &#039;db.runCommand(&quot;connectionStatus&quot;)&#039;</code></pre>\n      </div>\n    </div>\n<h3 id=\"opensusesles\" class=\"mobile-header\">openSUSE/SLES</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># MongoDB is not officially packaged for openSUSE/SLES\n# Use Docker or manual installation:\n\n# Method 1: Docker installation\nsudo zypper install -y docker docker-compose\nsudo systemctl enable --now docker\n\ndocker run -d \\\n  --name mongodb \\\n  --restart unless-stopped \\\n  -p 27017:27017 \\\n  -v /var/lib/mongodb:/data/db \\\n  -e MONGO_INITDB_ROOT_USERNAME=admin \\\n  -e MONGO_INITDB_ROOT_PASSWORD=SecurePassword123! \\\n  mongo:7.0\n\n# Method 2: Manual installation from tarball\nwget https://fastdl.mongodb.org/linux/mongodb-linux-x86_64-rhel80-7.0.4.tgz\ntar -xzf mongodb-linux-x86_64-rhel80-7.0.4.tgz\nsudo cp mongodb-linux-x86_64-rhel80-7.0.4/bin/* /usr/local/bin/\n\n# Create mongodb user and directories\nsudo useradd -r mongodb\nsudo mkdir -p /var/lib/mongodb /var/log/mongodb\nsudo chown mongodb:mongodb /var/lib/mongodb /var/log/mongodb</code></pre>\n      </div>\n    </div>\n<h3 id=\"macos\" class=\"mobile-header\">macOS</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Using Homebrew\nbrew tap mongodb/brew\nbrew install mongodb-community@7.0 mongodb-database-tools mongosh\n\n# Start MongoDB service\nbrew services start mongodb/brew/mongodb-community@7.0\n\n# Or run manually\nmongod --config /usr/local/etc/mongod.conf\n\n# Configuration location: /usr/local/etc/mongod.conf\n# Alternative: /opt/homebrew/etc/mongod.conf (Apple Silicon)</code></pre>\n      </div>\n    </div>\n<h3 id=\"freebsd\" class=\"mobile-header\">FreeBSD</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># MongoDB is not officially supported on FreeBSD\n# Use Docker or compile from source:\n\n# Install Docker\npkg install docker\necho &#039;docker_enable=&quot;YES&quot;&#039; &gt;&gt; /etc/rc.conf\nservice docker start\n\n# Run MongoDB container\ndocker run -d \\\n  --name mongodb \\\n  --restart unless-stopped \\\n  -p 27017:27017 \\\n  -v /var/lib/mongodb:/data/db \\\n  -e MONGO_INITDB_ROOT_USERNAME=admin \\\n  -e MONGO_INITDB_ROOT_PASSWORD=SecurePassword123! \\\n  mongo:7.0</code></pre>\n      </div>\n    </div>\n<h3 id=\"windows\" class=\"mobile-header\">Windows</h3>\n<div class=\"mobile-code-block\" data-language=\"powershell\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">powershell</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-powershell\"># Method 1: Using Chocolatey\nchoco install mongodb mongodb-shell\n\n# Method 2: Using Scoop\nscoop bucket add main\nscoop install mongodb mongodb-shell\n\n# Method 3: Manual installation\n# Download from https://www.mongodb.com/download-center/community\n# Run mongodb-windows-x86_64-*.msi\n\n# Install as Windows service\n&quot;C:\\Program Files\\MongoDB\\Server\\7.0\\bin\\mongod.exe&quot; --config &quot;C:\\Program Files\\MongoDB\\Server\\7.0\\bin\\mongod.cfg&quot; --install\n\n# Start service\nnet start MongoDB\n\n# Configuration location: C:\\Program Files\\MongoDB\\Server\\7.0\\bin\\mongod.cfg</code></pre>\n      </div>\n    </div>\n<h2 id=\"initial-configuration\" class=\"mobile-header\">Initial Configuration</h2>\n<h3 id=\"first-run-setup\" class=\"mobile-header\">First-Run Setup</h3>\n<p class=\"mobile-paragraph\">1. <strong>Create mongodb user</strong> (if not created by package):</p>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Linux systems\nsudo useradd -r -d /var/lib/mongodb -s /sbin/nologin -c &quot;MongoDB Server&quot; mongodb</code></pre>\n      </div>\n    </div>\n<p class=\"mobile-paragraph\">2. <strong>Default configuration locations</strong>:</p>\n<li class=\"mobile-list-item\">RHEL/CentOS/Rocky/AlmaLinux: <code class=\"mobile-inline-code\">/etc/mongod.conf</code></li>\n<li class=\"mobile-list-item\">Debian/Ubuntu: <code class=\"mobile-inline-code\">/etc/mongod.conf</code></li>\n<li class=\"mobile-list-item\">Arch Linux: <code class=\"mobile-inline-code\">/etc/mongodb.conf</code></li>\n<li class=\"mobile-list-item\">Alpine Linux: Docker container configuration</li>\n<li class=\"mobile-list-item\">openSUSE/SLES: <code class=\"mobile-inline-code\">/etc/mongod.conf</code> (manual installation)</li>\n<li class=\"mobile-list-item\">macOS: <code class=\"mobile-inline-code\">/usr/local/etc/mongod.conf</code></li>\n<li class=\"mobile-list-item\">FreeBSD: Docker container configuration</li>\n<li class=\"mobile-list-item\">Windows: <code class=\"mobile-inline-code\">C:\\Program Files\\MongoDB\\Server\\7.0\\bin\\mongod.cfg</code></li>\n<p class=\"mobile-paragraph\">3. <strong>Essential settings to change</strong>:</p>\n<div class=\"mobile-code-block\" data-language=\"yaml\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">yaml</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-yaml\"># /etc/mongod.conf\nstorage:\n  dbPath: /var/lib/mongodb\n  journal:\n    enabled: true\n  wiredTiger:\n    engineConfig:\n      cacheSizeGB: 2\n      journalCompressor: snappy\n\nsystemLog:\n  destination: file\n  path: /var/log/mongodb/mongod.log\n  logAppend: true\n  logRotate: rename\n\nnet:\n  port: 27017\n  bindIp: 127.0.0.1\n  maxIncomingConnections: 200\n\nsecurity:\n  authorization: enabled\n  javascriptEnabled: false\n\noperationProfiling:\n  slowOpThresholdMs: 100\n\nreplication:\n  replSetName: rs0\n\nprocessManagement:\n  fork: true\n  pidFilePath: /var/run/mongodb/mongod.pid</code></pre>\n      </div>\n    </div>\n<h3 id=\"testing-initial-setup\" class=\"mobile-header\">Testing Initial Setup</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Check if MongoDB is running\nsudo systemctl status mongod\n\n# Test connection\nmongosh --eval &#039;db.runCommand(&quot;connectionStatus&quot;)&#039;\n\n# Check database status\nmongosh --eval &#039;db.runCommand(&quot;serverStatus&quot;)&#039;\n\n# Check configuration\nmongosh --eval &#039;db.runCommand(&quot;getCmdLineOpts&quot;)&#039;\n\n# Test basic operations\nmongosh --eval &#039;use test; db.testCollection.insertOne({test: &quot;document&quot;}); db.testCollection.findOne()&#039;</code></pre>\n      </div>\n    </div>\n<p class=\"mobile-paragraph\"><strong>WARNING:</strong> Enable authentication and create admin users immediately after installation!</p>\n<h2 id=\"service-management\" class=\"mobile-header\">Service Management</h2>\n<h3 id=\"systemd-rhel-debian-ubuntu-arch-opensuse\" class=\"mobile-header\">systemd (RHEL, Debian, Ubuntu, Arch, openSUSE)</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Enable MongoDB to start on boot\nsudo systemctl enable mongod\n\n# Start MongoDB\nsudo systemctl start mongod\n\n# Stop MongoDB\nsudo systemctl stop mongod\n\n# Restart MongoDB\nsudo systemctl restart mongod\n\n# Reload configuration (graceful restart)\nsudo systemctl reload mongod\n\n# Check status\nsudo systemctl status mongod\n\n# View logs\nsudo journalctl -u mongod -f</code></pre>\n      </div>\n    </div>\n<h3 id=\"openrc-alpine-linux\" class=\"mobile-header\">OpenRC (Alpine Linux)</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># MongoDB runs in Docker container on Alpine\ndocker start mongodb\ndocker stop mongodb\ndocker restart mongodb\n\n# Check status\ndocker ps | grep mongodb\n\n# View logs\ndocker logs -f mongodb</code></pre>\n      </div>\n    </div>\n<h3 id=\"rcd-freebsd\" class=\"mobile-header\">rc.d (FreeBSD)</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># MongoDB runs in Docker container on FreeBSD\nservice docker start\n\ndocker start mongodb\ndocker stop mongodb\ndocker restart mongodb\n\n# Check status\ndocker ps | grep mongodb</code></pre>\n      </div>\n    </div>\n<h3 id=\"launchd-macos\" class=\"mobile-header\">launchd (macOS)</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Using Homebrew services\nbrew services start mongodb/brew/mongodb-community@7.0\nbrew services stop mongodb/brew/mongodb-community@7.0\nbrew services restart mongodb/brew/mongodb-community@7.0\n\n# Check status\nbrew services list | grep mongodb\n\n# Manual control\nmongod --config /usr/local/etc/mongod.conf</code></pre>\n      </div>\n    </div>\n<h3 id=\"windows-service-manager\" class=\"mobile-header\">Windows Service Manager</h3>\n<div class=\"mobile-code-block\" data-language=\"powershell\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">powershell</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-powershell\"># Start MongoDB service\nnet start MongoDB\n\n# Stop MongoDB service\nnet stop MongoDB\n\n# Using PowerShell\nStart-Service MongoDB\nStop-Service MongoDB\nRestart-Service MongoDB\n\n# Check status\nGet-Service MongoDB\n\n# View logs\nGet-EventLog -LogName Application -Source MongoDB</code></pre>\n      </div>\n    </div>\n<h2 id=\"advanced-configuration\" class=\"mobile-header\">Advanced Configuration</h2>\n<h3 id=\"replica-set-configuration\" class=\"mobile-header\">Replica Set Configuration</h3>\n<div class=\"mobile-code-block\" data-language=\"yaml\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">yaml</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-yaml\"># Replica set configuration\nreplication:\n  replSetName: rs0\n\n# Sharding configuration (config server)\nsharding:\n  clusterRole: configsvr\n\nreplication:\n  replSetName: configReplSet\n\n# Sharding configuration (shard)\nsharding:\n  clusterRole: shardsvr\n\nreplication:\n  replSetName: shardReplSet</code></pre>\n      </div>\n    </div>\n<h3 id=\"sharding-setup\" class=\"mobile-header\">Sharding Setup</h3>\n<div class=\"mobile-code-block\" data-language=\"javascript\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">javascript</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-javascript\">// Initialize config server replica set\nrs.initiate({\n  _id: &quot;configReplSet&quot;,\n  configsvr: true,\n  members: [\n    { _id: 0, host: &quot;config1.example.com:27019&quot; },\n    { _id: 1, host: &quot;config2.example.com:27019&quot; },\n    { _id: 2, host: &quot;config3.example.com:27019&quot; }\n  ]\n})\n\n// Initialize shard replica sets\nrs.initiate({\n  _id: &quot;shard1ReplSet&quot;,\n  members: [\n    { _id: 0, host: &quot;shard1-a.example.com:27018&quot; },\n    { _id: 1, host: &quot;shard1-b.example.com:27018&quot; },\n    { _id: 2, host: &quot;shard1-c.example.com:27018&quot; }\n  ]\n})\n\n// Add shards to cluster (from mongos)\nsh.addShard(&quot;shard1ReplSet/shard1-a.example.com:27018,shard1-b.example.com:27018,shard1-c.example.com:27018&quot;)</code></pre>\n      </div>\n    </div>\n<h3 id=\"advanced-security-settings\" class=\"mobile-header\">Advanced Security Settings</h3>\n<div class=\"mobile-code-block\" data-language=\"yaml\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">yaml</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-yaml\"># Security configuration\nsecurity:\n  authorization: enabled\n  clusterAuthMode: keyFile\n  keyFile: /etc/mongodb/mongodb-keyfile\n  javascriptEnabled: false\n  \nnet:\n  tls:\n    mode: requireTLS\n    certificateKeyFile: /etc/mongodb/ssl/mongodb.pem\n    CAFile: /etc/mongodb/ssl/ca.pem\n    allowInvalidHostnames: false\n    allowInvalidCertificates: false\n\nauditLog:\n  destination: file\n  format: JSON\n  path: /var/log/mongodb/audit.log</code></pre>\n      </div>\n    </div>\n<h2 id=\"reverse-proxy-setup\" class=\"mobile-header\">Reverse Proxy Setup</h2>\n<h3 id=\"nginx-configuration\" class=\"mobile-header\">nginx Configuration</h3>\n<div class=\"mobile-code-block\" data-language=\"nginx\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">nginx</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-nginx\"># /etc/nginx/sites-available/mongodb\nupstream mongodb_backend {\n    server 127.0.0.1:27017 max_fails=3 fail_timeout=30s;\n    server 127.0.0.1:27018 max_fails=3 fail_timeout=30s backup;\n}\n\nserver {\n    listen 27017;\n    proxy_pass mongodb_backend;\n    proxy_timeout 1s;\n    proxy_responses 1;\n    error_log /var/log/nginx/mongodb.log;\n}</code></pre>\n      </div>\n    </div>\n<h3 id=\"haproxy-configuration\" class=\"mobile-header\">HAProxy Configuration</h3>\n<div class=\"mobile-code-block\" data-language=\"haproxy\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">haproxy</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-haproxy\"># /etc/haproxy/haproxy.cfg\nfrontend mongodb_frontend\n    bind *:27017\n    mode tcp\n    option tcplog\n    default_backend mongodb_servers\n\nbackend mongodb_servers\n    mode tcp\n    balance roundrobin\n    option tcp-check\n    tcp-check connect\n    server mongodb1 127.0.0.1:27017 check\n    server mongodb2 127.0.0.1:27018 check backup</code></pre>\n      </div>\n    </div>\n<h3 id=\"connection-pooling-with-mongos\" class=\"mobile-header\">Connection Pooling with mongos</h3>\n<div class=\"mobile-code-block\" data-language=\"yaml\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">yaml</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-yaml\"># mongos configuration\nsharding:\n  configDB: configReplSet/config1.example.com:27019,config2.example.com:27019,config3.example.com:27019\n\nnet:\n  port: 27017\n  bindIp: 0.0.0.0\n  maxIncomingConnections: 1000\n\nsystemLog:\n  destination: file\n  path: /var/log/mongodb/mongos.log\n  logAppend: true</code></pre>\n      </div>\n    </div>\n<h2 id=\"security-configuration\" class=\"mobile-header\">Security Configuration</h2>\n<h3 id=\"ssltls-setup\" class=\"mobile-header\">SSL/TLS Setup</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Generate SSL certificates for MongoDB\nsudo mkdir -p /etc/mongodb/ssl\n\n# Create CA certificate\nsudo openssl genrsa -out /etc/mongodb/ssl/ca-key.pem 4096\nsudo openssl req -new -x509 -days 3650 -key /etc/mongodb/ssl/ca-key.pem -out /etc/mongodb/ssl/ca.pem -subj &quot;/C=US/ST=State/L=City/O=Organization/CN=MongoDB-CA&quot;\n\n# Create server certificate\nsudo openssl genrsa -out /etc/mongodb/ssl/mongodb-key.pem 4096\nsudo openssl req -new -key /etc/mongodb/ssl/mongodb-key.pem -out /etc/mongodb/ssl/mongodb-req.pem -subj &quot;/C=US/ST=State/L=City/O=Organization/CN=mongodb.example.com&quot;\nsudo openssl x509 -req -in /etc/mongodb/ssl/mongodb-req.pem -CA /etc/mongodb/ssl/ca.pem -CAkey /etc/mongodb/ssl/ca-key.pem -CAcreateserial -out /etc/mongodb/ssl/mongodb-cert.pem -days 365\n\n# Combine certificate and key\nsudo cat /etc/mongodb/ssl/mongodb-cert.pem /etc/mongodb/ssl/mongodb-key.pem &gt; /etc/mongodb/ssl/mongodb.pem\n\n# Set permissions\nsudo chown -R mongodb:mongodb /etc/mongodb/ssl\nsudo chmod 600 /etc/mongodb/ssl/*.pem\nsudo chmod 644 /etc/mongodb/ssl/ca.pem</code></pre>\n      </div>\n    </div>\n<h3 id=\"user-security-and-authentication\" class=\"mobile-header\">User Security and Authentication</h3>\n<div class=\"mobile-code-block\" data-language=\"javascript\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">javascript</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-javascript\">// Create admin user\nuse admin\ndb.createUser({\n  user: &quot;admin&quot;,\n  pwd: &quot;SecureAdminPassword123!&quot;,\n  roles: [\n    { role: &quot;userAdminAnyDatabase&quot;, db: &quot;admin&quot; },\n    { role: &quot;readWriteAnyDatabase&quot;, db: &quot;admin&quot; },\n    { role: &quot;dbAdminAnyDatabase&quot;, db: &quot;admin&quot; },\n    { role: &quot;clusterAdmin&quot;, db: &quot;admin&quot; }\n  ]\n})\n\n// Create application user\nuse myapp\ndb.createUser({\n  user: &quot;appuser&quot;,\n  pwd: &quot;SecureAppPassword123!&quot;,\n  roles: [\n    { role: &quot;readWrite&quot;, db: &quot;myapp&quot; }\n  ]\n})\n\n// Create backup user\nuse admin\ndb.createUser({\n  user: &quot;backup&quot;,\n  pwd: &quot;BackupPassword123!&quot;,\n  roles: [\n    { role: &quot;backup&quot;, db: &quot;admin&quot; },\n    { role: &quot;clusterMonitor&quot;, db: &quot;admin&quot; }\n  ]\n})\n\n// Create monitoring user\ndb.createUser({\n  user: &quot;monitor&quot;,\n  pwd: &quot;MonitorPassword123!&quot;,\n  roles: [\n    { role: &quot;clusterMonitor&quot;, db: &quot;admin&quot; },\n    { role: &quot;read&quot;, db: &quot;local&quot; }\n  ]\n})</code></pre>\n      </div>\n    </div>\n<h3 id=\"firewall-rules\" class=\"mobile-header\">Firewall Rules</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># UFW (Ubuntu/Debian)\nsudo ufw allow from 192.168.1.0/24 to any port 27017\nsudo ufw reload\n\n# firewalld (RHEL/CentOS/openSUSE)\nsudo firewall-cmd --permanent --new-zone=mongodb\nsudo firewall-cmd --permanent --zone=mongodb --add-source=192.168.1.0/24\nsudo firewall-cmd --permanent --zone=mongodb --add-port=27017/tcp\nsudo firewall-cmd --reload\n\n# iptables\nsudo iptables -A INPUT -s 192.168.1.0/24 -p tcp --dport 27017 -j ACCEPT\nsudo iptables-save &gt; /etc/iptables/rules.v4\n\n# pf (FreeBSD)\n# Add to /etc/pf.conf\npass in on $ext_if proto tcp from 192.168.1.0/24 to any port 27017\n\n# Windows Firewall\nNew-NetFirewallRule -DisplayName &quot;MongoDB&quot; -Direction Inbound -Protocol TCP -LocalPort 27017 -RemoteAddress 192.168.1.0/24 -Action Allow</code></pre>\n      </div>\n    </div>\n<h2 id=\"database-setup\" class=\"mobile-header\">Database Setup</h2>\n<h3 id=\"database-creation-and-management\" class=\"mobile-header\">Database Creation and Management</h3>\n<div class=\"mobile-code-block\" data-language=\"javascript\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">javascript</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-javascript\">// Create application database\nuse myapp\n\n// Create collections with validation\ndb.createCollection(&quot;users&quot;, {\n  validator: {\n    $jsonSchema: {\n      bsonType: &quot;object&quot;,\n      required: [&quot;username&quot;, &quot;email&quot;],\n      properties: {\n        username: {\n          bsonType: &quot;string&quot;,\n          description: &quot;must be a string and is required&quot;\n        },\n        email: {\n          bsonType: &quot;string&quot;,\n          pattern: &quot;^.+@.+$&quot;,\n          description: &quot;must be a valid email address&quot;\n        }\n      }\n    }\n  }\n})\n\n// Create indexes for performance\ndb.users.createIndex({ username: 1 }, { unique: true })\ndb.users.createIndex({ email: 1 }, { unique: true })\ndb.users.createIndex({ created_at: 1 })\n\n// Create time-series collection (MongoDB 5.0+)\ndb.createCollection(&quot;logs&quot;, {\n  timeseries: {\n    timeField: &quot;timestamp&quot;,\n    metaField: &quot;source&quot;,\n    granularity: &quot;minutes&quot;\n  }\n})</code></pre>\n      </div>\n    </div>\n<h3 id=\"database-optimization\" class=\"mobile-header\">Database Optimization</h3>\n<div class=\"mobile-code-block\" data-language=\"javascript\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">javascript</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-javascript\">// Analyze collection statistics\ndb.stats()\ndb.users.stats()\n\n// Check index usage\ndb.users.aggregate([{ $indexStats: {} }])\n\n// Optimize queries with explain\ndb.users.find({ username: &quot;john&quot; }).explain(&quot;executionStats&quot;)\n\n// Create compound indexes\ndb.orders.createIndex({ user_id: 1, created_at: -1 })\n\n// Text search index\ndb.products.createIndex({ name: &quot;text&quot;, description: &quot;text&quot; })</code></pre>\n      </div>\n    </div>\n<h2 id=\"performance-optimization\" class=\"mobile-header\">Performance Optimization</h2>\n<h3 id=\"system-tuning\" class=\"mobile-header\">System Tuning</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># MongoDB-specific system optimizations\nsudo tee -a /etc/sysctl.conf &lt;&lt;EOF\n# MongoDB optimizations\nvm.swappiness = 1\nvm.max_map_count = 262144\nnet.core.somaxconn = 4096\nnet.ipv4.tcp_fin_timeout = 30\nnet.ipv4.tcp_keepalive_time = 120\nnet.ipv4.tcp_max_syn_backlog = 4096\nEOF\n\nsudo sysctl -p\n\n# Disable Transparent Huge Pages\necho &#039;never&#039; | sudo tee /sys/kernel/mm/transparent_hugepage/enabled\necho &#039;never&#039; | sudo tee /sys/kernel/mm/transparent_hugepage/defrag\n\n# Make THP disable permanent\nsudo tee /etc/systemd/system/disable-thp.service &lt;&lt;EOF\n[Unit]\nDescription=Disable Transparent Huge Pages (THP)\nDefaultDependencies=no\nAfter=sysinit.target local-fs.target\nBefore=mongod.service\n\n[Service]\nType=oneshot\nExecStart=/bin/sh -c &#039;echo never | tee /sys/kernel/mm/transparent_hugepage/enabled &gt; /dev/null&#039;\nExecStart=/bin/sh -c &#039;echo never | tee /sys/kernel/mm/transparent_hugepage/defrag &gt; /dev/null&#039;\n\n[Install]\nWantedBy=basic.target\nEOF\n\nsudo systemctl enable --now disable-thp</code></pre>\n      </div>\n    </div>\n<h3 id=\"mongodb-performance-tuning\" class=\"mobile-header\">MongoDB Performance Tuning</h3>\n<div class=\"mobile-code-block\" data-language=\"yaml\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">yaml</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-yaml\"># High-performance MongoDB configuration\nstorage:\n  wiredTiger:\n    engineConfig:\n      cacheSizeGB: 8  # 50% of available RAM\n      journalCompressor: snappy\n      directoryForIndexes: true\n    collectionConfig:\n      blockCompressor: snappy\n    indexConfig:\n      prefixCompression: true\n\noperationProfiling:\n  mode: slowOp\n  slowOpThresholdMs: 100\n  slowOpSampleRate: 1.0\n\nnet:\n  maxIncomingConnections: 1000\n  serviceExecutor: adaptive\n\nsetParameter:\n  cursorTimeoutMillis: 600000\n  failIndexKeyTooLong: false\n  maxIndexBuildDrainBatchSize: 128\n  wiredTigerConcurrentReadTransactions: 128\n  wiredTigerConcurrentWriteTransactions: 128</code></pre>\n      </div>\n    </div>\n<h3 id=\"query-optimization\" class=\"mobile-header\">Query Optimization</h3>\n<div class=\"mobile-code-block\" data-language=\"javascript\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">javascript</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-javascript\">// Enable profiler for slow operations\ndb.setProfilingLevel(2, { slowms: 100 })\n\n// Analyze slow queries\ndb.system.profile.find().limit(5).sort({ ts: -1 }).pretty()\n\n// Index optimization\ndb.collection.getIndexes()\ndb.collection.dropIndex(&quot;index_name&quot;)\n\n// Use aggregation pipeline optimization\ndb.collection.aggregate([\n  { $match: { status: &quot;active&quot; } },\n  { $sort: { created_at: -1 } },\n  { $limit: 100 }\n], { allowDiskUse: true })</code></pre>\n      </div>\n    </div>\n<h2 id=\"monitoring\" class=\"mobile-header\">Monitoring</h2>\n<h3 id=\"built-in-monitoring\" class=\"mobile-header\">Built-in Monitoring</h3>\n<div class=\"mobile-code-block\" data-language=\"javascript\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">javascript</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-javascript\">// Server status and statistics\ndb.runCommand(&quot;serverStatus&quot;)\ndb.runCommand(&quot;dbStats&quot;)\ndb.runCommand(&quot;collStats&quot;, &quot;collection_name&quot;)\n\n// Connection and operation monitoring\ndb.runCommand(&quot;currentOp&quot;)\ndb.runCommand(&quot;top&quot;)\n\n// Replica set monitoring\nrs.status()\nrs.printReplicationInfo()\nrs.printSlaveReplicationInfo()\n\n// Sharding monitoring\nsh.status()\ndb.printShardingStatus()</code></pre>\n      </div>\n    </div>\n<h3 id=\"external-monitoring-setup\" class=\"mobile-header\">External Monitoring Setup</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Install MongoDB Exporter for Prometheus\nwget https://github.com/percona/mongodb_exporter/releases/download/v0.39.0/mongodb_exporter-0.39.0.linux-amd64.tar.gz\ntar xzf mongodb_exporter-*.tar.gz\nsudo cp mongodb_exporter /usr/local/bin/\n\n# Create systemd service\nsudo tee /etc/systemd/system/mongodb_exporter.service &lt;&lt;EOF\n[Unit]\nDescription=MongoDB Exporter\nAfter=network.target\n\n[Service]\nType=simple\nUser=mongodb\nEnvironment=MONGODB_URI=&quot;mongodb://monitor:MonitorPassword123!@localhost:27017/admin&quot;\nExecStart=/usr/local/bin/mongodb_exporter --mongodb.uri=\\$MONGODB_URI\nRestart=always\n\n[Install]\nWantedBy=multi-user.target\nEOF\n\nsudo systemctl enable --now mongodb_exporter</code></pre>\n      </div>\n    </div>\n<h3 id=\"health-check-scripts\" class=\"mobile-header\">Health Check Scripts</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\">#!/bin/bash\n# mongodb-health-check.sh\n\n# Check MongoDB service\nif ! systemctl is-active mongod &gt;/dev/null 2&gt;&amp;1; then\n    echo &quot;CRITICAL: MongoDB service is not running&quot;\n    exit 2\nfi\n\n# Check connectivity\nif ! mongosh --quiet --eval &quot;db.runCommand(&#039;ping&#039;)&quot; &gt;/dev/null 2&gt;&amp;1; then\n    echo &quot;CRITICAL: Cannot connect to MongoDB&quot;\n    exit 2\nfi\n\n# Check replica set status (if configured)\nREPLICA_STATUS=$(mongosh --quiet --eval &quot;rs.status().ok&quot; 2&gt;/dev/null)\nif [ &quot;$REPLICA_STATUS&quot; = &quot;1&quot; ]; then\n    PRIMARY_COUNT=$(mongosh --quiet --eval &quot;rs.status().members.filter(m =&gt; m.stateStr === &#039;PRIMARY&#039;).length&quot; 2&gt;/dev/null)\n    if [ &quot;$PRIMARY_COUNT&quot; != &quot;1&quot; ]; then\n        echo &quot;WARNING: No primary or multiple primaries in replica set&quot;\n        exit 1\n    fi\nfi\n\n# Check connections\nCONNECTIONS=$(mongosh --quiet --eval &quot;db.serverStatus().connections.current&quot; 2&gt;/dev/null)\nMAX_CONNECTIONS=$(mongosh --quiet --eval &quot;db.serverStatus().connections.available&quot; 2&gt;/dev/null)\nCONNECTION_USAGE=$((CONNECTIONS * 100 / (CONNECTIONS + MAX_CONNECTIONS)))\n\nif [ $CONNECTION_USAGE -gt 80 ]; then\n    echo &quot;WARNING: High connection usage: ${CONNECTION_USAGE}%&quot;\n    exit 1\nfi\n\necho &quot;OK: MongoDB is healthy&quot;\nexit 0</code></pre>\n      </div>\n    </div>\n<h2 id=\"backup-and-restore\" class=\"mobile-header\">Backup and Restore</h2>\n<h3 id=\"backup-procedures\" class=\"mobile-header\">Backup Procedures</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\">#!/bin/bash\n# mongodb-backup.sh\n\nBACKUP_DIR=&quot;/backup/mongodb/$(date +%Y%m%d_%H%M%S)&quot;\nmkdir -p &quot;$BACKUP_DIR&quot;\n\n# Full database backup\nmongodump \\\n  --host=&quot;localhost:27017&quot; \\\n  --username=backup \\\n  --password=BackupPassword123! \\\n  --authenticationDatabase=admin \\\n  --gzip \\\n  --out &quot;$BACKUP_DIR&quot;\n\n# Oplog backup for point-in-time recovery\nmongodump \\\n  --host=&quot;localhost:27017&quot; \\\n  --username=backup \\\n  --password=BackupPassword123! \\\n  --authenticationDatabase=admin \\\n  --db=local \\\n  --collection=oplog.rs \\\n  --gzip \\\n  --out &quot;$BACKUP_DIR/oplog&quot;\n\n# Configuration backup\ncp -r /etc/mongod.conf &quot;$BACKUP_DIR/&quot;\n\n# Compress backup\ntar czf &quot;$BACKUP_DIR.tar.gz&quot; -C &quot;$(dirname &quot;$BACKUP_DIR&quot;)&quot; &quot;$(basename &quot;$BACKUP_DIR&quot;)&quot;\nrm -rf &quot;$BACKUP_DIR&quot;\n\necho &quot;Backup completed: $BACKUP_DIR.tar.gz&quot;</code></pre>\n      </div>\n    </div>\n<h3 id=\"restore-procedures\" class=\"mobile-header\">Restore Procedures</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\">#!/bin/bash\n# mongodb-restore.sh\n\nBACKUP_FILE=&quot;$1&quot;\nif [ -z &quot;$BACKUP_FILE&quot; ]; then\n    echo &quot;Usage: $0 &lt;backup-file.tar.gz&gt;&quot;\n    exit 1\nfi\n\n# Extract backup\nBACKUP_DIR=&quot;/tmp/mongodb-restore-$(date +%s)&quot;\nmkdir -p &quot;$BACKUP_DIR&quot;\ntar xzf &quot;$BACKUP_FILE&quot; -C &quot;$BACKUP_DIR&quot; --strip-components=1\n\n# Stop applications using the database\necho &quot;Stopping applications...&quot;\n\n# Restore database\necho &quot;Restoring database from $BACKUP_FILE...&quot;\nmongorestore \\\n  --host=&quot;localhost:27017&quot; \\\n  --username=admin \\\n  --password=SecureAdminPassword123! \\\n  --authenticationDatabase=admin \\\n  --gzip \\\n  --drop \\\n  &quot;$BACKUP_DIR&quot;\n\n# Cleanup\nrm -rf &quot;$BACKUP_DIR&quot;\n\necho &quot;Restore completed&quot;</code></pre>\n      </div>\n    </div>\n<h3 id=\"point-in-time-recovery\" class=\"mobile-header\">Point-in-Time Recovery</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\">#!/bin/bash\n# mongodb-pitr.sh\n\nBACKUP_FILE=&quot;$1&quot;\nRECOVERY_TIME=&quot;$2&quot;\n\nif [ -z &quot;$BACKUP_FILE&quot; ] || [ -z &quot;$RECOVERY_TIME&quot; ]; then\n    echo &quot;Usage: $0 &lt;backup-file.tar.gz&gt; &lt;recovery-time&gt;&quot;\n    echo &quot;Example: $0 backup.tar.gz &#039;2024-01-15T14:30:00.000Z&#039;&quot;\n    exit 1\nfi\n\n# Extract and restore base backup\nBACKUP_DIR=&quot;/tmp/mongodb-pitr-$(date +%s)&quot;\nmkdir -p &quot;$BACKUP_DIR&quot;\ntar xzf &quot;$BACKUP_FILE&quot; -C &quot;$BACKUP_DIR&quot; --strip-components=1\n\n# Restore base backup\nmongorestore \\\n  --host=&quot;localhost:27017&quot; \\\n  --username=admin \\\n  --password=SecureAdminPassword123! \\\n  --authenticationDatabase=admin \\\n  --gzip \\\n  --drop \\\n  &quot;$BACKUP_DIR&quot;\n\n# Apply oplog up to recovery point\nmongorestore \\\n  --host=&quot;localhost:27017&quot; \\\n  --username=admin \\\n  --password=SecureAdminPassword123! \\\n  --authenticationDatabase=admin \\\n  --oplogReplay \\\n  --oplogLimit=&quot;$(date -d &quot;$RECOVERY_TIME&quot; +%s):1&quot; \\\n  --gzip \\\n  &quot;$BACKUP_DIR/oplog&quot;\n\n# Cleanup\nrm -rf &quot;$BACKUP_DIR&quot;\n\necho &quot;Point-in-time recovery completed to $RECOVERY_TIME&quot;</code></pre>\n      </div>\n    </div>\n<h2 id=\"troubleshooting\" class=\"mobile-header\">Troubleshooting</h2>\n<h3 id=\"common-issues\" class=\"mobile-header\">Common Issues</h3>\n<p class=\"mobile-paragraph\">1. <strong>MongoDB won't start</strong>:</p>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Check logs\nsudo journalctl -u mongod -f\nsudo tail -f /var/log/mongodb/mongod.log\n\n# Check disk space\ndf -h /var/lib/mongodb\n\n# Check permissions\nls -la /var/lib/mongodb\n\n# Repair database\nmongod --repair --dbpath /var/lib/mongodb</code></pre>\n      </div>\n    </div>\n<p class=\"mobile-paragraph\">2. <strong>Connection issues</strong>:</p>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Check if MongoDB is listening\nsudo ss -tlnp | grep :27017\n\n# Test local connection\nmongosh --eval &quot;db.runCommand(&#039;ping&#039;)&quot;\n\n# Check authentication\nmongosh admin --username admin\n\n# Check bind address\nmongosh --eval &quot;db.runCommand(&#039;getCmdLineOpts&#039;)&quot;</code></pre>\n      </div>\n    </div>\n<p class=\"mobile-paragraph\">3. <strong>Performance issues</strong>:</p>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Check slow queries\nmongosh --eval &quot;db.setProfilingLevel(2, {slowms: 100})&quot;\nmongosh --eval &quot;db.system.profile.find().sort({ts:-1}).limit(5)&quot;\n\n# Check index usage\nmongosh --eval &quot;db.collection.getIndexes()&quot;\n\n# Check server status\nmongosh --eval &quot;db.serverStatus()&quot;</code></pre>\n      </div>\n    </div>\n<h3 id=\"debug-mode\" class=\"mobile-header\">Debug Mode</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Start MongoDB with verbose logging\nsudo systemctl edit mongod\n# Add:\n[Service]\nEnvironment=&quot;MONGOD_OPTIONS=--verbose&quot;\n\nsudo systemctl daemon-reload\nsudo systemctl restart mongod\n\n# Enable profiling for all operations\nmongosh --eval &quot;db.setProfilingLevel(2)&quot;\n\n# View debug logs\nsudo tail -f /var/log/mongodb/mongod.log</code></pre>\n      </div>\n    </div>\n<h2 id=\"maintenance\" class=\"mobile-header\">Maintenance</h2>\n<h3 id=\"update-procedures\" class=\"mobile-header\">Update Procedures</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># RHEL/CentOS/Rocky/AlmaLinux\nsudo yum check-update mongodb-org\nsudo yum update mongodb-org\n\n# Debian/Ubuntu\nsudo apt update\nsudo apt upgrade mongodb-org\n\n# Arch Linux\nyay -Syu mongodb-bin\n\n# macOS\nbrew upgrade mongodb-community@7.0\n\n# Docker (Alpine/FreeBSD)\ndocker pull mongo:7.0\ndocker stop mongodb\ndocker rm mongodb\n# Re-run docker run command with new image\n\n# Always backup before updates\n./mongodb-backup.sh\n\n# Restart after updates\nsudo systemctl restart mongod</code></pre>\n      </div>\n    </div>\n<h3 id=\"maintenance-tasks\" class=\"mobile-header\">Maintenance Tasks</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Weekly maintenance script\n#!/bin/bash\n# mongodb-maintenance.sh\n\n# Compact collections\nmongosh admin --username admin --password SecureAdminPassword123! &lt;&lt;EOF\nuse myapp\ndb.runCommand({compact: &quot;collection_name&quot;})\nEOF\n\n# Update collection statistics\nmongosh admin --username admin --password SecureAdminPassword123! &lt;&lt;EOF\ndb.runCommand({planCacheClear: &quot;&quot;})\nEOF\n\n# Clean up old oplogs (automatically managed but can be tuned)\nmongosh admin --username admin --password SecureAdminPassword123! &lt;&lt;EOF\nuse local\ndb.oplog.rs.find().sort({\\$natural:-1}).limit(1)\nEOF\n\necho &quot;MongoDB maintenance completed&quot;</code></pre>\n      </div>\n    </div>\n<h3 id=\"health-monitoring\" class=\"mobile-header\">Health Monitoring</h3>\n<div class=\"mobile-code-block\" data-language=\"bash\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">bash</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-bash\"># Create monitoring cron job\necho &quot;*/5 * * * * /usr/local/bin/mongodb-health-check.sh&quot; | sudo crontab -\n\n# Log rotation\nsudo tee /etc/logrotate.d/mongodb &lt;&lt;EOF\n/var/log/mongodb/*.log {\n    daily\n    rotate 7\n    compress\n    delaycompress\n    missingok\n    notifempty\n    create 644 mongodb mongodb\n    postrotate\n        /bin/kill -SIGUSR1 \\$(cat /var/run/mongodb/mongod.pid 2&gt;/dev/null) 2&gt;/dev/null || true\n    endscript\n}\nEOF</code></pre>\n      </div>\n    </div>\n<h2 id=\"integration-examples\" class=\"mobile-header\">Integration Examples</h2>\n<h3 id=\"nodejs-integration\" class=\"mobile-header\">Node.js Integration</h3>\n<div class=\"mobile-code-block\" data-language=\"javascript\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">javascript</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-javascript\">// Using MongoDB Node.js driver\nconst { MongoClient } = require(&#039;mongodb&#039;);\n\nconst client = new MongoClient(&#039;mongodb://appuser:SecureAppPassword123!@localhost:27017/myapp&#039;, {\n  tls: true,\n  tlsCertificateKeyFile: &#039;/etc/mongodb/ssl/client.pem&#039;,\n  tlsCAFile: &#039;/etc/mongodb/ssl/ca.pem&#039;,\n  authSource: &#039;myapp&#039;\n});\n\nasync function connect() {\n  await client.connect();\n  const db = client.db(&#039;myapp&#039;);\n  return db;\n}</code></pre>\n      </div>\n    </div>\n<h3 id=\"python-integration\" class=\"mobile-header\">Python Integration</h3>\n<div class=\"mobile-code-block\" data-language=\"python\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">python</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-python\"># Using PyMongo\nimport pymongo\nfrom pymongo import MongoClient\n\nclient = MongoClient(&#039;mongodb://appuser:SecureAppPassword123!@localhost:27017/myapp&#039;, \n                    tls=True,\n                    tlsCertificateKeyFile=&#039;/etc/mongodb/ssl/client.pem&#039;,\n                    tlsCAFile=&#039;/etc/mongodb/ssl/ca.pem&#039;,\n                    authSource=&#039;myapp&#039;)\n\ndb = client.myapp\ncollection = db.users</code></pre>\n      </div>\n    </div>\n<h3 id=\"java-integration\" class=\"mobile-header\">Java Integration</h3>\n<div class=\"mobile-code-block\" data-language=\"java\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">java</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-java\">// Using MongoDB Java driver\nimport com.mongodb.client.MongoClients;\nimport com.mongodb.client.MongoClient;\nimport com.mongodb.client.MongoDatabase;\nimport com.mongodb.MongoClientSettings;\nimport com.mongodb.ConnectionString;\n\nMongoClientSettings settings = MongoClientSettings.builder()\n    .applyConnectionString(new ConnectionString(&quot;mongodb://appuser:SecureAppPassword123!@localhost:27017/myapp&quot;))\n    .applyToSslSettings(builder -&gt; \n        builder.enabled(true)\n               .invalidHostNameAllowed(false))\n    .build();\n\nMongoClient mongoClient = MongoClients.create(settings);\nMongoDatabase database = mongoClient.getDatabase(&quot;myapp&quot;);</code></pre>\n      </div>\n    </div>\n<h3 id=\"expressjs-integration\" class=\"mobile-header\">Express.js Integration</h3>\n<div class=\"mobile-code-block\" data-language=\"javascript\">\n      <div class=\"mobile-code-header\">\n        <span class=\"mobile-code-language\">javascript</span>\n        <button class=\"mobile-copy-button\" onclick=\"copyCode(this)\" title=\"Copy code\">\n          <span class=\"copy-icon\">ðŸ“‹</span>\n          <span class=\"copy-text\">Copy</span>\n        </button>\n      </div>\n      <div class=\"mobile-code-content\">\n        <pre><code class=\"language-javascript\">// Using Mongoose ODM\nconst mongoose = require(&#039;mongoose&#039;);\n\nmongoose.connect(&#039;mongodb://appuser:SecureAppPassword123!@localhost:27017/myapp&#039;, {\n  tls: true,\n  tlsCertificateKeyFile: &#039;/etc/mongodb/ssl/client.pem&#039;,\n  tlsCAFile: &#039;/etc/mongodb/ssl/ca.pem&#039;,\n  authSource: &#039;myapp&#039;\n});\n\nconst userSchema = new mongoose.Schema({\n  username: { type: String, required: true, unique: true },\n  email: { type: String, required: true, unique: true },\n  created_at: { type: Date, default: Date.now }\n});\n\nmodule.exports = mongoose.model(&#039;User&#039;, userSchema);</code></pre>\n      </div>\n    </div>\n<h2 id=\"additional-resources\" class=\"mobile-header\">Additional Resources</h2>\n<li class=\"mobile-list-item\"><a href=\"https://docs.mongodb.com/\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">Official MongoDB Documentation</a></li>\n<li class=\"mobile-list-item\"><a href=\"https://university.mongodb.com/\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">MongoDB University</a></li>\n<li class=\"mobile-list-item\"><a href=\"https://docs.mongodb.com/manual/administration/security-checklist/\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">MongoDB Security Checklist</a></li>\n<li class=\"mobile-list-item\"><a href=\"https://docs.mongodb.com/manual/administration/analyzing-mongodb-performance/\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">MongoDB Performance Best Practices</a></li>\n<li class=\"mobile-list-item\"><a href=\"https://docs.mongodb.com/manual/tutorial/deploy-replica-set/\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">Replica Set Tutorial</a></li>\n<li class=\"mobile-list-item\"><a href=\"https://docs.mongodb.com/manual/tutorial/deploy-shard-cluster/\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">Sharding Tutorial</a></li>\n<li class=\"mobile-list-item\"><a href=\"https://developer.mongodb.com/community/forums/\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">MongoDB Community Forum</a></li>\n<li class=\"mobile-list-item\"><a href=\"https://www.mongodb.com/blog\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">MongoDB Blog</a></li>\n<p class=\"mobile-paragraph\">---</p>\n<p class=\"mobile-paragraph\"><strong>Note:</strong> This guide is part of the <a href=\"https://howtomgr.github.io\" target=\"_blank\" rel=\"noopener\" class=\"mobile-link\">HowToMgr</a> collection. Always refer to official documentation for the most up-to-date information.</p>","readTime":"16 min","wordCount":3152,"lastBuilt":"2025-09-16T02:44:56.943Z"}]},"__N_SSG":true}